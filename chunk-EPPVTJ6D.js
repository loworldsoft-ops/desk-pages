import {
  MatSliderModule
} from "./chunk-GB4ZY5QU.js";
import {
  GeminiAiService
} from "./chunk-HIMIV3T4.js";
import {
  NotificationService
} from "./chunk-6QCW3KSZ.js";
import {
  MatCheckboxModule
} from "./chunk-J3HFPNBL.js";
import {
  MatTabsModule
} from "./chunk-VN4H2GKT.js";
import {
  CryptoUtil
} from "./chunk-G2D7UUZA.js";
import {
  MatMenu,
  MatMenuItem,
  MatMenuModule,
  MatMenuTrigger
} from "./chunk-3USWDC62.js";
import {
  MatProgressSpinner,
  MatProgressSpinnerModule
} from "./chunk-DZVWUGGM.js";
import {
  MatChipsModule
} from "./chunk-SVWY7C6P.js";
import "./chunk-GJJ4NKAQ.js";
import {
  MatSnackBar
} from "./chunk-XGFL2WJQ.js";
import {
  CdkDrag,
  CdkDragHandle,
  CdkDragPreview,
  CdkDropList,
  DragDropModule,
  SharedModule,
  UnifiedLoginComponent,
  animate,
  state,
  style,
  transition,
  trigger
} from "./chunk-5LDCF6IY.js";
import "./chunk-FFJ4GMB5.js";
import {
  DebugLoggerService
} from "./chunk-IEXL5CIB.js";
import {
  environment
} from "./chunk-G4JOAHZY.js";
import "./chunk-Z6AVJA4A.js";
import "./chunk-OWKVH3DN.js";
import {
  MatSelectModule
} from "./chunk-66OK2TSW.js";
import "./chunk-F5RTWLKS.js";
import "./chunk-NQ2UJILS.js";
import {
  MatFormFieldModule,
  MatInputModule
} from "./chunk-ZNLLQ5N3.js";
import {
  MatIcon,
  MatIconModule
} from "./chunk-TBJT6P6X.js";
import {
  MAT_DIALOG_DATA,
  MatDialog,
  MatDialogModule,
  MatDialogRef
} from "./chunk-EWZCM5ON.js";
import {
  MatButton,
  MatButtonModule,
  MatIconButton
} from "./chunk-5Z7BUDXM.js";
import {
  ActivatedRoute,
  Router,
  RouterModule
} from "./chunk-BE5X2S7S.js";
import {
  DomSanitizer
} from "./chunk-OYJIDA3L.js";
import {
  CheckboxControlValueAccessor,
  DefaultValueAccessor,
  MaxLengthValidator,
  NgControlStatus,
  NgModel,
  NgSelectOption,
  SelectControlValueAccessor,
  ɵNgSelectMultipleOption
} from "./chunk-X67QRSHQ.js";
import {
  AsyncPipe,
  BehaviorSubject,
  ChangeDetectorRef,
  CommonModule,
  Component,
  DatePipe,
  DecimalPipe,
  EventEmitter,
  Inject,
  Injectable,
  Input,
  NgClass,
  NgForOf,
  NgIf,
  NgModule,
  Output,
  Subject,
  ViewChild,
  computed,
  debounceTime,
  distinctUntilChanged,
  firstValueFrom,
  fromEvent,
  inject,
  map,
  setClassMetadata,
  signal,
  takeUntil,
  ɵsetClassDebugInfo,
  ɵɵNgOnChangesFeature,
  ɵɵadvance,
  ɵɵattribute,
  ɵɵclassMap,
  ɵɵclassProp,
  ɵɵdefineComponent,
  ɵɵdefineInjectable,
  ɵɵdefineInjector,
  ɵɵdefineNgModule,
  ɵɵdirectiveInject,
  ɵɵelement,
  ɵɵelementContainerEnd,
  ɵɵelementContainerStart,
  ɵɵelementEnd,
  ɵɵelementStart,
  ɵɵgetCurrentView,
  ɵɵinject,
  ɵɵlistener,
  ɵɵloadQuery,
  ɵɵnamespaceHTML,
  ɵɵnamespaceSVG,
  ɵɵnextContext,
  ɵɵpipe,
  ɵɵpipeBind1,
  ɵɵpipeBind2,
  ɵɵproperty,
  ɵɵpureFunction0,
  ɵɵpureFunction1,
  ɵɵpureFunction2,
  ɵɵpureFunction4,
  ɵɵqueryRefresh,
  ɵɵreference,
  ɵɵresetView,
  ɵɵrestoreView,
  ɵɵsanitizeHtml,
  ɵɵstyleProp,
  ɵɵtemplate,
  ɵɵtemplateRefExtractor,
  ɵɵtext,
  ɵɵtextInterpolate,
  ɵɵtextInterpolate1,
  ɵɵtextInterpolate2,
  ɵɵtextInterpolate3,
  ɵɵtextInterpolate4,
  ɵɵtwoWayBindingSet,
  ɵɵtwoWayListener,
  ɵɵtwoWayProperty,
  ɵɵviewQuery
} from "./chunk-WY5M3RVA.js";
import {
  __async,
  __spreadProps,
  __spreadValues
} from "./chunk-N6ESDQJH.js";

// src/app/modules/novel/components/confirm-dialog/confirm-dialog.component.ts
function ConfirmDialogComponent_p_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p", 10);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(ctx_r0.data.verdict);
  }
}
var ConfirmDialogComponent = class _ConfirmDialogComponent {
  dialogRef;
  data;
  sanitizer;
  sanitizedMessage;
  isComparisonDialog;
  constructor(dialogRef, data, sanitizer) {
    this.dialogRef = dialogRef;
    this.data = data;
    this.sanitizer = sanitizer;
    this.sanitizedMessage = this.sanitizer.bypassSecurityTrustHtml(data.message);
    this.isComparisonDialog = data.title?.includes("\uBE44\uAD50") || false;
  }
  onCancel() {
    this.dialogRef.close(false);
  }
  onConfirm() {
    this.dialogRef.close(true);
  }
  static \u0275fac = function ConfirmDialogComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ConfirmDialogComponent)(\u0275\u0275directiveInject(MatDialogRef), \u0275\u0275directiveInject(MAT_DIALOG_DATA), \u0275\u0275directiveInject(DomSanitizer));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _ConfirmDialogComponent, selectors: [["app-confirm-dialog"]], decls: 18, vars: 10, consts: [[1, "confirm-dialog"], [1, "dialog-header"], [1, "icon-wrapper"], ["mat-icon-button", "", 1, "close-btn", 3, "click"], [1, "dialog-content"], [1, "message-content", 3, "innerHTML"], ["class", "verdict", 4, "ngIf"], [1, "dialog-actions"], ["mat-button", "", 1, "cancel-btn", 3, "click"], ["mat-raised-button", "", 1, "confirm-btn", 3, "click"], [1, "verdict"]], template: function ConfirmDialogComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0)(1, "div", 1)(2, "div", 2)(3, "mat-icon");
      \u0275\u0275text(4);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(5, "button", 3);
      \u0275\u0275listener("click", function ConfirmDialogComponent_Template_button_click_5_listener() {
        return ctx.onCancel();
      });
      \u0275\u0275elementStart(6, "mat-icon");
      \u0275\u0275text(7, "close");
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(8, "div", 4)(9, "h2");
      \u0275\u0275text(10);
      \u0275\u0275elementEnd();
      \u0275\u0275element(11, "div", 5);
      \u0275\u0275template(12, ConfirmDialogComponent_p_12_Template, 2, 1, "p", 6);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(13, "div", 7)(14, "button", 8);
      \u0275\u0275listener("click", function ConfirmDialogComponent_Template_button_click_14_listener() {
        return ctx.onCancel();
      });
      \u0275\u0275text(15);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(16, "button", 9);
      \u0275\u0275listener("click", function ConfirmDialogComponent_Template_button_click_16_listener() {
        return ctx.onConfirm();
      });
      \u0275\u0275text(17);
      \u0275\u0275elementEnd()()();
    }
    if (rf & 2) {
      \u0275\u0275classProp("comparison-dialog", ctx.isComparisonDialog);
      \u0275\u0275advance(2);
      \u0275\u0275classProp("comparison-icon", ctx.isComparisonDialog);
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate(ctx.isComparisonDialog ? "compare_arrows" : "help_outline");
      \u0275\u0275advance(6);
      \u0275\u0275textInterpolate(ctx.data.title || "\uD655\uC778");
      \u0275\u0275advance();
      \u0275\u0275property("innerHTML", ctx.sanitizedMessage, \u0275\u0275sanitizeHtml);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.data.verdict);
      \u0275\u0275advance(3);
      \u0275\u0275textInterpolate1(" ", ctx.data.cancelText || "\uCDE8\uC18C", " ");
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate1(" ", ctx.data.confirmText || "\uD655\uC778", " ");
    }
  }, dependencies: [CommonModule, NgIf, MatDialogModule, MatButtonModule, MatButton, MatIconButton, MatIconModule, MatIcon], styles: ['@charset "UTF-8";\n\n\n\n.confirm-dialog[_ngcontent-%COMP%] {\n  padding: 0;\n  background: var(--bg-primary, #ffffff);\n  border-radius: 16px;\n  min-width: 400px;\n  max-width: 500px;\n  overflow: hidden;\n}\n.confirm-dialog.comparison-dialog[_ngcontent-%COMP%] {\n  min-width: 700px;\n  max-width: 900px;\n}\n.dialog-header[_ngcontent-%COMP%] {\n  position: relative;\n  padding: 24px 24px 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n}\n.icon-wrapper[_ngcontent-%COMP%] {\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n.icon-wrapper.comparison-icon[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6 0%,\n      #8b5cf6 100%);\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n}\n.icon-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\n  color: white;\n  font-size: 28px;\n  width: 28px;\n  height: 28px;\n}\n.close-btn[_ngcontent-%COMP%] {\n  color: var(--text-secondary, #666);\n  width: 32px;\n  height: 32px;\n}\n.close-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n  width: 20px;\n  height: 20px;\n}\n.close-btn[_ngcontent-%COMP%]:hover {\n  background: var(--bg-hover, #f5f5f5);\n}\n.dialog-content[_ngcontent-%COMP%] {\n  padding: 20px 24px 24px;\n}\n.dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  margin: 0 0 12px 0;\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--text-primary, #212529);\n  line-height: 1.3;\n}\n.dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%] {\n  font-size: 16px;\n  line-height: 1.6;\n  color: var(--text-secondary, #666);\n}\n.dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 16px;\n  line-height: 1.6;\n  color: var(--text-secondary, #666);\n}\n.dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%] {\n  margin-top: 16px;\n  padding: 12px 16px;\n  background: var(--bg-secondary, #f8f9fa);\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: 15px;\n  color: var(--accent-primary, #667eea);\n  text-align: center;\n}\n.dialog-actions[_ngcontent-%COMP%] {\n  padding: 16px 24px 24px;\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n}\n.cancel-btn[_ngcontent-%COMP%] {\n  min-width: 100px;\n  height: 44px;\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: 15px;\n  color: var(--text-secondary, #666);\n  background: transparent;\n  border: 1px solid var(--border-color, #e0e0e0);\n  transition: all 0.2s ease;\n}\n.cancel-btn[_ngcontent-%COMP%]:hover {\n  background: var(--bg-hover, #f5f5f5);\n  border-color: var(--text-secondary, #666);\n}\n.confirm-btn[_ngcontent-%COMP%] {\n  min-width: 100px;\n  height: 44px;\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: 15px;\n  color: white;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n  transition: all 0.2s ease;\n}\n.confirm-btn[_ngcontent-%COMP%]:hover {\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n  transform: translateY(-1px);\n}\n.confirm-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n}\nbody.dark-theme[_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%] {\n  background: #1a1a2e !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  color: #f5f5f7 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%], \nbody.dark-theme[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: #8e8e93 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%] {\n  background: #2d2d44 !important;\n  color: #3b82f6 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%] {\n  color: #8e8e93 !important;\n  border-color: #2d2d44 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, \nbody.dark-mode[_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, \n[data-theme=dark][_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover {\n  background: #2d2d44 !important;\n  border-color: #8e8e93 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  color: #8e8e93 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, \nbody.dark-mode[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, \n[data-theme=dark][_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: #2d2d44 !important;\n}\n@keyframes _ngcontent-%COMP%_fadeIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n.confirm-dialog[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_fadeIn 0.2s ease-out;\n}\n/*# sourceMappingURL=confirm-dialog.component.css.map */'] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ConfirmDialogComponent, [{
    type: Component,
    args: [{ selector: "app-confirm-dialog", standalone: true, imports: [CommonModule, MatDialogModule, MatButtonModule, MatIconModule], template: `
    <div class="confirm-dialog" [class.comparison-dialog]="isComparisonDialog">
      <div class="dialog-header">
        <div class="icon-wrapper" [class.comparison-icon]="isComparisonDialog">
          <mat-icon>{{ isComparisonDialog ? 'compare_arrows' : 'help_outline' }}</mat-icon>
        </div>
        <button mat-icon-button class="close-btn" (click)="onCancel()">
          <mat-icon>close</mat-icon>
        </button>
      </div>
      
      <div class="dialog-content">
        <h2>{{ data.title || '\uD655\uC778' }}</h2>
        <div class="message-content" [innerHTML]="sanitizedMessage"></div>
        <p class="verdict" *ngIf="data.verdict">{{ data.verdict }}</p>
      </div>
      
      <div class="dialog-actions">
        <button mat-button class="cancel-btn" (click)="onCancel()">
          {{ data.cancelText || '\uCDE8\uC18C' }}
        </button>
        <button mat-raised-button class="confirm-btn" (click)="onConfirm()">
          {{ data.confirmText || '\uD655\uC778' }}
        </button>
      </div>
    </div>
  `, styles: ['@charset "UTF-8";\n\n/* angular:styles/component:scss;51e9af30f45d35550223ae29fd9607b2cb26b12579207bb94f23fa2f7a5583fa;/Users/ansanghyun/Documents/IA/loworld_ai/src/app/modules/novel/components/confirm-dialog/confirm-dialog.component.ts */\n.confirm-dialog {\n  padding: 0;\n  background: var(--bg-primary, #ffffff);\n  border-radius: 16px;\n  min-width: 400px;\n  max-width: 500px;\n  overflow: hidden;\n}\n.confirm-dialog.comparison-dialog {\n  min-width: 700px;\n  max-width: 900px;\n}\n.dialog-header {\n  position: relative;\n  padding: 24px 24px 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n}\n.icon-wrapper {\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n.icon-wrapper.comparison-icon {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6 0%,\n      #8b5cf6 100%);\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n}\n.icon-wrapper mat-icon {\n  color: white;\n  font-size: 28px;\n  width: 28px;\n  height: 28px;\n}\n.close-btn {\n  color: var(--text-secondary, #666);\n  width: 32px;\n  height: 32px;\n}\n.close-btn mat-icon {\n  font-size: 20px;\n  width: 20px;\n  height: 20px;\n}\n.close-btn:hover {\n  background: var(--bg-hover, #f5f5f5);\n}\n.dialog-content {\n  padding: 20px 24px 24px;\n}\n.dialog-content h2 {\n  margin: 0 0 12px 0;\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--text-primary, #212529);\n  line-height: 1.3;\n}\n.dialog-content .message-content {\n  font-size: 16px;\n  line-height: 1.6;\n  color: var(--text-secondary, #666);\n}\n.dialog-content p {\n  margin: 0;\n  font-size: 16px;\n  line-height: 1.6;\n  color: var(--text-secondary, #666);\n}\n.dialog-content .verdict {\n  margin-top: 16px;\n  padding: 12px 16px;\n  background: var(--bg-secondary, #f8f9fa);\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: 15px;\n  color: var(--accent-primary, #667eea);\n  text-align: center;\n}\n.dialog-actions {\n  padding: 16px 24px 24px;\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n}\n.cancel-btn {\n  min-width: 100px;\n  height: 44px;\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: 15px;\n  color: var(--text-secondary, #666);\n  background: transparent;\n  border: 1px solid var(--border-color, #e0e0e0);\n  transition: all 0.2s ease;\n}\n.cancel-btn:hover {\n  background: var(--bg-hover, #f5f5f5);\n  border-color: var(--text-secondary, #666);\n}\n.confirm-btn {\n  min-width: 100px;\n  height: 44px;\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: 15px;\n  color: white;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n  transition: all 0.2s ease;\n}\n.confirm-btn:hover {\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n  transform: translateY(-1px);\n}\n.confirm-btn:active {\n  transform: translateY(0);\n}\n:host-context(body.dark-theme) .confirm-dialog,\n:host-context(body.dark-mode) .confirm-dialog,\n:host-context([data-theme=dark]) .confirm-dialog {\n  background: #1a1a2e !important;\n}\n:host-context(body.dark-theme) .dialog-content h2,\n:host-context(body.dark-mode) .dialog-content h2,\n:host-context([data-theme=dark]) .dialog-content h2 {\n  color: #f5f5f7 !important;\n}\n:host-context(body.dark-theme) .dialog-content .message-content,\n:host-context(body.dark-theme) .dialog-content p,\n:host-context(body.dark-mode) .dialog-content .message-content,\n:host-context(body.dark-mode) .dialog-content p,\n:host-context([data-theme=dark]) .dialog-content .message-content,\n:host-context([data-theme=dark]) .dialog-content p {\n  color: #8e8e93 !important;\n}\n:host-context(body.dark-theme) .dialog-content .verdict,\n:host-context(body.dark-mode) .dialog-content .verdict,\n:host-context([data-theme=dark]) .dialog-content .verdict {\n  background: #2d2d44 !important;\n  color: #3b82f6 !important;\n}\n:host-context(body.dark-theme) .cancel-btn,\n:host-context(body.dark-mode) .cancel-btn,\n:host-context([data-theme=dark]) .cancel-btn {\n  color: #8e8e93 !important;\n  border-color: #2d2d44 !important;\n}\n:host-context(body.dark-theme) .cancel-btn:hover,\n:host-context(body.dark-mode) .cancel-btn:hover,\n:host-context([data-theme=dark]) .cancel-btn:hover {\n  background: #2d2d44 !important;\n  border-color: #8e8e93 !important;\n}\n:host-context(body.dark-theme) .close-btn,\n:host-context(body.dark-mode) .close-btn,\n:host-context([data-theme=dark]) .close-btn {\n  color: #8e8e93 !important;\n}\n:host-context(body.dark-theme) .close-btn:hover,\n:host-context(body.dark-mode) .close-btn:hover,\n:host-context([data-theme=dark]) .close-btn:hover {\n  background: #2d2d44 !important;\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n.confirm-dialog {\n  animation: fadeIn 0.2s ease-out;\n}\n/*# sourceMappingURL=confirm-dialog.component.css.map */\n'] }]
  }], () => [{ type: MatDialogRef }, { type: void 0, decorators: [{
    type: Inject,
    args: [MAT_DIALOG_DATA]
  }] }, { type: DomSanitizer }], null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(ConfirmDialogComponent, { className: "ConfirmDialogComponent", filePath: "src/app/modules/novel/components/confirm-dialog/confirm-dialog.component.ts", lineNumber: 250 });
})();

// src/app/modules/novel/models/diablo-item.model.ts
var ItemRarity;
(function(ItemRarity2) {
  ItemRarity2["COMMON"] = "common";
  ItemRarity2["UNCOMMON"] = "uncommon";
  ItemRarity2["RARE"] = "rare";
  ItemRarity2["EPIC"] = "epic";
  ItemRarity2["LEGENDARY"] = "legendary";
  ItemRarity2["UNIQUE"] = "unique";
  ItemRarity2["MYTHIC"] = "mythic";
})(ItemRarity || (ItemRarity = {}));
var ItemType;
(function(ItemType2) {
  ItemType2["WEAPON"] = "weapon";
  ItemType2["ARMOR"] = "armor";
  ItemType2["ACCESSORY"] = "accessory";
})(ItemType || (ItemType = {}));
var WeaponCategory;
(function(WeaponCategory2) {
  WeaponCategory2["AXE"] = "\uB3C4\uB07C";
  WeaponCategory2["SWORD"] = "\uAC80";
  WeaponCategory2["DAGGER"] = "\uB2E8\uAC80";
  WeaponCategory2["MACE"] = "\uCCA0\uD1F4";
  WeaponCategory2["BOW"] = "\uD65C";
  WeaponCategory2["CROSSBOW"] = "\uC1E0\uB1CC";
  WeaponCategory2["STAFF"] = "\uC9C0\uD321\uC774";
  WeaponCategory2["WAND"] = "\uB9C8\uBC95\uBD09";
  WeaponCategory2["SCYTHE"] = "\uB0AB";
  WeaponCategory2["POLEARM"] = "\uC721\uCC99\uBD09";
  WeaponCategory2["GLAIVE"] = "\uAE00\uB808\uC774\uBE0C";
  WeaponCategory2["TOTEM"] = "\uD1A0\uD15C";
  WeaponCategory2["FOCUS"] = "\uC911\uC2EC\uC810";
})(WeaponCategory || (WeaponCategory = {}));
var ArmorSlot;
(function(ArmorSlot2) {
  ArmorSlot2["HEAD"] = "\uD22C\uAD6C";
  ArmorSlot2["CHEST"] = "\uAC00\uC2B4 \uBC29\uC5B4\uAD6C";
  ArmorSlot2["HANDS"] = "\uC7A5\uAC11";
  ArmorSlot2["LEGS"] = "\uBC14\uC9C0";
  ArmorSlot2["FEET"] = "\uC7A5\uD654";
})(ArmorSlot || (ArmorSlot = {}));

// src/app/modules/novel/data/diablo-items.data.ts
var DIABLO_ITEMS = [
  // ID 1: 차오르는 철월 (고유 도끼)
  {
    id: 1,
    name: "Waxing Gibbous",
    nameKo: "\uCC28\uC624\uB974\uB294 \uCCA0\uC6D4",
    rarity: ItemRarity.UNIQUE,
    type: ItemType.WEAPON,
    category: WeaponCategory.AXE,
    attackSpeed: "\uBE60\uB984",
    attacksPerSecond: 1.1,
    favorites: 7,
    tags: ["\uACE0\uC720", "\uB3C4\uB07C"],
    stats: [
      {
        name: "\uCD08\uB2F9 \uACF5\uACA9 \uD69F\uC218",
        value: "1.10 (\uBE60\uB984)",
        type: "special"
      },
      {
        name: "\uCE7C\uB0A0 \uBC1C\uD1B1\uC774 \uB450 \uBC30\uC758 \uD53C\uD574\uB97C \uC904 \uD655\uB960",
        value: "+50.0%",
        type: "damage"
      },
      {
        name: "\uADF9\uB300\uD654 \uD53C\uD574",
        value: "+[88.0-115.0]%",
        type: "critical"
      },
      {
        name: "\uD53C\uC758 \uC6B8\uBD80\uC9D6\uC74C\uC774 \uBD80\uC5EC\uD558\uB294 \uC740\uD3D0",
        value: "+[2.2-3.0]\uCD08",
        type: "special"
      },
      {
        name: "\uCE7C\uB0A0 \uBC1C\uD1B1",
        value: "+[2-4]",
        type: "special"
      },
      {
        name: "\uB3C5\uC131 \uBC1C\uD1B1",
        value: "+[1-2]",
        type: "special"
      }
    ],
    uniqueEffect: "\uCE7C\uB0A0 \uBC1C\uD1B1\uC73C\uB85C \uC801\uC744 \uCC98\uCE58\uD558\uBA74 2\uCD08 \uB3D9\uC548 \uC740\uD3D0\uB97C \uC5BB\uC2B5\uB2C8\uB2E4. \uACF5\uACA9\uD574 \uC740\uD3D0\uAC00 \uC885\uB8CC\uB418\uBA74 1.0-4.0\uCD08 \uB3D9\uC548 \uD655\uC815\uC801\uC73C\uB85C \uADF9\uB300\uD654 \uACF5\uACA9\uD569\uB2C8\uB2E4.",
    classRestriction: ["\uB4DC\uB8E8\uC774\uB4DC"]
  },
  // ID 2: 도살자의 식칼 (고유 도끼)
  {
    id: 2,
    name: "Butcher's Cleaver",
    nameKo: "\uB3C4\uC0B4\uC790\uC758 \uC2DD\uCE7C",
    rarity: ItemRarity.UNIQUE,
    type: ItemType.WEAPON,
    category: WeaponCategory.AXE,
    attackSpeed: "\uBE60\uB984",
    attacksPerSecond: 1.1,
    favorites: 10,
    tags: ["\uACE0\uC720", "\uB3C4\uB07C"],
    stats: [
      {
        name: "\uCD08\uB2F9 \uACF5\uACA9 \uD69F\uC218",
        value: "1.10 (\uBE60\uB984)",
        type: "special"
      },
      {
        name: "\uBD80\uC0C1\uB2F9\uD55C \uC801\uC5D0\uAC8C \uC8FC\uB294 \uD53C\uD574",
        value: "+175.0%",
        type: "damage"
      },
      {
        name: "\uACF5\uD3EC \uC801\uC5D0 \uB300\uD55C \uADF9\uB300\uD654 \uD655\uB960",
        value: "+[16.0-25.0]%",
        type: "critical"
      },
      {
        name: "\uC774\uB3D9 \uC18D\uB3C4",
        value: "+[17.5-23.0]%",
        type: "special"
      },
      {
        name: "\uACF5\uACA9 \uC18D\uB3C4",
        value: "+[8.3-10.0]%",
        type: "special"
      },
      {
        name: "\uBB3C\uB9AC \uD53C\uD574",
        value: "+[62.5-85.0]%",
        type: "damage"
      }
    ],
    uniqueEffect: "\uD589\uC6B4\uC758 \uC801\uC911: \uC801\uC5D0\uAC8C \uACF5\uACA9\uC774 \uADF9\uB300\uD654\uB85C \uC801\uC911\uD558\uBA74 \uCD5C\uB300 100% \uD655\uB960\uB85C \uD574\uB2F9 \uC801\uC774 4\uCD08 \uB3D9\uC548 \uACF5\uD3EC\uC5D0 \uC9C8\uB9AC\uACE0 61 \u2013 90% \uAC10\uC18D\uB429\uB2C8\uB2E4."
  },
  // ID 3: 규탄 (고유 단검) - 혼돈의 방어구
  {
    id: 3,
    name: "Condemnation",
    nameKo: "\uADDC\uD0C4",
    rarity: ItemRarity.UNIQUE,
    type: ItemType.WEAPON,
    category: WeaponCategory.DAGGER,
    attackSpeed: "\uB9E4\uC6B0 \uBE60\uB984",
    attacksPerSecond: 1.2,
    favorites: 13,
    tags: ["\uACE0\uC720", "\uB2E8\uAC80", "\uD63C\uB3C8\uC758 \uBC29\uC5B4\uAD6C"],
    chaosArmor: true,
    stats: [
      {
        name: "\uCD08\uB2F9 \uACF5\uACA9 \uD69F\uC218",
        value: "1.20 (\uB9E4\uC6B0 \uBE60\uB984)",
        type: "special"
      },
      {
        name: "\uACF5\uACA9\uB825",
        value: "+50.0%",
        type: "damage"
      },
      {
        name: "\uAE30\uBCF8 \uACF5\uACA9 \uC18D\uB3C4",
        value: "+[16.0-25.0]%",
        type: "special"
      },
      {
        name: "\uD589\uC6B4\uC758 \uC801\uC911: \uC801\uC744 2\uCD08 \uB3D9\uC548 \uCDE8\uC57D\uD558\uAC8C \uB9CC\uB4E4 \uD655\uB960 \uCD5C\uB300",
        value: "+[43.3-47.3]%",
        type: "special"
      },
      {
        name: "\uC18C\uBAA8\uD55C \uC5F0\uACC4 \uC810\uC218\uB2F9 \uD53C\uD574",
        value: "+[47.0-65.0]%",
        type: "damage"
      },
      {
        name: "\uBBFC\uCCA9",
        value: "+[80-94]",
        type: "special"
      }
    ],
    uniqueEffect: "\uC5F0\uACC4 \uC810\uC218 3\uC810\uC744 \uC18C\uBAA8\uD558\uBA74 \uD575\uC2EC \uAE30\uC220\uC758 \uD53C\uD574\uAC00 50\u201370% \uC99D\uAC00\uD569\uB2C8\uB2E4. \uAE30\uBCF8 \uAE30\uC220\uC774 \uD56D\uC0C1 \uC5F0\uACC4 \uC810\uC218 3\uC810\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4.",
    classRestriction: ["\uB3C4\uC801"]
  },
  // ID 7: 궤멸자 (신화 고유 도검)
  {
    id: 7,
    name: "The Grandfather",
    nameKo: "\uADA4\uBA78\uC790",
    rarity: ItemRarity.MYTHIC,
    type: ItemType.WEAPON,
    category: WeaponCategory.SWORD,
    attackSpeed: "\uBE60\uB984",
    attacksPerSecond: 1.1,
    favorites: 40,
    tags: ["\uC2E0\uD654 \uACE0\uC720", "\uB3C4\uAC80"],
    stats: [
      {
        name: "\uCD08\uB2F9 \uACF5\uACA9 \uD69F\uC218",
        value: "1.10 (\uBE60\uB984)",
        type: "special"
      },
      {
        name: "\uACF5\uACA9\uB825",
        value: "+100.0%",
        type: "damage"
      },
      {
        name: "\uBAA8\uB4E0 \uB2A5\uB825\uCE58",
        value: "+160",
        type: "special"
      },
      {
        name: "\uCD5C\uB300 \uC0DD\uBA85\uB825",
        value: "35.0%",
        type: "vital"
      },
      {
        name: "\uD53C\uD574 \uAC10\uC18C",
        value: "10.0%",
        type: "defense"
      },
      {
        name: "\uD589\uC6B4\uC758 \uC801\uC911: \uCD5C\uB300 15% \uD655\uB960\uB85C \uC0DD\uBA85\uB825",
        value: "+530 \uD68C\uBCF5",
        type: "lifesteal"
      },
      {
        name: "\uD589\uC6B4\uC758 \uC801\uC911: \uCD5C\uB300 25% \uD655\uB960\uB85C \uC8FC\uC704 \uC801\uC5D0\uAC8C",
        value: "900\uC758 \uC554\uD751 \uD53C\uD574",
        type: "damage"
      }
    ],
    uniqueEffect: "\uD589\uC6B4\uC758 \uC801\uC911: \uCD5C\uB300 25% \uD655\uB960\uB85C \uC8FC\uC704 \uC801\uC5D0\uAC8C 900\uC758 \uC554\uD751 \uD53C\uD574\uB97C \uC8FC\uACE0, \uC801\uC774 \uC8FC\uB294 \uD53C\uD574\uB97C 5\uCD08 \uB3D9\uC548 20% \uAC10\uC18C\uC2DC\uD0B5\uB2C8\uB2E4."
  },
  // ID 19: 한아비 (신화 고유 양손 검)
  {
    id: 19,
    name: "Doombringer",
    nameKo: "\uD55C\uC544\uBE44",
    rarity: ItemRarity.MYTHIC,
    type: ItemType.WEAPON,
    category: "\uC591\uC190 \uAC80",
    attackSpeed: "\uB290\uB9BC",
    attacksPerSecond: 1,
    favorites: 54,
    tags: ["\uC2E0\uD654 \uACE0\uC720", "\uC591\uC190 \uAC80"],
    stats: [
      {
        name: "\uCD08\uB2F9 \uACF5\uACA9 \uD69F\uC218",
        value: "1.00 (\uB290\uB9BC)",
        type: "special"
      },
      {
        name: "\uACF5\uACA9\uB825",
        value: "+150.0%",
        type: "damage"
      },
      {
        name: "\uB0B4\uAD6C\uB3C4 \uAC10\uC18C \uBB34\uC2DC",
        value: "",
        type: "special"
      },
      {
        name: "\uBAA8\uB4E0 \uB2A5\uB825\uCE58",
        value: "+200",
        type: "special"
      },
      {
        name: "\uACF5\uACA9\uB825",
        value: "+300.0%",
        type: "damage"
      },
      {
        name: "\uCD5C\uB300 \uC0DD\uBA85\uB825",
        value: "+1,800",
        type: "vital"
      },
      {
        name: "\uCD5C\uB300 \uC790\uC6D0",
        value: "+20",
        type: "special"
      }
    ],
    uniqueEffect: "\uD50C\uB808\uC774\uC5B4\uC758 \uADF9\uB300\uD654 \uD53C\uD574\uAC00 100% \uC99D\uAC00\uD569\uB2C8\uB2E4. \uC774 \uBB34\uAE30\uC5D0 \uBD99\uB294 \uB098\uBA38\uC9C0 \uC18D\uC131\uC774 \uC77C\uBC18\uC801\uC778 \uC218\uC900\uBCF4\uB2E4 \uB192\uAC8C \uBD99\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4."
  },
  // ID 21: 셀리그의 녹은 심장 (신화 고유 목걸이)
  {
    id: 21,
    name: "Melted Heart of Selig",
    nameKo: "\uC140\uB9AC\uADF8\uC758 \uB179\uC740 \uC2EC\uC7A5",
    rarity: ItemRarity.MYTHIC,
    type: ItemType.ACCESSORY,
    category: "\uBAA9\uAC78\uC774",
    favorites: 48,
    tags: ["\uC2E0\uD654 \uACE0\uC720", "\uBAA9\uAC78\uC774"],
    stats: [
      {
        name: "\uBAA8\uB4E0 \uC6D0\uC18C\uC5D0 \uB300\uD55C \uCD5C\uB300 \uC800\uD56D",
        value: "+3.0%",
        type: "resist"
      },
      {
        name: "\uBAA8\uB4E0 \uC6D0\uC18C \uC800\uD56D",
        value: "+30.0%",
        type: "resist"
      },
      {
        name: "\uAC74\uAC15 \uC0C1\uD0DC\uC5D0\uC11C \uD53C\uD574 \uAC10\uC18C",
        value: "15.0%",
        type: "defense"
      },
      {
        name: "\uD589\uC6B4\uC758 \uC801\uC911 \uD655\uB960",
        value: "+15.0%",
        type: "special"
      },
      {
        name: "\uC774\uB3D9 \uC18D\uB3C4",
        value: "+25.0%",
        type: "special"
      },
      {
        name: "\uC790\uC6D0 \uC0DD\uC131\uB7C9",
        value: "15.0%",
        type: "special"
      }
    ],
    uniqueEffect: "60\uC758 \uCD5C\uB300 \uC790\uC6D0\uC744 \uC5BB\uC2B5\uB2C8\uB2E4. \uD53C\uD574\uB97C \uBC1B\uC73C\uBA74 \uCD5C\uB300 \uC0DD\uBA85\uB825\uC758 1%\uC744 \uC783\uC744 \uB54C\uB9C8\uB2E4 75%\uB9CC\uD07C\uC758 \uD53C\uD574\uB97C 2 \uC790\uC6D0\uC73C\uB85C \uB300\uC2E0 \uC783\uC2B5\uB2C8\uB2E4."
  },
  // ID 43: 안다리엘의 두개골 (신화 고유 투구)
  {
    id: 43,
    name: "Andariel's Visage",
    nameKo: "\uC548\uB2E4\uB9AC\uC5D8\uC758 \uB450\uAC1C\uACE8",
    rarity: ItemRarity.MYTHIC,
    type: ItemType.ARMOR,
    category: ArmorSlot.HEAD,
    favorites: 10,
    tags: ["\uC2E0\uD654 \uACE0\uC720", "\uD22C\uAD6C"],
    stats: [
      {
        name: "\uB3C5 \uC800\uD56D",
        value: "+666.0%",
        type: "resist"
      },
      {
        name: "\uACF5\uACA9 \uC18D\uB3C4",
        value: "+30.0%",
        type: "special"
      },
      {
        name: "\uBAA8\uB4E0 \uB2A5\uB825\uCE58",
        value: "+110",
        type: "special"
      },
      {
        name: "\uC801\uC911 \uC2DC \uC0DD\uBA85\uB825 \uD68C\uBCF5",
        value: "+86",
        type: "lifesteal"
      },
      {
        name: "\uCD5C\uB300 \uB3C5 \uC800\uD56D",
        value: "+10%",
        type: "resist"
      }
    ],
    uniqueEffect: "\uD589\uC6B4\uC758 \uC801\uC911: \uCD5C\uB300 20% \uD655\uB960\uB85C \uB3C5\uBC1C\uC744 \uBC1C\uB3D9\uD558\uC5EC \uBC94\uC704 \uB0B4\uC758 \uC801\uB4E4\uC5D0\uAC8C 5\uCD08\uC5D0 \uAC78\uCCD0 6,000\uC758 \uC911\uB3C5 \uD53C\uD574\uB97C \uC90D\uB2C8\uB2E4."
  },
  // ID 44: 할리퀸 관모 (신화 고유 투구)
  {
    id: 44,
    name: "Harlequin Crest",
    nameKo: "\uD560\uB9AC\uD038 \uAD00\uBAA8",
    rarity: ItemRarity.MYTHIC,
    type: ItemType.ARMOR,
    category: ArmorSlot.HEAD,
    favorites: 88,
    tags: ["\uC2E0\uD654 \uACE0\uC720", "\uD22C\uAD6C"],
    stats: [
      {
        name: "\uC7AC\uC0AC\uC6A9 \uB300\uAE30\uC2DC\uAC04 \uAC10\uC18C",
        value: "20.0%",
        type: "special"
      },
      {
        name: "\uCD5C\uB300 \uC0DD\uBA85\uB825",
        value: "800",
        type: "vital"
      },
      {
        name: "\uCD5C\uB300 \uC790\uC6D0",
        value: "+18",
        type: "special"
      },
      {
        name: "\uBC29\uC5B4\uB3C4",
        value: "+350",
        type: "defense"
      }
    ],
    uniqueEffect: "20%\uC758 \uD53C\uD574 \uAC10\uC18C\uB97C \uC5BB\uC2B5\uB2C8\uB2E4. \uB610\uD55C \uBAA8\uB4E0 \uAE30\uC220 \uB4F1\uAE09\uC774 +4 \uC0C1\uC2B9\uD569\uB2C8\uB2E4."
  },
  // ID 53: 별 없는 하늘의 반지 (신화 고유 반지)
  {
    id: 53,
    name: "Ring of Starless Skies",
    nameKo: "\uBCC4 \uC5C6\uB294 \uD558\uB298\uC758 \uBC18\uC9C0",
    rarity: ItemRarity.MYTHIC,
    type: ItemType.ACCESSORY,
    category: "\uBC18\uC9C0",
    favorites: 21,
    tags: ["\uC2E0\uD654 \uACE0\uC720", "\uBC18\uC9C0"],
    stats: [
      {
        name: "\uBAA8\uB4E0 \uC6D0\uC18C \uC800\uD56D",
        value: "+12.5%",
        type: "resist"
      },
      {
        name: "\uBAA8\uB4E0 \uC6D0\uC18C \uC800\uD56D",
        value: "+12.5%",
        type: "resist"
      },
      {
        name: "\uACF5\uACA9 \uC18D\uB3C4",
        value: "+17.5%",
        type: "special"
      },
      {
        name: "\uADF9\uB300\uD654 \uD655\uB960",
        value: "+12.5%",
        type: "critical"
      },
      {
        name: "\uD589\uC6B4\uC758 \uC801\uC911 \uD655\uB960",
        value: "+12.5%",
        type: "special"
      },
      {
        name: "\uD575\uC2EC \uAE30\uC220",
        value: "+2",
        type: "special"
      }
    ],
    uniqueEffect: "\uC8FC \uC790\uC6D0\uC744 \uC18C\uBAA8\uD558\uBA74 3\uCD08 \uB3D9\uC548 10%\uB9CC\uD07C, \uCD5C\uB300 50%\uAE4C\uC9C0 \uAE30\uC220\uC758 \uC790\uC6D0 \uC18C\uBAA8\uB7C9\uC774 \uAC10\uC18C\uD558\uACE0 \uC8FC\uB294 \uD53C\uD574\uAC00 \uC99D\uAC00\uD569\uB2C8\uB2E4."
  },
  // 추가 아이템들...
  {
    id: 100,
    name: "Common Sword",
    nameKo: "\uC77C\uBC18 \uAC80",
    rarity: ItemRarity.COMMON,
    type: ItemType.WEAPON,
    category: WeaponCategory.SWORD,
    attackSpeed: "\uBCF4\uD1B5",
    attacksPerSecond: 1,
    stats: [
      {
        name: "\uACF5\uACA9\uB825",
        value: "+10",
        type: "damage"
      },
      {
        name: "\uD798",
        value: "+5",
        type: "special"
      }
    ]
  },
  {
    id: 101,
    name: "Uncommon Axe",
    nameKo: "\uD76C\uADC0\uD558\uC9C0 \uC54A\uC740 \uB3C4\uB07C",
    rarity: ItemRarity.UNCOMMON,
    type: ItemType.WEAPON,
    category: WeaponCategory.AXE,
    attackSpeed: "\uBE60\uB984",
    attacksPerSecond: 1.1,
    stats: [
      {
        name: "\uACF5\uACA9\uB825",
        value: "+25",
        type: "damage"
      },
      {
        name: "\uADF9\uB300\uD654 \uD655\uB960",
        value: "+5%",
        type: "critical"
      },
      {
        name: "\uD798",
        value: "+10",
        type: "special"
      }
    ]
  },
  {
    id: 102,
    name: "Rare Dagger",
    nameKo: "\uD76C\uADC0\uD55C \uB2E8\uAC80",
    rarity: ItemRarity.RARE,
    type: ItemType.WEAPON,
    category: WeaponCategory.DAGGER,
    attackSpeed: "\uB9E4\uC6B0 \uBE60\uB984",
    attacksPerSecond: 1.3,
    stats: [
      {
        name: "\uACF5\uACA9\uB825",
        value: "+45",
        type: "damage"
      },
      {
        name: "\uADF9\uB300\uD654 \uD53C\uD574",
        value: "+50%",
        type: "critical"
      },
      {
        name: "\uBBFC\uCCA9",
        value: "+25",
        type: "special"
      },
      {
        name: "\uC0DD\uBA85\uB825 \uD761\uC218",
        value: "+3%",
        type: "lifesteal"
      }
    ]
  },
  {
    id: 103,
    name: "Epic Staff",
    nameKo: "\uC11C\uC0AC\uC2DC \uC9C0\uD321\uC774",
    rarity: ItemRarity.EPIC,
    type: ItemType.WEAPON,
    category: WeaponCategory.STAFF,
    attackSpeed: "\uB290\uB9BC",
    attacksPerSecond: 0.9,
    stats: [
      {
        name: "\uACF5\uACA9\uB825",
        value: "+80",
        type: "damage"
      },
      {
        name: "\uADF9\uB300\uD654 \uD53C\uD574",
        value: "+100%",
        type: "critical"
      },
      {
        name: "\uC9C0\uB2A5",
        value: "+50",
        type: "special"
      },
      {
        name: "\uBAA8\uB4E0 \uC6D0\uC18C \uC800\uD56D",
        value: "+15%",
        type: "resist"
      },
      {
        name: "\uB9C8\uB098 \uC7AC\uC0DD",
        value: "+5/\uCD08",
        type: "manasteal"
      }
    ]
  }
];

// src/app/modules/novel/services/state/inventory.state.service.ts
var InventoryStateService = class _InventoryStateService {
  // ===== 인벤토리 =====
  _inventory = signal([], ...ngDevMode ? [{ debugName: "_inventory" }] : []);
  inventory = this._inventory.asReadonly();
  // ===== 화폐 =====
  _gold = signal(0, ...ngDevMode ? [{ debugName: "_gold" }] : []);
  _gem = signal(0, ...ngDevMode ? [{ debugName: "_gem" }] : []);
  _crystal = signal(0, ...ngDevMode ? [{ debugName: "_crystal" }] : []);
  _ticket = signal(0, ...ngDevMode ? [{ debugName: "_ticket" }] : []);
  gold = this._gold.asReadonly();
  gem = this._gem.asReadonly();
  crystal = this._crystal.asReadonly();
  ticket = this._ticket.asReadonly();
  // ===== 장비 =====
  _equipment = signal({}, ...ngDevMode ? [{ debugName: "_equipment" }] : []);
  equipment = this._equipment.asReadonly();
  // ===== 상점 =====
  _shopItems = signal([], ...ngDevMode ? [{ debugName: "_shopItems" }] : []);
  shopItems = this._shopItems.asReadonly();
  // ===== 필터/정렬 =====
  _inventoryFilter = signal("all", ...ngDevMode ? [{ debugName: "_inventoryFilter" }] : []);
  _inventorySortBy = signal("name", ...ngDevMode ? [{ debugName: "_inventorySortBy" }] : []);
  inventoryFilter = this._inventoryFilter.asReadonly();
  inventorySortBy = this._inventorySortBy.asReadonly();
  // ===== Computed Signals (Derived State) =====
  filteredInventory = computed(() => {
    const items = this.inventory();
    const filter = this.inventoryFilter();
    if (filter === "all")
      return items;
    return items.filter((item) => {
      if (filter === "weapon")
        return item.type === "weapon";
      if (filter === "armor")
        return ["armor", "helmet", "gloves", "boots"].includes(item.type);
      if (filter === "accessory")
        return ["belt", "amulet", "ring", "accessory"].includes(item.type);
      if (filter === "consumable")
        return item.type === "consumable";
      if (filter === "material")
        return item.type === "material";
      return true;
    });
  }, ...ngDevMode ? [{ debugName: "filteredInventory" }] : []);
  sortedInventory = computed(() => {
    const items = this.filteredInventory();
    const sortBy = this.inventorySortBy();
    return [...items].sort((a, b) => {
      if (sortBy === "name") {
        return a.name.localeCompare(b.name);
      }
      if (sortBy === "rarity") {
        const rarityOrder = { common: 0, uncommon: 1, rare: 2, epic: 3, legendary: 4, unique: 5, mythic: 6 };
        return rarityOrder[b.rarity] - rarityOrder[a.rarity];
      }
      if (sortBy === "type") {
        return a.type.localeCompare(b.type);
      }
      return 0;
    });
  }, ...ngDevMode ? [{ debugName: "sortedInventory" }] : []);
  inventoryCount = computed(() => this.inventory().length, ...ngDevMode ? [{ debugName: "inventoryCount" }] : []);
  equipmentSlotsFilled = computed(() => {
    const eq = this.equipment();
    return Object.values(eq).filter((item) => item !== void 0).length;
  }, ...ngDevMode ? [{ debugName: "equipmentSlotsFilled" }] : []);
  totalCurrency = computed(() => this.gold() + this.gem() + this.crystal() + this.ticket(), ...ngDevMode ? [{ debugName: "totalCurrency" }] : []);
  hasWeaponEquipped = computed(() => !!this.equipment().weapon, ...ngDevMode ? [{ debugName: "hasWeaponEquipped" }] : []);
  hasArmorEquipped = computed(() => !!this.equipment().armor, ...ngDevMode ? [{ debugName: "hasArmorEquipped" }] : []);
  inventoryValue = computed(() => {
    return this.inventory().reduce((sum, item) => {
      return sum + (item.sellPrice || 0) * item.quantity;
    }, 0);
  }, ...ngDevMode ? [{ debugName: "inventoryValue" }] : []);
  // ===== 인벤토리 관리 =====
  setInventory(items) {
    this._inventory.set(items);
  }
  addItem(item) {
    this._inventory.update((inv) => {
      const existing = inv.find((i) => i.id === item.id);
      if (existing) {
        return inv.map((i) => i.id === item.id ? __spreadProps(__spreadValues({}, i), { quantity: i.quantity + item.quantity }) : i);
      }
      return [...inv, item];
    });
  }
  removeItem(itemId, quantity = 1) {
    this._inventory.update((inv) => inv.map((item) => item.id === itemId ? __spreadProps(__spreadValues({}, item), { quantity: item.quantity - quantity }) : item).filter((item) => item.quantity > 0));
  }
  clearInventory() {
    this._inventory.set([]);
  }
  updateItemQuantity(itemId, quantity) {
    this._inventory.update((inv) => inv.map((item) => item.id === itemId ? __spreadProps(__spreadValues({}, item), { quantity }) : item));
  }
  // ===== 화폐 관리 =====
  setGold(amount) {
    this._gold.set(Math.max(0, amount));
  }
  addGold(amount) {
    this._gold.update((g) => Math.max(0, g + amount));
  }
  spendGold(amount) {
    if (this.gold() < amount)
      return false;
    this._gold.update((g) => g - amount);
    return true;
  }
  setGem(amount) {
    this._gem.set(Math.max(0, amount));
  }
  addGem(amount) {
    this._gem.update((g) => Math.max(0, g + amount));
  }
  spendGem(amount) {
    if (this.gem() < amount)
      return false;
    this._gem.update((g) => g - amount);
    return true;
  }
  setCrystal(amount) {
    this._crystal.set(Math.max(0, amount));
  }
  addCrystal(amount) {
    this._crystal.update((c) => Math.max(0, c + amount));
  }
  setTicket(amount) {
    this._ticket.set(Math.max(0, amount));
  }
  addTicket(amount) {
    this._ticket.update((t) => Math.max(0, t + amount));
  }
  // ===== 장비 관리 =====
  setEquipment(equipment) {
    this._equipment.set(equipment);
  }
  equipItem(slot, item) {
    this._equipment.update((eq) => __spreadProps(__spreadValues({}, eq), {
      [slot]: item
    }));
  }
  unequipItem(slot) {
    this._equipment.update((eq) => {
      const newEq = __spreadValues({}, eq);
      delete newEq[slot];
      return newEq;
    });
  }
  getEquippedItem(slot) {
    return this.equipment()[slot];
  }
  // ===== 필터/정렬 =====
  setFilter(filter) {
    this._inventoryFilter.set(filter);
  }
  setSortBy(sortBy) {
    this._inventorySortBy.set(sortBy);
  }
  // ===== 상점 =====
  setShopItems(items) {
    this._shopItems.set(items);
  }
  buyShopItem(item) {
    if (!this.spendGold(item.price))
      return false;
    const inventoryItem = {
      id: item.id,
      name: item.name,
      description: item.description,
      type: item.type,
      quantity: 1,
      rarity: item.rarity,
      buyPrice: item.price,
      stats: item.stats
    };
    this.addItem(inventoryItem);
    this._shopItems.update((items) => items.map((i) => i.id === item.id ? __spreadProps(__spreadValues({}, i), { stock: i.stock - 1 }) : i).filter((i) => i.stock > 0));
    return true;
  }
  // ===== 리셋 =====
  reset() {
    this._inventory.set([]);
    this._gold.set(0);
    this._gem.set(0);
    this._crystal.set(0);
    this._ticket.set(0);
    this._equipment.set({});
    this._inventoryFilter.set("all");
    this._inventorySortBy.set("name");
  }
  static \u0275fac = function InventoryStateService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _InventoryStateService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _InventoryStateService, factory: _InventoryStateService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(InventoryStateService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();

// src/app/modules/novel/managers/inventory.manager.ts
var InventoryManager = class {
  component;
  inventoryStateService = inject(InventoryStateService);
  // 인벤토리 상태는 InventoryStateService에서 가져옵니다
  get inventory() {
    return this.inventoryStateService.inventory();
  }
  get gold() {
    return this.inventoryStateService.gold();
  }
  get gem() {
    return this.inventoryStateService.gem();
  }
  get crystal() {
    return this.inventoryStateService.crystal();
  }
  get ticket() {
    return this.inventoryStateService.ticket();
  }
  get equipment() {
    return this.inventoryStateService.equipment();
  }
  constructor(component) {
    this.component = component;
  }
  /**
   * 인벤토리에 아이템 추가
   */
  addToInventory(itemId, quantity) {
    const comp = this.component;
    const existingItem = this.inventory.find((item) => item.id === itemId);
    if (existingItem) {
      this.inventoryStateService.updateItemQuantity(itemId, existingItem.quantity + quantity);
    } else {
      const newItem = {
        id: itemId,
        name: itemId,
        type: "misc",
        rarity: "common",
        quantity
      };
      this.inventoryStateService.addItem(newItem);
    }
    this.saveInventory();
  }
  /**
   * 인벤토리에서 아이템 제거
   */
  removeFromInventory(itemId, quantity) {
    const comp = this.component;
    const item = this.inventory.find((i) => i.id === itemId);
    if (!item) {
      return false;
    }
    if (item.quantity && item.quantity > quantity) {
      item.quantity -= quantity;
    } else {
      const index = this.inventory.indexOf(item);
      this.inventory.splice(index, 1);
    }
    this.saveInventory();
    return true;
  }
  /**
   * 아이템 사용
   */
  useItem(item) {
    const comp = this.component;
    if (item.type === "consumable") {
      this.applyItemEffect(item);
      if (item.quantity && item.quantity > 1) {
        item.quantity--;
      } else {
        const index = this.inventory.indexOf(item);
        this.inventory.splice(index, 1);
      }
      this.saveInventory();
    }
  }
  /**
   * 아이템 효과 적용
   */
  applyItemEffect(item) {
    const comp = this.component;
    if (item.stats?.hp) {
      comp.playerCharacter.hp = Math.min(comp.playerCharacter.hp + item.stats.hp, comp.playerCharacter.maxHp);
      comp.notification.show(`HP\uAC00 ${item.stats.hp} \uD68C\uBCF5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`);
    }
    if (item.stats?.mp) {
      comp.playerCharacter.mp = Math.min(comp.playerCharacter.mp + item.stats.mp, comp.playerCharacter.maxMp);
      comp.notification.show(`MP\uAC00 ${item.stats.mp} \uD68C\uBCF5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`);
    }
    if (item.stats?.attack) {
      comp.playerCharacter.attack += item.stats.attack;
    }
    if (item.stats?.defense) {
      comp.playerCharacter.defense += item.stats.defense;
    }
  }
  /**
   * 장비 착용
   */
  equipItem(index) {
    const comp = this.component;
    const item = this.inventory[index];
    if (!item || !this.canEquipItem(item)) {
      return;
    }
    const slot = this.getEquipmentSlot(item.type);
    if (!slot) {
      comp.notification.show("\uCC29\uC6A9\uD560 \uC218 \uC5C6\uB294 \uC544\uC774\uD15C\uC785\uB2C8\uB2E4.");
      return;
    }
    if (this.equipment[slot]) {
      this.unequipItem(slot);
    }
    this.inventoryStateService.equipItem(slot, item);
    this.inventoryStateService.removeItem(item.id, 1);
    this.applyEquipmentStats(item, true);
    comp.notification.show(`${item.name}\uC744(\uB97C) \uCC29\uC6A9\uD588\uC2B5\uB2C8\uB2E4.`);
    this.saveInventory();
  }
  /**
   * 장비 해제
   */
  unequipItem(slotKey) {
    const comp = this.component;
    const equipment = this.equipment[slotKey];
    if (!equipment) {
      return;
    }
    this.applyEquipmentStats(equipment, false);
    const inventoryItem = equipment;
    this.inventoryStateService.addItem(inventoryItem);
    this.inventoryStateService.unequipItem(slotKey);
    comp.notification.show(`${equipment.name}\uC744(\uB97C) \uD574\uC81C\uD588\uC2B5\uB2C8\uB2E4.`);
    this.saveInventory();
  }
  /**
   * 장비 착용 가능 여부 확인
   */
  canEquipItem(item) {
    const equipmentTypes = ["weapon", "armor", "helmet", "gloves", "boots", "belt", "amulet", "ring"];
    return equipmentTypes.includes(item.type);
  }
  /**
   * 아이템 타입에 따른 장비 슬롯 반환
   */
  getEquipmentSlot(itemType) {
    const slotMap = {
      "weapon": "weapon",
      "armor": "armor",
      "helmet": "helmet",
      "gloves": "gloves",
      "boots": "boots",
      "belt": "belt",
      "amulet": "amulet",
      "ring": "ring1"
      // 기본 반지 슬롯은 ring1
    };
    return slotMap[itemType] || null;
  }
  /**
   * 장비 스탯 적용/제거
   */
  applyEquipmentStats(equipment, apply) {
    const comp = this.component;
    const multiplier = apply ? 1 : -1;
    if (equipment.baseStats) {
      if (equipment.baseStats.attack) {
        comp.playerCharacter.attack = (comp.playerCharacter.attack || 0) + equipment.baseStats.attack * multiplier;
      }
      if (equipment.baseStats.defense) {
        comp.playerCharacter.defense = (comp.playerCharacter.defense || 0) + equipment.baseStats.defense * multiplier;
      }
      if (equipment.baseStats.hp) {
        comp.playerCharacter.maxHp = (comp.playerCharacter.maxHp || 0) + equipment.baseStats.hp * multiplier;
      }
      if (equipment.baseStats.mp) {
        comp.playerCharacter.maxMp = (comp.playerCharacter.maxMp || 0) + equipment.baseStats.mp * multiplier;
      }
    }
  }
  /**
   * 아이템 상세 정보 표시
   */
  showItemDetails(item) {
    const comp = this.component;
    comp.selectedItem = item;
    comp.showItemDetailModal = true;
  }
  /**
   * 현재 착용 중인 아이템과 비교
   */
  compareItemWithEquipped(item) {
    const comp = this.component;
    const slot = this.getEquipmentSlot(item.type);
    if (!slot) {
      comp.notification.show("\uC7A5\uBE44 \uC544\uC774\uD15C\uC774 \uC544\uB2D9\uB2C8\uB2E4.");
      return;
    }
    const equipped = this.equipment[slot];
    comp.comparisonItem = item;
    comp.comparisonEquipped = equipped;
    comp.showComparisonModal = true;
  }
  /**
   * 아이템 정렬
   */
  sortInventory(sortBy = "type") {
    const comp = this.component;
    this.inventory.sort((a, b) => {
      switch (sortBy) {
        case "name":
          return a.name.localeCompare(b.name);
        case "type":
          return a.type.localeCompare(b.type);
        case "rarity":
          const rarityOrder = ["common", "uncommon", "rare", "epic", "legendary", "unique", "mythic"];
          return rarityOrder.indexOf(b.rarity) - rarityOrder.indexOf(a.rarity);
        case "level":
          const aLevel = a.itemLevel || a.requiredLevel || 0;
          const bLevel = b.itemLevel || b.requiredLevel || 0;
          return bLevel - aLevel;
        default:
          return 0;
      }
    });
  }
  /**
   * 아이템 필터링
   */
  filterInventory(filterType) {
    const comp = this.component;
    if (filterType === "all") {
      return this.inventory;
    }
    return this.inventory.filter((item) => item.type === filterType);
  }
  /**
   * 타입별 아이템 가져오기
   */
  getItemsByType(type) {
    return this.filterInventory(type);
  }
  /**
   * 필터링 & 정렬된 인벤토리 반환
   */
  getFilteredAndSortedInventory() {
    const comp = this.component;
    let filtered = this.inventory;
    if (comp.inventoryFilter !== "all") {
      filtered = filtered.filter((item) => item.type === comp.inventoryFilter);
    }
    this.sortInventory(comp.inventorySortBy);
    return filtered;
  }
  /**
   * 인벤토리 저장
   */
  saveInventory() {
    const comp = this.component;
    if (comp.selectedNovel?.id) {
      const inventoryKey = `novel_${comp.selectedNovel.id}_inventory`;
      localStorage.setItem(inventoryKey, JSON.stringify(this.inventory));
    }
  }
  /**
   * 인벤토리 디버그 정보
   */
  debugInventory() {
    const comp = this.component;
  }
  /**
   * 상점에서 아이템 구매
   */
  buyItemFromShop(item, event) {
    return __async(this, null, function* () {
      const comp = this.component;
      if (event) {
        event.stopPropagation();
      }
      if (this.gold < item.price) {
        comp.notification.show("\uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4.");
        return;
      }
      if (item.stock !== void 0 && item.stock <= 0) {
        comp.notification.show("\uC7AC\uACE0\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4.");
        return;
      }
      if (!this.inventoryStateService.spendGold(item.price)) {
        comp.notification.show("\uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4.");
        return;
      }
      if (item.stock !== void 0) {
        item.stock--;
      }
      const inventoryItem = {
        id: `${item.id}_${Date.now()}`,
        name: item.name,
        description: item.description,
        type: item.type,
        quantity: 1,
        buyPrice: item.price,
        sellPrice: Math.floor(item.price * 0.5),
        rarity: item.rarity,
        stats: item.stats || {}
      };
      this.inventoryStateService.addItem(inventoryItem);
      comp.notification.show(`${item.name}\uC744(\uB97C) \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4.`);
      this.saveInventory();
      if (comp.gameStarted && comp.currentGameId) {
        comp.saveGame("autosave");
      }
    });
  }
  /**
   * 상점에 아이템 판매
   */
  sellItem(item) {
    const comp = this.component;
    const sellPrice = Math.floor((item.sellPrice || item.buyPrice || 0) * 0.5);
    this.inventoryStateService.addGold(sellPrice);
    this.removeFromInventory(item.id, 1);
    comp.notification.show(`${item.name}\uC744(\uB97C) ${sellPrice} \uACE8\uB4DC\uC5D0 \uD310\uB9E4\uD588\uC2B5\uB2C8\uB2E4.`);
  }
  /**
   * 장비 슬롯에 아이템 착용
   */
  equipItemToSlot(item, targetSlot) {
    const comp = this.component;
    const currentEquipment = this.equipment[targetSlot];
    if (currentEquipment) {
      this.unequipItem(targetSlot);
    }
    this.equipment[targetSlot] = item;
    const itemIndex = this.inventory.indexOf(item);
    if (itemIndex >= 0) {
      this.inventory.splice(itemIndex, 1);
    }
    this.applyEquipmentStats(item, true);
    comp.notification.show(`${item.name}\uC744(\uB97C) ${targetSlot}\uC5D0 \uCC29\uC6A9\uD588\uC2B5\uB2C8\uB2E4.`);
    this.saveInventory();
  }
  /**
   * 자동 정렬
   */
  autoSortInventory() {
    this.sortInventory("type");
  }
  /**
   * 착용 중인 아이템 가져오기
   */
  getEquippedItem(slot) {
    const comp = this.component;
    return this.equipment[slot] || null;
  }
};

// src/app/modules/novel/services/state/battle.state.service.ts
var BattleStateService = class _BattleStateService {
  // ===== 전투 기본 상태 =====
  _inBattle = signal(false, ...ngDevMode ? [{ debugName: "_inBattle" }] : []);
  _battleEnded = signal(false, ...ngDevMode ? [{ debugName: "_battleEnded" }] : []);
  _battleVictory = signal(false, ...ngDevMode ? [{ debugName: "_battleVictory" }] : []);
  _battleTurn = signal("player", ...ngDevMode ? [{ debugName: "_battleTurn" }] : []);
  inBattle = this._inBattle.asReadonly();
  battleEnded = this._battleEnded.asReadonly();
  battleVictory = this._battleVictory.asReadonly();
  battleTurn = this._battleTurn.asReadonly();
  // ===== 전투 참여자 =====
  _battleEnemy = signal(null, ...ngDevMode ? [{ debugName: "_battleEnemy" }] : []);
  _playerBattleStats = signal(null, ...ngDevMode ? [{ debugName: "_playerBattleStats" }] : []);
  battleEnemy = this._battleEnemy.asReadonly();
  playerBattleStats = this._playerBattleStats.asReadonly();
  // ===== 전투 로그 =====
  _battleLog = signal([], ...ngDevMode ? [{ debugName: "_battleLog" }] : []);
  battleLog = this._battleLog.asReadonly();
  // ===== 전투 스킬 & 아이템 =====
  _battleSkills = signal([], ...ngDevMode ? [{ debugName: "_battleSkills" }] : []);
  _battleItems = signal([], ...ngDevMode ? [{ debugName: "_battleItems" }] : []);
  battleSkills = this._battleSkills.asReadonly();
  battleItems = this._battleItems.asReadonly();
  // ===== 상태 효과 =====
  _playerStatusEffects = signal([], ...ngDevMode ? [{ debugName: "_playerStatusEffects" }] : []);
  _enemyStatusEffects = signal([], ...ngDevMode ? [{ debugName: "_enemyStatusEffects" }] : []);
  playerStatusEffects = this._playerStatusEffects.asReadonly();
  enemyStatusEffects = this._enemyStatusEffects.asReadonly();
  // ===== 전투 상태 객체 (복합 상태) =====
  _currentBattleState = signal(null, ...ngDevMode ? [{ debugName: "_currentBattleState" }] : []);
  currentBattleState = this._currentBattleState.asReadonly();
  // ===== 무협 전투 =====
  _martialBattleState = signal(null, ...ngDevMode ? [{ debugName: "_martialBattleState" }] : []);
  martialBattleState = this._martialBattleState.asReadonly();
  // ===== UI 상태 =====
  _playerTakingDamage = signal(false, ...ngDevMode ? [{ debugName: "_playerTakingDamage" }] : []);
  _enemyTakingDamage = signal(false, ...ngDevMode ? [{ debugName: "_enemyTakingDamage" }] : []);
  playerTakingDamage = this._playerTakingDamage.asReadonly();
  enemyTakingDamage = this._enemyTakingDamage.asReadonly();
  // ===== Computed Signals (Derived State) =====
  playerHpPercentage = computed(() => {
    const stats = this.playerBattleStats();
    if (!stats)
      return 0;
    return stats.hp / stats.maxHp * 100;
  }, ...ngDevMode ? [{ debugName: "playerHpPercentage" }] : []);
  playerMpPercentage = computed(() => {
    const stats = this.playerBattleStats();
    if (!stats)
      return 0;
    return stats.mp / stats.maxMp * 100;
  }, ...ngDevMode ? [{ debugName: "playerMpPercentage" }] : []);
  enemyHpPercentage = computed(() => {
    const enemy = this.battleEnemy();
    if (!enemy)
      return 0;
    return enemy.hp / enemy.maxHp * 100;
  }, ...ngDevMode ? [{ debugName: "enemyHpPercentage" }] : []);
  isPlayerTurn = computed(() => this.battleTurn() === "player", ...ngDevMode ? [{ debugName: "isPlayerTurn" }] : []);
  isEnemyTurn = computed(() => this.battleTurn() === "enemy", ...ngDevMode ? [{ debugName: "isEnemyTurn" }] : []);
  canUseBattleSkills = computed(() => this.inBattle() && this.isPlayerTurn() && !this.battleEnded() && this.battleSkills().length > 0, ...ngDevMode ? [{ debugName: "canUseBattleSkills" }] : []);
  canUseBattleItems = computed(() => this.inBattle() && this.isPlayerTurn() && !this.battleEnded() && this.battleItems().length > 0, ...ngDevMode ? [{ debugName: "canUseBattleItems" }] : []);
  hasActiveStatusEffects = computed(() => this.playerStatusEffects().length > 0 || this.enemyStatusEffects().length > 0, ...ngDevMode ? [{ debugName: "hasActiveStatusEffects" }] : []);
  isBattleActive = computed(() => this.inBattle() && !this.battleEnded(), ...ngDevMode ? [{ debugName: "isBattleActive" }] : []);
  // ===== 전투 시작/종료 =====
  startBattle(enemy) {
    this._inBattle.set(true);
    this._battleEnded.set(false);
    this._battleVictory.set(false);
    this._battleTurn.set("player");
    this._battleEnemy.set(enemy);
    this._battleLog.set([`\uC804\uD22C \uC2DC\uC791: ${enemy.name}\uC640(\uACFC) \uC870\uC6B0\uD588\uC2B5\uB2C8\uB2E4!`]);
    this._playerStatusEffects.set([]);
    this._enemyStatusEffects.set([]);
  }
  endBattle(victory) {
    this._battleEnded.set(true);
    this._battleVictory.set(victory);
    this.addBattleLog(victory ? "\u2B50 \uC2B9\uB9AC!" : "\u{1F480} \uD328\uBC30...");
  }
  resetBattle() {
    this._inBattle.set(false);
    this._battleEnded.set(false);
    this._battleVictory.set(false);
    this._battleTurn.set("player");
    this._battleEnemy.set(null);
    this._battleLog.set([]);
    this._battleSkills.set([]);
    this._battleItems.set([]);
    this._playerStatusEffects.set([]);
    this._enemyStatusEffects.set([]);
    this._currentBattleState.set(null);
    this._martialBattleState.set(null);
    this._playerTakingDamage.set(false);
    this._enemyTakingDamage.set(false);
  }
  // ===== 턴 관리 =====
  switchTurn() {
    this._battleTurn.update((turn) => turn === "player" ? "enemy" : "player");
  }
  setPlayerTurn() {
    this._battleTurn.set("player");
  }
  setEnemyTurn() {
    this._battleTurn.set("enemy");
  }
  // ===== 전투 로그 =====
  addBattleLog(message) {
    this._battleLog.update((logs) => [...logs, message]);
  }
  clearBattleLog() {
    this._battleLog.set([]);
  }
  // ===== 플레이어 상태 업데이트 =====
  updatePlayerStats(stats) {
    this._playerBattleStats.update((current) => {
      if (!current)
        return null;
      return __spreadValues(__spreadValues({}, current), stats);
    });
  }
  setPlayerStats(stats) {
    this._playerBattleStats.set(stats);
  }
  damagePlayer(damage) {
    this._playerBattleStats.update((stats) => {
      if (!stats)
        return null;
      return __spreadProps(__spreadValues({}, stats), { hp: Math.max(0, stats.hp - damage) });
    });
    this._playerTakingDamage.set(true);
    setTimeout(() => this._playerTakingDamage.set(false), 500);
  }
  healPlayer(amount) {
    this._playerBattleStats.update((stats) => {
      if (!stats)
        return null;
      return __spreadProps(__spreadValues({}, stats), { hp: Math.min(stats.maxHp, stats.hp + amount) });
    });
  }
  restoreMp(amount) {
    this._playerBattleStats.update((stats) => {
      if (!stats)
        return null;
      return __spreadProps(__spreadValues({}, stats), { mp: Math.min(stats.maxMp, stats.mp + amount) });
    });
  }
  // ===== 적 상태 업데이트 =====
  damageEnemy(damage) {
    this._battleEnemy.update((enemy) => {
      if (!enemy)
        return null;
      return __spreadProps(__spreadValues({}, enemy), { hp: Math.max(0, enemy.hp - damage) });
    });
    this._enemyTakingDamage.set(true);
    setTimeout(() => this._enemyTakingDamage.set(false), 500);
  }
  // ===== 스킬 & 아이템 =====
  setBattleSkills(skills) {
    this._battleSkills.set(skills);
  }
  addBattleSkill(skill) {
    this._battleSkills.update((skills) => [...skills, skill]);
  }
  setBattleItems(items) {
    this._battleItems.set(items);
  }
  useBattleItem(itemId) {
    this._battleItems.update((items) => items.map((item) => item.id === itemId ? __spreadProps(__spreadValues({}, item), { quantity: item.quantity - 1 }) : item).filter((item) => item.quantity > 0));
  }
  // ===== 상태 효과 =====
  addPlayerStatusEffect(effect) {
    this._playerStatusEffects.update((effects) => [...effects, effect]);
  }
  addEnemyStatusEffect(effect) {
    this._enemyStatusEffects.update((effects) => [...effects, effect]);
  }
  removePlayerStatusEffect(effectType) {
    this._playerStatusEffects.update((effects) => effects.filter((e) => e.type !== effectType));
  }
  removeEnemyStatusEffect(effectType) {
    this._enemyStatusEffects.update((effects) => effects.filter((e) => e.type !== effectType));
  }
  updateStatusEffectDuration() {
    this._playerStatusEffects.update((effects) => effects.map((e) => __spreadProps(__spreadValues({}, e), { duration: e.duration - 1 })).filter((e) => e.duration > 0));
    this._enemyStatusEffects.update((effects) => effects.map((e) => __spreadProps(__spreadValues({}, e), { duration: e.duration - 1 })).filter((e) => e.duration > 0));
  }
  // ===== 전투 상태 객체 =====
  setBattleState(state2) {
    this._currentBattleState.set(state2);
  }
  setMartialBattleState(state2) {
    this._martialBattleState.set(state2);
  }
  // ===== 전투 Callbacks (from BattleSetupHelper) =====
  battleCallbacks;
  setBattleCallbacks(callbacks) {
    this.battleCallbacks = callbacks;
  }
  // 콜백 트리거 메서드들
  triggerBattleWin(expGain, goldGain) {
    this.battleCallbacks?.onBattleWin?.(expGain, goldGain);
  }
  triggerBattleLose() {
    this.battleCallbacks?.onBattleLose?.();
  }
  triggerBattleEnd(victory) {
    this.battleCallbacks?.onBattleEnd?.(victory);
  }
  triggerLogUpdate() {
    this.battleCallbacks?.onLogUpdate?.();
  }
  triggerEnemyDamage() {
    this.battleCallbacks?.onEnemyDamage?.();
  }
  triggerPlayerDamage() {
    this.battleCallbacks?.onPlayerDamage?.();
  }
  static \u0275fac = function BattleStateService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _BattleStateService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _BattleStateService, factory: _BattleStateService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(BattleStateService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();

// src/app/modules/novel/services/battle.service.ts
var BattleService = class _BattleService {
  /**
   * 공격 스킬 실행
   */
  executeAttackSkill(skill, playerCharacter, enemyHp, enemyDefense) {
    const baseDamage = playerCharacter.attack * (skill.damageMultiplier || 1);
    const hitRoll = Math.random();
    if (hitRoll > (skill.hitRate || 0.9)) {
      return {
        damage: 0,
        isCritical: false,
        isMiss: true,
        remainingEnemyHp: enemyHp
      };
    }
    const critRoll = Math.random();
    const isCritical = critRoll < (skill.criticalRate || 0);
    const defenseReduction = Math.max(0, 1 - enemyDefense * 0.01);
    const finalDamage = Math.floor(baseDamage * (isCritical ? 1.5 : 1) * defenseReduction);
    const remainingHp = Math.max(0, enemyHp - finalDamage);
    return {
      damage: finalDamage,
      isCritical,
      isMiss: false,
      remainingEnemyHp: remainingHp,
      statusEffect: skill.statusEffect
    };
  }
  /**
   * 방어 스킬 실행
   */
  executeDefenseSkill(skill) {
    return {
      defenseBoost: skill.defenseBoost || 0.5,
      duration: skill.duration || 1
    };
  }
  /**
   * 치유 스킬 실행
   */
  executeHealSkill(skill, currentHp, maxHp) {
    const healAmount = Math.floor(maxHp * (skill.healAmount || 0.3));
    const actualHeal = Math.min(healAmount, maxHp - currentHp);
    return {
      healAmount: actualHeal,
      newHp: currentHp + actualHeal
    };
  }
  /**
   * 버프 스킬 실행
   */
  executeBuffSkill(skill) {
    return {
      statusEffect: skill.statusEffect
    };
  }
  /**
   * 디버프 스킬 실행
   */
  executeDebuffSkill(skill) {
    return {
      statusEffect: skill.statusEffect
    };
  }
  /**
   * 일반 공격 실행
   */
  executeNormalAttack(attackPower, enemyHp, enemyDefense) {
    const defenseReduction = Math.max(0, 1 - enemyDefense * 0.01);
    const damage = Math.floor(attackPower * defenseReduction);
    const remainingHp = Math.max(0, enemyHp - damage);
    return {
      damage,
      remainingEnemyHp: remainingHp
    };
  }
  /**
   * 상태 효과 적용
   */
  applyStatusEffect(statusEffects, newEffect) {
    const filteredEffects = statusEffects.filter((e) => e.type !== newEffect.type);
    return [...filteredEffects, __spreadValues({}, newEffect)];
  }
  /**
   * 상태 효과 지속 시간 감소
   */
  decreaseStatusEffectDurations(statusEffects) {
    return statusEffects.map((effect) => __spreadProps(__spreadValues({}, effect), {
      duration: effect.duration - 1
    })).filter((effect) => effect.duration > 0);
  }
  /**
   * 상태 효과 데미지 계산 (독, 화상 등)
   */
  calculateStatusEffectDamage(statusEffects) {
    return statusEffects.reduce((total, effect) => {
      if (effect.type === "poison" || effect.type === "burn") {
        return total + effect.value;
      }
      return total;
    }, 0);
  }
  /**
   * 상태 효과에 의한 스탯 변화 계산
   */
  calculateStatusEffectModifiers(statusEffects) {
    let attackModifier = 1;
    let defenseModifier = 1;
    let speedModifier = 1;
    statusEffects.forEach((effect) => {
      switch (effect.type) {
        case "strengthen":
          attackModifier += effect.value;
          break;
        case "weaken":
          attackModifier -= effect.value;
          break;
        case "shield":
          defenseModifier += effect.value;
          break;
        case "speed":
          speedModifier += effect.value;
          break;
        case "slow":
        case "stun":
          speedModifier -= effect.value;
          break;
      }
    });
    return {
      attackModifier: Math.max(0.1, attackModifier),
      defenseModifier: Math.max(0.1, defenseModifier),
      speedModifier: Math.max(0.1, speedModifier)
    };
  }
  /**
   * 스킬 쿨다운 확인
   */
  canUseSkill(skill, currentMp) {
    if (skill.currentCooldown && skill.currentCooldown > 0) {
      return {
        canUse: false,
        reason: `\uC2A4\uD0AC\uC774 \uCFE8\uB2E4\uC6B4 \uC911\uC785\uB2C8\uB2E4. (${skill.currentCooldown}\uD134 \uB0A8\uC74C)`
      };
    }
    if (currentMp < skill.mpCost) {
      return {
        canUse: false,
        reason: `MP\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4. (\uD544\uC694: ${skill.mpCost}, \uD604\uC7AC: ${currentMp})`
      };
    }
    return { canUse: true };
  }
  /**
   * 스킬 쿨다운 시작
   */
  startSkillCooldown(skill) {
    return __spreadProps(__spreadValues({}, skill), {
      currentCooldown: skill.cooldown
    });
  }
  /**
   * 모든 스킬의 쿨다운 감소
   */
  decreaseAllCooldowns(skills) {
    return skills.map((skill) => __spreadProps(__spreadValues({}, skill), {
      currentCooldown: skill.currentCooldown ? Math.max(0, skill.currentCooldown - 1) : 0
    }));
  }
  /**
   * 전투 종료 여부 확인
   */
  isBattleEnded(playerHp, enemyHp) {
    if (playerHp <= 0 && enemyHp <= 0) {
      return { isEnded: true, result: "draw" };
    }
    if (playerHp <= 0) {
      return { isEnded: true, result: "defeat" };
    }
    if (enemyHp <= 0) {
      return { isEnded: true, result: "victory" };
    }
    return { isEnded: false };
  }
  /**
   * 경험치 및 보상 계산
   */
  calculateRewards(enemyLevel, playerLevel, isBoss = false) {
    const levelDiff = enemyLevel - playerLevel;
    const baseExp = 50 + enemyLevel * 10;
    const baseGold = 20 + enemyLevel * 5;
    const expMultiplier = levelDiff > 0 ? 1 + levelDiff * 0.1 : 1;
    const bossMultiplier = isBoss ? 3 : 1;
    return {
      exp: Math.floor(baseExp * expMultiplier * bossMultiplier),
      gold: Math.floor(baseGold * bossMultiplier)
    };
  }
  static \u0275fac = function BattleService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _BattleService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _BattleService, factory: _BattleService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(BattleService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();

// src/app/modules/novel/services/battle-log.service.ts
var BattleLogService = class _BattleLogService {
  /**
   * 전투 로그 엔트리 생성
   */
  createLogEntry(turn, actor, action, details) {
    return __spreadValues({
      turn,
      actor,
      action,
      timestamp: /* @__PURE__ */ new Date()
    }, details);
  }
  /**
   * 전투 로그 포맷팅
   */
  formatBattleLog(entry) {
    const prefix = entry.actor === "player" ? "\u{1F464}" : "\u{1F479}";
    let message = `${prefix} ${entry.action}`;
    if (entry.isCritical) {
      message += " \u26A1\uD06C\uB9AC\uD2F0\uCEEC!\u26A1";
    }
    if (entry.isMiss) {
      message += " \u{1F4A8}Miss!";
    }
    return message;
  }
  /**
   * 전투 로그를 HTML 형식으로 포맷팅
   */
  formatBattleLogHTML(entry) {
    const actorClass = entry.actor === "player" ? "player-action" : "enemy-action";
    let html = `<div class="battle-log-entry ${actorClass}">`;
    const icon = entry.actor === "player" ? "\u{1F464}" : "\u{1F479}";
    html += `<span class="actor-icon">${icon}</span>`;
    html += `<span class="action-text">${entry.action}</span>`;
    if (entry.damage) {
      html += `<span class="damage-text">-${entry.damage}</span>`;
    }
    if (entry.heal) {
      html += `<span class="heal-text">+${entry.heal}</span>`;
    }
    if (entry.isCritical) {
      html += `<span class="critical-badge">\u26A1\uD06C\uB9AC\uD2F0\uCEEC\u26A1</span>`;
    }
    if (entry.isMiss) {
      html += `<span class="miss-badge">\u{1F4A8}Miss</span>`;
    }
    html += "</div>";
    return html;
  }
  /**
   * 공격 로그 생성
   */
  createAttackLog(actor, skillName, damage, isCritical, isMiss, turn) {
    let action = "";
    if (isMiss) {
      action = `${skillName}\uC774(\uAC00) \uBE57\uB098\uAC14\uB2E4!`;
    } else if (isCritical) {
      action = `${skillName}! ${damage} \uD06C\uB9AC\uD2F0\uCEEC \uB370\uBBF8\uC9C0!`;
    } else {
      action = `${skillName}! ${damage} \uB370\uBBF8\uC9C0!`;
    }
    return this.createLogEntry(turn, actor, action, {
      damage: isMiss ? 0 : damage,
      isCritical,
      isMiss
    });
  }
  /**
   * 치유 로그 생성
   */
  createHealLog(actor, skillName, healAmount, turn) {
    return this.createLogEntry(turn, actor, `${skillName}! HP ${healAmount} \uD68C\uBCF5!`, { heal: healAmount });
  }
  /**
   * 버프/디버프 로그 생성
   */
  createStatusEffectLog(actor, effectName, isPositive, turn) {
    const prefix = isPositive ? "\u2728" : "\u{1F53B}";
    return this.createLogEntry(turn, actor, `${prefix} ${effectName} \uD6A8\uACFC \uBC1C\uB3D9!`, { effect: effectName });
  }
  /**
   * 상태 효과 데미지 로그 생성
   */
  createStatusDamageLog(actor, effectType, damage, turn) {
    const effectIcons = {
      poison: "\u2620\uFE0F",
      burn: "\u{1F525}",
      bleeding: "\u{1FA78}"
    };
    const icon = effectIcons[effectType] || "\u{1F4A2}";
    return this.createLogEntry(turn, actor, `${icon} ${effectType}\uB85C ${damage} \uB370\uBBF8\uC9C0 \uBC1B\uC74C!`, { damage, effect: effectType });
  }
  /**
   * 방어 로그 생성
   */
  createDefenseLog(actor, skillName, defenseBoost, turn) {
    return this.createLogEntry(turn, actor, `\u{1F6E1}\uFE0F ${skillName}! \uBC29\uC5B4\uB825 ${defenseBoost * 100}% \uC99D\uAC00!`);
  }
  /**
   * 아이템 사용 로그 생성
   */
  createItemUseLog(itemName, effect, turn) {
    return this.createLogEntry(turn, "player", `\u{1F48A} ${itemName} \uC0AC\uC6A9! ${effect}`);
  }
  /**
   * 턴 시작 로그 생성
   */
  createTurnStartLog(turn) {
    return this.createLogEntry(turn, "player", `\u2501\u2501\u2501 \uD134 ${turn} \uC2DC\uC791 \u2501\u2501\u2501`);
  }
  /**
   * 전투 종료 로그 생성
   */
  createBattleEndLog(result, turn) {
    const messages = {
      victory: "\u{1F389} \uC2B9\uB9AC! \uC801\uC744 \uCC98\uCE58\uD588\uC2B5\uB2C8\uB2E4!",
      defeat: "\u{1F480} \uD328\uBC30... \uC804\uD22C\uC5D0\uC11C \uC4F0\uB7EC\uC84C\uC2B5\uB2C8\uB2E4.",
      draw: "\u{1F91D} \uBB34\uC2B9\uBD80! \uC591\uCE21 \uBAA8\uB450 \uC4F0\uB7EC\uC84C\uC2B5\uB2C8\uB2E4."
    };
    return this.createLogEntry(turn, "player", messages[result]);
  }
  /**
   * 로그 필터링 (특정 액터만)
   */
  filterLogsByActor(logs, actor) {
    return logs.filter((log) => log.actor === actor);
  }
  /**
   * 로그 필터링 (특정 턴만)
   */
  filterLogsByTurn(logs, turn) {
    return logs.filter((log) => log.turn === turn);
  }
  /**
   * 전투 통계 생성
   */
  generateBattleStats(logs) {
    const playerLogs = logs.filter((log) => log.actor === "player");
    const enemyLogs = logs.filter((log) => log.actor === "enemy");
    return {
      totalDamageDealt: playerLogs.reduce((sum, log) => sum + (log.damage || 0), 0),
      totalDamageTaken: enemyLogs.reduce((sum, log) => sum + (log.damage || 0), 0),
      totalHealing: playerLogs.reduce((sum, log) => sum + (log.heal || 0), 0),
      criticalHits: playerLogs.filter((log) => log.isCritical).length,
      missedAttacks: playerLogs.filter((log) => log.isMiss).length,
      totalTurns: Math.max(...logs.map((log) => log.turn))
    };
  }
  /**
   * 로그를 텍스트 파일 형식으로 변환
   */
  exportLogsAsText(logs) {
    return logs.map((log) => {
      const timestamp = log.timestamp.toLocaleTimeString();
      const actor = log.actor === "player" ? "Player" : "Enemy";
      return `[Turn ${log.turn}] [${timestamp}] ${actor}: ${log.action}`;
    }).join("\n");
  }
  static \u0275fac = function BattleLogService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _BattleLogService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _BattleLogService, factory: _BattleLogService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(BattleLogService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();

// src/app/modules/novel/managers/battle.manager.ts
var BattleManager = class _BattleManager {
  notification;
  battleService;
  battleLogService;
  // ===== Signal-based State Service =====
  battleStateService = inject(BattleStateService);
  // ===== State Getters (BattleStateService로 delegation) =====
  get inBattle() {
    return this.battleStateService.inBattle();
  }
  get battleEnded() {
    return this.battleStateService.battleEnded();
  }
  get battleVictory() {
    return this.battleStateService.battleVictory();
  }
  get battleTurn() {
    return this.battleStateService.battleTurn();
  }
  get battleLog() {
    return this.battleStateService.battleLog();
  }
  get battleEnemy() {
    return this.battleStateService.battleEnemy();
  }
  // 전투 참여자 (playerCharacter는 여전히 로컬 관리)
  playerCharacter = null;
  // 전투 관련 데이터
  battleSkills = [];
  battleItems = [];
  defaultBattleSkills = [];
  // 상태 효과
  playerDefenseBonus = 0;
  playerTakingDamage = false;
  enemyTakingDamage = false;
  // 전투 상태
  currentBattleState = null;
  // 무협 전투
  martialBattleState = null;
  learnedMartialSkills = [];
  playerInternalPower = null;
  // 인벤토리
  inventory = [];
  gold = 0;
  // 콜백 함수들
  onBattleWin;
  onBattleLose;
  onBattleEnd;
  onLogUpdate;
  onEnemyDamage;
  onPlayerDamage;
  constructor(notification, battleService, battleLogService) {
    this.notification = notification;
    this.battleService = battleService;
    this.battleLogService = battleLogService;
  }
  /**
   * 플레이어 캐릭터 설정
   */
  setPlayerCharacter(character) {
    this.playerCharacter = character;
  }
  /**
   * 콜백 함수 설정
   */
  setCallbacks(callbacks) {
    this.onBattleWin = callbacks.onBattleWin;
    this.onBattleLose = callbacks.onBattleLose;
    this.onBattleEnd = callbacks.onBattleEnd;
    this.onLogUpdate = callbacks.onLogUpdate;
    this.onEnemyDamage = callbacks.onEnemyDamage;
    this.onPlayerDamage = callbacks.onPlayerDamage;
  }
  /**
   * 전투 시작
   */
  startBattle() {
    const enemy = {
      name: "\uC0B0\uC801",
      maxHp: 80,
      hp: 80,
      mp: 40,
      maxMp: 40,
      internalPower: 30,
      maxInternalPower: 30,
      attack: 15,
      defense: 8
    };
    this.battleStateService.startBattle(enemy);
    this.battleStateService.addBattleLog("\u2694\uFE0F \uC804\uD22C\uAC00 \uC2DC\uC791\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
    this.battleStateService.addBattleLog(`\uC801: ${enemy.name} (HP: ${enemy.hp}/${enemy.maxHp})`);
    this.notifyLogUpdate();
  }
  /**
   * 선택지에서 전투 시작
   */
  startBattleFromChoice(addStoryBlockCallback, scrollCallback) {
    addStoryBlockCallback([
      "\u2694\uFE0F \uC804\uD22C\uAC00 \uC2DC\uC791\uB429\uB2C8\uB2E4!",
      "\uC801\uC774 \uB2F9\uC2E0\uC744 \uBC1C\uACAC\uD558\uACE0 \uACF5\uACA9 \uC790\uC138\uB97C \uCDE8\uD588\uC2B5\uB2C8\uB2E4."
    ]);
    this.initializeBattle();
    this.battleStateService.startBattle(this.battleEnemy || { name: "", hp: 0, maxHp: 0, attack: 0, defense: 0 });
    this.battleStateService.setPlayerTurn();
    this.battleStateService.clearBattleLog();
    this.battleStateService.addBattleLog("\u2694\uFE0F \uC804\uD22C \uC2DC\uC791!");
    this.playerDefenseBonus = 0;
    this.generateRandomEnemy();
    scrollCallback();
    setTimeout(() => this.autoBattle(), 1e3);
  }
  /**
   * 랜덤 적 생성
   */
  generateRandomEnemy() {
    const enemies = [
      { name: "\uACE0\uBE14\uB9B0", hp: 50, mp: 20, internalPower: 15, attack: 8, defense: 3 },
      { name: "\uC624\uD06C", hp: 80, mp: 35, internalPower: 30, attack: 12, defense: 5 },
      { name: "\uB291\uB300", hp: 60, mp: 15, internalPower: 10, attack: 10, defense: 2 },
      { name: "\uD574\uACE8 \uC804\uC0AC", hp: 70, mp: 25, internalPower: 20, attack: 11, defense: 4 },
      { name: "\uB9C8\uBC95\uC0AC", hp: 45, mp: 50, internalPower: 40, attack: 15, defense: 2 },
      { name: "\uB4DC\uB798\uACE4", hp: 150, mp: 80, internalPower: 100, attack: 20, defense: 10 }
    ];
    const randomEnemy = enemies[Math.floor(Math.random() * enemies.length)];
    const enemy = {
      name: randomEnemy.name,
      hp: randomEnemy.hp,
      maxHp: randomEnemy.hp,
      mp: randomEnemy.mp,
      maxMp: randomEnemy.mp,
      internalPower: randomEnemy.internalPower,
      maxInternalPower: randomEnemy.internalPower,
      attack: randomEnemy.attack,
      defense: randomEnemy.defense
    };
    if (this.inBattle) {
      this.battleStateService.startBattle(enemy);
    }
    this.battleStateService.addBattleLog(`${enemy.name}\uC774(\uAC00) \uB098\uD0C0\uB0AC\uB2E4!`);
    this.notifyLogUpdate();
  }
  /**
   * 전투 초기화
   */
  initializeBattle() {
    this.playerDefenseBonus = 0;
    if (this.learnedMartialSkills.length > 0 && this.battleEnemy) {
      this.martialBattleState = {
        turn: 1,
        playerHp: this.playerCharacter?.hp || 100,
        playerMp: this.playerCharacter?.mp || 100,
        enemyHp: this.battleEnemy.hp,
        playerStatusEffects: [],
        enemyStatusEffects: [],
        playerDefending: false,
        combatLog: [],
        isPlayerTurn: true,
        playerInternalPower: this.playerInternalPower?.current || 0,
        playerMaxInternalPower: this.playerInternalPower?.max || 100,
        enemyInternalPower: 100,
        enemyMaxInternalPower: 100,
        skillCooldowns: {},
        lastSkillUsed: void 0,
        comboCounter: 0,
        playerRealm: this.playerInternalPower?.realm || "\uCD08\uB958",
        enemyRealm: "\uCD08\uB958"
      };
    }
  }
  /**
   * 자동 전투
   */
  autoBattle() {
    if (this.battleEnded)
      return;
    if (this.battleTurn === "player") {
      this.playerAutoAction();
    }
  }
  /**
   * 플레이어 자동 행동
   */
  playerAutoAction() {
    if (this.battleEnded || !this.playerCharacter)
      return;
    const hpPercent = this.playerCharacter.hp / this.playerCharacter.maxHp * 100;
    if (hpPercent <= 30 && this.hasPotion()) {
      this.usePotion();
      return;
    }
    if (this.playerCharacter.mp >= 10 && Math.random() < 0.3) {
      this.playerSkill();
      return;
    }
    if (Math.random() < 0.2) {
      this.playerDefend();
      return;
    }
    this.playerAttack();
  }
  /**
   * 포션 보유 여부 확인
   */
  hasPotion() {
    return this.inventory.some((item) => item.id === "potion" || item.name?.includes("\uD3EC\uC158"));
  }
  /**
   * 포션 사용
   */
  usePotion() {
    if (!this.playerCharacter)
      return;
    const potionIndex = this.inventory.findIndex((item) => item.id === "potion" || item.name?.includes("\uD3EC\uC158"));
    if (potionIndex === -1)
      return;
    const healAmount = 30;
    this.playerCharacter.hp = Math.min(this.playerCharacter.maxHp, this.playerCharacter.hp + healAmount);
    this.inventory.splice(potionIndex, 1);
    this.battleStateService.addBattleLog(`\u{1F48A} \uD3EC\uC158 \uC0AC\uC6A9! HP ${healAmount} \uD68C\uBCF5!`);
    this.notifyLogUpdate();
    this.battleStateService.setEnemyTurn();
    setTimeout(() => this.enemyTurn(), 500);
  }
  /**
   * 플레이어 방어
   */
  playerDefend() {
    if (this.battleTurn !== "player" || this.battleEnded)
      return;
    this.playerDefenseBonus = 0.5;
    this.battleStateService.addBattleLog("\u{1F6E1}\uFE0F \uBC29\uC5B4 \uC790\uC138\uB97C \uCDE8\uD588\uB2E4!");
    this.notifyLogUpdate();
    this.battleStateService.setEnemyTurn();
    setTimeout(() => this.enemyTurn(), 500);
  }
  /**
   * 플레이어 공격
   */
  playerAttack() {
    if (this.battleTurn !== "player" || this.battleEnded || !this.playerCharacter || !this.battleEnemy)
      return;
    const damage = Math.max(1, this.playerCharacter.attack - this.battleEnemy.defense);
    this.triggerEnemyDamage();
    this.battleStateService.damageEnemy(damage);
    this.battleStateService.addBattleLog(`\uB2F9\uC2E0\uC740 ${this.battleEnemy.name}\uC5D0\uAC8C ${damage} \uD53C\uD574\uB97C \uC785\uD614\uB2E4!`);
    this.notifyLogUpdate();
    if (this.battleEnemy.hp <= 0) {
      this.winBattle();
    } else {
      this.battleStateService.setEnemyTurn();
      setTimeout(() => this.enemyTurn(), 500);
    }
  }
  /**
   * 플레이어 스킬
   */
  playerSkill() {
    if (this.battleTurn !== "player" || this.battleEnded || !this.playerCharacter || !this.battleEnemy || this.playerCharacter.mp < 10)
      return;
    this.playerCharacter.mp -= 10;
    const damage = Math.max(1, Math.floor(this.playerCharacter.attack * 1.5) - this.battleEnemy.defense);
    this.triggerEnemyDamage();
    this.battleStateService.damageEnemy(damage);
    this.battleStateService.addBattleLog(`\u2728 \uAC15\uB825\uD55C \uC2A4\uD0AC \uACF5\uACA9! ${this.battleEnemy.name}\uC5D0\uAC8C ${damage} \uD53C\uD574\uB97C \uC785\uD614\uB2E4!`);
    this.notifyLogUpdate();
    if (this.battleEnemy.hp <= 0) {
      this.winBattle();
    } else {
      this.battleStateService.setEnemyTurn();
      setTimeout(() => this.enemyTurn(), 500);
    }
  }
  /**
   * 적 턴
   */
  enemyTurn() {
    if (this.battleEnded || !this.playerCharacter || !this.battleEnemy)
      return;
    const baseDamage = Math.max(1, this.battleEnemy.attack - Math.floor(this.playerCharacter.defense * (1 + this.playerDefenseBonus)));
    const damage = Math.max(1, baseDamage);
    this.triggerPlayerDamage();
    this.playerCharacter.hp = Math.max(0, this.playerCharacter.hp - damage);
    this.battleStateService.addBattleLog(`${this.battleEnemy.name}\uC758 \uACF5\uACA9! ${damage} \uD53C\uD574\uB97C \uC785\uC5C8\uB2E4!`);
    this.notifyLogUpdate();
    this.playerDefenseBonus = 0;
    if (this.playerCharacter.hp <= 0) {
      this.loseBattle();
    } else {
      this.battleStateService.setPlayerTurn();
      setTimeout(() => this.autoBattle(), 800);
    }
  }
  /**
   * 무협 스킬 전투 사용
   */
  useMartialSkillInBattle(skill) {
    if (this.battleTurn !== "player" || this.battleEnded || !this.playerCharacter || !this.battleEnemy)
      return;
    const mpCost = skill.mpCost || 20;
    const baseDamage = skill.baseDamage || 50;
    if (this.playerCharacter.mp < mpCost) {
      this.notification.show("MP\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4!");
      return;
    }
    if (this.playerInternalPower.current < skill.requiredInternalPower) {
      this.notification.show("\uB0B4\uB825\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4!");
      return;
    }
    this.playerCharacter.mp -= mpCost;
    this.playerInternalPower.current -= skill.requiredInternalPower;
    const damage = Math.floor(baseDamage * (1 + this.playerInternalPower.current / 100));
    this.battleStateService.damageEnemy(damage);
    this.battleStateService.addBattleLog(`\u26A1 ${skill.name}(${skill.chineseName})! ${damage} \uD53C\uD574!`);
    this.notifyLogUpdate();
    if (this.battleEnemy.hp <= 0) {
      this.winBattle();
    } else {
      this.battleStateService.setEnemyTurn();
      setTimeout(() => this.enemyTurn(), 500);
    }
  }
  /**
   * 전투 승리
   */
  winBattle() {
    if (!this.battleEnemy)
      return;
    this.battleStateService.endBattle(this.battleVictory);
    const expGain = Math.floor(this.battleEnemy.maxHp * 0.8);
    const goldGain = Math.floor(this.battleEnemy.maxHp * 0.6);
    this.gold += goldGain;
    this.battleStateService.addBattleLog("");
    this.battleStateService.addBattleLog("\u{1F3C6} \uC2B9\uB9AC!");
    this.battleStateService.addBattleLog(`\u{1F4AB} \uACBD\uD5D8\uCE58 ${expGain} \uD68D\uB4DD!`);
    this.battleStateService.addBattleLog(`\u{1F4B0} \uACE8\uB4DC ${goldGain} \uD68D\uB4DD!`);
    this.notifyLogUpdate();
    if (this.onBattleWin) {
      this.onBattleWin(expGain, goldGain);
    }
    setTimeout(() => this.endBattle(), 2e3);
  }
  /**
   * 전투 패배
   */
  loseBattle() {
    this.battleStateService.endBattle(this.battleVictory);
    if (this.playerCharacter) {
      this.playerCharacter.hp = Math.floor(this.playerCharacter.maxHp / 2);
    }
    this.battleStateService.addBattleLog("");
    this.battleStateService.addBattleLog("\u{1F480} \uD328\uBC30...");
    this.battleStateService.addBattleLog("\uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC7AC\uC815\uBE44\uAC00 \uD544\uC694\uD558\uB2E4.");
    this.notifyLogUpdate();
    if (this.onBattleLose) {
      this.onBattleLose();
    }
    setTimeout(() => this.endBattle(), 2e3);
  }
  /**
   * 전투 종료
   */
  endBattle() {
    if (this.onBattleEnd) {
      this.onBattleEnd(this.battleVictory);
    }
  }
  /**
   * 무협 전투 시작
   */
  startMartialBattle(enemyName) {
    this.startBattle();
  }
  /**
   * 전투 스킬 초기화
   */
  initializeBattleSkills() {
    this.battleSkills = [...this.defaultBattleSkills];
    if (this.playerCharacter && this.playerCharacter.level >= 5) {
      this.battleSkills.push({
        id: "lightning-strike",
        name: "\uBC88\uAC1C \uC77C\uACA9",
        description: "\uBC88\uAC1C\uB85C \uC801\uC744 \uACF5\uACA9\uD558\uACE0 \uC2A4\uD134\uC2DC\uD0B5\uB2C8\uB2E4",
        type: "attack",
        mpCost: 30,
        cooldown: 3,
        damageMultiplier: 2.2,
        hitRate: 0.9,
        statusEffect: {
          type: "stun",
          duration: 1,
          value: 1,
          name: "\uC2A4\uD134",
          icon: "\u26A1"
        },
        icon: "\u26A1"
      });
    }
  }
  /**
   * 전투 아이템 초기화
   */
  initializeBattleItems() {
    this.battleItems = this.inventory.filter((item) => item.type === "consumable").map((item) => ({
      id: item.id,
      name: item.name,
      description: item.description,
      type: this.getBattleItemType(item.id),
      effect: this.getBattleItemEffect(item.id),
      quantity: item.quantity,
      usableInBattle: true,
      icon: this.getItemIcon(item.id)
    }));
  }
  /**
   * 전투 스킬 사용
   */
  useBattleSkill(skillId) {
    const skill = this.battleSkills.find((s) => s.id === skillId);
    if (!skill || !this.playerCharacter)
      return false;
    if (this.playerCharacter.mp < skill.mpCost) {
      this.addBattleLog("player", `MP\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4! (\uD544\uC694: ${skill.mpCost})`);
      return false;
    }
    if (skill.currentCooldown && skill.currentCooldown > 0) {
      this.addBattleLog("player", `${skill.name}\uC740(\uB294) \uC544\uC9C1 \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. (${skill.currentCooldown}\uD134 \uB0A8\uC74C)`);
      return false;
    }
    this.playerCharacter.mp -= skill.mpCost;
    switch (skill.type) {
      case "attack":
        this.executeAttackSkill(skill);
        break;
      case "defense":
        this.executeDefenseSkill(skill);
        break;
      case "heal":
        this.executeHealSkill(skill);
        break;
      case "buff":
        this.executeBuffSkill(skill);
        break;
      case "debuff":
        this.executeDebuffSkill(skill);
        break;
    }
    if (skill.cooldown > 0) {
      skill.currentCooldown = skill.cooldown;
    }
    return true;
  }
  /**
   * 전투 아이템 사용
   */
  useBattleItem(itemId) {
    const item = this.battleItems.find((i) => i.id === itemId);
    if (!item || item.quantity <= 0 || !this.playerCharacter)
      return false;
    if (item.effect.heal) {
      const actualHeal = Math.min(item.effect.heal, this.playerCharacter.maxHp - this.playerCharacter.hp);
      this.playerCharacter.hp += actualHeal;
      this.addBattleLog("player", `${item.name} \uC0AC\uC6A9! HP ${actualHeal} \uD68C\uBCF5!`, { heal: actualHeal });
      this.triggerSkillEffect(item.icon || "\u2764\uFE0F", "heal");
    }
    if (item.effect.mpRestore) {
      const actualRestore = Math.min(item.effect.mpRestore, this.playerCharacter.maxMp - this.playerCharacter.mp);
      this.playerCharacter.mp += actualRestore;
      this.addBattleLog("player", `${item.name} \uC0AC\uC6A9! MP ${actualRestore} \uD68C\uBCF5!`);
      this.triggerSkillEffect(item.icon || "\u{1F499}", "heal");
    }
    if (item.effect.damage && this.battleEnemy) {
      this.battleEnemy.hp = Math.max(0, this.battleEnemy.hp - item.effect.damage);
      this.addBattleLog("player", `${item.name} \uC0AC\uC6A9! ${item.effect.damage} \uB370\uBBF8\uC9C0!`, { damage: item.effect.damage });
      this.triggerSkillEffect(item.icon || "\u{1F4A3}", "hit");
      this.triggerEnemyDamage();
    }
    if (item.effect.buff) {
      this.applyStatusEffect("player", item.effect.buff);
      this.addBattleLog("player", `${item.name} \uC0AC\uC6A9! ${item.effect.buff.name} \uD6A8\uACFC!`);
      this.triggerSkillEffect(item.icon || "\u2728", "buff");
    }
    item.quantity--;
    const inventoryItem = this.inventory.find((i) => i.id === itemId);
    if (inventoryItem) {
      inventoryItem.quantity--;
      if (inventoryItem.quantity <= 0) {
        this.inventory = this.inventory.filter((i) => i.id !== itemId);
      }
    }
    return true;
  }
  /**
   * 스킬 쿨다운 업데이트
   */
  updateSkillCooldowns() {
    this.battleSkills = this.battleService.decreaseAllCooldowns(this.battleSkills);
  }
  /**
   * 공격 스킬 실행
   */
  executeAttackSkill(skill) {
    if (!this.battleEnemy)
      return;
    const result = this.battleService.executeAttackSkill(skill, this.playerCharacter, this.battleEnemy.hp, this.battleEnemy.defense);
    if (result.isMiss) {
      this.addBattleLog("player", `${skill.name}\uC774(\uAC00) \uBE57\uB098\uAC14\uB2E4!`, { isMiss: true });
      this.triggerSkillEffect(skill.icon || "\u{1F4A8}", "miss");
      return;
    }
    this.battleEnemy.hp = result.remainingEnemyHp;
    this.addBattleLog("player", `${skill.name}! ${result.damage} \uB370\uBBF8\uC9C0!`, { damage: result.damage, isCritical: result.isCritical });
    this.triggerSkillEffect(skill.icon || "\u{1F4A5}", result.isCritical ? "critical" : "hit");
    this.triggerEnemyDamage();
    if (result.statusEffect) {
      this.applyStatusEffect("enemy", result.statusEffect);
    }
  }
  /**
   * 방어 스킬 실행
   */
  executeDefenseSkill(skill) {
    const result = this.battleService.executeDefenseSkill(skill);
    this.playerDefenseBonus = result.defenseBoost;
    this.addBattleLog("player", `${skill.name}! \uBC29\uC5B4\uB825\uC774 ${result.defenseBoost * 100}% \uC99D\uAC00\uD588\uB2E4!`);
    this.triggerSkillEffect(skill.icon || "\u{1F6E1}\uFE0F", "buff");
  }
  /**
   * 치유 스킬 실행
   */
  executeHealSkill(skill) {
    if (!this.playerCharacter)
      return;
    const result = this.battleService.executeHealSkill(skill, this.playerCharacter.hp, this.playerCharacter.maxHp);
    this.playerCharacter.hp = result.newHp;
    this.addBattleLog("player", `${skill.name}! HP ${result.healAmount} \uD68C\uBCF5!`, { heal: result.healAmount });
    this.triggerSkillEffect(skill.icon || "\u{1F49A}", "heal");
  }
  /**
   * 버프 스킬 실행
   */
  executeBuffSkill(skill) {
    const result = this.battleService.executeBuffSkill(skill);
    if (result.statusEffect) {
      this.applyStatusEffect("player", result.statusEffect);
      this.addBattleLog("player", `${skill.name}! ${result.statusEffect.name} \uD6A8\uACFC \uBC1C\uB3D9!`);
      this.triggerSkillEffect(skill.icon || "\u2728", "buff");
    }
  }
  /**
   * 디버프 스킬 실행
   */
  executeDebuffSkill(skill) {
    const result = this.battleService.executeDebuffSkill(skill);
    if (result.statusEffect) {
      this.applyStatusEffect("enemy", result.statusEffect);
      this.addBattleLog("player", `${skill.name}! \uC801\uC5D0\uAC8C ${result.statusEffect.name} \uD6A8\uACFC!`);
      this.triggerSkillEffect(skill.icon || "\u{1F53B}", "debuff");
    }
  }
  /**
   * 상태 효과 적용
   */
  applyStatusEffect(target, effect) {
    if (!this.currentBattleState)
      return;
    if (target === "player") {
      this.currentBattleState.playerStatusEffects = this.battleService.applyStatusEffect(this.currentBattleState.playerStatusEffects, effect);
    } else {
      this.currentBattleState.enemyStatusEffects = this.battleService.applyStatusEffect(this.currentBattleState.enemyStatusEffects, effect);
    }
  }
  /**
   * 스킬 이펙트 트리거
   */
  triggerSkillEffect(icon, type) {
  }
  /**
   * 전투 로그 추가
   */
  addBattleLog(actor, action, details) {
    if (!this.currentBattleState)
      return;
    const logEntry = this.battleLogService.createLogEntry(this.currentBattleState.turn, actor, action, details);
    this.currentBattleState.combatLog.push(logEntry);
    this.battleStateService.addBattleLog(this.battleLogService.formatBattleLog(logEntry));
    this.notifyLogUpdate();
  }
  /**
   * 데미지 애니메이션 트리거
   */
  triggerPlayerDamage() {
    this.playerTakingDamage = true;
    if (this.onPlayerDamage) {
      this.onPlayerDamage();
    }
    setTimeout(() => {
      this.playerTakingDamage = false;
    }, 500);
  }
  triggerEnemyDamage() {
    this.enemyTakingDamage = true;
    if (this.onEnemyDamage) {
      this.onEnemyDamage();
    }
    setTimeout(() => {
      this.enemyTakingDamage = false;
    }, 500);
  }
  /**
   * 로그 업데이트 알림
   */
  notifyLogUpdate() {
    if (this.onLogUpdate) {
      this.onLogUpdate();
    }
  }
  /**
   * 헬퍼 메서드들
   */
  getBattleItemType(itemId) {
    if (itemId.includes("potion"))
      return "potion";
    if (itemId.includes("bomb"))
      return "throwable";
    if (itemId.includes("scroll"))
      return "scroll";
    return "buff";
  }
  getBattleItemEffect(itemId) {
    if (itemId.includes("potion")) {
      return { heal: 50 };
    }
    if (itemId.includes("bomb")) {
      return { damage: 30 };
    }
    return {};
  }
  getItemIcon(itemId) {
    if (itemId.includes("potion"))
      return "\u{1F9EA}";
    if (itemId.includes("bomb"))
      return "\u{1F4A3}";
    if (itemId.includes("scroll"))
      return "\u{1F4DC}";
    return "\u{1F4E6}";
  }
  static \u0275fac = function BattleManager_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _BattleManager)(\u0275\u0275inject(NotificationService), \u0275\u0275inject(BattleService), \u0275\u0275inject(BattleLogService));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _BattleManager, factory: _BattleManager.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(BattleManager, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: NotificationService }, { type: BattleService }, { type: BattleLogService }], null);
})();

// src/app/modules/novel/services/wuxia-data.service.ts
var WuxiaDataService = class _WuxiaDataService {
  /**
   * 모든 무공 목록 가져오기
   */
  getAllMartialSkills() {
    return [
      // 소림파 무공
      {
        id: "luohan_quan",
        name: "\uB098\uD55C\uAD8C",
        chineseName: "\u7F85\u6F22\u62F3",
        type: "choShik",
        grade: "\uC911\uC2B9",
        requiredInternalPower: 50,
        internalPowerCost: 15,
        requiredLevel: 1,
        damageMultiplier: 1.2,
        hitRate: 0.85,
        criticalRate: 0.1,
        description: "\uC18C\uB9BC\uC0AC\uC758 \uAE30\uBCF8 \uAD8C\uBC95. \uAC15\uC9C1\uD558\uACE0 \uC815\uD655\uD55C \uACF5\uACA9\uC774 \uD2B9\uC9D5\uC774\uB2E4.",
        skillEffect: "\uACF5\uACA9\uB825 120%, \uBC29\uC5B4\uB825 \uC77C\uC2DC 10% \uC99D\uAC00",
        learningDifficulty: 3,
        factionId: "shaolin",
        isSecret: false
      },
      {
        id: "vajra_palm",
        name: "\uAE08\uAC15\uC7A5",
        chineseName: "\u91D1\u525B\u638C",
        type: "choShik",
        grade: "\uC911\uC2B9",
        requiredInternalPower: 80,
        internalPowerCost: 25,
        requiredLevel: 3,
        damageMultiplier: 1.5,
        hitRate: 0.8,
        criticalRate: 0.15,
        element: "fire",
        description: "\uAC15\uB825\uD55C \uC7A5\uB825\uC744 \uB2F4\uC740 \uC18C\uB9BC \uC7A5\uBC95",
        skillEffect: "\uAC15\uB825\uD55C \uC77C\uACA9, 15% \uD655\uB960\uB85C \uAE30\uC808",
        learningDifficulty: 5,
        factionId: "shaolin",
        isSecret: false,
        statusEffect: {
          type: "stun",
          duration: 1,
          damagePerTurn: 0,
          name: "\uAE30\uC808",
          icon: "\u{1F4AB}",
          description: "1\uD134 \uB3D9\uC548 \uD589\uB3D9 \uBD88\uAC00",
          statModifier: {}
        }
      },
      {
        id: "yijin_jing",
        name: "\uC5ED\uADFC\uACBD",
        chineseName: "\u6613\u7B4B\u7D93",
        type: "shimBeop",
        grade: "\uC808\uD559",
        requiredInternalPower: 200,
        internalPowerCost: 0,
        requiredLevel: 10,
        damageMultiplier: 0,
        hitRate: 1,
        criticalRate: 0,
        description: "\uC18C\uB9BC \uCD5C\uACE0\uC758 \uB0B4\uACF5\uC2EC\uBC95. \uC218\uB828 \uC2DC \uB0B4\uB825 \uD68C\uBCF5 \uC18D\uB3C4\uC640 \uCD5C\uB300\uCE58\uAC00 \uD06C\uAC8C \uC99D\uAC00\uD55C\uB2E4.",
        skillEffect: "\uB0B4\uB825 \uD68C\uBCF5 \uC18D\uB3C4 +50%, \uCD5C\uB300 \uB0B4\uB825 +100, \uC804\uD22C \uC911 \uD134\uB9C8\uB2E4 HP 5% \uD68C\uBCF5",
        learningDifficulty: 10,
        factionId: "shaolin",
        isSecret: true
      },
      // 무당파 무공
      {
        id: "taiji_quan",
        name: "\uD0DC\uADF9\uAD8C",
        chineseName: "\u592A\u6975\u62F3",
        type: "choShik",
        grade: "\uC0C1\uC2B9",
        requiredInternalPower: 100,
        internalPowerCost: 30,
        requiredLevel: 5,
        damageMultiplier: 1.3,
        hitRate: 0.9,
        criticalRate: 0.2,
        description: "\uC720\uC5F0\uD568 \uC18D\uC758 \uAC15\uD568. \uC0C1\uB300\uC758 \uACF5\uACA9\uC744 \uD758\uB824\uBCF4\uB0B4\uBA70 \uBC18\uACA9\uD55C\uB2E4.",
        skillEffect: "\uACF5\uACA9\uB825 130%, \uC0C1\uB300 \uACF5\uACA9\uC758 30%\uB97C \uBC18\uC0AC",
        learningDifficulty: 7,
        factionId: "wudang",
        isSecret: false,
        specialEffect: "counter"
      },
      {
        id: "taiji_sword",
        name: "\uD0DC\uADF9\uAC80",
        chineseName: "\u592A\u6975\u528D",
        type: "choShik",
        grade: "\uC808\uD559",
        requiredInternalPower: 150,
        internalPowerCost: 50,
        requiredLevel: 8,
        damageMultiplier: 2,
        hitRate: 0.95,
        criticalRate: 0.25,
        description: "\uBB34\uB2F9\uD30C \uCD5C\uACE0\uC758 \uAC80\uBC95. \uAC80\uAE30\uB97C \uBC1C\uB3D9\uD558\uC5EC \uC6D0\uAC70\uB9AC \uACF5\uACA9\uC774 \uAC00\uB2A5\uD558\uB2E4.",
        skillEffect: "\uAC80\uAE30 \uBC1C\uB3D9, \uAC15\uB825\uD55C \uC77C\uACA9, \uD0DC\uADF9\uAD8C\uACFC \uC5F0\uACC4 \uC2DC \uCD94\uAC00 \uD53C\uD574",
        learningDifficulty: 9,
        factionId: "wudang",
        isSecret: true,
        comboSkills: ["taiji_quan"]
      },
      // 마교 무공
      {
        id: "absorb_power",
        name: "\uD761\uC131\uB300\uBC95",
        chineseName: "\u5438\u661F\u5927\u6CD5",
        type: "shimBeop",
        grade: "\uC808\uD559",
        requiredInternalPower: 180,
        internalPowerCost: 100,
        requiredLevel: 12,
        damageMultiplier: 0.8,
        hitRate: 0.75,
        criticalRate: 0.1,
        description: "\uC0C1\uB300\uC758 \uB0B4\uB825\uC744 \uD761\uC218\uD558\uB294 \uB9C8\uAD50\uC758 \uC0AC\uC545\uD55C \uBB34\uACF5",
        skillEffect: "\uD53C\uD574\uC758 50%\uB9CC\uD07C \uB0B4\uB825 \uD68C\uBCF5, 10% \uD655\uB960\uB85C \uC8FC\uD654\uC785\uB9C8",
        learningDifficulty: 10,
        factionId: "demon_sect",
        isSecret: true,
        specialEffect: "absorb"
      },
      {
        id: "demon_palm",
        name: "\uCC9C\uB9C8\uC7A5",
        chineseName: "\u5929\u9B54\u638C",
        type: "choShik",
        grade: "\uC0C1\uC2B9",
        requiredInternalPower: 120,
        internalPowerCost: 40,
        requiredLevel: 6,
        damageMultiplier: 1.8,
        hitRate: 0.85,
        criticalRate: 0.2,
        element: "poison",
        description: "\uB3C5\uAE30\uB97C \uD488\uC740 \uB9C8\uAD50\uC758 \uC7A5\uBC95",
        skillEffect: "\uAC15\uB825\uD55C \uD53C\uD574, \uC911\uB3C5 \uD6A8\uACFC",
        learningDifficulty: 7,
        factionId: "demon_sect",
        isSecret: false,
        statusEffect: {
          type: "poison",
          duration: 3,
          damagePerTurn: 10,
          name: "\uC911\uB3C5",
          chineseName: "\u4E2D\u6BD2",
          icon: "\u2620\uFE0F",
          description: "3\uD134 \uB3D9\uC548 \uD134\uB9C8\uB2E4 10 \uD53C\uD574",
          statModifier: {}
        }
      },
      // 화산파 무공
      {
        id: "huashan_sword",
        name: "\uD654\uC0B0\uAC80\uBC95",
        chineseName: "\u83EF\u5C71\u528D\u6CD5",
        type: "choShik",
        grade: "\uC911\uC2B9",
        requiredInternalPower: 70,
        internalPowerCost: 20,
        requiredLevel: 2,
        damageMultiplier: 1.4,
        hitRate: 0.9,
        criticalRate: 0.2,
        description: "\uBE60\uB974\uACE0 \uC815\uD655\uD55C \uD654\uC0B0\uD30C\uC758 \uAC80\uBC95",
        skillEffect: "\uC2E0\uC18D\uD55C \uAC80\uACA9, \uB192\uC740 \uBA85\uC911\uB960",
        learningDifficulty: 4,
        factionId: "huashan",
        isSecret: false
      },
      {
        id: "dugu_nine_swords",
        name: "\uB3C5\uACE0\uAD6C\uAC80",
        chineseName: "\u7368\u5B64\u4E5D\u528D",
        type: "choShik",
        grade: "\uC808\uD559",
        requiredInternalPower: 0,
        internalPowerCost: 60,
        requiredLevel: 15,
        damageMultiplier: 2.5,
        hitRate: 0.99,
        criticalRate: 0.4,
        description: "\uAC80\uB9C8 \uB3C5\uACE0\uAD6C\uD328\uAC00 \uCC3D\uC548\uD55C \uC808\uC138\uAC80\uBC95. \uB0B4\uB825\uC774 \uC544\uB2CC \uAC80\uB9AC\uB85C \uC2B9\uBD80\uD55C\uB2E4.",
        skillEffect: "\uBAA8\uB4E0 \uBB34\uACF5\uC744 \uD30C\uD6FC, \uCD08\uACE0 \uCE58\uBA85\uD0C0\uC728, \uB0B4\uB825 \uBD88\uD544\uC694",
        learningDifficulty: 10,
        factionId: "huashan",
        isSecret: true,
        specialEffect: "pierce"
      },
      // 아미파 무공
      {
        id: "emei_sword",
        name: "\uC544\uBBF8\uAC80\uBC95",
        chineseName: "\u5CE8\u5D4B\u528D\u6CD5",
        type: "choShik",
        grade: "\uC911\uC2B9",
        requiredInternalPower: 60,
        internalPowerCost: 18,
        requiredLevel: 2,
        damageMultiplier: 1.3,
        hitRate: 0.88,
        criticalRate: 0.15,
        description: "\uC6B0\uC544\uD558\uBA74\uC11C\uB3C4 \uCE58\uBA85\uC801\uC778 \uC544\uBBF8\uD30C\uC758 \uAC80\uBC95",
        skillEffect: "\uBE60\uB978 \uC5F0\uACA9, \uBBFC\uCCA9\uC131 \uBCF4\uB108\uC2A4",
        learningDifficulty: 4,
        factionId: "emei",
        isSecret: false
      },
      // 공통 기본 무공
      {
        id: "basic_punch",
        name: "\uAE30\uBCF8\uAD8C\uBC95",
        chineseName: "\u57FA\u672C\u62F3\u6CD5",
        type: "choShik",
        grade: "\uD558\uC2B9",
        requiredInternalPower: 10,
        internalPowerCost: 5,
        requiredLevel: 1,
        damageMultiplier: 1,
        hitRate: 0.85,
        criticalRate: 0.05,
        description: "\uAC00\uC7A5 \uAE30\uBCF8\uC801\uC778 \uAD8C\uBC95",
        skillEffect: "\uAE30\uBCF8 \uACF5\uACA9",
        learningDifficulty: 1,
        isSecret: false
      },
      {
        id: "basic_palm",
        name: "\uAE30\uBCF8\uC7A5\uBC95",
        chineseName: "\u57FA\u672C\u638C\u6CD5",
        type: "choShik",
        grade: "\uD558\uC2B9",
        requiredInternalPower: 15,
        internalPowerCost: 8,
        requiredLevel: 1,
        damageMultiplier: 1.1,
        hitRate: 0.82,
        criticalRate: 0.08,
        description: "\uAE30\uBCF8\uC801\uC778 \uC7A5\uBC95",
        skillEffect: "\uC7A5\uB825\uC744 \uB2F4\uC740 \uACF5\uACA9",
        learningDifficulty: 2,
        isSecret: false
      },
      {
        id: "lightness_skill",
        name: "\uACBD\uC2E0\uC220",
        chineseName: "\u8F15\u8EAB\u8853",
        type: "gyeongGong",
        grade: "\uD558\uC2B9",
        requiredInternalPower: 20,
        internalPowerCost: 10,
        requiredLevel: 1,
        damageMultiplier: 0,
        hitRate: 1,
        criticalRate: 0,
        description: "\uAE30\uBCF8 \uACBD\uACF5. \uD68C\uD53C\uC728\uC744 \uB192\uC778\uB2E4.",
        skillEffect: "3\uD134 \uB3D9\uC548 \uD68C\uD53C\uC728 +30%",
        learningDifficulty: 3,
        isSecret: false
      }
    ];
  }
  /**
   * 기본 무공 목록 (시작 시 배우는 무공)
   */
  getStartingSkills() {
    const allSkills = this.getAllMartialSkills();
    return allSkills.filter((skill) => skill.id === "basic_punch" || skill.id === "basic_palm" || skill.id === "lightness_skill");
  }
  /**
   * 문파별 무공 조회
   */
  getSkillsByFaction(factionId) {
    return this.getAllMartialSkills().filter((skill) => skill.factionId === factionId);
  }
  /**
   * 등급별 무공 조회
   */
  getSkillsByGrade(grade) {
    return this.getAllMartialSkills().filter((skill) => skill.grade === grade);
  }
  /**
   * 비급 무공만 조회
   */
  getSecretSkills() {
    return this.getAllMartialSkills().filter((skill) => skill.isSecret);
  }
  /**
   * ID로 무공 조회
   */
  getSkillById(id) {
    return this.getAllMartialSkills().find((skill) => skill.id === id);
  }
  /**
   * 레벨 요구사항에 맞는 무공 조회
   */
  getAvailableSkills(playerLevel, playerInternalPower) {
    return this.getAllMartialSkills().filter((skill) => skill.requiredLevel <= playerLevel && skill.requiredInternalPower <= playerInternalPower);
  }
  /**
   * 모든 단약 목록 가져오기
   */
  getAllElixirs() {
    return [
      {
        id: "small_return_pill",
        name: "\uC18C\uD658\uB2E8",
        chineseName: "\u5C0F\u9084\u4E39",
        type: "healing",
        grade: "\uC911\uD488",
        effects: [
          {
            type: "hp_recovery",
            value: 50,
            description: "HP 50 \uD68C\uBCF5"
          },
          {
            type: "cure_injury",
            value: 1,
            description: "\uACBD\uBBF8\uD55C \uB0B4\uC0C1 \uCE58\uB8CC"
          }
        ],
        description: "\uACBD\uBBF8\uD55C \uB0B4\uC0C1\uC744 \uCE58\uB8CC\uD558\uB294 \uB2E8\uC57D",
        rarity: 3,
        price: 100
      },
      {
        id: "great_return_pill",
        name: "\uB300\uD658\uB2E8",
        chineseName: "\u5927\u9084\u4E39",
        type: "healing",
        grade: "\uC0C1\uD488",
        effects: [
          {
            type: "hp_recovery",
            value: 150,
            description: "HP 150 \uD68C\uBCF5"
          },
          {
            type: "mp_recovery",
            value: 50,
            description: "MP 50 \uD68C\uBCF5"
          },
          {
            type: "cure_injury",
            value: 3,
            description: "\uC911\uC0C1 \uCE58\uB8CC"
          }
        ],
        description: "\uC911\uC0C1\uC744 \uCE58\uB8CC\uD558\uB294 \uADC0\uC911\uD55C \uB2E8\uC57D",
        rarity: 7,
        price: 500
      },
      {
        id: "thousand_year_ginseng",
        name: "\uCC9C\uB144\uD558\uC218\uC624",
        chineseName: "\u5343\u5E74\u4F55\u9996\u70CF",
        type: "cultivation",
        grade: "\uADF9\uD488",
        effects: [
          {
            type: "internal_power_boost",
            value: 10,
            description: "\uCD5C\uB300 \uB0B4\uB825 +10\uB144 \uACF5\uB825"
          }
        ],
        description: "\uCC9C\uB144 \uBB35\uC740 \uC601\uC57D. 10\uB144 \uACF5\uB825\uC744 \uC99D\uC9C4\uC2DC\uD0A8\uB2E4.",
        rarity: 9,
        price: 2e3
      },
      {
        id: "snow_lotus",
        name: "\uCC9C\uC0B0\uC124\uB828",
        chineseName: "\u5929\u5C71\u96EA\u84EE",
        type: "cultivation",
        grade: "\uADF9\uD488",
        effects: [
          {
            type: "internal_power_boost",
            value: 20,
            description: "\uCD5C\uB300 \uB0B4\uB825 +20\uB144 \uACF5\uB825"
          },
          {
            type: "cure_poison",
            value: 100,
            description: "\uBAA8\uB4E0 \uB3C5 \uC81C\uAC70"
          }
        ],
        description: "\uCC9C\uC0B0\uC5D0\uC11C\uB9CC \uC790\uB77C\uB294 \uC2E0\uBE44\uC758 \uC601\uC57D",
        rarity: 10,
        price: 5e3
      },
      {
        id: "demon_blood_ginseng",
        name: "\uCC9C\uB9C8\uD608\uC0BC",
        chineseName: "\u5929\u9B54\u8840\u8518",
        type: "cultivation",
        grade: "\uADF9\uD488",
        effects: [
          {
            type: "internal_power_boost",
            value: 50,
            description: "\uCD5C\uB300 \uB0B4\uB825 +50\uB144 \uACF5\uB825"
          },
          {
            type: "stat_boost",
            value: 10,
            duration: 0,
            description: "\uACF5\uACA9\uB825 +10"
          }
        ],
        description: "\uB9C8\uAD50\uC758 \uBE44\uC804 \uC601\uC57D. \uAC15\uB825\uD558\uC9C0\uB9CC \uC8FC\uD654\uC785\uB9C8\uC758 \uC704\uD5D8\uC774 \uC788\uB2E4.",
        rarity: 10,
        price: 1e4,
        sideEffect: "30% \uD655\uB960\uB85C \uC8FC\uD654\uC785\uB9C8",
        sideEffectChance: 0.3
      },
      {
        id: "fasting_pill",
        name: "\uBCBD\uACE1\uB2E8",
        chineseName: "\u8F9F\u7A40\u4E39",
        type: "special",
        grade: "\uD558\uD488",
        effects: [
          {
            type: "hp_recovery",
            value: 20,
            description: "HP 20 \uD68C\uBCF5"
          }
        ],
        description: "\uACF5\uBCF5\uC744 \uBA74\uD558\uAC8C \uD574\uC8FC\uB294 \uB2E8\uC57D",
        rarity: 1,
        price: 10
      },
      {
        id: "antidote_pill",
        name: "\uD574\uB3C5\uB2E8",
        chineseName: "\u89E3\u6BD2\u4E39",
        type: "detox",
        grade: "\uC911\uD488",
        effects: [
          {
            type: "cure_poison",
            value: 50,
            description: "\uC911\uB3C5 \uC0C1\uD0DC \uCE58\uB8CC"
          }
        ],
        description: "\uC77C\uBC18\uC801\uC778 \uB3C5\uC744 \uD574\uB3C5\uD558\uB294 \uB2E8\uC57D",
        rarity: 4,
        price: 150
      }
    ];
  }
  /**
   * 모든 문파 목록 가져오기
   */
  getAllFactions() {
    return [
      {
        id: "shaolin",
        name: "\uC18C\uB9BC\uD30C",
        chineseName: "\u5C11\u6797\u6D3E",
        type: "righteous",
        description: "\uCC9C\uD558\uBB34\uB9BC\uC758 \uD0DC\uC0B0\uBD81\uB450. \uBD88\uAC00\uC758 \uC790\uBE44\uC640 \uAC15\uB825\uD55C \uAD8C\uBC95\uC73C\uB85C \uC720\uBA85\uD558\uB2E4.",
        headquarters: "\uC22D\uC0B0 \uC18C\uB9BC\uC0AC",
        founder: "\uB2EC\uB9C8\uC870\uC0AC",
        reputation: 0,
        relationship: "neutral",
        basicSkills: ["luohan_quan", "vajra_palm"],
        advancedSkills: ["prajna_palm", "dragon_claw_hand"],
        secretSkills: ["yijin_jing", "marrow_washing_classic"],
        specialties: ["\uAD8C\uBC95", "\uC7A5\uBC95", "\uB0B4\uACF5"],
        philosophy: "\uBD88\uAC00\uC758 \uC790\uBE44\uC640 \uBB34\uD559\uC758 \uC870\uD654"
      },
      {
        id: "wudang",
        name: "\uBB34\uB2F9\uD30C",
        chineseName: "\u6B66\u7576\u6D3E",
        type: "righteous",
        description: "\uB3C4\uAC00\uC758 \uBB34\uD559\uC744 \uC9D1\uB300\uC131\uD55C \uBA85\uBB38\uC815\uD30C. \uD0DC\uADF9\uAD8C\uACFC \uAC80\uC220\uC758 \uB300\uAC00\uB4E4\uC774 \uBAA8\uC5EC\uC788\uB2E4.",
        headquarters: "\uBB34\uB2F9\uC0B0",
        founder: "\uC7A5\uC0BC\uBD09",
        reputation: 0,
        relationship: "neutral",
        basicSkills: ["taiji_quan", "wudang_sword"],
        advancedSkills: ["taiji_sword", "pure_yang_palm"],
        secretSkills: ["taiji_mystical_skill", "tai_chi_divine_technique"],
        specialties: ["\uAC80\uC220", "\uAD8C\uBC95", "\uB3C4\uBC95"],
        philosophy: "\uBB34\uC704\uC790\uC5F0, \uC774\uC720\uC81C\uAC15"
      },
      {
        id: "demon_sect",
        name: "\uB9C8\uAD50",
        chineseName: "\u9B54\u654E",
        type: "evil",
        description: "\uBB34\uB9BC\uC758 \uACF5\uC801. \uAC15\uB825\uD558\uACE0 \uC0AC\uC545\uD55C \uBB34\uACF5\uC744 \uC0AC\uC6A9\uD55C\uB2E4.",
        headquarters: "\uAD11\uBA85\uC815",
        founder: "\uCC9C\uB9C8",
        reputation: 0,
        relationship: "neutral",
        basicSkills: ["demon_palm", "blood_claw"],
        advancedSkills: ["soul_absorbing_palm", "ten_directions_annihilation"],
        secretSkills: ["absorb_power", "heaven_demon_technique"],
        specialties: ["\uD761\uACF5", "\uB3C5\uACF5", "\uC554\uAE30"],
        philosophy: "\uD798\uC774 \uACE7 \uC815\uC758"
      },
      {
        id: "huashan",
        name: "\uD654\uC0B0\uD30C",
        chineseName: "\u83EF\u5C71\u6D3E",
        type: "righteous",
        description: "\uAC80\uC220\uC758 \uBA85\uAC00. \uD654\uC0B0\uAC80\uBC95\uC740 \uBB34\uB9BC\uC5D0\uC11C \uAC00\uC7A5 \uBE60\uB974\uACE0 \uB0A0\uCE74\uB86D\uAE30\uB85C \uC720\uBA85\uD558\uB2E4.",
        headquarters: "\uD654\uC0B0",
        founder: "\uD654\uC0B0\uAC80\uC131",
        reputation: 0,
        relationship: "neutral",
        basicSkills: ["huashan_sword", "yangwu_sword"],
        advancedSkills: ["dugu_nine_swords", "swift_sword"],
        secretSkills: ["purple_mist_divine_art", "lone_sword_technique"],
        specialties: ["\uAC80\uC220", "\uACBD\uACF5"],
        philosophy: "\uAC80\uC73C\uB85C \uB3C4\uB97C \uD1B5\uD55C\uB2E4"
      },
      {
        id: "emei",
        name: "\uC544\uBBF8\uD30C",
        chineseName: "\u5CE8\u5D4B\u6D3E",
        type: "righteous",
        description: "\uC5EC\uD611\uB4E4\uC758 \uC131\uC9C0. \uC6B0\uC544\uD558\uBA74\uC11C\uB3C4 \uCE58\uBA85\uC801\uC778 \uBB34\uACF5\uC744 \uC0AC\uC6A9\uD55C\uB2E4.",
        headquarters: "\uC544\uBBF8\uC0B0",
        founder: "\uACFD\uC591",
        reputation: 0,
        relationship: "neutral",
        basicSkills: ["emei_sword", "jade_maiden_skill"],
        advancedSkills: ["buddha_palm", "nine_yin_divine_claw"],
        secretSkills: ["emei_ultimate_skill", "jade_maiden_heart_sutra"],
        specialties: ["\uAC80\uC220", "\uC7A5\uBC95", "\uC554\uAE30"],
        philosophy: "\uAC15\uC720\uBCD1\uC81C, \uC720\uC911\uB300\uAC15"
      }
    ];
  }
  /**
   * ID로 문파 조회
   */
  getFactionById(id) {
    return this.getAllFactions().find((faction) => faction.id === id);
  }
  /**
   * 정파/사파 필터링
   */
  getFactionsByType(type) {
    return this.getAllFactions().filter((faction) => faction.type === type);
  }
  static \u0275fac = function WuxiaDataService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _WuxiaDataService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _WuxiaDataService, factory: _WuxiaDataService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(WuxiaDataService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();

// src/app/modules/novel/managers/wuxia.manager.ts
var WuxiaManager = class _WuxiaManager {
  notification;
  wuxiaDataService;
  // 무협 데이터
  martialArtsSkills = [];
  learnedMartialSkills = [];
  availableFactions = [];
  playerFaction = null;
  wulinRelationships = [];
  elixirs = [];
  martialManuals = [];
  // 내공/경지 시스템
  playerInternalPower = {
    current: 0,
    max: 100,
    purity: 50,
    stability: 100,
    realm: "\uCD08\uB958",
    realmProgress: 0,
    trainingLevel: 0,
    recoveryRate: 1,
    meridians: {
      meridians: [],
      opened: 0,
      total: 12
    }
  };
  // 무협 전투 상태
  martialBattleState = null;
  // 플레이어 캐릭터 참조
  playerCharacter = null;
  inventory = [];
  constructor(notification, wuxiaDataService) {
    this.notification = notification;
    this.wuxiaDataService = wuxiaDataService;
  }
  /**
   * 플레이어 캐릭터 설정
   */
  setPlayerCharacter(character) {
    this.playerCharacter = character;
  }
  /**
   * 인벤토리 설정
   */
  setInventory(inventory) {
    this.inventory = inventory;
  }
  /**
   * 인벤토리 가져오기
   */
  getInventory() {
    return this.inventory;
  }
  /**
   * 무협 시스템 초기화
   */
  initializeWuxiaSystem() {
    this.initializeMeridians();
    this.initializeFactions();
    this.initializeMartialSkills();
    this.initializeElixirs();
    this.initializeMartialManuals();
  }
  /**
   * 혈도(경맥) 시스템 초기화
   */
  initializeMeridians() {
    const meridianNames = [
      { id: "lung", name: "\uC218\uD0DC\uC74C\uD3D0\uACBD", chinese: "\u624B\u592A\u9670\u80BA\u7D93", bonus: { hp: 10, defense: 2 } },
      { id: "large_intestine", name: "\uC218\uC591\uBA85\uB300\uC7A5\uACBD", chinese: "\u624B\u967D\u660E\u5927\u8178\u7D93", bonus: { strength: 2 } },
      { id: "stomach", name: "\uC871\uC591\uBA85\uC704\uACBD", chinese: "\u8DB3\u967D\u660E\u80C3\u7D93", bonus: { maxHp: 20 } },
      { id: "spleen", name: "\uC871\uD0DC\uC74C\uBE44\uACBD", chinese: "\u8DB3\u592A\u9670\u813E\u7D93", bonus: { hp: 15 } },
      { id: "heart", name: "\uC218\uC18C\uC74C\uC2EC\uACBD", chinese: "\u624B\u5C11\u9670\u5FC3\u7D93", bonus: { mp: 10, intelligence: 2 } },
      { id: "small_intestine", name: "\uC218\uD0DC\uC591\uC18C\uC7A5\uACBD", chinese: "\u624B\u592A\u967D\u5C0F\u8178\u7D93", bonus: { agility: 2 } },
      { id: "bladder", name: "\uC871\uD0DC\uC591\uBC29\uAD11\uACBD", chinese: "\u8DB3\u592A\u967D\u8180\u80F1\u7D93", bonus: { maxMp: 20 } },
      { id: "kidney", name: "\uC871\uC18C\uC74C\uC2E0\uACBD", chinese: "\u8DB3\u5C11\u9670\u814E\u7D93", bonus: { maxHp: 25, maxMp: 25 } },
      { id: "pericardium", name: "\uC218\uAD90\uC74C\uC2EC\uD3EC\uACBD", chinese: "\u624B\u53A5\u9670\u5FC3\u5305\u7D93", bonus: { defense: 3 } },
      { id: "triple_burner", name: "\uC218\uC18C\uC591\uC0BC\uCD08\uACBD", chinese: "\u624B\u5C11\u967D\u4E09\u7126\u7D93", bonus: { mp: 15 } },
      { id: "gallbladder", name: "\uC871\uC18C\uC591\uB2F4\uACBD", chinese: "\u8DB3\u5C11\u967D\u81BD\u7D93", bonus: { attack: 3 } },
      { id: "liver", name: "\uC871\uAD90\uC74C\uAC04\uACBD", chinese: "\u8DB3\u53A5\u9670\u809D\u7D93", bonus: { attack: 5, strength: 3 } }
    ];
    this.playerInternalPower.meridians.meridians = meridianNames.map((m) => ({
      id: m.id,
      name: m.name,
      chineseName: m.chinese,
      isOpened: false,
      openProgress: 0,
      bonus: m.bonus
    }));
  }
  /**
   * 문파 시스템 초기화
   */
  initializeFactions() {
    this.availableFactions = this.wuxiaDataService.getAllFactions();
  }
  /**
   * 무공 초식 데이터 초기화
   */
  initializeMartialSkills() {
    this.martialArtsSkills = this.wuxiaDataService.getAllMartialSkills();
    this.learnedMartialSkills = this.wuxiaDataService.getStartingSkills();
  }
  /**
   * 단약 시스템 초기화
   */
  initializeElixirs() {
    this.elixirs = this.wuxiaDataService.getAllElixirs();
  }
  /**
   * 무공 비급 초기화
   */
  initializeMartialManuals() {
    this.martialManuals = [
      {
        id: "manual_luohan_quan",
        name: "\uB098\uD55C\uAD8C\uBCF4",
        chineseName: "\u7F85\u6F22\u62F3\u8B5C",
        skillId: "luohan_quan",
        requiredLevel: 1,
        requiredInternalPower: 30,
        learningTime: 7,
        learningDifficulty: 3,
        deviationRisk: 5,
        description: "\uC18C\uB9BC\uC0AC \uB098\uD55C\uAD8C\uC744 \uAE30\uB85D\uD55C \uBB34\uACF5 \uBE44\uAE09",
        isObtained: false,
        isLearned: false
      },
      {
        id: "manual_taiji_sword",
        name: "\uD0DC\uADF9\uAC80\uBCF4",
        chineseName: "\u592A\u6975\u528D\u8B5C",
        skillId: "taiji_sword",
        requiredLevel: 8,
        requiredInternalPower: 150,
        requiredFaction: "wudang",
        learningTime: 30,
        learningDifficulty: 9,
        deviationRisk: 20,
        description: "\uBB34\uB2F9\uD30C\uC758 \uC808\uD559 \uD0DC\uADF9\uAC80\uC744 \uAE30\uB85D\uD55C \uBE44\uAE09",
        isObtained: false,
        isLearned: false
      },
      {
        id: "manual_dugu_nine_swords",
        name: "\uB3C5\uACE0\uAD6C\uAC80\uBCF4",
        chineseName: "\u7368\u5B64\u4E5D\u528D\u8B5C",
        skillId: "dugu_nine_swords",
        requiredLevel: 15,
        requiredInternalPower: 0,
        learningTime: 90,
        learningDifficulty: 10,
        deviationRisk: 0,
        description: "\uAC80\uB9C8 \uB3C5\uACE0\uAD6C\uD328\uC758 \uC808\uC138\uAC80\uBC95. \uB0B4\uB825\uC774 \uD544\uC694\uC5C6\uB294 \uAC80\uB9AC\uC758 \uADF9\uCE58",
        location: "\uD654\uC0B0 \uC0AC\uACE0",
        isObtained: false,
        isLearned: false
      },
      {
        id: "manual_absorb_power",
        name: "\uD761\uC131\uB300\uBC95\uBE44\uAE09",
        chineseName: "\u5438\u661F\u5927\u6CD5\u79D8\u7B08",
        skillId: "absorb_power",
        requiredLevel: 12,
        requiredInternalPower: 180,
        learningTime: 60,
        learningDifficulty: 10,
        deviationRisk: 50,
        description: "\uB9C8\uAD50\uC758 \uAE08\uB2E8\uC758 \uBB34\uACF5. \uC2B5\uB4DD \uC2DC \uC8FC\uD654\uC785\uB9C8\uC758 \uC704\uD5D8\uC774 \uB9E4\uC6B0 \uB192\uB2E4",
        isObtained: false,
        isLearned: false
      }
    ];
  }
  /**
   * 문파 가입
   */
  joinFaction(factionId) {
    const faction = this.availableFactions.find((f) => f.id === factionId);
    if (!faction)
      return;
    this.playerFaction = faction;
    this.playerFaction.relationship = "ally";
    this.playerFaction.reputation = 100;
    const relationship = {
      playerId: "player",
      factionId,
      rank: "\uC18D\uAC00\uC81C\uC790",
      contribution: 0,
      trustLevel: 50,
      joinDate: /* @__PURE__ */ new Date()
    };
    this.wulinRelationships.push(relationship);
    const basicSkills = this.martialArtsSkills.filter((skill) => faction.basicSkills.includes(skill.id));
    basicSkills.forEach((skill) => {
      if (!this.learnedMartialSkills.find((s) => s.id === skill.id)) {
        this.learnedMartialSkills.push(skill);
      }
    });
    this.notification.show(`${faction.name}\uC5D0 \uC785\uBB38\uD558\uC600\uC2B5\uB2C8\uB2E4!`);
  }
  /**
   * 무공 습득
   */
  learnMartialSkill(skillId) {
    const skill = this.martialArtsSkills.find((s) => s.id === skillId);
    if (!skill || !this.playerCharacter)
      return false;
    if (this.learnedMartialSkills.find((s) => s.id === skillId)) {
      this.notification.show("\uC774\uBBF8 \uC2B5\uB4DD\uD55C \uBB34\uACF5\uC785\uB2C8\uB2E4.");
      return false;
    }
    if (this.playerCharacter.level < skill.requiredLevel) {
      this.notification.show(`\uB808\uBCA8 ${skill.requiredLevel} \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.`);
      return false;
    }
    if (this.playerInternalPower.max < skill.requiredInternalPower) {
      this.notification.show(`\uB0B4\uB825 ${skill.requiredInternalPower} \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.`);
      return false;
    }
    if (skill.factionId && (!this.playerFaction || this.playerFaction.id !== skill.factionId)) {
      this.notification.show(`${skill.factionId} \uBB38\uD30C \uC18C\uC18D\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.`);
      return false;
    }
    this.learnedMartialSkills.push(skill);
    this.notification.show(`${skill.name}(${skill.chineseName})\uC744(\uB97C) \uC2B5\uB4DD\uD558\uC600\uC2B5\uB2C8\uB2E4!`);
    return true;
  }
  /**
   * 혈도 개통
   */
  openMeridian(meridianId) {
    const meridian = this.playerInternalPower.meridians.meridians.find((m) => m.id === meridianId);
    if (!meridian || !this.playerCharacter)
      return false;
    if (meridian.isOpened) {
      this.notification.show("\uC774\uBBF8 \uAC1C\uD1B5\uB41C \uD608\uB3C4\uC785\uB2C8\uB2E4.");
      return false;
    }
    const requiredPower = (this.playerInternalPower.meridians.opened + 1) * 50;
    if (this.playerInternalPower.max < requiredPower) {
      this.notification.show(`\uB0B4\uB825 ${requiredPower} \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.`);
      return false;
    }
    meridian.isOpened = true;
    meridian.openProgress = 100;
    this.playerInternalPower.meridians.opened++;
    Object.keys(meridian.bonus).forEach((stat) => {
      const value = meridian.bonus[stat];
      switch (stat) {
        case "hp":
          this.playerCharacter.hp += value;
          break;
        case "maxHp":
          this.playerCharacter.maxHp += value;
          this.playerCharacter.hp += value;
          break;
        case "mp":
          this.playerCharacter.mp += value;
          break;
        case "maxMp":
          this.playerCharacter.maxMp += value;
          this.playerCharacter.mp += value;
          break;
        case "attack":
          this.playerCharacter.attack += value;
          break;
        case "defense":
          this.playerCharacter.defense += value;
          break;
        case "strength":
          this.playerCharacter.strength += value;
          break;
        case "agility":
          this.playerCharacter.agility += value;
          break;
        case "intelligence":
          this.playerCharacter.intelligence += value;
          break;
      }
    });
    this.notification.show(`${meridian.name}(${meridian.chineseName}) \uAC1C\uD1B5 \uC131\uACF5!`);
    return true;
  }
  /**
   * 내공 수련
   */
  cultivateInternalPower(hours, onExpGain, onSaveGame) {
    const baseGain = hours * (1 + this.playerInternalPower.trainingLevel / 100);
    const purityBonus = this.playerInternalPower.purity / 100;
    const totalGain = Math.floor(baseGain * (1 + purityBonus));
    this.playerInternalPower.current = Math.min(this.playerInternalPower.max, this.playerInternalPower.current + totalGain);
    this.playerInternalPower.trainingLevel = Math.min(100, this.playerInternalPower.trainingLevel + hours * 0.5);
    this.playerInternalPower.realmProgress += hours * 0.2;
    this.checkRealmBreakthrough();
    const expGain = Math.floor(hours * 10 * (1 + this.playerInternalPower.trainingLevel / 200));
    if (onExpGain) {
      onExpGain(expGain);
    }
    this.notification.show(`${hours}\uC2DC\uAC04 \uC218\uB828 \uC644\uB8CC. \uB0B4\uB825 +${totalGain}, \uACBD\uD5D8\uCE58 +${expGain}`);
    if (onSaveGame) {
      onSaveGame("autosave");
    }
  }
  /**
   * 경지 돌파 체크
   */
  checkRealmBreakthrough() {
    if (this.playerInternalPower.realmProgress < 100)
      return;
    const realms = ["\uCD08\uB958", "\uC77C\uB958", "\uC808\uC815", "\uD654\uACBD", "\uCC9C\uC778\uD569\uC77C"];
    const currentIndex = realms.indexOf(this.playerInternalPower.realm);
    if (currentIndex >= realms.length - 1) {
      this.notification.show("\uC774\uBBF8 \uCD5C\uACE0 \uACBD\uC9C0\uC5D0 \uB3C4\uB2EC\uD558\uC600\uC2B5\uB2C8\uB2E4.");
      return;
    }
    const nextRealm = realms[currentIndex + 1];
    const requiredPower = (currentIndex + 2) * 200;
    if (this.playerInternalPower.max < requiredPower) {
      this.notification.show(`\uACBD\uC9C0 \uB3CC\uD30C\uC5D0\uB294 \uB0B4\uB825 ${requiredPower} \uC774\uC0C1\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.`);
      return;
    }
    this.playerInternalPower.realm = nextRealm;
    this.playerInternalPower.realmProgress = 0;
    this.playerInternalPower.max += 100;
    this.playerInternalPower.recoveryRate += 2;
    this.notification.show(`\u2B50 \uACBD\uC9C0 \uB3CC\uD30C! ${nextRealm} \uACBD\uC9C0\uC5D0 \uB3C4\uB2EC\uD558\uC600\uC2B5\uB2C8\uB2E4!`);
  }
  /**
   * 단약 사용
   */
  useElixir(elixirId) {
    const elixir = this.elixirs.find((e) => e.id === elixirId);
    if (!elixir || !this.playerCharacter)
      return;
    const inventoryItem = this.inventory.find((item) => item.id === elixirId);
    if (!inventoryItem || inventoryItem.quantity <= 0) {
      this.notification.show("\uB2E8\uC57D\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4.");
      return;
    }
    inventoryItem.quantity--;
    if (inventoryItem.quantity === 0) {
      this.inventory = this.inventory.filter((item) => item.id !== elixirId);
    }
    if (elixir.sideEffect && elixir.sideEffectChance) {
      if (Math.random() < elixir.sideEffectChance) {
        this.notification.show(`\u26A0\uFE0F ${elixir.sideEffect}!`);
        this.playerInternalPower.stability -= 30;
        this.playerCharacter.hp = Math.floor(this.playerCharacter.hp * 0.5);
        return;
      }
    }
    elixir.effects.forEach((effect) => {
      switch (effect.type) {
        case "hp_recovery":
          this.playerCharacter.hp = Math.min(this.playerCharacter.maxHp, this.playerCharacter.hp + effect.value);
          break;
        case "mp_recovery":
          this.playerCharacter.mp = Math.min(this.playerCharacter.maxMp, this.playerCharacter.mp + effect.value);
          break;
        case "internal_power_boost":
          this.playerInternalPower.max += effect.value;
          this.playerInternalPower.current += effect.value;
          break;
        case "cure_poison":
          break;
        case "stat_boost":
          this.playerCharacter.attack += effect.value;
          break;
      }
    });
    this.notification.show(`${elixir.name}(${elixir.chineseName})\uC744(\uB97C) \uC0AC\uC6A9\uD558\uC600\uC2B5\uB2C8\uB2E4.`);
  }
  /**
   * 경지에 따른 보너스 계산
   */
  getRealmBonus(realm) {
    switch (realm) {
      case "\uCD08\uB958":
        return 0;
      case "\uC77C\uB958":
        return 0.05;
      case "\uC808\uC815":
        return 0.1;
      case "\uD654\uACBD":
        return 0.2;
      case "\uCC9C\uC778\uD569\uC77C":
        return 0.3;
      default:
        return 0;
    }
  }
  /**
   * 무협 전투 시작
   */
  startMartialBattle(enemyName, currentBattleState) {
    this.martialBattleState = __spreadProps(__spreadValues({}, currentBattleState), {
      playerInternalPower: this.playerInternalPower.current,
      playerMaxInternalPower: this.playerInternalPower.max,
      enemyInternalPower: 100,
      enemyMaxInternalPower: 100,
      skillCooldowns: {},
      comboCounter: 0,
      playerRealm: this.playerInternalPower.realm,
      enemyRealm: "\uCD08\uB958"
    });
  }
  /**
   * 무공 사용
   */
  useMartialSkill(skillId) {
    if (!this.martialBattleState || !this.playerCharacter) {
      return { success: false, damage: 0, message: "\uC804\uD22C \uC911\uC774 \uC544\uB2D9\uB2C8\uB2E4!" };
    }
    const skill = this.learnedMartialSkills.find((s) => s.id === skillId);
    if (!skill) {
      return { success: false, damage: 0, message: "\uD574\uB2F9 \uBB34\uACF5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4!" };
    }
    if (this.martialBattleState.playerInternalPower < skill.internalPowerCost) {
      return { success: false, damage: 0, message: "\uB0B4\uB825\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4!" };
    }
    if (this.martialBattleState.skillCooldowns[skillId] && this.martialBattleState.skillCooldowns[skillId] > 0) {
      return { success: false, damage: 0, message: "\uC544\uC9C1 \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4!" };
    }
    this.martialBattleState.playerInternalPower -= skill.internalPowerCost;
    const realmBonus = this.getRealmBonus(this.martialBattleState.playerRealm);
    const hitRate = skill.hitRate + realmBonus;
    if (Math.random() > hitRate) {
      return { success: false, damage: 0, message: `${skill.name}(${skill.chineseName})\uC774(\uAC00) \uBE57\uB098\uAC14\uB2E4! \u{1F4A8}` };
    }
    const baseDamage = this.playerCharacter.attack * skill.damageMultiplier;
    const internalBonus = Math.floor(this.martialBattleState.playerInternalPower / 50);
    const totalDamage = Math.floor(baseDamage + internalBonus);
    const critChance = skill.criticalRate + realmBonus;
    const isCritical = Math.random() < critChance;
    const finalDamage = isCritical ? Math.floor(totalDamage * 1.5) : totalDamage;
    let specialEffect = "";
    if (skill.comboSkills && this.martialBattleState.lastSkillUsed && skill.comboSkills.includes(this.martialBattleState.lastSkillUsed)) {
      this.martialBattleState.comboCounter++;
      const comboBonus = Math.floor(finalDamage * 0.3);
      const comboDamage = finalDamage + comboBonus;
      specialEffect = `\u{1F525} \uC5F0\uACC4 \uC131\uACF5! \uCF64\uBCF4 ${this.martialBattleState.comboCounter}`;
      this.martialBattleState.lastSkillUsed = skillId;
      return {
        success: true,
        damage: comboDamage,
        message: isCritical ? "\u26A1\uD68C\uC2EC\uC758 \uC77C\uACA9!\u26A1" : "",
        specialEffect
      };
    } else {
      this.martialBattleState.comboCounter = 0;
      const critMark = isCritical ? "\u26A1\uD68C\uC2EC\uC758 \uC77C\uACA9!\u26A1" : "";
      if (skill.specialEffect === "absorb") {
        const absorbed = Math.floor(finalDamage * 0.5);
        this.martialBattleState.playerInternalPower = Math.min(this.martialBattleState.playerMaxInternalPower, this.martialBattleState.playerInternalPower + absorbed);
        specialEffect = `\u{1F300} \uB0B4\uB825 ${absorbed} \uD761\uC218!`;
      }
      this.martialBattleState.lastSkillUsed = skillId;
      return {
        success: true,
        damage: finalDamage,
        message: critMark,
        specialEffect
      };
    }
  }
  static \u0275fac = function WuxiaManager_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _WuxiaManager)(\u0275\u0275inject(NotificationService), \u0275\u0275inject(WuxiaDataService));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _WuxiaManager, factory: _WuxiaManager.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(WuxiaManager, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: NotificationService }, { type: WuxiaDataService }], null);
})();

// src/app/modules/novel/services/dungeon.manager.ts
var DungeonManager = class _DungeonManager {
  callbacks;
  // 던전 상태
  _currentDungeon = null;
  _currentDungeonRoom = null;
  _showDungeonPanel = false;
  _showDungeonTestDialog = false;
  _showDungeonEntryDialog = false;
  _selectedDungeonType = null;
  _selectedDifficulty = null;
  // 던전 테스트 옵션
  _dungeonTestOptions = {
    godMode: false,
    oneHitKill: false,
    skipCombat: false,
    showAllRooms: false,
    unlockAllRooms: false
  };
  // 던전 진행 상태
  _dungeonProgress = {
    inDungeon: false,
    currentDungeonId: null,
    clearedDungeons: {},
    totalStats: {
      dungeonsCleared: 0,
      monstersKilled: 0,
      elitesKilled: 0,
      bossesKilled: 0,
      totalGoldEarned: 0,
      totalExpEarned: 0
    }
  };
  // 던전 타입 목록
  _dungeonTypes = [];
  constructor() {
  }
  // ==================== Getters ====================
  get currentDungeon() {
    return this._currentDungeon;
  }
  get currentDungeonRoom() {
    return this._currentDungeonRoom;
  }
  get showDungeonPanel() {
    return this._showDungeonPanel;
  }
  get showDungeonTestDialog() {
    return this._showDungeonTestDialog;
  }
  get showDungeonEntryDialog() {
    return this._showDungeonEntryDialog;
  }
  get selectedDungeonType() {
    return this._selectedDungeonType;
  }
  get selectedDifficulty() {
    return this._selectedDifficulty;
  }
  get dungeonTestOptions() {
    return this._dungeonTestOptions;
  }
  get dungeonProgress() {
    return this._dungeonProgress;
  }
  get dungeonTypes() {
    return this._dungeonTypes;
  }
  // ==================== Setters ====================
  set currentDungeon(dungeon) {
    this._currentDungeon = dungeon;
  }
  set currentDungeonRoom(room) {
    this._currentDungeonRoom = room;
  }
  set showDungeonPanel(show) {
    this._showDungeonPanel = show;
  }
  set showDungeonTestDialog(show) {
    this._showDungeonTestDialog = show;
  }
  set showDungeonEntryDialog(show) {
    this._showDungeonEntryDialog = show;
  }
  set selectedDungeonType(type) {
    this._selectedDungeonType = type;
  }
  set selectedDifficulty(difficulty) {
    this._selectedDifficulty = difficulty;
  }
  set dungeonProgress(progress) {
    this._dungeonProgress = progress;
  }
  set dungeonTypes(types) {
    this._dungeonTypes = types;
  }
  // ==================== 초기화 ====================
  initialize(callbacks) {
    this.callbacks = callbacks;
  }
  initializeDungeonSystem() {
    this._dungeonTypes = this.callbacks.getDungeonService().getDefaultDungeonTypes();
    this.callbacks.debugLogger.success("\uB358\uC804", `\u2705 \uB358\uC804 \uC2DC\uC2A4\uD15C \uCD08\uAE30\uD654 \uC644\uB8CC: ${this._dungeonTypes.length}\uAC1C \uB358\uC804 \uD0C0\uC785`);
  }
  // ==================== 던전 다이얼로그 관리 ====================
  openDungeonEntryDialog(dungeonType) {
    this._selectedDungeonType = dungeonType;
    this._showDungeonEntryDialog = true;
    this.callbacks.debugLogger.info("\uB358\uC804", `\u{1F6AA} \uB358\uC804 \uC785\uC7A5 \uB2E4\uC774\uC5BC\uB85C\uADF8 \uC5F4\uB9BC: ${dungeonType.koreanName}`);
  }
  closeDungeonEntryDialog() {
    this._showDungeonEntryDialog = false;
    this._selectedDungeonType = null;
  }
  openDungeonDialog() {
    this._showDungeonTestDialog = true;
    this.callbacks.debugLogger.info("\uB358\uC804", "\u{1F3F0} \uB358\uC804 \uBA54\uB274 \uC5F4\uB9BC");
  }
  closeDungeonDialog() {
    this._showDungeonTestDialog = false;
    this._selectedDungeonType = null;
    this._selectedDifficulty = null;
  }
  // ==================== 던전 선택 ====================
  selectDungeonType(dungeonType) {
    this._selectedDungeonType = dungeonType;
    this.callbacks.debugLogger.info("\uB358\uC804", `\uB358\uC804 \uC120\uD0DD: ${dungeonType.koreanName}`);
  }
  selectDifficulty(difficulty) {
    this._selectedDifficulty = difficulty;
    this.callbacks.debugLogger.info("\uB358\uC804", `\uB09C\uC774\uB3C4 \uC120\uD0DD: ${this.getDifficultyKorean(difficulty)}`);
  }
  // ==================== 던전 시작 및 입장 ====================
  startDungeon() {
    if (!this._selectedDungeonType || !this._selectedDifficulty) {
      this.callbacks.notification.show("\u26A0\uFE0F \uB358\uC804\uACFC \uB09C\uC774\uB3C4\uB97C \uC120\uD0DD\uD558\uC138\uC694!");
      return;
    }
    this.callbacks.debugLogger.info("\uB358\uC804", "\u{1F3F0} \uB358\uC804 \uC2DC\uC791");
    this.callbacks.debugLogger.info("\uB358\uC804", `\uC120\uD0DD: ${this._selectedDungeonType.koreanName} - ${this._selectedDifficulty}`);
    this.callbacks.debugLogger.info("\uB358\uC804", `\uD14C\uC2A4\uD2B8 \uC635\uC158: ${JSON.stringify(this._dungeonTestOptions)}`);
    if (this._dungeonTestOptions.godMode) {
      const player = this.callbacks.getPlayerCharacter();
      player.hp = player.maxHp;
      player.mp = player.maxMp;
      this.callbacks.debugLogger.success("\uB358\uC804", "\u{1F6E1}\uFE0F \uBB34\uC801 \uBAA8\uB4DC \uD65C\uC131\uD654");
    }
    this.enterDungeon(this._selectedDungeonType, this._selectedDifficulty);
    if (this._currentDungeon) {
    }
    if (this._currentDungeonRoom) {
    }
    if (this._currentDungeon) {
      if (this._dungeonTestOptions.showAllRooms) {
        this.revealAllRooms();
      }
      if (this._dungeonTestOptions.unlockAllRooms) {
        this.unlockAllRooms();
      }
    } else {
    }
    if (!this._currentDungeonRoom) {
    }
  }
  enterDungeon(dungeonType, difficulty) {
    const player = this.callbacks.getPlayerCharacter();
    const canEnter = this.callbacks.getDungeonService().canEnterDungeon(dungeonType, player);
    if (!canEnter.canEnter) {
      this.callbacks.notification.show(`\u26A0\uFE0F ${canEnter.reason}`);
      return;
    }
    this.callbacks.debugLogger.info("\uB358\uC804", `\u{1F6AA} \uB358\uC804 \uC785\uC7A5: ${dungeonType.koreanName} (${difficulty})`);
    const dungeon = this.generateDungeon(dungeonType, difficulty);
    this._currentDungeon = dungeon;
    this._dungeonProgress.inDungeon = true;
    this._dungeonProgress.currentDungeonId = dungeon.id;
    this.closeDungeonEntryDialog();
    this._showDungeonPanel = true;
    this.callbacks.addStoryBlock([
      "\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550",
      `      ${dungeonType.icon} ${dungeonType.koreanName}`,
      `      \uB09C\uC774\uB3C4: ${this.callbacks.getDungeonService().getDifficultyKorean(difficulty)}`,
      "\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550",
      "",
      dungeonType.storyDescription,
      "",
      "\uB2F9\uC2E0\uC740 \uB358\uC804\uC5D0 \uBC1C\uC744 \uB4E4\uC5EC\uB193\uC558\uC2B5\uB2C8\uB2E4..."
    ]);
    console.log("\u{1F6AA} enterFloor(1) \uD638\uCD9C...");
    this.enterFloor(1);
    this.callbacks.saveGame("autosave");
  }
  // ==================== 던전 생성 ====================
  generateDungeon(dungeonType, difficulty) {
    const player = this.callbacks.getPlayerCharacter();
    const dungeon = this.callbacks.getDungeonGenerator().generateDungeon(dungeonType, difficulty, player.level);
    dungeon.playerSnapshot = {
      hp: player.hp,
      mp: player.mp,
      level: player.level
    };
    this.callbacks.debugLogger.success("\uB358\uC804", `\u2705 \uB358\uC804 \uC0DD\uC131 \uC644\uB8CC: ${dungeon.totalFloors}\uCE35, ${dungeon.floors.reduce((sum, f) => sum + f.rooms.length, 0)}\uAC1C \uBC29`);
    return dungeon;
  }
  // ==================== 층 및 방 관리 ====================
  enterFloor(floorNumber) {
    if (!this._currentDungeon) {
      return;
    }
    const floor = this._currentDungeon.floors[floorNumber - 1];
    if (!floor) {
      return;
    }
    this._currentDungeon.currentFloor = floorNumber;
    const entranceRoom = floor.rooms.find((r) => r.id === floor.entranceRoomId);
    if (!entranceRoom) {
      console.warn("\u{1F50D} floor.rooms:", floor.rooms.map((r) => ({ id: r.id, type: r.type })));
      return;
    }
    this.enterRoom(entranceRoom);
    this.callbacks.addStoryBlock([
      "",
      `\u2500\u2500\u2500 ${floorNumber}\uCE35 \u2500\u2500\u2500`,
      entranceRoom?.description || "\uC0C8\uB85C\uC6B4 \uCE35\uC5D0 \uB3C4\uCC29\uD588\uC2B5\uB2C8\uB2E4.",
      ""
    ]);
    this.callbacks.debugLogger.info("\uB358\uC804", `\u{1F6AA} ${floorNumber}\uCE35 \uC9C4\uC785`);
  }
  enterRoom(room) {
    if (!this._currentDungeon) {
      return;
    }
    if (this._currentDungeonRoom) {
      this._currentDungeonRoom.isCurrentRoom = false;
    }
    this._currentDungeonRoom = __spreadValues({}, room);
    room.isCurrentRoom = true;
    room.isExplored = true;
    this._currentDungeon.stats.roomsExplored++;
    this.callbacks.addStoryBlock([
      "",
      `\u{1F4CD} ${this.getRoomTypeKorean(room.type)}`,
      room.description,
      ""
    ]);
    if (room.monsters.length > 0 && !room.isCleared) {
      this.startDungeonCombat(room);
    } else {
      console.log("\u2705 \uC804\uD22C \uC5C6\uC74C (\uBAAC\uC2A4\uD130:", room.monsters.length, ", \uD074\uB9AC\uC5B4:", room.isCleared, ")");
    }
    this.callbacks.debugLogger.info("\uB358\uC804", `\u{1F6AA} \uBC29 \uC9C4\uC785: ${room.type}`);
  }
  moveToNextRoom() {
    if (!this._currentDungeon || !this._currentDungeonRoom)
      return;
    const connectedRoomIds = this._currentDungeonRoom.connectedRoomIds;
    if (connectedRoomIds.length === 0)
      return;
    const currentFloor = this._currentDungeon.floors[this._currentDungeon.currentFloor - 1];
    const nextRoom = currentFloor.rooms.find((r) => connectedRoomIds.includes(r.id) && !r.isExplored) || currentFloor.rooms.find((r) => connectedRoomIds.includes(r.id));
    if (nextRoom) {
      this.enterRoom(nextRoom);
    }
  }
  // ==================== 전투 시스템 ====================
  startDungeonCombat(room) {
    if (this._dungeonTestOptions.skipCombat) {
      this.callbacks.debugLogger.info("\uB358\uC804", "\u23ED\uFE0F \uC804\uD22C \uC2A4\uD0B5 \uD65C\uC131\uD654 - \uC790\uB3D9 \uC2B9\uB9AC");
      const player = this.callbacks.getPlayerCharacter();
      room.monsters.forEach((monster2) => {
        monster2.hp = 0;
        monster2.isDead = true;
        const goldReward = Math.floor(Math.random() * (monster2.dropTable.goldMax - monster2.dropTable.goldMin + 1)) + monster2.dropTable.goldMin;
        const expReward = Math.floor(monster2.maxHp * 0.8);
        player.gold += goldReward;
        this.callbacks.gainExp(expReward);
        if (this._currentDungeon) {
          this._currentDungeon.accumulatedRewards.gold += goldReward;
          this._currentDungeon.accumulatedRewards.experience += expReward;
          this._currentDungeon.stats.monstersKilled++;
          if (monster2.type === "elite") {
            this._currentDungeon.stats.elitesKilled++;
          } else if (monster2.type === "boss") {
            this._currentDungeon.stats.bossKilled = true;
            this._currentDungeon.stats.elitesKilled++;
          }
        }
      });
      room.isCleared = true;
      this.callbacks.addStoryBlock([
        "\u23ED\uFE0F \uC804\uD22C \uC790\uB3D9 \uC2B9\uB9AC!",
        `\u{1F480} ${room.monsters.length}\uB9C8\uB9AC \uCC98\uCE58`,
        "\uBC29\uC774 \uD074\uB9AC\uC5B4\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",
        ""
      ]);
      this.callbacks.debugLogger.info("\uB358\uC804", `\u{1F4BE} \uC804\uD22C \uC2A4\uD0B5 \uD6C4 \uC790\uB3D9 \uC800\uC7A5 (\uACBD\uD5D8\uCE58: ${player.exp}/${player.maxExp}, \uB808\uBCA8: ${player.level})`);
      this.callbacks.saveGame(`auto_dungeon_skip_combat`).then(() => {
      });
      return;
    }
    const monster = room.monsters[0];
    this.callbacks.addStoryBlock([
      `\u2694\uFE0F ${monster.name}\uC774(\uAC00) \uB098\uD0C0\uB0AC\uB2E4!`,
      `\uB808\uBCA8: ${monster.level} | HP: ${monster.hp}`,
      monster.eliteAffixes ? `\uD2B9\uC131: ${monster.eliteAffixes.join(", ")}` : "",
      ""
    ]);
  }
  winDungeonCombat(room, monster) {
    return __async(this, null, function* () {
      if (!this._currentDungeon)
        return;
      monster.isDead = true;
      const player = this.callbacks.getPlayerCharacter();
      const goldReward = Math.floor(Math.random() * (monster.dropTable.goldMax - monster.dropTable.goldMin + 1)) + monster.dropTable.goldMin;
      const expReward = Math.floor(monster.maxHp * 0.8);
      player.gold += goldReward;
      this.callbacks.gainExp(expReward);
      this._currentDungeon.accumulatedRewards.gold += goldReward;
      this._currentDungeon.accumulatedRewards.experience += expReward;
      this._currentDungeon.stats.monstersKilled++;
      if (monster.type === "elite") {
        this._currentDungeon.stats.elitesKilled++;
      } else if (monster.type === "boss") {
        this._currentDungeon.stats.bossKilled = true;
        this._currentDungeon.stats.elitesKilled++;
      }
      this.callbacks.addStoryBlock([
        `\u2705 ${monster.name}\uC744(\uB97C) \uBB3C\uB9AC\uCCE4\uB2E4!`,
        `\u{1F4B0} \uACE8\uB4DC +${goldReward}`,
        `\u{1F4AB} \uACBD\uD5D8\uCE58 +${expReward}`,
        ""
      ]);
      this.callbacks.debugLogger.info("\uB358\uC804", `\u{1F4BE} \uBAAC\uC2A4\uD130 \uCC98\uCE58 \uD6C4 \uC790\uB3D9 \uC800\uC7A5 (\uACBD\uD5D8\uCE58: ${player.exp}/${player.maxExp})`);
      yield this.callbacks.saveGame(`auto_dungeon_${this._currentDungeon.dungeonTypeId}`);
      if (room.monsters.every((m) => m.isDead)) {
        room.isCleared = true;
        this.callbacks.addStoryBlock([
          "\u2705 \uBC29\uC744 \uD074\uB9AC\uC5B4\uD588\uC2B5\uB2C8\uB2E4!",
          "\uB2E4\uC74C \uBC29\uC73C\uB85C \uC774\uB3D9\uD558\uC138\uC694.",
          ""
        ]);
        this.callbacks.debugLogger.info("\uB358\uC804", `\u{1F4BE} \uBC29 \uD074\uB9AC\uC5B4 \uD6C4 \uC790\uB3D9 \uC800\uC7A5`);
        yield this.callbacks.saveGame(`auto_dungeon_room_clear`);
        if (monster.type === "boss") {
          this.completeDungeon();
        }
      } else {
        console.log("\u2694\uFE0F \uB0A8\uC740 \uBAAC\uC2A4\uD130:", room.monsters.filter((m) => !m.isDead).length, "\uB9C8\uB9AC");
      }
      this.callbacks.debugLogger.success("\uB358\uC804", `\u2705 \uC804\uD22C \uC2B9\uB9AC: ${monster.name}`);
    });
  }
  // ==================== 던전 완료 및 탈출 ====================
  completeDungeon() {
    return __async(this, null, function* () {
      if (!this._currentDungeon)
        return;
      this._currentDungeon.status = "completed";
      this._dungeonProgress.inDungeon = false;
      const dungeonType = this._dungeonTypes.find((dt) => dt.id === this._currentDungeon.dungeonTypeId);
      if (!this._dungeonProgress.clearedDungeons[dungeonType.id]) {
        this._dungeonProgress.clearedDungeons[dungeonType.id] = {
          count: 0,
          bestTime: Infinity,
          highestDifficulty: "easy",
          lastClearDate: /* @__PURE__ */ new Date()
        };
      }
      const record = this._dungeonProgress.clearedDungeons[dungeonType.id];
      record.count++;
      record.bestTime = Math.min(record.bestTime, this._currentDungeon.elapsedTime);
      record.lastClearDate = /* @__PURE__ */ new Date();
      this._dungeonProgress.totalStats.dungeonsCleared++;
      this._dungeonProgress.totalStats.monstersKilled += this._currentDungeon.stats.monstersKilled;
      this._dungeonProgress.totalStats.elitesKilled += this._currentDungeon.stats.elitesKilled;
      this._dungeonProgress.totalStats.bossesKilled += this._currentDungeon.stats.bossKilled ? 1 : 0;
      this._dungeonProgress.totalStats.totalGoldEarned += this._currentDungeon.accumulatedRewards.gold;
      this._dungeonProgress.totalStats.totalExpEarned += this._currentDungeon.accumulatedRewards.experience;
      this.callbacks.addStoryBlock([
        "",
        "\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557",
        "\u2551      \u{1F3C6} \uB358\uC804 \uD074\uB9AC\uC5B4! \u{1F3C6}          \u2551",
        `\u2551   ${dungeonType.koreanName} \uC815\uBCF5 \uC644\uB8CC   \u2551`,
        "\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D",
        "",
        "\u{1F4CA} \uD1B5\uACC4:",
        `  \u2022 \uCC98\uCE58\uD55C \uBAAC\uC2A4\uD130: ${this._currentDungeon.stats.monstersKilled}\uB9C8\uB9AC`,
        `  \u2022 \uCC98\uCE58\uD55C \uC5D8\uB9AC\uD2B8: ${this._currentDungeon.stats.elitesKilled}\uB9C8\uB9AC`,
        `  \u2022 \uD0D0\uD5D8\uD55C \uBC29: ${this._currentDungeon.stats.roomsExplored}\uAC1C`,
        "",
        "\u{1F4B0} \uD68D\uB4DD \uBCF4\uC0C1:",
        `  \u2022 \uACE8\uB4DC: ${this._currentDungeon.accumulatedRewards.gold}G`,
        `  \u2022 \uACBD\uD5D8\uCE58: ${this._currentDungeon.accumulatedRewards.experience} EXP`,
        "",
        "\uB2F9\uC2E0\uC740 \uB358\uC804\uC744 \uBB34\uC0AC\uD788 \uBE60\uC838\uB098\uC654\uC2B5\uB2C8\uB2E4."
      ]);
      this._showDungeonPanel = false;
      this._currentDungeon = null;
      this._currentDungeonRoom = null;
      this.callbacks.debugLogger.success("\uB358\uC804", `\u{1F3C6} \uB358\uC804 \uD074\uB9AC\uC5B4: ${dungeonType.koreanName} - \uC790\uB3D9 \uC800\uC7A5 \uC911...`);
      const player = this.callbacks.getPlayerCharacter();
      this.callbacks.debugLogger.info("\uB358\uC804", `\u{1F4BE} \uCD5C\uC885 \uB808\uBCA8: ${player.level}, \uACBD\uD5D8\uCE58: ${player.exp}/${player.maxExp}`);
      yield this.callbacks.saveGame(`dungeon_clear_${dungeonType.id}`);
    });
  }
  escapeDungeon() {
    if (!this._currentDungeon)
      return;
    this._currentDungeon.status = "failed";
    this._dungeonProgress.inDungeon = false;
    this.callbacks.addStoryBlock([
      "",
      "\u{1F6AA} \uB2F9\uC2E0\uC740 \uB358\uC804\uC5D0\uC11C \uD0C8\uCD9C\uD588\uC2B5\uB2C8\uB2E4.",
      "\u{1F4B0} \uD68D\uB4DD\uD55C \uBCF4\uC0C1\uC740 \uC720\uC9C0\uB429\uB2C8\uB2E4.",
      ""
    ]);
    this._showDungeonPanel = false;
    this._currentDungeon = null;
    this._currentDungeonRoom = null;
    this.closeDungeonDialog();
    this.callbacks.saveGame("autosave");
    this.callbacks.debugLogger.warn("\uB358\uC804", "\u26A0\uFE0F \uB358\uC804 \uD0C8\uCD9C");
  }
  // ==================== 던전 이벤트 핸들러 ====================
  onDungeonRoomMove(roomId) {
    if (!this._currentDungeon)
      return;
    const currentFloor = this._currentDungeon.floors[this._currentDungeon.currentFloor - 1];
    if (!currentFloor)
      return;
    const targetRoom = currentFloor.rooms.find((r) => r.id === roomId);
    if (!targetRoom)
      return;
    this.enterRoom(targetRoom);
  }
  onDungeonMonsterAttack(monster) {
    if (!this._currentDungeon || !this._currentDungeonRoom)
      return;
    this.callbacks.debugLogger.info("\uB358\uC804", `\u2694\uFE0F ${monster.name} \uACF5\uACA9!`);
    const player = this.callbacks.getPlayerCharacter();
    if (this._dungeonTestOptions.oneHitKill) {
      monster.hp = 0;
      monster.isDead = true;
      this.callbacks.debugLogger.success("\uB358\uC804", `\u{1F480} ${monster.name} \uC989\uC0AC!`);
    } else {
      const baseAttack = player.attack;
      const strengthBonus = player.strength * 0.5;
      const randomFactor = 0.9 + Math.random() * 0.4;
      const isCritical = Math.random() < 0.3;
      const criticalMultiplier = isCritical ? 3 : 1;
      let damage = Math.floor((baseAttack + strengthBonus) * randomFactor * criticalMultiplier * 1.8);
      monster.hp = Math.max(0, monster.hp - damage);
      if (monster.hp === 0) {
        monster.isDead = true;
      }
      if (isCritical) {
        this.callbacks.debugLogger.success("\uB358\uC804", `\u{1F4A5} \uD06C\uB9AC\uD2F0\uCEEC! \uD53C\uD574: ${damage}, \uB0A8\uC740 HP: ${monster.hp}`);
        this.callbacks.addStoryBlock([`\u{1F4A5} \uD06C\uB9AC\uD2F0\uCEEC \uD788\uD2B8! ${damage}\uC758 \uAC15\uB825\uD55C \uD53C\uD574!`]);
      } else {
        this.callbacks.debugLogger.info("\uB358\uC804", `\uD53C\uD574: ${damage}, \uB0A8\uC740 HP: ${monster.hp}`);
      }
    }
    if (monster.isDead) {
      this.winDungeonCombat(this._currentDungeonRoom, monster);
    }
    if (this._dungeonTestOptions.godMode) {
      player.hp = player.maxHp;
    }
  }
  onDungeonInteractableUse(interactable) {
    if (!this._currentDungeon)
      return;
    this.callbacks.debugLogger.info("\uB358\uC804", `\u2728 ${interactable.name} \uC0AC\uC6A9`);
    const player = this.callbacks.getPlayerCharacter();
    if (interactable.type === "chest") {
      const goldReward = Math.floor(100 + Math.random() * 200);
      player.gold += goldReward;
      this.callbacks.addStoryBlock([
        `\u{1F48E} ${interactable.name}\uC744(\uB97C) \uC5F4\uC5C8\uC2B5\uB2C8\uB2E4!`,
        `\u{1F4B0} \uACE8\uB4DC +${goldReward}`,
        ""
      ]);
      this._currentDungeon.stats.treasuresFound++;
      interactable.isUsed = true;
    } else if (interactable.type === "shrine") {
      if (interactable.shrineEffect) {
        const effect = interactable.shrineEffect;
        this.callbacks.addStoryBlock([
          `\u2728 ${interactable.name}\uC758 \uCD95\uBCF5\uC744 \uBC1B\uC558\uC2B5\uB2C8\uB2E4!`,
          `\uD6A8\uACFC: ${effect.type} +${effect.value}% (${effect.duration}\uD134)`,
          ""
        ]);
        interactable.isUsed = true;
      }
    }
    this.callbacks.debugLogger.success("\uB358\uC804", `\u2705 ${interactable.name} \uC0AC\uC6A9 \uC644\uB8CC`);
  }
  onDungeonEscape() {
    this.escapeDungeon();
  }
  onDungeonFloorMove(floorNumber) {
    this.enterFloor(floorNumber);
  }
  onDungeonRewardsClaimed(rewards, inventory) {
    const player = this.callbacks.getPlayerCharacter();
    if (rewards.exp > 0) {
      player.exp += rewards.exp;
      const requiredExp = player.level * 100;
      if (player.exp >= requiredExp) {
      }
      this.callbacks.notification.show(`\u2B50 ${rewards.exp} \uACBD\uD5D8\uCE58 \uD68D\uB4DD!`);
    }
    if (rewards.gold > 0) {
      player.gold += rewards.gold;
      this.callbacks.notification.show(`\u{1F4B0} ${rewards.gold} \uACE8\uB4DC \uD68D\uB4DD!`);
    }
    if (rewards.items && rewards.items.length > 0) {
      rewards.items.forEach((rewardItem) => {
        const newItem = this.createDungeonRewardItem(rewardItem);
        inventory.push(newItem);
        this.callbacks.notification.show(`\u{1F381} ${newItem.name} \uD68D\uB4DD!`);
        this.callbacks.debugLogger.success("\uC544\uC774\uD15C", `\uD68D\uB4DD: ${newItem.name} (${newItem.rarity})`);
      });
    }
    this.callbacks.saveGame("autosave");
    this.callbacks.debugLogger.success("\uB358\uC804", `\u{1F381} \uBCF4\uC0C1 \uD68D\uB4DD: EXP ${rewards.exp}, \uACE8\uB4DC ${rewards.gold}, \uC544\uC774\uD15C ${rewards.items.length}\uAC1C`);
  }
  createDungeonRewardItem(rewardItem) {
    const itemTypes = ["weapon", "armor", "accessory", "consumable"];
    const randomType = itemTypes[Math.floor(Math.random() * itemTypes.length)];
    const rarityMultipliers = {
      common: 1,
      uncommon: 1.3,
      rare: 1.7,
      epic: 2.2,
      legendary: 3
    };
    const multiplier = rarityMultipliers[rewardItem.rarity] || 1;
    const itemLevel = rewardItem.level || 1;
    const newItem = {
      id: `dungeon_${Date.now()}_${Math.random()}`,
      name: rewardItem.name,
      type: randomType,
      rarity: rewardItem.rarity,
      level: itemLevel,
      requiredLevel: Math.max(1, itemLevel - 2),
      description: `\uB358\uC804\uC5D0\uC11C \uD68D\uB4DD\uD55C ${rewardItem.rarity} \uB4F1\uAE09 \uC544\uC774\uD15C`,
      stats: {},
      price: Math.floor(itemLevel * 50 * multiplier),
      sellPrice: Math.floor(itemLevel * 25 * multiplier),
      obtainedFrom: "dungeon",
      obtainedAt: (/* @__PURE__ */ new Date()).toISOString()
    };
    if (randomType === "weapon") {
      newItem.stats = {
        attack: Math.floor((5 + itemLevel * 3) * multiplier),
        criticalChance: Math.floor(Math.random() * 10 * multiplier)
      };
      newItem.slot = "weapon";
    } else if (randomType === "armor") {
      const armorSlots = ["helmet", "chest", "legs", "boots", "gloves"];
      newItem.slot = armorSlots[Math.floor(Math.random() * armorSlots.length)];
      newItem.stats = {
        defense: Math.floor((3 + itemLevel * 2) * multiplier),
        hp: Math.floor((10 + itemLevel * 5) * multiplier)
      };
    } else if (randomType === "accessory") {
      const accessorySlots = ["ring", "necklace", "belt"];
      newItem.slot = accessorySlots[Math.floor(Math.random() * accessorySlots.length)];
      newItem.stats = {
        attack: Math.floor((2 + itemLevel) * multiplier),
        defense: Math.floor((2 + itemLevel) * multiplier),
        hp: Math.floor((5 + itemLevel * 2) * multiplier)
      };
    } else if (randomType === "consumable") {
      newItem.consumable = true;
      newItem.stackable = true;
      newItem.maxStack = 99;
      newItem.quantity = 1;
      newItem.effect = {
        type: Math.random() > 0.5 ? "heal" : "buff",
        value: Math.floor(50 * multiplier)
      };
    }
    const rarityPrefixes = {
      common: "\uD3C9\uBC94\uD55C",
      uncommon: "\uACE0\uAE09",
      rare: "\uD76C\uADC0\uD55C",
      epic: "\uC601\uC6C5\uC758",
      legendary: "\uC804\uC124\uC758"
    };
    newItem.name = `${rarityPrefixes[rewardItem.rarity] || ""} ${newItem.name}`;
    return newItem;
  }
  // ==================== 테스트 옵션 ====================
  toggleDungeonTestOption(option) {
    this._dungeonTestOptions[option] = !this._dungeonTestOptions[option];
    this.callbacks.debugLogger.info("\uB358\uC804", `\uD14C\uC2A4\uD2B8 \uC635\uC158 \uBCC0\uACBD: ${option} = ${this._dungeonTestOptions[option]}`);
  }
  revealAllRooms() {
    if (!this._currentDungeon)
      return;
    this._currentDungeon.floors.forEach((floor) => {
      floor.rooms.forEach((room) => {
        room.isExplored = true;
      });
    });
    this.callbacks.debugLogger.success("\uB358\uC804", "\u{1F5FA}\uFE0F \uBAA8\uB4E0 \uBC29 \uACF5\uAC1C \uC644\uB8CC");
  }
  unlockAllRooms() {
    if (!this._currentDungeon)
      return;
    this._currentDungeon.floors.forEach((floor) => {
      floor.rooms.forEach((room) => {
        room.interactables.forEach((interactable) => {
          if (interactable.isLocked) {
            interactable.isLocked = false;
          }
        });
      });
    });
    this.callbacks.debugLogger.success("\uB358\uC804", "\u{1F513} \uBAA8\uB4E0 \uBC29 \uC7A0\uAE08 \uD574\uC81C \uC644\uB8CC");
  }
  // ==================== 유틸리티 메서드 ====================
  getDifficultyKorean(difficulty) {
    const map2 = {
      easy: "\uC26C\uC6C0",
      normal: "\uBCF4\uD1B5",
      hard: "\uC5B4\uB824\uC6C0",
      hell: "\uC9C0\uC625"
    };
    return map2[difficulty];
  }
  getRoomTypeKorean(type) {
    const map2 = {
      entrance: "\uC785\uAD6C",
      normal: "\uC77C\uBC18 \uBC29",
      elite: "\uC5D8\uB9AC\uD2B8 \uBC29",
      boss: "\uBCF4\uC2A4 \uBC29",
      treasure: "\uBCF4\uBB3C \uBC29",
      shrine: "\uC131\uC18C",
      shop: "\uC0C1\uC810",
      safe: "\uC548\uC804 \uC9C0\uB300",
      event: "\uC774\uBCA4\uD2B8 \uBC29",
      exit: "\uCD9C\uAD6C"
    };
    return map2[type] || "\uC54C \uC218 \uC5C6\uB294 \uBC29";
  }
  getPlayerEquipment() {
    const player = this.callbacks.getPlayerCharacter();
    return {
      weapon: player.equippedItems?.weapon || null,
      armor: {
        helmet: player.equippedItems?.helmet || null,
        chest: player.equippedItems?.chest || null,
        legs: player.equippedItems?.legs || null,
        boots: player.equippedItems?.boots || null,
        gloves: player.equippedItems?.gloves || null
      },
      accessories: {
        ring: player.equippedItems?.ring || null,
        necklace: player.equippedItems?.necklace || null,
        belt: player.equippedItems?.belt || null
      }
    };
  }
  static \u0275fac = function DungeonManager_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _DungeonManager)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _DungeonManager, factory: _DungeonManager.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(DungeonManager, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [], null);
})();

// src/app/modules/novel/services/item-db.service.ts
var ItemDbService = class _ItemDbService {
  dbName = "NovelItemDB";
  storeName = "items";
  db = null;
  constructor() {
    this.initDB();
  }
  initDB() {
    return __async(this, null, function* () {
      return new Promise((resolve, reject) => {
        const request = indexedDB.open(this.dbName, 1);
        request.onerror = () => {
          reject(request.error);
        };
        request.onsuccess = () => {
          this.db = request.result;
          resolve();
        };
        request.onupgradeneeded = (event) => {
          const db = event.target.result;
          if (!db.objectStoreNames.contains(this.storeName)) {
            const objectStore = db.createObjectStore(this.storeName, {
              keyPath: "id",
              autoIncrement: true
            });
            objectStore.createIndex("name", "name", { unique: false });
            objectStore.createIndex("type", "type", { unique: false });
            objectStore.createIndex("grade", "grade", { unique: false });
            objectStore.createIndex("createdAt", "createdAt", { unique: false });
          }
        };
      });
    });
  }
  saveItem(item) {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readwrite");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.add(item);
        request.onsuccess = () => {
          resolve(request.result);
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  getAllItems() {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readonly");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.getAll();
        request.onsuccess = () => {
          const items = request.result;
          items.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());
          resolve(items);
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  getItem(id) {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readonly");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.get(id);
        request.onsuccess = () => {
          resolve(request.result);
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  deleteItem(id) {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readwrite");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.delete(id);
        request.onsuccess = () => {
          resolve();
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  getItemsByType(type) {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readonly");
        const objectStore = transaction.objectStore(this.storeName);
        const index = objectStore.index("type");
        const request = index.getAll(type);
        request.onsuccess = () => {
          resolve(request.result);
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  getItemsByGrade(grade) {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readonly");
        const objectStore = transaction.objectStore(this.storeName);
        const index = objectStore.index("grade");
        const request = index.getAll(grade);
        request.onsuccess = () => {
          resolve(request.result);
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  clearAllItems() {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readwrite");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.clear();
        request.onsuccess = () => {
          resolve();
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  static \u0275fac = function ItemDbService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ItemDbService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _ItemDbService, factory: _ItemDbService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ItemDbService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [], null);
})();

// src/app/modules/novel/components/novel-generator/helpers/item-generation.helper.ts
var ItemGenerationHelper = class _ItemGenerationHelper {
  geminiAiService;
  itemDbService;
  notification;
  dialog;
  constructor(geminiAiService, itemDbService, notification, dialog) {
    this.geminiAiService = geminiAiService;
    this.itemDbService = itemDbService;
    this.notification = notification;
    this.dialog = dialog;
  }
  /**
   * AI 아이템 생성 (10개)
   */
  generateAiItems(itemType, grade, onStart, onProgress, onComplete) {
    onStart();
    const generatedItems = [];
    const itemTypes = itemType ? [itemType] : ["\uBB34\uAE30", "\uBC29\uC5B4\uAD6C", "\uC18C\uBE44\uD488", "\uC7A5\uC2E0\uAD6C"];
    const grades = grade ? [grade] : ["\uC77C\uBC18", "\uACE0\uAE09", "\uD76C\uADC0", "\uC601\uC6C5", "\uC804\uC124"];
    let completedCount = 0;
    const totalItems = 10;
    let errorMessage = "";
    for (let i = 0; i < totalItems; i++) {
      const randomType = itemTypes[Math.floor(Math.random() * itemTypes.length)];
      const randomGrade = grades[Math.floor(Math.random() * grades.length)];
      this.geminiAiService.generateItem(randomType, randomGrade).subscribe({
        next: (item) => {
          generatedItems.push(item);
          onProgress(item);
          completedCount++;
          if (completedCount === totalItems) {
            onComplete(generatedItems);
          }
        },
        error: (error) => {
          completedCount++;
          errorMessage = error.message || "AI \uC544\uC774\uD15C \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.";
          if (completedCount === totalItems) {
            if (generatedItems.length === 0) {
              onComplete(generatedItems, errorMessage);
            } else {
              onComplete(generatedItems);
            }
          }
        }
      });
    }
  }
  /**
   * 단일 아이템 저장
   */
  saveGeneratedItem(item, onSuccess, onError) {
    return __async(this, null, function* () {
      if (!item)
        return;
      const basePrice = this.calculateItemPriceByGrade(item.grade || "\uC77C\uBC18");
      const generatedItem = {
        name: item.name || "\uC774\uB984 \uC5C6\uC74C",
        description: item.description || "",
        type: item.type || "\uAE30\uD0C0",
        grade: item.grade || "\uC77C\uBC18",
        effects: item.effects || [],
        stats: item.stats || {},
        requirements: item.requirements || "",
        lore: item.lore || "",
        tags: item.tags || [],
        price: basePrice,
        createdAt: /* @__PURE__ */ new Date()
      };
      try {
        yield this.itemDbService.saveItem(generatedItem);
        this.notification.show("\uC544\uC774\uD15C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
        onSuccess();
      } catch (error) {
        this.notification.show("\uC544\uC774\uD15C \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
        onError();
      }
    });
  }
  /**
   * 인덱스로 생성된 아이템 저장
   */
  saveGeneratedItemByIndex(items, index, onSuccess, onError) {
    return __async(this, null, function* () {
      const item = items[index];
      if (!item)
        return;
      const basePrice = this.calculateItemPriceByGrade(item.grade || "\uC77C\uBC18");
      const generatedItem = {
        name: item.name || "\uC774\uB984 \uC5C6\uC74C",
        description: item.description || "",
        type: item.type || "\uAE30\uD0C0",
        grade: item.grade || "\uC77C\uBC18",
        effects: item.effects || [],
        stats: item.stats || {},
        requirements: item.requirements || "",
        lore: item.lore || "",
        tags: item.tags || [],
        price: basePrice,
        createdAt: /* @__PURE__ */ new Date()
      };
      try {
        yield this.itemDbService.saveItem(generatedItem);
        this.notification.show(`${item.name}\uC774(\uAC00) \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
        onSuccess();
      } catch (error) {
        this.notification.show("\uC544\uC774\uD15C \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
        onError();
      }
    });
  }
  /**
   * 모든 생성된 아이템 저장
   */
  saveAllGeneratedItems(items, onComplete) {
    return __async(this, null, function* () {
      if (items.length === 0)
        return;
      let successCount = 0;
      for (const item of items) {
        const basePrice = this.calculateItemPriceByGrade(item.grade || "\uC77C\uBC18");
        const generatedItem = {
          name: item.name || "\uC774\uB984 \uC5C6\uC74C",
          description: item.description || "",
          type: item.type || "\uAE30\uD0C0",
          grade: item.grade || "\uC77C\uBC18",
          effects: item.effects || [],
          stats: item.stats || {},
          requirements: item.requirements || "",
          lore: item.lore || "",
          tags: item.tags || [],
          price: basePrice,
          createdAt: /* @__PURE__ */ new Date()
        };
        try {
          yield this.itemDbService.saveItem(generatedItem);
          successCount++;
        } catch (error) {
        }
      }
      this.notification.show(`${successCount}\uAC1C\uC758 \uC544\uC774\uD15C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
      onComplete(successCount);
    });
  }
  /**
   * 인벤토리 디버그 정보 표시
   */
  debugInventory(inventory, onResetInventory) {
    let debugInfo = "\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n";
    debugInfo += "\u{1F50D} \uC778\uBCA4\uD1A0\uB9AC \uB514\uBC84\uADF8 \uC815\uBCF4\n";
    debugInfo += "\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n";
    debugInfo += `\u{1F4E6} \uCD1D \uC544\uC774\uD15C \uC218: ${inventory.length}\uAC1C

`;
    const hasStatsItems = [];
    const noStatsItems = [];
    inventory.forEach((item, index) => {
      const itemInfo = {
        index: index + 1,
        name: item.name,
        type: item.type,
        rarity: item.rarity,
        hasStats: !!item.stats,
        stats: item.stats
      };
      if (item.stats) {
        hasStatsItems.push(itemInfo);
      } else {
        noStatsItems.push(itemInfo);
      }
    });
    if (hasStatsItems.length > 0) {
      debugInfo += `\u2705 Stats \uC788\uB294 \uC544\uC774\uD15C (${hasStatsItems.length}\uAC1C):
`;
      debugInfo += "\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n";
      hasStatsItems.forEach((item) => {
        debugInfo += `
[${item.index}] ${item.name}
`;
        debugInfo += `   \uD0C0\uC785: ${item.type} | \uD76C\uADC0\uB3C4: ${item.rarity}
`;
        debugInfo += `   Stats: \u2705 \uC788\uC74C
`;
        const stats = item.stats;
        const statLines = [];
        if (stats.minDamage)
          statLines.push(`\uB370\uBBF8\uC9C0 ${stats.minDamage}-${stats.maxDamage}`);
        if (stats.attack)
          statLines.push(`\uACF5\uACA9\uB825 +${stats.attack}`);
        if (stats.defense)
          statLines.push(`\uBC29\uC5B4\uB825 +${stats.defense}`);
        if (stats.armor)
          statLines.push(`\uBC29\uC5B4\uB3C4 +${stats.armor}`);
        if (stats.hp)
          statLines.push(`\uC0DD\uBA85\uB825 +${stats.hp}`);
        if (stats.mp)
          statLines.push(`\uB9C8\uB098 +${stats.mp}`);
        if (stats.critChance)
          statLines.push(`\uD06C\uB9AC\uD2F0\uCEEC +${stats.critChance}%`);
        if (stats.lifeSteal)
          statLines.push(`\uC0DD\uBA85\uD761\uC218 ${stats.lifeSteal}%`);
        if (stats.fireResist)
          statLines.push(`\uD654\uC5FC\uC800\uD56D +${stats.fireResist}%`);
        if (stats.coldResist)
          statLines.push(`\uB0C9\uAE30\uC800\uD56D +${stats.coldResist}%`);
        if (stats.lightningResist)
          statLines.push(`\uBC88\uAC1C\uC800\uD56D +${stats.lightningResist}%`);
        if (stats.allResist)
          statLines.push(`\uBAA8\uB4E0\uC800\uD56D +${stats.allResist}%`);
        if (statLines.length > 0) {
          debugInfo += `   \uC8FC\uC694 \uC18D\uC131: ${statLines.slice(0, 5).join(", ")}
`;
          if (statLines.length > 5) {
            debugInfo += `   + ${statLines.length - 5}\uAC1C \uB354...
`;
          }
        }
      });
    }
    if (noStatsItems.length > 0) {
      debugInfo += `

\u274C Stats \uC5C6\uB294 \uC544\uC774\uD15C (${noStatsItems.length}\uAC1C):
`;
      debugInfo += "\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n";
      noStatsItems.forEach((item) => {
        debugInfo += `[${item.index}] ${item.name} (${item.type}) - \u26A0\uFE0F Stats \uC5C6\uC74C!
`;
      });
    }
    debugInfo += `
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`;
    debugInfo += `\u{1F4CA} \uC694\uC57D:
`;
    debugInfo += `   \uCD1D \uC544\uC774\uD15C: ${inventory.length}\uAC1C
`;
    debugInfo += `   Stats \uC788\uC74C: ${hasStatsItems.length}\uAC1C \u2705
`;
    debugInfo += `   Stats \uC5C6\uC74C: ${noStatsItems.length}\uAC1C \u274C
`;
    if (noStatsItems.length > 0) {
      debugInfo += `
\u26A0\uFE0F \uACBD\uACE0: ${noStatsItems.length}\uAC1C \uC544\uC774\uD15C\uC5D0 \uB514\uC544\uBE14\uB85C \uC18D\uC131\uC774 \uC5C6\uC2B5\uB2C8\uB2E4!
`;
      debugInfo += `
\uD574\uACB0 \uBC29\uBC95:
`;
      debugInfo += `1. "\u{1F504} \uC778\uBCA4\uD1A0\uB9AC \uCD08\uAE30\uD654" \uBC84\uD2BC \uD074\uB9AD
`;
      debugInfo += `2. "\u{1F5D1}\uFE0F \uAC8C\uC784 \uB370\uC774\uD130 \uCD08\uAE30\uD654" \uBC84\uD2BC \uD074\uB9AD
`;
    } else {
      debugInfo += `
\u2705 \uBAA8\uB4E0 \uC544\uC774\uD15C\uC5D0 \uB514\uC544\uBE14\uB85C \uC18D\uC131\uC774 \uC788\uC2B5\uB2C8\uB2E4!
`;
    }
    debugInfo += "\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501";
    const dialogRef = this.dialog.open(ConfirmDialogComponent, {
      width: "800px",
      maxHeight: "80vh",
      data: {
        title: "\u{1F50D} \uC778\uBCA4\uD1A0\uB9AC \uB514\uBC84\uADF8 \uC815\uBCF4",
        message: debugInfo,
        confirmText: noStatsItems.length > 0 ? "\uC778\uBCA4\uD1A0\uB9AC \uCD08\uAE30\uD654" : "\uD655\uC778",
        cancelText: "\uB2EB\uAE30"
      }
    });
    dialogRef.afterClosed().subscribe((result) => {
      if (result && noStatsItems.length > 0) {
        onResetInventory();
      }
    });
  }
  /**
   * 아이템 등급에 따른 가격 계산
   */
  calculateItemPriceByGrade(grade) {
    const priceMap = {
      "\uC77C\uBC18": 100,
      "\uACE0\uAE09": 500,
      "\uD76C\uADC0": 2e3,
      "\uC601\uC6C5": 1e4,
      "\uC804\uC124": 5e4
    };
    return priceMap[grade] || 100;
  }
  static \u0275fac = function ItemGenerationHelper_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ItemGenerationHelper)(\u0275\u0275inject(GeminiAiService), \u0275\u0275inject(ItemDbService), \u0275\u0275inject(NotificationService), \u0275\u0275inject(MatDialog));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _ItemGenerationHelper, factory: _ItemGenerationHelper.\u0275fac });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ItemGenerationHelper, [{
    type: Injectable
  }], () => [{ type: GeminiAiService }, { type: ItemDbService }, { type: NotificationService }, { type: MatDialog }], null);
})();

// src/app/modules/novel/components/novel-generator/helpers/story-flow.helper.ts
var StoryFlowHelper = class _StoryFlowHelper {
  notification;
  constructor(notification) {
    this.notification = notification;
  }
  /**
   * 샘플 스토리 맵 로드
   */
  loadSampleStoryMap(onNodesLoaded, onStoryAdded) {
    const storyNodes = [
      {
        id: "start",
        type: "story",
        title: "\uC2DC\uC791",
        content: ["\uB2F9\uC2E0\uC740 \uBB34\uB9BC\uC758 \uC791\uC740 \uB9C8\uC744\uC5D0\uC11C \uD0DC\uC5B4\uB0AC\uC2B5\uB2C8\uB2E4. \uC624\uB298\uC740 \uB2F9\uC2E0\uC758 \uC131\uC778\uC2DD \uB0A0\uC785\uB2C8\uB2E4."],
        choices: [
          {
            id: "choice-1",
            text: "\uB9C8\uC744 \uBB34\uC220 \uB3C4\uC7A5\uC73C\uB85C \uD5A5\uD55C\uB2E4",
            targetNodeId: "dojo"
          },
          {
            id: "choice-2",
            text: "\uC232 \uC18D \uC740\uB454 \uACE0\uC218\uB97C \uCC3E\uC544\uAC04\uB2E4",
            targetNodeId: "forest"
          }
        ],
        position: { x: 400, y: 100 },
        parentIds: [],
        childIds: ["dojo", "forest"],
        isVisited: true,
        isCurrent: false,
        isAvailable: true
      },
      {
        id: "dojo",
        type: "story",
        title: "\uBB34\uC220 \uB3C4\uC7A5",
        content: ['\uB3C4\uC7A5\uC758 \uC0AC\uBC94\uC774 \uB2F9\uC2E0\uC744 \uBCF4\uACE0 \uBBF8\uC18C\uB97C \uC9D3\uC2B5\uB2C8\uB2E4. "\uC790\uB124\uC758 \uC7AC\uB2A5\uC774 \uBCF4\uC774\uB294\uAD6C\uB098."'],
        choices: [
          {
            id: "choice-3",
            text: "\uAC80\uC220\uC744 \uBC30\uC6B4\uB2E4",
            targetNodeId: "sword-path"
          },
          {
            id: "choice-4",
            text: "\uAD8C\uBC95\uC744 \uBC30\uC6B4\uB2E4",
            targetNodeId: "fist-path"
          }
        ],
        position: { x: 200, y: 250 },
        parentIds: ["start"],
        childIds: ["sword-path", "fist-path"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "forest",
        type: "story",
        title: "\uC232 \uC18D\uC758 \uB9CC\uB0A8",
        content: ["\uAE4A\uC740 \uC232\uC5D0\uC11C \uBC31\uBC1C\uC758 \uB178\uC778\uC744 \uB9CC\uB0AC\uC2B5\uB2C8\uB2E4. \uADF8\uB294 \uB2F9\uC2E0\uC744 \uC624\uB798 \uAE30\uB2E4\uB838\uB2E4\uACE0 \uB9D0\uD569\uB2C8\uB2E4."],
        choices: [
          {
            id: "choice-5",
            text: "\uB0B4\uACF5 \uC218\uB828\uC744 \uC2DC\uC791\uD55C\uB2E4",
            targetNodeId: "inner-power"
          },
          {
            id: "choice-6",
            text: "\uACBD\uACF5\uC220\uC744 \uBC30\uC6B4\uB2E4",
            targetNodeId: "lightness-skill"
          }
        ],
        position: { x: 600, y: 250 },
        parentIds: ["start"],
        childIds: ["inner-power", "lightness-skill"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "sword-path",
        type: "story",
        title: "\uAC80\uC758 \uAE38",
        content: ["\uB2F9\uC2E0\uC740 \uAC80\uC220\uC758 \uAE30\uCD08\uB97C \uC775\uD614\uC2B5\uB2C8\uB2E4. \uC774\uC81C \uC2E4\uC804 \uACBD\uD5D8\uC774 \uD544\uC694\uD569\uB2C8\uB2E4."],
        choices: [
          {
            id: "choice-7",
            text: "\uBB34\uB9BC\uB300\uD68C\uC5D0 \uCC38\uAC00\uD55C\uB2E4",
            targetNodeId: "tournament"
          },
          {
            id: "choice-8",
            text: "\uC0B0\uC801 \uD1A0\uBC8C\uC5D0 \uB098\uC120\uB2E4",
            targetNodeId: "bandit-hunt"
          }
        ],
        position: { x: 100, y: 400 },
        parentIds: ["dojo"],
        childIds: ["tournament", "bandit-hunt"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "fist-path",
        type: "story",
        title: "\uAD8C\uBC95\uC758 \uAE38",
        content: ["\uAC15\uB825\uD55C \uAD8C\uBC95\uC744 \uC775\uD78C \uB2F9\uC2E0\uC740 \uC774\uC81C \uBB34\uB9BC\uC5D0 \uC774\uB984\uC744 \uC54C\uB9B4 \uC900\uBE44\uAC00 \uB418\uC5C8\uC2B5\uB2C8\uB2E4."],
        choices: [
          {
            id: "choice-9",
            text: "\uC815\uD30C\uC5D0 \uAC00\uC785\uD55C\uB2E4",
            targetNodeId: "righteous-sect"
          },
          {
            id: "choice-10",
            text: "\uD640\uB85C \uC218\uB828\uC744 \uACC4\uC18D\uD55C\uB2E4",
            targetNodeId: "solo-training"
          }
        ],
        position: { x: 300, y: 400 },
        parentIds: ["dojo"],
        childIds: ["righteous-sect", "solo-training"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "inner-power",
        type: "story",
        title: "\uB0B4\uACF5\uC758 \uC218\uB828",
        content: ["\uAC15\uB825\uD55C \uB0B4\uACF5\uC744 \uC313\uC740 \uB2F9\uC2E0\uC740 \uD2B9\uBCC4\uD55C \uB2A5\uB825\uC744 \uAC01\uC131\uD588\uC2B5\uB2C8\uB2E4."],
        choices: [
          {
            id: "choice-11",
            text: "\uBE44\uAE09\uC744 \uCC3E\uC544 \uB098\uC120\uB2E4",
            targetNodeId: "secret-manual"
          },
          {
            id: "choice-12",
            text: "\uC81C\uC790\uB97C \uBC1B\uC544\uB4E4\uC778\uB2E4",
            targetNodeId: "disciple"
          }
        ],
        position: { x: 500, y: 400 },
        parentIds: ["forest"],
        childIds: ["secret-manual", "disciple"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "lightness-skill",
        type: "story",
        title: "\uACBD\uACF5\uC758 \uB2EC\uC778",
        content: ["\uB204\uAD6C\uBCF4\uB2E4 \uBE60\uB978 \uC2E0\uBC95\uC744 \uC775\uD78C \uB2F9\uC2E0\uC740 \uBB34\uB9BC\uC5D0\uC11C \uC8FC\uBAA9\uBC1B\uAE30 \uC2DC\uC791\uD569\uB2C8\uB2E4."],
        choices: [
          {
            id: "choice-13",
            text: "\uC554\uD589\uC5B4\uC0AC\uAC00 \uB41C\uB2E4",
            targetNodeId: "secret-agent"
          },
          {
            id: "choice-14",
            text: "\uC758\uC801\uC774 \uB41C\uB2E4",
            targetNodeId: "righteous-thief"
          }
        ],
        position: { x: 700, y: 400 },
        parentIds: ["forest"],
        childIds: ["secret-agent", "righteous-thief"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "tournament",
        type: "battle",
        title: "\uBB34\uB9BC\uB300\uD68C",
        content: ["\uBB34\uB9BC\uB300\uD68C\uC5D0\uC11C \uAC15\uC801\uC744 \uB9CC\uB0AC\uC2B5\uB2C8\uB2E4!"],
        battleConfig: {
          enemyId: "sword-master",
          enemyName: "\uCC9C\uD558\uC81C\uC77C\uAC80",
          difficulty: 10,
          winNodeId: "leader-path",
          loseNodeId: "start",
          rewards: {
            exp: 100,
            gold: 200
          }
        },
        choices: [
          {
            id: "choice-15",
            text: "\uBB34\uB9BC\uB9F9\uC8FC\uAC00 \uB41C\uB2E4",
            targetNodeId: "leader-path",
            type: "special"
          }
        ],
        position: { x: 50, y: 550 },
        parentIds: ["sword-path"],
        childIds: ["leader-path"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "bandit-hunt",
        type: "battle",
        title: "\uC0B0\uC801 \uD1A0\uBC8C",
        content: ["\uC0B0\uC801 \uB450\uBAA9\uACFC \uB9DE\uC11C\uAC8C \uB418\uC5C8\uC2B5\uB2C8\uB2E4!"],
        battleConfig: {
          enemyId: "bandit-boss",
          enemyName: "\uC0B0\uC801 \uB450\uBAA9",
          difficulty: 8,
          winNodeId: "hero-path",
          loseNodeId: "start",
          rewards: {
            exp: 80,
            gold: 150
          }
        },
        choices: [
          {
            id: "choice-16",
            text: "\uC601\uC6C5\uC73C\uB85C \uCD94\uC559\uBC1B\uB2E4",
            targetNodeId: "hero-path",
            type: "special"
          }
        ],
        position: { x: 200, y: 550 },
        parentIds: ["sword-path"],
        childIds: ["hero-path"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "righteous-sect",
        type: "story",
        title: "\uC815\uD30C\uC758 \uC77C\uC6D0",
        content: ["\uB2F9\uC2E0\uC740 \uC815\uD30C\uC758 \uD575\uC2EC \uC778\uBB3C\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4."],
        choices: [
          {
            id: "choice-17",
            text: "\uC0AC\uD30C\uC640\uC758 \uC804\uC7C1\uC744 \uC900\uBE44\uD55C\uB2E4",
            targetNodeId: "war-preparation"
          }
        ],
        position: { x: 350, y: 550 },
        parentIds: ["fist-path"],
        childIds: ["war-preparation"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "solo-training",
        type: "story",
        title: "\uD640\uB85C \uC120 \uC790",
        content: ["\uB2F9\uC2E0\uC740 \uC815\uC0AC\uD30C\uB97C \uCD08\uC6D4\uD55C \uACBD\uC9C0\uC5D0 \uC774\uB974\uB800\uC2B5\uB2C8\uB2E4."],
        choices: [
          {
            id: "choice-18",
            text: "\uC804\uC124\uC774 \uB418\uB2E4",
            targetNodeId: "legend-ending"
          }
        ],
        position: { x: 500, y: 550 },
        parentIds: ["fist-path"],
        childIds: ["legend-ending"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "secret-manual",
        type: "story",
        title: "\uC808\uC138\uBE44\uAE09",
        content: ["\uC804\uC124\uC758 \uBE44\uAE09\uC744 \uC190\uC5D0 \uB123\uC5C8\uC2B5\uB2C8\uB2E4!"],
        choices: [
          {
            id: "choice-19",
            text: "\uCC9C\uD558\uC81C\uC77C\uC774 \uB41C\uB2E4",
            targetNodeId: "supreme-ending"
          }
        ],
        position: { x: 650, y: 550 },
        parentIds: ["inner-power"],
        childIds: ["supreme-ending"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "disciple",
        type: "story",
        title: "\uC2A4\uC2B9\uC758 \uAE38",
        content: ["\uB2F9\uC2E0\uC740 \uB6F0\uC5B4\uB09C \uC81C\uC790\uB4E4\uC744 \uAE38\uB7EC\uB0C8\uC2B5\uB2C8\uB2E4."],
        choices: [
          {
            id: "choice-20",
            text: "\uBB38\uD30C\uB97C \uCC3D\uC2DC\uD55C\uB2E4",
            targetNodeId: "sect-ending"
          }
        ],
        position: { x: 400, y: 650 },
        parentIds: ["inner-power"],
        childIds: ["sect-ending"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "secret-agent",
        type: "story",
        title: "\uC554\uD589\uC5B4\uC0AC",
        content: ["\uB2F9\uC2E0\uC740 \uC655\uBA85\uC744 \uBC1B\uB4E4\uC5B4 \uBB34\uB9BC\uC744 \uAC10\uC2DC\uD569\uB2C8\uB2E4."],
        choices: [
          {
            id: "choice-21",
            text: "\uD3C9\uD654\uB97C \uC9C0\uD0A8\uB2E4",
            targetNodeId: "peace-ending"
          }
        ],
        position: { x: 600, y: 650 },
        parentIds: ["lightness-skill"],
        childIds: ["peace-ending"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "righteous-thief",
        type: "story",
        title: "\uC758\uC801",
        content: ["\uB2F9\uC2E0\uC740 \uD0D0\uAD00\uC624\uB9AC\uB4E4\uC744 \uC751\uC9D5\uD558\uBA70 \uBC31\uC131\uB4E4\uC744 \uB3D5\uC2B5\uB2C8\uB2E4."],
        choices: [
          {
            id: "choice-22",
            text: "\uBBFC\uC911\uC758 \uC601\uC6C5\uC774 \uB41C\uB2E4",
            targetNodeId: "hero-ending"
          }
        ],
        position: { x: 800, y: 650 },
        parentIds: ["lightness-skill"],
        childIds: ["hero-ending"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "war-preparation",
        type: "story",
        title: "\uC815\uC0AC\uB300\uC804 \uC900\uBE44",
        content: ["\uC815\uD30C\uC640 \uC0AC\uD30C\uC758 \uB300\uC804\uC774 \uB2E4\uAC00\uC635\uB2C8\uB2E4."],
        choices: [
          {
            id: "choice-23",
            text: "\uACB0\uC804\uC744 \uBC8C\uC778\uB2E4",
            targetNodeId: "final-battle"
          }
        ],
        position: { x: 350, y: 700 },
        parentIds: ["righteous-sect"],
        childIds: ["final-battle"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "leader-path",
        type: "ending",
        title: "\uBB34\uB9BC\uB9F9\uC8FC \uC5D4\uB529",
        content: ["\uB2F9\uC2E0\uC740 \uBB34\uB9BC\uB9F9\uC8FC\uAC00 \uB418\uC5B4 \uBB34\uB9BC\uC744 \uC774\uB04C\uAC8C \uB418\uC5C8\uC2B5\uB2C8\uB2E4.", "\uD3C9\uD654\uB85C\uC6B4 \uBB34\uB9BC\uC744 \uB9CC\uB4E4\uAE30 \uC704\uD55C \uC5EC\uC815\uC774 \uC2DC\uC791\uB429\uB2C8\uB2E4."],
        position: { x: 100, y: 800 },
        parentIds: ["tournament"],
        childIds: [],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "hero-path",
        type: "ending",
        title: "\uD611\uAC1D \uC5D4\uB529",
        content: ["\uB2F9\uC2E0\uC740 \uC758\uB85C\uC6B4 \uD611\uAC1D\uC73C\uB85C \uBB34\uB9BC\uC5D0 \uC774\uB984\uC744 \uB0A8\uACBC\uC2B5\uB2C8\uB2E4.", "\uBC31\uC131\uB4E4\uC740 \uB2F9\uC2E0\uC744 \uC601\uC6C5\uC73C\uB85C \uAE30\uC5B5\uD569\uB2C8\uB2E4."],
        position: { x: 250, y: 800 },
        parentIds: ["bandit-hunt"],
        childIds: [],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "legend-ending",
        type: "ending",
        title: "\uC804\uC124 \uC5D4\uB529",
        content: ["\uB2F9\uC2E0\uC740 \uBB34\uB9BC\uC758 \uC804\uC124\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4.", "\uD6C4\uB300 \uC0AC\uB78C\uB4E4\uC740 \uB2F9\uC2E0\uC758 \uC774\uC57C\uAE30\uB97C \uC804\uC124\uCC98\uB7FC \uC774\uC57C\uAE30\uD569\uB2C8\uB2E4."],
        position: { x: 500, y: 800 },
        parentIds: ["solo-training"],
        childIds: [],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "supreme-ending",
        type: "ending",
        title: "\uCC9C\uD558\uC81C\uC77C \uC5D4\uB529",
        content: ["\uB2F9\uC2E0\uC740 \uCC9C\uD558\uC81C\uC77C\uC758 \uACE0\uC218\uAC00 \uB418\uC5C8\uC2B5\uB2C8\uB2E4.", "\uBB34\uB9BC\uC5D0\uC11C \uB2F9\uC2E0\uC744 \uB2F9\uD560 \uC790\uB294 \uC544\uBB34\uB3C4 \uC5C6\uC2B5\uB2C8\uB2E4."],
        position: { x: 650, y: 800 },
        parentIds: ["secret-manual"],
        childIds: [],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "sect-ending",
        type: "ending",
        title: "\uC885\uC0AC \uC5D4\uB529",
        content: ["\uB2F9\uC2E0\uC740 \uC704\uB300\uD55C \uBB38\uD30C\uB97C \uCC3D\uC2DC\uD588\uC2B5\uB2C8\uB2E4.", "\uB2F9\uC2E0\uC758 \uC81C\uC790\uB4E4\uC774 \uBB34\uB9BC\uC744 \uC774\uB04C\uC5B4\uAC11\uB2C8\uB2E4."],
        position: { x: 400, y: 800 },
        parentIds: ["disciple"],
        childIds: [],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "peace-ending",
        type: "ending",
        title: "\uD3C9\uD654\uC218\uD638\uC790 \uC5D4\uB529",
        content: ["\uB2F9\uC2E0\uC740 \uBB34\uB9BC\uC758 \uD3C9\uD654\uB97C \uC9C0\uCF30\uC2B5\uB2C8\uB2E4.", "\uB2F9\uC2E0\uC758 \uACF5\uB85C\uB85C \uBB34\uB9BC\uC5D0 \uD3C9\uD654\uAC00 \uCC3E\uC544\uC654\uC2B5\uB2C8\uB2E4."],
        position: { x: 600, y: 800 },
        parentIds: ["secret-agent"],
        childIds: [],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "hero-ending",
        type: "ending",
        title: "\uBBFC\uC911\uC601\uC6C5 \uC5D4\uB529",
        content: ["\uB2F9\uC2E0\uC740 \uBBFC\uC911\uC758 \uC601\uC6C5\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4.", "\uBC31\uC131\uB4E4\uC740 \uB2F9\uC2E0\uC744 \uC758\uB85C\uC6B4 \uD611\uAC1D\uC73C\uB85C \uCD94\uC559\uD569\uB2C8\uB2E4."],
        position: { x: 800, y: 800 },
        parentIds: ["righteous-thief"],
        childIds: [],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "final-battle",
        type: "battle",
        title: "\uC815\uC0AC\uB300\uC804",
        content: ["\uC815\uD30C\uC640 \uC0AC\uD30C\uC758 \uCD5C\uD6C4 \uACB0\uC804\uC774 \uC2DC\uC791\uB429\uB2C8\uB2E4!"],
        battleConfig: {
          enemyId: "demon-lord",
          enemyName: "\uB9C8\uAD50\uAD50\uC8FC",
          difficulty: 15,
          winNodeId: "savior-ending",
          loseNodeId: "start",
          rewards: {
            exp: 200,
            gold: 500
          }
        },
        choices: [
          {
            id: "choice-24",
            text: "\uBB34\uB9BC\uC744 \uAD6C\uD558\uB2E4",
            targetNodeId: "savior-ending",
            type: "ending"
          }
        ],
        position: { x: 350, y: 850 },
        parentIds: ["war-preparation"],
        childIds: ["savior-ending"],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      },
      {
        id: "savior-ending",
        type: "ending",
        title: "\uAD6C\uC138\uC8FC \uC5D4\uB529",
        content: ["\uB2F9\uC2E0\uC740 \uBB34\uB9BC\uC744 \uAD6C\uD55C \uC601\uC6C5\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4.", "\uB2F9\uC2E0\uC758 \uC774\uB984\uC740 \uC601\uC6D0\uD788 \uBB34\uB9BC\uC758 \uC5ED\uC0AC\uC5D0 \uB0A8\uC744 \uAC83\uC785\uB2C8\uB2E4."],
        position: { x: 350, y: 1e3 },
        parentIds: ["final-battle"],
        childIds: [],
        isVisited: false,
        isCurrent: false,
        isAvailable: false
      }
    ];
    const storyConnections = [];
    storyNodes.forEach((node) => {
      if (node.choices) {
        node.choices.forEach((choice) => {
          if (choice.targetNodeId) {
            const targetNode = storyNodes.find((n) => n.id === choice.targetNodeId);
            if (targetNode) {
              const x1 = node.position.x;
              const y1 = node.position.y;
              const x2 = targetNode.position.x;
              const y2 = targetNode.position.y;
              const midY = (y1 + y2) / 2;
              const path = `M ${x1} ${y1} C ${x1} ${midY}, ${x2} ${midY}, ${x2} ${y2}`;
              storyConnections.push({
                id: `${node.id}-${choice.targetNodeId}`,
                from: node.id,
                to: choice.targetNodeId,
                path,
                isVisited: false,
                isCurrent: false,
                color: "#64748b",
                width: 2
              });
            }
          }
        });
      }
    });
    const startNode = storyNodes.find((n) => n.id === "start");
    if (startNode) {
      onStoryAdded(startNode.content);
    }
    onNodesLoaded(storyNodes, storyConnections, "start");
    this.notification.show("\u{1F4DA} \uC0D8\uD50C \uC2A4\uD1A0\uB9AC\uAC00 \uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
  }
  /**
   * 노드 아이콘 가져오기
   */
  getNodeIcon(node) {
    switch (node.type) {
      case "start":
        return "\u{1F3AC}";
      case "story":
        return "\u{1F4D6}";
      case "battle":
        return "\u2694\uFE0F";
      case "event":
        return "\u2728";
      case "ending":
        return "\u{1F3C1}";
      default:
        return "\u{1F4CD}";
    }
  }
  /**
   * 탐험률 계산
   */
  calculateExplorationRate(storyNodes) {
    if (storyNodes.length === 0)
      return 0;
    const total = storyNodes.length;
    const visited = storyNodes.filter((n) => n.isVisited).length;
    return Math.round(visited / total * 100);
  }
  /**
   * 현재 노드 가져오기
   */
  getCurrentNode(storyNodes, currentNodeId) {
    if (!currentNodeId || storyNodes.length === 0) {
      return null;
    }
    return storyNodes.find((n) => n.id === currentNodeId) || null;
  }
  /**
   * ID로 노드 가져오기
   */
  getNodeById(storyNodes, nodeId) {
    return storyNodes.find((n) => n.id === nodeId) || null;
  }
  static \u0275fac = function StoryFlowHelper_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _StoryFlowHelper)(\u0275\u0275inject(NotificationService));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _StoryFlowHelper, factory: _StoryFlowHelper.\u0275fac });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(StoryFlowHelper, [{
    type: Injectable
  }], () => [{ type: NotificationService }], null);
})();

// src/app/modules/novel/services/scenario-db.service.ts
var ScenarioDbService = class _ScenarioDbService {
  dbName = "NovelScenarioDB";
  dbVersion = 1;
  storeName = "scenarios";
  db = null;
  constructor() {
    this.initDB();
  }
  // IndexedDB 초기화
  initDB() {
    return __async(this, null, function* () {
      return new Promise((resolve, reject) => {
        const request = indexedDB.open(this.dbName, this.dbVersion);
        request.onerror = () => {
          reject(request.error);
        };
        request.onsuccess = () => {
          this.db = request.result;
          resolve();
        };
        request.onupgradeneeded = (event) => {
          const db = event.target.result;
          if (!db.objectStoreNames.contains(this.storeName)) {
            const objectStore = db.createObjectStore(this.storeName, { keyPath: "id" });
            objectStore.createIndex("title", "title", { unique: false });
            objectStore.createIndex("genre", "genre", { unique: false });
            objectStore.createIndex("createdAt", "createdAt", { unique: false });
          }
        };
      });
    });
  }
  // DB 연결 확인
  ensureDB() {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return this.db;
    });
  }
  // 시나리오 저장
  saveScenario(scenario) {
    return __async(this, null, function* () {
      const db = yield this.ensureDB();
      return new Promise((resolve, reject) => {
        const transaction = db.transaction([this.storeName], "readwrite");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.put(scenario);
        request.onsuccess = () => {
          resolve();
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  // 모든 시나리오 가져오기
  getAllScenarios() {
    return __async(this, null, function* () {
      const db = yield this.ensureDB();
      return new Promise((resolve, reject) => {
        const transaction = db.transaction([this.storeName], "readonly");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.getAll();
        request.onsuccess = () => {
          const scenarios = request.result;
          scenarios.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());
          resolve(scenarios);
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  // ID로 시나리오 가져오기
  getScenario(id) {
    return __async(this, null, function* () {
      const db = yield this.ensureDB();
      return new Promise((resolve, reject) => {
        const transaction = db.transaction([this.storeName], "readonly");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.get(id);
        request.onsuccess = () => {
          resolve(request.result || null);
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  // 시나리오 삭제
  deleteScenario(id) {
    return __async(this, null, function* () {
      const db = yield this.ensureDB();
      return new Promise((resolve, reject) => {
        const transaction = db.transaction([this.storeName], "readwrite");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.delete(id);
        request.onsuccess = () => {
          resolve();
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  // 장르별 시나리오 가져오기
  getScenariosByGenre(genre) {
    return __async(this, null, function* () {
      const db = yield this.ensureDB();
      return new Promise((resolve, reject) => {
        const transaction = db.transaction([this.storeName], "readonly");
        const objectStore = transaction.objectStore(this.storeName);
        const index = objectStore.index("genre");
        const request = index.getAll(genre);
        request.onsuccess = () => {
          const scenarios = request.result;
          scenarios.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());
          resolve(scenarios);
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  // 모든 시나리오 삭제
  clearAllScenarios() {
    return __async(this, null, function* () {
      const db = yield this.ensureDB();
      return new Promise((resolve, reject) => {
        const transaction = db.transaction([this.storeName], "readwrite");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.clear();
        request.onsuccess = () => {
          resolve();
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  static \u0275fac = function ScenarioDbService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ScenarioDbService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _ScenarioDbService, factory: _ScenarioDbService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ScenarioDbService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [], null);
})();

// src/app/modules/novel/services/character-db.service.ts
var CharacterDbService = class _CharacterDbService {
  dbName = "NovelCharacterDB";
  storeName = "characters";
  db = null;
  constructor() {
    this.initDB();
  }
  initDB() {
    return __async(this, null, function* () {
      return new Promise((resolve, reject) => {
        const request = indexedDB.open(this.dbName, 1);
        request.onerror = () => {
          reject(request.error);
        };
        request.onsuccess = () => {
          this.db = request.result;
          resolve();
        };
        request.onupgradeneeded = (event) => {
          const db = event.target.result;
          if (!db.objectStoreNames.contains(this.storeName)) {
            const objectStore = db.createObjectStore(this.storeName, {
              keyPath: "id",
              autoIncrement: true
            });
            objectStore.createIndex("name", "name", { unique: false });
            objectStore.createIndex("occupation", "occupation", { unique: false });
            objectStore.createIndex("createdAt", "createdAt", { unique: false });
          }
        };
      });
    });
  }
  saveCharacter(character) {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readwrite");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.add(character);
        request.onsuccess = () => {
          resolve(request.result);
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  getAllCharacters() {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readonly");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.getAll();
        request.onsuccess = () => {
          const characters = request.result;
          characters.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());
          resolve(characters);
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  getCharacter(id) {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readonly");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.get(id);
        request.onsuccess = () => {
          resolve(request.result);
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  deleteCharacter(id) {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readwrite");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.delete(id);
        request.onsuccess = () => {
          resolve();
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  clearAllCharacters() {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readwrite");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.clear();
        request.onsuccess = () => {
          resolve();
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  static \u0275fac = function CharacterDbService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _CharacterDbService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _CharacterDbService, factory: _CharacterDbService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(CharacterDbService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [], null);
})();

// src/app/modules/novel/services/story-db.service.ts
var StoryDbService = class _StoryDbService {
  debugLogger = inject(DebugLoggerService);
  dbName = "NovelStoryDB";
  storeName = "stories";
  db = null;
  constructor() {
    this.initDB();
  }
  initDB() {
    return __async(this, null, function* () {
      return new Promise((resolve, reject) => {
        const request = indexedDB.open(this.dbName, 1);
        request.onerror = () => {
          this.debugLogger.error("StoryDB", `\u274C DB \uC5F4\uAE30 \uC2E4\uD328: ${request.error}`);
          reject(request.error);
        };
        request.onsuccess = () => {
          this.db = request.result;
          this.debugLogger.success("StoryDB", "\u2705 DB \uC5F4\uAE30 \uC131\uACF5");
          resolve();
        };
        request.onupgradeneeded = (event) => {
          const db = event.target.result;
          if (!db.objectStoreNames.contains(this.storeName)) {
            const objectStore = db.createObjectStore(this.storeName, {
              keyPath: "id",
              autoIncrement: false
            });
            objectStore.createIndex("title", "title", { unique: false });
            objectStore.createIndex("createdAt", "createdAt", { unique: false });
            objectStore.createIndex("genre", "genre", { unique: false });
          }
        };
      });
    });
  }
  /**
   * 스토리 저장
   */
  saveStory(story) {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readwrite");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.put(story);
        request.onsuccess = () => {
          this.debugLogger.success("StoryDB", `\u{1F4BE} \uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC131\uACF5: ${story.title}`);
          resolve();
        };
        request.onerror = () => {
          this.debugLogger.error("StoryDB", `\u274C \uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC2E4\uD328: ${request.error}`);
          reject(request.error);
        };
      });
    });
  }
  /**
   * 모든 스토리 가져오기
   */
  getAllStories() {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readonly");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.getAll();
        request.onsuccess = () => {
          const stories = request.result;
          stories.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());
          this.debugLogger.info("StoryDB", `\u{1F4DA} \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC \uBAA9\uB85D: ${stories.length}\uAC1C`);
          resolve(stories);
        };
        request.onerror = () => {
          this.debugLogger.error("StoryDB", `\u274C \uC2A4\uD1A0\uB9AC \uBAA9\uB85D \uB85C\uB4DC \uC2E4\uD328: ${request.error}`);
          reject(request.error);
        };
      });
    });
  }
  /**
   * 특정 스토리 가져오기
   */
  getStory(id) {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readonly");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.get(id);
        request.onsuccess = () => {
          resolve(request.result || null);
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  /**
   * 스토리 삭제
   */
  deleteStory(id) {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readwrite");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.delete(id);
        request.onsuccess = () => {
          resolve();
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  /**
   * 모든 스토리 삭제 (초기화)
   */
  clearAllStories() {
    return __async(this, null, function* () {
      if (!this.db) {
        yield this.initDB();
      }
      return new Promise((resolve, reject) => {
        const transaction = this.db.transaction([this.storeName], "readwrite");
        const objectStore = transaction.objectStore(this.storeName);
        const request = objectStore.clear();
        request.onsuccess = () => {
          resolve();
        };
        request.onerror = () => {
          reject(request.error);
        };
      });
    });
  }
  static \u0275fac = function StoryDbService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _StoryDbService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _StoryDbService, factory: _StoryDbService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(StoryDbService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [], null);
})();

// src/app/modules/novel/components/novel-generator/helpers/content-management.helper.ts
var ContentManagementHelper = class _ContentManagementHelper {
  notification;
  dialog;
  scenarioDbService;
  characterDbService;
  storyDbService;
  constructor(notification, dialog, scenarioDbService, characterDbService, storyDbService) {
    this.notification = notification;
    this.dialog = dialog;
    this.scenarioDbService = scenarioDbService;
    this.characterDbService = characterDbService;
    this.storyDbService = storyDbService;
  }
  // ==================== 시나리오 관리 ====================
  /**
   * 저장된 시나리오 목록 로드
   */
  loadSavedScenarios() {
    return __async(this, null, function* () {
      try {
        return yield this.scenarioDbService.getAllScenarios();
      } catch (error) {
        return [];
      }
    });
  }
  /**
   * 생성된 시나리오 저장
   */
  saveGeneratedScenario(generatedScenario, onSuccess) {
    return __async(this, null, function* () {
      if (!generatedScenario)
        return;
      const scenario = {
        id: `scenario_${Date.now()}`,
        title: generatedScenario.title || "\uC81C\uBAA9 \uC5C6\uC74C",
        description: generatedScenario.description || "",
        characters: generatedScenario.characters || [],
        setting: generatedScenario.setting || "",
        conflict: generatedScenario.conflict || "",
        goal: generatedScenario.goal || "",
        mood: generatedScenario.mood || "",
        tags: generatedScenario.tags || [],
        genre: generatedScenario.genre || "\uBB34\uD611",
        style: generatedScenario.style || "\uC804\uD1B5\uC801\uC778",
        createdAt: /* @__PURE__ */ new Date(),
        isAdult: generatedScenario.isAdult || false
      };
      try {
        yield this.scenarioDbService.saveScenario(scenario);
        this.notification.show("\u2705 \uC2DC\uB098\uB9AC\uC624\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
        onSuccess();
      } catch (error) {
        this.notification.show("\uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
      }
    });
  }
  /**
   * 시나리오 삭제 (확인 다이얼로그 포함)
   */
  deleteScenario(scenarioId, onSuccess) {
    return __async(this, null, function* () {
      const dialogRef = this.dialog.open(ConfirmDialogComponent, {
        width: "400px",
        data: {
          title: "\uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C",
          message: "\uC774 \uC2DC\uB098\uB9AC\uC624\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",
          confirmText: "\uC0AD\uC81C",
          cancelText: "\uCDE8\uC18C"
        }
      });
      const confirmed = yield dialogRef.afterClosed().toPromise();
      if (!confirmed) {
        return;
      }
      try {
        yield this.scenarioDbService.deleteScenario(scenarioId);
        onSuccess();
      } catch (error) {
        this.notification.show("\uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
      }
    });
  }
  /**
   * 시나리오로 스토리 블록 생성
   */
  generateStoryBlocksFromScenario(scenario) {
    return [
      `\u{1F3AC} ${scenario.title}`,
      ``,
      `${scenario.description}`,
      ``,
      `\u{1F4CD} \uBC30\uACBD: ${scenario.setting}`,
      `\u2694\uFE0F \uAC08\uB4F1: ${scenario.conflict}`,
      `\u{1F3AF} \uBAA9\uD45C: ${scenario.goal}`,
      ``,
      `\uB2F9\uC2E0\uC758 \uC774\uC57C\uAE30\uAC00 \uC2DC\uC791\uB429\uB2C8\uB2E4...`
    ];
  }
  // ==================== 캐릭터 관리 ====================
  /**
   * 저장된 캐릭터 목록 로드
   */
  loadSavedCharacters() {
    return __async(this, null, function* () {
      try {
        return yield this.characterDbService.getAllCharacters();
      } catch (error) {
        return [];
      }
    });
  }
  /**
   * 생성된 캐릭터 저장
   */
  saveGeneratedCharacter(generatedCharacter, onSuccess) {
    return __async(this, null, function* () {
      if (!generatedCharacter)
        return;
      const character = {
        name: generatedCharacter.name || "\uC774\uB984 \uC5C6\uC74C",
        gender: generatedCharacter.gender || "unknown",
        age: generatedCharacter.age || 20,
        occupation: generatedCharacter.occupation || "",
        personality: generatedCharacter.personality || [],
        backstory: generatedCharacter.backstory || "",
        skills: generatedCharacter.skills || [],
        appearance: generatedCharacter.appearance || "",
        goal: generatedCharacter.goal || "",
        weakness: generatedCharacter.weakness || "",
        tags: generatedCharacter.tags || [],
        createdAt: /* @__PURE__ */ new Date()
      };
      try {
        yield this.characterDbService.saveCharacter(character);
        this.notification.show("\u2705 \uCE90\uB9AD\uD130\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
        onSuccess();
      } catch (error) {
        this.notification.show("\uCE90\uB9AD\uD130 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
      }
    });
  }
  /**
   * 캐릭터 삭제 (확인 다이얼로그 포함)
   */
  deleteCharacter(characterId, onSuccess) {
    return __async(this, null, function* () {
      const dialogRef = this.dialog.open(ConfirmDialogComponent, {
        width: "400px",
        data: {
          title: "\uCE90\uB9AD\uD130 \uC0AD\uC81C",
          message: "\uC774 \uCE90\uB9AD\uD130\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",
          confirmText: "\uC0AD\uC81C",
          cancelText: "\uCDE8\uC18C"
        }
      });
      const confirmed = yield dialogRef.afterClosed().toPromise();
      if (!confirmed) {
        return;
      }
      try {
        yield this.characterDbService.deleteCharacter(characterId);
        onSuccess();
      } catch (error) {
        this.notification.show("\uCE90\uB9AD\uD130 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
      }
    });
  }
  // ==================== 스토리 관리 ====================
  /**
   * 저장된 스토리 목록 로드
   */
  loadSavedStories() {
    return __async(this, null, function* () {
      try {
        return yield this.storyDbService.getAllStories();
      } catch (error) {
        return [];
      }
    });
  }
  /**
   * 생성된 스토리 저장
   */
  saveGeneratedStory(generatedStory, onSuccess) {
    return __async(this, null, function* () {
      if (!generatedStory)
        return;
      const story = {
        id: `story_${Date.now()}`,
        title: generatedStory.title || "\uC81C\uBAA9 \uC5C6\uC74C",
        description: generatedStory.description || "",
        genre: generatedStory.genre || "fantasy",
        icon: "\u{1F4D6}",
        difficulty: generatedStory.difficulty || "normal",
        startingGold: generatedStory.startingGold || 100,
        startingItems: generatedStory.startingItems || [],
        firstStory: generatedStory.firstStory || [],
        firstChoices: generatedStory.firstChoices || [],
        createdAt: /* @__PURE__ */ new Date(),
        createdBy: "AI"
      };
      try {
        yield this.storyDbService.saveStory(story);
        this.notification.show("\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
        onSuccess();
      } catch (error) {
        this.notification.show("\uC2A4\uD1A0\uB9AC \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
      }
    });
  }
  /**
   * 스토리 삭제 (확인 다이얼로그 포함)
   */
  deleteStory(storyId, onSuccess) {
    return __async(this, null, function* () {
      const dialogRef = this.dialog.open(ConfirmDialogComponent, {
        width: "400px",
        data: {
          title: "\uC2A4\uD1A0\uB9AC \uC0AD\uC81C",
          message: "\uC774 \uC2A4\uD1A0\uB9AC\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",
          confirmText: "\uC0AD\uC81C",
          cancelText: "\uCDE8\uC18C"
        }
      });
      const confirmed = yield dialogRef.afterClosed().toPromise();
      if (!confirmed) {
        return;
      }
      try {
        yield this.storyDbService.deleteStory(storyId);
        onSuccess();
      } catch (error) {
        this.notification.show("\uC2A4\uD1A0\uB9AC \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
      }
    });
  }
  /**
   * 저장된 스토리를 노벨 템플릿으로 변환
   */
  convertStoryToNovelTemplate(story) {
    return {
      id: story.id,
      title: story.title,
      genre: story.genre || "fantasy",
      description: story.description || "",
      icon: "\u{1F4D6}",
      difficulty: story.difficulty || "normal",
      startingGold: story.startingGold || 100,
      startingItems: story.startingItems || [],
      firstStory: story.firstStory || "",
      firstChoices: story.firstChoices || []
    };
  }
  static \u0275fac = function ContentManagementHelper_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ContentManagementHelper)(\u0275\u0275inject(NotificationService), \u0275\u0275inject(MatDialog), \u0275\u0275inject(ScenarioDbService), \u0275\u0275inject(CharacterDbService), \u0275\u0275inject(StoryDbService));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _ContentManagementHelper, factory: _ContentManagementHelper.\u0275fac });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ContentManagementHelper, [{
    type: Injectable
  }], () => [{ type: NotificationService }, { type: MatDialog }, { type: ScenarioDbService }, { type: CharacterDbService }, { type: StoryDbService }], null);
})();

// src/app/modules/novel/components/novel-generator/helpers/diablo-item.helper.ts
var DiabloItemHelper = class {
  /**
   * 등급 심볼 반환 (디아블로 스타일)
   */
  static getRaritySymbol(rarity) {
    const symbolMap = {
      "normal": "\u26AA",
      "magic": "\u{1F535}",
      "rare": "\u{1F7E1}",
      "unique": "\u{1F7E3}",
      "set": "\u{1F7E2}",
      "legendary": "\u{1F7E0}"
    };
    return symbolMap[rarity] || "\u26AA";
  }
  /**
   * 인벤토리 아이템의 아이콘 반환
   */
  static getInventoryItemIcon(item) {
    if (item.icon) {
      return item.icon;
    }
    const type = item.type.toLowerCase();
    if (type === "weapon") {
      return this.getWeaponIcon(item.name?.toLowerCase() || "");
    }
    if (type === "armor" || type === "helmet" || type === "gloves" || type === "boots" || type === "belt") {
      return this.getArmorIcon(type, item.name?.toLowerCase() || "");
    }
    return "\u{1F4E6}";
  }
  /**
   * 무기 아이콘 반환
   */
  static getWeaponIcon(name) {
    if (name.includes("\uB3C4\uB07C") || name.includes("\uCCA0\uC6D4"))
      return "\u{1FA93}";
    if (name.includes("\uB2E8\uAC80"))
      return "\u{1F5E1}\uFE0F";
    if (name.includes("\uAC80"))
      return "\u2694\uFE0F";
    if (name.includes("\uD65C"))
      return "\u{1F3F9}";
    if (name.includes("\uC11D\uAD81") || name.includes("\uC1E0\uB1CC"))
      return "\u{1F3F9}";
    if (name.includes("\uC9C0\uD321\uC774") || name.includes("\uC644\uB4DC") || name.includes("\uB9C8\uBC95\uBD09"))
      return "\u{1FA84}";
    if (name.includes("\uCC3D") || name.includes("\uD3F4\uC554") || name.includes("\uC721\uCC99\uBD09"))
      return "\u{1F531}";
    if (name.includes("\uB9DD\uCE58") || name.includes("\uCCA0\uD1F4") || name.includes("\uB454\uAE30"))
      return "\u{1F528}";
    if (name.includes("\uB0AB"))
      return "\u2694\uFE0F";
    if (name.includes("\uBC29\uD328"))
      return "\u{1F6E1}\uFE0F";
    return "\u2694\uFE0F";
  }
  /**
   * 방어구 아이콘 반환
   */
  static getArmorIcon(type, name) {
    if (type === "helmet")
      return "\u26D1\uFE0F";
    if (type === "armor")
      return "\u{1F9BA}";
    if (type === "gloves")
      return "\u{1F9E4}";
    if (type === "boots")
      return "\u{1F462}";
    if (type === "belt")
      return "\u{1F397}\uFE0F";
    if (name.includes("\uD22C\uAD6C") || name.includes("\uB450\uAC1C\uACE8"))
      return "\u26D1\uFE0F";
    if (name.includes("\uAC11\uC637") || name.includes("\uAC00\uC2B4"))
      return "\u{1F9BA}";
    if (name.includes("\uC7A5\uAC11"))
      return "\u{1F9E4}";
    if (name.includes("\uC2E0\uBC1C") || name.includes("\uC7A5\uD654"))
      return "\u{1F462}";
    if (name.includes("\uBC14\uC9C0"))
      return "\u{1F456}";
    if (name.includes("\uBCA8\uD2B8"))
      return "\u{1F397}\uFE0F";
    return "\u{1F9BA}";
  }
  /**
   * DiabloItem을 InventoryItem으로 변환
   */
  static convertDiabloItemToInventoryItem(diabloItem) {
    const itemId = String(diabloItem.id);
    const mappedRarity = this.mapDiabloRarity(diabloItem.rarity.toString());
    const mappedType = this.mapDiabloType(diabloItem.type.toString());
    const inventoryItem = {
      id: itemId,
      name: diabloItem.nameKo || diabloItem.name || "\uC54C \uC218 \uC5C6\uB294 \uC544\uC774\uD15C",
      type: mappedType,
      rarity: mappedRarity,
      description: diabloItem.uniqueEffect || "",
      icon: diabloItem.icon || this.getIconByType(diabloItem.type.toString()),
      quantity: 1,
      buyPrice: this.calculatePrice(diabloItem.rarity.toString()),
      sellPrice: Math.floor(this.calculatePrice(diabloItem.rarity.toString()) * 0.5)
    };
    if (diabloItem.stats && diabloItem.stats.length > 0) {
      const stats = {};
      if (diabloItem.damage) {
        const damageMatch = diabloItem.damage.match(/(\d+)-(\d+)/);
        if (damageMatch) {
          stats.minDamage = parseInt(damageMatch[1]);
          stats.maxDamage = parseInt(damageMatch[2]);
        }
      }
      if (diabloItem.defense) {
        stats.defense = diabloItem.defense;
        stats.armor = diabloItem.defense;
      }
      diabloItem.stats.forEach((stat) => {
        const valueMatch = stat.value.match(/([+-]?\d+\.?\d*)/);
        if (valueMatch) {
          const numValue = parseFloat(valueMatch[1]);
          if (stat.name.includes("\uACF5\uACA9 \uC18D\uB3C4")) {
            stats.attackSpeed = numValue;
          } else if (stat.name.includes("\uD06C\uB9AC\uD2F0\uCEEC") && stat.name.includes("\uD655\uB960")) {
            stats.criticalChance = numValue;
          } else if (stat.name.includes("\uD06C\uB9AC\uD2F0\uCEEC") && stat.name.includes("\uD53C\uD574")) {
            stats.criticalDamage = numValue;
          } else if (stat.name.includes("\uC0DD\uBA85\uB825")) {
            stats.hp = numValue;
            stats.maxHp = numValue;
          } else if (stat.name.includes("\uBC29\uC5B4\uB825")) {
            stats.defense = numValue;
          }
        }
      });
      if (Object.keys(stats).length > 0) {
        inventoryItem.stats = stats;
      }
    }
    return inventoryItem;
  }
  /**
   * Diablo 타입 → InventoryItem 타입 매핑
   */
  static mapDiabloType(type) {
    const typeMap = {
      "weapon": "weapon",
      "armor": "armor",
      "helmet": "helmet",
      "gloves": "gloves",
      "boots": "boots",
      "belt": "belt",
      "amulet": "accessory",
      "ring": "accessory",
      "consumable": "consumable",
      "quest": "quest",
      "misc": "misc"
    };
    return typeMap[type] || "misc";
  }
  /**
   * Diablo 희귀도 → InventoryItem 희귀도 매핑
   */
  static mapDiabloRarity(rarity) {
    const rarityMap = {
      "normal": "common",
      "magic": "uncommon",
      "rare": "rare",
      "unique": "epic",
      "set": "legendary",
      "legendary": "legendary"
    };
    return rarityMap[rarity] || "common";
  }
  /**
   * Diablo 타입 → 슬롯 매핑
   */
  static mapDiabloSlot(type) {
    const slotMap = {
      "weapon": "weapon",
      "armor": "armor",
      "helmet": "helmet",
      "gloves": "gloves",
      "boots": "boots",
      "belt": "belt",
      "amulet": "accessory1",
      "ring": "accessory2"
    };
    return slotMap[type];
  }
  /**
   * 타입에 따른 기본 아이콘 반환
   */
  static getIconByType(type) {
    const iconMap = {
      "weapon": "\u2694\uFE0F",
      "armor": "\u{1F9BA}",
      "helmet": "\u26D1\uFE0F",
      "gloves": "\u{1F9E4}",
      "boots": "\u{1F462}",
      "belt": "\u{1F397}\uFE0F",
      "amulet": "\u{1F4FF}",
      "ring": "\u{1F48D}",
      "consumable": "\u{1F9EA}",
      "quest": "\u{1F4DC}",
      "misc": "\u{1F4E6}"
    };
    return iconMap[type] || "\u{1F4E6}";
  }
  /**
   * 희귀도에 따른 가격 계산
   */
  static calculatePrice(rarity) {
    const priceMap = {
      "normal": 50,
      "magic": 150,
      "rare": 500,
      "unique": 2e3,
      "set": 5e3,
      "legendary": 1e4
    };
    return priceMap[rarity] || 50;
  }
  /**
   * 아이템 등급 매핑 (한글 → 영문)
   */
  static mapItemGrade(grade) {
    if (grade === "\uC77C\uBC18")
      return "common";
    if (grade === "\uACE0\uAE09")
      return "uncommon";
    if (grade === "\uD76C\uADC0")
      return "rare";
    if (grade === "\uC804\uC124")
      return "epic";
    if (grade === "\uC2E0\uD654")
      return "legendary";
    return "common";
  }
  /**
   * 아이템 타입 매핑 (한글 → 영문)
   */
  static mapItemType(type) {
    if (type === "\uBB34\uAE30")
      return "weapon";
    if (type === "\uBC29\uC5B4\uAD6C")
      return "armor";
    if (type === "\uC18C\uBE44\uD488")
      return "consumable";
    return "misc";
  }
  /**
   * 아이템 가격 계산 (통합)
   */
  static calculateItemPrice(gradeOrRarity, isBuyPrice = true) {
    const priceMap = {
      // 한글 등급
      "\uC77C\uBC18": 100,
      "\uACE0\uAE09": 500,
      "\uD76C\uADC0": 2e3,
      "\uC804\uC124": 1e4,
      "\uC2E0\uD654": 5e4,
      // 영문 희귀도
      "common": 100,
      "uncommon": 500,
      "rare": 2e3,
      "epic": 1e4,
      "legendary": 5e4,
      "unique": 1e5,
      "mythic": 5e5
    };
    const price = priceMap[gradeOrRarity] || 100;
    return isBuyPrice ? price : Math.floor(price * 0.5);
  }
  /**
   * 아이템 등급에 따른 가격 계산 (간소화)
   */
  static calculateItemPriceByGrade(grade) {
    const priceMap = {
      "\uC77C\uBC18": 50,
      "\uACE0\uAE09": 150,
      "\uD76C\uADC0": 500,
      "\uC804\uC124": 2e3,
      "\uC2E0\uD654": 1e4
    };
    return priceMap[grade] || 50;
  }
};

// src/app/modules/novel/components/novel-generator/helpers/random-item.helper.ts
var RandomItemHelper = class {
  /**
   * 랜덤 아이템 생성
   */
  static createRandomItem(itemGeneratorService, calculateItemPrice) {
    const types = ["weapon", "armor", "helmet", "gloves", "boots", "belt", "amulet", "ring", "consumable", "material"];
    const rarities = ["common", "common", "common", "uncommon", "uncommon", "rare", "rare", "epic", "legendary"];
    const type = types[Math.floor(Math.random() * types.length)];
    const rarity = rarities[Math.floor(Math.random() * rarities.length)];
    const item = {
      id: `item_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
      name: this.generateItemName(type, rarity),
      type,
      rarity,
      quantity: type === "consumable" || type === "material" ? Math.floor(Math.random() * 10) + 1 : 1,
      buyPrice: calculateItemPrice(rarity),
      sellPrice: calculateItemPrice(rarity) / 2,
      stats: this.generateItemStats(type, rarity, itemGeneratorService)
    };
    return item;
  }
  /**
   * 아이템 이름 생성 (디아블로 스타일)
   */
  static generateItemName(type, rarity) {
    const magicPrefixes = [
      "\uBD88\uD0C0\uB294",
      "\uC5BC\uC5B4\uBD99\uC740",
      "\uBC88\uAC1C\uC758",
      "\uB3C5\uC131\uC758",
      "\uC2E0\uC131\uD55C",
      "\uC545\uB9C8\uC758",
      "\uCC9C\uC0C1\uC758",
      "\uC9C0\uC625\uC758",
      "\uACE0\uB300\uC758",
      "\uC804\uC124\uC801\uC778",
      "\uC601\uC6D0\uD55C",
      "\uBB34\uD55C\uC758",
      "\uC6A9\uC758",
      "\uBD88\uC0AC\uC870\uC758",
      "\uD0C0\uC774\uD0C4\uC758",
      "\uC2E0\uC758",
      "\uC554\uD751\uC758",
      "\uBE5B\uB098\uB294"
    ];
    const rarePrefixes = [
      "\uC6A9\uB9F9\uD55C",
      "\uBB34\uC801\uC758",
      "\uD30C\uAD34\uC801\uC778",
      "\uCD95\uBCF5\uBC1B\uC740",
      "\uC800\uC8FC\uBC1B\uC740",
      "\uAC15\uB825\uD55C",
      "\uC704\uB300\uD55C",
      "\uC601\uAD11\uC2A4\uB7EC\uC6B4",
      "\uC794\uD639\uD55C",
      "\uAD11\uD3ED\uD55C"
    ];
    const legendaryPrefixes = [
      "\uBD88\uBA78\uC758",
      "\uCD08\uC6D4\uC801\uC778",
      "\uC808\uB300\uC801\uC778",
      "\uAD81\uADF9\uC758",
      "\uC9C0\uACE0\uC9C0\uC21C\uD55C",
      "\uC644\uBCBD\uD55C",
      "\uBB34\uD55C\uD55C",
      "\uC601\uC6D0\uBD88\uBA78\uC758",
      "\uC2E0\uD654\uC758",
      "\uD0DC\uCD08\uC758"
    ];
    const weaponNames = ["\uAC80", "\uB300\uAC80", "\uB3C4\uB07C", "\uC804\uD22C\uB3C4\uB07C", "\uD65C", "\uC11D\uAD81", "\uCC3D", "\uBBF8\uB298\uCC3D", "\uB2E8\uAC80", "\uC30D\uAC80", "\uB454\uAE30", "\uC804\uC7C1\uB9DD\uCE58", "\uC9C0\uD321\uC774", "\uB9C8\uBC95\uBD09"];
    const armorNames = ["\uAC11\uC637", "\uC0AC\uC2AC \uAC11\uC637", "\uD310\uAE08 \uAC11\uC637", "\uAC00\uC8FD \uAC11\uC637", "\uB85C\uBE0C", "\uC804\uD22C\uBCF5", "\uB4DC\uB798\uACE4 \uC2A4\uCF00\uC77C", "\uBBF8\uC2A4\uB9B4 \uAC11\uC637"];
    const helmetNames = ["\uD22C\uAD6C", "\uC655\uAD00", "\uB450\uAC74", "\uB9C8\uBC95 \uBAA8\uC790", "\uC804\uD22C \uD22C\uAD6C", "\uC6A9 \uD22C\uAD6C", "\uC545\uB9C8\uC758 \uBFD4", "\uCC9C\uC0AC\uC758 \uD6C4\uAD11"];
    const glovesNames = ["\uC7A5\uAC11", "\uAC74\uD2C0\uB9BF", "\uC190\uBAA9 \uBCF4\uD638\uB300", "\uB9C8\uBC95 \uC7A5\uAC11", "\uC6A9 \uBC1C\uD1B1 \uC7A5\uAC11", "\uC554\uC0B4\uC790\uC758 \uC7A5\uAC11"];
    const bootsNames = ["\uC2E0\uBC1C", "\uBD80\uCE20", "\uACBD\uAC11\uD654", "\uB9C8\uBC95 \uC2E0\uBC1C", "\uC9C8\uC8FC\uC758 \uBD80\uCE20", "\uADF8\uB9BC\uC790 \uC2E0\uBC1C", "\uB0A0\uAC1C \uBD80\uCE20"];
    const beltNames = ["\uBCA8\uD2B8", "\uD5C8\uB9AC\uB760", "\uB9C8\uBC95 \uBCA8\uD2B8", "\uC0AC\uC2AC \uBCA8\uD2B8", "\uC6A9\uC758 \uD5C8\uB9AC\uB760", "\uC545\uB9C8\uC758 \uB760"];
    const amuletNames = ["\uBAA9\uAC78\uC774", "\uBD80\uC801", "\uD39C\uB358\uD2B8", "\uC131\uC720\uBB3C", "\uACE0\uB300\uC758 \uBD80\uC801", "\uC6A9\uC758 \uB208", "\uC545\uB9C8\uC758 \uC2EC\uC7A5", "\uCC9C\uC0AC\uC758 \uB208\uBB3C"];
    const ringNames = ["\uBC18\uC9C0", "\uB9C8\uBC95 \uBC18\uC9C0", "\uC778\uC7A5 \uBC18\uC9C0", "\uB8EC \uBC18\uC9C0", "\uC6A9\uC758 \uBC18\uC9C0", "\uBD88\uC0AC\uC758 \uBC18\uC9C0", "\uAD8C\uB2A5\uC758 \uBC18\uC9C0"];
    const consumableNames = ["\uCCB4\uB825 \uBB3C\uC57D", "\uB9C8\uB098 \uBB3C\uC57D", "\uBD80\uD65C \uBB3C\uC57D", "\uD574\uB3C5\uC81C", "\uAC15\uD654 \uBB3C\uC57D"];
    const materialNames = ["\uCCA0\uAD11\uC11D", "\uAC00\uC8FD", "\uCC9C", "\uB9C8\uBC95 \uAC00\uB8E8", "\uB8EC\uC11D", "\uBCF4\uC11D"];
    let baseName = "";
    switch (type) {
      case "weapon":
        baseName = weaponNames[Math.floor(Math.random() * weaponNames.length)];
        break;
      case "armor":
        baseName = armorNames[Math.floor(Math.random() * armorNames.length)];
        break;
      case "helmet":
        baseName = helmetNames[Math.floor(Math.random() * helmetNames.length)];
        break;
      case "gloves":
        baseName = glovesNames[Math.floor(Math.random() * glovesNames.length)];
        break;
      case "boots":
        baseName = bootsNames[Math.floor(Math.random() * bootsNames.length)];
        break;
      case "belt":
        baseName = beltNames[Math.floor(Math.random() * beltNames.length)];
        break;
      case "amulet":
        baseName = amuletNames[Math.floor(Math.random() * amuletNames.length)];
        break;
      case "ring":
        baseName = ringNames[Math.floor(Math.random() * ringNames.length)];
        break;
      case "consumable":
        baseName = consumableNames[Math.floor(Math.random() * consumableNames.length)];
        break;
      case "material":
        baseName = materialNames[Math.floor(Math.random() * materialNames.length)];
        break;
    }
    if (type === "consumable" || type === "material") {
      return baseName;
    }
    let prefix = "";
    if (rarity === "legendary") {
      prefix = legendaryPrefixes[Math.floor(Math.random() * legendaryPrefixes.length)] + " ";
    } else if (rarity === "epic" || rarity === "rare") {
      prefix = rarePrefixes[Math.floor(Math.random() * rarePrefixes.length)] + " ";
    } else if (rarity === "uncommon") {
      prefix = magicPrefixes[Math.floor(Math.random() * magicPrefixes.length)] + " ";
    }
    return prefix + baseName;
  }
  /**
   * 아이템 스탯 생성 (디아블로 스타일)
   */
  static generateItemStats(type, rarity, itemGeneratorService) {
    return itemGeneratorService.generateItemStats(type, rarity);
  }
};

// src/app/modules/novel/components/novel-generator/helpers/dungeon-flow.helper.ts
var DungeonFlowHelper = class {
  /**
   * 던전 층 진입
   */
  static enterFloor(floorNumber, currentDungeon, debugLogger, addStoryBlock, enterRoom) {
    if (!currentDungeon) {
      return;
    }
    const floor = currentDungeon.floors[floorNumber - 1];
    if (!floor) {
      return;
    }
    currentDungeon.currentFloor = floorNumber;
    const entranceRoom = floor.rooms.find((r) => r.id === floor.entranceRoomId);
    if (!entranceRoom) {
      return;
    }
    enterRoom(entranceRoom);
    addStoryBlock([
      "",
      `\u2500\u2500\u2500 ${floorNumber}\uCE35 \u2500\u2500\u2500`,
      entranceRoom?.description || "\uC0C8\uB85C\uC6B4 \uCE35\uC5D0 \uB3C4\uCC29\uD588\uC2B5\uB2C8\uB2E4.",
      ""
    ]);
    debugLogger.info("\uB358\uC804", `\u{1F6AA} ${floorNumber}\uCE35 \uC9C4\uC785`);
  }
  /**
   * 던전 방 진입
   */
  static enterRoom(room, currentDungeon, currentDungeonRoom, addStoryBlock, getRoomTypeKorean) {
    if (!currentDungeon) {
      return room;
    }
    if (currentDungeonRoom) {
      currentDungeonRoom.isCurrentRoom = false;
    }
    const newCurrentRoom = __spreadValues({}, room);
    room.isCurrentRoom = true;
    room.isExplored = true;
    currentDungeon.stats.roomsExplored++;
    addStoryBlock([
      "",
      `\u{1F4CD} ${getRoomTypeKorean(room.type)}`,
      room.description,
      ""
    ]);
    if (room.monsters && room.monsters.length > 0) {
      const aliveMonsters = room.monsters.filter((m) => !m.isDead);
      if (aliveMonsters.length > 0) {
        addStoryBlock([
          `\u2694\uFE0F \uC801 \uBC1C\uACAC!`,
          ...aliveMonsters.map((m) => `  \u2022 ${m.name} (HP: ${m.currentHp}/${m.maxHp})`),
          ""
        ]);
      }
    }
    return newCurrentRoom;
  }
  /**
   * 던전 전투 승리 처리
   */
  static winDungeonCombat(room, monster, currentDungeon, playerCharacter, gainExp, addStoryBlock, saveGame, completeDungeon, debugLogger) {
    return __async(this, null, function* () {
      if (!currentDungeon)
        return;
      monster.isDead = true;
      const goldReward = Math.floor(Math.random() * (monster.dropTable.goldMax - monster.dropTable.goldMin + 1)) + monster.dropTable.goldMin;
      const expReward = Math.floor(monster.maxHp * 0.8);
      playerCharacter.gold += goldReward;
      gainExp(expReward);
      currentDungeon.accumulatedRewards.gold += goldReward;
      currentDungeon.accumulatedRewards.experience += expReward;
      currentDungeon.stats.monstersKilled++;
      if (monster.type === "elite") {
        currentDungeon.stats.elitesKilled++;
      } else if (monster.type === "boss") {
        currentDungeon.stats.bossKilled = true;
        currentDungeon.stats.elitesKilled++;
      }
      addStoryBlock([
        `\u2705 ${monster.name}\uC744(\uB97C) \uBB3C\uB9AC\uCCE4\uB2E4!`,
        `\u{1F4B0} \uACE8\uB4DC +${goldReward}`,
        `\u{1F4AB} \uACBD\uD5D8\uCE58 +${expReward}`,
        ""
      ]);
      debugLogger.info("\uB358\uC804", `\u{1F4BE} \uBAAC\uC2A4\uD130 \uCC98\uCE58 \uD6C4 \uC790\uB3D9 \uC800\uC7A5 (\uACBD\uD5D8\uCE58: ${playerCharacter.exp}/${playerCharacter.maxExp})`);
      yield saveGame(`auto_dungeon_${currentDungeon.dungeonTypeId}`);
      if (room.monsters.every((m) => m.isDead)) {
        room.isCleared = true;
        addStoryBlock([
          "\u2705 \uBC29\uC744 \uD074\uB9AC\uC5B4\uD588\uC2B5\uB2C8\uB2E4!",
          "\uB2E4\uC74C \uBC29\uC73C\uB85C \uC774\uB3D9\uD558\uC138\uC694.",
          ""
        ]);
        debugLogger.info("\uB358\uC804", `\u{1F4BE} \uBC29 \uD074\uB9AC\uC5B4 \uD6C4 \uC790\uB3D9 \uC800\uC7A5`);
        yield saveGame(`auto_dungeon_room_clear`);
        if (monster.type === "boss") {
          yield completeDungeon();
        }
      }
      debugLogger.success("\uB358\uC804", `\u2705 \uC804\uD22C \uC2B9\uB9AC: ${monster.name}`);
    });
  }
  /**
   * 던전 완료 처리
   */
  static completeDungeon(currentDungeon, dungeonProgress, dungeonTypes, addStoryBlock, setChoices, saveGame, debugLogger, updateUIState) {
    return __async(this, null, function* () {
      if (!currentDungeon)
        return;
      currentDungeon.status = "completed";
      dungeonProgress.inDungeon = false;
      const dungeonType = dungeonTypes.find((dt) => dt.id === currentDungeon.dungeonTypeId);
      if (!dungeonProgress.clearedDungeons[dungeonType.id]) {
        dungeonProgress.clearedDungeons[dungeonType.id] = {
          count: 0,
          bestTime: Infinity,
          highestDifficulty: "easy",
          lastClearDate: /* @__PURE__ */ new Date()
        };
      }
      const record = dungeonProgress.clearedDungeons[dungeonType.id];
      record.count++;
      record.bestTime = Math.min(record.bestTime, currentDungeon.elapsedTime);
      record.lastClearDate = /* @__PURE__ */ new Date();
      dungeonProgress.totalStats.dungeonsCleared++;
      dungeonProgress.totalStats.monstersKilled += currentDungeon.stats.monstersKilled;
      dungeonProgress.totalStats.elitesKilled += currentDungeon.stats.elitesKilled;
      dungeonProgress.totalStats.bossesKilled += currentDungeon.stats.bossKilled ? 1 : 0;
      dungeonProgress.totalStats.totalGoldEarned += currentDungeon.accumulatedRewards.gold;
      dungeonProgress.totalStats.totalExpEarned += currentDungeon.accumulatedRewards.experience;
      addStoryBlock([
        "",
        "\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557",
        "\u2551      \u{1F3C6} \uB358\uC804 \uD074\uB9AC\uC5B4! \u{1F3C6}          \u2551",
        `\u2551   ${dungeonType.koreanName} \uC815\uBCF5 \uC644\uB8CC   \u2551`,
        "\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D",
        "",
        "\u{1F4CA} \uD1B5\uACC4:",
        `  \u2022 \uCC98\uCE58\uD55C \uBAAC\uC2A4\uD130: ${currentDungeon.stats.monstersKilled}\uB9C8\uB9AC`,
        `  \u2022 \uCC98\uCE58\uD55C \uC5D8\uB9AC\uD2B8: ${currentDungeon.stats.elitesKilled}\uB9C8\uB9AC`,
        `  \u2022 \uD0D0\uD5D8\uD55C \uBC29: ${currentDungeon.stats.roomsExplored}\uAC1C`,
        "",
        "\u{1F4B0} \uD68D\uB4DD \uBCF4\uC0C1:",
        `  \u2022 \uACE8\uB4DC: ${currentDungeon.accumulatedRewards.gold}G`,
        `  \u2022 \uACBD\uD5D8\uCE58: ${currentDungeon.accumulatedRewards.experience} EXP`,
        "",
        "\uB2F9\uC2E0\uC740 \uB358\uC804\uC744 \uBB34\uC0AC\uD788 \uBE60\uC838\uB098\uC654\uC2B5\uB2C8\uB2E4."
      ]);
      setChoices([
        "\u{1F3E0} \uB9C8\uC744\uB85C \uB3CC\uC544\uAC04\uB2E4",
        "\u{1F504} \uB358\uC804\uC744 \uB2E4\uC2DC \uD0D0\uD5D8\uD55C\uB2E4",
        "\u{1F5FA}\uFE0F \uB2E4\uB978 \uB358\uC804\uC744 \uCC3E\uC544\uBCF8\uB2E4"
      ]);
      updateUIState();
      debugLogger.success("\uB358\uC804", `\u{1F3C6} \uB358\uC804 \uD074\uB9AC\uC5B4: ${dungeonType.koreanName} - \uC790\uB3D9 \uC800\uC7A5 \uC911...`);
      yield saveGame(`dungeon_clear_${dungeonType.id}`);
    });
  }
  /**
   * 다음 방으로 이동
   */
  static moveToNextRoom(currentDungeon, currentDungeonRoom, enterRoom) {
    if (!currentDungeon || !currentDungeonRoom)
      return;
    const connectedRoomIds = currentDungeonRoom.connectedRoomIds;
    if (connectedRoomIds.length === 0)
      return;
    const currentFloor = currentDungeon.floors[currentDungeon.currentFloor - 1];
    const nextRoom = currentFloor.rooms.find((r) => connectedRoomIds.includes(r.id) && !r.isExplored) || currentFloor.rooms.find((r) => connectedRoomIds.includes(r.id));
    if (nextRoom) {
      enterRoom(nextRoom);
    }
  }
  /**
   * 방 타입 한글 변환
   */
  static getRoomTypeKorean(type) {
    const typeMap = {
      "entrance": "\uC785\uAD6C",
      "normal": "\uC77C\uBC18 \uBC29",
      "combat": "\uC804\uD22C \uBC29",
      "elite": "\uC5D8\uB9AC\uD2B8 \uBC29",
      "boss": "\uBCF4\uC2A4 \uBC29",
      "treasure": "\uBCF4\uBB3C \uBC29",
      "shop": "\uC0C1\uC810",
      "rest": "\uD734\uC2DD \uBC29",
      "event": "\uC774\uBCA4\uD2B8 \uBC29",
      "exit": "\uCD9C\uAD6C"
    };
    return typeMap[type] || "\uC54C \uC218 \uC5C6\uB294 \uBC29";
  }
};

// src/app/modules/novel/constants/equipment-slots.constant.ts
var EQUIPMENT_SLOT_COMPATIBILITY = {
  "weapon": ["weapon", "sword", "bow", "staff", "dagger", "axe", "mace", "spear"],
  "armor": ["armor", "chest", "bodyarmor"],
  "helmet": ["helmet", "helm", "hat"],
  "gloves": ["gloves", "gauntlets"],
  "boots": ["boots", "shoes"],
  "amulet": ["amulet", "necklace"],
  "belt": ["belt"],
  "ring1": ["ring"],
  "ring2": ["ring"]
};
var VALID_EQUIPMENT_SLOTS = ["weapon", "armor", "helmet", "gloves", "boots", "amulet", "belt", "ring1", "ring2"];

// src/app/modules/novel/services/state/novel.state.service.ts
var NovelStateService = class _NovelStateService {
  // ===== UI 상태 =====
  _showInventoryPanel = signal(false, ...ngDevMode ? [{ debugName: "_showInventoryPanel" }] : []);
  _showShopPanel = signal(false, ...ngDevMode ? [{ debugName: "_showShopPanel" }] : []);
  _showCharacterCreatorPanel = signal(false, ...ngDevMode ? [{ debugName: "_showCharacterCreatorPanel" }] : []);
  _showScenarioCreatorPanel = signal(false, ...ngDevMode ? [{ debugName: "_showScenarioCreatorPanel" }] : []);
  _showItemCreatorPanel = signal(false, ...ngDevMode ? [{ debugName: "_showItemCreatorPanel" }] : []);
  _showStoryCreatorPanel = signal(false, ...ngDevMode ? [{ debugName: "_showStoryCreatorPanel" }] : []);
  _showWuxiaPanel = signal(false, ...ngDevMode ? [{ debugName: "_showWuxiaPanel" }] : []);
  _showFlowPanel = signal(false, ...ngDevMode ? [{ debugName: "_showFlowPanel" }] : []);
  showInventoryPanel = this._showInventoryPanel.asReadonly();
  showShopPanel = this._showShopPanel.asReadonly();
  showCharacterCreatorPanel = this._showCharacterCreatorPanel.asReadonly();
  showScenarioCreatorPanel = this._showScenarioCreatorPanel.asReadonly();
  showItemCreatorPanel = this._showItemCreatorPanel.asReadonly();
  showStoryCreatorPanel = this._showStoryCreatorPanel.asReadonly();
  showWuxiaPanel = this._showWuxiaPanel.asReadonly();
  showFlowPanel = this._showFlowPanel.asReadonly();
  // ===== Active Tab 상태 =====
  _inventoryActiveTab = signal("equipment", ...ngDevMode ? [{ debugName: "_inventoryActiveTab" }] : []);
  _wuxiaActiveTab = signal("cultivation", ...ngDevMode ? [{ debugName: "_wuxiaActiveTab" }] : []);
  _flowPanelTab = signal("map", ...ngDevMode ? [{ debugName: "_flowPanelTab" }] : []);
  inventoryActiveTab = this._inventoryActiveTab.asReadonly();
  wuxiaActiveTab = this._wuxiaActiveTab.asReadonly();
  flowPanelTab = this._flowPanelTab.asReadonly();
  // ===== 게임 상태 =====
  _gameStarted = signal(false, ...ngDevMode ? [{ debugName: "_gameStarted" }] : []);
  _novelSelected = signal(false, ...ngDevMode ? [{ debugName: "_novelSelected" }] : []);
  _currentChapter = signal(1, ...ngDevMode ? [{ debugName: "_currentChapter" }] : []);
  gameStarted = this._gameStarted.asReadonly();
  novelSelected = this._novelSelected.asReadonly();
  currentChapter = this._currentChapter.asReadonly();
  // ===== Computed Signals (Derived State) =====
  hasActivePanel = computed(() => this.showInventoryPanel() || this.showShopPanel() || this.showCharacterCreatorPanel() || this.showScenarioCreatorPanel() || this.showItemCreatorPanel() || this.showStoryCreatorPanel() || this.showWuxiaPanel() || this.showFlowPanel(), ...ngDevMode ? [{ debugName: "hasActivePanel" }] : []);
  isInCreationMode = computed(() => this.showCharacterCreatorPanel() || this.showScenarioCreatorPanel() || this.showItemCreatorPanel() || this.showStoryCreatorPanel(), ...ngDevMode ? [{ debugName: "isInCreationMode" }] : []);
  // ===== UI Panel 토글 메서드 =====
  toggleInventoryPanel() {
    this._showInventoryPanel.update((v) => !v);
  }
  toggleShopPanel() {
    this._showShopPanel.update((v) => !v);
  }
  toggleCharacterCreatorPanel() {
    this._showCharacterCreatorPanel.update((v) => !v);
  }
  toggleScenarioCreatorPanel() {
    this._showScenarioCreatorPanel.update((v) => !v);
  }
  toggleItemCreatorPanel() {
    this._showItemCreatorPanel.update((v) => !v);
  }
  toggleStoryCreatorPanel() {
    this._showStoryCreatorPanel.update((v) => !v);
  }
  toggleWuxiaPanel() {
    this._showWuxiaPanel.update((v) => !v);
  }
  toggleFlowPanel() {
    this._showFlowPanel.update((v) => !v);
  }
  // ===== Panel 열기/닫기 메서드 =====
  openInventoryPanel() {
    this._showInventoryPanel.set(true);
  }
  closeInventoryPanel() {
    this._showInventoryPanel.set(false);
  }
  openShopPanel() {
    this._showShopPanel.set(true);
  }
  closeShopPanel() {
    this._showShopPanel.set(false);
  }
  openCharacterCreator() {
    this._showCharacterCreatorPanel.set(true);
  }
  closeCharacterCreator() {
    this._showCharacterCreatorPanel.set(false);
  }
  openScenarioCreator() {
    this._showScenarioCreatorPanel.set(true);
  }
  closeScenarioCreator() {
    this._showScenarioCreatorPanel.set(false);
  }
  openItemCreator() {
    this._showItemCreatorPanel.set(true);
  }
  closeItemCreator() {
    this._showItemCreatorPanel.set(false);
  }
  openStoryCreator() {
    this._showStoryCreatorPanel.set(true);
  }
  closeStoryCreator() {
    this._showStoryCreatorPanel.set(false);
  }
  openWuxiaPanel() {
    this._showWuxiaPanel.set(true);
  }
  closeWuxiaPanel() {
    this._showWuxiaPanel.set(false);
  }
  closeAllPanels() {
    this._showInventoryPanel.set(false);
    this._showShopPanel.set(false);
    this._showCharacterCreatorPanel.set(false);
    this._showScenarioCreatorPanel.set(false);
    this._showItemCreatorPanel.set(false);
    this._showStoryCreatorPanel.set(false);
    this._showWuxiaPanel.set(false);
    this._showFlowPanel.set(false);
  }
  // ===== Tab 변경 메서드 =====
  setInventoryTab(tab) {
    this._inventoryActiveTab.set(tab);
  }
  setWuxiaTab(tab) {
    this._wuxiaActiveTab.set(tab);
  }
  setFlowPanelTab(tab) {
    this._flowPanelTab.set(tab);
  }
  // ===== 게임 상태 변경 메서드 =====
  startGame() {
    this._gameStarted.set(true);
  }
  resetGame() {
    this._gameStarted.set(false);
    this._novelSelected.set(false);
    this._currentChapter.set(1);
    this.closeAllPanels();
  }
  selectNovel() {
    this._novelSelected.set(true);
  }
  nextChapter() {
    this._currentChapter.update((c) => c + 1);
  }
  setChapter(chapter) {
    this._currentChapter.set(chapter);
  }
  static \u0275fac = function NovelStateService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelStateService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _NovelStateService, factory: _NovelStateService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelStateService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();

// src/app/modules/novel/services/state/player-state.service.ts
var PlayerStateService = class _PlayerStateService {
  // Core player character
  _character = signal({
    name: "",
    level: 1,
    exp: 0,
    maxExp: 100,
    hp: 100,
    maxHp: 100,
    mp: 100,
    maxMp: 100,
    attack: 10,
    defense: 5,
    agility: 10,
    strength: 10,
    intelligence: 10,
    gold: 100,
    gem: 0,
    crystal: 0,
    ticket: 0,
    skillPoints: 0,
    skills: [],
    equipment: void 0,
    inventory: []
  }, ...ngDevMode ? [{ debugName: "_character" }] : []);
  // Read-only signal
  character = this._character.asReadonly();
  // Computed signals for easy access
  name = computed(() => this._character().name, ...ngDevMode ? [{ debugName: "name" }] : []);
  level = computed(() => this._character().level, ...ngDevMode ? [{ debugName: "level" }] : []);
  exp = computed(() => this._character().exp, ...ngDevMode ? [{ debugName: "exp" }] : []);
  maxExp = computed(() => this._character().maxExp, ...ngDevMode ? [{ debugName: "maxExp" }] : []);
  hp = computed(() => this._character().hp, ...ngDevMode ? [{ debugName: "hp" }] : []);
  maxHp = computed(() => this._character().maxHp, ...ngDevMode ? [{ debugName: "maxHp" }] : []);
  mp = computed(() => this._character().mp, ...ngDevMode ? [{ debugName: "mp" }] : []);
  maxMp = computed(() => this._character().maxMp, ...ngDevMode ? [{ debugName: "maxMp" }] : []);
  attack = computed(() => this._character().attack, ...ngDevMode ? [{ debugName: "attack" }] : []);
  defense = computed(() => this._character().defense, ...ngDevMode ? [{ debugName: "defense" }] : []);
  agility = computed(() => this._character().agility, ...ngDevMode ? [{ debugName: "agility" }] : []);
  strength = computed(() => this._character().strength, ...ngDevMode ? [{ debugName: "strength" }] : []);
  intelligence = computed(() => this._character().intelligence, ...ngDevMode ? [{ debugName: "intelligence" }] : []);
  gold = computed(() => this._character().gold, ...ngDevMode ? [{ debugName: "gold" }] : []);
  gem = computed(() => this._character().gem, ...ngDevMode ? [{ debugName: "gem" }] : []);
  crystal = computed(() => this._character().crystal, ...ngDevMode ? [{ debugName: "crystal" }] : []);
  ticket = computed(() => this._character().ticket, ...ngDevMode ? [{ debugName: "ticket" }] : []);
  skillPoints = computed(() => this._character().skillPoints, ...ngDevMode ? [{ debugName: "skillPoints" }] : []);
  skills = computed(() => this._character().skills, ...ngDevMode ? [{ debugName: "skills" }] : []);
  equipment = computed(() => this._character().equipment, ...ngDevMode ? [{ debugName: "equipment" }] : []);
  inventory = computed(() => this._character().inventory || [], ...ngDevMode ? [{ debugName: "inventory" }] : []);
  // Computed percentage values
  expPercent = computed(() => {
    const char = this._character();
    return char.maxExp > 0 ? char.exp / char.maxExp * 100 : 0;
  }, ...ngDevMode ? [{ debugName: "expPercent" }] : []);
  hpPercent = computed(() => {
    const char = this._character();
    return char.maxHp > 0 ? char.hp / char.maxHp * 100 : 0;
  }, ...ngDevMode ? [{ debugName: "hpPercent" }] : []);
  mpPercent = computed(() => {
    const char = this._character();
    return char.maxMp > 0 ? char.mp / char.maxMp * 100 : 0;
  }, ...ngDevMode ? [{ debugName: "mpPercent" }] : []);
  // Initialize new player
  initializeNewPlayer(name = "") {
    this._character.set({
      name,
      level: 1,
      exp: 0,
      maxExp: 100,
      hp: 100,
      maxHp: 100,
      mp: 100,
      maxMp: 100,
      attack: 10,
      defense: 5,
      agility: 10,
      strength: 10,
      intelligence: 10,
      gold: 100,
      gem: 0,
      crystal: 0,
      ticket: 0,
      skillPoints: 0,
      skills: [],
      equipment: void 0,
      inventory: []
    });
  }
  // Load player character
  loadPlayer(character) {
    this._character.set(character);
  }
  // Update character properties
  updateCharacter(updates) {
    this._character.update((char) => __spreadValues(__spreadValues({}, char), updates));
  }
  // Currency management
  addGold(amount) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), { gold: char.gold + amount }));
  }
  spendGold(amount) {
    const char = this._character();
    if (char.gold >= amount) {
      this._character.update((c) => __spreadProps(__spreadValues({}, c), { gold: c.gold - amount }));
      return true;
    }
    return false;
  }
  addGem(amount) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), { gem: char.gem + amount }));
  }
  spendGem(amount) {
    const char = this._character();
    if (char.gem >= amount) {
      this._character.update((c) => __spreadProps(__spreadValues({}, c), { gem: c.gem - amount }));
      return true;
    }
    return false;
  }
  addCrystal(amount) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), { crystal: char.crystal + amount }));
  }
  spendCrystal(amount) {
    const char = this._character();
    if (char.crystal >= amount) {
      this._character.update((c) => __spreadProps(__spreadValues({}, c), { crystal: c.crystal - amount }));
      return true;
    }
    return false;
  }
  addTicket(amount) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), { ticket: char.ticket + amount }));
  }
  spendTicket(amount) {
    const char = this._character();
    if (char.ticket >= amount) {
      this._character.update((c) => __spreadProps(__spreadValues({}, c), { ticket: c.ticket - amount }));
      return true;
    }
    return false;
  }
  // Experience and leveling
  gainExp(amount) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), { exp: char.exp + amount }));
    return this.checkLevelUp();
  }
  checkLevelUp() {
    const char = this._character();
    if (char.exp >= char.maxExp) {
      this.levelUp();
      return true;
    }
    return false;
  }
  levelUp() {
    this._character.update((char) => {
      const newLevel = char.level + 1;
      const newMaxExp = newLevel * 100;
      const newMaxHp = char.maxHp + 20;
      const newMaxMp = char.maxMp + 10;
      return __spreadProps(__spreadValues({}, char), {
        level: newLevel,
        exp: 0,
        maxExp: newMaxExp,
        hp: newMaxHp,
        maxHp: newMaxHp,
        mp: newMaxMp,
        maxMp: newMaxMp,
        attack: char.attack + 3,
        defense: char.defense + 2,
        strength: char.strength + 2,
        intelligence: char.intelligence + 2,
        agility: char.agility + 1,
        skillPoints: char.skillPoints + 1
      });
    });
  }
  // Health management
  takeDamage(amount) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), {
      hp: Math.max(0, char.hp - amount)
    }));
  }
  heal(amount) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), {
      hp: Math.min(char.maxHp, char.hp + amount)
    }));
  }
  fullHeal() {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), {
      hp: char.maxHp,
      mp: char.maxMp
    }));
  }
  // MP management
  spendMp(amount) {
    const char = this._character();
    if (char.mp >= amount) {
      this._character.update((c) => __spreadProps(__spreadValues({}, c), { mp: c.mp - amount }));
      return true;
    }
    return false;
  }
  restoreMp(amount) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), {
      mp: Math.min(char.maxMp, char.mp + amount)
    }));
  }
  // Character info
  setName(name) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), { name }));
  }
  // Stats modification
  modifyStats(statChanges) {
    this._character.update((char) => __spreadValues(__spreadValues({}, char), statChanges));
  }
  // Skill management
  addSkill(skill) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), {
      skills: [...char.skills, skill]
    }));
  }
  removeSkill(skillId) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), {
      skills: char.skills.filter((s) => s.id !== skillId)
    }));
  }
  upgradeSkill(skillId) {
    const char = this._character();
    const skill = char.skills.find((s) => s.id === skillId);
    if (skill && skill.level < skill.maxLevel && char.skillPoints > 0) {
      this._character.update((c) => __spreadProps(__spreadValues({}, c), {
        skills: c.skills.map((s) => s.id === skillId ? __spreadProps(__spreadValues({}, s), { level: s.level + 1 }) : s),
        skillPoints: c.skillPoints - 1
      }));
      return true;
    }
    return false;
  }
  // Equipment management
  setEquipment(equipment) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), { equipment }));
  }
  // Inventory management
  addToInventory(item) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), {
      inventory: [...char.inventory || [], item]
    }));
  }
  removeFromInventory(itemId) {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), {
      inventory: (char.inventory || []).filter((item) => item.id !== itemId)
    }));
  }
  clearInventory() {
    this._character.update((char) => __spreadProps(__spreadValues({}, char), { inventory: [] }));
  }
  // Utility methods
  isAlive() {
    return this._character().hp > 0;
  }
  getCurrentHp() {
    return this._character().hp;
  }
  getMaxHp() {
    return this._character().maxHp;
  }
  getCharacter() {
    return this._character();
  }
  resetPlayer() {
    this.initializeNewPlayer();
  }
  static \u0275fac = function PlayerStateService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PlayerStateService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _PlayerStateService, factory: _PlayerStateService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PlayerStateService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();

// src/app/modules/novel/services/state/item.state.service.ts
var ItemStateService = class _ItemStateService {
  // ===== 아이템 필터/정렬 (from InventoryFilterHelper) =====
  /**
   * 인벤토리 필터링 및 정렬
   */
  getFilteredAndSortedInventory(inventory, filter, sortBy) {
    let items = [...inventory];
    if (filter !== "all") {
      items = items.filter((item) => {
        switch (filter) {
          case "weapon":
            return item.type === "weapon";
          case "armor":
            return ["armor", "helmet", "gloves", "boots", "belt"].includes(item.type);
          case "accessory":
            return ["amulet", "ring", "accessory"].includes(item.type);
          case "consumable":
            return item.type === "consumable";
          case "material":
            return item.type === "material";
          default:
            return true;
        }
      });
    }
    items.sort((a, b) => {
      switch (sortBy) {
        case "rarity":
          return this.getRarityWeight(b.rarity) - this.getRarityWeight(a.rarity);
        case "type":
          return a.type.localeCompare(b.type);
        case "name":
          return (a.nameKo || a.name).localeCompare(b.nameKo || b.name);
        case "recent":
          const aTime = a.obtainedTimestamp || 0;
          const bTime = b.obtainedTimestamp || 0;
          return bTime - aTime;
        default:
          return 0;
      }
    });
    return items;
  }
  getRarityWeight(rarity) {
    const weights = {
      "common": 1,
      "uncommon": 2,
      "rare": 3,
      "epic": 4,
      "legendary": 5,
      "unique": 6,
      "mythic": 7
    };
    return weights[rarity] || 0;
  }
  // ===== 아이템 표시 정보 (from ItemDisplayHelper) =====
  /**
   * 희귀도 텍스트 반환
   */
  getRarityText(rarity) {
    const rarityMap = {
      "common": "\u26AA \uC77C\uBC18",
      "uncommon": "\u{1F7E2} \uACE0\uAE09",
      "rare": "\u{1F535} \uD76C\uADC0",
      "epic": "\u{1F7E3} \uC601\uC6C5",
      "legendary": "\u{1F7E0} \uC804\uC124",
      "unique": "\u{1F7E1} \uC720\uB2C8\uD06C",
      "mythic": "\u{1F534} \uC2E0\uD654"
    };
    return rarityMap[rarity] || rarity;
  }
  /**
   * 아이템 타입 텍스트 반환
   */
  getItemTypeText(type) {
    const typeMap = {
      "weapon": "\u2694\uFE0F \uBB34\uAE30",
      "armor": "\u{1F6E1}\uFE0F \uBC29\uC5B4\uAD6C",
      "helmet": "\u26D1\uFE0F \uD22C\uAD6C",
      "gloves": "\u{1F9E4} \uC7A5\uAC11",
      "boots": "\u{1F462} \uC2E0\uBC1C",
      "belt": "\u{1F4FF} \uBCA8\uD2B8",
      "amulet": "\u{1F4FF} \uBAA9\uAC78\uC774",
      "ring": "\u{1F48D} \uBC18\uC9C0",
      "accessory": "\u{1F48E} \uC7A5\uC2E0\uAD6C",
      "consumable": "\u{1F9EA} \uC18C\uBE44\uD488",
      "material": "\u{1F4E6} \uC7AC\uB8CC"
    };
    return typeMap[type] || type;
  }
  /**
   * 장비 슬롯 이름 반환
   */
  getEquipmentSlotName(type) {
    const slotMap = {
      "weapon": "\uBB34\uAE30 \uC2AC\uB86F",
      "armor": "\uAC11\uC637 \uC2AC\uB86F",
      "helmet": "\uD22C\uAD6C \uC2AC\uB86F",
      "gloves": "\uC7A5\uAC11 \uC2AC\uB86F",
      "boots": "\uC2E0\uBC1C \uC2AC\uB86F",
      "belt": "\uBCA8\uD2B8 \uC2AC\uB86F",
      "amulet": "\uBAA9\uAC78\uC774 \uC2AC\uB86F",
      "ring": "\uBC18\uC9C0 \uC2AC\uB86F (1/2)"
    };
    return slotMap[type] || null;
  }
  /**
   * 아이템 상세 정보 텍스트 생성 (UI용)
   */
  getItemDetailsText(item) {
    let details = `\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`;
    details += `\u{1F4DC} ${item.name}
`;
    details += `\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

`;
    details += `\u{1F3F7}\uFE0F \uD76C\uADC0\uB3C4: ${this.getRarityText(item.rarity)}
`;
    details += `\u{1F4E6} \uD0C0\uC785: ${this.getItemTypeText(item.type)}
`;
    const slotInfo = this.getEquipmentSlotName(item.type);
    if (slotInfo) {
      details += `\u{1F3AF} \uC7A5\uCC29 \uC2AC\uB86F: ${slotInfo}
`;
    }
    if (item.stats) {
      details += `
\u2501\u2501\u2501 \u26A1 \uB2A5\uB825\uCE58 \u2501\u2501\u2501
`;
      if (item.stats.minDamage && item.stats.maxDamage) {
        details += `\u2694\uFE0F \uB370\uBBF8\uC9C0: ${item.stats.minDamage}-${item.stats.maxDamage}
`;
      } else if (item.stats.attack) {
        details += `\u2694\uFE0F \uACF5\uACA9\uB825: +${item.stats.attack}
`;
      }
      if (item.stats.attackSpeed) {
        details += `\u26A1 \uACF5\uACA9 \uC18D\uB3C4: +${item.stats.attackSpeed}%
`;
      }
      if (item.stats.armor) {
        details += `\u{1F6E1}\uFE0F \uBC29\uC5B4\uB3C4: +${item.stats.armor}
`;
      }
      if (item.stats.defense) {
        details += `\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825: +${item.stats.defense}
`;
      }
      if (item.stats.blockChance) {
        details += `\u{1F6E1}\uFE0F \uBC29\uC5B4 \uD655\uB960: +${item.stats.blockChance}%
`;
      }
      if (item.stats.evasion) {
        details += `\u{1F4A8} \uD68C\uD53C\uC728: +${item.stats.evasion}%
`;
      }
      if (item.stats.hp) {
        details += `\u2764\uFE0F \uC0DD\uBA85\uB825: +${item.stats.hp}
`;
      }
      if (item.stats.mp) {
        details += `\u{1F499} \uB9C8\uB098: +${item.stats.mp}
`;
      }
      if (item.stats.critChance) {
        details += `\u{1F4A5} \uD06C\uB9AC\uD2F0\uCEEC \uD655\uB960: +${item.stats.critChance}%
`;
      }
      if (item.stats.critDamage) {
        details += `\u{1F4A2} \uD06C\uB9AC\uD2F0\uCEEC \uB370\uBBF8\uC9C0: +${item.stats.critDamage}%
`;
      }
      if (item.stats.lifeSteal) {
        details += `\u{1FA78} \uC0DD\uBA85\uB825 \uD761\uC218: ${item.stats.lifeSteal}%
`;
      }
      if (item.stats.lifeRegen) {
        details += `\u2764\uFE0F\u200D\u{1FA79} \uC0DD\uBA85\uB825 \uC7AC\uC0DD: +${item.stats.lifeRegen}/\uCD08
`;
      }
      if (item.stats.manaRegen) {
        details += `\u{1F499} \uB9C8\uB098 \uC7AC\uC0DD: +${item.stats.manaRegen}/\uCD08
`;
      }
      if (item.stats.fireResist) {
        details += `\u{1F525} \uD654\uC5FC \uC800\uD56D: +${item.stats.fireResist}%
`;
      }
      if (item.stats.coldResist) {
        details += `\u2744\uFE0F \uB0C9\uAE30 \uC800\uD56D: +${item.stats.coldResist}%
`;
      }
      if (item.stats.lightningResist) {
        details += `\u26A1 \uBC88\uAC1C \uC800\uD56D: +${item.stats.lightningResist}%
`;
      }
      if (item.stats.poisonResist) {
        details += `\u2620\uFE0F \uB3C5 \uC800\uD56D: +${item.stats.poisonResist}%
`;
      }
      if (item.stats.magicFind) {
        details += `\u{1F340} \uB9C8\uBC95 \uC544\uC774\uD15C \uBC1C\uACAC: +${item.stats.magicFind}%
`;
      }
      if (item.stats.goldFind) {
        details += `\u{1F4B0} \uACE8\uB4DC \uD68D\uB4DD: +${item.stats.goldFind}%
`;
      }
      if (item.stats.expBonus) {
        details += `\u2B50 \uACBD\uD5D8\uCE58 \uBCF4\uB108\uC2A4: +${item.stats.expBonus}%
`;
      }
    }
    if (item.description) {
      details += `
\u2501\u2501\u2501 \u{1F4D6} \uC124\uBA85 \u2501\u2501\u2501
`;
      details += `${item.description}
`;
    }
    if (item.setBonus) {
      details += `
\u2501\u2501\u2501 \u{1F381} \uC138\uD2B8 \uD6A8\uACFC \u2501\u2501\u2501
`;
      details += `${item.setBonus}
`;
    }
    if (item.requiredLevel) {
      details += `
\u26A0\uFE0F \uD544\uC694 \uB808\uBCA8: ${item.requiredLevel}
`;
    }
    if (item.price) {
      details += `\u{1F4B0} \uAC00\uACA9: ${item.price} \uACE8\uB4DC
`;
    }
    details += `
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`;
    return details;
  }
  /**
   * 아이템 희귀도 색상 반환 (CSS 클래스용)
   */
  getRarityColorClass(rarity) {
    const colorMap = {
      "common": "rarity-common",
      "uncommon": "rarity-uncommon",
      "rare": "rarity-rare",
      "epic": "rarity-epic",
      "legendary": "rarity-legendary",
      "unique": "rarity-unique",
      "mythic": "rarity-mythic"
    };
    return colorMap[rarity] || "rarity-common";
  }
  /**
   * 아이템 아이콘 반환
   */
  getItemIcon(type, rarity) {
    const typeIcons = {
      "weapon": "\u2694\uFE0F",
      "armor": "\u{1F6E1}\uFE0F",
      "helmet": "\u26D1\uFE0F",
      "gloves": "\u{1F9E4}",
      "boots": "\u{1F462}",
      "belt": "\u{1F4FF}",
      "amulet": "\u{1F4FF}",
      "ring": "\u{1F48D}",
      "consumable": "\u{1F9EA}",
      "material": "\u{1F4E6}"
    };
    if (rarity === "legendary") {
      return "\u2728";
    } else if (rarity === "mythic") {
      return "\u{1F31F}";
    }
    return typeIcons[type] || "\u{1F4E6}";
  }
  /**
   * 장비 가능 여부 확인
   */
  canEquipItem(item, playerLevel) {
    const requiredLevel = item.requiredLevel;
    if (requiredLevel && playerLevel < requiredLevel) {
      return false;
    }
    const equipableTypes = [
      "weapon",
      "armor",
      "helmet",
      "gloves",
      "boots",
      "belt",
      "amulet",
      "ring",
      "accessory"
    ];
    return equipableTypes.includes(item.type);
  }
  /**
   * 아이템 총 능력치 계산 (비교용)
   */
  calculateTotalItemPower(item) {
    if (!item.stats)
      return 0;
    let power = 0;
    const stats = item.stats;
    if (stats.minDamage && stats.maxDamage) {
      power += (stats.minDamage + stats.maxDamage) / 2;
    }
    if (stats.attack)
      power += stats.attack;
    if (stats.attackSpeed)
      power += stats.attackSpeed * 0.5;
    if (stats.armor)
      power += stats.armor;
    if (stats.defense)
      power += stats.defense;
    if (stats.blockChance)
      power += stats.blockChance * 0.3;
    if (stats.evasion)
      power += stats.evasion * 0.3;
    if (stats.hp)
      power += stats.hp * 0.1;
    if (stats.mp)
      power += stats.mp * 0.1;
    if (stats.critChance)
      power += stats.critChance * 2;
    if (stats.critDamage)
      power += stats.critDamage * 0.5;
    const rarityMultiplier = this.getRarityWeight(item.rarity) * 10;
    return Math.floor(power * rarityMultiplier);
  }
  static \u0275fac = function ItemStateService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ItemStateService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _ItemStateService, factory: _ItemStateService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ItemStateService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();

// src/app/modules/novel/services/novel-auth.service.ts
var NovelAuthService = class _NovelAuthService {
  router;
  STORAGE_KEY = "novel_auth_user";
  // environment에서 암호화된 인증 정보를 복호화하여 사용
  ADMIN_USERNAME = CryptoUtil.decrypt(environment.auth.username);
  ADMIN_PASSWORD = CryptoUtil.decrypt(environment.auth.password);
  currentUserSubject;
  currentUser$;
  constructor(router) {
    this.router = router;
    const savedUser = this.loadUserFromStorage();
    this.currentUserSubject = new BehaviorSubject(savedUser);
    this.currentUser$ = this.currentUserSubject.asObservable();
  }
  /**
   * 로컬 스토리지에서 사용자 정보 로드
   */
  loadUserFromStorage() {
    try {
      const userJson = localStorage.getItem(this.STORAGE_KEY);
      if (userJson) {
        const user = JSON.parse(userJson);
        user.loginTime = new Date(user.loginTime);
        return user;
      }
    } catch (error) {
    }
    return null;
  }
  /**
   * 로컬 스토리지에 사용자 정보 저장
   */
  saveUserToStorage(user) {
    try {
      if (user) {
        localStorage.setItem(this.STORAGE_KEY, JSON.stringify(user));
      } else {
        localStorage.removeItem(this.STORAGE_KEY);
      }
    } catch (error) {
    }
  }
  /**
   * 로그인 - environment에서 중앙 관리되는 계정 사용
   */
  login(username, password) {
    if (username === this.ADMIN_USERNAME && password === this.ADMIN_PASSWORD) {
      const novelUser = {
        username: this.ADMIN_USERNAME,
        loginTime: /* @__PURE__ */ new Date()
      };
      this.currentUserSubject.next(novelUser);
      this.saveUserToStorage(novelUser);
      return true;
    }
    return false;
  }
  /**
   * 로그아웃
   */
  logout() {
    console.log("[NovelAuth] \uB85C\uADF8\uC544\uC6C3");
    try {
      this.currentUserSubject.next(null);
      this.saveUserToStorage(null);
    } catch (error) {
      console.error("[NovelAuth] \uB85C\uADF8\uC544\uC6C3 \uC911 \uC624\uB958:", error);
    } finally {
      this.router.navigate(["/novel/login"]).catch((err) => {
        console.error("[NovelAuth] \uB124\uBE44\uAC8C\uC774\uC158 \uC608\uC678 \uBC1C\uC0DD:", err);
        window.location.hash = "#/novel/login";
      });
    }
  }
  /**
   * 현재 로그인 여부 확인
   */
  isLoggedIn() {
    return this.currentUserSubject.value !== null;
  }
  /**
   * 현재 사용자 정보 가져오기
   */
  getCurrentUser() {
    return this.currentUserSubject.value;
  }
  /**
   * 현재 사용자 이름 가져오기
   */
  getCurrentUsername() {
    const user = this.getCurrentUser();
    return user ? user.username : null;
  }
  static \u0275fac = function NovelAuthService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelAuthService)(\u0275\u0275inject(Router));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _NovelAuthService, factory: _NovelAuthService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelAuthService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: Router }], null);
})();

// src/app/modules/novel/services/game-storage.service.ts
var GameStorageService = class _GameStorageService {
  dbName = "NovelGameDB";
  dbVersion = 2;
  // 버전 업그레이드 (장비 추가)
  storeName = "gameSaves";
  db = null;
  constructor() {
    this.initDB();
  }
  /**
   * IndexedDB 초기화
   */
  initDB() {
    return __async(this, null, function* () {
      return new Promise((resolve, reject) => {
        const request = indexedDB.open(this.dbName, this.dbVersion);
        request.onerror = () => {
          reject(request.error);
        };
        request.onsuccess = () => {
          this.db = request.result;
          resolve();
        };
        request.onupgradeneeded = (event) => {
          const db = event.target.result;
          if (db.objectStoreNames.contains(this.storeName)) {
            db.deleteObjectStore(this.storeName);
          }
          const objectStore = db.createObjectStore(this.storeName, { keyPath: "id" });
          objectStore.createIndex("novelId", "novelId", { unique: false });
          objectStore.createIndex("saveDate", "saveDate", { unique: false });
          objectStore.createIndex("novelTitle", "novelTitle", { unique: false });
        };
      });
    });
  }
  /**
   * DB 연결 확인 및 재연결
   */
  ensureDB() {
    return __async(this, null, function* () {
      if (this.db) {
        return this.db;
      }
      yield this.initDB();
      if (!this.db) {
        throw new Error("IndexedDB \uC5F0\uACB0 \uC2E4\uD328");
      }
      return this.db;
    });
  }
  /**
   * 게임 저장
   */
  saveGame(gameData) {
    return __async(this, null, function* () {
      try {
        const db = yield this.ensureDB();
        return new Promise((resolve, reject) => {
          const transaction = db.transaction([this.storeName], "readwrite");
          const store = transaction.objectStore(this.storeName);
          const dataToSave = __spreadProps(__spreadValues({}, gameData), {
            saveDate: new Date(gameData.saveDate)
          });
          const request = store.put(dataToSave);
          request.onsuccess = () => {
            resolve();
          };
          request.onerror = () => {
            reject(request.error);
          };
        });
      } catch (error) {
        throw error;
      }
    });
  }
  /**
   * 게임 불러오기
   */
  loadGame(gameId) {
    return __async(this, null, function* () {
      try {
        const db = yield this.ensureDB();
        return new Promise((resolve, reject) => {
          const transaction = db.transaction([this.storeName], "readonly");
          const store = transaction.objectStore(this.storeName);
          const request = store.get(gameId);
          request.onsuccess = () => {
            if (request.result) {
              resolve(request.result);
            } else {
              resolve(null);
            }
          };
          request.onerror = () => {
            reject(request.error);
          };
        });
      } catch (error) {
        return null;
      }
    });
  }
  /**
   * 모든 저장된 게임 목록 가져오기
   */
  getAllGames() {
    return __async(this, null, function* () {
      try {
        const db = yield this.ensureDB();
        return new Promise((resolve, reject) => {
          const transaction = db.transaction([this.storeName], "readonly");
          const store = transaction.objectStore(this.storeName);
          const request = store.getAll();
          request.onsuccess = () => {
            const games = request.result || [];
            games.sort((a, b) => new Date(b.saveDate).getTime() - new Date(a.saveDate).getTime());
            resolve(games);
          };
          request.onerror = () => {
            reject(request.error);
          };
        });
      } catch (error) {
        return [];
      }
    });
  }
  /**
   * 특정 소설의 저장된 게임 목록 가져오기
   */
  getGamesByNovelId(novelId) {
    return __async(this, null, function* () {
      try {
        const db = yield this.ensureDB();
        return new Promise((resolve, reject) => {
          const transaction = db.transaction([this.storeName], "readonly");
          const store = transaction.objectStore(this.storeName);
          const index = store.index("novelId");
          const request = index.getAll(novelId);
          request.onsuccess = () => {
            const games = request.result || [];
            games.sort((a, b) => new Date(b.saveDate).getTime() - new Date(a.saveDate).getTime());
            resolve(games);
          };
          request.onerror = () => {
            reject(request.error);
          };
        });
      } catch (error) {
        return [];
      }
    });
  }
  /**
   * 게임 삭제
   */
  deleteGame(gameId) {
    return __async(this, null, function* () {
      try {
        const db = yield this.ensureDB();
        return new Promise((resolve, reject) => {
          const transaction = db.transaction([this.storeName], "readwrite");
          const store = transaction.objectStore(this.storeName);
          const request = store.delete(gameId);
          request.onsuccess = () => {
            resolve();
          };
          request.onerror = () => {
            reject(request.error);
          };
        });
      } catch (error) {
        throw error;
      }
    });
  }
  /**
   * 모든 게임 삭제
   */
  clearAllGames() {
    return __async(this, null, function* () {
      try {
        const db = yield this.ensureDB();
        return new Promise((resolve, reject) => {
          const transaction = db.transaction([this.storeName], "readwrite");
          const store = transaction.objectStore(this.storeName);
          const request = store.clear();
          request.onsuccess = () => {
            resolve();
          };
          request.onerror = () => {
            reject(request.error);
          };
        });
      } catch (error) {
        throw error;
      }
    });
  }
  /**
   * localStorage에서 IndexedDB로 마이그레이션
   */
  migrateFromLocalStorage() {
    return __async(this, null, function* () {
      try {
        let migratedCount = 0;
        const keys = Object.keys(localStorage);
        for (const key of keys) {
          if (key.startsWith("novel_game_")) {
            try {
              const saveData = localStorage.getItem(key);
              if (saveData) {
                const gameState = JSON.parse(saveData);
                yield this.saveGame(gameState);
                migratedCount++;
              }
            } catch (e) {
            }
          }
        }
        return migratedCount;
      } catch (error) {
        return 0;
      }
    });
  }
  static \u0275fac = function GameStorageService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _GameStorageService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _GameStorageService, factory: _GameStorageService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(GameStorageService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [], null);
})();

// src/app/modules/novel/services/dungeon-generator.service.ts
var DungeonGeneratorService = class _DungeonGeneratorService {
  constructor() {
  }
  /**
   * 시드 기반 난수 생성기 (Seeded Random Number Generator)
   * 동일한 시드로 동일한 던전을 재생성할 수 있습니다.
   */
  seededRandom(seed) {
    let state2 = seed;
    return () => {
      state2 = (state2 * 1664525 + 1013904223) % 4294967296;
      return state2 / 4294967296;
    };
  }
  /**
   * 던전 인스턴스 생성
   */
  generateDungeon(dungeonType, difficulty, playerLevel) {
    const dungeonId = `dungeon_${Date.now()}`;
    const seed = Math.random();
    const random = this.seededRandom(seed * 1e6);
    const floorMultiplier = {
      easy: 0.75,
      normal: 1,
      hard: 1.25,
      hell: 1.5
    }[difficulty];
    const totalFloors = Math.floor(dungeonType.baseFloors * floorMultiplier);
    const dungeon = {
      id: dungeonId,
      dungeonTypeId: dungeonType.id,
      difficulty,
      seed,
      storyContext: dungeonType.storyDescription,
      totalFloors,
      currentFloor: 0,
      floors: [],
      status: "active",
      startTime: /* @__PURE__ */ new Date(),
      elapsedTime: 0,
      stats: {
        roomsExplored: 0,
        monstersKilled: 0,
        elitesKilled: 0,
        bossKilled: false,
        treasuresFound: 0,
        deathCount: 0
      },
      accumulatedRewards: {
        gold: 0,
        experience: 0,
        items: []
      },
      playerSnapshot: {
        hp: 0,
        // 컴포넌트에서 설정
        mp: 0,
        level: playerLevel
      }
    };
    for (let i = 1; i <= totalFloors; i++) {
      const floor = this.generateFloor(i, totalFloors, dungeonType, difficulty, random);
      dungeon.floors.push(floor);
    }
    return dungeon;
  }
  /**
   * 층 생성
   */
  generateFloor(floorNumber, totalFloors, dungeonType, difficulty, random) {
    const isLastFloor = floorNumber === totalFloors;
    const baseRoomCount = 5;
    const bonusRooms = Math.floor(floorNumber / 2);
    const randomRooms = Math.floor(random() * 3);
    const roomCount = baseRoomCount + bonusRooms + randomRooms;
    const rooms = [];
    const entranceRoom = this.createRoom("entrance", floorNumber, dungeonType, difficulty, random);
    rooms.push(entranceRoom);
    for (let i = 0; i < roomCount - 2; i++) {
      const roomType = this.selectRandomRoomType(isLastFloor, random);
      const room = this.createRoom(roomType, floorNumber, dungeonType, difficulty, random);
      rooms.push(room);
    }
    if (isLastFloor) {
      const bossRoom = this.createRoom("boss", floorNumber, dungeonType, difficulty, random);
      rooms.push(bossRoom);
    } else {
      const exitRoom = this.createRoom("exit", floorNumber, dungeonType, difficulty, random);
      rooms.push(exitRoom);
    }
    this.connectRooms(rooms, random);
    const floor = {
      floorNumber,
      rooms,
      entranceRoomId: rooms[0].id,
      exitRoomId: isLastFloor ? void 0 : rooms[rooms.length - 1].id,
      bossRoomId: isLastFloor ? rooms[rooms.length - 1].id : void 0,
      isCleared: false,
      generatedAt: /* @__PURE__ */ new Date()
    };
    return floor;
  }
  /**
   * 방 생성
   */
  createRoom(type, floorNumber, dungeonType, difficulty, random) {
    const roomId = `room_${Date.now()}_${random()}`;
    const sizeRoll = random();
    let size;
    if (sizeRoll < 0.3)
      size = "small";
    else if (sizeRoll < 0.8)
      size = "medium";
    else
      size = "large";
    const room = {
      id: roomId,
      type,
      size,
      floorNumber,
      // 층 번호 추가
      description: this.getRoomDescription(type, dungeonType.theme, random),
      monsters: [],
      isCleared: ["entrance", "exit", "treasure", "shrine", "shop", "safe"].includes(type),
      interactables: [],
      connectedRoomIds: [],
      isExplored: type === "entrance",
      isCurrentRoom: false
    };
    if (["normal", "elite", "boss"].includes(type)) {
      room.monsters = this.spawnMonsters(type, floorNumber, dungeonType, difficulty, size, random);
    }
    if (type === "treasure") {
      room.interactables.push(this.createTreasureChest(floorNumber, difficulty, random));
    } else if (type === "shrine") {
      room.interactables.push(this.createShrine(random));
    }
    return room;
  }
  /**
   * 방 연결 (선형 + 분기)
   */
  connectRooms(rooms, random) {
    for (let i = 0; i < rooms.length - 1; i++) {
      rooms[i].connectedRoomIds.push(rooms[i + 1].id);
      rooms[i + 1].connectedRoomIds.push(rooms[i].id);
    }
    for (let i = 1; i < rooms.length - 2; i++) {
      if (random() < 0.3) {
        const targetIndex = i + 2;
        if (targetIndex < rooms.length && !rooms[i].connectedRoomIds.includes(rooms[targetIndex].id)) {
          rooms[i].connectedRoomIds.push(rooms[targetIndex].id);
          rooms[targetIndex].connectedRoomIds.push(rooms[i].id);
        }
      }
    }
  }
  /**
   * 랜덤 방 타입 선택
   */
  selectRandomRoomType(isLastFloor, random) {
    if (isLastFloor) {
      const specialRooms = ["normal", "elite", "treasure", "shrine"];
      return specialRooms[Math.floor(random() * specialRooms.length)];
    }
    const rand = random();
    if (rand < 0.45)
      return "normal";
    if (rand < 0.65)
      return "elite";
    if (rand < 0.8)
      return "treasure";
    if (rand < 0.92)
      return "shrine";
    if (rand < 0.97)
      return "shop";
    return "event";
  }
  /**
   * 방 설명 생성
   */
  getRoomDescription(type, theme, random) {
    const descriptions = {
      entrance: {
        undead: [
          "\uC881\uC740 \uD1B5\uB85C. \uBCBD\uC5D0 \uC624\uB798\uB41C \uD683\uBD88\uC774 \uCF1C\uC838\uC788\uB2E4.",
          "\uC785\uAD6C\uC5D0\uC11C \uCC28\uAC00\uC6B4 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.",
          "\uBB18\uC9C0\uC758 \uC785\uAD6C. \uBE44\uC11D\uB4E4\uC774 \uB298\uC5B4\uC11C \uC788\uB2E4."
        ],
        demon: [
          "\uBD89\uAC8C \uD0C0\uC624\uB974\uB294 \uC785\uAD6C. \uC720\uD669 \uB0C4\uC0C8\uAC00 \uC9C4\uB3D9\uD55C\uB2E4.",
          "\uB9C8\uC871\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C0\uB294 \uB3D9\uAD74 \uC785\uAD6C.",
          "\uC6A9\uC554\uC774 \uD750\uB974\uB294 \uB3D9\uAD74 \uC785\uAD6C. \uC5F4\uAE30\uAC00 \uC555\uB3C4\uC801\uC774\uB2E4."
        ],
        ancient: [
          "\uAC70\uB300\uD55C \uC11D\uC870 \uBB38. \uACE0\uB300 \uBB38\uC790\uAC00 \uC0C8\uACA8\uC838 \uC788\uB2E4.",
          "\uC6C5\uC7A5\uD55C \uC785\uAD6C. \uC138\uC6D4\uC758 \uD754\uC801\uC774 \uC5ED\uB825\uD558\uB2E4.",
          "\uC0AC\uB9C9 \uBAA8\uB798\uC5D0 \uBC18\uCBE4 \uBB3B\uD78C \uC720\uC801\uC758 \uC785\uAD6C."
        ],
        beast: [
          "\uC232 \uC18D \uB3D9\uAD74. \uC57C\uC218\uC758 \uC6B8\uC74C\uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4.",
          "\uB369\uAD74\uB85C \uB4A4\uB36E\uC778 \uB3D9\uAD74 \uC785\uAD6C.",
          "\uB3D9\uBB3C \uBF08\uAC00 \uD769\uC5B4\uC9C4 \uB3D9\uAD74 \uC785\uAD6C."
        ],
        magic: [
          "\uB9C8\uBC95\uC9C4\uC774 \uADF8\uB824\uC9C4 \uC785\uAD6C. \uB9C8\uB825\uC774 \uAC10\uC9C0\uB41C\uB2E4.",
          "\uC2E0\uBE44\uB85C\uC6B4 \uBE5B\uC774 \uC0C8\uC5B4\uB098\uC624\uB294 \uD3EC\uD138.",
          "\uB5A0\uB2E4\uB2C8\uB294 \uB8EC \uBB38\uC790\uB4E4\uC774 \uBCF4\uC778\uB2E4."
        ],
        nature: [
          "\uC774\uB07C\uB85C \uB4A4\uB36E\uC778 \uC790\uC5F0 \uB3D9\uAD74.",
          "\uC9C0\uD558 \uC232\uC758 \uC785\uAD6C. \uBC84\uC12F\uC774 \uBC1C\uAD11\uD558\uACE0 \uC788\uB2E4.",
          "\uBB3C\uC774 \uD750\uB974\uB294 \uC790\uC5F0 \uB3D9\uAD74 \uC785\uAD6C."
        ]
      },
      normal: {
        undead: [
          "\uAD00\uC774 \uB298\uC5B4\uC120 \uBC29. \uBB34\uC5B8\uAC00 \uC6C0\uC9C1\uC774\uB294 \uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4.",
          "\uC5B4\uB450\uC6B4 \uBC29. \uBF08\uB2E4\uADC0\uAC00 \uBC14\uB2E5\uC5D0 \uD769\uC5B4\uC838 \uC788\uB2E4.",
          "\uBB18\uC2E4. \uBCBD\uBA74\uC5D0 \uD574\uACE8\uC774 \uC7A5\uC2DD\uB418\uC5B4 \uC788\uB2E4.",
          "\uC881\uC740 \uBCF5\uB3C4. \uAC70\uBBF8\uC904\uC774 \uACF3\uACF3\uC5D0 \uCCD0\uC838\uC788\uB2E4."
        ],
        demon: [
          "\uBD89\uC740 \uBE5B\uC774 \uAC10\uB3C4\uB294 \uBC29. \uC5F4\uAE30\uAC00 \uB290\uAEF4\uC9C4\uB2E4.",
          "\uC6A9\uC554\uC774 \uD750\uB974\uB294 \uBC29. \uB9C8\uC871\uC758 \uC6B8\uC74C\uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4.",
          "\uD654\uC5FC\uC5D0 \uADF8\uC744\uB9B0 \uBC29. \uC720\uD669 \uB0C4\uC0C8\uAC00 \uB3C5\uD558\uB2E4.",
          "\uC545\uB9C8\uC758 \uBB38\uC591\uC774 \uC0C8\uACA8\uC9C4 \uBC29."
        ],
        ancient: [
          "\uBA3C\uC9C0\uAC00 \uC313\uC778 \uBC29. \uACE0\uB300 \uC720\uBB3C\uB4E4\uC774 \uB193\uC5EC\uC788\uB2E4.",
          "\uB113\uC740 \uD640. \uC11D\uC0C1\uB4E4\uC774 \uB3C4\uC5F4\uD574 \uC788\uB2E4.",
          "\uACE0\uB300 \uBB38\uC790\uAC00 \uC0C8\uACA8\uC9C4 \uBCBD\uBA74.",
          "\uBCF4\uC874\uC774 \uC798 \uB41C \uACE0\uB300\uC758 \uBC29."
        ],
        beast: [
          "\uC57C\uC218\uC758 \uB465\uC9C0. \uBF08\uC640 \uAC00\uC8FD\uC774 \uD769\uC5B4\uC838 \uC788\uB2E4.",
          "\uC881\uC740 \uAD74. \uAE01\uD78C \uC790\uAD6D\uC774 \uBCF4\uC778\uB2E4.",
          "\uC5B4\uB450\uC6B4 \uBC29. \uC73C\uB974\uB801\uAC70\uB9AC\uB294 \uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4.",
          "\uD138\uACFC \uBC1C\uD1B1 \uC790\uAD6D\uC774 \uAC00\uB4DD\uD55C \uBC29."
        ],
        magic: [
          "\uB9C8\uBC95\uC9C4\uC774 \uADF8\uB824\uC9C4 \uBC29. \uB9C8\uB825\uC774 \uD750\uB978\uB2E4.",
          "\uB5A0\uB2E4\uB2C8\uB294 \uC218\uC815\uB4E4. \uC2E0\uBE44\uB85C\uC6B4 \uAE30\uC6B4.",
          "\uB9C8\uBC95 \uC2E4\uD5D8\uC2E4\uC758 \uD754\uC801. \uB9C8\uB098\uAC00 \uCDA9\uB9CC\uD558\uB2E4.",
          "\uCC28\uC6D0\uC774 \uC65C\uACE1\uB41C \uBC29. \uD604\uC2E4\uAC10\uC774 \uD76C\uBBF8\uD558\uB2E4."
        ],
        nature: [
          "\uC774\uB07C\uC640 \uBC84\uC12F\uC73C\uB85C \uB4A4\uB36E\uC778 \uBC29.",
          "\uC9C0\uD558 \uC232. \uBC1C\uAD11 \uC2DD\uBB3C\uB4E4\uC774 \uBE5B\uB09C\uB2E4.",
          "\uBB3C\uC6C5\uB369\uC774\uAC00 \uC788\uB294 \uC790\uC5F0 \uB3D9\uAD74.",
          "\uBFCC\uB9AC\uAC00 \uCC9C\uC7A5\uC744 \uB6AB\uACE0 \uC790\uB77C\uACE0 \uC788\uB2E4."
        ]
      },
      elite: {
        undead: [
          "\uAC70\uB300\uD55C \uBB34\uB364. \uAC15\uB825\uD55C \uC5B8\uB370\uB4DC\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.",
          "\uC81C\uB2E8\uC774 \uB193\uC778 \uBC29. \uBD80\uD65C\uC758 \uC758\uC2DD \uD754\uC801\uC774 \uBCF4\uC778\uB2E4.",
          "\uC5D8\uB9AC\uD2B8 \uC5B8\uB370\uB4DC\uC758 \uAC70\uCC98. \uAC80\uC740 \uC624\uB77C\uAC00 \uD750\uB978\uB2E4."
        ],
        demon: [
          "\uB9C8\uC871 \uB300\uC7A5\uC758 \uBC29. \uBD89\uC740 \uC624\uB77C\uAC00 \uAC15\uB82C\uD558\uB2E4.",
          "\uD654\uC5FC \uC81C\uB2E8. \uAC15\uB825\uD55C \uB9C8\uC871\uC774 \uC9C0\uD0A4\uACE0 \uC788\uB2E4.",
          "\uC9C0\uC625\uC758 \uBB38 \uC55E. \uAC15\uD55C \uC545\uB9C8\uC758 \uAE30\uC6B4."
        ],
        ancient: [
          "\uC218\uD638\uC790\uC758 \uBC29. \uAC70\uB300\uD55C \uACE8\uB818\uC774 \uC11C\uC788\uB2E4.",
          "\uBD09\uC778\uB41C \uBC29. \uAC15\uB825\uD55C \uB9C8\uBC95\uC774 \uAC10\uC9C0\uB41C\uB2E4.",
          "\uACE0\uB300 \uC804\uC0AC\uC758 \uBB34\uB364. \uAC11\uC637\uC774 \uC6C0\uC9C1\uC778\uB2E4."
        ],
        beast: [
          "\uC54C\uD30C\uC758 \uB465\uC9C0. \uAC15\uD55C \uC57C\uC218\uC758 \uAE30\uC6B4.",
          "\uAC70\uB300\uD55C \uB3D9\uBB3C\uC758 \uAC70\uCC98. \uC704\uC555\uAC10\uC774 \uB290\uAEF4\uC9C4\uB2E4.",
          "\uBB34\uB9AC\uC758 \uC6B0\uB450\uBA38\uB9AC\uAC00 \uC9C0\uD0A4\uB294 \uBC29."
        ],
        magic: [
          "\uB300\uB9C8\uBC95\uC0AC\uC758 \uBC29. \uB9C8\uB825\uC774 \uD3ED\uBC1C\uC801\uC774\uB2E4.",
          "\uAC15\uB825\uD55C \uB9C8\uBC95 \uC0DD\uBB3C\uC774 \uBD09\uC778\uB418\uC5B4 \uC788\uB2E4.",
          "\uCC28\uC6D0 \uADE0\uC5F4. \uAC15\uB825\uD55C \uC874\uC7AC\uAC00 \uB290\uAEF4\uC9C4\uB2E4."
        ],
        nature: [
          "\uACE0\uB300 \uB098\uBB34\uC758 \uC218\uD638\uC790. \uC790\uC5F0\uC758 \uD798\uC774 \uAC15\uD558\uB2E4.",
          "\uAC70\uB300 \uC2DD\uBB3C \uAD34\uBB3C\uC758 \uB465\uC9C0.",
          "\uC790\uC5F0\uC758 \uC815\uB839\uC774 \uC9C0\uD0A4\uB294 \uC131\uC5ED."
        ]
      },
      boss: {
        undead: [
          "\uAC70\uB300\uD55C \uC11D\uAD00. \uB9AC\uCE58\uC758 \uAE30\uC6B4\uC774 \uC555\uB3C4\uC801\uC774\uB2E4.",
          "\uB9DD\uC790\uC758 \uC655\uC88C. \uD574\uACE8 \uC655\uC774 \uC549\uC544\uC788\uB2E4.",
          "\uC5B8\uB370\uB4DC \uAD70\uC8FC\uC758 \uBC29. \uC8FD\uC74C\uC758 \uAE30\uC6B4\uC774 \uCDA9\uB9CC\uD558\uB2E4."
        ],
        demon: [
          "\uB9C8\uC655\uC758 \uC625\uC88C. \uD654\uC5FC\uC774 \uC18C\uC6A9\uB3CC\uC774\uCE5C\uB2E4.",
          "\uC9C0\uC625\uC758 \uBB38 \uC55E. \uB370\uBAAC \uB85C\uB4DC\uAC00 \uAE30\uB2E4\uB9B0\uB2E4.",
          "\uC545\uB9C8\uC758 \uC131\uC18C. \uC555\uB3C4\uC801\uC778 \uC545\uC758\uAC00 \uB290\uAEF4\uC9C4\uB2E4."
        ],
        ancient: [
          "\uD0C0\uC774\uD0C4\uC758 \uBC29. \uAC70\uB300\uD55C \uC11D\uC0C1\uC774 \uC6C0\uC9C1\uC778\uB2E4.",
          "\uACE0\uB300 \uC655\uC758 \uBB34\uB364. \uC655\uC758 \uC601\uD63C\uC774 \uAE68\uC5B4\uB0AC\uB2E4.",
          "\uC720\uC801\uC758 \uD575\uC2EC\uBD80. \uCD5C\uC885 \uC218\uD638\uC790\uAC00 \uC788\uB2E4."
        ],
        beast: [
          "\uC804\uC124\uC758 \uC57C\uC218. \uBAA8\uB4E0 \uC9D0\uC2B9\uC758 \uC655.",
          "\uAC70\uB300\uD55C \uB3D9\uAD74 \uC655\uAD6D\uC758 \uAD70\uC8FC.",
          "\uACE0\uB300 \uB9F9\uC218\uC758 \uAC70\uCC98."
        ],
        magic: [
          "\uB300\uB9C8\uBC95\uC0AC\uC758 \uD0D1 \uAF2D\uB300\uAE30.",
          "\uCC28\uC6D0\uC758 \uC9C0\uBC30\uC790. \uD604\uC2E4\uC774 \uC65C\uACE1\uB41C\uB2E4.",
          "\uB9C8\uBC95\uC758 \uD654\uC2E0. \uC21C\uC218\uD55C \uB9C8\uB825\uC758 \uC874\uC7AC."
        ],
        nature: [
          "\uACE0\uB300 \uC218\uD638\uB839. \uC790\uC5F0\uC758 \uD654\uC2E0.",
          "\uC138\uACC4\uC218\uC758 \uC218\uD638\uC790.",
          "\uC6D0\uC2DC\uB9BC\uC758 \uC9C0\uBC30\uC790."
        ]
      },
      treasure: {
        undead: ["\uBA3C\uC9C0 \uC313\uC778 \uBCF4\uBB3C \uC0C1\uC790.", "\uBE44\uBC00 \uBB34\uB364 \uC18D \uBCF4\uBB3C.", "\uD669\uAE08\uC73C\uB85C \uB41C \uC11D\uAD00."],
        demon: ["\uD654\uC5FC\uC5D0 \uB458\uB7EC\uC2F8\uC778 \uBCF4\uBB3C \uC0C1\uC790.", "\uB9C8\uC871\uC758 \uC804\uB9AC\uD488.", "\uC9C0\uC625\uC758 \uBCF4\uBB3C\uACE0."],
        ancient: ["\uBD09\uC778\uB41C \uBCF4\uBB3C \uC0C1\uC790. \uB8EC \uBB38\uC790\uAC00 \uC0C8\uACA8\uC838 \uC788\uB2E4.", "\uACE0\uB300\uC758 \uBCF4\uBB3C \uCC3D\uACE0.", "\uC655\uC2E4\uC758 \uBCF4\uBB3C."],
        beast: ["\uC57C\uC218\uAC00 \uBAA8\uC740 \uBCF4\uBB3C.", "\uBE5B\uB098\uB294 \uB3CC\uC774 \uAC00\uB4DD\uD55C \uB465\uC9C0.", "\uC9D0\uC2B9\uC758 \uBCF4\uBB3C\uACE0."],
        magic: ["\uB9C8\uBC95\uC73C\uB85C \uBCF4\uD638\uB41C \uC0C1\uC790.", "\uCC28\uC6D0 \uC8FC\uBA38\uB2C8.", "\uBB34\uD55C \uBCF4\uBB3C \uC0C1\uC790."],
        nature: ["\uC790\uC5F0\uC758 \uC120\uBB3C. \uBE5B\uB098\uB294 \uC5F4\uB9E4.", "\uD06C\uB9AC\uC2A4\uD0C8 \uB3D9\uAD74.", "\uBCF4\uC11D\uB098\uBB34."]
      },
      shrine: {
        undead: ["\uC8FD\uC74C\uC758 \uC131\uC18C. \uCC28\uAC00\uC6B4 \uAE30\uC6B4.", "\uB9DD\uC790\uC758 \uC81C\uB2E8.", "\uC601\uD63C\uC758 \uC0D8."],
        demon: ["\uC9C0\uC625\uBD88 \uC131\uC18C.", "\uC545\uB9C8\uC758 \uC81C\uB2E8. \uD798\uC774 \uC19F\uB294\uB2E4.", "\uB9C8\uB825\uC758 \uC0D8."],
        ancient: ["\uACE0\uB300\uC758 \uC131\uC18C. \uC2E0\uC131\uD55C \uAE30\uC6B4.", "\uB9C8\uB098\uC758 \uC0D8.", "\uCD95\uBCF5\uC758 \uC81C\uB2E8."],
        beast: ["\uC57C\uC0DD\uC758 \uC131\uC18C.", "\uC815\uB839\uC758 \uC0D8.", "\uC790\uC5F0\uC758 \uC81C\uB2E8."],
        magic: ["\uB9C8\uB825 \uCDA9\uC804\uC18C.", "\uB8EC \uC81C\uB2E8.", "\uB9C8\uBC95\uC9C4 \uC131\uC18C."],
        nature: ["\uC0DD\uBA85\uC758 \uC0D8.", "\uCE58\uC720\uC758 \uB098\uBB34.", "\uC790\uC5F0\uC758 \uCD95\uBCF5."]
      }
    };
    const themeDescriptions = descriptions[type]?.[theme] || ["\uD3C9\uBC94\uD55C \uBC29."];
    return themeDescriptions[Math.floor(random() * themeDescriptions.length)];
  }
  /**
   * 몬스터 스폰
   */
  spawnMonsters(roomType, floorNumber, dungeonType, difficulty, roomSize, random) {
    const monsters = [];
    const baseLevel = floorNumber * 2;
    const difficultyMap = {
      easy: 0.7,
      normal: 1,
      hard: 1.3,
      hell: 1.6
    };
    const difficultyMultiplier = difficultyMap[difficulty] || 1;
    const sizeMap = {
      small: 0.75,
      medium: 1,
      large: 1.5
    };
    const sizeMultiplier = sizeMap[roomSize] || 1;
    if (roomType === "normal") {
      const count = Math.floor((2 + random() * 3) * sizeMultiplier);
      for (let i = 0; i < count; i++) {
        monsters.push(this.createMonster("normal", baseLevel, dungeonType, difficultyMultiplier, random));
      }
    } else if (roomType === "elite") {
      const count = Math.floor((1 + random() * 2) * sizeMultiplier);
      for (let i = 0; i < count; i++) {
        monsters.push(this.createMonster("elite", baseLevel + 3, dungeonType, difficultyMultiplier, random));
      }
    } else if (roomType === "boss") {
      monsters.push(this.createMonster("boss", baseLevel + 7, dungeonType, difficultyMultiplier, random));
    }
    return monsters;
  }
  /**
   * 몬스터 생성
   */
  createMonster(type, level, dungeonType, difficultyMultiplier, random) {
    const monsterId = `monster_${Date.now()}_${random()}`;
    const baseHp = 50 + level * 25;
    const baseAttack = 8 + level * 4;
    const baseDefense = 3 + level * 2;
    const typeMultiplier = {
      normal: 1,
      elite: 2.5,
      boss: 6
    }[type];
    const variance = 0.85 + random() * 0.3;
    const monster = {
      id: monsterId,
      name: this.getMonsterName(type, dungeonType, random),
      type,
      level,
      hp: Math.floor(baseHp * typeMultiplier * difficultyMultiplier * variance),
      maxHp: Math.floor(baseHp * typeMultiplier * difficultyMultiplier * variance),
      attack: Math.floor(baseAttack * typeMultiplier * difficultyMultiplier * variance),
      defense: Math.floor(baseDefense * typeMultiplier * difficultyMultiplier * variance),
      dropTable: {
        goldMin: Math.floor(10 * level * typeMultiplier),
        goldMax: Math.floor(25 * level * typeMultiplier),
        itemDropChance: type === "boss" ? 1 : type === "elite" ? 0.6 : 0.25,
        itemRarity: type === "boss" ? "legendary" : type === "elite" ? "rare" : "common"
      },
      isDead: false
    };
    if (type === "elite" || type === "boss") {
      const affixCount = type === "boss" ? 3 : 2;
      monster.eliteAffixes = this.generateEliteAffixes(affixCount, random);
      monster.eliteAffixes.forEach((affix) => {
        this.applyEliteAffix(monster, affix);
      });
    }
    return monster;
  }
  /**
   * 몬스터 이름 생성
   */
  getMonsterName(type, dungeonType, random) {
    const names = {
      normal: {
        undead: ["\uC880\uBE44", "\uC2A4\uCF08\uB808\uD1A4", "\uC720\uB839", "\uAD6C\uC6B8", "\uC6CC\uCEE4", "\uD574\uACE8\uBCD1\uC0AC"],
        demon: ["\uC784\uD504", "\uD5EC\uD558\uC6B4\uB4DC", "\uB9C8\uC871 \uC804\uC0AC", "\uC791\uC740 \uC545\uB9C8", "\uD654\uC5FC \uC815\uB839", "\uB9C8\uC871 \uC815\uCC30\uBCD1"],
        ancient: ["\uACE8\uB818", "\uC6C0\uC9C1\uC774\uB294 \uAC11\uC637", "\uACE0\uB300 \uC218\uD638\uC790", "\uC11D\uC0C1", "\uB9C8\uBC95 \uC778\uD615", "\uACE0\uB300 \uC804\uC0AC"],
        beast: ["\uB291\uB300", "\uACF0", "\uBA67\uB3FC\uC9C0", "\uAC70\uB300 \uAC70\uBBF8", "\uB3C5\uC0AC", "\uBC15\uC950 \uB5BC"],
        magic: ["\uB9C8\uBC95 \uC2AC\uB77C\uC784", "\uC6D0\uC18C \uC815\uB839", "\uB9C8\uB098 \uB4DC\uB808\uC778", "\uB5A0\uB2E4\uB2C8\uB294 \uB208", "\uB9C8\uBC95 \uAD6C\uCCB4", "\uD658\uC601"],
        nature: ["\uAC70\uB300 \uBC84\uC12F", "\uC2DD\uC778 \uC2DD\uBB3C", "\uB369\uAD74 \uAD34\uBB3C", "\uB3CC\uC9C4 \uB098\uBB34", "\uD3EC\uC790 \uAD34\uBB3C", "\uB098\uBB34 \uC815\uB839"]
      },
      elite: {
        undead: ["\uAC15\uD654\uB41C \uC880\uBE44", "\uACE0\uC704 \uC2A4\uCF08\uB808\uD1A4", "\uC6D0\uD55C\uC758 \uC720\uB839", "\uB9AC\uCE58 \uC218\uC2B5\uC0DD", "\uC8FD\uC74C\uC758 \uAE30\uC0AC", "\uC800\uC8FC\uBC1B\uC740 \uC804\uC0AC"],
        demon: ["\uC0C1\uAE09 \uC784\uD504", "\uC9C0\uC625\uC758 \uC0AC\uB0E5\uAC1C", "\uB9C8\uC871 \uB300\uC7A5", "\uD654\uC5FC \uAD70\uC8FC", "\uC5B4\uB460\uC758 \uB9C8\uBC95\uC0AC", "\uC545\uB9C8 \uAD70\uB2E8\uC7A5"],
        ancient: ["\uACE0\uB300 \uACE8\uB818", "\uB9C8\uBC95 \uAC11\uC637", "\uC218\uD638\uC790 \uB300\uC7A5", "\uD0C0\uC774\uD0C4\uC758 \uD30C\uD3B8", "\uACE0\uB300 \uB9C8\uBC95\uC0AC", "\uBD09\uC778\uB41C \uC804\uC0AC"],
        beast: ["\uC54C\uD30C \uB291\uB300", "\uAD11\uD3EC\uD55C \uACF0", "\uAC70\uB300 \uB9F9\uC218", "\uC5EC\uC655 \uAC70\uBBF8", "\uC655\uBC40", "\uACE0\uB300 \uC9D0\uC2B9"],
        magic: ["\uC0C1\uAE09 \uC815\uB839", "\uB9C8\uBC95 \uC9C0\uBC30\uC790", "\uCC28\uC6D0 \uD30C\uC218\uAFBC", "\uB9C8\uB098 \uAD70\uC8FC", "\uD658\uC601 \uB9C8\uC2A4\uD130", "\uACF5\uAC04 \uC65C\uACE1\uC790"],
        nature: ["\uACE0\uB300 \uC218\uD638\uBAA9", "\uC790\uC5F0\uC758 \uBCF5\uC218\uC790", "\uAC70\uB300 \uD3EC\uC2DD\uC790", "\uC815\uB839 \uAD70\uC8FC", "\uC138\uACC4\uC218 \uAC00\uC9C0", "\uC790\uC5F0\uC758 \uBD84\uB178"]
      },
      boss: {
        undead: ["\uB9AC\uCE58", "\uD574\uACE8 \uC655", "\uB9DD\uB839\uC758 \uAD70\uC8FC", "\uC8FD\uC74C\uC758 \uD654\uC2E0", "\uC5B8\uB370\uB4DC \uB85C\uB4DC", "\uB9DD\uC790\uC758 \uC655"],
        demon: ["\uB9C8\uC655", "\uC9C0\uC625\uC758 \uAD70\uC8FC", "\uB370\uBAAC \uB85C\uB4DC", "\uD654\uC5FC\uC758 \uAD70\uC8FC", "\uC545\uB9C8 \uB300\uC655", "\uC2EC\uC5F0\uC758 \uC9C0\uBC30\uC790"],
        ancient: ["\uD0C0\uC774\uD0C4", "\uACE0\uB300 \uC655", "\uC720\uC801\uC758 \uC218\uD638\uC2E0", "\uCD5C\uD6C4\uC758 \uC218\uD638\uC790", "\uACE0\uB300 \uD669\uC81C", "\uBD09\uC778\uB41C \uC2E0"],
        beast: ["\uC9D0\uC2B9\uC758 \uC655", "\uD0DC\uACE0\uC758 \uB9F9\uC218", "\uC57C\uC218 \uAD70\uC8FC", "\uC6D0\uC2DC\uC758 \uD3EC\uC2DD\uC790", "\uB9CC\uBB3C\uC758 \uC0AC\uB0E5\uAFBC", "\uACE0\uB300 \uC6A9"],
        magic: ["\uB300\uB9C8\uBC95\uC0AC", "\uCC28\uC6D0 \uC9C0\uBC30\uC790", "\uB9C8\uBC95\uC758 \uD654\uC2E0", "\uB9C8\uB098\uC758 \uAD70\uC8FC", "\uACF5\uAC04\uC758 \uC9C0\uBC30\uC790", "\uD604\uC2E4 \uC65C\uACE1\uC790"],
        nature: ["\uC138\uACC4\uC218 \uC218\uD638\uC790", "\uC790\uC5F0\uC758 \uD654\uC2E0", "\uC6D0\uC2DC\uB9BC \uAD70\uC8FC", "\uB300\uC9C0\uC758 \uBD84\uB178", "\uC0DD\uBA85\uC758 \uC9C0\uBC30\uC790", "\uC790\uC5F0 \uADF8 \uC790\uCCB4"]
      }
    };
    const theme = dungeonType.theme || "undead";
    const monsterNames = names[type][theme] || ["\uC54C \uC218 \uC5C6\uB294 \uBAAC\uC2A4\uD130"];
    return monsterNames[Math.floor(random() * monsterNames.length)];
  }
  /**
   * 엘리트 속성 생성
   */
  generateEliteAffixes(count, random) {
    const affixes = [
      "\uAC15\uD654",
      // HP +50%
      "\uC7AC\uC0DD",
      // 턴당 HP 회복
      "\uD654\uC5FC",
      // 화염 피해 추가
      "\uB0C9\uAE30",
      // 이동 방해
      "\uB3C5",
      // 지속 피해
      "\uBC88\uAC1C",
      // 추가 피해
      "\uD761\uD608",
      // 피해의 30% 회복
      "\uBC18\uC0AC",
      // 피해 반사
      "\uC2E0\uC18D",
      // 공격력 +30%
      "\uACAC\uACE0",
      // 방어력 +50%
      "\uAD11\uD3ED\uD654",
      // HP 50% 이하시 공격력 2배
      "\uBD84\uC5F4",
      // 사망시 작은 몬스터 생성
      "\uC21C\uAC04\uC774\uB3D9",
      // 랜덤 회피
      "\uB9C8\uBC95\uC800\uD56D",
      // 마법 피해 -50%
      "\uBB3C\uB9AC\uC800\uD56D"
      // 물리 피해 -50%
    ];
    const selected = [];
    const shuffled = [...affixes].sort(() => random() - 0.5);
    for (let i = 0; i < count && i < shuffled.length; i++) {
      selected.push(shuffled[i]);
    }
    return selected;
  }
  /**
   * 엘리트 속성 적용
   */
  applyEliteAffix(monster, affix) {
    switch (affix) {
      case "\uAC15\uD654":
        monster.hp = Math.floor(monster.hp * 1.5);
        monster.maxHp = Math.floor(monster.maxHp * 1.5);
        break;
      case "\uACAC\uACE0":
        monster.defense = Math.floor(monster.defense * 1.5);
        break;
      case "\uC2E0\uC18D":
        monster.attack = Math.floor(monster.attack * 1.3);
        break;
      case "\uD654\uC5FC":
      case "\uB0C9\uAE30":
      case "\uB3C5":
      case "\uBC88\uAC1C":
        monster.attack = Math.floor(monster.attack * 1.2);
        break;
    }
  }
  /**
   * 보물 상자 생성
   */
  createTreasureChest(floorNumber, difficulty, random) {
    const difficultyBonusMap = {
      easy: 0.75,
      normal: 1,
      hard: 1.5,
      hell: 2
    };
    const difficultyBonus = difficultyBonusMap[difficulty] || 1;
    return {
      id: `chest_${Date.now()}_${random()}`,
      type: "chest",
      name: "\uBCF4\uBB3C \uC0C1\uC790",
      description: "\uBC18\uC9DD\uC774\uB294 \uBCF4\uBB3C \uC0C1\uC790. \uADC0\uC911\uD55C \uC544\uC774\uD15C\uC774 \uB4E4\uC5B4\uC788\uC744 \uAC83 \uAC19\uB2E4.",
      isLocked: random() < 0.2,
      // 20% 확률로 잠김
      lockDifficulty: Math.floor(floorNumber * difficultyBonus),
      lootGold: Math.floor((100 + random() * 200) * floorNumber * difficultyBonus),
      lootItems: [],
      isUsed: false
    };
  }
  /**
   * 성소 생성
   */
  createShrine(random) {
    const shrineTypes = [
      { type: "health", name: "\uC0DD\uBA85\uC758 \uC131\uC18C", value: 50, duration: 30, description: "\uCD5C\uB300 HP\uAC00 50% \uC99D\uAC00\uD569\uB2C8\uB2E4." },
      { type: "mana", name: "\uB9C8\uB098\uC758 \uC131\uC18C", value: 30, duration: 30, description: "\uCD5C\uB300 MP\uAC00 30% \uC99D\uAC00\uD569\uB2C8\uB2E4." },
      { type: "damage", name: "\uD798\uC758 \uC131\uC18C", value: 25, duration: 15, description: "\uACF5\uACA9\uB825\uC774 25% \uC99D\uAC00\uD569\uB2C8\uB2E4." },
      { type: "defense", name: "\uBCF4\uD638\uC758 \uC131\uC18C", value: 20, duration: 15, description: "\uBC29\uC5B4\uB825\uC774 20% \uC99D\uAC00\uD569\uB2C8\uB2E4." },
      { type: "experience", name: "\uC9C0\uD61C\uC758 \uC131\uC18C", value: 100, duration: 10, description: "\uD68D\uB4DD \uACBD\uD5D8\uCE58\uAC00 100% \uC99D\uAC00\uD569\uB2C8\uB2E4." },
      { type: "gold", name: "\uBD80\uC758 \uC131\uC18C", value: 50, duration: 10, description: "\uD68D\uB4DD \uACE8\uB4DC\uAC00 50% \uC99D\uAC00\uD569\uB2C8\uB2E4." },
      { type: "speed", name: "\uC2E0\uC18D\uC758 \uC131\uC18C", value: 30, duration: 20, description: "\uC774\uB3D9 \uC18D\uB3C4\uAC00 30% \uC99D\uAC00\uD569\uB2C8\uB2E4." },
      { type: "luck", name: "\uD589\uC6B4\uC758 \uC131\uC18C", value: 20, duration: 20, description: "\uC544\uC774\uD15C \uB4DC\uB86D\uB960\uC774 20% \uC99D\uAC00\uD569\uB2C8\uB2E4." }
    ];
    const selected = shrineTypes[Math.floor(random() * shrineTypes.length)];
    return {
      id: `shrine_${Date.now()}_${random()}`,
      type: "shrine",
      name: selected.name,
      description: selected.description,
      shrineEffect: {
        type: selected.type,
        value: selected.value,
        duration: selected.duration
      },
      isUsed: false
    };
  }
  /**
   * 던전 난이도별 보상 배율
   */
  getDifficultyRewardMultiplier(difficulty) {
    const multipliers = {
      easy: 0.75,
      normal: 1,
      hard: 1.5,
      hell: 2.5
    };
    return multipliers[difficulty] || 1;
  }
  /**
   * 층별 위험도 계산
   */
  getFloorDangerLevel(floorNumber, totalFloors) {
    return 1 + floorNumber / totalFloors * 2;
  }
  /**
   * 방 타입별 가중치
   */
  getRoomTypeWeights(floorNumber, totalFloors) {
    const progress = floorNumber / totalFloors;
    return {
      normal: 0.45,
      elite: 0.15 + progress * 0.15,
      // 진행할수록 증가
      treasure: 0.15,
      shrine: 0.12,
      shop: 0.08,
      event: 0.05,
      safe: Math.max(0.05 - progress * 0.05, 0)
      // 진행할수록 감소
    };
  }
  static \u0275fac = function DungeonGeneratorService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _DungeonGeneratorService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _DungeonGeneratorService, factory: _DungeonGeneratorService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(DungeonGeneratorService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [], null);
})();

// src/app/modules/novel/services/dungeon.service.ts
var DungeonService = class _DungeonService {
  dungeonGenerator;
  constructor(dungeonGenerator) {
    this.dungeonGenerator = dungeonGenerator;
  }
  /**
   * 기본 던전 타입 목록 생성
   */
  getDefaultDungeonTypes() {
    return [
      {
        id: "catacombs",
        name: "Catacombs",
        koreanName: "\uBC84\uB824\uC9C4 \uC9C0\uD558\uBB18\uC9C0",
        theme: "undead",
        icon: "\u26B0\uFE0F",
        description: "\uC5B8\uB370\uB4DC\uAC00 \uBC30\uD68C\uD558\uB294 \uC624\uB798\uB41C \uBB34\uB364",
        backgroundColor: "#1a1a2e",
        minLevel: 1,
        recommendedLevel: 3,
        baseFloors: 4,
        monsterTypes: ["zombie", "skeleton", "ghost"],
        bossType: "lich",
        baseGoldReward: 200,
        baseExpReward: 150,
        uniqueItems: ["bone_wand", "death_amulet"],
        storyDescription: "\uC232 \uC18D\uC5D0\uC11C \uBC1C\uACAC\uD55C \uC5B4\uB450\uC6B4 \uB3D9\uAD74 \uC785\uAD6C. \uC5B8\uB370\uB4DC\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4."
      },
      {
        id: "demon_cave",
        name: "Demon Cave",
        koreanName: "\uB9C8\uC871\uC758 \uB3D9\uAD74",
        theme: "demon",
        icon: "\u{1F479}",
        description: "\uB9C8\uC871\uC774 \uC228\uC5B4\uC788\uB2E4\uB294 \uC18C\uBB38\uC758 \uB3D9\uAD74",
        backgroundColor: "#8B0000",
        minLevel: 10,
        recommendedLevel: 15,
        baseFloors: 6,
        monsterTypes: ["imp", "hellhound", "demon_warrior"],
        bossType: "demon_lord",
        baseGoldReward: 500,
        baseExpReward: 400,
        uniqueItems: ["demonic_blade", "hellfire_ring"],
        storyDescription: "\uC0B0 \uC18D \uAE4A\uC740 \uACF3\uC5D0\uC11C \uBC1C\uACAC\uD55C \uBD89\uAC8C \uBE5B\uB098\uB294 \uB3D9\uAD74. \uC720\uD669 \uB0C4\uC0C8\uAC00 \uC9C4\uB3D9\uD55C\uB2E4."
      },
      {
        id: "ancient_ruins",
        name: "Ancient Ruins",
        koreanName: "\uACE0\uB300 \uC720\uC801",
        theme: "ancient",
        icon: "\u{1F3DB}\uFE0F",
        description: "\uACE0\uB300 \uBB38\uBA85\uC758 \uD754\uC801\uC774 \uB0A8\uC544\uC788\uB294 \uC720\uC801",
        backgroundColor: "#2F4F4F",
        minLevel: 20,
        recommendedLevel: 25,
        baseFloors: 8,
        monsterTypes: ["golem", "animated_armor", "ancient_guardian"],
        bossType: "titan",
        baseGoldReward: 1e3,
        baseExpReward: 800,
        uniqueItems: ["ancient_artifact", "rune_stone"],
        storyDescription: "\uC0AC\uB9C9\uC5D0\uC11C \uBC1C\uACAC\uD55C \uAC70\uB300\uD55C \uC720\uC801. \uAC15\uB825\uD55C \uB9C8\uBC95\uC774 \uBD09\uC778\uB418\uC5B4 \uC788\uB2E4."
      }
    ];
  }
  /**
   * 던전 생성
   */
  generateDungeon(dungeonType, difficulty, playerLevel) {
    const dungeon = this.dungeonGenerator.generateDungeon(dungeonType, difficulty, playerLevel);
    return dungeon;
  }
  /**
   * 던전 입장 가능 여부 확인
   */
  canEnterDungeon(dungeonType, playerCharacter) {
    if (playerCharacter.level < dungeonType.minLevel) {
      return {
        canEnter: false,
        reason: `\uB808\uBCA8 ${dungeonType.minLevel} \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4`
      };
    }
    return { canEnter: true };
  }
  /**
   * 층 생성
   */
  generateFloor(floorNumber, totalFloors, dungeonType, difficulty, seed) {
    const isLastFloor = floorNumber === totalFloors;
    const roomCount = 5 + Math.floor(Math.random() * 3);
    const rooms = [];
    const entranceRoom = this.createRoom("entrance", floorNumber, dungeonType, difficulty);
    rooms.push(entranceRoom);
    for (let i = 0; i < roomCount - 2; i++) {
      const roomType = this.selectRandomRoomType(isLastFloor);
      const room = this.createRoom(roomType, floorNumber, dungeonType, difficulty);
      rooms.push(room);
    }
    if (isLastFloor) {
      const bossRoom = this.createRoom("boss", floorNumber, dungeonType, difficulty);
      rooms.push(bossRoom);
    } else {
      const exitRoom = this.createRoom("exit", floorNumber, dungeonType, difficulty);
      rooms.push(exitRoom);
    }
    for (let i = 0; i < rooms.length - 1; i++) {
      rooms[i].connectedRoomIds.push(rooms[i + 1].id);
      rooms[i + 1].connectedRoomIds.push(rooms[i].id);
    }
    const floor = {
      floorNumber,
      rooms,
      entranceRoomId: rooms[0].id,
      exitRoomId: isLastFloor ? void 0 : rooms[rooms.length - 1].id,
      bossRoomId: isLastFloor ? rooms[rooms.length - 1].id : void 0,
      isCleared: false,
      generatedAt: /* @__PURE__ */ new Date()
    };
    return floor;
  }
  /**
   * 방 생성
   */
  createRoom(type, floorNumber, dungeonType, difficulty) {
    const roomId = `room_${Date.now()}_${Math.random()}`;
    const room = {
      id: roomId,
      type,
      size: "medium",
      description: this.getRoomDescription(type, dungeonType),
      monsters: [],
      isCleared: type === "entrance" || type === "exit" || type === "treasure" || type === "shrine" || type === "shop" || type === "safe",
      interactables: [],
      connectedRoomIds: [],
      isExplored: type === "entrance",
      isCurrentRoom: false
    };
    if (type === "normal" || type === "elite" || type === "boss") {
      room.monsters = this.spawnMonsters(type, floorNumber, dungeonType, difficulty);
    }
    if (type === "treasure") {
      room.interactables.push(this.createTreasureChest(floorNumber, difficulty));
    } else if (type === "shrine") {
      room.interactables.push(this.createShrine());
    }
    return room;
  }
  /**
   * 랜덤 방 타입 선택
   */
  selectRandomRoomType(isLastFloor) {
    if (isLastFloor) {
      const specialRooms = ["normal", "elite", "treasure", "shrine"];
      return specialRooms[Math.floor(Math.random() * specialRooms.length)];
    }
    const rand = Math.random();
    if (rand < 0.5)
      return "normal";
    if (rand < 0.7)
      return "elite";
    if (rand < 0.85)
      return "treasure";
    if (rand < 0.95)
      return "shrine";
    return "shop";
  }
  /**
   * 방 설명 생성
   */
  getRoomDescription(type, dungeonType) {
    const descriptions = {
      entrance: {
        undead: ["\uC881\uC740 \uD1B5\uB85C. \uBCBD\uC5D0 \uC624\uB798\uB41C \uD683\uBD88\uC774 \uCF1C\uC838\uC788\uB2E4.", "\uC785\uAD6C\uC5D0\uC11C \uCC28\uAC00\uC6B4 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4."],
        demon: ["\uBD89\uAC8C \uD0C0\uC624\uB974\uB294 \uC785\uAD6C. \uC720\uD669 \uB0C4\uC0C8\uAC00 \uC9C4\uB3D9\uD55C\uB2E4.", "\uB9C8\uC871\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C0\uB294 \uB3D9\uAD74 \uC785\uAD6C."],
        ancient: ["\uAC70\uB300\uD55C \uC11D\uC870 \uBB38. \uACE0\uB300 \uBB38\uC790\uAC00 \uC0C8\uACA8\uC838 \uC788\uB2E4.", "\uC6C5\uC7A5\uD55C \uC785\uAD6C. \uC138\uC6D4\uC758 \uD754\uC801\uC774 \uC5ED\uB825\uD558\uB2E4."]
      },
      normal: {
        undead: ["\uAD00\uC774 \uB298\uC5B4\uC120 \uBC29. \uBB34\uC5B8\uAC00 \uC6C0\uC9C1\uC774\uB294 \uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4.", "\uC5B4\uB450\uC6B4 \uBC29. \uBF08\uB2E4\uADC0\uAC00 \uBC14\uB2E5\uC5D0 \uD769\uC5B4\uC838 \uC788\uB2E4."],
        demon: ["\uBD89\uC740 \uBE5B\uC774 \uAC10\uB3C4\uB294 \uBC29. \uC5F4\uAE30\uAC00 \uB290\uAEF4\uC9C4\uB2E4.", "\uC6A9\uC554\uC774 \uD750\uB974\uB294 \uBC29. \uB9C8\uC871\uC758 \uC6B8\uC74C\uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4."],
        ancient: ["\uBA3C\uC9C0\uAC00 \uC313\uC778 \uBC29. \uACE0\uB300 \uC720\uBB3C\uB4E4\uC774 \uB193\uC5EC\uC788\uB2E4.", "\uB113\uC740 \uD640. \uC11D\uC0C1\uB4E4\uC774 \uB3C4\uC5F4\uD574 \uC788\uB2E4."]
      },
      elite: {
        undead: ["\uAC15\uB825\uD55C \uC5B8\uB370\uB4DC\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C0\uB294 \uBC29.", "\uC5D8\uB9AC\uD2B8 \uBAAC\uC2A4\uD130\uC758 \uC601\uC5ED. \uC704\uD5D8\uD55C \uBD84\uC704\uAE30\uAC00 \uAC10\uB3C8\uB2E4."],
        demon: ["\uAC15\uB825\uD55C \uB9C8\uC871\uC774 \uC9C0\uD0A4\uB294 \uBC29. \uC555\uB3C4\uC801\uC778 \uD798\uC774 \uB290\uAEF4\uC9C4\uB2E4.", "\uC5D8\uB9AC\uD2B8 \uC545\uB9C8\uC758 \uAC70\uCC98. \uBD89\uC740 \uBD88\uAF43\uC774 \uD0C0\uC624\uB978\uB2E4."],
        ancient: ["\uACE0\uB300\uC758 \uC815\uC608 \uC218\uD638\uC790\uB4E4\uC774 \uC9C0\uD0A4\uB294 \uBC29.", "\uAC15\uB825\uD55C \uB9C8\uBC95\uC758 \uAE30\uC6B4\uC774 \uAC10\uB3C4\uB294 \uBC29."]
      },
      boss: {
        undead: ["\uAC70\uB300\uD55C \uD574\uACE8 \uC655\uC88C\uAC00 \uB193\uC778 \uBC29. \uCD5C\uC885 \uBCF4\uC2A4\uC758 \uC601\uC5ED.", "\uC5B8\uB370\uB4DC \uAD70\uC8FC\uC758 \uBC29. \uC555\uB3C4\uC801\uC778 \uC0AC\uC545\uD568\uC774 \uB290\uAEF4\uC9C4\uB2E4."],
        demon: ["\uC9C0\uC625\uC758 \uAD70\uC8FC\uAC00 \uC9C0\uBC30\uD558\uB294 \uBC29. \uBD88\uC9C0\uC625\uC774 \uD3BC\uCCD0\uC9C4\uB2E4.", "\uB9C8\uC655\uC758 \uAC70\uCC98. \uCC28\uC6D0\uC774 \uB4A4\uD2C0\uB9AC\uB294 \uB290\uB08C\uC774 \uB4E0\uB2E4."],
        ancient: ["\uACE0\uB300 \uC2E0\uC758 \uC131\uC18C. \uC2E0\uC131\uD55C \uD798\uACFC \uB3D9\uC2DC\uC5D0 \uD30C\uAD34\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.", "\uCD5C\uC885 \uC218\uD638\uC790\uC758 \uBC29. \uAC70\uB300\uD55C \uB9C8\uBC95\uC9C4\uC774 \uADF8\uB824\uC838 \uC788\uB2E4."]
      },
      treasure: {
        undead: ["\uBA3C\uC9C0 \uC313\uC778 \uC0C1\uC790\uAC00 \uB193\uC5EC\uC788\uB2E4.", "\uBE44\uBC00\uC2A4\uB7EC\uC6B4 \uBCF4\uBB3C \uBC29. \uBE5B\uB098\uB294 \uC0C1\uC790\uAC00 \uBCF4\uC778\uB2E4."],
        demon: ["\uD654\uC5FC\uC5D0 \uB458\uB7EC\uC2F8\uC778 \uBCF4\uBB3C \uC0C1\uC790.", "\uB9C8\uC871\uC774 \uC9C0\uD0A4\uB358 \uBCF4\uBB3C \uBC29."],
        ancient: ["\uBD09\uC778\uB41C \uBCF4\uBB3C \uC0C1\uC790. \uB8EC \uBB38\uC790\uAC00 \uC0C8\uACA8\uC838 \uC788\uB2E4.", "\uACE0\uB300\uC758 \uBCF4\uBB3C \uCC3D\uACE0."]
      },
      shrine: {
        undead: ["\uC2E0\uC131\uD55C \uBE5B\uC774 \uAC10\uB3C4\uB294 \uC81C\uB2E8. \uBD88\uAE38\uD55C \uBD84\uC704\uAE30\uC640 \uB300\uBE44\uB41C\uB2E4.", "\uCD95\uBCF5\uC758 \uC131\uC18C. \uC5B8\uB370\uB4DC\uC758 \uC800\uC8FC\uB97C \uC815\uD654\uD560 \uC218 \uC788\uC744 \uAC83 \uAC19\uB2E4."],
        demon: ["\uBD89\uC740 \uC81C\uB2E8. \uC545\uB9C8\uC758 \uD798\uC744 \uBE4C\uB9B4 \uC218 \uC788\uC744 \uAC83 \uAC19\uB2E4.", "\uB9C8\uB825\uC758 \uC131\uC18C. \uAC15\uB825\uD55C \uBC84\uD504\uB97C \uBC1B\uC744 \uC218 \uC788\uB2E4."],
        ancient: ["\uACE0\uB300\uC758 \uC81C\uB2E8. \uC2E0\uBE44\uD55C \uD798\uC774 \uAE43\uB4E4\uC5B4 \uC788\uB2E4.", "\uCD95\uBCF5\uC758 \uC131\uC18C. \uACE0\uB300 \uC2E0\uC758 \uC740\uCD1D\uC774 \uB290\uAEF4\uC9C4\uB2E4."]
      },
      shop: {
        undead: ["\uB5A0\uB3CC\uC774 \uC0C1\uC778\uC774 \uC788\uB294 \uBC29. \uC5B4\uB460 \uC18D\uC5D0\uC11C \uBE5B\uB098\uB294 \uBB3C\uAC74\uB4E4.", "\uBE44\uBC00 \uC0C1\uC810. \uADC0\uD55C \uBB3C\uD488\uB4E4\uC774 \uC9C4\uC5F4\uB418\uC5B4 \uC788\uB2E4."],
        demon: ["\uD654\uC5FC\uC758 \uB300\uC7A5\uC7A5\uC774\uAC00 \uC788\uB294 \uBC29. \uB9C8\uBC95 \uBB34\uAE30\uB4E4\uC774 \uC9C4\uC5F4\uB418\uC5B4 \uC788\uB2E4.", "\uC545\uB9C8\uC758 \uC0C1\uC778. \uC704\uD5D8\uD558\uC9C0\uB9CC \uAC15\uB825\uD55C \uBB3C\uAC74\uB4E4\uC744 \uD310\uB2E4."],
        ancient: ["\uACE0\uB300 \uC720\uBB3C \uC0C1\uC810. \uC804\uC124\uC801\uC778 \uBB3C\uAC74\uB4E4\uC774 \uB193\uC5EC\uC788\uB2E4.", "\uC218\uC9D1\uAC00\uC758 \uBC29. \uD76C\uADC0\uD55C \uC544\uC774\uD15C\uB4E4\uC774 \uAC00\uB4DD\uD558\uB2E4."]
      },
      safe: {
        undead: ["\uACE0\uC694\uD55C \uBC29. \uC7A0\uC2DC \uC274 \uC218 \uC788\uC744 \uAC83 \uAC19\uB2E4.", "\uC548\uC804\uD55C \uD53C\uB09C\uCC98. \uC5B8\uB370\uB4DC\uB4E4\uC774 \uB4E4\uC5B4\uC62C \uC218 \uC5C6\uB2E4."],
        demon: ["\uB9C8\uBC95\uC73C\uB85C \uBCF4\uD638\uB41C \uBC29. \uC548\uC804\uD558\uAC8C \uC274 \uC218 \uC788\uB2E4.", "\uACB0\uACC4\uAC00 \uCCD0\uC9C4 \uC548\uC804 \uC9C0\uB300."],
        ancient: ["\uC131\uC2A4\uB7EC\uC6B4 \uBCF4\uD638\uB9C9\uC774 \uC788\uB294 \uBC29. \uC644\uC804\uD788 \uC548\uC804\uD558\uB2E4.", "\uACE0\uB300\uC758 \uC548\uC2DD\uCC98. \uB9C8\uBC95\uC758 \uBCF4\uD638\uB97C \uBC1B\uB294\uB2E4."]
      },
      exit: {
        undead: ["\uB2E4\uC74C \uCE35\uC73C\uB85C \uC774\uC5B4\uC9C0\uB294 \uACC4\uB2E8.", "\uB354 \uAE4A\uC740 \uC5B4\uB460\uC73C\uB85C \uD5A5\uD558\uB294 \uAE38."],
        demon: ["\uB354 \uB728\uAC70\uC6B4 \uC9C0\uC625\uC73C\uB85C \uB0B4\uB824\uAC00\uB294 \uAE38.", "\uB2E4\uC74C \uCE35\uC758 \uC785\uAD6C. \uC5F4\uAE30\uAC00 \uB354 \uAC15\uD574\uC9C4\uB2E4."],
        ancient: ["\uB2E4\uC74C \uCE35\uC73C\uB85C \uD5A5\uD558\uB294 \uAD00\uBB38.", "\uB354 \uAE4A\uC740 \uC720\uC801\uC73C\uB85C \uC774\uC5B4\uC9C0\uB294 \uD1B5\uB85C."]
      }
    };
    const themeDescriptions = descriptions[type]?.[dungeonType.theme] || ["\uD3C9\uBC94\uD55C \uBC29."];
    return themeDescriptions[Math.floor(Math.random() * themeDescriptions.length)];
  }
  /**
   * 몬스터 스폰
   */
  spawnMonsters(roomType, floorNumber, dungeonType, difficulty, playerLevel = 1) {
    const monsters = [];
    const baseLevel = playerLevel + floorNumber - 1;
    const difficultyMultiplier = {
      easy: 0.7,
      normal: 1,
      hard: 1.3,
      hell: 1.6
    }[difficulty];
    if (roomType === "normal") {
      const count = 2 + Math.floor(Math.random() * 2);
      for (let i = 0; i < count; i++) {
        monsters.push(this.createMonster("normal", baseLevel, dungeonType, difficultyMultiplier));
      }
    } else if (roomType === "elite") {
      const count = 1 + Math.floor(Math.random() * 2);
      for (let i = 0; i < count; i++) {
        monsters.push(this.createMonster("elite", baseLevel + 2, dungeonType, difficultyMultiplier));
      }
    } else if (roomType === "boss") {
      monsters.push(this.createMonster("boss", baseLevel + 5, dungeonType, difficultyMultiplier));
    }
    return monsters;
  }
  /**
   * 몬스터 생성
   */
  createMonster(type, level, dungeonType, difficultyMultiplier) {
    const monsterId = `monster_${Date.now()}_${Math.random()}`;
    const baseHp = 50 + level * 20;
    const baseAttack = 10 + level * 3;
    const baseDefense = 5 + level * 2;
    const typeMultiplier = {
      normal: 1,
      elite: 2,
      boss: 5
    }[type];
    const monster = {
      id: monsterId,
      name: this.getMonsterName(type, dungeonType),
      type,
      level,
      hp: Math.floor(baseHp * typeMultiplier * difficultyMultiplier),
      maxHp: Math.floor(baseHp * typeMultiplier * difficultyMultiplier),
      attack: Math.floor(baseAttack * typeMultiplier * difficultyMultiplier),
      defense: Math.floor(baseDefense * typeMultiplier * difficultyMultiplier),
      dropTable: {
        goldMin: Math.floor(10 * level * typeMultiplier),
        goldMax: Math.floor(20 * level * typeMultiplier),
        itemDropChance: type === "boss" ? 1 : type === "elite" ? 0.5 : 0.2,
        itemRarity: type === "boss" ? "legendary" : type === "elite" ? "rare" : "common"
      },
      isDead: false
    };
    if (type === "elite" || type === "boss") {
      monster.eliteAffixes = this.generateEliteAffixes(type === "boss" ? 3 : 2);
    }
    return monster;
  }
  /**
   * 몬스터 이름 생성
   */
  getMonsterName(type, dungeonType) {
    const names = {
      normal: {
        undead: ["\uC880\uBE44", "\uC2A4\uCF08\uB808\uD1A4", "\uC720\uB839"],
        demon: ["\uC784\uD504", "\uD5EC\uD558\uC6B4\uB4DC", "\uB9C8\uC871 \uC804\uC0AC"],
        ancient: ["\uACE8\uB818", "\uC6C0\uC9C1\uC774\uB294 \uAC11\uC637", "\uACE0\uB300 \uC218\uD638\uC790"]
      },
      elite: {
        undead: ["\uAC15\uD654\uB41C \uC880\uBE44", "\uACE0\uC704 \uC2A4\uCF08\uB808\uD1A4", "\uC6D0\uD55C\uC758 \uC720\uB839"],
        demon: ["\uC0C1\uAE09 \uC784\uD504", "\uC9C0\uC625\uC758 \uC0AC\uB0E5\uAC1C", "\uB9C8\uC871 \uB300\uC7A5"],
        ancient: ["\uACE0\uB300 \uACE8\uB818", "\uB9C8\uBC95 \uAC11\uC637", "\uC218\uD638\uC790 \uB300\uC7A5"]
      },
      boss: {
        undead: ["\uB9AC\uCE58", "\uD574\uACE8 \uC655", "\uB9DD\uB839\uC758 \uAD70\uC8FC"],
        demon: ["\uB9C8\uC655", "\uC9C0\uC625\uC758 \uAD70\uC8FC", "\uB370\uBAAC \uB85C\uB4DC"],
        ancient: ["\uD0C0\uC774\uD0C4", "\uACE0\uB300 \uC655", "\uC720\uC801\uC758 \uC218\uD638\uC2E0"]
      }
    };
    const monsterNames = names[type][dungeonType.theme] || ["\uC54C \uC218 \uC5C6\uB294 \uBAAC\uC2A4\uD130"];
    return monsterNames[Math.floor(Math.random() * monsterNames.length)];
  }
  /**
   * 엘리트 속성 생성
   */
  generateEliteAffixes(count) {
    const affixes = ["\uAC15\uD654", "\uC7AC\uC0DD", "\uD654\uC5FC", "\uB0C9\uAE30", "\uB3C5", "\uBC88\uAC1C", "\uD761\uD608", "\uBC18\uC0AC"];
    const selected = [];
    for (let i = 0; i < count && affixes.length > 0; i++) {
      const index = Math.floor(Math.random() * affixes.length);
      selected.push(affixes[index]);
      affixes.splice(index, 1);
    }
    return selected;
  }
  /**
   * 보물 상자 생성
   */
  createTreasureChest(floorNumber, difficulty) {
    const chest = {
      id: `chest_${Date.now()}`,
      type: "chest",
      name: "\uBCF4\uBB3C \uC0C1\uC790",
      description: "\uBC18\uC9DD\uC774\uB294 \uBCF4\uBB3C \uC0C1\uC790. \uADC0\uC911\uD55C \uC544\uC774\uD15C\uC774 \uB4E4\uC5B4\uC788\uC744 \uAC83 \uAC19\uB2E4.",
      isLocked: false,
      lootItems: [],
      isUsed: false
    };
    return chest;
  }
  /**
   * 성소 생성
   */
  createShrine() {
    const shrineTypes = [
      { type: "health", value: 50, duration: 30 },
      { type: "mana", value: 30, duration: 30 },
      { type: "damage", value: 20, duration: 10 },
      { type: "defense", value: 15, duration: 10 },
      { type: "experience", value: 50, duration: 5 }
    ];
    const selected = shrineTypes[Math.floor(Math.random() * shrineTypes.length)];
    return {
      id: `shrine_${Date.now()}`,
      type: "shrine",
      name: "\uC2E0\uBE44\uB85C\uC6B4 \uC131\uC18C",
      description: "\uC131\uC18C\uC5D0\uC11C \uC2E0\uC131\uD55C \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.",
      shrineEffect: selected,
      isUsed: false
    };
  }
  /**
   * 난이도 한글 변환
   */
  getDifficultyKorean(difficulty) {
    const difficultyNames = {
      "easy": "\uC26C\uC6C0",
      "normal": "\uBCF4\uD1B5",
      "hard": "\uC5B4\uB824\uC6C0",
      "hell": "\uC9C0\uC625"
    };
    return difficultyNames[difficulty] || difficulty;
  }
  /**
   * 던전 클리어 보상 계산
   */
  calculateDungeonRewards(dungeonType, difficulty) {
    const difficultyMultiplier = {
      easy: 0.7,
      normal: 1,
      hard: 1.5,
      hell: 2
    }[difficulty];
    const gold = Math.floor(dungeonType.baseGoldReward * difficultyMultiplier);
    const exp = Math.floor(dungeonType.baseExpReward * difficultyMultiplier);
    const items = [];
    if (Math.random() < 0.3) {
      const uniqueItem = dungeonType.uniqueItems[Math.floor(Math.random() * dungeonType.uniqueItems.length)];
      items.push(uniqueItem);
    }
    return { gold, exp, items };
  }
  /**
   * 방이 클리어되었는지 확인
   */
  isRoomCleared(room) {
    if (room.isCleared)
      return true;
    if (room.monsters && room.monsters.length > 0) {
      return room.monsters.every((m) => m.isDead);
    }
    return false;
  }
  /**
   * 방 클리어 처리
   */
  clearRoom(room) {
    room.isCleared = true;
    if (room.monsters) {
      room.monsters.forEach((m) => m.isDead = true);
    }
  }
  static \u0275fac = function DungeonService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _DungeonService)(\u0275\u0275inject(DungeonGeneratorService));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _DungeonService, factory: _DungeonService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(DungeonService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: DungeonGeneratorService }], null);
})();

// src/app/modules/novel/services/inventory.service.ts
var InventoryService = class _InventoryService {
  /**
   * 인벤토리에 아이템 추가
   */
  addItem(inventory, itemId, quantity = 1, shopItems) {
    const existingItem = inventory.find((item) => item.id === itemId);
    if (existingItem) {
      return inventory.map((item) => item.id === itemId ? __spreadProps(__spreadValues({}, item), { quantity: item.quantity + quantity }) : item);
    } else {
      const shopItem = shopItems.find((item) => item.id === itemId);
      const specialItem = this.getSpecialItem(itemId);
      const sourceItem = shopItem || specialItem;
      if (sourceItem) {
        const newItem = {
          id: sourceItem.id,
          name: sourceItem.name,
          description: sourceItem.description || "",
          type: this.mapShopTypeToInventoryType(sourceItem.type),
          quantity,
          buyPrice: "price" in sourceItem ? sourceItem.price : 0,
          sellPrice: "price" in sourceItem ? Math.floor(sourceItem.price * 0.7) : 0,
          rarity: sourceItem.rarity,
          stats: "stats" in sourceItem ? sourceItem.stats : void 0,
          isEquipped: false
        };
        return [...inventory, newItem];
      }
      return inventory;
    }
  }
  /**
   * 인벤토리에서 아이템 제거
   */
  removeItem(inventory, itemId, quantity = 1) {
    const item = inventory.find((item2) => item2.id === itemId);
    if (!item) {
      return inventory;
    }
    if (item.quantity <= quantity) {
      return inventory.filter((invItem) => invItem.id !== itemId);
    } else {
      return inventory.map((invItem) => invItem.id === itemId ? __spreadProps(__spreadValues({}, invItem), { quantity: invItem.quantity - quantity }) : invItem);
    }
  }
  /**
   * 아이템 찾기
   */
  findItem(inventory, itemId) {
    return inventory.find((item) => item.id === itemId);
  }
  /**
   * 아이템 소유 여부 확인
   */
  hasItem(inventory, itemId, quantity = 1) {
    const item = this.findItem(inventory, itemId);
    return item ? item.quantity >= quantity : false;
  }
  /**
   * 인벤토리 필터링
   */
  filterByType(inventory, type) {
    if (type === "all") {
      return inventory;
    }
    const typeMap = {
      weapon: ["weapon"],
      armor: ["armor", "helmet", "gloves", "boots", "belt"],
      accessory: ["amulet", "ring", "accessory"],
      consumable: ["consumable"],
      material: ["material", "quest", "misc"]
    };
    const allowedTypes = typeMap[type] || [];
    return inventory.filter((item) => allowedTypes.includes(item.type));
  }
  /**
   * 인벤토리 정렬
   */
  sortInventory(inventory, sortBy) {
    const sorted = [...inventory];
    switch (sortBy) {
      case "rarity":
        const rarityOrder = ["mythic", "legendary", "epic", "rare", "uncommon", "common"];
        return sorted.sort((a, b) => {
          return rarityOrder.indexOf(a.rarity) - rarityOrder.indexOf(b.rarity);
        });
      case "type":
        return sorted.sort((a, b) => a.type.localeCompare(b.type));
      case "name":
        return sorted.sort((a, b) => a.name.localeCompare(b.name));
      case "recent":
        return sorted.reverse();
      default:
        return sorted;
    }
  }
  /**
   * 인벤토리 용량 확인
   */
  getInventorySpace(inventory, maxSize) {
    const used = inventory.length;
    const available = maxSize - used;
    return {
      used,
      max: maxSize,
      available,
      isFull: used >= maxSize
    };
  }
  /**
   * 아이템 통계
   */
  getInventoryStats(inventory) {
    const stats = {
      totalItems: inventory.reduce((sum, item) => sum + item.quantity, 0),
      totalValue: inventory.reduce((sum, item) => sum + (item.sellPrice || 0) * item.quantity, 0),
      byRarity: {},
      byType: {}
    };
    inventory.forEach((item) => {
      stats.byRarity[item.rarity] = (stats.byRarity[item.rarity] || 0) + 1;
      stats.byType[item.type] = (stats.byType[item.type] || 0) + 1;
    });
    return stats;
  }
  /**
   * 특수 아이템 정의
   */
  getSpecialItem(itemId) {
    const specialItems = {
      "key_golden": {
        id: "key_golden",
        name: "\uD669\uAE08 \uC5F4\uC1E0",
        description: "\uC2E0\uBE44\uD55C \uBCF4\uBB3C\uC0C1\uC790\uB97C \uC5F4 \uC218 \uC788\uB294 \uD669\uAE08 \uC5F4\uC1E0",
        type: "quest",
        rarity: "rare",
        price: 0
      },
      "orb_peace": {
        id: "orb_peace",
        name: "\uD3C9\uD654\uC758 \uAD6C\uC2AC",
        description: "\uD3C9\uD654\uB85C\uC6B4 \uB9C8\uC74C\uC744 \uB2F4\uC740 \uC2E0\uC131\uD55C \uAD6C\uC2AC. \uC9C0\uB2A5 +5",
        type: "misc",
        rarity: "epic",
        price: 0,
        stats: { intelligence: 5 }
      },
      "crystal_magic": {
        id: "crystal_magic",
        name: "\uB9C8\uBC95 \uD06C\uB9AC\uC2A4\uD0C8",
        description: "\uB9C8\uBC95\uC758 \uD798\uC774 \uAE43\uB4E0 \uD06C\uB9AC\uC2A4\uD0C8. MP +20",
        type: "misc",
        rarity: "rare",
        price: 0,
        stats: { maxMp: 20 }
      }
    };
    return specialItems[itemId];
  }
  /**
   * 상점 타입을 인벤토리 타입으로 변환
   */
  mapShopTypeToInventoryType(type) {
    const typeMap = {
      "weapon": "weapon",
      "armor": "armor",
      "consumable": "consumable",
      "misc": "misc",
      "quest": "quest"
    };
    return typeMap[type] || "misc";
  }
  /**
   * 아이템 희귀도 색상 가져오기
   */
  getRarityColor(rarity) {
    const colors = {
      "common": "#9d9d9d",
      "uncommon": "#1eff00",
      "rare": "#0070dd",
      "epic": "#a335ee",
      "legendary": "#ff8000",
      "unique": "#ffd700",
      "mythic": "#e6cc80"
    };
    return colors[rarity] || colors["common"];
  }
  /**
   * 아이템 희귀도 한글 이름
   */
  getRarityKorean(rarity) {
    const names = {
      "common": "\uC77C\uBC18",
      "uncommon": "\uACE0\uAE09",
      "rare": "\uD76C\uADC0",
      "epic": "\uC601\uC6C5",
      "legendary": "\uC804\uC124",
      "unique": "\uC720\uB2C8\uD06C",
      "mythic": "\uC2E0\uD654"
    };
    return names[rarity] || "\uC77C\uBC18";
  }
  static \u0275fac = function InventoryService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _InventoryService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _InventoryService, factory: _InventoryService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(InventoryService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();

// src/app/modules/novel/services/equipment.service.ts
var EquipmentService = class _EquipmentService {
  snackBar;
  debugLogger;
  constructor(snackBar, debugLogger) {
    this.snackBar = snackBar;
    this.debugLogger = debugLogger;
  }
  /**
   * 아이템을 장비 슬롯에 착용
   */
  equipItem(item, index, playerCharacter) {
    if (!playerCharacter?.equipment || !playerCharacter.inventory) {
      return { success: false };
    }
    if (item.type === "consumable" || item.type === "material" || item.type === "quest" || item.type === "misc") {
      this.snackBar.open("\u26A0\uFE0F \uC774 \uC544\uC774\uD15C\uC740 \uC7A5\uBE44\uAC00 \uC544\uB2D9\uB2C8\uB2E4", "\uB2EB\uAE30", {
        duration: 2e3,
        horizontalPosition: "center",
        verticalPosition: "bottom"
      });
      return { success: false };
    }
    let slotKey = null;
    switch (item.type) {
      case "weapon":
        slotKey = "weapon";
        break;
      case "armor":
        slotKey = "armor";
        break;
      case "helmet":
        slotKey = "helmet";
        break;
      case "gloves":
        slotKey = "gloves";
        break;
      case "boots":
        slotKey = "boots";
        break;
      case "belt":
        slotKey = "belt";
        break;
      case "amulet":
      case "accessory":
        slotKey = "amulet";
        break;
      case "ring":
        if (!playerCharacter.equipment.ring1) {
          slotKey = "ring1";
        } else if (!playerCharacter.equipment.ring2) {
          slotKey = "ring2";
        } else {
          slotKey = "ring1";
        }
        break;
    }
    if (!slotKey) {
      return { success: false };
    }
    let unequippedItem;
    const existingEquipment = playerCharacter.equipment[slotKey];
    if (existingEquipment) {
      unequippedItem = this.convertEquipmentToInventory(existingEquipment, slotKey);
      playerCharacter.inventory.push(unequippedItem);
    }
    const newEquipment = {
      baseType: item.name,
      rarity: this.convertInventoryRarityToEquipment(item.rarity),
      itemLevel: 1,
      baseStats: {
        attack: item.stats?.attack || 0,
        defense: item.stats?.defense || 0,
        armor: item.stats?.defense || 0,
        hp: item.stats?.hp || 0,
        mp: item.stats?.mp || 0
      }
    };
    playerCharacter.equipment[slotKey] = newEquipment;
    playerCharacter.inventory.splice(index, 1);
    this.snackBar.open(`\u2705 ${item.name}\uC744(\uB97C) \uC7A5\uCC29\uD588\uC2B5\uB2C8\uB2E4!`, "\uB2EB\uAE30", {
      duration: 2e3,
      horizontalPosition: "center",
      verticalPosition: "bottom"
    });
    return { success: true, unequippedItem };
  }
  /**
   * 장비 슬롯에서 해제하여 인벤토리로 반환
   */
  unequipItem(slotKey, playerCharacter, debugLogger) {
    debugLogger?.info("UNEQUIP", `\u{1F527} unequipItem \uD638\uCD9C\uB428 - slotKey: ${slotKey}`);
    if (!playerCharacter?.equipment || !playerCharacter.inventory) {
      debugLogger?.error("UNEQUIP", `\u274C playerCharacter \uB610\uB294 equipment/inventory \uC5C6\uC74C`);
      return { success: false };
    }
    const equipment = playerCharacter.equipment[slotKey];
    debugLogger?.info("UNEQUIP", `\u{1F50D} \uC2AC\uB86F \uC7A5\uBE44 \uD655\uC778 - slotKey: ${slotKey}, equipment: ${equipment ? equipment.baseType : "undefined"}`);
    if (!equipment) {
      this.snackBar.open("\u26A0\uFE0F \uD574\uB2F9 \uC2AC\uB86F\uC5D0 \uC7A5\uBE44\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4", "\uB2EB\uAE30", {
        duration: 2e3,
        horizontalPosition: "center",
        verticalPosition: "bottom"
      });
      return { success: false };
    }
    if (!equipment.baseType && equipment.name) {
      debugLogger?.warn("UNEQUIP", `\u26A0\uFE0F InventoryItem\uC774 \uC7A5\uBE44 \uC2AC\uB86F\uC5D0 \uC788\uC74C - \uBC14\uB85C \uCC98\uB9AC`);
      const inventoryItem = equipment;
      const returnedItem2 = {
        id: inventoryItem.id || `item_${Date.now()}_${Math.random()}`,
        name: inventoryItem.name,
        type: inventoryItem.type || "weapon",
        rarity: inventoryItem.rarity || "common",
        quantity: 1,
        stats: inventoryItem.stats || {}
      };
      playerCharacter.inventory.push(returnedItem2);
      playerCharacter.equipment[slotKey] = void 0;
      this.snackBar.open(`\u2705 ${inventoryItem.name}\uC744(\uB97C) \uD574\uC81C\uD588\uC2B5\uB2C8\uB2E4`, "\uB2EB\uAE30", {
        duration: 2e3,
        horizontalPosition: "center",
        verticalPosition: "bottom"
      });
      return { success: true, returnedItem: returnedItem2 };
    }
    if (!equipment.baseType) {
      debugLogger?.error("UNEQUIP", `\u274C \uC7A5\uBE44\uC5D0 baseType \uC5C6\uC74C`);
      this.snackBar.open("\u26A0\uFE0F \uC798\uBABB\uB41C \uC7A5\uBE44 \uB370\uC774\uD130\uC785\uB2C8\uB2E4", "\uB2EB\uAE30", {
        duration: 2e3,
        horizontalPosition: "center",
        verticalPosition: "bottom"
      });
      return { success: false };
    }
    const returnedItem = this.convertEquipmentToInventory(equipment, slotKey);
    debugLogger?.info("UNEQUIP", `\u{1F392} \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00 \uC900\uBE44 - itemId: ${returnedItem.id}, name: ${returnedItem.name}`);
    playerCharacter.inventory.push(returnedItem);
    debugLogger?.info("UNEQUIP", `\u2705 \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00 \uC644\uB8CC - \uD604\uC7AC \uC778\uBCA4\uD1A0\uB9AC \uAC1C\uC218: ${playerCharacter.inventory.length}`);
    playerCharacter.equipment[slotKey] = void 0;
    debugLogger?.info("UNEQUIP", `\u{1F5D1}\uFE0F \uC7A5\uBE44 \uC2AC\uB86F\uC5D0\uC11C \uC81C\uAC70 \uC644\uB8CC - slotKey: ${slotKey}`);
    this.snackBar.open(`\u2705 ${equipment.baseType}\uC744(\uB97C) \uD574\uC81C\uD588\uC2B5\uB2C8\uB2E4`, "\uB2EB\uAE30", {
      duration: 2e3,
      horizontalPosition: "center",
      verticalPosition: "bottom"
    });
    debugLogger?.info("UNEQUIP", `\u{1F389} \uC7A5\uBE44 \uD574\uC81C \uC644\uB8CC - ${equipment.baseType}`);
    return { success: true, returnedItem };
  }
  /**
   * 플레이어 능력치 업데이트 (장비 능력치 합산)
   */
  updatePlayerStats(playerCharacter) {
    if (!playerCharacter?.equipment)
      return;
    const baseAttack = 10;
    const baseDefense = 5;
    const baseHp = 100;
    const baseMp = 50;
    const equipmentStats = this.calculateEquipmentStats(playerCharacter.equipment);
    playerCharacter.attack = baseAttack + equipmentStats.attack;
    playerCharacter.defense = baseDefense + equipmentStats.defense;
    playerCharacter.maxHp = baseHp + equipmentStats.hp;
    playerCharacter.maxMp = baseMp + equipmentStats.mp;
    if (playerCharacter.hp > playerCharacter.maxHp) {
      playerCharacter.hp = playerCharacter.maxHp;
    }
    if (playerCharacter.mp > playerCharacter.maxMp) {
      playerCharacter.mp = playerCharacter.maxMp;
    }
  }
  /**
   * 장비 능력치 합계 계산
   */
  calculateEquipmentStats(equipment) {
    let totalAttack = 0;
    let totalDefense = 0;
    let totalHp = 0;
    let totalMp = 0;
    const slots = [
      "weapon",
      "armor",
      "helmet",
      "gloves",
      "boots",
      "belt",
      "amulet",
      "ring1",
      "ring2"
    ];
    slots.forEach((slot) => {
      const item = equipment[slot];
      if (item?.baseStats) {
        totalAttack += item.baseStats.attack || 0;
        totalDefense += item.baseStats.defense || 0;
        totalHp += item.baseStats.hp || 0;
        totalMp += item.baseStats.mp || 0;
      }
    });
    return { attack: totalAttack, defense: totalDefense, hp: totalHp, mp: totalMp };
  }
  /**
   * 두 아이템의 능력치 비교
   */
  compareItems(newItem, equippedItem) {
    const newAttack = newItem.stats?.attack || 0;
    const newDefense = newItem.stats?.defense || 0;
    const newHp = newItem.stats?.hp || 0;
    const newMp = newItem.stats?.mp || 0;
    let oldAttack = 0;
    let oldDefense = 0;
    let oldHp = 0;
    let oldMp = 0;
    if (equippedItem?.baseStats) {
      oldAttack = equippedItem.baseStats.attack || 0;
      oldDefense = equippedItem.baseStats.defense || 0;
      oldHp = equippedItem.baseStats.hp || 0;
      oldMp = equippedItem.baseStats.mp || 0;
    }
    const attackDiff = newAttack - oldAttack;
    const defenseDiff = newDefense - oldDefense;
    const hpDiff = newHp - oldHp;
    const mpDiff = newMp - oldMp;
    const isUpgrade = attackDiff + defenseDiff + hpDiff + mpDiff > 0;
    return { attackDiff, defenseDiff, hpDiff, mpDiff, isUpgrade };
  }
  /**
   * 장비 슬롯 이름 한글 변환
   */
  getSlotNameKorean(slotKey) {
    const slotNames = {
      weapon: "\uBB34\uAE30",
      armor: "\uAC11\uC637",
      helmet: "\uD22C\uAD6C",
      gloves: "\uC7A5\uAC11",
      boots: "\uC2E0\uBC1C",
      belt: "\uBCA8\uD2B8",
      amulet: "\uBAA9\uAC78\uC774",
      ring1: "\uBC18\uC9C01",
      ring2: "\uBC18\uC9C02"
    };
    return slotNames[slotKey] || slotKey;
  }
  /**
   * EquipmentItem을 InventoryItem으로 변환
   */
  convertEquipmentToInventory(equipment, slotKey) {
    let itemType = "weapon";
    switch (slotKey) {
      case "weapon":
        itemType = "weapon";
        break;
      case "armor":
        itemType = "armor";
        break;
      case "helmet":
        itemType = "helmet";
        break;
      case "gloves":
        itemType = "gloves";
        break;
      case "boots":
        itemType = "boots";
        break;
      case "belt":
        itemType = "belt";
        break;
      case "amulet":
        itemType = "amulet";
        break;
      case "ring1":
      case "ring2":
        itemType = "ring";
        break;
    }
    let inventoryRarity = "common";
    if (equipment.rarity === "legendary")
      inventoryRarity = "legendary";
    else if (equipment.rarity === "epic")
      inventoryRarity = "epic";
    else if (equipment.rarity === "rare")
      inventoryRarity = "rare";
    else if (equipment.rarity === "uncommon")
      inventoryRarity = "uncommon";
    else if (equipment.rarity === "magic")
      inventoryRarity = "uncommon";
    else if (equipment.rarity === "unique")
      inventoryRarity = "epic";
    else if (equipment.rarity === "set")
      inventoryRarity = "rare";
    return {
      id: `item_${Date.now()}_${Math.random()}`,
      name: equipment.baseType,
      type: itemType,
      rarity: inventoryRarity,
      quantity: 1,
      stats: {
        attack: equipment.baseStats.attack,
        defense: equipment.baseStats.defense || equipment.baseStats.armor,
        hp: equipment.baseStats.hp,
        mp: equipment.baseStats.mp
      }
    };
  }
  /**
   * Inventory 희귀도를 Equipment 희귀도로 변환
   */
  convertInventoryRarityToEquipment(rarity) {
    const rarityMap = {
      "common": "common",
      "uncommon": "magic",
      "rare": "rare",
      "epic": "unique",
      "legendary": "legendary",
      "mythic": "legendary",
      "unique": "unique"
    };
    return rarityMap[rarity] || "common";
  }
  // ==================== 무협 RPG 장비 시스템 ====================
  /**
   * 무협 RPG - 장비 장착
   */
  equipItemWuxia(character, item) {
    if (!this.canEquipWuxia(item)) {
      return { success: false, message: "\uC7A5\uCC29\uD560 \uC218 \uC5C6\uB294 \uC544\uC774\uD15C\uC785\uB2C8\uB2E4." };
    }
    const slot = this.getEquipmentSlotWuxia(item);
    if (!slot) {
      return { success: false, message: "\uC7A5\uCC29 \uC2AC\uB86F\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4." };
    }
    const currentEquippedId = character.equippedItems[slot];
    if (currentEquippedId) {
      const unequipResult = this.unequipItemWuxia(character, slot);
      if (!unequipResult.success) {
        return unequipResult;
      }
    }
    character.equippedItems[slot] = item.id;
    item.isEquipped = true;
    this.debugLogger.info("EquipmentService", `${item.name} \uC7A5\uCC29 \uC644\uB8CC`);
    this.recalculateStatsWuxia(character);
    return { success: true, message: `${item.name}\uC744(\uB97C) \uC7A5\uCC29\uD588\uC2B5\uB2C8\uB2E4.` };
  }
  /**
   * 무협 RPG - 장비 해제
   */
  unequipItemWuxia(character, slot) {
    const equippedId = character.equippedItems[slot];
    if (!equippedId) {
      return { success: false, message: "\uC7A5\uCC29\uB41C \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4." };
    }
    const item = character.inventory.find((i) => i.id === equippedId);
    if (item) {
      item.isEquipped = false;
    }
    character.equippedItems[slot] = void 0;
    this.debugLogger.info("EquipmentService", `${slot} \uC2AC\uB86F \uC7A5\uBE44 \uD574\uC81C`);
    this.recalculateStatsWuxia(character);
    return { success: true, message: "\uC7A5\uBE44\uB97C \uD574\uC81C\uD588\uC2B5\uB2C8\uB2E4." };
  }
  /**
   * 무협 RPG - 장착 가능 여부 확인
   */
  canEquipWuxia(item) {
    return ["weapon", "armor", "helmet", "gloves", "boots", "belt", "amulet", "ring", "accessory"].includes(item.type);
  }
  /**
   * 무협 RPG - 장비 슬롯 결정
   */
  getEquipmentSlotWuxia(item) {
    switch (item.type) {
      case "weapon":
        return "weapon";
      case "armor":
        return "armor";
      case "amulet":
      case "accessory":
        return "accessory";
      default:
        return null;
    }
  }
  /**
   * 무협 RPG - 장착된 모든 장비 가져오기
   */
  getEquippedItemsWuxia(character) {
    const equipped = [];
    if (character.equippedItems.weapon) {
      const weapon = character.inventory.find((i) => i.id === character.equippedItems.weapon);
      if (weapon)
        equipped.push(weapon);
    }
    if (character.equippedItems.armor) {
      const armor = character.inventory.find((i) => i.id === character.equippedItems.armor);
      if (armor)
        equipped.push(armor);
    }
    if (character.equippedItems.accessory) {
      const accessory = character.inventory.find((i) => i.id === character.equippedItems.accessory);
      if (accessory)
        equipped.push(accessory);
    }
    return equipped;
  }
  /**
   * 무협 RPG - 장비 보너스 스탯 계산
   */
  calculateEquipmentBonusWuxia(character) {
    const equippedItems = this.getEquippedItemsWuxia(character);
    const bonus = {
      attack: 0,
      defense: 0,
      hp: 0,
      mp: 0,
      critChance: 0,
      evasion: 0,
      lifeSteal: 0,
      attackSpeed: 0
    };
    for (const item of equippedItems) {
      if (!item.stats)
        continue;
      bonus.attack += item.stats.attack || 0;
      bonus.attack += (item.stats.minDamage || 0) * 0.5;
      bonus.attack += (item.stats.maxDamage || 0) * 0.5;
      bonus.defense += item.stats.defense || 0;
      bonus.defense += item.stats.armor || 0;
      bonus.hp += item.stats.hp || 0;
      bonus.mp += item.stats.mp || 0;
      bonus.critChance += item.stats.critChance || 0;
      bonus.evasion += item.stats.evasion || 0;
      bonus.lifeSteal += item.stats.lifeSteal || 0;
      bonus.attackSpeed += item.stats.attackSpeed || 0;
    }
    return bonus;
  }
  /**
   * 무협 RPG - 전투력 재계산
   */
  recalculateStatsWuxia(character) {
    const bonus = this.calculateEquipmentBonusWuxia(character);
    const baseMaxHealth = character.level * 100;
    character.maxHealth = baseMaxHealth + bonus.hp;
    if (character.health > character.maxHealth) {
      character.health = character.maxHealth;
    }
    this.debugLogger.info("EquipmentService", `\uC804\uD22C\uB825 \uC7AC\uACC4\uC0B0 \uC644\uB8CC - \uCD5C\uB300 HP: ${character.maxHealth}`);
  }
  /**
   * 무협 RPG - 전투 스탯 계산 (전투 시 사용)
   */
  calculateBattleStatsWuxia(character) {
    const equipBonus = this.calculateEquipmentBonusWuxia(character);
    const baseAttack = character.stats.strength * 2 + character.stats.innerPower;
    const baseDefense = character.stats.strength + character.stats.dexterity;
    const baseMaxHp = character.level * 100;
    const baseMaxMp = character.level * 50;
    return {
      attack: Math.floor(baseAttack + equipBonus.attack),
      defense: Math.floor(baseDefense + equipBonus.defense),
      maxHp: baseMaxHp + equipBonus.hp,
      maxMp: baseMaxMp + equipBonus.mp,
      critChance: equipBonus.critChance,
      evasion: equipBonus.evasion
    };
  }
  /**
   * 무협 RPG - 장비 아이템 정보 표시용 텍스트 생성
   */
  getItemStatsTextWuxia(item) {
    if (!item.stats)
      return [];
    const lines = [];
    if (item.stats.attack)
      lines.push(`\uACF5\uACA9\uB825: +${item.stats.attack}`);
    if (item.stats.minDamage || item.stats.maxDamage) {
      lines.push(`\uD53C\uD574: ${item.stats.minDamage || 0}-${item.stats.maxDamage || 0}`);
    }
    if (item.stats.defense)
      lines.push(`\uBC29\uC5B4\uB825: +${item.stats.defense}`);
    if (item.stats.armor)
      lines.push(`\uAC11\uC637: +${item.stats.armor}`);
    if (item.stats.hp)
      lines.push(`\uC0DD\uBA85\uB825: +${item.stats.hp}`);
    if (item.stats.mp)
      lines.push(`\uB0B4\uACF5: +${item.stats.mp}`);
    if (item.stats.critChance)
      lines.push(`\uCE58\uBA85\uD0C0\uC728: +${item.stats.critChance}%`);
    if (item.stats.evasion)
      lines.push(`\uD68C\uD53C\uC728: +${item.stats.evasion}%`);
    if (item.stats.attackSpeed)
      lines.push(`\uACF5\uACA9\uC18D\uB3C4: +${item.stats.attackSpeed}%`);
    if (item.stats.lifeSteal)
      lines.push(`\uC0DD\uBA85\uB825 \uD761\uC218: ${item.stats.lifeSteal}%`);
    if (item.uniqueEffect) {
      lines.push("");
      lines.push(`\uD2B9\uC218 \uD6A8\uACFC: ${item.uniqueEffect}`);
    }
    return lines;
  }
  /**
   * 무협 RPG - 장비 등급별 색상
   */
  getRarityColorWuxia(rarity) {
    switch (rarity) {
      case "common":
        return "#808080";
      case "uncommon":
        return "#00ff00";
      case "rare":
        return "#0070dd";
      case "epic":
        return "#a335ee";
      case "legendary":
        return "#ff8000";
      default:
        return "#ffffff";
    }
  }
  static \u0275fac = function EquipmentService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _EquipmentService)(\u0275\u0275inject(MatSnackBar), \u0275\u0275inject(DebugLoggerService));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _EquipmentService, factory: _EquipmentService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(EquipmentService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: MatSnackBar }, { type: DebugLoggerService }], null);
})();

// src/app/modules/novel/services/shop.service.ts
var ShopService = class _ShopService {
  constructor() {
  }
  /**
   * 상점에서 아이템 구매
   */
  buyItem(shopItem, playerCharacter, addToInventoryFn, addStoryBlockFn) {
    if (playerCharacter.gold < shopItem.price) {
      const message2 = `\u274C \uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4. (${shopItem.price} \uACE8\uB4DC \uD544\uC694)`;
      addStoryBlockFn([message2]);
      return { success: false, message: message2 };
    }
    if (shopItem.stock <= 0) {
      const message2 = `\u274C \uC0C1\uD488\uC774 \uD488\uC808\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`;
      addStoryBlockFn([message2]);
      return { success: false, message: message2 };
    }
    playerCharacter.gold -= shopItem.price;
    shopItem.stock--;
    addToInventoryFn(shopItem.id);
    const message = `\u{1F4B0} ${shopItem.name}\uC744(\uB97C) \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4. (${shopItem.price} \uACE8\uB4DC)`;
    addStoryBlockFn([message]);
    return { success: true, message };
  }
  /**
   * 인벤토리 아이템 판매
   */
  sellItem(item, playerCharacter, removeFromInventoryFn, addStoryBlockFn) {
    if (item.quantity <= 0 || !item.sellPrice) {
      const message2 = `\u274C \uD574\uB2F9 \uC544\uC774\uD15C\uC740 \uD310\uB9E4\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`;
      addStoryBlockFn([message2]);
      return { success: false, message: message2, goldGained: 0 };
    }
    const goldGained = item.sellPrice;
    playerCharacter.gold += goldGained;
    removeFromInventoryFn(item.id, 1);
    const message = `\u{1F4B0} ${item.name}\uC744(\uB97C) \uD310\uB9E4\uD588\uC2B5\uB2C8\uB2E4. (${goldGained} \uACE8\uB4DC \uD68D\uB4DD)`;
    addStoryBlockFn([message]);
    return { success: true, message, goldGained };
  }
  /**
   * 아이템의 판매 가격 계산 (구매 가격의 50%)
   */
  calculateSellPrice(buyPrice, rarity) {
    const basePrice = Math.floor(buyPrice * 0.5);
    const rarityMultiplier = {
      "common": 1,
      "uncommon": 1.2,
      "rare": 1.5,
      "epic": 2,
      "legendary": 3,
      "mythic": 5,
      "unique": 2.5
    };
    return Math.floor(basePrice * (rarityMultiplier[rarity] || 1));
  }
  /**
   * 기본 상점 아이템 목록 생성
   */
  generateDefaultShopItems() {
    return [
      {
        id: "sword_basic",
        name: "\uAE30\uBCF8 \uAC80",
        description: "\uD3C9\uBC94\uD55C \uCCA0\uAC80\uC785\uB2C8\uB2E4. \uACF5\uACA9\uB825 +5",
        price: 50,
        type: "weapon",
        rarity: "common",
        stock: 5,
        stats: { attack: 5 }
      },
      {
        id: "potion_hp",
        name: "\uCCB4\uB825 \uBB3C\uC57D",
        description: "HP\uB97C 50 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",
        price: 20,
        type: "consumable",
        rarity: "common",
        stock: 10
      },
      {
        id: "potion_mp",
        name: "\uB9C8\uB098 \uBB3C\uC57D",
        description: "MP\uB97C 30 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",
        price: 25,
        type: "consumable",
        rarity: "common",
        stock: 8
      },
      {
        id: "armor_leather",
        name: "\uAC00\uC8FD \uAC11\uC637",
        description: "\uD2BC\uD2BC\uD55C \uAC00\uC8FD \uAC11\uC637. \uBC29\uC5B4\uB825 +3",
        price: 80,
        type: "armor",
        rarity: "common",
        stock: 3,
        stats: { defense: 3 }
      },
      {
        id: "sword_silver",
        name: "\uC740\uBE5B \uAC80",
        description: "\uC740\uC73C\uB85C \uC81C\uC791\uB41C \uACE0\uAE09 \uAC80. \uACF5\uACA9\uB825 +12",
        price: 200,
        type: "weapon",
        rarity: "uncommon",
        stock: 2,
        stats: { attack: 12 }
      },
      {
        id: "armor_chain",
        name: "\uC0AC\uC2AC \uAC11\uC637",
        description: "\uACAC\uACE0\uD55C \uC0AC\uC2AC \uAC11\uC637. \uBC29\uC5B4\uB825 +8",
        price: 250,
        type: "armor",
        rarity: "uncommon",
        stock: 2,
        stats: { defense: 8 }
      }
    ];
  }
  /**
   * 플레이어 레벨에 맞는 상점 아이템 생성
   */
  generateShopItemsByLevel(playerLevel) {
    const baseItems = this.generateDefaultShopItems();
    const levelItems = [];
    if (playerLevel >= 5) {
      levelItems.push({
        id: "sword_steel",
        name: "\uAC15\uCCA0 \uAC80",
        description: "\uB2E8\uB2E8\uD55C \uAC15\uCCA0\uB85C \uC81C\uC791\uB41C \uAC80. \uACF5\uACA9\uB825 +20",
        price: 500,
        type: "weapon",
        rarity: "rare",
        stock: 1,
        stats: { attack: 20 }
      });
    }
    if (playerLevel >= 10) {
      levelItems.push({
        id: "armor_plate",
        name: "\uD50C\uB808\uC774\uD2B8 \uAC11\uC637",
        description: "\uCD5C\uACE0\uAE09 \uD50C\uB808\uC774\uD2B8 \uAC11\uC637. \uBC29\uC5B4\uB825 +15",
        price: 800,
        type: "armor",
        rarity: "rare",
        stock: 1,
        stats: { defense: 15 }
      });
    }
    if (playerLevel >= 15) {
      levelItems.push({
        id: "sword_enchanted",
        name: "\uB9C8\uBC95 \uAC80",
        description: "\uB9C8\uBC95\uC774 \uAE43\uB4E0 \uAC80. \uACF5\uACA9\uB825 +35",
        price: 1500,
        type: "weapon",
        rarity: "epic",
        stock: 1,
        stats: { attack: 35 }
      });
    }
    if (playerLevel >= 20) {
      levelItems.push({
        id: "potion_elixir",
        name: "\uC5D8\uB9AD\uC11C",
        description: "HP\uC640 MP\uB97C \uC644\uC804\uD788 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",
        price: 200,
        type: "consumable",
        rarity: "rare",
        stock: 3
      });
    }
    return [...baseItems, ...levelItems];
  }
  /**
   * 희귀도에 따른 아이템 가격 배율
   */
  getRarityPriceMultiplier(rarity) {
    const multipliers = {
      "common": 1,
      "uncommon": 2,
      "rare": 4,
      "epic": 8,
      "legendary": 16
    };
    return multipliers[rarity] || 1;
  }
  /**
   * 상점 재고 보충 (일정 시간마다 또는 이벤트 발생 시)
   */
  restockShop(shopItems) {
    shopItems.forEach((item) => {
      const maxStock = this.getMaxStockByType(item.type);
      if (item.stock < maxStock * 0.5) {
        item.stock = maxStock;
      }
    });
  }
  /**
   * 아이템 타입별 최대 재고
   */
  getMaxStockByType(type) {
    const stockLimits = {
      "weapon": 5,
      "armor": 5,
      "consumable": 15,
      "misc": 10
    };
    return stockLimits[type] || 5;
  }
  /**
   * 특별 할인 이벤트 (가격 감소)
   */
  applyDiscount(shopItems, discountPercent) {
    shopItems.forEach((item) => {
      item.price = Math.floor(item.price * (1 - discountPercent / 100));
    });
  }
  /**
   * 희귀 아이템 입고 (랜덤)
   */
  addRareItem(shopItems) {
    const rareItems = [
      {
        id: "sword_legendary",
        name: "\uC804\uC124\uC758 \uAC80",
        description: "\uC804\uC124 \uC18D\uC5D0\uB9CC \uC874\uC7AC\uD558\uB358 \uAC80. \uACF5\uACA9\uB825 +100",
        price: 1e4,
        type: "weapon",
        rarity: "legendary",
        stock: 1,
        stats: { attack: 100 }
      },
      {
        id: "armor_mythic",
        name: "\uC2E0\uD654\uC758 \uAC11\uC637",
        description: "\uC2E0\uB4E4\uC774 \uCC29\uC6A9\uD588\uB2E4\uB294 \uAC11\uC637. \uBC29\uC5B4\uB825 +80",
        price: 12e3,
        type: "armor",
        rarity: "legendary",
        stock: 1,
        stats: { defense: 80 }
      }
    ];
    const randomItem = rareItems[Math.floor(Math.random() * rareItems.length)];
    const exists = shopItems.some((item) => item.id === randomItem.id);
    if (!exists) {
      shopItems.push(randomItem);
      return randomItem;
    }
    return null;
  }
  /**
   * 상점 필터링 (타입별, 희귀도별)
   */
  filterShopItems(shopItems, type, rarity) {
    let filtered = [...shopItems];
    if (type) {
      filtered = filtered.filter((item) => item.type === type);
    }
    if (rarity) {
      filtered = filtered.filter((item) => item.rarity === rarity);
    }
    return filtered;
  }
  /**
   * 구매 가능 여부 확인
   */
  canBuyItem(shopItem, playerGold) {
    if (shopItem.stock <= 0) {
      return { canBuy: false, reason: "\uC7AC\uACE0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4" };
    }
    if (playerGold < shopItem.price) {
      return { canBuy: false, reason: `\uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4 (${shopItem.price - playerGold} \uACE8\uB4DC \uD544\uC694)` };
    }
    return { canBuy: true };
  }
  static \u0275fac = function ShopService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ShopService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _ShopService, factory: _ShopService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ShopService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [], null);
})();

// src/app/modules/novel/services/item-generator.service.ts
var ItemGeneratorService = class _ItemGeneratorService {
  /**
   * 시작 인벤토리 아이템 생성
   */
  createStartingInventory() {
    return [
      // 전설 무기
      {
        id: "start_weapon_1",
        name: "\uBD88\uBA78\uC758 \uC804\uC7C1\uB9DD\uCE58",
        type: "weapon",
        rarity: "legendary",
        quantity: 1,
        buyPrice: 15e3,
        sellPrice: 7500,
        stats: {
          minDamage: 85,
          maxDamage: 127,
          attack: 106,
          attackSpeed: 18,
          critChance: 12,
          critDamage: 85,
          lifeSteal: 6,
          lifePerHit: 45,
          fireResist: 23,
          lightningResist: 18,
          allResist: 8,
          goldFind: 45,
          expBonus: 20
        }
      },
      // 에픽 갑옷
      {
        id: "start_armor_1",
        name: "\uC6A9\uB9F9\uD55C \uB4DC\uB798\uACE4 \uC2A4\uCF00\uC77C",
        type: "armor",
        rarity: "epic",
        quantity: 1,
        buyPrice: 8e3,
        sellPrice: 4e3,
        stats: {
          defense: 80,
          armor: 120,
          hp: 200,
          blockChance: 15,
          lifeRegen: 8,
          fireResist: 35,
          coldResist: 25,
          allResist: 10
        }
      },
      // 레어 투구
      {
        id: "start_helmet_1",
        name: "\uAC15\uB825\uD55C \uC804\uD22C \uD22C\uAD6C",
        type: "helmet",
        rarity: "rare",
        quantity: 1,
        buyPrice: 3500,
        sellPrice: 1750,
        stats: {
          defense: 50,
          armor: 75,
          hp: 120,
          mp: 50,
          evasion: 8,
          poisonResist: 20,
          lightningResist: 15
        }
      },
      // 레어 장갑
      {
        id: "start_gloves_1",
        name: "\uCD95\uBCF5\uBC1B\uC740 \uAC74\uD2C0\uB9BF",
        type: "gloves",
        rarity: "rare",
        quantity: 1,
        buyPrice: 3e3,
        sellPrice: 1500,
        stats: {
          defense: 40,
          armor: 60,
          attackSpeed: 12,
          critChance: 8,
          lifePerHit: 25,
          coldResist: 18
        }
      },
      // 언커먼 부츠
      {
        id: "start_boots_1",
        name: "\uBC88\uAC1C\uC758 \uC9C8\uC8FC\uC758 \uBD80\uCE20",
        type: "boots",
        rarity: "uncommon",
        quantity: 1,
        buyPrice: 1500,
        sellPrice: 750,
        stats: {
          defense: 30,
          armor: 45,
          movementSpeed: 25,
          evasion: 12,
          lightningResist: 22
        }
      },
      // 에픽 목걸이
      {
        id: "start_amulet_1",
        name: "\uCC9C\uC0C1\uC758 \uCC9C\uC0AC\uC758 \uB208\uBB3C",
        type: "amulet",
        rarity: "epic",
        quantity: 1,
        buyPrice: 1e4,
        sellPrice: 5e3,
        stats: {
          attack: 60,
          defense: 60,
          hp: 180,
          mp: 80,
          critChance: 15,
          lifeSteal: 4,
          manaSteal: 3,
          magicFind: 35,
          goldFind: 50,
          expBonus: 25,
          allResist: 12
        }
      },
      // 레어 반지 1
      {
        id: "start_ring_1",
        name: "\uD30C\uAD34\uC801\uC778 \uC6A9\uC758 \uBC18\uC9C0",
        type: "ring",
        rarity: "rare",
        quantity: 1,
        buyPrice: 4e3,
        sellPrice: 2e3,
        stats: {
          attack: 45,
          defense: 35,
          critChance: 10,
          critDamage: 35,
          fireResist: 25,
          hp: 80
        }
      },
      // 레어 반지 2
      {
        id: "start_ring_2",
        name: "\uBB34\uC801\uC758 \uAD8C\uB2A5\uC758 \uBC18\uC9C0",
        type: "ring",
        rarity: "rare",
        quantity: 1,
        buyPrice: 4e3,
        sellPrice: 2e3,
        stats: {
          attack: 40,
          defense: 50,
          hp: 100,
          lifeRegen: 5,
          manaRegen: 3,
          coldResist: 20,
          poisonResist: 18
        }
      },
      // 소비 아이템들
      {
        id: "start_potion_1",
        name: "\uCCB4\uB825 \uBB3C\uC57D",
        type: "consumable",
        rarity: "common",
        quantity: 10,
        buyPrice: 50,
        sellPrice: 25
      },
      {
        id: "start_potion_2",
        name: "\uB9C8\uB098 \uBB3C\uC57D",
        type: "consumable",
        rarity: "common",
        quantity: 10,
        buyPrice: 50,
        sellPrice: 25
      }
    ];
  }
  /**
   * 아이템 타입과 희귀도에 따른 랜덤 스탯 생성
   */
  generateItemStats(type, rarity) {
    const rarityMultiplier = {
      "common": 1,
      "uncommon": 1.5,
      "rare": 2.5,
      "epic": 4,
      "legendary": 6
    };
    const multiplier = rarityMultiplier[rarity] || 1;
    const stats = {};
    if (Math.random() > 0.7) {
      stats.hp = Math.floor((Math.random() * 50 + 20) * multiplier);
    }
    if (Math.random() > 0.8) {
      stats.mp = Math.floor((Math.random() * 30 + 10) * multiplier);
    }
    const resistChance = rarity === "legendary" ? 0.9 : rarity === "epic" ? 0.7 : rarity === "rare" ? 0.5 : 0.3;
    if (Math.random() < resistChance) {
      const resistTypes = ["fireResist", "coldResist", "lightningResist", "poisonResist"];
      const randomResist = resistTypes[Math.floor(Math.random() * resistTypes.length)];
      stats[randomResist] = Math.floor((Math.random() * 20 + 10) * multiplier);
    }
    if (rarity === "legendary" || rarity === "epic") {
      if (Math.random() > 0.7) {
        stats.allResist = Math.floor((Math.random() * 10 + 5) * multiplier);
      }
    }
    if (type === "weapon") {
      const minDmg = Math.floor((Math.random() * 15 + 10) * multiplier);
      const maxDmg = Math.floor(minDmg * (1.5 + Math.random() * 0.5));
      stats.attack = Math.floor((minDmg + maxDmg) / 2);
      stats.minDamage = minDmg;
      stats.maxDamage = maxDmg;
      if (Math.random() > 0.6) {
        stats.attackSpeed = Math.floor((Math.random() * 15 + 5) * (multiplier / 2));
      }
      if (rarity !== "common" && Math.random() > 0.5) {
        stats.critChance = Math.floor((Math.random() * 8 + 2) * (multiplier / 2));
      }
      if (rarity === "epic" || rarity === "legendary") {
        if (Math.random() > 0.6) {
          stats.critDamage = Math.floor((Math.random() * 40 + 20) * (multiplier / 2));
        }
      }
      if ((rarity === "rare" || rarity === "epic" || rarity === "legendary") && Math.random() > 0.6) {
        stats.lifeSteal = Math.floor((Math.random() * 5 + 2) * (multiplier / 3));
      }
      if (Math.random() > 0.7) {
        stats.lifePerHit = Math.floor((Math.random() * 10 + 5) * multiplier);
      }
      if (Math.random() > 0.8) {
        stats.manaPerHit = Math.floor((Math.random() * 5 + 2) * multiplier);
      }
    } else if (type === "armor" || type === "helmet" || type === "gloves" || type === "boots" || type === "belt") {
      stats.defense = Math.floor((Math.random() * 20 + 10) * multiplier);
      stats.armor = Math.floor((Math.random() * 30 + 15) * multiplier);
      if ((type === "armor" || type === "gloves") && Math.random() > 0.7) {
        stats.blockChance = Math.floor((Math.random() * 10 + 5) * (multiplier / 2));
      }
      if (Math.random() > 0.75) {
        stats.evasion = Math.floor((Math.random() * 8 + 3) * (multiplier / 2));
      }
      if (Math.random() > 0.6) {
        stats.lifeRegen = Math.floor((Math.random() * 5 + 2) * multiplier);
      }
      if (Math.random() > 0.7) {
        stats.manaRegen = Math.floor((Math.random() * 3 + 1) * multiplier);
      }
    } else if (type === "amulet" || type === "ring") {
      stats.attack = Math.floor((Math.random() * 15 + 5) * multiplier);
      stats.defense = Math.floor((Math.random() * 15 + 5) * multiplier);
      if (Math.random() > 0.5) {
        stats.critChance = Math.floor((Math.random() * 10 + 3) * (multiplier / 2));
      }
      if (Math.random() > 0.6) {
        stats.lifeSteal = Math.floor((Math.random() * 4 + 1) * (multiplier / 3));
      }
      if (Math.random() > 0.7) {
        stats.manaSteal = Math.floor((Math.random() * 3 + 1) * (multiplier / 3));
      }
      if (rarity === "legendary" || rarity === "epic") {
        if (Math.random() > 0.5) {
          stats.magicFind = Math.floor((Math.random() * 20 + 10) * multiplier);
        }
        if (Math.random() > 0.6) {
          stats.goldFind = Math.floor((Math.random() * 30 + 15) * multiplier);
        }
      }
      if ((rarity === "rare" || rarity === "epic" || rarity === "legendary") && Math.random() > 0.7) {
        stats.expBonus = Math.floor((Math.random() * 15 + 5) * (multiplier / 2));
      }
    }
    if (type === "boots") {
      if (Math.random() > 0.4) {
        stats.movementSpeed = Math.floor((Math.random() * 15 + 5) * (multiplier / 2));
      }
    } else if (Math.random() > 0.9) {
      stats.movementSpeed = Math.floor((Math.random() * 8 + 2) * (multiplier / 3));
    }
    return Object.keys(stats).length > 0 ? stats : void 0;
  }
  /**
   * 희귀도 배열 반환
   */
  getRarityLevels() {
    return ["common", "uncommon", "rare", "epic", "legendary"];
  }
  /**
   * 희귀도 한글 이름
   */
  getRarityName(rarity) {
    const names = {
      "common": "\uC77C\uBC18",
      "uncommon": "\uACE0\uAE09",
      "rare": "\uD76C\uADC0",
      "epic": "\uC601\uC6C5",
      "legendary": "\uC804\uC124"
    };
    return names[rarity] || "\uC54C \uC218 \uC5C6\uC74C";
  }
  /**
   * 희귀도에 따른 색상 반환
   */
  getRarityColor(rarity) {
    const colors = {
      "common": "#9d9d9d",
      "uncommon": "#1eff00",
      "rare": "#0070dd",
      "epic": "#a335ee",
      "legendary": "#ff8000"
    };
    return colors[rarity] || "#ffffff";
  }
  static \u0275fac = function ItemGeneratorService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ItemGeneratorService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _ItemGeneratorService, factory: _ItemGeneratorService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ItemGeneratorService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();

// src/app/modules/novel/helpers/story-element-generator.helper.ts
var StoryElementGeneratorHelper = class _StoryElementGeneratorHelper {
  geminiAiService;
  scenarioDbService;
  characterDbService;
  itemDbService;
  constructor(geminiAiService, scenarioDbService, characterDbService, itemDbService) {
    this.geminiAiService = geminiAiService;
    this.scenarioDbService = scenarioDbService;
    this.characterDbService = characterDbService;
    this.itemDbService = itemDbService;
  }
  /**
   * 스토리에 필요한 모든 요소 검증 및 자동 생성
   */
  ensureStoryElements(novel) {
    return __async(this, null, function* () {
      const result = {
        success: true,
        generated: {
          scenarios: 0,
          characters: 0,
          items: 0
        },
        errors: []
      };
      try {
        if (!this.geminiAiService.hasApiKey()) {
          result.errors.push("Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");
          result.success = false;
          return result;
        }
        const missingElements = yield this.checkMissingElements(novel);
        if (missingElements.needsGeneration) {
          const generated = yield this.generateAllElements(novel, missingElements);
          result.generated = generated;
        } else {
        }
      } catch (error) {
        result.success = false;
        result.errors.push(error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4");
      }
      return result;
    });
  }
  /**
   * 부족한 요소 확인
   */
  checkMissingElements(novel) {
    return __async(this, null, function* () {
      const allScenarios = yield this.scenarioDbService.getAllScenarios();
      const allCharacters = yield this.characterDbService.getAllCharacters();
      const allItems = yield this.itemDbService.getAllItems();
      const scenarioCount = allScenarios.length;
      const characterCount = allCharacters.length;
      const itemCount = allItems.length;
      const recommendations = this.getRecommendedCounts(novel);
      const scenarios = {
        current: scenarioCount,
        needed: recommendations.scenarios,
        missing: Math.max(0, recommendations.scenarios - scenarioCount)
      };
      const characters = {
        current: characterCount,
        needed: recommendations.characters,
        missing: Math.max(0, recommendations.characters - characterCount)
      };
      const items = {
        current: itemCount,
        needed: recommendations.items,
        missing: Math.max(0, recommendations.items - itemCount)
      };
      const needsGeneration = scenarios.missing > 0 || characters.missing > 0 || items.missing > 0;
      return { needsGeneration, scenarios, characters, items };
    });
  }
  /**
   * 장르별 권장 요소 개수
   */
  getRecommendedCounts(novel) {
    const genreMap = {
      "\uBB34\uD611": { scenarios: 10, characters: 15, items: 20 },
      "\uD310\uD0C0\uC9C0": { scenarios: 12, characters: 20, items: 25 },
      "\uD604\uB300\uD310\uD0C0\uC9C0": { scenarios: 8, characters: 12, items: 15 },
      "SF": { scenarios: 10, characters: 15, items: 20 },
      "\uB85C\uB9E8\uC2A4": { scenarios: 6, characters: 10, items: 10 },
      "\uBBF8\uC2A4\uD130\uB9AC": { scenarios: 8, characters: 12, items: 15 },
      "\uBC94\uC6A9": { scenarios: 10, characters: 15, items: 20 }
    };
    return genreMap[novel.genre] || { scenarios: 10, characters: 15, items: 20 };
  }
  /**
   * 모든 요소를 한번에 생성
   */
  generateAllElements(novel, missing) {
    return __async(this, null, function* () {
      const generated = {
        scenarios: 0,
        characters: 0,
        items: 0
      };
      const tasks = [];
      if (missing.scenarios.missing > 0) {
        tasks.push(this.generateScenarios(novel, missing.scenarios.missing).then((count) => {
          generated.scenarios = count;
        }));
      }
      if (missing.characters.missing > 0) {
        tasks.push(this.generateCharacters(novel, missing.characters.missing).then((count) => {
          generated.characters = count;
        }));
      }
      if (missing.items.missing > 0) {
        tasks.push(this.generateItems(novel, missing.items.missing).then((count) => {
          generated.items = count;
        }));
      }
      yield Promise.all(tasks);
      return generated;
    });
  }
  /**
   * 시나리오 일괄 생성
   */
  generateScenarios(novel, count) {
    return __async(this, null, function* () {
      let generated = 0;
      try {
        const prompt = this.buildBatchScenarioPrompt(novel, count);
        const response = yield firstValueFrom(this.geminiAiService.generateContent(prompt));
        const scenarios = this.parseBatchScenarios(response, novel);
        for (const scenario of scenarios) {
          yield this.scenarioDbService.saveScenario(scenario);
          generated++;
        }
      } catch (error) {
      }
      return generated;
    });
  }
  /**
   * 캐릭터 일괄 생성
   */
  generateCharacters(novel, count) {
    return __async(this, null, function* () {
      let generated = 0;
      try {
        const prompt = this.buildBatchCharacterPrompt(novel, count);
        const response = yield firstValueFrom(this.geminiAiService.generateContent(prompt));
        const characters = this.parseBatchCharacters(response, novel);
        for (const character of characters) {
          yield this.characterDbService.saveCharacter(character);
          generated++;
        }
      } catch (error) {
      }
      return generated;
    });
  }
  /**
   * 아이템 일괄 생성
   */
  generateItems(novel, count) {
    return __async(this, null, function* () {
      let generated = 0;
      try {
        const prompt = this.buildBatchItemPrompt(novel, count);
        const response = yield firstValueFrom(this.geminiAiService.generateContent(prompt));
        const items = this.parseBatchItems(response, novel);
        for (const item of items) {
          yield this.itemDbService.saveItem(item);
          generated++;
        }
      } catch (error) {
      }
      return generated;
    });
  }
  /**
   * 일괄 시나리오 생성 프롬프트
   */
  buildBatchScenarioPrompt(novel, count) {
    const isDefault = novel.id === "default";
    const intro = isDefault ? `\uB2F9\uC2E0\uC740 ${novel.genre} \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. \uB2E4\uC591\uD55C \uC18C\uC124\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5\uD55C ${novel.genre} \uC7A5\uB974\uC758 \uC2DC\uB098\uB9AC\uC624\uB97C ${count}\uAC1C \uC0DD\uC131\uD574\uC8FC\uC138\uC694.` : `\uB2F9\uC2E0\uC740 ${novel.genre} \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. "${novel.title}"\uB77C\uB294 \uC791\uD488\uC758 \uC2DC\uB098\uB9AC\uC624\uB97C ${count}\uAC1C \uC0DD\uC131\uD574\uC8FC\uC138\uC694.`;
    return `${intro}

\uC7A5\uB974: ${novel.genre}
${isDefault ? "\uB300\uC0C1: \uBC94\uC6A9 \uCF58\uD150\uCE20 (\uB2E4\uC591\uD55C \uC2A4\uD1A0\uB9AC\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5)" : `\uC124\uBA85: ${novel.description}`}
${isDefault ? "" : `\uB09C\uC774\uB3C4: ${novel.difficulty}`}

\uB2E4\uC74C JSON \uD615\uC2DD\uC73C\uB85C \uC815\uD655\uD788 ${count}\uAC1C\uC758 \uC2DC\uB098\uB9AC\uC624\uB97C \uC0DD\uC131\uD574\uC8FC\uC138\uC694:

[
  {
    "title": "\uC2DC\uB098\uB9AC\uC624 \uC81C\uBAA9",
    "description": "\uC2DC\uB098\uB9AC\uC624 \uC0C1\uC138 \uC124\uBA85",
    "genre": "${novel.genre}",
    "mood": "\uBD84\uC704\uAE30",
    "setting": "\uBC30\uACBD \uC124\uC815",
    "mainConflict": "\uC8FC\uC694 \uAC08\uB4F1",
    "keyCharacters": ["\uB4F1\uC7A5\uC778\uBB3C1", "\uB4F1\uC7A5\uC778\uBB3C2"],
    "plotPoints": ["\uC804\uAC1C1", "\uC804\uAC1C2"],
    "possibleEndings": ["\uACB0\uB9D01", "\uACB0\uB9D02"]
  }
]

\uC911\uC694\uD55C \uADDC\uCE59:
1. \uBC18\uB4DC\uC2DC \uC720\uD6A8\uD55C JSON \uBC30\uC5F4\uB9CC \uCD9C\uB825 (\uC124\uBA85 \uAE08\uC9C0)
2. \uBB38\uC790\uC5F4 \uC548\uC5D0 \uC904\uBC14\uAFC8\uC740 \\n\uC73C\uB85C \uD45C\uD604
3. \uB9C8\uC9C0\uB9C9 \uD56D\uBAA9 \uB4A4\uC5D0 \uC27C\uD45C \uAE08\uC9C0
4. \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uD070\uB530\uC634\uD45C(")\uB9CC \uC0AC\uC6A9`;
  }
  /**
   * 일괄 캐릭터 생성 프롬프트
   */
  buildBatchCharacterPrompt(novel, count) {
    const isDefault = novel.id === "default";
    const intro = isDefault ? `\uB2F9\uC2E0\uC740 ${novel.genre} \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. \uB2E4\uC591\uD55C \uC18C\uC124\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5\uD55C ${novel.genre} \uC7A5\uB974\uC758 \uCE90\uB9AD\uD130\uB97C ${count}\uBA85 \uC0DD\uC131\uD574\uC8FC\uC138\uC694.` : `\uB2F9\uC2E0\uC740 ${novel.genre} \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. "${novel.title}"\uC5D0 \uB4F1\uC7A5\uD560 \uCE90\uB9AD\uD130\uB97C ${count}\uBA85 \uC0DD\uC131\uD574\uC8FC\uC138\uC694.`;
    return `${intro}

\uC7A5\uB974: ${novel.genre}
${isDefault ? "\uB300\uC0C1: \uBC94\uC6A9 \uCE90\uB9AD\uD130 (\uB2E4\uC591\uD55C \uC2A4\uD1A0\uB9AC\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5)" : `\uC124\uBA85: ${novel.description}`}

\uB2E4\uC74C JSON \uD615\uC2DD\uC73C\uB85C \uC815\uD655\uD788 ${count}\uBA85\uC758 \uCE90\uB9AD\uD130\uB97C \uC0DD\uC131\uD574\uC8FC\uC138\uC694:

[
  {
    "name": "\uCE90\uB9AD\uD130 \uC774\uB984",
    "age": 25,
    "gender": "\uC131\uBCC4",
    "personality": "\uC131\uACA9",
    "appearance": "\uC678\uBAA8",
    "background": "\uBC30\uACBD \uC2A4\uD1A0\uB9AC",
    "role": "\uC5ED\uD560",
    "skills": ["\uD2B9\uAE301", "\uD2B9\uAE302"],
    "relationships": "\uAD00\uACC4",
    "motivation": "\uB3D9\uAE30",
    "quirks": "\uD2B9\uC9D5"
  }
]

\uC911\uC694\uD55C \uADDC\uCE59:
1. \uBC18\uB4DC\uC2DC \uC720\uD6A8\uD55C JSON \uBC30\uC5F4\uB9CC \uCD9C\uB825 (\uC124\uBA85 \uAE08\uC9C0)
2. \uBB38\uC790\uC5F4 \uC548\uC5D0 \uC904\uBC14\uAFC8\uC740 \\n\uC73C\uB85C \uD45C\uD604
3. \uB9C8\uC9C0\uB9C9 \uD56D\uBAA9 \uB4A4\uC5D0 \uC27C\uD45C \uAE08\uC9C0
4. \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uD070\uB530\uC634\uD45C(")\uB9CC \uC0AC\uC6A9
5. age\uB294 \uBC18\uB4DC\uC2DC \uC22B\uC790\uB9CC \uC785\uB825`;
  }
  /**
   * 일괄 아이템 생성 프롬프트
   */
  buildBatchItemPrompt(novel, count) {
    const isDefault = novel.id === "default";
    const intro = isDefault ? `\uB2F9\uC2E0\uC740 ${novel.genre} \uC18C\uC124\uC758 \uC544\uC774\uD15C \uB514\uC790\uC774\uB108\uC785\uB2C8\uB2E4. \uB2E4\uC591\uD55C \uC18C\uC124\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5\uD55C ${novel.genre} \uC7A5\uB974\uC758 \uC544\uC774\uD15C\uC744 ${count}\uAC1C \uC0DD\uC131\uD574\uC8FC\uC138\uC694.` : `\uB2F9\uC2E0\uC740 ${novel.genre} \uC18C\uC124\uC758 \uC544\uC774\uD15C \uB514\uC790\uC774\uB108\uC785\uB2C8\uB2E4. "${novel.title}"\uC5D0 \uB4F1\uC7A5\uD560 \uC544\uC774\uD15C\uC744 ${count}\uAC1C \uC0DD\uC131\uD574\uC8FC\uC138\uC694.`;
    return `${intro}

\uC7A5\uB974: ${novel.genre}
${isDefault ? "\uB300\uC0C1: \uBC94\uC6A9 \uC544\uC774\uD15C (\uB2E4\uC591\uD55C \uC2A4\uD1A0\uB9AC\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5)" : `\uC124\uBA85: ${novel.description}`}

\uB2E4\uC74C JSON \uD615\uC2DD\uC73C\uB85C \uC815\uD655\uD788 ${count}\uAC1C\uC758 \uC544\uC774\uD15C\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694:

[
  {
    "name": "\uC544\uC774\uD15C \uC774\uB984",
    "type": "\uBB34\uAE30",
    "grade": "\uC77C\uBC18",
    "description": "\uC544\uC774\uD15C \uC124\uBA85",
    "effect": "\uD6A8\uACFC",
    "stats": {
      "attack": 10,
      "defense": 5,
      "hp": 0,
      "mp": 0
    },
    "price": 100,
    "rarity": 50,
    "lore": "\uBC30\uACBD \uC2A4\uD1A0\uB9AC"
  }
]

\uC911\uC694\uD55C \uADDC\uCE59:
1. \uBC18\uB4DC\uC2DC \uC720\uD6A8\uD55C JSON \uBC30\uC5F4\uB9CC \uCD9C\uB825 (\uC124\uBA85 \uAE08\uC9C0)
2. \uBB38\uC790\uC5F4 \uC548\uC5D0 \uC904\uBC14\uAFC8\uC740 \\n\uC73C\uB85C \uD45C\uD604
3. \uB9C8\uC9C0\uB9C9 \uD56D\uBAA9 \uB4A4\uC5D0 \uC27C\uD45C \uAE08\uC9C0
4. \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uD070\uB530\uC634\uD45C(")\uB9CC \uC0AC\uC6A9
5. \uC22B\uC790 \uD544\uB4DC\uB294 \uBC18\uB4DC\uC2DC \uC22B\uC790\uB9CC \uC785\uB825 (\uB530\uC634\uD45C \uAE08\uC9C0)`;
  }
  /**
   * JSON 문자열 정리 (잘못된 형식 수정)
   */
  cleanJsonString(jsonStr) {
    return jsonStr.replace(/,(\s*[}\]])/g, "$1").replace(/\/\*[\s\S]*?\*\//g, "").replace(/\/\/.*/g, "").replace(/'/g, '"').replace(/[\x00-\x1F\x7F]/g, "").replace(/,+/g, ",").replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/\t/g, "\\t");
  }
  /**
   * 안전한 JSON 파싱
   */
  safeJsonParse(text) {
    try {
      const jsonMatch = text.match(/\[[\s\S]*\]/);
      if (!jsonMatch) {
        return [];
      }
      let jsonStr = jsonMatch[0];
      jsonStr = this.cleanJsonString(jsonStr);
      try {
        return JSON.parse(jsonStr);
      } catch (e) {
        const lastCommaIndex = jsonStr.lastIndexOf(",");
        const lastBraceIndex = jsonStr.lastIndexOf("}");
        if (lastCommaIndex > lastBraceIndex) {
          jsonStr = jsonStr.substring(0, lastCommaIndex) + "]";
        }
        return JSON.parse(jsonStr);
      }
    } catch (error) {
      console.warn("\uC6D0\uBCF8 \uD14D\uC2A4\uD2B8:", text.substring(0, 500));
      return [];
    }
  }
  /**
   * 일괄 시나리오 파싱
   */
  parseBatchScenarios(response, novel) {
    try {
      const scenarios = this.safeJsonParse(response);
      if (scenarios.length === 0) {
        return [];
      }
      return scenarios.map((s, index) => ({
        id: `scenario_${Date.now()}_${index}`,
        title: s.title || `\uC2DC\uB098\uB9AC\uC624 ${index + 1}`,
        description: s.description || "",
        characters: s.keyCharacters || s.characters || [],
        setting: s.setting || "",
        conflict: s.mainConflict || s.conflict || "",
        goal: s.goal || "",
        mood: s.mood || "\uBCF4\uD1B5",
        tags: [],
        genre: s.genre || novel.genre,
        style: novel.genre,
        createdAt: /* @__PURE__ */ new Date(),
        isAdult: false
      }));
    } catch (error) {
      return [];
    }
  }
  /**
   * 일괄 캐릭터 파싱
   */
  parseBatchCharacters(response, novel) {
    try {
      const characters = this.safeJsonParse(response);
      if (characters.length === 0) {
        return [];
      }
      return characters.map((c, index) => ({
        name: c.name || `\uCE90\uB9AD\uD130 ${index + 1}`,
        age: c.age || 25,
        gender: c.gender || "\uBBF8\uC815",
        occupation: c.role || c.occupation || "\uBAA8\uD5D8\uAC00",
        personality: Array.isArray(c.personality) ? c.personality : typeof c.personality === "string" ? [c.personality] : ["\uBCF4\uD1B5"],
        backstory: c.background || c.backstory || "",
        skills: Array.isArray(c.skills) ? c.skills : [],
        appearance: c.appearance || "",
        goal: c.motivation || c.goal || "",
        weakness: c.quirks || c.weakness || "",
        tags: [],
        createdAt: /* @__PURE__ */ new Date()
      }));
    } catch (error) {
      return [];
    }
  }
  /**
   * 일괄 아이템 파싱
   */
  parseBatchItems(response, novel) {
    try {
      const items = this.safeJsonParse(response);
      if (items.length === 0) {
        return [];
      }
      return items.map((item, index) => ({
        name: item.name || `\uC544\uC774\uD15C ${index + 1}`,
        description: item.description || "",
        type: item.type || "\uC18C\uBE44\uD488",
        grade: item.grade || "\uC77C\uBC18",
        effects: Array.isArray(item.effects) ? item.effects : item.effect ? [item.effect] : [],
        stats: item.stats || { attack: 0, defense: 0, hp: 0, mp: 0 },
        requirements: item.requirements || "",
        lore: item.lore || "",
        tags: [],
        price: item.price || 100,
        createdAt: /* @__PURE__ */ new Date()
      }));
    } catch (error) {
      return [];
    }
  }
  /**
   * 생성 진행 상황 리포트
   */
  getGenerationReport(novel) {
    return __async(this, null, function* () {
      const missing = yield this.checkMissingElements(novel);
      let text = `\u{1F4CA} \uC2A4\uD1A0\uB9AC \uC694\uC18C \uD604\uD669

`;
      if (novel.id === "default") {
        text += `\u{1F3F7}\uFE0F \uB300\uC0C1: \uBC94\uC6A9 \uCF58\uD150\uCE20 (${novel.genre})
`;
        text += `\u{1F4A1} \uC18C\uC124 \uC120\uD0DD \uC2DC \uD574\uB2F9 \uC7A5\uB974\uC5D0 \uCD5C\uC801\uD654\uB41C \uCF58\uD150\uCE20\uB97C \uC0DD\uC131\uD569\uB2C8\uB2E4.

`;
      } else {
        text += `\u{1F3F7}\uFE0F \uC18C\uC124: ${novel.title} (${novel.genre})

`;
      }
      text += `\u{1F4DC} \uC2DC\uB098\uB9AC\uC624:
`;
      text += `   \uD604\uC7AC: ${missing.scenarios.current}\uAC1C
`;
      text += `   \uAD8C\uC7A5: ${missing.scenarios.needed}\uAC1C
`;
      text += `   \uBD80\uC871: ${missing.scenarios.missing}\uAC1C

`;
      text += `\u{1F465} \uCE90\uB9AD\uD130:
`;
      text += `   \uD604\uC7AC: ${missing.characters.current}\uAC1C
`;
      text += `   \uAD8C\uC7A5: ${missing.characters.needed}\uAC1C
`;
      text += `   \uBD80\uC871: ${missing.characters.missing}\uAC1C

`;
      text += `\u2694\uFE0F \uC544\uC774\uD15C:
`;
      text += `   \uD604\uC7AC: ${missing.items.current}\uAC1C
`;
      text += `   \uAD8C\uC7A5: ${missing.items.needed}\uAC1C
`;
      text += `   \uBD80\uC871: ${missing.items.missing}\uAC1C

`;
      if (missing.needsGeneration) {
        text += `\u26A0\uFE0F \uC77C\uBD80 \uC694\uC18C\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4. \uC790\uB3D9 \uC0DD\uC131\uC744 \uAD8C\uC7A5\uD569\uB2C8\uB2E4.`;
      } else {
        text += `\u2705 \uBAA8\uB4E0 \uC694\uC18C\uAC00 \uCDA9\uBD84\uD569\uB2C8\uB2E4!`;
      }
      return {
        text,
        scenarios: { current: missing.scenarios.current, recommended: missing.scenarios.needed, missing: missing.scenarios.missing },
        characters: { current: missing.characters.current, recommended: missing.characters.needed, missing: missing.characters.missing },
        items: { current: missing.items.current, recommended: missing.items.needed, missing: missing.items.missing },
        needsGeneration: missing.needsGeneration
      };
    });
  }
  static \u0275fac = function StoryElementGeneratorHelper_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _StoryElementGeneratorHelper)(\u0275\u0275inject(GeminiAiService), \u0275\u0275inject(ScenarioDbService), \u0275\u0275inject(CharacterDbService), \u0275\u0275inject(ItemDbService));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _StoryElementGeneratorHelper, factory: _StoryElementGeneratorHelper.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(StoryElementGeneratorHelper, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: GeminiAiService }, { type: ScenarioDbService }, { type: CharacterDbService }, { type: ItemDbService }], null);
})();

// src/app/modules/novel/services/responsive.service.ts
var ScreenSize;
(function(ScreenSize2) {
  ScreenSize2["Mobile"] = "mobile";
  ScreenSize2["Tablet"] = "tablet";
  ScreenSize2["Desktop"] = "desktop";
})(ScreenSize || (ScreenSize = {}));
var ResponsiveService = class _ResponsiveService {
  screenSizeSubject = new BehaviorSubject(this.getScreenSize());
  screenSize$ = this.screenSizeSubject.asObservable();
  isMobileSubject = new BehaviorSubject(this.checkIsMobile());
  isMobile$ = this.isMobileSubject.asObservable();
  isTabletSubject = new BehaviorSubject(this.checkIsTablet());
  isTablet$ = this.isTabletSubject.asObservable();
  isDesktopSubject = new BehaviorSubject(this.checkIsDesktop());
  isDesktop$ = this.isDesktopSubject.asObservable();
  constructor() {
    this.initResizeListener();
  }
  /**
   * 윈도우 리사이즈 이벤트 리스너 초기화
   */
  initResizeListener() {
    fromEvent(window, "resize").pipe(debounceTime(200), map(() => this.getScreenSize()), distinctUntilChanged()).subscribe((size) => {
      this.screenSizeSubject.next(size);
      this.isMobileSubject.next(this.checkIsMobile());
      this.isTabletSubject.next(this.checkIsTablet());
      this.isDesktopSubject.next(this.checkIsDesktop());
    });
  }
  /**
   * 현재 화면 크기 감지
   */
  getScreenSize() {
    const width = window.innerWidth;
    if (width < 768) {
      return ScreenSize.Mobile;
    } else if (width >= 768 && width < 1024) {
      return ScreenSize.Tablet;
    } else {
      return ScreenSize.Desktop;
    }
  }
  /**
   * 모바일 여부 확인
   */
  checkIsMobile() {
    return window.innerWidth < 768;
  }
  /**
   * 태블릿 여부 확인
   */
  checkIsTablet() {
    const width = window.innerWidth;
    return width >= 768 && width < 1024;
  }
  /**
   * 데스크톱 여부 확인
   */
  checkIsDesktop() {
    return window.innerWidth >= 1024;
  }
  /**
   * 현재 화면 크기 (동기)
   */
  get currentScreenSize() {
    return this.screenSizeSubject.value;
  }
  /**
   * 현재 모바일 여부 (동기)
   */
  get isMobile() {
    return this.isMobileSubject.value;
  }
  /**
   * 현재 태블릿 여부 (동기)
   */
  get isTablet() {
    return this.isTabletSubject.value;
  }
  /**
   * 현재 데스크톱 여부 (동기)
   */
  get isDesktop() {
    return this.isDesktopSubject.value;
  }
  /**
   * 화면 너비 반환
   */
  get screenWidth() {
    return window.innerWidth;
  }
  /**
   * 화면 높이 반환
   */
  get screenHeight() {
    return window.innerHeight;
  }
  /**
   * 터치 디바이스 여부 확인
   */
  get isTouchDevice() {
    return "ontouchstart" in window || navigator.maxTouchPoints > 0;
  }
  static \u0275fac = function ResponsiveService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ResponsiveService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _ResponsiveService, factory: _ResponsiveService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ResponsiveService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [], null);
})();

// src/app/modules/novel/services/game-modal.service.ts
var GameModalService = class _GameModalService {
  modalSubject = new Subject();
  modal$ = this.modalSubject.asObservable();
  /**
   * 정보 모달 표시
   */
  showInfo(message, title = "\uC54C\uB9BC") {
    this.show({
      type: "info",
      title,
      message,
      confirmText: "\uD655\uC778"
    });
  }
  /**
   * 성공 모달 표시
   */
  showSuccess(message, title = "\uC131\uACF5") {
    this.show({
      type: "success",
      title,
      message,
      confirmText: "\uD655\uC778"
    });
  }
  /**
   * 경고 모달 표시
   */
  showWarning(message, title = "\uACBD\uACE0") {
    this.show({
      type: "warning",
      title,
      message,
      confirmText: "\uD655\uC778"
    });
  }
  /**
   * 에러 모달 표시
   */
  showError(message, title = "\uC624\uB958") {
    this.show({
      type: "error",
      title,
      message,
      confirmText: "\uD655\uC778"
    });
  }
  /**
   * 확인 모달 표시 (확인/취소)
   */
  showConfirm(message, onConfirm, title = "\uD655\uC778", confirmText = "\uD655\uC778", cancelText = "\uCDE8\uC18C") {
    this.show({
      type: "confirm",
      title,
      message,
      confirmText,
      cancelText,
      showCancel: true,
      onConfirm
    });
  }
  /**
   * 커스텀 모달 표시
   */
  show(config) {
    this.modalSubject.next({
      isOpen: true,
      config
    });
  }
  /**
   * 모달 닫기
   */
  close() {
    this.modalSubject.next({
      isOpen: false,
      config: null
    });
  }
  static \u0275fac = function GameModalService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _GameModalService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _GameModalService, factory: _GameModalService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(GameModalService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();

// src/app/modules/novel/components/dungeon-explorer/dungeon-explorer.ts
function DungeonExplorer_div_0_div_29_div_4_span_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 26);
    \u0275\u0275text(1, "\u{1F525}");
    \u0275\u0275elementEnd();
  }
}
function DungeonExplorer_div_0_div_29_div_4_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 27);
    \u0275\u0275text(1, "\u{1F480}");
    \u0275\u0275elementEnd();
  }
}
function DungeonExplorer_div_0_div_29_div_4_div_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 28);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const monster_r2 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate4(" HP: ", monster_r2.currentHp || monster_r2.hp, "/", monster_r2.maxHp || monster_r2.hp, " | \u2694\uFE0F ", monster_r2.attack, " | \u{1F6E1}\uFE0F ", monster_r2.defense, " ");
  }
}
function DungeonExplorer_div_0_div_29_div_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 21)(1, "div", 22);
    \u0275\u0275text(2);
    \u0275\u0275template(3, DungeonExplorer_div_0_div_29_div_4_span_3_Template, 2, 0, "span", 23)(4, DungeonExplorer_div_0_div_29_div_4_span_4_Template, 2, 0, "span", 24);
    \u0275\u0275elementEnd();
    \u0275\u0275template(5, DungeonExplorer_div_0_div_29_div_4_div_5_Template, 2, 4, "div", 25);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const monster_r2 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("defeated", monster_r2.isDead);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate3(" ", ctx_r2.getMonsterIcon(monster_r2.type), " ", monster_r2.name, " (Lv.", monster_r2.level, ") ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !monster_r2.isDead);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", monster_r2.isDead);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !monster_r2.isDead);
  }
}
function DungeonExplorer_div_0_div_29_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 16)(1, "div", 17);
    \u0275\u0275text(2, "\u2694\uFE0F \uC801 \uC870\uC6B0!");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 18);
    \u0275\u0275template(4, DungeonExplorer_div_0_div_29_div_4_Template, 6, 8, "div", 19);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 20);
    \u0275\u0275text(6, " \uC804\uD22C\uB294 \uAE30\uBCF8 \uAC8C\uC784 \uC2DC\uC2A4\uD15C\uC744 \uC0AC\uC6A9\uD569\uB2C8\uB2E4. ");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.currentRoom.monsters);
  }
}
function DungeonExplorer_div_0_div_30_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 32);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r5 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate2(" \u{1F381} ", item_r5.name, " (", item_r5.rarity, ") ");
  }
}
function DungeonExplorer_div_0_div_30_div_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 32);
    \u0275\u0275text(1, " \u{1F4E6} \uC544\uC774\uD15C \uD68D\uB4DD \uC5C6\uC74C ");
    \u0275\u0275elementEnd();
  }
}
function DungeonExplorer_div_0_div_30_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 29)(1, "div", 30);
    \u0275\u0275text(2, "\u{1F389} \uC804\uD22C \uC2B9\uB9AC!");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 31)(4, "div", 32);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 32);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275template(8, DungeonExplorer_div_0_div_30_div_8_Template, 2, 2, "div", 33)(9, DungeonExplorer_div_0_div_30_div_9_Template, 2, 0, "div", 34);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "button", 35);
    \u0275\u0275listener("click", function DungeonExplorer_div_0_div_30_Template_button_click_10_listener() {
      \u0275\u0275restoreView(_r4);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.claimRewards());
    });
    \u0275\u0275text(11, "\u2705 \uBCF4\uC0C1 \uBC1B\uAE30");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("\u2B50 \uACBD\uD5D8\uCE58 +", ctx_r2.battleRewards.exp);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F4B0} \uACE8\uB4DC +", ctx_r2.battleRewards.gold);
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r2.battleRewards.items);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.battleRewards.items.length === 0);
  }
}
function DungeonExplorer_div_0_div_31_div_3_button_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 44);
    \u0275\u0275listener("click", function DungeonExplorer_div_0_div_31_div_3_button_4_Template_button_click_0_listener() {
      const room_r7 = \u0275\u0275restoreView(_r6).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r2.moveToRoom(room_r7.id));
    });
    \u0275\u0275elementStart(1, "span", 45);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const room_r7 = ctx.$implicit;
    const idx_r8 = ctx.index;
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(idx_r8 + 1);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate2(" ", ctx_r2.getRoomTypeIcon(room_r7.type), " ", ctx_r2.getRoomTypeKorean(room_r7.type), " ");
  }
}
function DungeonExplorer_div_0_div_31_div_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 40)(1, "div", 41);
    \u0275\u0275text(2, "\u{1F6AA} \uC774\uB3D9 \uAC00\uB2A5\uD55C \uBC29:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 42);
    \u0275\u0275template(4, DungeonExplorer_div_0_div_31_div_3_button_4_Template, 4, 3, "button", 43);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.getConnectedRooms());
  }
}
function DungeonExplorer_div_0_div_31_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 46)(1, "button", 35);
    \u0275\u0275listener("click", function DungeonExplorer_div_0_div_31_div_4_Template_button_click_1_listener() {
      \u0275\u0275restoreView(_r9);
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.moveToNextFloor());
    });
    \u0275\u0275text(2);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" \u2B07\uFE0F ", ctx_r2.dungeon.currentFloor + 1, "\uCE35\uC73C\uB85C \uB0B4\uB824\uAC00\uAE30 ");
  }
}
function DungeonExplorer_div_0_div_31_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 36)(1, "div", 37);
    \u0275\u0275text(2, "\u2705 \uBC29\uC744 \uD074\uB9AC\uC5B4\uD588\uC2B5\uB2C8\uB2E4!");
    \u0275\u0275elementEnd();
    \u0275\u0275template(3, DungeonExplorer_div_0_div_31_div_3_Template, 5, 1, "div", 38)(4, DungeonExplorer_div_0_div_31_div_4_Template, 3, 1, "div", 39);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.getConnectedRooms().length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.currentRoom.type === "exit");
  }
}
function DungeonExplorer_div_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1)(1, "div", 2)(2, "div", 3)(3, "span", 4);
    \u0275\u0275text(4, "\uB358\uC804:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "span", 5);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "div", 3)(8, "span", 4);
    \u0275\u0275text(9, "\uCE35:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "span", 5);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "div", 3)(13, "span", 4);
    \u0275\u0275text(14, "HP:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "span", 6);
    \u0275\u0275text(16);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(17, "div", 3)(18, "span", 4);
    \u0275\u0275text(19, "\uCC98\uCE58:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "span", 5);
    \u0275\u0275text(21);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(22, "div", 7)(23, "div", 8);
    \u0275\u0275text(24);
    \u0275\u0275elementStart(25, "span", 9);
    \u0275\u0275text(26);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(27, "div", 10);
    \u0275\u0275text(28);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(29, DungeonExplorer_div_0_div_29_Template, 7, 1, "div", 11)(30, DungeonExplorer_div_0_div_30_Template, 12, 4, "div", 12)(31, DungeonExplorer_div_0_div_31_Template, 5, 2, "div", 13);
    \u0275\u0275elementStart(32, "div", 14)(33, "button", 15);
    \u0275\u0275listener("click", function DungeonExplorer_div_0_Template_button_click_33_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.escapeDungeon());
    });
    \u0275\u0275text(34, "\u{1F6AA} \uB358\uC804 \uD0C8\uCD9C");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(ctx_r2.dungeon.dungeonTypeId);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate2("", ctx_r2.dungeon.currentFloor, " / ", ctx_r2.dungeon.totalFloors);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate2("", ctx_r2.playerHp, " / ", ctx_r2.playerMaxHp);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate2("\u{1F5E1}\uFE0F", ctx_r2.dungeon.stats.monstersKilled, " \u{1F451}", ctx_r2.dungeon.stats.elitesKilled);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate2(" ", ctx_r2.getRoomTypeIcon(ctx_r2.currentRoom.type), " ", ctx_r2.getRoomTypeKorean(ctx_r2.currentRoom.type), " ");
    \u0275\u0275advance();
    \u0275\u0275classProp("cleared", ctx_r2.currentRoom.isCleared);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r2.currentRoom.isCleared ? "[\uD074\uB9AC\uC5B4]" : "[\uBBF8\uD074\uB9AC\uC5B4]", " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.currentRoom.description);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.currentRoom.isCleared && ctx_r2.currentRoom.monsters && ctx_r2.currentRoom.monsters.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.showRewards && ctx_r2.battleRewards);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.currentRoom.isCleared && !ctx_r2.currentBattleMonster && !ctx_r2.showRewards);
  }
}
var DungeonExplorer = class _DungeonExplorer {
  snackBar;
  modalService = inject(GameModalService);
  dungeon;
  // DungeonInstance
  currentRoom;
  // DungeonRoom
  playerHp = 100;
  playerMaxHp = 100;
  playerMp = 50;
  playerMaxMp = 50;
  playerName = "\uD50C\uB808\uC774\uC5B4";
  playerLevel = 1;
  playerAttackPower = 10;
  playerDefensePower = 5;
  playerEquipment = {};
  // 장비 정보
  playerSkills = [];
  // 스킬 목록
  roomMove = new EventEmitter();
  // 방 이동
  monsterAttack = new EventEmitter();
  // 몬스터 공격
  interactableUse = new EventEmitter();
  // 오브젝트 상호작용
  dungeonEscape = new EventEmitter();
  // 던전 탈출
  floorMove = new EventEmitter();
  // 층 이동
  rewardsClaimed = new EventEmitter();
  // 전투 보상 수령
  // 미니맵 관련
  minimapRooms = [];
  currentFloorRooms = [];
  // UI 상태
  showMinimap = true;
  showMonsterList = true;
  showRoomInfo = true;
  // 전투 상태
  currentBattleMonster = null;
  // 현재 타겟 몬스터 (UI용)
  battleMonsters = [];
  // 전투 중인 모든 몬스터 (1:n 전투)
  selectedMonsterIndex = 0;
  // 선택된 몬스터 인덱스
  isBattleAnimating = false;
  isPlayerAttacking = false;
  isPlayerDamaged = false;
  isMonsterAttacking = false;
  isMonsterDamaged = false;
  monsterDamagedStates = [];
  // 각 몬스터의 피격 상태
  battleLog = [];
  isDefending = false;
  // 전투 보상
  battleRewards = null;
  showRewards = false;
  constructor(snackBar) {
    this.snackBar = snackBar;
  }
  ngOnInit() {
    this.updateMinimapData();
  }
  ngOnChanges(changes) {
    if (changes["dungeon"] || changes["currentRoom"]) {
      this.updateMinimapData();
      this.updateCurrentFloorRooms();
      if (changes["currentRoom"]) {
        this.initializeBattle();
      }
    }
  }
  /**
   * 전투 초기화 - 방에 입장할 때 몬스터 정보만 설정
   */
  initializeBattle() {
    if (!this.currentRoom) {
      this.currentBattleMonster = null;
      this.battleMonsters = [];
      return;
    }
    console.log("\u{1F4CA} \uBC29 \uC815\uBCF4 \uC0C1\uC138:", {
      type: this.currentRoom.type,
      isCleared: this.currentRoom.isCleared,
      monsters: this.currentRoom.monsters,
      monstersCount: this.currentRoom.monsters?.length || 0,
      monstersDetails: this.currentRoom.monsters
    });
    const aliveMonsters = this.currentRoom.monsters?.filter((m) => !m.isDead) || [];
    if (aliveMonsters.length > 0 && !this.currentRoom.isCleared) {
      this.battleMonsters = [...aliveMonsters];
      this.selectedMonsterIndex = 0;
      this.currentBattleMonster = this.battleMonsters[0];
      this.monsterDamagedStates = new Array(this.battleMonsters.length).fill(false);
      console.log(`\u2694\uFE0F ${this.battleMonsters.length}\uB9C8\uB9AC\uC758 \uC801\uACFC \uC870\uC6B0! (\uC804\uD22C \uC2DC\uC791)`);
      setTimeout(() => {
        this.startBattleWithMonster(this.currentBattleMonster);
      }, 500);
    } else {
      this.currentBattleMonster = null;
      this.battleMonsters = [];
      this.battleLog = [];
      console.log("\u274C \uC804\uD22C \uBAAC\uC2A4\uD130 \uC5C6\uC74C - \uC774\uC720:", {
        noAliveMonsters: aliveMonsters.length === 0,
        roomCleared: this.currentRoom.isCleared
      });
    }
    this.isBattleAnimating = false;
    this.isPlayerAttacking = false;
    this.isPlayerDamaged = false;
    this.isMonsterAttacking = false;
    this.isMonsterDamaged = false;
    this.isDefending = false;
  }
  /**
   * 자동 전투 시작 - 제거됨 (기본 게임 전투 시스템 사용)
   */
  startAutoBattle() {
    console.log("\u23F9\uFE0F \uC790\uB3D9 \uC804\uD22C \uBE44\uD65C\uC131\uD654 (\uAE30\uBCF8 \uC804\uD22C \uC2DC\uC2A4\uD15C \uC0AC\uC6A9)");
  }
  /**
   * 미니맵 데이터 업데이트
   */
  updateMinimapData() {
    if (!this.dungeon || !this.currentRoom)
      return;
    const currentFloor = this.dungeon.floors[this.dungeon.currentFloor - 1];
    if (!currentFloor)
      return;
    this.minimapRooms = currentFloor.rooms.map((room) => ({
      id: room.id,
      type: room.type,
      isExplored: room.isExplored,
      isCurrentRoom: room.id === this.currentRoom.id,
      isCleared: room.isCleared,
      position: this.calculateRoomPosition(room, currentFloor.rooms)
    }));
  }
  /**
   * 현재 층의 방 목록 업데이트
   */
  updateCurrentFloorRooms() {
    if (!this.dungeon)
      return;
    const currentFloor = this.dungeon.floors[this.dungeon.currentFloor - 1];
    if (!currentFloor)
      return;
    this.currentFloorRooms = currentFloor.rooms;
  }
  /**
   * 방 위치 계산 (미니맵용)
   */
  calculateRoomPosition(room, allRooms) {
    const index = allRooms.findIndex((r) => r.id === room.id);
    const columns = 5;
    return {
      x: index % columns * 60 + 30,
      y: Math.floor(index / columns) * 60 + 30
    };
  }
  /**
   * 방 이동
   */
  moveToRoom(roomId) {
    if (!this.currentRoom)
      return;
    if (this.currentRoom.connectedRoomIds.includes(roomId)) {
      this.roomMove.emit(roomId);
    }
  }
  /**
   * 몬스터 공격
   */
  attackMonster(monster) {
    this.monsterAttack.emit(monster);
  }
  /**
   * 몬스터와 전투 시작 (자동 호출)
   */
  startBattleWithMonster(monster) {
    if (!monster)
      return;
    this.monsterAttack.emit(monster);
  }
  /**
   * 오브젝트 사용
   */
  useInteractable(interactable) {
    this.interactableUse.emit(interactable);
  }
  /**
   * 던전 탈출
   */
  escapeDungeon() {
    this.modalService.showConfirm("\uB358\uC804\uC5D0\uC11C \uD0C8\uCD9C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?<br>\uC9C4\uD589 \uC0C1\uD669\uC774 \uC0AC\uB77C\uC9D1\uB2C8\uB2E4.", () => {
      this.dungeonEscape.emit();
    }, "\uB358\uC804 \uD0C8\uCD9C", "\uD0C8\uCD9C", "\uCDE8\uC18C");
  }
  /**
   * 다음 층으로 이동
   */
  moveToNextFloor() {
    if (!this.dungeon)
      return;
    const nextFloor = this.dungeon.currentFloor + 1;
    if (nextFloor <= this.dungeon.totalFloors) {
      this.floorMove.emit(nextFloor);
    }
  }
  /**
   * 연결된 방 목록 가져오기
   */
  getConnectedRooms() {
    if (!this.currentRoom || !this.currentFloorRooms)
      return [];
    return this.currentFloorRooms.filter((room) => this.currentRoom.connectedRoomIds.includes(room.id));
  }
  /**
   * HP 퍼센트
   */
  getHpPercent() {
    return this.playerHp / this.playerMaxHp * 100;
  }
  /**
   * MP 퍼센트
   */
  getMpPercent() {
    return this.playerMp / this.playerMaxMp * 100;
  }
  /**
   * 방 타입 아이콘
   */
  getRoomTypeIcon(type) {
    const icons = {
      entrance: "\u{1F6AA}",
      normal: "\u2694\uFE0F",
      elite: "\u{1F451}",
      boss: "\u{1F480}",
      treasure: "\u{1F48E}",
      shrine: "\u2728",
      shop: "\u{1F3EA}",
      safe: "\u{1F6E1}\uFE0F",
      event: "\u2753",
      exit: "\u{1F6AA}"
    };
    return icons[type] || "\u2753";
  }
  /**
   * 방 타입 한글명
   */
  getRoomTypeKorean(type) {
    const names = {
      entrance: "\uC785\uAD6C",
      normal: "\uC77C\uBC18 \uBC29",
      elite: "\uC5D8\uB9AC\uD2B8 \uBC29",
      boss: "\uBCF4\uC2A4 \uBC29",
      treasure: "\uBCF4\uBB3C \uBC29",
      shrine: "\uC131\uC18C",
      shop: "\uC0C1\uC810",
      safe: "\uC548\uC804 \uC9C0\uB300",
      event: "\uC774\uBCA4\uD2B8 \uBC29",
      exit: "\uCD9C\uAD6C"
    };
    return names[type] || "\uC54C \uC218 \uC5C6\uB294 \uBC29";
  }
  /**
   * 몬스터 타입 색상
   */
  getMonsterTypeColor(type) {
    const colors = {
      normal: "#cccccc",
      elite: "#4169E1",
      boss: "#FF4500"
    };
    return colors[type] || "#cccccc";
  }
  /**
   * 미니맵 토글
   */
  toggleMinimap() {
    this.showMinimap = !this.showMinimap;
  }
  /**
   * 몬스터 리스트 토글
   */
  toggleMonsterList() {
    this.showMonsterList = !this.showMonsterList;
  }
  /**
   * 방 정보 토글
   */
  toggleRoomInfo() {
    this.showRoomInfo = !this.showRoomInfo;
  }
  /**
   * 진행도 퍼센트
   */
  getProgressPercent() {
    if (!this.dungeon)
      return 0;
    const currentFloor = this.dungeon.currentFloor;
    const totalFloors = this.dungeon.totalFloors;
    return currentFloor / totalFloors * 100;
  }
  /**
   * 탐험한 방 개수
   */
  getExploredRoomsCount() {
    if (!this.currentFloorRooms)
      return 0;
    return this.currentFloorRooms.filter((room) => room.isExplored).length;
  }
  /**
   * 클리어한 방 개수
   */
  getClearedRoomsCount() {
    if (!this.currentFloorRooms)
      return 0;
    return this.currentFloorRooms.filter((room) => room.isCleared).length;
  }
  /**
   * 살아있는 몬스터 목록
   */
  getAliveMonsters() {
    return this.battleMonsters.filter((m) => !m.isDead);
  }
  /**
   * 몬스터 선택 (타겟 변경)
   */
  selectMonster(index) {
    if (this.battleMonsters[index] && !this.battleMonsters[index].isDead) {
      this.selectedMonsterIndex = index;
      this.currentBattleMonster = this.battleMonsters[index];
    }
  }
  /**
   * 사용 가능한 오브젝트 목록
   */
  getAvailableInteractables() {
    if (!this.currentRoom)
      return [];
    return this.currentRoom.interactables.filter((i) => !i.isUsed);
  }
  /**
   * 몬스터 아이콘
   */
  getMonsterIcon(type) {
    const icons = {
      normal: "\u{1F479}",
      elite: "\u{1F451}",
      boss: "\u{1F480}"
    };
    return icons[type] || "\u{1F479}";
  }
  // ==================== 전투 시스템 (제거 - 기본 게임 전투 사용) ====================
  /**
   * 전투 보상 계산 및 표시
   */
  calculateAndShowRewards() {
    if (!this.currentRoom || !this.battleMonsters.length)
      return;
    let totalExp = 0;
    let totalGold = 0;
    const droppedItems = [];
    this.battleMonsters.forEach((monster) => {
      const expMultiplier = {
        normal: 20,
        elite: 50,
        boss: 150
      };
      totalExp += monster.level * (expMultiplier[monster.type] || 20);
      const goldMultiplier = {
        normal: 10,
        elite: 30,
        boss: 100
      };
      totalGold += Math.floor(monster.level * (goldMultiplier[monster.type] || 10) * (0.8 + Math.random() * 0.4));
      const dropChance = {
        normal: 0.15,
        // 15%
        elite: 0.4,
        // 40%
        boss: 0.8
        // 80%
      };
      if (Math.random() < (dropChance[monster.type] || 0.15)) {
        const itemRarity = Math.random();
        let rarity = "common";
        if (itemRarity > 0.95)
          rarity = "legendary";
        else if (itemRarity > 0.85)
          rarity = "epic";
        else if (itemRarity > 0.65)
          rarity = "rare";
        else if (itemRarity > 0.35)
          rarity = "uncommon";
        droppedItems.push({
          name: `${monster.name}\uC758 \uC804\uB9AC\uD488`,
          rarity,
          level: monster.level
        });
      }
    });
    this.battleRewards = {
      exp: totalExp,
      gold: totalGold,
      items: droppedItems
    };
    this.showRewards = true;
  }
  /**
   * 보상 수령
   */
  claimRewards() {
    if (!this.battleRewards)
      return;
    this.rewardsClaimed.emit(this.battleRewards);
    this.showRewards = false;
    this.battleRewards = null;
    this.battleMonsters = [];
  }
  static \u0275fac = function DungeonExplorer_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _DungeonExplorer)(\u0275\u0275directiveInject(MatSnackBar));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _DungeonExplorer, selectors: [["app-dungeon-explorer"]], inputs: { dungeon: "dungeon", currentRoom: "currentRoom", playerHp: "playerHp", playerMaxHp: "playerMaxHp", playerMp: "playerMp", playerMaxMp: "playerMaxMp", playerName: "playerName", playerLevel: "playerLevel", playerAttackPower: "playerAttackPower", playerDefensePower: "playerDefensePower", playerEquipment: "playerEquipment", playerSkills: "playerSkills" }, outputs: { roomMove: "roomMove", monsterAttack: "monsterAttack", interactableUse: "interactableUse", dungeonEscape: "dungeonEscape", floorMove: "floorMove", rewardsClaimed: "rewardsClaimed" }, standalone: false, features: [\u0275\u0275NgOnChangesFeature], decls: 1, vars: 1, consts: [["class", "dungeon-explorer-text", 4, "ngIf"], [1, "dungeon-explorer-text"], [1, "dungeon-status-bar"], [1, "status-item"], [1, "label"], [1, "value"], [1, "value", "hp-value"], [1, "room-info-text"], [1, "room-title"], [1, "room-status-badge"], [1, "room-description"], ["class", "battle-log-section", 4, "ngIf"], ["class", "rewards-text-section", 4, "ngIf"], ["class", "room-cleared-text", 4, "ngIf"], [1, "dungeon-footer-text"], [1, "text-button", "danger", 3, "click"], [1, "battle-log-section"], [1, "battle-header-text"], [1, "monster-list-text"], ["class", "monster-item", 3, "defeated", 4, "ngFor", "ngForOf"], [1, "battle-notice-text"], [1, "monster-item"], [1, "monster-name"], ["class", "monster-status", 4, "ngIf"], ["class", "monster-status defeated-mark", 4, "ngIf"], ["class", "monster-stats", 4, "ngIf"], [1, "monster-status"], [1, "monster-status", "defeated-mark"], [1, "monster-stats"], [1, "rewards-text-section"], [1, "rewards-header"], [1, "rewards-list"], [1, "reward-line"], ["class", "reward-line", 4, "ngFor", "ngForOf"], ["class", "reward-line", 4, "ngIf"], [1, "text-button", "primary", 3, "click"], [1, "room-cleared-text"], [1, "cleared-message"], ["class", "room-choices", 4, "ngIf"], ["class", "floor-exit-text", 4, "ngIf"], [1, "room-choices"], [1, "choices-title"], [1, "choice-buttons"], ["class", "text-button choice", 3, "click", 4, "ngFor", "ngForOf"], [1, "text-button", "choice", 3, "click"], [1, "choice-number"], [1, "floor-exit-text"]], template: function DungeonExplorer_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275template(0, DungeonExplorer_div_0_Template, 35, 16, "div", 0);
    }
    if (rf & 2) {
      \u0275\u0275property("ngIf", ctx.dungeon && ctx.currentRoom);
    }
  }, dependencies: [NgForOf, NgIf], styles: ['\n\n.dungeon-explorer-text[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  padding: 1rem;\n  font-family:\n    "Noto Sans KR",\n    "Malgun Gothic",\n    sans-serif;\n  color: #2c2416;\n  background:\n    linear-gradient(\n      135deg,\n      #f5f1e8 0%,\n      #e8dcc8 100%);\n  border-radius: 6px;\n  max-height: 70vh;\n  overflow-y: auto;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .dungeon-status-bar[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 1.5rem;\n  padding: 0.8rem 1rem;\n  background: rgba(139, 69, 19, 0.1);\n  border-left: 3px solid #8b4513;\n  font-size: 0.9rem;\n  border-radius: 4px;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .dungeon-status-bar[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.3rem;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .dungeon-status-bar[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: #8b4513;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .dungeon-status-bar[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%] {\n  color: #2c2416;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .dungeon-status-bar[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .value.hp-value[_ngcontent-%COMP%] {\n  color: #dc3545;\n  font-weight: 600;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .room-info-text[_ngcontent-%COMP%] {\n  padding: 1rem;\n  background: rgba(139, 69, 19, 0.05);\n  border-radius: 4px;\n  border: 1px solid rgba(139, 69, 19, 0.2);\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .room-info-text[_ngcontent-%COMP%]   .room-title[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: #8b4513;\n  margin-bottom: 0.5rem;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .room-info-text[_ngcontent-%COMP%]   .room-title[_ngcontent-%COMP%]   .room-status-badge[_ngcontent-%COMP%] {\n  margin-left: 0.5rem;\n  font-size: 0.85rem;\n  padding: 0.2rem 0.6rem;\n  background: #ffc107;\n  color: #333;\n  border-radius: 3px;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .room-info-text[_ngcontent-%COMP%]   .room-title[_ngcontent-%COMP%]   .room-status-badge.cleared[_ngcontent-%COMP%] {\n  background: #28a745;\n  color: white;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .room-info-text[_ngcontent-%COMP%]   .room-description[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  line-height: 1.6;\n  color: #4a3520;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%] {\n  padding: 1rem;\n  background: rgba(220, 53, 69, 0.05);\n  border-left: 3px solid #dc3545;\n  border-radius: 4px;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .battle-header-text[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #dc3545;\n  margin-bottom: 1rem;\n  text-align: center;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n  margin-bottom: 1rem;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item[_ngcontent-%COMP%] {\n  padding: 0.8rem;\n  background: rgba(255, 255, 255, 0.5);\n  border-left: 3px solid #dc3545;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item.defeated[_ngcontent-%COMP%] {\n  opacity: 0.5;\n  border-left-color: #6c757d;\n  background: rgba(108, 117, 125, 0.1);\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item[_ngcontent-%COMP%]   .monster-name[_ngcontent-%COMP%] {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #dc3545;\n  margin-bottom: 0.3rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item[_ngcontent-%COMP%]   .monster-name[_ngcontent-%COMP%]   .monster-status[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item[_ngcontent-%COMP%]   .monster-name[_ngcontent-%COMP%]   .monster-status.defeated-mark[_ngcontent-%COMP%] {\n  opacity: 0.7;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item[_ngcontent-%COMP%]   .monster-stats[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n  color: #666;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item.defeated[_ngcontent-%COMP%]   .monster-name[_ngcontent-%COMP%] {\n  color: #6c757d;\n  text-decoration: line-through;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .battle-notice-text[_ngcontent-%COMP%] {\n  text-align: center;\n  font-size: 0.9rem;\n  color: #666;\n  font-style: italic;\n  padding: 0.5rem;\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 4px;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .rewards-text-section[_ngcontent-%COMP%] {\n  padding: 1rem;\n  background: rgba(40, 167, 69, 0.1);\n  border-left: 3px solid #28a745;\n  border-radius: 4px;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .rewards-text-section[_ngcontent-%COMP%]   .rewards-header[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: #28a745;\n  margin-bottom: 1rem;\n  text-align: center;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .rewards-text-section[_ngcontent-%COMP%]   .rewards-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-bottom: 1rem;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .rewards-text-section[_ngcontent-%COMP%]   .rewards-list[_ngcontent-%COMP%]   .reward-line[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  padding: 0.5rem;\n  background: rgba(255, 255, 255, 0.5);\n  border-radius: 3px;\n  border-left: 2px solid #28a745;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .room-cleared-text[_ngcontent-%COMP%] {\n  padding: 1rem;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .room-cleared-text[_ngcontent-%COMP%]   .cleared-message[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #28a745;\n  text-align: center;\n  margin-bottom: 1.5rem;\n  padding: 0.8rem;\n  background: rgba(40, 167, 69, 0.1);\n  border-radius: 4px;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .room-cleared-text[_ngcontent-%COMP%]   .room-choices[_ngcontent-%COMP%] {\n  margin-bottom: 1rem;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .room-cleared-text[_ngcontent-%COMP%]   .room-choices[_ngcontent-%COMP%]   .choices-title[_ngcontent-%COMP%] {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #8b4513;\n  margin-bottom: 0.8rem;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .room-cleared-text[_ngcontent-%COMP%]   .room-choices[_ngcontent-%COMP%]   .choice-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.7rem 1rem;\n  background: rgba(139, 69, 19, 0.1);\n  border: 1px solid #8b4513;\n  border-radius: 4px;\n  color: #2c2416;\n  font-size: 0.95rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-family: inherit;\n  font-weight: 500;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button[_ngcontent-%COMP%]:hover {\n  background: rgba(139, 69, 19, 0.2);\n  transform: translateX(3px);\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button[_ngcontent-%COMP%]:active {\n  transform: translateX(1px);\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button.choice[_ngcontent-%COMP%] {\n  justify-content: flex-start;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button.choice[_ngcontent-%COMP%]   .choice-number[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 24px;\n  height: 24px;\n  background: #8b4513;\n  color: white;\n  border-radius: 50%;\n  font-size: 0.85rem;\n  font-weight: 600;\n  margin-right: 0.5rem;\n  padding: 0 0.3rem;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button.primary[_ngcontent-%COMP%] {\n  background: #28a745;\n  border-color: #28a745;\n  color: white;\n  font-weight: 600;\n  justify-content: center;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button.primary[_ngcontent-%COMP%]:hover {\n  background: #218838;\n  border-color: #1e7e34;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button.danger[_ngcontent-%COMP%] {\n  background: #dc3545;\n  border-color: #dc3545;\n  color: white;\n  font-weight: 600;\n  justify-content: center;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button.danger[_ngcontent-%COMP%]:hover {\n  background: #c82333;\n  border-color: #bd2130;\n  transform: none;\n}\n.dungeon-explorer-text[_ngcontent-%COMP%]   .dungeon-footer-text[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  padding-top: 1rem;\n  border-top: 1px solid rgba(139, 69, 19, 0.2);\n}\n/*# sourceMappingURL=dungeon-explorer.css.map */'] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(DungeonExplorer, [{
    type: Component,
    args: [{ selector: "app-dungeon-explorer", standalone: false, template: `<div class="dungeon-explorer-text" *ngIf="dungeon && currentRoom">
  
  <!-- \uB358\uC804 \uC0C1\uD0DC \uC815\uBCF4 -->
  <div class="dungeon-status-bar">
    <div class="status-item">
      <span class="label">\uB358\uC804:</span>
      <span class="value">{{ dungeon.dungeonTypeId }}</span>
    </div>
    <div class="status-item">
      <span class="label">\uCE35:</span>
      <span class="value">{{ dungeon.currentFloor }} / {{ dungeon.totalFloors }}</span>
    </div>
    <div class="status-item">
      <span class="label">HP:</span>
      <span class="value hp-value">{{ playerHp }} / {{ playerMaxHp }}</span>
    </div>
    <div class="status-item">
      <span class="label">\uCC98\uCE58:</span>
      <span class="value">\u{1F5E1}\uFE0F{{ dungeon.stats.monstersKilled }} \u{1F451}{{ dungeon.stats.elitesKilled }}</span>
    </div>
  </div>

  <!-- \uD604\uC7AC \uBC29 \uC815\uBCF4 -->
  <div class="room-info-text">
    <div class="room-title">
      {{ getRoomTypeIcon(currentRoom.type) }} {{ getRoomTypeKorean(currentRoom.type) }}
      <span class="room-status-badge" [class.cleared]="currentRoom.isCleared">
        {{ currentRoom.isCleared ? '[\uD074\uB9AC\uC5B4]' : '[\uBBF8\uD074\uB9AC\uC5B4]' }}
      </span>
    </div>
    <div class="room-description">{{ currentRoom.description }}</div>
  </div>

  <!-- \uC804\uD22C \uC911 - \uBAAC\uC2A4\uD130 \uBAA9\uB85D \uD45C\uC2DC -->
  <div class="battle-log-section" *ngIf="!currentRoom.isCleared && currentRoom.monsters && currentRoom.monsters.length > 0">
    <div class="battle-header-text">\u2694\uFE0F \uC801 \uC870\uC6B0!</div>
    
    <div class="monster-list-text">
      <div 
        *ngFor="let monster of currentRoom.monsters; let idx = index"
        class="monster-item"
        [class.defeated]="monster.isDead"
      >
        <div class="monster-name">
          {{ getMonsterIcon(monster.type) }} {{ monster.name }} (Lv.{{ monster.level }})
          <span class="monster-status" *ngIf="!monster.isDead">\u{1F525}</span>
          <span class="monster-status defeated-mark" *ngIf="monster.isDead">\u{1F480}</span>
        </div>
        <div class="monster-stats" *ngIf="!monster.isDead">
          HP: {{ monster.currentHp || monster.hp }}/{{ monster.maxHp || monster.hp }} | \u2694\uFE0F {{ monster.attack }} | \u{1F6E1}\uFE0F {{ monster.defense }}
        </div>
      </div>
    </div>
    
    <div class="battle-notice-text">
      \uC804\uD22C\uB294 \uAE30\uBCF8 \uAC8C\uC784 \uC2DC\uC2A4\uD15C\uC744 \uC0AC\uC6A9\uD569\uB2C8\uB2E4.
    </div>
  </div>

  <!-- \uC804\uD22C \uBCF4\uC0C1 -->
  <div class="rewards-text-section" *ngIf="showRewards && battleRewards">
    <div class="rewards-header">\u{1F389} \uC804\uD22C \uC2B9\uB9AC!</div>
    <div class="rewards-list">
      <div class="reward-line">\u2B50 \uACBD\uD5D8\uCE58 +{{ battleRewards.exp }}</div>
      <div class="reward-line">\u{1F4B0} \uACE8\uB4DC +{{ battleRewards.gold }}</div>
      <div class="reward-line" *ngFor="let item of battleRewards.items">
        \u{1F381} {{ item.name }} ({{ item.rarity }})
      </div>
      <div class="reward-line" *ngIf="battleRewards.items.length === 0">
        \u{1F4E6} \uC544\uC774\uD15C \uD68D\uB4DD \uC5C6\uC74C
      </div>
    </div>
    <button class="text-button primary" (click)="claimRewards()">\u2705 \uBCF4\uC0C1 \uBC1B\uAE30</button>
  </div>

  <!-- \uBC29 \uD074\uB9AC\uC5B4 \uD6C4 -->
  <div class="room-cleared-text" *ngIf="currentRoom.isCleared && !currentBattleMonster && !showRewards">
    <div class="cleared-message">\u2705 \uBC29\uC744 \uD074\uB9AC\uC5B4\uD588\uC2B5\uB2C8\uB2E4!</div>
    
    <div class="room-choices" *ngIf="getConnectedRooms().length > 0">
      <div class="choices-title">\u{1F6AA} \uC774\uB3D9 \uAC00\uB2A5\uD55C \uBC29:</div>
      <div class="choice-buttons">
        <button
          *ngFor="let room of getConnectedRooms(); let idx = index"
          class="text-button choice"
          (click)="moveToRoom(room.id)"
        >
          <span class="choice-number">{{ idx + 1 }}</span>
          {{ getRoomTypeIcon(room.type) }} {{ getRoomTypeKorean(room.type) }}
        </button>
      </div>
    </div>
    
    <div class="floor-exit-text" *ngIf="currentRoom.type === 'exit'">
      <button class="text-button primary" (click)="moveToNextFloor()">
        \u2B07\uFE0F {{ dungeon.currentFloor + 1 }}\uCE35\uC73C\uB85C \uB0B4\uB824\uAC00\uAE30
      </button>
    </div>
  </div>

  <!-- \uD558\uB2E8 \uBC84\uD2BC -->
  <div class="dungeon-footer-text">
    <button class="text-button danger" (click)="escapeDungeon()">\u{1F6AA} \uB358\uC804 \uD0C8\uCD9C</button>
  </div>
</div>
`, styles: ['/* src/app/modules/novel/components/dungeon-explorer/dungeon-explorer.scss */\n.dungeon-explorer-text {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  padding: 1rem;\n  font-family:\n    "Noto Sans KR",\n    "Malgun Gothic",\n    sans-serif;\n  color: #2c2416;\n  background:\n    linear-gradient(\n      135deg,\n      #f5f1e8 0%,\n      #e8dcc8 100%);\n  border-radius: 6px;\n  max-height: 70vh;\n  overflow-y: auto;\n}\n.dungeon-explorer-text .dungeon-status-bar {\n  display: flex;\n  gap: 1.5rem;\n  padding: 0.8rem 1rem;\n  background: rgba(139, 69, 19, 0.1);\n  border-left: 3px solid #8b4513;\n  font-size: 0.9rem;\n  border-radius: 4px;\n}\n.dungeon-explorer-text .dungeon-status-bar .status-item {\n  display: flex;\n  gap: 0.3rem;\n}\n.dungeon-explorer-text .dungeon-status-bar .status-item .label {\n  font-weight: 600;\n  color: #8b4513;\n}\n.dungeon-explorer-text .dungeon-status-bar .status-item .value {\n  color: #2c2416;\n}\n.dungeon-explorer-text .dungeon-status-bar .status-item .value.hp-value {\n  color: #dc3545;\n  font-weight: 600;\n}\n.dungeon-explorer-text .room-info-text {\n  padding: 1rem;\n  background: rgba(139, 69, 19, 0.05);\n  border-radius: 4px;\n  border: 1px solid rgba(139, 69, 19, 0.2);\n}\n.dungeon-explorer-text .room-info-text .room-title {\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: #8b4513;\n  margin-bottom: 0.5rem;\n}\n.dungeon-explorer-text .room-info-text .room-title .room-status-badge {\n  margin-left: 0.5rem;\n  font-size: 0.85rem;\n  padding: 0.2rem 0.6rem;\n  background: #ffc107;\n  color: #333;\n  border-radius: 3px;\n}\n.dungeon-explorer-text .room-info-text .room-title .room-status-badge.cleared {\n  background: #28a745;\n  color: white;\n}\n.dungeon-explorer-text .room-info-text .room-description {\n  font-size: 0.95rem;\n  line-height: 1.6;\n  color: #4a3520;\n}\n.dungeon-explorer-text .battle-log-section {\n  padding: 1rem;\n  background: rgba(220, 53, 69, 0.05);\n  border-left: 3px solid #dc3545;\n  border-radius: 4px;\n}\n.dungeon-explorer-text .battle-log-section .battle-header-text {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #dc3545;\n  margin-bottom: 1rem;\n  text-align: center;\n}\n.dungeon-explorer-text .battle-log-section .monster-list-text {\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n  margin-bottom: 1rem;\n}\n.dungeon-explorer-text .battle-log-section .monster-list-text .monster-item {\n  padding: 0.8rem;\n  background: rgba(255, 255, 255, 0.5);\n  border-left: 3px solid #dc3545;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.dungeon-explorer-text .battle-log-section .monster-list-text .monster-item.defeated {\n  opacity: 0.5;\n  border-left-color: #6c757d;\n  background: rgba(108, 117, 125, 0.1);\n}\n.dungeon-explorer-text .battle-log-section .monster-list-text .monster-item .monster-name {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #dc3545;\n  margin-bottom: 0.3rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.dungeon-explorer-text .battle-log-section .monster-list-text .monster-item .monster-name .monster-status {\n  font-size: 0.9rem;\n}\n.dungeon-explorer-text .battle-log-section .monster-list-text .monster-item .monster-name .monster-status.defeated-mark {\n  opacity: 0.7;\n}\n.dungeon-explorer-text .battle-log-section .monster-list-text .monster-item .monster-stats {\n  font-size: 0.9rem;\n  color: #666;\n}\n.dungeon-explorer-text .battle-log-section .monster-list-text .monster-item.defeated .monster-name {\n  color: #6c757d;\n  text-decoration: line-through;\n}\n.dungeon-explorer-text .battle-log-section .battle-notice-text {\n  text-align: center;\n  font-size: 0.9rem;\n  color: #666;\n  font-style: italic;\n  padding: 0.5rem;\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 4px;\n}\n.dungeon-explorer-text .rewards-text-section {\n  padding: 1rem;\n  background: rgba(40, 167, 69, 0.1);\n  border-left: 3px solid #28a745;\n  border-radius: 4px;\n}\n.dungeon-explorer-text .rewards-text-section .rewards-header {\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: #28a745;\n  margin-bottom: 1rem;\n  text-align: center;\n}\n.dungeon-explorer-text .rewards-text-section .rewards-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-bottom: 1rem;\n}\n.dungeon-explorer-text .rewards-text-section .rewards-list .reward-line {\n  font-size: 0.95rem;\n  padding: 0.5rem;\n  background: rgba(255, 255, 255, 0.5);\n  border-radius: 3px;\n  border-left: 2px solid #28a745;\n}\n.dungeon-explorer-text .room-cleared-text {\n  padding: 1rem;\n}\n.dungeon-explorer-text .room-cleared-text .cleared-message {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #28a745;\n  text-align: center;\n  margin-bottom: 1.5rem;\n  padding: 0.8rem;\n  background: rgba(40, 167, 69, 0.1);\n  border-radius: 4px;\n}\n.dungeon-explorer-text .room-cleared-text .room-choices {\n  margin-bottom: 1rem;\n}\n.dungeon-explorer-text .room-cleared-text .room-choices .choices-title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #8b4513;\n  margin-bottom: 0.8rem;\n}\n.dungeon-explorer-text .room-cleared-text .room-choices .choice-buttons {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.dungeon-explorer-text .text-button {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.7rem 1rem;\n  background: rgba(139, 69, 19, 0.1);\n  border: 1px solid #8b4513;\n  border-radius: 4px;\n  color: #2c2416;\n  font-size: 0.95rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-family: inherit;\n  font-weight: 500;\n}\n.dungeon-explorer-text .text-button:hover {\n  background: rgba(139, 69, 19, 0.2);\n  transform: translateX(3px);\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n}\n.dungeon-explorer-text .text-button:active {\n  transform: translateX(1px);\n}\n.dungeon-explorer-text .text-button.choice {\n  justify-content: flex-start;\n}\n.dungeon-explorer-text .text-button.choice .choice-number {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 24px;\n  height: 24px;\n  background: #8b4513;\n  color: white;\n  border-radius: 50%;\n  font-size: 0.85rem;\n  font-weight: 600;\n  margin-right: 0.5rem;\n  padding: 0 0.3rem;\n}\n.dungeon-explorer-text .text-button.primary {\n  background: #28a745;\n  border-color: #28a745;\n  color: white;\n  font-weight: 600;\n  justify-content: center;\n}\n.dungeon-explorer-text .text-button.primary:hover {\n  background: #218838;\n  border-color: #1e7e34;\n}\n.dungeon-explorer-text .text-button.danger {\n  background: #dc3545;\n  border-color: #dc3545;\n  color: white;\n  font-weight: 600;\n  justify-content: center;\n}\n.dungeon-explorer-text .text-button.danger:hover {\n  background: #c82333;\n  border-color: #bd2130;\n  transform: none;\n}\n.dungeon-explorer-text .dungeon-footer-text {\n  display: flex;\n  justify-content: center;\n  padding-top: 1rem;\n  border-top: 1px solid rgba(139, 69, 19, 0.2);\n}\n/*# sourceMappingURL=dungeon-explorer.css.map */\n'] }]
  }], () => [{ type: MatSnackBar }], { dungeon: [{
    type: Input
  }], currentRoom: [{
    type: Input
  }], playerHp: [{
    type: Input
  }], playerMaxHp: [{
    type: Input
  }], playerMp: [{
    type: Input
  }], playerMaxMp: [{
    type: Input
  }], playerName: [{
    type: Input
  }], playerLevel: [{
    type: Input
  }], playerAttackPower: [{
    type: Input
  }], playerDefensePower: [{
    type: Input
  }], playerEquipment: [{
    type: Input
  }], playerSkills: [{
    type: Input
  }], roomMove: [{
    type: Output
  }], monsterAttack: [{
    type: Output
  }], interactableUse: [{
    type: Output
  }], dungeonEscape: [{
    type: Output
  }], floorMove: [{
    type: Output
  }], rewardsClaimed: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(DungeonExplorer, { className: "DungeonExplorer", filePath: "src/app/modules/novel/components/dungeon-explorer/dungeon-explorer.ts", lineNumber: 15 });
})();

// src/app/modules/novel/components/novel-generator/novel-generator.component.ts
var _c0 = ["battleLogContainer"];
var _c1 = () => [];
var _c2 = (a0) => ({ slot: "weapon", item: a0 });
var _c3 = () => ["inventory-grid"];
var _c4 = (a0) => ({ slot: "armor", item: a0 });
var _c5 = (a0) => ({ slot: "helmet", item: a0 });
var _c6 = (a0) => ({ slot: "amulet", item: a0 });
var _c7 = (a0) => ({ slot: "belt", item: a0 });
var _c8 = (a0) => ({ slot: "gloves", item: a0 });
var _c9 = (a0) => ({ slot: "boots", item: a0 });
var _c10 = (a0) => ({ slot: "ring1", item: a0 });
var _c11 = (a0) => ({ slot: "ring2", item: a0 });
var _c12 = () => ["weapon-slot", "armor-slot", "helmet-slot", "amulet-slot", "belt-slot", "gloves-slot", "boots-slot", "ring1-slot", "ring2-slot"];
var _c13 = (a0) => ({ item: a0, slot: "weapon" });
var _c14 = (a0) => ({ item: a0, slot: "armor" });
var _c15 = (a0) => ({ item: a0, slot: "helmet" });
var _c16 = (a0) => ({ item: a0, slot: "amulet" });
var _c17 = (a0) => ({ item: a0, slot: "belt" });
var _c18 = (a0) => ({ item: a0, slot: "gloves" });
var _c19 = (a0) => ({ item: a0, slot: "boots" });
var _c20 = (a0) => ({ item: a0, slot: "ring1" });
var _c21 = (a0) => ({ item: a0, slot: "ring2" });
var _c22 = (a0, a1) => ({ item: a0, index: a1 });
var _c23 = (a0, a1, a2, a3) => ({ "node-start": a0, "node-story": a1, "node-choice": a2, "node-current": a3 });
function NovelGeneratorComponent_div_3_div_2_div_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 69)(1, "span");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F464} ", ctx_r2.getCurrentUsername());
  }
}
function NovelGeneratorComponent_div_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 64)(1, "div", 65)(2, "h1");
    \u0275\u0275text(3, "\u{1F3F0} \uD14D\uC2A4\uD2B8\uB358\uC804");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(4, "div", 66);
    \u0275\u0275template(5, NovelGeneratorComponent_div_3_div_2_div_5_Template, 3, 1, "div", 67);
    \u0275\u0275elementStart(6, "button", 68);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_2_Template_button_click_6_listener() {
      \u0275\u0275restoreView(_r2);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.logout());
    });
    \u0275\u0275text(7, " \u{1F6AA} ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275property("ngIf", ctx_r2.getCurrentUsername());
  }
}
function NovelGeneratorComponent_div_3_div_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 70)(1, "span", 71);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F464} ", ctx_r2.getCurrentUsername());
  }
}
function NovelGeneratorComponent_div_3_div_87_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 72)(1, "div", 73);
    \u0275\u0275element(2, "div", 74);
    \u0275\u0275elementStart(3, "div", 75);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.elementGenerationProgress);
  }
}
function NovelGeneratorComponent_div_3_div_88_div_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 99);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r2.storyGenerationError, " ");
  }
}
function NovelGeneratorComponent_div_3_div_88_div_31_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 100);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_88_div_31_Template_div_click_0_listener() {
      const character_r6 = \u0275\u0275restoreView(_r5).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.selectCharacterForStory(character_r6));
    });
    \u0275\u0275elementStart(1, "div", 101);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 102);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const character_r6 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("selected", ctx_r2.isCharacterSelected(character_r6));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(character_r6.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(character_r6.occupation);
  }
}
function NovelGeneratorComponent_div_3_div_88_p_32_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p", 103);
    \u0275\u0275text(1, " \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uCE90\uB9AD\uD130 \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694. ");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_3_div_88_div_39_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 100);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_88_div_39_Template_div_click_0_listener() {
      const item_r8 = \u0275\u0275restoreView(_r7).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.selectItemForStory(item_r8));
    });
    \u0275\u0275elementStart(1, "div", 101);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 102);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r8 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("selected", ctx_r2.isItemSelected(item_r8));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r8.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", item_r8.type, " \xB7 ", item_r8.grade);
  }
}
function NovelGeneratorComponent_div_3_div_88_p_40_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p", 103);
    \u0275\u0275text(1, " \uC800\uC7A5\uB41C \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uC544\uC774\uD15C \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694. ");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_3_div_88_div_47_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 100);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_88_div_47_Template_div_click_0_listener() {
      const scenario_r10 = \u0275\u0275restoreView(_r9).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.selectScenarioForStory(scenario_r10));
    });
    \u0275\u0275elementStart(1, "div", 101);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 102);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const scenario_r10 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("selected", ctx_r2.isScenarioSelected(scenario_r10));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(scenario_r10.title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(scenario_r10.genre);
  }
}
function NovelGeneratorComponent_div_3_div_88_p_48_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p", 103);
    \u0275\u0275text(1, " \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694. ");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_3_div_88_span_51_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F3AC} \uC2A4\uD1A0\uB9AC \uC0DD\uC131");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_3_div_88_span_52_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_3_div_88_div_53_p_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const line_r12 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(line_r12);
  }
}
function NovelGeneratorComponent_div_3_div_88_div_53_Template(rf, ctx) {
  if (rf & 1) {
    const _r11 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 104)(1, "h4");
    \u0275\u0275text(2, "\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 105)(4, "div", 106)(5, "span", 107);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "h3");
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "p", 108);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "div", 109)(12, "span", 110);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "span", 110);
    \u0275\u0275text(15);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "span", 110);
    \u0275\u0275text(17);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(18, "div", 111)(19, "h5");
    \u0275\u0275text(20, "\uCCAB \uBC88\uC9F8 \uC7A5\uBA74");
    \u0275\u0275elementEnd();
    \u0275\u0275template(21, NovelGeneratorComponent_div_3_div_88_div_53_p_21_Template, 2, 1, "p", 112);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(22, "div", 113)(23, "button", 114);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_88_div_53_Template_button_click_23_listener() {
      \u0275\u0275restoreView(_r11);
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.saveGeneratedStory());
    });
    \u0275\u0275text(24, " \u{1F4BE} \uC2A4\uD1A0\uB9AC \uC800\uC7A5 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "button", 115);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_88_div_53_Template_button_click_25_listener() {
      \u0275\u0275restoreView(_r11);
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.addGeneratedStoryToList());
    });
    \u0275\u0275text(26, " \u{1F3AE} \uAC8C\uC784 \uC2DC\uC791 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(27, "button", 116);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_88_div_53_Template_button_click_27_listener() {
      \u0275\u0275restoreView(_r11);
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.clearGeneratedStory());
    });
    \u0275\u0275text(28, " \u{1F504} \uB2E4\uC2DC \uC0DD\uC131 ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(ctx_r2.generatedStory.icon);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.generatedStory.title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.generatedStory.description);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("\u{1F4DA} ", ctx_r2.generatedStory.genre);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u2694\uFE0F ", ctx_r2.generatedStory.difficulty === "easy" ? "\uC26C\uC6C0" : ctx_r2.generatedStory.difficulty === "normal" ? "\uBCF4\uD1B5" : "\uC5B4\uB824\uC6C0");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F4B0} ", ctx_r2.generatedStory.startingGold, "G");
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.generatedStory.firstStory);
  }
}
function NovelGeneratorComponent_div_3_div_88_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 76)(1, "div", 77)(2, "div", 78)(3, "h3");
    \u0275\u0275text(4, "\u2728 \uC2A4\uD1A0\uB9AC \uC0DD\uC131\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_88_Template_button_click_5_listener() {
      \u0275\u0275restoreView(_r4);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleStoryCreatorPanel());
    });
    \u0275\u0275text(6, "\u2715");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "div", 80)(8, "h4");
    \u0275\u0275text(9, "\uC800\uC7A5\uB41C \uCF58\uD150\uCE20\uB85C \uC0C8\uB85C\uC6B4 \uC774\uC57C\uAE30\uB97C \uB9CC\uB4E4\uC5B4\uBCF4\uC138\uC694");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "p");
    \u0275\u0275text(11, "\uCE90\uB9AD\uD130, \uC544\uC774\uD15C, \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uBA74 Loworld AI\uAC00 \uD765\uBBF8\uC9C4\uC9C4\uD55C \uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4.");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(12, NovelGeneratorComponent_div_3_div_88_div_12_Template, 2, 1, "div", 81);
    \u0275\u0275elementStart(13, "div", 82)(14, "label", 83)(15, "span", 84);
    \u0275\u0275text(16, "\u{1F4D6}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "span", 85);
    \u0275\u0275text(18, "\uC2A4\uD1A0\uB9AC \uC81C\uBAA9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(19, "span", 86);
    \u0275\u0275text(20, "*");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(21, "input", 87);
    \u0275\u0275twoWayListener("ngModelChange", function NovelGeneratorComponent_div_3_div_88_Template_input_ngModelChange_21_listener($event) {
      \u0275\u0275restoreView(_r4);
      const ctx_r2 = \u0275\u0275nextContext(2);
      \u0275\u0275twoWayBindingSet(ctx_r2.storyTitle, $event) || (ctx_r2.storyTitle = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "div", 88);
    \u0275\u0275text(23);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(24, "div", 89)(25, "div", 90)(26, "h5");
    \u0275\u0275text(27, "\u{1F3AD} \uC8FC\uC778\uACF5 \uC120\uD0DD ");
    \u0275\u0275elementStart(28, "span", 91);
    \u0275\u0275text(29);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(30, "div", 92);
    \u0275\u0275template(31, NovelGeneratorComponent_div_3_div_88_div_31_Template, 5, 4, "div", 93);
    \u0275\u0275elementEnd();
    \u0275\u0275template(32, NovelGeneratorComponent_div_3_div_88_p_32_Template, 2, 0, "p", 94);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(33, "div", 90)(34, "h5");
    \u0275\u0275text(35, "\u{1F48E} \uD575\uC2EC \uC544\uC774\uD15C \uC120\uD0DD ");
    \u0275\u0275elementStart(36, "span", 91);
    \u0275\u0275text(37);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(38, "div", 92);
    \u0275\u0275template(39, NovelGeneratorComponent_div_3_div_88_div_39_Template, 5, 5, "div", 93);
    \u0275\u0275elementEnd();
    \u0275\u0275template(40, NovelGeneratorComponent_div_3_div_88_p_40_Template, 2, 0, "p", 94);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(41, "div", 90)(42, "h5");
    \u0275\u0275text(43, "\u{1F3AC} \uC2DC\uB098\uB9AC\uC624 \uC120\uD0DD ");
    \u0275\u0275elementStart(44, "span", 91);
    \u0275\u0275text(45);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(46, "div", 92);
    \u0275\u0275template(47, NovelGeneratorComponent_div_3_div_88_div_47_Template, 5, 4, "div", 93);
    \u0275\u0275elementEnd();
    \u0275\u0275template(48, NovelGeneratorComponent_div_3_div_88_p_48_Template, 2, 0, "p", 94);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(49, "div", 95)(50, "button", 96);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_88_Template_button_click_50_listener() {
      \u0275\u0275restoreView(_r4);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.generateStoryFromSavedContent());
    });
    \u0275\u0275template(51, NovelGeneratorComponent_div_3_div_88_span_51_Template, 2, 0, "span", 97)(52, NovelGeneratorComponent_div_3_div_88_span_52_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(53, NovelGeneratorComponent_div_3_div_88_div_53_Template, 29, 7, "div", 98);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(12);
    \u0275\u0275property("ngIf", ctx_r2.storyGenerationError);
    \u0275\u0275advance(9);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.storyTitle);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", ctx_r2.storyTitle.length, "/50");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1("(", ctx_r2.selectedCharactersForStory.length, "\uAC1C \uC120\uD0DD\uB428)");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.savedCharacters);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.savedCharacters.length === 0);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("(", ctx_r2.selectedItemsForStory.length, "\uAC1C \uC120\uD0DD\uB428)");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.savedItems);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.savedItems.length === 0);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("(", ctx_r2.selectedScenariosForStory.length, "\uAC1C \uC120\uD0DD\uB428)");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.savedScenarios);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.savedScenarios.length === 0);
    \u0275\u0275advance(2);
    \u0275\u0275property("disabled", ctx_r2.isGeneratingStory || !ctx_r2.storyTitle || ctx_r2.storyTitle.trim() === "" || ctx_r2.selectedCharactersForStory.length === 0 || ctx_r2.selectedItemsForStory.length === 0 || ctx_r2.selectedScenariosForStory.length === 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingStory);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingStory);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedStory);
  }
}
function NovelGeneratorComponent_div_3_div_89_div_11_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r14 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 128);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_89_div_11_div_4_Template_div_click_0_listener() {
      const story_r15 = \u0275\u0275restoreView(_r14).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r2.loadSavedStoryForGame(story_r15));
    });
    \u0275\u0275elementStart(1, "div", 129)(2, "div", 130)(3, "span", 107);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "h4");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "button", 131);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_89_div_11_div_4_Template_button_click_7_listener($event) {
      const story_r15 = \u0275\u0275restoreView(_r14).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r2.deleteSavedStory(story_r15.id, $event));
    });
    \u0275\u0275text(8, " \u{1F5D1}\uFE0F ");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 109)(10, "span", 110);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "span", 110);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "span", 110);
    \u0275\u0275text(15);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(16, "p", 132);
    \u0275\u0275text(17);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "div", 133)(19, "span", 134);
    \u0275\u0275text(20);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(21, "span", 135);
    \u0275\u0275text(22, "\u{1F916} AI \uC0DD\uC131");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const story_r15 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(story_r15.icon);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(story_r15.title);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("\u{1F4DA} ", story_r15.genre);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u2694\uFE0F ", story_r15.difficulty === "easy" ? "\uC26C\uC6C0" : story_r15.difficulty === "normal" ? "\uBCF4\uD1B5" : "\uC5B4\uB824\uC6C0");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F4B0} ", story_r15.startingGold, "G");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(story_r15.description);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.formatSaveDate(story_r15.createdAt));
  }
}
function NovelGeneratorComponent_div_3_div_89_div_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 124)(1, "p", 125);
    \u0275\u0275text(2, "AI\uAC00 \uC0DD\uC131\uD55C \uB098\uB9CC\uC758 \uC774\uC57C\uAE30\uB4E4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 126);
    \u0275\u0275template(4, NovelGeneratorComponent_div_3_div_89_div_11_div_4_Template, 23, 7, "div", 127);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.savedStories);
  }
}
function NovelGeneratorComponent_div_3_div_89_Template(rf, ctx) {
  if (rf & 1) {
    const _r13 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 117)(1, "div", 118);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_89_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r13);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleStories());
    });
    \u0275\u0275elementStart(2, "div", 119)(3, "span", 120);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "h3");
    \u0275\u0275text(6, "\u{1F4DA} \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "span", 121);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "button", 122);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_89_Template_button_click_9_listener($event) {
      \u0275\u0275restoreView(_r13);
      const ctx_r2 = \u0275\u0275nextContext(2);
      ctx_r2.toggleStories();
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(11, NovelGeneratorComponent_div_3_div_89_div_11_Template, 5, 1, "div", 123);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.isStoriesExpanded ? "\u25BC" : "\u25B6");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.savedStories.length);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", ctx_r2.isStoriesExpanded ? "\uC811\uAE30" : "\uD3BC\uCE58\uAE30", " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isStoriesExpanded);
  }
}
function NovelGeneratorComponent_div_3_div_90_div_11_div_4_div_15_span_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 147);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const trait_r19 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(trait_r19);
  }
}
function NovelGeneratorComponent_div_3_div_90_div_11_div_4_div_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 145);
    \u0275\u0275template(1, NovelGeneratorComponent_div_3_div_90_div_11_div_4_div_15_span_1_Template, 2, 1, "span", 146);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const character_r18 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", character_r18.personality.slice(0, 3));
  }
}
function NovelGeneratorComponent_div_3_div_90_div_11_div_4_div_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 145)(1, "span", 147);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const character_r18 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(character_r18.personality);
  }
}
function NovelGeneratorComponent_div_3_div_90_div_11_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r17 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 139);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_90_div_11_div_4_Template_div_click_0_listener($event) {
      const character_r18 = \u0275\u0275restoreView(_r17).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r2.openCharacterInventory(character_r18, $event));
    });
    \u0275\u0275elementStart(1, "div", 140)(2, "h4");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 131);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_90_div_11_div_4_Template_button_click_4_listener($event) {
      const character_r18 = \u0275\u0275restoreView(_r17).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(character_r18.id && ctx_r2.deleteCharacter(character_r18.id, $event));
    });
    \u0275\u0275text(5, " \u{1F5D1}\uFE0F ");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 141)(7, "span", 110);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "span", 110);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "span", 110);
    \u0275\u0275text(12);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "p", 142);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd();
    \u0275\u0275template(15, NovelGeneratorComponent_div_3_div_90_div_11_div_4_div_15_Template, 2, 1, "div", 143)(16, NovelGeneratorComponent_div_3_div_90_div_11_div_4_div_16_Template, 3, 1, "div", 143);
    \u0275\u0275elementStart(17, "div", 144)(18, "span", 134);
    \u0275\u0275text(19);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const character_r18 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(character_r18.name);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("\u{1F464} ", character_r18.gender);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F4C5} ", character_r18.age, "\uC138");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F4BC} ", character_r18.occupation);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(character_r18.backstory);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isArray(character_r18.personality));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isArray(character_r18.personality) && character_r18.personality);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.formatSaveDate(character_r18.createdAt));
  }
}
function NovelGeneratorComponent_div_3_div_90_div_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 124)(1, "p", 125);
    \u0275\u0275text(2, "AI\uAC00 \uC0DD\uC131\uD55C \uCE90\uB9AD\uD130\uB4E4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 137);
    \u0275\u0275template(4, NovelGeneratorComponent_div_3_div_90_div_11_div_4_Template, 20, 8, "div", 138);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.savedCharacters);
  }
}
function NovelGeneratorComponent_div_3_div_90_Template(rf, ctx) {
  if (rf & 1) {
    const _r16 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 136)(1, "div", 118);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_90_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r16);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleCharacters());
    });
    \u0275\u0275elementStart(2, "div", 119)(3, "span", 120);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "h3");
    \u0275\u0275text(6, "\u{1F3AD} \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "span", 121);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "button", 122);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_90_Template_button_click_9_listener($event) {
      \u0275\u0275restoreView(_r16);
      const ctx_r2 = \u0275\u0275nextContext(2);
      ctx_r2.toggleCharacters();
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(11, NovelGeneratorComponent_div_3_div_90_div_11_Template, 5, 1, "div", 123);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.isCharactersExpanded ? "\u25BC" : "\u25B6");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.savedCharacters.length);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", ctx_r2.isCharactersExpanded ? "\uC811\uAE30" : "\uD3BC\uCE58\uAE30", " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isCharactersExpanded);
  }
}
function NovelGeneratorComponent_div_3_div_91_div_11_div_4_div_8_span_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 159);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const tag_r23 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(tag_r23);
  }
}
function NovelGeneratorComponent_div_3_div_91_div_11_div_4_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 157);
    \u0275\u0275template(1, NovelGeneratorComponent_div_3_div_91_div_11_div_4_div_8_span_1_Template, 2, 1, "span", 158);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const scenario_r22 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", scenario_r22.tags.slice(0, 3));
  }
}
function NovelGeneratorComponent_div_3_div_91_div_11_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r21 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 151);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_91_div_11_div_4_Template_div_click_0_listener() {
      const scenario_r22 = \u0275\u0275restoreView(_r21).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r2.loadScenario(scenario_r22));
    });
    \u0275\u0275elementStart(1, "div", 152)(2, "h4");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 131);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_91_div_11_div_4_Template_button_click_4_listener($event) {
      const scenario_r22 = \u0275\u0275restoreView(_r21).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      ctx_r2.deleteScenario(scenario_r22.id);
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275text(5, " \u{1F5D1}\uFE0F ");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "p", 153);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275template(8, NovelGeneratorComponent_div_3_div_91_div_11_div_4_div_8_Template, 2, 1, "div", 154);
    \u0275\u0275elementStart(9, "div", 155)(10, "span", 156);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "span", 134);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const scenario_r22 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(scenario_r22.title);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(scenario_r22.description);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isArray(scenario_r22.tags) && scenario_r22.tags.length > 0);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(scenario_r22.genre);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.formatSaveDate(scenario_r22.createdAt));
  }
}
function NovelGeneratorComponent_div_3_div_91_div_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 124)(1, "p", 125);
    \u0275\u0275text(2, "AI\uAC00 \uC0DD\uC131\uD55C \uC2DC\uB098\uB9AC\uC624\uB4E4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 149);
    \u0275\u0275template(4, NovelGeneratorComponent_div_3_div_91_div_11_div_4_Template, 14, 5, "div", 150);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.savedScenarios);
  }
}
function NovelGeneratorComponent_div_3_div_91_Template(rf, ctx) {
  if (rf & 1) {
    const _r20 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 148)(1, "div", 118);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_91_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r20);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleScenarios());
    });
    \u0275\u0275elementStart(2, "div", 119)(3, "span", 120);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "h3");
    \u0275\u0275text(6, "\u{1F3AC} \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "span", 121);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "button", 122);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_91_Template_button_click_9_listener($event) {
      \u0275\u0275restoreView(_r20);
      const ctx_r2 = \u0275\u0275nextContext(2);
      ctx_r2.toggleScenarios();
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(11, NovelGeneratorComponent_div_3_div_91_div_11_Template, 5, 1, "div", 123);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.isScenariosExpanded ? "\u25BC" : "\u25B6");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.savedScenarios.length);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", ctx_r2.isScenariosExpanded ? "\uC811\uAE30" : "\uD3BC\uCE58\uAE30", " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isScenariosExpanded);
  }
}
function NovelGeneratorComponent_div_3_div_92_div_11_div_4_div_8_span_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 172);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r26 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2694\uFE0F ", item_r26.stats.attack);
  }
}
function NovelGeneratorComponent_div_3_div_92_div_11_div_4_div_8_span_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 172);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r26 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F6E1}\uFE0F ", item_r26.stats.defense);
  }
}
function NovelGeneratorComponent_div_3_div_92_div_11_div_4_div_8_span_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 172);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r26 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2764\uFE0F ", item_r26.stats.hp);
  }
}
function NovelGeneratorComponent_div_3_div_92_div_11_div_4_div_8_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 172);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r26 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F499} ", item_r26.stats.mp);
  }
}
function NovelGeneratorComponent_div_3_div_92_div_11_div_4_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 170);
    \u0275\u0275template(1, NovelGeneratorComponent_div_3_div_92_div_11_div_4_div_8_span_1_Template, 2, 1, "span", 171)(2, NovelGeneratorComponent_div_3_div_92_div_11_div_4_div_8_span_2_Template, 2, 1, "span", 171)(3, NovelGeneratorComponent_div_3_div_92_div_11_div_4_div_8_span_3_Template, 2, 1, "span", 171)(4, NovelGeneratorComponent_div_3_div_92_div_11_div_4_div_8_span_4_Template, 2, 1, "span", 171);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r26 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r26.stats.attack);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r26.stats.defense);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r26.stats.hp);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r26.stats.mp);
  }
}
function NovelGeneratorComponent_div_3_div_92_div_11_div_4_span_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 159);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const tag_r27 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(tag_r27);
  }
}
function NovelGeneratorComponent_div_3_div_92_div_11_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r25 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 163);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_92_div_11_div_4_Template_div_click_0_listener() {
      const item_r26 = \u0275\u0275restoreView(_r25).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r2.loadItem(item_r26));
    });
    \u0275\u0275elementStart(1, "div", 164)(2, "h4");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 131);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_92_div_11_div_4_Template_button_click_4_listener($event) {
      const item_r26 = \u0275\u0275restoreView(_r25).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(item_r26.id && ctx_r2.deleteItem(item_r26.id, $event));
    });
    \u0275\u0275text(5, " \u{1F5D1}\uFE0F ");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "p", 102);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275template(8, NovelGeneratorComponent_div_3_div_92_div_11_div_4_div_8_Template, 5, 4, "div", 165);
    \u0275\u0275elementStart(9, "div", 166)(10, "span", 167);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "span", 168);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd();
    \u0275\u0275template(14, NovelGeneratorComponent_div_3_div_92_div_11_div_4_span_14_Template, 2, 1, "span", 158);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "div", 169)(16, "span", 134);
    \u0275\u0275text(17);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const item_r26 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275classProp("grade-legendary", item_r26.grade === "\uC2E0\uD654" || item_r26.grade === "\uC804\uC124")("grade-rare", item_r26.grade === "\uD76C\uADC0")("grade-uncommon", item_r26.grade === "\uACE0\uAE09");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r26.name);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(item_r26.description);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r26.stats);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r26.type);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r26.grade);
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", (item_r26.tags || \u0275\u0275pureFunction0(13, _c1)).slice(0, 2));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.formatSaveDate(item_r26.createdAt));
  }
}
function NovelGeneratorComponent_div_3_div_92_div_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 124)(1, "p", 125);
    \u0275\u0275text(2, "AI\uAC00 \uC0DD\uC131\uD55C \uBB34\uAE30\uC640 \uC544\uC774\uD15C\uB4E4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 161);
    \u0275\u0275template(4, NovelGeneratorComponent_div_3_div_92_div_11_div_4_Template, 18, 14, "div", 162);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.savedItems);
  }
}
function NovelGeneratorComponent_div_3_div_92_Template(rf, ctx) {
  if (rf & 1) {
    const _r24 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 160)(1, "div", 118);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_92_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r24);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleItems());
    });
    \u0275\u0275elementStart(2, "div", 119)(3, "span", 120);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "h3");
    \u0275\u0275text(6, "\u{1F48E} \uC800\uC7A5\uB41C \uC544\uC774\uD15C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "span", 121);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "button", 122);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_92_Template_button_click_9_listener($event) {
      \u0275\u0275restoreView(_r24);
      const ctx_r2 = \u0275\u0275nextContext(2);
      ctx_r2.toggleItems();
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(11, NovelGeneratorComponent_div_3_div_92_div_11_Template, 5, 1, "div", 123);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.isItemsExpanded ? "\u25BC" : "\u25B6");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.savedItems.length);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", ctx_r2.isItemsExpanded ? "\uC811\uAE30" : "\uD3BC\uCE58\uAE30", " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isItemsExpanded);
  }
}
function NovelGeneratorComponent_div_3_div_93_div_13_div_4_div_8_span_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 172);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r30 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2694\uFE0F ", item_r30.stats.attack);
  }
}
function NovelGeneratorComponent_div_3_div_93_div_13_div_4_div_8_span_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 172);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r30 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F6E1}\uFE0F ", item_r30.stats.defense);
  }
}
function NovelGeneratorComponent_div_3_div_93_div_13_div_4_div_8_span_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 172);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r30 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2764\uFE0F ", item_r30.stats.hp);
  }
}
function NovelGeneratorComponent_div_3_div_93_div_13_div_4_div_8_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 172);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r30 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F499} ", item_r30.stats.mp);
  }
}
function NovelGeneratorComponent_div_3_div_93_div_13_div_4_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 170);
    \u0275\u0275template(1, NovelGeneratorComponent_div_3_div_93_div_13_div_4_div_8_span_1_Template, 2, 1, "span", 171)(2, NovelGeneratorComponent_div_3_div_93_div_13_div_4_div_8_span_2_Template, 2, 1, "span", 171)(3, NovelGeneratorComponent_div_3_div_93_div_13_div_4_div_8_span_3_Template, 2, 1, "span", 171)(4, NovelGeneratorComponent_div_3_div_93_div_13_div_4_div_8_span_4_Template, 2, 1, "span", 171);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r30 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r30.stats.attack);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r30.stats.defense);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r30.stats.hp);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r30.stats.mp);
  }
}
function NovelGeneratorComponent_div_3_div_93_div_13_div_4_span_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F4B0} \uAD6C\uB9E4\uD558\uAE30");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_3_div_93_div_13_div_4_span_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F4B8} \uACE8\uB4DC \uBD80\uC871");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_3_div_93_div_13_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r29 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 179)(1, "div", 164)(2, "h4");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 180);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "p", 102);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275template(8, NovelGeneratorComponent_div_3_div_93_div_13_div_4_div_8_Template, 5, 4, "div", 165);
    \u0275\u0275elementStart(9, "div", 166)(10, "span", 167);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "span", 168);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "div", 181)(15, "button", 182);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_93_div_13_div_4_Template_button_click_15_listener($event) {
      const item_r30 = \u0275\u0275restoreView(_r29).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r2.buyItemFromShop(item_r30, $event));
    });
    \u0275\u0275template(16, NovelGeneratorComponent_div_3_div_93_div_13_div_4_span_16_Template, 2, 0, "span", 97)(17, NovelGeneratorComponent_div_3_div_93_div_13_div_4_span_17_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const item_r30 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275classProp("grade-legendary", item_r30.grade === "\uC2E0\uD654" || item_r30.grade === "\uC804\uC124")("grade-rare", item_r30.grade === "\uD76C\uADC0")("grade-uncommon", item_r30.grade === "\uACE0\uAE09");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r30.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", item_r30.price || ctx_r2.calculateItemPriceByGrade(item_r30.grade), "G");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r30.description);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r30.stats);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r30.type);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r30.grade);
    \u0275\u0275advance(2);
    \u0275\u0275classProp("insufficient-gold", ctx_r2.gold < (item_r30.price || ctx_r2.calculateItemPriceByGrade(item_r30.grade)));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.gold >= (item_r30.price || ctx_r2.calculateItemPriceByGrade(item_r30.grade)));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.gold < (item_r30.price || ctx_r2.calculateItemPriceByGrade(item_r30.grade)));
  }
}
function NovelGeneratorComponent_div_3_div_93_div_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 124)(1, "p", 125);
    \u0275\u0275text(2, "AI\uAC00 \uC0DD\uC131\uD55C \uC544\uC774\uD15C\uC744 \uACE8\uB4DC\uB85C \uAD6C\uB9E4\uD558\uC138\uC694");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 177);
    \u0275\u0275template(4, NovelGeneratorComponent_div_3_div_93_div_13_div_4_Template, 18, 16, "div", 178);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.savedItems);
  }
}
function NovelGeneratorComponent_div_3_div_93_Template(rf, ctx) {
  if (rf & 1) {
    const _r28 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 173)(1, "div", 174);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_93_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r28);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleShop());
    });
    \u0275\u0275elementStart(2, "div", 119)(3, "span", 120);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "h3");
    \u0275\u0275text(6, "\u{1F6D2} AI \uC544\uC774\uD15C \uC0C1\uC810");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "span", 175);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "span", 176);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(11, "button", 122);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_div_93_Template_button_click_11_listener($event) {
      \u0275\u0275restoreView(_r28);
      const ctx_r2 = \u0275\u0275nextContext(2);
      ctx_r2.toggleShop();
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275text(12);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(13, NovelGeneratorComponent_div_3_div_93_div_13_Template, 5, 1, "div", 123);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.isShopExpanded ? "\u25BC" : "\u25B6");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.savedItems.length);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F4B0} ", ctx_r2.gold, "G");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", ctx_r2.isShopExpanded ? "\uC811\uAE30" : "\uD3BC\uCE58\uAE30", " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isShopExpanded);
  }
}
function NovelGeneratorComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 36);
    \u0275\u0275pipe(1, "async");
    \u0275\u0275template(2, NovelGeneratorComponent_div_3_div_2_Template, 8, 1, "div", 37);
    \u0275\u0275pipe(3, "async");
    \u0275\u0275elementStart(4, "div", 38)(5, "div", 39)(6, "div", 40)(7, "div", 41)(8, "h2");
    \u0275\u0275text(9, "\u{1F3F0} \uD14D\uC2A4\uD2B8\uB358\uC804");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "p", 42);
    \u0275\u0275text(11, "\uB2F9\uC2E0\uC758 \uC120\uD0DD\uC774 \uB9CC\uB4E4\uC5B4\uAC00\uB294 \uC774\uC57C\uAE30");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "div", 43);
    \u0275\u0275template(13, NovelGeneratorComponent_div_3_div_13_Template, 3, 1, "div", 44);
    \u0275\u0275elementStart(14, "button", 45);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_Template_button_click_14_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.logout());
    });
    \u0275\u0275text(15, " \u{1F6AA} \uB85C\uADF8\uC544\uC6C3 ");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(16, "div", 46)(17, "div", 47);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_Template_div_click_17_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.scrollToNovels());
    });
    \u0275\u0275elementStart(18, "div", 48);
    \u0275\u0275text(19, "\u{1F3AE}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "h3");
    \u0275\u0275text(21, "\uC0C8\uB85C\uC6B4 \uBAA8\uD5D8");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "p");
    \u0275\u0275text(23, "\uB2E4\uC591\uD55C \uC7A5\uB974\uC758 \uC18C\uC124 \uC120\uD0DD");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(24, "div", 49);
    \u0275\u0275text(25);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(26, "div", 50);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_Template_div_click_26_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.navigateToWuxiaGame());
    });
    \u0275\u0275elementStart(27, "div", 48);
    \u0275\u0275text(28, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(29, "h3");
    \u0275\u0275text(30, "\uBB35\uD5A5\uC9C0\uC5F0 (\u58A8\u9999\u4E4B\u7DE3)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(31, "p");
    \u0275\u0275text(32, "\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uBB34\uD611 RPG");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(33, "div", 51);
    \u0275\u0275text(34, "\uBB34\uD611");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(35, "div", 52);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_Template_div_click_35_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.openCharacterCreator());
    });
    \u0275\u0275elementStart(36, "div", 48);
    \u0275\u0275text(37, "\u{1F3AD}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(38, "h3");
    \u0275\u0275text(39, "AI \uCE90\uB9AD\uD130 \uC0DD\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(40, "p");
    \u0275\u0275text(41, "Loworld AI\uB85C \uCE90\uB9AD\uD130 \uB9CC\uB4E4\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(42, "div", 53);
    \u0275\u0275text(43, "AI");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(44, "div", 52);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_Template_div_click_44_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.openScenarioCreator());
    });
    \u0275\u0275elementStart(45, "div", 48);
    \u0275\u0275text(46, "\u{1F3AC}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(47, "h3");
    \u0275\u0275text(48, "AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(49, "p");
    \u0275\u0275text(50, "Loworld AI\uB85C \uC0C1\uD669 \uB9CC\uB4E4\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(51, "div", 53);
    \u0275\u0275text(52, "AI");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(53, "div", 52);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_Template_div_click_53_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.openItemCreator());
    });
    \u0275\u0275elementStart(54, "div", 48);
    \u0275\u0275text(55, "\u{1F48E}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(56, "h3");
    \u0275\u0275text(57, "AI \uC544\uC774\uD15C \uC0DD\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(58, "p");
    \u0275\u0275text(59, "Loworld AI\uB85C \uBB34\uAE30/\uC544\uC774\uD15C \uB9CC\uB4E4\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(60, "div", 53);
    \u0275\u0275text(61, "AI");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(62, "div", 54);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_Template_div_click_62_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.toggleStoryCreatorPanel());
    });
    \u0275\u0275elementStart(63, "div", 48);
    \u0275\u0275text(64, "\u2728");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(65, "h3");
    \u0275\u0275text(66, "\uC2A4\uD1A0\uB9AC \uC0DD\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(67, "p");
    \u0275\u0275text(68, "\uC800\uC7A5\uB41C \uCF58\uD150\uCE20\uB85C \uC0C8 \uC774\uC57C\uAE30 \uB9CC\uB4E4\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(69, "div", 55);
    \u0275\u0275text(70, "NEW");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(71, "div", 52);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_Template_div_click_71_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.autoGenerateStoryElements());
    });
    \u0275\u0275elementStart(72, "div", 48);
    \u0275\u0275text(73, "\u{1F3A8}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(74, "h3");
    \u0275\u0275text(75, "\uC2A4\uD1A0\uB9AC \uC694\uC18C \uC790\uB3D9 \uC0DD\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(76, "p");
    \u0275\u0275text(77, "\uD544\uC694\uD55C \uC2DC\uB098\uB9AC\uC624/\uCE90\uB9AD\uD130/\uC544\uC774\uD15C \uD55C\uBC88\uC5D0 \uC0DD\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(78, "div", 53);
    \u0275\u0275text(79, "AI");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(80, "div", 56);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_3_Template_div_click_80_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.checkStoryElementStatus());
    });
    \u0275\u0275elementStart(81, "div", 48);
    \u0275\u0275text(82, "\u{1F4CA}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(83, "h3");
    \u0275\u0275text(84, "\uC694\uC18C \uD604\uD669 \uD655\uC778");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(85, "p");
    \u0275\u0275text(86, "\uD604\uC7AC \uBCF4\uC720\uD55C \uC2A4\uD1A0\uB9AC \uC694\uC18C \uD655\uC778");
    \u0275\u0275elementEnd()()();
    \u0275\u0275template(87, NovelGeneratorComponent_div_3_div_87_Template, 5, 1, "div", 57)(88, NovelGeneratorComponent_div_3_div_88_Template, 54, 16, "div", 58)(89, NovelGeneratorComponent_div_3_div_89_Template, 12, 4, "div", 59)(90, NovelGeneratorComponent_div_3_div_90_Template, 12, 4, "div", 60)(91, NovelGeneratorComponent_div_3_div_91_Template, 12, 4, "div", 61)(92, NovelGeneratorComponent_div_3_div_92_Template, 12, 4, "div", 62)(93, NovelGeneratorComponent_div_3_div_93_Template, 14, 5, "div", 63);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275classProp("mobile", \u0275\u0275pipeBind1(1, 12, ctx_r2.responsiveService.isMobile$));
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", \u0275\u0275pipeBind1(3, 14, ctx_r2.responsiveService.isMobile$));
    \u0275\u0275advance(11);
    \u0275\u0275property("ngIf", ctx_r2.getCurrentUsername());
    \u0275\u0275advance(12);
    \u0275\u0275textInterpolate1("", ctx_r2.novelTemplates.length, "\uAC1C");
    \u0275\u0275advance(62);
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingElements);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.showStoryCreatorPanel);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.savedStories.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.savedCharacters.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.savedScenarios.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.savedItems.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.savedItems.length > 0);
  }
}
function NovelGeneratorComponent_div_4_div_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r32 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 207);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_7_Template_div_click_0_listener() {
      \u0275\u0275restoreView(_r32);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.expandLeftPanel());
    });
    \u0275\u0275elementStart(1, "div", 208);
    \u0275\u0275text(2, "\u{1F4DA}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 209);
    \u0275\u0275text(4, "\uBA54\uB274");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_4_div_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r33 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 210)(1, "div", 211)(2, "h3");
    \u0275\u0275text(3, "\u{1F3AE} \uAC8C\uC784 \uBA54\uB274");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_8_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r33);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.closeLeftPanel());
    });
    \u0275\u0275text(5, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 212)(7, "button", 213);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_8_Template_button_click_7_listener() {
      \u0275\u0275restoreView(_r33);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.saveGame());
    });
    \u0275\u0275text(8, "\u{1F4BE} \uAC8C\uC784 \uC800\uC7A5");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "button", 213);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_8_Template_button_click_9_listener() {
      \u0275\u0275restoreView(_r33);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.loadGame());
    });
    \u0275\u0275text(10, "\u{1F4C2} \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "button", 213);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_8_Template_button_click_11_listener() {
      \u0275\u0275restoreView(_r33);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleCharacterPanel());
    });
    \u0275\u0275text(12, "\u{1F464} \uCE90\uB9AD\uD130 \uC815\uBCF4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "button", 213);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_8_Template_button_click_13_listener() {
      \u0275\u0275restoreView(_r33);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.openCharacterCreator());
    });
    \u0275\u0275text(14, "\u{1F3AD} AI \uCE90\uB9AD\uD130 \uC0DD\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "button", 213);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_8_Template_button_click_15_listener() {
      \u0275\u0275restoreView(_r33);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleInventoryPanel());
    });
    \u0275\u0275text(16);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "button", 213);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_8_Template_button_click_17_listener() {
      \u0275\u0275restoreView(_r33);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleShopPanel());
    });
    \u0275\u0275text(18, "\u{1F6D2} \uC0C1\uC810");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(19, "button", 213);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_8_Template_button_click_19_listener() {
      \u0275\u0275restoreView(_r33);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.startBattle());
    });
    \u0275\u0275text(20, "\u2694\uFE0F \uC804\uD22C\uD558\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275element(21, "div", 214);
    \u0275\u0275elementStart(22, "div", 215);
    \u0275\u0275text(23, "\u{1F3B2} \uC544\uC774\uD15C \uAD00\uB9AC");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(24, "button", 216);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_8_Template_button_click_24_listener() {
      \u0275\u0275restoreView(_r33);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.generateRandomItems());
    });
    \u0275\u0275text(25, "\u2728 \uB79C\uB364 \uC544\uC774\uD15C \uC0DD\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(26, "button", 217);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_8_Template_button_click_26_listener() {
      \u0275\u0275restoreView(_r33);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.resetInventory());
    });
    \u0275\u0275text(27, "\u{1F504} \uC778\uBCA4\uD1A0\uB9AC \uCD08\uAE30\uD654");
    \u0275\u0275elementEnd();
    \u0275\u0275element(28, "div", 214);
    \u0275\u0275elementStart(29, "div", 215);
    \u0275\u0275text(30, "\u2699\uFE0F \uAC1C\uBC1C\uC790 \uB3C4\uAD6C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(31, "button", 213);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_8_Template_button_click_31_listener() {
      \u0275\u0275restoreView(_r33);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.debugInventory());
    });
    \u0275\u0275text(32, "\u{1F50D} \uC778\uBCA4\uD1A0\uB9AC \uB514\uBC84\uADF8");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(33, "button", 218);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_8_Template_button_click_33_listener() {
      \u0275\u0275restoreView(_r33);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.resetGameData());
    });
    \u0275\u0275text(34, "\u{1F5D1}\uFE0F \uAC8C\uC784 \uB370\uC774\uD130 \uCD08\uAE30\uD654");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(16);
    \u0275\u0275textInterpolate1("\u{1F392} \uC778\uBCA4\uD1A0\uB9AC (", ctx_r2.inventory.length, ")");
  }
}
function NovelGeneratorComponent_div_4_div_24_Template(rf, ctx) {
  if (rf & 1) {
    const _r34 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 219)(1, "button", 220);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_24_Template_button_click_1_listener() {
      \u0275\u0275restoreView(_r34);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleCharacterPanel());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(2, "svg", 221);
    \u0275\u0275element(3, "path", 222)(4, "circle", 223);
    \u0275\u0275elementEnd();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(5, "span");
    \u0275\u0275text(6, "\uCE90\uB9AD\uD130");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "button", 224);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_24_Template_button_click_7_listener() {
      \u0275\u0275restoreView(_r34);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleInventoryPanel());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(8, "svg", 221);
    \u0275\u0275element(9, "path", 225)(10, "polyline", 226)(11, "line", 227);
    \u0275\u0275elementEnd();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(12, "span");
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "button", 228);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_24_Template_button_click_14_listener() {
      \u0275\u0275restoreView(_r34);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.openDungeonDialog());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(15, "svg", 221);
    \u0275\u0275element(16, "rect", 229)(17, "line", 230)(18, "line", 231)(19, "line", 232)(20, "line", 233);
    \u0275\u0275elementEnd();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(21, "span");
    \u0275\u0275text(22, "\uB358\uC804");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(23, "button", 234);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_24_Template_button_click_23_listener() {
      \u0275\u0275restoreView(_r34);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleWuxiaPanel());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(24, "svg", 221);
    \u0275\u0275element(25, "circle", 235)(26, "path", 236);
    \u0275\u0275elementEnd();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(27, "span");
    \u0275\u0275text(28, "\uC218\uB828");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(29, "button", 237);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_24_Template_button_click_29_listener() {
      \u0275\u0275restoreView(_r34);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleAdvancedFlowPanel());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(30, "svg", 221);
    \u0275\u0275element(31, "circle", 238)(32, "circle", 239)(33, "circle", 240)(34, "line", 241)(35, "line", 242);
    \u0275\u0275elementEnd();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(36, "span");
    \u0275\u0275text(37, "\uD50C\uB85C\uC6B0");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(38, "button", 243);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_24_Template_button_click_38_listener() {
      \u0275\u0275restoreView(_r34);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleRightPanel());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(39, "svg", 221);
    \u0275\u0275element(40, "line", 244)(41, "line", 245)(42, "line", 246);
    \u0275\u0275elementEnd()();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(43, "button", 247);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_24_Template_button_click_43_listener() {
      \u0275\u0275restoreView(_r34);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.logout());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(44, "svg", 221);
    \u0275\u0275element(45, "path", 248)(46, "polyline", 249)(47, "line", 250);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275classProp("active", ctx_r2.showCharacterPanel);
    \u0275\u0275advance(6);
    \u0275\u0275classProp("active", ctx_r2.showInventoryPanel);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1("\uC778\uBCA4\uD1A0\uB9AC (", ctx_r2.inventory.length, ")");
    \u0275\u0275advance(10);
    \u0275\u0275classProp("active", ctx_r2.showWuxiaPanel);
  }
}
function NovelGeneratorComponent_div_4_div_26_span_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 256);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(ctx_r2.inventory.length);
  }
}
function NovelGeneratorComponent_div_4_div_26_Template(rf, ctx) {
  if (rf & 1) {
    const _r35 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 251)(1, "button", 252);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_26_Template_button_click_1_listener() {
      \u0275\u0275restoreView(_r35);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleCharacterPanel());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(2, "svg", 191);
    \u0275\u0275element(3, "path", 222)(4, "circle", 223);
    \u0275\u0275elementEnd()();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(5, "button", 224);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_26_Template_button_click_5_listener() {
      \u0275\u0275restoreView(_r35);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleInventoryPanel());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(6, "svg", 191);
    \u0275\u0275element(7, "path", 225)(8, "polyline", 226)(9, "line", 227);
    \u0275\u0275elementEnd();
    \u0275\u0275template(10, NovelGeneratorComponent_div_4_div_26_span_10_Template, 2, 1, "span", 253);
    \u0275\u0275elementEnd();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(11, "button", 254);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_26_Template_button_click_11_listener() {
      \u0275\u0275restoreView(_r35);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.openDungeonDialog());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(12, "svg", 255);
    \u0275\u0275element(13, "rect", 229)(14, "line", 230)(15, "line", 231)(16, "line", 232)(17, "line", 233);
    \u0275\u0275elementEnd()();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(18, "button", 243);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_26_Template_button_click_18_listener() {
      \u0275\u0275restoreView(_r35);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleRightPanel());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(19, "svg", 191);
    \u0275\u0275element(20, "line", 244)(21, "line", 245)(22, "line", 246);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275classProp("active", ctx_r2.showCharacterPanel);
    \u0275\u0275advance(4);
    \u0275\u0275classProp("active", ctx_r2.showInventoryPanel);
    \u0275\u0275advance(5);
    \u0275\u0275property("ngIf", ctx_r2.inventory.length > 0);
  }
}
function NovelGeneratorComponent_div_4_div_33_div_1_p_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const line_r36 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(line_r36);
  }
}
function NovelGeneratorComponent_div_4_div_33_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div");
    \u0275\u0275template(1, NovelGeneratorComponent_div_4_div_33_div_1_p_1_Template, 2, 1, "p", 112);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const block_r37 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", block_r37.lines);
  }
}
function NovelGeneratorComponent_div_4_div_33_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const block_r37 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2B50 ", block_r37.choiceText);
  }
}
function NovelGeneratorComponent_div_4_div_33_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 257);
    \u0275\u0275template(1, NovelGeneratorComponent_div_4_div_33_div_1_Template, 2, 1, "div", 97)(2, NovelGeneratorComponent_div_4_div_33_div_2_Template, 2, 1, "div", 97);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const block_r37 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", block_r37.type === "story");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", block_r37.type === "choice");
  }
}
function NovelGeneratorComponent_div_4_div_34_p_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p", 283);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r2.battleTurn === "player" ? "\uB2F9\uC2E0\uC758 \uCC28\uB840\uC785\uB2C8\uB2E4." : "\uC801\uC774 \uD589\uB3D9\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4...", " ");
  }
}
function NovelGeneratorComponent_div_4_div_34_div_30_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 267)(1, "span", 268);
    \u0275\u0275text(2, "\uB0B4\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 269)(4, "div", 270);
    \u0275\u0275element(5, "div", 284);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "span", 272);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(5);
    \u0275\u0275styleProp("width", ctx_r2.playerInternalPower.current / ctx_r2.playerInternalPower.max * 100, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", ctx_r2.playerInternalPower.current, "/", ctx_r2.playerInternalPower.max);
  }
}
function NovelGeneratorComponent_div_4_div_34_div_44_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 285)(1, "div", 264)(2, "h4");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(4, "div", 266)(5, "div", 267)(6, "span", 268);
    \u0275\u0275text(7, "\uCCB4\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "div", 269)(9, "div", 270);
    \u0275\u0275element(10, "div", 286);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "span", 272);
    \u0275\u0275text(12);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(13, "div", 267)(14, "span", 268);
    \u0275\u0275text(15, "\uACF5\uACA9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "span", 276);
    \u0275\u0275text(17);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "span", 277);
    \u0275\u0275text(19, "|");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "span", 268);
    \u0275\u0275text(21, "\uBC29\uC5B4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "span", 276);
    \u0275\u0275text(23);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("active-turn", ctx_r2.battleTurn === "enemy");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.battleEnemy.name);
    \u0275\u0275advance(7);
    \u0275\u0275styleProp("width", ctx_r2.battleEnemy.hp / ctx_r2.battleEnemy.maxHp * 100, "%");
    \u0275\u0275classProp("low", ctx_r2.battleEnemy.hp / ctx_r2.battleEnemy.maxHp < 0.3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", ctx_r2.battleEnemy.hp, "/", ctx_r2.battleEnemy.maxHp);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.battleEnemy.attack);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(ctx_r2.battleEnemy.defense);
  }
}
function NovelGeneratorComponent_div_4_div_34_div_48_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 287);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const log_r38 = ctx.$implicit;
    const i_r39 = ctx.index;
    \u0275\u0275styleProp("animation-delay", i_r39 * 50, "ms");
    \u0275\u0275classProp("damage", log_r38.includes("\uD53C\uD574"))("heal", log_r38.includes("\uD68C\uBCF5"))("critical", log_r38.includes("\uCE58\uBA85\uD0C0") || log_r38.includes("\uD68C\uC2EC"))("combo", log_r38.includes("\uC5F0\uACC4"));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", log_r38, " ");
  }
}
function NovelGeneratorComponent_div_4_div_34_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 258)(1, "div", 259)(2, "div", 260)(3, "h3");
    \u0275\u0275text(4, "\u2014 \uC804\uD22C \u2014");
    \u0275\u0275elementEnd();
    \u0275\u0275template(5, NovelGeneratorComponent_div_4_div_34_p_5_Template, 2, 1, "p", 261);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 262)(7, "div", 263)(8, "div", 264)(9, "h4");
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "span", 265);
    \u0275\u0275text(12);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "div", 266)(14, "div", 267)(15, "span", 268);
    \u0275\u0275text(16, "\uCCB4\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "div", 269)(18, "div", 270);
    \u0275\u0275element(19, "div", 271);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "span", 272);
    \u0275\u0275text(21);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(22, "div", 267)(23, "span", 268);
    \u0275\u0275text(24, "\uB9C8\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "div", 269)(26, "div", 270);
    \u0275\u0275element(27, "div", 273);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(28, "span", 272);
    \u0275\u0275text(29);
    \u0275\u0275elementEnd()()();
    \u0275\u0275template(30, NovelGeneratorComponent_div_4_div_34_div_30_Template, 8, 4, "div", 274);
    \u0275\u0275elementStart(31, "div", 275)(32, "span", 268);
    \u0275\u0275text(33, "\uACF5\uACA9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(34, "span", 276);
    \u0275\u0275text(35);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(36, "span", 277);
    \u0275\u0275text(37, "|");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(38, "span", 268);
    \u0275\u0275text(39, "\uBC29\uC5B4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(40, "span", 276);
    \u0275\u0275text(41);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(42, "div", 278);
    \u0275\u0275text(43, "VS");
    \u0275\u0275elementEnd();
    \u0275\u0275template(44, NovelGeneratorComponent_div_4_div_34_div_44_Template, 24, 11, "div", 279);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(45, "div", 280, 0)(47, "div", 281);
    \u0275\u0275template(48, NovelGeneratorComponent_div_4_div_34_div_48_Template, 2, 11, "div", 282);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275property("ngIf", !ctx_r2.battleEnded);
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active-turn", ctx_r2.battleTurn === "player");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("Lv.", ctx_r2.playerCharacter.level);
    \u0275\u0275advance(7);
    \u0275\u0275styleProp("width", ctx_r2.playerCharacter.hp / ctx_r2.playerCharacter.maxHp * 100, "%");
    \u0275\u0275classProp("low", ctx_r2.playerCharacter.hp / ctx_r2.playerCharacter.maxHp < 0.3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", ctx_r2.playerCharacter.hp, "/", ctx_r2.playerCharacter.maxHp);
    \u0275\u0275advance(6);
    \u0275\u0275styleProp("width", ctx_r2.playerCharacter.mp / ctx_r2.playerCharacter.maxMp * 100, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", ctx_r2.playerCharacter.mp, "/", ctx_r2.playerCharacter.maxMp);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.learnedMartialSkills.length > 0);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.attack);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.defense);
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.battleEnemy);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.battleLog.slice(-8));
  }
}
function NovelGeneratorComponent_div_4_div_35_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r40 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 290)(1, "button", 291);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_35_div_4_Template_button_click_1_listener() {
      const i_r41 = \u0275\u0275restoreView(_r40).index;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.selectChoice(i_r41));
    });
    \u0275\u0275elementStart(2, "span", 292);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 293);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "button", 294);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_35_div_4_Template_button_click_6_listener() {
      const i_r41 = \u0275\u0275restoreView(_r40).index;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.openScenarioLinkPanel(i_r41));
    });
    \u0275\u0275text(7, " \u{1F517} ");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const choice_r42 = ctx.$implicit;
    const i_r41 = ctx.index;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(i_r41 + 1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(choice_r42);
  }
}
function NovelGeneratorComponent_div_4_div_35_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div")(1, "h3");
    \u0275\u0275text(2, "\uC5B4\uB5BB\uAC8C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 288);
    \u0275\u0275template(4, NovelGeneratorComponent_div_4_div_35_div_4_Template, 8, 2, "div", 289);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.choices);
  }
}
function NovelGeneratorComponent_div_4_div_36_div_30_Template(rf, ctx) {
  if (rf & 1) {
    const _r44 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 299)(1, "button", 296);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_36_div_30_Template_button_click_1_listener() {
      const skill_r45 = \u0275\u0275restoreView(_r44).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.battleManager.useMartialSkillInBattle(skill_r45));
    });
    \u0275\u0275elementStart(2, "span", 292);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 293);
    \u0275\u0275text(5);
    \u0275\u0275elementStart(6, "span", 297);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "span", 300);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const skill_r45 = ctx.$implicit;
    const i_r46 = ctx.index;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r2.playerInternalPower.current < skill_r45.internalPowerCost);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(i_r46 + 5);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2(" ", skill_r45.name, " (", skill_r45.chineseName, ") ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\uB0B4\uACF5 ", skill_r45.internalPowerCost);
    \u0275\u0275advance();
    \u0275\u0275classProp("grade-\uC808\uD559", skill_r45.grade === "\uC808\uD559");
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(skill_r45.grade);
  }
}
function NovelGeneratorComponent_div_4_div_36_Template(rf, ctx) {
  if (rf & 1) {
    const _r43 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div")(1, "h3");
    \u0275\u0275text(2, "\uC5B4\uB5BB\uAC8C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 295)(4, "div", 290)(5, "button", 291);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_36_Template_button_click_5_listener() {
      \u0275\u0275restoreView(_r43);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.battleManager.playerAttack());
    });
    \u0275\u0275elementStart(6, "span", 292);
    \u0275\u0275text(7, "1");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "span", 293);
    \u0275\u0275text(9, "\uAE30\uBCF8 \uACF5\uACA9");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(10, "div", 290)(11, "button", 296);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_36_Template_button_click_11_listener() {
      \u0275\u0275restoreView(_r43);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.battleManager.playerSkill());
    });
    \u0275\u0275elementStart(12, "span", 292);
    \u0275\u0275text(13, "2");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "span", 293);
    \u0275\u0275text(15, "\uB9C8\uBC95 \uACF5\uACA9 ");
    \u0275\u0275elementStart(16, "span", 297);
    \u0275\u0275text(17, "(MP 10)");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(18, "div", 290)(19, "button", 291);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_36_Template_button_click_19_listener() {
      \u0275\u0275restoreView(_r43);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.battleManager.playerDefend());
    });
    \u0275\u0275elementStart(20, "span", 292);
    \u0275\u0275text(21, "3");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "span", 293);
    \u0275\u0275text(23, "\uBC29\uC5B4 \uC790\uC138");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(24, "div", 290)(25, "button", 296);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_36_Template_button_click_25_listener() {
      \u0275\u0275restoreView(_r43);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.battleManager.usePotion());
    });
    \u0275\u0275elementStart(26, "span", 292);
    \u0275\u0275text(27, "4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(28, "span", 293);
    \u0275\u0275text(29, "\uD68C\uBCF5 \uD3EC\uC158 \uC0AC\uC6A9");
    \u0275\u0275elementEnd()()();
    \u0275\u0275template(30, NovelGeneratorComponent_div_4_div_36_div_30_Template, 10, 8, "div", 298);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(11);
    \u0275\u0275property("disabled", ctx_r2.playerCharacter.mp < 10);
    \u0275\u0275advance(14);
    \u0275\u0275property("disabled", !ctx_r2.battleManager.hasPotion());
    \u0275\u0275advance(5);
    \u0275\u0275property("ngForOf", ctx_r2.learnedMartialSkills);
  }
}
function NovelGeneratorComponent_div_4_div_40_Template(rf, ctx) {
  if (rf & 1) {
    const _r47 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 207);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_40_Template_div_click_0_listener() {
      \u0275\u0275restoreView(_r47);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.expandRightPanel());
    });
    \u0275\u0275elementStart(1, "div", 208);
    \u0275\u0275text(2, "\u{1F4CA}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 209);
    \u0275\u0275text(4, "\uC815\uBCF4");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_4_div_41_Template(rf, ctx) {
  if (rf & 1) {
    const _r48 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 210)(1, "div", 211)(2, "h3");
    \u0275\u0275text(3, "\u{1F4CA} \uAC8C\uC784 \uC815\uBCF4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_div_41_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r48);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.closeRightPanel());
    });
    \u0275\u0275text(5, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 212)(7, "div");
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "div");
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "div");
    \u0275\u0275text(12);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate1("\uC120\uD0DD \uD69F\uC218: ", ctx_r2.currentPath.length);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\uC2A4\uD1A0\uB9AC \uBE14\uB85D: ", ctx_r2.storyBlocks.length);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("\uACBD\uD5D8\uCE58: ", ctx_r2.playerCharacter.exp, "/", ctx_r2.playerCharacter.maxExp);
  }
}
function NovelGeneratorComponent_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r31 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 183);
    \u0275\u0275pipe(1, "async");
    \u0275\u0275pipe(2, "async");
    \u0275\u0275pipe(3, "async");
    \u0275\u0275elementStart(4, "div", 184);
    \u0275\u0275pipe(5, "async");
    \u0275\u0275elementStart(6, "div", 185);
    \u0275\u0275template(7, NovelGeneratorComponent_div_4_div_7_Template, 5, 0, "div", 186)(8, NovelGeneratorComponent_div_4_div_8_Template, 35, 1, "div", 187);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 188);
    \u0275\u0275pipe(10, "async");
    \u0275\u0275elementStart(11, "div", 189);
    \u0275\u0275pipe(12, "async");
    \u0275\u0275elementStart(13, "button", 190);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_Template_button_click_13_listener() {
      \u0275\u0275restoreView(_r31);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.toggleLeftPanel());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(14, "svg", 191);
    \u0275\u0275element(15, "line", 192)(16, "line", 193)(17, "line", 194);
    \u0275\u0275elementEnd()();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(18, "button", 195);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_4_Template_button_click_18_listener() {
      \u0275\u0275restoreView(_r31);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.backToNovelSelection());
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(19, "svg", 191);
    \u0275\u0275element(20, "path", 196)(21, "polyline", 197);
    \u0275\u0275elementEnd();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(22, "span");
    \u0275\u0275text(23, "\uD648");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(24, NovelGeneratorComponent_div_4_div_24_Template, 48, 7, "div", 198);
    \u0275\u0275pipe(25, "async");
    \u0275\u0275template(26, NovelGeneratorComponent_div_4_div_26_Template, 23, 5, "div", 199);
    \u0275\u0275pipe(27, "async");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(28, "div", 200)(29, "div", 201)(30, "h2");
    \u0275\u0275text(31, "\uC81C1\uC7A5 - \uC6B4\uBA85\uC758 \uC2DC\uC791");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(32, "div", 202);
    \u0275\u0275template(33, NovelGeneratorComponent_div_4_div_33_Template, 3, 2, "div", 203);
    \u0275\u0275elementEnd();
    \u0275\u0275template(34, NovelGeneratorComponent_div_4_div_34_Template, 49, 20, "div", 204)(35, NovelGeneratorComponent_div_4_div_35_Template, 5, 1, "div", 97)(36, NovelGeneratorComponent_div_4_div_36_Template, 31, 3, "div", 97);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(37, "div", 205);
    \u0275\u0275pipe(38, "async");
    \u0275\u0275elementStart(39, "div", 206);
    \u0275\u0275template(40, NovelGeneratorComponent_div_4_div_40_Template, 5, 0, "div", 186)(41, NovelGeneratorComponent_div_4_div_41_Template, 13, 4, "div", 187);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275classProp("mobile", \u0275\u0275pipeBind1(1, 28, ctx_r2.responsiveService.isMobile$))("tablet", \u0275\u0275pipeBind1(2, 30, ctx_r2.responsiveService.isTablet$))("desktop", \u0275\u0275pipeBind1(3, 32, ctx_r2.responsiveService.isDesktop$));
    \u0275\u0275advance(4);
    \u0275\u0275classProp("collapsed", ctx_r2.isLeftPanelCollapsed)("mobile", \u0275\u0275pipeBind1(5, 34, ctx_r2.responsiveService.isMobile$));
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.isLeftPanelCollapsed);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isLeftPanelCollapsed);
    \u0275\u0275advance();
    \u0275\u0275classProp("mobile", \u0275\u0275pipeBind1(10, 36, ctx_r2.responsiveService.isMobile$));
    \u0275\u0275advance(2);
    \u0275\u0275classProp("mobile", \u0275\u0275pipeBind1(12, 38, ctx_r2.responsiveService.isMobile$));
    \u0275\u0275advance(13);
    \u0275\u0275property("ngIf", \u0275\u0275pipeBind1(25, 40, ctx_r2.responsiveService.isDesktop$));
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", !\u0275\u0275pipeBind1(27, 42, ctx_r2.responsiveService.isDesktop$));
    \u0275\u0275advance(7);
    \u0275\u0275property("ngForOf", ctx_r2.storyBlocks);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.inBattle);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.choices.length > 0 && !ctx_r2.inBattle);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.inBattle && !ctx_r2.battleEnded && ctx_r2.battleTurn === "player");
    \u0275\u0275advance();
    \u0275\u0275classProp("collapsed", ctx_r2.isRightPanelCollapsed)("mobile", \u0275\u0275pipeBind1(38, 44, ctx_r2.responsiveService.isMobile$));
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.isRightPanelCollapsed);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isRightPanelCollapsed);
  }
}
function NovelGeneratorComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r49 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 301);
    \u0275\u0275pipe(1, "async");
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_5_Template_div_click_0_listener() {
      \u0275\u0275restoreView(_r49);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.closeAllPanels());
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275classProp("mobile", \u0275\u0275pipeBind1(1, 2, ctx_r2.responsiveService.isMobile$));
  }
}
function NovelGeneratorComponent_div_6_div_129_div_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 343)(1, "div", 344);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 345);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const skill_r51 = ctx.$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(skill_r51.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("Lv.", skill_r51.level, "/", skill_r51.maxLevel);
  }
}
function NovelGeneratorComponent_div_6_div_129_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 340)(1, "h4", 325);
    \u0275\u0275text(2, "\u2728 \uBCF4\uC720 \uC2A4\uD0AC");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 341);
    \u0275\u0275template(4, NovelGeneratorComponent_div_6_div_129_div_4_Template, 5, 3, "div", 342);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.playerCharacter.skills);
  }
}
function NovelGeneratorComponent_div_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r50 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 302);
    \u0275\u0275pipe(1, "async");
    \u0275\u0275elementStart(2, "div", 211)(3, "h3");
    \u0275\u0275text(4, "\u{1F4CA} \uCE90\uB9AD\uD130 \uC815\uBCF4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_6_Template_button_click_5_listener() {
      \u0275\u0275restoreView(_r50);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.showCharacterPanel = false);
    });
    \u0275\u0275text(6, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "div", 212)(8, "div", 303)(9, "div", 304)(10, "div", 305)(11, "span", 306);
    \u0275\u0275text(12, "\u{1F464}");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "div", 307)(14, "h2");
    \u0275\u0275text(15);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "div", 308);
    \u0275\u0275text(17);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(18, "div", 309)(19, "div", 310)(20, "span");
    \u0275\u0275text(21, "\uACBD\uD5D8\uCE58");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "span", 311);
    \u0275\u0275text(23);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(24, "div", 312);
    \u0275\u0275element(25, "div", 313);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(26, "div", 314);
    \u0275\u0275text(27);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(28, "div", 315)(29, "div", 316)(30, "div", 317)(31, "span", 318);
    \u0275\u0275text(32, "\u2764\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(33, "span", 319);
    \u0275\u0275text(34, "HP");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(35, "span", 320);
    \u0275\u0275text(36);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(37, "div", 321);
    \u0275\u0275element(38, "div", 313);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(39, "div", 322)(40, "div", 317)(41, "span", 318);
    \u0275\u0275text(42, "\u{1F499}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(43, "span", 319);
    \u0275\u0275text(44, "MP");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(45, "span", 320);
    \u0275\u0275text(46);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(47, "div", 323);
    \u0275\u0275element(48, "div", 313);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(49, "div", 324)(50, "h4", 325);
    \u0275\u0275text(51, "\u2694\uFE0F \uAE30\uBCF8 \uB2A5\uB825\uCE58");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(52, "div", 326)(53, "div", 327)(54, "div", 328);
    \u0275\u0275text(55, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(56, "div", 329)(57, "div", 330);
    \u0275\u0275text(58, "\uACF5\uACA9\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(59, "div", 272);
    \u0275\u0275text(60);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(61, "div", 327)(62, "div", 328);
    \u0275\u0275text(63, "\u{1F6E1}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(64, "div", 329)(65, "div", 330);
    \u0275\u0275text(66, "\uBC29\uC5B4\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(67, "div", 272);
    \u0275\u0275text(68);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(69, "div", 327)(70, "div", 328);
    \u0275\u0275text(71, "\u26A1");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(72, "div", 329)(73, "div", 330);
    \u0275\u0275text(74, "\uBBFC\uCCA9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(75, "div", 272);
    \u0275\u0275text(76);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(77, "div", 327)(78, "div", 328);
    \u0275\u0275text(79, "\u{1F4AA}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(80, "div", 329)(81, "div", 330);
    \u0275\u0275text(82, "\uD798");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(83, "div", 272);
    \u0275\u0275text(84);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(85, "div", 327)(86, "div", 328);
    \u0275\u0275text(87, "\u{1F9E0}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(88, "div", 329)(89, "div", 330);
    \u0275\u0275text(90, "\uC9C0\uB2A5");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(91, "div", 272);
    \u0275\u0275text(92);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(93, "div", 327)(94, "div", 328);
    \u0275\u0275text(95, "\u2B50");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(96, "div", 329)(97, "div", 330);
    \u0275\u0275text(98, "\uC2A4\uD0AC \uD3EC\uC778\uD2B8");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(99, "div", 272);
    \u0275\u0275text(100);
    \u0275\u0275elementEnd()()()()();
    \u0275\u0275elementStart(101, "div", 331)(102, "h4", 325);
    \u0275\u0275text(103, "\u{1F4B0} \uBCF4\uC720 \uC7AC\uD654");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(104, "div", 332)(105, "div", 333)(106, "span", 334);
    \u0275\u0275text(107, "\u{1F4B0}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(108, "span", 335);
    \u0275\u0275text(109);
    \u0275\u0275pipe(110, "number");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(111, "div", 336)(112, "span", 334);
    \u0275\u0275text(113, "\u{1F48E}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(114, "span", 335);
    \u0275\u0275text(115);
    \u0275\u0275pipe(116, "number");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(117, "div", 337)(118, "span", 334);
    \u0275\u0275text(119, "\u{1F52E}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(120, "span", 335);
    \u0275\u0275text(121);
    \u0275\u0275pipe(122, "number");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(123, "div", 338)(124, "span", 334);
    \u0275\u0275text(125, "\u{1F3AB}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(126, "span", 335);
    \u0275\u0275text(127);
    \u0275\u0275pipe(128, "number");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275template(129, NovelGeneratorComponent_div_6_div_129_Template, 5, 1, "div", 339);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275classProp("mobile", \u0275\u0275pipeBind1(1, 32, ctx_r2.responsiveService.isMobile$));
    \u0275\u0275advance(15);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("Lv.", ctx_r2.playerCharacter.level);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate2("", ctx_r2.playerCharacter.exp, " / ", ctx_r2.playerCharacter.maxExp);
    \u0275\u0275advance(2);
    \u0275\u0275styleProp("width", ctx_r2.playerCharacter.exp / ctx_r2.playerCharacter.maxExp * 100, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", (ctx_r2.playerCharacter.exp / ctx_r2.playerCharacter.maxExp * 100).toFixed(1), "% ");
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate2("", ctx_r2.playerCharacter.hp, " / ", ctx_r2.playerCharacter.maxHp);
    \u0275\u0275advance(2);
    \u0275\u0275styleProp("width", ctx_r2.playerCharacter.hp / ctx_r2.playerCharacter.maxHp * 100, "%");
    \u0275\u0275classProp("low", ctx_r2.playerCharacter.hp / ctx_r2.playerCharacter.maxHp < 0.3)("medium", ctx_r2.playerCharacter.hp / ctx_r2.playerCharacter.maxHp >= 0.3 && ctx_r2.playerCharacter.hp / ctx_r2.playerCharacter.maxHp < 0.7);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate2("", ctx_r2.playerCharacter.mp, " / ", ctx_r2.playerCharacter.maxMp);
    \u0275\u0275advance(2);
    \u0275\u0275styleProp("width", ctx_r2.playerCharacter.mp / ctx_r2.playerCharacter.maxMp * 100, "%");
    \u0275\u0275advance(12);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.attack);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.defense);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.agility);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.strength);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.intelligence);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.skillPoints);
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(110, 34, ctx_r2.playerCharacter.gold));
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(116, 36, ctx_r2.playerCharacter.gem));
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(122, 38, ctx_r2.playerCharacter.crystal));
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(128, 40, ctx_r2.playerCharacter.ticket));
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.skills && ctx_r2.playerCharacter.skills.length > 0);
  }
}
function NovelGeneratorComponent_div_7_div_14_div_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r54 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 386)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 389);
    \u0275\u0275listener("mousedown", function NovelGeneratorComponent_div_7_div_14_div_9_Template_button_mousedown_4_listener($event) {
      \u0275\u0275restoreView(_r54);
      return \u0275\u0275resetView($event.stopPropagation());
    })("click", function NovelGeneratorComponent_div_7_div_14_div_9_Template_button_click_4_listener($event) {
      \u0275\u0275restoreView(_r54);
      const ctx_r2 = \u0275\u0275nextContext(3);
      ctx_r2.unequipItem("weapon");
      $event.stopPropagation();
      return \u0275\u0275resetView($event.preventDefault());
    });
    \u0275\u0275text(5, "\u2715");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const weapon_r55 = ctx.ngIf;
    \u0275\u0275property("cdkDragData", \u0275\u0275pureFunction1(2, _c13, weapon_r55));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(weapon_r55.name || weapon_r55.baseType);
  }
}
function NovelGeneratorComponent_div_7_div_14_ng_template_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uBB34\uAE30");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_7_div_14_div_15_Template(rf, ctx) {
  if (rf & 1) {
    const _r56 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 386)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 389);
    \u0275\u0275listener("mousedown", function NovelGeneratorComponent_div_7_div_14_div_15_Template_button_mousedown_4_listener($event) {
      \u0275\u0275restoreView(_r56);
      return \u0275\u0275resetView($event.stopPropagation());
    })("click", function NovelGeneratorComponent_div_7_div_14_div_15_Template_button_click_4_listener($event) {
      \u0275\u0275restoreView(_r56);
      const ctx_r2 = \u0275\u0275nextContext(3);
      ctx_r2.unequipItem("armor");
      $event.stopPropagation();
      return \u0275\u0275resetView($event.preventDefault());
    });
    \u0275\u0275text(5, "\u2715");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const armor_r57 = ctx.ngIf;
    \u0275\u0275property("cdkDragData", \u0275\u0275pureFunction1(2, _c14, armor_r57));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(armor_r57.name || armor_r57.baseType);
  }
}
function NovelGeneratorComponent_div_7_div_14_ng_template_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uBC29\uC5B4\uAD6C");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_7_div_14_div_22_Template(rf, ctx) {
  if (rf & 1) {
    const _r58 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 386)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 389);
    \u0275\u0275listener("mousedown", function NovelGeneratorComponent_div_7_div_14_div_22_Template_button_mousedown_4_listener($event) {
      \u0275\u0275restoreView(_r58);
      return \u0275\u0275resetView($event.stopPropagation());
    })("click", function NovelGeneratorComponent_div_7_div_14_div_22_Template_button_click_4_listener($event) {
      \u0275\u0275restoreView(_r58);
      const ctx_r2 = \u0275\u0275nextContext(3);
      ctx_r2.unequipItem("helmet");
      $event.stopPropagation();
      return \u0275\u0275resetView($event.preventDefault());
    });
    \u0275\u0275text(5, "\u2715");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const helmet_r59 = ctx.ngIf;
    \u0275\u0275property("cdkDragData", \u0275\u0275pureFunction1(2, _c15, helmet_r59));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(helmet_r59.name || helmet_r59.baseType);
  }
}
function NovelGeneratorComponent_div_7_div_14_ng_template_23_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uD22C\uAD6C");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_7_div_14_div_28_Template(rf, ctx) {
  if (rf & 1) {
    const _r60 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 386)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 389);
    \u0275\u0275listener("mousedown", function NovelGeneratorComponent_div_7_div_14_div_28_Template_button_mousedown_4_listener($event) {
      \u0275\u0275restoreView(_r60);
      return \u0275\u0275resetView($event.stopPropagation());
    })("click", function NovelGeneratorComponent_div_7_div_14_div_28_Template_button_click_4_listener($event) {
      \u0275\u0275restoreView(_r60);
      const ctx_r2 = \u0275\u0275nextContext(3);
      ctx_r2.unequipItem("amulet");
      $event.stopPropagation();
      return \u0275\u0275resetView($event.preventDefault());
    });
    \u0275\u0275text(5, "\u2715");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const amulet_r61 = ctx.ngIf;
    \u0275\u0275property("cdkDragData", \u0275\u0275pureFunction1(2, _c16, amulet_r61));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(amulet_r61.name || amulet_r61.baseType);
  }
}
function NovelGeneratorComponent_div_7_div_14_ng_template_29_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uBAA9\uAC78\uC774");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_7_div_14_div_34_Template(rf, ctx) {
  if (rf & 1) {
    const _r62 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 386)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 389);
    \u0275\u0275listener("mousedown", function NovelGeneratorComponent_div_7_div_14_div_34_Template_button_mousedown_4_listener($event) {
      \u0275\u0275restoreView(_r62);
      return \u0275\u0275resetView($event.stopPropagation());
    })("click", function NovelGeneratorComponent_div_7_div_14_div_34_Template_button_click_4_listener($event) {
      \u0275\u0275restoreView(_r62);
      const ctx_r2 = \u0275\u0275nextContext(3);
      ctx_r2.unequipItem("belt");
      $event.stopPropagation();
      return \u0275\u0275resetView($event.preventDefault());
    });
    \u0275\u0275text(5, "\u2715");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const belt_r63 = ctx.ngIf;
    \u0275\u0275property("cdkDragData", \u0275\u0275pureFunction1(2, _c17, belt_r63));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(belt_r63.name || belt_r63.baseType);
  }
}
function NovelGeneratorComponent_div_7_div_14_ng_template_35_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uD5C8\uB9AC\uB760");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_7_div_14_div_41_Template(rf, ctx) {
  if (rf & 1) {
    const _r64 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 386)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 389);
    \u0275\u0275listener("mousedown", function NovelGeneratorComponent_div_7_div_14_div_41_Template_button_mousedown_4_listener($event) {
      \u0275\u0275restoreView(_r64);
      return \u0275\u0275resetView($event.stopPropagation());
    })("click", function NovelGeneratorComponent_div_7_div_14_div_41_Template_button_click_4_listener($event) {
      \u0275\u0275restoreView(_r64);
      const ctx_r2 = \u0275\u0275nextContext(3);
      ctx_r2.unequipItem("gloves");
      $event.stopPropagation();
      return \u0275\u0275resetView($event.preventDefault());
    });
    \u0275\u0275text(5, "\u2715");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const gloves_r65 = ctx.ngIf;
    \u0275\u0275property("cdkDragData", \u0275\u0275pureFunction1(2, _c18, gloves_r65));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(gloves_r65.name || gloves_r65.baseType);
  }
}
function NovelGeneratorComponent_div_7_div_14_ng_template_42_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uC7A5\uAC11");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_7_div_14_div_47_Template(rf, ctx) {
  if (rf & 1) {
    const _r66 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 386)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 389);
    \u0275\u0275listener("mousedown", function NovelGeneratorComponent_div_7_div_14_div_47_Template_button_mousedown_4_listener($event) {
      \u0275\u0275restoreView(_r66);
      return \u0275\u0275resetView($event.stopPropagation());
    })("click", function NovelGeneratorComponent_div_7_div_14_div_47_Template_button_click_4_listener($event) {
      \u0275\u0275restoreView(_r66);
      const ctx_r2 = \u0275\u0275nextContext(3);
      ctx_r2.unequipItem("boots");
      $event.stopPropagation();
      return \u0275\u0275resetView($event.preventDefault());
    });
    \u0275\u0275text(5, "\u2715");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const boots_r67 = ctx.ngIf;
    \u0275\u0275property("cdkDragData", \u0275\u0275pureFunction1(2, _c19, boots_r67));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(boots_r67.name || boots_r67.baseType);
  }
}
function NovelGeneratorComponent_div_7_div_14_ng_template_48_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uC2E0\uBC1C");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_7_div_14_div_54_Template(rf, ctx) {
  if (rf & 1) {
    const _r68 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 386)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 389);
    \u0275\u0275listener("mousedown", function NovelGeneratorComponent_div_7_div_14_div_54_Template_button_mousedown_4_listener($event) {
      \u0275\u0275restoreView(_r68);
      return \u0275\u0275resetView($event.stopPropagation());
    })("click", function NovelGeneratorComponent_div_7_div_14_div_54_Template_button_click_4_listener($event) {
      \u0275\u0275restoreView(_r68);
      const ctx_r2 = \u0275\u0275nextContext(3);
      ctx_r2.unequipItem("ring1");
      $event.stopPropagation();
      return \u0275\u0275resetView($event.preventDefault());
    });
    \u0275\u0275text(5, "\u2715");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ring1_r69 = ctx.ngIf;
    \u0275\u0275property("cdkDragData", \u0275\u0275pureFunction1(2, _c20, ring1_r69));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ring1_r69.name || ring1_r69.baseType);
  }
}
function NovelGeneratorComponent_div_7_div_14_ng_template_55_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uBC18\uC9C0");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_7_div_14_div_60_Template(rf, ctx) {
  if (rf & 1) {
    const _r70 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 386)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 389);
    \u0275\u0275listener("mousedown", function NovelGeneratorComponent_div_7_div_14_div_60_Template_button_mousedown_4_listener($event) {
      \u0275\u0275restoreView(_r70);
      return \u0275\u0275resetView($event.stopPropagation());
    })("click", function NovelGeneratorComponent_div_7_div_14_div_60_Template_button_click_4_listener($event) {
      \u0275\u0275restoreView(_r70);
      const ctx_r2 = \u0275\u0275nextContext(3);
      ctx_r2.unequipItem("ring2");
      $event.stopPropagation();
      return \u0275\u0275resetView($event.preventDefault());
    });
    \u0275\u0275text(5, "\u2715");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ring2_r71 = ctx.ngIf;
    \u0275\u0275property("cdkDragData", \u0275\u0275pureFunction1(2, _c21, ring2_r71));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ring2_r71.name || ring2_r71.baseType);
  }
}
function NovelGeneratorComponent_div_7_div_14_ng_template_61_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uBC18\uC9C0");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_7_div_14_button_68_Template(rf, ctx) {
  if (rf & 1) {
    const _r72 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 391);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_7_div_14_button_68_Template_button_click_0_listener() {
      const filter_r73 = \u0275\u0275restoreView(_r72).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.setInventoryFilter(filter_r73.value));
    });
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const filter_r73 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("active", ctx_r2.inventoryFilter === filter_r73.value);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate2(" ", filter_r73.icon, " ", filter_r73.label, " ");
  }
}
function NovelGeneratorComponent_div_7_div_14_div_85_div_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 399);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r76 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" \xD7", item_r76.quantity, " ");
  }
}
function NovelGeneratorComponent_div_7_div_14_div_85_button_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r80 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 400);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_7_div_14_div_85_button_7_Template_button_click_0_listener($event) {
      \u0275\u0275restoreView(_r80);
      const ctx_r80 = \u0275\u0275nextContext();
      const item_r76 = ctx_r80.$implicit;
      const i_r77 = ctx_r80.index;
      const ctx_r2 = \u0275\u0275nextContext(3);
      ctx_r2.quickEquipItem(item_r76, i_r77);
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275text(1, " \u26A1 ");
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    \u0275\u0275property("title", "\uCC29\uC6A9");
  }
}
function NovelGeneratorComponent_div_7_div_14_div_85_div_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 401)(1, "div", 402);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 403);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r76 = \u0275\u0275nextContext().$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.getInventoryItemIcon(item_r76));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.getTruncatedName(item_r76));
  }
}
function NovelGeneratorComponent_div_7_div_14_div_85_Template(rf, ctx) {
  if (rf & 1) {
    const _r74 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 392);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_7_div_14_div_85_Template_div_click_0_listener($event) {
      const ctx_r74 = \u0275\u0275restoreView(_r74);
      const item_r76 = ctx_r74.$implicit;
      const i_r77 = ctx_r74.index;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.onInventoryCellClick($event, item_r76, i_r77));
    })("contextmenu", function NovelGeneratorComponent_div_7_div_14_div_85_Template_div_contextmenu_0_listener($event) {
      const ctx_r77 = \u0275\u0275restoreView(_r74);
      const item_r76 = ctx_r77.$implicit;
      const i_r77 = ctx_r77.index;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.onInventoryCellRightClick($event, item_r76, i_r77));
    })("dblclick", function NovelGeneratorComponent_div_7_div_14_div_85_Template_div_dblclick_0_listener() {
      const ctx_r78 = \u0275\u0275restoreView(_r74);
      const item_r76 = ctx_r78.$implicit;
      const i_r77 = ctx_r78.index;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.onInventoryCellDoubleClick(item_r76, i_r77));
    });
    \u0275\u0275elementStart(1, "div", 393)(2, "div", 394);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 395);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275template(6, NovelGeneratorComponent_div_7_div_14_div_85_div_6_Template, 2, 1, "div", 396)(7, NovelGeneratorComponent_div_7_div_14_div_85_button_7_Template, 2, 1, "button", 397);
    \u0275\u0275pipe(8, "async");
    \u0275\u0275elementEnd();
    \u0275\u0275template(9, NovelGeneratorComponent_div_7_div_14_div_85_div_9_Template, 5, 2, "div", 398);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r76 = ctx.$implicit;
    const i_r77 = ctx.index;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classMap("rarity-" + item_r76.rarity);
    \u0275\u0275property("cdkDragData", \u0275\u0275pureFunction2(10, _c22, item_r76, i_r77));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.getInventoryItemIcon(item_r76));
    \u0275\u0275advance();
    \u0275\u0275property("title", item_r76.nameKo || item_r76.name);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r2.getTruncatedName(item_r76), " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r76.quantity > 1);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", \u0275\u0275pipeBind1(8, 8, ctx_r2.responsiveService.isMobile$) && ctx_r2.isEquippableItem(item_r76));
  }
}
function NovelGeneratorComponent_div_7_div_14_div_86_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 404)(1, "div", 393)(2, "div", 405);
    \u0275\u0275text(3, "\u{1F4E6}");
    \u0275\u0275elementEnd()()();
  }
}
function NovelGeneratorComponent_div_7_div_14_Template(rf, ctx) {
  if (rf & 1) {
    const _r53 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 351)(1, "div", 352)(2, "h4", 325);
    \u0275\u0275text(3, "\u2694\uFE0F \uC7A5\uCC29 \uC911\uC778 \uC7A5\uBE44");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 353)(5, "div", 354)(6, "div", 355);
    \u0275\u0275listener("cdkDropListDropped", function NovelGeneratorComponent_div_7_div_14_Template_div_cdkDropListDropped_6_listener($event) {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onEquipmentSlotDrop($event, "weapon"));
    });
    \u0275\u0275elementStart(7, "div", 356);
    \u0275\u0275text(8, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275template(9, NovelGeneratorComponent_div_7_div_14_div_9_Template, 6, 4, "div", 357)(10, NovelGeneratorComponent_div_7_div_14_ng_template_10_Template, 2, 0, "ng-template", null, 1, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "div", 358);
    \u0275\u0275listener("cdkDropListDropped", function NovelGeneratorComponent_div_7_div_14_Template_div_cdkDropListDropped_12_listener($event) {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onEquipmentSlotDrop($event, "armor"));
    });
    \u0275\u0275elementStart(13, "div", 356);
    \u0275\u0275text(14, "\u{1F6E1}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275template(15, NovelGeneratorComponent_div_7_div_14_div_15_Template, 6, 4, "div", 357)(16, NovelGeneratorComponent_div_7_div_14_ng_template_16_Template, 2, 0, "ng-template", null, 2, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(18, "div", 359)(19, "div", 360);
    \u0275\u0275listener("cdkDropListDropped", function NovelGeneratorComponent_div_7_div_14_Template_div_cdkDropListDropped_19_listener($event) {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onEquipmentSlotDrop($event, "helmet"));
    });
    \u0275\u0275elementStart(20, "div", 356);
    \u0275\u0275text(21, "\u26D1\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275template(22, NovelGeneratorComponent_div_7_div_14_div_22_Template, 6, 4, "div", 357)(23, NovelGeneratorComponent_div_7_div_14_ng_template_23_Template, 2, 0, "ng-template", null, 3, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "div", 361);
    \u0275\u0275listener("cdkDropListDropped", function NovelGeneratorComponent_div_7_div_14_Template_div_cdkDropListDropped_25_listener($event) {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onEquipmentSlotDrop($event, "amulet"));
    });
    \u0275\u0275elementStart(26, "div", 356);
    \u0275\u0275text(27, "\u{1F4FF}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(28, NovelGeneratorComponent_div_7_div_14_div_28_Template, 6, 4, "div", 357)(29, NovelGeneratorComponent_div_7_div_14_ng_template_29_Template, 2, 0, "ng-template", null, 4, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(31, "div", 362);
    \u0275\u0275listener("cdkDropListDropped", function NovelGeneratorComponent_div_7_div_14_Template_div_cdkDropListDropped_31_listener($event) {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onEquipmentSlotDrop($event, "belt"));
    });
    \u0275\u0275elementStart(32, "div", 356);
    \u0275\u0275text(33, "\u{1F454}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(34, NovelGeneratorComponent_div_7_div_14_div_34_Template, 6, 4, "div", 357)(35, NovelGeneratorComponent_div_7_div_14_ng_template_35_Template, 2, 0, "ng-template", null, 5, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(37, "div", 363)(38, "div", 364);
    \u0275\u0275listener("cdkDropListDropped", function NovelGeneratorComponent_div_7_div_14_Template_div_cdkDropListDropped_38_listener($event) {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onEquipmentSlotDrop($event, "gloves"));
    });
    \u0275\u0275elementStart(39, "div", 356);
    \u0275\u0275text(40, "\u{1F9E4}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(41, NovelGeneratorComponent_div_7_div_14_div_41_Template, 6, 4, "div", 357)(42, NovelGeneratorComponent_div_7_div_14_ng_template_42_Template, 2, 0, "ng-template", null, 6, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(44, "div", 365);
    \u0275\u0275listener("cdkDropListDropped", function NovelGeneratorComponent_div_7_div_14_Template_div_cdkDropListDropped_44_listener($event) {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onEquipmentSlotDrop($event, "boots"));
    });
    \u0275\u0275elementStart(45, "div", 356);
    \u0275\u0275text(46, "\u{1F462}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(47, NovelGeneratorComponent_div_7_div_14_div_47_Template, 6, 4, "div", 357)(48, NovelGeneratorComponent_div_7_div_14_ng_template_48_Template, 2, 0, "ng-template", null, 7, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(50, "div", 366)(51, "div", 367);
    \u0275\u0275listener("cdkDropListDropped", function NovelGeneratorComponent_div_7_div_14_Template_div_cdkDropListDropped_51_listener($event) {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onEquipmentSlotDrop($event, "ring1"));
    });
    \u0275\u0275elementStart(52, "div", 356);
    \u0275\u0275text(53, "\u{1F48D}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(54, NovelGeneratorComponent_div_7_div_14_div_54_Template, 6, 4, "div", 357)(55, NovelGeneratorComponent_div_7_div_14_ng_template_55_Template, 2, 0, "ng-template", null, 8, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(57, "div", 368);
    \u0275\u0275listener("cdkDropListDropped", function NovelGeneratorComponent_div_7_div_14_Template_div_cdkDropListDropped_57_listener($event) {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onEquipmentSlotDrop($event, "ring2"));
    });
    \u0275\u0275elementStart(58, "div", 356);
    \u0275\u0275text(59, "\u{1F48D}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(60, NovelGeneratorComponent_div_7_div_14_div_60_Template, 6, 4, "div", 357)(61, NovelGeneratorComponent_div_7_div_14_ng_template_61_Template, 2, 0, "ng-template", null, 9, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(63, "div", 369)(64, "h4", 325);
    \u0275\u0275text(65, "\u{1F392} \uBCF4\uC720 \uC544\uC774\uD15C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(66, "div", 370)(67, "div", 371);
    \u0275\u0275template(68, NovelGeneratorComponent_div_7_div_14_button_68_Template, 2, 4, "button", 372);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(69, "div", 373)(70, "label");
    \u0275\u0275text(71, "\uC815\uB82C:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(72, "select", 374);
    \u0275\u0275twoWayListener("ngModelChange", function NovelGeneratorComponent_div_7_div_14_Template_select_ngModelChange_72_listener($event) {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      \u0275\u0275twoWayBindingSet(ctx_r2.inventorySortBy, $event) || (ctx_r2.inventorySortBy = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275listener("change", function NovelGeneratorComponent_div_7_div_14_Template_select_change_72_listener() {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.sortInventory());
    });
    \u0275\u0275elementStart(73, "option", 375);
    \u0275\u0275text(74, "\uD76C\uADC0\uB3C4\uC21C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(75, "option", 376);
    \u0275\u0275text(76, "\uD0C0\uC785\uC21C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(77, "option", 377);
    \u0275\u0275text(78, "\uC774\uB984\uC21C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(79, "option", 378);
    \u0275\u0275text(80, "\uCD5C\uADFC \uD68D\uB4DD\uC21C");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(81, "button", 379);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_7_div_14_Template_button_click_81_listener() {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.autoSortInventory());
    });
    \u0275\u0275text(82, " \u{1F504} \uC790\uB3D9 \uC815\uB82C ");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(83, "div", 380)(84, "div", 381);
    \u0275\u0275listener("cdkDropListDropped", function NovelGeneratorComponent_div_7_div_14_Template_div_cdkDropListDropped_84_listener($event) {
      \u0275\u0275restoreView(_r53);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onInventoryDrop($event));
    });
    \u0275\u0275template(85, NovelGeneratorComponent_div_7_div_14_div_85_Template, 10, 13, "div", 382)(86, NovelGeneratorComponent_div_7_div_14_div_86_Template, 4, 0, "div", 383);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(87, "div", 384)(88, "span", 385);
    \u0275\u0275text(89);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const emptyWeapon_r82 = \u0275\u0275reference(11);
    const emptyArmor_r83 = \u0275\u0275reference(17);
    const emptyHelmet_r84 = \u0275\u0275reference(24);
    const emptyAmulet_r85 = \u0275\u0275reference(30);
    const emptyBelt_r86 = \u0275\u0275reference(36);
    const emptyGloves_r87 = \u0275\u0275reference(43);
    const emptyBoots_r88 = \u0275\u0275reference(49);
    const emptyRing1_r89 = \u0275\u0275reference(56);
    const emptyRing2_r90 = \u0275\u0275reference(62);
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(6);
    \u0275\u0275classProp("has-item", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon)("rarity-common", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon == null ? null : ctx_r2.playerCharacter.equipment.weapon.rarity) === "common")("rarity-uncommon", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon == null ? null : ctx_r2.playerCharacter.equipment.weapon.rarity) === "uncommon")("rarity-rare", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon == null ? null : ctx_r2.playerCharacter.equipment.weapon.rarity) === "rare")("rarity-epic", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon == null ? null : ctx_r2.playerCharacter.equipment.weapon.rarity) === "epic")("rarity-legendary", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon == null ? null : ctx_r2.playerCharacter.equipment.weapon.rarity) === "legendary");
    \u0275\u0275property("cdkDropListData", \u0275\u0275pureFunction1(152, _c2, ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon))("cdkDropListConnectedTo", \u0275\u0275pureFunction0(154, _c3));
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon)("ngIfElse", emptyWeapon_r82);
    \u0275\u0275advance(3);
    \u0275\u0275classProp("has-item", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor)("rarity-common", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor == null ? null : ctx_r2.playerCharacter.equipment.armor.rarity) === "common")("rarity-uncommon", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor == null ? null : ctx_r2.playerCharacter.equipment.armor.rarity) === "uncommon")("rarity-rare", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor == null ? null : ctx_r2.playerCharacter.equipment.armor.rarity) === "rare")("rarity-epic", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor == null ? null : ctx_r2.playerCharacter.equipment.armor.rarity) === "epic")("rarity-legendary", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor == null ? null : ctx_r2.playerCharacter.equipment.armor.rarity) === "legendary");
    \u0275\u0275property("cdkDropListData", \u0275\u0275pureFunction1(155, _c4, ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor))("cdkDropListConnectedTo", \u0275\u0275pureFunction0(157, _c3));
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor)("ngIfElse", emptyArmor_r83);
    \u0275\u0275advance(4);
    \u0275\u0275classProp("has-item", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet)("rarity-common", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet == null ? null : ctx_r2.playerCharacter.equipment.helmet.rarity) === "common")("rarity-uncommon", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet == null ? null : ctx_r2.playerCharacter.equipment.helmet.rarity) === "uncommon")("rarity-rare", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet == null ? null : ctx_r2.playerCharacter.equipment.helmet.rarity) === "rare")("rarity-epic", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet == null ? null : ctx_r2.playerCharacter.equipment.helmet.rarity) === "epic")("rarity-legendary", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet == null ? null : ctx_r2.playerCharacter.equipment.helmet.rarity) === "legendary");
    \u0275\u0275property("cdkDropListData", \u0275\u0275pureFunction1(158, _c5, ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet))("cdkDropListConnectedTo", \u0275\u0275pureFunction0(160, _c3));
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet)("ngIfElse", emptyHelmet_r84);
    \u0275\u0275advance(3);
    \u0275\u0275classProp("has-item", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet)("rarity-common", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet == null ? null : ctx_r2.playerCharacter.equipment.amulet.rarity) === "common")("rarity-uncommon", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet == null ? null : ctx_r2.playerCharacter.equipment.amulet.rarity) === "uncommon")("rarity-rare", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet == null ? null : ctx_r2.playerCharacter.equipment.amulet.rarity) === "rare")("rarity-epic", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet == null ? null : ctx_r2.playerCharacter.equipment.amulet.rarity) === "epic")("rarity-legendary", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet == null ? null : ctx_r2.playerCharacter.equipment.amulet.rarity) === "legendary");
    \u0275\u0275property("cdkDropListData", \u0275\u0275pureFunction1(161, _c6, ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet))("cdkDropListConnectedTo", \u0275\u0275pureFunction0(163, _c3));
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet)("ngIfElse", emptyAmulet_r85);
    \u0275\u0275advance(3);
    \u0275\u0275classProp("has-item", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt)("rarity-common", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt == null ? null : ctx_r2.playerCharacter.equipment.belt.rarity) === "common")("rarity-uncommon", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt == null ? null : ctx_r2.playerCharacter.equipment.belt.rarity) === "uncommon")("rarity-rare", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt == null ? null : ctx_r2.playerCharacter.equipment.belt.rarity) === "rare")("rarity-epic", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt == null ? null : ctx_r2.playerCharacter.equipment.belt.rarity) === "epic")("rarity-legendary", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt == null ? null : ctx_r2.playerCharacter.equipment.belt.rarity) === "legendary");
    \u0275\u0275property("cdkDropListData", \u0275\u0275pureFunction1(164, _c7, ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt))("cdkDropListConnectedTo", \u0275\u0275pureFunction0(166, _c3));
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt)("ngIfElse", emptyBelt_r86);
    \u0275\u0275advance(4);
    \u0275\u0275classProp("has-item", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves)("rarity-common", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves == null ? null : ctx_r2.playerCharacter.equipment.gloves.rarity) === "common")("rarity-uncommon", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves == null ? null : ctx_r2.playerCharacter.equipment.gloves.rarity) === "uncommon")("rarity-rare", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves == null ? null : ctx_r2.playerCharacter.equipment.gloves.rarity) === "rare")("rarity-epic", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves == null ? null : ctx_r2.playerCharacter.equipment.gloves.rarity) === "epic")("rarity-legendary", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves == null ? null : ctx_r2.playerCharacter.equipment.gloves.rarity) === "legendary");
    \u0275\u0275property("cdkDropListData", \u0275\u0275pureFunction1(167, _c8, ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves))("cdkDropListConnectedTo", \u0275\u0275pureFunction0(169, _c3));
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves)("ngIfElse", emptyGloves_r87);
    \u0275\u0275advance(3);
    \u0275\u0275classProp("has-item", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots)("rarity-common", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots == null ? null : ctx_r2.playerCharacter.equipment.boots.rarity) === "common")("rarity-uncommon", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots == null ? null : ctx_r2.playerCharacter.equipment.boots.rarity) === "uncommon")("rarity-rare", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots == null ? null : ctx_r2.playerCharacter.equipment.boots.rarity) === "rare")("rarity-epic", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots == null ? null : ctx_r2.playerCharacter.equipment.boots.rarity) === "epic")("rarity-legendary", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots == null ? null : ctx_r2.playerCharacter.equipment.boots.rarity) === "legendary");
    \u0275\u0275property("cdkDropListData", \u0275\u0275pureFunction1(170, _c9, ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots))("cdkDropListConnectedTo", \u0275\u0275pureFunction0(172, _c3));
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots)("ngIfElse", emptyBoots_r88);
    \u0275\u0275advance(4);
    \u0275\u0275classProp("has-item", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1)("rarity-common", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1 == null ? null : ctx_r2.playerCharacter.equipment.ring1.rarity) === "common")("rarity-uncommon", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1 == null ? null : ctx_r2.playerCharacter.equipment.ring1.rarity) === "uncommon")("rarity-rare", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1 == null ? null : ctx_r2.playerCharacter.equipment.ring1.rarity) === "rare")("rarity-epic", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1 == null ? null : ctx_r2.playerCharacter.equipment.ring1.rarity) === "epic")("rarity-legendary", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1 == null ? null : ctx_r2.playerCharacter.equipment.ring1.rarity) === "legendary");
    \u0275\u0275property("cdkDropListData", \u0275\u0275pureFunction1(173, _c10, ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1))("cdkDropListConnectedTo", \u0275\u0275pureFunction0(175, _c3));
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1)("ngIfElse", emptyRing1_r89);
    \u0275\u0275advance(3);
    \u0275\u0275classProp("has-item", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2)("rarity-common", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2 == null ? null : ctx_r2.playerCharacter.equipment.ring2.rarity) === "common")("rarity-uncommon", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2 == null ? null : ctx_r2.playerCharacter.equipment.ring2.rarity) === "uncommon")("rarity-rare", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2 == null ? null : ctx_r2.playerCharacter.equipment.ring2.rarity) === "rare")("rarity-epic", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2 == null ? null : ctx_r2.playerCharacter.equipment.ring2.rarity) === "epic")("rarity-legendary", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2 == null ? null : ctx_r2.playerCharacter.equipment.ring2.rarity) === "legendary");
    \u0275\u0275property("cdkDropListData", \u0275\u0275pureFunction1(176, _c11, ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2))("cdkDropListConnectedTo", \u0275\u0275pureFunction0(178, _c3));
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2)("ngIfElse", emptyRing2_r90);
    \u0275\u0275advance(8);
    \u0275\u0275property("ngForOf", ctx_r2.inventoryFilterOptions);
    \u0275\u0275advance(4);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.inventorySortBy);
    \u0275\u0275advance(12);
    \u0275\u0275property("cdkDropListData", ctx_r2.getFilteredAndSortedInventory())("cdkDropListConnectedTo", \u0275\u0275pureFunction0(179, _c12));
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r2.getFilteredAndSortedInventory());
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r2.getEmptyInventorySlots());
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate2(" ", ctx_r2.getFilteredAndSortedInventory().length, " / ", ctx_r2.maxInventorySize, " \uC544\uC774\uD15C ");
  }
}
function NovelGeneratorComponent_div_7_div_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 351)(1, "div", 406)(2, "div", 407)(3, "h4", 325);
    \u0275\u0275text(4, "\u{1F4B0} \uBCF4\uC720 \uC7AC\uD654");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "p", 408);
    \u0275\u0275text(6, "\uBAA8\uD5D8\uC5D0 \uD544\uC694\uD55C \uB2E4\uC591\uD55C \uD654\uD3D0\uB97C \uAD00\uB9AC\uD558\uC138\uC694");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "div", 409)(8, "div", 410);
    \u0275\u0275element(9, "div", 411);
    \u0275\u0275elementStart(10, "div", 412)(11, "div", 413)(12, "div", 414)(13, "span", 415);
    \u0275\u0275text(14, "\u{1F4B0}");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(15, "span", 416);
    \u0275\u0275text(16, "\uACE8\uB4DC");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(17, "div", 417)(18, "div", 418)(19, "span", 419);
    \u0275\u0275text(20);
    \u0275\u0275pipe(21, "number");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "span", 420);
    \u0275\u0275text(23, "G");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(24, "p", 421);
    \u0275\u0275text(25, "\uC0C1\uC810\uC5D0\uC11C \uC544\uC774\uD15C \uAD6C\uB9E4");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(26, "div", 422);
    \u0275\u0275element(27, "div", 411);
    \u0275\u0275elementStart(28, "div", 412)(29, "div", 413)(30, "div", 414)(31, "span", 415);
    \u0275\u0275text(32, "\u{1F48E}");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(33, "span", 416);
    \u0275\u0275text(34, "\uBCF4\uC11D");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(35, "div", 417)(36, "div", 418)(37, "span", 419);
    \u0275\u0275text(38);
    \u0275\u0275pipe(39, "number");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(40, "span", 420);
    \u0275\u0275text(41, "\uAC1C");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(42, "p", 421);
    \u0275\u0275text(43, "\uD504\uB9AC\uBBF8\uC5C4 \uC544\uC774\uD15C \uAD6C\uB9E4");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(44, "div", 423);
    \u0275\u0275element(45, "div", 411);
    \u0275\u0275elementStart(46, "div", 412)(47, "div", 413)(48, "div", 414)(49, "span", 415);
    \u0275\u0275text(50, "\u{1F52E}");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(51, "span", 416);
    \u0275\u0275text(52, "\uD06C\uB9AC\uC2A4\uD0C8");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(53, "div", 417)(54, "div", 418)(55, "span", 419);
    \u0275\u0275text(56);
    \u0275\u0275pipe(57, "number");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(58, "span", 420);
    \u0275\u0275text(59, "\uAC1C");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(60, "p", 421);
    \u0275\u0275text(61, "\uC7A5\uBE44 \uAC15\uD654 \uC7AC\uB8CC");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(62, "div", 424);
    \u0275\u0275element(63, "div", 411);
    \u0275\u0275elementStart(64, "div", 412)(65, "div", 413)(66, "div", 414)(67, "span", 415);
    \u0275\u0275text(68, "\u{1F3AB}");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(69, "span", 416);
    \u0275\u0275text(70, "\uD2F0\uCF13");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(71, "div", 417)(72, "div", 418)(73, "span", 419);
    \u0275\u0275text(74);
    \u0275\u0275pipe(75, "number");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(76, "span", 420);
    \u0275\u0275text(77, "\uC7A5");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(78, "p", 421);
    \u0275\u0275text(79, "\uB358\uC804 & \uC774\uBCA4\uD2B8 \uC785\uC7A5");
    \u0275\u0275elementEnd()()()()();
    \u0275\u0275elementStart(80, "div", 425)(81, "h5", 426);
    \u0275\u0275text(82, "\u{1F4A1} \uC7AC\uD654 \uD68D\uB4DD \uBC29\uBC95");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(83, "div", 427)(84, "div", 428)(85, "span", 429);
    \u0275\u0275text(86, "\u{1F4D6}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(87, "span", 430);
    \u0275\u0275text(88, "\uC2A4\uD1A0\uB9AC \uC9C4\uD589\uC73C\uB85C \uACE8\uB4DC \uD68D\uB4DD");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(89, "div", 428)(90, "span", 429);
    \u0275\u0275text(91, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(92, "span", 430);
    \u0275\u0275text(93, "\uC804\uD22C \uC2B9\uB9AC \uC2DC \uBCF4\uC0C1 \uD68D\uB4DD");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(94, "div", 428)(95, "span", 429);
    \u0275\u0275text(96, "\u{1F3AF}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(97, "span", 430);
    \u0275\u0275text(98, "\uD018\uC2A4\uD2B8 \uC644\uB8CC\uB85C \uB2E4\uC591\uD55C \uC7AC\uD654 \uD68D\uB4DD");
    \u0275\u0275elementEnd()()()()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(20);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(21, 4, ctx_r2.gold));
    \u0275\u0275advance(18);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(39, 6, ctx_r2.gem));
    \u0275\u0275advance(18);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(57, 8, ctx_r2.crystal));
    \u0275\u0275advance(18);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(75, 10, ctx_r2.ticket));
  }
}
function NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_14_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 462)(1, "span", 328);
    \u0275\u0275text(2, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 272);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r92 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", item_r92.stats.attack);
  }
}
function NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_14_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 462)(1, "span", 328);
    \u0275\u0275text(2, "\u{1F6E1}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 272);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r92 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", item_r92.stats.defense);
  }
}
function NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_14_div_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 462)(1, "span", 328);
    \u0275\u0275text(2, "\u2764\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 272);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r92 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", item_r92.stats.hp);
  }
}
function NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_14_div_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 462)(1, "span", 328);
    \u0275\u0275text(2, "\u{1F499}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 272);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r92 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", item_r92.stats.mp);
  }
}
function NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 460);
    \u0275\u0275template(1, NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_14_div_1_Template, 5, 1, "div", 461)(2, NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_14_div_2_Template, 5, 1, "div", 461)(3, NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_14_div_3_Template, 5, 1, "div", 461)(4, NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_14_div_4_Template, 5, 1, "div", 461);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r92 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r92.stats.attack);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r92.stats.defense);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r92.stats.hp);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r92.stats.mp);
  }
}
function NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_15_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 465)(1, "span", 466);
    \u0275\u0275text(2, "\u2728");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 467);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const effect_r93 = ctx.$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(effect_r93);
  }
}
function NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 463);
    \u0275\u0275template(1, NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_15_div_1_Template, 5, 1, "div", 464);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r92 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", item_r92.effects.slice(0, 2));
  }
}
function NovelGeneratorComponent_div_7_div_16_div_17_div_1_span_25_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span")(1, "span", 468);
    \u0275\u0275text(2, "\uFFFD");
    \u0275\u0275elementEnd();
    \u0275\u0275text(3, " \uAD6C\uB9E4\uD558\uAE30 ");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_7_div_16_div_17_div_1_span_26_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span")(1, "span", 468);
    \u0275\u0275text(2, "\uFFFD");
    \u0275\u0275elementEnd();
    \u0275\u0275text(3, " \uACE8\uB4DC \uBD80\uC871 ");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_7_div_16_div_17_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r91 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 179)(1, "div", 445)(2, "span", 446);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 447);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 448)(7, "div", 449);
    \u0275\u0275text(8, "\u{1F4E6}");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 450)(10, "h5", 101);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "p", 451);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd();
    \u0275\u0275template(14, NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_14_Template, 5, 4, "div", 452)(15, NovelGeneratorComponent_div_7_div_16_div_17_div_1_div_15_Template, 2, 1, "div", 453);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "div", 454)(17, "div", 455)(18, "span", 456);
    \u0275\u0275text(19, "\u{1F4B0}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "span", 457);
    \u0275\u0275text(21);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "span", 458);
    \u0275\u0275text(23, "G");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(24, "button", 459);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_7_div_16_div_17_div_1_Template_button_click_24_listener($event) {
      const item_r92 = \u0275\u0275restoreView(_r91).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r2.buyItemFromShop(item_r92, $event));
    });
    \u0275\u0275template(25, NovelGeneratorComponent_div_7_div_16_div_17_div_1_span_25_Template, 4, 0, "span", 97)(26, NovelGeneratorComponent_div_7_div_16_div_17_div_1_span_26_Template, 4, 0, "span", 97);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const item_r92 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275classProp("grade-legendary", item_r92.grade === "\uC2E0\uD654" || item_r92.grade === "\uC804\uC124")("grade-epic", item_r92.grade === "\uC601\uC6C5")("grade-rare", item_r92.grade === "\uD76C\uADC0")("grade-uncommon", item_r92.grade === "\uACE0\uAE09")("grade-common", item_r92.grade === "\uC77C\uBC18");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r92.grade);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r92.type);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(item_r92.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r92.description);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r92.stats && (item_r92.stats.attack || item_r92.stats.defense || item_r92.stats.hp || item_r92.stats.mp));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r92.effects && item_r92.effects.length > 0);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(item_r92.price || ctx_r2.calculateItemPriceByGrade(item_r92.grade));
    \u0275\u0275advance(3);
    \u0275\u0275classProp("can-buy", ctx_r2.gold >= (item_r92.price || ctx_r2.calculateItemPriceByGrade(item_r92.grade)))("cannot-buy", ctx_r2.gold < (item_r92.price || ctx_r2.calculateItemPriceByGrade(item_r92.grade)));
    \u0275\u0275property("disabled", ctx_r2.gold < (item_r92.price || ctx_r2.calculateItemPriceByGrade(item_r92.grade)));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.gold >= (item_r92.price || ctx_r2.calculateItemPriceByGrade(item_r92.grade)));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.gold < (item_r92.price || ctx_r2.calculateItemPriceByGrade(item_r92.grade)));
  }
}
function NovelGeneratorComponent_div_7_div_16_div_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 443);
    \u0275\u0275template(1, NovelGeneratorComponent_div_7_div_16_div_17_div_1_Template, 27, 24, "div", 444);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r2.savedItems);
  }
}
function NovelGeneratorComponent_div_7_div_16_div_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 469)(1, "div", 405);
    \u0275\u0275text(2, "\u{1F3EA}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "h5", 470);
    \u0275\u0275text(4, "\uC0C1\uC810\uC5D0 \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "p", 471);
    \u0275\u0275text(6, "AI \uC544\uC774\uD15C \uC0DD\uC131\uAE30\uB85C \uD2B9\uBCC4\uD55C \uC544\uC774\uD15C\uC744 \uB9CC\uB4E4\uC5B4\uBCF4\uC138\uC694!");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "div", 472)(8, "span", 473);
    \u0275\u0275text(9, "\u{1F4A1}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "span", 474);
    \u0275\u0275text(11, '\uD648 \uD654\uBA74\uC758 "AI \uC544\uC774\uD15C \uC0DD\uC131" \uBA54\uB274\uB97C \uC774\uC6A9\uD558\uC138\uC694');
    \u0275\u0275elementEnd()()();
  }
}
function NovelGeneratorComponent_div_7_div_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 351)(1, "div", 431)(2, "div", 432)(3, "div", 433)(4, "h4", 434);
    \u0275\u0275text(5, "\u{1F3EA} \uBAA8\uD5D8\uAC00 \uC0C1\uC810");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "p", 435);
    \u0275\u0275text(7, "AI\uAC00 \uC0DD\uC131\uD55C \uD2B9\uBCC4\uD55C \uC544\uC774\uD15C\uC744 \uAD6C\uB9E4\uD558\uC138\uC694");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 436)(9, "div", 437);
    \u0275\u0275text(10, "\u{1F4B0}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "div", 438)(12, "span", 439);
    \u0275\u0275text(13, "\uBCF4\uC720 \uACE8\uB4DC");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "span", 440);
    \u0275\u0275text(15);
    \u0275\u0275pipe(16, "number");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275template(17, NovelGeneratorComponent_div_7_div_16_div_17_Template, 2, 1, "div", 441)(18, NovelGeneratorComponent_div_7_div_16_div_18_Template, 12, 0, "div", 442);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(15);
    \u0275\u0275textInterpolate1("", \u0275\u0275pipeBind1(16, 3, ctx_r2.gold), " G");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r2.savedItems.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.savedItems.length === 0);
  }
}
function NovelGeneratorComponent_div_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r52 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 346);
    \u0275\u0275pipe(1, "async");
    \u0275\u0275elementStart(2, "div", 211)(3, "h3");
    \u0275\u0275text(4, "\u{1F392} \uC778\uBCA4\uD1A0\uB9AC & \uC7A5\uBE44");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_7_Template_button_click_5_listener() {
      \u0275\u0275restoreView(_r52);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.closeInventoryPanel());
    });
    \u0275\u0275text(6, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "div", 347)(8, "button", 348);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_7_Template_button_click_8_listener() {
      \u0275\u0275restoreView(_r52);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.setInventoryTab("equipment"));
    });
    \u0275\u0275text(9, " \u2694\uFE0F \uC7A5\uBE44 & \uC778\uBCA4\uD1A0\uB9AC ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "button", 349);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_7_Template_button_click_10_listener() {
      \u0275\u0275restoreView(_r52);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.setInventoryTab("currency"));
    });
    \u0275\u0275text(11, " \u{1F4B0} \uC7AC\uD654 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "button", 348);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_7_Template_button_click_12_listener() {
      \u0275\u0275restoreView(_r52);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.setInventoryTab("shop"));
    });
    \u0275\u0275text(13, " \u{1F6D2} \uC0C1\uC810 ");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(14, NovelGeneratorComponent_div_7_div_14_Template, 90, 180, "div", 350)(15, NovelGeneratorComponent_div_7_div_15_Template, 99, 12, "div", 350)(16, NovelGeneratorComponent_div_7_div_16_Template, 19, 5, "div", 350);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275classProp("mobile", \u0275\u0275pipeBind1(1, 11, ctx_r2.responsiveService.isMobile$));
    \u0275\u0275advance(8);
    \u0275\u0275classProp("active", ctx_r2.inventoryActiveTab === "equipment");
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active", ctx_r2.inventoryActiveTab === "currency");
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active", ctx_r2.inventoryActiveTab === "shop");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r2.inventoryActiveTab === "equipment");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.inventoryActiveTab === "currency");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.inventoryActiveTab === "shop");
  }
}
function NovelGeneratorComponent_div_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r94 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 475);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_8_Template_div_click_0_listener($event) {
      \u0275\u0275restoreView(_r94);
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275elementStart(1, "div", 476);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_8_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r94);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.equipItemFromMenu());
    });
    \u0275\u0275elementStart(2, "span", 477);
    \u0275\u0275text(3, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 478);
    \u0275\u0275text(5, "\uC7A5\uCC29\uD558\uAE30");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 476);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_8_Template_div_click_6_listener() {
      \u0275\u0275restoreView(_r94);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.showItemInfoModal());
    });
    \u0275\u0275elementStart(7, "span", 477);
    \u0275\u0275text(8, "\u{1F4CB}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "span", 478);
    \u0275\u0275text(10, "\uC815\uBCF4 \uBCF4\uAE30");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(11, "div", 479);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_8_Template_div_click_11_listener() {
      \u0275\u0275restoreView(_r94);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.discardItemFromMenu());
    });
    \u0275\u0275elementStart(12, "span", 477);
    \u0275\u0275text(13, "\u{1F5D1}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "span", 478);
    \u0275\u0275text(15, "\uBC84\uB9AC\uAE30");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275styleProp("left", ctx_r2.contextMenuPosition.x, "px")("top", ctx_r2.contextMenuPosition.y, "px");
  }
}
function NovelGeneratorComponent_div_9_div_6_span_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 498);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" \uC218\uB7C9: \xD7", ctx_r2.selectedContextItem.quantity, " ");
  }
}
function NovelGeneratorComponent_div_9_div_6_div_13_div_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 327)(1, "span", 328);
    \u0275\u0275text(2, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 268);
    \u0275\u0275text(4, "\uACF5\uACA9\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "span", 272);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1("+", ctx_r2.selectedContextItem.stats.attack);
  }
}
function NovelGeneratorComponent_div_9_div_6_div_13_div_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 327)(1, "span", 328);
    \u0275\u0275text(2, "\u{1F6E1}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 268);
    \u0275\u0275text(4, "\uBC29\uC5B4\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "span", 272);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1("+", ctx_r2.selectedContextItem.stats.defense);
  }
}
function NovelGeneratorComponent_div_9_div_6_div_13_div_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 327)(1, "span", 328);
    \u0275\u0275text(2, "\u2764\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 268);
    \u0275\u0275text(4, "\uCCB4\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "span", 272);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1("+", ctx_r2.selectedContextItem.stats.hp);
  }
}
function NovelGeneratorComponent_div_9_div_6_div_13_div_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 327)(1, "span", 328);
    \u0275\u0275text(2, "\u{1F499}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 268);
    \u0275\u0275text(4, "\uB9C8\uB098");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "span", 272);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1("+", ctx_r2.selectedContextItem.stats.mp);
  }
}
function NovelGeneratorComponent_div_9_div_6_div_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 499)(1, "h5", 500);
    \u0275\u0275text(2, "\u{1F4CA} \uB2A5\uB825\uCE58");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 326);
    \u0275\u0275template(4, NovelGeneratorComponent_div_9_div_6_div_13_div_4_Template, 7, 1, "div", 501)(5, NovelGeneratorComponent_div_9_div_6_div_13_div_5_Template, 7, 1, "div", 501)(6, NovelGeneratorComponent_div_9_div_6_div_13_div_6_Template, 7, 1, "div", 501)(7, NovelGeneratorComponent_div_9_div_6_div_13_div_7_Template, 7, 1, "div", 501);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngIf", ctx_r2.selectedContextItem.stats.attack);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedContextItem.stats.defense);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedContextItem.stats.hp);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedContextItem.stats.mp);
  }
}
function NovelGeneratorComponent_div_9_div_6_div_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 502)(1, "h5", 503);
    \u0275\u0275text(2, "\u{1F4DD} \uC124\uBA85");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.selectedContextItem.description);
  }
}
function NovelGeneratorComponent_div_9_div_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r96 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 485)(1, "div", 486)(2, "div", 487);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 488)(5, "h3");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "span", 489);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(9, "div", 490)(10, "span", 491);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd();
    \u0275\u0275template(12, NovelGeneratorComponent_div_9_div_6_span_12_Template, 2, 1, "span", 492);
    \u0275\u0275elementEnd();
    \u0275\u0275template(13, NovelGeneratorComponent_div_9_div_6_div_13_Template, 8, 4, "div", 493)(14, NovelGeneratorComponent_div_9_div_6_div_14_Template, 5, 1, "div", 494);
    \u0275\u0275elementStart(15, "div", 495)(16, "button", 496);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_9_div_6_Template_button_click_16_listener($event) {
      \u0275\u0275restoreView(_r96);
      const ctx_r2 = \u0275\u0275nextContext(2);
      ctx_r2.equipItemFromModal();
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275text(17, " \u2694\uFE0F \uC7A5\uCC29\uD558\uAE30 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "button", 497);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_9_div_6_Template_button_click_18_listener($event) {
      \u0275\u0275restoreView(_r96);
      const ctx_r2 = \u0275\u0275nextContext(2);
      ctx_r2.discardItemFromModal();
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275text(19, " \u{1F5D1}\uFE0F \uBC84\uB9AC\uAE30 ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275classMap("rarity-" + ctx_r2.selectedContextItem.rarity);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.getInventoryItemIcon(ctx_r2.selectedContextItem));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.selectedContextItem.nameKo || ctx_r2.selectedContextItem.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.getRarityName(ctx_r2.selectedContextItem.rarity));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.getTypeName(ctx_r2.selectedContextItem.type));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedContextItem.quantity > 1);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedContextItem.stats);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedContextItem.description);
  }
}
function NovelGeneratorComponent_div_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r95 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 480);
    \u0275\u0275listener("mousedown", function NovelGeneratorComponent_div_9_Template_div_mousedown_0_listener($event) {
      \u0275\u0275restoreView(_r95);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onItemInfoDragStart($event));
    });
    \u0275\u0275elementStart(1, "div", 481)(2, "h4", 482);
    \u0275\u0275text(3, "\u{1F4CB} \uC544\uC774\uD15C \uC815\uBCF4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 483);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_9_Template_button_click_4_listener($event) {
      \u0275\u0275restoreView(_r95);
      const ctx_r2 = \u0275\u0275nextContext();
      ctx_r2.closeItemInfoModal();
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275text(5, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(6, NovelGeneratorComponent_div_9_div_6_Template, 20, 9, "div", 484);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275styleProp("left", ctx_r2.itemInfoPosition.x, "px")("top", ctx_r2.itemInfoPosition.y, "px");
    \u0275\u0275advance(6);
    \u0275\u0275property("ngIf", ctx_r2.selectedContextItem);
  }
}
function NovelGeneratorComponent_div_10_div_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r98 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div");
    \u0275\u0275text(1);
    \u0275\u0275elementStart(2, "button", 505);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_10_div_10_Template_button_click_2_listener() {
      const item_r99 = \u0275\u0275restoreView(_r98).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.buyItem(item_r99));
    });
    \u0275\u0275text(3, "\uAD6C\uB9E4");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r99 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate3(" ", item_r99.name, " - ", item_r99.price, "G (\uC7AC\uACE0: ", item_r99.stock, ") ");
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r2.gold < item_r99.price || item_r99.stock <= 0);
  }
}
function NovelGeneratorComponent_div_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r97 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 504);
    \u0275\u0275pipe(1, "async");
    \u0275\u0275elementStart(2, "div", 211)(3, "h3");
    \u0275\u0275text(4, "\u{1F6D2} \uC0C1\uC810");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_10_Template_button_click_5_listener() {
      \u0275\u0275restoreView(_r97);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.closeShopPanel());
    });
    \u0275\u0275text(6, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "div", 212)(8, "div");
    \u0275\u0275text(9);
    \u0275\u0275elementEnd();
    \u0275\u0275template(10, NovelGeneratorComponent_div_10_div_10_Template, 4, 4, "div", 112);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275classProp("mobile", \u0275\u0275pipeBind1(1, 4, ctx_r2.responsiveService.isMobile$));
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate1("\uBCF4\uC720 \uACE8\uB4DC: ", ctx_r2.gold, "G");
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r2.shopItems);
  }
}
function NovelGeneratorComponent_div_11_span_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F9B8} \uC8FC\uC778\uACF5 \uC0DD\uC131");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_11_span_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_11_span_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u2694\uFE0F \uBB34\uB9BC \uACE0\uC218 \uC0DD\uC131");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_11_span_19_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_11_span_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F525} \uC801\uB300\uC790 \uC0DD\uC131");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_11_span_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_11_span_24_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F465} \uC870\uC5F0 \uC0DD\uC131");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_11_span_25_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_11_div_26_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 99);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" \u26A0\uFE0F ", ctx_r2.characterGenerationError, " ");
  }
}
function NovelGeneratorComponent_div_11_div_27_div_39_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 524);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ability_r102 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(ability_r102);
  }
}
function NovelGeneratorComponent_div_11_div_27_div_39_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 521)(1, "h5");
    \u0275\u0275text(2, "\u2694\uFE0F \uB2A5\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 522);
    \u0275\u0275template(4, NovelGeneratorComponent_div_11_div_27_div_39_span_4_Template, 2, 1, "span", 523);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.generatedCharacter.abilities);
  }
}
function NovelGeneratorComponent_div_11_div_27_div_45_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 527);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const trait_r103 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(trait_r103);
  }
}
function NovelGeneratorComponent_div_11_div_27_div_45_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 145)(1, "h5");
    \u0275\u0275text(2, "\u2B50 \uD2B9\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 525);
    \u0275\u0275template(4, NovelGeneratorComponent_div_11_div_27_div_45_span_4_Template, 2, 1, "span", 526);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.generatedCharacter.traits);
  }
}
function NovelGeneratorComponent_div_11_div_27_Template(rf, ctx) {
  if (rf & 1) {
    const _r101 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 512)(1, "h4");
    \u0275\u0275text(2, "\u{1F389} \uCE90\uB9AD\uD130\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 513)(4, "div", 514)(5, "span", 515);
    \u0275\u0275text(6, "\uC774\uB984:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "span", 516);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 514)(10, "span", 515);
    \u0275\u0275text(11, "\uB098\uC774:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "span", 516);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "div", 514)(15, "span", 515);
    \u0275\u0275text(16, "\uC131\uBCC4:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "span", 516);
    \u0275\u0275text(18);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(19, "div", 514)(20, "span", 515);
    \u0275\u0275text(21, "\uC5ED\uD560:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "span", 516);
    \u0275\u0275text(23);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(24, "div", 517)(25, "h5");
    \u0275\u0275text(26, "\u{1F4D6} \uC678\uBAA8");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(27, "p");
    \u0275\u0275text(28);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(29, "div", 517)(30, "h5");
    \u0275\u0275text(31, "\u{1F4AD} \uC131\uACA9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(32, "p");
    \u0275\u0275text(33);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(34, "div", 517)(35, "h5");
    \u0275\u0275text(36, "\u{1F4DC} \uBC30\uACBD");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(37, "p");
    \u0275\u0275text(38);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(39, NovelGeneratorComponent_div_11_div_27_div_39_Template, 5, 1, "div", 518);
    \u0275\u0275elementStart(40, "div", 517)(41, "h5");
    \u0275\u0275text(42, "\u{1F3AF} \uBAA9\uD45C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(43, "p");
    \u0275\u0275text(44);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(45, NovelGeneratorComponent_div_11_div_27_div_45_Template, 5, 1, "div", 143);
    \u0275\u0275elementStart(46, "div", 519)(47, "button", 114);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_11_div_27_Template_button_click_47_listener() {
      \u0275\u0275restoreView(_r101);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.saveGeneratedCharacter());
    });
    \u0275\u0275text(48, " \u{1F4BE} \uCE90\uB9AD\uD130 \uC800\uC7A5\uD558\uAE30 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(49, "button", 520);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_11_div_27_Template_button_click_49_listener() {
      \u0275\u0275restoreView(_r101);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.applyGeneratedCharacter());
    });
    \u0275\u0275text(50, " \u2705 \uC774 \uCE90\uB9AD\uD130\uB85C \uD50C\uB808\uC774\uD558\uAE30 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(51, "button", 116);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_11_div_27_Template_button_click_51_listener() {
      \u0275\u0275restoreView(_r101);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.generateAiCharacter());
    });
    \u0275\u0275text(52, " \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30 ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate(ctx_r2.generatedCharacter.name);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("", ctx_r2.generatedCharacter.age, "\uC138");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedCharacter.gender === "male" ? "\uB0A8\uC131" : "\uC5EC\uC131");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedCharacter.role);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedCharacter.appearance);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedCharacter.personality);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedCharacter.background);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedCharacter.abilities);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedCharacter.goals);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedCharacter.traits);
  }
}
function NovelGeneratorComponent_div_11_Template(rf, ctx) {
  if (rf & 1) {
    const _r100 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 506)(1, "div", 211)(2, "h3");
    \u0275\u0275text(3, "\u{1F3AD} AI \uCE90\uB9AD\uD130 \uC0DD\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_11_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r100);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.closeCharacterCreator());
    });
    \u0275\u0275text(5, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 212)(7, "div", 507)(8, "div", 80)(9, "h4");
    \u0275\u0275text(10, "\u2728 Loworld AI\uB85C \uCE90\uB9AD\uD130 \uC0DD\uC131\uD558\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "p");
    \u0275\u0275text(12, "AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uCE90\uB9AD\uD130\uB97C \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4.");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "div", 508)(14, "button", 509);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_11_Template_button_click_14_listener() {
      \u0275\u0275restoreView(_r100);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.generateAiCharacter("\uC8FC\uC778\uACF5"));
    });
    \u0275\u0275template(15, NovelGeneratorComponent_div_11_span_15_Template, 2, 0, "span", 97)(16, NovelGeneratorComponent_div_11_span_16_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "button", 510);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_11_Template_button_click_17_listener() {
      \u0275\u0275restoreView(_r100);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.generateAiCharacter("\uBB34\uB9BC \uACE0\uC218"));
    });
    \u0275\u0275template(18, NovelGeneratorComponent_div_11_span_18_Template, 2, 0, "span", 97)(19, NovelGeneratorComponent_div_11_span_19_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "button", 510);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_11_Template_button_click_20_listener() {
      \u0275\u0275restoreView(_r100);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.generateAiCharacter("\uC801\uB300\uC790"));
    });
    \u0275\u0275template(21, NovelGeneratorComponent_div_11_span_21_Template, 2, 0, "span", 97)(22, NovelGeneratorComponent_div_11_span_22_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "button", 510);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_11_Template_button_click_23_listener() {
      \u0275\u0275restoreView(_r100);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.generateAiCharacter("\uC870\uC5F0"));
    });
    \u0275\u0275template(24, NovelGeneratorComponent_div_11_span_24_Template, 2, 0, "span", 97)(25, NovelGeneratorComponent_div_11_span_25_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(26, NovelGeneratorComponent_div_11_div_26_Template, 2, 1, "div", 81)(27, NovelGeneratorComponent_div_11_div_27_Template, 53, 10, "div", 511);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(14);
    \u0275\u0275property("disabled", ctx_r2.isGeneratingCharacter);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingCharacter);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingCharacter);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r2.isGeneratingCharacter);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingCharacter);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingCharacter);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r2.isGeneratingCharacter);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingCharacter);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingCharacter);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r2.isGeneratingCharacter);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingCharacter);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingCharacter);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.characterGenerationError);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedCharacter);
  }
}
function NovelGeneratorComponent_div_12_span_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u2694\uFE0F \uC804\uD1B5 \uBB34\uD611");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_12_span_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_12_span_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F31F} \uD604\uB300 \uD310\uD0C0\uC9C0");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_12_span_19_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_12_span_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F311} \uC554\uD751 \uBB34\uD611");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_12_span_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_12_span_24_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F49D} \uB85C\uB9E8\uC2A4");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_12_span_25_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_12_div_26_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 99);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" \u26A0\uFE0F ", ctx_r2.scenarioGenerationError, " ");
  }
}
function NovelGeneratorComponent_div_12_div_27_div_16_li_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "li");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const character_r106 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(character_r106);
  }
}
function NovelGeneratorComponent_div_12_div_27_div_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 536)(1, "h5");
    \u0275\u0275text(2, "\u{1F465} \uB4F1\uC7A5\uC778\uBB3C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "ul");
    \u0275\u0275template(4, NovelGeneratorComponent_div_12_div_27_div_16_li_4_Template, 2, 1, "li", 112);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.generatedScenario.characters);
  }
}
function NovelGeneratorComponent_div_12_div_27_div_32_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 539);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const tag_r107 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(tag_r107);
  }
}
function NovelGeneratorComponent_div_12_div_27_div_32_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 157)(1, "h5");
    \u0275\u0275text(2, "\u{1F3F7}\uFE0F \uD0DC\uADF8");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 537);
    \u0275\u0275template(4, NovelGeneratorComponent_div_12_div_27_div_32_span_4_Template, 2, 1, "span", 538);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.generatedScenario.tags);
  }
}
function NovelGeneratorComponent_div_12_div_27_Template(rf, ctx) {
  if (rf & 1) {
    const _r105 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 532)(1, "h4");
    \u0275\u0275text(2, "\u{1F389} \uC2DC\uB098\uB9AC\uC624\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 533)(4, "h2");
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 534)(7, "h5");
    \u0275\u0275text(8, "\u{1F4D6} \uC124\uBA85");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "p");
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(11, "div", 534)(12, "h5");
    \u0275\u0275text(13, "\u{1F4CD} \uBC30\uACBD");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "p");
    \u0275\u0275text(15);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(16, NovelGeneratorComponent_div_12_div_27_div_16_Template, 5, 1, "div", 535);
    \u0275\u0275elementStart(17, "div", 534)(18, "h5");
    \u0275\u0275text(19, "\u2694\uFE0F \uAC08\uB4F1");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "p");
    \u0275\u0275text(21);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(22, "div", 534)(23, "h5");
    \u0275\u0275text(24, "\u{1F3AF} \uBAA9\uD45C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "p");
    \u0275\u0275text(26);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(27, "div", 534)(28, "h5");
    \u0275\u0275text(29, "\u{1F4AD} \uBD84\uC704\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(30, "p");
    \u0275\u0275text(31);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(32, NovelGeneratorComponent_div_12_div_27_div_32_Template, 5, 1, "div", 154);
    \u0275\u0275elementStart(33, "div", 519)(34, "button", 520);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_12_div_27_Template_button_click_34_listener() {
      \u0275\u0275restoreView(_r105);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.saveGeneratedScenario());
    });
    \u0275\u0275text(35, " \u{1F4BE} \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5\uD558\uAE30 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(36, "button", 115);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_12_div_27_Template_button_click_36_listener() {
      \u0275\u0275restoreView(_r105);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.startGameWithScenario());
    });
    \u0275\u0275text(37, " \u{1F3AE} \uC774 \uC2DC\uB098\uB9AC\uC624\uB85C \uAC8C\uC784 \uC2DC\uC791 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(38, "button", 116);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_12_div_27_Template_button_click_38_listener() {
      \u0275\u0275restoreView(_r105);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.generateAiScenario());
    });
    \u0275\u0275text(39, " \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30 ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedScenario.title);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedScenario.description);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedScenario.setting);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedScenario.characters);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedScenario.conflict);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedScenario.goal);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedScenario.mood);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedScenario.tags);
  }
}
function NovelGeneratorComponent_div_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r104 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 528)(1, "div", 211)(2, "h3");
    \u0275\u0275text(3, "\u{1F3AC} AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_12_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r104);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.closeScenarioCreator());
    });
    \u0275\u0275text(5, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 212)(7, "div", 529)(8, "div", 80)(9, "h4");
    \u0275\u0275text(10, "\u2728 Loworld AI\uB85C \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "p");
    \u0275\u0275text(12, "AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uC2DC\uB098\uB9AC\uC624\uB97C \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4.");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "div", 530)(14, "button", 509);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_12_Template_button_click_14_listener() {
      \u0275\u0275restoreView(_r104);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.generateAiScenario("\uBB34\uD611", "\uC804\uD1B5\uC801\uC778", "\uAE34\uC7A5\uAC10 \uB118\uCE58\uB294"));
    });
    \u0275\u0275template(15, NovelGeneratorComponent_div_12_span_15_Template, 2, 0, "span", 97)(16, NovelGeneratorComponent_div_12_span_16_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "button", 510);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_12_Template_button_click_17_listener() {
      \u0275\u0275restoreView(_r104);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.generateAiScenario("\uD310\uD0C0\uC9C0", "\uD604\uB300\uC801\uC778", "\uC2E0\uBE44\uB85C\uC6B4"));
    });
    \u0275\u0275template(18, NovelGeneratorComponent_div_12_span_18_Template, 2, 0, "span", 97)(19, NovelGeneratorComponent_div_12_span_19_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "button", 510);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_12_Template_button_click_20_listener() {
      \u0275\u0275restoreView(_r104);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.generateAiScenario("\uBB34\uD611", "\uC554\uD751", "\uC5B4\uB450\uC6B4"));
    });
    \u0275\u0275template(21, NovelGeneratorComponent_div_12_span_21_Template, 2, 0, "span", 97)(22, NovelGeneratorComponent_div_12_span_22_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "button", 510);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_12_Template_button_click_23_listener() {
      \u0275\u0275restoreView(_r104);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.generateAiScenario("\uB85C\uB9E8\uC2A4", "\uAC10\uC131\uC801\uC778", "\uB2EC\uCF64\uD55C"));
    });
    \u0275\u0275template(24, NovelGeneratorComponent_div_12_span_24_Template, 2, 0, "span", 97)(25, NovelGeneratorComponent_div_12_span_25_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(26, NovelGeneratorComponent_div_12_div_26_Template, 2, 1, "div", 81)(27, NovelGeneratorComponent_div_12_div_27_Template, 40, 8, "div", 531);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(14);
    \u0275\u0275property("disabled", ctx_r2.isGeneratingScenario);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingScenario);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingScenario);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r2.isGeneratingScenario);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingScenario);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingScenario);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r2.isGeneratingScenario);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingScenario);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingScenario);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r2.isGeneratingScenario);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingScenario);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingScenario);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.scenarioGenerationError);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedScenario);
  }
}
function NovelGeneratorComponent_div_13_span_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F3B2} \uB79C\uB364 10\uAC1C \uC0DD\uC131");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_13_span_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_13_span_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u2694\uFE0F \uBB34\uAE30 10\uAC1C");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_13_span_19_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_13_span_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F6E1}\uFE0F \uBC29\uC5B4\uAD6C 10\uAC1C");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_13_span_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_13_span_24_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F9EA} \uC18C\uBE44\uD488 10\uAC1C");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_13_span_25_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u23F3 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_13_div_26_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 99);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" \u26A0\uFE0F ", ctx_r2.itemGenerationError, " ");
  }
}
function NovelGeneratorComponent_div_13_div_27_div_4_div_10_span_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 562);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r111 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2694\uFE0F +", item_r111.stats.attack);
  }
}
function NovelGeneratorComponent_div_13_div_27_div_4_div_10_span_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 562);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r111 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F6E1}\uFE0F +", item_r111.stats.defense);
  }
}
function NovelGeneratorComponent_div_13_div_27_div_4_div_10_span_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 562);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r111 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2764\uFE0F +", item_r111.stats.hp);
  }
}
function NovelGeneratorComponent_div_13_div_27_div_4_div_10_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 562);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r111 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F499} +", item_r111.stats.mp);
  }
}
function NovelGeneratorComponent_div_13_div_27_div_4_div_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 560);
    \u0275\u0275template(1, NovelGeneratorComponent_div_13_div_27_div_4_div_10_span_1_Template, 2, 1, "span", 561)(2, NovelGeneratorComponent_div_13_div_27_div_4_div_10_span_2_Template, 2, 1, "span", 561)(3, NovelGeneratorComponent_div_13_div_27_div_4_div_10_span_3_Template, 2, 1, "span", 561)(4, NovelGeneratorComponent_div_13_div_27_div_4_div_10_span_4_Template, 2, 1, "span", 561);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r111 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r111.stats.attack);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r111.stats.defense);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r111.stats.hp);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r111.stats.mp);
  }
}
function NovelGeneratorComponent_div_13_div_27_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r110 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 553)(1, "div", 554)(2, "h5");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 446);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 555);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "div", 556);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd();
    \u0275\u0275template(10, NovelGeneratorComponent_div_13_div_27_div_4_div_10_Template, 5, 4, "div", 557);
    \u0275\u0275elementStart(11, "div", 558)(12, "button", 559);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_13_div_27_div_4_Template_button_click_12_listener() {
      const i_r112 = \u0275\u0275restoreView(_r110).index;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.saveGeneratedItemByIndex(i_r112));
    });
    \u0275\u0275text(13, " \u{1F4BE} \uC800\uC7A5 ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const item_r111 = ctx.$implicit;
    \u0275\u0275classProp("grade-common", item_r111.grade === "\uC77C\uBC18")("grade-uncommon", item_r111.grade === "\uACE0\uAE09")("grade-rare", item_r111.grade === "\uD76C\uADC0")("grade-epic", item_r111.grade === "\uC601\uC6C5")("grade-legendary", item_r111.grade === "\uC804\uC124" || item_r111.grade === "\uC2E0\uD654");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r111.name);
    \u0275\u0275advance();
    \u0275\u0275classMap("grade-" + item_r111.grade);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(item_r111.grade);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" \u{1F4E6} ", item_r111.type, " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", item_r111.description, " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r111.stats);
  }
}
function NovelGeneratorComponent_div_13_div_27_Template(rf, ctx) {
  if (rf & 1) {
    const _r109 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 549)(1, "h4");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 161);
    \u0275\u0275template(4, NovelGeneratorComponent_div_13_div_27_div_4_Template, 14, 17, "div", 550);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 551)(6, "button", 552);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_13_div_27_Template_button_click_6_listener() {
      \u0275\u0275restoreView(_r109);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.saveAllGeneratedItems());
    });
    \u0275\u0275text(7, " \u{1F4BE} \uBAA8\uB450 \uC800\uC7A5 ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F389} ", ctx_r2.generatedItems.length, "\uAC1C\uC758 \uC544\uC774\uD15C\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.generatedItems);
  }
}
function NovelGeneratorComponent_div_13_div_28_div_16_div_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 327)(1, "span", 268);
    \u0275\u0275text(2, "\u2694\uFE0F \uACF5\uACA9\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 272);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", ctx_r2.generatedItem.stats.attack);
  }
}
function NovelGeneratorComponent_div_13_div_28_div_16_div_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 327)(1, "span", 268);
    \u0275\u0275text(2, "\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 272);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", ctx_r2.generatedItem.stats.defense);
  }
}
function NovelGeneratorComponent_div_13_div_28_div_16_div_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 327)(1, "span", 268);
    \u0275\u0275text(2, "\u2764\uFE0F HP");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 272);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", ctx_r2.generatedItem.stats.hp);
  }
}
function NovelGeneratorComponent_div_13_div_28_div_16_div_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 327)(1, "span", 268);
    \u0275\u0275text(2, "\u{1F499} MP");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 272);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", ctx_r2.generatedItem.stats.mp);
  }
}
function NovelGeneratorComponent_div_13_div_28_div_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 170)(1, "h5");
    \u0275\u0275text(2, "\u{1F4CA} \uB2A5\uB825\uCE58");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 326);
    \u0275\u0275template(4, NovelGeneratorComponent_div_13_div_28_div_16_div_4_Template, 5, 1, "div", 501)(5, NovelGeneratorComponent_div_13_div_28_div_16_div_5_Template, 5, 1, "div", 501)(6, NovelGeneratorComponent_div_13_div_28_div_16_div_6_Template, 5, 1, "div", 501)(7, NovelGeneratorComponent_div_13_div_28_div_16_div_7_Template, 5, 1, "div", 501);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngIf", ctx_r2.generatedItem.stats.attack);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedItem.stats.defense);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedItem.stats.hp);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedItem.stats.mp);
  }
}
function NovelGeneratorComponent_div_13_div_28_div_17_li_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "li");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const effect_r114 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(effect_r114);
  }
}
function NovelGeneratorComponent_div_13_div_28_div_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 463)(1, "h5");
    \u0275\u0275text(2, "\u2728 \uD6A8\uACFC");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "ul");
    \u0275\u0275template(4, NovelGeneratorComponent_div_13_div_28_div_17_li_4_Template, 2, 1, "li", 112);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.generatedItem.effects);
  }
}
function NovelGeneratorComponent_div_13_div_28_div_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 571)(1, "h5");
    \u0275\u0275text(2, "\u26A0\uFE0F \uC0AC\uC6A9 \uC870\uAC74");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.generatedItem.requirements);
  }
}
function NovelGeneratorComponent_div_13_div_28_div_19_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 572)(1, "h5");
    \u0275\u0275text(2, "\u{1F4DC} \uC804\uC124");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p", 573);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.generatedItem.lore);
  }
}
function NovelGeneratorComponent_div_13_div_28_div_20_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 539);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const tag_r115 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(tag_r115);
  }
}
function NovelGeneratorComponent_div_13_div_28_div_20_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 166)(1, "h5");
    \u0275\u0275text(2, "\u{1F3F7}\uFE0F \uD0DC\uADF8");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 537);
    \u0275\u0275template(4, NovelGeneratorComponent_div_13_div_28_div_20_span_4_Template, 2, 1, "span", 538);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.generatedItem.tags);
  }
}
function NovelGeneratorComponent_div_13_div_28_Template(rf, ctx) {
  if (rf & 1) {
    const _r113 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 563)(1, "h4");
    \u0275\u0275text(2, "\u{1F389} \uC544\uC774\uD15C\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 564)(4, "h2");
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 446);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 565)(9, "span", 566);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(11, "div", 451)(12, "h5");
    \u0275\u0275text(13, "\u{1F4D6} \uC124\uBA85");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "p");
    \u0275\u0275text(15);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(16, NovelGeneratorComponent_div_13_div_28_div_16_Template, 8, 4, "div", 165)(17, NovelGeneratorComponent_div_13_div_28_div_17_Template, 5, 1, "div", 453)(18, NovelGeneratorComponent_div_13_div_28_div_18_Template, 5, 1, "div", 567)(19, NovelGeneratorComponent_div_13_div_28_div_19_Template, 5, 1, "div", 568)(20, NovelGeneratorComponent_div_13_div_28_div_20_Template, 5, 1, "div", 569);
    \u0275\u0275elementStart(21, "div", 519)(22, "button", 114);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_13_div_28_Template_button_click_22_listener() {
      \u0275\u0275restoreView(_r113);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.saveGeneratedItem());
    });
    \u0275\u0275text(23, " \u{1F4BE} \uC544\uC774\uD15C \uC800\uC7A5\uD558\uAE30 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(24, "button", 570);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_13_div_28_Template_button_click_24_listener() {
      \u0275\u0275restoreView(_r113);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.addGeneratedItemToInventory());
    });
    \u0275\u0275text(25, " \u{1F392} \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(26, "button", 116);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_13_div_28_Template_button_click_26_listener() {
      \u0275\u0275restoreView(_r113);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.generateAiItem());
    });
    \u0275\u0275text(27, " \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30 ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275classProp("grade-legendary", ctx_r2.generatedItem.grade === "\uC2E0\uD654" || ctx_r2.generatedItem.grade === "\uC804\uC124");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.generatedItem.name);
    \u0275\u0275advance();
    \u0275\u0275classMap("grade-" + ctx_r2.generatedItem.grade);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r2.generatedItem.grade, " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("\u{1F4E6} ", ctx_r2.generatedItem.type);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.generatedItem.description);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedItem.stats);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedItem.effects && ctx_r2.generatedItem.effects.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedItem.requirements);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedItem.lore);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedItem.tags && ctx_r2.generatedItem.tags.length > 0);
  }
}
function NovelGeneratorComponent_div_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r108 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 540)(1, "div", 211)(2, "h3");
    \u0275\u0275text(3, "\u{1F48E} AI \uC544\uC774\uD15C \uC0DD\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_13_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r108);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.closeItemCreator());
    });
    \u0275\u0275text(5, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 212)(7, "div", 541)(8, "div", 80)(9, "h4");
    \u0275\u0275text(10, "\u2728 Loworld AI\uB85C \uC544\uC774\uD15C \uC0DD\uC131\uD558\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "p");
    \u0275\u0275text(12, "AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uC544\uC774\uD15C\uC744 \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4.");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "div", 542)(14, "button", 543);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_13_Template_button_click_14_listener() {
      \u0275\u0275restoreView(_r108);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.generateAiItem());
    });
    \u0275\u0275template(15, NovelGeneratorComponent_div_13_span_15_Template, 2, 0, "span", 97)(16, NovelGeneratorComponent_div_13_span_16_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "button", 544);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_13_Template_button_click_17_listener() {
      \u0275\u0275restoreView(_r108);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.generateAiItem("\uBB34\uAE30"));
    });
    \u0275\u0275template(18, NovelGeneratorComponent_div_13_span_18_Template, 2, 0, "span", 97)(19, NovelGeneratorComponent_div_13_span_19_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "button", 545);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_13_Template_button_click_20_listener() {
      \u0275\u0275restoreView(_r108);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.generateAiItem("\uBC29\uC5B4\uAD6C"));
    });
    \u0275\u0275template(21, NovelGeneratorComponent_div_13_span_21_Template, 2, 0, "span", 97)(22, NovelGeneratorComponent_div_13_span_22_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "button", 546);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_13_Template_button_click_23_listener() {
      \u0275\u0275restoreView(_r108);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.generateAiItem("\uC18C\uBE44\uD488"));
    });
    \u0275\u0275template(24, NovelGeneratorComponent_div_13_span_24_Template, 2, 0, "span", 97)(25, NovelGeneratorComponent_div_13_span_25_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(26, NovelGeneratorComponent_div_13_div_26_Template, 2, 1, "div", 81)(27, NovelGeneratorComponent_div_13_div_27_Template, 8, 2, "div", 547)(28, NovelGeneratorComponent_div_13_div_28_Template, 28, 13, "div", 548);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(14);
    \u0275\u0275property("disabled", ctx_r2.isGeneratingItem);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingItem);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingItem);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r2.isGeneratingItem);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingItem);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingItem);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r2.isGeneratingItem);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingItem);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingItem);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r2.isGeneratingItem);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.isGeneratingItem);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.isGeneratingItem);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.itemGenerationError);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedItems.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.generatedItem && ctx_r2.generatedItems.length === 0);
  }
}
function NovelGeneratorComponent_div_14_div_20_span_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F3AC}");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_14_div_20_span_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F4D6}");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_14_div_20_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F500}");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_14_div_20_span_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F4CD}");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_14_div_20_div_11_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 598);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const choice_r117 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate2(" \u2192 ", choice_r117.substring(0, 30), "", choice_r117.length > 30 ? "..." : "", " ");
  }
}
function NovelGeneratorComponent_div_14_div_20_div_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 596);
    \u0275\u0275template(1, NovelGeneratorComponent_div_14_div_20_div_11_div_1_Template, 2, 2, "div", 597);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const node_r118 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", node_r118.choices);
  }
}
function NovelGeneratorComponent_div_14_div_20_div_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "div", 599);
  }
}
function NovelGeneratorComponent_div_14_div_20_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 589)(1, "div", 590);
    \u0275\u0275template(2, NovelGeneratorComponent_div_14_div_20_span_2_Template, 2, 0, "span", 97)(3, NovelGeneratorComponent_div_14_div_20_span_3_Template, 2, 0, "span", 97)(4, NovelGeneratorComponent_div_14_div_20_span_4_Template, 2, 0, "span", 97)(5, NovelGeneratorComponent_div_14_div_20_span_5_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 591)(7, "div", 592);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "div", 593);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275template(11, NovelGeneratorComponent_div_14_div_20_div_11_Template, 2, 1, "div", 594);
    \u0275\u0275elementEnd();
    \u0275\u0275template(12, NovelGeneratorComponent_div_14_div_20_div_12_Template, 1, 0, "div", 595);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const node_r118 = ctx.$implicit;
    const i_r119 = ctx.index;
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275styleProp("margin-left", node_r118.level * 40, "px");
    \u0275\u0275property("ngClass", \u0275\u0275pureFunction4(11, _c23, node_r118.type === "start", node_r118.type === "story", node_r118.type === "choice", node_r118.type === "current"));
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", node_r118.type === "start");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", node_r118.type === "story");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", node_r118.type === "choice");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", node_r118.type === "current");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(node_r118.label);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\uB808\uBCA8 ", node_r118.level);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", node_r118.type === "current" && node_r118.choices);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", i_r119 < ctx_r2.storyFlowNodes.length - 1);
  }
}
function NovelGeneratorComponent_div_14_Template(rf, ctx) {
  if (rf & 1) {
    const _r116 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 574)(1, "div", 575)(2, "div", 576)(3, "div", 119)(4, "h3");
    \u0275\u0275text(5, "\u{1F5FA}\uFE0F \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_14_Template_button_click_6_listener() {
      \u0275\u0275restoreView(_r116);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.toggleStoryFlowPanel());
    });
    \u0275\u0275text(7, "\u2715");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 577)(9, "p");
    \u0275\u0275text(10, "\uD604\uC7AC\uAE4C\uC9C0\uC758 \uC120\uD0DD\uACFC \uC55E\uC73C\uB85C\uC758 \uAC00\uB2A5\uD55C \uACBD\uB85C\uB97C \uBCF4\uC5EC\uC90D\uB2C8\uB2E4.");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "div", 578)(12, "span", 327);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "span", 327);
    \u0275\u0275text(15);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "span", 327);
    \u0275\u0275text(17);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(18, "div", 579)(19, "div", 580);
    \u0275\u0275template(20, NovelGeneratorComponent_div_14_div_20_Template, 13, 16, "div", 581);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(21, "div", 582)(22, "h4");
    \u0275\u0275text(23, "\uBC94\uB840");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(24, "div", 583)(25, "div", 584)(26, "span", 585);
    \u0275\u0275text(27, "\u{1F3AC}");
    \u0275\u0275elementEnd();
    \u0275\u0275text(28, " \uC2DC\uC791");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(29, "div", 584)(30, "span", 586);
    \u0275\u0275text(31, "\u{1F4D6}");
    \u0275\u0275elementEnd();
    \u0275\u0275text(32, " \uC2A4\uD1A0\uB9AC");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(33, "div", 584)(34, "span", 587);
    \u0275\u0275text(35, "\u{1F500}");
    \u0275\u0275elementEnd();
    \u0275\u0275text(36, " \uC120\uD0DD");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(37, "div", 584)(38, "span", 588);
    \u0275\u0275text(39, "\u{1F4CD}");
    \u0275\u0275elementEnd();
    \u0275\u0275text(40, " \uD604\uC7AC \uC704\uCE58");
    \u0275\u0275elementEnd()()()()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(13);
    \u0275\u0275textInterpolate1("\u{1F4CA} \uC9C4\uD589 \uB2E8\uACC4: ", ctx_r2.storyBlocks.length);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F500} \uC120\uD0DD \uD69F\uC218: ", ctx_r2.currentPath.length);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F3AF} \uD604\uC7AC \uC120\uD0DD\uC9C0: ", ctx_r2.choices.length);
    \u0275\u0275advance(3);
    \u0275\u0275property("ngForOf", ctx_r2.storyFlowNodes);
  }
}
function NovelGeneratorComponent_div_15_div_20_div_14_span_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 159);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const tag_r123 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(tag_r123);
  }
}
function NovelGeneratorComponent_div_15_div_20_div_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 157);
    \u0275\u0275template(1, NovelGeneratorComponent_div_15_div_20_div_14_span_1_Template, 2, 1, "span", 158);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const scenario_r122 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", scenario_r122.tags.slice(0, 3));
  }
}
function NovelGeneratorComponent_div_15_div_20_Template(rf, ctx) {
  if (rf & 1) {
    const _r121 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 151);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_15_div_20_Template_div_click_0_listener() {
      const scenario_r122 = \u0275\u0275restoreView(_r121).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.linkScenarioToChoice(ctx_r2.currentLinkingChoiceIndex, scenario_r122.id));
    });
    \u0275\u0275elementStart(1, "div", 152)(2, "h4");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 609);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 610)(7, "p", 534);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "div", 155)(10, "span", 110);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "span", 110);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(14, NovelGeneratorComponent_div_15_div_20_div_14_Template, 2, 1, "div", 154);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const scenario_r122 = ctx.$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(scenario_r122.title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(scenario_r122.genre);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(scenario_r122.description);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("\u{1F4CD} ", scenario_r122.setting);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F3AD} ", scenario_r122.mood);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", scenario_r122.tags && scenario_r122.tags.length > 0);
  }
}
function NovelGeneratorComponent_div_15_div_21_Template(rf, ctx) {
  if (rf & 1) {
    const _r124 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 611)(1, "p");
    \u0275\u0275text(2, "\uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "button", 612);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_15_div_21_Template_button_click_3_listener() {
      \u0275\u0275restoreView(_r124);
      const ctx_r2 = \u0275\u0275nextContext(2);
      ctx_r2.openScenarioCreator();
      return \u0275\u0275resetView(ctx_r2.closeScenarioLinkPanel());
    });
    \u0275\u0275text(4, " \u{1F3AC} \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30 ");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    const _r120 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 600)(1, "div", 601)(2, "div", 602)(3, "div", 119)(4, "span", 603);
    \u0275\u0275text(5, "\u22EE\u22EE");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "h3");
    \u0275\u0275text(7, "\u{1F517} \uC120\uD0DD\uC9C0\uC5D0 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_15_Template_button_click_8_listener() {
      \u0275\u0275restoreView(_r120);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.closeScenarioLinkPanel());
    });
    \u0275\u0275text(9, "\u2715");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(10, "div", 604)(11, "p");
    \u0275\u0275text(12, "\uC120\uD0DD\uC9C0 ");
    \u0275\u0275elementStart(13, "strong");
    \u0275\u0275text(14);
    \u0275\u0275elementEnd();
    \u0275\u0275text(15, "\uC5D0 \uC5F0\uACB0\uD560 \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uC138\uC694.");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "p", 605);
    \u0275\u0275text(17, "\u{1F4A1} \uC120\uD0DD\uD558\uBA74 \uD574\uB2F9 \uC120\uD0DD\uC9C0\uB97C \uACE0\uB97C \uB54C \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC804\uAC1C\uB429\uB2C8\uB2E4.");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(18, "div", 606)(19, "div", 607);
    \u0275\u0275template(20, NovelGeneratorComponent_div_15_div_20_Template, 15, 6, "div", 150);
    \u0275\u0275elementEnd();
    \u0275\u0275template(21, NovelGeneratorComponent_div_15_div_21_Template, 5, 0, "div", 608);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(14);
    \u0275\u0275textInterpolate1("#", ctx_r2.currentLinkingChoiceIndex + 1);
    \u0275\u0275advance(6);
    \u0275\u0275property("ngForOf", ctx_r2.savedScenarios);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.savedScenarios.length === 0);
  }
}
function NovelGeneratorComponent_div_16_button_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r126 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 654);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_16_button_12_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r126);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleAdvancedFlowPanel());
    });
    \u0275\u0275text(1, " \u26F6 ");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_16_div_70_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 655)(1, "div", 656);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 657)(4, "div", 658);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 659);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.getNodeIcon(ctx_r2.getCurrentNode()));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.getCurrentNode().title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("\uACBD\uB85C: ", ctx_r2.storyProgress.visitedNodes.length, "/", ctx_r2.storyNodes.length);
  }
}
function NovelGeneratorComponent_div_16__svg_path_74_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275namespaceSVG();
    \u0275\u0275element(0, "path", 660);
  }
  if (rf & 2) {
    const conn_r127 = ctx.$implicit;
    \u0275\u0275attribute("d", conn_r127.path)("stroke", conn_r127.color)("stroke-width", conn_r127.width * 0.5);
  }
}
function NovelGeneratorComponent_div_16__svg_g_76_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(0, "g");
    \u0275\u0275element(1, "circle", 661);
    \u0275\u0275elementStart(2, "text", 662);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const node_r128 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275attribute("transform", "translate(" + node_r128.position.x + "," + node_r128.position.y + ")");
    \u0275\u0275advance();
    \u0275\u0275classProp("pulse", node_r128.isCurrent);
    \u0275\u0275attribute("fill", ctx_r2.getNodeColor(node_r128))("stroke", ctx_r2.getNodeBorderColor(node_r128))("stroke-width", node_r128.isCurrent ? 3 : 1.5);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", ctx_r2.getNodeIcon(node_r128), " ");
  }
}
function NovelGeneratorComponent_div_16_div_93_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 667);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    let tmp_5_0;
    const step_r129 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("current", step_r129.nodeId === ctx_r2.currentStoryNodeId);
    \u0275\u0275property("title", ((tmp_5_0 = ctx_r2.getNodeById(step_r129.nodeId)) == null ? null : tmp_5_0.title) || "\uC54C \uC218 \uC5C6\uC74C");
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r2.getNodeIcon(ctx_r2.getNodeById(step_r129.nodeId) || ctx_r2.storyNodes[0]), " ");
  }
}
function NovelGeneratorComponent_div_16_div_93_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 663)(1, "div", 664);
    \u0275\u0275text(2, "\uCD5C\uADFC \uACBD\uB85C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 665);
    \u0275\u0275template(4, NovelGeneratorComponent_div_16_div_93_span_4_Template, 2, 4, "span", 666);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.storyProgress.pathHistory.slice(-8));
  }
}
function NovelGeneratorComponent_div_16_div_95_div_19_div_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 688)(1, "span", 689);
    \u0275\u0275text(2, "\uB0B4\uACF5");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 702);
    \u0275\u0275element(4, "div", 691);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "span", 692);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const member_r131 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275styleProp("width", member_r131.internalPower.current / member_r131.internalPower.max * 100, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", member_r131.internalPower.current, "/", member_r131.internalPower.max);
  }
}
function NovelGeneratorComponent_div_16_div_95_div_19_div_36_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 514)(1, "span", 695);
    \u0275\u0275text(2, "\u2B50");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 696);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const member_r131 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(member_r131.internalPower.realm);
  }
}
function NovelGeneratorComponent_div_16_div_95_div_19_div_37_span_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 705);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const skill_r132 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", skill_r132, " ");
  }
}
function NovelGeneratorComponent_div_16_div_95_div_19_div_37_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 703);
    \u0275\u0275template(1, NovelGeneratorComponent_div_16_div_95_div_19_div_37_span_1_Template, 2, 1, "span", 704);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const member_r131 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", member_r131.skills.slice(0, 3));
  }
}
function NovelGeneratorComponent_div_16_div_95_div_19_div_38_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 706)(1, "p");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const member_r131 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(member_r131.description);
  }
}
function NovelGeneratorComponent_div_16_div_95_div_19_Template(rf, ctx) {
  if (rf & 1) {
    const _r130 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 678);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_16_div_95_div_19_Template_div_click_0_listener() {
      const member_r131 = \u0275\u0275restoreView(_r130).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.selectMember(member_r131));
    });
    \u0275\u0275elementStart(1, "div", 679)(2, "div", 680);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 681)(5, "div", 682)(6, "span", 683);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "span", 684);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(10, "div", 685);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "div", 686);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "div", 687)(15, "div", 688)(16, "span", 689);
    \u0275\u0275text(17, "HP");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "div", 690);
    \u0275\u0275element(19, "div", 691);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "span", 692);
    \u0275\u0275text(21);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(22, NovelGeneratorComponent_div_16_div_95_div_19_div_22_Template, 7, 4, "div", 693);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "div", 694)(24, "div", 514)(25, "span", 695);
    \u0275\u0275text(26, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(27, "span", 696);
    \u0275\u0275text(28);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(29, "div", 514)(30, "span", 695);
    \u0275\u0275text(31, "\u{1F496}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(32, "span", 696);
    \u0275\u0275text(33);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(34, "div", 697);
    \u0275\u0275element(35, "div", 698);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(36, NovelGeneratorComponent_div_16_div_95_div_19_div_36_Template, 5, 1, "div", 699);
    \u0275\u0275elementEnd();
    \u0275\u0275template(37, NovelGeneratorComponent_div_16_div_95_div_19_div_37_Template, 2, 1, "div", 700)(38, NovelGeneratorComponent_div_16_div_95_div_19_div_38_Template, 3, 1, "div", 701);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const member_r131 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("selected", (ctx_r2.selectedMember == null ? null : ctx_r2.selectedMember.id) === member_r131.id);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(member_r131.avatar || "\u{1F464}");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(member_r131.name);
    \u0275\u0275advance();
    \u0275\u0275attribute("data-role", member_r131.role);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r2.getRoleName(member_r131.role), " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("Lv.", member_r131.level, " | ", member_r131.specialty);
    \u0275\u0275advance();
    \u0275\u0275attribute("data-status", member_r131.status);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r2.getStatusName(member_r131.status), " ");
    \u0275\u0275advance(6);
    \u0275\u0275styleProp("width", member_r131.stats.hp / member_r131.stats.maxHp * 100, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", member_r131.stats.hp, "/", member_r131.stats.maxHp);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", member_r131.internalPower);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate2("\uACF5\uACA9 ", member_r131.stats.attack, " | \uBC29\uC5B4 ", member_r131.stats.defense);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("\uCDA9\uC131\uB3C4: ", member_r131.loyalty, "%");
    \u0275\u0275advance(2);
    \u0275\u0275styleProp("width", member_r131.loyalty, "%");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", member_r131.internalPower);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", member_r131.skills && member_r131.skills.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", member_r131.description);
  }
}
function NovelGeneratorComponent_div_16_div_95_div_20_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 707)(1, "p");
    \u0275\u0275text(2, "\uC544\uC9C1 \uC870\uC9C1\uC6D0\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p");
    \u0275\u0275text(4, "\uBAA8\uD5D8\uC744 \uD1B5\uD574 \uB3D9\uB8CC\uB97C \uBAA8\uC9D1\uD558\uC138\uC694!");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_16_div_95_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 668)(1, "div", 669)(2, "div", 670)(3, "h3", 671);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "span", 672);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "div", 673)(8, "div", 674)(9, "span", 268);
    \u0275\u0275text(10, "\uC778\uC6D0");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "span", 272);
    \u0275\u0275text(12);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "div", 674)(14, "span", 268);
    \u0275\u0275text(15, "\uBA85\uC131");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "span", 272);
    \u0275\u0275text(17);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(18, "div", 675);
    \u0275\u0275template(19, NovelGeneratorComponent_div_16_div_95_div_19_Template, 39, 23, "div", 676)(20, NovelGeneratorComponent_div_16_div_95_div_20_Template, 5, 0, "div", 677);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.playerOrganization.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("Lv.", ctx_r2.playerOrganization.level);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate2("", ctx_r2.playerOrganization.members.length, "/", ctx_r2.playerOrganization.maxMembers);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.playerOrganization.reputation);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.playerOrganization.members);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.playerOrganization.members.length === 0);
  }
}
function NovelGeneratorComponent_div_16_div_96_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 708)(1, "p");
    \u0275\u0275text(2, "\uC544\uC9C1 \uC870\uC9C1\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p");
    \u0275\u0275text(4, "\uAC8C\uC784\uC744 \uC2DC\uC791\uD558\uBA74 \uC870\uC9C1\uC774 \uC0DD\uC131\uB429\uB2C8\uB2E4.");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_16_Template(rf, ctx) {
  if (rf & 1) {
    const _r125 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 613)(1, "div", 614)(2, "div", 211)(3, "div", 615)(4, "span", 616);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "span", 617);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 618)(9, "h3");
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "div", 43);
    \u0275\u0275template(12, NovelGeneratorComponent_div_16_button_12_Template, 2, 0, "button", 619);
    \u0275\u0275elementStart(13, "button", 620);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_16_Template_button_click_13_listener() {
      \u0275\u0275restoreView(_r125);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.toggleFlowPanel());
    });
    \u0275\u0275text(14, " \u2715 ");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(15, "div", 621)(16, "div", 622)(17, "div", 623)(18, "div", 140)(19, "div", 304)(20, "span", 306);
    \u0275\u0275text(21, "\u{1F3AD}");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(22, "div", 624)(23, "div", 625);
    \u0275\u0275text(24);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "div", 626);
    \u0275\u0275text(26);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(27, "div", 627)(28, "div", 267)(29, "div", 268)(30, "span", 628);
    \u0275\u0275text(31, "\u2764\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(32, "span", 330);
    \u0275\u0275text(33, "HP");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(34, "div", 629)(35, "div", 630);
    \u0275\u0275element(36, "div", 631);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(37, "span", 272);
    \u0275\u0275text(38);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(39, "div", 267)(40, "div", 268)(41, "span", 632);
    \u0275\u0275text(42, "\u{1F499}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(43, "span", 330);
    \u0275\u0275text(44, "MP");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(45, "div", 629)(46, "div", 633);
    \u0275\u0275element(47, "div", 631);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(48, "span", 272);
    \u0275\u0275text(49);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(50, "div", 634)(51, "div", 635)(52, "span", 328);
    \u0275\u0275text(53, "\u{1F4B0}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(54, "span", 272);
    \u0275\u0275text(55);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(56, "div", 635)(57, "span", 328);
    \u0275\u0275text(58, "\u{1F525}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(59, "span", 272);
    \u0275\u0275text(60);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(61, "div", 636)(62, "div", 268)(63, "span", 328);
    \u0275\u0275text(64, "\u2B50");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(65, "span", 330);
    \u0275\u0275text(66, "\uCD08\uB958");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(67, "div", 637);
    \u0275\u0275text(68);
    \u0275\u0275elementEnd()()()()();
    \u0275\u0275elementStart(69, "div", 638);
    \u0275\u0275template(70, NovelGeneratorComponent_div_16_div_70_Template, 8, 4, "div", 639);
    \u0275\u0275elementStart(71, "div", 640);
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(72, "svg", 641)(73, "g", 642);
    \u0275\u0275template(74, NovelGeneratorComponent_div_16__svg_path_74_Template, 1, 3, "path", 643);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(75, "g", 644);
    \u0275\u0275template(76, NovelGeneratorComponent_div_16__svg_g_76_Template, 4, 7, "g", 112);
    \u0275\u0275elementEnd()()();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(77, "div", 645)(78, "div", 327)(79, "span", 328);
    \u0275\u0275text(80, "\u{1F4CD}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(81, "span", 646);
    \u0275\u0275text(82);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(83, "div", 327)(84, "span", 328);
    \u0275\u0275text(85, "\u{1F500}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(86, "span", 646);
    \u0275\u0275text(87);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(88, "div", 327)(89, "span", 328);
    \u0275\u0275text(90, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(91, "span", 646);
    \u0275\u0275text(92);
    \u0275\u0275elementEnd()()();
    \u0275\u0275template(93, NovelGeneratorComponent_div_16_div_93_Template, 5, 1, "div", 647);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(94, "div", 648);
    \u0275\u0275template(95, NovelGeneratorComponent_div_16_div_95_Template, 21, 7, "div", 649)(96, NovelGeneratorComponent_div_16_div_96_Template, 5, 0, "div", 650);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(97, "div", 651)(98, "button", 348);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_16_Template_button_click_98_listener() {
      \u0275\u0275restoreView(_r125);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.switchFlowTab("character"));
    });
    \u0275\u0275elementStart(99, "span", 652);
    \u0275\u0275text(100, "\u{1F3AD}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(101, "span", 653);
    \u0275\u0275text(102, "\uCE90\uB9AD\uD130");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(103, "button", 348);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_16_Template_button_click_103_listener() {
      \u0275\u0275restoreView(_r125);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.switchFlowTab("organization"));
    });
    \u0275\u0275elementStart(104, "span", 652);
    \u0275\u0275text(105, "\u{1F3DB}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(106, "span", 653);
    \u0275\u0275text(107, "\uC870\uC9C1");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(108, "button", 348);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_16_Template_button_click_108_listener() {
      \u0275\u0275restoreView(_r125);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.switchFlowTab("map"));
    });
    \u0275\u0275elementStart(109, "span", 652);
    \u0275\u0275text(110, "\u{1F5FA}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(111, "span", 653);
    \u0275\u0275text(112, "\uC2A4\uD1A0\uB9AC");
    \u0275\u0275elementEnd()()()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275property("@slideInOut", void 0);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.getCurrentTime());
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", ctx_r2.calculateExplorationRate(), "%");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1(" ", ctx_r2.flowPanelTab === "character" ? "\u{1F3AD} \uCE90\uB9AD\uD130 \uC815\uBCF4" : ctx_r2.flowPanelTab === "organization" ? "\u{1F3DB}\uFE0F \uC870\uC9C1 \uC815\uBCF4" : "\u{1F5FA}\uFE0F \uC2A4\uD1A0\uB9AC \uB9F5", " ");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r2.flowPanelTab === "map");
    \u0275\u0275advance(3);
    \u0275\u0275attribute("data-tab", ctx_r2.flowPanelTab);
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.name || "\uBAA8\uD5D8\uAC00");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("Lv.", ctx_r2.playerCharacter.level || 1);
    \u0275\u0275advance(10);
    \u0275\u0275styleProp("width", ctx_r2.playerCharacter.hp && ctx_r2.playerCharacter.maxHp ? ctx_r2.playerCharacter.hp / ctx_r2.playerCharacter.maxHp * 100 : 100, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", ctx_r2.playerCharacter.hp || 100, "/", ctx_r2.playerCharacter.maxHp || 100);
    \u0275\u0275advance(9);
    \u0275\u0275styleProp("width", ctx_r2.playerCharacter.mp && ctx_r2.playerCharacter.maxMp ? ctx_r2.playerCharacter.mp / ctx_r2.playerCharacter.maxMp * 100 : 100, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", ctx_r2.playerCharacter.mp || 50, "/", ctx_r2.playerCharacter.maxMp || 50);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1("", ctx_r2.gold || 100, "G");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate2("", ctx_r2.playerInternalPower.current || 100, "/", ctx_r2.playerInternalPower.max || 100);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate(ctx_r2.playerInternalPower.realm || "\uCD08\uB958");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r2.getCurrentNode());
    \u0275\u0275advance(2);
    \u0275\u0275attribute("viewBox", ctx_r2.flowViewBox);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.storyConnections);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.visibleNodes);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(ctx_r2.storyProgress.visitedNodes.length);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.storyProgress.totalChoices);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate2("", ctx_r2.storyProgress.battlesWon, "/", ctx_r2.storyProgress.battlesWon + ctx_r2.storyProgress.battlesLost);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.storyProgress.pathHistory.length > 0);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r2.playerOrganization);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.playerOrganization);
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active", ctx_r2.flowPanelTab === "character");
    \u0275\u0275advance(5);
    \u0275\u0275classProp("active", ctx_r2.flowPanelTab === "organization");
    \u0275\u0275advance(5);
    \u0275\u0275classProp("active", ctx_r2.flowPanelTab === "map");
  }
}
function NovelGeneratorComponent_button_17_Template(rf, ctx) {
  if (rf & 1) {
    const _r133 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 709);
    \u0275\u0275listener("click", function NovelGeneratorComponent_button_17_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r133);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.toggleFlowPanel());
    });
    \u0275\u0275elementStart(1, "span", 710);
    \u0275\u0275text(2, "\u{1F5FA}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 711);
    \u0275\u0275text(4, "\uB9F5");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_18_div_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r135 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 720)(1, "div", 721)(2, "button", 722);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_10_Template_button_click_2_listener() {
      \u0275\u0275restoreView(_r135);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.zoomIn());
    });
    \u0275\u0275text(3, " \u{1F50D}+ \uD655\uB300 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 723);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_10_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r135);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.zoomOut());
    });
    \u0275\u0275text(5, " \u{1F50D}\u2212 \uCD95\uC18C ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "button", 724);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_10_Template_button_click_6_listener() {
      \u0275\u0275restoreView(_r135);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.centerView());
    });
    \u0275\u0275text(7, " \u{1F3AF} \uC911\uC559 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "button", 725);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_10_Template_button_click_8_listener() {
      \u0275\u0275restoreView(_r135);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.fitToScreen());
    });
    \u0275\u0275text(9, " \u{1F4D0} \uC804\uCCB4 ");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(10, "div", 721)(11, "button", 726);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_10_Template_button_click_11_listener() {
      \u0275\u0275restoreView(_r135);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleFilter("visited"));
    });
    \u0275\u0275text(12, " \u2705 \uBC29\uBB38 \uACBD\uB85C ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "button", 727);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_10_Template_button_click_13_listener() {
      \u0275\u0275restoreView(_r135);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleFilter("battles"));
    });
    \u0275\u0275text(14, " \u2694\uFE0F \uC804\uD22C ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "button", 728);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_10_Template_button_click_15_listener() {
      \u0275\u0275restoreView(_r135);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleFilter("endings"));
    });
    \u0275\u0275text(16, " \u{1F3C1} \uC5D4\uB529 ");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(17, "div", 721)(18, "select", 729);
    \u0275\u0275twoWayListener("ngModelChange", function NovelGeneratorComponent_div_18_div_10_Template_select_ngModelChange_18_listener($event) {
      \u0275\u0275restoreView(_r135);
      const ctx_r2 = \u0275\u0275nextContext(2);
      \u0275\u0275twoWayBindingSet(ctx_r2.flowLayoutType, $event) || (ctx_r2.flowLayoutType = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275listener("change", function NovelGeneratorComponent_div_18_div_10_Template_select_change_18_listener() {
      \u0275\u0275restoreView(_r135);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.changeLayout(ctx_r2.flowLayoutType));
    });
    \u0275\u0275elementStart(19, "option", 730);
    \u0275\u0275text(20, "\uACC4\uCE35\uD615");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(21, "option", 731);
    \u0275\u0275text(22, "\uBC29\uC0AC\uD615");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "option", 732);
    \u0275\u0275text(24, "\uC790\uC720\uD615");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(25, "div", 721)(26, "button", 733);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_10_Template_button_click_26_listener() {
      \u0275\u0275restoreView(_r135);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleStats());
    });
    \u0275\u0275text(27, " \u{1F4CA} \uD1B5\uACC4 ");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(28, "div", 734)(29, "span", 474);
    \u0275\u0275text(30, "\u{1F4A1} \uB4DC\uB798\uADF8\uB85C \uB178\uB4DC \uC774\uB3D9");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(11);
    \u0275\u0275classProp("active", ctx_r2.showVisitedOnly);
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active", ctx_r2.showBattlesOnly);
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active", ctx_r2.showEndingsOnly);
    \u0275\u0275advance(3);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.flowLayoutType);
    \u0275\u0275advance(8);
    \u0275\u0275classProp("active", ctx_r2.showStats);
  }
}
function NovelGeneratorComponent_div_18_div_11__svg_path_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275namespaceSVG();
    \u0275\u0275element(0, "path", 759);
  }
  if (rf & 2) {
    const conn_r137 = ctx.$implicit;
    \u0275\u0275classProp("visited", conn_r137.isVisited)("current", conn_r137.isCurrent);
    \u0275\u0275attribute("d", conn_r137.path)("stroke", conn_r137.color)("stroke-width", conn_r137.width)("marker-end", conn_r137.isVisited ? "url(#arrowhead-visited)" : "url(#arrowhead)");
  }
}
function NovelGeneratorComponent_div_18_div_11__svg_g_18__svg_circle_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(0, "circle", 768);
    \u0275\u0275element(1, "animate", 769);
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_18_div_11__svg_g_18__svg_circle_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275namespaceSVG();
    \u0275\u0275element(0, "circle", 770);
  }
  if (rf & 2) {
    const node_r139 = \u0275\u0275nextContext().$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275attribute("stroke", ctx_r2.getNodeBorderColor(node_r139));
  }
}
function NovelGeneratorComponent_div_18_div_11__svg_g_18__svg_g_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(0, "g", 771);
    \u0275\u0275element(1, "circle", 772);
    \u0275\u0275elementStart(2, "text", 773);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const node_r139 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1(" ", node_r139.badge, " ");
  }
}
function NovelGeneratorComponent_div_18_div_11__svg_g_18__svg_g_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(0, "g", 774);
    \u0275\u0275element(1, "circle", 775);
    \u0275\u0275elementStart(2, "text", 776);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const node_r139 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1(" ", node_r139.visitCount, " ");
  }
}
function NovelGeneratorComponent_div_18_div_11__svg_g_18_Template(rf, ctx) {
  if (rf & 1) {
    const _r138 = \u0275\u0275getCurrentView();
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(0, "g", 760);
    \u0275\u0275listener("mousedown", function NovelGeneratorComponent_div_18_div_11__svg_g_18_Template_g_mousedown_0_listener($event) {
      const node_r139 = \u0275\u0275restoreView(_r138).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.onNodeMouseDown(node_r139, $event));
    })("click", function NovelGeneratorComponent_div_18_div_11__svg_g_18_Template_g_click_0_listener($event) {
      const node_r139 = \u0275\u0275restoreView(_r138).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.onNodeClick(node_r139, $event));
    });
    \u0275\u0275template(1, NovelGeneratorComponent_div_18_div_11__svg_g_18__svg_circle_1_Template, 2, 0, "circle", 761);
    \u0275\u0275element(2, "circle", 762);
    \u0275\u0275template(3, NovelGeneratorComponent_div_18_div_11__svg_g_18__svg_circle_3_Template, 1, 1, "circle", 763);
    \u0275\u0275elementStart(4, "text", 764);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "text", 765);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275template(8, NovelGeneratorComponent_div_18_div_11__svg_g_18__svg_g_8_Template, 4, 1, "g", 766)(9, NovelGeneratorComponent_div_18_div_11__svg_g_18__svg_g_9_Template, 4, 1, "g", 767);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const node_r139 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("current", node_r139.isCurrent)("visited", node_r139.isVisited)("available", node_r139.isAvailable)("selected", (ctx_r2.selectedNode == null ? null : ctx_r2.selectedNode.id) === node_r139.id)("dragging", (ctx_r2.draggingNode == null ? null : ctx_r2.draggingNode.id) === node_r139.id)("battle", node_r139.type === "battle")("ending", node_r139.type === "ending")("event", node_r139.type === "event");
    \u0275\u0275attribute("transform", "translate(" + node_r139.position.x + "," + node_r139.position.y + ")");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", (ctx_r2.selectedNode == null ? null : ctx_r2.selectedNode.id) === node_r139.id);
    \u0275\u0275advance();
    \u0275\u0275attribute("fill", ctx_r2.getNodeColor(node_r139))("stroke", ctx_r2.getNodeBorderColor(node_r139));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", node_r139.isCurrent);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", ctx_r2.getNodeIcon(node_r139), " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", node_r139.title.length > 12 ? node_r139.title.substring(0, 12) + "..." : node_r139.title, " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", node_r139.badge);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", node_r139.visitCount && node_r139.visitCount > 1);
  }
}
function NovelGeneratorComponent_div_18_div_11_Template(rf, ctx) {
  if (rf & 1) {
    const _r136 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 735);
    \u0275\u0275listener("mousedown", function NovelGeneratorComponent_div_18_div_11_Template_div_mousedown_0_listener($event) {
      \u0275\u0275restoreView(_r136);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onCanvasMouseDown($event));
    })("mousemove", function NovelGeneratorComponent_div_18_div_11_Template_div_mousemove_0_listener($event) {
      \u0275\u0275restoreView(_r136);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onCanvasMouseMove($event));
    })("mouseup", function NovelGeneratorComponent_div_18_div_11_Template_div_mouseup_0_listener() {
      \u0275\u0275restoreView(_r136);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onCanvasMouseUp());
    })("mouseleave", function NovelGeneratorComponent_div_18_div_11_Template_div_mouseleave_0_listener() {
      \u0275\u0275restoreView(_r136);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onCanvasMouseUp());
    })("wheel", function NovelGeneratorComponent_div_18_div_11_Template_div_wheel_0_listener($event) {
      \u0275\u0275restoreView(_r136);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onCanvasWheel($event));
    });
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(1, "svg", 736)(2, "defs")(3, "marker", 737);
    \u0275\u0275element(4, "polygon", 738);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "marker", 739);
    \u0275\u0275element(6, "polygon", 740);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "marker", 741);
    \u0275\u0275element(8, "polygon", 742);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "marker", 743);
    \u0275\u0275element(10, "polygon", 744);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "pattern", 745);
    \u0275\u0275element(12, "path", 746);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "g");
    \u0275\u0275element(14, "rect", 747);
    \u0275\u0275elementStart(15, "g", 748);
    \u0275\u0275template(16, NovelGeneratorComponent_div_18_div_11__svg_path_16_Template, 1, 8, "path", 749);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "g", 750);
    \u0275\u0275template(18, NovelGeneratorComponent_div_18_div_11__svg_g_18_Template, 10, 25, "g", 751);
    \u0275\u0275elementEnd()()();
    \u0275\u0275namespaceHTML();
    \u0275\u0275elementStart(19, "div", 752)(20, "button", 753);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_11_Template_button_click_20_listener() {
      \u0275\u0275restoreView(_r136);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.zoomIn());
    });
    \u0275\u0275elementStart(21, "span");
    \u0275\u0275text(22, "\u{1F50D}+");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(23, "div", 754);
    \u0275\u0275text(24);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "button", 755);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_11_Template_button_click_25_listener() {
      \u0275\u0275restoreView(_r136);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.zoomOut());
    });
    \u0275\u0275elementStart(26, "span");
    \u0275\u0275text(27, "\u{1F50D}-");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(28, "button", 756);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_11_Template_button_click_28_listener() {
      \u0275\u0275restoreView(_r136);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.resetZoom());
    });
    \u0275\u0275elementStart(29, "span");
    \u0275\u0275text(30, "\u27F2");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(31, "button", 757);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_11_Template_button_click_31_listener() {
      \u0275\u0275restoreView(_r136);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.focusOnCurrentNode());
    });
    \u0275\u0275elementStart(32, "span");
    \u0275\u0275text(33, "\u{1F4CD}");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(34, "div", 758)(35, "div", 584)(36, "span", 318);
    \u0275\u0275text(37, "\u{1F3AC}");
    \u0275\u0275elementEnd();
    \u0275\u0275text(38, " \uC2DC\uC791");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(39, "div", 584)(40, "span", 318);
    \u0275\u0275text(41, "\u{1F4D6}");
    \u0275\u0275elementEnd();
    \u0275\u0275text(42, " \uC2A4\uD1A0\uB9AC");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(43, "div", 584)(44, "span", 318);
    \u0275\u0275text(45, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275text(46, " \uC804\uD22C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(47, "div", 584)(48, "span", 318);
    \u0275\u0275text(49, "\u2728");
    \u0275\u0275elementEnd();
    \u0275\u0275text(50, " \uC774\uBCA4\uD2B8");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(51, "div", 584)(52, "span", 318);
    \u0275\u0275text(53, "\u{1F3C1}");
    \u0275\u0275elementEnd();
    \u0275\u0275text(54, " \uC5D4\uB529");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275attribute("width", "100%")("height", "100%");
    \u0275\u0275advance(12);
    \u0275\u0275attribute("transform", ctx_r2.getCanvasTransform());
    \u0275\u0275advance(3);
    \u0275\u0275property("ngForOf", ctx_r2.storyConnections);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.visibleNodes);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1("", (ctx_r2.flowZoomLevel * 100).toFixed(0), "%");
  }
}
function NovelGeneratorComponent_div_18_div_12_div_10_p_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const line_r141 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(line_r141);
  }
}
function NovelGeneratorComponent_div_18_div_12_div_10_p_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p", 789);
    \u0275\u0275text(1, "... \uB354\uBCF4\uAE30");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_18_div_12_div_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 787)(1, "h4");
    \u0275\u0275text(2, "\u{1F4D6} \uB0B4\uC6A9 \uBBF8\uB9AC\uBCF4\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275template(3, NovelGeneratorComponent_div_18_div_12_div_10_p_3_Template, 2, 1, "p", 112)(4, NovelGeneratorComponent_div_18_div_12_div_10_p_4_Template, 2, 0, "p", 788);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(3);
    \u0275\u0275property("ngForOf", ctx_r2.selectedNode.content.slice(0, 3));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedNode.content.length > 3);
  }
}
function NovelGeneratorComponent_div_18_div_12_div_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 790)(1, "h4");
    \u0275\u0275text(2, "\u{1F4CA} \uD1B5\uACC4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 267)(4, "span", 268);
    \u0275\u0275text(5, "\uBC29\uBB38 \uD69F\uC218:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "span", 272);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate(ctx_r2.selectedNode.visitCount || 1);
  }
}
function NovelGeneratorComponent_div_18_div_12_div_12_li_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "li");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const cond_r142 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", cond_r142.description || cond_r142.type, " ");
  }
}
function NovelGeneratorComponent_div_18_div_12_div_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 791)(1, "h4");
    \u0275\u0275text(2, "\u{1F512} \uC9C4\uC785 \uC870\uAC74");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "ul");
    \u0275\u0275template(4, NovelGeneratorComponent_div_18_div_12_div_12_li_4_Template, 2, 1, "li", 112);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.selectedNode.conditions);
  }
}
function NovelGeneratorComponent_div_18_div_12_div_13_div_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 598)(1, "span", 793);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 293);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const choice_r143 = ctx.$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(choice_r143.icon || "\u25B6\uFE0F");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(choice_r143.text);
  }
}
function NovelGeneratorComponent_div_18_div_12_div_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 792)(1, "h4");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275template(3, NovelGeneratorComponent_div_18_div_12_div_13_div_3_Template, 5, 2, "div", 597);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F500} \uC120\uD0DD\uC9C0 (", ctx_r2.selectedNode.choices.length, "\uAC1C)");
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r2.selectedNode.choices);
  }
}
function NovelGeneratorComponent_div_18_div_12_div_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 794)(1, "h4");
    \u0275\u0275text(2, "\u2694\uFE0F \uC804\uD22C \uC815\uBCF4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p")(4, "strong");
    \u0275\u0275text(5, "\uC801:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "p")(8, "strong");
    \u0275\u0275text(9, "\uB09C\uC774\uB3C4:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", ctx_r2.selectedNode.battleConfig.enemyName);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", "\u2B50".repeat(ctx_r2.selectedNode.battleConfig.difficulty));
  }
}
function NovelGeneratorComponent_div_18_div_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r140 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 777)(1, "div", 778)(2, "h3");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 779);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_12_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r140);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.selectedNode = null);
    });
    \u0275\u0275text(5, "\u2715");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 780)(7, "div", 781)(8, "span", 566);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(10, NovelGeneratorComponent_div_18_div_12_div_10_Template, 5, 2, "div", 782)(11, NovelGeneratorComponent_div_18_div_12_div_11_Template, 8, 1, "div", 783)(12, NovelGeneratorComponent_div_18_div_12_div_12_Template, 5, 1, "div", 784)(13, NovelGeneratorComponent_div_18_div_12_div_13_Template, 4, 2, "div", 785)(14, NovelGeneratorComponent_div_18_div_12_div_14_Template, 11, 2, "div", 786);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.selectedNode.title);
    \u0275\u0275advance(5);
    \u0275\u0275classProp("battle", ctx_r2.selectedNode.type === "battle")("ending", ctx_r2.selectedNode.type === "ending")("event", ctx_r2.selectedNode.type === "event");
    \u0275\u0275advance();
    \u0275\u0275textInterpolate2(" ", ctx_r2.getNodeIcon(ctx_r2.selectedNode), " ", ctx_r2.selectedNode.type, " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedNode.content && ctx_r2.selectedNode.content.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedNode.isVisited);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedNode.conditions && ctx_r2.selectedNode.conditions.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedNode.choices && ctx_r2.selectedNode.choices.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedNode.type === "battle" && ctx_r2.selectedNode.battleConfig);
  }
}
function NovelGeneratorComponent_div_18_div_13_div_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 799)(1, "h4");
    \u0275\u0275text(2, "\u{1F4CD} \uD604\uC7AC \uC704\uCE58");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 800)(4, "div", 801);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 802)(7, "div", 803);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "div", 804);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.getNodeIcon(ctx_r2.getCurrentNode()));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.getCurrentNode().title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\uACBD\uB85C: ", ctx_r2.currentPath.join(" \u2192 ") || "\uC2DC\uC791");
  }
}
function NovelGeneratorComponent_div_18_div_13_div_33_div_4_ng_container_1_span_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 812);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const step_r144 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2192 ", step_r144.choiceText);
  }
}
function NovelGeneratorComponent_div_18_div_13_div_33_div_4_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementContainerStart(0);
    \u0275\u0275elementStart(1, "span", 809);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 810);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275template(5, NovelGeneratorComponent_div_18_div_13_div_33_div_4_ng_container_1_span_5_Template, 2, 1, "span", 811);
    \u0275\u0275elementContainerEnd();
  }
  if (rf & 2) {
    const node_r145 = ctx.ngIf;
    const step_r144 = \u0275\u0275nextContext().$implicit;
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.getNodeIcon(node_r145));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(node_r145.title);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", step_r144.choiceText);
  }
}
function NovelGeneratorComponent_div_18_div_13_div_33_div_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 808);
    \u0275\u0275template(1, NovelGeneratorComponent_div_18_div_13_div_33_div_4_ng_container_1_Template, 6, 3, "ng-container", 97);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const step_r144 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.getNodeById(step_r144.nodeId));
  }
}
function NovelGeneratorComponent_div_18_div_13_div_33_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 805)(1, "h4");
    \u0275\u0275text(2, "\u{1F6E4}\uFE0F \uCD5C\uADFC \uACBD\uB85C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 806);
    \u0275\u0275template(4, NovelGeneratorComponent_div_18_div_13_div_33_div_4_Template, 2, 1, "div", 807);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r2.storyProgress.pathHistory.slice(-5).reverse());
  }
}
function NovelGeneratorComponent_div_18_div_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 795)(1, "h3");
    \u0275\u0275text(2, "\u{1F4CA} \uC9C4\uD589 \uD1B5\uACC4");
    \u0275\u0275elementEnd();
    \u0275\u0275template(3, NovelGeneratorComponent_div_18_div_13_div_3_Template, 11, 3, "div", 796);
    \u0275\u0275elementStart(4, "div", 326)(5, "div", 797)(6, "div", 328);
    \u0275\u0275text(7, "\u{1F4CD}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "div", 272);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "div", 268);
    \u0275\u0275text(11, "\uBC29\uBB38\uD55C \uB178\uB4DC");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "div", 797)(13, "div", 328);
    \u0275\u0275text(14, "\u{1F500}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "div", 272);
    \u0275\u0275text(16);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "div", 268);
    \u0275\u0275text(18, "\uC120\uD0DD \uD69F\uC218");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(19, "div", 797)(20, "div", 328);
    \u0275\u0275text(21, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "div", 272);
    \u0275\u0275text(23);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(24, "div", 268);
    \u0275\u0275text(25, "\uC804\uD22C \uC2B9\uB960");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(26, "div", 797)(27, "div", 328);
    \u0275\u0275text(28, "\u{1F5FA}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(29, "div", 272);
    \u0275\u0275text(30);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(31, "div", 268);
    \u0275\u0275text(32, "\uD0D0\uD5D8\uB960");
    \u0275\u0275elementEnd()()();
    \u0275\u0275template(33, NovelGeneratorComponent_div_18_div_13_div_33_Template, 5, 1, "div", 798);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.getCurrentNode());
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate2("", ctx_r2.storyProgress.visitedNodes.length, "/", ctx_r2.storyNodes.length);
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate(ctx_r2.storyProgress.totalChoices);
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate2(" ", ctx_r2.storyProgress.battlesWon, "/", ctx_r2.storyProgress.battlesWon + ctx_r2.storyProgress.battlesLost, " ");
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate1("", ctx_r2.calculateExplorationRate(), "%");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.storyProgress.pathHistory.length > 0);
  }
}
function NovelGeneratorComponent_div_18_div_14_Template(rf, ctx) {
  if (rf & 1) {
    const _r146 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 813)(1, "div", 405);
    \u0275\u0275text(2, "\u{1F5FA}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "h3");
    \u0275\u0275text(4, "\uC2A4\uD1A0\uB9AC \uB9F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "p");
    \u0275\u0275text(6, "\uC0D8\uD50C \uC2A4\uD1A0\uB9AC\uB97C \uB85C\uB4DC\uD558\uAC70\uB098 AI\uB85C \uC0C8\uB85C\uC6B4 \uC2A4\uD1A0\uB9AC\uB97C \uC0DD\uC131\uD558\uC138\uC694.");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "div", 814)(8, "button", 815);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_14_Template_button_click_8_listener() {
      \u0275\u0275restoreView(_r146);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.loadSampleStoryMap());
    });
    \u0275\u0275text(9, " \u{1F4E5} \uC0D8\uD50C \uC2A4\uD1A0\uB9AC \uB85C\uB4DC ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "button", 816);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_div_14_Template_button_click_10_listener() {
      \u0275\u0275restoreView(_r146);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.toggleStoryCreatorPanel());
    });
    \u0275\u0275text(11, " \u2728 AI \uC2A4\uD1A0\uB9AC \uC0DD\uC131 ");
    \u0275\u0275elementEnd()()();
  }
}
function NovelGeneratorComponent_div_18_Template(rf, ctx) {
  if (rf & 1) {
    const _r134 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 712)(1, "div", 713)(2, "div", 714)(3, "div", 119)(4, "h2");
    \u0275\u0275text(5, "\u{1F5FA}\uFE0F \uBE44\uC120\uD615 \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "span", 42);
    \u0275\u0275text(7, "\uC120\uD0DD\uACFC \uC804\uD22C\uAC00 \uB9CC\uB4DC\uB294 \uB2F9\uC2E0\uB9CC\uC758 \uC5EC\uC815");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_18_Template_button_click_8_listener() {
      \u0275\u0275restoreView(_r134);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.toggleAdvancedFlowPanel());
    });
    \u0275\u0275text(9, " \u2715 ");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(10, NovelGeneratorComponent_div_18_div_10_Template, 31, 9, "div", 715)(11, NovelGeneratorComponent_div_18_div_11_Template, 55, 6, "div", 716)(12, NovelGeneratorComponent_div_18_div_12_Template, 15, 14, "div", 717)(13, NovelGeneratorComponent_div_18_div_13_Template, 34, 8, "div", 718)(14, NovelGeneratorComponent_div_18_div_14_Template, 12, 0, "div", 719);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(10);
    \u0275\u0275property("ngIf", ctx_r2.storyNodes.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.storyNodes.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedNode);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.showStats && ctx_r2.storyNodes.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.storyNodes.length === 0);
  }
}
function NovelGeneratorComponent_div_19_div_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 822)(1, "div", 823);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 824)(4, "h4");
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "p", 825);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const node_r148 = ctx.ngIf;
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.getNodeIcon(node_r148));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(node_r148.title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(node_r148.type);
  }
}
function NovelGeneratorComponent_div_19_div_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 826)(1, "span", 827);
    \u0275\u0275text(2, "\uC120\uD0DD\uC9C0 ID:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 828);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.currentLinkingChoiceId);
  }
}
function NovelGeneratorComponent_div_19_div_17_span_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 830);
    \u0275\u0275text(1, " \u2713 \uC5F0\uACB0\uB428 ");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_19_div_17_div_15_span_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 159);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const tag_r151 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(tag_r151);
  }
}
function NovelGeneratorComponent_div_19_div_17_div_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 157);
    \u0275\u0275template(1, NovelGeneratorComponent_div_19_div_17_div_15_span_1_Template, 2, 1, "span", 158);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const scenario_r150 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", scenario_r150.tags.slice(0, 3));
  }
}
function NovelGeneratorComponent_div_19_div_17_Template(rf, ctx) {
  if (rf & 1) {
    const _r149 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 151);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_19_div_17_Template_div_click_0_listener() {
      const scenario_r150 = \u0275\u0275restoreView(_r149).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.linkScenarioToFlowNode(scenario_r150.id));
    });
    \u0275\u0275elementStart(1, "div", 152)(2, "h4");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 609);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275template(6, NovelGeneratorComponent_div_19_div_17_span_6_Template, 2, 0, "span", 829);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "div", 610)(8, "p", 534);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "div", 155)(11, "span", 110);
    \u0275\u0275text(12);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "span", 110);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(15, NovelGeneratorComponent_div_19_div_17_div_15_Template, 2, 1, "div", 154);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const scenario_r150 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275classProp("linked", ctx_r2.getLinkedScenarioId(ctx_r2.currentLinkingNodeId, ctx_r2.currentLinkingChoiceId) === scenario_r150.id);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(scenario_r150.title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(scenario_r150.genre);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.getLinkedScenarioId(ctx_r2.currentLinkingNodeId, ctx_r2.currentLinkingChoiceId) === scenario_r150.id);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(scenario_r150.description);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("\u{1F4CD} ", scenario_r150.setting);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F3AD} ", scenario_r150.mood);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", scenario_r150.tags && scenario_r150.tags.length > 0);
  }
}
function NovelGeneratorComponent_div_19_div_18_Template(rf, ctx) {
  if (rf & 1) {
    const _r152 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 611)(1, "div", 405);
    \u0275\u0275text(2, "\u{1F3AC}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p");
    \u0275\u0275text(4, "\uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "button", 612);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_19_div_18_Template_button_click_5_listener() {
      \u0275\u0275restoreView(_r152);
      const ctx_r2 = \u0275\u0275nextContext(2);
      ctx_r2.openScenarioCreator();
      return \u0275\u0275resetView(ctx_r2.closeFlowScenarioLinkPanel());
    });
    \u0275\u0275text(6, " \u2728 \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30 ");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_19_Template(rf, ctx) {
  if (rf & 1) {
    const _r147 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 817)(1, "div", 818)(2, "div", 602)(3, "div", 119)(4, "span", 603);
    \u0275\u0275text(5, "\u22EE\u22EE");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "h3");
    \u0275\u0275text(7, "\u{1F3AC} \uD50C\uB85C\uC6B0 \uB178\uB4DC\uC5D0 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_19_Template_button_click_8_listener() {
      \u0275\u0275restoreView(_r147);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.closeFlowScenarioLinkPanel());
    });
    \u0275\u0275text(9, "\u2715");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(10, "div", 604);
    \u0275\u0275template(11, NovelGeneratorComponent_div_19_div_11_Template, 8, 3, "div", 819)(12, NovelGeneratorComponent_div_19_div_12_Template, 5, 1, "div", 820);
    \u0275\u0275elementStart(13, "p", 605);
    \u0275\u0275text(14, "\u{1F4A1} \uC774 \uC120\uD0DD\uC9C0\uC5D0 \uC5F0\uACB0\uD560 \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uC138\uC694.");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(15, "div", 606)(16, "div", 607);
    \u0275\u0275template(17, NovelGeneratorComponent_div_19_div_17_Template, 16, 9, "div", 821);
    \u0275\u0275elementEnd();
    \u0275\u0275template(18, NovelGeneratorComponent_div_19_div_18_Template, 7, 0, "div", 608);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(11);
    \u0275\u0275property("ngIf", ctx_r2.getNodeById(ctx_r2.currentLinkingNodeId));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.currentLinkingChoiceId);
    \u0275\u0275advance(5);
    \u0275\u0275property("ngForOf", ctx_r2.savedScenarios);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.savedScenarios.length === 0);
  }
}
function NovelGeneratorComponent_div_20_div_20_Template(rf, ctx) {
  if (rf & 1) {
    const _r154 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 351)(1, "div", 835)(2, "h3");
    \u0275\u0275text(3, "\u5167\u529F\u4FEE\u7149 (\uB0B4\uACF5\uC218\uB828)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 836)(5, "div", 837)(6, "span", 838);
    \u0275\u0275text(7, "\u5167\u529B (\uB0B4\uB825)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "span", 839);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(10, "div", 840);
    \u0275\u0275element(11, "div", 841);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "div", 842)(13, "span");
    \u0275\u0275text(14);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "span");
    \u0275\u0275text(16);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "span");
    \u0275\u0275text(18);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(19, "div", 843)(20, "div", 844)(21, "span", 845);
    \u0275\u0275text(22, "\u2B50");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "div", 846)(24, "span", 847);
    \u0275\u0275text(25);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(26, "span", 848);
    \u0275\u0275text(27, "\u5883\u754C (\uACBD\uC9C0)");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(28, "div", 849)(29, "span", 850);
    \u0275\u0275text(30, "\uB3CC\uD30C \uC9C4\uD589\uB3C4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(31, "div", 851);
    \u0275\u0275element(32, "div", 313);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(33, "span", 852);
    \u0275\u0275text(34);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(35, "div", 853)(36, "button", 854);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_div_20_Template_button_click_36_listener() {
      \u0275\u0275restoreView(_r154);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.cultivateInternalPower(1));
    });
    \u0275\u0275elementStart(37, "span", 468);
    \u0275\u0275text(38, "\u{1F9D8}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(39, "span", 855);
    \u0275\u0275text(40, "1\uC2DC\uAC04 \uC218\uB828");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(41, "button", 854);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_div_20_Template_button_click_41_listener() {
      \u0275\u0275restoreView(_r154);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.cultivateInternalPower(4));
    });
    \u0275\u0275elementStart(42, "span", 468);
    \u0275\u0275text(43, "\u{1F9D8}\u200D\u2642\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(44, "span", 855);
    \u0275\u0275text(45, "4\uC2DC\uAC04 \uC218\uB828");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(46, "button", 854);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_div_20_Template_button_click_46_listener() {
      \u0275\u0275restoreView(_r154);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.cultivateInternalPower(12));
    });
    \u0275\u0275elementStart(47, "span", 468);
    \u0275\u0275text(48, "\u{1F9D8}\u200D\u2640\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(49, "span", 855);
    \u0275\u0275text(50, "12\uC2DC\uAC04 \uC218\uB828");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(51, "div", 856)(52, "span", 857);
    \u0275\u0275text(53, "\u4FEE\u7DF4\u5EA6 (\uC218\uB828\uB3C4)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(54, "div", 858);
    \u0275\u0275element(55, "div", 859);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(56, "span", 860);
    \u0275\u0275text(57);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate2("", ctx_r2.playerInternalPower.current, " / ", ctx_r2.playerInternalPower.max);
    \u0275\u0275advance(2);
    \u0275\u0275styleProp("width", ctx_r2.playerInternalPower.current / ctx_r2.playerInternalPower.max * 100, "%");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("\uD68C\uBCF5 \uC18D\uB3C4: ", ctx_r2.playerInternalPower.recoveryRate, "/\uD134");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\uC21C\uB3C4: ", ctx_r2.playerInternalPower.purity, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\uC548\uC815\uC131: ", ctx_r2.playerInternalPower.stability, "%");
    \u0275\u0275advance(2);
    \u0275\u0275classMap("realm-" + ctx_r2.playerInternalPower.realm);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.playerInternalPower.realm);
    \u0275\u0275advance(7);
    \u0275\u0275styleProp("width", ctx_r2.playerInternalPower.realmProgress, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", ctx_r2.playerInternalPower.realmProgress, "%");
    \u0275\u0275advance(21);
    \u0275\u0275styleProp("width", ctx_r2.playerInternalPower.trainingLevel, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", ctx_r2.playerInternalPower.trainingLevel, "%");
  }
}
function NovelGeneratorComponent_div_20_div_21_div_8_span_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 879);
    \u0275\u0275text(1, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_20_div_21_div_8_span_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 879);
    \u0275\u0275text(1, "\u{1F4FF}");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_20_div_21_div_8_span_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 879);
    \u0275\u0275text(1, "\u{1F985}");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_20_div_21_div_8_span_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 879);
    \u0275\u0275text(1, "\u{1F5E1}\uFE0F");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_20_div_21_div_8_div_42_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 880)(1, "span", 881);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 882);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const skill_r155 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275classMap("element-" + skill_r155.element);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", skill_r155.element === "fire" ? "\u{1F525}" : skill_r155.element === "ice" ? "\u2744\uFE0F" : skill_r155.element === "wind" ? "\u{1F32A}\uFE0F" : skill_r155.element === "thunder" ? "\u26A1" : "\u2620\uFE0F", " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(skill_r155.element);
  }
}
function NovelGeneratorComponent_div_20_div_21_div_8_div_43_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 883)(1, "span", 884);
    \u0275\u0275text(2, "\uC18C\uC18D:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 885);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const skill_r155 = \u0275\u0275nextContext().$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.getFactionName(skill_r155.factionId));
  }
}
function NovelGeneratorComponent_div_20_div_21_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 865)(1, "div", 866)(2, "div", 867)(3, "h4", 868);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "p", 869);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "span", 870);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 871);
    \u0275\u0275template(10, NovelGeneratorComponent_div_20_div_21_div_8_span_10_Template, 2, 0, "span", 872)(11, NovelGeneratorComponent_div_20_div_21_div_8_span_11_Template, 2, 0, "span", 872)(12, NovelGeneratorComponent_div_20_div_21_div_8_span_12_Template, 2, 0, "span", 872)(13, NovelGeneratorComponent_div_20_div_21_div_8_span_13_Template, 2, 0, "span", 872);
    \u0275\u0275elementStart(14, "span", 873);
    \u0275\u0275text(15);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(16, "div", 874)(17, "div", 267)(18, "span", 268);
    \u0275\u0275text(19, "\uC18C\uBAA8 \uB0B4\uB825:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "span", 272);
    \u0275\u0275text(21);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(22, "div", 267)(23, "span", 268);
    \u0275\u0275text(24, "\uC704\uB825:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "span", 272);
    \u0275\u0275text(26);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(27, "div", 267)(28, "span", 268);
    \u0275\u0275text(29, "\uBA85\uC911\uB960:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(30, "span", 272);
    \u0275\u0275text(31);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(32, "div", 267)(33, "span", 268);
    \u0275\u0275text(34, "\uCE58\uBA85\uD0C0:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(35, "span", 272);
    \u0275\u0275text(36);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(37, "div", 875)(38, "p");
    \u0275\u0275text(39);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(40, "p", 876);
    \u0275\u0275text(41);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(42, NovelGeneratorComponent_div_20_div_21_div_8_div_42_Template, 5, 4, "div", 877)(43, NovelGeneratorComponent_div_20_div_21_div_8_div_43_Template, 5, 1, "div", 878);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const skill_r155 = ctx.$implicit;
    \u0275\u0275classMap("grade-" + skill_r155.grade);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(skill_r155.chineseName);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(skill_r155.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(skill_r155.grade);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", skill_r155.type === "choShik");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", skill_r155.type === "shimBeop");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", skill_r155.type === "gyeongGong");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", skill_r155.type === "amGi");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", skill_r155.type === "choShik" ? "\uCD08\uC2DD" : skill_r155.type === "shimBeop" ? "\uC2EC\uBC95" : skill_r155.type === "gyeongGong" ? "\uACBD\uACF5" : "\uC554\uAE30", " ");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(skill_r155.internalPowerCost);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("\xD7", skill_r155.damageMultiplier);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("", (skill_r155.hitRate * 100).toFixed(0), "%");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("", (skill_r155.criticalRate * 100).toFixed(0), "%");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(skill_r155.description);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(skill_r155.skillEffect);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", skill_r155.element);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", skill_r155.factionId);
  }
}
function NovelGeneratorComponent_div_20_div_21_div_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 886)(1, "p");
    \u0275\u0275text(2, "\uC544\uC9C1 \uC2B5\uB4DD\uD55C \uBB34\uACF5\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p");
    \u0275\u0275text(4, "\uBB38\uD30C\uC5D0 \uC785\uBB38\uD558\uAC70\uB098 \uBB34\uACF5 \uBE44\uAE09\uC744 \uC5BB\uC73C\uC138\uC694!");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_20_div_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 351)(1, "div", 340)(2, "h3");
    \u0275\u0275text(3, "\u6B66\u529F\u62DB\u5F0F (\uBB34\uACF5\uCD08\uC2DD)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 861)(5, "span");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "div", 862);
    \u0275\u0275template(8, NovelGeneratorComponent_div_20_div_21_div_8_Template, 44, 18, "div", 863);
    \u0275\u0275elementEnd();
    \u0275\u0275template(9, NovelGeneratorComponent_div_20_div_21_div_9_Template, 5, 0, "div", 864);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1("\uC2B5\uB4DD\uD55C \uBB34\uACF5: ", ctx_r2.learnedMartialSkills.length, "\uAC1C");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.learnedMartialSkills);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.learnedMartialSkills.length === 0);
  }
}
function NovelGeneratorComponent_div_20_div_22_div_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 890)(1, "div", 891)(2, "div", 892)(3, "h4");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "p", 893);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "div", 894);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "div", 895)(10, "p");
    \u0275\u0275text(11);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "p")(13, "strong");
    \u0275\u0275text(14, "\uBCF8\uAC70\uC9C0:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(15);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "p")(17, "strong");
    \u0275\u0275text(18, "\uCC3D\uC2DC\uC790:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(19);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(20, "div", 896)(21, "span");
    \u0275\u0275text(22, "\uD3C9\uD310:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "div", 897);
    \u0275\u0275element(24, "div", 898);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "span");
    \u0275\u0275text(26);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.playerFaction.chineseName);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.playerFaction.name);
    \u0275\u0275advance();
    \u0275\u0275classMap("type-" + ctx_r2.playerFaction.type);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r2.playerFaction.type === "righteous" ? "\u6B63\u6D3E" : ctx_r2.playerFaction.type === "evil" ? "\u9B54\u654E" : "\u4E2D\u7ACB", " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.playerFaction.description);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r2.playerFaction.headquarters);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r2.playerFaction.founder);
    \u0275\u0275advance(5);
    \u0275\u0275styleProp("width", (ctx_r2.playerFaction.reputation + 1e3) / 2e3 * 100 + "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.playerFaction.reputation);
  }
}
function NovelGeneratorComponent_div_20_div_22_div_5_div_6_span_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 906);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const specialty_r157 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", specialty_r157, " ");
  }
}
function NovelGeneratorComponent_div_20_div_22_div_5_div_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r156 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 902)(1, "div", 892)(2, "h4");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "p", 893);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 894);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "div", 895)(9, "p");
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "p")(12, "strong");
    \u0275\u0275text(13, "\uBCF8\uAC70\uC9C0:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(14);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(15, "div", 903);
    \u0275\u0275template(16, NovelGeneratorComponent_div_20_div_22_div_5_div_6_span_16_Template, 2, 1, "span", 904);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "button", 905);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_div_22_div_5_div_6_Template_button_click_17_listener() {
      const faction_r158 = \u0275\u0275restoreView(_r156).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r2.joinFaction(faction_r158.id));
    });
    \u0275\u0275text(18, " \uC785\uBB38\uD558\uAE30 ");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const faction_r158 = ctx.$implicit;
    \u0275\u0275classMap("type-" + faction_r158.type);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(faction_r158.chineseName);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(faction_r158.name);
    \u0275\u0275advance();
    \u0275\u0275classMap("type-" + faction_r158.type);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", faction_r158.type === "righteous" ? "\u6B63\u6D3E" : faction_r158.type === "evil" ? "\u9B54\u654E" : "\u4E2D\u7ACB", " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(faction_r158.description);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", faction_r158.headquarters);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", faction_r158.specialties);
  }
}
function NovelGeneratorComponent_div_20_div_22_div_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 899)(1, "p");
    \u0275\u0275text(2, "\uC544\uC9C1 \uBB38\uD30C\uC5D0 \uC18C\uC18D\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "h4");
    \u0275\u0275text(4, "\uC785\uBB38 \uAC00\uB2A5\uD55C \uBB38\uD30C:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 900);
    \u0275\u0275template(6, NovelGeneratorComponent_div_20_div_22_div_5_div_6_Template, 19, 10, "div", 901);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(6);
    \u0275\u0275property("ngForOf", ctx_r2.availableFactions);
  }
}
function NovelGeneratorComponent_div_20_div_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 351)(1, "div", 887)(2, "h3");
    \u0275\u0275text(3, "\u9580\u6D3E (\uBB38\uD30C)");
    \u0275\u0275elementEnd();
    \u0275\u0275template(4, NovelGeneratorComponent_div_20_div_22_div_4_Template, 27, 11, "div", 888)(5, NovelGeneratorComponent_div_20_div_22_div_5_Template, 7, 1, "div", 889);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngIf", ctx_r2.playerFaction);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.playerFaction);
  }
}
function NovelGeneratorComponent_div_20_div_23_div_5_span_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 926);
    \u0275\u0275text(1, "\u2B50");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_20_div_23_div_5_div_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 465)(1, "span", 466);
    \u0275\u0275text(2, "\u2728");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 467);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const effect_r160 = ctx.$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(effect_r160.description);
  }
}
function NovelGeneratorComponent_div_20_div_23_div_5_div_19_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 927)(1, "span", 928);
    \u0275\u0275text(2, "\u26A0\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 929);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const elixir_r161 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate2("", elixir_r161.sideEffect, " (", (elixir_r161.sideEffectChance * 100).toFixed(0), "%)");
  }
}
function NovelGeneratorComponent_div_20_div_23_div_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r159 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 911)(1, "div", 912)(2, "div", 913)(3, "h4", 914);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "p", 915);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "span", 916);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 917)(10, "span", 566);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "span", 918);
    \u0275\u0275template(13, NovelGeneratorComponent_div_20_div_23_div_5_span_13_Template, 2, 0, "span", 919);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "div", 920)(15, "p");
    \u0275\u0275text(16);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(17, "div", 921);
    \u0275\u0275template(18, NovelGeneratorComponent_div_20_div_23_div_5_div_18_Template, 5, 1, "div", 464);
    \u0275\u0275elementEnd();
    \u0275\u0275template(19, NovelGeneratorComponent_div_20_div_23_div_5_div_19_Template, 5, 2, "div", 922);
    \u0275\u0275elementStart(20, "div", 923)(21, "span", 924);
    \u0275\u0275text(22);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "button", 925);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_div_23_div_5_Template_button_click_23_listener() {
      const elixir_r161 = \u0275\u0275restoreView(_r159).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.useElixir(elixir_r161.id));
    });
    \u0275\u0275text(24, " \uC0AC\uC6A9\uD558\uAE30 ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const elixir_r161 = ctx.$implicit;
    \u0275\u0275classMap("grade-" + elixir_r161.grade);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(elixir_r161.chineseName);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(elixir_r161.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(elixir_r161.grade);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(elixir_r161.type);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", \u0275\u0275pureFunction0(11, _c1).constructor(elixir_r161.rarity));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(elixir_r161.description);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", elixir_r161.effects);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", elixir_r161.sideEffect);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("\u{1F4B0} ", elixir_r161.price, "G");
  }
}
function NovelGeneratorComponent_div_20_div_23_div_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 930)(1, "p");
    \u0275\u0275text(2, "\uBCF4\uC720\uD55C \uB2E8\uC57D\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_20_div_23_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 351)(1, "div", 907)(2, "h3");
    \u0275\u0275text(3, "\u4E39\u85E5 (\uB2E8\uC57D)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 908);
    \u0275\u0275template(5, NovelGeneratorComponent_div_20_div_23_div_5_Template, 25, 12, "div", 909);
    \u0275\u0275elementEnd();
    \u0275\u0275template(6, NovelGeneratorComponent_div_20_div_23_div_6_Template, 3, 0, "div", 910);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275property("ngForOf", ctx_r2.elixirs);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.elixirs.length === 0);
  }
}
function NovelGeneratorComponent_div_20_div_24_div_8_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r162 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 941)(1, "button", 942);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_div_24_div_8_div_4_Template_button_click_1_listener() {
      \u0275\u0275restoreView(_r162);
      const meridian_r163 = \u0275\u0275nextContext().$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.openMeridian(meridian_r163.id));
    });
    \u0275\u0275text(2, " \uAC1C\uD1B5 ");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_20_div_24_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 937)(1, "div", 938)(2, "span", 939);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(4, NovelGeneratorComponent_div_20_div_24_div_8_div_4_Template, 3, 0, "div", 940);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const meridian_r163 = ctx.$implicit;
    const i_r164 = ctx.index;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275styleProp("top", ctx_r2.getMeridianPosition(i_r164).top)("left", ctx_r2.getMeridianPosition(i_r164).left);
    \u0275\u0275classProp("opened", meridian_r163.isOpened);
    \u0275\u0275property("title", meridian_r163.name + " " + meridian_r163.chineseName);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(i_r164 + 1);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !meridian_r163.isOpened);
  }
}
function NovelGeneratorComponent_div_20_div_24_div_10_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 952)(1, "div", 851);
    \u0275\u0275element(2, "div", 313);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const meridian_r165 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275styleProp("width", meridian_r165.openProgress, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", meridian_r165.openProgress, "%");
  }
}
function NovelGeneratorComponent_div_20_div_24_div_10_span_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 953);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const key_r166 = ctx.$implicit;
    const meridian_r165 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate2(" ", key_r166, ": +", meridian_r165.bonus[key_r166], " ");
  }
}
function NovelGeneratorComponent_div_20_div_24_div_10_span_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 954);
    \u0275\u0275text(1, "\u2713 \uAC1C\uD1B5\uB428");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_20_div_24_div_10_button_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r167 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 955);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_div_24_div_10_button_13_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r167);
      const meridian_r165 = \u0275\u0275nextContext().$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.openMeridian(meridian_r165.id));
    });
    \u0275\u0275text(1, " \uAC1C\uD1B5\uD558\uAE30 ");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_20_div_24_div_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 943)(1, "div", 944);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 945)(4, "h4");
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "p");
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275template(8, NovelGeneratorComponent_div_20_div_24_div_10_div_8_Template, 5, 3, "div", 946);
    \u0275\u0275elementStart(9, "div", 947);
    \u0275\u0275template(10, NovelGeneratorComponent_div_20_div_24_div_10_span_10_Template, 2, 2, "span", 948);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(11, "div", 949);
    \u0275\u0275template(12, NovelGeneratorComponent_div_20_div_24_div_10_span_12_Template, 2, 0, "span", 950)(13, NovelGeneratorComponent_div_20_div_24_div_10_button_13_Template, 2, 0, "button", 951);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const meridian_r165 = ctx.$implicit;
    const i_r168 = ctx.index;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("opened", meridian_r165.isOpened);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(i_r168 + 1);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(meridian_r165.chineseName);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(meridian_r165.name);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !meridian_r165.isOpened);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.getObjectKeys(meridian_r165.bonus));
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", meridian_r165.isOpened);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !meridian_r165.isOpened);
  }
}
function NovelGeneratorComponent_div_20_div_24_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 351)(1, "div", 931)(2, "h3");
    \u0275\u0275text(3, "\u7D93\u8108 (\uACBD\uB9E5)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 932)(5, "p");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "div", 933);
    \u0275\u0275template(8, NovelGeneratorComponent_div_20_div_24_div_8_Template, 5, 9, "div", 934);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "div", 935);
    \u0275\u0275template(10, NovelGeneratorComponent_div_20_div_24_div_10_Template, 14, 9, "div", 936);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate2("\uAC1C\uD1B5\uB41C \uD608\uB3C4: ", ctx_r2.playerInternalPower.meridians.opened, " / ", ctx_r2.playerInternalPower.meridians.total);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.playerInternalPower.meridians.meridians);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.playerInternalPower.meridians.meridians);
  }
}
function NovelGeneratorComponent_div_20_Template(rf, ctx) {
  if (rf & 1) {
    const _r153 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 831);
    \u0275\u0275pipe(1, "async");
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_Template_div_click_0_listener() {
      \u0275\u0275restoreView(_r153);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.closeWuxiaPanel());
    });
    \u0275\u0275elementStart(2, "div", 832);
    \u0275\u0275pipe(3, "async");
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_Template_div_click_2_listener($event) {
      \u0275\u0275restoreView(_r153);
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275elementStart(4, "div", 833)(5, "h2");
    \u0275\u0275text(6, "\u{1F3AF} \uC218\uB828 \uBAA8\uB4DC \u4FEE\u7149\u6A21\u5F0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_Template_button_click_7_listener() {
      \u0275\u0275restoreView(_r153);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.closeWuxiaPanel());
    });
    \u0275\u0275text(8, "\u2715");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 834)(10, "button", 348);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_Template_button_click_10_listener() {
      \u0275\u0275restoreView(_r153);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.setWuxiaTab("cultivation"));
    });
    \u0275\u0275text(11, " \u{1F525} \uB0B4\uACF5\uC218\uB828 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "button", 348);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_Template_button_click_12_listener() {
      \u0275\u0275restoreView(_r153);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.setWuxiaTab("skills"));
    });
    \u0275\u0275text(13, " \u{1F4D6} \uBB34\uACF5\uCD08\uC2DD ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "button", 348);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_Template_button_click_14_listener() {
      \u0275\u0275restoreView(_r153);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.setWuxiaTab("faction"));
    });
    \u0275\u0275text(15, " \u{1F3DB}\uFE0F \uBB38\uD30C ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "button", 348);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_Template_button_click_16_listener() {
      \u0275\u0275restoreView(_r153);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.setWuxiaTab("elixir"));
    });
    \u0275\u0275text(17, " \u{1F48A} \uB2E8\uC57D ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "button", 348);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_20_Template_button_click_18_listener() {
      \u0275\u0275restoreView(_r153);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.novelState.setWuxiaTab("meridians"));
    });
    \u0275\u0275text(19, " \u2B55 \uD608\uB3C4 ");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(20, NovelGeneratorComponent_div_20_div_20_Template, 58, 16, "div", 350)(21, NovelGeneratorComponent_div_20_div_21_Template, 10, 3, "div", 350)(22, NovelGeneratorComponent_div_20_div_22_Template, 6, 2, "div", 350)(23, NovelGeneratorComponent_div_20_div_23_Template, 7, 2, "div", 350)(24, NovelGeneratorComponent_div_20_div_24_Template, 11, 4, "div", 350);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275classProp("mobile", \u0275\u0275pipeBind1(1, 19, ctx_r2.responsiveService.isMobile$));
    \u0275\u0275advance(2);
    \u0275\u0275classProp("mobile", \u0275\u0275pipeBind1(3, 21, ctx_r2.responsiveService.isMobile$));
    \u0275\u0275advance(8);
    \u0275\u0275classProp("active", ctx_r2.wuxiaActiveTab === "cultivation");
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active", ctx_r2.wuxiaActiveTab === "skills");
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active", ctx_r2.wuxiaActiveTab === "faction");
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active", ctx_r2.wuxiaActiveTab === "elixir");
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active", ctx_r2.wuxiaActiveTab === "meridians");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r2.wuxiaActiveTab === "cultivation");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.wuxiaActiveTab === "skills");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.wuxiaActiveTab === "faction");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.wuxiaActiveTab === "elixir");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.wuxiaActiveTab === "meridians");
  }
}
function NovelGeneratorComponent_div_21_div_8_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 992);
    \u0275\u0275text(2, "\u26D1\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 993);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet == null ? null : ctx_r2.playerCharacter.equipment.helmet.baseType);
  }
}
function NovelGeneratorComponent_div_21_div_8_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 994)(1, "div", 995);
    \u0275\u0275text(2, "\u26D1\uFE0F");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_21_div_8_div_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 992);
    \u0275\u0275text(2, "\u{1F6E1}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 993);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor == null ? null : ctx_r2.playerCharacter.equipment.armor.baseType);
  }
}
function NovelGeneratorComponent_div_21_div_8_ng_template_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 994)(1, "div", 995);
    \u0275\u0275text(2, "\u{1F6E1}\uFE0F");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_21_div_8_div_20_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 992);
    \u0275\u0275text(2, "\u{1F9E4}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 993);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves == null ? null : ctx_r2.playerCharacter.equipment.gloves.baseType);
  }
}
function NovelGeneratorComponent_div_21_div_8_ng_template_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 994)(1, "div", 995);
    \u0275\u0275text(2, "\u{1F9E4}");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_21_div_8_div_26_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 992);
    \u0275\u0275text(2, "\u{1F462}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 993);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots == null ? null : ctx_r2.playerCharacter.equipment.boots.baseType);
  }
}
function NovelGeneratorComponent_div_21_div_8_ng_template_27_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 994)(1, "div", 995);
    \u0275\u0275text(2, "\u{1F462}");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_21_div_8_div_33_div_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 998);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate2(" ", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon == null ? null : ctx_r2.playerCharacter.equipment.weapon.baseStats == null ? null : ctx_r2.playerCharacter.equipment.weapon.baseStats.minDamage, "-", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon == null ? null : ctx_r2.playerCharacter.equipment.weapon.baseStats == null ? null : ctx_r2.playerCharacter.equipment.weapon.baseStats.maxDamage, " ");
  }
}
function NovelGeneratorComponent_div_21_div_8_div_33_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 996);
    \u0275\u0275text(2, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 993);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275template(5, NovelGeneratorComponent_div_21_div_8_div_33_div_5_Template, 2, 2, "div", 997);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon == null ? null : ctx_r2.playerCharacter.equipment.weapon.baseType);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon == null ? null : ctx_r2.playerCharacter.equipment.weapon.baseStats);
  }
}
function NovelGeneratorComponent_div_21_div_8_ng_template_34_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 994)(1, "div", 999);
    \u0275\u0275text(2, "\u2694\uFE0F");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_21_div_8_div_40_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 992);
    \u0275\u0275text(2, "\u{1F4FF}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 993);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet == null ? null : ctx_r2.playerCharacter.equipment.amulet.baseType);
  }
}
function NovelGeneratorComponent_div_21_div_8_ng_template_41_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 994)(1, "div", 995);
    \u0275\u0275text(2, "\u{1F4FF}");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_21_div_8_div_46_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 992);
    \u0275\u0275text(2, "\u{1F397}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 993);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt == null ? null : ctx_r2.playerCharacter.equipment.belt.baseType);
  }
}
function NovelGeneratorComponent_div_21_div_8_ng_template_47_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 994)(1, "div", 995);
    \u0275\u0275text(2, "\u{1F397}\uFE0F");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_21_div_8_div_52_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 992);
    \u0275\u0275text(2, "\u{1F48D}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 993);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1 == null ? null : ctx_r2.playerCharacter.equipment.ring1.baseType);
  }
}
function NovelGeneratorComponent_div_21_div_8_ng_template_53_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 994)(1, "div", 995);
    \u0275\u0275text(2, "\u{1F48D}");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_21_div_8_div_58_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 992);
    \u0275\u0275text(2, "\u{1F48D}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 993);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2 == null ? null : ctx_r2.playerCharacter.equipment.ring2.baseType);
  }
}
function NovelGeneratorComponent_div_21_div_8_ng_template_59_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 994)(1, "div", 995);
    \u0275\u0275text(2, "\u{1F48D}");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_21_div_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r170 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 974)(1, "h4", 325);
    \u0275\u0275text(2, "\u2694\uFE0F \uC7A5\uBE44 \uC2AC\uB86F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 975)(4, "div", 354)(5, "div", 976);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_div_8_Template_div_click_5_listener() {
      \u0275\u0275restoreView(_r170);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView((ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet) && ctx_r2.unequipItem("helmet"));
    });
    \u0275\u0275elementStart(6, "div", 977);
    \u0275\u0275text(7, "\uD22C\uAD6C");
    \u0275\u0275elementEnd();
    \u0275\u0275template(8, NovelGeneratorComponent_div_21_div_8_div_8_Template, 5, 1, "div", 978)(9, NovelGeneratorComponent_div_21_div_8_ng_template_9_Template, 3, 0, "ng-template", null, 3, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "div", 979);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_div_8_Template_div_click_11_listener() {
      \u0275\u0275restoreView(_r170);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView((ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor) && ctx_r2.unequipItem("armor"));
    });
    \u0275\u0275elementStart(12, "div", 977);
    \u0275\u0275text(13, "\uAC11\uC637");
    \u0275\u0275elementEnd();
    \u0275\u0275template(14, NovelGeneratorComponent_div_21_div_8_div_14_Template, 5, 1, "div", 978)(15, NovelGeneratorComponent_div_21_div_8_ng_template_15_Template, 3, 0, "ng-template", null, 2, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "div", 980);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_div_8_Template_div_click_17_listener() {
      \u0275\u0275restoreView(_r170);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView((ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves) && ctx_r2.unequipItem("gloves"));
    });
    \u0275\u0275elementStart(18, "div", 977);
    \u0275\u0275text(19, "\uC7A5\uAC11");
    \u0275\u0275elementEnd();
    \u0275\u0275template(20, NovelGeneratorComponent_div_21_div_8_div_20_Template, 5, 1, "div", 978)(21, NovelGeneratorComponent_div_21_div_8_ng_template_21_Template, 3, 0, "ng-template", null, 6, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "div", 981);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_div_8_Template_div_click_23_listener() {
      \u0275\u0275restoreView(_r170);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView((ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots) && ctx_r2.unequipItem("boots"));
    });
    \u0275\u0275elementStart(24, "div", 977);
    \u0275\u0275text(25, "\uC2E0\uBC1C");
    \u0275\u0275elementEnd();
    \u0275\u0275template(26, NovelGeneratorComponent_div_21_div_8_div_26_Template, 5, 1, "div", 978)(27, NovelGeneratorComponent_div_21_div_8_ng_template_27_Template, 3, 0, "ng-template", null, 7, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(29, "div", 359)(30, "div", 982);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_div_8_Template_div_click_30_listener() {
      \u0275\u0275restoreView(_r170);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView((ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon) && ctx_r2.unequipItem("weapon"));
    });
    \u0275\u0275elementStart(31, "div", 977);
    \u0275\u0275text(32, "\uBB34\uAE30");
    \u0275\u0275elementEnd();
    \u0275\u0275template(33, NovelGeneratorComponent_div_21_div_8_div_33_Template, 6, 2, "div", 978)(34, NovelGeneratorComponent_div_21_div_8_ng_template_34_Template, 3, 0, "ng-template", null, 1, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(36, "div", 363)(37, "div", 983);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_div_8_Template_div_click_37_listener() {
      \u0275\u0275restoreView(_r170);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView((ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet) && ctx_r2.unequipItem("amulet"));
    });
    \u0275\u0275elementStart(38, "div", 977);
    \u0275\u0275text(39, "\uBAA9\uAC78\uC774");
    \u0275\u0275elementEnd();
    \u0275\u0275template(40, NovelGeneratorComponent_div_21_div_8_div_40_Template, 5, 1, "div", 978)(41, NovelGeneratorComponent_div_21_div_8_ng_template_41_Template, 3, 0, "ng-template", null, 4, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(43, "div", 984);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_div_8_Template_div_click_43_listener() {
      \u0275\u0275restoreView(_r170);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView((ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt) && ctx_r2.unequipItem("belt"));
    });
    \u0275\u0275elementStart(44, "div", 977);
    \u0275\u0275text(45, "\uBCA8\uD2B8");
    \u0275\u0275elementEnd();
    \u0275\u0275template(46, NovelGeneratorComponent_div_21_div_8_div_46_Template, 5, 1, "div", 978)(47, NovelGeneratorComponent_div_21_div_8_ng_template_47_Template, 3, 0, "ng-template", null, 5, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(49, "div", 985);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_div_8_Template_div_click_49_listener() {
      \u0275\u0275restoreView(_r170);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView((ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1) && ctx_r2.unequipItem("ring1"));
    });
    \u0275\u0275elementStart(50, "div", 977);
    \u0275\u0275text(51, "\uBC18\uC9C0");
    \u0275\u0275elementEnd();
    \u0275\u0275template(52, NovelGeneratorComponent_div_21_div_8_div_52_Template, 5, 1, "div", 978)(53, NovelGeneratorComponent_div_21_div_8_ng_template_53_Template, 3, 0, "ng-template", null, 8, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(55, "div", 985);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_div_8_Template_div_click_55_listener() {
      \u0275\u0275restoreView(_r170);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView((ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2) && ctx_r2.unequipItem("ring2"));
    });
    \u0275\u0275elementStart(56, "div", 977);
    \u0275\u0275text(57, "\uBC18\uC9C0");
    \u0275\u0275elementEnd();
    \u0275\u0275template(58, NovelGeneratorComponent_div_21_div_8_div_58_Template, 5, 1, "div", 978)(59, NovelGeneratorComponent_div_21_div_8_ng_template_59_Template, 3, 0, "ng-template", null, 9, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(61, "div", 986)(62, "div", 987)(63, "span", 988);
    \u0275\u0275text(64, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(65, "span", 989);
    \u0275\u0275text(66, "\uCD1D \uACF5\uACA9\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(67, "span", 990);
    \u0275\u0275text(68);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(69, "div", 987)(70, "span", 988);
    \u0275\u0275text(71, "\u{1F6E1}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(72, "span", 989);
    \u0275\u0275text(73, "\uCD1D \uBC29\uC5B4\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(74, "span", 990);
    \u0275\u0275text(75);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(76, "div", 987)(77, "span", 988);
    \u0275\u0275text(78, "\u2728");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(79, "span", 989);
    \u0275\u0275text(80, "\uD2B9\uC218 \uD6A8\uACFC");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(81, "span", 990);
    \u0275\u0275text(82);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const emptyHelmet_r171 = \u0275\u0275reference(10);
    const emptyArmor_r172 = \u0275\u0275reference(16);
    const emptyGloves_r173 = \u0275\u0275reference(22);
    const emptyBoots_r174 = \u0275\u0275reference(28);
    const emptyWeapon_r175 = \u0275\u0275reference(35);
    const emptyAmulet_r176 = \u0275\u0275reference(42);
    const emptyBelt_r177 = \u0275\u0275reference(48);
    const emptyRing1_r178 = \u0275\u0275reference(54);
    const emptyRing2_r179 = \u0275\u0275reference(60);
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275styleProp("cursor", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet) ? "pointer" : "default");
    \u0275\u0275attribute("data-rarity", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet == null ? null : ctx_r2.playerCharacter.equipment.helmet.rarity) || "empty");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.helmet)("ngIfElse", emptyHelmet_r171);
    \u0275\u0275advance(3);
    \u0275\u0275styleProp("cursor", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor) ? "pointer" : "default");
    \u0275\u0275attribute("data-rarity", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor == null ? null : ctx_r2.playerCharacter.equipment.armor.rarity) || "empty");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.armor)("ngIfElse", emptyArmor_r172);
    \u0275\u0275advance(3);
    \u0275\u0275styleProp("cursor", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves) ? "pointer" : "default");
    \u0275\u0275attribute("data-rarity", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves == null ? null : ctx_r2.playerCharacter.equipment.gloves.rarity) || "empty");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.gloves)("ngIfElse", emptyGloves_r173);
    \u0275\u0275advance(3);
    \u0275\u0275styleProp("cursor", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots) ? "pointer" : "default");
    \u0275\u0275attribute("data-rarity", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots == null ? null : ctx_r2.playerCharacter.equipment.boots.rarity) || "empty");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.boots)("ngIfElse", emptyBoots_r174);
    \u0275\u0275advance(4);
    \u0275\u0275styleProp("cursor", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon) ? "pointer" : "default");
    \u0275\u0275attribute("data-rarity", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon == null ? null : ctx_r2.playerCharacter.equipment.weapon.rarity) || "empty");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.weapon)("ngIfElse", emptyWeapon_r175);
    \u0275\u0275advance(4);
    \u0275\u0275styleProp("cursor", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet) ? "pointer" : "default");
    \u0275\u0275attribute("data-rarity", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet == null ? null : ctx_r2.playerCharacter.equipment.amulet.rarity) || "empty");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.amulet)("ngIfElse", emptyAmulet_r176);
    \u0275\u0275advance(3);
    \u0275\u0275styleProp("cursor", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt) ? "pointer" : "default");
    \u0275\u0275attribute("data-rarity", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt == null ? null : ctx_r2.playerCharacter.equipment.belt.rarity) || "empty");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.belt)("ngIfElse", emptyBelt_r177);
    \u0275\u0275advance(3);
    \u0275\u0275styleProp("cursor", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1) ? "pointer" : "default");
    \u0275\u0275attribute("data-rarity", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1 == null ? null : ctx_r2.playerCharacter.equipment.ring1.rarity) || "empty");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring1)("ngIfElse", emptyRing1_r178);
    \u0275\u0275advance(3);
    \u0275\u0275styleProp("cursor", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2) ? "pointer" : "default");
    \u0275\u0275attribute("data-rarity", (ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2 == null ? null : ctx_r2.playerCharacter.equipment.ring2.rarity) || "empty");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter.equipment == null ? null : ctx_r2.playerCharacter.equipment.ring2)("ngIfElse", emptyRing2_r179);
    \u0275\u0275advance(10);
    \u0275\u0275textInterpolate(ctx_r2.getTotalAttack());
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate(ctx_r2.getTotalDefense());
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate(ctx_r2.getSpecialEffectsCount());
  }
}
function NovelGeneratorComponent_div_21_button_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r180 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 1e3);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_button_13_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r180);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.generateRandomItems());
    });
    \u0275\u0275elementStart(1, "mat-icon");
    \u0275\u0275text(2, "casino");
    \u0275\u0275elementEnd();
    \u0275\u0275text(3, " AI \uC544\uC774\uD15C \uC0DD\uC131 ");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_span_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F6E1}\uFE0F");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_span_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u26D1\uFE0F");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_span_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F9E4}");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_span_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F462}");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_span_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F397}\uFE0F");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_span_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F4FF}");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_span_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F48D}");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_span_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F9EA}");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_span_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\u{1F4E6}");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1014)(1, "span", 977);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext().$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.getEquipmentSlotName(item_r182.type));
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1022);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate2("\u2694\uFE0F ", item_r182.stats.minDamage, "-", item_r182.stats.maxDamage);
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1022);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2694\uFE0F +", item_r182.stats.attack);
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1023);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F6E1}\uFE0F +", item_r182.stats.armor);
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1023);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F6E1}\uFE0F +", item_r182.stats.defense);
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1024);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2764\uFE0F +", item_r182.stats.hp);
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1024);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F499} +", item_r182.stats.mp);
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1025);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F4A5} ", item_r182.stats.critChance, "%");
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1025);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F4A2} ", item_r182.stats.critDamage, "%");
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1026);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1FA78} ", item_r182.stats.lifeSteal, "%");
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1027);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F525} +", item_r182.stats.fireResist, "%");
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1027);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2744\uFE0F +", item_r182.stats.coldResist, "%");
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1027);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u26A1 +", item_r182.stats.lightningResist, "%");
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1027);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2728 +", item_r182.stats.allResist, "%");
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1028);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F3B2} +", item_r182.stats.magicFind, "%");
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1028);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F4B0} +", item_r182.stats.goldFind, "%");
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 1028);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F3C3} +", item_r182.stats.movementSpeed, "%");
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 560);
    \u0275\u0275template(1, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_1_Template, 2, 2, "span", 1015)(2, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_2_Template, 2, 1, "span", 1015)(3, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_3_Template, 2, 1, "span", 1016)(4, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_4_Template, 2, 1, "span", 1016)(5, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_5_Template, 2, 1, "span", 1017)(6, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_6_Template, 2, 1, "span", 1017)(7, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_7_Template, 2, 1, "span", 1018)(8, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_8_Template, 2, 1, "span", 1018)(9, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_9_Template, 2, 1, "span", 1019)(10, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_10_Template, 2, 1, "span", 1020)(11, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_11_Template, 2, 1, "span", 1020)(12, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_12_Template, 2, 1, "span", 1020)(13, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_13_Template, 2, 1, "span", 1020)(14, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_14_Template, 2, 1, "span", 1021)(15, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_15_Template, 2, 1, "span", 1021)(16, NovelGeneratorComponent_div_21_div_45_div_1_div_22_span_16_Template, 2, 1, "span", 1021);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.minDamage && item_r182.stats.maxDamage);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.attack && !item_r182.stats.minDamage);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.armor);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.defense && !item_r182.stats.armor);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.hp);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.mp);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.critChance);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.critDamage);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.lifeSteal);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.fireResist);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.coldResist);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.lightningResist);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.allResist);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.magicFind);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.goldFind);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats.movementSpeed);
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_div_23_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1029)(1, "span", 1030);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r182 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\xD7", item_r182.quantity);
  }
}
function NovelGeneratorComponent_div_21_div_45_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r181 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1003)(1, "button", 1004);
    \u0275\u0275listener("menuOpened", function NovelGeneratorComponent_div_21_div_45_div_1_Template_button_menuOpened_1_listener() {
      const item_r182 = \u0275\u0275restoreView(_r181).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.selectInventoryItem(item_r182, ctx_r2.getOriginalInventoryIndex(item_r182)));
    });
    \u0275\u0275elementStart(2, "div", 1005)(3, "div", 1006);
    \u0275\u0275template(4, NovelGeneratorComponent_div_21_div_45_div_1_span_4_Template, 2, 0, "span", 97)(5, NovelGeneratorComponent_div_21_div_45_div_1_span_5_Template, 2, 0, "span", 97)(6, NovelGeneratorComponent_div_21_div_45_div_1_span_6_Template, 2, 0, "span", 97)(7, NovelGeneratorComponent_div_21_div_45_div_1_span_7_Template, 2, 0, "span", 97)(8, NovelGeneratorComponent_div_21_div_45_div_1_span_8_Template, 2, 0, "span", 97)(9, NovelGeneratorComponent_div_21_div_45_div_1_span_9_Template, 2, 0, "span", 97)(10, NovelGeneratorComponent_div_21_div_45_div_1_span_10_Template, 2, 0, "span", 97)(11, NovelGeneratorComponent_div_21_div_45_div_1_span_11_Template, 2, 0, "span", 97)(12, NovelGeneratorComponent_div_21_div_45_div_1_span_12_Template, 2, 0, "span", 97)(13, NovelGeneratorComponent_div_21_div_45_div_1_span_13_Template, 2, 0, "span", 97);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "div", 1007)(15, "div", 1008);
    \u0275\u0275text(16);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "div", 1009);
    \u0275\u0275text(18);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(19, "div", 555);
    \u0275\u0275text(20);
    \u0275\u0275elementEnd();
    \u0275\u0275template(21, NovelGeneratorComponent_div_21_div_45_div_1_div_21_Template, 3, 1, "div", 1010)(22, NovelGeneratorComponent_div_21_div_45_div_1_div_22_Template, 17, 16, "div", 557)(23, NovelGeneratorComponent_div_21_div_45_div_1_div_23_Template, 3, 1, "div", 1011);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(24, "div", 1012);
    \u0275\u0275text(25);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(26, "button", 1013);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_div_45_div_1_Template_button_click_26_listener($event) {
      const item_r182 = \u0275\u0275restoreView(_r181).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      ctx_r2.deleteInventoryItem(ctx_r2.getOriginalInventoryIndex(item_r182));
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275elementStart(27, "mat-icon");
    \u0275\u0275text(28, "close");
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const item_r182 = ctx.$implicit;
    \u0275\u0275nextContext(2);
    const itemMenu_r183 = \u0275\u0275reference(47);
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275property("ngClass", ctx_r2.getItemTypeColorClass(item_r182.type));
    \u0275\u0275advance();
    \u0275\u0275property("matMenuTriggerFor", itemMenu_r183);
    \u0275\u0275attribute("data-rarity", item_r182.rarity);
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", item_r182.type === "weapon");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.type === "armor");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.type === "helmet");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.type === "gloves");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.type === "boots");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.type === "belt");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.type === "amulet");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.type === "ring");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.type === "consumable");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.type === "material");
    \u0275\u0275advance(2);
    \u0275\u0275classMap("rarity-text-" + item_r182.rarity);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(item_r182.name);
    \u0275\u0275advance();
    \u0275\u0275classMap("rarity-badge-" + item_r182.rarity);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r2.getRarityText(item_r182.rarity), " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r2.getItemTypeText(item_r182.type));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.getEquipmentSlotName(item_r182.type));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.stats);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r182.quantity && item_r182.quantity > 1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", ctx_r2.getRaritySymbol(item_r182.rarity), " ");
  }
}
function NovelGeneratorComponent_div_21_div_45_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1001);
    \u0275\u0275template(1, NovelGeneratorComponent_div_21_div_45_div_1_Template, 29, 24, "div", 1002);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r2.getFilteredInventory());
  }
}
function NovelGeneratorComponent_div_21_button_48_Template(rf, ctx) {
  if (rf & 1) {
    const _r184 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 970);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_button_48_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r184);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onContextMenuAction("equip"));
    });
    \u0275\u0275elementStart(1, "mat-icon");
    \u0275\u0275text(2, "upload");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span");
    \u0275\u0275text(4, "\uC7A5\uBE44\uD558\uAE30");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_21_button_49_Template(rf, ctx) {
  if (rf & 1) {
    const _r185 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 970);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_button_49_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r185);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onContextMenuAction("compare"));
    });
    \u0275\u0275elementStart(1, "mat-icon");
    \u0275\u0275text(2, "compare_arrows");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span");
    \u0275\u0275text(4, "\uBE44\uAD50\uD558\uAE30");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_21_div_60_p_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p");
    \u0275\u0275text(1, "\uC778\uBCA4\uD1A0\uB9AC\uAC00 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_60_p_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p");
    \u0275\u0275text(1, "\uD574\uB2F9 \uD0C0\uC785\uC758 \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_60_p_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p", 605);
    \u0275\u0275text(1, "AI \uC544\uC774\uD15C \uC0DD\uC131 \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC5EC \uC544\uC774\uD15C\uC744 \uC0DD\uC131\uD558\uC138\uC694");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_60_button_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r186 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 1034);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_div_60_button_6_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r186);
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.generateRandomItems());
    });
    \u0275\u0275elementStart(1, "mat-icon");
    \u0275\u0275text(2, "add");
    \u0275\u0275elementEnd();
    \u0275\u0275text(3, " \uCCAB \uC544\uC774\uD15C \uC0DD\uC131\uD558\uAE30 ");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_21_div_60_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1031)(1, "div", 405);
    \u0275\u0275text(2, "\u{1F392}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(3, NovelGeneratorComponent_div_21_div_60_p_3_Template, 2, 0, "p", 97)(4, NovelGeneratorComponent_div_21_div_60_p_4_Template, 2, 0, "p", 97)(5, NovelGeneratorComponent_div_21_div_60_p_5_Template, 2, 0, "p", 1032)(6, NovelGeneratorComponent_div_21_div_60_button_6_Template, 4, 0, "button", 1033);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.inventoryFilter === "all");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.inventoryFilter !== "all");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.inventoryFilter === "all");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter && ctx_r2.inventoryFilter === "all");
  }
}
function NovelGeneratorComponent_div_21_div_61_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1035)(1, "div", 405);
    \u0275\u0275text(2, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "h3");
    \u0275\u0275text(4, "\uCE90\uB9AD\uD130 \uC815\uBCF4 \uC5C6\uC74C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "p");
    \u0275\u0275text(6, "\uCE90\uB9AD\uD130\uB97C \uC0DD\uC131\uD558\uBA74 \uC7A5\uBE44 \uC815\uBCF4\uAC00 \uD45C\uC2DC\uB429\uB2C8\uB2E4");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_21_Template(rf, ctx) {
  if (rf & 1) {
    const _r169 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 956)(1, "div", 957);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r169);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.showDungeonPanel ? null : ctx_r2.closeDungeonDialog());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "div", 958)(3, "div", 959)(4, "h3");
    \u0275\u0275text(5, "\u{1F3F0} \uB358\uC804 \uD14C\uC2A4\uD2B8");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_Template_button_click_6_listener() {
      \u0275\u0275restoreView(_r169);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.closeDungeonDialog());
    });
    \u0275\u0275text(7, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(8, NovelGeneratorComponent_div_21_div_8_Template, 83, 48, "div", 960);
    \u0275\u0275elementStart(9, "div", 961)(10, "div", 962)(11, "h4", 325);
    \u0275\u0275text(12, "\u{1F392} \uC778\uBCA4\uD1A0\uB9AC");
    \u0275\u0275elementEnd();
    \u0275\u0275template(13, NovelGeneratorComponent_div_21_button_13_Template, 4, 0, "button", 963);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "div", 964)(15, "button", 965);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_Template_button_click_15_listener() {
      \u0275\u0275restoreView(_r169);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.setInventoryFilter("all"));
    });
    \u0275\u0275elementStart(16, "mat-icon");
    \u0275\u0275text(17, "apps");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "span");
    \u0275\u0275text(19, "\uC804\uCCB4");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(20, "button", 965);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_Template_button_click_20_listener() {
      \u0275\u0275restoreView(_r169);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.setInventoryFilter("weapon"));
    });
    \u0275\u0275elementStart(21, "span", 966);
    \u0275\u0275text(22, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "span");
    \u0275\u0275text(24, "\uBB34\uAE30");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(25, "button", 965);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_Template_button_click_25_listener() {
      \u0275\u0275restoreView(_r169);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.setInventoryFilter("armor"));
    });
    \u0275\u0275elementStart(26, "span", 966);
    \u0275\u0275text(27, "\u{1F6E1}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(28, "span");
    \u0275\u0275text(29, "\uBC29\uC5B4\uAD6C");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(30, "button", 965);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_Template_button_click_30_listener() {
      \u0275\u0275restoreView(_r169);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.setInventoryFilter("accessory"));
    });
    \u0275\u0275elementStart(31, "span", 966);
    \u0275\u0275text(32, "\u{1F48D}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(33, "span");
    \u0275\u0275text(34, "\uC7A5\uC2E0\uAD6C");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(35, "button", 965);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_Template_button_click_35_listener() {
      \u0275\u0275restoreView(_r169);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.setInventoryFilter("consumable"));
    });
    \u0275\u0275elementStart(36, "span", 966);
    \u0275\u0275text(37, "\u{1F9EA}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(38, "span");
    \u0275\u0275text(39, "\uC18C\uBAA8\uD488");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(40, "button", 965);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_Template_button_click_40_listener() {
      \u0275\u0275restoreView(_r169);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.setInventoryFilter("material"));
    });
    \u0275\u0275elementStart(41, "span", 966);
    \u0275\u0275text(42, "\u{1F4E6}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(43, "span");
    \u0275\u0275text(44, "\uAE30\uD0C0");
    \u0275\u0275elementEnd()()();
    \u0275\u0275template(45, NovelGeneratorComponent_div_21_div_45_Template, 2, 1, "div", 967);
    \u0275\u0275elementStart(46, "mat-menu", 968, 10);
    \u0275\u0275template(48, NovelGeneratorComponent_div_21_button_48_Template, 5, 0, "button", 969)(49, NovelGeneratorComponent_div_21_button_49_Template, 5, 0, "button", 969);
    \u0275\u0275elementStart(50, "button", 970);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_Template_button_click_50_listener() {
      \u0275\u0275restoreView(_r169);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onContextMenuAction("info"));
    });
    \u0275\u0275elementStart(51, "mat-icon");
    \u0275\u0275text(52, "info");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(53, "span");
    \u0275\u0275text(54, "\uC815\uBCF4 \uBCF4\uAE30");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(55, "button", 970);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_21_Template_button_click_55_listener() {
      \u0275\u0275restoreView(_r169);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.deleteInventoryItem(ctx_r2.selectedContextItemIndex));
    });
    \u0275\u0275elementStart(56, "mat-icon", 971);
    \u0275\u0275text(57, "delete");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(58, "span");
    \u0275\u0275text(59, "\uC0AD\uC81C\uD558\uAE30");
    \u0275\u0275elementEnd()()();
    \u0275\u0275template(60, NovelGeneratorComponent_div_21_div_60_Template, 7, 4, "div", 972);
    \u0275\u0275elementEnd();
    \u0275\u0275template(61, NovelGeneratorComponent_div_21_div_61_Template, 7, 0, "div", 973);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275classProp("dungeon-active", ctx_r2.showDungeonPanel);
    \u0275\u0275advance(6);
    \u0275\u0275property("ngIf", !ctx_r2.showDungeonPanel);
    \u0275\u0275advance(5);
    \u0275\u0275property("ngIf", ctx_r2.playerCharacter);
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active", ctx_r2.inventoryFilter === "all");
    \u0275\u0275advance(5);
    \u0275\u0275classProp("active", ctx_r2.inventoryFilter === "weapon");
    \u0275\u0275advance(5);
    \u0275\u0275classProp("active", ctx_r2.inventoryFilter === "armor");
    \u0275\u0275advance(5);
    \u0275\u0275classProp("active", ctx_r2.inventoryFilter === "accessory");
    \u0275\u0275advance(5);
    \u0275\u0275classProp("active", ctx_r2.inventoryFilter === "consumable");
    \u0275\u0275advance(5);
    \u0275\u0275classProp("active", ctx_r2.inventoryFilter === "material");
    \u0275\u0275advance(5);
    \u0275\u0275property("ngIf", ctx_r2.getFilteredInventory().length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("overlapTrigger", false);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r2.selectedContextItem && ctx_r2.selectedContextItem.type !== "consumable" && ctx_r2.selectedContextItem.type !== "material" && ctx_r2.selectedContextItem.type !== "quest" && ctx_r2.selectedContextItem.type !== "misc");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedContextItem && ctx_r2.selectedContextItem.type !== "consumable" && ctx_r2.selectedContextItem.type !== "material" && ctx_r2.selectedContextItem.type !== "quest" && ctx_r2.selectedContextItem.type !== "misc");
    \u0275\u0275advance(11);
    \u0275\u0275property("ngIf", ctx_r2.getFilteredInventory().length === 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.playerCharacter);
  }
}
function NovelGeneratorComponent_div_22_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 974)(1, "h2");
    \u0275\u0275text(2, "\u{1F3F0} \uB358\uC804 \uC120\uD0DD");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p");
    \u0275\u0275text(4, "\uD0D0\uD5D8\uD560 \uB358\uC804\uC744 \uC120\uD0DD\uD558\uC138\uC694");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_22_div_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1037)(1, "h2");
    \u0275\u0275text(2, "\u2694\uFE0F \uB358\uC804 \uC9C4\uD589 \uC911");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p");
    \u0275\u0275text(4, "\uB358\uC804 \uD0D0\uD5D8\uC774 \uC9C4\uD589 \uC911\uC785\uB2C8\uB2E4.");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_22_Template(rf, ctx) {
  if (rf & 1) {
    const _r187 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 956)(1, "div", 957);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_22_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r187);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.showDungeonPanel ? null : ctx_r2.closeDungeonDialog());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "div", 958)(3, "div", 959)(4, "h3");
    \u0275\u0275text(5, "\u{1F3F0} \uB358\uC804 \uD14C\uC2A4\uD2B8");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_22_Template_button_click_6_listener() {
      \u0275\u0275restoreView(_r187);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.closeDungeonDialog());
    });
    \u0275\u0275text(7, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(8, NovelGeneratorComponent_div_22_div_8_Template, 5, 0, "div", 960)(9, NovelGeneratorComponent_div_22_div_9_Template, 5, 0, "div", 1036);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275classProp("dungeon-active", ctx_r2.showDungeonPanel);
    \u0275\u0275advance(6);
    \u0275\u0275property("ngIf", !ctx_r2.showDungeonPanel);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.showDungeonPanel);
  }
}
function NovelGeneratorComponent_div_23_Template(rf, ctx) {
  if (rf & 1) {
    const _r188 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1038)(1, "div", 1039)(2, "h3");
    \u0275\u0275text(3, "\u{1F5FA}\uFE0F \uD50C\uB85C\uC6B0 \uBBF8\uB2C8\uB9F5");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_23_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r188);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.toggleFlowPanel());
    });
    \u0275\u0275text(5, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 1040)(7, "p");
    \u0275\u0275text(8, "\uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0\uAC00 \uD45C\uC2DC\uB429\uB2C8\uB2E4");
    \u0275\u0275elementEnd()()();
  }
}
function NovelGeneratorComponent_div_24_Template(rf, ctx) {
  if (rf & 1) {
    const _r189 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 713)(1, "div", 714)(2, "h3");
    \u0275\u0275text(3, "\u{1F500} \uACE0\uAE09 \uD50C\uB85C\uC6B0");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_24_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r189);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.toggleAdvancedFlowPanel());
    });
    \u0275\u0275text(5, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 1041)(7, "p");
    \u0275\u0275text(8, "\uACE0\uAE09 \uD50C\uB85C\uC6B0 \uAE30\uB2A5\uC774 \uD45C\uC2DC\uB429\uB2C8\uB2E4");
    \u0275\u0275elementEnd()()();
  }
}
function NovelGeneratorComponent_div_25_Template(rf, ctx) {
  if (rf & 1) {
    const _r190 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1042)(1, "div", 1043)(2, "h3");
    \u0275\u0275text(3, "\u2694\uFE0F \uBB34\uD611 \uC218\uB828");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_25_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r190);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.toggleWuxiaPanel());
    });
    \u0275\u0275text(5, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 1044)(7, "p");
    \u0275\u0275text(8, "\uC218\uB828 \uAE30\uB2A5\uC774 \uD45C\uC2DC\uB429\uB2C8\uB2E4");
    \u0275\u0275elementEnd()()();
  }
}
function NovelGeneratorComponent_div_26_div_8_div_5_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 343)(1, "div", 866)(2, "span", 344);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 345);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "p", 875);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "div", 1052);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const skill_r194 = ctx.$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(skill_r194.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("Lv.", skill_r194.level, "/", skill_r194.maxLevel);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(skill_r194.description);
    \u0275\u0275advance();
    \u0275\u0275property("ngClass", "type-" + skill_r194.type);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", skill_r194.type === "combat" ? "\uC804\uD22C" : skill_r194.type === "magic" ? "\uB9C8\uBC95" : "\uD328\uC2DC\uBE0C", " ");
  }
}
function NovelGeneratorComponent_div_26_div_8_div_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r192 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1051);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_26_div_8_div_5_Template_div_click_0_listener() {
      const dungeonType_r193 = \u0275\u0275restoreView(_r192).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.selectDungeonType(dungeonType_r193));
    });
    \u0275\u0275elementStart(1, "div", 341);
    \u0275\u0275template(2, NovelGeneratorComponent_div_26_div_8_div_5_div_2_Template, 10, 6, "div", 342);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const dungeonType_r193 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("selected", (ctx_r2.selectedDungeonType == null ? null : ctx_r2.selectedDungeonType.id) === dungeonType_r193.id);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r2.playerCharacter.skills);
  }
}
function NovelGeneratorComponent_div_26_div_8_div_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1053)(1, "div", 405);
    \u0275\u0275text(2, "\u{1F464}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "h3");
    \u0275\u0275text(4, "\uCE90\uB9AD\uD130 \uC815\uBCF4 \uC5C6\uC74C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "p");
    \u0275\u0275text(6, "\uC544\uC9C1 \uC0DD\uC131\uB41C \uCE90\uB9AD\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "p", 605);
    \u0275\u0275text(8, "\uC18C\uC124\uC744 \uC2DC\uC791\uD558\uBA74 \uCE90\uB9AD\uD130 \uC815\uBCF4\uAC00 \uD45C\uC2DC\uB429\uB2C8\uB2E4");
    \u0275\u0275elementEnd()();
  }
}
function NovelGeneratorComponent_div_26_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1046)(1, "div", 1047)(2, "h3");
    \u0275\u0275text(3, "\uB358\uC804 \uC120\uD0DD");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 1048);
    \u0275\u0275template(5, NovelGeneratorComponent_div_26_div_8_div_5_Template, 3, 3, "div", 1049);
    \u0275\u0275elementEnd();
    \u0275\u0275template(6, NovelGeneratorComponent_div_26_div_8_div_6_Template, 9, 0, "div", 1050);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275property("ngForOf", ctx_r2.dungeonTypes);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.playerCharacter);
  }
}
function NovelGeneratorComponent_div_26_Template(rf, ctx) {
  if (rf & 1) {
    const _r191 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 956)(1, "div", 957);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_26_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r191);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.showDungeonPanel ? null : ctx_r2.closeDungeonDialog());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "div", 958)(3, "div", 959)(4, "h2");
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_26_Template_button_click_6_listener() {
      \u0275\u0275restoreView(_r191);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.showDungeonPanel ? ctx_r2.onDungeonEscape() : ctx_r2.closeDungeonDialog());
    });
    \u0275\u0275text(7, "\u2715");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(8, NovelGeneratorComponent_div_26_div_8_Template, 7, 2, "div", 1045);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275classProp("dungeon-active", ctx_r2.showDungeonPanel);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("\u{1F3F0} ", ctx_r2.showDungeonPanel ? "\uB358\uC804 \uD0D0\uD5D8" : "\uB358\uC804");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", !ctx_r2.showDungeonPanel);
  }
}
function NovelGeneratorComponent_div_29_div_8_div_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r196 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1051);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_29_div_8_div_5_Template_div_click_0_listener() {
      const dungeonType_r197 = \u0275\u0275restoreView(_r196).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.selectDungeonType(dungeonType_r197));
    });
    \u0275\u0275elementStart(1, "div", 1057);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 1058);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 1059);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "div", 1060);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const dungeonType_r197 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("selected", (ctx_r2.selectedDungeonType == null ? null : ctx_r2.selectedDungeonType.id) === dungeonType_r197.id);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(dungeonType_r197.icon);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(dungeonType_r197.koreanName);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("Lv.", dungeonType_r197.minLevel, "-", dungeonType_r197.recommendedLevel);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", dungeonType_r197.baseFloors, "\uCE35");
  }
}
function NovelGeneratorComponent_div_29_div_8_div_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r198 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1047)(1, "h3");
    \u0275\u0275text(2, "\uB09C\uC774\uB3C4 \uC120\uD0DD");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 1061)(4, "button", 1062);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_29_div_8_div_6_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r198);
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.selectDifficulty("easy"));
    });
    \u0275\u0275text(5, " \u{1F60A} \uC26C\uC6C0 ");
    \u0275\u0275elementStart(6, "span", 1063);
    \u0275\u0275text(7, "\xD70.75");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "button", 1064);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_29_div_8_div_6_Template_button_click_8_listener() {
      \u0275\u0275restoreView(_r198);
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.selectDifficulty("normal"));
    });
    \u0275\u0275text(9, " \u{1F610} \uBCF4\uD1B5 ");
    \u0275\u0275elementStart(10, "span", 1063);
    \u0275\u0275text(11, "\xD71.0");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "button", 1065);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_29_div_8_div_6_Template_button_click_12_listener() {
      \u0275\u0275restoreView(_r198);
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.selectDifficulty("hard"));
    });
    \u0275\u0275text(13, " \u{1F630} \uC5B4\uB824\uC6C0 ");
    \u0275\u0275elementStart(14, "span", 1063);
    \u0275\u0275text(15, "\xD71.25");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(16, "button", 1066);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_29_div_8_div_6_Template_button_click_16_listener() {
      \u0275\u0275restoreView(_r198);
      const ctx_r2 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r2.selectDifficulty("hell"));
    });
    \u0275\u0275text(17, " \u{1F480} \uC9C0\uC625 ");
    \u0275\u0275elementStart(18, "span", 1063);
    \u0275\u0275text(19, "\xD71.5");
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275classProp("selected", ctx_r2.selectedDifficulty === "easy");
    \u0275\u0275advance(4);
    \u0275\u0275classProp("selected", ctx_r2.selectedDifficulty === "normal");
    \u0275\u0275advance(4);
    \u0275\u0275classProp("selected", ctx_r2.selectedDifficulty === "hard");
    \u0275\u0275advance(4);
    \u0275\u0275classProp("selected", ctx_r2.selectedDifficulty === "hell");
  }
}
function NovelGeneratorComponent_div_29_div_8_div_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r199 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1047)(1, "h3");
    \u0275\u0275text(2, "\uD14C\uC2A4\uD2B8 \uC635\uC158");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 1067)(4, "label", 1068)(5, "input", 1069);
    \u0275\u0275twoWayListener("ngModelChange", function NovelGeneratorComponent_div_29_div_8_div_7_Template_input_ngModelChange_5_listener($event) {
      \u0275\u0275restoreView(_r199);
      const ctx_r2 = \u0275\u0275nextContext(3);
      \u0275\u0275twoWayBindingSet(ctx_r2.dungeonTestOptions.godMode, $event) || (ctx_r2.dungeonTestOptions.godMode = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "span");
    \u0275\u0275text(7, "\u{1F6E1}\uFE0F \uBB34\uC801 \uBAA8\uB4DC (HP \uC790\uB3D9 \uD68C\uBCF5)");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "label", 1068)(9, "input", 1069);
    \u0275\u0275twoWayListener("ngModelChange", function NovelGeneratorComponent_div_29_div_8_div_7_Template_input_ngModelChange_9_listener($event) {
      \u0275\u0275restoreView(_r199);
      const ctx_r2 = \u0275\u0275nextContext(3);
      \u0275\u0275twoWayBindingSet(ctx_r2.dungeonTestOptions.oneHitKill, $event) || (ctx_r2.dungeonTestOptions.oneHitKill = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "span");
    \u0275\u0275text(11, "\u2694\uFE0F \uC6D0\uD0AC \uBAA8\uB4DC (\uBAAC\uC2A4\uD130 1\uD0C0)");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "label", 1068)(13, "input", 1069);
    \u0275\u0275twoWayListener("ngModelChange", function NovelGeneratorComponent_div_29_div_8_div_7_Template_input_ngModelChange_13_listener($event) {
      \u0275\u0275restoreView(_r199);
      const ctx_r2 = \u0275\u0275nextContext(3);
      \u0275\u0275twoWayBindingSet(ctx_r2.dungeonTestOptions.showAllRooms, $event) || (ctx_r2.dungeonTestOptions.showAllRooms = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "span");
    \u0275\u0275text(15, "\u{1F5FA}\uFE0F \uC804\uCCB4 \uB9F5 \uACF5\uAC1C");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(16, "label", 1068)(17, "input", 1069);
    \u0275\u0275twoWayListener("ngModelChange", function NovelGeneratorComponent_div_29_div_8_div_7_Template_input_ngModelChange_17_listener($event) {
      \u0275\u0275restoreView(_r199);
      const ctx_r2 = \u0275\u0275nextContext(3);
      \u0275\u0275twoWayBindingSet(ctx_r2.dungeonTestOptions.skipCombat, $event) || (ctx_r2.dungeonTestOptions.skipCombat = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "span");
    \u0275\u0275text(19, "\u23ED\uFE0F \uC804\uD22C \uC2A4\uD0B5 (\uC790\uB3D9 \uC2B9\uB9AC)");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(20, "label", 1068)(21, "input", 1069);
    \u0275\u0275twoWayListener("ngModelChange", function NovelGeneratorComponent_div_29_div_8_div_7_Template_input_ngModelChange_21_listener($event) {
      \u0275\u0275restoreView(_r199);
      const ctx_r2 = \u0275\u0275nextContext(3);
      \u0275\u0275twoWayBindingSet(ctx_r2.dungeonTestOptions.unlockAllRooms, $event) || (ctx_r2.dungeonTestOptions.unlockAllRooms = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "span");
    \u0275\u0275text(23, "\u{1F513} \uBAA8\uB4E0 \uBC29 \uC7A0\uAE08 \uD574\uC81C");
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(5);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.dungeonTestOptions.godMode);
    \u0275\u0275advance(4);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.dungeonTestOptions.oneHitKill);
    \u0275\u0275advance(4);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.dungeonTestOptions.showAllRooms);
    \u0275\u0275advance(4);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.dungeonTestOptions.skipCombat);
    \u0275\u0275advance(4);
    \u0275\u0275twoWayProperty("ngModel", ctx_r2.dungeonTestOptions.unlockAllRooms);
  }
}
function NovelGeneratorComponent_div_29_div_8_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1047)(1, "h3");
    \u0275\u0275text(2, "\uD50C\uB808\uC774\uC5B4 \uC0C1\uD0DC");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 1070)(4, "div", 267)(5, "label");
    \u0275\u0275text(6, "\uB808\uBCA8:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "span");
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 267)(10, "label");
    \u0275\u0275text(11, "HP:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "span");
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "div", 267)(15, "label");
    \u0275\u0275text(16, "MP:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "span");
    \u0275\u0275text(18);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(19, "div", 267)(20, "label");
    \u0275\u0275text(21, "\uACF5\uACA9\uB825:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "span");
    \u0275\u0275text(23);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(24, "div", 267)(25, "label");
    \u0275\u0275text(26, "\uBC29\uC5B4\uB825:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(27, "span");
    \u0275\u0275text(28);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.level);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate2("", ctx_r2.playerCharacter.hp, " / ", ctx_r2.playerCharacter.maxHp);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate2("", ctx_r2.playerCharacter.mp, " / ", ctx_r2.playerCharacter.maxMp);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.attack);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r2.playerCharacter.defense);
  }
}
function NovelGeneratorComponent_div_29_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1046)(1, "div", 1047)(2, "h3");
    \u0275\u0275text(3, "\uB358\uC804 \uC120\uD0DD");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 1048);
    \u0275\u0275template(5, NovelGeneratorComponent_div_29_div_8_div_5_Template, 9, 7, "div", 1049);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(6, NovelGeneratorComponent_div_29_div_8_div_6_Template, 20, 8, "div", 1056)(7, NovelGeneratorComponent_div_29_div_8_div_7_Template, 24, 5, "div", 1056)(8, NovelGeneratorComponent_div_29_div_8_div_8_Template, 29, 7, "div", 1056);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275property("ngForOf", ctx_r2.dungeonTypes);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedDungeonType);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedDifficulty);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedDifficulty);
  }
}
function NovelGeneratorComponent_div_29_div_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r200 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1071)(1, "app-dungeon-explorer", 1072);
    \u0275\u0275listener("roomMove", function NovelGeneratorComponent_div_29_div_9_Template_app_dungeon_explorer_roomMove_1_listener($event) {
      \u0275\u0275restoreView(_r200);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onDungeonRoomMove($event));
    })("monsterAttack", function NovelGeneratorComponent_div_29_div_9_Template_app_dungeon_explorer_monsterAttack_1_listener($event) {
      \u0275\u0275restoreView(_r200);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onDungeonMonsterAttack($event));
    })("interactableUse", function NovelGeneratorComponent_div_29_div_9_Template_app_dungeon_explorer_interactableUse_1_listener($event) {
      \u0275\u0275restoreView(_r200);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onDungeonInteractableUse($event));
    })("dungeonEscape", function NovelGeneratorComponent_div_29_div_9_Template_app_dungeon_explorer_dungeonEscape_1_listener() {
      \u0275\u0275restoreView(_r200);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onDungeonEscape());
    })("floorMove", function NovelGeneratorComponent_div_29_div_9_Template_app_dungeon_explorer_floorMove_1_listener($event) {
      \u0275\u0275restoreView(_r200);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onDungeonFloorMove($event));
    })("rewardsClaimed", function NovelGeneratorComponent_div_29_div_9_Template_app_dungeon_explorer_rewardsClaimed_1_listener($event) {
      \u0275\u0275restoreView(_r200);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.onDungeonRewardsClaimed($event));
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275property("dungeon", ctx_r2.currentDungeon)("currentRoom", ctx_r2.currentDungeonRoom)("playerHp", ctx_r2.playerCharacter.hp)("playerMaxHp", ctx_r2.playerCharacter.maxHp)("playerMp", ctx_r2.playerCharacter.mp)("playerMaxMp", ctx_r2.playerCharacter.maxMp)("playerName", ctx_r2.playerCharacter.name)("playerLevel", ctx_r2.playerCharacter.level)("playerAttackPower", ctx_r2.playerCharacter.attack)("playerDefensePower", ctx_r2.playerCharacter.defense)("playerEquipment", ctx_r2.getPlayerEquipment())("playerSkills", ctx_r2.getPlayerSkills());
  }
}
function NovelGeneratorComponent_div_29_div_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r201 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1073)(1, "button", 1074);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_29_div_10_Template_button_click_1_listener() {
      \u0275\u0275restoreView(_r201);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.closeDungeonDialog());
    });
    \u0275\u0275text(2, "\uCDE8\uC18C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "button", 1075);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_29_div_10_Template_button_click_3_listener() {
      \u0275\u0275restoreView(_r201);
      const ctx_r2 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r2.startDungeon());
    });
    \u0275\u0275text(4, " \u{1F3F0} \uB358\uC804 \uC785\uC7A5 ");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275property("disabled", !ctx_r2.selectedDungeonType || !ctx_r2.selectedDifficulty);
  }
}
function NovelGeneratorComponent_div_29_Template(rf, ctx) {
  if (rf & 1) {
    const _r195 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 956)(1, "div", 957);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_29_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r195);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.showDungeonPanel ? null : ctx_r2.closeDungeonDialog());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "div", 958)(3, "div", 959)(4, "h2");
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_29_Template_button_click_6_listener() {
      \u0275\u0275restoreView(_r195);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.showDungeonPanel ? ctx_r2.onDungeonEscape() : ctx_r2.closeDungeonDialog());
    });
    \u0275\u0275text(7, "\u2715");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(8, NovelGeneratorComponent_div_29_div_8_Template, 9, 4, "div", 1045)(9, NovelGeneratorComponent_div_29_div_9_Template, 2, 12, "div", 1054)(10, NovelGeneratorComponent_div_29_div_10_Template, 5, 1, "div", 1055);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275classProp("dungeon-active", ctx_r2.showDungeonPanel);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("\u{1F3F0} ", ctx_r2.showDungeonPanel ? "\uB358\uC804 \uD0D0\uD5D8" : "\uB358\uC804");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", !ctx_r2.showDungeonPanel);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.showDungeonPanel && ctx_r2.currentDungeon && ctx_r2.currentDungeonRoom);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r2.showDungeonPanel);
  }
}
function NovelGeneratorComponent_div_30_Template(rf, ctx) {
  if (rf & 1) {
    const _r202 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1076)(1, "app-dungeon-explorer", 1077);
    \u0275\u0275listener("roomMove", function NovelGeneratorComponent_div_30_Template_app_dungeon_explorer_roomMove_1_listener($event) {
      \u0275\u0275restoreView(_r202);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onDungeonRoomMove($event));
    })("monsterAttack", function NovelGeneratorComponent_div_30_Template_app_dungeon_explorer_monsterAttack_1_listener($event) {
      \u0275\u0275restoreView(_r202);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onDungeonMonsterAttack($event));
    })("interactableUse", function NovelGeneratorComponent_div_30_Template_app_dungeon_explorer_interactableUse_1_listener($event) {
      \u0275\u0275restoreView(_r202);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onDungeonInteractableUse($event));
    })("dungeonEscape", function NovelGeneratorComponent_div_30_Template_app_dungeon_explorer_dungeonEscape_1_listener() {
      \u0275\u0275restoreView(_r202);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onDungeonEscape());
    })("floorMove", function NovelGeneratorComponent_div_30_Template_app_dungeon_explorer_floorMove_1_listener($event) {
      \u0275\u0275restoreView(_r202);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onDungeonFloorMove($event));
    })("rewardsClaimed", function NovelGeneratorComponent_div_30_Template_app_dungeon_explorer_rewardsClaimed_1_listener($event) {
      \u0275\u0275restoreView(_r202);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onDungeonRewardsClaimed($event));
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("dungeon", ctx_r2.currentDungeon)("currentRoom", ctx_r2.currentDungeonRoom)("playerHp", ctx_r2.playerCharacter.hp)("playerMaxHp", ctx_r2.playerCharacter.maxHp)("playerMp", ctx_r2.playerCharacter.mp)("playerMaxMp", ctx_r2.playerCharacter.maxMp);
  }
}
function NovelGeneratorComponent_div_31_div_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1082)(1, "div", 1083)(2, "span", 1084);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 1085);
    \u0275\u0275text(5);
    \u0275\u0275pipe(6, "number");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("Lv.", ctx_r2.selectedCharacterGameData.playerCharacter.level);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u{1F4B0} ", \u0275\u0275pipeBind1(6, 2, ctx_r2.selectedCharacterGameData.playerCharacter.gold), "G");
  }
}
function NovelGeneratorComponent_div_31_div_13_div_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const weapon_r204 = ctx.ngIf;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(weapon_r204.name || weapon_r204.baseType);
  }
}
function NovelGeneratorComponent_div_31_div_13_ng_template_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uBB34\uAE30");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_31_div_13_div_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const armor_r205 = ctx.ngIf;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(armor_r205.name || armor_r205.baseType);
  }
}
function NovelGeneratorComponent_div_31_div_13_ng_template_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uBC29\uC5B4\uAD6C");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_31_div_13_div_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const helmet_r206 = ctx.ngIf;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(helmet_r206.name || helmet_r206.baseType);
  }
}
function NovelGeneratorComponent_div_31_div_13_ng_template_23_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uD22C\uAD6C");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_31_div_13_div_28_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const amulet_r207 = ctx.ngIf;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(amulet_r207.name || amulet_r207.baseType);
  }
}
function NovelGeneratorComponent_div_31_div_13_ng_template_29_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uBAA9\uAC78\uC774");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_31_div_13_div_34_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const belt_r208 = ctx.ngIf;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(belt_r208.name || belt_r208.baseType);
  }
}
function NovelGeneratorComponent_div_31_div_13_ng_template_35_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uD5C8\uB9AC\uB760");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_31_div_13_div_41_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const gloves_r209 = ctx.ngIf;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(gloves_r209.name || gloves_r209.baseType);
  }
}
function NovelGeneratorComponent_div_31_div_13_ng_template_42_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uC7A5\uAC11");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_31_div_13_div_47_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const boots_r210 = ctx.ngIf;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(boots_r210.name || boots_r210.baseType);
  }
}
function NovelGeneratorComponent_div_31_div_13_ng_template_48_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uC2E0\uBC1C");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_31_div_13_div_54_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ring1_r211 = ctx.ngIf;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ring1_r211.name || ring1_r211.baseType);
  }
}
function NovelGeneratorComponent_div_31_div_13_ng_template_55_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uBC18\uC9C0");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_31_div_13_div_60_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 991)(1, "div", 387)(2, "div", 388);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ring2_r212 = ctx.ngIf;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ring2_r212.name || ring2_r212.baseType);
  }
}
function NovelGeneratorComponent_div_31_div_13_ng_template_61_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 390);
    \u0275\u0275text(1, "\uBC18\uC9C0");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_31_div_13_div_68_div_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 399);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r213 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" \xD7", item_r213.quantity, " ");
  }
}
function NovelGeneratorComponent_div_31_div_13_div_68_div_15_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r213 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u2694\uFE0F \uACF5\uACA9\uB825: +", item_r213.stats.attack);
  }
}
function NovelGeneratorComponent_div_31_div_13_div_68_div_15_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r213 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825: +", item_r213.stats.defense);
  }
}
function NovelGeneratorComponent_div_31_div_13_div_68_div_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1104);
    \u0275\u0275template(1, NovelGeneratorComponent_div_31_div_13_div_68_div_15_div_1_Template, 2, 1, "div", 97)(2, NovelGeneratorComponent_div_31_div_13_div_68_div_15_div_2_Template, 2, 1, "div", 97);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r213 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r213.stats.attack);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r213.stats.defense);
  }
}
function NovelGeneratorComponent_div_31_div_13_div_68_div_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1105);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r213 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(item_r213.description);
  }
}
function NovelGeneratorComponent_div_31_div_13_div_68_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1097)(1, "div", 393)(2, "div", 394);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 395);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275template(6, NovelGeneratorComponent_div_31_div_13_div_68_div_6_Template, 2, 1, "div", 396);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "div", 1098)(8, "div", 1099)(9, "div", 388);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "div", 1100);
    \u0275\u0275text(12);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "div", 1101);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd();
    \u0275\u0275template(15, NovelGeneratorComponent_div_31_div_13_div_68_div_15_Template, 3, 2, "div", 1102)(16, NovelGeneratorComponent_div_31_div_13_div_68_div_16_Template, 2, 1, "div", 1103);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r213 = ctx.$implicit;
    \u0275\u0275classMap("rarity-" + (item_r213.rarity || "common"));
    \u0275\u0275property("title", item_r213.name);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r213.icon || "\u{1F4E6}");
    \u0275\u0275advance();
    \u0275\u0275property("title", item_r213.name);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", item_r213.name, " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r213.quantity && item_r213.quantity > 1);
    \u0275\u0275advance(2);
    \u0275\u0275classMap("rarity-" + (item_r213.rarity || "common"));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r213.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r213.rarity || "common");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r213.type);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r213.stats);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r213.description);
  }
}
function NovelGeneratorComponent_div_31_div_13_div_69_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 404)(1, "div", 393)(2, "div", 405);
    \u0275\u0275text(3, "\u{1F4E6}");
    \u0275\u0275elementEnd()()();
  }
}
function NovelGeneratorComponent_div_31_div_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 351)(1, "div", 352)(2, "h4", 325);
    \u0275\u0275text(3, "\u2694\uFE0F \uC7A5\uCC29 \uC911\uC778 \uC7A5\uBE44");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 353)(5, "div", 354)(6, "div", 1086)(7, "div", 356);
    \u0275\u0275text(8, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275template(9, NovelGeneratorComponent_div_31_div_13_div_9_Template, 4, 1, "div", 978)(10, NovelGeneratorComponent_div_31_div_13_ng_template_10_Template, 2, 0, "ng-template", null, 1, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "div", 1087)(13, "div", 356);
    \u0275\u0275text(14, "\u{1F6E1}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275template(15, NovelGeneratorComponent_div_31_div_13_div_15_Template, 4, 1, "div", 978)(16, NovelGeneratorComponent_div_31_div_13_ng_template_16_Template, 2, 0, "ng-template", null, 2, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(18, "div", 359)(19, "div", 1088)(20, "div", 356);
    \u0275\u0275text(21, "\u26D1\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275template(22, NovelGeneratorComponent_div_31_div_13_div_22_Template, 4, 1, "div", 978)(23, NovelGeneratorComponent_div_31_div_13_ng_template_23_Template, 2, 0, "ng-template", null, 3, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "div", 1089)(26, "div", 356);
    \u0275\u0275text(27, "\u{1F4FF}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(28, NovelGeneratorComponent_div_31_div_13_div_28_Template, 4, 1, "div", 978)(29, NovelGeneratorComponent_div_31_div_13_ng_template_29_Template, 2, 0, "ng-template", null, 4, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(31, "div", 1090)(32, "div", 356);
    \u0275\u0275text(33, "\u{1F454}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(34, NovelGeneratorComponent_div_31_div_13_div_34_Template, 4, 1, "div", 978)(35, NovelGeneratorComponent_div_31_div_13_ng_template_35_Template, 2, 0, "ng-template", null, 5, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(37, "div", 363)(38, "div", 1091)(39, "div", 356);
    \u0275\u0275text(40, "\u{1F9E4}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(41, NovelGeneratorComponent_div_31_div_13_div_41_Template, 4, 1, "div", 978)(42, NovelGeneratorComponent_div_31_div_13_ng_template_42_Template, 2, 0, "ng-template", null, 6, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(44, "div", 1092)(45, "div", 356);
    \u0275\u0275text(46, "\u{1F462}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(47, NovelGeneratorComponent_div_31_div_13_div_47_Template, 4, 1, "div", 978)(48, NovelGeneratorComponent_div_31_div_13_ng_template_48_Template, 2, 0, "ng-template", null, 7, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(50, "div", 366)(51, "div", 1093)(52, "div", 356);
    \u0275\u0275text(53, "\u{1F48D}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(54, NovelGeneratorComponent_div_31_div_13_div_54_Template, 4, 1, "div", 978)(55, NovelGeneratorComponent_div_31_div_13_ng_template_55_Template, 2, 0, "ng-template", null, 8, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(57, "div", 1094)(58, "div", 356);
    \u0275\u0275text(59, "\u{1F48D}");
    \u0275\u0275elementEnd();
    \u0275\u0275template(60, NovelGeneratorComponent_div_31_div_13_div_60_Template, 4, 1, "div", 978)(61, NovelGeneratorComponent_div_31_div_13_ng_template_61_Template, 2, 0, "ng-template", null, 9, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(63, "div", 369)(64, "h4", 325);
    \u0275\u0275text(65, "\u{1F392} \uBCF4\uC720 \uC544\uC774\uD15C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(66, "div", 380)(67, "div", 1095);
    \u0275\u0275template(68, NovelGeneratorComponent_div_31_div_13_div_68_Template, 17, 14, "div", 1096)(69, NovelGeneratorComponent_div_31_div_13_div_69_Template, 4, 0, "div", 383);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(70, "div", 384)(71, "span", 385);
    \u0275\u0275text(72);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const emptyWeapon_r214 = \u0275\u0275reference(11);
    const emptyArmor_r215 = \u0275\u0275reference(17);
    const emptyHelmet_r216 = \u0275\u0275reference(24);
    const emptyAmulet_r217 = \u0275\u0275reference(30);
    const emptyBelt_r218 = \u0275\u0275reference(36);
    const emptyGloves_r219 = \u0275\u0275reference(43);
    const emptyBoots_r220 = \u0275\u0275reference(49);
    const emptyRing1_r221 = \u0275\u0275reference(56);
    const emptyRing2_r222 = \u0275\u0275reference(62);
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(6);
    \u0275\u0275classProp("has-item", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.weapon)("rarity-common", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.weapon == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.weapon.rarity) === "common")("rarity-uncommon", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.weapon == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.weapon.rarity) === "uncommon")("rarity-rare", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.weapon == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.weapon.rarity) === "rare")("rarity-epic", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.weapon == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.weapon.rarity) === "epic")("rarity-legendary", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.weapon == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.weapon.rarity) === "legendary");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.weapon)("ngIfElse", emptyWeapon_r214);
    \u0275\u0275advance(3);
    \u0275\u0275classProp("has-item", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.armor)("rarity-common", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.armor == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.armor.rarity) === "common")("rarity-uncommon", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.armor == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.armor.rarity) === "uncommon")("rarity-rare", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.armor == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.armor.rarity) === "rare")("rarity-epic", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.armor == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.armor.rarity) === "epic")("rarity-legendary", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.armor == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.armor.rarity) === "legendary");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.armor)("ngIfElse", emptyArmor_r215);
    \u0275\u0275advance(4);
    \u0275\u0275classProp("has-item", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.helmet)("rarity-common", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.helmet == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.helmet.rarity) === "common")("rarity-uncommon", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.helmet == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.helmet.rarity) === "uncommon")("rarity-rare", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.helmet == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.helmet.rarity) === "rare")("rarity-epic", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.helmet == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.helmet.rarity) === "epic")("rarity-legendary", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.helmet == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.helmet.rarity) === "legendary");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.helmet)("ngIfElse", emptyHelmet_r216);
    \u0275\u0275advance(3);
    \u0275\u0275classProp("has-item", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.amulet)("rarity-common", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.amulet == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.amulet.rarity) === "common")("rarity-uncommon", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.amulet == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.amulet.rarity) === "uncommon")("rarity-rare", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.amulet == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.amulet.rarity) === "rare")("rarity-epic", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.amulet == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.amulet.rarity) === "epic")("rarity-legendary", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.amulet == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.amulet.rarity) === "legendary");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.amulet)("ngIfElse", emptyAmulet_r217);
    \u0275\u0275advance(3);
    \u0275\u0275classProp("has-item", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.belt)("rarity-common", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.belt == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.belt.rarity) === "common")("rarity-uncommon", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.belt == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.belt.rarity) === "uncommon")("rarity-rare", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.belt == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.belt.rarity) === "rare")("rarity-epic", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.belt == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.belt.rarity) === "epic")("rarity-legendary", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.belt == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.belt.rarity) === "legendary");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.belt)("ngIfElse", emptyBelt_r218);
    \u0275\u0275advance(4);
    \u0275\u0275classProp("has-item", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.gloves)("rarity-common", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.gloves == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.gloves.rarity) === "common")("rarity-uncommon", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.gloves == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.gloves.rarity) === "uncommon")("rarity-rare", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.gloves == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.gloves.rarity) === "rare")("rarity-epic", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.gloves == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.gloves.rarity) === "epic")("rarity-legendary", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.gloves == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.gloves.rarity) === "legendary");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.gloves)("ngIfElse", emptyGloves_r219);
    \u0275\u0275advance(3);
    \u0275\u0275classProp("has-item", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.boots)("rarity-common", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.boots == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.boots.rarity) === "common")("rarity-uncommon", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.boots == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.boots.rarity) === "uncommon")("rarity-rare", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.boots == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.boots.rarity) === "rare")("rarity-epic", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.boots == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.boots.rarity) === "epic")("rarity-legendary", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.boots == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.boots.rarity) === "legendary");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.boots)("ngIfElse", emptyBoots_r220);
    \u0275\u0275advance(4);
    \u0275\u0275classProp("has-item", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring1)("rarity-common", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring1 == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring1.rarity) === "common")("rarity-uncommon", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring1 == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring1.rarity) === "uncommon")("rarity-rare", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring1 == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring1.rarity) === "rare")("rarity-epic", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring1 == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring1.rarity) === "epic")("rarity-legendary", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring1 == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring1.rarity) === "legendary");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring1)("ngIfElse", emptyRing1_r221);
    \u0275\u0275advance(3);
    \u0275\u0275classProp("has-item", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring2)("rarity-common", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring2 == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring2.rarity) === "common")("rarity-uncommon", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring2 == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring2.rarity) === "uncommon")("rarity-rare", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring2 == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring2.rarity) === "rare")("rarity-epic", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring2 == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring2.rarity) === "epic")("rarity-legendary", (ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring2 == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring2.rarity) === "legendary");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData.playerCharacter.equipment == null ? null : ctx_r2.selectedCharacterGameData.playerCharacter.equipment.ring2)("ngIfElse", emptyRing2_r222);
    \u0275\u0275advance(8);
    \u0275\u0275property("ngForOf", ctx_r2.selectedCharacterGameData.playerCharacter.inventory);
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r2.getEmptyCharacterInventorySlots());
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate2(" ", (ctx_r2.selectedCharacterGameData.playerCharacter.inventory || \u0275\u0275pureFunction0(130, _c1)).length, " / ", ctx_r2.maxInventorySize, " \uC544\uC774\uD15C ");
  }
}
function NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_14_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 462)(1, "span", 328);
    \u0275\u0275text(2, "\u2694\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 272);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r224 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", item_r224.stats.attack);
  }
}
function NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_14_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 462)(1, "span", 328);
    \u0275\u0275text(2, "\u{1F6E1}\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 272);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r224 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", item_r224.stats.defense);
  }
}
function NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_14_div_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 462)(1, "span", 328);
    \u0275\u0275text(2, "\u2764\uFE0F");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 272);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r224 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", item_r224.stats.hp);
  }
}
function NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_14_div_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 462)(1, "span", 328);
    \u0275\u0275text(2, "\u{1F499}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 272);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r224 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", item_r224.stats.mp);
  }
}
function NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 460);
    \u0275\u0275template(1, NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_14_div_1_Template, 5, 1, "div", 461)(2, NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_14_div_2_Template, 5, 1, "div", 461)(3, NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_14_div_3_Template, 5, 1, "div", 461)(4, NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_14_div_4_Template, 5, 1, "div", 461);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r224 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r224.stats.attack);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r224.stats.defense);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r224.stats.hp);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r224.stats.mp);
  }
}
function NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_15_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 465)(1, "span", 466);
    \u0275\u0275text(2, "\u2728");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 467);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const effect_r225 = ctx.$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(effect_r225);
  }
}
function NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 463);
    \u0275\u0275template(1, NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_15_div_1_Template, 5, 1, "div", 464);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r224 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", item_r224.effects.slice(0, 2));
  }
}
function NovelGeneratorComponent_div_31_div_14_div_17_div_1_span_25_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span")(1, "span", 468);
    \u0275\u0275text(2, "\u{1F6D2}");
    \u0275\u0275elementEnd();
    \u0275\u0275text(3, " \uAD6C\uB9E4\uD558\uAE30 ");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_31_div_14_div_17_div_1_span_26_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span")(1, "span", 468);
    \u0275\u0275text(2, "\u{1F4B8}");
    \u0275\u0275elementEnd();
    \u0275\u0275text(3, " \uACE8\uB4DC \uBD80\uC871 ");
    \u0275\u0275elementEnd();
  }
}
function NovelGeneratorComponent_div_31_div_14_div_17_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r223 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 179)(1, "div", 445)(2, "span", 446);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 447);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 448)(7, "div", 449);
    \u0275\u0275text(8, "\u{1F4E6}");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 450)(10, "h5", 101);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "p", 451);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd();
    \u0275\u0275template(14, NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_14_Template, 5, 4, "div", 452)(15, NovelGeneratorComponent_div_31_div_14_div_17_div_1_div_15_Template, 2, 1, "div", 453);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "div", 454)(17, "div", 455)(18, "span", 456);
    \u0275\u0275text(19, "\u{1F4B0}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "span", 457);
    \u0275\u0275text(21);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "span", 458);
    \u0275\u0275text(23, "G");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(24, "button", 459);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_31_div_14_div_17_div_1_Template_button_click_24_listener($event) {
      const item_r224 = \u0275\u0275restoreView(_r223).$implicit;
      const ctx_r2 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r2.buyItemForCharacter(item_r224, $event));
    });
    \u0275\u0275template(25, NovelGeneratorComponent_div_31_div_14_div_17_div_1_span_25_Template, 4, 0, "span", 97)(26, NovelGeneratorComponent_div_31_div_14_div_17_div_1_span_26_Template, 4, 0, "span", 97);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const item_r224 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext(4);
    \u0275\u0275classProp("grade-legendary", item_r224.grade === "\uC2E0\uD654" || item_r224.grade === "\uC804\uC124")("grade-epic", item_r224.grade === "\uC601\uC6C5")("grade-rare", item_r224.grade === "\uD76C\uADC0")("grade-uncommon", item_r224.grade === "\uACE0\uAE09")("grade-common", item_r224.grade === "\uC77C\uBC18");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r224.grade);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r224.type);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(item_r224.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r224.description);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r224.stats && (item_r224.stats.attack || item_r224.stats.defense || item_r224.stats.hp || item_r224.stats.mp));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r224.effects && item_r224.effects.length > 0);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(item_r224.price || ctx_r2.calculateItemPriceByGrade(item_r224.grade));
    \u0275\u0275advance(3);
    \u0275\u0275classProp("can-buy", ctx_r2.selectedCharacterGameData.playerCharacter.gold >= (item_r224.price || ctx_r2.calculateItemPriceByGrade(item_r224.grade)))("cannot-buy", ctx_r2.selectedCharacterGameData.playerCharacter.gold < (item_r224.price || ctx_r2.calculateItemPriceByGrade(item_r224.grade)));
    \u0275\u0275property("disabled", ctx_r2.selectedCharacterGameData.playerCharacter.gold < (item_r224.price || ctx_r2.calculateItemPriceByGrade(item_r224.grade)));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData.playerCharacter.gold >= (item_r224.price || ctx_r2.calculateItemPriceByGrade(item_r224.grade)));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData.playerCharacter.gold < (item_r224.price || ctx_r2.calculateItemPriceByGrade(item_r224.grade)));
  }
}
function NovelGeneratorComponent_div_31_div_14_div_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 443);
    \u0275\u0275template(1, NovelGeneratorComponent_div_31_div_14_div_17_div_1_Template, 27, 24, "div", 444);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r2.savedItems);
  }
}
function NovelGeneratorComponent_div_31_div_14_div_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 469)(1, "div", 405);
    \u0275\u0275text(2, "\u{1F3EA}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "h5", 470);
    \u0275\u0275text(4, "\uC0C1\uC810\uC5D0 \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "p", 471);
    \u0275\u0275text(6, "AI \uC544\uC774\uD15C \uC0DD\uC131\uAE30\uB85C \uD2B9\uBCC4\uD55C \uC544\uC774\uD15C\uC744 \uB9CC\uB4E4\uC5B4\uBCF4\uC138\uC694!");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "div", 472)(8, "span", 473);
    \u0275\u0275text(9, "\u{1F4A1}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "span", 474);
    \u0275\u0275text(11, '\uD648 \uD654\uBA74\uC758 "AI \uC544\uC774\uD15C \uC0DD\uC131" \uBA54\uB274\uB97C \uC774\uC6A9\uD558\uC138\uC694');
    \u0275\u0275elementEnd()()();
  }
}
function NovelGeneratorComponent_div_31_div_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 351)(1, "div", 431)(2, "div", 432)(3, "div", 433)(4, "h4", 434);
    \u0275\u0275text(5, "\u{1F3EA} \uBAA8\uD5D8\uAC00 \uC0C1\uC810");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "p", 435);
    \u0275\u0275text(7, "AI\uAC00 \uC0DD\uC131\uD55C \uD2B9\uBCC4\uD55C \uC544\uC774\uD15C\uC744 \uAD6C\uB9E4\uD558\uC138\uC694");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 436)(9, "div", 437);
    \u0275\u0275text(10, "\u{1F4B0}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "div", 438)(12, "span", 439);
    \u0275\u0275text(13, "\uBCF4\uC720 \uACE8\uB4DC");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "span", 440);
    \u0275\u0275text(15);
    \u0275\u0275pipe(16, "number");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275template(17, NovelGeneratorComponent_div_31_div_14_div_17_Template, 2, 1, "div", 441)(18, NovelGeneratorComponent_div_31_div_14_div_18_Template, 12, 0, "div", 442);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(15);
    \u0275\u0275textInterpolate1("", \u0275\u0275pipeBind1(16, 3, ctx_r2.selectedCharacterGameData.playerCharacter.gold), " G");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r2.savedItems.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.savedItems.length === 0);
  }
}
function NovelGeneratorComponent_div_31_Template(rf, ctx) {
  if (rf & 1) {
    const _r203 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1078);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_31_Template_div_click_0_listener() {
      \u0275\u0275restoreView(_r203);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.closeCharacterInventory());
    });
    \u0275\u0275elementStart(1, "div", 1079);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_31_Template_div_click_1_listener($event) {
      \u0275\u0275restoreView(_r203);
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275elementStart(2, "div", 211)(3, "h3");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "button", 79);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_31_Template_button_click_5_listener() {
      \u0275\u0275restoreView(_r203);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.closeCharacterInventory());
    });
    \u0275\u0275text(6, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(7, NovelGeneratorComponent_div_31_div_7_Template, 7, 4, "div", 1080);
    \u0275\u0275elementStart(8, "div", 347)(9, "button", 348);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_31_Template_button_click_9_listener() {
      \u0275\u0275restoreView(_r203);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.characterInventoryTab = "equipment");
    });
    \u0275\u0275text(10, " \u2694\uFE0F \uC7A5\uBE44 & \uC778\uBCA4\uD1A0\uB9AC ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "button", 348);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_31_Template_button_click_11_listener() {
      \u0275\u0275restoreView(_r203);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.characterInventoryTab = "shop");
    });
    \u0275\u0275text(12, " \u{1F6D2} \uC0C1\uC810 ");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(13, NovelGeneratorComponent_div_31_div_13_Template, 73, 131, "div", 350)(14, NovelGeneratorComponent_div_31_div_14_Template, 19, 5, "div", 350);
    \u0275\u0275elementStart(15, "div", 1081)(16, "button", 1074);
    \u0275\u0275listener("click", function NovelGeneratorComponent_div_31_Template_button_click_16_listener() {
      \u0275\u0275restoreView(_r203);
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.closeCharacterInventory());
    });
    \u0275\u0275text(17, "\uB2EB\uAE30");
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("\u{1F392} ", ctx_r2.selectedCharacterForInventory == null ? null : ctx_r2.selectedCharacterForInventory.name, "\uC758 \uC778\uBCA4\uD1A0\uB9AC & \uC7A5\uBE44");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData);
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active", ctx_r2.characterInventoryTab === "equipment");
    \u0275\u0275advance(2);
    \u0275\u0275classProp("active", ctx_r2.characterInventoryTab === "shop");
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData && ctx_r2.characterInventoryTab === "equipment");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r2.selectedCharacterGameData && ctx_r2.characterInventoryTab === "shop");
  }
}
var NovelGeneratorComponent = class _NovelGeneratorComponent {
  cdr;
  dialog;
  snackBar;
  router;
  route;
  geminiAiService;
  scenarioDbService;
  itemDbService;
  characterDbService;
  novelAuthService;
  storyDbService;
  notification;
  gameStorage;
  dungeonGenerator;
  dungeonService;
  battleService;
  battleLogService;
  inventoryService;
  equipmentService;
  shopService;
  wuxiaDataService;
  itemGeneratorService;
  storyElementGeneratorHelper;
  responsiveService;
  battleLogContainer;
  shouldScrollBattleLog = false;
  // ===== Signal-based State Services =====
  novelState = inject(NovelStateService);
  battleState = inject(BattleStateService);
  inventoryState = inject(InventoryStateService);
  playerState = inject(PlayerStateService);
  itemState = inject(ItemStateService);
  // 디버그 로거 서비스
  debugLogger = inject(DebugLoggerService);
  itemGenerationHelper;
  storyFlowHelper;
  contentManagementHelper;
  gameStarted = false;
  novelSelected = false;
  selectedNovel = null;
  storyBlocks = [];
  choices = [];
  currentPath = [];
  // 선택 경로 추적
  // 현재 게임 ID (라우터 파라미터)
  currentGameId = null;
  // PlayerCharacter는 PlayerStateService로 위임
  get playerCharacter() {
    return this.playerState.character();
  }
  // Currency getters - PlayerStateService로 위임 (read-only)
  get gold() {
    return this.playerState.gold();
  }
  get gem() {
    return this.playerState.gem();
  }
  get crystal() {
    return this.playerState.crystal();
  }
  get ticket() {
    return this.playerState.ticket();
  }
  // Currency setters - PlayerStateService 메서드 사용
  set gold(value) {
    const current = this.playerState.gold();
    if (value > current) {
      this.playerState.addGold(value - current);
    } else if (value < current) {
      this.playerState.spendGold(current - value);
    }
  }
  set gem(value) {
    const current = this.playerState.gem();
    if (value > current) {
      this.playerState.addGem(value - current);
    } else if (value < current) {
      this.playerState.spendGem(current - value);
    }
  }
  set crystal(value) {
    const current = this.playerState.crystal();
    if (value > current) {
      this.playerState.addCrystal(value - current);
    } else if (value < current) {
      this.playerState.spendCrystal(current - value);
    }
  }
  set ticket(value) {
    const current = this.playerState.ticket();
    if (value > current) {
      this.playerState.addTicket(value - current);
    } else if (value < current) {
      this.playerState.spendTicket(current - value);
    }
  }
  // ===== UI State - Delegated to NovelStateService =====
  get showInventoryPanel() {
    return this.novelState.showInventoryPanel();
  }
  get showShopPanel() {
    return this.novelState.showShopPanel();
  }
  get showCharacterCreatorPanel() {
    return this.novelState.showCharacterCreatorPanel();
  }
  get showScenarioCreatorPanel() {
    return this.novelState.showScenarioCreatorPanel();
  }
  get showItemCreatorPanel() {
    return this.novelState.showItemCreatorPanel();
  }
  get showStoryCreatorPanel() {
    return this.novelState.showStoryCreatorPanel();
  }
  get showWuxiaPanel() {
    return this.novelState.showWuxiaPanel();
  }
  get showFlowPanel() {
    return this.novelState.showFlowPanel();
  }
  get inventoryActiveTab() {
    return this.novelState.inventoryActiveTab();
  }
  get wuxiaActiveTab() {
    return this.novelState.wuxiaActiveTab();
  }
  get flowPanelTab() {
    return this.novelState.flowPanelTab();
  }
  // ===== Inventory State - Delegated to InventoryStateService =====
  get inventory() {
    return this.inventoryState.inventory();
  }
  set inventory(value) {
    this.inventoryState.setInventory(value);
  }
  showCharacterPanel = false;
  isGeneratingCharacter = false;
  generatedCharacter = null;
  characterGenerationError = "";
  savedCharacters = [];
  // 시나리오 생성 패널
  isGeneratingScenario = false;
  generatedScenario = null;
  scenarioGenerationError = "";
  savedScenarios = [];
  isGeneratingItem = false;
  generatedItem = null;
  generatedItems = [];
  // 한 번에 생성된 여러 아이템 목록
  itemGenerationError = "";
  savedItems = [];
  // 스토리 생성기 패널
  isGeneratingStory = false;
  storyTitle = "";
  // 사용자 입력 제목
  selectedCharactersForStory = [];
  selectedItemsForStory = [];
  selectedScenariosForStory = [];
  generatedStory = null;
  storyGenerationError = "";
  savedStories = [];
  // 저장된 스토리 목록
  // 아코디언 펼침/접힘 상태
  isStoriesExpanded = true;
  // 저장된 스토리는 기본으로 펼쳐짐
  isCharactersExpanded = false;
  isScenariosExpanded = false;
  isItemsExpanded = false;
  isShopExpanded = false;
  // 캐릭터 인벤토리 모달
  showCharacterInventoryModal = false;
  selectedCharacterForInventory = null;
  selectedCharacterGameData = null;
  characterInventoryTab = "equipment";
  // 선택지-시나리오 연결 기능
  showScenarioLinkPanel = false;
  currentLinkingChoiceIndex = -1;
  // 플로우 기반 시나리오 연결
  showFlowScenarioLinkPanel = false;
  currentLinkingNodeId = "";
  currentLinkingChoiceId = "";
  nodeScenarioLinks = /* @__PURE__ */ new Map();
  // nodeId+choiceId -> scenarioId
  // 사이드 패널 토글 상태 (기본적으로 닫힌 상태)
  isLeftPanelCollapsed = true;
  isRightPanelCollapsed = true;
  // 플로우 맵 패널 토글 상태 (기본적으로 닫힌 상태)
  isFlowPanelOpen = false;
  // 스토리 플로우 시각화
  showStoryFlowPanel = false;
  storyFlowNodes = [];
  // ===== 비선형 스토리 시스템 =====
  // 새로운 노드 기반 시스템
  storyNodes = [];
  storyConnections = [];
  currentStoryNodeId = "start";
  storyProgress = {
    currentNodeId: "start",
    visitedNodes: [],
    pathHistory: [],
    totalChoices: 0,
    battlesWon: 0,
    battlesLost: 0,
    branchingFactor: 0,
    explorationRate: 0,
    possibleEndings: [],
    flags: {}
  };
  // 플로우 시각화 설정
  showAdvancedFlowPanel = false;
  // 고급 플로우 패널
  selectedNode = null;
  flowLayoutType = "hierarchical";
  flowZoomLevel = 1;
  flowPanX = 0;
  flowPanY = 0;
  flowViewBox = "0 0 1200 800";
  // 캔버스 드래그 상태
  isDraggingCanvas = false;
  dragStartX = 0;
  dragStartY = 0;
  dragStartPanX = 0;
  dragStartPanY = 0;
  // 노드 드래그 상태
  isDraggingNode = false;
  draggingNode = null;
  nodeDragStartX = 0;
  nodeDragStartY = 0;
  nodeStartX = 0;
  nodeStartY = 0;
  hasNodeMoved = false;
  // 노드가 실제로 이동했는지 추적
  showVisitedOnly = false;
  showBattlesOnly = false;
  showEndingsOnly = false;
  showStats = false;
  // ===== 향상된 전투 시스템 =====
  battleSkills = [];
  battleItems = [];
  currentBattleState = null;
  // ===== 무협 시스템 =====
  martialArtsSkills = [];
  learnedMartialSkills = [];
  playerInternalPower = {
    current: 100,
    max: 100,
    recoveryRate: 5,
    trainingLevel: 0,
    realm: "\uCD08\uB958",
    realmProgress: 0,
    meridians: {
      opened: 0,
      total: 12,
      meridians: []
    },
    purity: 50,
    stability: 100
  };
  playerFaction = null;
  availableFactions = [];
  wulinRelationships = [];
  elixirs = [];
  martialManuals = [];
  // martialBattleState는 battleManager와 wuxiaManager에서 직접 관리 (중복 제거)
  // ===== 던전 시스템 상태 =====
  // 던전 타입 목록 (DungeonManager에 위임)
  get dungeonTypes() {
    return this.dungeonManager.dungeonTypes;
  }
  set dungeonTypes(value) {
    this.dungeonManager.dungeonTypes = value;
  }
  // 현재 던전 상태 (DungeonManager에 위임)
  get currentDungeon() {
    return this.dungeonManager.currentDungeon;
  }
  set currentDungeon(value) {
    this.dungeonManager.currentDungeon = value;
  }
  get currentDungeonRoom() {
    return this.dungeonManager.currentDungeonRoom;
  }
  set currentDungeonRoom(value) {
    this.dungeonManager.currentDungeonRoom = value;
  }
  // 던전 UI 상태 (DungeonManager에 위임)
  get showDungeonPanel() {
    return this.dungeonManager.showDungeonPanel;
  }
  set showDungeonPanel(value) {
    this.dungeonManager.showDungeonPanel = value;
  }
  get showDungeonEntryDialog() {
    return this.dungeonManager.showDungeonEntryDialog;
  }
  set showDungeonEntryDialog(value) {
    this.dungeonManager.showDungeonEntryDialog = value;
  }
  get selectedDungeonType() {
    return this.dungeonManager.selectedDungeonType;
  }
  set selectedDungeonType(value) {
    this.dungeonManager.selectedDungeonType = value;
  }
  get selectedDifficulty() {
    return this.dungeonManager.selectedDifficulty;
  }
  set selectedDifficulty(value) {
    this.dungeonManager.selectedDifficulty = value;
  }
  // 던전 진행 상태 (DungeonManager에 위임)
  get dungeonProgress() {
    return this.dungeonManager.dungeonProgress;
  }
  set dungeonProgress(value) {
    this.dungeonManager.dungeonProgress = value;
  }
  // 던전 테스트 관련 (DungeonManager에 위임)
  get showDungeonTestDialog() {
    return this.dungeonManager.showDungeonTestDialog;
  }
  set showDungeonTestDialog(value) {
    this.dungeonManager.showDungeonTestDialog = value;
  }
  get dungeonTestOptions() {
    return this.dungeonManager.dungeonTestOptions;
  }
  // 인벤토리 필터 상태
  inventoryFilter = "all";
  // 그리드 인벤토리 설정
  maxInventorySize = 60;
  // 최대 60칸 (10x6 그리드)
  inventorySortBy = "rarity";
  // 조직 시스템 (미구현 - 임시)
  playerOrganization = null;
  selectedMember = null;
  inventoryFilterOptions = [
    { value: "all", label: "\uC804\uCCB4", icon: "\u{1F4E6}" },
    { value: "weapon", label: "\uBB34\uAE30", icon: "\u2694\uFE0F" },
    { value: "armor", label: "\uBC29\uC5B4\uAD6C", icon: "\u{1F6E1}\uFE0F" },
    { value: "accessory", label: "\uC7A5\uC2E0\uAD6C", icon: "\u{1F48D}" },
    { value: "consumable", label: "\uC18C\uBE44\uD488", icon: "\u2697\uFE0F" }
  ];
  // 기본 전투 스킬 데이터
  defaultBattleSkills = [
    {
      id: "basic-attack",
      name: "\uC77C\uBC18 \uACF5\uACA9",
      description: "\uAE30\uBCF8\uC801\uC778 \uBB3C\uB9AC \uACF5\uACA9",
      type: "attack",
      mpCost: 0,
      cooldown: 0,
      damageMultiplier: 1,
      hitRate: 0.9,
      criticalRate: 0.1,
      icon: "\u2694\uFE0F"
    },
    {
      id: "power-strike",
      name: "\uAC15\uD0C0",
      description: "\uAC15\uB825\uD55C \uC77C\uACA9\uC744 \uB0A0\uB9BD\uB2C8\uB2E4",
      type: "attack",
      mpCost: 15,
      cooldown: 2,
      damageMultiplier: 2,
      hitRate: 0.8,
      criticalRate: 0.25,
      icon: "\u{1F4A5}"
    },
    {
      id: "defend",
      name: "\uBC29\uC5B4 \uD0DC\uC138",
      description: "\uB2E4\uC74C \uD134\uAE4C\uC9C0 \uBC29\uC5B4\uB825 50% \uC99D\uAC00",
      type: "defense",
      mpCost: 0,
      cooldown: 1,
      defenseBoost: 0.5,
      duration: 1,
      icon: "\u{1F6E1}\uFE0F"
    },
    {
      id: "heal",
      name: "\uC751\uAE09 \uCE58\uB8CC",
      description: "HP\uB97C 30% \uD68C\uBCF5\uD569\uB2C8\uB2E4",
      type: "heal",
      mpCost: 20,
      cooldown: 3,
      healAmount: 0.3,
      icon: "\u{1F49A}"
    },
    {
      id: "fire-ball",
      name: "\uD654\uC5FC\uAD6C",
      description: "\uD654\uC5FC \uB9C8\uBC95\uC73C\uB85C \uC801\uC744 \uACF5\uACA9\uD558\uACE0 \uD654\uC0C1\uC744 \uC785\uD799\uB2C8\uB2E4",
      type: "attack",
      mpCost: 25,
      cooldown: 2,
      damageMultiplier: 1.8,
      hitRate: 0.85,
      statusEffect: {
        type: "burn",
        duration: 3,
        value: 5,
        name: "\uD654\uC0C1",
        icon: "\u{1F525}"
      },
      icon: "\u{1F525}"
    },
    {
      id: "strengthen",
      name: "\uD798\uC758 \uC99D\uAC15",
      description: "3\uD134 \uB3D9\uC548 \uACF5\uACA9\uB825 40% \uC99D\uAC00",
      type: "buff",
      mpCost: 15,
      cooldown: 4,
      duration: 3,
      statusEffect: {
        type: "strengthen",
        duration: 3,
        value: 0.4,
        name: "\uD798\uC758 \uC99D\uAC15",
        icon: "\u{1F4AA}"
      },
      icon: "\u{1F4AA}"
    },
    {
      id: "weaken",
      name: "\uC57D\uD654",
      description: "\uC801\uC758 \uACF5\uACA9\uB825\uC744 30% \uAC10\uC18C\uC2DC\uD0B5\uB2C8\uB2E4",
      type: "debuff",
      mpCost: 10,
      cooldown: 3,
      duration: 2,
      statusEffect: {
        type: "weaken",
        duration: 2,
        value: 0.3,
        name: "\uC57D\uD654",
        icon: "\u{1F53B}"
      },
      icon: "\u{1F53B}"
    }
  ];
  // ===== Battle State - Delegated to BattleStateService =====
  get inBattle() {
    return this.battleState.inBattle();
  }
  get battleEnded() {
    return this.battleState.battleEnded();
  }
  get battleVictory() {
    return this.battleState.battleVictory();
  }
  get battleTurn() {
    return this.battleState.battleTurn();
  }
  get battleLog() {
    return this.battleState.battleLog();
  }
  get battleEnemy() {
    return this.battleState.battleEnemy();
  }
  // Temporary: 기존 타입 호환성을 위한 battleEnemy 초기값 (마이그레이션 완료 후 제거 예정)
  _tempBattleEnemy = {
    name: "\uACE0\uBE14\uB9B0",
    hp: 50,
    maxHp: 50,
    mp: 30,
    maxMp: 30,
    internalPower: 20,
    maxInternalPower: 20,
    attack: 8,
    defense: 3
  };
  playerDefenseBonus = 0;
  // 방어 보너스
  // 데미지 애니메이션 상태
  playerTakingDamage = false;
  enemyTakingDamage = false;
  shopItems = [
    {
      id: "sword_basic",
      name: "\uAE30\uBCF8 \uAC80",
      description: "\uD3C9\uBC94\uD55C \uCCA0\uAC80\uC785\uB2C8\uB2E4. \uACF5\uACA9\uB825 +5",
      price: 50,
      type: "weapon",
      rarity: "common",
      stock: 5,
      stats: { attack: 5 }
    },
    {
      id: "potion_hp",
      name: "\uCCB4\uB825 \uBB3C\uC57D",
      description: "HP\uB97C 50 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",
      price: 20,
      type: "consumable",
      rarity: "common",
      stock: 10
    },
    {
      id: "potion_mp",
      name: "\uB9C8\uB098 \uBB3C\uC57D",
      description: "MP\uB97C 30 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",
      price: 25,
      type: "consumable",
      rarity: "common",
      stock: 8
    },
    {
      id: "armor_leather",
      name: "\uAC00\uC8FD \uAC11\uC637",
      description: "\uD2BC\uD2BC\uD55C \uAC00\uC8FD \uAC11\uC637. \uBC29\uC5B4\uB825 +3",
      price: 80,
      type: "armor",
      rarity: "common",
      stock: 3,
      stats: { defense: 3 }
    },
    {
      id: "sword_silver",
      name: "\uC740\uBE5B \uAC80",
      description: "\uC740\uC73C\uB85C \uC81C\uC791\uB41C \uACE0\uAE09 \uAC80. \uACF5\uACA9\uB825 +12",
      price: 200,
      type: "weapon",
      rarity: "uncommon",
      stock: 2,
      stats: { attack: 12 }
    },
    {
      id: "armor_chain",
      name: "\uC0AC\uC2AC \uAC11\uC637",
      description: "\uACAC\uACE0\uD55C \uC0AC\uC2AC \uAC11\uC637. \uBC29\uC5B4\uB825 +8",
      price: 250,
      type: "armor",
      rarity: "uncommon",
      stock: 2,
      stats: { defense: 8 }
    }
  ];
  // 소설 템플릿 목록 (AI로 생성된 스토리가 추가됨)
  novelTemplates = [];
  inventoryManager;
  battleManager;
  // HTML에서 직접 접근 가능
  wuxiaManager;
  dungeonManager;
  // HTML에서 직접 접근 가능
  storyElementGenerator;
  // 스토리 요소 자동 생성 상태
  isGeneratingElements = false;
  elementGenerationProgress = "";
  constructor(cdr, dialog, snackBar, router, route, geminiAiService, scenarioDbService, itemDbService, characterDbService, novelAuthService, storyDbService, notification, gameStorage, dungeonGenerator, dungeonService, battleService, battleLogService, inventoryService, equipmentService, shopService, wuxiaDataService, itemGeneratorService, storyElementGeneratorHelper, responsiveService) {
    this.cdr = cdr;
    this.dialog = dialog;
    this.snackBar = snackBar;
    this.router = router;
    this.route = route;
    this.geminiAiService = geminiAiService;
    this.scenarioDbService = scenarioDbService;
    this.itemDbService = itemDbService;
    this.characterDbService = characterDbService;
    this.novelAuthService = novelAuthService;
    this.storyDbService = storyDbService;
    this.notification = notification;
    this.gameStorage = gameStorage;
    this.dungeonGenerator = dungeonGenerator;
    this.dungeonService = dungeonService;
    this.battleService = battleService;
    this.battleLogService = battleLogService;
    this.inventoryService = inventoryService;
    this.equipmentService = equipmentService;
    this.shopService = shopService;
    this.wuxiaDataService = wuxiaDataService;
    this.itemGeneratorService = itemGeneratorService;
    this.storyElementGeneratorHelper = storyElementGeneratorHelper;
    this.responsiveService = responsiveService;
    this.inventoryManager = new InventoryManager(this);
    this.battleManager = new BattleManager(this.notification, this.battleService, this.battleLogService);
    this.wuxiaManager = new WuxiaManager(this.notification, this.wuxiaDataService);
    this.dungeonManager = new DungeonManager();
    this.dungeonManager.initialize({
      addStoryBlock: (story) => this.addStoryBlock(story),
      gainExp: (exp) => this.gainExp(exp),
      saveGame: (saveKey) => this.saveGame(saveKey),
      notification: this.notification,
      debugLogger: this.debugLogger,
      getPlayerCharacter: () => this.playerCharacter,
      getDungeonService: () => this.dungeonService,
      getDungeonGenerator: () => this.dungeonGenerator
    });
    this.itemGenerationHelper = new ItemGenerationHelper(this.geminiAiService, this.itemDbService, this.notification, this.dialog);
    this.storyFlowHelper = new StoryFlowHelper(this.notification);
    this.contentManagementHelper = new ContentManagementHelper(this.notification, this.dialog, this.scenarioDbService, this.characterDbService, this.storyDbService);
    this.storyElementGenerator = this.storyElementGeneratorHelper;
    this.gameStateService = this.gameStorage;
    this.initializePlayer();
    this.loadSavedScenarios();
    this.loadSavedItems();
    this.loadSavedCharacters();
    this.loadSavedStories();
  }
  ngOnInit() {
    this.responsiveService.isMobile$.subscribe((isMobile) => {
      if (isMobile) {
        this.isLeftPanelCollapsed = true;
        this.isRightPanelCollapsed = true;
      }
    });
    this.wuxiaManager.setPlayerCharacter(this.playerCharacter);
    this.wuxiaManager.setInventory(this.inventory);
    this.wuxiaManager.initializeWuxiaSystem();
    this.learnedMartialSkills = this.wuxiaManager.learnedMartialSkills;
    this.playerInternalPower = this.wuxiaManager.playerInternalPower;
    this.availableFactions = this.wuxiaManager.availableFactions;
    this.martialArtsSkills = this.wuxiaManager.martialArtsSkills;
    this.elixirs = this.wuxiaManager.elixirs;
    this.martialManuals = this.wuxiaManager.martialManuals;
    this.initializeDungeonSystem();
    this.loadDiabloItems();
    this.loadSavedInventory();
    this.migrateLocalStorageToIndexedDB();
    this.loadNodeScenarioLinks();
    this.generateStoryFlow();
    this.route.paramMap.subscribe((params) => __async(this, null, function* () {
      const gameId = params.get("gameId");
      if (gameId) {
        this.currentGameId = gameId;
        const newGameData = sessionStorage.getItem("newGame_" + gameId);
        if (newGameData) {
          const data = JSON.parse(newGameData);
          sessionStorage.removeItem("newGame_" + gameId);
          this.initializeNewGame(gameId, data.novel);
          setTimeout(() => {
            this.startStory();
          }, 100);
        } else {
          try {
            yield this.loadGameById(gameId);
            if (!this.gameStarted || !this.selectedNovel) {
              this.debugLogger.warn("\uAC8C\uC784\uB85C\uB4DC", "\uAC8C\uC784 \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBA54\uC778\uC73C\uB85C \uC774\uB3D9\uD569\uB2C8\uB2E4.");
              this.router.navigate(["/novel"]);
            }
          } catch (error) {
            this.debugLogger.error("\uAC8C\uC784\uB85C\uB4DC", `\uAC8C\uC784 \uB85C\uB4DC \uC2E4\uD328: ${error}`);
            this.notification.error("\uAC8C\uC784\uC744 \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
            this.router.navigate(["/novel"]);
          }
        }
      } else {
        this.currentGameId = null;
      }
    }));
  }
  /**
   * localStorage에서 IndexedDB로 마이그레이션
   */
  migrateLocalStorageToIndexedDB() {
    return __async(this, null, function* () {
      try {
        const migrated = yield this.gameStorage.migrateFromLocalStorage();
        if (migrated > 0) {
        }
      } catch (error) {
      }
    });
  }
  /**
   * 디아블로 4 실제 아이템 데이터 로드
   */
  loadDiabloItems() {
    if (this.inventory.length === 0) {
      const convertedItems = DIABLO_ITEMS.slice(0, 10).map((diabloItem) => {
        return DiabloItemHelper.convertDiabloItemToInventoryItem(diabloItem);
      });
      this.inventory.push(...convertedItems);
    } else {
      this.inventory.forEach((item, index) => {
        const diabloId = item.id.replace("diablo_", "");
        const diabloItem = DIABLO_ITEMS.find((d) => d.id === parseInt(diabloId));
        if (diabloItem && !item.icon) {
          const icon = DiabloItemHelper.getInventoryItemIcon(item);
          item.icon = icon;
        }
      });
    }
  }
  ngAfterViewChecked() {
    if (this.shouldScrollBattleLog && this.battleLogContainer) {
      this.scrollToBattleLog();
      this.shouldScrollBattleLog = false;
    }
  }
  /**
   * 로그아웃
   */
  logout() {
    return __async(this, null, function* () {
      const confirmed = yield this.showConfirmDialog("\uB85C\uADF8\uC544\uC6C3\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?");
      if (confirmed) {
        this.novelAuthService.logout();
        this.router.navigate(["/novel/login"]);
      }
    });
  }
  /**
   * 현재 로그인한 사용자 이름 가져오기
   */
  getCurrentUsername() {
    return this.novelAuthService.getCurrentUsername();
  }
  /**
   * 확인 다이얼로그 표시
   */
  showConfirmDialog(message) {
    return new Promise((resolve) => {
      const dialogRef = this.dialog.open(ConfirmDialogComponent, {
        width: "450px",
        maxWidth: "90vw",
        data: { message },
        panelClass: "custom-confirm-dialog",
        autoFocus: false,
        restoreFocus: false
      });
      dialogRef.afterClosed().subscribe((result) => {
        resolve(result === true);
      });
    });
  }
  initializePlayer() {
    const defaultPlayer = {
      name: "\uBAA8\uD5D8\uAC00",
      level: 1,
      exp: 0,
      maxExp: 100,
      hp: 100,
      maxHp: 100,
      mp: 50,
      maxMp: 50,
      attack: 35,
      // 10 → 35로 증가 (3.5배 강화!)
      defense: 5,
      agility: 8,
      strength: 25,
      // 10 → 25로 증가
      intelligence: 15,
      // 7 → 15로 증가
      gold: 1e4,
      // 초기 골드 (넉넉하게)
      gem: 500,
      // 초기 보석 (프리미엄 화폐)
      crystal: 200,
      // 초기 크리스탈 (강화 재료)
      ticket: 50,
      // 초기 티켓 (특수 컨텐츠 입장권)
      skillPoints: 0,
      skills: [
        {
          id: "basic_attack",
          name: "\uAE30\uBCF8 \uACF5\uACA9",
          description: "\uAE30\uBCF8\uC801\uC778 \uACF5\uACA9 \uAE30\uC220",
          level: 1,
          maxLevel: 5,
          type: "combat"
        }
      ],
      inventory: [],
      equipment: {
        weapon: void 0,
        armor: void 0,
        helmet: void 0,
        gloves: void 0,
        boots: void 0,
        belt: void 0,
        amulet: void 0,
        ring1: void 0,
        ring2: void 0
      }
    };
    this.playerState.loadPlayer(defaultPlayer);
    this.inventory = [
      {
        id: "wooden_sword",
        name: "\uB098\uBB34 \uAC80",
        description: "\uCD08\uBCF4\uC790\uC6A9 \uB098\uBB34 \uAC80",
        type: "weapon",
        quantity: 1,
        buyPrice: 10,
        sellPrice: 5,
        rarity: "common",
        stats: { attack: 2 },
        isEquipped: true
      }
    ];
  }
  // ==================== 스토리 관련 헬퍼 메서드 ====================
  addStoryBlock(lines) {
    this.storyBlocks.push({
      type: "story",
      lines
    });
  }
  scrollToBottom() {
    setTimeout(() => {
      const container = document.querySelector(".novel-content");
      if (container) {
        container.scrollTop = container.scrollHeight;
      }
    }, 100);
  }
  scrollToBattleLog() {
    setTimeout(() => {
      const battleLog = document.querySelector(".battle-log-container");
      if (battleLog) {
        battleLog.scrollTop = battleLog.scrollHeight;
      }
    }, 100);
  }
  loadSavedScenarios() {
    return __async(this, null, function* () {
      this.savedScenarios = yield this.contentManagementHelper.loadSavedScenarios();
    });
  }
  loadSavedCharacters() {
    return __async(this, null, function* () {
      this.savedCharacters = yield this.contentManagementHelper.loadSavedCharacters();
    });
  }
  loadSavedStories() {
    return __async(this, null, function* () {
      this.savedStories = yield this.contentManagementHelper.loadSavedStories();
    });
  }
  loadNodeScenarioLinks() {
    const linksJson = localStorage.getItem("nodeScenarioLinks");
    if (linksJson) {
      try {
        const linksObj = JSON.parse(linksJson);
        this.nodeScenarioLinks = new Map(Object.entries(linksObj));
      } catch (error) {
      }
    }
  }
  generateStoryFlow() {
  }
  initializeNewGame(gameId, novel) {
    this.debugLogger.info("\uAC8C\uC784\uCD08\uAE30\uD654", `\u{1F3AE} \uC0C8 \uAC8C\uC784 \uC2DC\uC791: ${novel.title} | ID: ${gameId}`);
    this.currentGameId = gameId;
    this.selectedNovel = novel;
    this.novelSelected = true;
    this.gold = novel.startingGold;
    this.inventory = this.createStartingInventory();
    this.storyBlocks = [];
    this.choices = [];
    this.currentPath = [];
    this.gameStarted = false;
    this.initializePlayer();
    this.playerCharacter.inventory = [...this.inventory];
  }
  startStory() {
    return __async(this, null, function* () {
      if (!this.selectedNovel) {
        this.debugLogger.error("\uC2A4\uD1A0\uB9AC\uC2DC\uC791", "\u274C \uC18C\uC124\uC774 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");
        return;
      }
      this.debugLogger.info("\uC2A4\uD1A0\uB9AC\uC2DC\uC791", `\u{1F4D6} \uC18C\uC124 \uC77D\uAE30 \uC2DC\uC791: ${this.selectedNovel.title}`);
      this.gameStarted = true;
      this.addStoryBlock(this.selectedNovel.firstStory);
      this.setChoices(this.selectedNovel.firstChoices);
      this.scrollToBottom();
      yield this.saveGame("autosave");
    });
  }
  loadGameById(gameId) {
    return __async(this, null, function* () {
      try {
        this.debugLogger.info("\uAC8C\uC784\uB85C\uB4DC", `\u{1F50D} \uAC8C\uC784 ID\uB85C \uB85C\uB4DC \uC2DC\uB3C4: ${gameId}`);
        const allGames = yield this.gameStorage.getAllGames();
        this.debugLogger.info("\uAC8C\uC784\uB85C\uB4DC", `\u{1F4CB} \uC800\uC7A5\uB41C \uAC8C\uC784 \uBAA9\uB85D: ${allGames.length}\uAC1C`);
        const gameState = yield this.gameStorage.loadGame(gameId);
        if (gameState) {
          this.currentGameId = gameState.id;
          this.selectedNovel = gameState.novelTemplate;
          this.storyBlocks = gameState.storyBlocks;
          this.currentPath = gameState.currentPath;
          this.gameStarted = gameState.gameStarted;
          this.playerState.loadPlayer(gameState.playerCharacter);
          const inventory = gameState.playerCharacter?.inventory || gameState.inventory || [];
          this.inventoryState.setInventory(inventory);
          this.choices = gameState.choices;
          this.novelSelected = true;
          this.debugLogger.info("\uAC8C\uC784\uB85C\uB4DC", `\u2705 \uAC8C\uC784 \uB85C\uB4DC \uC644\uB8CC: ${gameState.id}`);
        } else {
          this.debugLogger.warn("\uAC8C\uC784\uB85C\uB4DC", `\u274C \uAC8C\uC784 \uB370\uC774\uD130 \uC5C6\uC74C: ${gameId}`);
          throw new Error("\uAC8C\uC784 \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
        }
      } catch (error) {
        this.debugLogger.error("\uAC8C\uC784\uB85C\uB4DC", `\u274C \uAC8C\uC784 \uB85C\uB4DC \uC2E4\uD328: ${error}`);
        throw error;
      }
    });
  }
  gainExp(amount) {
    const leveledUp = this.playerState.gainExp(amount);
    if (leveledUp) {
      this.notification.show(`\u{1F389} \uB808\uBCA8 \uC5C5! \uB808\uBCA8 ${this.playerState.level()}`);
    }
  }
  setChoices(choices) {
    this.choices = choices;
    if (this.scrollToBottom) {
      this.scrollToBottom();
    }
  }
  saveGame(saveType = "manual") {
    return __async(this, null, function* () {
      try {
        const currentPlayer = this.playerState.character();
        const currentInventory = this.inventoryState.inventory();
        const playerWithInventory = __spreadProps(__spreadValues({}, currentPlayer), {
          inventory: currentInventory
        });
        const gameState = {
          id: this.currentGameId || "",
          novelId: this.selectedNovel?.id || "",
          novelTitle: this.selectedNovel?.title || "",
          novelTemplate: this.selectedNovel,
          playerCharacter: playerWithInventory,
          storyBlocks: this.storyBlocks,
          currentPath: this.currentPath,
          choices: this.choices,
          gameStarted: this.gameStarted,
          gold: currentPlayer.gold,
          inventory: currentInventory,
          completedQuests: [],
          currentChapter: 1,
          saveDate: /* @__PURE__ */ new Date(),
          organization: this.playerOrganization
        };
        yield this.gameStorage.saveGame(gameState);
        this.debugLogger.info("\uAC8C\uC784\uC800\uC7A5", `\u2705 \uAC8C\uC784 \uC800\uC7A5 \uC644\uB8CC: ${this.currentGameId}`);
        if (saveType !== "autosave") {
          this.notification.show("\u2705 \uAC8C\uC784\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4");
        }
      } catch (error) {
        this.debugLogger.error("\uAC8C\uC784\uC800\uC7A5", `\u274C \uAC8C\uC784 \uC800\uC7A5 \uC2E4\uD328: ${error}`);
      }
    });
  }
  addToInventory(itemId, quantity) {
    this.inventoryManager.addToInventory(itemId, quantity);
  }
  useItem(item) {
    this.inventoryManager.useItem(item);
  }
  backToNovelSelection() {
    this.novelSelected = false;
    this.selectedNovel = null;
    this.currentGameId = null;
    this.router.navigate(["/novel"]);
  }
  // ==================== 스토리 요소 자동 생성 ====================
  /**
   * 스토리 요소 자동 생성
   * - 시나리오, 캐릭터, 아이템 등 필요한 요소를 Gemini API로 한번에 생성
   * - 소설이 없어도 범용 콘텐츠 생성 가능
   */
  autoGenerateStoryElements() {
    return __async(this, null, function* () {
      if (this.isGeneratingElements) {
        this.notification.warning("\uC774\uBBF8 \uC0DD\uC131 \uC911\uC785\uB2C8\uB2E4");
        return;
      }
      try {
        this.isGeneratingElements = true;
        this.elementGenerationProgress = "\u{1F4CA} \uC2A4\uD1A0\uB9AC \uC694\uC18C \uD604\uD669 \uD655\uC778 \uC911...";
        this.cdr.detectChanges();
        const novelTemplate = this.selectedNovel || this.getDefaultNovelTemplate();
        const report = yield this.storyElementGenerator.getGenerationReport(novelTemplate);
        if (!report.needsGeneration) {
          this.notification.show("\u2705 \uBAA8\uB4E0 \uC2A4\uD1A0\uB9AC \uC694\uC18C\uAC00 \uCDA9\uBD84\uD569\uB2C8\uB2E4!");
          return;
        }
        const needsScenarios = report.scenarios.missing > 0;
        const needsCharacters = report.characters.missing > 0;
        const needsItems = report.items.missing > 0;
        const totalSteps = (needsScenarios ? 1 : 0) + (needsCharacters ? 1 : 0) + (needsItems ? 1 : 0);
        let currentStep = 0;
        if (needsScenarios) {
          currentStep++;
          this.elementGenerationProgress = `\u{1F4DC} \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uC911... (${currentStep}/${totalSteps} - ${report.scenarios.missing}\uAC1C \uD544\uC694)`;
          this.cdr.detectChanges();
        }
        if (needsCharacters) {
          currentStep++;
          this.elementGenerationProgress = `\u{1F465} \uCE90\uB9AD\uD130 \uC0DD\uC131 \uC911... (${currentStep}/${totalSteps} - ${report.characters.missing}\uAC1C \uD544\uC694)`;
          this.cdr.detectChanges();
        }
        if (needsItems) {
          currentStep++;
          this.elementGenerationProgress = `\u2694\uFE0F \uC544\uC774\uD15C \uC0DD\uC131 \uC911... (${currentStep}/${totalSteps} - ${report.items.missing}\uAC1C \uD544\uC694)`;
          this.cdr.detectChanges();
        }
        const result = yield this.storyElementGenerator.ensureStoryElements(novelTemplate);
        if (result.success) {
          const { scenarios, characters, items } = result.generated;
          const totalGenerated = scenarios + characters + items;
          if (totalGenerated > 0) {
            this.elementGenerationProgress = "\u{1F4BE} \uB370\uC774\uD130 \uB85C\uB529 \uC911...";
            this.cdr.detectChanges();
            yield this.loadSavedScenarios();
            yield this.loadSavedCharacters();
            yield this.loadSavedItems();
            this.notification.success(`\u2705 \uC0DD\uC131 \uC644\uB8CC! \u{1F4DC} \uC2DC\uB098\uB9AC\uC624: ${scenarios}\uAC1C, \u{1F465} \uCE90\uB9AD\uD130: ${characters}\uAC1C, \u2694\uFE0F \uC544\uC774\uD15C: ${items}\uAC1C`);
          } else {
            this.notification.show("\uBAA8\uB4E0 \uC2A4\uD1A0\uB9AC \uC694\uC18C\uAC00 \uCDA9\uBD84\uD569\uB2C8\uB2E4");
          }
        } else {
          const errorMsg = result.errors.join(", ");
          this.notification.error(`\uC0DD\uC131 \uC2E4\uD328: ${errorMsg}`);
        }
      } catch (error) {
        this.notification.error("\uC2A4\uD1A0\uB9AC \uC694\uC18C \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4");
      } finally {
        this.isGeneratingElements = false;
        this.elementGenerationProgress = "";
        this.cdr.detectChanges();
      }
    });
  }
  /**
   * 기본 소설 템플릿 (소설 미선택 시 사용)
   */
  getDefaultNovelTemplate() {
    return {
      id: "default",
      title: "\uBC94\uC6A9 \uCF58\uD150\uCE20",
      genre: "\uD310\uD0C0\uC9C0",
      description: "\uB2E4\uC591\uD55C \uC7A5\uB974\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5\uD55C \uBC94\uC6A9 \uC2A4\uD1A0\uB9AC \uC694\uC18C",
      icon: "\u2728",
      difficulty: "normal",
      startingGold: 1e3,
      startingItems: [],
      firstStory: [],
      firstChoices: []
    };
  }
  /**
   * 스토리 요소 현황 확인
   */
  checkStoryElementStatus() {
    return __async(this, null, function* () {
      try {
        const novelTemplate = this.selectedNovel || this.getDefaultNovelTemplate();
        const report = yield this.storyElementGenerator.getGenerationReport(novelTemplate);
        this.dialog.open(ConfirmDialogComponent, {
          width: "500px",
          data: {
            title: "\u{1F4CA} \uC2A4\uD1A0\uB9AC \uC694\uC18C \uD604\uD669",
            message: report.text,
            confirmText: "\uD655\uC778",
            showCancel: false
          }
        });
      } catch (error) {
        this.notification.error("\uD604\uD669 \uD655\uC778 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4");
      }
    });
  }
  // ==================== UI 토글 메서드 (Delegated to StateServices) ====================
  toggleStoryCreatorPanel() {
    this.novelState.toggleStoryCreatorPanel();
  }
  toggleFlowPanel() {
    this.novelState.toggleFlowPanel();
  }
  toggleAdvancedFlowPanel() {
    this.showAdvancedFlowPanel = !this.showAdvancedFlowPanel;
  }
  openScenarioCreator() {
    this.novelState.openScenarioCreator();
  }
  closeFlowScenarioLinkPanel() {
    this.showFlowScenarioLinkPanel = false;
    this.showScenarioLinkPanel = false;
  }
  getRarityText(rarity) {
    return this.itemState.getRarityText(rarity);
  }
  getItemTypeText(type) {
    return this.itemState.getItemTypeText(type);
  }
  getEquipmentSlotName(type) {
    return this.itemState.getEquipmentSlotName(type);
  }
  // ==================== 스토리 노드 관련 메서드 ====================
  getCurrentNode() {
    return this.storyFlowHelper.getCurrentNode(this.storyNodes, this.currentStoryNodeId);
  }
  getNodeById(nodeId) {
    return this.storyFlowHelper.getNodeById(this.storyNodes, nodeId);
  }
  getNodeIcon(node) {
    return this.storyFlowHelper.getNodeIcon(node);
  }
  calculateExplorationRate() {
    return this.storyFlowHelper.calculateExplorationRate(this.storyNodes);
  }
  loadSampleStoryMap() {
    return __async(this, null, function* () {
      this.storyFlowHelper.loadSampleStoryMap((nodes, connections, startNodeId) => {
        this.storyNodes = nodes;
        this.storyConnections = connections;
        this.currentStoryNodeId = startNodeId;
        this.storyProgress.currentNodeId = startNodeId;
        this.storyProgress.visitedNodes = [startNodeId];
        this.storyProgress.pathHistory = [];
        this.storyProgress.totalChoices = 0;
        this.storyProgress.battlesWon = 0;
        this.storyProgress.battlesLost = 0;
      }, (content) => {
        this.addStoryBlock(content);
      });
    });
  }
  getLinkedScenarioId(nodeId, choiceId) {
    if (choiceId) {
      const linkKey = `${nodeId}:${choiceId}`;
      return this.nodeScenarioLinks.get(linkKey);
    }
    if (this.selectedNovel?.id) {
      const linkKey = `flow_node_link_${this.selectedNovel.id}_${nodeId}`;
      return localStorage.getItem(linkKey) || void 0;
    }
    return void 0;
  }
  linkScenarioToFlowNode(scenarioId) {
    if (this.currentLinkingNodeId) {
      if (this.currentLinkingChoiceId) {
        const linkKey = `${this.currentLinkingNodeId}:${this.currentLinkingChoiceId}`;
        this.nodeScenarioLinks.set(linkKey, scenarioId);
      }
      if (this.selectedNovel?.id) {
        const linkKey = `flow_node_link_${this.selectedNovel.id}_${this.currentLinkingNodeId}`;
        localStorage.setItem(linkKey, scenarioId);
      }
      this.closeFlowScenarioLinkPanel();
    }
  }
  // ==================== 시나리오 관련 메서드 ====================
  saveGeneratedScenario() {
    return __async(this, null, function* () {
      yield this.contentManagementHelper.saveGeneratedScenario(this.generatedScenario, () => __async(this, null, function* () {
        yield this.loadSavedScenarios();
      }));
    });
  }
  // 저장된 시나리오 삭제
  deleteScenario(scenarioId) {
    return __async(this, null, function* () {
      yield this.contentManagementHelper.deleteScenario(scenarioId, () => __async(this, null, function* () {
        yield this.loadSavedScenarios();
      }));
    });
  }
  // 저장된 시나리오 불러오기
  loadScenario(scenario) {
    return __async(this, null, function* () {
      this.generatedScenario = scenario;
      this.novelState.openScenarioCreator();
    });
  }
  // 시나리오로 게임 시작
  startGameWithScenario() {
    if (!this.generatedScenario)
      return;
    const storyBlocks = this.contentManagementHelper.generateStoryBlocksFromScenario(this.generatedScenario);
    this.addStoryBlock(storyBlocks);
    this.novelState.closeScenarioCreator();
    this.scrollToBottom();
  }
  // ==================== 전투 시스템 ====================
  // 선택지에서 전투 시작 (Battle Manager로 위임)
  startBattleFromChoice() {
    this.battleManager.setPlayerCharacter(this.playerCharacter);
    this.battleManager.learnedMartialSkills = this.learnedMartialSkills;
    this.battleManager.playerInternalPower = this.playerInternalPower;
    this.battleManager.startBattleFromChoice((blocks) => this.addStoryBlock(blocks), () => this.scrollToBottom());
  }
  // Battle Manager로 위임
  generateRandomEnemy() {
    this.battleManager.generateRandomEnemy();
  }
  // Battle Manager로 위임
  initializeBattle() {
    this.battleManager.setPlayerCharacter(this.playerCharacter);
    this.battleManager.learnedMartialSkills = this.learnedMartialSkills;
    this.battleManager.playerInternalPower = this.playerInternalPower;
    this.battleManager.initializeBattle();
  }
  // ===== 전투 관련 메서드는 HTML에서 battleManager로 직접 호출 =====
  // Battle Manager로 위임
  winBattle() {
    this.battleManager.winBattle();
  }
  // Battle Manager로 위임
  loseBattle() {
    this.battleManager.loseBattle();
  }
  // Battle Manager로 위임
  endBattle() {
    this.battleManager.endBattle();
  }
  // 데미지 애니메이션 트리거 메서드
  triggerPlayerDamage() {
    this.playerTakingDamage = true;
    setTimeout(() => {
      this.playerTakingDamage = false;
    }, 500);
  }
  triggerEnemyDamage() {
    this.enemyTakingDamage = true;
    setTimeout(() => {
      this.enemyTakingDamage = false;
    }, 500);
  }
  // ==================== 향상된 전투 시스템 메서드 ====================
  initializeBattleSkills() {
    this.battleSkills = [...this.defaultBattleSkills];
    if (this.playerCharacter.level >= 5) {
      this.battleSkills.push({
        id: "lightning-strike",
        name: "\uBC88\uAC1C \uC77C\uACA9",
        description: "\uBC88\uAC1C\uB85C \uC801\uC744 \uACF5\uACA9\uD558\uACE0 \uC2A4\uD134\uC2DC\uD0B5\uB2C8\uB2E4",
        type: "attack",
        mpCost: 30,
        cooldown: 3,
        damageMultiplier: 2.2,
        hitRate: 0.9,
        statusEffect: {
          type: "stun",
          duration: 1,
          value: 1,
          name: "\uC2A4\uD134",
          icon: "\u26A1"
        },
        icon: "\u26A1"
      });
    }
  }
  initializeBattleItems() {
    this.battleItems = this.inventory.filter((item) => item.type === "consumable").map((item) => ({
      id: item.id,
      name: item.name,
      description: item.description,
      type: this.getBattleItemType(item.id),
      effect: this.getBattleItemEffect(item.id),
      quantity: item.quantity,
      usableInBattle: true,
      icon: this.getItemIcon(item.id)
    }));
  }
  /**
   * 아이템 타입 결정
   */
  getBattleItemType(itemId) {
    if (itemId.includes("potion") || itemId.includes("elixir"))
      return "potion";
    if (itemId.includes("scroll"))
      return "scroll";
    if (itemId.includes("bomb") || itemId.includes("grenade"))
      return "throwable";
    return "buff";
  }
  /**
   * 아이템 효과 결정
   */
  getBattleItemEffect(itemId) {
    if (itemId.includes("health-potion")) {
      return { heal: 50 };
    }
    if (itemId.includes("mana-potion")) {
      return { mpRestore: 30 };
    }
    if (itemId.includes("bomb")) {
      return { damage: 40 };
    }
    return { heal: 30 };
  }
  /**
   * 아이템 아이콘
   */
  getItemIcon(itemId) {
    if (itemId.includes("health-potion"))
      return "\u2764\uFE0F";
    if (itemId.includes("mana-potion"))
      return "\u{1F499}";
    if (itemId.includes("bomb"))
      return "\u{1F4A3}";
    if (itemId.includes("scroll"))
      return "\u{1F4DC}";
    return "\u{1F381}";
  }
  useBattleSkill(skillId) {
    return this.battleManager.useBattleSkill(skillId);
  }
  /**
   * 전투 아이템 사용 - BattleManager로 위임
   */
  useBattleItem(itemId) {
    return this.battleManager.useBattleItem(itemId);
  }
  /**
   * 상태 효과 적용
   */
  applyStatusEffect(target, effect) {
    if (!this.currentBattleState)
      return;
    if (target === "player") {
      this.currentBattleState.playerStatusEffects = this.battleService.applyStatusEffect(this.currentBattleState.playerStatusEffects, effect);
    } else {
      this.currentBattleState.enemyStatusEffects = this.battleService.applyStatusEffect(this.currentBattleState.enemyStatusEffects, effect);
    }
  }
  /**
   * 스킬 이펙트 트리거
   */
  triggerSkillEffect(icon, type) {
  }
  /**
   * 전투 로그 추가
   */
  addBattleLog(actor, action, details) {
    if (!this.currentBattleState)
      return;
    const logEntry = this.battleLogService.createLogEntry(this.currentBattleState.turn, actor, action, details);
    this.currentBattleState.combatLog.push(logEntry);
    this.battleLog.push(this.battleLogService.formatBattleLog(logEntry));
  }
  /**
   * 전투 로그 포맷
   */
  formatBattleLog(entry) {
    return this.battleLogService.formatBattleLog(entry);
  }
  updateSkillCooldowns() {
    this.battleSkills = this.battleService.decreaseAllCooldowns(this.battleSkills);
  }
  // ============================================================
  // WuxiaManager로 위임된 무협 시스템 메서드들
  // ============================================================
  // WuxiaManager로 위임
  joinFaction(factionId) {
    this.wuxiaManager.joinFaction(factionId);
    this.syncWuxiaState();
  }
  // WuxiaManager로 위임
  learnMartialSkill(skillId) {
    const result = this.wuxiaManager.learnMartialSkill(skillId);
    this.syncWuxiaState();
    return result;
  }
  // WuxiaManager로 위임
  openMeridian(meridianId) {
    const result = this.wuxiaManager.openMeridian(meridianId);
    this.syncWuxiaState();
    return result;
  }
  // WuxiaManager로 위임
  cultivateInternalPower(hours) {
    this.wuxiaManager.cultivateInternalPower(hours, (exp) => this.gainExp(exp), (saveType) => this.saveGame(saveType));
    this.syncWuxiaState();
  }
  // WuxiaManager로 위임
  useElixir(elixirId) {
    this.wuxiaManager.useElixir(elixirId);
    this.syncWuxiaState();
  }
  // WuxiaManager로 위임
  startMartialBattle(enemyName) {
    this.startBattle();
    this.wuxiaManager.startMartialBattle(enemyName, this.currentBattleState);
  }
  // WuxiaManager로 위임
  useMartialSkill(skillId) {
    const result = this.wuxiaManager.useMartialSkill(skillId);
    this.syncWuxiaState();
    return result;
  }
  syncWuxiaState() {
    this.learnedMartialSkills = this.wuxiaManager.learnedMartialSkills;
    this.playerInternalPower = this.wuxiaManager.playerInternalPower;
    this.playerFaction = this.wuxiaManager.playerFaction;
    this.wulinRelationships = this.wuxiaManager.wulinRelationships;
    this.inventory = this.wuxiaManager.getInventory();
    this.wuxiaManager.setPlayerCharacter(this.playerCharacter);
    this.wuxiaManager.setInventory(this.inventory);
  }
  // ============================================================
  // 무협 UI 헬퍼 메서드
  // ============================================================
  toggleWuxiaPanel() {
    this.novelState.toggleWuxiaPanel();
  }
  closeWuxiaPanel() {
    this.novelState.closeWuxiaPanel();
  }
  getFactionName(factionId) {
    const faction = this.availableFactions.find((f) => f.id === factionId);
    return faction ? faction.name : "\uC54C \uC218 \uC5C6\uC74C";
  }
  /**
   * 혈도 위치 계산 (원형 배치)
   */
  getMeridianPosition(index) {
    const total = 12;
    const angle = index / total * 2 * Math.PI - Math.PI / 2;
    const radius = 40;
    const centerX = 50;
    const centerY = 50;
    const x = centerX + radius * Math.cos(angle);
    const y = centerY + radius * Math.sin(angle);
    return {
      top: `${y}%`,
      left: `${x}%`
    };
  }
  /**
   * Object.keys 헬퍼 (템플릿에서 사용)
   */
  getObjectKeys(obj) {
    return Object.keys(obj || {});
  }
  // ==================== 전투 시스템 ====================
  startBattle() {
    this.battleState.setBattleCallbacks({
      onBattleWin: (expGain, goldGain) => {
        this.gainExp(expGain);
        this.gold = this.battleManager.gold;
        this.addStoryBlock([
          "",
          "\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500",
          "\u2694\uFE0F \uC804\uD22C\uC5D0\uC11C \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!",
          `\u{1F4AB} \uACBD\uD5D8\uCE58 ${expGain} \uD68D\uB4DD!`,
          `\u{1F4B0} \uACE8\uB4DC ${goldGain} \uD68D\uB4DD!`,
          "\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500",
          ""
        ]);
        this.scrollToBattleLog();
      },
      onBattleLose: () => {
        this.addStoryBlock([
          "",
          "\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500",
          "\u{1F480} \uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...",
          "\uCCB4\uB825\uC774 \uC808\uBC18\uC73C\uB85C \uC904\uC5C8\uC2B5\uB2C8\uB2E4.",
          "\uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC7AC\uC815\uBE44\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.",
          "\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500",
          ""
        ]);
        this.scrollToBattleLog();
      },
      onBattleEnd: (victory) => {
        if (victory) {
          this.setChoices([
            "\u{1F6B6} \uC5EC\uD589\uC744 \uACC4\uC18D\uD55C\uB2E4",
            "\u{1F6D1} \uC7A0\uC2DC \uD734\uC2DD\uC744 \uCDE8\uD55C\uB2E4",
            "\u{1F50D} \uC804\uB9AC\uD488\uC744 \uB354 \uCC3E\uC544\uBCF8\uB2E4"
          ]);
        } else {
          this.addStoryBlock([
            "",
            "\u{1F480} \uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...",
            "\uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC7AC\uC815\uBE44\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.",
            ""
          ]);
          this.setChoices([
            "\u{1F3E0} \uB9C8\uC744\uB85C \uB3CC\uC544\uAC04\uB2E4",
            "\u{1F48A} \uD68C\uBCF5 \uBB3C\uC57D\uC744 \uC0AC\uC6A9\uD55C\uB2E4",
            "\u26FA \uADF8 \uC790\uB9AC\uC5D0\uC11C \uC57C\uC601\uD55C\uB2E4"
          ]);
        }
        this.scrollToBottom();
      },
      onLogUpdate: () => {
        this.scrollToBattleLog();
      },
      onEnemyDamage: () => {
        this.enemyTakingDamage = true;
        setTimeout(() => {
          this.enemyTakingDamage = false;
        }, 500);
      },
      onPlayerDamage: () => {
        this.playerTakingDamage = true;
        setTimeout(() => {
          this.playerTakingDamage = false;
        }, 500);
      }
    });
    this.battleManager.setPlayerCharacter(this.playerCharacter);
    this.battleManager.inventory = this.inventory;
    this.battleManager.gold = this.gold;
    this.battleManager.startBattle();
  }
  // ==================== 아이템 생성 시스템 ====================
  // 저장된 아이템 목록 로드
  loadSavedItems() {
    return __async(this, null, function* () {
      try {
        this.savedItems = yield this.itemDbService.getAllItems();
      } catch (error) {
        this.savedItems = [];
      }
    });
  }
  // 아이템 생성 패널 열기
  openItemCreator() {
    this.novelState.openItemCreator();
    this.generatedItem = null;
    this.itemGenerationError = "";
    if (!this.geminiAiService.hasApiKey()) {
      this.itemGenerationError = "Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.";
    }
  }
  // AI 아이템 생성 - 10개 랜덤 생성
  generateAiItem(itemType, grade) {
    this.itemGenerationHelper.generateAiItems(itemType, grade, () => {
      this.itemGenerationError = "";
      this.generatedItems = [];
      this.isGeneratingItem = true;
    }, (item) => {
      this.generatedItems.push(item);
    }, (items, error) => {
      this.isGeneratingItem = false;
      if (error) {
        this.itemGenerationError = error;
      } else if (items.length > 0) {
        this.notification.show(`${items.length}\uAC1C\uC758 \uC544\uC774\uD15C \uC0DD\uC131 \uC644\uB8CC!`);
      }
    });
  }
  // 생성된 아이템 저장
  saveGeneratedItem() {
    return __async(this, null, function* () {
      yield this.itemGenerationHelper.saveGeneratedItem(this.generatedItem, () => __async(this, null, function* () {
        yield this.loadSavedItems();
        this.novelState.closeItemCreator();
      }), () => {
      });
    });
  }
  // 인덱스로 생성된 아이템 저장
  saveGeneratedItemByIndex(index) {
    return __async(this, null, function* () {
      yield this.itemGenerationHelper.saveGeneratedItemByIndex(this.generatedItems, index, () => __async(this, null, function* () {
        yield this.loadSavedItems();
      }), () => {
      });
    });
  }
  // 생성된 모든 아이템 저장
  saveAllGeneratedItems() {
    return __async(this, null, function* () {
      yield this.itemGenerationHelper.saveAllGeneratedItems(this.generatedItems, (successCount) => __async(this, null, function* () {
        yield this.loadSavedItems();
        this.generatedItems = [];
      }));
    });
  }
  /**
   * 아이템 등급에 따른 가격 계산 (Helper 위임)
   */
  calculateItemPriceByGrade(grade) {
    return DiabloItemHelper.calculateItemPriceByGrade(grade);
  }
  // 아이템을 인벤토리에 추가
  addGeneratedItemToInventory() {
    if (!this.generatedItem)
      return;
    const inventoryItem = {
      id: `ai_item_${Date.now()}`,
      name: this.generatedItem.name || "\uC544\uC774\uD15C",
      description: this.generatedItem.description || "",
      type: this.mapItemType(this.generatedItem.type),
      quantity: 1,
      buyPrice: this.calculateItemPrice(this.generatedItem.grade),
      sellPrice: Math.floor(this.calculateItemPrice(this.generatedItem.grade) * 0.6),
      rarity: this.mapItemGrade(this.generatedItem.grade),
      stats: this.generatedItem.stats || {}
    };
    this.addToInventory(inventoryItem.id, 1);
    this.addStoryBlock([
      `\u{1F48E} ${inventoryItem.name}\uC744(\uB97C) \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00\uD588\uC2B5\uB2C8\uB2E4!`,
      `${inventoryItem.description}`
    ]);
    this.novelState.closeItemCreator();
    this.scrollToBottom();
  }
  /**
   * 상점에서 AI 생성 아이템 구매
   */
  buyItemFromShop(item, event) {
    return __async(this, null, function* () {
      if (event) {
        event.stopPropagation();
      }
      const price = item.price || this.calculateItemPriceByGrade(item.grade);
      if (this.gold < price) {
        this.notification.show(`\uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4! (\uD544\uC694: ${price}G, \uBCF4\uC720: ${this.gold}G)`);
        return;
      }
      const confirmed = yield this.showConfirmDialog(`${item.name}\uC744(\uB97C) ${price} \uACE8\uB4DC\uC5D0 \uAD6C\uB9E4\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uB4F1\uAE09: ${item.grade}
\uC124\uBA85: ${item.description}

\uD604\uC7AC \uACE8\uB4DC: ${this.gold}G \u2192 ${this.gold - price}G`);
      if (!confirmed)
        return;
      try {
        this.gold -= price;
        const inventoryItem = {
          id: `shop_item_${item.id}_${Date.now()}`,
          name: item.name,
          description: item.description,
          type: this.mapItemType(item.type),
          quantity: 1,
          buyPrice: price,
          sellPrice: Math.floor(price * 0.6),
          rarity: this.mapItemGrade(item.grade),
          stats: item.stats || {}
        };
        if (!this.playerCharacter.inventory) {
          this.playerCharacter.inventory = [];
        }
        const existingItem = this.playerCharacter.inventory.find((i) => i.name === inventoryItem.name && i.type === inventoryItem.type);
        if (existingItem) {
          existingItem.quantity = (existingItem.quantity || 0) + 1;
        } else {
          this.playerCharacter.inventory.push(inventoryItem);
        }
        if (!this.inventory) {
          this.inventory = [];
        }
        const existingInInventory = this.inventory.find((i) => i.name === inventoryItem.name && i.type === inventoryItem.type);
        if (existingInInventory) {
          existingInInventory.quantity = (existingInInventory.quantity || 0) + 1;
        } else {
          this.inventory.push(inventoryItem);
        }
        this.addStoryBlock([
          `\u{1F6D2} \uC0C1\uC810\uC5D0\uC11C ${item.name}\uC744(\uB97C) ${price} \uACE8\uB4DC\uC5D0 \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4!`,
          `\u{1F4B0} \uB0A8\uC740 \uACE8\uB4DC: ${this.gold}G`
        ]);
        this.notification.show(`${item.name}\uC744(\uB97C) \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4!`);
        yield this.saveGame("autosave");
        this.scrollToBottom();
      } catch (error) {
        this.notification.show("\uC544\uC774\uD15C \uAD6C\uB9E4\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
        this.gold += price;
      }
    });
  }
  // 저장된 아이템 삭제
  deleteItem(itemId, event) {
    return __async(this, null, function* () {
      if (event) {
        event.stopPropagation();
      }
      const confirmed = yield this.showConfirmDialog("\uC774 \uC544\uC774\uD15C\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?");
      if (!confirmed) {
        return;
      }
      try {
        yield this.itemDbService.deleteItem(itemId);
        yield this.loadSavedItems();
      } catch (error) {
        this.notification.show("\uC544\uC774\uD15C \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");
      }
    });
  }
  // 저장된 아이템 불러오기
  loadItem(item) {
    return __async(this, null, function* () {
      this.generatedItem = item;
      this.novelState.openItemCreator();
    });
  }
  // 아이템 타입 매핑 (Helper 위임)
  mapItemType(type) {
    return DiabloItemHelper.mapItemType(type);
  }
  // 아이템 등급 매핑 (Helper 위임)
  mapItemGrade(grade) {
    return DiabloItemHelper.mapItemGrade(grade);
  }
  /**
   * 아이템 가격 계산 (Helper 위임)
   */
  calculateItemPrice(gradeOrRarity, isBuyPrice = true) {
    return DiabloItemHelper.calculateItemPrice(gradeOrRarity, isBuyPrice);
  }
  // ==================== 장비 시스템 메서드 ====================
  /**
   * 등급 심볼 반환 (Helper 위임)
   */
  getRaritySymbol(rarity) {
    return DiabloItemHelper.getRaritySymbol(rarity);
  }
  /**
   * 인벤토리 아이템의 아이콘 반환 (Helper 위임)
   */
  getInventoryItemIcon(item) {
    return DiabloItemHelper.getInventoryItemIcon(item);
  }
  setInventoryFilter(filter) {
    this.inventoryFilter = filter;
  }
  /**
   * 필터링된 인벤토리 반환 (레거시)
   */
  getFilteredInventory() {
    if (!this.playerCharacter?.inventory)
      return [];
    if (this.inventoryFilter === "all") {
      return this.playerCharacter.inventory;
    }
    return this.playerCharacter.inventory.filter((item) => {
      switch (this.inventoryFilter) {
        case "weapon":
          return item.type === "weapon";
        case "armor":
          return ["armor", "helmet", "gloves", "boots", "belt"].includes(item.type);
        case "accessory":
          return ["amulet", "ring", "accessory"].includes(item.type);
        case "consumable":
          return item.type === "consumable";
        case "material":
          return ["material", "quest", "misc"].includes(item.type);
        default:
          return true;
      }
    });
  }
  /**
   * 필터링 & 정렬된 인벤토리 반환 (그리드용)
   */
  getFilteredAndSortedInventory() {
    return this.itemState.getFilteredAndSortedInventory(this.inventory, this.inventoryFilter, this.inventorySortBy);
  }
  /**
   * 희귀도 가중치 계산 (정렬용)
   */
  getRarityWeight(rarity) {
    return this.itemState.getRarityWeight(rarity);
  }
  /**
   * 빈 칸 배열 생성 (그리드 채우기용)
   */
  getEmptyInventorySlots() {
    const currentCount = this.getFilteredAndSortedInventory().length;
    const emptyCount = Math.max(0, this.maxInventorySize - currentCount);
    return Array(emptyCount).fill(0);
  }
  sortInventory() {
    this.snackBar.open(`\u2705 ${this.getSortMethodName()} \uC815\uB82C\uB418\uC5C8\uC2B5\uB2C8\uB2E4`, "\uB2EB\uAE30", { duration: 2e3, horizontalPosition: "center", verticalPosition: "bottom" });
  }
  autoSortInventory() {
    this.inventorySortBy = "rarity";
    this.inventoryFilter = "all";
    this.snackBar.open("\u2705 \uC778\uBCA4\uD1A0\uB9AC\uAC00 \uC790\uB3D9 \uC815\uB82C\uB418\uC5C8\uC2B5\uB2C8\uB2E4 (\uD76C\uADC0\uB3C4\uC21C)", "\uB2EB\uAE30", { duration: 2e3, horizontalPosition: "center", verticalPosition: "bottom" });
  }
  getSortMethodName() {
    const names = {
      "rarity": "\uD76C\uADC0\uB3C4\uC21C\uC73C\uB85C",
      "type": "\uD0C0\uC785\uC21C\uC73C\uB85C",
      "name": "\uC774\uB984\uC21C\uC73C\uB85C",
      "recent": "\uCD5C\uADFC \uD68D\uB4DD\uC21C\uC73C\uB85C"
    };
    return names[this.inventorySortBy] || "";
  }
  /**
   * 아이템 이름 축약 (그리드용)
   */
  getTruncatedName(item) {
    const name = item.nameKo || item.name;
    const maxLength = 8;
    if (name.length > maxLength) {
      return name.slice(0, maxLength) + "...";
    }
    return name;
  }
  /**
   * 셀 클릭 (상세 정보 표시)
   */
  /**
   * 인벤토리 셀 클릭 - 컨텍스트 메뉴 표시
   */
  onInventoryCellClick(event, item, index) {
    event.preventDefault();
    event.stopPropagation();
    this.selectedContextItem = item;
    this.selectedContextItemIndex = index;
    const rect = event.currentTarget.getBoundingClientRect();
    this.contextMenuPosition = {
      x: rect.left + rect.width / 2,
      y: rect.bottom + 5
    };
    this.showItemContextMenu = true;
    setTimeout(() => {
      document.addEventListener("click", this.closeContextMenu.bind(this), { once: true });
    }, 0);
  }
  /**
   * 셀 더블클릭 (빠른 장착/사용)
   */
  onInventoryCellDoubleClick(item, index) {
    if (item.type === "consumable") {
      this.useItem(item);
    } else if (!["material", "quest", "misc"].includes(item.type)) {
      const actualIndex = this.inventory.findIndex((invItem) => invItem.id === item.id);
      if (actualIndex !== -1) {
        this.equipItem(actualIndex);
      }
    }
  }
  /**
   * 총 무게 계산 (선택 사항)
   */
  calculateTotalWeight() {
    return this.inventory.reduce((total, item) => {
      const itemWeight = item.weight || 1;
      return total + itemWeight * item.quantity;
    }, 0);
  }
  /**
   * 인벤토리 드롭 핸들러 (드래그 앤 드롭)
   */
  onInventoryDrop(event) {
    const { previousIndex, currentIndex, item, previousContainer, container } = event;
    const dragData = item.data;
    if (previousContainer === container) {
      this.snackBar.open("\u2139\uFE0F \uC815\uB82C \uBAA8\uB4DC\uC5D0\uC11C\uB294 \uC218\uB3D9 \uC815\uB9AC\uAC00 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4", "\uB2EB\uAE30", { duration: 2e3, horizontalPosition: "center", verticalPosition: "bottom" });
      return;
    }
    if (dragData && dragData.item && dragData.slot) {
      this.snackBar.open(`\u2705 ${dragData.item.name} \uD574\uC81C\uB428`, "\uB2EB\uAE30", { duration: 2e3, horizontalPosition: "center", verticalPosition: "bottom" });
    }
  }
  /**
   * 장비 슬롯 드롭 핸들러
   * 인벤토리에서 장비 슬롯으로 드래그하여 장착
   */
  onEquipmentSlotDrop(event, targetSlot) {
    const dragData = event.item.data;
    const previousContainer = event.previousContainer;
    const container = event.container;
    if (previousContainer === container) {
      return;
    }
    if (dragData && dragData.item) {
      const item = dragData.item;
      if (dragData.slot) {
        if (dragData.slot === targetSlot) {
          this.snackBar.open("\u2139\uFE0F \uC774\uBBF8 \uAC19\uC740 \uC2AC\uB86F\uC5D0 \uC7A5\uCC29\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4", "\uB2EB\uAE30", { duration: 2e3, horizontalPosition: "center", verticalPosition: "bottom" });
          return;
        }
        this.unequipItem(dragData.slot);
        this.equipItemToSlot(item, targetSlot);
        return;
      }
      this.equipItemToSlot(item, targetSlot);
    }
  }
  equipItemToSlot(item, targetSlot) {
    if (!VALID_EQUIPMENT_SLOTS.includes(targetSlot)) {
      this.snackBar.open("\u274C \uC798\uBABB\uB41C \uC7A5\uBE44 \uC2AC\uB86F\uC785\uB2C8\uB2E4", "\uB2EB\uAE30", { duration: 2e3, horizontalPosition: "center", verticalPosition: "bottom" });
      return;
    }
    const itemType = item.type?.toLowerCase() || "";
    const validTypes = EQUIPMENT_SLOT_COMPATIBILITY[targetSlot] || [];
    if (!validTypes.some((validType) => itemType.includes(validType))) {
      this.snackBar.open(`\u274C ${item.nameKo || item.name}\uC740(\uB294) ${targetSlot} \uC2AC\uB86F\uC5D0 \uC7A5\uCC29\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4`, "\uB2EB\uAE30", {
        duration: 3e3,
        horizontalPosition: "center",
        verticalPosition: "bottom"
      });
      return;
    }
    const currentEquipment = this.playerCharacter.equipment[targetSlot];
    if (currentEquipment) {
      this.unequipItem(targetSlot);
    }
    this.playerCharacter.equipment[targetSlot] = __spreadValues({}, item);
    const index = this.inventory.findIndex((invItem) => invItem.id === item.id || invItem.name === item.name && invItem.nameKo === item.nameKo);
    if (index !== -1) {
      this.inventory.splice(index, 1);
    }
    if (this.playerCharacter.inventory) {
      const pcIndex = this.playerCharacter.inventory.findIndex((invItem) => invItem.id === item.id || invItem.name === item.name && invItem.nameKo === item.nameKo);
      if (pcIndex !== -1) {
        this.playerCharacter.inventory.splice(pcIndex, 1);
      }
    }
    this.updatePlayerStats();
    this.snackBar.open(`\u2705 ${item.nameKo || item.name} \uC7A5\uCC29 \uC644\uB8CC!`, "\uB2EB\uAE30", {
      duration: 2e3,
      horizontalPosition: "center",
      verticalPosition: "bottom",
      panelClass: ["success-snackbar"]
    });
    this.saveGame("equipment_change").catch((err) => {
    });
  }
  /**
   * 장비 타입별 색상 클래스 반환
   */
  getItemTypeColorClass(type) {
    const colorMap = {
      "weapon": "item-type-weapon",
      "armor": "item-type-armor",
      "helmet": "item-type-armor",
      "gloves": "item-type-armor",
      "boots": "item-type-armor",
      "belt": "item-type-armor",
      "amulet": "item-type-accessory",
      "ring": "item-type-accessory",
      "accessory": "item-type-accessory",
      "consumable": "item-type-consumable",
      "material": "item-type-material"
    };
    return colorMap[type] || "item-type-default";
  }
  /**
   * 원본 인벤토리에서 아이템의 인덱스 반환
   */
  getOriginalInventoryIndex(item) {
    if (!this.playerCharacter?.inventory)
      return -1;
    return this.playerCharacter.inventory.indexOf(item);
  }
  /**
   * 총 공격력 계산 (디아블로 스타일)
   */
  getTotalAttack() {
    if (!this.playerCharacter?.equipment)
      return 0;
    let total = 0;
    const weapon = this.playerCharacter.equipment.weapon;
    if (weapon?.baseStats?.minDamage && weapon?.baseStats?.maxDamage) {
      total = (weapon.baseStats.minDamage + weapon.baseStats.maxDamage) / 2;
      weapon.prefixes?.forEach((affix) => {
        if (affix.type === "damage") {
          total += affix.value;
        }
      });
      weapon.suffixes?.forEach((affix) => {
        if (affix.type === "damage") {
          total += affix.value;
        }
      });
    }
    return Math.round(total);
  }
  /**
   * 총 방어력 계산 (디아블로 스타일)
   */
  getTotalDefense() {
    if (!this.playerCharacter?.equipment)
      return 0;
    let total = 0;
    const equipment = this.playerCharacter.equipment;
    [equipment.armor, equipment.helmet, equipment.gloves, equipment.boots, equipment.belt].forEach((item) => {
      if (item?.baseStats?.armor) {
        total += item.baseStats.armor;
        item.prefixes?.forEach((affix) => {
          if (affix.type === "defense") {
            total += affix.value;
          }
        });
        item.suffixes?.forEach((affix) => {
          if (affix.type === "defense") {
            total += affix.value;
          }
        });
      }
    });
    return Math.round(total);
  }
  /**
   * 특수 효과 개수 계산 (모든 접두사/접미사)
   */
  getSpecialEffectsCount() {
    if (!this.playerCharacter?.equipment)
      return 0;
    let count = 0;
    const equipment = this.playerCharacter.equipment;
    [
      equipment.weapon,
      equipment.armor,
      equipment.helmet,
      equipment.gloves,
      equipment.boots,
      equipment.belt,
      equipment.amulet,
      equipment.ring1,
      equipment.ring2
    ].forEach((item) => {
      if (item) {
        count += item.prefixes?.length || 0;
        count += item.suffixes?.length || 0;
        count += item.uniqueProperties?.length || 0;
        if (Array.isArray(item.sockets)) {
          count += item.sockets.filter((s) => s.type !== "empty").length || 0;
        }
      }
    });
    return count;
  }
  getSlotName(slot) {
    const slotMap = {
      "weapon": "\uBB34\uAE30",
      "armor": "\uAC11\uC637",
      "helmet": "\uD22C\uAD6C",
      "gloves": "\uC7A5\uAC11",
      "boots": "\uC2E0\uBC1C",
      "belt": "\uBCA8\uD2B8",
      "amulet": "\uBAA9\uAC78\uC774",
      "ring1": "\uBC18\uC9C0 1",
      "ring2": "\uBC18\uC9C0 2"
    };
    return slotMap[slot] || slot;
  }
  /**
   * 아이템 전체 이름 생성 (접두사 + 기본이름 + 접미사)
   */
  getFullItemName(item) {
    if (item.rarity === "unique" || item.rarity === "set" || item.rarity === "legendary") {
      return item.name || item.baseType;
    }
    let name = "";
    if (item.prefixes && item.prefixes.length > 0) {
      name += item.prefixes[0].name + " ";
    }
    name += item.baseType;
    if (item.suffixes && item.suffixes.length > 0) {
      name += " " + item.suffixes[0].name;
    }
    return name;
  }
  /**
   * 랜덤 아이템 생성 (디아블로 스타일)
   */
  generateRandomItems() {
    if (!this.playerCharacter) {
      this.playerState.loadPlayer(this.createDefaultCharacter());
    }
    if (!this.playerCharacter.inventory) {
      this.playerCharacter.inventory = [];
    }
    const itemCount = Math.floor(Math.random() * 6) + 5;
    for (let i = 0; i < itemCount; i++) {
      const item = RandomItemHelper.createRandomItem(this.itemGeneratorService, (r, b) => this.calculateItemPrice(r, b));
      this.playerCharacter.inventory.push(item);
    }
    this.saveInventoryToLocalStorage();
    if (this.gameStarted && this.currentGameId) {
      this.saveGame("autosave");
    }
    this.snackBar.open(`\u2728 ${itemCount}\uAC1C\uC758 \uC544\uC774\uD15C\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`, "\uB2EB\uAE30", {
      duration: 3e3,
      horizontalPosition: "center",
      verticalPosition: "top",
      panelClass: ["success-snackbar"]
    });
  }
  /**
   * 게임 데이터 완전 초기화 (확인 다이얼로그 포함)
   */
  resetGameData() {
    const dialogRef = this.dialog.open(ConfirmDialogComponent, { width: "400px", data: {
      title: "\u26A0\uFE0F \uAC8C\uC784 \uB370\uC774\uD130 \uCD08\uAE30\uD654",
      message: "\uBAA8\uB4E0 \uC800\uC7A5 \uB370\uC774\uD130\uAC00 \uC0AD\uC81C\uB429\uB2C8\uB2E4.\n\n\u2022 \uC800\uC7A5\uB41C \uAC8C\uC784\n\u2022 \uC778\uBCA4\uD1A0\uB9AC\n\u2022 \uCE90\uB9AD\uD130 \uC815\uBCF4\n\u2022 \uC2A4\uD1A0\uB9AC \uC9C4\uD589 \uC0C1\uD669\n\n\uC815\uB9D0 \uCD08\uAE30\uD654\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",
      confirmText: "\uCD08\uAE30\uD654",
      cancelText: "\uCDE8\uC18C"
    } });
    dialogRef.afterClosed().subscribe((result) => {
      if (result) {
        this.performResetGameData();
      }
    });
  }
  /**
   * 인벤토리 디버그 정보 모달로 표시
   */
  debugInventory() {
    this.itemGenerationHelper.debugInventory(this.inventory, () => this.resetInventory());
  }
  /**
   * 게임 데이터 초기화 실행
   */
  performResetGameData() {
    try {
      const keysToRemove = [
        "novel_game_autosave",
        "novel_game_manual_save",
        "novel_inventory",
        "novel_character",
        "novel_current_story"
      ];
      keysToRemove.forEach((key) => {
        localStorage.removeItem(key);
      });
      this.gameStarted = false;
      this.currentGameId = "";
      this.playerState.loadPlayer(this.createDefaultCharacter());
      this.inventory = this.playerCharacter.inventory ? [...this.playerCharacter.inventory] : [];
      this.gold = 0;
      this.snackBar.open("\u2705 \uAC8C\uC784 \uB370\uC774\uD130\uAC00 \uC644\uC804\uD788 \uCD08\uAE30\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4\n\n\uC774\uC81C \uC0C8 \uAC8C\uC784\uC744 \uC2DC\uC791\uD558\uBA74 \uB514\uC544\uBE14\uB85C \uC544\uC774\uD15C 10\uAC1C\uAC00 \uC790\uB3D9\uC73C\uB85C \uC0DD\uC131\uB429\uB2C8\uB2E4!", "\uB2EB\uAE30", {
        duration: 5e3,
        horizontalPosition: "center",
        verticalPosition: "top",
        panelClass: ["success-snackbar"]
      });
      if (this.inventory.length > 0) {
      }
      setTimeout(() => {
        this.backToNovelSelection();
      }, 1500);
    } catch (error) {
      this.snackBar.open("\u26A0\uFE0F \uB370\uC774\uD130 \uCD08\uAE30\uD654\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4", "\uB2EB\uAE30", { duration: 3e3, horizontalPosition: "center", verticalPosition: "bottom" });
    }
  }
  /**
   * 인벤토리만 초기화 (확인 다이얼로그 포함)
   */
  resetInventory() {
    const dialogRef = this.dialog.open(ConfirmDialogComponent, { width: "400px", data: {
      title: "\u{1F392} \uC778\uBCA4\uD1A0\uB9AC \uCD08\uAE30\uD654",
      message: "\uD604\uC7AC \uC778\uBCA4\uD1A0\uB9AC\uC758 \uBAA8\uB4E0 \uC544\uC774\uD15C\uC774 \uC0AD\uC81C\uB418\uACE0\n\uAE30\uBCF8 \uB514\uC544\uBE14\uB85C \uC2A4\uD0C0\uC77C \uC544\uC774\uD15C 10\uAC1C\uB85C \uCD08\uAE30\uD654\uB429\uB2C8\uB2E4.\n\n\uC815\uB9D0 \uCD08\uAE30\uD654\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",
      confirmText: "\uCD08\uAE30\uD654",
      cancelText: "\uCDE8\uC18C"
    } });
    dialogRef.afterClosed().subscribe((result) => {
      if (result) {
        this.performResetInventory();
      }
    });
  }
  /**
   * 인벤토리 초기화 실행
   */
  performResetInventory() {
    try {
      if (!this.playerCharacter) {
        this.playerState.loadPlayer(this.createDefaultCharacter());
      }
      this.playerCharacter.inventory = this.createStartingInventory();
      this.inventory = [...this.playerCharacter.inventory];
      this.saveInventoryToLocalStorage();
      if (this.gameStarted && this.currentGameId) {
        this.saveGame("autosave");
      }
      this.snackBar.open("\u2705 \uC778\uBCA4\uD1A0\uB9AC\uAC00 \uAE30\uBCF8 \uC544\uC774\uD15C\uC73C\uB85C \uCD08\uAE30\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4", "\uB2EB\uAE30", {
        duration: 3e3,
        horizontalPosition: "center",
        verticalPosition: "top",
        panelClass: ["success-snackbar"]
      });
    } catch (error) {
      this.snackBar.open("\u26A0\uFE0F \uC778\uBCA4\uD1A0\uB9AC \uCD08\uAE30\uD654\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4", "\uB2EB\uAE30", { duration: 3e3, horizontalPosition: "center", verticalPosition: "bottom" });
    }
  }
  /**
   * 랜덤 아이템 생성
   */
  /**
   * 아이템 상세 정보 표시 (디아블로 스타일)
   */
  showItemDetails(item) {
    const detailsMessage = this.itemState.getItemDetailsText(item);
    this.snackBar.open(detailsMessage, "\uB2EB\uAE30", {
      duration: 1e4,
      horizontalPosition: "center",
      verticalPosition: "top",
      panelClass: ["item-details-snackbar"]
    });
  }
  equipItem(index) {
    if (!this.playerCharacter?.inventory || !this.playerCharacter.equipment)
      return;
    const item = this.playerCharacter.inventory[index];
    const result = this.equipmentService.equipItem(item, index, this.playerCharacter);
    if (result.success) {
      if (this.playerCharacter.inventory) {
        this.inventory = [...this.playerCharacter.inventory];
      }
      this.equipmentService.updatePlayerStats(this.playerCharacter);
      this.saveGame("autosave");
      this.saveInventoryToLocalStorage();
    }
  }
  /**
   * 장비 해제 (장비 슬롯에서 인벤토리로 되돌리기)
   */
  unequipItem(slotKey) {
    this.debugLogger.info("UNEQUIP", `\u{1F527} unequipItem \uD638\uCD9C\uB428 - slotKey: ${slotKey}`);
    const result = this.equipmentService.unequipItem(slotKey, this.playerCharacter, this.debugLogger);
    if (result.success) {
      if (this.playerCharacter.inventory) {
        this.inventory = [...this.playerCharacter.inventory];
        this.debugLogger.info("UNEQUIP", `\u{1F504} inventory \uBC30\uC5F4 \uB3D9\uAE30\uD654 \uC644\uB8CC - \uCD1D ${this.inventory.length}\uAC1C`);
      }
      this.equipmentService.updatePlayerStats(this.playerCharacter);
      this.debugLogger.info("UNEQUIP", `\u{1F4CA} \uB2A5\uB825\uCE58 \uC7AC\uACC4\uC0B0 \uC644\uB8CC`);
      this.saveGame("autosave");
      this.debugLogger.info("UNEQUIP", `\u{1F4BE} \uAC8C\uC784 \uC800\uC7A5 \uC644\uB8CC`);
      this.saveInventoryToLocalStorage();
      this.debugLogger.info("UNEQUIP", `\u{1F4BF} \uB85C\uCEEC \uC2A4\uD1A0\uB9AC\uC9C0 \uC800\uC7A5 \uC644\uB8CC`);
    }
  }
  /**
  /**
   * 플레이어 능력치 업데이트 (장비 능력치 합산)
   */
  updatePlayerStats() {
    if (!this.playerCharacter?.equipment)
      return;
    this.equipmentService.updatePlayerStats(this.playerCharacter);
  }
  /**
   * 아이템 컨텍스트 메뉴 관련 변수
   */
  selectedContextItem = null;
  selectedContextItemIndex = -1;
  showItemContextMenu = false;
  contextMenuPosition = { x: 0, y: 0 };
  showItemInfo = false;
  itemInfoPosition = { x: 300, y: 150 };
  isDraggingModal = false;
  modalDragOffset = { x: 0, y: 0 };
  /**
   * 인벤토리 아이템 선택 (Angular Material Menu용)
   */
  selectInventoryItem(item, index) {
    this.selectedContextItem = item;
    this.selectedContextItemIndex = index;
  }
  onContextMenuAction(action) {
    if (!this.selectedContextItem || this.selectedContextItemIndex === -1)
      return;
    switch (action) {
      case "equip":
        this.equipItem(this.selectedContextItemIndex);
        break;
      case "info":
        this.showItemDetails(this.selectedContextItem);
        break;
      case "compare":
        this.compareItemWithEquipped(this.selectedContextItem);
        break;
    }
  }
  /**
   * 장비 비교 기능 - 다이얼로그로 표시
   */
  compareItemWithEquipped(item) {
    if (!this.playerCharacter?.equipment)
      return;
    const equipmentSlot = item.type;
    const equippedItem = this.playerCharacter.equipment[equipmentSlot];
    const newAttack = item.stats?.attack || item.stats?.minDamage || 0;
    const newDefense = item.stats?.defense || item.stats?.armor || 0;
    const newHp = item.stats?.hp || 0;
    const newMp = item.stats?.mp || 0;
    let oldAttack = 0;
    let oldDefense = 0;
    let oldHp = 0;
    let oldMp = 0;
    let equippedName = "(\uC5C6\uC74C)";
    if (equippedItem) {
      oldAttack = equippedItem.baseStats?.attack || equippedItem.baseStats?.minDamage || 0;
      oldDefense = equippedItem.baseStats?.defense || equippedItem.baseStats?.armor || 0;
      oldHp = equippedItem.baseStats?.hp || 0;
      oldMp = equippedItem.baseStats?.mp || 0;
      equippedName = equippedItem.baseType;
    }
    const attackDiff = newAttack - oldAttack;
    const defenseDiff = newDefense - oldDefense;
    const hpDiff = newHp - oldHp;
    const mpDiff = newMp - oldMp;
    const totalDiff = attackDiff + defenseDiff + hpDiff / 10 + mpDiff / 10;
    let verdict = "";
    if (!equippedItem) {
      verdict = "\uC0C8 \uC7A5\uBE44\uB97C \uC7A5\uCC29\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?";
    } else if (totalDiff > 5) {
      verdict = "\u2728 \uC0C8 \uC7A5\uBE44\uAC00 \uD6E8\uC52C \uC88B\uC2B5\uB2C8\uB2E4! \uAD50\uCCB4\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?";
    } else if (totalDiff > 0) {
      verdict = "\u{1F44D} \uC0C8 \uC7A5\uBE44\uAC00 \uB354 \uC88B\uC2B5\uB2C8\uB2E4. \uAD50\uCCB4\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?";
    } else if (totalDiff === 0) {
      verdict = "\u{1F91D} \uB2A5\uB825\uCE58\uAC00 \uB3D9\uC77C\uD569\uB2C8\uB2E4. \uAD50\uCCB4\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?";
    } else if (totalDiff > -5) {
      verdict = "\u{1F44E} \uD604\uC7AC \uC7A5\uBE44\uAC00 \uB354 \uC88B\uC2B5\uB2C8\uB2E4. \uAD50\uCCB4\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?";
    } else {
      verdict = "\u26A0\uFE0F \uD604\uC7AC \uC7A5\uBE44\uAC00 \uD6E8\uC52C \uC88B\uC2B5\uB2C8\uB2E4! \uAD50\uCCB4\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?";
    }
    const formatStat = (value) => value > 0 ? `+${value}` : `${value}`;
    const formatDiff = (diff) => {
      if (diff > 0)
        return `<span style="color: #10b981; font-weight: 700;">+${diff} \u2B06</span>`;
      if (diff < 0)
        return `<span style="color: #ef4444; font-weight: 700;">${diff} \u2B07</span>`;
      return `<span style="color: #94a3b8;">0 \u27A1</span>`;
    };
    const comparisonHTML = `
      <div style="display: flex; gap: 20px; margin: 20px 0; font-family: 'Noto Sans KR', sans-serif;">
        <div style="flex: 1; padding: 16px; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(99, 102, 241, 0.1)); border: 2px solid #3b82f6; border-radius: 12px;">
          <div style="font-weight: 700; font-size: 16px; color: #3b82f6; margin-bottom: 12px; text-align: center;">\u{1F4E6} \uC0C8 \uC544\uC774\uD15C</div>
          <div style="font-weight: 600; font-size: 14px; margin-bottom: 8px; text-align: center; color: var(--text-primary);">${item.name}</div>
          <div style="font-size: 13px; line-height: 1.8; color: var(--text-secondary);">
            <div>\u2694\uFE0F \uACF5\uACA9\uB825: <strong style="color: var(--text-primary);">${formatStat(newAttack)}</strong></div>
            <div>\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825: <strong style="color: var(--text-primary);">${formatStat(newDefense)}</strong></div>
            <div>\u2764\uFE0F HP: <strong style="color: var(--text-primary);">${formatStat(newHp)}</strong></div>
            <div>\u{1F499} MP: <strong style="color: var(--text-primary);">${formatStat(newMp)}</strong></div>
          </div>
        </div>
        <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 16px; min-width: 100px;">
          <div style="font-weight: 700; font-size: 14px; color: var(--text-secondary); margin-bottom: 12px;">\uCC28\uC774</div>
          <div style="font-size: 13px; line-height: 1.8;">
            <div>${formatDiff(attackDiff)}</div>
            <div>${formatDiff(defenseDiff)}</div>
            <div>${formatDiff(hpDiff)}</div>
            <div>${formatDiff(mpDiff)}</div>
          </div>
        </div>
        <div style="flex: 1; padding: 16px; background: linear-gradient(135deg, rgba(148, 163, 184, 0.1), rgba(100, 116, 139, 0.1)); border: 2px solid #64748b; border-radius: 12px;">
          <div style="font-weight: 700; font-size: 16px; color: #64748b; margin-bottom: 12px; text-align: center;">\u{1F392} \uD604\uC7AC \uC7A5\uBE44</div>
          <div style="font-weight: 600; font-size: 14px; margin-bottom: 8px; text-align: center; color: var(--text-primary);">${equippedName}</div>
          <div style="font-size: 13px; line-height: 1.8; color: var(--text-secondary);">
            <div>\u2694\uFE0F \uACF5\uACA9\uB825: <strong style="color: var(--text-primary);">${formatStat(oldAttack)}</strong></div>
            <div>\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825: <strong style="color: var(--text-primary);">${formatStat(oldDefense)}</strong></div>
            <div>\u2764\uFE0F HP: <strong style="color: var(--text-primary);">${formatStat(oldHp)}</strong></div>
            <div>\u{1F499} MP: <strong style="color: var(--text-primary);">${formatStat(oldMp)}</strong></div>
          </div>
        </div>
      </div>
    `;
    const dialogRef = this.dialog.open(ConfirmDialogComponent, {
      width: "700px",
      data: {
        title: "\u2696\uFE0F \uC7A5\uBE44 \uBE44\uAD50",
        message: comparisonHTML,
        confirmText: "\uC7A5\uCC29\uD558\uAE30",
        cancelText: "\uCDE8\uC18C",
        verdict
      }
    });
    dialogRef.afterClosed().subscribe((result) => {
      if (result) {
        this.equipItem(this.selectedContextItemIndex);
      }
    });
  }
  deleteInventoryItem(index) {
    if (!this.playerCharacter?.inventory)
      return;
    const item = this.playerCharacter.inventory[index];
    const dialogRef = this.dialog.open(ConfirmDialogComponent, { width: "400px", data: {
      title: "\uC544\uC774\uD15C \uC0AD\uC81C",
      message: `"${item.name}"\uC744(\uB97C) \uC815\uB9D0 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,
      confirmText: "\uC0AD\uC81C",
      cancelText: "\uCDE8\uC18C"
    } });
    dialogRef.afterClosed().subscribe((result) => {
      if (result && this.playerCharacter?.inventory) {
        this.playerCharacter.inventory.splice(index, 1);
        this.saveInventoryToLocalStorage();
        if (this.gameStarted && this.currentGameId) {
          this.saveGame("autosave");
        }
        this.snackBar.open(`\u{1F5D1}\uFE0F ${item.name}\uC774(\uAC00) \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4`, "\uB2EB\uAE30", { duration: 3e3, horizontalPosition: "center", verticalPosition: "bottom" });
      }
    });
  }
  /**
   * 인벤토리를 로컬 스토리지에 저장
   */
  saveInventoryToLocalStorage() {
    if (this.playerCharacter?.inventory) {
      try {
        localStorage.setItem("novel_inventory", JSON.stringify(this.playerCharacter.inventory));
      } catch (error) {
      }
    }
  }
  /**
   * 로컬 스토리지에서 인벤토리 불러오기
   */
  loadInventoryFromLocalStorage() {
    try {
      const savedInventory = localStorage.getItem("novel_inventory");
      if (savedInventory) {
        const inventory = JSON.parse(savedInventory);
        return inventory;
      }
    } catch (error) {
    }
    return null;
  }
  /**
   * 저장된 인벤토리 불러오기 및 적용
   */
  loadSavedInventory() {
    const savedInventory = this.loadInventoryFromLocalStorage();
    if (savedInventory && savedInventory.length > 0) {
      if (!this.playerCharacter) {
        this.playerState.loadPlayer(this.createDefaultCharacter());
      }
      this.playerCharacter.inventory = savedInventory;
    }
  }
  /**
   * 기본 캐릭터 생성
   */
  createDefaultCharacter() {
    return {
      name: "\uBAA8\uD5D8\uAC00",
      level: 1,
      exp: 0,
      maxExp: 100,
      hp: 100,
      maxHp: 100,
      mp: 50,
      maxMp: 50,
      attack: 10,
      defense: 10,
      agility: 10,
      strength: 10,
      intelligence: 10,
      gold: 1e4,
      // 초기 골드 (넉넉하게)
      gem: 500,
      // 초기 보석 (프리미엄 화폐)
      crystal: 200,
      // 초기 크리스탈 (강화 재료)
      ticket: 50,
      // 초기 티켓 (특수 컨텐츠 입장권)
      skillPoints: 0,
      skills: [],
      inventory: this.createStartingInventory(),
      // 디아블로 스타일 시작 아이템
      equipment: {
        weapon: void 0,
        armor: void 0,
        helmet: void 0,
        gloves: void 0,
        boots: void 0,
        belt: void 0,
        amulet: void 0,
        ring1: void 0,
        ring2: void 0
      }
    };
  }
  /**
   * 디아블로 스타일 시작 인벤토리 생성
   */
  createStartingInventory() {
    return this.itemGeneratorService.createStartingInventory();
  }
  // ==================== 던전 시스템 메서드 ====================
  initializeDungeonSystem() {
    this.dungeonManager.initializeDungeonSystem();
  }
  openDungeonEntryDialog(dungeonType) {
    this.dungeonManager.openDungeonEntryDialog(dungeonType);
  }
  closeDungeonEntryDialog() {
    this.dungeonManager.closeDungeonEntryDialog();
  }
  enterDungeon(dungeonType, difficulty) {
    this.dungeonManager.enterDungeon(dungeonType, difficulty);
  }
  /**
   * 던전 생성 (서비스 위임)
   */
  generateDungeon(dungeonType, difficulty) {
    return this.dungeonGenerator.generateDungeon(dungeonType, difficulty, this.playerCharacter.level);
  }
  /**
   * 층 진입 (Helper 위임)
   */
  enterFloor(floorNumber) {
    DungeonFlowHelper.enterFloor(floorNumber, this.currentDungeon, this.debugLogger, (blocks) => this.addStoryBlock(blocks), (room) => this.enterRoom(room));
  }
  /**
   * 방 진입 (Helper 위임)
   */
  enterRoom(room) {
    this.currentDungeonRoom = DungeonFlowHelper.enterRoom(room, this.currentDungeon, this.currentDungeonRoom, (blocks) => this.addStoryBlock(blocks), (type) => this.getRoomTypeKorean(type));
    if (room.monsters.length > 0 && !room.isCleared) {
      this.startDungeonCombat(room);
    }
    this.debugLogger.info("\uB358\uC804", `\u{1F6AA} \uBC29 \uC9C4\uC785: ${room.type}`);
  }
  /**
   * 던전 전투 시작
   */
  /**
   * 던전 전투 시작
   */
  startDungeonCombat(room) {
    if (this.dungeonTestOptions.skipCombat) {
      this.debugLogger.info("\uB358\uC804", "\u23ED\uFE0F \uC804\uD22C \uC2A4\uD0B5 \uD65C\uC131\uD654 - \uC790\uB3D9 \uC2B9\uB9AC");
      room.monsters.forEach((monster2) => {
        monster2.hp = 0;
        monster2.isDead = true;
        const goldReward = Math.floor(Math.random() * (monster2.dropTable.goldMax - monster2.dropTable.goldMin + 1)) + monster2.dropTable.goldMin;
        const expReward = Math.floor(monster2.maxHp * 0.8);
        this.playerCharacter.gold += goldReward;
        this.gainExp(expReward);
        if (this.currentDungeon) {
          this.currentDungeon.accumulatedRewards.gold += goldReward;
          this.currentDungeon.accumulatedRewards.experience += expReward;
          this.currentDungeon.stats.monstersKilled++;
          if (monster2.type === "elite") {
            this.currentDungeon.stats.elitesKilled++;
          } else if (monster2.type === "boss") {
            this.currentDungeon.stats.bossKilled = true;
            this.currentDungeon.stats.elitesKilled++;
          }
        }
      });
      room.isCleared = true;
      this.addStoryBlock([
        "\u23ED\uFE0F \uC804\uD22C \uC790\uB3D9 \uC2B9\uB9AC!",
        `\u{1F480} ${room.monsters.length}\uB9C8\uB9AC \uCC98\uCE58`,
        "\uBC29\uC774 \uD074\uB9AC\uC5B4\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",
        ""
      ]);
      this.debugLogger.info("\uB358\uC804", `\u{1F4BE} \uC804\uD22C \uC2A4\uD0B5 \uD6C4 \uC790\uB3D9 \uC800\uC7A5 (\uACBD\uD5D8\uCE58: ${this.playerCharacter.exp}/${this.playerCharacter.maxExp}, \uB808\uBCA8: ${this.playerCharacter.level})`);
      this.saveGame(`auto_dungeon_skip_combat`).then(() => {
      });
      return;
    }
    const monster = room.monsters[0];
    this.addStoryBlock([
      `\u2694\uFE0F ${monster.name}\uC774(\uAC00) \uB098\uD0C0\uB0AC\uB2E4!`,
      `\uB808\uBCA8: ${monster.level} | HP: ${monster.hp}`,
      monster.eliteAffixes ? `\uD2B9\uC131: ${monster.eliteAffixes.join(", ")}` : "",
      ""
    ]);
  }
  /**
   * 던전 전투 승리
   */
  winDungeonCombat(room, monster) {
    return __async(this, null, function* () {
      yield DungeonFlowHelper.winDungeonCombat(room, monster, this.currentDungeon, this.playerCharacter, (exp) => this.gainExp(exp), (blocks) => this.addStoryBlock(blocks), (saveId) => this.saveGame(saveId), () => this.completeDungeon(), this.debugLogger);
    });
  }
  /**
   * 던전 클리어 (Helper 위임)
   */
  completeDungeon() {
    return __async(this, null, function* () {
      yield DungeonFlowHelper.completeDungeon(this.currentDungeon, this.dungeonProgress, this.dungeonTypes, (blocks) => this.addStoryBlock(blocks), (choices) => this.setChoices(choices), (saveId) => this.saveGame(saveId), this.debugLogger, () => {
        this.showDungeonPanel = false;
        this.currentDungeon = null;
        this.currentDungeonRoom = null;
      });
    });
  }
  /**
   * 다음 방으로 이동 (Helper 위임)
   */
  moveToNextRoom() {
    DungeonFlowHelper.moveToNextRoom(this.currentDungeon, this.currentDungeonRoom, (room) => this.enterRoom(room));
  }
  escapeDungeon() {
    if (!this.currentDungeon)
      return;
    this.currentDungeon.status = "failed";
    this.dungeonProgress.inDungeon = false;
    this.addStoryBlock([
      "",
      "\u{1F6AA} \uB2F9\uC2E0\uC740 \uB358\uC804\uC5D0\uC11C \uD0C8\uCD9C\uD588\uC2B5\uB2C8\uB2E4.",
      "\u{1F4B0} \uD68D\uB4DD\uD55C \uBCF4\uC0C1\uC740 \uC720\uC9C0\uB429\uB2C8\uB2E4.",
      ""
    ]);
    this.showDungeonPanel = false;
    this.currentDungeon = null;
    this.currentDungeonRoom = null;
    this.closeDungeonDialog();
    this.saveGame("autosave");
    this.debugLogger.warn("\uB358\uC804", "\u26A0\uFE0F \uB358\uC804 \uD0C8\uCD9C");
  }
  /**
   * 난이도 한글 변환
   */
  getDifficultyKorean(difficulty) {
    const map2 = {
      easy: "\uC26C\uC6C0",
      normal: "\uBCF4\uD1B5",
      hard: "\uC5B4\uB824\uC6C0",
      hell: "\uC9C0\uC625"
    };
    return map2[difficulty];
  }
  /**
   * 방 타입 한글 변환
   */
  getRoomTypeKorean(type) {
    return DungeonFlowHelper.getRoomTypeKorean(String(type));
  }
  // ==================== 던전 테스트 메서드 ====================
  openDungeonDialog() {
    this.dungeonManager.openDungeonDialog();
  }
  closeDungeonDialog() {
    this.dungeonManager.closeDungeonDialog();
  }
  selectDungeonType(dungeonType) {
    this.dungeonManager.selectDungeonType(dungeonType);
  }
  selectDifficulty(difficulty) {
    this.dungeonManager.selectDifficulty(difficulty);
  }
  startDungeon() {
    this.dungeonManager.startDungeon();
  }
  /**
   * 던전 Explorer 이벤트: 방 이동
   */
  onDungeonRoomMove(roomId) {
    this.dungeonManager.onDungeonRoomMove(roomId);
  }
  /**
   * 던전 Explorer 이벤트: 몬스터 공격
   */
  onDungeonMonsterAttack(monster) {
    this.dungeonManager.onDungeonMonsterAttack(monster);
  }
  /**
   * 던전 Explorer 이벤트: 오브젝트 사용
   */
  onDungeonInteractableUse(interactable) {
    this.dungeonManager.onDungeonInteractableUse(interactable);
  }
  /**
   * 던전 Explorer 이벤트: 탈출
   */
  onDungeonEscape() {
    this.dungeonManager.onDungeonEscape();
  }
  /**
   * 던전 Explorer 이벤트: 층 이동
   */
  onDungeonFloorMove(floorNumber) {
    this.dungeonManager.onDungeonFloorMove(floorNumber);
  }
  /**
   * 던전 Explorer 이벤트: 전투 보상 수령
   */
  onDungeonRewardsClaimed(rewards) {
    this.dungeonManager.onDungeonRewardsClaimed(rewards, this.inventory);
  }
  createDungeonRewardItem(rewardItem) {
    return this.dungeonManager.createDungeonRewardItem(rewardItem);
  }
  toggleDungeonTestOption(option) {
    this.dungeonManager.toggleDungeonTestOption(option);
  }
  /**
   * 플레이어 장비 정보 가져오기
   */
  getPlayerEquipment() {
    return this.dungeonManager.getPlayerEquipment();
  }
  // ============================================
  // 컨텍스트 메뉴 & 아이템 정보 모달 메서드
  // ============================================
  /**
   * 인벤토리 셀 우클릭 - 컨텍스트 메뉴 표시
   */
  onInventoryCellRightClick(event, item, index) {
    event.preventDefault();
    event.stopPropagation();
    this.selectedContextItem = item;
    this.selectedContextItemIndex = index;
    this.contextMenuPosition = { x: event.clientX, y: event.clientY };
    this.showItemContextMenu = true;
    setTimeout(() => {
      document.addEventListener("click", this.closeContextMenu.bind(this), { once: true });
    }, 0);
  }
  closeContextMenu() {
    this.showItemContextMenu = false;
  }
  equipItemFromMenu() {
    if (!this.selectedContextItem || this.selectedContextItemIndex === -1)
      return;
    const item = this.selectedContextItem;
    const itemType = item.type?.toLowerCase() || "";
    let targetSlot = "";
    if (itemType.includes("weapon") || itemType.includes("sword") || itemType.includes("bow") || itemType.includes("staff")) {
      targetSlot = "weapon";
    } else if (itemType.includes("armor") || itemType.includes("chest")) {
      targetSlot = "armor";
    } else if (itemType.includes("helmet") || itemType.includes("helm")) {
      targetSlot = "helmet";
    } else if (itemType.includes("gloves")) {
      targetSlot = "gloves";
    } else if (itemType.includes("boots") || itemType.includes("shoes")) {
      targetSlot = "boots";
    } else if (itemType.includes("amulet") || itemType.includes("necklace")) {
      targetSlot = "amulet";
    } else if (itemType.includes("belt")) {
      targetSlot = "belt";
    } else if (itemType.includes("ring")) {
      targetSlot = this.playerCharacter.equipment?.ring1 ? "ring2" : "ring1";
    }
    if (targetSlot) {
      this.equipItemToSlot(item, targetSlot);
    } else {
      this.snackBar.open("\u274C \uC7A5\uCC29\uD560 \uC218 \uC5C6\uB294 \uC544\uC774\uD15C\uC785\uB2C8\uB2E4", "\uB2EB\uAE30", { duration: 2e3, horizontalPosition: "center", verticalPosition: "bottom" });
    }
    this.closeContextMenu();
  }
  /**
   * 컨텍스트 메뉴 - 정보 보기
   */
  showItemInfoModal() {
    if (!this.selectedContextItem)
      return;
    this.showItemInfo = true;
    this.closeContextMenu();
  }
  discardItemFromMenu() {
    if (!this.selectedContextItem || this.selectedContextItemIndex === -1)
      return;
    const itemName = this.selectedContextItem.nameKo || this.selectedContextItem.name;
    if (confirm(`\uC815\uB9D0\uB85C "${itemName}"\uC744(\uB97C) \uBC84\uB9AC\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`)) {
      this.inventory.splice(this.selectedContextItemIndex, 1);
      this.snackBar.open(`\u{1F5D1}\uFE0F ${itemName}\uC744(\uB97C) \uBC84\uB838\uC2B5\uB2C8\uB2E4`, "\uB2EB\uAE30", { duration: 2e3, horizontalPosition: "center", verticalPosition: "bottom" });
      this.saveGame("inventory_change").catch((err) => {
      });
    }
    this.closeContextMenu();
  }
  closeItemInfoModal() {
    this.showItemInfo = false;
  }
  /**
   * 아이템 정보 모달 드래그 시작
   */
  onItemInfoDragStart(event) {
    if (event.target.classList.contains("modal-close-btn") || event.target.closest(".item-info-actions")) {
      return;
    }
    this.isDraggingModal = true;
    this.modalDragOffset = {
      x: event.clientX - this.itemInfoPosition.x,
      y: event.clientY - this.itemInfoPosition.y
    };
    event.preventDefault();
    const onMouseMove = (e) => {
      if (this.isDraggingModal) {
        this.itemInfoPosition = {
          x: e.clientX - this.modalDragOffset.x,
          y: e.clientY - this.modalDragOffset.y
        };
      }
    };
    const onMouseUp = () => {
      this.isDraggingModal = false;
      document.removeEventListener("mousemove", onMouseMove);
      document.removeEventListener("mouseup", onMouseUp);
    };
    document.addEventListener("mousemove", onMouseMove);
    document.addEventListener("mouseup", onMouseUp);
  }
  equipItemFromModal() {
    this.equipItemFromMenu();
    this.closeItemInfoModal();
  }
  discardItemFromModal() {
    const itemName = this.selectedContextItem?.nameKo || this.selectedContextItem?.name;
    if (confirm(`\uC815\uB9D0\uB85C "${itemName}"\uC744(\uB97C) \uBC84\uB9AC\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`)) {
      this.discardItemFromMenu();
      this.closeItemInfoModal();
    }
  }
  /**
   * 아이템이 장착 가능한지 확인
   */
  isEquippableItem(item) {
    if (!item || !item.type)
      return false;
    const itemType = item.type.toLowerCase();
    const equipTypes = [
      "weapon",
      "armor",
      "helmet",
      "gloves",
      "boots",
      "amulet",
      "belt",
      "ring",
      "sword",
      "bow",
      "staff",
      "chest",
      "helm",
      "necklace",
      "shoes"
    ];
    return equipTypes.some((type) => itemType.includes(type));
  }
  /**
   * 모바일용 빠른 장착 (원탭 장착)
   */
  quickEquipItem(item, index) {
    if (!item || !this.isEquippableItem(item)) {
      this.snackBar.open("\u274C \uC7A5\uCC29\uD560 \uC218 \uC5C6\uB294 \uC544\uC774\uD15C\uC785\uB2C8\uB2E4", "\uB2EB\uAE30", {
        duration: 1500,
        horizontalPosition: "center",
        verticalPosition: "bottom"
      });
      return;
    }
    const itemType = item.type?.toLowerCase() || "";
    let targetSlot = "";
    if (itemType.includes("weapon") || itemType.includes("sword") || itemType.includes("bow") || itemType.includes("staff")) {
      targetSlot = "weapon";
    } else if (itemType.includes("armor") || itemType.includes("chest")) {
      targetSlot = "armor";
    } else if (itemType.includes("helmet") || itemType.includes("helm")) {
      targetSlot = "helmet";
    } else if (itemType.includes("gloves")) {
      targetSlot = "gloves";
    } else if (itemType.includes("boots") || itemType.includes("shoes")) {
      targetSlot = "boots";
    } else if (itemType.includes("amulet") || itemType.includes("necklace")) {
      targetSlot = "amulet";
    } else if (itemType.includes("belt")) {
      targetSlot = "belt";
    } else if (itemType.includes("ring")) {
      targetSlot = this.playerCharacter.equipment?.ring1 ? "ring2" : "ring1";
    }
    if (targetSlot) {
      this.equipItemToSlot(item, targetSlot);
      if (navigator.vibrate) {
        navigator.vibrate(50);
      }
      this.snackBar.open(`\u2705 ${item.nameKo || item.name}\uC744(\uB97C) \uC7A5\uCC29\uD588\uC2B5\uB2C8\uB2E4`, "\uB2EB\uAE30", {
        duration: 1500,
        horizontalPosition: "center",
        verticalPosition: "bottom"
      });
    } else {
      this.snackBar.open("\u274C \uC7A5\uCC29\uD560 \uC218 \uC5C6\uB294 \uC544\uC774\uD15C\uC785\uB2C8\uB2E4", "\uB2EB\uAE30", {
        duration: 1500,
        horizontalPosition: "center",
        verticalPosition: "bottom"
      });
    }
  }
  getRarityName(rarity) {
    const rarityNames = {
      "common": "\uC77C\uBC18",
      "uncommon": "\uACE0\uAE09",
      "rare": "\uD76C\uADC0",
      "epic": "\uC601\uC6C5",
      "legendary": "\uC804\uC124",
      "unique": "\uC720\uB2C8\uD06C",
      "mythic": "\uC2E0\uD654"
    };
    return rarityNames[rarity] || rarity;
  }
  getTypeName(type) {
    const typeNames = {
      "weapon": "\uBB34\uAE30",
      "armor": "\uBC29\uC5B4\uAD6C",
      "helmet": "\uD22C\uAD6C",
      "gloves": "\uC7A5\uAC11",
      "boots": "\uC2E0\uBC1C",
      "belt": "\uD5C8\uB9AC\uB760",
      "amulet": "\uBAA9\uAC78\uC774",
      "ring": "\uBC18\uC9C0",
      "consumable": "\uC18C\uBE44\uD488",
      "material": "\uC7AC\uB8CC",
      "quest": "\uD018\uC2A4\uD2B8",
      "misc": "\uAE30\uD0C0"
    };
    return typeNames[type] || type;
  }
  /**
   * 플레이어 스킬 목록 가져오기
   */
  getPlayerSkills() {
    return this.playerCharacter.skills || [];
  }
  // ==================== 누락된 UI 메서드들 (스텁) ====================
  scrollToNovels() {
    const element = document.getElementById("novels-section");
    element?.scrollIntoView({ behavior: "smooth" });
  }
  navigateToWuxiaGame() {
    this.router.navigate(["/novel/wuxia-game"]);
  }
  openCharacterCreator() {
    this.novelState.openCharacterCreator();
  }
  isCharacterSelected(character) {
    return this.selectedCharactersForStory.some((c) => c.id === character.id);
  }
  selectCharacterForStory(character) {
    const index = this.selectedCharactersForStory.findIndex((c) => c.id === character.id);
    if (index >= 0) {
      this.selectedCharactersForStory.splice(index, 1);
    } else {
      this.selectedCharactersForStory.push(character);
    }
  }
  isItemSelected(item) {
    return this.selectedItemsForStory.some((i) => i.id === item.id);
  }
  selectItemForStory(item) {
    const index = this.selectedItemsForStory.findIndex((i) => i.id === item.id);
    if (index >= 0) {
      this.selectedItemsForStory.splice(index, 1);
    } else {
      this.selectedItemsForStory.push(item);
    }
  }
  isScenarioSelected(scenario) {
    return this.selectedScenariosForStory.some((s) => s.id === scenario.id);
  }
  selectScenarioForStory(scenario) {
    const index = this.selectedScenariosForStory.findIndex((s) => s.id === scenario.id);
    if (index >= 0) {
      this.selectedScenariosForStory.splice(index, 1);
    } else {
      this.selectedScenariosForStory.push(scenario);
    }
  }
  selectChoice(index) {
    return __async(this, null, function* () {
      if (index >= 0 && index < this.choices.length) {
        const selectedChoice = this.choices[index];
        this.currentPath.push(selectedChoice);
        this.debugLogger.info("\uC120\uD0DD\uC9C0", `\u2705 \uC120\uD0DD: ${selectedChoice}`);
        yield this.saveGame("autosave");
      }
    });
  }
  selectNovel(novel) {
    this.selectedNovel = novel;
    this.novelSelected = true;
  }
  formatSaveDate(date) {
    if (!date)
      return "";
    const d = new Date(date);
    return d.toLocaleString("ko-KR");
  }
  getCurrentTime() {
    return (/* @__PURE__ */ new Date()).toLocaleTimeString("ko-KR");
  }
  getRoleName(role) {
    const roles = {
      "warrior": "\uC804\uC0AC",
      "mage": "\uB9C8\uBC95\uC0AC",
      "archer": "\uAD81\uC218",
      "thief": "\uB3C4\uC801",
      "priest": "\uC0AC\uC81C",
      "paladin": "\uC131\uAE30\uC0AC"
    };
    return roles[role] || role;
  }
  // 조직 멤버 선택 (미구현 - 임시)
  selectMember(member) {
    this.selectedMember = member;
  }
  getStatusName(status) {
    const statuses = {
      "poison": "\uB3C5",
      "stun": "\uAE30\uC808",
      "burn": "\uD654\uC0C1",
      "freeze": "\uB0C9\uAE30",
      "silence": "\uCE68\uBB35",
      "blind": "\uC2E4\uBA85"
    };
    return statuses[status] || status;
  }
  getNodeColor(node) {
    const colors = {
      "start": "#4CAF50",
      "story": "#2196F3",
      "battle": "#F44336",
      "event": "#FF9800",
      "ending": "#9C27B0"
    };
    return colors[node.type] || "#757575";
  }
  getNodeBorderColor(node) {
    return this.getNodeColor(node);
  }
  isArray(value) {
    return Array.isArray(value);
  }
  // 아코디언 토글 메서드
  toggleStories() {
    this.isStoriesExpanded = !this.isStoriesExpanded;
  }
  toggleCharacters() {
    this.isCharactersExpanded = !this.isCharactersExpanded;
  }
  toggleScenarios() {
    this.isScenariosExpanded = !this.isScenariosExpanded;
  }
  toggleItems() {
    this.isItemsExpanded = !this.isItemsExpanded;
  }
  toggleShop() {
    this.isShopExpanded = !this.isShopExpanded;
  }
  // 캐릭터의 게임 데이터 가져오기
  getCharacterGameData(characterName) {
    const savedGames = localStorage.getItem("novel_games");
    this.debugLogger.info("\uCE90\uB9AD\uD130\uB370\uC774\uD130", `\u{1F50D} LocalStorage novel_games: ${savedGames ? "\uC788\uC74C" : "\uC5C6\uC74C"}`);
    if (!savedGames)
      return null;
    try {
      const games = JSON.parse(savedGames);
      this.debugLogger.info("\uCE90\uB9AD\uD130\uB370\uC774\uD130", `\u{1F4DA} \uC804\uCCB4 \uAC8C\uC784 \uBAA9\uB85D: ${Object.keys(games).length}\uAC1C`);
      const characterGames = Object.values(games).filter((game) => {
        return game?.playerCharacter?.name === characterName;
      });
      this.debugLogger.info("\uCE90\uB9AD\uD130\uB370\uC774\uD130", `\u2705 "${characterName}" \uCE90\uB9AD\uD130 \uAC8C\uC784: ${characterGames.length}\uAC1C`);
      if (characterGames.length === 0)
        return null;
      const latestGame = characterGames.sort((a, b) => new Date(b.timestamp || 0).getTime() - new Date(a.timestamp || 0).getTime())[0];
      this.debugLogger.info("\uCE90\uB9AD\uD130\uB370\uC774\uD130", `\u{1F3AE} \uCD5C\uADFC \uAC8C\uC784 \uBC18\uD658 \uC644\uB8CC`);
      return latestGame;
    } catch (error) {
      this.debugLogger.error("\uCE90\uB9AD\uD130\uB370\uC774\uD130", `\u274C \uAC8C\uC784 \uB370\uC774\uD130 \uD30C\uC2F1 \uC624\uB958: ${error}`);
      return null;
    }
  }
  // 캐릭터의 인벤토리 아이템 개수
  getCharacterInventoryCount(characterName) {
    const gameData = this.getCharacterGameData(characterName);
    return gameData?.playerCharacter?.inventory?.length || 0;
  }
  // 캐릭터의 골드
  getCharacterGold(characterName) {
    const gameData = this.getCharacterGameData(characterName);
    return gameData?.playerCharacter?.gold || gameData?.gold || 0;
  }
  // 캐릭터의 레벨
  getCharacterLevel(characterName) {
    const gameData = this.getCharacterGameData(characterName);
    return gameData?.playerCharacter?.level || 1;
  }
  closeAllPanels() {
    this.showCharacterPanel = false;
    this.novelState.closeInventoryPanel();
    this.novelState.closeShopPanel();
  }
  toggleCharacterPanel() {
    this.showCharacterPanel = !this.showCharacterPanel;
  }
  toggleInventoryPanel() {
    this.novelState.toggleInventoryPanel();
  }
  toggleShopPanel() {
    this.novelState.toggleShopPanel();
  }
  toggleStats() {
    this.showStats = !this.showStats;
  }
  toggleStoryFlowPanel() {
    this.showStoryFlowPanel = !this.showStoryFlowPanel;
  }
  get visibleNodes() {
    return this.storyNodes.filter((n) => n.isVisible !== false);
  }
  openScenarioLinkPanel(choiceIndex, nodeId) {
    this.currentLinkingChoiceIndex = choiceIndex;
    if (nodeId) {
      this.currentLinkingNodeId = nodeId;
    }
    this.showScenarioLinkPanel = true;
  }
  closeScenarioLinkPanel() {
    this.showScenarioLinkPanel = false;
    this.currentLinkingNodeId = "";
    this.currentLinkingChoiceId = "";
  }
  linkScenarioToChoice(choiceIndex, scenarioId) {
    this.currentLinkingChoiceId = choiceIndex.toString();
    this.linkScenarioToFlowNode(scenarioId);
  }
  generateAiCharacter(type) {
    this.notification.show(`AI \uCE90\uB9AD\uD130 \uC0DD\uC131 \uC911... ${type || ""}`);
  }
  generateAiScenario(genre, style2, mood) {
    this.notification.show(`AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uC911... ${genre || ""} ${style2 || ""} ${mood || ""}`);
  }
  saveGeneratedCharacter() {
    this.notification.show("\uCE90\uB9AD\uD130\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
  }
  applyGeneratedCharacter() {
    this.notification.show("\uCE90\uB9AD\uD130\uAC00 \uC801\uC6A9\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");
  }
  deleteCharacter(character, event) {
    if (event) {
      event.stopPropagation();
    }
    if (character.id) {
      this.contentManagementHelper.deleteCharacter(character.id, () => __async(this, null, function* () {
        yield this.loadSavedCharacters();
      }));
    }
  }
  saveGeneratedStory() {
    return __async(this, null, function* () {
      if (!this.generatedStory) {
        this.notification.warning("\uC800\uC7A5\uD560 \uC2A4\uD1A0\uB9AC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4");
        return;
      }
      try {
        const savedStory = {
          id: this.generatedStory.id,
          title: this.generatedStory.title,
          description: this.generatedStory.description,
          genre: this.generatedStory.genre,
          difficulty: this.generatedStory.difficulty,
          icon: this.generatedStory.icon,
          startingGold: this.generatedStory.startingGold,
          startingItems: this.generatedStory.startingItems,
          firstStory: this.generatedStory.firstStory,
          firstChoices: this.generatedStory.firstChoices,
          createdAt: /* @__PURE__ */ new Date(),
          createdBy: "AI"
        };
        yield this.storyDbService.saveStory(savedStory);
        yield this.loadSavedStories();
        this.notification.success("\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
      } catch (error) {
        this.notification.error("\uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4");
      }
    });
  }
  loadSavedStoryForGame(story) {
    return __async(this, null, function* () {
      try {
        const novelTemplate = this.contentManagementHelper.convertStoryToNovelTemplate(story);
        const gameId = `game_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        sessionStorage.setItem("newGame_" + gameId, JSON.stringify({
          novel: novelTemplate
        }));
        this.router.navigate(["/novel/game", gameId]);
        this.notification.show(`\u{1F4D6} "${story.title}" \uC2A4\uD1A0\uB9AC\uB97C \uC2DC\uC791\uD569\uB2C8\uB2E4!`);
      } catch (error) {
        this.debugLogger.error("\uC2A4\uD1A0\uB9AC\uB85C\uB4DC", `\uC2A4\uD1A0\uB9AC \uC2DC\uC791 \uC2E4\uD328: ${error}`);
        this.notification.error("\uC2A4\uD1A0\uB9AC \uC2DC\uC791 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4");
      }
    });
  }
  deleteSavedStory(storyId, event) {
    if (event) {
      event.stopPropagation();
    }
    this.contentManagementHelper.deleteStory(storyId, () => __async(this, null, function* () {
      yield this.loadSavedStories();
    }));
  }
  addGeneratedStoryToList() {
    return __async(this, null, function* () {
      if (!this.generatedStory) {
        this.notification.warning("\uC2DC\uC791\uD560 \uC2A4\uD1A0\uB9AC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4");
        return;
      }
      try {
        const existingStory = this.savedStories.find((s) => s.id === this.generatedStory.id);
        if (!existingStory) {
          yield this.saveGeneratedStory();
        }
        const gameId = `game_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        sessionStorage.setItem("newGame_" + gameId, JSON.stringify({
          novel: this.generatedStory
        }));
        this.router.navigate(["/novel/game", gameId]);
        this.notification.success(`\u{1F3AE} "${this.generatedStory.title}" \uAC8C\uC784\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4!`);
      } catch (error) {
        this.notification.error("\uAC8C\uC784 \uC2DC\uC791 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4");
      }
    });
  }
  clearGeneratedStory() {
    this.generatedStory = null;
  }
  generateStoryFromSavedContent() {
    return __async(this, null, function* () {
      if (!this.storyTitle || this.storyTitle.trim() === "") {
        this.notification.warning("\uC2A4\uD1A0\uB9AC \uC81C\uBAA9\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694");
        return;
      }
      if (this.selectedScenariosForStory.length === 0) {
        this.notification.warning("\uCD5C\uC18C 1\uAC1C \uC774\uC0C1\uC758 \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694");
        return;
      }
      if (this.selectedCharactersForStory.length === 0) {
        this.notification.warning("\uCD5C\uC18C 1\uAC1C \uC774\uC0C1\uC758 \uCE90\uB9AD\uD130\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694");
        return;
      }
      if (this.selectedItemsForStory.length === 0) {
        this.notification.warning("\uCD5C\uC18C 1\uAC1C \uC774\uC0C1\uC758 \uC544\uC774\uD15C\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694");
        return;
      }
      try {
        this.isGeneratingStory = true;
        this.storyGenerationError = "";
        this.notification.show("\u{1F3AC} \uC2A4\uD1A0\uB9AC \uC0DD\uC131 \uC911...");
        const primaryScenario = this.selectedScenariosForStory[0];
        const mainCharacter = this.selectedCharactersForStory[0];
        const startingItems = this.selectedItemsForStory.slice(0, 3).map((item) => ({
          id: item.id?.toString() || `item_${Date.now()}`,
          name: item.name,
          description: item.description,
          type: "misc",
          quantity: 1,
          grade: item.grade,
          rarity: "common",
          effect: item.effects?.join(", ") || "",
          icon: "\u{1F4E6}"
        }));
        this.generatedStory = {
          id: `story_${Date.now()}`,
          title: this.storyTitle.trim(),
          description: primaryScenario.description,
          icon: "\u{1F4D6}",
          difficulty: "normal",
          genre: primaryScenario.genre || "\uD310\uD0C0\uC9C0",
          startingGold: 1e3,
          startingItems,
          firstStory: [
            `\uC81C\uBAA9: ${this.storyTitle}`,
            "",
            `\uBC30\uACBD: ${primaryScenario.setting}`,
            `\uAC08\uB4F1: ${primaryScenario.conflict}`,
            "",
            `\uC8FC\uC778\uACF5: ${mainCharacter.name} (${mainCharacter.age}\uC138, ${mainCharacter.gender})`,
            `${mainCharacter.backstory}`,
            "",
            "\uC2A4\uD1A0\uB9AC\uAC00 \uC2DC\uC791\uB429\uB2C8\uB2E4..."
          ],
          firstChoices: [
            "\uBAA8\uD5D8\uC744 \uC2DC\uC791\uD55C\uB2E4",
            "\uC900\uBE44\uB97C \uB354 \uD55C\uB2E4",
            "\uC0C1\uD669\uC744 \uAD00\uCC30\uD55C\uB2E4"
          ]
        };
        if (this.generatedStory && this.selectedCharactersForStory.length > 1) {
          this.generatedStory.firstStory.push("");
          this.generatedStory.firstStory.push("\uB4F1\uC7A5\uC778\uBB3C:");
          this.selectedCharactersForStory.slice(1, 4).forEach((char) => {
            if (this.generatedStory) {
              this.generatedStory.firstStory.push(`- ${char.name}: ${char.occupation}`);
            }
          });
        }
        if (this.generatedStory && this.selectedItemsForStory.length > 0) {
          this.generatedStory.firstStory.push("");
          this.generatedStory.firstStory.push("\uD575\uC2EC \uC544\uC774\uD15C:");
          this.selectedItemsForStory.slice(0, 3).forEach((item) => {
            if (this.generatedStory) {
              this.generatedStory.firstStory.push(`- ${item.name}: ${item.description}`);
            }
          });
        }
        this.notification.success("\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!");
        this.cdr.detectChanges();
      } catch (error) {
        this.storyGenerationError = error instanceof Error ? error.message : "\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4";
        this.notification.error("\uC2A4\uD1A0\uB9AC \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4");
      } finally {
        this.isGeneratingStory = false;
        this.cdr.detectChanges();
      }
    });
  }
  loadGame(gameId) {
    if (gameId) {
      this.router.navigate(["/novel/game", gameId]);
    }
  }
  buyItem(item) {
    if (this.playerCharacter.gold >= item.price) {
      this.playerCharacter.gold -= item.price;
      this.addToInventory(item, 1);
      this.notification.show(`${item.name}\uC744(\uB97C) \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4.`);
    } else {
      this.notification.show("\uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4.");
    }
  }
  changeLayout(layout) {
    if (layout === "hierarchical" || layout === "radial" || layout === "force") {
      this.flowLayoutType = layout;
    }
  }
  // UI 패널 관련 메서드
  toggleFilter(filterType) {
  }
  toggleLeftPanel() {
    this.isLeftPanelCollapsed = !this.isLeftPanelCollapsed;
  }
  toggleRightPanel() {
    this.isRightPanelCollapsed = !this.isRightPanelCollapsed;
  }
  expandLeftPanel() {
    this.isLeftPanelCollapsed = false;
  }
  closeLeftPanel() {
    this.isLeftPanelCollapsed = true;
  }
  expandRightPanel() {
    this.isRightPanelCollapsed = false;
  }
  closeRightPanel() {
    this.isRightPanelCollapsed = true;
  }
  switchFlowTab(tab) {
    if (tab === "character" || tab === "map") {
      this.novelState.setFlowPanelTab(tab);
    }
  }
  // ===== 캔버스 인터랙션 메서드 =====
  /**
   * 캔버스 드래그 시작
   */
  onCanvasMouseDown(event) {
    const target = event.target;
    if (target.classList.contains("node-circle") || target.closest(".story-node")) {
      return;
    }
    this.isDraggingCanvas = true;
    this.dragStartX = event.clientX;
    this.dragStartY = event.clientY;
    this.dragStartPanX = this.flowPanX;
    this.dragStartPanY = this.flowPanY;
    const container = event.currentTarget;
    container.style.cursor = "grabbing";
  }
  /**
   * 캔버스 드래그 중
   */
  onCanvasMouseMove(event) {
    if (this.isDraggingNode && this.draggingNode) {
      const deltaX = event.clientX - this.nodeDragStartX;
      const deltaY = event.clientY - this.nodeDragStartY;
      if (Math.abs(deltaX) > 5 || Math.abs(deltaY) > 5) {
        this.hasNodeMoved = true;
      }
      this.draggingNode.position.x = this.nodeStartX + deltaX / this.flowZoomLevel;
      this.draggingNode.position.y = this.nodeStartY + deltaY / this.flowZoomLevel;
      this.updateConnections();
      return;
    }
    if (this.isDraggingCanvas) {
      const deltaX = event.clientX - this.dragStartX;
      const deltaY = event.clientY - this.dragStartY;
      this.flowPanX = this.dragStartPanX + deltaX / this.flowZoomLevel;
      this.flowPanY = this.dragStartPanY + deltaY / this.flowZoomLevel;
    }
  }
  /**
   * 캔버스 드래그 종료
   */
  onCanvasMouseUp() {
    if (this.isDraggingNode) {
      this.isDraggingNode = false;
      this.draggingNode = null;
      setTimeout(() => {
        this.hasNodeMoved = false;
      }, 10);
    }
    if (this.isDraggingCanvas) {
      this.isDraggingCanvas = false;
      const containers = document.querySelectorAll(".flow-canvas-container");
      containers.forEach((container) => {
        container.style.cursor = "grab";
      });
    }
  }
  /**
   * 마우스 휠로 줌
   */
  onCanvasWheel(event) {
    event.preventDefault();
    const zoomSpeed = 0.1;
    const delta = event.deltaY > 0 ? -zoomSpeed : zoomSpeed;
    const oldZoom = this.flowZoomLevel;
    this.flowZoomLevel = Math.max(0.3, Math.min(3, this.flowZoomLevel + delta));
    if (oldZoom !== this.flowZoomLevel) {
      const rect = event.currentTarget.getBoundingClientRect();
      const mouseX = event.clientX - rect.left;
      const mouseY = event.clientY - rect.top;
      const zoomRatio = this.flowZoomLevel / oldZoom;
      this.flowPanX = mouseX - (mouseX - this.flowPanX) * zoomRatio;
      this.flowPanY = mouseY - (mouseY - this.flowPanY) * zoomRatio;
    }
  }
  /**
   * SVG transform 문자열 생성
   */
  getCanvasTransform() {
    return `translate(${this.flowPanX}, ${this.flowPanY}) scale(${this.flowZoomLevel})`;
  }
  /**
   * 노드 마우스 다운 (드래그 시작)
   */
  onNodeMouseDown(node, event) {
    event.stopPropagation();
    this.isDraggingNode = true;
    this.draggingNode = node;
    this.nodeDragStartX = event.clientX;
    this.nodeDragStartY = event.clientY;
    this.nodeStartX = node.position.x;
    this.nodeStartY = node.position.y;
    event.preventDefault();
  }
  /**
   * 노드 클릭 핸들러
   */
  onNodeClick(node, event) {
    if (event) {
      event.stopPropagation();
    }
    if (this.hasNodeMoved) {
      return;
    }
    if (this.selectedNode?.id === node.id) {
      this.selectedNode = null;
    } else {
      this.selectedNode = node;
    }
    this.cdr.detectChanges();
  }
  /**
   * 연결선 업데이트 (노드 위치 변경 시)
   */
  updateConnections() {
    this.storyConnections.forEach((conn) => {
      const fromNode = this.storyNodes.find((n) => n.id === conn.from);
      const toNode = this.storyNodes.find((n) => n.id === conn.to);
      if (fromNode && toNode) {
        const midX = (fromNode.position.x + toNode.position.x) / 2;
        const midY = (fromNode.position.y + toNode.position.y) / 2;
        const controlOffset = 100;
        conn.path = `M ${fromNode.position.x},${fromNode.position.y} Q ${midX},${midY - controlOffset} ${toNode.position.x},${toNode.position.y}`;
      }
    });
  }
  /**
   * 확대
   */
  zoomIn() {
    this.flowZoomLevel = Math.min(3, this.flowZoomLevel + 0.2);
  }
  /**
   * 축소
   */
  zoomOut() {
    this.flowZoomLevel = Math.max(0.3, this.flowZoomLevel - 0.2);
  }
  /**
   * 줌 초기화
   */
  resetZoom() {
    this.flowZoomLevel = 1;
    this.flowPanX = 0;
    this.flowPanY = 0;
  }
  /**
   * 현재 노드로 포커스 이동
   */
  focusOnCurrentNode() {
    const currentNode = this.storyNodes.find((n) => n.isCurrent);
    if (currentNode) {
      const centerX = 600;
      const centerY = 400;
      this.flowPanX = centerX - currentNode.position.x * this.flowZoomLevel;
      this.flowPanY = centerY - currentNode.position.y * this.flowZoomLevel;
      this.selectedNode = currentNode;
      this.cdr.detectChanges();
    }
  }
  // 스토리 플로우 차트 제어 (레거시)
  centerView() {
    this.resetZoom();
  }
  fitToScreen() {
    this.resetZoom();
  }
  /**
   * 저장된 캐릭터 클릭 시 인벤토리 모달 열기
   */
  openCharacterInventory(character, event) {
    event.stopPropagation();
    this.debugLogger.info("\uCE90\uB9AD\uD130\uC778\uBCA4\uD1A0\uB9AC", `\u{1F392} \uCE90\uB9AD\uD130 \uC778\uBCA4\uD1A0\uB9AC \uC5F4\uAE30: ${character.name}`);
    this.selectedCharacterForInventory = character;
    let gameData = this.getCharacterGameData(character.name);
    if (!gameData) {
      this.debugLogger.info("\uCE90\uB9AD\uD130\uC778\uBCA4\uD1A0\uB9AC", "\u{1F527} \uAE30\uBCF8 \uAC8C\uC784 \uB370\uC774\uD130 \uC0DD\uC131");
      gameData = this.createDefaultGameData(character);
    }
    this.debugLogger.info("\uCE90\uB9AD\uD130\uC778\uBCA4\uD1A0\uB9AC", `\u{1F4E6} \uAC8C\uC784 \uB370\uC774\uD130: ${gameData ? "\uC874\uC7AC\uD568" : "\uC5C6\uC74C"}`);
    if (gameData) {
      this.selectedCharacterGameData = gameData;
      this.showCharacterInventoryModal = true;
      this.debugLogger.info("\uCE90\uB9AD\uD130\uC778\uBCA4\uD1A0\uB9AC", "\u2705 \uBAA8\uB2EC \uC5F4\uB9BC");
    } else {
      this.debugLogger.info("\uCE90\uB9AD\uD130\uC778\uBCA4\uD1A0\uB9AC", "\u274C \uAC8C\uC784 \uB370\uC774\uD130 \uC0DD\uC131 \uC2E4\uD328");
      this.notification.show("\uCE90\uB9AD\uD130 \uB370\uC774\uD130\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
    }
  }
  /**
   * 캐릭터의 기본 게임 데이터 생성
   */
  createDefaultGameData(character) {
    const now = /* @__PURE__ */ new Date();
    const starterWeapon = {
      name: "\uCD08\uBCF4\uC790\uC758 \uAC80",
      baseType: "\uAC80",
      type: "weapon",
      rarity: "common",
      itemLevel: 1,
      requiredLevel: 1,
      baseStats: {
        attack: 5,
        defense: 0
      }
    };
    const starterArmor = {
      name: "\uCD08\uBCF4\uC790\uC758 \uAC11\uC637",
      baseType: "\uAC11\uC637",
      type: "armor",
      rarity: "common",
      itemLevel: 1,
      requiredLevel: 1,
      baseStats: {
        attack: 0,
        defense: 3
      }
    };
    const defaultEquipment = {
      helmet: void 0,
      armor: starterArmor,
      weapon: starterWeapon,
      gloves: void 0,
      boots: void 0,
      belt: void 0,
      amulet: void 0,
      ring1: void 0,
      ring2: void 0
    };
    const defaultInventory = [
      {
        id: "potion_health_small",
        name: "\uCCB4\uB825 \uBB3C\uC57D (\uC18C)",
        type: "consumable",
        rarity: "common",
        quantity: 3,
        icon: "\u{1F9EA}",
        description: "HP\uB97C 50 \uD68C\uBCF5\uD569\uB2C8\uB2E4"
      },
      {
        id: "potion_mana_small",
        name: "\uB9C8\uB098 \uBB3C\uC57D (\uC18C)",
        type: "consumable",
        rarity: "common",
        quantity: 2,
        icon: "\u{1F499}",
        description: "MP\uB97C 30 \uD68C\uBCF5\uD569\uB2C8\uB2E4"
      },
      {
        id: "bread",
        name: "\uBE75",
        type: "consumable",
        rarity: "common",
        quantity: 5,
        icon: "\u{1F35E}",
        description: "\uAC04\uB2E8\uD55C \uC2DD\uC0AC. HP\uB97C 10 \uD68C\uBCF5\uD569\uB2C8\uB2E4"
      }
    ];
    const playerCharacter = {
      name: character.name,
      level: 1,
      exp: 0,
      maxExp: 100,
      hp: 100,
      maxHp: 100,
      mp: 50,
      maxMp: 50,
      attack: 10,
      defense: 5,
      agility: 5,
      strength: 10,
      intelligence: 10,
      gold: 100,
      gem: 0,
      crystal: 0,
      ticket: 0,
      skillPoints: 0,
      skills: [],
      equipment: defaultEquipment,
      inventory: defaultInventory
    };
    const defaultTemplate = {
      id: "default",
      title: "\uAE30\uBCF8 \uBAA8\uD5D8",
      genre: "\uD310\uD0C0\uC9C0",
      description: "\uC0C8\uB85C\uC6B4 \uBAA8\uD5D8\uC758 \uC2DC\uC791",
      icon: "\u2694\uFE0F",
      difficulty: "normal",
      startingGold: 100,
      startingItems: [],
      firstStory: ["\uB2F9\uC2E0\uC758 \uBAA8\uD5D8\uC774 \uC2DC\uC791\uB429\uB2C8\uB2E4."],
      firstChoices: []
    };
    const gameState = {
      id: `game_${character.name}_${Date.now()}`,
      novelId: "default",
      novelTitle: "\uCE90\uB9AD\uD130 \uC778\uBCA4\uD1A0\uB9AC",
      novelTemplate: defaultTemplate,
      playerCharacter,
      storyBlocks: [],
      currentPath: [],
      choices: [],
      gameStarted: false,
      gold: 100,
      inventory: defaultInventory,
      completedQuests: [],
      currentChapter: 0,
      saveDate: now
    };
    return gameState;
  }
  /**
   * 캐릭터 인벤토리 모달 닫기
   */
  closeCharacterInventory() {
    this.showCharacterInventoryModal = false;
    this.selectedCharacterForInventory = null;
    this.selectedCharacterGameData = null;
    this.characterInventoryTab = "equipment";
  }
  /**
   * 캐릭터를 위한 아이템 구매
   */
  buyItemForCharacter(item, event) {
    event.stopPropagation();
    if (!this.selectedCharacterGameData) {
      this.notification.show("\uCE90\uB9AD\uD130 \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      return;
    }
    const price = item.price || this.calculateItemPriceByGrade(item.grade);
    if (this.selectedCharacterGameData.playerCharacter.gold < price) {
      this.notification.show("\uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4!");
      return;
    }
    if (!this.selectedCharacterGameData.playerCharacter.inventory) {
      this.selectedCharacterGameData.playerCharacter.inventory = [];
    }
    if (this.selectedCharacterGameData.playerCharacter.inventory.length >= this.maxInventorySize) {
      this.notification.show("\uC778\uBCA4\uD1A0\uB9AC\uAC00 \uAC00\uB4DD \uCC3C\uC2B5\uB2C8\uB2E4!");
      return;
    }
    this.selectedCharacterGameData.playerCharacter.gold -= price;
    const inventoryItem = {
      id: `item_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
      name: item.name,
      description: item.description,
      type: this.mapItemTypeToInventoryType(item.type),
      quantity: 1,
      rarity: this.mapGradeToRarity(item.grade),
      icon: "\u{1F4E6}",
      stats: item.stats || {}
    };
    this.selectedCharacterGameData.playerCharacter.inventory.push(inventoryItem);
    this.saveCharacterGameData();
    this.debugLogger.info("\uCE90\uB9AD\uD130\uC0C1\uC810", `\u2705 ${item.name} \uAD6C\uB9E4 \uC644\uB8CC (${price}G)`);
    this.notification.show(`${item.name}\uC744(\uB97C) \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4! (-${price}G)`);
  }
  /**
   * 캐릭터 게임 데이터 저장
   */
  saveCharacterGameData() {
    if (!this.selectedCharacterGameData)
      return;
    try {
      const savedGames = localStorage.getItem("novel_games");
      const games = savedGames ? JSON.parse(savedGames) : {};
      games[this.selectedCharacterGameData.id] = this.selectedCharacterGameData;
      localStorage.setItem("novel_games", JSON.stringify(games));
      this.debugLogger.info("\uCE90\uB9AD\uD130\uB370\uC774\uD130", "\u{1F4BE} \uAC8C\uC784 \uB370\uC774\uD130 \uC800\uC7A5 \uC644\uB8CC");
    } catch (error) {
      this.debugLogger.error("\uCE90\uB9AD\uD130\uB370\uC774\uD130", `\u274C \uAC8C\uC784 \uB370\uC774\uD130 \uC800\uC7A5 \uC2E4\uD328: ${error}`);
    }
  }
  /**
   * 아이템 타입 매핑 (상점 → 인벤토리)
   */
  mapItemTypeToInventoryType(shopType) {
    const typeMap = {
      "\uBB34\uAE30": "weapon",
      "\uBC29\uC5B4\uAD6C": "armor",
      "\uD22C\uAD6C": "helmet",
      "\uC7A5\uAC11": "gloves",
      "\uC2E0\uBC1C": "boots",
      "\uD5C8\uB9AC\uB760": "belt",
      "\uBAA9\uAC78\uC774": "amulet",
      "\uBC18\uC9C0": "ring",
      "\uC7A5\uC2E0\uAD6C": "accessory",
      "\uC18C\uBAA8\uD488": "consumable",
      "\uC7AC\uB8CC": "material",
      "\uD018\uC2A4\uD2B8": "quest",
      "\uAE30\uD0C0": "misc"
    };
    return typeMap[shopType] || "misc";
  }
  /**
   * 등급 매핑 (상점 → 인벤토리)
   */
  mapGradeToRarity(grade) {
    const rarityMap = {
      "\uC77C\uBC18": "common",
      "\uACE0\uAE09": "uncommon",
      "\uD76C\uADC0": "rare",
      "\uC601\uC6C5": "epic",
      "\uC804\uC124": "legendary",
      "\uC2E0\uD654": "mythic",
      "\uC720\uB2C8\uD06C": "unique"
    };
    return rarityMap[grade] || "common";
  }
  /**
   * 캐릭터 인벤토리의 빈 슬롯 생성
   */
  getEmptyCharacterInventorySlots() {
    if (!this.selectedCharacterGameData?.playerCharacter?.inventory) {
      return Array(this.maxInventorySize).fill(0);
    }
    const currentCount = this.selectedCharacterGameData.playerCharacter.inventory.length;
    const emptyCount = Math.max(0, this.maxInventorySize - currentCount);
    return Array(emptyCount).fill(0);
  }
  /**
   * 캐릭터의 장착 아이템 가져오기
   */
  getCharacterEquipment() {
    return this.selectedCharacterGameData?.playerCharacter?.equipment || null;
  }
  /**
   * 캐릭터의 인벤토리 아이템 가져오기
   */
  getCharacterInventory() {
    return this.selectedCharacterGameData?.playerCharacter?.inventory || [];
  }
  /**
   * $any() 헬퍼 - 템플릿에서 타입 체크 우회
   */
  asAny(value) {
    return value;
  }
  loadCharacter(character) {
    this.generatedCharacter = character;
  }
  static \u0275fac = function NovelGeneratorComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelGeneratorComponent)(\u0275\u0275directiveInject(ChangeDetectorRef), \u0275\u0275directiveInject(MatDialog), \u0275\u0275directiveInject(MatSnackBar), \u0275\u0275directiveInject(Router), \u0275\u0275directiveInject(ActivatedRoute), \u0275\u0275directiveInject(GeminiAiService), \u0275\u0275directiveInject(ScenarioDbService), \u0275\u0275directiveInject(ItemDbService), \u0275\u0275directiveInject(CharacterDbService), \u0275\u0275directiveInject(NovelAuthService), \u0275\u0275directiveInject(StoryDbService), \u0275\u0275directiveInject(NotificationService), \u0275\u0275directiveInject(GameStorageService), \u0275\u0275directiveInject(DungeonGeneratorService), \u0275\u0275directiveInject(DungeonService), \u0275\u0275directiveInject(BattleService), \u0275\u0275directiveInject(BattleLogService), \u0275\u0275directiveInject(InventoryService), \u0275\u0275directiveInject(EquipmentService), \u0275\u0275directiveInject(ShopService), \u0275\u0275directiveInject(WuxiaDataService), \u0275\u0275directiveInject(ItemGeneratorService), \u0275\u0275directiveInject(StoryElementGeneratorHelper), \u0275\u0275directiveInject(ResponsiveService));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _NovelGeneratorComponent, selectors: [["app-novel-generator"]], viewQuery: function NovelGeneratorComponent_Query(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275viewQuery(_c0, 5);
    }
    if (rf & 2) {
      let _t;
      \u0275\u0275queryRefresh(_t = \u0275\u0275loadQuery()) && (ctx.battleLogContainer = _t.first);
    }
  }, standalone: false, decls: 32, vars: 35, consts: [["battleLogContainer", ""], ["emptyWeapon", ""], ["emptyArmor", ""], ["emptyHelmet", ""], ["emptyAmulet", ""], ["emptyBelt", ""], ["emptyGloves", ""], ["emptyBoots", ""], ["emptyRing1", ""], ["emptyRing2", ""], ["itemMenu", "matMenu"], [1, "novel-book-container"], ["class", "novel-home-screen", 3, "mobile", 4, "ngIf"], ["class", "game-layout", 3, "mobile", "tablet", "desktop", 4, "ngIf"], ["class", "panel-backdrop", 3, "mobile", "click", 4, "ngIf"], ["class", "game-panel character-panel", 3, "mobile", 4, "ngIf"], ["class", "game-panel inventory-panel", 3, "mobile", 4, "ngIf"], ["class", "item-context-menu", 3, "left", "top", "click", 4, "ngIf"], ["class", "item-info-modal", 3, "left", "top", "mousedown", 4, "ngIf"], ["class", "game-panel shop-panel", 3, "mobile", 4, "ngIf"], ["class", "game-panel character-creator-panel", 4, "ngIf"], ["class", "game-panel scenario-creator-panel", 4, "ngIf"], ["class", "game-panel item-creator-panel", 4, "ngIf"], ["class", "story-flow-overlay", 4, "ngIf"], ["class", "scenario-link-overlay", 4, "ngIf"], ["class", "flow-side-panel", 4, "ngIf"], ["class", "flow-panel-toggle-btn", "title", "\uC2A4\uD1A0\uB9AC \uB9F5 \uC5F4\uAE30", 3, "click", 4, "ngIf"], ["class", "advanced-story-flow-overlay", 4, "ngIf"], ["class", "flow-scenario-link-overlay", 4, "ngIf"], ["class", "wuxia-overlay", 3, "mobile", "click", 4, "ngIf"], ["class", "dungeon-test-dialog", 4, "ngIf"], ["class", "flow-minimap-panel", 4, "ngIf"], ["class", "advanced-flow-panel", 4, "ngIf"], ["class", "wuxia-panel", 4, "ngIf"], ["class", "dungeon-overlay", 4, "ngIf"], ["class", "character-inventory-modal-overlay", 3, "click", 4, "ngIf"], [1, "novel-home-screen"], ["class", "mobile-home-header", 4, "ngIf"], [1, "home-container"], [1, "welcome-section"], [1, "welcome-header"], [1, "header-content"], [1, "subtitle"], [1, "header-actions"], ["class", "user-info", 4, "ngIf"], ["title", "\uB85C\uADF8\uC544\uC6C3", 1, "logout-btn", 3, "click"], [1, "quick-actions"], [1, "action-card", "featured", 3, "click"], [1, "card-icon"], [1, "card-badge"], [1, "action-card", "wuxia-special", 3, "click"], [1, "card-badge", "wuxia-badge"], [1, "action-card", "ai-special", 3, "click"], [1, "card-badge", "ai-badge"], [1, "action-card", "premium", 3, "click"], [1, "card-badge", "premium-badge"], [1, "action-card", 3, "click"], ["class", "generation-progress", 4, "ngIf"], ["class", "story-creator-panel", 4, "ngIf"], ["class", "saved-section saved-stories-section", 4, "ngIf"], ["class", "saved-section saved-characters-section", 4, "ngIf"], ["class", "saved-section saved-scenarios-section", 4, "ngIf"], ["class", "saved-section saved-items-section", 4, "ngIf"], ["class", "saved-section shop-section", 4, "ngIf"], [1, "mobile-home-header"], [1, "header-brand"], [1, "header-user-actions"], ["class", "user-badge", 4, "ngIf"], ["title", "\uB85C\uADF8\uC544\uC6C3", 1, "header-logout-btn", 3, "click"], [1, "user-badge"], [1, "user-info"], [1, "user-name"], [1, "generation-progress"], [1, "progress-container"], [1, "progress-spinner"], [1, "progress-text"], [1, "story-creator-panel"], [1, "creator-container"], [1, "creator-header"], [1, "close-btn", 3, "click"], [1, "creator-intro"], ["class", "error-message", 4, "ngIf"], [1, "title-input-section"], ["for", "storyTitle"], [1, "label-icon"], [1, "label-text"], [1, "required"], ["type", "text", "id", "storyTitle", "placeholder", "\uC608: \uAC80\uC740 \uC6A9\uC758 \uC804\uC124, \uB9C8\uBC95\uC0AC\uC758 \uC5EC\uC815, \uBE44\uBC00\uC758 \uC232...", "maxlength", "50", 1, "title-input", 3, "ngModelChange", "ngModel"], [1, "char-count"], [1, "selection-section"], [1, "select-group"], [1, "selection-count"], [1, "select-grid"], ["class", "select-item", 3, "selected", "click", 4, "ngFor", "ngForOf"], ["class", "no-content", 4, "ngIf"], [1, "creator-actions"], [1, "generate-story-btn", 3, "click", "disabled"], [4, "ngIf"], ["class", "generated-story-result", 4, "ngIf"], [1, "error-message"], [1, "select-item", 3, "click"], [1, "item-name"], [1, "item-desc"], [1, "no-content"], [1, "generated-story-result"], [1, "story-preview"], [1, "story-title"], [1, "story-icon"], [1, "story-desc"], [1, "story-meta"], [1, "meta-item"], [1, "story-intro"], [4, "ngFor", "ngForOf"], [1, "story-actions"], [1, "save-btn", 3, "click"], [1, "start-btn", 3, "click"], [1, "regenerate-btn", 3, "click"], [1, "saved-section", "saved-stories-section"], [1, "section-header-collapsible", 3, "click"], [1, "header-left"], [1, "expand-icon"], [1, "count-badge"], [1, "toggle-btn", 3, "click"], ["class", "section-content", 4, "ngIf"], [1, "section-content"], [1, "section-desc"], [1, "stories-grid"], ["class", "story-card", 3, "click", 4, "ngFor", "ngForOf"], [1, "story-card", 3, "click"], [1, "story-header"], [1, "story-icon-title"], [1, "delete-btn", 3, "click"], [1, "story-description"], [1, "story-footer"], [1, "date"], [1, "created-by"], [1, "saved-section", "saved-characters-section"], [1, "characters-grid"], ["class", "character-card", 3, "click", 4, "ngFor", "ngForOf"], [1, "character-card", 3, "click"], [1, "character-header"], [1, "character-meta"], [1, "character-desc"], ["class", "character-traits", 4, "ngIf"], [1, "character-footer"], [1, "character-traits"], ["class", "trait", 4, "ngFor", "ngForOf"], [1, "trait"], [1, "saved-section", "saved-scenarios-section"], [1, "scenarios-grid"], ["class", "scenario-card", 3, "click", 4, "ngFor", "ngForOf"], [1, "scenario-card", 3, "click"], [1, "scenario-header"], [1, "scenario-desc"], ["class", "scenario-tags", 4, "ngIf"], [1, "scenario-meta"], [1, "genre"], [1, "scenario-tags"], ["class", "tag", 4, "ngFor", "ngForOf"], [1, "tag"], [1, "saved-section", "saved-items-section"], [1, "items-grid"], ["class", "item-card", 3, "grade-legendary", "grade-rare", "grade-uncommon", "click", 4, "ngFor", "ngForOf"], [1, "item-card", 3, "click"], [1, "item-header"], ["class", "item-stats", 4, "ngIf"], [1, "item-tags"], [1, "tag", "type-tag"], [1, "tag", "grade-tag"], [1, "item-meta"], [1, "item-stats"], ["class", "stat", 4, "ngIf"], [1, "stat"], [1, "saved-section", "shop-section"], [1, "section-header-collapsible", "shop-header", 3, "click"], [1, "count-badge", "shop-badge"], [1, "gold-badge"], [1, "shop-items-grid"], ["class", "shop-item-card", 3, "grade-legendary", "grade-rare", "grade-uncommon", 4, "ngFor", "ngForOf"], [1, "shop-item-card"], [1, "item-price"], [1, "item-footer"], [1, "buy-btn", 3, "click"], [1, "game-layout"], [1, "left-panel-container"], [1, "side-panel", "left-panel"], ["class", "collapsed-view", 3, "click", 4, "ngIf"], ["class", "expanded-view", 4, "ngIf"], [1, "main-content-area"], [1, "game-status-bar"], ["title", "\uBA54\uB274", 1, "toggle-btn", 3, "click"], ["width", "20", "height", "20", "viewBox", "0 0 24 24", "fill", "none", "stroke", "currentColor", "stroke-width", "2"], ["x1", "3", "y1", "12", "x2", "21", "y2", "12"], ["x1", "3", "y1", "6", "x2", "21", "y2", "6"], ["x1", "3", "y1", "18", "x2", "21", "y2", "18"], ["title", "\uD648\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30", 1, "back-home-btn", 3, "click"], ["d", "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"], ["points", "9 22 9 12 15 12 15 22"], ["class", "status-bar-actions", 4, "ngIf"], ["class", "status-bar-actions mobile-actions", 4, "ngIf"], [1, "novel-scroll-area"], [1, "novel-header"], [1, "story-blocks"], ["class", "story-block", 4, "ngFor", "ngForOf"], ["class", "battle-section flat-battle", 4, "ngIf"], [1, "right-panel-container"], [1, "side-panel", "right-panel"], [1, "collapsed-view", 3, "click"], [1, "collapse-icon"], [1, "collapse-text"], [1, "expanded-view"], [1, "panel-header"], [1, "panel-content"], [1, "menu-item", 3, "click"], [1, "menu-divider"], [1, "menu-section-title"], [1, "menu-item", "success", 3, "click"], [1, "menu-item", "warning", 3, "click"], [1, "menu-item", "danger", 3, "click"], [1, "status-bar-actions"], ["title", "\uCE90\uB9AD\uD130 & \uC7A5\uBE44", 1, "equipment-btn", 3, "click"], ["width", "18", "height", "18", "viewBox", "0 0 24 24", "fill", "none", "stroke", "currentColor", "stroke-width", "2"], ["d", "M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"], ["cx", "12", "cy", "7", "r", "4"], ["title", "\uC778\uBCA4\uD1A0\uB9AC", 1, "inventory-btn", 3, "click"], ["d", "M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"], ["points", "3.27 6.96 12 12.01 20.73 6.96"], ["x1", "12", "y1", "22.08", "x2", "12", "y2", "12"], ["title", "\uB358\uC804 \uD0D0\uD5D8", 1, "dungeon-btn", 3, "click"], ["x", "3", "y", "3", "width", "18", "height", "18", "rx", "2", "ry", "2"], ["x1", "9", "y1", "3", "x2", "9", "y2", "21"], ["x1", "15", "y1", "3", "x2", "15", "y2", "21"], ["x1", "3", "y1", "9", "x2", "21", "y2", "9"], ["x1", "3", "y1", "15", "x2", "21", "y2", "15"], ["title", "\uC218\uB828 \uBAA8\uB4DC", 1, "training-btn", 3, "click"], ["cx", "12", "cy", "12", "r", "3"], ["d", "M12 1v6m0 6v6m11-7h-6m-6 0H1"], ["title", "\uACE0\uAE09 \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0", 1, "flow-btn", 3, "click"], ["cx", "18", "cy", "5", "r", "3"], ["cx", "6", "cy", "12", "r", "3"], ["cx", "18", "cy", "19", "r", "3"], ["x1", "8.59", "y1", "13.51", "x2", "15.42", "y2", "17.49"], ["x1", "15.41", "y1", "6.51", "x2", "8.59", "y2", "10.49"], ["title", "\uC0C1\uD0DC", 1, "toggle-btn", 3, "click"], ["x1", "18", "y1", "20", "x2", "18", "y2", "10"], ["x1", "12", "y1", "20", "x2", "12", "y2", "4"], ["x1", "6", "y1", "20", "x2", "6", "y2", "14"], ["title", "\uB85C\uADF8\uC544\uC6C3", 1, "logout-btn-game", 3, "click"], ["d", "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"], ["points", "16 17 21 12 16 7"], ["x1", "21", "y1", "12", "x2", "9", "y2", "12"], [1, "status-bar-actions", "mobile-actions"], ["title", "\uCE90\uB9AD\uD130", 1, "equipment-btn", 3, "click"], ["class", "badge", 4, "ngIf"], ["title", "\uB358\uC804", 1, "dungeon-btn", 3, "click"], ["width", "22", "height", "22", "viewBox", "0 0 24 24", "fill", "none", "stroke", "currentColor", "stroke-width", "2.5"], [1, "badge"], [1, "story-block"], [1, "battle-section", "flat-battle"], [1, "battle-container"], [1, "battle-title"], ["class", "turn-text", 4, "ngIf"], [1, "battle-board"], [1, "combatant", "player-side"], [1, "combatant-header"], [1, "level-tag"], [1, "stats-list"], [1, "stat-row"], [1, "stat-label"], [1, "stat-bar-wrapper"], [1, "stat-bar"], [1, "stat-bar-fill", "hp"], [1, "stat-value"], [1, "stat-bar-fill", "mp"], ["class", "stat-row", 4, "ngIf"], [1, "stat-row", "compact"], [1, "stat-value-inline"], [1, "stat-separator"], [1, "vs-divider"], ["class", "combatant enemy-side", 3, "active-turn", 4, "ngIf"], [1, "battle-log", "text-only-log"], [1, "log-lines"], ["class", "log-line", 3, "damage", "heal", "critical", "combo", "animation-delay", 4, "ngFor", "ngForOf"], [1, "turn-text"], [1, "stat-bar-fill", "internal"], [1, "combatant", "enemy-side"], [1, "stat-bar-fill", "enemy-hp"], [1, "log-line"], [1, "choice-container"], ["class", "choice-item", 4, "ngFor", "ngForOf"], [1, "choice-item"], [1, "choice-button", 3, "click"], [1, "choice-number"], [1, "choice-text"], ["title", "\uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0", 1, "link-scenario-btn", 3, "click"], [1, "choice-container", "battle-choices"], [1, "choice-button", 3, "click", "disabled"], [1, "choice-cost"], ["class", "choice-item martial-skill-choice", 4, "ngFor", "ngForOf"], [1, "choice-item", "martial-skill-choice"], [1, "choice-grade"], [1, "panel-backdrop", 3, "click"], [1, "game-panel", "character-panel"], [1, "character-basic-info"], [1, "character-avatar"], [1, "avatar-circle"], [1, "avatar-icon"], [1, "character-name-badge"], [1, "level-badge"], [1, "exp-section"], [1, "exp-label"], [1, "exp-values"], [1, "progress-bar", "exp-bar"], [1, "progress-fill"], [1, "exp-percentage"], [1, "status-bars"], [1, "status-item", "hp"], [1, "status-label"], [1, "icon"], [1, "text"], [1, "values"], [1, "progress-bar", "hp-bar"], [1, "status-item", "mp"], [1, "progress-bar", "mp-bar"], [1, "stats-section"], [1, "section-title"], [1, "stats-grid"], [1, "stat-item"], [1, "stat-icon"], [1, "stat-info"], [1, "stat-name"], [1, "currency-section"], [1, "currency-mini-grid"], [1, "currency-mini-item", "gold"], [1, "currency-mini-icon"], [1, "currency-mini-value"], [1, "currency-mini-item", "gem"], [1, "currency-mini-item", "crystal"], [1, "currency-mini-item", "ticket"], ["class", "skills-section", 4, "ngIf"], [1, "skills-section"], [1, "skills-list"], ["class", "skill-item", 4, "ngFor", "ngForOf"], [1, "skill-item"], [1, "skill-name"], [1, "skill-level"], [1, "game-panel", "inventory-panel"], [1, "inventory-tabs"], [1, "tab-btn", 3, "click"], [1, "tab-btn", "currency-tab", 3, "click"], ["class", "tab-content", 4, "ngIf"], [1, "tab-content"], [1, "equipment-slots-section"], [1, "diablo-equipment-layout"], [1, "equipment-column", "left-column"], ["id", "weapon-slot", "cdkDropList", "", "cdkDropListSortingDisabled", "", 1, "equipment-slot-diablo", "weapon-slot", 3, "cdkDropListDropped", "cdkDropListData", "cdkDropListConnectedTo"], [1, "slot-icon"], ["class", "slot-content", "cdkDrag", "", 3, "cdkDragData", 4, "ngIf", "ngIfElse"], ["id", "armor-slot", "cdkDropList", "", "cdkDropListSortingDisabled", "", 1, "equipment-slot-diablo", "armor-slot", 3, "cdkDropListDropped", "cdkDropListData", "cdkDropListConnectedTo"], [1, "equipment-column", "center-column"], ["id", "helmet-slot", "cdkDropList", "", "cdkDropListSortingDisabled", "", 1, "equipment-slot-diablo", "helmet-slot", 3, "cdkDropListDropped", "cdkDropListData", "cdkDropListConnectedTo"], ["id", "amulet-slot", "cdkDropList", "", "cdkDropListSortingDisabled", "", 1, "equipment-slot-diablo", "amulet-slot", 3, "cdkDropListDropped", "cdkDropListData", "cdkDropListConnectedTo"], ["id", "belt-slot", "cdkDropList", "", "cdkDropListSortingDisabled", "", 1, "equipment-slot-diablo", "belt-slot", 3, "cdkDropListDropped", "cdkDropListData", "cdkDropListConnectedTo"], [1, "equipment-column", "right-column"], ["id", "gloves-slot", "cdkDropList", "", "cdkDropListSortingDisabled", "", 1, "equipment-slot-diablo", "gloves-slot", 3, "cdkDropListDropped", "cdkDropListData", "cdkDropListConnectedTo"], ["id", "boots-slot", "cdkDropList", "", "cdkDropListSortingDisabled", "", 1, "equipment-slot-diablo", "boots-slot", 3, "cdkDropListDropped", "cdkDropListData", "cdkDropListConnectedTo"], [1, "equipment-rings-row"], ["id", "ring1-slot", "cdkDropList", "", "cdkDropListSortingDisabled", "", 1, "equipment-slot-diablo", "ring-slot", "ring-left", 3, "cdkDropListDropped", "cdkDropListData", "cdkDropListConnectedTo"], ["id", "ring2-slot", "cdkDropList", "", "cdkDropListSortingDisabled", "", 1, "equipment-slot-diablo", "ring-slot", "ring-right", 3, "cdkDropListDropped", "cdkDropListData", "cdkDropListConnectedTo"], [1, "inventory-tab-grid"], [1, "inventory-controls"], [1, "filter-buttons"], [3, "active", "click", 4, "ngFor", "ngForOf"], [1, "sort-controls"], [3, "ngModelChange", "change", "ngModel"], ["value", "rarity"], ["value", "type"], ["value", "name"], ["value", "recent"], [1, "btn-auto-sort", 3, "click"], [1, "inventory-grid-container"], ["id", "inventory-grid", "cdkDropList", "", 1, "inventory-grid-cells", 3, "cdkDropListDropped", "cdkDropListData", "cdkDropListConnectedTo"], ["class", "inventory-cell", "cdkDrag", "", 3, "class", "cdkDragData", "click", "contextmenu", "dblclick", 4, "ngFor", "ngForOf"], ["class", "inventory-cell empty", 4, "ngFor", "ngForOf"], [1, "inventory-footer"], [1, "inventory-count"], ["cdkDrag", "", 1, "slot-content", 3, "cdkDragData"], [1, "item-tooltip"], [1, "tooltip-name"], [1, "btn-unequip-small", 3, "mousedown", "click"], [1, "slot-empty-text"], [3, "click"], ["cdkDrag", "", 1, "inventory-cell", 3, "click", "contextmenu", "dblclick", "cdkDragData"], [1, "cell-content"], [1, "cell-icon"], [1, "cell-name", 3, "title"], ["class", "cell-quantity", 4, "ngIf"], ["class", "quick-equip-btn", 3, "title", "click", 4, "ngIf"], ["class", "drag-preview", 4, "cdkDragPreview"], [1, "cell-quantity"], [1, "quick-equip-btn", 3, "click", "title"], [1, "drag-preview"], [1, "preview-icon"], [1, "preview-name"], [1, "inventory-cell", "empty"], [1, "empty-icon"], [1, "currency-tab-content"], [1, "currency-header"], [1, "currency-subtitle"], [1, "currency-grid"], [1, "currency-card", "gold-card"], [1, "currency-background"], [1, "currency-content"], [1, "currency-top"], [1, "currency-icon-wrapper"], [1, "currency-icon"], [1, "currency-label"], [1, "currency-amount-section"], [1, "currency-amount"], [1, "amount-number"], [1, "amount-unit"], [1, "currency-usage"], [1, "currency-card", "gem-card"], [1, "currency-card", "crystal-card"], [1, "currency-card", "ticket-card"], [1, "currency-guide"], [1, "guide-title"], [1, "guide-list"], [1, "guide-item"], [1, "guide-icon"], [1, "guide-text"], [1, "shop-wrapper"], [1, "shop-header"], [1, "shop-title-section"], [1, "shop-title"], [1, "shop-subtitle"], [1, "shop-wallet"], [1, "wallet-icon"], [1, "wallet-info"], [1, "wallet-label"], [1, "wallet-amount"], ["class", "shop-items-container", 4, "ngIf"], ["class", "empty-shop-state", 4, "ngIf"], [1, "shop-items-container"], ["class", "shop-item-card", 3, "grade-legendary", "grade-epic", "grade-rare", "grade-uncommon", "grade-common", 4, "ngFor", "ngForOf"], [1, "item-badge-container"], [1, "item-grade-badge"], [1, "item-type-badge"], [1, "item-image-section"], [1, "item-icon-large"], [1, "item-info-section"], [1, "item-description"], ["class", "item-stats-row", 4, "ngIf"], ["class", "item-effects", 4, "ngIf"], [1, "item-purchase-section"], [1, "item-price-display"], [1, "price-icon"], [1, "price-amount"], [1, "price-unit"], [1, "purchase-button", 3, "click", "disabled"], [1, "item-stats-row"], ["class", "stat-chip", 4, "ngIf"], [1, "stat-chip"], [1, "item-effects"], ["class", "effect-item", 4, "ngFor", "ngForOf"], [1, "effect-item"], [1, "effect-icon"], [1, "effect-text"], [1, "btn-icon"], [1, "empty-shop-state"], [1, "empty-title"], [1, "empty-message"], [1, "empty-hint"], [1, "hint-icon"], [1, "hint-text"], [1, "item-context-menu", 3, "click"], [1, "context-menu-item", 3, "click"], [1, "menu-icon"], [1, "menu-text"], [1, "context-menu-item", "danger", 3, "click"], [1, "item-info-modal", 3, "mousedown"], [1, "modal-header"], [1, "modal-title"], [1, "modal-close-btn", 3, "click"], ["class", "modal-body", 4, "ngIf"], [1, "modal-body"], [1, "item-info-header"], [1, "item-info-icon"], [1, "item-info-title"], [1, "item-rarity-badge"], [1, "item-info-meta"], [1, "meta-badge", "type-badge"], ["class", "meta-badge quantity-badge", 4, "ngIf"], ["class", "item-info-stats", 4, "ngIf"], ["class", "item-info-description", 4, "ngIf"], [1, "item-info-actions"], [1, "action-btn", "equip-btn", 3, "click"], [1, "action-btn", "discard-btn", 3, "click"], [1, "meta-badge", "quantity-badge"], [1, "item-info-stats"], [1, "stats-title"], ["class", "stat-item", 4, "ngIf"], [1, "item-info-description"], [1, "desc-title"], [1, "game-panel", "shop-panel"], [3, "click", "disabled"], [1, "game-panel", "character-creator-panel"], [1, "character-creator-container"], [1, "character-type-buttons"], [1, "generate-btn", "primary", 3, "click", "disabled"], [1, "generate-btn", 3, "click", "disabled"], ["class", "generated-character-info", 4, "ngIf"], [1, "generated-character-info"], [1, "character-details"], [1, "detail-row"], [1, "label"], [1, "value"], [1, "character-description"], ["class", "character-abilities", 4, "ngIf"], [1, "action-buttons"], [1, "apply-btn", 3, "click"], [1, "character-abilities"], [1, "abilities-list"], ["class", "ability-tag", 4, "ngFor", "ngForOf"], [1, "ability-tag"], [1, "traits-list"], ["class", "trait-tag", 4, "ngFor", "ngForOf"], [1, "trait-tag"], [1, "game-panel", "scenario-creator-panel"], [1, "scenario-creator-container"], [1, "scenario-type-buttons"], ["class", "generated-scenario-info", 4, "ngIf"], [1, "generated-scenario-info"], [1, "scenario-title"], [1, "scenario-description"], ["class", "scenario-characters", 4, "ngIf"], [1, "scenario-characters"], [1, "tags-list"], ["class", "tag-item", 4, "ngFor", "ngForOf"], [1, "tag-item"], [1, "game-panel", "item-creator-panel"], [1, "item-creator-container"], [1, "item-type-buttons"], [1, "generate-btn", "random", 3, "click", "disabled"], [1, "generate-btn", "weapon", 3, "click", "disabled"], [1, "generate-btn", "armor", 3, "click", "disabled"], [1, "generate-btn", "consumable", 3, "click", "disabled"], ["class", "generated-items-list", 4, "ngIf"], ["class", "generated-item-info", 4, "ngIf"], [1, "generated-items-list"], ["class", "item-card", 3, "grade-common", "grade-uncommon", "grade-rare", "grade-epic", "grade-legendary", 4, "ngFor", "ngForOf"], [1, "bulk-actions"], [1, "save-all-btn", 3, "click"], [1, "item-card"], [1, "item-card-header"], [1, "item-card-type"], [1, "item-card-description"], ["class", "item-card-stats", 4, "ngIf"], [1, "item-card-actions"], [1, "save-mini-btn", 3, "click"], [1, "item-card-stats"], ["class", "stat-mini", 4, "ngIf"], [1, "stat-mini"], [1, "generated-item-info"], [1, "item-title"], [1, "item-type-info"], [1, "type-badge"], ["class", "item-requirements", 4, "ngIf"], ["class", "item-lore", 4, "ngIf"], ["class", "item-tags", 4, "ngIf"], [1, "add-btn", 3, "click"], [1, "item-requirements"], [1, "item-lore"], [1, "lore-text"], [1, "story-flow-overlay"], [1, "story-flow-panel"], [1, "flow-header"], [1, "flow-info"], [1, "flow-stats"], [1, "flow-canvas"], [1, "flow-nodes"], ["class", "flow-node", 3, "ngClass", "margin-left", 4, "ngFor", "ngForOf"], [1, "flow-legend"], [1, "legend-items"], [1, "legend-item"], [1, "legend-icon", "start"], [1, "legend-icon", "story"], [1, "legend-icon", "choice"], [1, "legend-icon", "current"], [1, "flow-node", 3, "ngClass"], [1, "node-icon"], [1, "node-content"], [1, "node-label"], [1, "node-level"], ["class", "node-choices", 4, "ngIf"], ["class", "flow-connector", 4, "ngIf"], [1, "node-choices"], ["class", "choice-preview", 4, "ngFor", "ngForOf"], [1, "choice-preview"], [1, "flow-connector"], [1, "scenario-link-overlay"], ["cdkDrag", "", "cdkDragBoundary", ".scenario-link-overlay", 1, "scenario-link-panel"], ["cdkDragHandle", "", 1, "link-header"], [1, "drag-indicator"], [1, "link-info"], [1, "hint"], [1, "scenario-list"], [1, "scenario-grid"], ["class", "no-scenarios", 4, "ngIf"], [1, "scenario-genre"], [1, "scenario-body"], [1, "no-scenarios"], [1, "create-scenario-btn", 3, "click"], [1, "flow-side-panel"], [1, "panel-container"], [1, "status-bar"], [1, "time"], [1, "progress"], [1, "title-bar"], ["class", "expand-btn", "title", "\uC804\uCCB4\uD654\uBA74", 3, "click", 4, "ngIf"], ["title", "\uB2EB\uAE30", 1, "close-btn", 3, "click"], [1, "panel-content-slider"], [1, "tab-content", "character-tab"], [1, "character-info-card"], [1, "character-basic"], [1, "character-name"], [1, "character-level"], [1, "character-stats"], [1, "stat-icon", "hp"], [1, "stat-bar-container"], [1, "stat-bar", "hp"], [1, "stat-bar-fill"], [1, "stat-icon", "mp"], [1, "stat-bar", "mp"], [1, "stat-row", "inline"], [1, "inline-stat"], [1, "stat-row", "special"], [1, "cultivation-badge"], [1, "tab-content", "map-tab"], ["class", "current-status", 4, "ngIf"], [1, "mini-flow-map"], ["width", "100%", "height", "100%", "preserveAspectRatio", "xMidYMid meet"], [1, "mini-connections"], ["fill", "none", "opacity", "0.6", 4, "ngFor", "ngForOf"], [1, "mini-nodes"], [1, "quick-stats"], [1, "stat-text"], ["class", "recent-path", 4, "ngIf"], [1, "tab-content", "organization-tab"], ["class", "organization-container", 4, "ngIf"], ["class", "no-organization", 4, "ngIf"], [1, "tab-navigation", "bottom"], [1, "tab-icon"], [1, "tab-label"], ["title", "\uC804\uCCB4\uD654\uBA74", 1, "expand-btn", 3, "click"], [1, "current-status"], [1, "status-icon"], [1, "status-info"], [1, "status-title"], [1, "status-path"], ["fill", "none", "opacity", "0.6"], ["r", "20"], ["text-anchor", "middle", "dy", "7", "font-size", "16"], [1, "recent-path"], [1, "recent-title"], [1, "path-dots"], ["class", "path-dot", 3, "current", "title", 4, "ngFor", "ngForOf"], [1, "path-dot", 3, "title"], [1, "organization-container"], [1, "organization-header"], [1, "org-name-section"], [1, "org-name"], [1, "org-level"], [1, "org-stats"], [1, "org-stat"], [1, "members-list"], ["class", "member-card", 3, "selected", "click", 4, "ngFor", "ngForOf"], ["class", "no-members", 4, "ngIf"], [1, "member-card", 3, "click"], [1, "member-header"], [1, "member-avatar"], [1, "member-basic"], [1, "member-name-row"], [1, "member-name"], [1, "member-role"], [1, "member-level"], [1, "member-status"], [1, "member-stats-bars"], [1, "stat-bar-row"], [1, "bar-label"], [1, "mini-stat-bar", "hp"], [1, "mini-bar-fill"], [1, "bar-value"], ["class", "stat-bar-row", 4, "ngIf"], [1, "member-details"], [1, "detail-icon"], [1, "detail-text"], [1, "loyalty-bar"], [1, "loyalty-fill"], ["class", "detail-row", 4, "ngIf"], ["class", "member-skills", 4, "ngIf"], ["class", "member-description", 4, "ngIf"], [1, "mini-stat-bar", "mp"], [1, "member-skills"], ["class", "skill-tag", 4, "ngFor", "ngForOf"], [1, "skill-tag"], [1, "member-description"], [1, "no-members"], [1, "no-organization"], ["title", "\uC2A4\uD1A0\uB9AC \uB9F5 \uC5F4\uAE30", 1, "flow-panel-toggle-btn", 3, "click"], [1, "toggle-icon"], [1, "toggle-text"], [1, "advanced-story-flow-overlay"], [1, "advanced-flow-panel"], [1, "advanced-flow-header"], ["class", "flow-toolbar", 4, "ngIf"], ["class", "flow-canvas-container", 3, "mousedown", "mousemove", "mouseup", "mouseleave", "wheel", 4, "ngIf"], ["class", "node-detail-panel", 4, "ngIf"], ["class", "stats-overlay", 4, "ngIf"], ["class", "empty-state", 4, "ngIf"], [1, "flow-toolbar"], [1, "toolbar-section"], ["title", "\uD655\uB300", 1, "tool-btn", 3, "click"], ["title", "\uCD95\uC18C", 1, "tool-btn", 3, "click"], ["title", "\uC911\uC559\uC73C\uB85C", 1, "tool-btn", 3, "click"], ["title", "\uD654\uBA74\uC5D0 \uB9DE\uCD94\uAE30", 1, "tool-btn", 3, "click"], ["title", "\uBC29\uBB38\uD55C \uACBD\uB85C\uB9CC \uD45C\uC2DC", 1, "filter-btn", 3, "click"], ["title", "\uC804\uD22C \uB178\uB4DC\uB9CC \uD45C\uC2DC", 1, "filter-btn", 3, "click"], ["title", "\uC5D4\uB529 \uB178\uB4DC\uB9CC \uD45C\uC2DC", 1, "filter-btn", 3, "click"], [1, "layout-selector", 3, "ngModelChange", "change", "ngModel"], ["value", "hierarchical"], ["value", "radial"], ["value", "force"], ["title", "\uD1B5\uACC4 \uD45C\uC2DC/\uC228\uAE30\uAE30", 1, "tool-btn", 3, "click"], [1, "toolbar-section", "toolbar-hint"], [1, "flow-canvas-container", 3, "mousedown", "mousemove", "mouseup", "mouseleave", "wheel"], [1, "flow-svg-canvas"], ["id", "arrowhead", "markerWidth", "10", "markerHeight", "10", "refX", "9", "refY", "3", "orient", "auto"], ["points", "0 0, 10 3, 0 6", "fill", "#cbd5e0"], ["id", "arrowhead-visited", "markerWidth", "10", "markerHeight", "10", "refX", "9", "refY", "3", "orient", "auto"], ["points", "0 0, 10 3, 0 6", "fill", "#48bb78"], ["id", "arrowhead-current", "markerWidth", "10", "markerHeight", "10", "refX", "9", "refY", "3", "orient", "auto"], ["points", "0 0, 10 3, 0 6", "fill", "#4299e1"], ["id", "arrowhead-battle", "markerWidth", "10", "markerHeight", "10", "refX", "9", "refY", "3", "orient", "auto"], ["points", "0 0, 10 3, 0 6", "fill", "#fc8181"], ["id", "grid", "width", "50", "height", "50", "patternUnits", "userSpaceOnUse"], ["d", "M 50 0 L 0 0 0 50", "fill", "none", "stroke", "rgba(255,255,255,0.05)", "stroke-width", "1"], ["x", "-5000", "y", "-5000", "width", "10000", "height", "10000", "fill", "url(#grid)"], [1, "connections-layer"], ["class", "connection-path", 3, "visited", "current", 4, "ngFor", "ngForOf"], [1, "nodes-layer"], ["class", "story-node", 3, "current", "visited", "available", "selected", "dragging", "battle", "ending", "event", "mousedown", "click", 4, "ngFor", "ngForOf"], [1, "zoom-controls"], ["title", "\uD655\uB300 (Ctrl + Scroll Up)", 1, "zoom-btn", 3, "click"], [1, "zoom-level"], ["title", "\uCD95\uC18C (Ctrl + Scroll Down)", 1, "zoom-btn", 3, "click"], ["title", "\uCD08\uAE30\uD654 (\uB354\uBE14\uD074\uB9AD)", 1, "zoom-btn", 3, "click"], ["title", "\uD604\uC7AC \uB178\uB4DC\uB85C \uC774\uB3D9", 1, "zoom-btn", 3, "click"], [1, "legend-compact"], [1, "connection-path"], [1, "story-node", 3, "mousedown", "click"], ["r", "55", "fill", "none", "stroke", "#fbbf24", "stroke-width", "3", "opacity", "0.8", "class", "node-selection-ring", 4, "ngIf"], ["r", "40", "stroke-width", "3", 1, "node-circle"], ["r", "50", "stroke-width", "2", "fill", "none", "opacity", "0.5", "class", "node-glow", 4, "ngIf"], ["text-anchor", "middle", "dy", "10", "font-size", "28", 1, "node-icon"], ["y", "60", "text-anchor", "middle", "font-size", "14", "font-weight", "600", 1, "node-title"], ["transform", "translate(25, -25)", 4, "ngIf"], ["transform", "translate(-25, -25)", 4, "ngIf"], ["r", "55", "fill", "none", "stroke", "#fbbf24", "stroke-width", "3", "opacity", "0.8", 1, "node-selection-ring"], ["attributeName", "r", "values", "55;60;55", "dur", "2s", "repeatCount", "indefinite"], ["r", "50", "stroke-width", "2", "fill", "none", "opacity", "0.5", 1, "node-glow"], ["transform", "translate(25, -25)"], ["r", "15", "fill", "#e53e3e"], ["text-anchor", "middle", "dy", "5", "font-size", "16", 1, "badge-text"], ["transform", "translate(-25, -25)"], ["r", "12", "fill", "#4299e1"], ["text-anchor", "middle", "dy", "4", "font-size", "10", "fill", "white", 1, "visit-count"], [1, "node-detail-panel"], [1, "detail-header"], [1, "detail-close-btn", 3, "click"], [1, "detail-body"], [1, "detail-type"], ["class", "detail-content", 4, "ngIf"], ["class", "detail-stats", 4, "ngIf"], ["class", "detail-conditions", 4, "ngIf"], ["class", "detail-choices", 4, "ngIf"], ["class", "detail-battle", 4, "ngIf"], [1, "detail-content"], ["class", "more-indicator", 4, "ngIf"], [1, "more-indicator"], [1, "detail-stats"], [1, "detail-conditions"], [1, "detail-choices"], [1, "choice-icon"], [1, "detail-battle"], [1, "stats-overlay"], ["class", "current-location", 4, "ngIf"], [1, "stat-card"], ["class", "path-history", 4, "ngIf"], [1, "current-location"], [1, "location-card"], [1, "location-icon"], [1, "location-info"], [1, "location-title"], [1, "location-path"], [1, "path-history"], [1, "history-list"], ["class", "history-item", 4, "ngFor", "ngForOf"], [1, "history-item"], [1, "history-icon"], [1, "history-node"], ["class", "history-choice", 4, "ngIf"], [1, "history-choice"], [1, "empty-state"], [1, "empty-actions"], [1, "primary-btn", 3, "click"], [1, "secondary-btn", 3, "click"], [1, "flow-scenario-link-overlay"], ["cdkDrag", "", "cdkDragBoundary", ".flow-scenario-link-overlay", 1, "flow-scenario-link-panel"], ["class", "node-info-card", 4, "ngIf"], ["class", "choice-info", 4, "ngIf"], ["class", "scenario-card", 3, "linked", "click", 4, "ngFor", "ngForOf"], [1, "node-info-card"], [1, "node-icon-large"], [1, "node-details"], [1, "node-type-badge"], [1, "choice-info"], [1, "choice-label"], [1, "choice-value"], ["class", "linked-badge", 4, "ngIf"], [1, "linked-badge"], [1, "wuxia-overlay", 3, "click"], ["cdkDrag", "", "cdkDragBoundary", ".wuxia-overlay", 1, "wuxia-panel", 3, "click"], ["cdkDragHandle", "", 1, "wuxia-header"], [1, "wuxia-tabs"], [1, "cultivation-section"], [1, "internal-power-gauge"], [1, "gauge-header"], [1, "gauge-label"], [1, "gauge-value"], [1, "gauge-bar"], [1, "gauge-fill"], [1, "gauge-info"], [1, "realm-display"], [1, "realm-badge"], [1, "realm-icon"], [1, "realm-info"], [1, "realm-name"], [1, "realm-subtitle"], [1, "realm-progress"], [1, "progress-label"], [1, "progress-bar"], [1, "progress-value"], [1, "cultivation-actions"], [1, "cultivation-btn", 3, "click"], [1, "btn-text"], [1, "training-level"], [1, "training-label"], [1, "training-bar"], [1, "training-fill"], [1, "training-value"], [1, "learned-skills-count"], [1, "skills-grid"], ["class", "skill-card", 3, "class", 4, "ngFor", "ngForOf"], ["class", "no-skills", 4, "ngIf"], [1, "skill-card"], [1, "skill-header"], [1, "skill-names"], [1, "skill-name-chinese"], [1, "skill-name-korean"], [1, "skill-grade-badge"], [1, "skill-type"], ["class", "type-icon", 4, "ngIf"], [1, "type-label"], [1, "skill-stats"], [1, "skill-description"], [1, "skill-effect"], ["class", "skill-element", 4, "ngIf"], ["class", "skill-faction", 4, "ngIf"], [1, "type-icon"], [1, "skill-element"], [1, "element-icon"], [1, "element-name"], [1, "skill-faction"], [1, "faction-label"], [1, "faction-name"], [1, "no-skills"], [1, "faction-section"], ["class", "current-faction", 4, "ngIf"], ["class", "no-faction", 4, "ngIf"], [1, "current-faction"], [1, "faction-card", "current"], [1, "faction-header"], [1, "faction-name-korean"], [1, "faction-type"], [1, "faction-info"], [1, "faction-reputation"], [1, "reputation-bar"], [1, "reputation-fill"], [1, "no-faction"], [1, "factions-grid"], ["class", "faction-card", 3, "class", 4, "ngFor", "ngForOf"], [1, "faction-card"], [1, "faction-specialties"], ["class", "specialty-badge", 4, "ngFor", "ngForOf"], [1, "join-faction-btn", 3, "click"], [1, "specialty-badge"], [1, "elixir-section"], [1, "elixir-inventory"], ["class", "elixir-card", 3, "class", 4, "ngFor", "ngForOf"], ["class", "no-elixir", 4, "ngIf"], [1, "elixir-card"], [1, "elixir-header"], [1, "elixir-names"], [1, "elixir-chinese"], [1, "elixir-korean"], [1, "elixir-grade"], [1, "elixir-type"], [1, "rarity-stars"], ["class", "star", 4, "ngFor", "ngForOf"], [1, "elixir-description"], [1, "elixir-effects"], ["class", "elixir-warning", 4, "ngIf"], [1, "elixir-footer"], [1, "elixir-price"], [1, "use-elixir-btn", 3, "click"], [1, "star"], [1, "elixir-warning"], [1, "warning-icon"], [1, "warning-text"], [1, "no-elixir"], [1, "meridians-section"], [1, "meridian-info"], [1, "meridian-diagram"], ["class", "meridian-point", 3, "opened", "top", "left", "title", 4, "ngFor", "ngForOf"], [1, "meridian-list"], ["class", "meridian-item", 3, "opened", 4, "ngFor", "ngForOf"], [1, "meridian-point", 3, "title"], [1, "point-circle"], [1, "point-number"], ["class", "point-info", 4, "ngIf"], [1, "point-info"], [1, "open-meridian-btn", 3, "click"], [1, "meridian-item"], [1, "meridian-number"], [1, "meridian-details"], ["class", "meridian-progress", 4, "ngIf"], [1, "meridian-bonus"], ["class", "bonus-item", 4, "ngFor", "ngForOf"], [1, "meridian-status"], ["class", "status-opened", 4, "ngIf"], ["class", "open-btn", 3, "click", 4, "ngIf"], [1, "meridian-progress"], [1, "bonus-item"], [1, "status-opened"], [1, "open-btn", 3, "click"], [1, "dungeon-test-dialog"], [1, "dialog-overlay", 3, "click"], [1, "dialog-content"], [1, "dialog-header"], ["class", "dungeon-panel", 4, "ngIf"], [1, "inventory-section"], [1, "inventory-header"], ["mat-raised-button", "", "color", "accent", 3, "click", 4, "ngIf"], [1, "inventory-filter-buttons"], ["mat-button", "", 3, "click"], [1, "filter-icon"], ["class", "inventory-grid", 4, "ngIf"], ["xPosition", "after", "yPosition", "below", 1, "item-context-menu-mat", 3, "overlapTrigger"], ["mat-menu-item", "", 3, "click", 4, "ngIf"], ["mat-menu-item", "", 3, "click"], ["color", "warn"], ["class", "empty-inventory", 4, "ngIf"], ["class", "empty-equipment-state", 4, "ngIf"], [1, "dungeon-panel"], [1, "equipment-grid-diablo"], [1, "equipment-slot-diablo", "helmet-slot", 3, "click"], [1, "slot-label"], ["class", "slot-content", 4, "ngIf", "ngIfElse"], [1, "equipment-slot-diablo", "armor-slot", 3, "click"], [1, "equipment-slot-diablo", "gloves-slot", 3, "click"], [1, "equipment-slot-diablo", "boots-slot", 3, "click"], [1, "equipment-slot-diablo", "weapon-slot", "large", 3, "click"], [1, "equipment-slot-diablo", "amulet-slot", 3, "click"], [1, "equipment-slot-diablo", "belt-slot", 3, "click"], [1, "equipment-slot-diablo", "ring-slot", 3, "click"], [1, "equipment-summary-diablo"], [1, "summary-item"], [1, "summary-icon"], [1, "summary-label"], [1, "summary-value"], [1, "slot-content"], [1, "item-icon-diablo"], [1, "item-name-short"], [1, "slot-content", "empty"], [1, "empty-icon-diablo"], [1, "item-icon-diablo", "large"], ["class", "item-damage", 4, "ngIf"], [1, "item-damage"], [1, "empty-icon-diablo", "large"], ["mat-raised-button", "", "color", "accent", 3, "click"], [1, "inventory-grid"], ["class", "inventory-item", 3, "ngClass", 4, "ngFor", "ngForOf"], [1, "inventory-item", 3, "ngClass"], [1, "item-card-trigger", 3, "menuOpened", "matMenuTriggerFor"], [1, "item-card-content"], [1, "item-card-icon"], [1, "item-card-info"], [1, "item-card-name"], [1, "item-card-rarity-badge"], ["class", "item-card-slot", 4, "ngIf"], ["class", "item-card-quantity", 4, "ngIf"], [1, "item-card-rarity"], ["mat-icon-button", "", 1, "delete-item-btn", 3, "click"], [1, "item-card-slot"], ["class", "mini-stat damage", 4, "ngIf"], ["class", "mini-stat defense", 4, "ngIf"], ["class", "mini-stat vital", 4, "ngIf"], ["class", "mini-stat critical", 4, "ngIf"], ["class", "mini-stat lifesteal", 4, "ngIf"], ["class", "mini-stat resist", 4, "ngIf"], ["class", "mini-stat special", 4, "ngIf"], [1, "mini-stat", "damage"], [1, "mini-stat", "defense"], [1, "mini-stat", "vital"], [1, "mini-stat", "critical"], [1, "mini-stat", "lifesteal"], [1, "mini-stat", "resist"], [1, "mini-stat", "special"], [1, "item-card-quantity"], [1, "quantity-badge"], [1, "empty-inventory"], ["class", "hint", 4, "ngIf"], ["mat-raised-button", "", "color", "primary", 3, "click", 4, "ngIf"], ["mat-raised-button", "", "color", "primary", 3, "click"], [1, "empty-equipment-state"], ["class", "dungeon-progress-panel", 4, "ngIf"], [1, "dungeon-progress-panel"], [1, "flow-minimap-panel"], [1, "flow-panel-header"], [1, "flow-panel-content"], [1, "advanced-flow-content"], [1, "wuxia-panel"], [1, "wuxia-panel-header"], [1, "wuxia-panel-content"], ["class", "dialog-body", 4, "ngIf"], [1, "dialog-body"], [1, "test-section"], [1, "dungeon-type-grid"], ["class", "dungeon-type-card", 3, "selected", "click", 4, "ngFor", "ngForOf"], ["class", "empty-character-state", 4, "ngIf"], [1, "dungeon-type-card", 3, "click"], [1, "skill-type-badge", 3, "ngClass"], [1, "empty-character-state"], ["class", "dungeon-container", 4, "ngIf"], ["class", "dialog-footer", 4, "ngIf"], ["class", "test-section", 4, "ngIf"], [1, "dungeon-icon"], [1, "dungeon-name"], [1, "dungeon-level"], [1, "dungeon-floors"], [1, "difficulty-grid"], [1, "difficulty-btn", "easy", 3, "click"], [1, "difficulty-mult"], [1, "difficulty-btn", "normal", 3, "click"], [1, "difficulty-btn", "hard", 3, "click"], [1, "difficulty-btn", "hell", 3, "click"], [1, "test-options"], [1, "option-item"], ["type", "checkbox", 3, "ngModelChange", "ngModel"], [1, "player-stats"], [1, "dungeon-container"], [3, "roomMove", "monsterAttack", "interactableUse", "dungeonEscape", "floorMove", "rewardsClaimed", "dungeon", "currentRoom", "playerHp", "playerMaxHp", "playerMp", "playerMaxMp", "playerName", "playerLevel", "playerAttackPower", "playerDefensePower", "playerEquipment", "playerSkills"], [1, "dialog-footer"], [1, "btn-secondary", 3, "click"], [1, "btn-primary", 3, "click", "disabled"], [1, "dungeon-overlay"], [3, "roomMove", "monsterAttack", "interactableUse", "dungeonEscape", "floorMove", "rewardsClaimed", "dungeon", "currentRoom", "playerHp", "playerMaxHp", "playerMp", "playerMaxMp"], [1, "character-inventory-modal-overlay", 3, "click"], [1, "character-inventory-modal", "game-panel", "inventory-panel", 3, "click"], ["class", "character-info-bar", 4, "ngIf"], [1, "panel-footer"], [1, "character-info-bar"], [1, "info-badges"], [1, "stat-badge", "level"], [1, "stat-badge", "gold"], [1, "equipment-slot-diablo", "weapon-slot"], [1, "equipment-slot-diablo", "armor-slot"], [1, "equipment-slot-diablo", "helmet-slot"], [1, "equipment-slot-diablo", "amulet-slot"], [1, "equipment-slot-diablo", "belt-slot"], [1, "equipment-slot-diablo", "gloves-slot"], [1, "equipment-slot-diablo", "boots-slot"], [1, "equipment-slot-diablo", "ring-slot", "ring-left"], [1, "equipment-slot-diablo", "ring-slot", "ring-right"], [1, "inventory-grid-cells"], ["class", "inventory-cell", 3, "class", "title", 4, "ngFor", "ngForOf"], [1, "inventory-cell", 3, "title"], [1, "item-tooltip-detail"], [1, "tooltip-header"], [1, "tooltip-rarity"], [1, "tooltip-type"], ["class", "tooltip-stats", 4, "ngIf"], ["class", "tooltip-description", 4, "ngIf"], [1, "tooltip-stats"], [1, "tooltip-description"]], template: function NovelGeneratorComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 11);
      \u0275\u0275pipe(1, "async");
      \u0275\u0275pipe(2, "async");
      \u0275\u0275template(3, NovelGeneratorComponent_div_3_Template, 94, 16, "div", 12)(4, NovelGeneratorComponent_div_4_Template, 42, 46, "div", 13)(5, NovelGeneratorComponent_div_5_Template, 2, 4, "div", 14)(6, NovelGeneratorComponent_div_6_Template, 130, 42, "div", 15)(7, NovelGeneratorComponent_div_7_Template, 17, 13, "div", 16)(8, NovelGeneratorComponent_div_8_Template, 16, 4, "div", 17)(9, NovelGeneratorComponent_div_9_Template, 7, 5, "div", 18)(10, NovelGeneratorComponent_div_10_Template, 11, 6, "div", 19)(11, NovelGeneratorComponent_div_11_Template, 28, 14, "div", 20)(12, NovelGeneratorComponent_div_12_Template, 28, 14, "div", 21)(13, NovelGeneratorComponent_div_13_Template, 29, 15, "div", 22);
      \u0275\u0275elementEnd();
      \u0275\u0275template(14, NovelGeneratorComponent_div_14_Template, 41, 4, "div", 23)(15, NovelGeneratorComponent_div_15_Template, 22, 3, "div", 24)(16, NovelGeneratorComponent_div_16_Template, 113, 37, "div", 25)(17, NovelGeneratorComponent_button_17_Template, 5, 0, "button", 26)(18, NovelGeneratorComponent_div_18_Template, 15, 5, "div", 27)(19, NovelGeneratorComponent_div_19_Template, 19, 4, "div", 28)(20, NovelGeneratorComponent_div_20_Template, 25, 23, "div", 29)(21, NovelGeneratorComponent_div_21_Template, 62, 22, "div", 30)(22, NovelGeneratorComponent_div_22_Template, 10, 4, "div", 30)(23, NovelGeneratorComponent_div_23_Template, 9, 0, "div", 31)(24, NovelGeneratorComponent_div_24_Template, 9, 0, "div", 32)(25, NovelGeneratorComponent_div_25_Template, 9, 0, "div", 33)(26, NovelGeneratorComponent_div_26_Template, 9, 4, "div", 30);
      \u0275\u0275elementStart(27, "h2");
      \u0275\u0275text(28, "\uFFFD \uB358\uC804 \uC120\uD0DD");
      \u0275\u0275elementEnd();
      \u0275\u0275template(29, NovelGeneratorComponent_div_29_Template, 11, 6, "div", 30)(30, NovelGeneratorComponent_div_30_Template, 2, 6, "div", 34)(31, NovelGeneratorComponent_div_31_Template, 18, 8, "div", 35);
    }
    if (rf & 2) {
      \u0275\u0275classProp("mobile", \u0275\u0275pipeBind1(1, 31, ctx.responsiveService.isMobile$))("tablet", \u0275\u0275pipeBind1(2, 33, ctx.responsiveService.isTablet$));
      \u0275\u0275advance(3);
      \u0275\u0275property("ngIf", !ctx.novelSelected && !ctx.gameStarted);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.gameStarted);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showCharacterPanel || ctx.showInventoryPanel || ctx.showShopPanel || ctx.showCharacterCreatorPanel || ctx.showScenarioCreatorPanel || ctx.showItemCreatorPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showCharacterPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showInventoryPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showItemContextMenu);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showItemInfo);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showShopPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showCharacterCreatorPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showScenarioCreatorPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showItemCreatorPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showStoryFlowPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showScenarioLinkPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.gameStarted && ctx.storyNodes.length > 0 && ctx.isFlowPanelOpen);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.gameStarted && ctx.storyNodes.length > 0 && !ctx.isFlowPanelOpen);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showAdvancedFlowPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showFlowScenarioLinkPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showWuxiaPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showDungeonTestDialog);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showDungeonTestDialog);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showFlowPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showAdvancedFlowPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showWuxiaPanel);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showDungeonTestDialog);
      \u0275\u0275advance(3);
      \u0275\u0275property("ngIf", ctx.showDungeonTestDialog);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showDungeonPanel && ctx.currentDungeon && ctx.currentDungeonRoom);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showCharacterInventoryModal);
    }
  }, dependencies: [NgClass, NgForOf, NgIf, NgSelectOption, \u0275NgSelectMultipleOption, DefaultValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, NgControlStatus, MaxLengthValidator, NgModel, MatButton, MatIconButton, CdkDropList, CdkDrag, CdkDragHandle, CdkDragPreview, MatIcon, MatMenu, MatMenuItem, MatMenuTrigger, DungeonExplorer, AsyncPipe, DecimalPipe], styles: ['@charset "UTF-8";\n\n\n\n.dialogue[_ngcontent-%COMP%] {\n  color: #2196F3;\n  cursor: default;\n  padding: 2px 4px;\n  border-radius: 4px;\n  display: inline-block;\n}\n.dialogue-choice[_ngcontent-%COMP%] {\n  display: block !important;\n  margin: 16px 0 !important;\n  padding: 16px 20px;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  border: 2px solid transparent;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 255, 255, 0.1) 0%,\n      rgba(255, 255, 255, 0.05) 100%);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  clear: both;\n  width: 100%;\n  box-sizing: border-box;\n}\np[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%] {\n  display: block !important;\n  margin: 16px -20px !important;\n  max-width: calc(100% + 40px);\n}\n.dialogue-choice[_ngcontent-%COMP%]:hover {\n  transform: translateX(8px) scale(1.02);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\n}\n.dialogue-choice.selected[_ngcontent-%COMP%] {\n  transform: translateX(12px) scale(1.03);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);\n  font-weight: 500;\n}\n.dialogue-choice[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n  margin-right: 12px;\n  vertical-align: middle;\n}\n.dialogue-choice[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%] {\n  font-size: 16px;\n  line-height: 1.6;\n  vertical-align: middle;\n}\n.dialogue-choice[_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%] {\n  display: inline-block;\n  margin-left: 12px;\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  vertical-align: middle;\n  letter-spacing: 0.5px;\n}\n.dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%] {\n  border-color: #4CAF50;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.1) 0%,\n      rgba(76, 175, 80, 0.05) 100%);\n}\n.dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]:hover {\n  border-color: #45a049;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.15) 0%,\n      rgba(76, 175, 80, 0.08) 100%);\n}\n.dialogue-choice[data-choice-type=positive].selected[_ngcontent-%COMP%] {\n  border-color: #45a049;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.25) 0%,\n      rgba(76, 175, 80, 0.15) 100%);\n  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);\n}\n.dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%] {\n  background: #4CAF50;\n  color: white;\n}\n.dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%] {\n  border-color: #f44336;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(244, 67, 54, 0.1) 0%,\n      rgba(244, 67, 54, 0.05) 100%);\n}\n.dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]:hover {\n  border-color: #da190b;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(244, 67, 54, 0.15) 0%,\n      rgba(244, 67, 54, 0.08) 100%);\n}\n.dialogue-choice[data-choice-type=negative].selected[_ngcontent-%COMP%] {\n  border-color: #da190b;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(244, 67, 54, 0.25) 0%,\n      rgba(244, 67, 54, 0.15) 100%);\n  box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.2);\n}\n.dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%] {\n  background: #f44336;\n  color: white;\n}\n.dialogue-choice[data-choice-type=neutral][_ngcontent-%COMP%] {\n  border-color: #9E9E9E;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(158, 158, 158, 0.1) 0%,\n      rgba(158, 158, 158, 0.05) 100%);\n}\n.dialogue-choice[data-choice-type=neutral][_ngcontent-%COMP%]:hover {\n  border-color: #757575;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(158, 158, 158, 0.15) 0%,\n      rgba(158, 158, 158, 0.08) 100%);\n}\n.dialogue-choice[data-choice-type=neutral].selected[_ngcontent-%COMP%] {\n  border-color: #757575;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(158, 158, 158, 0.25) 0%,\n      rgba(158, 158, 158, 0.15) 100%);\n  box-shadow: 0 0 0 3px rgba(158, 158, 158, 0.2);\n}\n.dialogue-choice[data-choice-type=neutral][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%] {\n  background: #9E9E9E;\n  color: white;\n}\n.dialogue-choice[data-choice-type=aggressive][_ngcontent-%COMP%] {\n  border-color: #FF5722;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 87, 34, 0.1) 0%,\n      rgba(255, 87, 34, 0.05) 100%);\n}\n.dialogue-choice[data-choice-type=aggressive][_ngcontent-%COMP%]:hover {\n  border-color: #E64A19;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 87, 34, 0.15) 0%,\n      rgba(255, 87, 34, 0.08) 100%);\n}\n.dialogue-choice[data-choice-type=aggressive].selected[_ngcontent-%COMP%] {\n  border-color: #E64A19;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 87, 34, 0.25) 0%,\n      rgba(255, 87, 34, 0.15) 100%);\n  box-shadow: 0 0 0 3px rgba(255, 87, 34, 0.2);\n}\n.dialogue-choice[data-choice-type=aggressive][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%] {\n  background: #FF5722;\n  color: white;\n}\n.dialogue-choice[data-choice-type=passive][_ngcontent-%COMP%] {\n  border-color: #2196F3;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(33, 150, 243, 0.1) 0%,\n      rgba(33, 150, 243, 0.05) 100%);\n}\n.dialogue-choice[data-choice-type=passive][_ngcontent-%COMP%]:hover {\n  border-color: #1976D2;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(33, 150, 243, 0.15) 0%,\n      rgba(33, 150, 243, 0.08) 100%);\n}\n.dialogue-choice[data-choice-type=passive].selected[_ngcontent-%COMP%] {\n  border-color: #1976D2;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(33, 150, 243, 0.25) 0%,\n      rgba(33, 150, 243, 0.15) 100%);\n  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);\n}\n.dialogue-choice[data-choice-type=passive][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%] {\n  background: #2196F3;\n  color: white;\n}\n.selectable[_ngcontent-%COMP%] {\n  position: relative;\n}\nbody.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 255, 255, 0.05) 0%,\n      rgba(255, 255, 255, 0.02) 100%);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\nbody.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]:hover, \nbody.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]:hover, \n[data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]:hover {\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);\n}\nbody.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.15) 0%,\n      rgba(76, 175, 80, 0.08) 100%);\n}\nbody.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]:hover, \nbody.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]:hover, \n[data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.2) 0%,\n      rgba(76, 175, 80, 0.12) 100%);\n}\nbody.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive].selected[_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive].selected[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive].selected[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.3) 0%,\n      rgba(76, 175, 80, 0.2) 100%);\n}\nbody.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(244, 67, 54, 0.15) 0%,\n      rgba(244, 67, 54, 0.08) 100%);\n}\nbody.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]:hover, \nbody.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]:hover, \n[data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(244, 67, 54, 0.2) 0%,\n      rgba(244, 67, 54, 0.12) 100%);\n}\nbody.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative].selected[_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative].selected[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative].selected[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(244, 67, 54, 0.3) 0%,\n      rgba(244, 67, 54, 0.2) 100%);\n}\nbody.dark-theme[_ngcontent-%COMP%]   .dialogue[_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .dialogue[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .dialogue[_ngcontent-%COMP%] {\n  color: #64B5F6;\n}\n.battle-trigger-button[_ngcontent-%COMP%] {\n  display: block !important;\n  margin: 20px 0 !important;\n  padding: 20px 24px;\n  border-radius: 16px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  border: 3px solid #FF5722;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 87, 34, 0.15) 0%,\n      rgba(255, 87, 34, 0.08) 100%);\n  box-shadow: 0 4px 12px rgba(255, 87, 34, 0.3);\n  text-align: center;\n  font-weight: 600;\n  color: #FF5722;\n  width: 100%;\n  box-sizing: border-box;\n}\n.battle-trigger-button[_ngcontent-%COMP%]:hover {\n  transform: scale(1.05);\n  box-shadow: 0 6px 20px rgba(255, 87, 34, 0.4);\n  border-color: #E64A19;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 87, 34, 0.25) 0%,\n      rgba(255, 87, 34, 0.15) 100%);\n}\n.battle-trigger-button[_ngcontent-%COMP%]:active {\n  transform: scale(0.98);\n}\n.battle-trigger-button[_ngcontent-%COMP%]   .battle-icon[_ngcontent-%COMP%] {\n  font-size: 28px;\n  margin-right: 12px;\n  vertical-align: middle;\n  animation: _ngcontent-%COMP%_battlePulse 1.5s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_battlePulse {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n}\n.battle-trigger-button[_ngcontent-%COMP%]   .battle-text[_ngcontent-%COMP%] {\n  font-size: 18px;\n  vertical-align: middle;\n  letter-spacing: 1px;\n}\nbody.dark-theme[_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%] {\n  border-color: #FF7043;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 112, 67, 0.2) 0%,\n      rgba(255, 112, 67, 0.1) 100%);\n  color: #FF7043;\n}\nbody.dark-theme[_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%]:hover, \nbody.dark-mode[_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%]:hover, \n[data-theme=dark][_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 112, 67, 0.3) 0%,\n      rgba(255, 112, 67, 0.18) 100%);\n  box-shadow: 0 6px 20px rgba(255, 112, 67, 0.5);\n}\n.dialogue-selection-hint[_ngcontent-%COMP%] {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  background: rgba(33, 150, 243, 0.9);\n  color: white;\n  padding: 12px 16px;\n  border-radius: 8px;\n  font-size: 13px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  z-index: 1000;\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease-in;\n}\n@keyframes _ngcontent-%COMP%_fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n.text-battle-display[_ngcontent-%COMP%] {\n  margin: 30px 0;\n  padding: 20px;\n  background: var(--bg-secondary);\n  border: 2px solid #FF5722;\n  border-radius: 12px;\n  box-shadow: 0 4px 16px rgba(255, 87, 34, 0.2);\n}\n.battle-text-divider[_ngcontent-%COMP%] {\n  text-align: center;\n  font-size: 18px;\n  font-weight: bold;\n  color: #FF5722;\n  margin: 20px 0;\n  padding: 10px 0;\n  border-top: 2px solid #FF5722;\n  border-bottom: 2px solid #FF5722;\n  letter-spacing: 2px;\n}\n.battle-text-participants[_ngcontent-%COMP%] {\n  margin: 20px 0;\n  padding: 15px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  font-size: 16px;\n  line-height: 1.8;\n}\n.battle-text-participants[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 8px 0;\n}\n.battle-character-info[_ngcontent-%COMP%] {\n  padding: 15px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  margin: 10px 0;\n  border: 2px solid var(--border-color);\n}\n.battle-character-info[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%] {\n  font-size: 18px;\n  margin-bottom: 12px;\n  color: var(--text-primary);\n}\n.stat-row[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin: 8px 0;\n}\n.stat-label[_ngcontent-%COMP%] {\n  min-width: 35px;\n  font-weight: bold;\n  font-size: 14px;\n  color: var(--text-secondary);\n}\n.stat-bar-container[_ngcontent-%COMP%] {\n  flex: 1;\n  height: 24px;\n  background: var(--bg-tertiary);\n  border-radius: 12px;\n  overflow: hidden;\n  border: 2px solid var(--border-color);\n  position: relative;\n}\n.stat-bar[_ngcontent-%COMP%] {\n  height: 100%;\n  transition: width 0.5s ease-out;\n  border-radius: 10px;\n  position: relative;\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n.stat-bar[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 50%;\n  background:\n    linear-gradient(\n      to bottom,\n      rgba(255, 255, 255, 0.3),\n      transparent);\n  border-radius: 10px 10px 0 0;\n}\n.hp-bar[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #ef5350 0%,\n      #f44336 50%,\n      #e53935 100%);\n}\n.mp-bar[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #42a5f5 0%,\n      #2196f3 50%,\n      #1e88e5 100%);\n}\n.stat-value[_ngcontent-%COMP%] {\n  min-width: 80px;\n  text-align: right;\n  font-size: 14px;\n  font-weight: bold;\n  color: var(--text-primary);\n}\n.stat-value[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  color: var(--accent-primary);\n}\n.battle-text-log[_ngcontent-%COMP%] {\n  margin: 20px 0;\n  padding: 20px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  max-height: 400px;\n  overflow-y: auto;\n  border: 1px solid var(--border-color);\n}\n.battle-text-entry[_ngcontent-%COMP%] {\n  padding: 8px 12px;\n  margin: 6px 0;\n  background: var(--bg-secondary);\n  border-left: 3px solid #2196F3;\n  border-radius: 4px;\n  font-size: 15px;\n  line-height: 1.6;\n}\n.battle-text-result[_ngcontent-%COMP%] {\n  margin: 20px 0;\n}\n.battle-text-actions[_ngcontent-%COMP%] {\n  margin: 20px 0;\n  text-align: center;\n}\n.battle-text-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  font-size: 18px;\n  font-weight: bold;\n  margin-bottom: 15px;\n  color: var(--accent-primary);\n}\n.battle-text-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 10px;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n.battle-text-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  min-width: 120px;\n}\nbody.dark-theme[_ngcontent-%COMP%]   .text-battle-display[_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .text-battle-display[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .text-battle-display[_ngcontent-%COMP%] {\n  background: rgba(255, 87, 34, 0.05);\n  border-color: #FF7043;\n  box-shadow: 0 4px 16px rgba(255, 112, 67, 0.3);\n}\nbody.dark-theme[_ngcontent-%COMP%]   .battle-text-divider[_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .battle-text-divider[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .battle-text-divider[_ngcontent-%COMP%] {\n  color: #FF7043;\n  border-color: #FF7043;\n}\nbody.dark-theme[_ngcontent-%COMP%]   .battle-text-entry[_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .battle-text-entry[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .battle-text-entry[_ngcontent-%COMP%] {\n  border-left-color: #4fc3f7;\n}\nbody.dark-theme[_ngcontent-%COMP%]   .battle-character-info[_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .battle-character-info[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .battle-character-info[_ngcontent-%COMP%] {\n  background: rgba(45, 45, 45, 0.8);\n  border-color: #555555;\n}\nbody.dark-theme[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%] {\n  background: rgba(64, 64, 64, 0.8);\n  border-color: #666666;\n}\nbody.dark-theme[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #d32f2f 0%,\n      #f44336 50%,\n      #ef5350 100%);\n}\nbody.dark-theme[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%], \nbody.dark-mode[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #1565c0 0%,\n      #2196f3 50%,\n      #42a5f5 100%);\n}\n@media (max-width: 768px) {\n  .game-layout.mobile[_ngcontent-%COMP%] {\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    overflow: hidden;\n  }\n  .left-panel-container.mobile[_ngcontent-%COMP%], \n   .right-panel-container.mobile[_ngcontent-%COMP%] {\n    position: fixed !important;\n    top: 0;\n    left: 0;\n    width: 85vw !important;\n    max-width: 320px !important;\n    height: 100vh !important;\n    z-index: 1000;\n    transition: transform 0.3s ease;\n  }\n  .left-panel-container.mobile.collapsed[_ngcontent-%COMP%], \n   .right-panel-container.mobile.collapsed[_ngcontent-%COMP%] {\n    transform: translateX(-100%) !important;\n  }\n  .left-panel-container.mobile[_ngcontent-%COMP%]:not(.collapsed), \n   .right-panel-container.mobile[_ngcontent-%COMP%]:not(.collapsed) {\n    transform: translateX(0) !important;\n    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);\n  }\n  .right-panel-container.mobile[_ngcontent-%COMP%] {\n    left: auto;\n    right: 0;\n  }\n  .right-panel-container.mobile.collapsed[_ngcontent-%COMP%] {\n    transform: translateX(100%) !important;\n  }\n  .main-content-area.mobile[_ngcontent-%COMP%] {\n    width: 100% !important;\n    height: 100vh !important;\n    padding: 0 !important;\n    margin: 0 !important;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%] {\n    height: 56px !important;\n    min-height: 56px !important;\n    max-height: 56px !important;\n    padding: 6px 8px !important;\n    display: flex !important;\n    flex-wrap: nowrap !important;\n    justify-content: space-between !important;\n    align-items: center !important;\n    gap: 6px !important;\n    overflow: hidden !important;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%] {\n    min-width: 44px !important;\n    width: 44px !important;\n    height: 44px !important;\n    padding: 10px !important;\n    flex-shrink: 0;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%] {\n    min-width: 44px !important;\n    width: 44px !important;\n    height: 44px !important;\n    padding: 10px !important;\n    flex-shrink: 0;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n    display: none !important;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]:not(.mobile-actions) {\n    display: none !important;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%] {\n    display: flex !important;\n    gap: 8px !important;\n    flex: 1;\n    justify-content: flex-end !important;\n    align-items: center !important;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    min-width: 44px !important;\n    width: 44px !important;\n    height: 44px !important;\n    padding: 10px !important;\n    flex-shrink: 0;\n    position: relative;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.badge) {\n    display: none !important;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n    width: 22px !important;\n    height: 22px !important;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%] {\n    position: absolute;\n    top: 2px;\n    right: 2px;\n    background: #ff4757;\n    color: white;\n    border-radius: 10px;\n    padding: 2px 5px;\n    font-size: 0.65rem;\n    font-weight: bold;\n    min-width: 18px;\n    height: 18px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .novel-scroll-area[_ngcontent-%COMP%] {\n    padding: 20px 16px !important;\n  }\n  .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%] {\n    padding: 20px 16px !important;\n  }\n  .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n    font-size: 1rem !important;\n    line-height: 1.7 !important;\n  }\n  .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    min-height: 44px !important;\n    padding: 12px 20px !important;\n  }\n  .game-panel.mobile[_ngcontent-%COMP%], \n   .character-panel.mobile[_ngcontent-%COMP%], \n   .inventory-panel.mobile[_ngcontent-%COMP%], \n   .shop-panel.mobile[_ngcontent-%COMP%] {\n    width: 100vw !important;\n    height: 100vh !important;\n    max-width: 100vw !important;\n    max-height: 100vh !important;\n    border-radius: 0 !important;\n  }\n  .game-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%], \n   .character-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%], \n   .inventory-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%], \n   .shop-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%] {\n    padding: 16px 20px !important;\n  }\n  .game-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], \n   .character-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], \n   .inventory-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], \n   .shop-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n    font-size: 1.3rem !important;\n  }\n  .game-panel.mobile[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%], \n   .character-panel.mobile[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%], \n   .inventory-panel.mobile[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%], \n   .shop-panel.mobile[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] {\n    padding: 16px !important;\n    overflow-y: auto !important;\n    height: calc(100vh - 150px) !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-tabs[_ngcontent-%COMP%] {\n    display: flex !important;\n    gap: 8px !important;\n    padding: 12px 16px !important;\n    overflow-x: auto !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%] {\n    min-width: auto !important;\n    padding: 10px 16px !important;\n    font-size: 0.9rem !important;\n    white-space: nowrap !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%] {\n    padding: 16px !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%] {\n    margin-bottom: 24px !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%] {\n    display: flex !important;\n    flex-direction: column !important;\n    gap: 16px !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%] {\n    width: 100% !important;\n    display: grid !important;\n    grid-template-columns: repeat(2, 1fr) !important;\n    gap: 12px !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column.left-column[_ngcontent-%COMP%], \n   .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column.right-column[_ngcontent-%COMP%] {\n    width: 100% !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column.center-column[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%] {\n    width: 100% !important;\n    height: 80px !important;\n    min-height: 80px !important;\n    padding: 8px !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 1.5rem !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%] {\n    font-size: 0.85rem !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .tooltip-name[_ngcontent-%COMP%] {\n    font-size: 0.85rem !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%] {\n    width: 24px !important;\n    height: 24px !important;\n    font-size: 1rem !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(3, 1fr) !important;\n    gap: 8px !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-slot[_ngcontent-%COMP%] {\n    width: 100% !important;\n    height: 80px !important;\n    padding: 6px !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-slot[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%] {\n    font-size: 1.2rem !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-slot[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n    font-size: 0.75rem !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-slot[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%] {\n    font-size: 0.7rem !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(2, 1fr) !important;\n    gap: 12px !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%] {\n    padding: 12px !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .currency-icon[_ngcontent-%COMP%] {\n    font-size: 1.5rem !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%] {\n    font-size: 1.1rem !important;\n  }\n  .character-panel.mobile[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%] {\n    display: flex !important;\n    flex-direction: column !important;\n    gap: 12px !important;\n  }\n  .character-panel.mobile[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n    width: 100% !important;\n    padding: 12px !important;\n  }\n  .character-panel.mobile[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(2, 1fr) !important;\n    gap: 10px !important;\n  }\n  .character-panel.mobile[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%] {\n    display: flex !important;\n    flex-direction: column !important;\n    gap: 8px !important;\n  }\n  .character-panel.mobile[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%] {\n    padding: 10px !important;\n  }\n  .panel-backdrop.mobile[_ngcontent-%COMP%] {\n    display: block !important;\n    opacity: 1 !important;\n  }\n  .novel-home-screen.mobile[_ngcontent-%COMP%] {\n    padding: 16px 12px !important;\n  }\n  .novel-home-screen.mobile[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr !important;\n    gap: 12px !important;\n  }\n  .wuxia-panel.mobile[_ngcontent-%COMP%] {\n    width: 95vw !important;\n    max-width: 95vw !important;\n    height: 90vh !important;\n    max-height: 90vh !important;\n  }\n}\n@media (min-width: 768px) and (max-width: 1024px) {\n  .game-status-bar[_ngcontent-%COMP%] {\n    padding: 8px 16px !important;\n  }\n  .game-status-bar[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    padding: 8px 12px !important;\n    font-size: 0.9rem !important;\n  }\n}\n@media (max-width: 480px) {\n  .game-status-bar.mobile[_ngcontent-%COMP%] {\n    padding: 4px 6px !important;\n    gap: 4px !important;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%], \n   .game-status-bar.mobile[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%] {\n    min-width: 40px !important;\n    width: 40px !important;\n    height: 40px !important;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    min-width: 40px !important;\n    width: 40px !important;\n    height: 40px !important;\n    padding: 8px !important;\n  }\n  .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n    width: 20px !important;\n    height: 20px !important;\n  }\n  .novel-scroll-area[_ngcontent-%COMP%] {\n    padding: 16px 12px !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%] {\n    height: 70px !important;\n    min-height: 70px !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 1.2rem !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%] {\n    font-size: 0.75rem !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(2, 1fr) !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-slot[_ngcontent-%COMP%] {\n    height: 70px !important;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%] {\n    padding: 8px 12px !important;\n    font-size: 0.85rem !important;\n  }\n}\n@media (pointer: coarse) {\n  button[_ngcontent-%COMP%], \n   .clickable[_ngcontent-%COMP%] {\n    min-width: 44px !important;\n    min-height: 44px !important;\n  }\n  .choice-btn[_ngcontent-%COMP%] {\n    padding: 16px 20px !important;\n    margin: 8px 0 !important;\n  }\n}\n@media (max-width: 768px) and (orientation: landscape) {\n  .game-status-bar.mobile[_ngcontent-%COMP%] {\n    height: 48px !important;\n    min-height: 48px !important;\n  }\n  .wuxia-panel.mobile[_ngcontent-%COMP%] {\n    height: 95vh !important;\n  }\n}\n[_nghost-%COMP%] {\n  --button-height-mobile: 56px;\n  --button-height-tablet: 52px;\n  --button-height-desktop: 48px;\n  --font-xs: 0.75rem;\n  --font-sm: 0.875rem;\n  --font-base: 1rem;\n  --font-md: 1.0625rem;\n  --font-lg: 1.125rem;\n  --font-xl: 1.25rem;\n  --font-2xl: 1.5rem;\n  --spacing-xs: 8px;\n  --spacing-sm: 12px;\n  --spacing-md: 16px;\n  --spacing-lg: 20px;\n  --spacing-xl: 24px;\n  --spacing-2xl: 32px;\n}\n@media (max-width: 768px) {\n  h1[_ngcontent-%COMP%] {\n    font-size: clamp(1.75rem, 4vw, 2.5rem);\n    line-height: 1.2;\n  }\n}\n@media (max-width: 480px) {\n  h1[_ngcontent-%COMP%] {\n    font-size: clamp(2rem, 5vw, 2.8rem);\n  }\n}\n@media (max-width: 768px) {\n  h2[_ngcontent-%COMP%] {\n    font-size: clamp(1.5rem, 3.5vw, 2rem);\n    line-height: 1.3;\n  }\n}\n@media (max-width: 480px) {\n  h2[_ngcontent-%COMP%] {\n    font-size: clamp(1.75rem, 4vw, 2.25rem);\n  }\n}\n@media (max-width: 768px) {\n  h3[_ngcontent-%COMP%] {\n    font-size: clamp(1.25rem, 3vw, 1.5rem);\n    line-height: 1.4;\n  }\n}\n@media (max-width: 480px) {\n  h3[_ngcontent-%COMP%] {\n    font-size: clamp(1.375rem, 3.5vw, 1.75rem);\n  }\n}\n@media (max-width: 768px) {\n  p[_ngcontent-%COMP%], \n   .text-content[_ngcontent-%COMP%] {\n    font-size: var(--font-base);\n    line-height: 1.6;\n  }\n}\n@media (max-width: 480px) {\n  p[_ngcontent-%COMP%], \n   .text-content[_ngcontent-%COMP%] {\n    font-size: var(--font-md);\n    line-height: 1.7;\n  }\n}\n.novel-book-container[_ngcontent-%COMP%] {\n  min-height: 100vh;\n  background: var(--bg-secondary);\n  font-family:\n    "Inter",\n    "Segoe UI",\n    system-ui,\n    -apple-system,\n    sans-serif;\n  color: var(--text-primary);\n  transition: background-color 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  background: var(--bg-primary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%] {\n  text-align: center;\n  max-width: 800px;\n  padding: 60px 50px;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 16px;\n  box-shadow: 0 8px 24px var(--shadow);\n  position: relative;\n  overflow: hidden;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: var(--gradient-primary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .book-title[_ngcontent-%COMP%] {\n  font-size: 3.5rem;\n  font-weight: 700;\n  margin-bottom: 20px;\n  background: var(--gradient-primary);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  letter-spacing: -1px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .book-subtitle[_ngcontent-%COMP%] {\n  font-size: 1.3rem;\n  margin-bottom: 16px;\n  color: var(--text-secondary);\n  font-weight: 400;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n  margin-bottom: 50px;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 2px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .select-guide[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  color: var(--text-secondary);\n  margin-bottom: 30px;\n  font-weight: 500;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .start-reading-btn[_ngcontent-%COMP%] {\n  padding: 16px 48px;\n  font-size: 1.1rem;\n  background: var(--accent-primary);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .start-reading-btn[_ngcontent-%COMP%]:hover {\n  background: var(--accent-secondary);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .start-reading-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(0) scale(0.98);\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%] {\n  padding: 12px 32px;\n  font-size: 1rem;\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  margin-right: 16px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover {\n  background: var(--bg-primary);\n  border-color: var(--accent-primary);\n  transform: translateY(-2px);\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(0) scale(0.98);\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%] {\n  max-width: 700px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .selected-novel-icon[_ngcontent-%COMP%] {\n  font-size: 5rem;\n  margin-bottom: 20px;\n  animation: _ngcontent-%COMP%_float 3s ease-in-out infinite;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .novel-intro[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  color: var(--text-secondary);\n  margin: 24px 0;\n  line-height: 1.6;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  padding: 24px;\n  margin: 32px 0;\n  border: 1px solid var(--border-color);\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 0;\n  border-bottom: 1px solid var(--border-color);\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:last-child {\n  border-bottom: none;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: var(--text-secondary);\n  font-size: 1rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%] {\n  font-weight: 700;\n  color: var(--text-primary);\n  font-size: 1.1rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.difficulty-badge-easy[_ngcontent-%COMP%] {\n  color: #10b981;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.difficulty-badge-normal[_ngcontent-%COMP%] {\n  color: #f59e0b;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.difficulty-badge-hard[_ngcontent-%COMP%] {\n  color: #ef4444;\n}\n.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 32px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%] {\n  min-height: 100vh;\n  height: 100vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n  background: var(--bg-secondary);\n  padding: 40px;\n  position: relative;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 60px;\n  background: var(--bg-primary);\n  border-bottom: 2px solid var(--border-color);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 16px;\n  z-index: 1000;\n  box-shadow: 0 2px 8px var(--shadow);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]   .header-brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\n  font-size: 1.3rem;\n  font-weight: 700;\n  margin: 0;\n  background: var(--gradient-primary);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]   .header-user-actions[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]   .header-user-actions[_ngcontent-%COMP%]   .user-badge[_ngcontent-%COMP%] {\n  padding: 6px 12px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--accent-primary);\n  border-radius: 20px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--text-primary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 120px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]   .header-user-actions[_ngcontent-%COMP%]   .header-logout-btn[_ngcontent-%COMP%] {\n  padding: 8px 12px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 1.2rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]   .header-user-actions[_ngcontent-%COMP%]   .header-logout-btn[_ngcontent-%COMP%]:hover {\n  background: var(--accent-primary);\n  border-color: var(--accent-primary);\n  transform: scale(1.05);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]   .header-user-actions[_ngcontent-%COMP%]   .header-logout-btn[_ngcontent-%COMP%]:active {\n  transform: scale(0.95);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 10px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.05);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: rgba(139, 92, 246, 0.3);\n  border-radius: 5px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: rgba(139, 92, 246, 0.5);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%] {\n  max-width: 1400px;\n  margin: 0 auto;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%] {\n  margin-bottom: 60px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%] {\n  position: relative;\n  text-align: center;\n  margin-bottom: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%] {\n  flex: 1;\n  text-align: center;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  font-size: 3rem;\n  font-weight: 700;\n  margin-bottom: 16px;\n  background: var(--gradient-primary);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  letter-spacing: -1px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%] {\n  font-size: 1.3rem;\n  color: var(--text-secondary);\n  font-weight: 400;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%] {\n  padding: 10px 18px;\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary) 0%,\n      var(--bg-primary) 100%);\n  border: 2px solid var(--accent-primary);\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  box-shadow: 0 2px 8px var(--shadow);\n  transition: all 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px var(--shadow);\n  border-color: var(--accent-secondary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  font-weight: 600;\n  background: var(--gradient-primary);\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%] {\n  padding: 12px 20px;\n  font-size: 1rem;\n  font-weight: 600;\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary) 0%,\n      var(--bg-primary) 100%);\n  color: var(--text-primary);\n  border: 2px solid var(--accent-primary);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 8px var(--shadow);\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-secondary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 16px var(--shadow);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));\n  gap: 24px;\n}\n@media (min-width: 1400px) {\n  .novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(5, 1fr);\n  }\n}\n@media (min-width: 1000px) and (max-width: 1399px) {\n  .novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n@media (max-width: 768px) {\n  .novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr;\n  }\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%] {\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 16px;\n  padding: 32px 28px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: var(--gradient-primary);\n  transform: scaleX(0);\n  transition: transform 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.featured[_ngcontent-%COMP%] {\n  border-color: var(--accent-primary);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.05) 0%,\n      rgba(139, 92, 246, 0.05) 100%);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%] {\n  border-color: #8b5cf6;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 92, 246, 0.08) 0%,\n      rgba(236, 72, 153, 0.08) 100%);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]:hover {\n  border-color: #8b5cf6;\n  box-shadow: 0 8px 32px rgba(139, 92, 246, 0.3);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]:hover   .card-icon[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_aiGlow 2s ease-in-out infinite;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]   .card-badge.ai-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n  animation: _ngcontent-%COMP%_pulse 2s ease-in-out infinite;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.wuxia-special[_ngcontent-%COMP%] {\n  border-color: #d4af37;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 69, 19, 0.08) 0%,\n      rgba(212, 175, 55, 0.08) 100%);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.wuxia-special[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #8b4513 0%,\n      #d4af37 100%);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.wuxia-special[_ngcontent-%COMP%]:hover {\n  border-color: #d4af37;\n  box-shadow: 0 8px 32px rgba(212, 175, 55, 0.3);\n  transform: translateY(-4px);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.wuxia-special[_ngcontent-%COMP%]:hover   .card-icon[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_swordGlow 2s ease-in-out infinite;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.wuxia-special[_ngcontent-%COMP%]   .card-badge.wuxia-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8b4513 0%,\n      #d4af37 100%);\n  color: #fff;\n  font-weight: 600;\n  animation: _ngcontent-%COMP%_pulse 2s ease-in-out infinite;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px var(--shadow);\n  border-color: var(--accent-primary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover::before {\n  transform: scaleX(1);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover   .card-icon[_ngcontent-%COMP%] {\n  transform: scale(1.15);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%] {\n  font-size: 3rem;\n  margin-bottom: 16px;\n  transition: all 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 1.4rem;\n  font-weight: 700;\n  margin-bottom: 8px;\n  color: var(--text-primary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  font-size: 1rem;\n  color: var(--text-secondary);\n  margin-bottom: 16px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .card-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 6px 14px;\n  background: var(--accent-primary);\n  color: white;\n  border-radius: 20px;\n  font-size: 0.85rem;\n  font-weight: 700;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .generation-progress[_ngcontent-%COMP%] {\n  margin-top: 24px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 92, 246, 0.1) 0%,\n      rgba(236, 72, 153, 0.1) 100%);\n  border: 1px solid #8b5cf6;\n  border-radius: 16px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .generation-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  justify-content: center;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .generation-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-spinner[_ngcontent-%COMP%] {\n  width: 32px;\n  height: 32px;\n  border: 3px solid rgba(139, 92, 246, 0.2);\n  border-top-color: #8b5cf6;\n  border-radius: 50%;\n  animation: _ngcontent-%COMP%_spin 1s linear infinite;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .generation-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%] {\n  margin-bottom: 32px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 2rem;\n  font-weight: 700;\n  margin-bottom: 8px;\n  color: var(--text-primary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  color: var(--text-secondary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 24px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%] {\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 16px;\n  padding: 24px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-6px);\n  box-shadow: 0 8px 24px var(--shadow);\n  border-color: var(--accent-primary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]:hover   .novel-icon[_ngcontent-%COMP%] {\n  transform: scale(1.15) rotate(5deg);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-icon[_ngcontent-%COMP%] {\n  font-size: 3rem;\n  transition: all 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty[_ngcontent-%COMP%] {\n  padding: 6px 12px;\n  border-radius: 16px;\n  font-size: 0.8rem;\n  font-weight: 700;\n  text-transform: uppercase;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty.difficulty-easy[_ngcontent-%COMP%] {\n  background: rgba(16, 185, 129, 0.1);\n  color: #10b981;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty.difficulty-normal[_ngcontent-%COMP%] {\n  background: rgba(245, 158, 11, 0.1);\n  color: #f59e0b;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty.difficulty-hard[_ngcontent-%COMP%] {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 1.4rem;\n  font-weight: 700;\n  margin-bottom: 8px;\n  color: var(--text-primary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-genre[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: var(--accent-primary);\n  font-weight: 600;\n  text-transform: uppercase;\n  margin-bottom: 12px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-description[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  color: var(--text-secondary);\n  line-height: 1.5;\n  margin-bottom: 16px;\n  min-height: 44px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-stats[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n  padding-top: 12px;\n  border-top: 1px solid var(--border-color);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.9rem;\n  color: var(--text-secondary);\n  font-weight: 600;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%] {\n  padding: 20px 16px;\n  padding-top: 80px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%] {\n  margin-bottom: 40px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%] {\n  flex-direction: column;\n  gap: 16px;\n  margin-bottom: 32px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  font-size: 2rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%] {\n  font-size: 1rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%] {\n  position: static;\n  width: 100%;\n  flex-direction: column;\n  gap: 10px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%] {\n  width: 100%;\n  justify-content: center;\n  padding: 12px 16px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%] {\n  width: 100%;\n  justify-content: center;\n  padding: 14px 20px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%] {\n  gap: 16px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%] {\n  padding: 24px 20px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%] {\n  font-size: 2.5rem;\n  margin-bottom: 12px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%] {\n  margin-bottom: 24px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 1.5rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%] {\n  grid-template-columns: 1fr;\n  gap: 16px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%] {\n  padding: 20px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-icon[_ngcontent-%COMP%] {\n  font-size: 2.5rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-description[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-layout[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: row;\n  min-height: 100vh;\n  position: relative;\n  background: var(--bg-secondary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 70px;\n  height: calc(100vh - 70px);\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  z-index: 999;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  box-shadow: 0 2px 8px var(--shadow);\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.collapsed[_ngcontent-%COMP%]:hover, \n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container.collapsed[_ngcontent-%COMP%]:hover {\n  transform: translateX(0) !important;\n  box-shadow: 0 4px 16px var(--shadow);\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.mobile[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container.mobile[_ngcontent-%COMP%] {\n  top: 50px;\n  height: calc(100vh - 50px);\n  width: 85vw;\n  max-width: 320px;\n  z-index: 2000;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.mobile.collapsed[_ngcontent-%COMP%]:hover, \n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container.mobile.collapsed[_ngcontent-%COMP%]:hover {\n  transform: translateX(-100%) !important;\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.mobile.collapsed.left-panel-container[_ngcontent-%COMP%]:hover, \n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container.mobile.collapsed.left-panel-container[_ngcontent-%COMP%]:hover {\n  transform: translateX(-100%) !important;\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.mobile.collapsed.right-panel-container[_ngcontent-%COMP%]:hover, \n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container.mobile.collapsed.right-panel-container[_ngcontent-%COMP%]:hover {\n  transform: translateX(100%) !important;\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.mobile[_ngcontent-%COMP%]:not(.collapsed), \n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container.mobile[_ngcontent-%COMP%]:not(.collapsed) {\n  transform: translateX(0) !important;\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%] {\n  height: 100%;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar, \n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 6px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track, \n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, \n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, \n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: var(--text-secondary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%] {\n  left: 0;\n  width: 280px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.collapsed[_ngcontent-%COMP%] {\n  transform: translateX(-100%);\n}\n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%] {\n  right: 0;\n  width: 280px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .right-panel-container.collapsed[_ngcontent-%COMP%] {\n  transform: translateX(100%);\n}\n.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%] {\n  padding: 30px 15px;\n  cursor: pointer;\n  text-align: center;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  transition: background 0.2s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .collapse-icon[_ngcontent-%COMP%] {\n  font-size: 2rem;\n  margin-bottom: 20px;\n  color: var(--accent-primary);\n  transition: transform 0.2s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .collapse-text[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n  writing-mode: vertical-rl;\n  letter-spacing: 2px;\n  color: var(--text-secondary);\n  font-weight: 600;\n  text-transform: uppercase;\n}\n.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]:hover {\n  background: var(--bg-secondary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]:hover   .collapse-icon[_ngcontent-%COMP%] {\n  transform: scale(1.1);\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%] {\n  padding: 20px 24px;\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%] {\n    padding: 16px 20px;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n  }\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 1.2rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n}\n@media (max-width: 768px) {\n  .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n    font-size: 1.1rem;\n  }\n}\n@media (max-width: 480px) {\n  .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n    font-size: 1rem;\n    letter-spacing: 0.5px;\n  }\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  background: transparent;\n  border: 1px solid var(--border-color);\n  color: var(--text-primary);\n  font-size: 1.3rem;\n  cursor: pointer;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n@media (max-width: 768px) {\n  .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n    width: 40px;\n    height: 40px;\n    font-size: 1.5rem;\n  }\n}\n@media (max-width: 480px) {\n  .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n    width: 44px;\n    height: 44px;\n  }\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: var(--bg-secondary);\n  border-color: var(--accent-primary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] {\n  padding: 20px;\n}\n@media (max-width: 768px) {\n  .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] {\n    padding: 16px;\n  }\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 14px 16px;\n  margin-bottom: 10px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  cursor: pointer;\n  text-align: left;\n  font-size: 1rem;\n  font-weight: 500;\n  color: var(--text-primary);\n  transition: all 0.3s ease;\n}\n@media (max-width: 768px) {\n  .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%] {\n    padding: 16px 18px;\n    margin-bottom: 12px;\n    font-size: 1.05rem;\n    min-height: 52px;\n    display: flex;\n    align-items: center;\n  }\n}\n@media (max-width: 480px) {\n  .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%] {\n    padding: 18px 20px;\n    min-height: 56px;\n  }\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover {\n  background: var(--bg-primary);\n  border-color: var(--accent-primary);\n  transform: translateX(4px);\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%] {\n  margin-top: 14px;\n  padding: 14px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  padding: 8px 0;\n  border-bottom: 1px solid rgba(148, 163, 184, 0.05);\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child, \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child, \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child, \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child, \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child, \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child {\n  border-bottom: none;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-weight: 500;\n  font-size: 0.9rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-weight: 600;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%] {\n  color: var(--accent-primary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-size: 1rem;\n  font-weight: 700;\n  margin: 24px 0 12px 0;\n  padding-bottom: 8px;\n  border-bottom: 1px solid var(--border-color);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  padding: 10px 14px;\n  margin-bottom: 8px;\n  background: var(--bg-secondary);\n  border-radius: 6px;\n  border-left: 2px solid var(--accent-primary);\n  transition: all 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:hover {\n  background: var(--bg-primary);\n  border-left-width: 3px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-weight: 600;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%] {\n  display: block;\n  color: var(--text-secondary);\n  margin-bottom: 8px;\n  font-weight: 500;\n  font-size: 0.9rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%] {\n  height: 20px;\n  background: var(--bg-secondary);\n  border-radius: 10px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n  margin-bottom: 6px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background: var(--accent-primary);\n  transition: width 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%] {\n  text-align: right;\n  color: var(--text-secondary);\n  font-size: 0.85rem;\n  font-weight: 600;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  padding: 10px 14px;\n  margin-bottom: 8px;\n  background: var(--bg-secondary);\n  border-radius: 6px;\n  border-left: 2px solid var(--accent-primary);\n  transition: all 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]:hover {\n  background: var(--bg-primary);\n  border-left-width: 3px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%] {\n  font-size: 1.5rem;\n  margin-right: 10px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  flex: 1;\n  color: var(--text-primary);\n  font-weight: 500;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%] {\n  color: var(--accent-primary);\n  font-weight: 600;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%] {\n  text-align: center;\n  color: var(--text-secondary);\n  padding: 24px;\n  font-style: italic;\n  font-size: 0.9rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 12px 18px;\n  margin-bottom: 10px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  cursor: pointer;\n  color: var(--text-primary);\n  font-weight: 500;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]:hover {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px var(--shadow);\n}\n.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%] {\n  flex: 1;\n  position: relative;\n  transition: all 0.3s ease;\n  margin-left: 0;\n  margin-right: 0;\n  margin-top: 70px;\n  overflow-y: auto;\n  height: calc(100vh - 70px);\n  background: var(--bg-primary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .main-content-area.mobile[_ngcontent-%COMP%] {\n  margin-top: 50px;\n  height: calc(100vh - 50px);\n}\n.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 8px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 4px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: var(--text-secondary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 70px;\n  z-index: 1001;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  padding: 12px 32px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.1);\n  gap: 16px;\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  overflow: hidden;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: -50%;\n  right: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    radial-gradient(\n      circle,\n      rgba(255, 255, 255, 0.1) 0%,\n      transparent 70%);\n  animation: _ngcontent-%COMP%_headerGlow 8s ease-in-out infinite;\n  pointer-events: none;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 2px;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.5) 50%,\n      transparent 100%);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%] {\n  padding: 12px 16px;\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  color: white;\n  position: relative;\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 50px;\n  height: 50px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  transition: all 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.25);\n  border-color: rgba(255, 255, 255, 0.4);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%] {\n  transform: scale(1.1);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(0) scale(0.95);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%] {\n  padding: 10px 20px;\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  cursor: pointer;\n  font-size: 1rem;\n  font-weight: 700;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  color: white;\n  white-space: nowrap;\n  position: relative;\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  height: 50px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  transition: all 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.25);\n  border-color: rgba(255, 255, 255, 0.4);\n  transform: translateX(-3px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%] {\n  transform: scale(1.1);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]:active {\n  transform: translateX(0) scale(0.95);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 10px;\n  align-items: center;\n  position: relative;\n  z-index: 1;\n  flex: 1;\n  justify-content: center;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%] {\n  padding: 10px 16px;\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  cursor: pointer;\n  font-size: 0.95rem;\n  font-weight: 700;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  color: white;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  white-space: nowrap;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  transition: all 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn[_ngcontent-%COMP%]:hover, \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn[_ngcontent-%COMP%]:hover, \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]:hover, \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn[_ngcontent-%COMP%]:hover, \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.25);\n  border-color: rgba(255, 255, 255, 0.4);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%] {\n  transform: scale(1.15);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn[_ngcontent-%COMP%]:active, \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn[_ngcontent-%COMP%]:active, \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]:active, \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn[_ngcontent-%COMP%]:active, \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(0) scale(0.95);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn.active[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn.active[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn.active[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn.active[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn.active[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-color: transparent;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_pulse 2s ease-in-out infinite;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.3) 0%,\n      rgba(218, 165, 32, 0.3) 100%);\n  border-color: rgba(255, 215, 0, 0.5);\n  box-shadow: 0 6px 20px rgba(255, 215, 0, 0.3);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn.active[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #FFD700 0%,\n      #DAA520 100%);\n  box-shadow: 0 4px 16px rgba(255, 215, 0, 0.5);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.3) 0%,\n      rgba(46, 125, 50, 0.3) 100%);\n  border-color: rgba(76, 175, 80, 0.5);\n  box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn.active[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #4CAF50 0%,\n      #2E7D32 100%);\n  box-shadow: 0 4px 16px rgba(76, 175, 80, 0.5);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 0, 0, 0.4) 0%,\n      rgba(178, 34, 34, 0.4) 100%);\n  border-color: rgba(139, 0, 0, 0.6);\n  box-shadow: 0 6px 20px rgba(139, 0, 0, 0.4);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn.active[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8B0000 0%,\n      #B22222 100%);\n  box-shadow: 0 4px 16px rgba(139, 0, 0, 0.6);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%] {\n  padding: 12px 16px;\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  color: white;\n  min-width: 50px;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  transition: all 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]:hover {\n  background: rgba(239, 68, 68, 0.25);\n  border-color: rgba(239, 68, 68, 0.4);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(239, 68, 68, 0.3);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%] {\n  transform: translateX(3px) scale(1.1);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]:active {\n  transform: translateY(0) scale(0.95);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%] {\n  height: 50px;\n  padding: 8px 12px;\n  gap: 8px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%] {\n  min-width: 40px;\n  height: 40px;\n  padding: 8px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  display: none;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], \n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  width: 20px;\n  height: 20px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%] {\n  gap: 6px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  min-width: 40px;\n  height: 40px;\n  padding: 8px;\n  font-size: 0.85rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  display: none;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  width: 18px;\n  height: 18px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%] {\n  min-width: 48px;\n  height: 48px;\n  padding: 10px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 0, 0, 0.3),\n      rgba(178, 34, 34, 0.3));\n  border: 2px solid rgba(139, 0, 0, 0.5);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  width: 24px;\n  height: 24px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  display: none;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .mobile-actions[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  min-width: 48px !important;\n  height: 48px !important;\n  padding: 10px !important;\n  border-radius: 12px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  width: 22px !important;\n  height: 22px !important;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .mobile-actions[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 0, 0, 0.4),\n      rgba(178, 34, 34, 0.4)) !important;\n  border: 2px solid rgba(220, 38, 38, 0.6) !important;\n  box-shadow: 0 2px 8px rgba(139, 0, 0, 0.3);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .mobile-actions[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  stroke-width: 2.5;\n  filter: drop-shadow(0 0 2px rgba(220, 38, 38, 0.5));\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .mobile-actions[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]:active {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(185, 28, 28, 0.5),\n      rgba(220, 38, 38, 0.5)) !important;\n  transform: scale(0.95);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .player-stats-compact[_ngcontent-%COMP%] {\n  gap: 8px;\n  font-size: 0.8rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .player-stats-compact[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n  padding: 4px 8px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .player-stats-compact[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .player-stats-compact[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  display: none;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%] {\n  max-width: 900px;\n  margin: 0 auto;\n  padding: 40px;\n  min-height: calc(100vh - 62px);\n  padding-bottom: 100px;\n}\n@media (max-width: 768px) {\n  .novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%] {\n    padding: 24px 16px;\n    padding-bottom: 80px;\n  }\n}\n@media (max-width: 480px) {\n  .novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%] {\n    padding: 20px 12px;\n    padding-bottom: 60px;\n  }\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 48px 0 48px;\n  margin-bottom: 48px;\n  position: relative;\n  overflow: hidden;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 120%;\n  height: 100%;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.08) 0%,\n      rgba(118, 75, 162, 0.08) 100%);\n  border-radius: 24px;\n  z-index: 0;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 80%;\n  height: 3px;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      #667eea 20%,\n      #764ba2 50%,\n      #667eea 80%,\n      transparent 100%);\n  border-radius: 3px;\n  box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);\n  animation: _ngcontent-%COMP%_lineGlow 3s ease-in-out infinite;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  font-size: 2.8rem;\n  font-weight: 800;\n  margin: 0;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  letter-spacing: -1px;\n  text-shadow: 0 2px 20px rgba(102, 126, 234, 0.3);\n  position: relative;\n  z-index: 1;\n  padding: 0 24px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]::before {\n  content: "\\1f4d6";\n  position: absolute;\n  left: -20px;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 2rem;\n  opacity: 0.7;\n  animation: _ngcontent-%COMP%_bookFloat 3s ease-in-out infinite;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]::after {\n  content: "\\2728";\n  position: absolute;\n  right: -20px;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 1.5rem;\n  opacity: 0.7;\n  animation: _ngcontent-%COMP%_sparkle 2s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_lineGlow {\n  0%, 100% {\n    opacity: 0.6;\n    box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);\n  }\n  50% {\n    opacity: 1;\n    box-shadow: 0 0 30px rgba(102, 126, 234, 0.8);\n  }\n}\n@keyframes _ngcontent-%COMP%_bookFloat {\n  0%, 100% {\n    transform: translateY(-50%) translateX(0);\n  }\n  50% {\n    transform: translateY(-50%) translateX(-5px);\n  }\n}\n@keyframes _ngcontent-%COMP%_sparkle {\n  0%, 100% {\n    opacity: 0.7;\n    transform: translateY(-50%) rotate(0deg);\n  }\n  50% {\n    opacity: 1;\n    transform: translateY(-50%) rotate(180deg);\n  }\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%] {\n  margin-bottom: 28px;\n  padding: 28px;\n  background: #ffffff;\n  border-radius: 12px;\n  border: 1px solid #e0e0e0;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]:hover {\n  border-color: var(--accent-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  line-height: 1.8;\n  color: #1a1a1a;\n  margin: 14px 0;\n  text-align: justify;\n}\n@media (max-width: 768px) {\n  .novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%] {\n    padding: 20px;\n    margin-bottom: 20px;\n    border-radius: 10px;\n  }\n  .novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n    font-size: 1rem;\n    line-height: 1.8;\n    margin: 12px 0;\n  }\n}\n@media (max-width: 480px) {\n  .novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%] {\n    padding: 16px;\n    margin-bottom: 16px;\n  }\n  .novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n    font-size: 0.95rem;\n    line-height: 1.75;\n  }\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%] {\n  background: #f8fafc;\n  border: 1px solid var(--accent-primary);\n  border-left-width: 4px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-weight: 600;\n  font-size: 1.05rem;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%] {\n  font-size: 1.4rem;\n  color: var(--accent-primary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  text-align: center;\n  color: var(--text-secondary);\n  font-size: 1.6rem;\n  font-weight: 700;\n  margin: 40px 0 28px;\n  text-transform: uppercase;\n  letter-spacing: 1.5px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 20px 28px;\n  margin: 14px 0;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 10px;\n  color: var(--text-primary);\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  text-align: left;\n  position: relative;\n  overflow: hidden;\n}\n@media (max-width: 768px) {\n  .novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    min-height: var(--button-height-tablet);\n    padding: 16px 24px;\n    font-size: var(--font-md);\n  }\n}\n@media (max-width: 480px) {\n  .novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    min-height: var(--button-height-mobile);\n    padding: 18px 24px;\n    font-size: var(--font-lg);\n  }\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  background: var(--accent-primary);\n  transform: scaleY(0);\n  transition: transform 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\n  background: var(--bg-secondary);\n  border-color: var(--accent-primary);\n  transform: translateX(8px);\n  box-shadow: 0 4px 12px var(--shadow);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover::before {\n  transform: scaleY(1);\n}\n.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active {\n  transform: translateX(8px) scale(0.98);\n}\n.novel-book-container[_ngcontent-%COMP%]   .panel-backdrop[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.75);\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n  z-index: 1999;\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease-in-out;\n  cursor: pointer;\n}\n.novel-book-container[_ngcontent-%COMP%]   .panel-backdrop.mobile[_ngcontent-%COMP%] {\n  background: rgba(0, 0, 0, 0.85);\n  -webkit-backdrop-filter: blur(6px);\n  backdrop-filter: blur(6px);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  transform: none !important;\n  background: var(--bg-primary);\n  border: none;\n  border-radius: 0 !important;\n  z-index: 2000;\n  box-shadow: none;\n  overflow: hidden;\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease-out;\n  display: flex;\n  flex-direction: column;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%] {\n  padding: 20px 48px;\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 2px solid var(--border-color);\n  flex-shrink: 0;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 1.8rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  background: transparent;\n  border: 1px solid var(--border-color);\n  color: var(--text-primary);\n  font-size: 1.8rem;\n  cursor: pointer;\n  width: 42px;\n  height: 42px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n  transform: rotate(90deg);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] {\n  padding: 40px 60px;\n  flex: 1;\n  overflow-y: auto;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 6px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: var(--text-secondary);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\n  padding: 16px 20px;\n  margin: 12px 0;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  border-left: 3px solid var(--accent-primary);\n  color: var(--text-primary);\n  font-size: 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  transition: all 0.3s ease;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]:hover {\n  background: var(--bg-primary);\n  border-left-width: 4px;\n  transform: translateX(4px);\n  box-shadow: 0 2px 8px var(--shadow);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  background: var(--accent-primary);\n  border: none;\n  border-radius: 6px;\n  color: white;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin-left: 10px;\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\n  background: var(--accent-secondary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  transform: none;\n}\n.character-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] {\n  padding: 0;\n}\n.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%] {\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary),\n      var(--bg-primary));\n  border-bottom: 2px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%] {\n    padding: 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%] {\n    padding: 24px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%] {\n    gap: 16px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%] {\n    gap: 20px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%] {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background:\n    linear-gradient(\n      135deg,\n      var(--primary-color),\n      var(--primary-dark));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%] {\n    width: 72px;\n    height: 72px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%] {\n    width: 88px;\n    height: 88px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .avatar-icon[_ngcontent-%COMP%] {\n  font-size: 40px;\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .avatar-icon[_ngcontent-%COMP%] {\n    font-size: 36px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .avatar-icon[_ngcontent-%COMP%] {\n    font-size: 44px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  margin: 0 0 8px 0;\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n    font-size: 22px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n    font-size: 26px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 4px 12px;\n  background: var(--primary-color);\n  color: white;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 700;\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%] {\n    padding: 5px 14px;\n    font-size: 15px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%] {\n    padding: 6px 16px;\n    font-size: 16px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%] {\n  padding: 20px 24px;\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%] {\n    padding: 18px 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%] {\n    padding: 20px 24px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-label[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 8px;\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-label[_ngcontent-%COMP%] {\n    font-size: 14px;\n    margin-bottom: 10px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-label[_ngcontent-%COMP%] {\n    font-size: 15px;\n    margin-bottom: 12px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-label[_ngcontent-%COMP%]   .exp-values[_ngcontent-%COMP%] {\n  color: var(--primary-color);\n}\n.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%] {\n  height: 20px;\n  background: var(--bg-primary);\n  border-radius: 10px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n  margin-bottom: 4px;\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%] {\n    height: 24px;\n    margin-bottom: 6px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%] {\n    height: 28px;\n    margin-bottom: 8px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #ffd700,\n      #ffa500);\n  transition: width 0.3s ease;\n  box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.3);\n}\n.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-percentage[_ngcontent-%COMP%] {\n  text-align: right;\n  font-size: 11px;\n  color: var(--text-secondary);\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-percentage[_ngcontent-%COMP%] {\n    font-size: 12px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-percentage[_ngcontent-%COMP%] {\n    font-size: 13px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%] {\n  padding: 20px 24px;\n  background: var(--bg-primary);\n  border-bottom: 1px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%] {\n    padding: 18px 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%] {\n    padding: 20px 24px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%] {\n  margin-bottom: 16px;\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%] {\n    margin-bottom: 18px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%] {\n    margin-bottom: 20px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]:last-child {\n  margin-bottom: 0;\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 6px;\n  font-size: 14px;\n  font-weight: 600;\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%] {\n    font-size: 15px;\n    margin-bottom: 8px;\n    gap: 10px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%] {\n    font-size: 16px;\n    margin-bottom: 10px;\n    gap: 12px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\n    font-size: 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\n    font-size: 22px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%] {\n  margin-left: auto;\n  color: var(--text-secondary);\n  font-size: 13px;\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%] {\n    font-size: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%] {\n    font-size: 15px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%] {\n  height: 16px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%] {\n    height: 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%] {\n    height: 24px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  transition: width 0.3s ease, background 0.3s ease;\n  box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.2);\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill.low[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444,\n      #dc2626);\n  animation: _ngcontent-%COMP%_pulse 1s infinite;\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill.medium[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #f59e0b,\n      #d97706);\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item.hp[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444,\n      #dc2626);\n}\n.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item.mp[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6,\n      #2563eb);\n}\n@keyframes _ngcontent-%COMP%_pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.7;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%] {\n  padding: 20px 24px;\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%] {\n    padding: 18px 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%] {\n    padding: 20px 24px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 16px;\n  padding-bottom: 8px;\n  border-bottom: 2px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n    font-size: 17px;\n    margin-bottom: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n    font-size: 18px;\n    margin-bottom: 18px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%] {\n    gap: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%] {\n    gap: 16px;\n    grid-template-columns: 1fr;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n    padding: 14px;\n    gap: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n    padding: 16px;\n    gap: 16px;\n    min-height: 64px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:hover {\n  border-color: var(--primary-color);\n  transform: translateX(2px);\n}\n.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 24px;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-secondary);\n  border-radius: 6px;\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n    font-size: 26px;\n    width: 40px;\n    height: 40px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n    font-size: 28px;\n    width: 44px;\n    height: 44px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-name[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  margin-bottom: 2px;\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-name[_ngcontent-%COMP%] {\n    font-size: 13px;\n    margin-bottom: 4px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-name[_ngcontent-%COMP%] {\n    font-size: 14px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n@media (max-width: 768px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n    font-size: 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n    font-size: 22px;\n  }\n}\n.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%] {\n  padding: 20px 24px;\n  background: var(--bg-primary);\n  border-bottom: 1px solid var(--border-color);\n}\n.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 16px;\n  padding-bottom: 8px;\n  border-bottom: 2px solid var(--border-color);\n}\n.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 12px;\n}\n.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  padding: 12px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  border: 2px solid var(--border-color);\n}\n.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item.gold[_ngcontent-%COMP%] {\n  border-color: rgba(255, 215, 0, 0.5);\n}\n.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item.gem[_ngcontent-%COMP%] {\n  border-color: rgba(138, 43, 226, 0.5);\n}\n.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item.crystal[_ngcontent-%COMP%] {\n  border-color: rgba(0, 191, 255, 0.5);\n}\n.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item.ticket[_ngcontent-%COMP%] {\n  border-color: rgba(255, 105, 180, 0.5);\n}\n.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item[_ngcontent-%COMP%]   .currency-mini-icon[_ngcontent-%COMP%] {\n  font-size: 24px;\n}\n.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item[_ngcontent-%COMP%]   .currency-mini-value[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%] {\n  padding: 20px 24px;\n  background: var(--bg-secondary);\n}\n.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 16px;\n  padding-bottom: 8px;\n  border-bottom: 2px solid var(--border-color);\n}\n.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 14px;\n  background: var(--bg-primary);\n  border-radius: 6px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]:hover {\n  border-color: var(--primary-color);\n  transform: translateX(2px);\n}\n.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-level[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--primary-color);\n  padding: 2px 8px;\n  background: var(--bg-secondary);\n  border-radius: 4px;\n}\n.battle-section[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 32px 24px;\n  margin: 24px 0;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 24px;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  margin-bottom: 50px;\n  gap: 50px;\n  flex-wrap: wrap;\n  position: relative;\n  z-index: 1;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%] {\n  flex: 1;\n  min-width: 280px;\n  max-width: 340px;\n  padding: 24px 20px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: visible;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.taking-damage[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_damageShakeStrong 0.5s ease-in-out;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.taking-damage[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 0, 0, 0.3);\n  border-radius: 12px;\n  animation: _ngcontent-%COMP%_damageFlash 0.5s ease-out;\n  pointer-events: none;\n  z-index: 10;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.player.active[_ngcontent-%COMP%] {\n  border-color: #3b82f6;\n  box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3), inset 0 0 0 1px rgba(59, 130, 246, 0.2);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.enemy.active[_ngcontent-%COMP%] {\n  border-color: #ef4444;\n  box-shadow: 0 4px 20px rgba(239, 68, 68, 0.3), inset 0 0 0 1px rgba(239, 68, 68, 0.2);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%] {\n  display: none;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%] {\n  font-size: 1.3rem;\n  font-weight: 600;\n  margin-bottom: 20px;\n  text-align: center;\n  color: var(--text-primary);\n  letter-spacing: 0.5px;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%] {\n  margin-bottom: 16px;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n  font-size: 0.95rem;\n  color: var(--text-secondary);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  font-weight: 600;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-weight: 500;\n  color: var(--text-primary);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%], \n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%] {\n  margin-bottom: 12px;\n  position: relative;\n  background: transparent;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%], \n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n  background: transparent;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%], \n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%] {\n  font-size: 0.75rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 1.5px;\n  padding: 2px 8px;\n  border-radius: 4px;\n  background: transparent;\n  color: var(--accent-primary);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%], \n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: var(--text-primary);\n  font-weight: 700;\n  font-family: "Courier New", monospace;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%], \n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%] {\n  height: 20px;\n  background: transparent;\n  border-radius: 10px;\n  overflow: hidden;\n  border: 2px solid rgba(255, 255, 255, 0.1);\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.1);\n  position: relative;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]::before, \n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 50%;\n  background:\n    linear-gradient(\n      to bottom,\n      rgba(255, 255, 255, 0.2),\n      transparent);\n  border-radius: 10px 10px 0 0;\n  pointer-events: none;\n  z-index: 2;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%], \n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);\n  border-radius: 8px;\n  position: relative;\n  overflow: hidden;\n  box-shadow: inset 0 -2px 4px rgba(0, 0, 0, 0.3);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]::before, \n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 40%;\n  background:\n    linear-gradient(\n      to bottom,\n      rgba(255, 255, 255, 0.4),\n      transparent);\n  border-radius: 8px 8px 0 0;\n  z-index: 1;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%], \n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ef4444 0%,\n      #dc2626 50%,\n      #ef4444 100%);\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), inset 0 -1px 0 rgba(0, 0, 0, 0.1);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%], \n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #dc2626 0%,\n      #b91c1c 50%,\n      #dc2626 100%);\n  animation: _ngcontent-%COMP%_hpPulseLow 0.8s ease-in-out infinite;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%], \n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6 0%,\n      #2563eb 50%,\n      #3b82f6 100%);\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), inset 0 -1px 0 rgba(0, 0, 0, 0.1);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .vs-indicator[_ngcontent-%COMP%] {\n  font-size: 2rem;\n  font-weight: 700;\n  color: var(--text-secondary);\n  opacity: 0.6;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%] {\n  max-height: 280px;\n  overflow-y: auto;\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n  margin-bottom: 24px;\n  font-family:\n    "Inter",\n    -apple-system,\n    sans-serif;\n  scroll-behavior: smooth;\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 6px;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: transparent;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.3);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%] {\n  padding: 6px 10px;\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n  line-height: 1.5;\n  border-radius: 4px;\n  margin-bottom: 2px;\n  animation: _ngcontent-%COMP%_fadeInUp 0.3s ease-out;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]:last-child {\n  border-bottom: none;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%] {\n  color: #ef4444;\n  font-weight: 600;\n  background: rgba(239, 68, 68, 0.08);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%] {\n  color: #10b981;\n  font-weight: 600;\n  background: rgba(16, 185, 129, 0.08);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.victory[_ngcontent-%COMP%] {\n  color: #fbbf24;\n  font-weight: 700;\n  font-size: 1rem;\n  background: rgba(251, 191, 36, 0.1);\n  padding: 8px;\n  text-align: center;\n  border-radius: 6px;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.defeat[_ngcontent-%COMP%] {\n  color: #6b7280;\n  font-weight: 700;\n  font-size: 1rem;\n  background: rgba(107, 114, 128, 0.1);\n  padding: 8px;\n  text-align: center;\n  border-radius: 6px;\n  opacity: 0.8;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%] {\n  padding: 10px 20px;\n  font-size: 0.95rem;\n  font-weight: 600;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: white;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.attack[_ngcontent-%COMP%] {\n  background: #ef4444;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.attack[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background: #dc2626;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.skill[_ngcontent-%COMP%] {\n  background: #3b82f6;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.skill[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background: #2563eb;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.defend[_ngcontent-%COMP%] {\n  background: #10b981;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.defend[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background: #059669;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.potion[_ngcontent-%COMP%] {\n  background: #8b5cf6;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.potion[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background: #7c3aed;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:active:not(:disabled) {\n  transform: scale(0.95);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 32px 24px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n  margin-top: 16px;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], \n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 1.8rem;\n  font-weight: 700;\n  margin-bottom: 16px;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h2.victory[_ngcontent-%COMP%], \n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3.victory[_ngcontent-%COMP%] {\n  color: #fbbf24;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h2.defeat[_ngcontent-%COMP%], \n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3.defeat[_ngcontent-%COMP%] {\n  color: #6b7280;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 1.6rem;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  color: var(--text-secondary);\n  margin-bottom: 12px;\n  line-height: 1.6;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .auto-continue[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n  color: var(--text-secondary);\n  opacity: 0.7;\n  margin-top: 16px;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .end-battle-btn[_ngcontent-%COMP%] {\n  margin-top: 20px;\n  padding: 10px 24px;\n  font-size: 1rem;\n  font-weight: 600;\n  background: var(--accent-primary);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .end-battle-btn[_ngcontent-%COMP%]:hover {\n  background: var(--accent-secondary);\n}\n.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .end-battle-btn[_ngcontent-%COMP%]:active {\n  transform: scale(0.95);\n}\n@keyframes _ngcontent-%COMP%_pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.6;\n  }\n}\n@keyframes _ngcontent-%COMP%_fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(5px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n@keyframes _ngcontent-%COMP%_fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n@keyframes _ngcontent-%COMP%_spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_aiGlow {\n  0%, 100% {\n    filter: drop-shadow(0 0 8px rgba(139, 92, 246, 0.5));\n  }\n  50% {\n    filter: drop-shadow(0 0 16px rgba(236, 72, 153, 0.8));\n  }\n}\n@keyframes _ngcontent-%COMP%_swordGlow {\n  0%, 100% {\n    filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.5));\n    transform: rotate(0deg);\n  }\n  50% {\n    filter: drop-shadow(0 0 16px rgba(212, 175, 55, 0.8));\n    transform: rotate(5deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_battlePulse {\n  0%, 100% {\n    transform: translate(-50%, -50%) scale(1);\n    opacity: 0.5;\n  }\n  50% {\n    transform: translate(-50%, -50%) scale(1.2);\n    opacity: 0.3;\n  }\n}\n@keyframes _ngcontent-%COMP%_playerGlow {\n  0%, 100% {\n    box-shadow: 0 15px 40px rgba(59, 130, 246, 0.6), 0 0 30px rgba(59, 130, 246, 0.4);\n  }\n  50% {\n    box-shadow: 0 15px 40px rgba(59, 130, 246, 0.8), 0 0 40px rgba(59, 130, 246, 0.6);\n  }\n}\n@keyframes _ngcontent-%COMP%_enemyGlow {\n  0%, 100% {\n    box-shadow: 0 15px 40px rgba(239, 68, 68, 0.6), 0 0 30px rgba(239, 68, 68, 0.4);\n  }\n  50% {\n    box-shadow: 0 15px 40px rgba(239, 68, 68, 0.8), 0 0 40px rgba(239, 68, 68, 0.6);\n  }\n}\n@keyframes _ngcontent-%COMP%_float {\n  0%, 100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n@keyframes _ngcontent-%COMP%_hpPulseLow {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.7;\n  }\n}\n@keyframes _ngcontent-%COMP%_shimmerFlow {\n  0% {\n    transform: translateX(-100%);\n  }\n  100% {\n    transform: translateX(200%);\n  }\n}\n@keyframes _ngcontent-%COMP%_damageShakeStrong {\n  0%, 100% {\n    transform: translateX(0) rotate(0deg);\n  }\n  10% {\n    transform: translateX(-10px) rotate(-2deg);\n  }\n  20% {\n    transform: translateX(10px) rotate(2deg);\n  }\n  30% {\n    transform: translateX(-10px) rotate(-2deg);\n  }\n  40% {\n    transform: translateX(10px) rotate(2deg);\n  }\n  50% {\n    transform: translateX(-8px) rotate(-1deg);\n  }\n  60% {\n    transform: translateX(8px) rotate(1deg);\n  }\n  70% {\n    transform: translateX(-5px) rotate(-0.5deg);\n  }\n  80% {\n    transform: translateX(5px) rotate(0.5deg);\n  }\n  90% {\n    transform: translateX(-2px) rotate(0deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_damageFlash {\n  0% {\n    opacity: 0;\n  }\n  10% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n@keyframes _ngcontent-%COMP%_damageNumber {\n  0% {\n    transform: translateY(0) scale(0.5);\n    opacity: 0;\n  }\n  20% {\n    transform: translateY(-20px) scale(1.2);\n    opacity: 1;\n  }\n  80% {\n    transform: translateY(-60px) scale(1);\n    opacity: 1;\n  }\n  100% {\n    transform: translateY(-80px) scale(0.8);\n    opacity: 0;\n  }\n}\n@keyframes _ngcontent-%COMP%_vsGlow {\n  0%, 100% {\n    filter: drop-shadow(0 0 20px rgba(59, 130, 246, 0.6));\n    transform: scale(1);\n  }\n  50% {\n    filter: drop-shadow(0 0 30px rgba(59, 130, 246, 0.9));\n    transform: scale(1.1);\n  }\n}\n@keyframes _ngcontent-%COMP%_sparkle {\n  0%, 100% {\n    opacity: 0.5;\n    transform: rotate(0deg) scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: rotate(180deg) scale(1.2);\n  }\n}\n@keyframes _ngcontent-%COMP%_damageShake {\n  0%, 100% {\n    transform: translateX(0);\n  }\n  25% {\n    transform: translateX(-3px);\n  }\n  75% {\n    transform: translateX(3px);\n  }\n}\n@keyframes _ngcontent-%COMP%_healPulse {\n  0%, 100% {\n    transform: scale(1);\n    box-shadow: 0 0 0 rgba(16, 185, 129, 0);\n  }\n  50% {\n    transform: scale(1.05);\n    box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);\n  }\n}\n@keyframes _ngcontent-%COMP%_victoryFlash {\n  0%, 100% {\n    opacity: 1;\n    box-shadow: 0 0 10px rgba(251, 191, 36, 0.5);\n  }\n  50% {\n    opacity: 0.8;\n    box-shadow: 0 0 20px rgba(251, 191, 36, 0.8);\n  }\n}\n@keyframes _ngcontent-%COMP%_resultGlow {\n  0%, 100% {\n    opacity: 0.3;\n  }\n  50% {\n    opacity: 0.6;\n  }\n}\n@keyframes _ngcontent-%COMP%_victoryBounce {\n  0%, 100% {\n    transform: translateY(0) scale(1);\n  }\n  50% {\n    transform: translateY(-10px) scale(1.05);\n  }\n}\n@keyframes _ngcontent-%COMP%_celebrate {\n  0%, 100% {\n    transform: translateY(0) rotate(0deg);\n  }\n  50% {\n    transform: translateY(-15px) rotate(360deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_blink {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.4;\n  }\n}\n@keyframes _ngcontent-%COMP%_spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_slideInUp {\n  from {\n    opacity: 0;\n    transform: translate(-50%, -45%);\n  }\n  to {\n    opacity: 1;\n    transform: translate(-50%, -50%);\n  }\n}\n  .battle-modal-backdrop {\n  background-color: rgba(0, 0, 0, 0.75) !important;\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease-in-out;\n}\n  .cdk-overlay-dark-backdrop {\n  background-color: rgba(0, 0, 0, 0.75) !important;\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n}\n@keyframes _ngcontent-%COMP%_fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  max-width: 100%;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 30px;\n  padding: 20px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 1.4rem;\n  margin-bottom: 12px;\n  color: var(--accent-primary);\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 1rem;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16px;\n  margin-bottom: 40px;\n  width: 100%;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%] {\n  padding: 16px 24px;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn.primary[_ngcontent-%COMP%] {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn.primary[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background: var(--accent-secondary);\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%] {\n  padding: 16px;\n  background: var(--danger);\n  color: white;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  text-align: center;\n  font-weight: 600;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%] {\n  margin-top: 30px;\n  background: var(--bg-secondary);\n  padding: 28px;\n  border-radius: 12px;\n  border: 2px solid var(--accent-primary);\n  animation: _ngcontent-%COMP%_slideInUp 0.4s ease-out;\n  width: 100%;\n  box-sizing: border-box;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]    > h4[_ngcontent-%COMP%] {\n  text-align: center;\n  font-size: 1.5rem;\n  margin-bottom: 24px;\n  color: var(--accent-primary);\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-bottom: 24px;\n  width: 100%;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  padding: 12px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: var(--text-secondary);\n  margin-right: 12px;\n  min-width: 60px;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  color: var(--text-primary);\n  font-weight: 500;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-description[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-description[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  margin-bottom: 12px;\n  color: var(--accent-primary);\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  padding: 16px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  line-height: 1.6;\n  color: var(--text-primary);\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%], \n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], \n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  margin-bottom: 12px;\n  color: var(--accent-primary);\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .abilities-list[_ngcontent-%COMP%], \n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .traits-list[_ngcontent-%COMP%], \n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .abilities-list[_ngcontent-%COMP%], \n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .traits-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .ability-tag[_ngcontent-%COMP%], \n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .trait-tag[_ngcontent-%COMP%], \n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .ability-tag[_ngcontent-%COMP%], \n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .trait-tag[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  background: var(--bg-primary);\n  border: 2px solid var(--accent-primary);\n  border-radius: 20px;\n  font-weight: 600;\n  color: var(--accent-primary);\n  font-size: 0.95rem;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-top: 30px;\n  width: 100%;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 16px 24px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981 0%,\n      #059669 100%);\n  color: white;\n  border: none;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%] {\n  background: var(--accent-primary);\n  color: white;\n  border: none;\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]:hover {\n  background: var(--accent-secondary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%] {\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  border: 2px solid var(--border-color);\n}\n.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover {\n  border-color: var(--accent-primary);\n  color: var(--accent-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n@keyframes _ngcontent-%COMP%_aiGlow {\n  0%, 100% {\n    filter: drop-shadow(0 0 8px rgba(139, 92, 246, 0.4));\n  }\n  50% {\n    filter: drop-shadow(0 0 16px rgba(236, 72, 153, 0.6));\n  }\n}\n@keyframes _ngcontent-%COMP%_pulse {\n  0%, 100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.85;\n    transform: scale(1.05);\n  }\n}\n.saved-characters-section[_ngcontent-%COMP%] {\n  margin-top: 32px;\n  padding: 0;\n  background: transparent;\n  border: none;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%] {\n  margin-bottom: 24px;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 32px;\n  color: var(--text-primary);\n  margin-bottom: 8px;\n  font-weight: bold;\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #3b82f6 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 16px;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 20px;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 12px var(--shadow);\n  transition: all 0.3s ease;\n  cursor: pointer;\n  border: 2px solid var(--border-color);\n  position: relative;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(139, 92, 246, 0.3);\n  border-color: rgba(139, 92, 246, 0.5);\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: bold;\n  color: var(--text-primary);\n  margin: 0;\n  flex: 1;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 4px 10px;\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6,\n      #a78bfa);\n  color: white;\n  border-radius: 6px;\n  font-size: 13px;\n  font-weight: 700;\n  margin-left: 8px;\n  box-shadow: 0 2px 4px rgba(139, 92, 246, 0.3);\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  color: #ef4444;\n  font-size: 24px;\n  cursor: pointer;\n  padding: 4px 8px;\n  transition: all 0.2s ease;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover {\n  transform: scale(1.2);\n  color: #dc2626;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-meta[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 12px;\n  flex-wrap: wrap;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%] {\n  background: rgba(139, 92, 246, 0.15);\n  color: #a78bfa;\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-desc[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 14px;\n  line-height: 1.6;\n  margin-bottom: 12px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .trait[_ngcontent-%COMP%] {\n  background: rgba(59, 130, 246, 0.15);\n  color: #60a5fa;\n  padding: 4px 12px;\n  border-radius: 10px;\n  font-size: 11px;\n  font-weight: 500;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-currency[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  margin-bottom: 12px;\n  padding: 12px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-currency[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 10px;\n  background: var(--bg-secondary);\n  border-radius: 6px;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-currency[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\n  font-size: 16px;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-currency[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-inventory-badge[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 14px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.15),\n      rgba(139, 92, 246, 0.15));\n  border: 1px solid rgba(139, 92, 246, 0.3);\n  border-radius: 8px;\n  margin-bottom: 12px;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-inventory-badge[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\n  font-size: 16px;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-inventory-badge[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: var(--text-secondary);\n  font-weight: 500;\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-inventory-badge[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--primary-color);\n}\n.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-footer[_ngcontent-%COMP%] {\n  font-size: 11px;\n  color: var(--text-secondary);\n  padding-top: 8px;\n  border-top: 1px solid var(--border-color);\n}\n.saved-scenarios-section[_ngcontent-%COMP%] {\n  margin-top: 32px;\n  padding: 0;\n  background: transparent;\n  border: none;\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  font-size: 32px;\n  color: var(--text-primary);\n  margin-bottom: 24px;\n  font-weight: bold;\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 20px;\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 12px var(--shadow);\n  transition: all 0.3s ease;\n  cursor: pointer;\n  border: 2px solid var(--border-color);\n  position: relative;\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(139, 92, 246, 0.3);\n  border-color: rgba(139, 92, 246, 0.5);\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: bold;\n  color: var(--text-primary);\n  margin: 0;\n  flex: 1;\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  color: #ef4444;\n  font-size: 24px;\n  cursor: pointer;\n  padding: 4px 8px;\n  transition: all 0.2s ease;\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover {\n  transform: scale(1.2);\n  color: #dc2626;\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-description[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 14px;\n  line-height: 1.6;\n  margin-bottom: 16px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-tags[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%] {\n  background: rgba(139, 92, 246, 0.15);\n  color: #a78bfa;\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-meta[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  font-size: 12px;\n  color: var(--text-secondary);\n  padding-top: 12px;\n  border-top: 1px solid var(--border-color);\n}\n.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-meta[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: #a78bfa;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  max-width: 100%;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 32px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 92, 246, 0.05) 0%,\n      rgba(236, 72, 153, 0.05) 100%);\n  border-radius: 16px;\n  border: 2px solid rgba(139, 92, 246, 0.1);\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 24px;\n  color: var(--text-primary);\n  margin-bottom: 12px;\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 16px;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16px;\n  margin-bottom: 40px;\n  width: 100%;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%] {\n  padding: 16px 24px;\n  border: 2px solid var(--border-color);\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn.primary[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n  border-color: transparent;\n  color: white;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(139, 92, 246, 0.3);\n  border-color: #8b5cf6;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%] {\n  background: #fee;\n  color: #c33;\n  padding: 16px;\n  border-radius: 12px;\n  margin-bottom: 24px;\n  border: 2px solid #fcc;\n  text-align: center;\n  font-weight: 500;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%] {\n  margin-top: 30px;\n  background: var(--bg-secondary);\n  border-radius: 20px;\n  padding: 32px;\n  box-shadow: 0 8px 32px var(--shadow);\n  border: 2px solid var(--border-color);\n  width: 100%;\n  box-sizing: border-box;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 24px;\n  color: var(--text-primary);\n  margin-bottom: 24px;\n  text-align: center;\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 24px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 92, 246, 0.05) 0%,\n      rgba(236, 72, 153, 0.05) 100%);\n  border-radius: 16px;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  font-size: 32px;\n  font-weight: bold;\n  color: var(--text-primary);\n  margin: 0;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #8b5cf6;\n  margin-bottom: 8px;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  line-height: 1.8;\n  font-size: 15px;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #8b5cf6;\n  margin-bottom: 8px;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  background: rgba(139, 92, 246, 0.05);\n  border-left: 3px solid #8b5cf6;\n  margin-bottom: 8px;\n  border-radius: 8px;\n  color: var(--text-secondary);\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%] {\n  margin-bottom: 24px;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #8b5cf6;\n  margin-bottom: 12px;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]   .tag-item[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 92, 246, 0.1) 0%,\n      rgba(236, 72, 153, 0.1) 100%);\n  color: #8b5cf6;\n  padding: 6px 16px;\n  border-radius: 20px;\n  font-size: 13px;\n  font-weight: 500;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n  margin-top: 32px;\n  padding-top: 24px;\n  border-top: 2px solid rgba(139, 92, 246, 0.1);\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  flex: 1;\n  padding: 16px 24px;\n  border: none;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981 0%,\n      #059669 100%);\n  color: white;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n  color: white;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b 0%,\n      #d97706 100%);\n  color: white;\n}\n.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);\n}\n.saved-items-section[_ngcontent-%COMP%] {\n  margin-top: 32px;\n  padding: 0;\n  background: transparent;\n  border: none;\n}\n.saved-items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%] {\n  margin-bottom: 24px;\n}\n.saved-items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 32px;\n  color: var(--text-primary);\n  margin-bottom: 8px;\n  font-weight: bold;\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ec4899 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.saved-items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 16px;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border-radius: 16px;\n  padding: 20px;\n  box-shadow: 0 4px 12px var(--shadow);\n  transition: all 0.3s ease;\n  cursor: pointer;\n  border: 2px solid var(--border-color);\n  position: relative;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card.grade-legendary[_ngcontent-%COMP%] {\n  border-color: #ffd700;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.1) 0%,\n      rgba(255, 165, 0, 0.1) 100%);\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card.grade-rare[_ngcontent-%COMP%] {\n  border-color: #a855f7;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(168, 85, 247, 0.1) 0%,\n      rgba(139, 92, 246, 0.1) 100%);\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card.grade-uncommon[_ngcontent-%COMP%] {\n  border-color: #3b82f6;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.1) 0%,\n      rgba(37, 99, 235, 0.1) 100%);\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(255, 215, 0, 0.3);\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 18px;\n  font-weight: bold;\n  color: var(--text-primary);\n  margin: 0;\n  flex: 1;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  color: #ef4444;\n  font-size: 20px;\n  cursor: pointer;\n  padding: 4px;\n  transition: all 0.2s ease;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover {\n  transform: scale(1.2);\n  color: #dc2626;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 13px;\n  line-height: 1.5;\n  margin-bottom: 12px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-bottom: 12px;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%] {\n  background: rgba(16, 185, 129, 0.1);\n  color: #10b981;\n  padding: 4px 10px;\n  border-radius: 8px;\n  font-size: 12px;\n  font-weight: 600;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%] {\n  background: rgba(139, 92, 246, 0.1);\n  color: #8b5cf6;\n  padding: 3px 10px;\n  border-radius: 10px;\n  font-size: 11px;\n  font-weight: 500;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag.type-tag[_ngcontent-%COMP%] {\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag.grade-tag[_ngcontent-%COMP%] {\n  background: rgba(255, 215, 0, 0.2);\n  color: #d97706;\n  font-weight: 600;\n}\n.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%] {\n  font-size: 11px;\n  color: var(--text-secondary);\n  padding-top: 8px;\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 32px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.05) 0%,\n      rgba(236, 72, 153, 0.05) 100%);\n  border-radius: 16px;\n  border: 2px solid rgba(255, 215, 0, 0.2);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 24px;\n  color: var(--text-primary);\n  margin-bottom: 12px;\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ec4899 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 16px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16px;\n  margin-bottom: 40px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%] {\n  padding: 16px 24px;\n  border: 2px solid rgba(255, 215, 0, 0.3);\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.weapon[_ngcontent-%COMP%] {\n  border-color: #ef4444;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.weapon[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(239, 68, 68, 0.1) 0%,\n      rgba(220, 38, 38, 0.1) 100%);\n  border-color: #dc2626;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.armor[_ngcontent-%COMP%] {\n  border-color: #3b82f6;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.armor[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.1) 0%,\n      rgba(37, 99, 235, 0.1) 100%);\n  border-color: #2563eb;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.rare[_ngcontent-%COMP%] {\n  border-color: #a855f7;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.rare[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(168, 85, 247, 0.1) 0%,\n      rgba(139, 92, 246, 0.1) 100%);\n  border-color: #8b5cf6;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.legendary[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff8c00 100%);\n  border-color: transparent;\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.legendary[_ngcontent-%COMP%]:hover:not(:disabled) {\n  box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.consumable[_ngcontent-%COMP%] {\n  border-color: #10b981;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.consumable[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(16, 185, 129, 0.1) 0%,\n      rgba(5, 150, 105, 0.1) 100%);\n  border-color: #059669;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.special[_ngcontent-%COMP%] {\n  border-color: #ec4899;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.special[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(236, 72, 153, 0.1) 0%,\n      rgba(219, 39, 119, 0.1) 100%);\n  border-color: #db2777;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%] {\n  background: #fee;\n  color: #c33;\n  padding: 16px;\n  border-radius: 12px;\n  margin-bottom: 24px;\n  border: 2px solid #fcc;\n  text-align: center;\n  font-weight: 500;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%] {\n  margin-top: 30px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 20px;\n  color: var(--text-primary);\n  margin-bottom: 20px;\n  text-align: center;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 16px;\n  margin-bottom: 20px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  padding: 16px;\n  border: 2px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card.grade-common[_ngcontent-%COMP%] {\n  border-color: #9e9e9e;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card.grade-uncommon[_ngcontent-%COMP%] {\n  border-color: #4caf50;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card.grade-rare[_ngcontent-%COMP%] {\n  border-color: #2196f3;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card.grade-epic[_ngcontent-%COMP%] {\n  border-color: #9c27b0;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card.grade-legendary[_ngcontent-%COMP%] {\n  border-color: #ff9800;\n  box-shadow: 0 0 15px rgba(255, 152, 0, 0.3);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 8px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n  flex: 1;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%] {\n  padding: 2px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  font-weight: 600;\n  white-space: nowrap;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c77c\\bc18[_ngcontent-%COMP%]  {\n  background: #9e9e9e;\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge.grade-\\ace0\\ae09[_ngcontent-%COMP%]  {\n  background: #4caf50;\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge.grade-\\d76c\\adc0[_ngcontent-%COMP%]  {\n  background: #2196f3;\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c601\\c6c5[_ngcontent-%COMP%]  {\n  background: #9c27b0;\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c804\\c124[_ngcontent-%COMP%], \n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c2e0\\d654[_ngcontent-%COMP%]  {\n  background:\n    linear-gradient(\n      135deg,\n      #ff9800,\n      #f44336);\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  margin-bottom: 8px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-description[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: var(--text-primary);\n  line-height: 1.5;\n  margin-bottom: 12px;\n  min-height: 60px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%] {\n  padding: 4px 8px;\n  background: var(--bg-primary);\n  border-radius: 4px;\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-actions[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-actions[_ngcontent-%COMP%]   .save-mini-btn[_ngcontent-%COMP%] {\n  flex: 1;\n  padding: 8px;\n  background: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-actions[_ngcontent-%COMP%]   .save-mini-btn[_ngcontent-%COMP%]:hover {\n  background: var(--primary-dark);\n  transform: scale(1.02);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .save-all-btn[_ngcontent-%COMP%] {\n  padding: 14px 32px;\n  background:\n    linear-gradient(\n      135deg,\n      var(--primary-color),\n      var(--primary-dark));\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 16px;\n  font-weight: 700;\n  cursor: pointer;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  transition: all 0.3s ease;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .save-all-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .save-all-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%] {\n  margin-top: 30px;\n  background: var(--bg-secondary);\n  border-radius: 20px;\n  padding: 32px;\n  box-shadow: var(--shadow);\n  border: 2px solid var(--border-color);\n  width: 100%;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 24px;\n  color: var(--text-primary);\n  margin-bottom: 24px;\n  text-align: center;\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ec4899 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 20px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.1) 0%,\n      rgba(236, 72, 153, 0.1) 100%);\n  border-radius: 16px;\n  position: relative;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title.grade-legendary[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.15) 0%,\n      rgba(255, 165, 0, 0.15) 100%);\n  border: 2px solid rgba(255, 215, 0, 0.5);\n  animation: _ngcontent-%COMP%_legendaryGlow 2s ease-in-out infinite;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  font-size: 28px;\n  font-weight: bold;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 6px 16px;\n  border-radius: 20px;\n  font-size: 13px;\n  font-weight: 600;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c77c\\bc18[_ngcontent-%COMP%]  {\n  background: #9ca3af;\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\ace0\\ae09[_ngcontent-%COMP%]  {\n  background: #3b82f6;\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\d76c\\adc0[_ngcontent-%COMP%]  {\n  background: #a855f7;\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c804\\c124[_ngcontent-%COMP%]  {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff8c00 100%);\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c2e0\\d654[_ngcontent-%COMP%]  {\n  background:\n    linear-gradient(\n      135deg,\n      #ff0080 0%,\n      #7928ca 100%);\n  color: white;\n  animation: _ngcontent-%COMP%_pulse 2s ease-in-out infinite;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-type-info[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 20px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-type-info[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 8px 20px;\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n  border-radius: 20px;\n  font-size: 14px;\n  font-weight: 600;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffd700;\n  margin-bottom: 8px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  line-height: 1.8;\n  font-size: 15px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffd700;\n  margin-bottom: 12px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 12px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px;\n  background: rgba(16, 185, 129, 0.05);\n  border-left: 3px solid #10b981;\n  border-radius: 8px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 14px;\n  font-weight: 500;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  color: #10b981;\n  font-size: 16px;\n  font-weight: 700;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffd700;\n  margin-bottom: 8px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  background: rgba(139, 92, 246, 0.05);\n  border-left: 3px solid #8b5cf6;\n  margin-bottom: 8px;\n  border-radius: 8px;\n  color: var(--text-secondary);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-requirements[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-requirements[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffd700;\n  margin-bottom: 8px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-requirements[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: #ef4444;\n  font-weight: 500;\n  padding: 12px;\n  background: rgba(239, 68, 68, 0.05);\n  border-left: 3px solid #ef4444;\n  border-radius: 8px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-lore[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-lore[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffd700;\n  margin-bottom: 8px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-lore[_ngcontent-%COMP%]   .lore-text[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-style: italic;\n  padding: 16px;\n  background: rgba(139, 92, 246, 0.05);\n  border-radius: 12px;\n  border: 2px dashed rgba(139, 92, 246, 0.3);\n  line-height: 1.8;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%] {\n  margin-bottom: 24px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffd700;\n  margin-bottom: 12px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]   .tag-item[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.1) 0%,\n      rgba(236, 72, 153, 0.1) 100%);\n  color: #d97706;\n  padding: 6px 16px;\n  border-radius: 20px;\n  font-size: 13px;\n  font-weight: 500;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n  margin-top: 32px;\n  padding-top: 24px;\n  border-top: 2px solid rgba(255, 215, 0, 0.2);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  flex: 1;\n  padding: 16px 24px;\n  border: none;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981 0%,\n      #059669 100%);\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff8c00 100%);\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b 0%,\n      #d97706 100%);\n  color: white;\n}\n.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);\n}\n.story-creator-panel[_ngcontent-%COMP%] {\n  margin-top: 40px;\n  padding: 32px;\n  background: var(--bg-secondary);\n  border-radius: 24px;\n  border: 2px solid var(--border-color);\n  box-shadow: var(--shadow);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .creator-container[_ngcontent-%COMP%] {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 28px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  margin: 0;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: var(--bg-primary);\n  border-radius: 12px;\n  font-size: 24px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  transform: rotate(90deg);\n  background: #ef4444;\n  color: white;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 32px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.05) 0%,\n      rgba(118, 75, 162, 0.05) 100%);\n  border-radius: 16px;\n  border: 2px solid rgba(102, 126, 234, 0.2);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 22px;\n  color: var(--text-primary);\n  margin-bottom: 12px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 15px;\n  line-height: 1.6;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%] {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n  padding: 16px;\n  border-radius: 12px;\n  margin-bottom: 24px;\n  border: 2px solid rgba(239, 68, 68, 0.3);\n  text-align: center;\n  font-weight: 500;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%] {\n  margin-bottom: 32px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.05) 0%,\n      rgba(118, 75, 162, 0.05) 100%);\n  border-radius: 16px;\n  border: 2px solid rgba(102, 126, 234, 0.2);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .label-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%] {\n  color: #ef4444;\n  font-size: 18px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 14px 18px;\n  font-size: 16px;\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  transition: all 0.3s ease;\n  font-family: inherit;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]::placeholder {\n  color: var(--text-secondary);\n  opacity: 0.6;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .char-count[_ngcontent-%COMP%] {\n  text-align: right;\n  margin-top: 8px;\n  font-size: 13px;\n  color: var(--text-secondary);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%] {\n  display: grid;\n  gap: 24px;\n  margin-bottom: 32px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 18px;\n  color: var(--text-primary);\n  margin-bottom: 16px;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   .selection-count[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: #667eea;\n  font-weight: 500;\n  padding: 4px 12px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 12px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 12px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%] {\n  padding: 16px;\n  background: var(--bg-primary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: #667eea;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item.selected[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.15) 0%,\n      rgba(118, 75, 162, 0.15) 100%);\n  border-color: #667eea;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: var(--text-secondary);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .no-content[_ngcontent-%COMP%] {\n  text-align: center;\n  color: var(--text-secondary);\n  padding: 24px;\n  background: var(--bg-primary);\n  border-radius: 12px;\n  font-size: 14px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 32px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]   .generate-story-btn[_ngcontent-%COMP%] {\n  padding: 18px 48px;\n  font-size: 18px;\n  font-weight: 600;\n  border: none;\n  border-radius: 16px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]   .generate-story-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.5);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]   .generate-story-btn[_ngcontent-%COMP%]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%] {\n  margin-top: 32px;\n  padding: 32px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.08) 0%,\n      rgba(118, 75, 162, 0.08) 100%);\n  border-radius: 20px;\n  border: 2px solid rgba(102, 126, 234, 0.3);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]    > h4[_ngcontent-%COMP%] {\n  text-align: center;\n  font-size: 24px;\n  color: #667eea;\n  margin-bottom: 24px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  padding: 24px;\n  border-radius: 16px;\n  margin-bottom: 24px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%]   .story-icon[_ngcontent-%COMP%] {\n  font-size: 36px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 28px;\n  color: var(--text-primary);\n  margin: 0;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-desc[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 16px;\n  line-height: 1.6;\n  margin-bottom: 16px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 16px;\n  flex-wrap: wrap;\n  margin-bottom: 20px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 20px;\n  font-size: 14px;\n  color: #667eea;\n  font-weight: 500;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-intro[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 16px;\n  color: var(--text-primary);\n  margin-bottom: 12px;\n  font-weight: 600;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  line-height: 1.8;\n  margin-bottom: 8px;\n  font-size: 15px;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 16px;\n  justify-content: center;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  padding: 14px 32px;\n  font-size: 16px;\n  font-weight: 600;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981 0%,\n      #059669 100%);\n  color: white;\n  box-shadow: 0 4px 16px rgba(16, 185, 129, 0.3);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  border: 2px solid var(--border-color);\n}\n.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: #667eea;\n}\n.saved-section[_ngcontent-%COMP%] {\n  margin-top: 32px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 2px solid var(--border-color);\n  overflow: hidden;\n  transition: all 0.2s ease;\n}\n.saved-section[_ngcontent-%COMP%]:hover {\n  border-color: #667eea;\n}\n.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px;\n  cursor: pointer;\n  background: var(--bg-primary);\n  transition: background 0.2s ease;\n}\n.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]:hover {\n  background: var(--bg-secondary);\n}\n.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  flex: 1;\n}\n.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: #667eea;\n  transition: transform 0.2s ease;\n  min-width: 20px;\n}\n.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n}\n.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .count-badge[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  height: 28px;\n  padding: 0 12px;\n  background: #667eea;\n  color: white;\n  border-radius: 14px;\n  font-size: 13px;\n  font-weight: 700;\n}\n.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .gold-badge[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: #f59e0b;\n  color: white;\n  border-radius: 10px;\n  font-size: 14px;\n  font-weight: 700;\n}\n.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  background: var(--bg-secondary);\n  color: #667eea;\n  border: 2px solid #667eea;\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover {\n  background: #667eea;\n  color: white;\n}\n.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:active {\n  transform: scale(0.98);\n}\n.saved-section[_ngcontent-%COMP%]   .section-content[_ngcontent-%COMP%] {\n  padding: 24px;\n  animation: _ngcontent-%COMP%_slideDown 0.3s ease;\n  background: var(--bg-primary);\n}\n.saved-section[_ngcontent-%COMP%]   .section-content[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%] {\n  text-align: center;\n  color: var(--text-secondary);\n  font-size: 14px;\n  margin-bottom: 24px;\n}\n@keyframes _ngcontent-%COMP%_slideDown {\n  from {\n    opacity: 0;\n    max-height: 0;\n  }\n  to {\n    opacity: 1;\n    max-height: 5000px;\n  }\n}\n.saved-section.shop-section[_ngcontent-%COMP%]:hover {\n  border-color: #f59e0b;\n}\n.saved-section.shop-section[_ngcontent-%COMP%]   .section-header-collapsible.shop-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%] {\n  color: #f59e0b;\n}\n.saved-section.shop-section[_ngcontent-%COMP%]   .section-header-collapsible.shop-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n}\n.saved-section.shop-section[_ngcontent-%COMP%]   .section-header-collapsible.shop-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .shop-badge[_ngcontent-%COMP%] {\n  background: #f59e0b;\n}\n.saved-section.shop-section[_ngcontent-%COMP%]   .section-header-collapsible.shop-header[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%] {\n  color: #f59e0b;\n  border-color: #f59e0b;\n}\n.saved-section.shop-section[_ngcontent-%COMP%]   .section-header-collapsible.shop-header[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover {\n  background: #f59e0b;\n  color: white;\n}\n.saved-stories-section[_ngcontent-%COMP%] {\n  margin-top: 48px;\n  padding: 0;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 32px;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 28px;\n  color: var(--text-primary);\n  margin-bottom: 8px;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 15px;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .stories-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 24px;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%] {\n  background: var(--bg-primary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 24px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: var(--shadow);\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n  border-color: #667eea;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 16px;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .story-icon-title[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex: 1;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .story-icon-title[_ngcontent-%COMP%]   .story-icon[_ngcontent-%COMP%] {\n  font-size: 32px;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .story-icon-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 20px;\n  color: var(--text-primary);\n  margin: 0;\n  font-weight: 700;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  font-size: 20px;\n  cursor: pointer;\n  opacity: 0.6;\n  transition: all 0.3s ease;\n  padding: 4px 8px;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover {\n  opacity: 1;\n  transform: scale(1.2);\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n  margin-bottom: 16px;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%] {\n  padding: 6px 12px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 12px;\n  font-size: 13px;\n  color: #667eea;\n  font-weight: 500;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-description[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 14px;\n  line-height: 1.6;\n  margin-bottom: 16px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-footer[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 16px;\n  border-top: 1px solid var(--border-color);\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-footer[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n}\n.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-footer[_ngcontent-%COMP%]   .created-by[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: #667eea;\n  font-weight: 500;\n}\n.action-card.premium[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.1) 0%,\n      rgba(255, 165, 0, 0.1) 100%);\n  border: 2px solid rgba(255, 215, 0, 0.3);\n}\n.action-card.premium[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%] {\n  font-size: 48px;\n  animation: _ngcontent-%COMP%_sparkle 2s ease-in-out infinite;\n}\n.action-card.premium[_ngcontent-%COMP%]:hover {\n  border-color: #ffd700;\n  box-shadow: 0 8px 32px rgba(255, 215, 0, 0.3);\n}\n.action-card.premium[_ngcontent-%COMP%]   .premium-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff8c00 100%);\n  color: white;\n  font-weight: 700;\n  animation: _ngcontent-%COMP%_pulse 2s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_sparkle {\n  0%, 100% {\n    transform: scale(1) rotate(0deg);\n  }\n  50% {\n    transform: scale(1.1) rotate(5deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.8;\n  }\n}\n@keyframes _ngcontent-%COMP%_legendaryGlow {\n  0%, 100% {\n    box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);\n  }\n}\n.story-flow-overlay[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.75);\n  -webkit-backdrop-filter: blur(8px);\n  backdrop-filter: blur(8px);\n  display: block;\n  z-index: 99999 !important;\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease;\n  pointer-events: all;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%] {\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  background: var(--bg-primary);\n  border: none;\n  border-radius: 0 !important;\n  box-shadow: none;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease;\n  position: relative;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%] {\n  padding: 20px 48px;\n  background:\n    linear-gradient(\n      135deg,\n      var(--accent-primary) 0%,\n      var(--accent-secondary) 100%);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 2px solid var(--border-color);\n  cursor: default;\n  -webkit-user-select: none;\n  user-select: none;\n  flex-shrink: 0;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 1.7rem;\n  font-weight: 700;\n  color: white;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.2);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 10px 18px;\n  border-radius: 8px;\n  font-size: 1.3rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.3);\n  transform: scale(1.1) rotate(90deg);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%] {\n  padding: 24px 48px;\n  background: var(--bg-secondary);\n  border-bottom: 2px solid var(--border-color);\n  flex-shrink: 0;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0 0 16px 0;\n  color: var(--text-secondary);\n  font-size: 1.1rem;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  color: var(--accent-primary);\n  font-weight: 600;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   .flow-stats[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 20px;\n  flex-wrap: wrap;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   .flow-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n  padding: 12px 20px;\n  background: var(--bg-primary);\n  border: 2px solid var(--accent-primary);\n  border-radius: 8px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%] {\n  flex: 1;\n  padding: 48px 60px;\n  overflow-y: auto;\n  background: var(--bg-primary);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 12px;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 6px;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 6px;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%] {\n  min-height: 100%;\n  position: relative;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: flex-start;\n  gap: 20px;\n  padding: 24px;\n  margin-bottom: 32px;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  transition: all 0.3s ease;\n  position: relative;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]:hover {\n  transform: translateX(8px);\n  box-shadow: 0 4px 16px var(--shadow);\n  border-color: var(--accent-primary);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-start[_ngcontent-%COMP%] {\n  border-color: #10b981;\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary) 0%,\n      rgba(16, 185, 129, 0.1) 100%);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-start[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981 0%,\n      #059669 100%);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-story[_ngcontent-%COMP%] {\n  border-color: #3b82f6;\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary) 0%,\n      rgba(59, 130, 246, 0.1) 100%);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-story[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-choice[_ngcontent-%COMP%] {\n  border-color: #f59e0b;\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary) 0%,\n      rgba(245, 158, 11, 0.1) 100%);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-choice[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b 0%,\n      #d97706 100%);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-current[_ngcontent-%COMP%] {\n  border-color: var(--accent-primary);\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary) 0%,\n      rgba(139, 92, 246, 0.2) 100%);\n  box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);\n  animation: _ngcontent-%COMP%_pulse 2s ease-in-out infinite;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-current[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%] {\n  background: var(--gradient-primary);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%] {\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  flex-shrink: 0;\n  box-shadow: 0 4px 12px var(--shadow);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-label[_ngcontent-%COMP%] {\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 6px;\n  line-height: 1.4;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-level[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: var(--text-secondary);\n  margin-bottom: 8px;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%] {\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid var(--border-color);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%] {\n  padding: 8px 12px;\n  margin-bottom: 8px;\n  background: var(--bg-primary);\n  border-left: 3px solid var(--accent-primary);\n  border-radius: 6px;\n  font-size: 0.9rem;\n  color: var(--text-secondary);\n  transition: all 0.2s ease;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]:hover {\n  background: var(--accent-primary);\n  color: white;\n  transform: translateX(4px);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]:last-child {\n  margin-bottom: 0;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .flow-connector[_ngcontent-%COMP%] {\n  position: absolute;\n  left: 40px;\n  bottom: -24px;\n  width: 2px;\n  height: 24px;\n  background: var(--accent-primary);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .flow-connector[_ngcontent-%COMP%]::after {\n  content: "\\25bc";\n  position: absolute;\n  bottom: -8px;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 0.6rem;\n  color: var(--accent-primary);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%] {\n  margin-top: 32px;\n  padding: 20px;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  margin: 0 0 16px 0;\n  font-size: 1.1rem;\n  color: var(--text-primary);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 12px;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  font-size: 0.9rem;\n  color: var(--text-primary);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon[_ngcontent-%COMP%] {\n  width: 32px;\n  height: 32px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1rem;\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.start[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981 0%,\n      #059669 100%);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.story[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.choice[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b 0%,\n      #d97706 100%);\n}\n.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.current[_ngcontent-%COMP%] {\n  background: var(--gradient-primary);\n}\n@keyframes _ngcontent-%COMP%_fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes _ngcontent-%COMP%_slideUp {\n  from {\n    transform: translateY(30px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n@keyframes _ngcontent-%COMP%_pulse {\n  0%, 100% {\n    box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(139, 92, 246, 0.6);\n  }\n}\n.choice-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin: 20px 0;\n}\n@media (max-width: 768px) {\n  .choice-container[_ngcontent-%COMP%] {\n    gap: 14px;\n    margin: 24px 0;\n  }\n}\n@media (max-width: 480px) {\n  .choice-container[_ngcontent-%COMP%] {\n    gap: 16px;\n  }\n}\n.choice-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: stretch;\n  gap: 8px;\n}\n@media (max-width: 768px) {\n  .choice-item[_ngcontent-%COMP%] {\n    gap: 10px;\n  }\n}\n.choice-button[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 20px;\n  background: rgba(139, 69, 255, 0.1);\n  border: 2px solid rgba(139, 69, 255, 0.3);\n  border-radius: 12px;\n  transition: all 0.3s ease;\n  cursor: pointer;\n  text-align: left;\n  min-width: 0;\n}\n.choice-button[_ngcontent-%COMP%]   .choice-number[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: rgba(139, 69, 255, 0.2);\n  border-radius: 50%;\n  font-weight: bold;\n  color: #8b45ff;\n  font-size: 14px;\n  flex-shrink: 0;\n}\n.choice-button[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%] {\n  flex: 1;\n  color: var(--text-color);\n  font-size: 15px;\n  line-height: 1.5;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.choice-button[_ngcontent-%COMP%]:hover {\n  background: rgba(139, 69, 255, 0.2);\n  border-color: rgba(139, 69, 255, 0.5);\n  transform: translateX(8px);\n  box-shadow: 0 4px 12px rgba(139, 69, 255, 0.2);\n}\n.choice-button[_ngcontent-%COMP%]:active {\n  transform: translateX(8px) scale(0.98);\n}\n@media (max-width: 768px) {\n  .choice-button[_ngcontent-%COMP%] {\n    min-height: 56px;\n    padding: 18px 20px;\n    gap: 14px;\n  }\n  .choice-button[_ngcontent-%COMP%]   .choice-number[_ngcontent-%COMP%] {\n    width: 36px;\n    height: 36px;\n    font-size: 16px;\n  }\n  .choice-button[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%] {\n    font-size: 1.05rem;\n    line-height: 1.6;\n  }\n  .choice-button[_ngcontent-%COMP%]:hover {\n    transform: translateX(4px);\n  }\n}\n@media (max-width: 480px) {\n  .choice-button[_ngcontent-%COMP%] {\n    min-height: 60px;\n    padding: 20px 18px;\n  }\n  .choice-button[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%] {\n    font-size: 1.1rem;\n  }\n}\n.link-scenario-btn[_ngcontent-%COMP%] {\n  padding: 0;\n  background: transparent;\n  border: 2px solid rgba(139, 69, 255, 0.5);\n  border-radius: 8px;\n  color: #8b45ff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 16px;\n  flex-shrink: 0;\n  width: 40px;\n  min-width: 40px;\n  max-width: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.link-scenario-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(139, 69, 255, 0.3);\n  border-color: rgba(139, 69, 255, 0.7);\n  transform: scale(1.15);\n  box-shadow: 0 2px 8px rgba(139, 69, 255, 0.3);\n}\n.link-scenario-btn[_ngcontent-%COMP%]:active {\n  transform: scale(0.95);\n}\n.scenario-link-overlay[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 99998;\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease;\n}\n.scenario-link-panel[_ngcontent-%COMP%] {\n  background: #ffffff;\n  border: 2px solid #ced4da;\n  border-radius: 16px;\n  padding: 24px;\n  width: 90%;\n  max-width: 1200px;\n  max-height: 80vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n  position: relative;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid #e9ecef;\n  cursor: move;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%] {\n  color: #6c757d;\n  font-size: 18px;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  color: #212529;\n  font-size: 20px;\n  font-weight: bold;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  background: #f8f9fa;\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  color: #212529;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 18px;\n  line-height: 1;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: #e9ecef;\n  transform: scale(1.05);\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n  padding: 16px;\n  background: #f8f9fa;\n  border-radius: 8px;\n  border-left: 4px solid #0d6efd;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: #212529;\n  margin: 0 0 8px 0;\n  font-size: 15px;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child {\n  margin-bottom: 0;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  color: #0d6efd;\n  font-weight: bold;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%] {\n  font-size: 13px;\n  opacity: 0.8;\n  color: #6c757d;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%] {\n  flex: 1;\n  overflow-y: auto;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 8px;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: rgba(139, 69, 255, 0.1);\n  border-radius: 4px;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: rgba(139, 69, 255, 0.3);\n  border-radius: 4px;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: rgba(139, 69, 255, 0.5);\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: #6c757d;\n  font-size: 16px;\n  margin-bottom: 20px;\n  opacity: 0.7;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%] {\n  padding: 12px 24px;\n  background: #0d6efd;\n  border: 2px solid #0d6efd;\n  border-radius: 8px;\n  color: #ffffff;\n  font-size: 15px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover {\n  background: #0b5ed7;\n  border-color: #0b5ed7;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(13, 110, 253, 0.3);\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid rgba(139, 69, 255, 0.2);\n  cursor: move;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  color: var(--text-color);\n  font-size: 20px;\n  font-weight: bold;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  background: rgba(139, 69, 255, 0.2);\n  border: 1px solid rgba(139, 69, 255, 0.3);\n  border-radius: 8px;\n  color: var(--text-color);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(139, 69, 255, 0.3);\n  transform: scale(1.05);\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] {\n  flex: 1;\n  overflow-y: auto;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 8px;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: rgba(139, 69, 255, 0.1);\n  border-radius: 4px;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: rgba(139, 69, 255, 0.3);\n  border-radius: 4px;\n}\n.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: rgba(139, 69, 255, 0.5);\n}\n.flow-scenario-link-overlay[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.7);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 24px;\n  width: 90%;\n  max-width: 1000px;\n  max-height: 85vh;\n  padding: 32px;\n  box-shadow: 0 20px 60px rgba(102, 126, 234, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.2);\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  position: relative;\n  overflow: hidden;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: -50%;\n  right: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    radial-gradient(\n      circle,\n      rgba(255, 255, 255, 0.1) 0%,\n      transparent 70%);\n  animation: _ngcontent-%COMP%_headerGlow 8s ease-in-out infinite;\n  pointer-events: none;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 20px;\n  border-bottom: 2px solid rgba(255, 255, 255, 0.2);\n  cursor: move;\n  position: relative;\n  z-index: 1;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%] {\n  font-size: 20px;\n  opacity: 0.5;\n  color: white;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  color: white;\n  font-size: 24px;\n  font-weight: 800;\n  margin: 0;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  color: white;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(239, 68, 68, 0.25);\n  border-color: rgba(239, 68, 68, 0.4);\n  transform: scale(1.1) rotate(90deg);\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.1);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border-radius: 16px;\n  padding: 20px;\n  position: relative;\n  z-index: 1;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 16px;\n  padding: 16px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]   .node-icon-large[_ngcontent-%COMP%] {\n  font-size: 48px;\n  line-height: 1;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]   .node-details[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]   .node-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  color: white;\n  font-size: 20px;\n  font-weight: 700;\n  margin: 0 0 8px 0;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]   .node-details[_ngcontent-%COMP%]   .node-type-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 4px 12px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  color: white;\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: uppercase;\n  margin: 0;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .choice-info[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n  margin-bottom: 12px;\n  padding: 12px;\n  background: rgba(255, 255, 255, 0.08);\n  border-radius: 8px;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .choice-info[_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%] {\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 13px;\n  font-weight: 600;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .choice-info[_ngcontent-%COMP%]   .choice-value[_ngcontent-%COMP%] {\n  color: white;\n  font-size: 14px;\n  font-weight: 700;\n  font-family: monospace;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%] {\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 14px;\n  margin: 0;\n  line-height: 1.6;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%] {\n  flex: 1;\n  overflow-y: auto;\n  position: relative;\n  z-index: 1;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 10px;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 5px;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 5px;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.4);\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 16px;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%] {\n  background: white;\n  border-radius: 16px;\n  padding: 20px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  border: 2px solid transparent;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);\n  border-color: rgba(102, 126, 234, 0.5);\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card.linked[_ngcontent-%COMP%] {\n  border-color: #10b981;\n  background:\n    linear-gradient(\n      135deg,\n      #f0fdf4 0%,\n      #ecfdf5 100%);\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card.linked[_ngcontent-%COMP%]   .linked-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 12px;\n  gap: 8px;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  flex: 1;\n  font-size: 16px;\n  font-weight: 700;\n  color: #1a202c;\n  margin: 0;\n  line-height: 1.4;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%] {\n  padding: 4px 10px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 600;\n  white-space: nowrap;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .linked-badge[_ngcontent-%COMP%] {\n  display: none;\n  padding: 4px 10px;\n  background: #10b981;\n  color: white;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 700;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: #4a5568;\n  line-height: 1.6;\n  margin-bottom: 12px;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 8px;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: #718096;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 6px;\n  flex-wrap: wrap;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%] {\n  padding: 3px 8px;\n  background: #edf2f7;\n  color: #4a5568;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 600;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 16px;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%] {\n  font-size: 64px;\n  margin-bottom: 16px;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: white;\n  font-size: 16px;\n  margin-bottom: 20px;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%] {\n  padding: 12px 24px;\n  background: white;\n  color: #667eea;\n  border: none;\n  border-radius: 12px;\n  font-weight: 700;\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);\n}\n.scenario-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 16px;\n}\n.scenario-card[_ngcontent-%COMP%] {\n  background: #f8f9fa;\n  border: 2px solid #dee2e6;\n  border-radius: 12px;\n  padding: 16px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n}\n.scenario-card[_ngcontent-%COMP%]:hover {\n  background: #e9ecef;\n  border-color: #adb5bd;\n  transform: translateY(-4px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 12px;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  color: #212529;\n  font-size: 16px;\n  font-weight: bold;\n  margin: 0;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%] {\n  display: inline-block;\n  align-self: flex-start;\n  padding: 4px 8px;\n  background: #0d6efd;\n  border-radius: 6px;\n  font-size: 12px;\n  color: #ffffff;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%] {\n  color: #495057;\n  font-size: 13px;\n  line-height: 1.5;\n  margin-bottom: 12px;\n  opacity: 0.8;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%] {\n  color: #6c757d;\n  font-size: 12px;\n  opacity: 0.7;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%] {\n  padding: 4px 8px;\n  background: #e9ecef;\n  border-radius: 4px;\n  font-size: 11px;\n  color: #495057;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%] {\n  color: #212529;\n  font-size: 16px;\n  font-weight: bold;\n  margin: 0 0 8px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 4px 8px;\n  background: #0d6efd;\n  border-radius: 6px;\n  font-size: 12px;\n  color: #ffffff;\n  margin-bottom: 8px;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%] {\n  color: #495057;\n  font-size: 13px;\n  line-height: 1.5;\n  margin-bottom: 12px;\n  opacity: 0.8;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  font-size: 12px;\n  color: #6c757d;\n  opacity: 0.7;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 4px;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  color: #0d6efd;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  margin-top: 12px;\n}\n.scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%] {\n  padding: 4px 8px;\n  background: #e9ecef;\n  border-radius: 4px;\n  font-size: 11px;\n  color: #495057;\n}\n.scenario-card[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  font-size: 20px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n}\n.scenario-card[_ngcontent-%COMP%]:hover   .select-icon[_ngcontent-%COMP%] {\n  opacity: 1;\n}\n@keyframes _ngcontent-%COMP%_fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%] {\n  background: rgba(0, 0, 0, 0.85) !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%] {\n  background: #1a1a2e !important;\n  border-color: #2d2d44 !important;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5) !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%] {\n  border-bottom-color: #2d2d44 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%] {\n  color: #8e8e93 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  color: #f5f5f7 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  color: #f5f5f7 !important;\n  background: #2d2d44 !important;\n  border-color: #3d3d54 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, \nbody.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, \n[data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: #3d3d54 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%] {\n  background: #2d2d44 !important;\n  border-left-color: #0a84ff !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: #f5f5f7 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  color: #0a84ff !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%] {\n  color: #8e8e93 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%] {\n  background: #2d2d44 !important;\n  border-color: #3d3d54 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover {\n  background: #3d3d54 !important;\n  border-color: #4d4d64 !important;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3) !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  color: #f5f5f7 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%] {\n  background: #0a84ff !important;\n  color: #ffffff !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%] {\n  color: #d1d1d6 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%] {\n  color: #8e8e93 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%] {\n  background: #3d3d54 !important;\n  color: #d1d1d6 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%] {\n  color: #f5f5f7 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%] {\n  background: #0a84ff !important;\n  color: #ffffff !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%] {\n  color: #d1d1d6 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%] {\n  color: #8e8e93 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  color: #0a84ff !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%] {\n  background: #3d3d54 !important;\n  color: #d1d1d6 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: #8e8e93 !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], \nbody.dark-mode[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], \n[data-theme=dark][_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%] {\n  color: #ffffff !important;\n  background: #0a84ff !important;\n  border-color: #0a84ff !important;\n}\nbody.dark-theme[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, \nbody.dark-mode[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, \n[data-theme=dark][_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover {\n  background: #0040dd !important;\n  border-color: #0040dd !important;\n}\n  .custom-confirm-dialog .mat-mdc-dialog-container {\n  padding: 0 !important;\n  border-radius: 16px !important;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;\n  overflow: hidden !important;\n}\n  .custom-confirm-dialog .mdc-dialog__surface {\n  border-radius: 16px !important;\n  overflow: hidden !important;\n}\n  .cdk-overlay-backdrop.cdk-overlay-backdrop-showing {\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n  background: rgba(0, 0, 0, 0.5);\n}\n.advanced-story-flow-overlay[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.85);\n  -webkit-backdrop-filter: blur(8px);\n  backdrop-filter: blur(8px);\n  z-index: 10000;\n  display: block;\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease;\n}\n.advanced-flow-panel[_ngcontent-%COMP%] {\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  background: var(--bg-primary);\n  border-radius: 0 !important;\n  box-shadow: none;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease;\n  position: relative;\n}\n.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: 48px;\n}\n.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%] {\n  font-size: 80px;\n  margin-bottom: 24px;\n  opacity: 0.6;\n}\n.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 24px;\n  font-weight: 700;\n  margin: 0 0 12px;\n  color: var(--text-primary);\n}\n.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  margin: 0 0 32px;\n  line-height: 1.6;\n  font-size: 16px;\n}\n.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n}\n.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  padding: 12px 24px;\n  border-radius: 10px;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  border: none;\n}\n.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button.primary-btn[_ngcontent-%COMP%] {\n  background: #667eea;\n  color: white;\n}\n.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button.primary-btn[_ngcontent-%COMP%]:hover {\n  background: #5568d3;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n}\n.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button.secondary-btn[_ngcontent-%COMP%] {\n  background: white;\n  color: #667eea;\n  border: 2px solid #667eea;\n}\n.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button.secondary-btn[_ngcontent-%COMP%]:hover {\n  background: #667eea;\n  color: white;\n}\n.advanced-flow-header[_ngcontent-%COMP%] {\n  padding: 20px 48px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  flex-shrink: 0;\n}\n.advanced-flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 1.8rem;\n  font-weight: 700;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.advanced-flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  opacity: 0.9;\n  margin-top: 4px;\n}\n.advanced-flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  font-size: 1.6rem;\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.advanced-flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.3);\n  transform: rotate(90deg) scale(1.1);\n}\n.flow-toolbar[_ngcontent-%COMP%] {\n  padding: 24px 60px;\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n  display: flex;\n  gap: 20px;\n  flex-wrap: wrap;\n  align-items: center;\n  flex-shrink: 0;\n}\n.flow-toolbar[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n}\n.flow-toolbar[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]:not(:last-child) {\n  border-right: 1px solid var(--border-color);\n  padding-right: 20px;\n}\n.flow-toolbar[_ngcontent-%COMP%]   .toolbar-section.toolbar-hint[_ngcontent-%COMP%] {\n  margin-left: auto;\n  border: none;\n  padding-right: 0;\n}\n.flow-toolbar[_ngcontent-%COMP%]   .toolbar-section.toolbar-hint[_ngcontent-%COMP%]   .hint-text[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: var(--text-secondary);\n  font-weight: 500;\n  padding: 8px 12px;\n  background: rgba(251, 191, 36, 0.1);\n  border-radius: 6px;\n  border: 1px dashed rgba(251, 191, 36, 0.3);\n}\n.flow-toolbar[_ngcontent-%COMP%]   .tool-btn[_ngcontent-%COMP%], \n.flow-toolbar[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%] {\n  padding: 12px 20px;\n  border: 1px solid var(--border-color);\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  white-space: nowrap;\n}\n.flow-toolbar[_ngcontent-%COMP%]   .tool-btn[_ngcontent-%COMP%]:hover, \n.flow-toolbar[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:hover {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n  transform: translateY(-1px);\n}\n.flow-toolbar[_ngcontent-%COMP%]   .tool-btn.active[_ngcontent-%COMP%], \n.flow-toolbar[_ngcontent-%COMP%]   .filter-btn.active[_ngcontent-%COMP%] {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n}\n.flow-toolbar[_ngcontent-%COMP%]   .layout-selector[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  border: 1px solid var(--border-color);\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  border-radius: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  min-width: 120px;\n}\n.flow-toolbar[_ngcontent-%COMP%]   .layout-selector[_ngcontent-%COMP%]:focus {\n  outline: none;\n  border-color: var(--accent-primary);\n}\n.flow-canvas-container[_ngcontent-%COMP%] {\n  flex: 1;\n  position: relative;\n  overflow: hidden;\n  background:\n    linear-gradient(\n      180deg,\n      var(--bg-primary) 0%,\n      var(--bg-secondary) 100%);\n  cursor: grab;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.flow-canvas-container[_ngcontent-%COMP%]:active {\n  cursor: grabbing;\n}\n.flow-svg-canvas[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 100%;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .connection-path[_ngcontent-%COMP%] {\n  fill: none;\n  stroke: #cbd5e0;\n  stroke-width: 2;\n  opacity: 0.6;\n  transition: all 0.3s ease;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .connection-path.visited[_ngcontent-%COMP%] {\n  stroke: #48bb78;\n  stroke-width: 3;\n  opacity: 0.9;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .connection-path.current[_ngcontent-%COMP%] {\n  stroke: #4299e1;\n  stroke-width: 4;\n  opacity: 1;\n  animation: _ngcontent-%COMP%_pathPulse 2s infinite;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .connection-path[_ngcontent-%COMP%]:hover {\n  stroke-width: 4;\n  opacity: 1;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%] {\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]:hover   .node-circle[_ngcontent-%COMP%] {\n  filter: brightness(1.1);\n  transform: scale(1.1);\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.selected[_ngcontent-%COMP%]   .node-selection-ring[_ngcontent-%COMP%] {\n  stroke: #fbbf24;\n  stroke-width: 3;\n  opacity: 0.8;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.dragging[_ngcontent-%COMP%] {\n  cursor: move !important;\n  opacity: 0.8;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.dragging[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 15px rgba(251, 191, 36, 0.6));\n  transform: scale(1.15);\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.current[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 20px #4299e1);\n  animation: _ngcontent-%COMP%_nodeGlow 2s infinite;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.current[_ngcontent-%COMP%]   .node-glow[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_glowPulse 2s infinite;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.visited[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 8px rgba(72, 187, 120, 0.5));\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.battle[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 10px rgba(252, 129, 129, 0.6));\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.ending[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 15px rgba(159, 122, 234, 0.8));\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%] {\n  transition: all 0.3s ease;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .node-selection-ring[_ngcontent-%COMP%] {\n  transition: all 0.3s ease;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%] {\n  pointer-events: none;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .node-title[_ngcontent-%COMP%] {\n  fill: var(--text-primary);\n  pointer-events: none;\n}\n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .badge-text[_ngcontent-%COMP%], \n.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .visit-count[_ngcontent-%COMP%] {\n  fill: white;\n  font-weight: 600;\n  pointer-events: none;\n}\n.zoom-controls[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  background: rgba(255, 255, 255, 0.95);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  padding: 12px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n  z-index: 10;\n}\n.zoom-controls[_ngcontent-%COMP%]   .zoom-btn[_ngcontent-%COMP%] {\n  width: 44px;\n  height: 44px;\n  border: 2px solid var(--border-color);\n  border-radius: 8px;\n  background: white;\n  color: var(--text-primary);\n  font-size: 18px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.zoom-controls[_ngcontent-%COMP%]   .zoom-btn[_ngcontent-%COMP%]:hover {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n  transform: scale(1.05);\n}\n.zoom-controls[_ngcontent-%COMP%]   .zoom-btn[_ngcontent-%COMP%]:active {\n  transform: scale(0.95);\n}\n.zoom-controls[_ngcontent-%COMP%]   .zoom-level[_ngcontent-%COMP%] {\n  text-align: center;\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-secondary);\n  padding: 6px 0;\n  border-top: 1px solid var(--border-color);\n  border-bottom: 1px solid var(--border-color);\n  margin: 4px 0;\n}\n.legend-compact[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: 20px;\n  left: 20px;\n  display: flex;\n  gap: 16px;\n  background: rgba(255, 255, 255, 0.95);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  padding: 12px 16px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n  z-index: 10;\n}\n.legend-compact[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 13px;\n  color: var(--text-secondary);\n  font-weight: 500;\n}\n.legend-compact[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n}\n@media (max-width: 768px) {\n  .legend-compact[_ngcontent-%COMP%] {\n    flex-direction: column;\n    gap: 8px;\n    font-size: 12px;\n  }\n  .legend-compact[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%] {\n    gap: 4px;\n  }\n  .legend-compact[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\n    font-size: 16px;\n  }\n}\n.node-detail-panel[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 50%;\n  right: 24px;\n  transform: translateY(-50%);\n  width: 350px;\n  max-height: 80vh;\n  background: var(--bg-primary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  animation: _ngcontent-%COMP%_slideInRight 0.3s ease;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%] {\n  padding: 20px;\n  background: var(--accent-primary);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 20px;\n  font-weight: 700;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .detail-close-btn[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  font-size: 20px;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .detail-close-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%] {\n  padding: 20px;\n  max-height: calc(80vh - 80px);\n  overflow-y: auto;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  margin: 16px 0 8px;\n  color: var(--text-primary);\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%] {\n  margin-bottom: 16px;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 6px 14px;\n  background: var(--bg-secondary);\n  border-radius: 20px;\n  font-size: 14px;\n  font-weight: 600;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]   .type-badge.battle[_ngcontent-%COMP%] {\n  background: rgba(252, 129, 129, 0.2);\n  color: #c53030;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]   .type-badge.ending[_ngcontent-%COMP%] {\n  background: rgba(159, 122, 234, 0.2);\n  color: #6b46c1;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]   .type-badge.event[_ngcontent-%COMP%] {\n  background: rgba(246, 173, 85, 0.2);\n  color: #dd6b20;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 4px 0;\n  color: var(--text-secondary);\n  line-height: 1.6;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\n  margin: 8px 0;\n  padding-left: 20px;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n  margin: 4px 0;\n  color: var(--text-secondary);\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%], \n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%] {\n  color: var(--accent-primary);\n  font-style: italic;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  padding: 8px 0;\n  border-bottom: 1px solid var(--border-color);\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-weight: 700;\n  color: var(--accent-primary);\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%] {\n  padding: 10px 12px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  margin: 8px 0;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n}\n.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%] {\n  flex: 1;\n  color: var(--text-primary);\n  font-size: 14px;\n}\n.stats-overlay[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 24px;\n  right: 24px;\n  background: rgba(255, 255, 255, 0.95);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);\n  min-width: 320px;\n  max-height: calc(100vh - 100px);\n  overflow-y: auto;\n  animation: _ngcontent-%COMP%_slideInRight 0.3s ease;\n}\n.stats-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0 0 20px;\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n.stats-overlay[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  margin: 16px 0 12px;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(66, 153, 225, 0.1) 0%,\n      rgba(66, 153, 225, 0.05) 100%);\n  border: 2px solid #4299e1;\n  border-radius: 12px;\n  animation: _ngcontent-%COMP%_nodeGlow 2s ease-in-out infinite;\n}\n.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .location-icon[_ngcontent-%COMP%] {\n  font-size: 32px;\n  flex-shrink: 0;\n}\n.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n}\n.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-path[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  font-family: monospace;\n}\n.stats-overlay[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16px;\n  margin-bottom: 20px;\n}\n.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 16px;\n  background: var(--bg-primary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s;\n}\n.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 32px;\n  margin-bottom: 8px;\n}\n.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--accent-primary);\n  margin-bottom: 4px;\n}\n.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n  font-size: 13px;\n  transition: all 0.2s;\n}\n.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]:hover {\n  background: rgba(66, 153, 225, 0.05);\n  border-color: #4299e1;\n}\n.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n  flex-shrink: 0;\n}\n.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-node[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: var(--text-primary);\n  flex-shrink: 0;\n}\n.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-choice[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n@keyframes _ngcontent-%COMP%_pathPulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n@keyframes _ngcontent-%COMP%_nodeGlow {\n  0%, 100% {\n    filter: drop-shadow(0 0 20px #4299e1);\n  }\n  50% {\n    filter: drop-shadow(0 0 30px #4299e1);\n  }\n}\n@keyframes _ngcontent-%COMP%_glowPulse {\n  0%, 100% {\n    opacity: 0.5;\n    r: 50;\n  }\n  50% {\n    opacity: 0.8;\n    r: 55;\n  }\n}\n@keyframes _ngcontent-%COMP%_fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes _ngcontent-%COMP%_slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(40px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n@keyframes _ngcontent-%COMP%_slideInRight {\n  from {\n    opacity: 0;\n    transform: translateX(40px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n[data-theme=dark][_ngcontent-%COMP%]   .minimap[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%], \n[data-theme=dark][_ngcontent-%COMP%]   .stats-overlay[_ngcontent-%COMP%] {\n  background: rgba(26, 32, 44, 0.95);\n}\n[data-theme=dark][_ngcontent-%COMP%]   .node-title[_ngcontent-%COMP%] {\n  fill: #e2e8f0;\n}\n.flow-side-panel[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 80px;\n  right: 24px;\n  z-index: 900;\n  animation: _ngcontent-%COMP%_slideInRight 0.4s ease;\n  pointer-events: all;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-container[_ngcontent-%COMP%] {\n  width: 300px;\n  background: white;\n  border-radius: 16px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  max-height: calc(100vh - 120px);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  padding: 20px;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.25);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: -50%;\n  right: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    radial-gradient(\n      circle,\n      rgba(255, 255, 255, 0.1) 0%,\n      transparent 70%);\n  animation: _ngcontent-%COMP%_headerGlow 8s ease-in-out infinite;\n  pointer-events: none;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 11px;\n  margin-bottom: 12px;\n  font-weight: 600;\n  position: relative;\n  z-index: 1;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  background: rgba(255, 255, 255, 0.15);\n  padding: 4px 10px;\n  border-radius: 12px;\n  letter-spacing: 0.5px;\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]::before {\n  content: "\\1f550";\n  font-size: 13px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  background: rgba(255, 255, 255, 0.15);\n  padding: 4px 10px;\n  border-radius: 12px;\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]::before {\n  content: "\\1f3af";\n  font-size: 13px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  z-index: 1;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 20px;\n  font-weight: 800;\n  letter-spacing: -0.5px;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 6px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%], \n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: white;\n  width: 36px;\n  height: 36px;\n  border-radius: 10px;\n  cursor: pointer;\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]::before, \n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.3);\n  transform: translate(-50%, -50%);\n  transition: width 0.4s, height 0.4s;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]:hover, \n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.25);\n  border-color: rgba(255, 255, 255, 0.4);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]:hover::before, \n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover::before {\n  width: 100%;\n  height: 100%;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]:active, \n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(239, 68, 68, 0.2);\n  border-color: rgba(239, 68, 68, 0.4);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  padding: 12px 16px 0;\n  background: transparent;\n  position: relative;\n  z-index: 1;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%] {\n  padding: 0;\n  background: white;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.08);\n  gap: 0;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%] {\n  flex: 1;\n  padding: 14px 20px;\n  background: white;\n  border-radius: 0;\n  color: #718096;\n  border: none;\n  border-top: 3px solid transparent;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]::before {\n  display: none;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%] {\n  font-size: 24px;\n  display: block;\n  margin-bottom: 4px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%] {\n  font-size: 11px;\n  display: block;\n  letter-spacing: 0.3px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:not(.active) {\n  background: #f7fafc;\n  color: #4a5568;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:not(.active)   .tab-icon[_ngcontent-%COMP%] {\n  transform: scale(1.1);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%] {\n  background: white;\n  color: #667eea;\n  border-top-color: #667eea;\n  box-shadow: none;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%] {\n  transform: scale(1.2);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  padding: 10px 16px;\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 2px solid transparent;\n  border-radius: 12px 12px 0 0;\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 14px;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n  transition: transform 0.3s;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%] {\n  font-size: 13px;\n  letter-spacing: 0.3px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 3px;\n  background: white;\n  transform: scaleX(0);\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:not(.active) {\n  background: rgba(255, 255, 255, 0.25);\n  color: white;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:not(.active)   .tab-icon[_ngcontent-%COMP%] {\n  transform: scale(1.1);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%] {\n  background: white;\n  color: #667eea;\n  border-color: rgba(255, 255, 255, 0.3);\n  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]::before {\n  transform: scaleX(1);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%] {\n  transform: scale(1.15);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[_ngcontent-%COMP%] {\n  position: relative;\n  width: 100%;\n  overflow: hidden;\n  flex: 1;\n  display: flex;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%] {\n  width: 100%;\n  flex-shrink: 0;\n  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[_ngcontent-%COMP%]   .tab-content.character-tab[_ngcontent-%COMP%] {\n  transform: translateX(0);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[_ngcontent-%COMP%]   .tab-content.organization-tab[_ngcontent-%COMP%] {\n  transform: translateX(0);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[_ngcontent-%COMP%]   .tab-content.map-tab[_ngcontent-%COMP%] {\n  transform: translateX(0);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=character][_ngcontent-%COMP%]   .character-tab[_ngcontent-%COMP%] {\n  transform: translateX(0);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=character][_ngcontent-%COMP%]   .organization-tab[_ngcontent-%COMP%] {\n  transform: translateX(100%);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=character][_ngcontent-%COMP%]   .map-tab[_ngcontent-%COMP%] {\n  transform: translateX(100%);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=organization][_ngcontent-%COMP%]   .character-tab[_ngcontent-%COMP%] {\n  transform: translateX(-100%);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=organization][_ngcontent-%COMP%]   .organization-tab[_ngcontent-%COMP%] {\n  transform: translateX(-100%);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=organization][_ngcontent-%COMP%]   .map-tab[_ngcontent-%COMP%] {\n  transform: translateX(100%);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=map][_ngcontent-%COMP%]   .character-tab[_ngcontent-%COMP%] {\n  transform: translateX(-200%);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=map][_ngcontent-%COMP%]   .organization-tab[_ngcontent-%COMP%] {\n  transform: translateX(-200%);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=map][_ngcontent-%COMP%]   .map-tab[_ngcontent-%COMP%] {\n  transform: translateX(-200%);\n}\n@keyframes _ngcontent-%COMP%_headerGlow {\n  0%, 100% {\n    transform: translate(0, 0) rotate(0deg);\n    opacity: 0.5;\n  }\n  50% {\n    transform: translate(-10%, -10%) rotate(180deg);\n    opacity: 0.8;\n  }\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%] {\n  padding: 20px;\n  background: white;\n  margin: 0;\n  height: 100%;\n  overflow-y: auto;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%] {\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n  flex-shrink: 0;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-icon[_ngcontent-%COMP%] {\n  font-size: 32px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .character-basic[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .character-basic[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%] {\n  font-size: 18px;\n  font-weight: 800;\n  color: #1a202c;\n  margin-bottom: 2px;\n  letter-spacing: -0.3px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .character-basic[_ngcontent-%COMP%]   .character-level[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: 700;\n  color: #667eea;\n  background: rgba(102, 126, 234, 0.1);\n  padding: 2px 10px;\n  border-radius: 12px;\n  display: inline-block;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row.inline[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row.inline[_ngcontent-%COMP%]   .inline-stat[_ngcontent-%COMP%] {\n  flex: 1;\n  background: white;\n  padding: 10px;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row.inline[_ngcontent-%COMP%]   .inline-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row.inline[_ngcontent-%COMP%]   .inline-stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 700;\n  color: #2d3748;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row.special[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.2) 0%,\n      rgba(255, 165, 0, 0.2) 100%);\n  padding: 10px;\n  border-radius: 10px;\n  border: 2px solid rgba(255, 215, 0, 0.3);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row.special[_ngcontent-%COMP%]   .cultivation-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ffa500 100%);\n  color: #1a202c;\n  padding: 4px 12px;\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 800;\n  box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  min-width: 60px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]   .stat-icon.hp[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 4px rgba(239, 68, 68, 0.3));\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]   .stat-icon.mp[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.3));\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]   .stat-name[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: 700;\n  color: #4a5568;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%] {\n  height: 10px;\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 20px;\n  overflow: hidden;\n  position: relative;\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]   .stat-bar.hp[_ngcontent-%COMP%]   .stat-bar-fill[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444 0%,\n      #dc2626 100%);\n  box-shadow: 0 0 8px rgba(239, 68, 68, 0.6);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]   .stat-bar.mp[_ngcontent-%COMP%]   .stat-bar-fill[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n  box-shadow: 0 0 8px rgba(59, 130, 246, 0.6);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n  border-radius: 20px;\n  position: relative;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 50%;\n  background:\n    linear-gradient(\n      to bottom,\n      rgba(255, 255, 255, 0.3),\n      transparent);\n  border-radius: 20px 20px 0 0;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-size: 11px;\n  font-weight: 700;\n  color: #4a5568;\n  text-align: right;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%] {\n  padding: 20px;\n  background: white;\n  height: 100%;\n  overflow-y: auto;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  padding: 20px;\n  border-radius: 16px;\n  color: white;\n  margin-bottom: 20px;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-name-section[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-name-section[_ngcontent-%COMP%]   .org-name[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: 800;\n  margin: 0;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-name-section[_ngcontent-%COMP%]   .org-level[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.2);\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 13px;\n  font-weight: 700;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-stats[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 20px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-stats[_ngcontent-%COMP%]   .org-stat[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-stats[_ngcontent-%COMP%]   .org-stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  font-size: 11px;\n  opacity: 0.8;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-stats[_ngcontent-%COMP%]   .org-stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%] {\n  background: #f8fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 16px;\n  padding: 16px;\n  transition: all 0.3s;\n  cursor: pointer;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]:hover {\n  border-color: #667eea;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.2);\n  transform: translateY(-2px);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card.selected[_ngcontent-%COMP%] {\n  border-color: #667eea;\n  background: #eef2ff;\n  box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-avatar[_ngcontent-%COMP%] {\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 28px;\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 4px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: #1a202c;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[_ngcontent-%COMP%] {\n  padding: 2px 8px;\n  border-radius: 8px;\n  font-size: 11px;\n  font-weight: 700;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[data-role=leader][_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700,\n      #ffa500);\n  color: #1a202c;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[data-role=vice_leader][_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #c0c0c0,\n      #a8a8a8);\n  color: white;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[data-role=elder][_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #cd7f32,\n      #b87333);\n  color: white;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[data-role=captain][_ngcontent-%COMP%] {\n  background: #667eea;\n  color: white;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[data-role=member][_ngcontent-%COMP%], \n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[data-role=recruit][_ngcontent-%COMP%] {\n  background: #cbd5e0;\n  color: #2d3748;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-level[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: #718096;\n  font-weight: 600;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-status[_ngcontent-%COMP%] {\n  padding: 6px 12px;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 700;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-status[data-status=active][_ngcontent-%COMP%] {\n  background: #d4edda;\n  color: #155724;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-status[data-status=resting][_ngcontent-%COMP%] {\n  background: #fff3cd;\n  color: #856404;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-status[data-status=injured][_ngcontent-%COMP%] {\n  background: #f8d7da;\n  color: #721c24;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-status[data-status=on_mission][_ngcontent-%COMP%] {\n  background: #d1ecf1;\n  color: #0c5460;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 12px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%] {\n  font-size: 11px;\n  font-weight: 700;\n  color: #4a5568;\n  width: 40px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]   .mini-stat-bar[_ngcontent-%COMP%] {\n  flex: 1;\n  height: 8px;\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 10px;\n  overflow: hidden;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]   .mini-stat-bar.hp[_ngcontent-%COMP%]   .mini-bar-fill[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444,\n      #dc2626);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]   .mini-stat-bar.mp[_ngcontent-%COMP%]   .mini-bar-fill[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6,\n      #2563eb);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]   .mini-stat-bar[_ngcontent-%COMP%]   .mini-bar-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  transition: width 0.4s;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]   .bar-value[_ngcontent-%COMP%] {\n  font-size: 11px;\n  font-weight: 700;\n  color: #4a5568;\n  min-width: 60px;\n  text-align: right;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  margin-bottom: 12px;\n  padding: 12px;\n  background: white;\n  border-radius: 12px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 12px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%] {\n  font-size: 14px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-text[_ngcontent-%COMP%] {\n  color: #2d3748;\n  font-weight: 600;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .loyalty-bar[_ngcontent-%COMP%] {\n  flex: 1;\n  height: 6px;\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 10px;\n  overflow: hidden;\n  margin-left: 8px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .loyalty-bar[_ngcontent-%COMP%]   .loyalty-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #f59e0b,\n      #ef4444);\n  transition: width 0.4s;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-skills[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 6px;\n  flex-wrap: wrap;\n  margin-bottom: 8px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-skills[_ngcontent-%COMP%]   .skill-tag[_ngcontent-%COMP%] {\n  padding: 4px 10px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border-radius: 8px;\n  font-size: 11px;\n  font-weight: 700;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-description[_ngcontent-%COMP%] {\n  padding: 8px;\n  background: white;\n  border-radius: 8px;\n  border-left: 3px solid #667eea;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 12px;\n  color: #4a5568;\n  font-style: italic;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .no-members[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 40px 20px;\n  color: #718096;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .no-members[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 8px 0;\n  font-size: 14px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .no-organization[_ngcontent-%COMP%] {\n  padding: 60px 20px;\n  text-align: center;\n  color: #718096;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .no-organization[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 8px 0;\n  font-size: 14px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px;\n  background: rgba(66, 153, 225, 0.05);\n  border-bottom: 2px solid rgba(66, 153, 225, 0.2);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%] {\n  font-size: 36px;\n  flex-shrink: 0;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%] {\n  flex: 1;\n  min-width: 0;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-title[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 700;\n  color: #1a202c;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-bottom: 4px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-path[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: #718096;\n  font-weight: 600;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%] {\n  flex: 1;\n  min-height: 280px;\n  max-height: 360px;\n  background: #f8fafc;\n  position: relative;\n  overflow: hidden;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  display: block;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]   .mini-connections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n  transition: all 0.3s;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]   .mini-nodes[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%] {\n  transition: all 0.3s;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]   .mini-nodes[_ngcontent-%COMP%]   circle.pulse[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_phonePulse 2s ease-in-out infinite;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-around;\n  padding: 16px;\n  background: white;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n}\n.flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 22px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-text[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: 700;\n  color: #2d3748;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%] {\n  padding: 16px;\n  background: white;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .recent-title[_ngcontent-%COMP%] {\n  font-size: 11px;\n  font-weight: 700;\n  color: #718096;\n  margin-bottom: 10px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dots[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dots[_ngcontent-%COMP%]   .path-dot[_ngcontent-%COMP%] {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 10px;\n  background: #edf2f7;\n  font-size: 16px;\n  transition: all 0.2s;\n  cursor: pointer;\n  border: 2px solid transparent;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dots[_ngcontent-%COMP%]   .path-dot[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px) scale(1.1);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  border-color: #4299e1;\n}\n.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dots[_ngcontent-%COMP%]   .path-dot.current[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #4299e1 0%,\n      #3182ce 100%);\n  box-shadow: 0 6px 16px rgba(66, 153, 225, 0.4);\n  transform: translateY(-2px) scale(1.15);\n  border-color: #2b6cb0;\n}\n.flow-panel-toggle-btn[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 80px;\n  right: 24px;\n  z-index: 899;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 16px;\n  padding: 14px 18px;\n  cursor: pointer;\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.2);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  animation: _ngcontent-%COMP%_slideInRight 0.4s ease, _ngcontent-%COMP%_pulseGlow 3s ease-in-out infinite;\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  position: relative;\n  overflow: hidden;\n}\n.flow-panel-toggle-btn[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    linear-gradient(\n      45deg,\n      transparent 30%,\n      rgba(255, 255, 255, 0.3) 50%,\n      transparent 70%);\n  animation: _ngcontent-%COMP%_shimmer 3s infinite;\n}\n.flow-panel-toggle-btn[_ngcontent-%COMP%]:hover {\n  transform: translateX(-6px) translateY(-2px) scale(1.08);\n  box-shadow: 0 12px 32px rgba(102, 126, 234, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.4);\n}\n.flow-panel-toggle-btn[_ngcontent-%COMP%]:hover   .toggle-icon[_ngcontent-%COMP%] {\n  transform: scale(1.2) rotate(10deg);\n}\n.flow-panel-toggle-btn[_ngcontent-%COMP%]:active {\n  transform: translateX(-6px) scale(1.02);\n}\n.flow-panel-toggle-btn[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%] {\n  font-size: 28px;\n  line-height: 1;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  z-index: 1;\n}\n.flow-panel-toggle-btn[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: 800;\n  letter-spacing: 1px;\n  text-transform: uppercase;\n  position: relative;\n  z-index: 1;\n}\n@keyframes _ngcontent-%COMP%_shimmer {\n  0% {\n    transform: translateX(-100%) translateY(-100%) rotate(0deg);\n  }\n  100% {\n    transform: translateX(100%) translateY(100%) rotate(0deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_pulseGlow {\n  0%, 100% {\n    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.2);\n  }\n  50% {\n    box-shadow:\n      0 8px 32px rgba(102, 126, 234, 0.6),\n      0 0 0 1px rgba(255, 255, 255, 0.3),\n      0 0 20px rgba(102, 126, 234, 0.3);\n  }\n}\n@keyframes _ngcontent-%COMP%_phonePulse {\n  0%, 100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.7;\n    transform: scale(1.1);\n  }\n}\n@media (max-width: 1400px) {\n  .flow-side-panel[_ngcontent-%COMP%] {\n    display: none;\n  }\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .panel-container[_ngcontent-%COMP%] {\n  background: #1a202c;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1);\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%] {\n  background: rgba(66, 153, 225, 0.1);\n  border-bottom-color: rgba(66, 153, 225, 0.3);\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-title[_ngcontent-%COMP%] {\n  color: #f7fafc;\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-path[_ngcontent-%COMP%] {\n  color: #a0aec0;\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%] {\n  background: #2d3748;\n  border-bottom-color: rgba(255, 255, 255, 0.05);\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%] {\n  background: #1a202c;\n  border-bottom-color: rgba(255, 255, 255, 0.05);\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]   .stat-text[_ngcontent-%COMP%] {\n  color: #e2e8f0;\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%] {\n  background: #1a202c;\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .recent-title[_ngcontent-%COMP%] {\n  color: #a0aec0;\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dot[_ngcontent-%COMP%] {\n  background: #2d3748;\n  border-color: transparent;\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dot[_ngcontent-%COMP%]:hover {\n  border-color: #4299e1;\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-panel-toggle-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  box-shadow:\n    0 8px 24px rgba(102, 126, 234, 0.5),\n    0 0 0 1px rgba(255, 255, 255, 0.2),\n    0 0 30px rgba(102, 126, 234, 0.3);\n}\n[data-theme=dark][_ngcontent-%COMP%]   .flow-panel-toggle-btn[_ngcontent-%COMP%]:hover {\n  box-shadow:\n    0 12px 32px rgba(102, 126, 234, 0.6),\n    0 0 0 1px rgba(255, 255, 255, 0.3),\n    0 0 40px rgba(102, 126, 234, 0.4);\n}\n.wuxia-overlay[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.85);\n  -webkit-backdrop-filter: blur(8px);\n  backdrop-filter: blur(8px);\n  z-index: 2000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease;\n}\n.wuxia-panel[_ngcontent-%COMP%] {\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  background: var(--bg-primary);\n  border-radius: 0 !important;\n  box-shadow: none;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .wuxia-header[_ngcontent-%COMP%] {\n  padding: 20px 48px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: move;\n  position: relative;\n  z-index: 1;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  flex-shrink: 0;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .wuxia-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  font-size: 1.8rem;\n  font-weight: 700;\n  color: white;\n  margin: 0;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n  letter-spacing: 1px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .wuxia-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  width: 44px;\n  height: 44px;\n  background: rgba(255, 255, 255, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 50%;\n  color: white;\n  font-size: 1.5rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .wuxia-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.25);\n  transform: rotate(90deg) scale(1.1);\n}\n.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%] {\n  display: flex;\n  padding: 20px 40px;\n  gap: 12px;\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n  overflow-x: auto;\n  position: relative;\n  z-index: 1;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]::-webkit-scrollbar {\n  height: 6px;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 3px;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: rgba(102, 126, 234, 0.5);\n  border-radius: 3px;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: rgba(102, 126, 234, 0.7);\n}\n.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%] {\n  padding: 12px 24px;\n  background: transparent;\n  border: 2px solid transparent;\n  border-radius: 12px;\n  color: var(--text-secondary);\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(102, 126, 234, 0.1);\n  color: var(--text-primary);\n  border-color: rgba(102, 126, 234, 0.2);\n}\n.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-color: transparent;\n  color: white;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 40px;\n  position: relative;\n  z-index: 1;\n  background: var(--bg-primary);\n}\n.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 8px;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n  border-radius: 4px;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: rgba(102, 126, 234, 0.5);\n  border-radius: 4px;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: rgba(102, 126, 234, 0.7);\n}\n.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 1.6rem;\n  color: var(--text-primary);\n  margin: 0 0 32px 0;\n  text-align: center;\n  font-weight: 700;\n  position: relative;\n  padding-bottom: 16px;\n}\n.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 80px;\n  height: 3px;\n  background:\n    linear-gradient(\n      90deg,\n      transparent,\n      #667eea,\n      transparent);\n  border-radius: 2px;\n}\n.cultivation-section[_ngcontent-%COMP%] {\n  max-width: 1000px;\n  margin: 0 auto;\n}\n.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 16px;\n  padding: 28px;\n  margin-bottom: 24px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n}\n.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-header[_ngcontent-%COMP%]   .gauge-label[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: var(--text-primary);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-header[_ngcontent-%COMP%]   .gauge-label[_ngcontent-%COMP%]::before {\n  content: "\\1f525";\n  font-size: 1.4rem;\n}\n.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-header[_ngcontent-%COMP%]   .gauge-value[_ngcontent-%COMP%] {\n  font-size: 1.3rem;\n  color: #667eea;\n  font-weight: 700;\n  font-variant-numeric: tabular-nums;\n}\n.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-bar[_ngcontent-%COMP%] {\n  height: 32px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 16px;\n  overflow: hidden;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n  position: relative;\n}\n.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-bar[_ngcontent-%COMP%]   .gauge-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 16px;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3), 0 0 20px rgba(102, 126, 234, 0.5);\n  transition: width 0.5s ease;\n  position: relative;\n}\n.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-bar[_ngcontent-%COMP%]   .gauge-fill[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.3) 50%,\n      transparent 100%);\n  animation: _ngcontent-%COMP%_shimmer 2s infinite;\n}\n.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-info[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 16px;\n  margin-top: 20px;\n}\n.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n  padding: 8px 12px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  text-align: center;\n  border: 1px solid var(--border-color);\n}\n.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 16px;\n  padding: 28px;\n  margin-bottom: 24px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n}\n.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  padding: 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.1) 0%,\n      rgba(118, 75, 162, 0.1) 100%);\n  border: 2px solid rgba(102, 126, 234, 0.3);\n  border-radius: 12px;\n  margin-bottom: 20px;\n  transition: all 0.3s ease;\n}\n.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);\n}\n.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]   .realm-icon[_ngcontent-%COMP%] {\n  font-size: 3rem;\n  filter: drop-shadow(0 4px 8px rgba(102, 126, 234, 0.5));\n}\n.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]   .realm-info[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]   .realm-info[_ngcontent-%COMP%]   .realm-name[_ngcontent-%COMP%] {\n  font-size: 2rem;\n  font-weight: 700;\n  color: var(--text-primary);\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]   .realm-info[_ngcontent-%COMP%]   .realm-subtitle[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  color: var(--text-secondary);\n  font-weight: 500;\n}\n.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-size: 1rem;\n  font-weight: 600;\n}\n.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%] {\n  height: 24px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 12px;\n  overflow: hidden;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n  position: relative;\n}\n.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 12px;\n  transition: width 0.5s ease;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);\n}\n.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]   .progress-value[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-weight: 600;\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\n  gap: 16px;\n  margin-bottom: 24px;\n}\n.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%] {\n  padding: 24px;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  color: var(--text-primary);\n  font-size: 1.05rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  position: relative;\n  overflow: hidden;\n}\n.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      transparent,\n      rgba(102, 126, 234, 0.2),\n      transparent);\n  transition: left 0.5s ease;\n}\n.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%] {\n  font-size: 2.5rem;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));\n}\n.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.1) 0%,\n      rgba(118, 75, 162, 0.1) 100%);\n  border-color: #667eea;\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.25);\n}\n.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]:hover::before {\n  left: 100%;\n}\n.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]:hover   .btn-icon[_ngcontent-%COMP%] {\n  transform: scale(1.1);\n}\n.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(-2px);\n}\n.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 12px;\n  padding: 24px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n}\n.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]   .training-label[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-weight: 600;\n  font-size: 1.1rem;\n}\n.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]   .training-bar[_ngcontent-%COMP%] {\n  height: 28px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 14px;\n  overflow: hidden;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n}\n.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]   .training-bar[_ngcontent-%COMP%]   .training-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 14px;\n  transition: width 0.5s ease;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);\n}\n.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]   .training-value[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-weight: 600;\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n.skills-section[_ngcontent-%COMP%] {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n.skills-section[_ngcontent-%COMP%]   .learned-skills-count[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 32px;\n  padding: 16px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 12px;\n}\n.skills-section[_ngcontent-%COMP%]   .learned-skills-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-size: 1.2rem;\n  font-weight: 700;\n}\n.skills-section[_ngcontent-%COMP%]   .learned-skills-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  color: #667eea;\n  font-size: 1.4rem;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 20px;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 24px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  transform: scaleX(0);\n  transform-origin: left;\n  transition: transform 0.3s ease;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]:hover::before {\n  transform: scaleX(1);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\d558\\c2b9[_ngcontent-%COMP%]  {\n  border-color: rgba(156, 163, 175, 0.5);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\d558\\c2b9[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-grade[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #9ca3af 0%,\n      #6b7280 100%);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c911\\c2b9[_ngcontent-%COMP%]  {\n  border-color: rgba(59, 130, 246, 0.5);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c911\\c2b9[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-grade[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c0c1\\c2b9[_ngcontent-%COMP%]  {\n  border-color: rgba(168, 85, 247, 0.5);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c0c1\\c2b9[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-grade[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #a855f7 0%,\n      #9333ea 100%);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c808\\d559[_ngcontent-%COMP%]  {\n  border-color: rgba(251, 191, 36, 0.5);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c808\\d559[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-grade[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #fbbf24 0%,\n      #f59e0b 100%);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 32px rgba(102, 126, 234, 0.25);\n  border-color: #667eea;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 20px;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-names[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-names[_ngcontent-%COMP%]   .skill-name-chinese[_ngcontent-%COMP%] {\n  font-size: 1.5rem;\n  font-weight: 800;\n  color: var(--text-primary);\n  margin: 0;\n  line-height: 1.2;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-names[_ngcontent-%COMP%]   .skill-name-korean[_ngcontent-%COMP%] {\n  font-size: 1rem;\n  color: var(--text-secondary);\n  margin: 0;\n  font-weight: 500;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-grade[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 20px;\n  color: white;\n  font-size: 0.9rem;\n  font-weight: 700;\n  white-space: nowrap;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-type[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 16px;\n  padding: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-type[_ngcontent-%COMP%]   .type-icon[_ngcontent-%COMP%] {\n  font-size: 1.5rem;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-type[_ngcontent-%COMP%]   .type-label[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 1rem;\n  font-weight: 600;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 10px;\n  margin-bottom: 16px;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  padding: 10px 12px;\n  background: var(--bg-tertiary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  transition: all 0.2s ease;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]:hover {\n  background: rgba(102, 126, 234, 0.1);\n  border-color: rgba(102, 126, 234, 0.3);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n  font-weight: 500;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-weight: 700;\n  font-size: 1rem;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-description[_ngcontent-%COMP%] {\n  margin-bottom: 16px;\n  padding: 16px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border-left: 3px solid #667eea;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-size: 0.95rem;\n  margin: 0 0 10px 0;\n  line-height: 1.6;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-description[_ngcontent-%COMP%]   .skill-effect[_ngcontent-%COMP%] {\n  color: #667eea;\n  font-style: italic;\n  font-weight: 600;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-element[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 10px;\n  padding: 8px 14px;\n  background: rgba(102, 126, 234, 0.15);\n  border-radius: 20px;\n  border: 1px solid rgba(102, 126, 234, 0.3);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-element[_ngcontent-%COMP%]   .element-icon[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-element[_ngcontent-%COMP%]   .element-name[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-size: 0.9rem;\n  font-weight: 600;\n  text-transform: uppercase;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-faction[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 14px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-faction[_ngcontent-%COMP%]   .faction-label[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 0.85rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-faction[_ngcontent-%COMP%]   .faction-name[_ngcontent-%COMP%] {\n  color: #667eea;\n  font-weight: 700;\n  font-size: 0.95rem;\n}\n.skills-section[_ngcontent-%COMP%]   .no-skills[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 80px 20px;\n  background: var(--bg-secondary);\n  border-radius: 16px;\n  border: 2px dashed var(--border-color);\n}\n.skills-section[_ngcontent-%COMP%]   .no-skills[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 1.2rem;\n  margin: 12px 0;\n}\n.faction-section[_ngcontent-%COMP%] {\n  max-width: 1000px;\n  margin: 0 auto;\n}\n.faction-section[_ngcontent-%COMP%]   .current-faction[_ngcontent-%COMP%] {\n  margin-bottom: 40px;\n}\n.faction-section[_ngcontent-%COMP%]   .current-faction[_ngcontent-%COMP%]   .faction-card.current[_ngcontent-%COMP%] {\n  border-width: 3px;\n  box-shadow: 0 0 30px rgba(195, 20, 50, 0.4);\n}\n.faction-section[_ngcontent-%COMP%]   .no-faction[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 60px 20px;\n  background: var(--bg-secondary);\n  border-radius: 16px;\n  border: 2px dashed var(--border-color);\n  margin-bottom: 40px;\n}\n.faction-section[_ngcontent-%COMP%]   .no-faction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 1.2rem;\n  margin-bottom: 24px;\n  font-weight: 500;\n}\n.faction-section[_ngcontent-%COMP%]   .no-faction[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-size: 1.4rem;\n  margin-bottom: 24px;\n  font-weight: 700;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));\n  gap: 24px;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 28px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  transform: scaleX(0);\n  transform-origin: left;\n  transition: transform 0.3s ease;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]:hover::before {\n  transform: scaleX(1);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-righteous[_ngcontent-%COMP%] {\n  border-color: rgba(59, 130, 246, 0.5);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-righteous[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-righteous[_ngcontent-%COMP%]:hover {\n  box-shadow: 0 12px 32px rgba(59, 130, 246, 0.25);\n  border-color: #3b82f6;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-evil[_ngcontent-%COMP%] {\n  border-color: rgba(239, 68, 68, 0.5);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-evil[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444 0%,\n      #dc2626 100%);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-evil[_ngcontent-%COMP%]:hover {\n  box-shadow: 0 12px 32px rgba(239, 68, 68, 0.25);\n  border-color: #ef4444;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-neutral[_ngcontent-%COMP%] {\n  border-color: rgba(156, 163, 175, 0.5);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-neutral[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #9ca3af 0%,\n      #6b7280 100%);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-neutral[_ngcontent-%COMP%]:hover {\n  box-shadow: 0 12px 32px rgba(156, 163, 175, 0.25);\n  border-color: #9ca3af;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-4px);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-header[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 1.8rem;\n  font-weight: 800;\n  color: var(--text-primary);\n  margin: 0 0 8px 0;\n  line-height: 1.2;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-header[_ngcontent-%COMP%]   .faction-name-korean[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  color: var(--text-secondary);\n  margin: 0;\n  font-weight: 500;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-type[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n  padding: 8px 18px;\n  border-radius: 20px;\n  font-size: 0.95rem;\n  font-weight: 700;\n  margin-bottom: 20px;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-type.type-righteous[_ngcontent-%COMP%] {\n  background: rgba(59, 130, 246, 0.15);\n  color: #3b82f6;\n  border: 1px solid rgba(59, 130, 246, 0.3);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-type.type-evil[_ngcontent-%COMP%] {\n  background: rgba(239, 68, 68, 0.15);\n  color: #ef4444;\n  border: 1px solid rgba(239, 68, 68, 0.3);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-type.type-neutral[_ngcontent-%COMP%] {\n  background: rgba(156, 163, 175, 0.15);\n  color: #9ca3af;\n  border: 1px solid rgba(156, 163, 175, 0.3);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-info[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n  padding: 16px;\n  background: var(--bg-tertiary);\n  border-radius: 12px;\n  border-left: 3px solid #667eea;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  line-height: 1.7;\n  margin: 0 0 12px 0;\n  font-size: 0.95rem;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  color: #667eea;\n  font-weight: 700;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-specialties[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-specialties[_ngcontent-%COMP%]   .specialty-badge[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  background: rgba(102, 126, 234, 0.15);\n  border: 1px solid rgba(102, 126, 234, 0.3);\n  border-radius: 20px;\n  color: #667eea;\n  font-size: 0.85rem;\n  font-weight: 600;\n  transition: all 0.2s ease;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-specialties[_ngcontent-%COMP%]   .specialty-badge[_ngcontent-%COMP%]:hover {\n  background: rgba(102, 126, 234, 0.25);\n  transform: translateY(-2px);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-reputation[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-reputation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-weight: 600;\n  font-size: 0.9rem;\n  white-space: nowrap;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-reputation[_ngcontent-%COMP%]   .reputation-bar[_ngcontent-%COMP%] {\n  flex: 1;\n  height: 12px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 6px;\n  overflow: hidden;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-reputation[_ngcontent-%COMP%]   .reputation-bar[_ngcontent-%COMP%]   .reputation-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  transition: width 0.5s ease;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .join-faction-btn[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 14px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  font-size: 1.05rem;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin-top: 16px;\n}\n.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .join-faction-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n}\n.elixir-section[_ngcontent-%COMP%] {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 20px;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 24px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  transform: scaleX(0);\n  transform-origin: left;\n  transition: transform 0.3s ease;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]:hover::before {\n  transform: scaleX(1);\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\d558\\d488[_ngcontent-%COMP%]  {\n  border-color: rgba(156, 163, 175, 0.5);\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\d558\\d488[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #9ca3af 0%,\n      #6b7280 100%);\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\c911\\d488[_ngcontent-%COMP%]  {\n  border-color: rgba(59, 130, 246, 0.5);\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\c911\\d488[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\c0c1\\d488[_ngcontent-%COMP%]  {\n  border-color: rgba(168, 85, 247, 0.5);\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\c0c1\\d488[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #a855f7 0%,\n      #9333ea 100%);\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\adf9\\d488[_ngcontent-%COMP%]  {\n  border-color: rgba(251, 191, 36, 0.5);\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\adf9\\d488[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #fbbf24 0%,\n      #f59e0b 100%);\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 32px rgba(102, 126, 234, 0.25);\n  border-color: #667eea;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 16px;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]   .elixir-names[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]   .elixir-names[_ngcontent-%COMP%]   .elixir-chinese[_ngcontent-%COMP%] {\n  font-size: 1.4rem;\n  font-weight: 800;\n  color: var(--text-primary);\n  margin: 0;\n  line-height: 1.2;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]   .elixir-names[_ngcontent-%COMP%]   .elixir-korean[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  color: var(--text-secondary);\n  margin: 0;\n  font-weight: 500;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]   .elixir-grade[_ngcontent-%COMP%] {\n  padding: 8px 14px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 20px;\n  color: white;\n  font-size: 0.85rem;\n  font-weight: 700;\n  white-space: nowrap;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-type[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-type[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%] {\n  padding: 8px 14px;\n  background: rgba(102, 126, 234, 0.15);\n  border: 1px solid rgba(102, 126, 234, 0.3);\n  border-radius: 20px;\n  color: #667eea;\n  font-size: 0.85rem;\n  font-weight: 600;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-type[_ngcontent-%COMP%]   .rarity-stars[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 4px;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-type[_ngcontent-%COMP%]   .rarity-stars[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%] {\n  font-size: 1rem;\n  filter: drop-shadow(0 2px 4px rgba(251, 191, 36, 0.5));\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-description[_ngcontent-%COMP%] {\n  margin-bottom: 16px;\n  padding: 14px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border-left: 3px solid #667eea;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-size: 0.95rem;\n  line-height: 1.6;\n  margin: 0;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%] {\n  margin-bottom: 16px;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 12px;\n  background: var(--bg-tertiary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  margin-bottom: 8px;\n  transition: all 0.2s ease;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]:hover {\n  background: rgba(102, 126, 234, 0.1);\n  border-color: rgba(102, 126, 234, 0.3);\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-icon[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-text[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-size: 0.9rem;\n  font-weight: 500;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-warning[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 12px;\n  background: rgba(239, 68, 68, 0.1);\n  border: 1px solid rgba(239, 68, 68, 0.3);\n  border-radius: 10px;\n  margin-bottom: 16px;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-warning[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%] {\n  font-size: 1.3rem;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%] {\n  color: #ef4444;\n  font-size: 0.9rem;\n  font-weight: 600;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-footer[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 16px;\n  border-top: 1px solid var(--border-color);\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-footer[_ngcontent-%COMP%]   .elixir-price[_ngcontent-%COMP%] {\n  color: #ffd700;\n  font-weight: 700;\n  font-size: 1.1rem;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-footer[_ngcontent-%COMP%]   .use-elixir-btn[_ngcontent-%COMP%] {\n  padding: 8px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-footer[_ngcontent-%COMP%]   .use-elixir-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n}\n.elixir-section[_ngcontent-%COMP%]   .no-elixir[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 60px 20px;\n}\n.elixir-section[_ngcontent-%COMP%]   .no-elixir[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: rgba(255, 255, 255, 0.6);\n  font-size: 1.1rem;\n}\n.meridians-section[_ngcontent-%COMP%] {\n  max-width: 1000px;\n  margin: 0 auto;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-info[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 40px;\n  padding: 20px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-size: 1.2rem;\n  font-weight: 700;\n  margin: 0;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%] {\n  position: relative;\n  width: 100%;\n  max-width: 600px;\n  height: 600px;\n  margin: 0 auto 40px auto;\n  background:\n    radial-gradient(\n      circle,\n      rgba(102, 126, 234, 0.05) 0%,\n      transparent 70%);\n  border-radius: 50%;\n  border: 2px solid rgba(102, 126, 234, 0.2);\n  box-shadow: 0 8px 32px rgba(102, 126, 234, 0.1);\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point[_ngcontent-%COMP%] {\n  position: absolute;\n  transform: translate(-50%, -50%);\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point[_ngcontent-%COMP%]   .point-circle[_ngcontent-%COMP%] {\n  width: 64px;\n  height: 64px;\n  border-radius: 50%;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point[_ngcontent-%COMP%]   .point-circle[_ngcontent-%COMP%]   .point-number[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-weight: 800;\n  font-size: 1.3rem;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point.opened[_ngcontent-%COMP%]   .point-circle[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-color: transparent;\n  box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2), 0 8px 24px rgba(102, 126, 234, 0.4);\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point.opened[_ngcontent-%COMP%]   .point-circle[_ngcontent-%COMP%]   .point-number[_ngcontent-%COMP%] {\n  color: white;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point[_ngcontent-%COMP%]:hover   .point-circle[_ngcontent-%COMP%] {\n  transform: scale(1.15);\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  padding: 24px;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  background: transparent;\n  transition: background 0.3s ease;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item.opened[_ngcontent-%COMP%] {\n  border-color: rgba(102, 126, 234, 0.5);\n  background: rgba(102, 126, 234, 0.05);\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item.opened[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      180deg,\n      #667eea 0%,\n      #764ba2 100%);\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]:hover {\n  transform: translateX(6px);\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.2);\n  border-color: #667eea;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-number[_ngcontent-%COMP%] {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  background: rgba(102, 126, 234, 0.15);\n  border: 2px solid rgba(102, 126, 234, 0.3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 800;\n  color: var(--text-primary);\n  font-size: 1.2rem;\n  flex-shrink: 0;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 1.3rem;\n  color: var(--text-primary);\n  margin: 0 0 8px 0;\n  font-weight: 700;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  margin: 0 0 12px 0;\n  line-height: 1.5;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-progress[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%] {\n  flex: 1;\n  height: 14px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 7px;\n  overflow: hidden;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  transition: width 0.5s ease;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  color: var(--text-primary);\n  font-size: 0.9rem;\n  font-weight: 600;\n  font-variant-numeric: tabular-nums;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-bonus[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-top: 12px;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-bonus[_ngcontent-%COMP%]   .bonus-item[_ngcontent-%COMP%] {\n  padding: 6px 14px;\n  background: rgba(102, 126, 234, 0.15);\n  border: 1px solid rgba(102, 126, 234, 0.3);\n  border-radius: 20px;\n  color: #667eea;\n  font-size: 0.85rem;\n  font-weight: 600;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%] {\n  flex-shrink: 0;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%]   .status-opened[_ngcontent-%COMP%] {\n  color: #667eea;\n  font-weight: 700;\n  font-size: 1.1rem;\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%]   .open-btn[_ngcontent-%COMP%] {\n  padding: 12px 28px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  font-weight: 700;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%]   .open-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n}\n.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%]   .open-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n}\n@keyframes _ngcontent-%COMP%_fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes _ngcontent-%COMP%_shimmer {\n  0% {\n    transform: translateX(-100%);\n  }\n  100% {\n    transform: translateX(200%);\n  }\n}\n@keyframes _ngcontent-%COMP%_pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.1);\n    opacity: 0.8;\n  }\n}\n.battle-actions[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  gap: 12px;\n  padding: 20px;\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 12px;\n  margin: 16px 0;\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%] {\n  padding: 16px 12px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.2) 0%,\n      rgba(118, 75, 162, 0.2) 100%);\n  border: 2px solid rgba(102, 126, 234, 0.5);\n  border-radius: 10px;\n  color: white;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%] {\n  font-size: 1.8rem;\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  transform: translateY(-3px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  filter: grayscale(0.5);\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn.attack-btn[_ngcontent-%COMP%] {\n  border-color: rgba(255, 100, 100, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 100, 100, 0.2) 0%,\n      rgba(195, 20, 50, 0.2) 100%);\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn.attack-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  box-shadow: 0 6px 20px rgba(255, 100, 100, 0.4);\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn.skill-btn[_ngcontent-%COMP%] {\n  border-color: rgba(138, 43, 226, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(138, 43, 226, 0.2) 0%,\n      rgba(102, 126, 234, 0.2) 100%);\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn.skill-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  box-shadow: 0 6px 20px rgba(138, 43, 226, 0.4);\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn.defend-btn[_ngcontent-%COMP%] {\n  border-color: rgba(100, 200, 255, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(100, 200, 255, 0.2) 0%,\n      rgba(64, 156, 255, 0.2) 100%);\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn.defend-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  box-shadow: 0 6px 20px rgba(100, 200, 255, 0.4);\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn.potion-btn[_ngcontent-%COMP%] {\n  border-color: rgba(50, 205, 50, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(50, 205, 50, 0.2) 0%,\n      rgba(34, 139, 34, 0.2) 100%);\n}\n.battle-actions[_ngcontent-%COMP%]   .action-btn.potion-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  box-shadow: 0 6px 20px rgba(50, 205, 50, 0.4);\n}\n.martial-skills-section[_ngcontent-%COMP%] {\n  padding: 20px;\n  background: rgba(0, 0, 0, 0.3);\n  border: 2px solid rgba(195, 20, 50, 0.3);\n  border-radius: 12px;\n  margin: 16px 0;\n}\n.martial-skills-section[_ngcontent-%COMP%]   .skills-title[_ngcontent-%COMP%] {\n  font-size: 1.3rem;\n  color: #ffd700;\n  margin: 0 0 16px 0;\n  text-align: center;\n  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\n  gap: 12px;\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%] {\n  padding: 14px;\n  background: rgba(0, 0, 0, 0.4);\n  border: 2px solid rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  color: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  position: relative;\n  overflow: hidden;\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background:\n    linear-gradient(\n      135deg,\n      transparent 0%,\n      rgba(255, 215, 0, 0.1) 100%);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled)::before {\n  opacity: 1;\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn.grade-\\d558\\c2b9[_ngcontent-%COMP%]  {\n  border-color: rgba(150, 150, 150, 0.4);\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn.grade-\\c911\\c2b9[_ngcontent-%COMP%]  {\n  border-color: rgba(100, 200, 255, 0.4);\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn.grade-\\c0c1\\c2b9[_ngcontent-%COMP%]  {\n  border-color: rgba(138, 43, 226, 0.5);\n  box-shadow: 0 0 10px rgba(138, 43, 226, 0.2);\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn.grade-\\c808\\d559[_ngcontent-%COMP%]  {\n  border-color: rgba(255, 215, 0, 0.6);\n  box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);\n  animation: _ngcontent-%COMP%_skillPulse 2s ease-in-out infinite;\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 25px rgba(195, 20, 50, 0.4);\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  filter: grayscale(0.7);\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:disabled::after {\n  content: "\\b0b4\\acf5  \\bd80\\c871";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: rgba(0, 0, 0, 0.8);\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  color: rgb(255, 100, 100);\n  white-space: nowrap;\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n  position: relative;\n  z-index: 1;\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]   .skill-chinese[_ngcontent-%COMP%] {\n  font-size: 1.3rem;\n  font-weight: 700;\n  color: #ffd700;\n  text-shadow: 0 0 8px rgba(255, 215, 0, 0.4);\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]   .skill-korean[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: rgba(255, 255, 255, 0.8);\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  padding: 4px 8px;\n  background: rgba(195, 20, 50, 0.3);\n  border-radius: 6px;\n  position: relative;\n  z-index: 1;\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]   .cost-icon[_ngcontent-%COMP%] {\n  font-size: 1rem;\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]   .cost-value[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n  font-weight: 700;\n  color: rgb(255, 150, 150);\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  position: relative;\n  z-index: 1;\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]   .damage-icon[_ngcontent-%COMP%] {\n  font-size: 1rem;\n}\n.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]   .damage-value[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  font-weight: 700;\n  color: rgb(255, 200, 100);\n}\n.internal-power-bar[_ngcontent-%COMP%] {\n  margin-top: 8px;\n}\n.internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 4px;\n}\n.internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: rgb(255, 150, 150);\n  text-shadow: 0 0 5px rgba(255, 100, 100, 0.5);\n}\n.internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: rgba(255, 255, 255, 0.9);\n}\n.internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%] {\n  height: 12px;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 6px;\n  overflow: hidden;\n  border: 1px solid rgba(255, 100, 100, 0.3);\n}\n.internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.internal-power[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #ff6b6b 0%,\n      #ffd700 50%,\n      #ff6b6b 100%);\n  background-size: 200% 100%;\n  animation: powerFlow 3s ease-in-out infinite;\n  box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);\n}\n@keyframes _ngcontent-%COMP%_skillPulse {\n  0%, 100% {\n    box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);\n  }\n  50% {\n    box-shadow: 0 0 25px rgba(255, 215, 0, 0.5);\n  }\n}\n.epic-battle[_ngcontent-%COMP%] {\n  position: relative;\n  overflow: hidden;\n  background:\n    linear-gradient(\n      135deg,\n      #0f0c29 0%,\n      #302b63 50%,\n      #24243e 100%);\n  border-radius: 20px;\n  box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6), inset 0 0 80px rgba(138, 43, 226, 0.1);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-background[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: none;\n  overflow: hidden;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-background[_ngcontent-%COMP%]   .battle-particles[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-image:\n    radial-gradient(\n      2px 2px at 20% 30%,\n      rgba(255, 255, 255, 0.3),\n      transparent),\n    radial-gradient(\n      2px 2px at 60% 70%,\n      rgba(138, 43, 226, 0.3),\n      transparent),\n    radial-gradient(\n      1px 1px at 50% 50%,\n      rgba(255, 215, 0, 0.3),\n      transparent),\n    radial-gradient(\n      1px 1px at 80% 10%,\n      rgba(195, 20, 50, 0.3),\n      transparent);\n  background-size:\n    200% 200%,\n    180% 180%,\n    220% 220%,\n    190% 190%;\n  animation: _ngcontent-%COMP%_particleFloat 20s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-background[_ngcontent-%COMP%]   .battle-glow[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(138, 43, 226, 0.15) 0%,\n      transparent 70%);\n  animation: _ngcontent-%COMP%_glowPulse 4s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%] {\n  position: relative;\n  z-index: 1;\n  padding: 24px 32px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(138, 43, 226, 0.3) 0%,\n      rgba(195, 20, 50, 0.3) 100%);\n  border-bottom: 3px solid rgba(255, 215, 0, 0.3);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 2rem;\n  font-weight: 800;\n  color: white;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  text-shadow: 0 0 20px rgba(255, 215, 0, 0.6), 0 0 40px rgba(138, 43, 226, 0.4);\n  animation: _ngcontent-%COMP%_titlePulse 2s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .battle-title-icon[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_iconSpin 3s linear infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 24px;\n  background: rgba(0, 0, 0, 0.4);\n  border-radius: 12px;\n  border: 2px solid rgba(255, 215, 0, 0.3);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]   .turn-label[_ngcontent-%COMP%] {\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 1rem;\n  font-weight: 600;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]   .turn-value[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  font-weight: 800;\n  padding: 4px 12px;\n  border-radius: 6px;\n  transition: all 0.3s ease;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]   .turn-value.player-turn[_ngcontent-%COMP%] {\n  color: #64c8ff;\n  background: rgba(100, 200, 255, 0.2);\n  box-shadow: 0 0 20px rgba(100, 200, 255, 0.4);\n  animation: _ngcontent-%COMP%_turnGlow 1s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]   .turn-value.enemy-turn[_ngcontent-%COMP%] {\n  color: #ff6464;\n  background: rgba(255, 100, 100, 0.2);\n  box-shadow: 0 0 20px rgba(255, 100, 100, 0.4);\n  animation: _ngcontent-%COMP%_turnGlow 1s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-arena[_ngcontent-%COMP%] {\n  position: relative;\n  z-index: 1;\n  padding: 40px 20px;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  gap: 40px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%] {\n  flex: 1;\n  max-width: 400px;\n  position: relative;\n  transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.active[_ngcontent-%COMP%] {\n  transform: scale(1.05);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.active[_ngcontent-%COMP%]   .character-glow[_ngcontent-%COMP%] {\n  opacity: 1;\n  animation: _ngcontent-%COMP%_activeGlow 1.5s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.taking-damage[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_shakeDamage 0.5s ease-in-out;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.attacking[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_attackPulse 0.8s ease-out;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-glow[_ngcontent-%COMP%] {\n  position: absolute;\n  top: -20px;\n  left: -20px;\n  right: -20px;\n  bottom: -20px;\n  background:\n    radial-gradient(\n      circle,\n      rgba(100, 200, 255, 0.3) 0%,\n      transparent 70%);\n  border-radius: 50%;\n  opacity: 0;\n  transition: opacity 0.5s ease;\n  pointer-events: none;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-glow.enemy-glow[_ngcontent-%COMP%] {\n  background:\n    radial-gradient(\n      circle,\n      rgba(255, 100, 100, 0.3) 0%,\n      transparent 70%);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 60, 0.9) 0%,\n      rgba(20, 20, 40, 0.9) 100%);\n  border-radius: 20px;\n  padding: 24px;\n  border: 3px solid rgba(100, 200, 255, 0.3);\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), inset 0 0 40px rgba(100, 200, 255, 0.05);\n  position: relative;\n  overflow: hidden;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    linear-gradient(\n      45deg,\n      transparent 30%,\n      rgba(255, 255, 255, 0.05) 50%,\n      transparent 70%);\n  animation: _ngcontent-%COMP%_cardShine 3s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-card.enemy-card[_ngcontent-%COMP%] {\n  border-color: rgba(255, 100, 100, 0.3);\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), inset 0 0 40px rgba(255, 100, 100, 0.05);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%] {\n  position: relative;\n  width: 120px;\n  height: 120px;\n  margin: 0 auto 16px;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%] {\n  position: absolute;\n  top: -10px;\n  left: -10px;\n  right: -10px;\n  bottom: -10px;\n  border: 3px solid rgba(100, 200, 255, 0.5);\n  border-radius: 50%;\n  animation: _ngcontent-%COMP%_ringRotate 4s linear infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]::before, \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  background: rgb(100, 200, 255);\n  border-radius: 50%;\n  box-shadow: 0 0 15px rgba(100, 200, 255, 0.8);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]::before {\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]::after {\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring.enemy-ring[_ngcontent-%COMP%] {\n  border-color: rgba(255, 100, 100, 0.5);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring.enemy-ring[_ngcontent-%COMP%]::before, \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring.enemy-ring[_ngcontent-%COMP%]::after {\n  background: rgb(255, 100, 100);\n  box-shadow: 0 0 15px rgba(255, 100, 100, 0.8);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%] {\n  font-size: 5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background:\n    radial-gradient(\n      circle,\n      rgba(138, 43, 226, 0.2) 0%,\n      transparent 70%);\n  border-radius: 50%;\n  filter: drop-shadow(0 0 20px rgba(138, 43, 226, 0.5));\n  animation: _ngcontent-%COMP%_avatarFloat 3s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: 5px;\n  right: 5px;\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff6b6b 100%);\n  color: white;\n  font-weight: 800;\n  font-size: 0.9rem;\n  padding: 4px 12px;\n  border-radius: 20px;\n  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);\n  animation: _ngcontent-%COMP%_badgePulse 2s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%] {\n  font-size: 1.6rem;\n  font-weight: 800;\n  color: white;\n  text-align: center;\n  margin-bottom: 20px;\n  text-shadow: 0 0 10px rgba(100, 200, 255, 0.5), 0 2px 4px rgba(0, 0, 0, 0.5);\n  letter-spacing: 2px;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-bottom: 16px;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 6px;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-icon[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-icon[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-icon[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  filter: drop-shadow(0 0 5px currentColor);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%] {\n  font-weight: 700;\n  font-size: 1rem;\n  margin-left: 8px;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  font-weight: 700;\n  color: rgba(255, 255, 255, 0.9);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%] {\n  height: 16px;\n  background: rgba(0, 0, 0, 0.6);\n  border-radius: 10px;\n  overflow: hidden;\n  border: 2px solid rgba(255, 255, 255, 0.2);\n  position: relative;\n  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.5);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  position: relative;\n  transition: width 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]   .bar-shine[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]   .bar-shine[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]   .bar-shine[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.4) 50%,\n      transparent 100%);\n  animation: _ngcontent-%COMP%_barShine 2s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #ff6b6b 0%,\n      #ee5a6f 100%);\n  box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_hpWarning 1s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.critical[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.critical[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.critical[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_hpCritical 0.5s ease-in-out infinite;\n  box-shadow: 0 0 25px rgba(255, 0, 0, 0.8);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.enemy-hp[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.enemy-hp[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.enemy-hp[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #c31432 0%,\n      #8e0000 100%);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  box-shadow: 0 0 15px rgba(102, 126, 234, 0.5);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.internal-power[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.internal-power[_ngcontent-%COMP%], \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.internal-power[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #ff6b6b 0%,\n      #ffd700 50%,\n      #ff6b6b 100%);\n  background-size: 200% 100%;\n  box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);\n  animation: powerFlow 3s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats-row[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-around;\n  gap: 12px;\n  margin-top: 16px;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 12px;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 10px;\n  border: 2px solid rgba(255, 255, 255, 0.1);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 1.3rem;\n  filter: drop-shadow(0 0 5px currentColor);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  font-weight: 800;\n  color: white;\n  text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%] {\n  position: relative;\n  flex-shrink: 0;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%] {\n  width: 100px;\n  height: 100px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  box-shadow: 0 0 40px rgba(102, 126, 234, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.2);\n  animation: _ngcontent-%COMP%_vsRotate 4s linear infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]::before, \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  border-radius: 50%;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]::before {\n  top: -10px;\n  left: -10px;\n  right: -10px;\n  bottom: -10px;\n  border: 3px dashed rgba(255, 215, 0, 0.5);\n  animation: _ngcontent-%COMP%_ringRotate 6s linear infinite reverse;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]::after {\n  top: -20px;\n  left: -20px;\n  right: -20px;\n  bottom: -20px;\n  border: 2px dotted rgba(255, 255, 255, 0.3);\n  animation: _ngcontent-%COMP%_ringRotate 8s linear infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-text[_ngcontent-%COMP%] {\n  font-size: 2rem;\n  font-weight: 900;\n  color: white;\n  text-shadow: 0 0 20px rgb(255, 215, 0), 0 0 40px rgba(138, 43, 226, 0.8);\n  animation: _ngcontent-%COMP%_vsScale 2s ease-in-out infinite;\n  z-index: 1;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]::before, \n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]::after {\n  content: "\\26a1";\n  position: absolute;\n  font-size: 1.5rem;\n  animation: _ngcontent-%COMP%_lightningFlash 2s ease-in-out infinite;\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]::before {\n  top: -10px;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]::after {\n  bottom: -10px;\n  left: 50%;\n  transform: translateX(-50%);\n  animation-delay: 1s;\n}\n.epic-actions[_ngcontent-%COMP%] {\n  position: relative;\n  z-index: 1;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  gap: 16px;\n  padding: 24px 32px;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(0, 0, 0, 0.3) 0%,\n      rgba(0, 0, 0, 0.5) 100%);\n  border-radius: 16px;\n  margin: 20px 32px;\n  border: 2px solid rgba(255, 215, 0, 0.2);\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%] {\n  position: relative;\n  padding: 20px 16px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.3) 0%,\n      rgba(118, 75, 162, 0.3) 100%);\n  border: 3px solid rgba(102, 126, 234, 0.6);\n  border-radius: 14px;\n  color: white;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  overflow: hidden;\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-glow[_ngcontent-%COMP%] {\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    radial-gradient(\n      circle,\n      rgba(255, 255, 255, 0.2) 0%,\n      transparent 70%);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-particles[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image:\n    radial-gradient(\n      2px 2px at 20% 30%,\n      rgba(255, 255, 255, 0.5),\n      transparent),\n    radial-gradient(\n      2px 2px at 80% 70%,\n      rgba(255, 255, 255, 0.5),\n      transparent);\n  background-size: 100% 100%;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%] {\n  font-size: 2.2rem;\n  filter: drop-shadow(0 0 10px currentColor);\n  transition: transform 0.3s ease;\n  z-index: 1;\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%] {\n  font-size: 1rem;\n  letter-spacing: 1px;\n  z-index: 1;\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-cost[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: rgba(255, 255, 255, 0.7);\n  z-index: 1;\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  transform: translateY(-5px) scale(1.05);\n  box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .btn-glow[_ngcontent-%COMP%] {\n  opacity: 1;\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .btn-particles[_ngcontent-%COMP%] {\n  opacity: 1;\n  animation: _ngcontent-%COMP%_particleRise 2s ease-out infinite;\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .btn-icon[_ngcontent-%COMP%] {\n  transform: scale(1.2) rotate(5deg);\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:active:not(:disabled) {\n  transform: translateY(-3px) scale(1.02);\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  filter: grayscale(0.7);\n  transform: scale(0.95);\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn.attack-btn[_ngcontent-%COMP%] {\n  border-color: rgba(255, 100, 100, 0.6);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 100, 100, 0.3) 0%,\n      rgba(195, 20, 50, 0.3) 100%);\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn.attack-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  box-shadow: 0 15px 40px rgba(255, 100, 100, 0.6);\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn.skill-btn[_ngcontent-%COMP%] {\n  border-color: rgba(138, 43, 226, 0.6);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(138, 43, 226, 0.3) 0%,\n      rgba(102, 126, 234, 0.3) 100%);\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn.skill-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  box-shadow: 0 15px 40px rgba(138, 43, 226, 0.6);\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn.defend-btn[_ngcontent-%COMP%] {\n  border-color: rgba(100, 200, 255, 0.6);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(100, 200, 255, 0.3) 0%,\n      rgba(64, 156, 255, 0.3) 100%);\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn.defend-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  box-shadow: 0 15px 40px rgba(100, 200, 255, 0.6);\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn.potion-btn[_ngcontent-%COMP%] {\n  border-color: rgba(50, 205, 50, 0.6);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(50, 205, 50, 0.3) 0%,\n      rgba(34, 139, 34, 0.3) 100%);\n}\n.epic-actions[_ngcontent-%COMP%]   .action-btn.potion-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  box-shadow: 0 15px 40px rgba(50, 205, 50, 0.6);\n}\n.epic-skills[_ngcontent-%COMP%] {\n  position: relative;\n  z-index: 1;\n  padding: 28px 32px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(195, 20, 50, 0.2) 0%,\n      rgba(36, 11, 54, 0.3) 100%);\n  border: 3px solid rgba(255, 215, 0, 0.4);\n  border-radius: 16px;\n  margin: 20px 32px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), inset 0 0 40px rgba(255, 215, 0, 0.05);\n}\n.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 24px;\n}\n.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]   .skills-title[_ngcontent-%COMP%] {\n  font-size: 1.6rem;\n  color: #ffd700;\n  margin: 0 0 8px 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 16px;\n  text-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4);\n}\n.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]   .skills-title[_ngcontent-%COMP%]   .title-decoration[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_decorationPulse 2s ease-in-out infinite;\n}\n.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]   .skills-title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%] {\n  letter-spacing: 4px;\n}\n.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]   .skills-subtitle[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  color: rgba(255, 215, 0, 0.7);\n  letter-spacing: 6px;\n  font-weight: 300;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 16px;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%] {\n  position: relative;\n  padding: 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.6) 0%,\n      rgba(30, 30, 60, 0.6) 100%);\n  border: 3px solid rgba(255, 255, 255, 0.2);\n  border-radius: 14px;\n  color: white;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  overflow: hidden;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-glow[_ngcontent-%COMP%] {\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    radial-gradient(\n      circle,\n      rgba(255, 215, 0, 0.3) 0%,\n      transparent 70%);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-particles[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image:\n    radial-gradient(\n      1px 1px at 20% 30%,\n      rgba(255, 215, 0, 0.6),\n      transparent),\n    radial-gradient(\n      1px 1px at 80% 70%,\n      rgba(255, 215, 0, 0.6),\n      transparent),\n    radial-gradient(\n      1px 1px at 50% 50%,\n      rgba(255, 215, 0, 0.6),\n      transparent);\n  background-size: 100% 100%;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\d558\\c2b9[_ngcontent-%COMP%]  {\n  border-color: rgba(150, 150, 150, 0.5);\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\c911\\c2b9[_ngcontent-%COMP%]  {\n  border-color: rgba(100, 200, 255, 0.5);\n  box-shadow: 0 0 15px rgba(100, 200, 255, 0.2);\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\c0c1\\c2b9[_ngcontent-%COMP%]  {\n  border-color: rgba(138, 43, 226, 0.6);\n  box-shadow: 0 0 20px rgba(138, 43, 226, 0.3);\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\c808\\d559[_ngcontent-%COMP%]  {\n  border-color: rgba(255, 215, 0, 0.8);\n  box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);\n  animation: _ngcontent-%COMP%_epicSkillGlow 2s ease-in-out infinite;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\c808\\d559[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: -2px;\n  left: -2px;\n  right: -2px;\n  bottom: -2px;\n  background:\n    linear-gradient(\n      45deg,\n      rgba(255, 215, 0, 0) 0%,\n      rgba(255, 215, 0, 0.5) 50%,\n      rgba(255, 215, 0, 0) 100%);\n  border-radius: 14px;\n  animation: _ngcontent-%COMP%_borderFlow 3s linear infinite;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  transform: translateY(-8px) scale(1.05);\n  box-shadow: 0 20px 50px rgba(255, 215, 0, 0.4);\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .skill-glow[_ngcontent-%COMP%] {\n  opacity: 1;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .skill-particles[_ngcontent-%COMP%] {\n  opacity: 1;\n  animation: _ngcontent-%COMP%_particleRise 2s ease-out infinite;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n  filter: grayscale(0.8);\n  transform: scale(0.95);\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:disabled::after {\n  content: "\\b0b4\\acf5  \\bd80\\c871";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: rgba(0, 0, 0, 0.9);\n  padding: 8px 16px;\n  border-radius: 8px;\n  font-size: 0.85rem;\n  color: #ff6464;\n  font-weight: 800;\n  white-space: nowrap;\n  box-shadow: 0 0 20px rgba(255, 100, 100, 0.5);\n  z-index: 10;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n  position: relative;\n  z-index: 1;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]   .skill-chinese[_ngcontent-%COMP%] {\n  font-size: 1.6rem;\n  font-weight: 800;\n  color: #ffd700;\n  text-shadow: 0 0 15px rgba(255, 215, 0, 0.6), 0 2px 4px rgba(0, 0, 0, 0.5);\n  letter-spacing: 2px;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]   .skill-korean[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  color: rgba(255, 255, 255, 0.9);\n  font-weight: 600;\n  letter-spacing: 1px;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-around;\n  gap: 12px;\n  position: relative;\n  z-index: 1;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  padding: 8px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(195, 20, 50, 0.4) 0%,\n      rgba(138, 43, 226, 0.4) 100%);\n  border-radius: 8px;\n  border: 2px solid rgba(195, 20, 50, 0.5);\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]   .cost-icon[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  filter: drop-shadow(0 0 5px currentColor);\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]   .cost-value[_ngcontent-%COMP%] {\n  font-size: 1rem;\n  font-weight: 800;\n  color: #ff9999;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  padding: 8px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.3) 0%,\n      rgba(255, 140, 0, 0.3) 100%);\n  border-radius: 8px;\n  border: 2px solid rgba(255, 215, 0, 0.5);\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]   .damage-icon[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  filter: drop-shadow(0 0 5px currentColor);\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]   .damage-value[_ngcontent-%COMP%] {\n  font-size: 1rem;\n  font-weight: 800;\n  color: #ffd700;\n}\n.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-grade-label[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.8) 0%,\n      rgba(30, 30, 60, 0.8) 100%);\n  color: #ffd700;\n  font-size: 0.75rem;\n  font-weight: 800;\n  padding: 4px 10px;\n  border-radius: 6px;\n  border: 1px solid rgba(255, 215, 0, 0.5);\n  z-index: 1;\n}\n.epic-log[_ngcontent-%COMP%] {\n  position: relative;\n  z-index: 1;\n  margin: 20px 32px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.6) 0%,\n      rgba(30, 30, 60, 0.6) 100%);\n  border: 2px solid rgba(138, 43, 226, 0.3);\n  border-radius: 14px;\n  max-height: 300px;\n  overflow-y: auto;\n  box-shadow: inset 0 0 40px rgba(0, 0, 0, 0.5);\n}\n.epic-log[_ngcontent-%COMP%]   .log-header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 2px solid rgba(138, 43, 226, 0.3);\n}\n.epic-log[_ngcontent-%COMP%]   .log-header[_ngcontent-%COMP%]   .log-icon[_ngcontent-%COMP%] {\n  font-size: 1.5rem;\n  filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5));\n}\n.epic-log[_ngcontent-%COMP%]   .log-header[_ngcontent-%COMP%]   .log-title[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: #ffd700;\n  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);\n  letter-spacing: 2px;\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 8px;\n  border-left: 4px solid rgba(138, 43, 226, 0.5);\n  animation: _ngcontent-%COMP%_logEntrySlide 0.3s ease-out;\n  transition: all 0.3s ease;\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]:hover {\n  background: rgba(0, 0, 0, 0.5);\n  transform: translateX(5px);\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%] {\n  flex-shrink: 0;\n  width: 40px;\n  height: 40px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 800;\n  font-size: 0.9rem;\n  color: white;\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%] {\n  flex: 1;\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  line-height: 1.5;\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%] {\n  border-left-color: rgba(255, 100, 100, 0.8);\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ff6b6b 0%,\n      #c31432 100%);\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%] {\n  color: #ff9999;\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%] {\n  border-left-color: rgba(50, 205, 50, 0.8);\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #32cd32 0%,\n      #228b22 100%);\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%] {\n  color: #90ee90;\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.critical[_ngcontent-%COMP%] {\n  border-left-color: rgba(255, 215, 0, 0.8);\n  animation: _ngcontent-%COMP%_criticalPulse 0.5s ease-out, _ngcontent-%COMP%_logEntrySlide 0.3s ease-out;\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.critical[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff6b6b 100%);\n  animation: _ngcontent-%COMP%_criticalShake 0.5s ease-out;\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.critical[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%] {\n  color: #ffd700;\n  font-weight: 700;\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.combo[_ngcontent-%COMP%] {\n  border-left-color: rgba(255, 140, 0, 0.8);\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.combo[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ff8c00 0%,\n      #ff6347 100%);\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.combo[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%] {\n  color: #ffb347;\n  font-weight: 600;\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.special[_ngcontent-%COMP%] {\n  border-left-color: rgba(138, 43, 226, 0.8);\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.special[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8a2be2 0%,\n      #4b0082 100%);\n}\n.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.special[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%] {\n  color: #da70d6;\n}\n.epic-result[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n  animation: _ngcontent-%COMP%_resultFadeIn 0.5s ease-out;\n}\n.epic-result[_ngcontent-%COMP%]   .result-overlay[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n}\n.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%] {\n  position: relative;\n  z-index: 1;\n  text-align: center;\n  padding: 60px 80px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 60, 0.95) 0%,\n      rgba(20, 20, 40, 0.95) 100%);\n  border-radius: 30px;\n  border: 4px solid rgba(255, 215, 0, 0.5);\n  box-shadow: 0 40px 100px rgba(0, 0, 0, 0.8), inset 0 0 60px rgba(255, 215, 0, 0.1);\n  animation: _ngcontent-%COMP%_resultScale 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%] {\n  font-size: 8rem;\n  animation: _ngcontent-%COMP%_iconBounce 0.8s ease-out, _ngcontent-%COMP%_iconSpin 2s ease-in-out infinite;\n  filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.8));\n  margin-bottom: 24px;\n}\n.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-icon.defeat[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 30px rgba(255, 100, 100, 0.8));\n}\n.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-title[_ngcontent-%COMP%] {\n  font-size: 4rem;\n  font-weight: 900;\n  color: #ffd700;\n  margin: 0 0 16px 0;\n  text-shadow: 0 0 30px rgb(255, 215, 0), 0 0 60px rgba(255, 215, 0, 0.5);\n  letter-spacing: 8px;\n  animation: _ngcontent-%COMP%_titleBounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-title.defeat-title[_ngcontent-%COMP%] {\n  color: #ff6464;\n  text-shadow: 0 0 30px rgb(255, 100, 100), 0 0 60px rgba(255, 100, 100, 0.5);\n}\n.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-message[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  color: rgba(255, 255, 255, 0.8);\n  margin: 0;\n  animation: _ngcontent-%COMP%_messageFade 1s ease-in-out 0.5s both;\n}\n@keyframes _ngcontent-%COMP%_particleFloat {\n  0%, 100% {\n    background-position:\n      0% 0%,\n      100% 100%,\n      50% 50%,\n      80% 20%;\n  }\n  50% {\n    background-position:\n      100% 100%,\n      0% 0%,\n      70% 70%,\n      20% 80%;\n  }\n}\n@keyframes _ngcontent-%COMP%_glowPulse {\n  0%, 100% {\n    opacity: 0.3;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.6;\n    transform: scale(1.1);\n  }\n}\n@keyframes _ngcontent-%COMP%_titlePulse {\n  0%, 100% {\n    text-shadow: 0 0 20px rgba(255, 215, 0, 0.6), 0 0 40px rgba(138, 43, 226, 0.4);\n  }\n  50% {\n    text-shadow: 0 0 30px rgb(255, 215, 0), 0 0 60px rgba(138, 43, 226, 0.6);\n  }\n}\n@keyframes _ngcontent-%COMP%_iconSpin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_turnGlow {\n  0%, 100% {\n    box-shadow: 0 0 20px currentColor;\n  }\n  50% {\n    box-shadow: 0 0 40px currentColor;\n  }\n}\n@keyframes _ngcontent-%COMP%_shakeDamage {\n  0%, 100% {\n    transform: translateX(0) scale(1);\n  }\n  25% {\n    transform: translateX(-10px) scale(0.98);\n  }\n  75% {\n    transform: translateX(10px) scale(0.98);\n  }\n}\n@keyframes _ngcontent-%COMP%_attackPulse {\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.1);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n@keyframes _ngcontent-%COMP%_activeGlow {\n  0%, 100% {\n    box-shadow: 0 0 30px currentColor;\n  }\n  50% {\n    box-shadow: 0 0 60px currentColor;\n  }\n}\n@keyframes _ngcontent-%COMP%_cardShine {\n  0% {\n    transform: translateX(-100%) translateY(-100%) rotate(45deg);\n  }\n  100% {\n    transform: translateX(100%) translateY(100%) rotate(45deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_ringRotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_avatarFloat {\n  0%, 100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n@keyframes _ngcontent-%COMP%_badgePulse {\n  0%, 100% {\n    transform: scale(1);\n    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);\n  }\n  50% {\n    transform: scale(1.1);\n    box-shadow: 0 6px 25px rgba(255, 215, 0, 0.6);\n  }\n}\n@keyframes _ngcontent-%COMP%_barShine {\n  0% {\n    left: -100%;\n  }\n  100% {\n    left: 100%;\n  }\n}\n@keyframes _ngcontent-%COMP%_hpWarning {\n  0%, 100% {\n    box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(255, 107, 107, 0.8);\n  }\n}\n@keyframes _ngcontent-%COMP%_hpCritical {\n  0%, 100% {\n    box-shadow: 0 0 25px rgba(255, 0, 0, 0.8);\n  }\n  50% {\n    box-shadow: 0 0 50px rgb(255, 0, 0);\n  }\n}\n@keyframes _ngcontent-%COMP%_vsRotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_vsScale {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n}\n@keyframes _ngcontent-%COMP%_lightningFlash {\n  0%, 100% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n}\n@keyframes _ngcontent-%COMP%_particleRise {\n  0% {\n    background-position: 0% 0%;\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    background-position: 0% -100%;\n    opacity: 0;\n  }\n}\n@keyframes _ngcontent-%COMP%_epicSkillGlow {\n  0%, 100% {\n    box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);\n  }\n}\n@keyframes _ngcontent-%COMP%_borderFlow {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 200% 50%;\n  }\n}\n@keyframes _ngcontent-%COMP%_decorationPulse {\n  0%, 100% {\n    opacity: 0.5;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(1.2);\n  }\n}\n@keyframes _ngcontent-%COMP%_logEntrySlide {\n  from {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n@keyframes _ngcontent-%COMP%_criticalPulse {\n  0%, 100% {\n    background: rgba(0, 0, 0, 0.3);\n  }\n  50% {\n    background: rgba(255, 215, 0, 0.2);\n  }\n}\n@keyframes _ngcontent-%COMP%_criticalShake {\n  0%, 100% {\n    transform: rotate(0deg);\n  }\n  25% {\n    transform: rotate(-5deg);\n  }\n  75% {\n    transform: rotate(5deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_resultFadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes _ngcontent-%COMP%_resultScale {\n  from {\n    transform: scale(0.5);\n    opacity: 0;\n  }\n  to {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n@keyframes _ngcontent-%COMP%_iconBounce {\n  0% {\n    transform: translateY(-100px) scale(0);\n  }\n  60% {\n    transform: translateY(10px) scale(1.1);\n  }\n  80% {\n    transform: translateY(-5px) scale(0.95);\n  }\n  100% {\n    transform: translateY(0) scale(1);\n  }\n}\n@keyframes _ngcontent-%COMP%_titleBounce {\n  0% {\n    transform: scale(0);\n  }\n  60% {\n    transform: scale(1.1);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n@keyframes _ngcontent-%COMP%_messageFade {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n.epic-log-compact[_ngcontent-%COMP%] {\n  position: relative;\n  z-index: 1;\n  margin: 20px 32px;\n  padding: 16px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.5) 0%,\n      rgba(30, 30, 60, 0.5) 100%);\n  border: 2px solid rgba(138, 43, 226, 0.2);\n  border-radius: 14px;\n  min-height: 100px;\n  max-height: 120px;\n  overflow: hidden;\n  box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.4);\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  align-items: center;\n  justify-content: flex-start;\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%] {\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 12px;\n  background: rgba(0, 0, 0, 0.4);\n  border-radius: 20px;\n  border: 2px solid rgba(138, 43, 226, 0.4);\n  animation: _ngcontent-%COMP%_bubblePop 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n  transition: all 0.3s ease;\n  cursor: pointer;\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]:hover {\n  transform: scale(1.1);\n  z-index: 10;\n  box-shadow: 0 8px 25px rgba(138, 43, 226, 0.5);\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.player[_ngcontent-%COMP%] {\n  border-color: rgba(100, 200, 255, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(100, 200, 255, 0.15) 0%,\n      rgba(64, 156, 255, 0.15) 100%);\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.player[_ngcontent-%COMP%]:hover {\n  box-shadow: 0 8px 25px rgba(100, 200, 255, 0.5);\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.enemy[_ngcontent-%COMP%] {\n  border-color: rgba(255, 100, 100, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 100, 100, 0.15) 0%,\n      rgba(195, 20, 50, 0.15) 100%);\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.enemy[_ngcontent-%COMP%]:hover {\n  box-shadow: 0 8px 25px rgba(255, 100, 100, 0.5);\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.damage[_ngcontent-%COMP%] {\n  border-color: rgba(255, 100, 100, 0.6);\n  animation: _ngcontent-%COMP%_damageBubble 0.5s ease-out;\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.heal[_ngcontent-%COMP%] {\n  border-color: rgba(50, 205, 50, 0.6);\n  animation: _ngcontent-%COMP%_healBubble 0.5s ease-out;\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.critical[_ngcontent-%COMP%] {\n  border-color: rgba(255, 215, 0, 0.8);\n  border-width: 3px;\n  animation: _ngcontent-%COMP%_criticalBubble 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n  box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.critical[_ngcontent-%COMP%]   .log-icon-main[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_criticalBounce 0.6s ease-out infinite;\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.combo[_ngcontent-%COMP%] {\n  border-color: rgba(255, 140, 0, 0.6);\n  animation: _ngcontent-%COMP%_comboBubble 0.5s ease-out;\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.special[_ngcontent-%COMP%] {\n  border-color: rgba(138, 43, 226, 0.6);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(138, 43, 226, 0.2) 0%,\n      rgba(102, 126, 234, 0.2) 100%);\n  animation: _ngcontent-%COMP%_specialBubble 0.7s ease-out;\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.special[_ngcontent-%COMP%]   .log-icon-main[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_specialFloat 2s ease-in-out infinite;\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]   .log-icon-main[_ngcontent-%COMP%] {\n  font-size: 1.4rem;\n  filter: drop-shadow(0 0 8px currentColor);\n  flex-shrink: 0;\n  animation: _ngcontent-%COMP%_iconPulse 2s ease-in-out infinite;\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]   .log-text-compact[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-weight: 700;\n  white-space: nowrap;\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]   .log-text-compact[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  color: white;\n  font-weight: 900;\n  text-shadow: 0 0 10px currentColor, 0 2px 4px rgba(0, 0, 0, 0.5);\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]   .log-text-compact[_ngcontent-%COMP%]   .log-label[_ngcontent-%COMP%] {\n  font-size: 0.75rem;\n  color: rgba(255, 255, 255, 0.8);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  font-weight: 800;\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.damage[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%] {\n  color: #ff6b6b;\n  text-shadow: 0 0 15px rgba(255, 107, 107, 0.8), 0 2px 4px rgba(0, 0, 0, 0.5);\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.heal[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%] {\n  color: #32cd32;\n  text-shadow: 0 0 15px rgba(50, 205, 50, 0.8), 0 2px 4px rgba(0, 0, 0, 0.5);\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.critical[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%] {\n  color: #ffd700;\n  font-size: 1.3rem;\n  text-shadow: 0 0 20px rgb(255, 215, 0), 0 2px 4px rgba(0, 0, 0, 0.5);\n  animation: _ngcontent-%COMP%_criticalTextGlow 0.5s ease-in-out infinite;\n}\n.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.combo[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%] {\n  color: #ff8c00;\n  text-shadow: 0 0 15px rgba(255, 140, 0, 0.8), 0 2px 4px rgba(0, 0, 0, 0.5);\n}\n@keyframes _ngcontent-%COMP%_bubblePop {\n  0% {\n    transform: scale(0);\n    opacity: 0;\n  }\n  70% {\n    transform: scale(1.15);\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n@keyframes _ngcontent-%COMP%_damageBubble {\n  0%, 100% {\n    transform: scale(1);\n  }\n  25% {\n    transform: scale(1.1) rotate(-3deg);\n  }\n  75% {\n    transform: scale(1.1) rotate(3deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_healBubble {\n  0% {\n    transform: scale(0.8) translateY(10px);\n    opacity: 0;\n  }\n  100% {\n    transform: scale(1) translateY(0);\n    opacity: 1;\n  }\n}\n@keyframes _ngcontent-%COMP%_criticalBubble {\n  0% {\n    transform: scale(0.5) rotate(-10deg);\n    opacity: 0;\n  }\n  50% {\n    transform: scale(1.2) rotate(5deg);\n  }\n  100% {\n    transform: scale(1) rotate(0deg);\n    opacity: 1;\n  }\n}\n@keyframes _ngcontent-%COMP%_comboBubble {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.15);\n  }\n}\n@keyframes _ngcontent-%COMP%_specialBubble {\n  0% {\n    transform: scale(0) rotate(0deg);\n    opacity: 0;\n  }\n  100% {\n    transform: scale(1) rotate(360deg);\n    opacity: 1;\n  }\n}\n@keyframes _ngcontent-%COMP%_iconPulse {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.1);\n  }\n}\n@keyframes _ngcontent-%COMP%_criticalBounce {\n  0%, 100% {\n    transform: translateY(0) scale(1);\n  }\n  50% {\n    transform: translateY(-5px) scale(1.2);\n  }\n}\n@keyframes _ngcontent-%COMP%_specialFloat {\n  0%, 100% {\n    transform: translateY(0) rotate(0deg);\n  }\n  50% {\n    transform: translateY(-3px) rotate(15deg);\n  }\n}\n@keyframes _ngcontent-%COMP%_criticalTextGlow {\n  0%, 100% {\n    text-shadow: 0 0 20px rgb(255, 215, 0), 0 2px 4px rgba(0, 0, 0, 0.5);\n  }\n  50% {\n    text-shadow:\n      0 0 30px rgb(255, 215, 0),\n      0 0 50px rgba(255, 215, 0, 0.5),\n      0 2px 4px rgba(0, 0, 0, 0.5);\n  }\n}\n.text-only-log[_ngcontent-%COMP%] {\n  position: relative;\n  z-index: 1;\n  margin: 20px 32px;\n  padding: 16px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.7) 0%,\n      rgba(20, 20, 40, 0.7) 100%);\n  border: 2px solid rgba(138, 43, 226, 0.3);\n  border-radius: 12px;\n  min-height: 120px;\n  max-height: 180px;\n  overflow-y: auto;\n  box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.5), 0 4px 20px rgba(0, 0, 0, 0.3);\n}\n@media (max-width: 768px) {\n  .text-only-log[_ngcontent-%COMP%] {\n    margin: 16px 16px;\n    padding: 12px 16px;\n    min-height: 100px;\n    max-height: 150px;\n    border-radius: 10px;\n  }\n}\n@media (max-width: 480px) {\n  .text-only-log[_ngcontent-%COMP%] {\n    margin: 12px 12px;\n    padding: 10px 12px;\n    min-height: 80px;\n    max-height: 120px;\n  }\n}\n.text-only-log[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 8px;\n}\n.text-only-log[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 4px;\n}\n.text-only-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: rgba(138, 43, 226, 0.5);\n  border-radius: 4px;\n}\n.text-only-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: rgba(138, 43, 226, 0.7);\n}\n.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n@media (max-width: 768px) {\n  .text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%] {\n    gap: 6px;\n  }\n}\n.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%] {\n  padding: 10px 16px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  border-left: 3px solid rgba(138, 43, 226, 0.6);\n  color: var(--text-primary);\n  font-size: 0.95rem;\n  line-height: 1.5;\n  animation: _ngcontent-%COMP%_textSlideIn 0.3s ease-out;\n  transition: all 0.2s ease;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n@media (max-width: 768px) {\n  .text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%] {\n    padding: 8px 12px;\n    font-size: 0.85rem;\n    line-height: 1.4;\n  }\n}\n@media (max-width: 480px) {\n  .text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%] {\n    padding: 6px 10px;\n    font-size: 0.8rem;\n  }\n}\n.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]:hover {\n  background: rgba(138, 43, 226, 0.08);\n  transform: translateX(5px);\n  border-left-color: rgb(138, 43, 226);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n}\n.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.damage[_ngcontent-%COMP%] {\n  border-left-color: #ff6464;\n  background: rgba(255, 100, 100, 0.05);\n}\n.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.damage[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 100, 100, 0.12);\n  border-left-color: #ff4444;\n}\n.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.heal[_ngcontent-%COMP%] {\n  border-left-color: #4ade80;\n  background: rgba(74, 222, 128, 0.05);\n}\n.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.heal[_ngcontent-%COMP%]:hover {\n  background: rgba(74, 222, 128, 0.12);\n  border-left-color: #22c55e;\n}\n.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.critical[_ngcontent-%COMP%] {\n  border-left-color: #ffd700;\n  border-left-width: 4px;\n  background: rgba(255, 215, 0, 0.08);\n  font-weight: 600;\n  box-shadow: 0 2px 8px rgba(255, 215, 0, 0.2);\n  animation: _ngcontent-%COMP%_criticalTextPulse 0.5s ease-out, _ngcontent-%COMP%_textSlideIn 0.3s ease-out;\n}\n.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.critical[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 215, 0, 0.15);\n  box-shadow: 0 3px 12px rgba(255, 215, 0, 0.35);\n  border-left-color: #ffa500;\n}\n.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.combo[_ngcontent-%COMP%] {\n  border-left-color: #ff8c00;\n  background: rgba(255, 140, 0, 0.05);\n  font-weight: 500;\n}\n.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.combo[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 140, 0, 0.12);\n  border-left-color: #ff6600;\n}\n@keyframes _ngcontent-%COMP%_textSlideIn {\n  from {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n@keyframes _ngcontent-%COMP%_criticalTextPulse {\n  0% {\n    background: rgba(255, 215, 0, 0.05);\n    box-shadow: 0 0 15px rgba(255, 215, 0, 0.2);\n  }\n  50% {\n    background: rgba(255, 215, 0, 0.15);\n    box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);\n  }\n  100% {\n    background: rgba(255, 215, 0, 0.05);\n    box-shadow: 0 0 15px rgba(255, 215, 0, 0.2);\n  }\n}\n.battle-text-choices[_ngcontent-%COMP%] {\n  position: relative;\n  z-index: 1;\n  margin: 20px 32px;\n  padding: 20px 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.6) 0%,\n      rgba(20, 20, 40, 0.6) 100%);\n  border: 2px solid rgba(138, 43, 226, 0.3);\n  border-radius: 12px;\n  box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.4), 0 4px 20px rgba(0, 0, 0, 0.3);\n}\n.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%] {\n  padding: 12px 20px;\n  margin-bottom: 10px;\n  background: rgba(0, 0, 0, 0.3);\n  border-left: 4px solid rgba(138, 43, 226, 0.6);\n  border-radius: 8px;\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:last-child {\n  margin-bottom: 0;\n}\n.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:hover:not(.disabled) {\n  background: rgba(138, 43, 226, 0.2);\n  border-left-color: rgb(138, 43, 226);\n  transform: translateX(8px);\n  color: white;\n  box-shadow: 0 4px 15px rgba(138, 43, 226, 0.3);\n}\n.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:active:not(.disabled) {\n  transform: translateX(12px);\n  background: rgba(138, 43, 226, 0.3);\n}\n.battle-text-choices[_ngcontent-%COMP%]   .choice-item.disabled[_ngcontent-%COMP%] {\n  opacity: 0.4;\n  cursor: not-allowed;\n  color: rgba(255, 255, 255, 0.5);\n  border-left-color: rgba(100, 100, 100, 0.5);\n}\n.battle-text-choices[_ngcontent-%COMP%]   .choice-item.disabled[_ngcontent-%COMP%]:hover {\n  transform: none;\n  background: rgba(0, 0, 0, 0.3);\n}\n.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]   .choice-cost[_ngcontent-%COMP%] {\n  margin-left: auto;\n  font-size: 0.85rem;\n  color: rgba(255, 200, 100, 0.8);\n  font-weight: 500;\n}\n.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]   .choice-grade[_ngcontent-%COMP%] {\n  padding: 2px 8px;\n  background: rgba(100, 200, 255, 0.2);\n  border: 1px solid rgba(100, 200, 255, 0.5);\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 700;\n  color: #64c8ff;\n}\n.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]   .choice-grade.grade-\\c808\\d559[_ngcontent-%COMP%]  {\n  background: rgba(255, 215, 0, 0.2);\n  border-color: rgba(255, 215, 0, 0.8);\n  color: #ffd700;\n  box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);\n  animation: _ngcontent-%COMP%_gradePulse 2s ease-in-out infinite;\n}\n.battle-text-choices[_ngcontent-%COMP%]   .martial-skills-text[_ngcontent-%COMP%] {\n  margin-top: 16px;\n  padding-top: 16px;\n  border-top: 1px solid rgba(138, 43, 226, 0.3);\n}\n.battle-text-choices[_ngcontent-%COMP%]   .martial-skills-text[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%] {\n  border-left-color: rgba(255, 215, 0, 0.6);\n}\n.battle-text-choices[_ngcontent-%COMP%]   .martial-skills-text[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:hover:not(.disabled) {\n  border-left-color: rgb(255, 215, 0);\n  background: rgba(255, 215, 0, 0.15);\n  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);\n}\n@keyframes _ngcontent-%COMP%_gradePulse {\n  0%, 100% {\n    box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);\n  }\n}\n@media (max-width: 768px) {\n  .battle-choices[_ngcontent-%COMP%] {\n    margin: 24px 0;\n  }\n}\n.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  background: rgba(100, 100, 100, 0.3);\n}\n.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]:disabled:hover {\n  transform: none;\n  background: rgba(100, 100, 100, 0.3);\n}\n.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-cost[_ngcontent-%COMP%] {\n  margin-left: 8px;\n  font-size: 0.85rem;\n  color: rgba(255, 200, 100, 0.9);\n  font-weight: 500;\n}\n@media (max-width: 768px) {\n  .battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-cost[_ngcontent-%COMP%] {\n    font-size: 0.8rem;\n    margin-left: 6px;\n  }\n}\n@media (max-width: 480px) {\n  .battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-cost[_ngcontent-%COMP%] {\n    display: block;\n    margin-left: 0;\n    margin-top: 4px;\n    font-size: 0.75rem;\n  }\n}\n.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-grade[_ngcontent-%COMP%] {\n  margin-left: 8px;\n  padding: 2px 8px;\n  background: rgba(100, 200, 255, 0.3);\n  border: 1px solid rgba(100, 200, 255, 0.6);\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 700;\n  color: #64c8ff;\n}\n@media (max-width: 480px) {\n  .battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-grade[_ngcontent-%COMP%] {\n    margin-left: 6px;\n    padding: 2px 6px;\n    font-size: 0.7rem;\n  }\n}\n.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-grade.grade-\\c808\\d559[_ngcontent-%COMP%]  {\n  background: rgba(255, 215, 0, 0.3);\n  border-color: rgba(255, 215, 0, 0.9);\n  color: #ffd700;\n  box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);\n  animation: _ngcontent-%COMP%_gradeGlow 2s ease-in-out infinite;\n}\n.battle-choices[_ngcontent-%COMP%]   .martial-skill-choice[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%] {\n  border-left-color: rgba(255, 215, 0, 0.6);\n}\n.battle-choices[_ngcontent-%COMP%]   .martial-skill-choice[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]:hover:not(:disabled) {\n  border-left-color: rgb(255, 215, 0);\n  background: rgba(255, 215, 0, 0.1);\n}\n@keyframes _ngcontent-%COMP%_gradeGlow {\n  0%, 100% {\n    box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(255, 215, 0, 0.7);\n  }\n}\n.flat-battle[_ngcontent-%COMP%] {\n  margin: 30px 0;\n  padding: 0;\n  background: transparent;\n  border: none;\n  box-shadow: none;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-container[_ngcontent-%COMP%] {\n  max-width: 800px;\n  margin: 0 auto;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-bottom: 30px;\n  padding-bottom: 20px;\n  border-bottom: 1px solid rgba(150, 150, 150, 0.3);\n}\n@media (max-width: 768px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%] {\n    margin-bottom: 20px;\n    padding-bottom: 16px;\n  }\n}\n@media (max-width: 480px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%] {\n    margin-bottom: 16px;\n    padding-bottom: 12px;\n  }\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 1.4rem;\n  font-weight: 400;\n  color: rgba(0, 0, 0, 0.8);\n  margin: 0 0 10px 0;\n  letter-spacing: 8px;\n}\n@media (max-width: 768px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n    font-size: 1.2rem;\n    letter-spacing: 6px;\n  }\n}\n@media (max-width: 480px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n    font-size: 1.1rem;\n    letter-spacing: 4px;\n  }\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   .turn-text[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  color: rgba(100, 100, 100, 0.8);\n  font-style: italic;\n  margin: 0;\n}\n@media (max-width: 768px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   .turn-text[_ngcontent-%COMP%] {\n    font-size: 0.85rem;\n  }\n}\n@media (max-width: 480px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   .turn-text[_ngcontent-%COMP%] {\n    font-size: 0.8rem;\n  }\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: 1fr auto 1fr;\n  gap: 30px;\n  align-items: start;\n}\n@media (max-width: 768px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr;\n    gap: 16px;\n  }\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .vs-divider[_ngcontent-%COMP%] {\n    order: 2;\n    padding: 12px 0;\n    font-size: 1.2rem;\n  }\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .player-side[_ngcontent-%COMP%] {\n    order: 1;\n  }\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .enemy-side[_ngcontent-%COMP%] {\n    order: 3;\n  }\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%] {\n  background: rgba(250, 250, 250, 0.8);\n  border: 1px solid rgba(200, 200, 200, 0.4);\n  border-radius: 4px;\n  padding: 20px;\n  transition: all 0.3s ease;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant.active-turn[_ngcontent-%COMP%] {\n  border-color: rgba(100, 100, 100, 0.6);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n@media (max-width: 768px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%] {\n    padding: 16px;\n  }\n}\n@media (max-width: 480px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%] {\n    padding: 12px;\n  }\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid rgba(200, 200, 200, 0.3);\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: rgba(0, 0, 0, 0.85);\n  margin: 0;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   .level-tag[_ngcontent-%COMP%] {\n  font-size: 0.75rem;\n  color: rgba(100, 100, 100, 0.7);\n  padding: 2px 8px;\n  background: rgba(200, 200, 200, 0.3);\n  border-radius: 3px;\n}\n@media (max-width: 768px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%] {\n    margin-bottom: 12px;\n    padding-bottom: 10px;\n  }\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n    font-size: 1rem;\n  }\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   .level-tag[_ngcontent-%COMP%] {\n    font-size: 0.7rem;\n    padding: 2px 6px;\n  }\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n@media (max-width: 768px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%] {\n    gap: 10px;\n  }\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row.compact[_ngcontent-%COMP%] {\n  margin-top: 8px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(200, 200, 200, 0.2);\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: rgba(100, 100, 100, 0.8);\n  min-width: 40px;\n  font-weight: 500;\n}\n@media (max-width: 768px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n    font-size: 0.8rem;\n    min-width: 36px;\n  }\n}\n@media (max-width: 480px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n    font-size: 0.75rem;\n    min-width: 32px;\n  }\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n@media (max-width: 768px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%] {\n    gap: 8px;\n  }\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%] {\n  flex: 1;\n  height: 8px;\n  background: rgba(220, 220, 220, 0.6);\n  border-radius: 4px;\n  overflow: hidden;\n}\n@media (max-width: 768px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%] {\n    height: 10px;\n  }\n}\n@media (max-width: 480px) {\n  .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%] {\n    height: 12px;\n  }\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  transition: width 0.3s ease;\n  border-radius: 4px;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.hp[_ngcontent-%COMP%] {\n  background: #e57373;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.hp.low[_ngcontent-%COMP%] {\n  background: #ef5350;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.enemy-hp[_ngcontent-%COMP%] {\n  background: #ba68c8;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.enemy-hp.low[_ngcontent-%COMP%] {\n  background: #ab47bc;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.mp[_ngcontent-%COMP%] {\n  background: #64b5f6;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.internal[_ngcontent-%COMP%] {\n  background: #ffb74d;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-size: 0.8rem;\n  color: rgba(100, 100, 100, 0.8);\n  min-width: 60px;\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value-inline[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: rgba(50, 50, 50, 0.9);\n  font-weight: 600;\n  font-variant-numeric: tabular-nums;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-separator[_ngcontent-%COMP%] {\n  color: rgba(150, 150, 150, 0.5);\n  margin: 0 6px;\n}\n.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .vs-divider[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n  font-weight: 300;\n  color: rgba(150, 150, 150, 0.6);\n  text-align: center;\n  padding-top: 50px;\n  letter-spacing: 2px;\n}\n.dark-theme[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%] {\n  background: #1e232d;\n  border-color: #3a3a3a;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n.dark-theme[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: #e8e8e8;\n}\n.dark-theme[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%] {\n  background: #282d37;\n  border-color: var(--accent-primary);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%] {\n  border-bottom-color: rgba(100, 100, 100, 0.3);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  color: rgba(255, 255, 255, 0.9);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   .turn-text[_ngcontent-%COMP%] {\n  color: rgba(200, 200, 200, 0.7);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%] {\n  background: rgba(30, 30, 30, 0.8);\n  border-color: rgba(100, 100, 100, 0.4);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant.active-turn[_ngcontent-%COMP%] {\n  border-color: rgba(150, 150, 150, 0.6);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%] {\n  border-bottom-color: rgba(100, 100, 100, 0.3);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  color: rgba(255, 255, 255, 0.9);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   .level-tag[_ngcontent-%COMP%] {\n  background: rgba(100, 100, 100, 0.3);\n  color: rgba(200, 200, 200, 0.7);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row.compact[_ngcontent-%COMP%] {\n  border-top-color: rgba(100, 100, 100, 0.2);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  color: rgba(200, 200, 200, 0.7);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%] {\n  background: rgba(60, 60, 60, 0.6);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  color: rgba(200, 200, 200, 0.7);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value-inline[_ngcontent-%COMP%] {\n  color: rgba(220, 220, 220, 0.9);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-separator[_ngcontent-%COMP%] {\n  color: rgba(100, 100, 100, 0.5);\n}\n.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .vs-divider[_ngcontent-%COMP%] {\n  color: rgba(150, 150, 150, 0.5);\n}\n.feature-map-floating-btn[_ngcontent-%COMP%] {\n  position: fixed;\n  bottom: 20px;\n  right: 96px;\n  z-index: 100000 !important;\n}\n.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%] {\n  width: 56px;\n  height: 56px;\n  background:\n    linear-gradient(\n      135deg,\n      #f093fb 0%,\n      #f5576c 100%);\n  border: none;\n  border-radius: 16px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 16px rgba(245, 87, 108, 0.4), 0 2px 8px rgba(0, 0, 0, 0.1);\n  color: white;\n  gap: 2px;\n  padding: 8px;\n}\n.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px) scale(1.05);\n  box-shadow: 0 8px 24px rgba(245, 87, 108, 0.5), 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]:active {\n  transform: translateY(0) scale(0.98);\n}\n.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle.active[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.6), 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_pulse 2s ease-in-out infinite;\n}\n.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n}\n.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]   .btn-label[_ngcontent-%COMP%] {\n  font-size: 10px;\n  font-weight: 700;\n  letter-spacing: -0.3px;\n  margin-top: 2px;\n}\n.feature-map-panel[_ngcontent-%COMP%] {\n  position: fixed;\n  bottom: 90px;\n  right: 20px;\n  width: 420px;\n  max-height: 600px;\n  background: var(--bg-primary);\n  -webkit-backdrop-filter: blur(20px);\n  backdrop-filter: blur(20px);\n  border-radius: 20px;\n  border: 1px solid var(--border-color);\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\n  z-index: 100000 !important;\n  overflow: hidden;\n  animation: _ngcontent-%COMP%_slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  flex-direction: column;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px 16px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(240, 147, 251, 0.1) 0%,\n      rgba(245, 87, 108, 0.1) 100%);\n  border-bottom: 1px solid var(--border-color);\n  flex-shrink: 0;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  width: 32px;\n  height: 32px;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  color: var(--text-primary);\n  font-size: 24px;\n  line-height: 1;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(239, 68, 68, 0.2);\n  border-color: rgba(239, 68, 68, 0.4);\n  color: #ef4444;\n  transform: scale(1.1);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%] {\n  flex: 1;\n  overflow: hidden;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-labels {\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab {\n  min-width: 120px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab .mdc-tab__content {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab .tab-icon {\n  font-size: 18px;\n  transition: transform 0.2s ease;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab .tab-label {\n  font-weight: 600;\n  font-size: 14px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab:hover .tab-icon {\n  transform: scale(1.1);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab.mdc-tab--active .tab-icon {\n  animation: _ngcontent-%COMP%_bounce 0.5s ease;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-header {\n  border-bottom: none;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mdc-tab-indicator__content--underline {\n  border-color: var(--accent-color);\n  border-width: 3px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper {\n  flex: 1;\n  overflow: hidden;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-content {\n  overflow-y: visible;\n  height: 100%;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-content[_ngcontent-%COMP%] {\n  padding: 20px;\n  max-height: 100%;\n  overflow-y: auto;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-content[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 8px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-content[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n  border-radius: 4px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 4px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-map-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-color);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-section[_ngcontent-%COMP%] {\n  margin-bottom: 24px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-section[_ngcontent-%COMP%]:last-child {\n  margin-bottom: 0;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid var(--border-color);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 10px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 12px 14px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--accent-color);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n  flex-shrink: 0;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-name[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-primary);\n  line-height: 1.3;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-content[_ngcontent-%COMP%] {\n  padding: 16px;\n  height: 100%;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-content[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 6px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-content[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n  border-radius: 3px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-color);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.1) 0%,\n      rgba(118, 75, 162, 0.1) 100%);\n  padding: 16px;\n  border-radius: 12px;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0 0 12px 0;\n  font-size: 13px;\n  color: var(--text-primary);\n  font-weight: 600;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%]   .minimap-stats[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%]   .minimap-stats[_ngcontent-%COMP%]   .stat-badge[_ngcontent-%COMP%] {\n  padding: 6px 12px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-primary);\n  white-space: nowrap;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-canvas[_ngcontent-%COMP%] {\n  flex: 1;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n  padding: 16px;\n  min-height: 300px;\n  overflow-y: auto;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-canvas[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 6px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-tertiary);\n  border-radius: 3px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: flex-start;\n  gap: 10px;\n  padding: 10px;\n  background: var(--bg-tertiary);\n  border: 1px solid var(--border-color);\n  border-radius: 10px;\n  transition: all 0.2s ease;\n  position: relative;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]:hover {\n  border-color: var(--accent-color);\n  background: var(--bg-primary);\n  transform: translateX(2px);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini.node-start[_ngcontent-%COMP%] {\n  border-color: rgba(34, 197, 94, 0.5);\n  background: rgba(34, 197, 94, 0.05);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini.node-story[_ngcontent-%COMP%] {\n  border-color: rgba(59, 130, 246, 0.5);\n  background: rgba(59, 130, 246, 0.05);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini.node-choice[_ngcontent-%COMP%] {\n  border-color: rgba(168, 85, 247, 0.5);\n  background: rgba(168, 85, 247, 0.05);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini.node-current[_ngcontent-%COMP%] {\n  border-color: rgba(245, 87, 108, 0.7);\n  background: rgba(245, 87, 108, 0.1);\n  box-shadow: 0 0 20px rgba(245, 87, 108, 0.2);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini.node-current[_ngcontent-%COMP%]   .node-icon-mini[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_pulse 2s ease-in-out infinite;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .node-icon-mini[_ngcontent-%COMP%] {\n  font-size: 16px;\n  flex-shrink: 0;\n  width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .node-content-mini[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .node-content-mini[_ngcontent-%COMP%]   .node-label-mini[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n  line-height: 1.4;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .node-content-mini[_ngcontent-%COMP%]   .node-choices-mini[_ngcontent-%COMP%] {\n  margin-top: 8px;\n  padding-top: 8px;\n  border-top: 1px solid var(--border-color);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .node-content-mini[_ngcontent-%COMP%]   .node-choices-mini[_ngcontent-%COMP%]   .choice-preview-mini[_ngcontent-%COMP%] {\n  font-size: 11px;\n  color: var(--text-secondary);\n  padding: 4px 0;\n  line-height: 1.3;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .node-content-mini[_ngcontent-%COMP%]   .node-choices-mini[_ngcontent-%COMP%]   .more-choices[_ngcontent-%COMP%] {\n  font-size: 10px;\n  color: var(--accent-color);\n  font-weight: 700;\n  margin-top: 4px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .flow-connector-mini[_ngcontent-%COMP%] {\n  position: absolute;\n  left: 18px;\n  top: 100%;\n  width: 2px;\n  height: 8px;\n  background: var(--border-color);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40px 20px;\n  text-align: center;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%] {\n  font-size: 48px;\n  margin-bottom: 16px;\n  opacity: 0.5;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0 0 8px 0;\n  color: var(--text-primary);\n  font-weight: 600;\n  font-size: 14px;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  font-weight: 400;\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n  flex-wrap: wrap;\n  padding: 12px;\n  background: var(--bg-secondary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]   .legend-item-mini[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]   .legend-item-mini[_ngcontent-%COMP%]   .legend-icon-mini[_ngcontent-%COMP%] {\n  font-size: 14px;\n  width: 22px;\n  height: 22px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-tertiary);\n  border-radius: 6px;\n  border: 1px solid var(--border-color);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]   .legend-item-mini[_ngcontent-%COMP%]   .legend-icon-mini.start[_ngcontent-%COMP%] {\n  border-color: rgba(34, 197, 94, 0.5);\n  background: rgba(34, 197, 94, 0.1);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]   .legend-item-mini[_ngcontent-%COMP%]   .legend-icon-mini.story[_ngcontent-%COMP%] {\n  border-color: rgba(59, 130, 246, 0.5);\n  background: rgba(59, 130, 246, 0.1);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]   .legend-item-mini[_ngcontent-%COMP%]   .legend-icon-mini.choice[_ngcontent-%COMP%] {\n  border-color: rgba(168, 85, 247, 0.5);\n  background: rgba(168, 85, 247, 0.1);\n}\n.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]   .legend-item-mini[_ngcontent-%COMP%]   .legend-icon-mini.current[_ngcontent-%COMP%] {\n  border-color: rgba(245, 87, 108, 0.5);\n  background: rgba(245, 87, 108, 0.1);\n}\n@keyframes _ngcontent-%COMP%_slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n@keyframes _ngcontent-%COMP%_bounce {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n}\n@media (max-width: 768px) {\n  .feature-map-floating-btn[_ngcontent-%COMP%] {\n    bottom: 16px;\n    right: 88px;\n  }\n  .feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%] {\n    width: 52px;\n    height: 52px;\n  }\n  .feature-map-panel[_ngcontent-%COMP%] {\n    bottom: 80px;\n    right: 16px;\n    left: 16px;\n    width: auto;\n    max-height: 70vh;\n  }\n  .feature-map-panel[_ngcontent-%COMP%]   .feature-grid[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%] {\n    padding: 16px;\n    overflow: visible;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n    font-size: 18px;\n    margin-bottom: 20px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%] {\n    gap: 8px;\n    padding: 0;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%] {\n    gap: 8px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-rings-row[_ngcontent-%COMP%] {\n    gap: 8px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(4, 1fr) !important;\n    gap: 6px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%] {\n    min-height: 70px;\n    padding: 6px;\n    position: relative;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .cell-icon[_ngcontent-%COMP%] {\n    font-size: 22px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%] {\n    font-size: 10px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .quick-equip-btn[_ngcontent-%COMP%] {\n    position: absolute;\n    top: 2px;\n    right: 2px;\n    width: 24px;\n    height: 24px;\n    background: rgba(16, 185, 129, 0.9);\n    border: 1px solid rgb(16, 185, 129);\n    border-radius: 6px;\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    z-index: 10;\n    padding: 0;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .quick-equip-btn[_ngcontent-%COMP%]:active {\n    transform: scale(0.9);\n    background: rgb(16, 185, 129);\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .quick-equip-btn[_ngcontent-%COMP%]:hover {\n    background: rgb(16, 185, 129);\n    box-shadow: 0 0 8px rgba(16, 185, 129, 0.6);\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%] {\n    min-width: 80px;\n    min-height: 80px;\n    touch-action: manipulation;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 24px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%] {\n    font-size: 11px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%] {\n    width: 28px;\n    height: 28px;\n    font-size: 18px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%] {\n    padding: 14px 12px;\n    font-size: 14px;\n    min-height: 48px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%] {\n    flex-direction: column;\n    gap: 12px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%] {\n    flex-wrap: wrap;\n    gap: 8px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    padding: 10px 14px;\n    font-size: 13px;\n    min-height: 44px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\n    padding: 10px;\n    font-size: 14px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   .btn-auto-sort[_ngcontent-%COMP%] {\n    padding: 10px 14px;\n    min-height: 44px;\n  }\n}\n.character-info-content[_ngcontent-%COMP%] {\n  padding: 20px;\n  overflow-y: auto;\n  height: 100%;\n}\n.character-info-content[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 6px;\n}\n.character-info-content[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n  border-radius: 3px;\n}\n.character-info-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.character-info-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-color);\n}\n.character-detail[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n.character-header[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n  padding: 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.1) 0%,\n      rgba(118, 75, 162, 0.1) 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n}\n.character-header[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%] {\n  position: relative;\n}\n.character-header[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%] {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);\n}\n.character-header[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .avatar-initial[_ngcontent-%COMP%] {\n  font-size: 32px;\n  font-weight: 700;\n  color: white;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n.character-header[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: -6px;\n  right: -6px;\n  background:\n    linear-gradient(\n      135deg,\n      #f093fb 0%,\n      #f5576c 100%);\n  color: white;\n  padding: 4px 10px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 700;\n  box-shadow: 0 2px 8px rgba(245, 87, 108, 0.4);\n}\n.character-header[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.character-header[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%] {\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.character-header[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .exp-bar-container[_ngcontent-%COMP%]   .exp-bar[_ngcontent-%COMP%] {\n  height: 8px;\n  background: var(--bg-secondary);\n  border-radius: 4px;\n  overflow: hidden;\n  margin-bottom: 6px;\n  border: 1px solid var(--border-color);\n}\n.character-header[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .exp-bar-container[_ngcontent-%COMP%]   .exp-bar[_ngcontent-%COMP%]   .exp-bar-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  transition: width 0.3s ease;\n}\n.character-header[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .exp-bar-container[_ngcontent-%COMP%]   .exp-text[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n.character-status-bars[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar-label[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 6px;\n}\n.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar-label[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%] {\n  font-size: 16px;\n}\n.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar-label[_ngcontent-%COMP%]   .status-name[_ngcontent-%COMP%] {\n  font-weight: 700;\n  color: var(--text-primary);\n  font-size: 14px;\n}\n.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar-label[_ngcontent-%COMP%]   .status-value[_ngcontent-%COMP%] {\n  margin-left: auto;\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%] {\n  height: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 6px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n}\n.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-bar-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  transition: width 0.3s ease;\n}\n.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar.hp-bar[_ngcontent-%COMP%]   .status-bar-fill[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444 0%,\n      #dc2626 100%);\n}\n.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar.mp-bar[_ngcontent-%COMP%]   .status-bar-fill[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.character-stats[_ngcontent-%COMP%] {\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.character-stats[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 16px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n}\n.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: var(--accent-color);\n}\n.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 24px;\n}\n.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-name[_ngcontent-%COMP%] {\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value.highlight[_ngcontent-%COMP%] {\n  color: var(--accent-color);\n}\n.character-skills[_ngcontent-%COMP%] {\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.character-skills[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 16px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%] {\n  padding: 14px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n  position: relative;\n}\n.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]:hover {\n  transform: translateX(4px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: var(--accent-color);\n}\n.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-level[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--accent-color);\n  background: rgba(102, 126, 234, 0.1);\n  padding: 2px 8px;\n  border-radius: 6px;\n}\n.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-description[_ngcontent-%COMP%] {\n  margin: 0 0 10px 0;\n  font-size: 12px;\n  color: var(--text-secondary);\n  line-height: 1.5;\n}\n.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-type-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 600;\n}\n.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-type-badge.type-combat[_ngcontent-%COMP%] {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n  border: 1px solid rgba(239, 68, 68, 0.2);\n}\n.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-type-badge.type-magic[_ngcontent-%COMP%] {\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n  border: 1px solid rgba(59, 130, 246, 0.2);\n}\n.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-type-badge.type-passive[_ngcontent-%COMP%] {\n  background: rgba(34, 197, 94, 0.1);\n  color: #22c55e;\n  border: 1px solid rgba(34, 197, 94, 0.2);\n}\n.empty-character-state[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n  min-height: 400px;\n}\n.empty-character-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%] {\n  font-size: 64px;\n  margin-bottom: 20px;\n  opacity: 0.3;\n}\n.empty-character-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.empty-character-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0 0 8px 0;\n  color: var(--text-secondary);\n  font-size: 14px;\n}\n.empty-character-state[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-tertiary);\n  font-weight: 400;\n}\n@media (max-width: 480px) {\n  .feature-map-floating-btn[_ngcontent-%COMP%] {\n    right: 80px;\n  }\n  .feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%] {\n    width: 48px;\n    height: 48px;\n  }\n  .feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]   .btn-label[_ngcontent-%COMP%] {\n    font-size: 9px;\n  }\n  .feature-map-panel[_ngcontent-%COMP%]   .feature-map-header[_ngcontent-%COMP%] {\n    padding: 16px 18px;\n  }\n  .feature-map-panel[_ngcontent-%COMP%]   .feature-map-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n    font-size: 16px;\n  }\n  .feature-map-panel[_ngcontent-%COMP%]   .feature-map-content[_ngcontent-%COMP%] {\n    padding: 16px;\n  }\n  .feature-map-panel[_ngcontent-%COMP%]   .feature-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n    font-size: 13px;\n  }\n  .feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%] {\n    padding: 10px 12px;\n  }\n  .feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%] {\n    font-size: 18px;\n  }\n  .feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-name[_ngcontent-%COMP%] {\n    font-size: 12px;\n  }\n  .character-header[_ngcontent-%COMP%] {\n    flex-direction: column;\n    text-align: center;\n  }\n  .character-header[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%] {\n    font-size: 20px;\n  }\n  .character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr;\n  }\n  .organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr;\n  }\n  .organization-facilities[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%] {\n    padding: 12px;\n    overflow: visible;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n    font-size: 16px;\n    margin-bottom: 16px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%] {\n    padding: 0;\n    gap: 6px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%] {\n    gap: 6px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-rings-row[_ngcontent-%COMP%] {\n    gap: 6px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(3, 1fr) !important;\n    gap: 4px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%] {\n    min-height: 65px;\n    padding: 4px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .cell-icon[_ngcontent-%COMP%] {\n    font-size: 20px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%] {\n    font-size: 9px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .quick-equip-btn[_ngcontent-%COMP%] {\n    width: 22px;\n    height: 22px;\n    font-size: 12px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%] {\n    min-width: 75px;\n    min-height: 75px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 26px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%] {\n    font-size: 10px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%] {\n    padding: 12px 8px;\n    font-size: 13px;\n  }\n  .inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    padding: 8px 10px;\n    font-size: 12px;\n  }\n}\n.organization-info-content[_ngcontent-%COMP%] {\n  padding: 20px;\n  overflow-y: auto;\n  height: 100%;\n}\n.organization-info-content[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 6px;\n}\n.organization-info-content[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n  border-radius: 3px;\n}\n.organization-info-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.organization-info-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-color);\n}\n.organization-detail[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n.organization-header[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n  padding: 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(245, 158, 11, 0.1) 0%,\n      rgba(217, 119, 6, 0.1) 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(245, 158, 11, 0.2);\n}\n.organization-header[_ngcontent-%COMP%]   .org-icon-wrapper[_ngcontent-%COMP%] {\n  position: relative;\n}\n.organization-header[_ngcontent-%COMP%]   .org-icon-wrapper[_ngcontent-%COMP%]   .org-icon[_ngcontent-%COMP%] {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b 0%,\n      #d97706 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 16px rgba(245, 158, 11, 0.4);\n  font-size: 40px;\n}\n.organization-header[_ngcontent-%COMP%]   .org-icon-wrapper[_ngcontent-%COMP%]   .org-level-badge[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: -6px;\n  right: -6px;\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #7c3aed 100%);\n  color: white;\n  padding: 4px 10px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 700;\n  box-shadow: 0 2px 8px rgba(139, 92, 246, 0.4);\n}\n.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-name[_ngcontent-%COMP%] {\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 8px 0;\n}\n.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-type-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 4px 12px;\n  border-radius: 8px;\n  font-size: 12px;\n  font-weight: 700;\n  margin-bottom: 12px;\n}\n.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-type-badge.type-guild[_ngcontent-%COMP%] {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n  border: 1px solid rgba(239, 68, 68, 0.2);\n}\n.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-type-badge.type-faction[_ngcontent-%COMP%] {\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n  border: 1px solid rgba(59, 130, 246, 0.2);\n}\n.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-type-badge.type-clan[_ngcontent-%COMP%] {\n  background: rgba(34, 197, 94, 0.1);\n  color: #22c55e;\n  border: 1px solid rgba(34, 197, 94, 0.2);\n}\n.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-type-badge.type-sect[_ngcontent-%COMP%] {\n  background: rgba(139, 92, 246, 0.1);\n  color: #8b5cf6;\n  border: 1px solid rgba(139, 92, 246, 0.2);\n}\n.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-type-badge.type-company[_ngcontent-%COMP%] {\n  background: rgba(245, 158, 11, 0.1);\n  color: #f59e0b;\n  border: 1px solid rgba(245, 158, 11, 0.2);\n}\n.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .reputation-bar-container[_ngcontent-%COMP%]   .reputation-label[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 6px;\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .reputation-bar-container[_ngcontent-%COMP%]   .reputation-label[_ngcontent-%COMP%]   .rep-value[_ngcontent-%COMP%] {\n  color: var(--accent-color);\n}\n.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .reputation-bar-container[_ngcontent-%COMP%]   .reputation-bar[_ngcontent-%COMP%] {\n  height: 8px;\n  background: var(--bg-secondary);\n  border-radius: 4px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n}\n.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .reputation-bar-container[_ngcontent-%COMP%]   .reputation-bar[_ngcontent-%COMP%]   .reputation-bar-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #f59e0b 0%,\n      #d97706 100%);\n  transition: width 0.3s ease;\n}\n.organization-resources[_ngcontent-%COMP%] {\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.organization-resources[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 16px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 12px;\n}\n.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: var(--accent-color);\n}\n.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]   .resource-icon[_ngcontent-%COMP%] {\n  font-size: 24px;\n}\n.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]   .resource-info[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]   .resource-info[_ngcontent-%COMP%]   .resource-name[_ngcontent-%COMP%] {\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n}\n.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]   .resource-info[_ngcontent-%COMP%]   .resource-value[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n.organization-members[_ngcontent-%COMP%] {\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.organization-members[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   .member-count[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--accent-color);\n  background: rgba(102, 126, 234, 0.1);\n  padding: 4px 12px;\n  border-radius: 8px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  max-height: 400px;\n  overflow-y: auto;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 6px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-tertiary);\n  border-radius: 3px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-color);\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%] {\n  padding: 14px;\n  background: var(--bg-tertiary);\n  border-radius: 12px;\n  border: 2px solid var(--border-color);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]:hover {\n  transform: translateX(4px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: var(--accent-color);\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card.selected[_ngcontent-%COMP%] {\n  border-color: var(--accent-color);\n  background: rgba(102, 126, 234, 0.05);\n  box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-avatar[_ngcontent-%COMP%] {\n  position: relative;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-avatar[_ngcontent-%COMP%]   .avatar-emoji[_ngcontent-%COMP%] {\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n  background: var(--bg-secondary);\n  border-radius: 50%;\n  border: 2px solid var(--border-color);\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-avatar[_ngcontent-%COMP%]   .member-level-badge[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: -4px;\n  right: -4px;\n  background: var(--accent-color);\n  color: white;\n  padding: 2px 6px;\n  border-radius: 8px;\n  font-size: 10px;\n  font-weight: 700;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 2px 8px;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 600;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role.role-leader[_ngcontent-%COMP%] {\n  background: rgba(245, 158, 11, 0.2);\n  color: #f59e0b;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role.role-vice_leader[_ngcontent-%COMP%] {\n  background: rgba(245, 158, 11, 0.15);\n  color: #f59e0b;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role.role-elder[_ngcontent-%COMP%] {\n  background: rgba(139, 92, 246, 0.2);\n  color: #8b5cf6;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role.role-captain[_ngcontent-%COMP%] {\n  background: rgba(59, 130, 246, 0.2);\n  color: #3b82f6;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role.role-member[_ngcontent-%COMP%] {\n  background: rgba(34, 197, 94, 0.2);\n  color: #22c55e;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role.role-recruit[_ngcontent-%COMP%] {\n  background: rgba(156, 163, 175, 0.2);\n  color: #9ca3af;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-status-indicator[_ngcontent-%COMP%] {\n  width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  font-size: 14px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-status-indicator.status-active[_ngcontent-%COMP%] {\n  background: rgba(34, 197, 94, 0.2);\n  color: #22c55e;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-status-indicator.status-resting[_ngcontent-%COMP%] {\n  background: rgba(156, 163, 175, 0.2);\n  color: #9ca3af;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-status-indicator.status-injured[_ngcontent-%COMP%] {\n  background: rgba(239, 68, 68, 0.2);\n  color: #ef4444;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-status-indicator.status-on_mission[_ngcontent-%COMP%] {\n  background: rgba(59, 130, 246, 0.2);\n  color: #3b82f6;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 10px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  font-size: 10px;\n  font-weight: 600;\n  color: var(--text-secondary);\n  margin-bottom: 4px;\n  display: block;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%]   .stat-bar-mini[_ngcontent-%COMP%] {\n  height: 6px;\n  background: var(--bg-secondary);\n  border-radius: 3px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%]   .stat-bar-mini[_ngcontent-%COMP%]   .stat-bar-fill-mini[_ngcontent-%COMP%] {\n  height: 100%;\n  transition: width 0.3s ease;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%]   .stat-bar-mini[_ngcontent-%COMP%]   .stat-bar-fill-mini.hp[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444 0%,\n      #dc2626 100%);\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%]   .stat-bar-mini[_ngcontent-%COMP%]   .stat-bar-fill-mini.mp[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-specialty[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 10px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  font-size: 12px;\n  margin-bottom: 8px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-specialty[_ngcontent-%COMP%]   .specialty-icon[_ngcontent-%COMP%] {\n  font-size: 14px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-specialty[_ngcontent-%COMP%]   .specialty-text[_ngcontent-%COMP%] {\n  flex: 1;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-specialty[_ngcontent-%COMP%]   .loyalty-badge[_ngcontent-%COMP%] {\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--accent-color);\n  background: rgba(102, 126, 234, 0.1);\n  padding: 2px 8px;\n  border-radius: 6px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-internal-power[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 6px 10px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(239, 68, 68, 0.1) 0%,\n      rgba(220, 38, 38, 0.1) 100%);\n  border-radius: 8px;\n  border: 1px solid rgba(239, 68, 68, 0.2);\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-internal-power[_ngcontent-%COMP%]   .power-icon[_ngcontent-%COMP%] {\n  font-size: 14px;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-internal-power[_ngcontent-%COMP%]   .power-realm[_ngcontent-%COMP%] {\n  font-size: 11px;\n  font-weight: 700;\n  color: #ef4444;\n  white-space: nowrap;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-internal-power[_ngcontent-%COMP%]   .power-bar-mini[_ngcontent-%COMP%] {\n  flex: 1;\n  height: 6px;\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  overflow: hidden;\n}\n.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-internal-power[_ngcontent-%COMP%]   .power-bar-mini[_ngcontent-%COMP%]   .power-bar-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444 0%,\n      #dc2626 100%);\n  transition: width 0.3s ease;\n}\n.organization-facilities[_ngcontent-%COMP%] {\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.organization-facilities[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 16px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.organization-facilities[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 10px;\n}\n.organization-facilities[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]   .facility-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 12px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n.organization-facilities[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]   .facility-item[_ngcontent-%COMP%]:hover {\n  transform: translateX(4px);\n  border-color: var(--accent-color);\n}\n.organization-facilities[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]   .facility-item[_ngcontent-%COMP%]   .facility-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n}\n.organization-facilities[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]   .facility-item[_ngcontent-%COMP%]   .facility-name[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.organization-territory[_ngcontent-%COMP%] {\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.organization-territory[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.organization-territory[_ngcontent-%COMP%]   .territory-info[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 14px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n}\n.organization-territory[_ngcontent-%COMP%]   .territory-info[_ngcontent-%COMP%]   .territory-icon[_ngcontent-%COMP%] {\n  font-size: 24px;\n}\n.organization-territory[_ngcontent-%COMP%]   .territory-info[_ngcontent-%COMP%]   .territory-name[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.empty-organization-state[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n  min-height: 400px;\n}\n.empty-organization-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%] {\n  font-size: 64px;\n  margin-bottom: 20px;\n  opacity: 0.3;\n}\n.empty-organization-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.empty-organization-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0 0 8px 0;\n  color: var(--text-secondary);\n  font-size: 14px;\n}\n.empty-organization-state[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-tertiary);\n  font-weight: 400;\n}\n.equipment-content[_ngcontent-%COMP%] {\n  padding: 12px;\n  height: 100%;\n  overflow-y: visible;\n}\n.equipment-content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n.equipped-items[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n.equipped-items.diablo-style[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  padding: 16px;\n  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.5);\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-grid-diablo[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: 1fr auto 1fr;\n  gap: 10px;\n  margin-bottom: 16px;\n  min-height: auto;\n  max-height: 350px;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-grid-diablo[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-grid-diablo[_ngcontent-%COMP%]   .equipment-column.center-column[_ngcontent-%COMP%] {\n  justify-content: center;\n  align-items: center;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 10px;\n  padding: 8px;\n  min-width: 90px;\n  min-height: 70px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  cursor: pointer;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background:\n    radial-gradient(\n      circle at 30% 30%,\n      var(--bg-highlight),\n      transparent);\n  pointer-events: none;\n}\n@media (max-width: 768px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%] {\n    min-width: 100px;\n    min-height: 90px;\n    padding: 12px;\n  }\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo.large[_ngcontent-%COMP%] {\n    min-width: 130px;\n    min-height: 140px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%] {\n    min-width: 80px;\n    min-height: 80px;\n    padding: 10px;\n  }\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 28px !important;\n  }\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%] {\n    font-size: 11px;\n  }\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo.large[_ngcontent-%COMP%] {\n  min-width: 120px;\n  min-height: 130px;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[data-rarity=normal][_ngcontent-%COMP%] {\n  border-color: #8a8a8a;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[data-rarity=magic][_ngcontent-%COMP%] {\n  border-color: #6363f7;\n  box-shadow: 0 0 10px rgba(99, 99, 247, 0.3);\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[data-rarity=rare][_ngcontent-%COMP%] {\n  border-color: #ffff00;\n  box-shadow: 0 0 10px rgba(255, 255, 0, 0.3);\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[data-rarity=unique][_ngcontent-%COMP%] {\n  border-color: #a57c3e;\n  box-shadow: 0 0 10px rgba(165, 124, 62, 0.4);\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[data-rarity=set][_ngcontent-%COMP%] {\n  border-color: #00ff00;\n  box-shadow: 0 0 15px rgba(0, 255, 0, 0.3);\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[data-rarity=legendary][_ngcontent-%COMP%] {\n  border-color: #ff8000;\n  box-shadow: 0 0 20px rgba(255, 128, 0, 0.5);\n  animation: _ngcontent-%COMP%_legendary-pulse 2s ease-in-out infinite;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]:hover {\n  transform: scale(1.05);\n  z-index: 10;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  font-size: 9px;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-bottom: 4px;\n  text-align: center;\n  font-weight: 600;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content.empty[_ngcontent-%COMP%] {\n  opacity: 0.3;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]   .item-icon-diablo[_ngcontent-%COMP%] {\n  font-size: 24px;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]   .item-icon-diablo.large[_ngcontent-%COMP%] {\n  font-size: 36px;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]   .empty-icon-diablo[_ngcontent-%COMP%] {\n  font-size: 24px;\n  opacity: 0.2;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]   .empty-icon-diablo.large[_ngcontent-%COMP%] {\n  font-size: 36px;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]   .item-name-short[_ngcontent-%COMP%] {\n  font-size: 10px;\n  color: var(--text-primary);\n  text-align: center;\n  font-weight: 500;\n  line-height: 1.2;\n  max-width: 80px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]   .item-damage[_ngcontent-%COMP%] {\n  font-size: 11px;\n  color: #ff6b6b;\n  font-weight: 700;\n  text-shadow: 0 0 8px rgba(255, 107, 107, 0.5);\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 10px;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px;\n  background: var(--bg-primary);\n  border-radius: 6px;\n  border: 1px solid var(--border-color);\n  transition: all 0.3s ease;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:hover {\n  background: var(--bg-highlight);\n  transform: translateX(2px);\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n  margin-right: 8px;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: var(--text-secondary);\n  font-weight: 600;\n  flex: 1;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  text-shadow: 0 0 10px currentColor;\n  min-width: 40px;\n  text-align: right;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value.damage[_ngcontent-%COMP%] {\n  color: #ff6b6b;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value.defense[_ngcontent-%COMP%] {\n  color: #6363f7;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value.magic[_ngcontent-%COMP%] {\n  color: #a78bfa;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 6px 0;\n  border-bottom: 1px solid var(--border-color);\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]:last-child {\n  border-bottom: none;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  font-weight: 600;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 700;\n  text-shadow: 0 0 10px currentColor;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-value.damage[_ngcontent-%COMP%] {\n  color: #ff6b6b;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-value.defense[_ngcontent-%COMP%] {\n  color: #6363f7;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-value.magic[_ngcontent-%COMP%] {\n  color: #a78bfa;\n}\n@keyframes _ngcontent-%COMP%_legendary-pulse {\n  0%, 100% {\n    box-shadow: 0 0 20px rgba(255, 128, 0, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(255, 128, 0, 0.8);\n  }\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slots[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  margin-bottom: 20px;\n}\n@media (max-width: 768px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slots[_ngcontent-%COMP%] {\n    gap: 14px;\n    margin-bottom: 16px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slots[_ngcontent-%COMP%] {\n    gap: 16px;\n    margin-bottom: 20px;\n  }\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  padding: 16px;\n  transition: all 0.3s ease;\n}\n@media (max-width: 768px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%] {\n    padding: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%] {\n    padding: 16px;\n    min-height: 88px;\n  }\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]:hover {\n  border-color: var(--accent-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px var(--shadow);\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%] {\n    gap: 10px;\n    margin-bottom: 10px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%] {\n    gap: 12px;\n    margin-bottom: 12px;\n    padding-bottom: 10px;\n  }\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n}\n@media (max-width: 768px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 22px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 24px;\n  }\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]   .slot-name[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n@media (max-width: 768px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]   .slot-name[_ngcontent-%COMP%] {\n    font-size: 15px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]   .slot-name[_ngcontent-%COMP%] {\n    font-size: 16px;\n  }\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n@media (max-width: 768px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%] {\n    gap: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%] {\n    gap: 16px;\n  }\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%] {\n  font-size: 32px;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n}\n@media (max-width: 768px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%] {\n    font-size: 36px;\n    width: 52px;\n    height: 52px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%] {\n    font-size: 40px;\n    width: 56px;\n    height: 56px;\n  }\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 6px;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat-badge[_ngcontent-%COMP%] {\n  padding: 4px 8px;\n  border-radius: 6px;\n  font-size: 12px;\n  font-weight: 500;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat-badge.attack[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ff6b6b,\n      #ee5a52);\n  color: white;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat-badge.defense[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #4dabf7,\n      #3b8cd2);\n  color: white;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat-badge.special[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #a78bfa,\n      #8b5cf6);\n  color: white;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .item-rarity[_ngcontent-%COMP%] {\n  padding: 4px 8px;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 600;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .item-rarity.rarity-common[_ngcontent-%COMP%] {\n  background: #e9ecef;\n  color: #495057;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .item-rarity.rarity-uncommon[_ngcontent-%COMP%] {\n  background: #51cf66;\n  color: white;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .item-rarity.rarity-rare[_ngcontent-%COMP%] {\n  background: #339af0;\n  color: white;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .item-rarity.rarity-epic[_ngcontent-%COMP%] {\n  background: #9775fa;\n  color: white;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .item-rarity.rarity-legendary[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ff8c00,\n      #ffa500);\n  color: white;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-empty[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  border: 2px dashed var(--border-color);\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-empty[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n  opacity: 0.5;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-empty[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: var(--text-tertiary);\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      var(--accent-primary),\n      var(--accent-secondary));\n  border-radius: 12px;\n  padding: 16px;\n  margin-top: 20px;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 700;\n  color: white;\n  margin: 0 0 12px 0;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 12px;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border-radius: 8px;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.8);\n  font-weight: 500;\n}\n.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: white;\n}\n.inventory-section[_ngcontent-%COMP%] {\n  margin-top: 24px;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  font-size: 13px;\n  padding: 0 16px;\n  height: 36px;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n  width: 20px;\n  height: 20px;\n  margin-right: 6px;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-bottom: 16px;\n  padding: 14px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 18px;\n  border-radius: 10px;\n  background: var(--bg-primary);\n  border: 2px solid var(--border-color);\n  color: var(--text-secondary);\n  font-size: 14px;\n  font-weight: 600;\n  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  min-width: auto;\n  position: relative;\n  overflow: hidden;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.1);\n  transform: translate(-50%, -50%);\n  transition: width 0.4s, height 0.4s;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%] {\n  font-size: 22px;\n  transition: all 0.3s ease;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\n  font-size: 22px;\n  width: 22px;\n  height: 22px;\n  transition: all 0.3s ease;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  position: relative;\n  z-index: 1;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\n  background: var(--bg-hover);\n  border-color: var(--primary-color);\n  transform: translateY(-3px) scale(1.05);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover::before {\n  width: 200%;\n  height: 200%;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   .filter-icon[_ngcontent-%COMP%] {\n  transform: scale(1.15) rotate(5deg);\n  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%] {\n  transform: scale(1.15);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%] {\n  background: var(--primary-color);\n  border-color: var(--primary-color);\n  color: white;\n  box-shadow: 0 4px 16px rgba(var(--primary-rgb), 0.4);\n  transform: translateY(-2px);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_filter-active-bounce 0.6s ease-in-out;\n  filter: drop-shadow(0 4px 8px rgba(255, 255, 255, 0.3));\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_filter-active-bounce 0.6s ease-in-out;\n}\n@keyframes _ngcontent-%COMP%_filter-active-bounce {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n  gap: 16px;\n  padding: 8px;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%] {\n  all: unset;\n  display: block;\n  width: 100%;\n  cursor: pointer;\n  position: relative;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  background: var(--bg-primary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 20px 16px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  min-height: 160px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: var(--gradient-primary);\n  transform: scaleX(0);\n  transition: transform 0.3s ease;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=common][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-color: #9e9e9e;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=common][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #9e9e9e 0%,\n      #757575 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=uncommon][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-color: #51cf66;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(81, 207, 102, 0.05) 0%,\n      rgba(46, 125, 50, 0.05) 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=uncommon][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #51cf66 0%,\n      #2e7d32 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=rare][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-color: #339af0;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(51, 154, 240, 0.08) 0%,\n      rgba(25, 118, 210, 0.08) 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=rare][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #339af0 0%,\n      #1976d2 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=epic][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-color: #9775fa;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(151, 117, 250, 0.1) 0%,\n      rgba(123, 31, 162, 0.1) 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=epic][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #9775fa 0%,\n      #7b1fa2 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=legendary][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-color: #ff8000;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 128, 0, 0.12) 0%,\n      rgba(230, 81, 0, 0.12) 100%);\n  animation: _ngcontent-%COMP%_legendary-border-glow 2s ease-in-out infinite;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=legendary][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #ff8000 0%,\n      #e65100 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]:hover   .item-card-content[_ngcontent-%COMP%] {\n  transform: translateY(-6px);\n  box-shadow: 0 8px 24px var(--shadow);\n  border-color: var(--accent-primary);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]:hover   .item-card-content[_ngcontent-%COMP%]::before {\n  transform: scaleX(1);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-left: 6px solid #ff6b6b !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 107, 107, 0.08) 0%,\n      transparent 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 8px rgba(255, 107, 107, 0.5));\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%] {\n  color: #ff6b6b;\n  font-weight: 800;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 107, 107, 0.3),\n      rgba(255, 107, 107, 0.15));\n  border-color: #ff6b6b;\n  color: #ff6b6b;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-left: 6px solid #4dabf7 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(77, 171, 247, 0.08) 0%,\n      transparent 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 8px rgba(77, 171, 247, 0.5));\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%] {\n  color: #4dabf7;\n  font-weight: 800;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(77, 171, 247, 0.3),\n      rgba(77, 171, 247, 0.15));\n  border-color: #4dabf7;\n  color: #4dabf7;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-left: 6px solid #cc5de8 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(204, 93, 232, 0.08) 0%,\n      transparent 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 8px rgba(204, 93, 232, 0.5));\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%] {\n  color: #cc5de8;\n  font-weight: 800;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(204, 93, 232, 0.3),\n      rgba(204, 93, 232, 0.15));\n  border-color: #cc5de8;\n  color: #cc5de8;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-left: 6px solid #51cf66 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(81, 207, 102, 0.08) 0%,\n      transparent 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 8px rgba(81, 207, 102, 0.5));\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%] {\n  color: #51cf66;\n  font-weight: 800;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(81, 207, 102, 0.3),\n      rgba(81, 207, 102, 0.15));\n  border-color: #51cf66;\n  color: #51cf66;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-left: 6px solid #ffd43b !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 212, 59, 0.08) 0%,\n      transparent 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 8px rgba(255, 212, 59, 0.5));\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%] {\n  color: #ffd43b;\n  font-weight: 800;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 212, 59, 0.3),\n      rgba(255, 212, 59, 0.15));\n  border-color: #ffd43b;\n  color: #ffd43b;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]   .delete-item-btn[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  width: 26px;\n  height: 26px;\n  padding: 0;\n  min-width: 26px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  background: rgba(244, 67, 54, 0.9);\n  border-radius: 50%;\n  z-index: 10;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]   .delete-item-btn[_ngcontent-%COMP%]:hover {\n  background: rgb(244, 67, 54);\n  transform: scale(1.1);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]   .delete-item-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\n  font-size: 16px;\n  width: 16px;\n  height: 16px;\n  line-height: 16px;\n  color: white;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]:hover   .delete-item-btn[_ngcontent-%COMP%] {\n  opacity: 1;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-left: 6px solid #ff6b6b !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 107, 107, 0.12) 0%,\n      transparent 100%) !important;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 12px rgba(255, 107, 107, 0.8)) drop-shadow(0 4px 8px rgba(255, 107, 107, 0.4));\n  animation: _ngcontent-%COMP%_weapon-pulse 2s ease-in-out infinite;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ff6b6b 0%,\n      #ff8787 50%,\n      #ff6b6b 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%] {\n  color: #ff6b6b;\n  font-weight: 800;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 107, 107, 0.4),\n      rgba(255, 107, 107, 0.2));\n  border-color: #ff6b6b;\n  color: #ff6b6b;\n}\n@keyframes _ngcontent-%COMP%_weapon-pulse {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.05);\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-left: 6px solid #4dabf7 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(77, 171, 247, 0.12) 0%,\n      transparent 100%) !important;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 12px rgba(77, 171, 247, 0.8)) drop-shadow(0 4px 8px rgba(77, 171, 247, 0.4));\n  animation: _ngcontent-%COMP%_armor-shield 2.5s ease-in-out infinite;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #4dabf7 0%,\n      #74c0fc 50%,\n      #4dabf7 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%] {\n  color: #4dabf7;\n  font-weight: 800;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(77, 171, 247, 0.4),\n      rgba(77, 171, 247, 0.2));\n  border-color: #4dabf7;\n  color: #4dabf7;\n}\n@keyframes _ngcontent-%COMP%_armor-shield {\n  0%, 100% {\n    filter: drop-shadow(0 0 12px rgba(77, 171, 247, 0.8));\n  }\n  50% {\n    filter: drop-shadow(0 0 20px rgb(77, 171, 247));\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-left: 6px solid #cc5de8 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(204, 93, 232, 0.12) 0%,\n      transparent 100%) !important;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 12px rgba(204, 93, 232, 0.8)) drop-shadow(0 4px 8px rgba(204, 93, 232, 0.4));\n  animation: _ngcontent-%COMP%_accessory-glow 3s ease-in-out infinite;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #cc5de8 0%,\n      #e599f7 50%,\n      #cc5de8 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%] {\n  color: #cc5de8;\n  font-weight: 800;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(204, 93, 232, 0.4),\n      rgba(204, 93, 232, 0.2));\n  border-color: #cc5de8;\n  color: #cc5de8;\n}\n@keyframes _ngcontent-%COMP%_accessory-glow {\n  0%, 100% {\n    filter: drop-shadow(0 0 12px rgba(204, 93, 232, 0.8));\n    transform: rotate(0deg);\n  }\n  50% {\n    filter: drop-shadow(0 0 20px rgb(204, 93, 232));\n    transform: rotate(5deg);\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-left: 6px solid #51cf66 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(81, 207, 102, 0.12) 0%,\n      transparent 100%) !important;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 12px rgba(81, 207, 102, 0.8)) drop-shadow(0 4px 8px rgba(81, 207, 102, 0.4));\n  animation: _ngcontent-%COMP%_consumable-bounce 2s ease-in-out infinite;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #51cf66 0%,\n      #8ce99a 50%,\n      #51cf66 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%] {\n  color: #51cf66;\n  font-weight: 800;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(81, 207, 102, 0.4),\n      rgba(81, 207, 102, 0.2));\n  border-color: #51cf66;\n  color: #51cf66;\n}\n@keyframes _ngcontent-%COMP%_consumable-bounce {\n  0%, 100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-4px);\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%] {\n  border-left: 6px solid #ffd43b !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 212, 59, 0.12) 0%,\n      transparent 100%) !important;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%] {\n  filter: drop-shadow(0 0 12px rgba(255, 212, 59, 0.8)) drop-shadow(0 4px 8px rgba(255, 212, 59, 0.4));\n  animation: _ngcontent-%COMP%_material-shine 3s ease-in-out infinite;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd43b 0%,\n      #ffe066 50%,\n      #ffd43b 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%] {\n  color: #ffd43b;\n  font-weight: 800;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 212, 59, 0.4),\n      rgba(255, 212, 59, 0.2));\n  border-color: #ffd43b;\n  color: #ffd43b;\n}\n@keyframes _ngcontent-%COMP%_material-shine {\n  0%, 100% {\n    filter: drop-shadow(0 0 12px rgba(255, 212, 59, 0.8));\n  }\n  50% {\n    filter: drop-shadow(0 0 20px rgb(255, 212, 59)) drop-shadow(0 0 30px rgba(255, 212, 59, 0.5));\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%] {\n  background: var(--bg-primary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 20px 16px;\n  transition: all 0.3s ease;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  min-height: 160px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: var(--gradient-primary);\n  transform: scaleX(0);\n  transition: transform 0.3s ease;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=common][_ngcontent-%COMP%] {\n  border-color: #9e9e9e;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=common][_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #9e9e9e 0%,\n      #757575 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=uncommon][_ngcontent-%COMP%] {\n  border-color: #51cf66;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(81, 207, 102, 0.05) 0%,\n      rgba(46, 125, 50, 0.05) 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=uncommon][_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #51cf66 0%,\n      #2e7d32 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=rare][_ngcontent-%COMP%] {\n  border-color: #339af0;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(51, 154, 240, 0.08) 0%,\n      rgba(25, 118, 210, 0.08) 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=rare][_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #339af0 0%,\n      #1976d2 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=epic][_ngcontent-%COMP%] {\n  border-color: #9775fa;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(151, 117, 250, 0.1) 0%,\n      rgba(123, 31, 162, 0.1) 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=epic][_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #9775fa 0%,\n      #7b1fa2 100%);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=legendary][_ngcontent-%COMP%] {\n  border-color: #ff8000;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 128, 0, 0.12) 0%,\n      rgba(230, 81, 0, 0.12) 100%);\n  animation: _ngcontent-%COMP%_legendary-border-glow 2s ease-in-out infinite;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=legendary][_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #ff8000 0%,\n      #e65100 100%);\n}\n@keyframes _ngcontent-%COMP%_legendary-border-glow {\n  0%, 100% {\n    box-shadow: 0 0 15px rgba(255, 128, 0, 0.3);\n  }\n  50% {\n    box-shadow: 0 0 25px rgba(255, 128, 0, 0.5);\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .delete-item-btn[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  width: 26px;\n  height: 26px;\n  padding: 0;\n  min-width: 26px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  background: rgba(244, 67, 54, 0.9);\n  border-radius: 50%;\n  z-index: 10;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .delete-item-btn[_ngcontent-%COMP%]:hover {\n  background: rgb(244, 67, 54);\n  transform: scale(1.1);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .delete-item-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\n  font-size: 16px;\n  width: 16px;\n  height: 16px;\n  line-height: 16px;\n  color: white;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover   .delete-item-btn[_ngcontent-%COMP%] {\n  opacity: 1;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-8px) scale(1.02);\n  box-shadow: 0 12px 32px var(--shadow);\n  border-color: var(--accent-primary);\n  cursor: pointer;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover::before {\n  transform: scaleX(1);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover   .item-card-icon[_ngcontent-%COMP%] {\n  transform: scale(1.25) rotate(5deg);\n  filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.5));\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover   .item-card-icon[_ngcontent-%COMP%]::after {\n  opacity: 1 !important;\n  animation: _ngcontent-%COMP%_sparkle-hover 0.6s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_sparkle-hover {\n  0%, 100% {\n    transform: scale(1) rotate(0deg);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.2) rotate(180deg);\n    opacity: 0.7;\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%] {\n  font-size: 4rem;\n  text-align: center;\n  margin-bottom: 16px;\n  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4));\n  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  z-index: 1;\n  position: relative;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]::after {\n  content: "\\2728";\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  font-size: 1rem;\n  opacity: 0;\n  animation: _ngcontent-%COMP%_sparkle 3s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_sparkle {\n  0%, 100% {\n    opacity: 0;\n    transform: scale(0) rotate(0deg);\n  }\n  25% {\n    opacity: 1;\n    transform: scale(1) rotate(45deg);\n  }\n  50% {\n    opacity: 0;\n    transform: scale(0.8) rotate(90deg);\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%] {\n  width: 100%;\n  z-index: 1;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-name[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n  text-align: center;\n  line-height: 1.3;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-name.rarity-text-common[_ngcontent-%COMP%] {\n  color: #9ca3af;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-name.rarity-text-uncommon[_ngcontent-%COMP%] {\n  color: #51cf66;\n  font-weight: 800;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-name.rarity-text-rare[_ngcontent-%COMP%] {\n  color: #fbbf24;\n  font-weight: 800;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-name.rarity-text-epic[_ngcontent-%COMP%] {\n  color: #a855f7;\n  font-weight: 900;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-name.rarity-text-legendary[_ngcontent-%COMP%] {\n  color: #ff8000;\n  font-weight: 900;\n  animation: _ngcontent-%COMP%_legendary-text-glow 2s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_legendary-text-glow {\n  0%, 100% {\n    text-shadow: 0 0 8px rgba(255, 128, 0, 0.6), 0 1px 2px rgba(0, 0, 0, 0.5);\n  }\n  50% {\n    text-shadow: 0 0 12px rgba(255, 128, 0, 0.9), 0 1px 2px rgba(0, 0, 0, 0.5);\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-rarity-badge[_ngcontent-%COMP%] {\n  font-size: 9px;\n  font-weight: 700;\n  text-align: center;\n  padding: 3px 8px;\n  margin: 4px auto;\n  border-radius: 10px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  display: inline-block;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-rarity-badge.rarity-badge-common[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #6b7280,\n      #4b5563);\n  color: #d1d5db;\n  border: 1px solid #9ca3af;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-rarity-badge.rarity-badge-uncommon[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669);\n  color: white;\n  border: 1px solid #34d399;\n  box-shadow: 0 0 8px rgba(16, 185, 129, 0.4);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-rarity-badge.rarity-badge-rare[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b,\n      #d97706);\n  color: white;\n  border: 1px solid #fbbf24;\n  box-shadow: 0 0 8px rgba(251, 191, 36, 0.5);\n  animation: _ngcontent-%COMP%_rare-glow 2s ease-in-out infinite;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-rarity-badge.rarity-badge-epic[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #a855f7,\n      #7c3aed);\n  color: white;\n  border: 1px solid #c084fc;\n  box-shadow: 0 0 10px rgba(168, 85, 247, 0.6);\n  animation: _ngcontent-%COMP%_epic-glow 2s ease-in-out infinite;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-rarity-badge.rarity-badge-legendary[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ff8000,\n      #cc6600);\n  color: white;\n  border: 1px solid #ffaa44;\n  box-shadow: 0 0 12px rgba(255, 128, 0, 0.8);\n  animation: _ngcontent-%COMP%_legendary-glow 1.5s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_rare-glow {\n  0%, 100% {\n    box-shadow: 0 0 8px rgba(251, 191, 36, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 16px rgba(251, 191, 36, 0.8);\n  }\n}\n@keyframes _ngcontent-%COMP%_epic-glow {\n  0%, 100% {\n    box-shadow: 0 0 10px rgba(168, 85, 247, 0.6);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(168, 85, 247, 0.9);\n  }\n}\n@keyframes _ngcontent-%COMP%_legendary-glow {\n  0%, 100% {\n    box-shadow: 0 0 12px rgba(255, 128, 0, 0.8);\n  }\n  50% {\n    box-shadow: 0 0 24px rgb(255, 128, 0);\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%] {\n  font-size: 10px;\n  color: var(--text-tertiary);\n  text-align: center;\n  margin-bottom: 4px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  font-weight: 600;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%] {\n  font-size: 10px;\n  text-align: center;\n  margin-bottom: 8px;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 4px 10px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 255, 255, 0.1),\n      rgba(255, 255, 255, 0.05));\n  border-radius: 10px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  font-weight: 700;\n  font-size: 9px;\n  color: var(--text-primary);\n  text-transform: uppercase;\n  letter-spacing: 0.3px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  gap: 4px;\n  flex-wrap: wrap;\n  margin-top: 8px;\n  max-height: 80px;\n  overflow-y: auto;\n  padding: 4px;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 3px;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 2px;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat[_ngcontent-%COMP%] {\n  font-size: 9px;\n  padding: 3px 6px;\n  background: var(--accent-primary);\n  border-radius: 10px;\n  color: white;\n  font-weight: 600;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n  white-space: nowrap;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.damage[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ef4444,\n      #dc2626);\n  border: 1px solid #f87171;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.defense[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6,\n      #2563eb);\n  border: 1px solid #60a5fa;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.vital[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669);\n  border: 1px solid #34d399;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.critical[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b,\n      #d97706);\n  border: 1px solid #fbbf24;\n  animation: _ngcontent-%COMP%_pulse-glow 2s ease-in-out infinite;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.lifesteal[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ec4899,\n      #db2777);\n  border: 1px solid #f472b6;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.resist[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6,\n      #7c3aed);\n  border: 1px solid #a78bfa;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.special[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #eab308,\n      #ca8a04);\n  border: 1px solid #fbbf24;\n  animation: _ngcontent-%COMP%_shimmer 3s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_pulse-glow {\n  0%, 100% {\n    box-shadow: 0 0 5px rgba(251, 146, 60, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 15px rgba(251, 146, 60, 0.8);\n  }\n}\n@keyframes _ngcontent-%COMP%_shimmer {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.8;\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-quantity[_ngcontent-%COMP%] {\n  text-align: center;\n  margin-top: 6px;\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-quantity[_ngcontent-%COMP%]   .quantity-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 4px 10px;\n  background: var(--accent-primary);\n  color: white;\n  border-radius: 20px;\n  font-size: 11px;\n  font-weight: 700;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-rarity[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  font-size: 20px;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));\n  z-index: 5;\n}\n.inventory-section[_ngcontent-%COMP%]   .empty-inventory[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 50px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.3),\n      rgba(0, 0, 0, 0.5));\n  border-radius: 16px;\n  border: 2px dashed rgba(255, 255, 255, 0.2);\n}\n.inventory-section[_ngcontent-%COMP%]   .empty-inventory[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%] {\n  font-size: 64px;\n  margin-bottom: 20px;\n  opacity: 0.7;\n  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));\n  animation: _ngcontent-%COMP%_float 3s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n.inventory-section[_ngcontent-%COMP%]   .empty-inventory[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 15px;\n  margin-bottom: 10px;\n  font-weight: 600;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);\n}\n.inventory-section[_ngcontent-%COMP%]   .empty-inventory[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.5);\n  font-weight: 400;\n  margin-bottom: 20px;\n}\n.inventory-section[_ngcontent-%COMP%]   .empty-inventory[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  margin-top: 10px;\n  padding: 0 24px;\n  height: 40px;\n  font-size: 14px;\n  font-weight: 700;\n  box-shadow: 0 4px 12px rgba(103, 58, 183, 0.4);\n}\n.inventory-section[_ngcontent-%COMP%]   .empty-inventory[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\n  margin-right: 6px;\n}\n.empty-equipment-state[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 60px 20px;\n}\n.empty-equipment-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%] {\n  font-size: 64px;\n  margin-bottom: 20px;\n  opacity: 0.3;\n}\n.empty-equipment-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.empty-equipment-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0;\n  color: var(--text-secondary);\n  font-size: 14px;\n}\n  .item-context-menu-mat .mat-mdc-menu-content {\n  padding: 8px 0;\n}\n  .item-context-menu-mat .mat-mdc-menu-item {\n  min-height: 48px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 0 20px;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n  .item-context-menu-mat .mat-mdc-menu-item mat-icon {\n  width: 20px;\n  height: 20px;\n  font-size: 20px;\n  margin-right: 8px;\n}\n  .item-context-menu-mat .mat-mdc-menu-item:hover {\n  background: var(--accent-primary) !important;\n  color: white !important;\n}\n  .item-context-menu-mat .mat-mdc-menu-item:hover mat-icon {\n  color: white !important;\n}\n  .cdk-overlay-container {\n  z-index: 9999999 !important;\n}\n  .cdk-overlay-pane {\n  z-index: 9999999 !important;\n}\n  .mat-mdc-menu-panel {\n  z-index: 9999999 !important;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2) !important;\n  border-radius: 8px;\n  min-width: 180px !important;\n}\n  .comparison-snackbar .mdc-snackbar__surface {\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-primary),\n      var(--bg-secondary)) !important;\n  border: 2px solid var(--accent-primary) !important;\n  border-radius: 12px !important;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;\n  min-width: 350px !important;\n  max-width: 500px !important;\n}\n  .comparison-snackbar .mdc-snackbar__label {\n  color: var(--text-primary) !important;\n  font-size: 14px !important;\n  line-height: 1.6 !important;\n  white-space: pre-line !important;\n  font-family: "Noto Sans KR", sans-serif !important;\n  padding: 16px 24px !important;\n}\n  .comparison-snackbar .mat-mdc-snack-bar-action {\n  color: var(--accent-primary) !important;\n  font-weight: 600 !important;\n}\n  .success-snackbar .mdc-snackbar__surface {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669) !important;\n  border-radius: 12px !important;\n  box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3) !important;\n}\n  .success-snackbar .mdc-snackbar__label {\n  color: white !important;\n  font-weight: 600 !important;\n  font-size: 15px !important;\n}\n  .success-snackbar .mat-mdc-snack-bar-action {\n  color: white !important;\n  font-weight: 700 !important;\n}\n.inventory-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(500px, 1fr));\n  gap: 12px;\n  padding: 20px;\n  width: 100%;\n}\n@media (max-width: 768px) {\n  .inventory-grid[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr;\n  }\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%] {\n  position: relative;\n  padding: 0;\n  border-radius: 0;\n  border: 2px solid;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(25, 25, 30, 0.98) 0%,\n      rgba(15, 15, 20, 0.98) 100%);\n  cursor: pointer;\n  transition: all 0.25s ease-out;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.8), inset 0 1px 0 rgba(255, 255, 255, 0.05);\n  display: flex;\n  flex-direction: row;\n  overflow: hidden;\n  min-height: 180px;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.9), inset 0 1px 0 rgba(255, 255, 255, 0.1);\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%] {\n  width: 180px;\n  min-width: 180px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 35, 0.95) 0%,\n      rgba(20, 20, 25, 0.98) 100%);\n  display: flex;\n  flex-direction: column;\n  border-right: 2px solid rgba(255, 255, 255, 0.08);\n  position: relative;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%] {\n  max-width: 100%;\n  max-height: 140px;\n  object-fit: contain;\n  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.8));\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]   .item-image-icon[_ngcontent-%COMP%] {\n  font-size: 96px;\n  text-align: center;\n  opacity: 0.85;\n  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.9));\n  transition: all 0.3s ease;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]   .item-image-icon[_ngcontent-%COMP%]:hover {\n  transform: scale(1.05);\n  filter: drop-shadow(0 6px 16px rgb(0, 0, 0));\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]   .item-image-placeholder[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 120px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background:\n    radial-gradient(\n      circle,\n      rgba(60, 60, 70, 0.4) 0%,\n      transparent 70%);\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]   .item-image-placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%] {\n  font-size: 64px;\n  opacity: 0.4;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%] {\n  padding: 12px 16px;\n  background: rgba(0, 0, 0, 0.4);\n  border-top: 1px solid rgba(255, 255, 255, 0.05);\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-type-badge[_ngcontent-%COMP%] {\n  font-size: 11px;\n  color: #9ca3af;\n  text-align: center;\n  margin-bottom: 8px;\n  text-transform: none;\n  font-weight: 600;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  gap: 16px;\n  font-size: 11px;\n  color: #6b7280;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .favorites[_ngcontent-%COMP%], \n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .favorites[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%], \n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%] {\n  color: #fbbf24;\n  font-size: 12px;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .favorites[_ngcontent-%COMP%]   .comment-icon[_ngcontent-%COMP%], \n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]   .comment-icon[_ngcontent-%COMP%] {\n  font-size: 12px;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 20px;\n  position: relative;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%] {\n  margin-bottom: 12px;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 12px;\n  margin-bottom: 8px;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  line-height: 1.3;\n  flex: 1;\n  letter-spacing: 0.3px;\n  color: #d1d5db;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%]   .attack-speed[_ngcontent-%COMP%] {\n  font-size: 11px;\n  color: #9ca3af;\n  white-space: nowrap;\n  align-self: flex-start;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .header-badges[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .header-badges[_ngcontent-%COMP%]   .badge-chaos[_ngcontent-%COMP%], \n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .header-badges[_ngcontent-%COMP%]   .badge-class[_ngcontent-%COMP%] {\n  font-size: 10px;\n  color: #9ca3af;\n  padding: 2px 0;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .unique-effect-highlight[_ngcontent-%COMP%] {\n  margin-bottom: 12px;\n  padding: 10px 0;\n  border-top: 1px solid rgba(255, 255, 255, 0.06);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.06);\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .unique-effect-highlight[_ngcontent-%COMP%]   .effect-text-main[_ngcontent-%COMP%] {\n  font-size: 13px;\n  line-height: 1.6;\n  color: #fbbf24;\n  font-weight: 600;\n  text-shadow: 0 0 8px rgba(251, 191, 36, 0.4);\n  word-break: keep-all;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .unique-effect-highlight[_ngcontent-%COMP%]   .effect-text-main[_ngcontent-%COMP%]::first-line {\n  color: #fb923c;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%] {\n  font-size: 12px;\n  line-height: 1.5;\n  color: #d1d5db;\n  font-weight: 500;\n  padding: 2px 0;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]   .stat-line.damage[_ngcontent-%COMP%] {\n  color: #d1d5db;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]   .stat-line.defense[_ngcontent-%COMP%] {\n  color: #d1d5db;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]   .stat-line.vital[_ngcontent-%COMP%] {\n  color: #d1d5db;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]   .stat-line.critical[_ngcontent-%COMP%] {\n  color: #d1d5db;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]   .stat-line.special[_ngcontent-%COMP%] {\n  color: #d1d5db;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-legacy[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-legacy[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: #d1d5db;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  margin-top: auto;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  flex: 1;\n  padding: 8px 14px;\n  font-size: 10px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  border: 1px solid;\n  border-radius: 2px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  background: rgba(0, 0, 0, 0.4);\n  color: #d1d5db;\n  border-color: rgba(255, 255, 255, 0.2);\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.4);\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]   .btn-equip[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(59, 130, 246, 0.6) 0%,\n      rgba(37, 99, 235, 0.7) 100%);\n  border-color: #3b82f6;\n  color: #ffffff;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]   .btn-equip[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(59, 130, 246, 0.8) 0%,\n      rgba(37, 99, 235, 0.9) 100%);\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]   .btn-sell[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(234, 179, 8, 0.6) 0%,\n      rgba(202, 138, 4, 0.7) 100%);\n  border-color: #eab308;\n  color: #1a1a1a;\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]   .btn-sell[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(234, 179, 8, 0.8) 0%,\n      rgba(202, 138, 4, 0.9) 100%);\n}\n.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 2px;\n  font-size: 11px;\n  font-weight: 800;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);\n  z-index: 10;\n}\n.inventory-item.diablo-card.rarity-common[_ngcontent-%COMP%] {\n  border-color: #6b7280;\n}\n.inventory-item.diablo-card.rarity-common[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  color: #9ca3af;\n}\n.inventory-item.diablo-card.rarity-uncommon[_ngcontent-%COMP%] {\n  border-color: #3b82f6;\n}\n.inventory-item.diablo-card.rarity-uncommon[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  color: #60a5fa;\n}\n.inventory-item.diablo-card.rarity-rare[_ngcontent-%COMP%] {\n  border-color: #fbbf24;\n}\n.inventory-item.diablo-card.rarity-rare[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  color: #fcd34d;\n}\n.inventory-item.diablo-card.rarity-epic[_ngcontent-%COMP%] {\n  border-color: #a855f7;\n}\n.inventory-item.diablo-card.rarity-epic[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  color: #c084fc;\n}\n.inventory-item.diablo-card.rarity-legendary[_ngcontent-%COMP%] {\n  border-color: #f97316;\n}\n.inventory-item.diablo-card.rarity-legendary[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  color: #fb923c;\n}\n.inventory-item.diablo-card.rarity-unique[_ngcontent-%COMP%] {\n  border-color: #a855f7;\n  border-width: 3px;\n}\n.inventory-item.diablo-card.rarity-unique[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  color: #c084fc;\n  text-shadow: 0 0 12px rgba(168, 85, 247, 0.6);\n}\n.inventory-item.diablo-card.rarity-unique[_ngcontent-%COMP%]   .unique-effect-highlight[_ngcontent-%COMP%]   .effect-text-main[_ngcontent-%COMP%] {\n  color: #fbbf24;\n  text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);\n}\n.inventory-item.diablo-card.rarity-mythic[_ngcontent-%COMP%] {\n  border-color: #ec4899;\n  border-width: 3px;\n  box-shadow:\n    0 4px 12px rgba(0, 0, 0, 0.8),\n    0 0 20px rgba(236, 72, 153, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.05);\n}\n.inventory-item.diablo-card.rarity-mythic[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  color: #f472b6;\n  text-shadow: 0 0 15px rgba(236, 72, 153, 0.7);\n  font-weight: 800;\n}\n.inventory-item.diablo-card.rarity-mythic[_ngcontent-%COMP%]   .unique-effect-highlight[_ngcontent-%COMP%]   .effect-text-main[_ngcontent-%COMP%] {\n  color: #fb923c;\n  text-shadow: 0 0 12px rgba(251, 146, 60, 0.6);\n}\n.inventory-item.diablo-card.rarity-mythic[_ngcontent-%COMP%]:hover {\n  box-shadow:\n    0 8px 20px rgba(0, 0, 0, 0.9),\n    0 0 30px rgba(236, 72, 153, 0.6),\n    inset 0 1px 0 rgba(255, 255, 255, 0.1);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card) {\n  position: relative;\n  padding: 0;\n  border-radius: 4px;\n  border: 2px solid;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(20, 20, 25, 0.98) 0%,\n      rgba(10, 10, 15, 0.98) 100%);\n  cursor: pointer;\n  transition: all 0.25s ease-out;\n  box-shadow:\n    0 4px 8px rgba(0, 0, 0, 0.6),\n    0 2px 4px rgba(0, 0, 0, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.1);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card):hover {\n  transform: translateY(-3px);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary {\n  border-color: #f97316;\n  border-width: 3px;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(249, 115, 22, 0.15) 0%,\n      rgba(10, 10, 15, 0.98) 100%);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary::before {\n  content: "";\n  position: absolute;\n  top: -3px;\n  left: -3px;\n  right: -3px;\n  bottom: -3px;\n  border-radius: 4px;\n  background:\n    linear-gradient(\n      45deg,\n      #f97316 0%,\n      #fb923c 20%,\n      #fbbf24 40%,\n      #fb923c 60%,\n      #f97316 80%,\n      #fb923c 100%);\n  z-index: -1;\n  opacity: 0.6;\n  filter: blur(12px);\n  animation: _ngcontent-%COMP%_legendary-glow 3s ease-in-out infinite;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary::after {\n  height: 60%;\n  background:\n    linear-gradient(\n      180deg,\n      transparent 0%,\n      rgba(249, 115, 22, 0.3) 50%,\n      rgba(0, 0, 0, 0.6) 100%);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary:hover {\n  border-color: #fb923c;\n  transform: translateY(-4px) scale(1.01);\n  box-shadow:\n    0 12px 24px rgba(249, 115, 22, 0.8),\n    0 6px 12px rgba(0, 0, 0, 0.6),\n    0 0 40px rgba(249, 115, 22, 0.7),\n    inset 0 0 35px rgba(249, 115, 22, 0.25);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary:hover::before {\n  opacity: 0.9;\n  filter: blur(15px);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary   .item-name[_ngcontent-%COMP%] {\n  color: #fdba74;\n  text-shadow:\n    0 2px 6px rgb(0, 0, 0),\n    0 0 25px rgb(249, 115, 22),\n    0 0 15px rgb(251, 146, 60),\n    0 0 8px rgba(251, 191, 36, 0.8);\n  letter-spacing: 1.5px;\n  font-weight: 900;\n  text-transform: uppercase;\n  animation: _ngcontent-%COMP%_legendary-text 2s ease-in-out infinite;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary   .item-header[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(249, 115, 22, 0.4) 0%,\n      rgba(249, 115, 22, 0.15) 100%);\n  border-bottom: 2px solid rgba(249, 115, 22, 0.8);\n}\n@keyframes _ngcontent-%COMP%_legendary-glow {\n  0%, 100% {\n    opacity: 0.6;\n    filter: blur(12px);\n  }\n  50% {\n    opacity: 0.85;\n    filter: blur(15px);\n  }\n}\n@keyframes _ngcontent-%COMP%_legendary-text {\n  0%, 100% {\n    text-shadow:\n      0 2px 6px rgb(0, 0, 0),\n      0 0 25px rgb(249, 115, 22),\n      0 0 15px rgb(251, 146, 60),\n      0 0 8px rgba(251, 191, 36, 0.8);\n  }\n  50% {\n    text-shadow:\n      0 2px 6px rgb(0, 0, 0),\n      0 0 30px rgb(249, 115, 22),\n      0 0 20px rgb(251, 146, 60),\n      0 0 12px rgb(251, 191, 36);\n  }\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 18px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  position: relative;\n  z-index: 1;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-header[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 1px;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.3) 50%,\n      transparent 100%);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-header[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 700;\n  line-height: 1.4;\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  letter-spacing: 0.8px;\n  font-family:\n    "Exocet",\n    "Cinzel",\n    "Trajan Pro",\n    serif,\n    -apple-system,\n    BlinkMacSystemFont,\n    "Segoe UI";\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-header[_ngcontent-%COMP%]   .item-rarity[_ngcontent-%COMP%] {\n  font-size: 9px;\n  padding: 4px 10px;\n  border-radius: 2px;\n  background: rgba(0, 0, 0, 0.5);\n  color: rgba(255, 255, 255, 0.85);\n  white-space: nowrap;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  font-weight: 800;\n  flex-shrink: 0;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%] {\n  padding: 14px 18px;\n  font-size: 12px;\n  line-height: 1.8;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  position: relative;\n  z-index: 1;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(0, 0, 0, 0.2) 0%,\n      transparent 100%);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%] {\n  color: #d1d5db;\n  padding: 3px 0;\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.15s ease;\n  font-family:\n    "Segoe UI",\n    Roboto,\n    Arial,\n    sans-serif;\n  font-weight: 600;\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%]::before {\n  content: "\\25c6";\n  font-size: 8px;\n  opacity: 0.6;\n  color: inherit;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%]:hover {\n  color: #f3f4f6;\n  transform: translateX(2px);\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.damage[_ngcontent-%COMP%] {\n  color: #ef4444;\n  font-weight: 800;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 8px rgba(239, 68, 68, 0.5);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.damage[_ngcontent-%COMP%]::before {\n  content: "\\2694";\n  color: #dc2626;\n  opacity: 1;\n  font-size: 10px;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.defense[_ngcontent-%COMP%] {\n  color: #3b82f6;\n  font-weight: 800;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 8px rgba(59, 130, 246, 0.5);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.defense[_ngcontent-%COMP%]::before {\n  content: "\\1f6e1";\n  opacity: 1;\n  font-size: 10px;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.vital[_ngcontent-%COMP%] {\n  color: #dc2626;\n  font-weight: 800;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 10px rgba(220, 38, 38, 0.6);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.vital[_ngcontent-%COMP%]::before {\n  content: "\\2764";\n  color: #dc2626;\n  opacity: 1;\n  font-size: 10px;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.critical[_ngcontent-%COMP%] {\n  color: #f97316;\n  font-weight: 900;\n  text-shadow:\n    0 1px 4px rgb(0, 0, 0),\n    0 0 12px rgba(249, 115, 22, 0.8),\n    0 0 6px rgba(251, 146, 60, 0.6);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.critical[_ngcontent-%COMP%]::before {\n  content: "\\1f4a5";\n  opacity: 1;\n  font-size: 11px;\n  filter: drop-shadow(0 0 4px rgba(249, 115, 22, 0.8));\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.lifesteal[_ngcontent-%COMP%] {\n  color: #ec4899;\n  font-weight: 800;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 10px rgba(236, 72, 153, 0.6);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.lifesteal[_ngcontent-%COMP%]::before {\n  content: "\\1fa78";\n  opacity: 1;\n  font-size: 10px;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.manasteal[_ngcontent-%COMP%] {\n  color: #06b6d4;\n  font-weight: 800;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 10px rgba(6, 182, 212, 0.6);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.manasteal[_ngcontent-%COMP%]::before {\n  content: "\\1f4a7";\n  opacity: 1;\n  font-size: 10px;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist[_ngcontent-%COMP%] {\n  color: #a855f7;\n  font-weight: 700;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist[_ngcontent-%COMP%]::before {\n  content: "\\2726";\n  opacity: 1;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.fire[_ngcontent-%COMP%] {\n  color: #f87171;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.fire[_ngcontent-%COMP%]::before {\n  content: "\\1f525";\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.cold[_ngcontent-%COMP%] {\n  color: #60a5fa;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.cold[_ngcontent-%COMP%]::before {\n  content: "\\2744\\fe0f";\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.lightning[_ngcontent-%COMP%] {\n  color: #fbbf24;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.lightning[_ngcontent-%COMP%]::before {\n  content: "\\26a1";\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.poison[_ngcontent-%COMP%] {\n  color: #34d399;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.poison[_ngcontent-%COMP%]::before {\n  content: "\\2620\\fe0f";\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.all[_ngcontent-%COMP%] {\n  color: #a855f7;\n  font-weight: 800;\n  text-shadow: 0 0 8px rgba(168, 85, 247, 0.6);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.all[_ngcontent-%COMP%]::before {\n  content: "\\2728";\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special[_ngcontent-%COMP%] {\n  color: #fbbf24;\n  font-weight: 700;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special[_ngcontent-%COMP%]::before {\n  content: "\\2605";\n  opacity: 1;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.magic[_ngcontent-%COMP%] {\n  color: #c084fc;\n  text-shadow: 0 0 6px rgba(192, 132, 252, 0.5);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.magic[_ngcontent-%COMP%]::before {\n  content: "\\2728";\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.gold[_ngcontent-%COMP%] {\n  color: #fbbf24;\n  text-shadow: 0 0 6px rgba(251, 191, 36, 0.5);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.gold[_ngcontent-%COMP%]::before {\n  content: "\\1f4b0";\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.exp[_ngcontent-%COMP%] {\n  color: #60a5fa;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.exp[_ngcontent-%COMP%]::before {\n  content: "\\2b50";\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.move[_ngcontent-%COMP%] {\n  color: #34d399;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.move[_ngcontent-%COMP%]::before {\n  content: "\\26a1";\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  padding: 12px 18px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  background:\n    linear-gradient(\n      180deg,\n      rgba(0, 0, 0, 0.3) 0%,\n      rgba(0, 0, 0, 0.5) 100%);\n  position: relative;\n  z-index: 1;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 1px;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.2) 50%,\n      transparent 100%);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  flex: 1;\n  padding: 10px 16px;\n  font-size: 11px;\n  font-weight: 800;\n  text-transform: uppercase;\n  letter-spacing: 0.8px;\n  border: 2px solid;\n  border-radius: 2px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  overflow: hidden;\n  font-family:\n    "Segoe UI",\n    Arial,\n    sans-serif;\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.15);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.3) 50%,\n      transparent 100%);\n  transition: left 0.5s ease;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover::before {\n  left: 100%;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   .btn-use[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(16, 185, 129, 0.8) 0%,\n      rgba(5, 150, 105, 0.9) 100%);\n  border-color: #34d399;\n  color: #ffffff;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   .btn-use[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      180deg,\n      rgb(16, 185, 129) 0%,\n      rgb(5, 150, 105) 100%);\n  border-color: #6ee7b7;\n  box-shadow:\n    0 4px 8px rgba(16, 185, 129, 0.6),\n    0 0 15px rgba(16, 185, 129, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.25);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   .btn-equip[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(59, 130, 246, 0.8) 0%,\n      rgba(37, 99, 235, 0.9) 100%);\n  border-color: #60a5fa;\n  color: #ffffff;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   .btn-equip[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      180deg,\n      rgb(59, 130, 246) 0%,\n      rgb(37, 99, 235) 100%);\n  border-color: #93c5fd;\n  box-shadow:\n    0 4px 8px rgba(59, 130, 246, 0.6),\n    0 0 15px rgba(59, 130, 246, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.25);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   .btn-sell[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(234, 179, 8, 0.8) 0%,\n      rgba(202, 138, 4, 0.9) 100%);\n  border-color: #fbbf24;\n  color: #1a1a1a;\n  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.3);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   .btn-sell[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      180deg,\n      rgb(234, 179, 8) 0%,\n      rgb(202, 138, 4) 100%);\n  border-color: #fcd34d;\n  box-shadow:\n    0 4px 8px rgba(234, 179, 8, 0.6),\n    0 0 15px rgba(234, 179, 8, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.4);\n  color: #000000;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-quantity[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  font-weight: 800;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);\n  z-index: 10;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-badges[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 6px;\n  padding: 8px 18px;\n  background: rgba(0, 0, 0, 0.25);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n  flex-wrap: wrap;\n  position: relative;\n  z-index: 1;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-badges[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n  padding: 4px 10px;\n  font-size: 10px;\n  font-weight: 800;\n  text-transform: uppercase;\n  letter-spacing: 0.8px;\n  border-radius: 2px;\n  border: 1px solid;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-badges[_ngcontent-%COMP%]   .badge.chaos[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(168, 85, 247, 0.8) 0%,\n      rgba(124, 58, 237, 0.9) 100%);\n  border-color: #a855f7;\n  color: #fae8ff;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6), 0 0 10px rgba(168, 85, 247, 0.5);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-badges[_ngcontent-%COMP%]   .badge.class[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.8) 0%,\n      rgba(37, 99, 235, 0.9) 100%);\n  border-color: #3b82f6;\n  color: #dbeafe;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6), 0 0 8px rgba(59, 130, 246, 0.4);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-badges[_ngcontent-%COMP%]   .badge.aps[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(34, 197, 94, 0.8) 0%,\n      rgba(22, 163, 74, 0.9) 100%);\n  border-color: #22c55e;\n  color: #dcfce7;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6), 0 0 8px rgba(34, 197, 94, 0.4);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .unique-effect[_ngcontent-%COMP%] {\n  padding: 14px 18px;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(168, 85, 247, 0.15) 0%,\n      rgba(0, 0, 0, 0.3) 100%);\n  border-top: 1px solid rgba(168, 85, 247, 0.3);\n  border-bottom: 1px solid rgba(168, 85, 247, 0.2);\n  position: relative;\n  z-index: 1;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .unique-effect[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 1px;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(168, 85, 247, 0.5) 50%,\n      transparent 100%);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .unique-effect[_ngcontent-%COMP%]   .effect-label[_ngcontent-%COMP%] {\n  font-size: 10px;\n  font-weight: 800;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  color: #c084fc;\n  margin-bottom: 6px;\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8), 0 0 8px rgba(168, 85, 247, 0.6);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .unique-effect[_ngcontent-%COMP%]   .effect-text[_ngcontent-%COMP%] {\n  font-size: 12px;\n  line-height: 1.6;\n  color: #e9d5ff;\n  font-weight: 600;\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);\n  font-family:\n    "Segoe UI",\n    Roboto,\n    Arial,\n    sans-serif;\n  word-break: keep-all;\n  overflow-wrap: break-word;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-unique {\n  border-color: #a855f7;\n  border-width: 3px;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(168, 85, 247, 0.12) 0%,\n      rgba(10, 10, 15, 0.98) 100%);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-unique:hover {\n  border-color: #c084fc;\n  box-shadow:\n    0 10px 20px rgba(168, 85, 247, 0.6),\n    0 4px 8px rgba(0, 0, 0, 0.5),\n    0 0 35px rgba(168, 85, 247, 0.5),\n    inset 0 0 30px rgba(168, 85, 247, 0.18);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-unique   .item-name[_ngcontent-%COMP%] {\n  color: #d8b4fe;\n  text-shadow:\n    0 2px 4px rgba(0, 0, 0, 0.9),\n    0 0 18px rgba(168, 85, 247, 0.9),\n    0 0 10px rgba(168, 85, 247, 0.7);\n  letter-spacing: 1px;\n  font-weight: 900;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-unique   .item-header[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(168, 85, 247, 0.32) 0%,\n      rgba(168, 85, 247, 0.1) 100%);\n  border-bottom: 2px solid rgba(168, 85, 247, 0.65);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-mythic {\n  border-color: #ec4899;\n  border-width: 4px;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(236, 72, 153, 0.18) 0%,\n      rgba(10, 10, 15, 0.98) 100%);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-mythic::before {\n  content: "";\n  position: absolute;\n  top: -4px;\n  left: -4px;\n  right: -4px;\n  bottom: -4px;\n  border-radius: 4px;\n  background:\n    linear-gradient(\n      45deg,\n      #ec4899 0%,\n      #f472b6 20%,\n      #f9a8d4 40%,\n      #f472b6 60%,\n      #ec4899 80%,\n      #f472b6 100%);\n  z-index: -1;\n  opacity: 0.7;\n  filter: blur(14px);\n  animation: _ngcontent-%COMP%_legendary-glow 3s ease-in-out infinite;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-mythic:hover {\n  border-color: #f472b6;\n  transform: translateY(-5px) scale(1.02);\n  box-shadow:\n    0 15px 30px rgba(236, 72, 153, 0.9),\n    0 8px 16px rgba(0, 0, 0, 0.6),\n    0 0 50px rgba(236, 72, 153, 0.8),\n    inset 0 0 40px rgba(236, 72, 153, 0.3);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-mythic:hover::before {\n  opacity: 1;\n  filter: blur(18px);\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-mythic   .item-name[_ngcontent-%COMP%] {\n  color: #fbcfe8;\n  text-shadow:\n    0 2px 6px rgb(0, 0, 0),\n    0 0 30px rgb(236, 72, 153),\n    0 0 20px rgb(244, 114, 182),\n    0 0 12px rgba(249, 168, 212, 0.9);\n  letter-spacing: 2px;\n  font-weight: 900;\n  text-transform: uppercase;\n  animation: _ngcontent-%COMP%_legendary-text 2s ease-in-out infinite;\n}\n.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-mythic   .item-header[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(236, 72, 153, 0.45) 0%,\n      rgba(236, 72, 153, 0.18) 100%);\n  border-bottom: 2px solid rgba(236, 72, 153, 0.85);\n}\n@keyframes _ngcontent-%COMP%_legendary-item-pulse {\n  0%, 100% {\n    box-shadow:\n      inset 0 2px 6px var(--shadow),\n      0 2px 8px var(--shadow),\n      0 0 20px rgba(249, 115, 22, 0.4);\n  }\n  50% {\n    box-shadow:\n      inset 0 2px 6px var(--shadow),\n      0 2px 8px var(--shadow),\n      0 0 30px rgba(249, 115, 22, 0.7);\n  }\n}\n@keyframes _ngcontent-%COMP%_legendary-text-shine {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 200% 50%;\n  }\n}\n@keyframes _ngcontent-%COMP%_legendary-header-shine {\n  0% {\n    left: -100%;\n  }\n  50%, 100% {\n    left: 200%;\n  }\n}\n.empty-message[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 60px 20px;\n  color: var(--text-secondary);\n  font-size: 16px;\n  font-style: italic;\n}\n@keyframes _ngcontent-%COMP%_legendary-pulse {\n  0%, 100% {\n    box-shadow: 0 0 20px rgba(249, 115, 22, 0.4);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(249, 115, 22, 0.7);\n  }\n}\n  .item-details-snackbar .mdc-snackbar__surface {\n  background: var(--bg-secondary) !important;\n  border: 2px solid var(--border-color) !important;\n  border-radius: 12px !important;\n  box-shadow: 0 12px 48px var(--shadow) !important;\n  min-width: 400px !important;\n  max-width: 500px !important;\n}\n  .item-details-snackbar .mdc-snackbar__label {\n  color: var(--text-primary) !important;\n  font-size: 13px !important;\n  line-height: 1.8 !important;\n  white-space: pre-line !important;\n  font-family:\n    "Consolas",\n    "Monaco",\n    monospace !important;\n  padding: 20px 24px !important;\n}\n  .item-details-snackbar.rarity-common .mdc-snackbar__surface {\n  border-color: #9ca3af !important;\n}\n  .item-details-snackbar.rarity-uncommon .mdc-snackbar__surface {\n  border-color: #3b82f6 !important;\n  box-shadow: 0 12px 48px rgba(59, 130, 246, 0.3) !important;\n}\n  .item-details-snackbar.rarity-rare .mdc-snackbar__surface {\n  border-color: #eab308 !important;\n  box-shadow: 0 12px 48px rgba(234, 179, 8, 0.3) !important;\n}\n  .item-details-snackbar.rarity-epic .mdc-snackbar__surface {\n  border-color: #a855f7 !important;\n  box-shadow: 0 12px 48px rgba(168, 85, 247, 0.4) !important;\n}\n  .item-details-snackbar.rarity-legendary .mdc-snackbar__surface {\n  border-color: #f97316 !important;\n  box-shadow: 0 12px 48px rgba(249, 115, 22, 0.5) !important;\n  animation: _ngcontent-%COMP%_legendary-pulse 2s ease-in-out infinite;\n}\n.inventory-panel[_ngcontent-%COMP%] {\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  top: 0 !important;\n  left: 0 !important;\n  transform: none !important;\n  border-radius: 0 !important;\n  display: flex !important;\n  flex-direction: column !important;\n}\n.inventory-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border-bottom: 2px solid var(--border-color);\n  flex-shrink: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-tabs[_ngcontent-%COMP%] {\n  flex-shrink: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  overflow-x: hidden;\n  min-height: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 10px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n}\n.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 5px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-primary);\n}\n.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]:has(.equipment-slots-section) {\n  display: flex !important;\n  flex-direction: column;\n  gap: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]:has(.equipment-slots-section)   .equipment-slots-section[_ngcontent-%COMP%] {\n  border-bottom: 3px solid var(--border-color);\n  border-right: none;\n  flex-shrink: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]:has(.equipment-slots-section)   .inventory-tab-grid[_ngcontent-%COMP%] {\n  border-top: 3px solid var(--border-color);\n  border-left: none;\n  flex: 1;\n  min-height: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n  padding: 12px 16px;\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n  margin: 0;\n  flex-wrap: wrap;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: var(--bg-primary);\n  border-radius: 4px;\n  border: 1px solid var(--border-color);\n  min-width: 120px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item.gold[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%] {\n  color: #d4af37;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item.gem[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%] {\n  color: #9370db;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item.crystal[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%] {\n  color: #4682b4;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item.ticket[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%] {\n  color: #db7093;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .currency-icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .currency-label[_ngcontent-%COMP%] {\n  font-size: 11px;\n  font-weight: 500;\n  color: var(--text-secondary);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 600;\n  min-width: 40px;\n  text-align: right;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .currency-unit[_ngcontent-%COMP%] {\n  font-size: 11px;\n  font-weight: 500;\n  color: var(--text-secondary);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%] {\n  padding: 40px;\n  width: 100%;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-header[_ngcontent-%COMP%] {\n  margin-bottom: 32px;\n  text-align: center;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 8px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-header[_ngcontent-%COMP%]   .currency-subtitle[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: var(--text-secondary);\n  margin: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 24px;\n  margin-bottom: 40px;\n}\n@media (max-width: 1200px) {\n  .inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-grid[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n@media (max-width: 768px) {\n  .inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-grid[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr;\n  }\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%] {\n  position: relative;\n  border-radius: 16px;\n  padding: 24px;\n  overflow: hidden;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  cursor: pointer;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-background[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0.05;\n  transition: opacity 0.3s ease;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-content[_ngcontent-%COMP%] {\n  position: relative;\n  z-index: 1;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-top[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-top[_ngcontent-%COMP%]   .currency-icon-wrapper[_ngcontent-%COMP%] {\n  width: 50px;\n  height: 50px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.3s ease;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-top[_ngcontent-%COMP%]   .currency-icon-wrapper[_ngcontent-%COMP%]   .currency-icon[_ngcontent-%COMP%] {\n  font-size: 28px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-top[_ngcontent-%COMP%]   .currency-label[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-amount-section[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: baseline;\n  gap: 6px;\n  margin-bottom: 8px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-amount-section[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%]   .amount-number[_ngcontent-%COMP%] {\n  font-size: 32px;\n  font-weight: 700;\n  line-height: 1;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-amount-section[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%]   .amount-unit[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  opacity: 0.7;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-amount-section[_ngcontent-%COMP%]   .currency-usage[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  margin: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 32px var(--shadow);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]:hover   .currency-background[_ngcontent-%COMP%] {\n  opacity: 0.1;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]:hover   .currency-icon-wrapper[_ngcontent-%COMP%] {\n  transform: scale(1.1);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gold-card[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(245, 158, 11, 0.1),\n      rgba(217, 119, 6, 0.05));\n  border: 2px solid rgba(245, 158, 11, 0.3);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gold-card[_ngcontent-%COMP%]   .currency-background[_ngcontent-%COMP%] {\n  background:\n    radial-gradient(\n      circle at top right,\n      #f59e0b,\n      transparent);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gold-card[_ngcontent-%COMP%]   .currency-icon-wrapper[_ngcontent-%COMP%] {\n  background: rgba(245, 158, 11, 0.15);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gold-card[_ngcontent-%COMP%]   .amount-number[_ngcontent-%COMP%] {\n  color: #f59e0b;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gem-card[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 92, 246, 0.1),\n      rgba(124, 58, 237, 0.05));\n  border: 2px solid rgba(139, 92, 246, 0.3);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gem-card[_ngcontent-%COMP%]   .currency-background[_ngcontent-%COMP%] {\n  background:\n    radial-gradient(\n      circle at top right,\n      #8b5cf6,\n      transparent);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gem-card[_ngcontent-%COMP%]   .currency-icon-wrapper[_ngcontent-%COMP%] {\n  background: rgba(139, 92, 246, 0.15);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gem-card[_ngcontent-%COMP%]   .amount-number[_ngcontent-%COMP%] {\n  color: #8b5cf6;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.crystal-card[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.1),\n      rgba(37, 99, 235, 0.05));\n  border: 2px solid rgba(59, 130, 246, 0.3);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.crystal-card[_ngcontent-%COMP%]   .currency-background[_ngcontent-%COMP%] {\n  background:\n    radial-gradient(\n      circle at top right,\n      #3b82f6,\n      transparent);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.crystal-card[_ngcontent-%COMP%]   .currency-icon-wrapper[_ngcontent-%COMP%] {\n  background: rgba(59, 130, 246, 0.15);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.crystal-card[_ngcontent-%COMP%]   .amount-number[_ngcontent-%COMP%] {\n  color: #3b82f6;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.ticket-card[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(236, 72, 153, 0.1),\n      rgba(219, 39, 119, 0.05));\n  border: 2px solid rgba(236, 72, 153, 0.3);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.ticket-card[_ngcontent-%COMP%]   .currency-background[_ngcontent-%COMP%] {\n  background:\n    radial-gradient(\n      circle at top right,\n      #ec4899,\n      transparent);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.ticket-card[_ngcontent-%COMP%]   .currency-icon-wrapper[_ngcontent-%COMP%] {\n  background: rgba(236, 72, 153, 0.15);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.ticket-card[_ngcontent-%COMP%]   .amount-number[_ngcontent-%COMP%] {\n  color: #ec4899;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 12px;\n  padding: 20px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]   .guide-title[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin: 0 0 16px 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]   .guide-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]   .guide-list[_ngcontent-%COMP%]   .guide-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]   .guide-list[_ngcontent-%COMP%]   .guide-item[_ngcontent-%COMP%]   .guide-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n  flex-shrink: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]   .guide-list[_ngcontent-%COMP%]   .guide-item[_ngcontent-%COMP%]   .guide-text[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: var(--text-secondary);\n}\n.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]   .guide-list[_ngcontent-%COMP%]   .guide-item[_ngcontent-%COMP%]:hover {\n  border-color: var(--accent-color);\n  background: var(--bg-secondary);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%] {\n  padding: 40px;\n  height: 100%;\n  overflow-y: auto;\n  width: 100%;\n  max-width: 1600px;\n  margin: 0 auto;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 32px;\n  padding-bottom: 24px;\n  border-bottom: 2px solid var(--border-color);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-title-section[_ngcontent-%COMP%]   .shop-title[_ngcontent-%COMP%] {\n  font-size: 22px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 8px 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-title-section[_ngcontent-%COMP%]   .shop-subtitle[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: var(--text-secondary);\n  margin: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(245, 158, 11, 0.1),\n      rgba(217, 119, 6, 0.05));\n  border: 2px solid rgba(245, 158, 11, 0.3);\n  border-radius: 12px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-icon[_ngcontent-%COMP%] {\n  font-size: 28px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-info[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-info[_ngcontent-%COMP%]   .wallet-label[_ngcontent-%COMP%] {\n  font-size: 11px;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-info[_ngcontent-%COMP%]   .wallet-amount[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: 700;\n  color: #f59e0b;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-items-container[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 28px;\n}\n@media (min-width: 1400px) {\n  .inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-items-container[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(4, 1fr);\n  }\n}\n@media (min-width: 1000px) and (max-width: 1399px) {\n  .inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-items-container[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n@media (min-width: 700px) and (max-width: 999px) {\n  .inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-items-container[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n@media (max-width: 699px) {\n  .inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-items-container[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr;\n  }\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 0;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-6px);\n  box-shadow: 0 16px 48px var(--shadow);\n  border-color: var(--accent-color);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover::before {\n  opacity: 1;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover   .item-icon-large[_ngcontent-%COMP%] {\n  transform: scale(1.15) rotate(5deg);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%] {\n  border-color: rgba(245, 158, 11, 0.5);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #f59e0b,\n      #ef4444);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b,\n      #ef4444);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-epic[_ngcontent-%COMP%] {\n  border-color: rgba(168, 85, 247, 0.5);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-epic[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #a855f7,\n      #8b5cf6);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-epic[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #a855f7,\n      #8b5cf6);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%] {\n  border-color: rgba(139, 92, 246, 0.5);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #8b5cf6,\n      #3b82f6);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6,\n      #3b82f6);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%] {\n  border-color: rgba(16, 185, 129, 0.5);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #10b981,\n      #06b6d4);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #06b6d4);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-common[_ngcontent-%COMP%] {\n  border-color: rgba(107, 114, 128, 0.5);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-common[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #6b7280,\n      #9ca3af);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-common[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #6b7280,\n      #9ca3af);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  right: 12px;\n  display: flex;\n  justify-content: space-between;\n  z-index: 2;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%], \n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]   .item-type-badge[_ngcontent-%COMP%] {\n  padding: 6px 12px;\n  border-radius: 8px;\n  font-size: 11px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  color: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]   .item-type-badge[_ngcontent-%COMP%] {\n  background: rgba(0, 0, 0, 0.6);\n  -webkit-backdrop-filter: blur(8px);\n  backdrop-filter: blur(8px);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-tertiary),\n      var(--bg-primary));\n  padding: 40px 20px 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-bottom: 1px solid var(--border-color);\n  position: relative;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-icon-large[_ngcontent-%COMP%] {\n  font-size: 64px;\n  transition: transform 0.3s ease;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%] {\n  padding: 20px;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n  line-height: 1.3;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: var(--text-secondary);\n  line-height: 1.6;\n  margin: 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]   .stat-chip[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 10px;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]   .stat-chip[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 14px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]   .stat-chip[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  color: var(--accent-color);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: rgba(139, 92, 246, 0.05);\n  border: 1px solid rgba(139, 92, 246, 0.2);\n  border-radius: 8px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-icon[_ngcontent-%COMP%] {\n  font-size: 14px;\n  flex-shrink: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-text[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  line-height: 1.4;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%] {\n  padding: 16px 20px;\n  background: var(--bg-tertiary);\n  border-top: 1px solid var(--border-color);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]   .price-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]   .price-amount[_ngcontent-%COMP%] {\n  font-size: 24px;\n  font-weight: 700;\n  color: #f59e0b;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]   .price-unit[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 14px 20px;\n  border-radius: 10px;\n  font-size: 15px;\n  font-weight: 700;\n  border: none;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.can-buy[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669);\n  color: white;\n  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.can-buy[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #059669,\n      #047857);\n  box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);\n  transform: translateY(-2px);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.can-buy[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.cannot-buy[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  color: var(--text-secondary);\n  border: 2px solid var(--border-color);\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 80px 20px;\n  text-align: center;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%] {\n  font-size: 80px;\n  margin-bottom: 24px;\n  opacity: 0.6;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%] {\n  font-size: 15px;\n  color: var(--text-secondary);\n  margin: 0 0 24px 0;\n  line-height: 1.6;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 10px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%]   .hint-icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%]   .hint-text[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: var(--text-secondary);\n}\n.inventory-panel[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  padding: 16px 20px 12px;\n  margin: 0;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.1),\n      rgba(37, 99, 235, 0.1));\n  border-bottom: 2px solid rgba(59, 130, 246, 0.3);\n  text-align: center;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%] {\n  padding: 20px;\n  margin-bottom: 0;\n  border-bottom: 3px solid var(--border-color);\n  background: var(--bg-secondary);\n  height: auto;\n  overflow: visible;\n  flex-shrink: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 22px;\n  margin-bottom: 30px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 10px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.2);\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 5px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-primary);\n}\n.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 30px;\n  max-width: 100%;\n  width: 100%;\n  margin: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-rings-row[_ngcontent-%COMP%] {\n  grid-column: 1/-1;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 30px;\n  max-width: 800px;\n  margin: 0 auto;\n  width: 100%;\n}\n@media (max-width: 1200px) {\n  .inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%] {\n    gap: 16px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%] {\n    gap: 16px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-rings-row[_ngcontent-%COMP%] {\n    gap: 16px;\n    max-width: 600px;\n  }\n}\n@media (max-width: 768px) {\n  .inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr;\n    gap: 12px;\n    padding: 20px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%] {\n    gap: 12px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-rings-row[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr 1fr;\n    gap: 12px;\n    max-width: 100%;\n  }\n}\n@media (max-width: 480px) {\n  .inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%] {\n    padding: 16px;\n    gap: 10px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%] {\n    gap: 10px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-rings-row[_ngcontent-%COMP%] {\n    gap: 10px;\n  }\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%] {\n  position: relative;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 30, 0.9),\n      rgba(20, 20, 20, 0.95));\n  border: 3px solid var(--border-color);\n  border-radius: 16px;\n  padding: 24px;\n  min-height: 140px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: inset 0 2px 12px var(--shadow), 0 6px 16px var(--shadow);\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  inset: 5px;\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 12px;\n  pointer-events: none;\n  opacity: 0.5;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n  font-size: 48px;\n  opacity: 0.4;\n  margin-bottom: 12px;\n  filter: grayscale(100%);\n  transition: all 0.3s ease;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: var(--text-muted);\n  text-transform: uppercase;\n  letter-spacing: 1.5px;\n  font-weight: 700;\n  text-align: center;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]:not(.has-item):hover {\n  border-color: rgba(59, 130, 246, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 30, 0.95),\n      rgb(20, 20, 20));\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]:not(.has-item):hover   .slot-icon[_ngcontent-%COMP%] {\n  opacity: 0.6;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]:not(.has-item):hover   .slot-empty-text[_ngcontent-%COMP%] {\n  color: rgba(59, 130, 246, 0.8);\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.has-item[_ngcontent-%COMP%] {\n  border-color: var(--accent-primary);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 50, 0.95),\n      rgb(20, 20, 40));\n  box-shadow: inset 0 2px 12px var(--shadow), 0 6px 20px rgba(59, 130, 246, 0.25);\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.has-item[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n  opacity: 1;\n  filter: grayscale(0%) drop-shadow(0 0 8px currentColor);\n  font-size: 52px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.has-item[_ngcontent-%COMP%]:hover {\n  box-shadow: inset 0 2px 12px var(--shadow), 0 12px 30px rgba(59, 130, 246, 0.4);\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.rarity-common.has-item[_ngcontent-%COMP%] {\n  border-color: #9ca3af;\n  box-shadow: inset 0 2px 12px var(--shadow), 0 0 20px rgba(156, 163, 175, 0.4);\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.rarity-uncommon.has-item[_ngcontent-%COMP%] {\n  border-color: #10b981;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 50, 40, 0.95),\n      rgb(20, 40, 30));\n  box-shadow: inset 0 2px 12px var(--shadow), 0 0 25px rgba(16, 185, 129, 0.6);\n  animation: uncommon-glow 2s ease-in-out infinite;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.rarity-rare.has-item[_ngcontent-%COMP%] {\n  border-color: #3b82f6;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 40, 60, 0.95),\n      rgb(20, 30, 50));\n  box-shadow: inset 0 2px 12px var(--shadow), 0 0 30px rgba(59, 130, 246, 0.7);\n  animation: _ngcontent-%COMP%_rare-glow 2s ease-in-out infinite;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.rarity-epic.has-item[_ngcontent-%COMP%] {\n  border-color: #a855f7;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(50, 30, 60, 0.95),\n      rgb(40, 20, 50));\n  box-shadow: inset 0 2px 12px var(--shadow), 0 0 35px rgba(168, 85, 247, 0.8);\n  animation: _ngcontent-%COMP%_epic-glow 2s ease-in-out infinite;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.rarity-legendary.has-item[_ngcontent-%COMP%] {\n  border-color: #f97316;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(60, 30, 20, 0.95),\n      rgb(50, 20, 10));\n  box-shadow: inset 0 2px 12px var(--shadow), 0 0 45px rgba(249, 115, 22, 0.9);\n  animation: _ngcontent-%COMP%_legendary-glow-diablo 1.5s ease-in-out infinite;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.rarity-legendary.has-item[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  inset: -3px;\n  border: 2px solid rgba(249, 115, 22, 0.4);\n  border-radius: 12px;\n  animation: _ngcontent-%COMP%_legendary-pulse-border 1.5s ease-in-out infinite;\n  pointer-events: none;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%] {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 12px;\n  padding: 8px 0;\n  margin-top: 8px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .tooltip-name[_ngcontent-%COMP%] {\n  flex: 1;\n  font-size: 15px;\n  font-weight: 700;\n  color: #ffffff;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-shadow:\n    0 2px 4px rgb(0, 0, 0),\n    0 0 8px rgba(0, 0, 0, 0.8),\n    0 1px 2px rgba(0, 0, 0, 0.9);\n  letter-spacing: 0.5px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.5),\n      rgba(0, 0, 0, 0.3));\n  padding: 6px 12px;\n  border-radius: 6px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%] {\n  flex-shrink: 0;\n  width: 28px;\n  height: 28px;\n  padding: 0;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(220, 38, 38, 0.9),\n      rgba(185, 28, 28, 0.95));\n  border: 2px solid rgb(220, 38, 38);\n  border-radius: 6px;\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.5);\n  position: relative;\n  z-index: 100;\n  pointer-events: auto;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgb(185, 28, 28),\n      rgb(153, 27, 27));\n  transform: scale(1.1);\n  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.6);\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%]:active {\n  transform: scale(0.95);\n}\n@media (max-width: 1200px) {\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%] {\n    padding: 20px;\n    min-height: 120px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 42px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.has-item[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 46px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .tooltip-name[_ngcontent-%COMP%] {\n    font-size: 13px;\n  }\n}\n@media (max-width: 768px) {\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%] {\n    padding: 18px;\n    min-height: 100px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 36px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.has-item[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 40px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%] {\n    font-size: 11px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .tooltip-name[_ngcontent-%COMP%] {\n    font-size: 12px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%] {\n    width: 24px;\n    height: 24px;\n    font-size: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%] {\n    padding: 14px;\n    min-height: 85px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 30px;\n    margin-bottom: 8px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.has-item[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n    font-size: 34px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%] {\n    font-size: 10px;\n    letter-spacing: 1px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .tooltip-name[_ngcontent-%COMP%] {\n    font-size: 11px;\n  }\n  .inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%] {\n    width: 22px;\n    height: 22px;\n    font-size: 13px;\n  }\n}\n.inventory-panel[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: 800;\n  margin-bottom: 24px;\n  text-align: center;\n  color: var(--text-primary);\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);\n  padding-bottom: 16px;\n  border-bottom: 2px solid var(--border-color);\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-items-section[_ngcontent-%COMP%] {\n  background: var(--bg-primary);\n  padding: 20px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  gap: 16px;\n  width: 100%;\n}\n.inventory-tab-grid[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow: visible;\n  width: 100%;\n  flex: 1;\n}\n.inventory-tab-grid[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%] {\n  padding: 16px;\n  margin: 0;\n  background: var(--bg-tertiary);\n  border-bottom: 2px solid var(--border-color);\n  font-size: 18px;\n}\n.inventory-controls[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-bottom: 2px solid var(--border-color);\n  gap: 16px;\n  flex-wrap: wrap;\n}\n.inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  border: 2px solid var(--border-color);\n  border-radius: 6px;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--accent-primary);\n  transform: translateY(-2px);\n}\n.inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6,\n      #2563eb);\n  color: white;\n  border-color: #3b82f6;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n  transform: translateY(-2px);\n}\n.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\n  padding: 8px 12px;\n  border: 2px solid var(--border-color);\n  border-radius: 6px;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  font-size: 13px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover {\n  border-color: var(--accent-primary);\n}\n.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus {\n  outline: none;\n  border-color: var(--accent-primary);\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   .btn-auto-sort[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  border: 2px solid var(--border-color);\n  border-radius: 6px;\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6,\n      #2563eb);\n  color: white;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   .btn-auto-sort[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #2563eb,\n      #1d4ed8);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);\n}\n.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   .btn-auto-sort[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n}\n.inventory-grid-container[_ngcontent-%COMP%] {\n  flex: 1;\n  overflow: visible;\n  padding: 16px;\n  background: var(--bg-primary);\n}\n.inventory-grid-cells[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(8, 1fr);\n  gap: 12px;\n  width: 100%;\n  max-width: 100%;\n}\n@media (max-width: 1400px) {\n  .inventory-grid-cells[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(6, 1fr);\n    gap: 10px;\n  }\n}\n@media (max-width: 1000px) {\n  .inventory-grid-cells[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(5, 1fr);\n    gap: 10px;\n  }\n}\n@media (max-width: 768px) {\n  .inventory-grid-cells[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(4, 1fr);\n    gap: 8px;\n  }\n}\n@media (max-width: 480px) {\n  .inventory-grid-cells[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(3, 1fr);\n    gap: 6px;\n  }\n}\n.inventory-cell[_ngcontent-%COMP%] {\n  position: relative;\n  aspect-ratio: 1;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 30, 0.8),\n      rgba(20, 20, 20, 0.9));\n  border: 3px solid var(--border-color);\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  overflow: hidden;\n}\n.inventory-cell[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  inset: 3px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 7px;\n  pointer-events: none;\n}\n.inventory-cell[_ngcontent-%COMP%]   .cell-content[_ngcontent-%COMP%] {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 8px;\n  z-index: 1;\n}\n.inventory-cell[_ngcontent-%COMP%]   .cell-icon[_ngcontent-%COMP%] {\n  font-size: 40px;\n  margin-bottom: 4px;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));\n}\n@media (max-width: 768px) {\n  .inventory-cell[_ngcontent-%COMP%]   .cell-icon[_ngcontent-%COMP%] {\n    font-size: 32px;\n  }\n}\n.inventory-cell[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%] {\n  font-size: 11px;\n  font-weight: 700;\n  color: var(--text-primary);\n  text-align: center;\n  line-height: 1.2;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 100%;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);\n  letter-spacing: 0.3px;\n}\n@media (max-width: 768px) {\n  .inventory-cell[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%] {\n    font-size: 10px;\n  }\n}\n.inventory-cell[_ngcontent-%COMP%]   .cell-quantity[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: 6px;\n  right: 6px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.9),\n      rgba(0, 0, 0, 0.8));\n  color: white;\n  font-size: 12px;\n  font-weight: bold;\n  padding: 3px 8px;\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);\n  z-index: 2;\n}\n.inventory-cell[_ngcontent-%COMP%]:hover:not(.empty) {\n  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.5);\n  z-index: 10;\n}\n.inventory-cell[_ngcontent-%COMP%]:active:not(.empty) {\n  opacity: 0.9;\n}\n.inventory-cell.rarity-common[_ngcontent-%COMP%] {\n  border-color: #9ca3af;\n}\n.inventory-cell.rarity-common[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%] {\n  color: #d1d5db;\n}\n.inventory-cell.rarity-common[_ngcontent-%COMP%]:hover {\n  border-color: #d1d5db;\n  box-shadow: 0 12px 28px rgba(156, 163, 175, 0.4);\n}\n.inventory-cell.rarity-uncommon[_ngcontent-%COMP%] {\n  border-color: #10b981;\n}\n.inventory-cell.rarity-uncommon[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%] {\n  color: #34d399;\n}\n.inventory-cell.rarity-uncommon[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(16, 185, 129, 0.2),\n      transparent 70%);\n  pointer-events: none;\n}\n.inventory-cell.rarity-uncommon[_ngcontent-%COMP%]:hover {\n  border-color: #34d399;\n  box-shadow: 0 12px 28px rgba(16, 185, 129, 0.5);\n}\n.inventory-cell.rarity-rare[_ngcontent-%COMP%] {\n  border-color: #3b82f6;\n}\n.inventory-cell.rarity-rare[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%] {\n  color: #60a5fa;\n}\n.inventory-cell.rarity-rare[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(59, 130, 246, 0.2),\n      transparent 70%);\n  pointer-events: none;\n}\n.inventory-cell.rarity-rare[_ngcontent-%COMP%]:hover {\n  border-color: #60a5fa;\n  box-shadow: 0 12px 28px rgba(59, 130, 246, 0.6);\n}\n.inventory-cell.rarity-epic[_ngcontent-%COMP%] {\n  border-color: #a855f7;\n}\n.inventory-cell.rarity-epic[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%] {\n  color: #c084fc;\n}\n.inventory-cell.rarity-epic[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(168, 85, 247, 0.25),\n      transparent 70%);\n  pointer-events: none;\n  animation: _ngcontent-%COMP%_epic-glow-pulse 2s ease-in-out infinite;\n}\n.inventory-cell.rarity-epic[_ngcontent-%COMP%]:hover {\n  border-color: #c084fc;\n  box-shadow: 0 12px 28px rgba(168, 85, 247, 0.7);\n}\n.inventory-cell.rarity-legendary[_ngcontent-%COMP%] {\n  border-color: #f97316;\n}\n.inventory-cell.rarity-legendary[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%] {\n  color: #fb923c;\n  animation: _ngcontent-%COMP%_legendary-text-glow 2s ease-in-out infinite;\n}\n.inventory-cell.rarity-legendary[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(249, 115, 22, 0.3),\n      transparent 70%);\n  pointer-events: none;\n  animation: _ngcontent-%COMP%_legendary-glow-pulse 1.5s ease-in-out infinite;\n}\n.inventory-cell.rarity-legendary[_ngcontent-%COMP%]:hover {\n  border-color: #fb923c;\n  box-shadow: 0 12px 32px rgba(249, 115, 22, 0.9);\n}\n.inventory-cell.rarity-unique[_ngcontent-%COMP%] {\n  border-color: #14b8a6;\n}\n.inventory-cell.rarity-unique[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%] {\n  color: #5eead4;\n}\n.inventory-cell.rarity-unique[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(20, 184, 166, 0.25),\n      transparent 70%);\n  pointer-events: none;\n}\n.inventory-cell.rarity-unique[_ngcontent-%COMP%]:hover {\n  border-color: #5eead4;\n  box-shadow: 0 12px 28px rgba(20, 184, 166, 0.7);\n}\n.inventory-cell.rarity-mythic[_ngcontent-%COMP%] {\n  border-color: #ec4899;\n}\n.inventory-cell.rarity-mythic[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%] {\n  color: #f9a8d4;\n  animation: _ngcontent-%COMP%_mythic-text-glow 1.5s ease-in-out infinite;\n}\n.inventory-cell.rarity-mythic[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(236, 72, 153, 0.3),\n      transparent 70%);\n  pointer-events: none;\n  animation: _ngcontent-%COMP%_mythic-glow-pulse 1.2s ease-in-out infinite;\n}\n.inventory-cell.rarity-mythic[_ngcontent-%COMP%]:hover {\n  border-color: #f9a8d4;\n  box-shadow: 0 12px 32px rgba(236, 72, 153, 0.9);\n}\n.inventory-cell.empty[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(20, 20, 20, 0.3),\n      rgba(15, 15, 15, 0.4));\n  border-color: rgba(255, 255, 255, 0.05);\n  cursor: default;\n}\n.inventory-cell.empty[_ngcontent-%COMP%]::before {\n  border-color: rgba(255, 255, 255, 0.03);\n}\n.inventory-cell.empty[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%] {\n  font-size: 28px;\n  opacity: 0.15;\n  filter: grayscale(100%);\n}\n.inventory-cell.empty[_ngcontent-%COMP%]:hover {\n  transform: none;\n  box-shadow: none;\n  border-color: rgba(255, 255, 255, 0.08);\n}\n.inventory-footer[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-top: 2px solid var(--border-color);\n}\n.inventory-footer[_ngcontent-%COMP%]   .inventory-count[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.inventory-footer[_ngcontent-%COMP%]   .inventory-weight[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: var(--text-muted);\n}\n@keyframes _ngcontent-%COMP%_icon-bounce {\n  0%, 100% {\n    transform: translateY(0) scale(1);\n  }\n  50% {\n    transform: translateY(-4px) scale(1.1);\n  }\n}\n@keyframes _ngcontent-%COMP%_epic-glow-pulse {\n  0%, 100% {\n    opacity: 0.25;\n  }\n  50% {\n    opacity: 0.4;\n  }\n}\n@keyframes _ngcontent-%COMP%_legendary-glow-pulse {\n  0%, 100% {\n    opacity: 0.3;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n@keyframes _ngcontent-%COMP%_legendary-text-glow {\n  0%, 100% {\n    text-shadow: 0 0 10px rgba(249, 115, 22, 0.8), 0 2px 4px rgba(0, 0, 0, 0.8);\n  }\n  50% {\n    text-shadow: 0 0 20px rgb(249, 115, 22), 0 2px 4px rgba(0, 0, 0, 0.8);\n  }\n}\n@keyframes _ngcontent-%COMP%_mythic-glow-pulse {\n  0%, 100% {\n    opacity: 0.3;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n@keyframes _ngcontent-%COMP%_mythic-text-glow {\n  0%, 100% {\n    text-shadow: 0 0 10px rgba(236, 72, 153, 0.8), 0 2px 4px rgba(0, 0, 0, 0.8);\n  }\n  50% {\n    text-shadow: 0 0 20px rgb(236, 72, 153), 0 2px 4px rgba(0, 0, 0, 0.8);\n  }\n}\n.drag-preview[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 12px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 30, 0.95),\n      rgba(20, 20, 20, 0.98));\n  border: 3px solid var(--accent-primary);\n  border-radius: 10px;\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.8), 0 0 20px rgba(59, 130, 246, 0.6);\n  opacity: 0.9;\n  cursor: grabbing;\n  min-width: 100px;\n  min-height: 100px;\n}\n.drag-preview[_ngcontent-%COMP%]   .preview-icon[_ngcontent-%COMP%] {\n  font-size: 48px;\n  margin-bottom: 8px;\n  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.8));\n  animation: _ngcontent-%COMP%_drag-icon-pulse 0.5s ease-in-out infinite;\n}\n.drag-preview[_ngcontent-%COMP%]   .preview-name[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: 700;\n  color: white;\n  text-align: center;\n  text-shadow: 0 2px 6px rgba(0, 0, 0, 0.9);\n}\n.cdk-drag-placeholder[_ngcontent-%COMP%] {\n  opacity: 0.3;\n  background: rgba(255, 255, 255, 0.05) !important;\n  border: 2px dashed rgba(255, 255, 255, 0.3) !important;\n}\n.cdk-drag-placeholder[_ngcontent-%COMP%]   *[_ngcontent-%COMP%] {\n  opacity: 0;\n}\n.cdk-drag-animating[_ngcontent-%COMP%] {\n  transition: transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1);\n}\n.cdk-drag[_ngcontent-%COMP%] {\n  cursor: grab;\n  transition: all 0.2s ease;\n}\n.cdk-drag[_ngcontent-%COMP%]:active {\n  cursor: grabbing;\n}\n.inventory-grid-cells.cdk-drop-list-dragging[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]:not(.cdk-drag-placeholder) {\n  transition: transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1);\n}\n.cdk-drop-list-receiving[_ngcontent-%COMP%] {\n  background: rgba(59, 130, 246, 0.05);\n  border-color: var(--accent-primary);\n}\n.cdk-drop-list-receiving[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  inset: 0;\n  border: 2px solid var(--accent-primary);\n  border-radius: 8px;\n  pointer-events: none;\n  animation: _ngcontent-%COMP%_drop-zone-pulse 1s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_drag-icon-pulse {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.1);\n  }\n}\n@keyframes _ngcontent-%COMP%_drop-zone-pulse {\n  0%, 100% {\n    opacity: 0.5;\n    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);\n  }\n  50% {\n    opacity: 1;\n    box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);\n  }\n}\n.cdk-drag-preview[_ngcontent-%COMP%] {\n  cursor: grabbing !important;\n}\n.equipment-slot-diablo[_ngcontent-%COMP%] {\n  transition: all 0.3s ease;\n}\n.equipment-slot-diablo.cdk-drop-list-dragging[_ngcontent-%COMP%] {\n  border-style: dashed;\n  border-width: 3px;\n  background: rgba(59, 130, 246, 0.05);\n}\n.equipment-slot-diablo.cdk-drop-list-receiving[_ngcontent-%COMP%] {\n  border-color: #3b82f6 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.2),\n      rgba(37, 99, 235, 0.15)) !important;\n  box-shadow: inset 0 0 20px rgba(59, 130, 246, 0.3), 0 0 20px rgba(59, 130, 246, 0.5) !important;\n  animation: _ngcontent-%COMP%_equipment-drop-pulse 1s ease-in-out infinite;\n  transform: scale(1.05);\n}\n.equipment-slot-diablo.cdk-drop-list-receiving[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_equipment-icon-bounce 0.5s ease-in-out infinite;\n  filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.8));\n}\n.equipment-slot-diablo.cdk-drop-list-receiving[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%] {\n  color: #3b82f6;\n  font-weight: 700;\n  text-shadow: 0 0 10px rgba(59, 130, 246, 0.8);\n}\n.equipment-slot-diablo[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%] {\n  cursor: grab;\n}\n.equipment-slot-diablo[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:active {\n  cursor: grabbing;\n}\n.equipment-slot-diablo[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%] {\n  opacity: 0.3;\n  border: 2px dashed var(--border-color);\n}\n.equipment-slot-diablo[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%] {\n  opacity: 0;\n}\n.equipment-slot-diablo[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%] {\n  transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1);\n}\n@keyframes _ngcontent-%COMP%_equipment-drop-pulse {\n  0%, 100% {\n    box-shadow: inset 0 0 20px rgba(59, 130, 246, 0.3), 0 0 20px rgba(59, 130, 246, 0.5);\n  }\n  50% {\n    box-shadow: inset 0 0 30px rgba(59, 130, 246, 0.5), 0 0 30px rgba(59, 130, 246, 0.8);\n  }\n}\n@keyframes _ngcontent-%COMP%_equipment-icon-bounce {\n  0%, 100% {\n    transform: translateY(0) scale(1);\n  }\n  50% {\n    transform: translateY(-8px) scale(1.15);\n  }\n}\n@keyframes _ngcontent-%COMP%_legendary-glow-diablo {\n  0%, 100% {\n    box-shadow: inset 0 2px 8px var(--shadow), 0 0 40px rgba(249, 115, 22, 0.8);\n    border-color: #f97316;\n  }\n  50% {\n    box-shadow: inset 0 2px 8px var(--shadow), 0 0 60px rgb(249, 115, 22);\n    border-color: #fb923c;\n  }\n}\n@keyframes _ngcontent-%COMP%_legendary-pulse-border {\n  0%, 100% {\n    opacity: 0.3;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.6;\n    transform: scale(1.05);\n  }\n}\n@keyframes _ngcontent-%COMP%_legendary-glow {\n  0%, 100% {\n    box-shadow: 0 0 12px rgba(249, 115, 22, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(249, 115, 22, 0.8);\n  }\n}\n@keyframes _ngcontent-%COMP%_legendary-pulse {\n  0%, 100% {\n    box-shadow: 0 0 20px rgba(249, 115, 22, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(249, 115, 22, 0.8);\n  }\n}\n.menu-divider[_ngcontent-%COMP%] {\n  height: 1px;\n  background: var(--border-color);\n  margin: 12px 0;\n  opacity: 0.5;\n}\n@media (max-width: 768px) {\n  .menu-divider[_ngcontent-%COMP%] {\n    margin: 16px 0;\n  }\n}\n.menu-section-title[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 8px 16px;\n  margin-top: 4px;\n}\n@media (max-width: 768px) {\n  .menu-section-title[_ngcontent-%COMP%] {\n    font-size: 13px;\n    padding: 10px 18px;\n    margin-top: 6px;\n  }\n}\n@media (max-width: 480px) {\n  .menu-section-title[_ngcontent-%COMP%] {\n    font-size: 14px;\n  }\n}\n.menu-item.success[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669);\n  color: white;\n}\n.menu-item.success[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #059669,\n      #047857);\n  transform: translateX(8px);\n}\n.menu-item.warning[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b,\n      #d97706);\n  color: white;\n}\n.menu-item.warning[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #d97706,\n      #b45309);\n  transform: translateX(8px);\n}\n.menu-item.danger[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ef4444,\n      #dc2626);\n  color: white;\n}\n.menu-item.danger[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #dc2626,\n      #b91c1c);\n  transform: translateX(8px);\n}\n.shop-section[_ngcontent-%COMP%] {\n  margin-top: 40px;\n  padding: 30px;\n  background: var(--bg-primary);\n  border-radius: 16px;\n  border: 1px solid var(--border-color);\n}\n.shop-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%] {\n  margin-bottom: 30px;\n}\n.shop-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 2rem;\n  font-weight: 700;\n  margin-bottom: 10px;\n  color: var(--text-primary);\n}\n.shop-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%] {\n  color: var(--text-secondary);\n  font-size: 1rem;\n}\n.shop-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]   .gold-amount[_ngcontent-%COMP%] {\n  color: #f59e0b;\n  font-weight: 700;\n  font-size: 1.1rem;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 24px;\n  margin-top: 24px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 20px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-6px);\n  box-shadow: 0 16px 48px rgba(0, 0, 0, 0.3);\n  border-color: var(--accent-color);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover::before {\n  opacity: 1;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%] {\n  border-color: rgba(245, 158, 11, 0.5);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #f59e0b,\n      #ef4444);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%] {\n  border-color: rgba(139, 92, 246, 0.5);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #8b5cf6,\n      #3b82f6);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%] {\n  border-color: rgba(16, 185, 129, 0.5);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #10b981,\n      #06b6d4);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 12px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid var(--border-color);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n  flex: 1;\n  line-height: 1.3;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%] {\n  font-size: 18px;\n  font-weight: 700;\n  color: #f59e0b;\n  white-space: nowrap;\n  padding: 4px 12px;\n  background: rgba(245, 158, 11, 0.1);\n  border-radius: 8px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: var(--text-secondary);\n  line-height: 1.6;\n  margin: 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  padding: 8px 0;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 12px;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%] {\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag.type-tag[_ngcontent-%COMP%] {\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n  border: 1px solid rgba(59, 130, 246, 0.3);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag.grade-tag[_ngcontent-%COMP%] {\n  background: rgba(139, 92, 246, 0.1);\n  color: #8b5cf6;\n  border: 1px solid rgba(139, 92, 246, 0.3);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%] {\n  margin-top: auto;\n  padding-top: 12px;\n  border-top: 1px solid var(--border-color);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .buy-btn[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 12px 20px;\n  border-radius: 10px;\n  font-size: 15px;\n  font-weight: 700;\n  border: none;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669);\n  color: white;\n  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .buy-btn[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #059669,\n      #047857);\n  box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);\n  transform: translateY(-2px);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .buy-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .buy-btn.insufficient-gold[_ngcontent-%COMP%] {\n  background: var(--bg-tertiary);\n  color: var(--text-secondary);\n  border: 2px solid var(--border-color);\n  cursor: not-allowed;\n  opacity: 0.6;\n  box-shadow: none;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .buy-btn.insufficient-gold[_ngcontent-%COMP%]:hover {\n  transform: none;\n  background: var(--bg-tertiary);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%] {\n  padding: 24px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 32px;\n  padding-bottom: 24px;\n  border-bottom: 2px solid var(--border-color);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-title-section[_ngcontent-%COMP%]   .shop-title[_ngcontent-%COMP%] {\n  font-size: 22px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 8px 0;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-title-section[_ngcontent-%COMP%]   .shop-subtitle[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: var(--text-secondary);\n  margin: 0;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(245, 158, 11, 0.1),\n      rgba(217, 119, 6, 0.05));\n  border: 2px solid rgba(245, 158, 11, 0.3);\n  border-radius: 12px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-icon[_ngcontent-%COMP%] {\n  font-size: 28px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-info[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-info[_ngcontent-%COMP%]   .wallet-label[_ngcontent-%COMP%] {\n  font-size: 11px;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-info[_ngcontent-%COMP%]   .wallet-amount[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: 700;\n  color: #f59e0b;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-items-container[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 24px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 0;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-6px);\n  box-shadow: 0 16px 48px var(--shadow);\n  border-color: var(--accent-color);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover::before {\n  opacity: 1;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover   .item-icon-large[_ngcontent-%COMP%] {\n  transform: scale(1.15) rotate(5deg);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%] {\n  border-color: rgba(245, 158, 11, 0.5);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #f59e0b,\n      #ef4444);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b,\n      #ef4444);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-epic[_ngcontent-%COMP%] {\n  border-color: rgba(168, 85, 247, 0.5);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-epic[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #a855f7,\n      #8b5cf6);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-epic[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #a855f7,\n      #8b5cf6);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%] {\n  border-color: rgba(139, 92, 246, 0.5);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #8b5cf6,\n      #3b82f6);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6,\n      #3b82f6);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%] {\n  border-color: rgba(16, 185, 129, 0.5);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #10b981,\n      #06b6d4);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #06b6d4);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-common[_ngcontent-%COMP%] {\n  border-color: rgba(107, 114, 128, 0.5);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-common[_ngcontent-%COMP%]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #6b7280,\n      #9ca3af);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-common[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #6b7280,\n      #9ca3af);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  right: 12px;\n  display: flex;\n  justify-content: space-between;\n  z-index: 2;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%], \n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]   .item-type-badge[_ngcontent-%COMP%] {\n  padding: 6px 12px;\n  border-radius: 8px;\n  font-size: 11px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  color: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]   .item-type-badge[_ngcontent-%COMP%] {\n  background: rgba(0, 0, 0, 0.6);\n  -webkit-backdrop-filter: blur(8px);\n  backdrop-filter: blur(8px);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-tertiary),\n      var(--bg-primary));\n  padding: 40px 20px 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-bottom: 1px solid var(--border-color);\n  position: relative;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-icon-large[_ngcontent-%COMP%] {\n  font-size: 64px;\n  transition: transform 0.3s ease;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%] {\n  padding: 20px;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n  line-height: 1.3;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: var(--text-secondary);\n  line-height: 1.6;\n  margin: 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]   .stat-chip[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 10px;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]   .stat-chip[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 14px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]   .stat-chip[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  color: var(--accent-color);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: rgba(139, 92, 246, 0.05);\n  border: 1px solid rgba(139, 92, 246, 0.2);\n  border-radius: 8px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-icon[_ngcontent-%COMP%] {\n  font-size: 14px;\n  flex-shrink: 0;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-text[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  line-height: 1.4;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%] {\n  padding: 16px 20px;\n  background: var(--bg-tertiary);\n  border-top: 1px solid var(--border-color);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]   .price-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]   .price-amount[_ngcontent-%COMP%] {\n  font-size: 24px;\n  font-weight: 700;\n  color: #f59e0b;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]   .price-unit[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 14px 20px;\n  border-radius: 10px;\n  font-size: 15px;\n  font-weight: 700;\n  border: none;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.can-buy[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669);\n  color: white;\n  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.can-buy[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #059669,\n      #047857);\n  box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);\n  transform: translateY(-2px);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.can-buy[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.cannot-buy[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  color: var(--text-secondary);\n  border: 2px solid var(--border-color);\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 80px 20px;\n  text-align: center;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%] {\n  font-size: 80px;\n  margin-bottom: 24px;\n  opacity: 0.6;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%] {\n  font-size: 15px;\n  color: var(--text-secondary);\n  margin: 0 0 24px 0;\n  line-height: 1.6;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 10px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%]   .hint-icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n}\n.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%]   .hint-text[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: var(--text-secondary);\n}\n.inventory-tabs[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  padding: 16px 20px 0;\n  background: var(--bg-secondary);\n  border-bottom: 2px solid var(--border-color);\n  flex-shrink: 0;\n}\n.inventory-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%] {\n  flex: 1;\n  padding: 12px 20px;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-bottom: none;\n  border-radius: 8px 8px 0 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  white-space: nowrap;\n}\n.inventory-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:not(.active) {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n}\n.inventory-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  color: var(--accent-color);\n  border-color: var(--accent-color);\n  border-bottom-color: var(--bg-secondary);\n  transform: translateY(2px);\n}\n.inventory-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  bottom: -2px;\n  left: 0;\n  right: 0;\n  height: 2px;\n  background: var(--bg-secondary);\n}\n.tab-content[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease;\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n}\n@keyframes _ngcontent-%COMP%_fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n.shop-content-wrapper[_ngcontent-%COMP%] {\n  display: none;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  z-index: 10000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.8);\n  -webkit-backdrop-filter: blur(5px);\n  backdrop-filter: blur(5px);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%] {\n  position: relative;\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  background: var(--bg-primary);\n  border-radius: 0 !important;\n  box-shadow: none;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%] {\n  padding: 18px 40px;\n  border-bottom: 2px solid var(--border-color);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.1) 0%,\n      rgba(255, 140, 0, 0.1) 100%);\n  flex-shrink: 0;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 22px;\n  font-weight: bold;\n  color: var(--text-primary);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  width: 36px;\n  height: 36px;\n  border: none;\n  background: rgba(255, 255, 255, 0.1);\n  color: var(--text-primary);\n  font-size: 22px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.2);\n  transform: rotate(90deg);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%] {\n  padding: 40px 60px;\n  overflow-y: auto;\n  flex: 1;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 10px;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 5px;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 5px;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-section[_ngcontent-%COMP%] {\n  margin-bottom: 40px;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0 0 20px 0;\n  font-size: 22px;\n  color: var(--text-primary);\n  font-weight: 600;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n  gap: 20px;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card[_ngcontent-%COMP%] {\n  padding: 30px;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s;\n  text-align: center;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);\n  border-color: rgba(255, 215, 0, 0.5);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card.selected[_ngcontent-%COMP%] {\n  border-color: #ffd700;\n  background: rgba(255, 215, 0, 0.1);\n  box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card[_ngcontent-%COMP%]   .dungeon-icon[_ngcontent-%COMP%] {\n  font-size: 64px;\n  margin-bottom: 16px;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card[_ngcontent-%COMP%]   .dungeon-name[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: var(--text-primary);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card[_ngcontent-%COMP%]   .dungeon-level[_ngcontent-%COMP%] {\n  font-size: 16px;\n  color: var(--text-secondary);\n  margin-bottom: 6px;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card[_ngcontent-%COMP%]   .dungeon-floors[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: var(--text-tertiary);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\n  gap: 16px;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn[_ngcontent-%COMP%] {\n  padding: 24px;\n  border: 2px solid var(--border-color);\n  border-radius: 10px;\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  font-size: 18px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn[_ngcontent-%COMP%]   .difficulty-mult[_ngcontent-%COMP%] {\n  font-size: 14px;\n  opacity: 0.7;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.selected[_ngcontent-%COMP%] {\n  border-width: 3px;\n  box-shadow: 0 0 15px;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.easy[_ngcontent-%COMP%] {\n  border-color: #4caf50;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.easy.selected[_ngcontent-%COMP%] {\n  background: rgba(76, 175, 80, 0.2);\n  box-shadow: 0 0 15px rgba(76, 175, 80, 0.5);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.normal[_ngcontent-%COMP%] {\n  border-color: #2196f3;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.normal.selected[_ngcontent-%COMP%] {\n  background: rgba(33, 150, 243, 0.2);\n  box-shadow: 0 0 15px rgba(33, 150, 243, 0.5);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.hard[_ngcontent-%COMP%] {\n  border-color: #ff9800;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.hard.selected[_ngcontent-%COMP%] {\n  background: rgba(255, 152, 0, 0.2);\n  box-shadow: 0 0 15px rgba(255, 152, 0, 0.5);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.hell[_ngcontent-%COMP%] {\n  border-color: #f44336;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.hell.selected[_ngcontent-%COMP%] {\n  background: rgba(244, 67, 54, 0.2);\n  box-shadow: 0 0 15px rgba(244, 67, 54, 0.5);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-options[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 16px 20px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.05);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] {\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  font-size: 17px;\n  color: var(--text-primary);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .player-stats[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  padding: 24px;\n  border-radius: 8px;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .player-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  padding: 12px 0;\n  border-bottom: 1px solid var(--border-color);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .player-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]:last-child {\n  border-bottom: none;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .player-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  font-size: 17px;\n  color: var(--text-secondary);\n  font-weight: 500;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .player-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  font-size: 17px;\n  color: var(--text-primary);\n  font-weight: 600;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%] {\n  padding: 24px 60px;\n  border-top: 2px solid var(--border-color);\n  display: flex;\n  justify-content: flex-end;\n  gap: 16px;\n  background: rgba(0, 0, 0, 0.2);\n}\n@media (max-width: 768px) {\n  .dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%] {\n    padding: 20px 24px;\n    gap: 12px;\n  }\n}\n@media (max-width: 480px) {\n  .dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%] {\n    padding: 20px 16px;\n    flex-direction: row;\n    justify-content: stretch;\n  }\n  .dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    flex: 1;\n  }\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  padding: 14px 32px;\n  font-size: 17px;\n  font-weight: 600;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n@media (max-width: 768px) {\n  .dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    min-height: 52px;\n    padding: 14px 28px;\n    font-size: 16px;\n  }\n}\n@media (max-width: 480px) {\n  .dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    min-height: 56px;\n    padding: 16px 24px;\n    font-size: 17px;\n    border-radius: 12px;\n  }\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  border: 2px solid var(--border-color);\n}\n@media (max-width: 480px) {\n  .dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%] {\n    background: rgba(239, 68, 68, 0.2);\n    border-color: rgba(239, 68, 68, 0.4);\n    color: #fca5a5;\n  }\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:active {\n  transform: scale(0.97);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff8c00 100%);\n  color: #000;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]:active:not(:disabled) {\n  transform: scale(0.97);\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.dungeon-overlay[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 9999;\n  background: rgba(0, 0, 0, 0.95);\n  overflow: hidden;\n}\n.dungeon-overlay[_ngcontent-%COMP%]   app-dungeon-explorer[_ngcontent-%COMP%] {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-content.dungeon-active[_ngcontent-%COMP%] {\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-content.dungeon-active[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%] {\n  flex-shrink: 0;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-content.dungeon-active[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%] {\n  display: none;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dungeon-container[_ngcontent-%COMP%] {\n  flex: 1;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.dungeon-test-dialog[_ngcontent-%COMP%]   .dungeon-container[_ngcontent-%COMP%]   app-dungeon-explorer[_ngcontent-%COMP%] {\n  display: block;\n  width: 100%;\n  height: 100%;\n  flex: 1;\n}\n.item-context-menu[_ngcontent-%COMP%] {\n  position: fixed;\n  z-index: 10000;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 8px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);\n  padding: 8px 0;\n  min-width: 180px;\n  animation: _ngcontent-%COMP%_contextMenuFadeIn 0.15s ease-out;\n}\n.item-context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: var(--text-primary);\n}\n.item-context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%] {\n  font-size: 18px;\n  width: 24px;\n  text-align: center;\n}\n.item-context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]   .menu-text[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 500;\n}\n.item-context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary);\n  color: var(--accent-primary);\n}\n.item-context-menu[_ngcontent-%COMP%]   .context-menu-item.danger[_ngcontent-%COMP%]:hover {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n}\n@keyframes _ngcontent-%COMP%_contextMenuFadeIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n.item-info-modal[_ngcontent-%COMP%] {\n  position: fixed;\n  z-index: 10001;\n  background: var(--bg-primary);\n  border: 3px solid var(--accent-primary);\n  border-radius: 12px;\n  box-shadow: 0 12px 48px rgba(0, 0, 0, 0.5);\n  min-width: 400px;\n  max-width: 500px;\n  cursor: move;\n  animation: _ngcontent-%COMP%_modalSlideIn 0.3s ease-out;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  background: var(--bg-secondary);\n  border-bottom: 2px solid var(--border-color);\n  border-radius: 10px 10px 0 0;\n  -webkit-user-select: none;\n  user-select: none;\n}\n@media (max-width: 768px) {\n  .item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%] {\n    padding: 18px 20px;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n    background: var(--bg-secondary);\n  }\n}\n@media (max-width: 480px) {\n  .item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%] {\n    padding: 20px;\n  }\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--accent-primary);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n@media (max-width: 768px) {\n  .item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%] {\n    font-size: 19px;\n  }\n}\n@media (max-width: 480px) {\n  .item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%] {\n    font-size: 20px;\n  }\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%] {\n  background: transparent;\n  border: 1px solid var(--border-color);\n  color: var(--text-primary);\n  font-size: 24px;\n  width: 36px;\n  height: 36px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n}\n@media (max-width: 768px) {\n  .item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%] {\n    width: 44px;\n    height: 44px;\n    font-size: 26px;\n  }\n}\n@media (max-width: 480px) {\n  .item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%] {\n    width: 48px;\n    height: 48px;\n    font-size: 28px;\n  }\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%]:hover {\n  background: #ef4444;\n  border-color: #ef4444;\n  color: white;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%] {\n  padding: 20px;\n  cursor: default;\n}\n@media (max-width: 768px) {\n  .item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%] {\n    padding: 16px;\n  }\n}\n@media (max-width: 480px) {\n  .item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%] {\n    padding: 20px;\n  }\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 16px;\n  border-radius: 8px;\n  background: var(--bg-secondary);\n  margin-bottom: 16px;\n  border: 2px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%] {\n    padding: 18px;\n    gap: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%] {\n    padding: 20px;\n  }\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-common[_ngcontent-%COMP%] {\n  border-color: #9ca3af;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-uncommon[_ngcontent-%COMP%] {\n  border-color: #10b981;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-rare[_ngcontent-%COMP%] {\n  border-color: #3b82f6;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-epic[_ngcontent-%COMP%] {\n  border-color: #a855f7;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-legendary[_ngcontent-%COMP%] {\n  border-color: #f97316;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-unique[_ngcontent-%COMP%] {\n  border-color: #ec4899;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-mythic[_ngcontent-%COMP%] {\n  border-color: #fbbf24;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]   .item-info-icon[_ngcontent-%COMP%] {\n  font-size: 48px;\n  width: 64px;\n  height: 64px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  flex-shrink: 0;\n}\n@media (max-width: 768px) {\n  .item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]   .item-info-icon[_ngcontent-%COMP%] {\n    font-size: 52px;\n    width: 72px;\n    height: 72px;\n  }\n}\n@media (max-width: 480px) {\n  .item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]   .item-info-icon[_ngcontent-%COMP%] {\n    font-size: 56px;\n    width: 80px;\n    height: 80px;\n  }\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]   .item-info-title[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]   .item-info-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0 0 8px 0;\n  font-size: 22px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]   .item-info-title[_ngcontent-%COMP%]   .item-rarity-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 600;\n  background: var(--accent-primary);\n  color: white;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-meta[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-meta[_ngcontent-%COMP%]   .meta-badge[_ngcontent-%COMP%] {\n  padding: 6px 12px;\n  border-radius: 6px;\n  font-size: 13px;\n  font-weight: 500;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-meta[_ngcontent-%COMP%]   .meta-badge.type-badge[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  color: var(--accent-primary);\n  border: 1px solid var(--accent-primary);\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-meta[_ngcontent-%COMP%]   .meta-badge.quantity-badge[_ngcontent-%COMP%] {\n  background: var(--accent-primary);\n  color: white;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  padding: 16px;\n  border-radius: 8px;\n  margin-bottom: 16px;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]   .stats-title[_ngcontent-%COMP%] {\n  margin: 0 0 12px 0;\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--accent-primary);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px;\n  background: var(--bg-primary);\n  border-radius: 6px;\n  border: 1px solid var(--border-color);\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n  width: 28px;\n  text-align: center;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  flex: 1;\n  font-size: 13px;\n  color: var(--text-secondary);\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 700;\n  color: var(--accent-primary);\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-description[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  padding: 16px;\n  border-radius: 8px;\n  margin-bottom: 16px;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-description[_ngcontent-%COMP%]   .desc-title[_ngcontent-%COMP%] {\n  margin: 0 0 8px 0;\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--accent-primary);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 14px;\n  line-height: 1.6;\n  color: var(--text-secondary);\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-actions[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%] {\n  flex: 1;\n  padding: 12px 20px;\n  border-radius: 8px;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 2px solid;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-actions[_ngcontent-%COMP%]   .action-btn.equip-btn[_ngcontent-%COMP%] {\n  background: var(--accent-primary);\n  border-color: var(--accent-primary);\n  color: white;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-actions[_ngcontent-%COMP%]   .action-btn.equip-btn[_ngcontent-%COMP%]:hover {\n  background: transparent;\n  color: var(--accent-primary);\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-actions[_ngcontent-%COMP%]   .action-btn.discard-btn[_ngcontent-%COMP%] {\n  background: transparent;\n  border-color: #ef4444;\n  color: #ef4444;\n}\n.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-actions[_ngcontent-%COMP%]   .action-btn.discard-btn[_ngcontent-%COMP%]:hover {\n  background: #ef4444;\n  color: white;\n}\n@keyframes _ngcontent-%COMP%_modalSlideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-20px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  padding: 20px;\n  animation: _ngcontent-%COMP%_fadeIn 0.2s ease;\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%] {\n  background: var(--bg-primary);\n  border-radius: 20px;\n  width: 100%;\n  max-width: 1000px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  border: 2px solid var(--border-color);\n  animation: _ngcontent-%COMP%_modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  overflow: hidden;\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px;\n  border-bottom: 2px solid var(--border-color);\n  background: var(--bg-secondary);\n  flex-shrink: 0;\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 22px;\n  font-weight: 700;\n  color: var(--text-primary);\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  font-size: 32px;\n  color: var(--text-secondary);\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  min-width: 40px;\n  min-height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 8px;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: var(--text-primary);\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .character-info-bar[_ngcontent-%COMP%] {\n  padding: 12px 24px;\n  background: var(--bg-tertiary);\n  border-bottom: 1px solid var(--border-color);\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .character-info-bar[_ngcontent-%COMP%]   .info-badges[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 12px;\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .character-info-bar[_ngcontent-%COMP%]   .info-badges[_ngcontent-%COMP%]   .stat-badge[_ngcontent-%COMP%] {\n  padding: 6px 14px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .character-info-bar[_ngcontent-%COMP%]   .info-badges[_ngcontent-%COMP%]   .stat-badge.level[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6,\n      #a78bfa);\n  color: white;\n  box-shadow: 0 2px 6px rgba(139, 92, 246, 0.3);\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .character-info-bar[_ngcontent-%COMP%]   .info-badges[_ngcontent-%COMP%]   .stat-badge.gold[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #fbbf24,\n      #f59e0b);\n  color: white;\n  box-shadow: 0 2px 6px rgba(251, 191, 36, 0.3);\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px;\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 32px;\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]   .equipment-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], \n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]   .inventory-items-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 22px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 20px;\n  padding-bottom: 12px;\n  border-bottom: 2px solid var(--border-color);\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]   .equipment-section[_ngcontent-%COMP%]   .no-equipment[_ngcontent-%COMP%], \n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]   .equipment-section[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%], \n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]   .inventory-items-section[_ngcontent-%COMP%]   .no-equipment[_ngcontent-%COMP%], \n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]   .inventory-items-section[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 40px;\n  color: var(--text-secondary);\n  font-size: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-footer[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px 24px;\n  border-top: 2px solid var(--border-color);\n  background: var(--bg-secondary);\n  flex-shrink: 0;\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%] {\n  padding: 10px 24px;\n  background: var(--bg-tertiary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  color: var(--text-primary);\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover {\n  background: var(--bg-primary);\n  border-color: var(--primary-color);\n  color: var(--primary-color);\n}\n@keyframes _ngcontent-%COMP%_modalSlideIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95) translateY(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n}\n@keyframes _ngcontent-%COMP%_fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n/*# sourceMappingURL=novel-generator.component.css.map */'], data: { animation: [
    trigger("slideInOut", [
      transition(":enter", [
        style({ transform: "translateX(100%)" }),
        animate("300ms ease-out", style({ transform: "translateX(0)" }))
      ]),
      transition(":leave", [
        animate("300ms ease-in", style({ transform: "translateX(100%)" }))
      ])
    ]),
    trigger("contextMenuAnimation", [
      transition(":enter", [
        style({ opacity: 0, transform: "scale(0.9) translateY(-10px)" }),
        animate("200ms cubic-bezier(0.4, 0.0, 0.2, 1)", style({ opacity: 1, transform: "scale(1) translateY(0)" }))
      ]),
      transition(":leave", [
        animate("150ms cubic-bezier(0.4, 0.0, 1, 1)", style({ opacity: 0, transform: "scale(0.9) translateY(-10px)" }))
      ])
    ])
  ] } });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelGeneratorComponent, [{
    type: Component,
    args: [{ selector: "app-novel-generator", standalone: false, animations: [
      trigger("slideInOut", [
        transition(":enter", [
          style({ transform: "translateX(100%)" }),
          animate("300ms ease-out", style({ transform: "translateX(0)" }))
        ]),
        transition(":leave", [
          animate("300ms ease-in", style({ transform: "translateX(100%)" }))
        ])
      ]),
      trigger("contextMenuAnimation", [
        transition(":enter", [
          style({ opacity: 0, transform: "scale(0.9) translateY(-10px)" }),
          animate("200ms cubic-bezier(0.4, 0.0, 0.2, 1)", style({ opacity: 1, transform: "scale(1) translateY(0)" }))
        ]),
        transition(":leave", [
          animate("150ms cubic-bezier(0.4, 0.0, 1, 1)", style({ opacity: 0, transform: "scale(0.9) translateY(-10px)" }))
        ])
      ])
    ], template: `<!-- \uCC45 \uD45C\uC9C0 -->
<div class="novel-book-container"
     [class.mobile]="responsiveService.isMobile$ | async"
     [class.tablet]="responsiveService.isTablet$ | async">
  <!-- \uD648 \uD654\uBA74 - Store \uC2A4\uD0C0\uC77C -->
  <div class="novel-home-screen" 
       *ngIf="!novelSelected && !gameStarted"
       [class.mobile]="responsiveService.isMobile$ | async">
    
    <!-- \uBAA8\uBC14\uC77C \uACE0\uC815 \uD5E4\uB354 -->
    <div class="mobile-home-header" *ngIf="responsiveService.isMobile$ | async">
      <div class="header-brand">
        <h1>\u{1F3F0} \uD14D\uC2A4\uD2B8\uB358\uC804</h1>
      </div>
      <div class="header-user-actions">
        <div class="user-badge" *ngIf="getCurrentUsername()">
          <span>\u{1F464} {{getCurrentUsername()}}</span>
        </div>
        <button class="header-logout-btn" (click)="logout()" title="\uB85C\uADF8\uC544\uC6C3">
          \u{1F6AA}
        </button>
      </div>
    </div>
    
    <div class="home-container">
      <!-- \uD658\uC601 \uC139\uC158 -->
      <div class="welcome-section">
        <div class="welcome-header">
          <div class="header-content">
            <h2>\u{1F3F0} \uD14D\uC2A4\uD2B8\uB358\uC804</h2>
            <p class="subtitle">\uB2F9\uC2E0\uC758 \uC120\uD0DD\uC774 \uB9CC\uB4E4\uC5B4\uAC00\uB294 \uC774\uC57C\uAE30</p>
          </div>
          <div class="header-actions">
            <div class="user-info" *ngIf="getCurrentUsername()">
              <span class="user-name">\u{1F464} {{getCurrentUsername()}}</span>
            </div>
            <button class="logout-btn" (click)="logout()" title="\uB85C\uADF8\uC544\uC6C3">
              \u{1F6AA} \uB85C\uADF8\uC544\uC6C3
            </button>
          </div>
        </div>
        
        <div class="quick-actions">
          <div class="action-card featured" (click)="scrollToNovels()">
            <div class="card-icon">\u{1F3AE}</div>
            <h3>\uC0C8\uB85C\uC6B4 \uBAA8\uD5D8</h3>
            <p>\uB2E4\uC591\uD55C \uC7A5\uB974\uC758 \uC18C\uC124 \uC120\uD0DD</p>
            <div class="card-badge">{{novelTemplates.length}}\uAC1C</div>
          </div>
          
          <div class="action-card wuxia-special" (click)="navigateToWuxiaGame()">
            <div class="card-icon">\u2694\uFE0F</div>
            <h3>\uBB35\uD5A5\uC9C0\uC5F0 (\u58A8\u9999\u4E4B\u7DE3)</h3>
            <p>\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uBB34\uD611 RPG</p>
            <div class="card-badge wuxia-badge">\uBB34\uD611</div>
          </div>
          
          <div class="action-card ai-special" (click)="openCharacterCreator()">
            <div class="card-icon">\u{1F3AD}</div>
            <h3>AI \uCE90\uB9AD\uD130 \uC0DD\uC131</h3>
            <p>Loworld AI\uB85C \uCE90\uB9AD\uD130 \uB9CC\uB4E4\uAE30</p>
            <div class="card-badge ai-badge">AI</div>
          </div>
          
          <div class="action-card ai-special" (click)="openScenarioCreator()">
            <div class="card-icon">\u{1F3AC}</div>
            <h3>AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131</h3>
            <p>Loworld AI\uB85C \uC0C1\uD669 \uB9CC\uB4E4\uAE30</p>
            <div class="card-badge ai-badge">AI</div>
          </div>
          
          <div class="action-card ai-special" (click)="openItemCreator()">
            <div class="card-icon">\u{1F48E}</div>
            <h3>AI \uC544\uC774\uD15C \uC0DD\uC131</h3>
            <p>Loworld AI\uB85C \uBB34\uAE30/\uC544\uC774\uD15C \uB9CC\uB4E4\uAE30</p>
            <div class="card-badge ai-badge">AI</div>
          </div>
          
          <div class="action-card premium" (click)="toggleStoryCreatorPanel()">
            <div class="card-icon">\u2728</div>
            <h3>\uC2A4\uD1A0\uB9AC \uC0DD\uC131</h3>
            <p>\uC800\uC7A5\uB41C \uCF58\uD150\uCE20\uB85C \uC0C8 \uC774\uC57C\uAE30 \uB9CC\uB4E4\uAE30</p>
            <div class="card-badge premium-badge">NEW</div>
          </div>
          
          <div class="action-card ai-special" (click)="autoGenerateStoryElements()">
            <div class="card-icon">\u{1F3A8}</div>
            <h3>\uC2A4\uD1A0\uB9AC \uC694\uC18C \uC790\uB3D9 \uC0DD\uC131</h3>
            <p>\uD544\uC694\uD55C \uC2DC\uB098\uB9AC\uC624/\uCE90\uB9AD\uD130/\uC544\uC774\uD15C \uD55C\uBC88\uC5D0 \uC0DD\uC131</p>
            <div class="card-badge ai-badge">AI</div>
          </div>
          
          <div class="action-card" (click)="checkStoryElementStatus()">
            <div class="card-icon">\u{1F4CA}</div>
            <h3>\uC694\uC18C \uD604\uD669 \uD655\uC778</h3>
            <p>\uD604\uC7AC \uBCF4\uC720\uD55C \uC2A4\uD1A0\uB9AC \uC694\uC18C \uD655\uC778</p>
          </div>
        </div>
        
        <!-- \uC2A4\uD1A0\uB9AC \uC694\uC18C \uC0DD\uC131 \uC9C4\uD589 \uD45C\uC2DC -->
        <div class="generation-progress" *ngIf="isGeneratingElements">
          <div class="progress-container">
            <div class="progress-spinner"></div>
            <div class="progress-text">{{elementGenerationProgress}}</div>
          </div>
        </div>
        
        <!-- \uC2A4\uD1A0\uB9AC \uC0DD\uC131\uAE30 \uD328\uB110 -->
        <div class="story-creator-panel" *ngIf="showStoryCreatorPanel">
          <div class="creator-container">
            <div class="creator-header">
              <h3>\u2728 \uC2A4\uD1A0\uB9AC \uC0DD\uC131\uAE30</h3>
              <button class="close-btn" (click)="toggleStoryCreatorPanel()">\u2715</button>
            </div>

            <div class="creator-intro">
              <h4>\uC800\uC7A5\uB41C \uCF58\uD150\uCE20\uB85C \uC0C8\uB85C\uC6B4 \uC774\uC57C\uAE30\uB97C \uB9CC\uB4E4\uC5B4\uBCF4\uC138\uC694</h4>
              <p>\uCE90\uB9AD\uD130, \uC544\uC774\uD15C, \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uBA74 Loworld AI\uAC00 \uD765\uBBF8\uC9C4\uC9C4\uD55C \uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4.</p>
            </div>

            <!-- \uC5D0\uB7EC \uBA54\uC2DC\uC9C0 -->
            <div class="error-message" *ngIf="storyGenerationError">
              {{storyGenerationError}}
            </div>

            <!-- \uC2A4\uD1A0\uB9AC \uC81C\uBAA9 \uC785\uB825 -->
            <div class="title-input-section">
              <label for="storyTitle">
                <span class="label-icon">\u{1F4D6}</span>
                <span class="label-text">\uC2A4\uD1A0\uB9AC \uC81C\uBAA9</span>
                <span class="required">*</span>
              </label>
              <input 
                type="text" 
                id="storyTitle"
                [(ngModel)]="storyTitle"
                placeholder="\uC608: \uAC80\uC740 \uC6A9\uC758 \uC804\uC124, \uB9C8\uBC95\uC0AC\uC758 \uC5EC\uC815, \uBE44\uBC00\uC758 \uC232..."
                maxlength="50"
                class="title-input">
              <div class="char-count">{{storyTitle.length}}/50</div>
            </div>

            <div class="selection-section">
              <!-- \uCE90\uB9AD\uD130 \uC120\uD0DD -->
              <div class="select-group">
                <h5>\u{1F3AD} \uC8FC\uC778\uACF5 \uC120\uD0DD <span class="selection-count">({{selectedCharactersForStory.length}}\uAC1C \uC120\uD0DD\uB428)</span></h5>
                <div class="select-grid">
                  <div 
                    class="select-item"
                    [class.selected]="isCharacterSelected(character)"
                    *ngFor="let character of savedCharacters"
                    (click)="selectCharacterForStory(character)">
                    <div class="item-name">{{character.name}}</div>
                    <div class="item-desc">{{character.occupation}}</div>
                  </div>
                </div>
                <p class="no-content" *ngIf="savedCharacters.length === 0">
                  \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uCE90\uB9AD\uD130 \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694.
                </p>
              </div>

              <!-- \uC544\uC774\uD15C \uC120\uD0DD -->
              <div class="select-group">
                <h5>\u{1F48E} \uD575\uC2EC \uC544\uC774\uD15C \uC120\uD0DD <span class="selection-count">({{selectedItemsForStory.length}}\uAC1C \uC120\uD0DD\uB428)</span></h5>
                <div class="select-grid">
                  <div 
                    class="select-item"
                    [class.selected]="isItemSelected(item)"
                    *ngFor="let item of savedItems"
                    (click)="selectItemForStory(item)">
                    <div class="item-name">{{item.name}}</div>
                    <div class="item-desc">{{item.type}} \xB7 {{item.grade}}</div>
                  </div>
                </div>
                <p class="no-content" *ngIf="savedItems.length === 0">
                  \uC800\uC7A5\uB41C \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uC544\uC774\uD15C \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694.
                </p>
              </div>

              <!-- \uC2DC\uB098\uB9AC\uC624 \uC120\uD0DD -->
              <div class="select-group">
                <h5>\u{1F3AC} \uC2DC\uB098\uB9AC\uC624 \uC120\uD0DD <span class="selection-count">({{selectedScenariosForStory.length}}\uAC1C \uC120\uD0DD\uB428)</span></h5>
                <div class="select-grid">
                  <div 
                    class="select-item"
                    [class.selected]="isScenarioSelected(scenario)"
                    *ngFor="let scenario of savedScenarios"
                    (click)="selectScenarioForStory(scenario)">
                    <div class="item-name">{{scenario.title}}</div>
                    <div class="item-desc">{{scenario.genre}}</div>
                  </div>
                </div>
                <p class="no-content" *ngIf="savedScenarios.length === 0">
                  \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694.
                </p>
              </div>
            </div>

            <!-- \uC0DD\uC131 \uBC84\uD2BC -->
            <div class="creator-actions">
              <button 
                class="generate-story-btn"
                [disabled]="isGeneratingStory || !storyTitle || storyTitle.trim() === '' || selectedCharactersForStory.length === 0 || selectedItemsForStory.length === 0 || selectedScenariosForStory.length === 0"
                (click)="generateStoryFromSavedContent()">
                <span *ngIf="!isGeneratingStory">\u{1F3AC} \uC2A4\uD1A0\uB9AC \uC0DD\uC131</span>
                <span *ngIf="isGeneratingStory">\u23F3 \uC0DD\uC131 \uC911...</span>
              </button>
            </div>

            <!-- \uC0DD\uC131\uB41C \uC2A4\uD1A0\uB9AC \uACB0\uACFC -->
            <div class="generated-story-result" *ngIf="generatedStory">
              <h4>\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!</h4>
              
              <div class="story-preview">
                <div class="story-title">
                  <span class="story-icon">{{generatedStory.icon}}</span>
                  <h3>{{generatedStory.title}}</h3>
                </div>
                <p class="story-desc">{{generatedStory.description}}</p>
                <div class="story-meta">
                  <span class="meta-item">\u{1F4DA} {{generatedStory.genre}}</span>
                  <span class="meta-item">\u2694\uFE0F {{generatedStory.difficulty === 'easy' ? '\uC26C\uC6C0' : generatedStory.difficulty === 'normal' ? '\uBCF4\uD1B5' : '\uC5B4\uB824\uC6C0'}}</span>
                  <span class="meta-item">\u{1F4B0} {{generatedStory.startingGold}}G</span>
                </div>
                <div class="story-intro">
                  <h5>\uCCAB \uBC88\uC9F8 \uC7A5\uBA74</h5>
                  <p *ngFor="let line of generatedStory.firstStory">{{line}}</p>
                </div>
              </div>

              <div class="story-actions">
                <button class="save-btn" (click)="saveGeneratedStory()">
                  \u{1F4BE} \uC2A4\uD1A0\uB9AC \uC800\uC7A5
                </button>
                <button class="start-btn" (click)="addGeneratedStoryToList()">
                  \u{1F3AE} \uAC8C\uC784 \uC2DC\uC791
                </button>
                <button class="regenerate-btn" (click)="clearGeneratedStory()">
                  \u{1F504} \uB2E4\uC2DC \uC0DD\uC131
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC \uC139\uC158 -->
        <div class="saved-section saved-stories-section" *ngIf="savedStories.length > 0">
          <div class="section-header-collapsible" (click)="toggleStories()">
            <div class="header-left">
              <span class="expand-icon">{{ isStoriesExpanded ? '\u25BC' : '\u25B6' }}</span>
              <h3>\u{1F4DA} \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC</h3>
              <span class="count-badge">{{ savedStories.length }}</span>
            </div>
            <button class="toggle-btn" (click)="toggleStories(); $event.stopPropagation()">
              {{ isStoriesExpanded ? '\uC811\uAE30' : '\uD3BC\uCE58\uAE30' }}
            </button>
          </div>

          <div class="section-content" *ngIf="isStoriesExpanded">
            <p class="section-desc">AI\uAC00 \uC0DD\uC131\uD55C \uB098\uB9CC\uC758 \uC774\uC57C\uAE30\uB4E4</p>
            <div class="stories-grid">
              <div 
                class="story-card"
                *ngFor="let story of savedStories"
                (click)="loadSavedStoryForGame(story)">
                <div class="story-header">
                  <div class="story-icon-title">
                    <span class="story-icon">{{story.icon}}</span>
                    <h4>{{story.title}}</h4>
                  </div>
                  <button class="delete-btn" (click)="deleteSavedStory(story.id, $event)">
                    \u{1F5D1}\uFE0F
                  </button>
                </div>
                <div class="story-meta">
                  <span class="meta-item">\u{1F4DA} {{story.genre}}</span>
                  <span class="meta-item">\u2694\uFE0F {{story.difficulty === 'easy' ? '\uC26C\uC6C0' : story.difficulty === 'normal' ? '\uBCF4\uD1B5' : '\uC5B4\uB824\uC6C0'}}</span>
                  <span class="meta-item">\u{1F4B0} {{story.startingGold}}G</span>
                </div>
                <p class="story-description">{{story.description}}</p>
                <div class="story-footer">
                  <span class="date">{{formatSaveDate(story.createdAt)}}</span>
                  <span class="created-by">\u{1F916} AI \uC0DD\uC131</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130 \uC139\uC158 -->
        <div class="saved-section saved-characters-section" *ngIf="savedCharacters.length > 0">
          <div class="section-header-collapsible" (click)="toggleCharacters()">
            <div class="header-left">
              <span class="expand-icon">{{ isCharactersExpanded ? '\u25BC' : '\u25B6' }}</span>
              <h3>\u{1F3AD} \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130</h3>
              <span class="count-badge">{{ savedCharacters.length }}</span>
            </div>
            <button class="toggle-btn" (click)="toggleCharacters(); $event.stopPropagation()">
              {{ isCharactersExpanded ? '\uC811\uAE30' : '\uD3BC\uCE58\uAE30' }}
            </button>
          </div>

          <div class="section-content" *ngIf="isCharactersExpanded">
            <p class="section-desc">AI\uAC00 \uC0DD\uC131\uD55C \uCE90\uB9AD\uD130\uB4E4</p>
            <div class="characters-grid">
              <div 
                class="character-card"
                *ngFor="let character of savedCharacters"
                (click)="openCharacterInventory(character, $event)">
                <div class="character-header">
                  <h4>{{character.name}}</h4>
                  <button class="delete-btn" (click)="character.id && deleteCharacter(character.id, $event)">
                    \u{1F5D1}\uFE0F
                  </button>
                </div>
                <div class="character-meta">
                  <span class="meta-item">\u{1F464} {{character.gender}}</span>
                  <span class="meta-item">\u{1F4C5} {{character.age}}\uC138</span>
                  <span class="meta-item">\u{1F4BC} {{character.occupation}}</span>
                </div>
                <p class="character-desc">{{character.backstory}}</p>
                <div class="character-traits" *ngIf="isArray(character.personality)">
                  <span class="trait" *ngFor="let trait of character.personality.slice(0, 3)">{{trait}}</span>
                </div>
                <div class="character-traits" *ngIf="!isArray(character.personality) && character.personality">
                  <span class="trait">{{character.personality}}</span>
                </div>
                <div class="character-footer">
                  <span class="date">{{formatSaveDate(character.createdAt)}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624 \uC139\uC158 -->
        <div class="saved-section saved-scenarios-section" *ngIf="savedScenarios.length > 0">
          <div class="section-header-collapsible" (click)="toggleScenarios()">
            <div class="header-left">
              <span class="expand-icon">{{ isScenariosExpanded ? '\u25BC' : '\u25B6' }}</span>
              <h3>\u{1F3AC} \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624</h3>
              <span class="count-badge">{{ savedScenarios.length }}</span>
            </div>
            <button class="toggle-btn" (click)="toggleScenarios(); $event.stopPropagation()">
              {{ isScenariosExpanded ? '\uC811\uAE30' : '\uD3BC\uCE58\uAE30' }}
            </button>
          </div>

          <div class="section-content" *ngIf="isScenariosExpanded">
            <p class="section-desc">AI\uAC00 \uC0DD\uC131\uD55C \uC2DC\uB098\uB9AC\uC624\uB4E4</p>
            <div class="scenarios-grid">
              <div 
                class="scenario-card"
                *ngFor="let scenario of savedScenarios"
                (click)="loadScenario(scenario)">
                <div class="scenario-header">
                  <h4>{{scenario.title}}</h4>
                  <button class="delete-btn" (click)="deleteScenario(scenario.id); $event.stopPropagation()">
                    \u{1F5D1}\uFE0F
                  </button>
                </div>
                <p class="scenario-desc">{{scenario.description}}</p>
                <div class="scenario-tags" *ngIf="isArray(scenario.tags) && scenario.tags.length > 0">
                  <span class="tag" *ngFor="let tag of scenario.tags.slice(0, 3)">{{tag}}</span>
                </div>
                <div class="scenario-meta">
                  <span class="genre">{{scenario.genre}}</span>
                  <span class="date">{{formatSaveDate(scenario.createdAt)}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- \uC800\uC7A5\uB41C \uC544\uC774\uD15C \uC139\uC158 -->
        <div class="saved-section saved-items-section" *ngIf="savedItems.length > 0">
          <div class="section-header-collapsible" (click)="toggleItems()">
            <div class="header-left">
              <span class="expand-icon">{{ isItemsExpanded ? '\u25BC' : '\u25B6' }}</span>
              <h3>\u{1F48E} \uC800\uC7A5\uB41C \uC544\uC774\uD15C</h3>
              <span class="count-badge">{{ savedItems.length }}</span>
            </div>
            <button class="toggle-btn" (click)="toggleItems(); $event.stopPropagation()">
              {{ isItemsExpanded ? '\uC811\uAE30' : '\uD3BC\uCE58\uAE30' }}
            </button>
          </div>

          <div class="section-content" *ngIf="isItemsExpanded">
            <p class="section-desc">AI\uAC00 \uC0DD\uC131\uD55C \uBB34\uAE30\uC640 \uC544\uC774\uD15C\uB4E4</p>
            <div class="items-grid">
              <div 
                class="item-card"
                *ngFor="let item of savedItems"
                [class.grade-legendary]="item.grade === '\uC2E0\uD654' || item.grade === '\uC804\uC124'"
                [class.grade-rare]="item.grade === '\uD76C\uADC0'"
                [class.grade-uncommon]="item.grade === '\uACE0\uAE09'"
                (click)="loadItem(item)">
                <div class="item-header">
                  <h4>{{item.name}}</h4>
                  <button class="delete-btn" (click)="item.id && deleteItem(item.id, $event)">
                    \u{1F5D1}\uFE0F
                  </button>
                </div>
                <p class="item-desc">{{item.description}}</p>
                <div class="item-stats" *ngIf="item.stats">
                  <span class="stat" *ngIf="item.stats.attack">\u2694\uFE0F {{item.stats.attack}}</span>
                  <span class="stat" *ngIf="item.stats.defense">\u{1F6E1}\uFE0F {{item.stats.defense}}</span>
                  <span class="stat" *ngIf="item.stats.hp">\u2764\uFE0F {{item.stats.hp}}</span>
                  <span class="stat" *ngIf="item.stats.mp">\u{1F499} {{item.stats.mp}}</span>
                </div>
                <div class="item-tags">
                  <span class="tag type-tag">{{item.type}}</span>
                  <span class="tag grade-tag">{{item.grade}}</span>
                  <span class="tag" *ngFor="let tag of (item.tags || []).slice(0, 2)">{{tag}}</span>
                </div>
                <div class="item-meta">
                  <span class="date">{{formatSaveDate(item.createdAt)}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- AI \uC544\uC774\uD15C \uC0C1\uC810 \uC139\uC158 -->
        <div class="saved-section shop-section" *ngIf="savedItems.length > 0">
          <div class="section-header-collapsible shop-header" (click)="toggleShop()">
            <div class="header-left">
              <span class="expand-icon">{{ isShopExpanded ? '\u25BC' : '\u25B6' }}</span>
              <h3>\u{1F6D2} AI \uC544\uC774\uD15C \uC0C1\uC810</h3>
              <span class="count-badge shop-badge">{{ savedItems.length }}</span>
              <span class="gold-badge">\u{1F4B0} {{gold}}G</span>
            </div>
            <button class="toggle-btn" (click)="toggleShop(); $event.stopPropagation()">
              {{ isShopExpanded ? '\uC811\uAE30' : '\uD3BC\uCE58\uAE30' }}
            </button>
          </div>

          <div class="section-content" *ngIf="isShopExpanded">
            <p class="section-desc">AI\uAC00 \uC0DD\uC131\uD55C \uC544\uC774\uD15C\uC744 \uACE8\uB4DC\uB85C \uAD6C\uB9E4\uD558\uC138\uC694</p>
            <div class="shop-items-grid">
              <div 
                class="shop-item-card"
                *ngFor="let item of savedItems"
                [class.grade-legendary]="item.grade === '\uC2E0\uD654' || item.grade === '\uC804\uC124'"
                [class.grade-rare]="item.grade === '\uD76C\uADC0'"
                [class.grade-uncommon]="item.grade === '\uACE0\uAE09'">
                <div class="item-header">
                  <h4>{{item.name}}</h4>
                  <div class="item-price">{{item.price || calculateItemPriceByGrade(item.grade)}}G</div>
                </div>
                <p class="item-desc">{{item.description}}</p>
                <div class="item-stats" *ngIf="item.stats">
                  <span class="stat" *ngIf="item.stats.attack">\u2694\uFE0F {{item.stats.attack}}</span>
                  <span class="stat" *ngIf="item.stats.defense">\u{1F6E1}\uFE0F {{item.stats.defense}}</span>
                  <span class="stat" *ngIf="item.stats.hp">\u2764\uFE0F {{item.stats.hp}}</span>
                  <span class="stat" *ngIf="item.stats.mp">\u{1F499} {{item.stats.mp}}</span>
                </div>
                <div class="item-tags">
                  <span class="tag type-tag">{{item.type}}</span>
                  <span class="tag grade-tag">{{item.grade}}</span>
                </div>
                <div class="item-footer">
                  <button 
                    class="buy-btn"
                    [class.insufficient-gold]="gold < (item.price || calculateItemPriceByGrade(item.grade))"
                    (click)="buyItemFromShop(item, $event)">
                    <span *ngIf="gold >= (item.price || calculateItemPriceByGrade(item.grade))">\u{1F4B0} \uAD6C\uB9E4\uD558\uAE30</span>
                    <span *ngIf="gold < (item.price || calculateItemPriceByGrade(item.grade))">\u{1F4B8} \uACE8\uB4DC \uBD80\uC871</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- \uAC8C\uC784 \uB808\uC774\uC544\uC6C3 -->
  <div class="game-layout" 
       *ngIf="gameStarted"
       [class.mobile]="responsiveService.isMobile$ | async"
       [class.tablet]="responsiveService.isTablet$ | async"
       [class.desktop]="responsiveService.isDesktop$ | async">
    <!-- \uC88C\uCE21 \uD328\uB110 -->
    <div class="left-panel-container" 
         [class.collapsed]="isLeftPanelCollapsed"
         [class.mobile]="responsiveService.isMobile$ | async">
      <div class="side-panel left-panel">
        <div class="collapsed-view" *ngIf="isLeftPanelCollapsed" (click)="expandLeftPanel()">
          <div class="collapse-icon">\u{1F4DA}</div>
          <div class="collapse-text">\uBA54\uB274</div>
        </div>
        <div class="expanded-view" *ngIf="!isLeftPanelCollapsed">
          <div class="panel-header">
            <h3>\u{1F3AE} \uAC8C\uC784 \uBA54\uB274</h3>
            <button class="close-btn" (click)="closeLeftPanel()">\xD7</button>
          </div>
          <div class="panel-content">
            <button class="menu-item" (click)="saveGame()">\u{1F4BE} \uAC8C\uC784 \uC800\uC7A5</button>
            <button class="menu-item" (click)="loadGame()">\u{1F4C2} \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30</button>
            <button class="menu-item" (click)="toggleCharacterPanel()">\u{1F464} \uCE90\uB9AD\uD130 \uC815\uBCF4</button>
            <button class="menu-item" (click)="openCharacterCreator()">\u{1F3AD} AI \uCE90\uB9AD\uD130 \uC0DD\uC131</button>
            <button class="menu-item" (click)="toggleInventoryPanel()">\u{1F392} \uC778\uBCA4\uD1A0\uB9AC ({{inventory.length}})</button>
            <button class="menu-item" (click)="toggleShopPanel()">\u{1F6D2} \uC0C1\uC810</button>
            <button class="menu-item" (click)="startBattle()">\u2694\uFE0F \uC804\uD22C\uD558\uAE30</button>
            
            <div class="menu-divider"></div>
            <div class="menu-section-title">\u{1F3B2} \uC544\uC774\uD15C \uAD00\uB9AC</div>
            <button class="menu-item success" (click)="generateRandomItems()">\u2728 \uB79C\uB364 \uC544\uC774\uD15C \uC0DD\uC131</button>
            <button class="menu-item warning" (click)="resetInventory()">\u{1F504} \uC778\uBCA4\uD1A0\uB9AC \uCD08\uAE30\uD654</button>
            
            <div class="menu-divider"></div>
            <div class="menu-section-title">\u2699\uFE0F \uAC1C\uBC1C\uC790 \uB3C4\uAD6C</div>
            <button class="menu-item" (click)="debugInventory()">\u{1F50D} \uC778\uBCA4\uD1A0\uB9AC \uB514\uBC84\uADF8</button>
            <button class="menu-item danger" (click)="resetGameData()">\u{1F5D1}\uFE0F \uAC8C\uC784 \uB370\uC774\uD130 \uCD08\uAE30\uD654</button>
          </div>
        </div>
      </div>
    </div>

    <!-- \uBA54\uC778 \uCEE8\uD150\uCE20 -->
    <div class="main-content-area"
         [class.mobile]="responsiveService.isMobile$ | async">
      <!-- \uC0C1\uD0DC\uBC14 -->
      <div class="game-status-bar"
           [class.mobile]="responsiveService.isMobile$ | async">
        <button class="toggle-btn" (click)="toggleLeftPanel()" title="\uBA54\uB274">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
        <button class="back-home-btn" (click)="backToNovelSelection()" title="\uD648\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          <span>\uD648</span>
        </button>
        
        <!-- \uB370\uC2A4\uD06C\uD1B1 - \uBAA8\uB4E0 \uBC84\uD2BC \uD45C\uC2DC -->
        <div class="status-bar-actions" *ngIf="responsiveService.isDesktop$ | async">
          <button class="equipment-btn" 
                  (click)="toggleCharacterPanel()" 
                  [class.active]="showCharacterPanel"
                  title="\uCE90\uB9AD\uD130 & \uC7A5\uBE44">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <span>\uCE90\uB9AD\uD130</span>
          </button>
          <button class="inventory-btn" 
                  (click)="toggleInventoryPanel()" 
                  [class.active]="showInventoryPanel"
                  title="\uC778\uBCA4\uD1A0\uB9AC">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
              <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
              <line x1="12" y1="22.08" x2="12" y2="12"></line>
            </svg>
            <span>\uC778\uBCA4\uD1A0\uB9AC ({{inventory.length}})</span>
          </button>
          <button class="dungeon-btn" 
                  (click)="openDungeonDialog()" 
                  title="\uB358\uC804 \uD0D0\uD5D8">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="9" y1="3" x2="9" y2="21"></line>
              <line x1="15" y1="3" x2="15" y2="21"></line>
              <line x1="3" y1="9" x2="21" y2="9"></line>
              <line x1="3" y1="15" x2="21" y2="15"></line>
            </svg>
            <span>\uB358\uC804</span>
          </button>
          <button class="training-btn" 
                  (click)="toggleWuxiaPanel()" 
                  [class.active]="showWuxiaPanel"
                  title="\uC218\uB828 \uBAA8\uB4DC">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"></circle>
              <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"></path>
            </svg>
            <span>\uC218\uB828</span>
          </button>
          <button class="flow-btn" 
                  (click)="toggleAdvancedFlowPanel()" 
                  title="\uACE0\uAE09 \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            <span>\uD50C\uB85C\uC6B0</span>
          </button>
          <button class="toggle-btn" (click)="toggleRightPanel()" title="\uC0C1\uD0DC">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="20" x2="18" y2="10"></line>
              <line x1="12" y1="20" x2="12" y2="4"></line>
              <line x1="6" y1="20" x2="6" y2="14"></line>
            </svg>
          </button>
          <button class="logout-btn-game" (click)="logout()" title="\uB85C\uADF8\uC544\uC6C3">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
          </button>
        </div>
        
        <!-- \uBAA8\uBC14\uC77C/\uD0DC\uBE14\uB9BF - \uD575\uC2EC \uBC84\uD2BC\uB9CC \uD45C\uC2DC -->
        <div class="status-bar-actions mobile-actions" *ngIf="!(responsiveService.isDesktop$ | async)">
          <button class="equipment-btn" 
                  (click)="toggleCharacterPanel()" 
                  [class.active]="showCharacterPanel"
                  title="\uCE90\uB9AD\uD130">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </button>
          <button class="inventory-btn" 
                  (click)="toggleInventoryPanel()" 
                  [class.active]="showInventoryPanel"
                  title="\uC778\uBCA4\uD1A0\uB9AC">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
              <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
              <line x1="12" y1="22.08" x2="12" y2="12"></line>
            </svg>
            <span class="badge" *ngIf="inventory.length > 0">{{inventory.length}}</span>
          </button>
          <button class="dungeon-btn" 
                  (click)="openDungeonDialog()" 
                  title="\uB358\uC804">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="9" y1="3" x2="9" y2="21"></line>
              <line x1="15" y1="3" x2="15" y2="21"></line>
              <line x1="3" y1="9" x2="21" y2="9"></line>
              <line x1="3" y1="15" x2="21" y2="15"></line>
            </svg>
          </button>
          <button class="toggle-btn" (click)="toggleRightPanel()" title="\uC0C1\uD0DC">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="20" x2="18" y2="10"></line>
              <line x1="12" y1="20" x2="12" y2="4"></line>
              <line x1="6" y1="20" x2="6" y2="14"></line>
            </svg>
          </button>
        </div>
      </div>

      <!-- \uC18C\uC124 \uC601\uC5ED -->
      <div class="novel-scroll-area">
        <div class="novel-header">
          <h2>\uC81C1\uC7A5 - \uC6B4\uBA85\uC758 \uC2DC\uC791</h2>
        </div>
        <div class="story-blocks">
          <div *ngFor="let block of storyBlocks" class="story-block">
            <div *ngIf="block.type === 'story'">
              <p *ngFor="let line of block.lines">{{line}}</p>
            </div>
            <div *ngIf="block.type === 'choice'">\u2B50 {{block.choiceText}}</div>
          </div>
        </div>
        
        <!-- \uC804\uD22C \uC601\uC5ED - \uD50C\uB7AB & \uBB38\uD559\uC801 \uB514\uC790\uC778 -->
        <div class="battle-section flat-battle" *ngIf="inBattle">
          <div class="battle-container">
            <!-- \uC804\uD22C \uC81C\uBAA9 -->
            <div class="battle-title">
              <h3>\u2014 \uC804\uD22C \u2014</h3>
              <p class="turn-text" *ngIf="!battleEnded">
                {{battleTurn === 'player' ? '\uB2F9\uC2E0\uC758 \uCC28\uB840\uC785\uB2C8\uB2E4.' : '\uC801\uC774 \uD589\uB3D9\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4...'}}
              </p>
            </div>
            
            <!-- \uC804\uD22C \uC0C1\uD669\uD310 -->
            <div class="battle-board">
              <!-- \uD50C\uB808\uC774\uC5B4 -->
              <div class="combatant player-side" [class.active-turn]="battleTurn === 'player'">
                <div class="combatant-header">
                  <h4>{{playerCharacter.name}}</h4>
                  <span class="level-tag">Lv.{{playerCharacter.level}}</span>
                </div>
                
                <div class="stats-list">
                  <div class="stat-row">
                    <span class="stat-label">\uCCB4\uB825</span>
                    <div class="stat-bar-wrapper">
                      <div class="stat-bar">
                        <div class="stat-bar-fill hp" 
                             [class.low]="(playerCharacter.hp / playerCharacter.maxHp) < 0.3"
                             [style.width.%]="(playerCharacter.hp / playerCharacter.maxHp) * 100"></div>
                      </div>
                      <span class="stat-value">{{playerCharacter.hp}}/{{playerCharacter.maxHp}}</span>
                    </div>
                  </div>
                  
                  <div class="stat-row">
                    <span class="stat-label">\uB9C8\uB825</span>
                    <div class="stat-bar-wrapper">
                      <div class="stat-bar">
                        <div class="stat-bar-fill mp" 
                             [style.width.%]="(playerCharacter.mp / playerCharacter.maxMp) * 100"></div>
                      </div>
                      <span class="stat-value">{{playerCharacter.mp}}/{{playerCharacter.maxMp}}</span>
                    </div>
                  </div>
                  
                  <div class="stat-row" *ngIf="learnedMartialSkills.length > 0">
                    <span class="stat-label">\uB0B4\uB825</span>
                    <div class="stat-bar-wrapper">
                      <div class="stat-bar">
                        <div class="stat-bar-fill internal" 
                             [style.width.%]="(playerInternalPower.current / playerInternalPower.max) * 100"></div>
                      </div>
                      <span class="stat-value">{{playerInternalPower.current}}/{{playerInternalPower.max}}</span>
                    </div>
                  </div>
                  
                  <div class="stat-row compact">
                    <span class="stat-label">\uACF5\uACA9</span>
                    <span class="stat-value-inline">{{playerCharacter.attack}}</span>
                    <span class="stat-separator">|</span>
                    <span class="stat-label">\uBC29\uC5B4</span>
                    <span class="stat-value-inline">{{playerCharacter.defense}}</span>
                  </div>
                </div>
              </div>
              
              <div class="vs-divider">VS</div>
              
              <!-- \uC801 -->
              <div class="combatant enemy-side" [class.active-turn]="battleTurn === 'enemy'" *ngIf="battleEnemy">
                <div class="combatant-header">
                  <h4>{{battleEnemy.name}}</h4>
                </div>
                
                <div class="stats-list">
                  <div class="stat-row">
                    <span class="stat-label">\uCCB4\uB825</span>
                    <div class="stat-bar-wrapper">
                      <div class="stat-bar">
                        <div class="stat-bar-fill enemy-hp" 
                             [class.low]="(battleEnemy.hp / battleEnemy.maxHp) < 0.3"
                             [style.width.%]="(battleEnemy.hp / battleEnemy.maxHp) * 100"></div>
                      </div>
                      <span class="stat-value">{{battleEnemy.hp}}/{{battleEnemy.maxHp}}</span>
                    </div>
                  </div>
                  
                  <div class="stat-row">
                    <span class="stat-label">\uACF5\uACA9</span>
                    <span class="stat-value-inline">{{battleEnemy.attack}}</span>
                    <span class="stat-separator">|</span>
                    <span class="stat-label">\uBC29\uC5B4</span>
                    <span class="stat-value-inline">{{battleEnemy.defense}}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- \uC804\uD22C \uB85C\uADF8 - \uD14D\uC2A4\uD2B8\uB9CC \uAC04\uACB0\uD615 -->
          <div class="battle-log text-only-log" #battleLogContainer>
            <div class="log-lines">
              <div *ngFor="let log of battleLog.slice(-8); let i = index" 
                   class="log-line" 
                   [class.damage]="log.includes('\uD53C\uD574')" 
                   [class.heal]="log.includes('\uD68C\uBCF5')"
                   [class.critical]="log.includes('\uCE58\uBA85\uD0C0') || log.includes('\uD68C\uC2EC')"
                   [class.combo]="log.includes('\uC5F0\uACC4')"
                   [style.animation-delay.ms]="i * 50">
                {{log}}
              </div>
            </div>
          </div>
        </div>
        
        <!-- \uC77C\uBC18 \uC120\uD0DD\uC9C0 -->
        <div *ngIf="choices.length > 0 && !inBattle">
          <h3>\uC5B4\uB5BB\uAC8C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?</h3>
          <div class="choice-container">
            <div 
              *ngFor="let choice of choices; let i = index" 
              class="choice-item">
              <button 
                class="choice-button"
                (click)="selectChoice(i)">
                <span class="choice-number">{{i + 1}}</span>
                <span class="choice-text">{{choice}}</span>
              </button>
              <button 
                class="link-scenario-btn" 
                (click)="openScenarioLinkPanel(i)"
                title="\uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0">
                \u{1F517}
              </button>
            </div>
          </div>
        </div>
        
        <!-- \uC804\uD22C \uC120\uD0DD\uC9C0 (\uD14D\uC2A4\uD2B8 \uCD94\uAC00 \uD615\uD0DC) -->
        <div *ngIf="inBattle && !battleEnded && battleTurn === 'player'">
          <h3>\uC5B4\uB5BB\uAC8C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?</h3>
          <div class="choice-container battle-choices">
            <!-- \uAE30\uBCF8 \uC561\uC158 -->
            <div class="choice-item">
              <button class="choice-button" (click)="battleManager.playerAttack()">
                <span class="choice-number">1</span>
                <span class="choice-text">\uAE30\uBCF8 \uACF5\uACA9</span>
              </button>
            </div>
            <div class="choice-item">
              <button class="choice-button" 
                      [disabled]="playerCharacter.mp < 10"
                      (click)="battleManager.playerSkill()">
                <span class="choice-number">2</span>
                <span class="choice-text">\uB9C8\uBC95 \uACF5\uACA9 <span class="choice-cost">(MP 10)</span></span>
              </button>
            </div>
            <div class="choice-item">
              <button class="choice-button" (click)="battleManager.playerDefend()">
                <span class="choice-number">3</span>
                <span class="choice-text">\uBC29\uC5B4 \uC790\uC138</span>
              </button>
            </div>
            <div class="choice-item">
              <button class="choice-button" 
                      [disabled]="!battleManager.hasPotion()"
                      (click)="battleManager.usePotion()">
                <span class="choice-number">4</span>
                <span class="choice-text">\uD68C\uBCF5 \uD3EC\uC158 \uC0AC\uC6A9</span>
              </button>
            </div>
            
            <!-- \uBB34\uD611 \uC2A4\uD0AC -->
            <div *ngFor="let skill of learnedMartialSkills; let i = index" class="choice-item martial-skill-choice">
              <button class="choice-button" 
                      [disabled]="playerInternalPower.current < skill.internalPowerCost"
                      (click)="battleManager.useMartialSkillInBattle(skill)">
                <span class="choice-number">{{i + 5}}</span>
                <span class="choice-text">
                  {{skill.name}} ({{skill.chineseName}})
                  <span class="choice-cost">\uB0B4\uACF5 {{skill.internalPowerCost}}</span>
                  <span class="choice-grade" [class.grade-\uC808\uD559]="skill.grade === '\uC808\uD559'">{{skill.grade}}</span>
                </span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- \uC6B0\uCE21 \uD328\uB110 -->
    <div class="right-panel-container" 
         [class.collapsed]="isRightPanelCollapsed"
         [class.mobile]="responsiveService.isMobile$ | async">
      <div class="side-panel right-panel">
        <div class="collapsed-view" *ngIf="isRightPanelCollapsed" (click)="expandRightPanel()">
          <div class="collapse-icon">\u{1F4CA}</div>
          <div class="collapse-text">\uC815\uBCF4</div>
        </div>
        <div class="expanded-view" *ngIf="!isRightPanelCollapsed">
          <div class="panel-header">
            <h3>\u{1F4CA} \uAC8C\uC784 \uC815\uBCF4</h3>
            <button class="close-btn" (click)="closeRightPanel()">\xD7</button>
          </div>
          <div class="panel-content">
            <div>\uC120\uD0DD \uD69F\uC218: {{currentPath.length}}</div>
            <div>\uC2A4\uD1A0\uB9AC \uBE14\uB85D: {{storyBlocks.length}}</div>
            <div>\uACBD\uD5D8\uCE58: {{playerCharacter.exp}}/{{playerCharacter.maxExp}}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Backdrop for panels -->
  <div class="panel-backdrop" 
       *ngIf="showCharacterPanel || showInventoryPanel || showShopPanel || showCharacterCreatorPanel || showScenarioCreatorPanel || showItemCreatorPanel"
       (click)="closeAllPanels()"
       [class.mobile]="responsiveService.isMobile$ | async"></div>

  <!-- \uCE90\uB9AD\uD130 \uD328\uB110 -->
  <div class="game-panel character-panel" 
       *ngIf="showCharacterPanel"
       [class.mobile]="responsiveService.isMobile$ | async">
    <div class="panel-header">
      <h3>\u{1F4CA} \uCE90\uB9AD\uD130 \uC815\uBCF4</h3>
      <button class="close-btn" (click)="showCharacterPanel = false">\xD7</button>
    </div>
    <div class="panel-content">
      <!-- \uCE90\uB9AD\uD130 \uAE30\uBCF8 \uC815\uBCF4 -->
      <div class="character-basic-info">
        <div class="character-avatar">
          <div class="avatar-circle">
            <span class="avatar-icon">\u{1F464}</span>
          </div>
          <div class="character-name-badge">
            <h2>{{playerCharacter.name}}</h2>
            <div class="level-badge">Lv.{{playerCharacter.level}}</div>
          </div>
        </div>
      </div>

      <!-- \uACBD\uD5D8\uCE58 \uBC14 -->
      <div class="exp-section">
        <div class="exp-label">
          <span>\uACBD\uD5D8\uCE58</span>
          <span class="exp-values">{{playerCharacter.exp}} / {{playerCharacter.maxExp}}</span>
        </div>
        <div class="progress-bar exp-bar">
          <div class="progress-fill" 
               [style.width.%]="(playerCharacter.exp / playerCharacter.maxExp) * 100">
          </div>
        </div>
        <div class="exp-percentage">
          {{((playerCharacter.exp / playerCharacter.maxExp) * 100).toFixed(1)}}%
        </div>
      </div>

      <!-- HP/MP \uBC14 -->
      <div class="status-bars">
        <div class="status-item hp">
          <div class="status-label">
            <span class="icon">\u2764\uFE0F</span>
            <span class="text">HP</span>
            <span class="values">{{playerCharacter.hp}} / {{playerCharacter.maxHp}}</span>
          </div>
          <div class="progress-bar hp-bar">
            <div class="progress-fill" 
                 [style.width.%]="(playerCharacter.hp / playerCharacter.maxHp) * 100"
                 [class.low]="(playerCharacter.hp / playerCharacter.maxHp) < 0.3"
                 [class.medium]="(playerCharacter.hp / playerCharacter.maxHp) >= 0.3 && (playerCharacter.hp / playerCharacter.maxHp) < 0.7">
            </div>
          </div>
        </div>

        <div class="status-item mp">
          <div class="status-label">
            <span class="icon">\u{1F499}</span>
            <span class="text">MP</span>
            <span class="values">{{playerCharacter.mp}} / {{playerCharacter.maxMp}}</span>
          </div>
          <div class="progress-bar mp-bar">
            <div class="progress-fill" 
                 [style.width.%]="(playerCharacter.mp / playerCharacter.maxMp) * 100">
            </div>
          </div>
        </div>
      </div>

      <!-- \uAE30\uBCF8 \uB2A5\uB825\uCE58 -->
      <div class="stats-section">
        <h4 class="section-title">\u2694\uFE0F \uAE30\uBCF8 \uB2A5\uB825\uCE58</h4>
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-icon">\u2694\uFE0F</div>
            <div class="stat-info">
              <div class="stat-name">\uACF5\uACA9\uB825</div>
              <div class="stat-value">{{playerCharacter.attack}}</div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">\u{1F6E1}\uFE0F</div>
            <div class="stat-info">
              <div class="stat-name">\uBC29\uC5B4\uB825</div>
              <div class="stat-value">{{playerCharacter.defense}}</div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">\u26A1</div>
            <div class="stat-info">
              <div class="stat-name">\uBBFC\uCCA9</div>
              <div class="stat-value">{{playerCharacter.agility}}</div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">\u{1F4AA}</div>
            <div class="stat-info">
              <div class="stat-name">\uD798</div>
              <div class="stat-value">{{playerCharacter.strength}}</div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">\u{1F9E0}</div>
            <div class="stat-info">
              <div class="stat-name">\uC9C0\uB2A5</div>
              <div class="stat-value">{{playerCharacter.intelligence}}</div>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">\u2B50</div>
            <div class="stat-info">
              <div class="stat-name">\uC2A4\uD0AC \uD3EC\uC778\uD2B8</div>
              <div class="stat-value">{{playerCharacter.skillPoints}}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- \uC7AC\uD654 \uC815\uBCF4 -->
      <div class="currency-section">
        <h4 class="section-title">\u{1F4B0} \uBCF4\uC720 \uC7AC\uD654</h4>
        <div class="currency-mini-grid">
          <div class="currency-mini-item gold">
            <span class="currency-mini-icon">\u{1F4B0}</span>
            <span class="currency-mini-value">{{playerCharacter.gold | number}}</span>
          </div>
          <div class="currency-mini-item gem">
            <span class="currency-mini-icon">\u{1F48E}</span>
            <span class="currency-mini-value">{{playerCharacter.gem | number}}</span>
          </div>
          <div class="currency-mini-item crystal">
            <span class="currency-mini-icon">\u{1F52E}</span>
            <span class="currency-mini-value">{{playerCharacter.crystal | number}}</span>
          </div>
          <div class="currency-mini-item ticket">
            <span class="currency-mini-icon">\u{1F3AB}</span>
            <span class="currency-mini-value">{{playerCharacter.ticket | number}}</span>
          </div>
        </div>
      </div>

      <!-- \uC2A4\uD0AC \uBAA9\uB85D -->
      <div class="skills-section" *ngIf="playerCharacter.skills && playerCharacter.skills.length > 0">
        <h4 class="section-title">\u2728 \uBCF4\uC720 \uC2A4\uD0AC</h4>
        <div class="skills-list">
          <div class="skill-item" *ngFor="let skill of playerCharacter.skills">
            <div class="skill-name">{{skill.name}}</div>
            <div class="skill-level">Lv.{{skill.level}}/{{skill.maxLevel}}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- \uC778\uBCA4\uD1A0\uB9AC \uD328\uB110 -->
  <div class="game-panel inventory-panel" 
       *ngIf="showInventoryPanel"
       [class.mobile]="responsiveService.isMobile$ | async">
    <div class="panel-header">
      <h3>\u{1F392} \uC778\uBCA4\uD1A0\uB9AC & \uC7A5\uBE44</h3>
      <button class="close-btn" (click)="novelState.closeInventoryPanel()">\xD7</button>
    </div>
    
    <!-- \uD0ED \uBA54\uB274 -->
    <div class="inventory-tabs">
      <button 
        class="tab-btn"
        [class.active]="inventoryActiveTab === 'equipment'"
        (click)="novelState.setInventoryTab('equipment')">
        \u2694\uFE0F \uC7A5\uBE44 & \uC778\uBCA4\uD1A0\uB9AC
      </button>
      <button 
        class="tab-btn currency-tab"
        [class.active]="inventoryActiveTab === 'currency'"
        (click)="novelState.setInventoryTab('currency')">
        \u{1F4B0} \uC7AC\uD654
      </button>
      <button 
        class="tab-btn"
        [class.active]="inventoryActiveTab === 'shop'"
        (click)="novelState.setInventoryTab('shop')">
        \u{1F6D2} \uC0C1\uC810
      </button>
    </div>
    
    <!-- \uC7A5\uBE44 \uD0ED -->
    <div class="tab-content" *ngIf="inventoryActiveTab === 'equipment'">
      <!-- \uC7A5\uBE44 \uC2AC\uB86F \uC601\uC5ED - \uB514\uC544\uBE14\uB85C \uC2A4\uD0C0\uC77C -->
      <div class="equipment-slots-section">
        <h4 class="section-title">\u2694\uFE0F \uC7A5\uCC29 \uC911\uC778 \uC7A5\uBE44</h4>
        <div class="diablo-equipment-layout">
          <!-- \uC88C\uCE21 \uCEEC\uB7FC (\uBB34\uAE30, \uBC29\uC5B4\uAD6C) -->
          <div class="equipment-column left-column">
            <!-- \uBB34\uAE30 -->
            <div class="equipment-slot-diablo weapon-slot" 
                 id="weapon-slot"
                 cdkDropList
                 [cdkDropListData]="{slot: 'weapon', item: playerCharacter.equipment?.weapon}"
                 (cdkDropListDropped)="onEquipmentSlotDrop($event, 'weapon')"
                 cdkDropListSortingDisabled
                 [cdkDropListConnectedTo]="['inventory-grid']"
                 [class.has-item]="playerCharacter.equipment?.weapon"
                 [class.rarity-common]="playerCharacter.equipment?.weapon?.rarity === 'common'"
                 [class.rarity-uncommon]="playerCharacter.equipment?.weapon?.rarity === 'uncommon'"
                 [class.rarity-rare]="playerCharacter.equipment?.weapon?.rarity === 'rare'"
                 [class.rarity-epic]="playerCharacter.equipment?.weapon?.rarity === 'epic'"
                 [class.rarity-legendary]="playerCharacter.equipment?.weapon?.rarity === 'legendary'">
              <div class="slot-icon">\u2694\uFE0F</div>
              <div class="slot-content" 
                   *ngIf="playerCharacter.equipment?.weapon as weapon; else emptyWeapon"
                   cdkDrag
                   [cdkDragData]="{item: weapon, slot: 'weapon'}">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{weapon.name || weapon.baseType}}</div>
                  <button class="btn-unequip-small" 
                          (mousedown)="$event.stopPropagation()" 
                          (click)="unequipItem('weapon'); $event.stopPropagation(); $event.preventDefault()">\u2715</button>
                </div>
              </div>
              <ng-template #emptyWeapon>
                <div class="slot-empty-text">\uBB34\uAE30</div>
              </ng-template>
            </div>

            <!-- \uBC29\uC5B4\uAD6C -->
            <div class="equipment-slot-diablo armor-slot" 
                 id="armor-slot"
                 cdkDropList
                 [cdkDropListData]="{slot: 'armor', item: playerCharacter.equipment?.armor}"
                 (cdkDropListDropped)="onEquipmentSlotDrop($event, 'armor')"
                 cdkDropListSortingDisabled
                 [cdkDropListConnectedTo]="['inventory-grid']"
                 [class.has-item]="playerCharacter.equipment?.armor"
                 [class.rarity-common]="playerCharacter.equipment?.armor?.rarity === 'common'"
                 [class.rarity-uncommon]="playerCharacter.equipment?.armor?.rarity === 'uncommon'"
                 [class.rarity-rare]="playerCharacter.equipment?.armor?.rarity === 'rare'"
                 [class.rarity-epic]="playerCharacter.equipment?.armor?.rarity === 'epic'"
                 [class.rarity-legendary]="playerCharacter.equipment?.armor?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F6E1}\uFE0F</div>
              <div class="slot-content" 
                   *ngIf="playerCharacter.equipment?.armor as armor; else emptyArmor"
                   cdkDrag
                   [cdkDragData]="{item: armor, slot: 'armor'}">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{armor.name || armor.baseType}}</div>
                  <button class="btn-unequip-small" 
                          (mousedown)="$event.stopPropagation()" 
                          (click)="unequipItem('armor'); $event.stopPropagation(); $event.preventDefault()">\u2715</button>
                </div>
              </div>
              <ng-template #emptyArmor>
                <div class="slot-empty-text">\uBC29\uC5B4\uAD6C</div>
              </ng-template>
            </div>
          </div>

          <!-- \uC911\uC559 \uCEEC\uB7FC (\uBA38\uB9AC, \uBAA9, \uD5C8\uB9AC) -->
          <div class="equipment-column center-column">
            <!-- \uD22C\uAD6C -->
            <div class="equipment-slot-diablo helmet-slot" 
                 id="helmet-slot"
                 cdkDropList
                 [cdkDropListData]="{slot: 'helmet', item: playerCharacter.equipment?.helmet}"
                 (cdkDropListDropped)="onEquipmentSlotDrop($event, 'helmet')"
                 cdkDropListSortingDisabled
                 [cdkDropListConnectedTo]="['inventory-grid']"
                 [class.has-item]="playerCharacter.equipment?.helmet"
                 [class.rarity-common]="playerCharacter.equipment?.helmet?.rarity === 'common'"
                 [class.rarity-uncommon]="playerCharacter.equipment?.helmet?.rarity === 'uncommon'"
                 [class.rarity-rare]="playerCharacter.equipment?.helmet?.rarity === 'rare'"
                 [class.rarity-epic]="playerCharacter.equipment?.helmet?.rarity === 'epic'"
                 [class.rarity-legendary]="playerCharacter.equipment?.helmet?.rarity === 'legendary'">
              <div class="slot-icon">\u26D1\uFE0F</div>
              <div class="slot-content" 
                   *ngIf="playerCharacter.equipment?.helmet as helmet; else emptyHelmet"
                   cdkDrag
                   [cdkDragData]="{item: helmet, slot: 'helmet'}">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{helmet.name || helmet.baseType}}</div>
                  <button class="btn-unequip-small" 
                          (mousedown)="$event.stopPropagation()" 
                          (click)="unequipItem('helmet'); $event.stopPropagation(); $event.preventDefault()">\u2715</button>
                </div>
              </div>
              <ng-template #emptyHelmet>
                <div class="slot-empty-text">\uD22C\uAD6C</div>
              </ng-template>
            </div>

            <!-- \uBAA9\uAC78\uC774 -->
            <div class="equipment-slot-diablo amulet-slot" 
                 id="amulet-slot"
                 cdkDropList
                 [cdkDropListData]="{slot: 'amulet', item: playerCharacter.equipment?.amulet}"
                 (cdkDropListDropped)="onEquipmentSlotDrop($event, 'amulet')"
                 cdkDropListSortingDisabled
                 [cdkDropListConnectedTo]="['inventory-grid']"
                 [class.has-item]="playerCharacter.equipment?.amulet"
                 [class.rarity-common]="playerCharacter.equipment?.amulet?.rarity === 'common'"
                 [class.rarity-uncommon]="playerCharacter.equipment?.amulet?.rarity === 'uncommon'"
                 [class.rarity-rare]="playerCharacter.equipment?.amulet?.rarity === 'rare'"
                 [class.rarity-epic]="playerCharacter.equipment?.amulet?.rarity === 'epic'"
                 [class.rarity-legendary]="playerCharacter.equipment?.amulet?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F4FF}</div>
              <div class="slot-content" 
                   *ngIf="playerCharacter.equipment?.amulet as amulet; else emptyAmulet"
                   cdkDrag
                   [cdkDragData]="{item: amulet, slot: 'amulet'}">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{amulet.name || amulet.baseType}}</div>
                  <button class="btn-unequip-small" 
                          (mousedown)="$event.stopPropagation()" 
                          (click)="unequipItem('amulet'); $event.stopPropagation(); $event.preventDefault()">\u2715</button>
                </div>
              </div>
              <ng-template #emptyAmulet>
                <div class="slot-empty-text">\uBAA9\uAC78\uC774</div>
              </ng-template>
            </div>

            <!-- \uD5C8\uB9AC\uB760 -->
            <div class="equipment-slot-diablo belt-slot" 
                 id="belt-slot"
                 cdkDropList
                 [cdkDropListData]="{slot: 'belt', item: playerCharacter.equipment?.belt}"
                 (cdkDropListDropped)="onEquipmentSlotDrop($event, 'belt')"
                 cdkDropListSortingDisabled
                 [cdkDropListConnectedTo]="['inventory-grid']"
                 [class.has-item]="playerCharacter.equipment?.belt"
                 [class.rarity-common]="playerCharacter.equipment?.belt?.rarity === 'common'"
                 [class.rarity-uncommon]="playerCharacter.equipment?.belt?.rarity === 'uncommon'"
                 [class.rarity-rare]="playerCharacter.equipment?.belt?.rarity === 'rare'"
                 [class.rarity-epic]="playerCharacter.equipment?.belt?.rarity === 'epic'"
                 [class.rarity-legendary]="playerCharacter.equipment?.belt?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F454}</div>
              <div class="slot-content" 
                   *ngIf="playerCharacter.equipment?.belt as belt; else emptyBelt"
                   cdkDrag
                   [cdkDragData]="{item: belt, slot: 'belt'}">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{belt.name || belt.baseType}}</div>
                  <button class="btn-unequip-small" 
                          (mousedown)="$event.stopPropagation()" 
                          (click)="unequipItem('belt'); $event.stopPropagation(); $event.preventDefault()">\u2715</button>
                </div>
              </div>
              <ng-template #emptyBelt>
                <div class="slot-empty-text">\uD5C8\uB9AC\uB760</div>
              </ng-template>
            </div>
          </div>

          <!-- \uC6B0\uCE21 \uCEEC\uB7FC (\uC7A5\uAC11, \uC2E0\uBC1C, \uBC18\uC9C0) -->
          <div class="equipment-column right-column">
            <!-- \uC7A5\uAC11 -->
            <div class="equipment-slot-diablo gloves-slot" 
                 id="gloves-slot"
                 cdkDropList
                 [cdkDropListData]="{slot: 'gloves', item: playerCharacter.equipment?.gloves}"
                 (cdkDropListDropped)="onEquipmentSlotDrop($event, 'gloves')"
                 cdkDropListSortingDisabled
                 [cdkDropListConnectedTo]="['inventory-grid']"
                 [class.has-item]="playerCharacter.equipment?.gloves"
                 [class.rarity-common]="playerCharacter.equipment?.gloves?.rarity === 'common'"
                 [class.rarity-uncommon]="playerCharacter.equipment?.gloves?.rarity === 'uncommon'"
                 [class.rarity-rare]="playerCharacter.equipment?.gloves?.rarity === 'rare'"
                 [class.rarity-epic]="playerCharacter.equipment?.gloves?.rarity === 'epic'"
                 [class.rarity-legendary]="playerCharacter.equipment?.gloves?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F9E4}</div>
              <div class="slot-content" 
                   *ngIf="playerCharacter.equipment?.gloves as gloves; else emptyGloves"
                   cdkDrag
                   [cdkDragData]="{item: gloves, slot: 'gloves'}">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{gloves.name || gloves.baseType}}</div>
                  <button class="btn-unequip-small" 
                          (mousedown)="$event.stopPropagation()" 
                          (click)="unequipItem('gloves'); $event.stopPropagation(); $event.preventDefault()">\u2715</button>
                </div>
              </div>
              <ng-template #emptyGloves>
                <div class="slot-empty-text">\uC7A5\uAC11</div>
              </ng-template>
            </div>

            <!-- \uC2E0\uBC1C -->
            <div class="equipment-slot-diablo boots-slot" 
                 id="boots-slot"
                 cdkDropList
                 [cdkDropListData]="{slot: 'boots', item: playerCharacter.equipment?.boots}"
                 (cdkDropListDropped)="onEquipmentSlotDrop($event, 'boots')"
                 cdkDropListSortingDisabled
                 [cdkDropListConnectedTo]="['inventory-grid']"
                 [class.has-item]="playerCharacter.equipment?.boots"
                 [class.rarity-common]="playerCharacter.equipment?.boots?.rarity === 'common'"
                 [class.rarity-uncommon]="playerCharacter.equipment?.boots?.rarity === 'uncommon'"
                 [class.rarity-rare]="playerCharacter.equipment?.boots?.rarity === 'rare'"
                 [class.rarity-epic]="playerCharacter.equipment?.boots?.rarity === 'epic'"
                 [class.rarity-legendary]="playerCharacter.equipment?.boots?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F462}</div>
              <div class="slot-content" 
                   *ngIf="playerCharacter.equipment?.boots as boots; else emptyBoots"
                   cdkDrag
                   [cdkDragData]="{item: boots, slot: 'boots'}">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{boots.name || boots.baseType}}</div>
                  <button class="btn-unequip-small" 
                          (mousedown)="$event.stopPropagation()" 
                          (click)="unequipItem('boots'); $event.stopPropagation(); $event.preventDefault()">\u2715</button>
                </div>
              </div>
              <ng-template #emptyBoots>
                <div class="slot-empty-text">\uC2E0\uBC1C</div>
              </ng-template>
            </div>
          </div>

          <!-- \uD558\uB2E8: \uBC18\uC9C0 \uC2AC\uB86F -->
          <div class="equipment-rings-row">
            <!-- \uBC18\uC9C01 -->
            <div class="equipment-slot-diablo ring-slot ring-left" 
                 id="ring1-slot"
                 cdkDropList
                 [cdkDropListData]="{slot: 'ring1', item: playerCharacter.equipment?.ring1}"
                 (cdkDropListDropped)="onEquipmentSlotDrop($event, 'ring1')"
                 cdkDropListSortingDisabled
                 [cdkDropListConnectedTo]="['inventory-grid']"
                 [class.has-item]="playerCharacter.equipment?.ring1"
                 [class.rarity-common]="playerCharacter.equipment?.ring1?.rarity === 'common'"
                 [class.rarity-uncommon]="playerCharacter.equipment?.ring1?.rarity === 'uncommon'"
                 [class.rarity-rare]="playerCharacter.equipment?.ring1?.rarity === 'rare'"
                 [class.rarity-epic]="playerCharacter.equipment?.ring1?.rarity === 'epic'"
                 [class.rarity-legendary]="playerCharacter.equipment?.ring1?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F48D}</div>
              <div class="slot-content" 
                   *ngIf="playerCharacter.equipment?.ring1 as ring1; else emptyRing1"
                   cdkDrag
                   [cdkDragData]="{item: ring1, slot: 'ring1'}">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{ring1.name || ring1.baseType}}</div>
                  <button class="btn-unequip-small" 
                          (mousedown)="$event.stopPropagation()" 
                          (click)="unequipItem('ring1'); $event.stopPropagation(); $event.preventDefault()">\u2715</button>
                </div>
              </div>
              <ng-template #emptyRing1>
                <div class="slot-empty-text">\uBC18\uC9C0</div>
              </ng-template>
            </div>

            <!-- \uBC18\uC9C02 -->
            <div class="equipment-slot-diablo ring-slot ring-right" 
                 id="ring2-slot"
                 cdkDropList
                 [cdkDropListData]="{slot: 'ring2', item: playerCharacter.equipment?.ring2}"
                 (cdkDropListDropped)="onEquipmentSlotDrop($event, 'ring2')"
                 cdkDropListSortingDisabled
                 [cdkDropListConnectedTo]="['inventory-grid']"
                 [class.has-item]="playerCharacter.equipment?.ring2"
                 [class.rarity-common]="playerCharacter.equipment?.ring2?.rarity === 'common'"
                 [class.rarity-uncommon]="playerCharacter.equipment?.ring2?.rarity === 'uncommon'"
                 [class.rarity-rare]="playerCharacter.equipment?.ring2?.rarity === 'rare'"
                 [class.rarity-epic]="playerCharacter.equipment?.ring2?.rarity === 'epic'"
                 [class.rarity-legendary]="playerCharacter.equipment?.ring2?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F48D}</div>
              <div class="slot-content" 
                   *ngIf="playerCharacter.equipment?.ring2 as ring2; else emptyRing2"
                   cdkDrag
                   [cdkDragData]="{item: ring2, slot: 'ring2'}">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{ring2.name || ring2.baseType}}</div>
                  <button class="btn-unequip-small" 
                          (mousedown)="$event.stopPropagation()" 
                          (click)="unequipItem('ring2'); $event.stopPropagation(); $event.preventDefault()">\u2715</button>
                </div>
              </div>
              <ng-template #emptyRing2>
                <div class="slot-empty-text">\uBC18\uC9C0</div>
              </ng-template>
            </div>
          </div>
        </div>
      </div>

      <!-- \uC778\uBCA4\uD1A0\uB9AC \uADF8\uB9AC\uB4DC \uC601\uC5ED - \uC7A5\uBE44 \uD0ED \uB0B4 -->
      <div class="inventory-tab-grid">
        <h4 class="section-title">\u{1F392} \uBCF4\uC720 \uC544\uC774\uD15C</h4>
        
        <!-- \uD544\uD130 & \uC815\uB82C \uCEE8\uD2B8\uB864 -->
        <div class="inventory-controls">
          <div class="filter-buttons">
            <button 
              *ngFor="let filter of inventoryFilterOptions"
              [class.active]="inventoryFilter === filter.value"
              (click)="setInventoryFilter(filter.value)">
              {{filter.icon}} {{filter.label}}
            </button>
          </div>
          
          <div class="sort-controls">
            <label>\uC815\uB82C:</label>
            <select [(ngModel)]="inventorySortBy" (change)="sortInventory()">
              <option value="rarity">\uD76C\uADC0\uB3C4\uC21C</option>
              <option value="type">\uD0C0\uC785\uC21C</option>
              <option value="name">\uC774\uB984\uC21C</option>
              <option value="recent">\uCD5C\uADFC \uD68D\uB4DD\uC21C</option>
            </select>
            <button (click)="autoSortInventory()" class="btn-auto-sort">
              \u{1F504} \uC790\uB3D9 \uC815\uB82C
            </button>
          </div>
        </div>
        
        <!-- \uADF8\uB9AC\uB4DC \uCEE8\uD14C\uC774\uB108 -->
        <div class="inventory-grid-container">
          <div class="inventory-grid-cells"
               id="inventory-grid"
               cdkDropList
               [cdkDropListData]="getFilteredAndSortedInventory()"
               (cdkDropListDropped)="onInventoryDrop($event)"
               [cdkDropListConnectedTo]="['weapon-slot', 'armor-slot', 'helmet-slot', 'amulet-slot', 'belt-slot', 'gloves-slot', 'boots-slot', 'ring1-slot', 'ring2-slot']">
            <!-- \uC544\uC774\uD15C \uC140 -->
            <div *ngFor="let item of getFilteredAndSortedInventory(); let i = index"
                 class="inventory-cell"
                 [class]="'rarity-' + item.rarity"
                 cdkDrag
                 [cdkDragData]="{item: item, index: i}"
                 (click)="onInventoryCellClick($event, item, i)"
                 (contextmenu)="onInventoryCellRightClick($event, item, i)"
                 (dblclick)="onInventoryCellDoubleClick(item, i)">
              
              <div class="cell-content">
                <!-- \uC544\uC774\uCF58 -->
                <div class="cell-icon">{{getInventoryItemIcon(item)}}</div>
                
                <!-- \uC774\uB984 -->
                <div class="cell-name" [title]="item.nameKo || item.name">
                  {{getTruncatedName(item)}}
                </div>
                
                <!-- \uC218\uB7C9 -->
                <div class="cell-quantity" *ngIf="item.quantity > 1">
                  \xD7{{item.quantity}}
                </div>
                
                <!-- \uBAA8\uBC14\uC77C\uC6A9 \uBE60\uB978 \uCC29\uC6A9 \uBC84\uD2BC -->
                <button class="quick-equip-btn" 
                        *ngIf="(responsiveService.isMobile$ | async) && isEquippableItem(item)"
                        (click)="quickEquipItem(item, i); $event.stopPropagation()"
                        [title]="'\uCC29\uC6A9'">
                  \u26A1
                </button>
              </div>
              
              <!-- \uB4DC\uB798\uADF8 \uBBF8\uB9AC\uBCF4\uAE30 -->
              <div *cdkDragPreview class="drag-preview">
                <div class="preview-icon">{{getInventoryItemIcon(item)}}</div>
                <div class="preview-name">{{getTruncatedName(item)}}</div>
              </div>
            </div>
            
            <!-- \uBE48 \uCE78 -->
            <div *ngFor="let empty of getEmptyInventorySlots()"
                 class="inventory-cell empty">
              <div class="cell-content">
                <div class="empty-icon">\u{1F4E6}</div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- \uD558\uB2E8 \uC815\uBCF4 -->
        <div class="inventory-footer">
          <span class="inventory-count">
            {{getFilteredAndSortedInventory().length}} / {{maxInventorySize}} \uC544\uC774\uD15C
          </span>
        </div>
      </div>

      </div>
      <!-- \uC7A5\uBE44 \uD0ED \uB05D -->

      <!-- \uC7AC\uD654 \uD0ED -->
      <div class="tab-content" *ngIf="inventoryActiveTab === 'currency'">
        <div class="currency-tab-content">
          <div class="currency-header">
            <h4 class="section-title">\u{1F4B0} \uBCF4\uC720 \uC7AC\uD654</h4>
            <p class="currency-subtitle">\uBAA8\uD5D8\uC5D0 \uD544\uC694\uD55C \uB2E4\uC591\uD55C \uD654\uD3D0\uB97C \uAD00\uB9AC\uD558\uC138\uC694</p>
          </div>
          
          <div class="currency-grid">
            <!-- \uACE8\uB4DC -->
            <div class="currency-card gold-card">
              <div class="currency-background"></div>
              <div class="currency-content">
                <div class="currency-top">
                  <div class="currency-icon-wrapper">
                    <span class="currency-icon">\u{1F4B0}</span>
                  </div>
                  <span class="currency-label">\uACE8\uB4DC</span>
                </div>
                <div class="currency-amount-section">
                  <div class="currency-amount">
                    <span class="amount-number">{{gold | number}}</span>
                    <span class="amount-unit">G</span>
                  </div>
                  <p class="currency-usage">\uC0C1\uC810\uC5D0\uC11C \uC544\uC774\uD15C \uAD6C\uB9E4</p>
                </div>
              </div>
            </div>

            <!-- \uBCF4\uC11D -->
            <div class="currency-card gem-card">
              <div class="currency-background"></div>
              <div class="currency-content">
                <div class="currency-top">
                  <div class="currency-icon-wrapper">
                    <span class="currency-icon">\u{1F48E}</span>
                  </div>
                  <span class="currency-label">\uBCF4\uC11D</span>
                </div>
                <div class="currency-amount-section">
                  <div class="currency-amount">
                    <span class="amount-number">{{gem | number}}</span>
                    <span class="amount-unit">\uAC1C</span>
                  </div>
                  <p class="currency-usage">\uD504\uB9AC\uBBF8\uC5C4 \uC544\uC774\uD15C \uAD6C\uB9E4</p>
                </div>
              </div>
            </div>

            <!-- \uD06C\uB9AC\uC2A4\uD0C8 -->
            <div class="currency-card crystal-card">
              <div class="currency-background"></div>
              <div class="currency-content">
                <div class="currency-top">
                  <div class="currency-icon-wrapper">
                    <span class="currency-icon">\u{1F52E}</span>
                  </div>
                  <span class="currency-label">\uD06C\uB9AC\uC2A4\uD0C8</span>
                </div>
                <div class="currency-amount-section">
                  <div class="currency-amount">
                    <span class="amount-number">{{crystal | number}}</span>
                    <span class="amount-unit">\uAC1C</span>
                  </div>
                  <p class="currency-usage">\uC7A5\uBE44 \uAC15\uD654 \uC7AC\uB8CC</p>
                </div>
              </div>
            </div>

            <!-- \uD2F0\uCF13 -->
            <div class="currency-card ticket-card">
              <div class="currency-background"></div>
              <div class="currency-content">
                <div class="currency-top">
                  <div class="currency-icon-wrapper">
                    <span class="currency-icon">\u{1F3AB}</span>
                  </div>
                  <span class="currency-label">\uD2F0\uCF13</span>
                </div>
                <div class="currency-amount-section">
                  <div class="currency-amount">
                    <span class="amount-number">{{ticket | number}}</span>
                    <span class="amount-unit">\uC7A5</span>
                  </div>
                  <p class="currency-usage">\uB358\uC804 & \uC774\uBCA4\uD2B8 \uC785\uC7A5</p>
                </div>
              </div>
            </div>
          </div>

          <!-- \uC7AC\uD654 \uD68D\uB4DD \uBC29\uBC95 \uC548\uB0B4 -->
          <div class="currency-guide">
            <h5 class="guide-title">\u{1F4A1} \uC7AC\uD654 \uD68D\uB4DD \uBC29\uBC95</h5>
            <div class="guide-list">
              <div class="guide-item">
                <span class="guide-icon">\u{1F4D6}</span>
                <span class="guide-text">\uC2A4\uD1A0\uB9AC \uC9C4\uD589\uC73C\uB85C \uACE8\uB4DC \uD68D\uB4DD</span>
              </div>
              <div class="guide-item">
                <span class="guide-icon">\u2694\uFE0F</span>
                <span class="guide-text">\uC804\uD22C \uC2B9\uB9AC \uC2DC \uBCF4\uC0C1 \uD68D\uB4DD</span>
              </div>
              <div class="guide-item">
                <span class="guide-icon">\u{1F3AF}</span>
                <span class="guide-text">\uD018\uC2A4\uD2B8 \uC644\uB8CC\uB85C \uB2E4\uC591\uD55C \uC7AC\uD654 \uD68D\uB4DD</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- \uC7AC\uD654 \uD0ED \uB05D -->

      <!-- \uC0C1\uC810 \uD0ED -->
      <div class="tab-content" *ngIf="inventoryActiveTab === 'shop'">
        <div class="shop-wrapper">
          <!-- \uC0C1\uC810 \uD5E4\uB354 -->
          <div class="shop-header">
            <div class="shop-title-section">
              <h4 class="shop-title">\u{1F3EA} \uBAA8\uD5D8\uAC00 \uC0C1\uC810</h4>
              <p class="shop-subtitle">AI\uAC00 \uC0DD\uC131\uD55C \uD2B9\uBCC4\uD55C \uC544\uC774\uD15C\uC744 \uAD6C\uB9E4\uD558\uC138\uC694</p>
            </div>
            <div class="shop-wallet">
              <div class="wallet-icon">\u{1F4B0}</div>
              <div class="wallet-info">
                <span class="wallet-label">\uBCF4\uC720 \uACE8\uB4DC</span>
                <span class="wallet-amount">{{gold | number}} G</span>
              </div>
            </div>
          </div>

          <!-- \uC0C1\uC810 \uC544\uC774\uD15C \uADF8\uB9AC\uB4DC -->
          <div class="shop-items-container" *ngIf="savedItems.length > 0">
            <div 
              class="shop-item-card"
              *ngFor="let item of savedItems"
              [class.grade-legendary]="item.grade === '\uC2E0\uD654' || item.grade === '\uC804\uC124'"
              [class.grade-epic]="item.grade === '\uC601\uC6C5'"
              [class.grade-rare]="item.grade === '\uD76C\uADC0'"
              [class.grade-uncommon]="item.grade === '\uACE0\uAE09'"
              [class.grade-common]="item.grade === '\uC77C\uBC18'">
              
              <!-- \uC544\uC774\uD15C \uBC30\uC9C0 -->
              <div class="item-badge-container">
                <span class="item-grade-badge">{{item.grade}}</span>
                <span class="item-type-badge">{{item.type}}</span>
              </div>

              <!-- \uC544\uC774\uD15C \uC774\uBBF8\uC9C0 \uC601\uC5ED -->
              <div class="item-image-section">
                <div class="item-icon-large">\u{1F4E6}</div>
              </div>

              <!-- \uC544\uC774\uD15C \uC815\uBCF4 -->
              <div class="item-info-section">
                <h5 class="item-name">{{item.name}}</h5>
                <p class="item-description">{{item.description}}</p>

                <!-- \uC544\uC774\uD15C \uB2A5\uB825\uCE58 -->
                <div class="item-stats-row" *ngIf="item.stats && (item.stats.attack || item.stats.defense || item.stats.hp || item.stats.mp)">
                  <div class="stat-chip" *ngIf="item.stats.attack">
                    <span class="stat-icon">\u2694\uFE0F</span>
                    <span class="stat-value">+{{item.stats.attack}}</span>
                  </div>
                  <div class="stat-chip" *ngIf="item.stats.defense">
                    <span class="stat-icon">\u{1F6E1}\uFE0F</span>
                    <span class="stat-value">+{{item.stats.defense}}</span>
                  </div>
                  <div class="stat-chip" *ngIf="item.stats.hp">
                    <span class="stat-icon">\u2764\uFE0F</span>
                    <span class="stat-value">+{{item.stats.hp}}</span>
                  </div>
                  <div class="stat-chip" *ngIf="item.stats.mp">
                    <span class="stat-icon">\u{1F499}</span>
                    <span class="stat-value">+{{item.stats.mp}}</span>
                  </div>
                </div>

                <!-- \uC544\uC774\uD15C \uD6A8\uACFC -->
                <div class="item-effects" *ngIf="item.effects && item.effects.length > 0">
                  <div class="effect-item" *ngFor="let effect of item.effects.slice(0, 2)">
                    <span class="effect-icon">\u2728</span>
                    <span class="effect-text">{{effect}}</span>
                  </div>
                </div>
              </div>

              <!-- \uAD6C\uB9E4 \uBC84\uD2BC \uC601\uC5ED -->
              <div class="item-purchase-section">
                <div class="item-price-display">
                  <span class="price-icon">\u{1F4B0}</span>
                  <span class="price-amount">{{item.price || calculateItemPriceByGrade(item.grade)}}</span>
                  <span class="price-unit">G</span>
                </div>
                <button 
                  class="purchase-button"
                  [class.can-buy]="gold >= (item.price || calculateItemPriceByGrade(item.grade))"
                  [class.cannot-buy]="gold < (item.price || calculateItemPriceByGrade(item.grade))"
                  [disabled]="gold < (item.price || calculateItemPriceByGrade(item.grade))"
                  (click)="buyItemFromShop(item, $event)">
                  <span *ngIf="gold >= (item.price || calculateItemPriceByGrade(item.grade))">
                    <span class="btn-icon">\uFFFD</span> \uAD6C\uB9E4\uD558\uAE30
                  </span>
                  <span *ngIf="gold < (item.price || calculateItemPriceByGrade(item.grade))">
                    <span class="btn-icon">\uFFFD</span> \uACE8\uB4DC \uBD80\uC871
                  </span>
                </button>
              </div>
            </div>
          </div>

          <!-- \uBE48 \uC0C1\uC810 \uBA54\uC2DC\uC9C0 -->
          <div *ngIf="savedItems.length === 0" class="empty-shop-state">
            <div class="empty-icon">\u{1F3EA}</div>
            <h5 class="empty-title">\uC0C1\uC810\uC5D0 \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4</h5>
            <p class="empty-message">AI \uC544\uC774\uD15C \uC0DD\uC131\uAE30\uB85C \uD2B9\uBCC4\uD55C \uC544\uC774\uD15C\uC744 \uB9CC\uB4E4\uC5B4\uBCF4\uC138\uC694!</p>
            <div class="empty-hint">
              <span class="hint-icon">\u{1F4A1}</span>
              <span class="hint-text">\uD648 \uD654\uBA74\uC758 "AI \uC544\uC774\uD15C \uC0DD\uC131" \uBA54\uB274\uB97C \uC774\uC6A9\uD558\uC138\uC694</span>
            </div>
          </div>
        </div>
      </div>
      <!-- \uC0C1\uC810 \uD0ED \uB05D -->
  </div>

  <!-- \uC544\uC774\uD15C \uCEE8\uD14D\uC2A4\uD2B8 \uBA54\uB274 -->
  <div class="item-context-menu" 
       *ngIf="showItemContextMenu" 
       [style.left.px]="contextMenuPosition.x" 
       [style.top.px]="contextMenuPosition.y"
       (click)="$event.stopPropagation()">
    <div class="context-menu-item" (click)="equipItemFromMenu()">
      <span class="menu-icon">\u2694\uFE0F</span>
      <span class="menu-text">\uC7A5\uCC29\uD558\uAE30</span>
    </div>
    <div class="context-menu-item" (click)="showItemInfoModal()">
      <span class="menu-icon">\u{1F4CB}</span>
      <span class="menu-text">\uC815\uBCF4 \uBCF4\uAE30</span>
    </div>
    <div class="context-menu-item danger" (click)="discardItemFromMenu()">
      <span class="menu-icon">\u{1F5D1}\uFE0F</span>
      <span class="menu-text">\uBC84\uB9AC\uAE30</span>
    </div>
  </div>

  <!-- \uC544\uC774\uD15C \uC815\uBCF4 \uBAA8\uB2EC (\uB4DC\uB798\uADF8 \uAC00\uB2A5) -->
  <div class="item-info-modal" 
       *ngIf="showItemInfo"
       [style.left.px]="itemInfoPosition.x" 
       [style.top.px]="itemInfoPosition.y"
       (mousedown)="onItemInfoDragStart($event)">
    <div class="modal-header">
      <h4 class="modal-title">\u{1F4CB} \uC544\uC774\uD15C \uC815\uBCF4</h4>
      <button class="modal-close-btn" (click)="closeItemInfoModal(); $event.stopPropagation()">\xD7</button>
    </div>
    <div class="modal-body" *ngIf="selectedContextItem">
      <!-- \uC544\uC774\uD15C \uD5E4\uB354 -->
      <div class="item-info-header" [class]="'rarity-' + selectedContextItem.rarity">
        <div class="item-info-icon">{{getInventoryItemIcon(selectedContextItem)}}</div>
        <div class="item-info-title">
          <h3>{{selectedContextItem.nameKo || selectedContextItem.name}}</h3>
          <span class="item-rarity-badge">{{getRarityName(selectedContextItem.rarity)}}</span>
        </div>
      </div>

      <!-- \uC544\uC774\uD15C \uD0C0\uC785 & \uC218\uB7C9 -->
      <div class="item-info-meta">
        <span class="meta-badge type-badge">{{getTypeName(selectedContextItem.type)}}</span>
        <span class="meta-badge quantity-badge" *ngIf="selectedContextItem.quantity > 1">
          \uC218\uB7C9: \xD7{{selectedContextItem.quantity}}
        </span>
      </div>

      <!-- \uC544\uC774\uD15C \uC2A4\uD0EF -->
      <div class="item-info-stats" *ngIf="selectedContextItem.stats">
        <h5 class="stats-title">\u{1F4CA} \uB2A5\uB825\uCE58</h5>
        <div class="stats-grid">
          <div class="stat-item" *ngIf="selectedContextItem.stats.attack">
            <span class="stat-icon">\u2694\uFE0F</span>
            <span class="stat-label">\uACF5\uACA9\uB825</span>
            <span class="stat-value">+{{selectedContextItem.stats.attack}}</span>
          </div>
          <div class="stat-item" *ngIf="selectedContextItem.stats.defense">
            <span class="stat-icon">\u{1F6E1}\uFE0F</span>
            <span class="stat-label">\uBC29\uC5B4\uB825</span>
            <span class="stat-value">+{{selectedContextItem.stats.defense}}</span>
          </div>
          <div class="stat-item" *ngIf="selectedContextItem.stats.hp">
            <span class="stat-icon">\u2764\uFE0F</span>
            <span class="stat-label">\uCCB4\uB825</span>
            <span class="stat-value">+{{selectedContextItem.stats.hp}}</span>
          </div>
          <div class="stat-item" *ngIf="selectedContextItem.stats.mp">
            <span class="stat-icon">\u{1F499}</span>
            <span class="stat-label">\uB9C8\uB098</span>
            <span class="stat-value">+{{selectedContextItem.stats.mp}}</span>
          </div>
        </div>
      </div>

      <!-- \uC544\uC774\uD15C \uC124\uBA85 -->
      <div class="item-info-description" *ngIf="selectedContextItem.description">
        <h5 class="desc-title">\u{1F4DD} \uC124\uBA85</h5>
        <p>{{selectedContextItem.description}}</p>
      </div>

      <!-- \uC544\uC774\uD15C \uC561\uC158 \uBC84\uD2BC -->
      <div class="item-info-actions">
        <button class="action-btn equip-btn" (click)="equipItemFromModal(); $event.stopPropagation()">
          \u2694\uFE0F \uC7A5\uCC29\uD558\uAE30
        </button>
        <button class="action-btn discard-btn" (click)="discardItemFromModal(); $event.stopPropagation()">
          \u{1F5D1}\uFE0F \uBC84\uB9AC\uAE30
        </button>
      </div>
    </div>
  </div>

  <!-- \uC0C1\uC810 \uD328\uB110 -->
  <div class="game-panel shop-panel" 
       *ngIf="showShopPanel"
       [class.mobile]="responsiveService.isMobile$ | async">
    <div class="panel-header">
      <h3>\u{1F6D2} \uC0C1\uC810</h3>
      <button class="close-btn" (click)="novelState.closeShopPanel()">\xD7</button>
    </div>
    <div class="panel-content">
      <div>\uBCF4\uC720 \uACE8\uB4DC: {{gold}}G</div>
      <div *ngFor="let item of shopItems">
        {{item.name}} - {{item.price}}G (\uC7AC\uACE0: {{item.stock}})
        <button (click)="buyItem(item)" [disabled]="gold < item.price || item.stock <= 0">\uAD6C\uB9E4</button>
      </div>
    </div>
  </div>

  <!-- AI \uCE90\uB9AD\uD130 \uC0DD\uC131 \uD328\uB110 -->
  <div class="game-panel character-creator-panel" *ngIf="showCharacterCreatorPanel">
    <div class="panel-header">
      <h3>\u{1F3AD} AI \uCE90\uB9AD\uD130 \uC0DD\uC131</h3>
      <button class="close-btn" (click)="novelState.closeCharacterCreator()">\xD7</button>
    </div>
    <div class="panel-content">
      <div class="character-creator-container">
        <div class="creator-intro">
          <h4>\u2728 Loworld AI\uB85C \uCE90\uB9AD\uD130 \uC0DD\uC131\uD558\uAE30</h4>
          <p>AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uCE90\uB9AD\uD130\uB97C \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4.</p>
        </div>

        <div class="character-type-buttons">
          <button class="generate-btn primary" (click)="generateAiCharacter('\uC8FC\uC778\uACF5')" [disabled]="isGeneratingCharacter">
            <span *ngIf="!isGeneratingCharacter">\u{1F9B8} \uC8FC\uC778\uACF5 \uC0DD\uC131</span>
            <span *ngIf="isGeneratingCharacter">\u23F3 \uC0DD\uC131 \uC911...</span>
          </button>
          <button class="generate-btn" (click)="generateAiCharacter('\uBB34\uB9BC \uACE0\uC218')" [disabled]="isGeneratingCharacter">
            <span *ngIf="!isGeneratingCharacter">\u2694\uFE0F \uBB34\uB9BC \uACE0\uC218 \uC0DD\uC131</span>
            <span *ngIf="isGeneratingCharacter">\u23F3 \uC0DD\uC131 \uC911...</span>
          </button>
          <button class="generate-btn" (click)="generateAiCharacter('\uC801\uB300\uC790')" [disabled]="isGeneratingCharacter">
            <span *ngIf="!isGeneratingCharacter">\u{1F525} \uC801\uB300\uC790 \uC0DD\uC131</span>
            <span *ngIf="isGeneratingCharacter">\u23F3 \uC0DD\uC131 \uC911...</span>
          </button>
          <button class="generate-btn" (click)="generateAiCharacter('\uC870\uC5F0')" [disabled]="isGeneratingCharacter">
            <span *ngIf="!isGeneratingCharacter">\u{1F465} \uC870\uC5F0 \uC0DD\uC131</span>
            <span *ngIf="isGeneratingCharacter">\u23F3 \uC0DD\uC131 \uC911...</span>
          </button>
        </div>

        <!-- \uC5D0\uB7EC \uBA54\uC2DC\uC9C0 -->
        <div class="error-message" *ngIf="characterGenerationError">
          \u26A0\uFE0F {{characterGenerationError}}
        </div>

        <!-- \uC0DD\uC131\uB41C \uCE90\uB9AD\uD130 \uC815\uBCF4 -->
        <div class="generated-character-info" *ngIf="generatedCharacter">
          <h4>\u{1F389} \uCE90\uB9AD\uD130\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!</h4>
          
          <div class="character-details">
            <div class="detail-row">
              <span class="label">\uC774\uB984:</span>
              <span class="value">{{generatedCharacter.name}}</span>
            </div>
            <div class="detail-row">
              <span class="label">\uB098\uC774:</span>
              <span class="value">{{generatedCharacter.age}}\uC138</span>
            </div>
            <div class="detail-row">
              <span class="label">\uC131\uBCC4:</span>
              <span class="value">{{generatedCharacter.gender === 'male' ? '\uB0A8\uC131' : '\uC5EC\uC131'}}</span>
            </div>
            <div class="detail-row">
              <span class="label">\uC5ED\uD560:</span>
              <span class="value">{{generatedCharacter.role}}</span>
            </div>
          </div>

          <div class="character-description">
            <h5>\u{1F4D6} \uC678\uBAA8</h5>
            <p>{{generatedCharacter.appearance}}</p>
          </div>

          <div class="character-description">
            <h5>\u{1F4AD} \uC131\uACA9</h5>
            <p>{{generatedCharacter.personality}}</p>
          </div>

          <div class="character-description">
            <h5>\u{1F4DC} \uBC30\uACBD</h5>
            <p>{{generatedCharacter.background}}</p>
          </div>

          <div class="character-abilities" *ngIf="generatedCharacter.abilities">
            <h5>\u2694\uFE0F \uB2A5\uB825</h5>
            <div class="abilities-list">
              <span class="ability-tag" *ngFor="let ability of generatedCharacter.abilities">{{ability}}</span>
            </div>
          </div>

          <div class="character-description">
            <h5>\u{1F3AF} \uBAA9\uD45C</h5>
            <p>{{generatedCharacter.goals}}</p>
          </div>

          <div class="character-traits" *ngIf="generatedCharacter.traits">
            <h5>\u2B50 \uD2B9\uC131</h5>
            <div class="traits-list">
              <span class="trait-tag" *ngFor="let trait of generatedCharacter.traits">{{trait}}</span>
            </div>
          </div>

          <div class="action-buttons">
            <button class="save-btn" (click)="saveGeneratedCharacter()">
              \u{1F4BE} \uCE90\uB9AD\uD130 \uC800\uC7A5\uD558\uAE30
            </button>
            <button class="apply-btn" (click)="applyGeneratedCharacter()">
              \u2705 \uC774 \uCE90\uB9AD\uD130\uB85C \uD50C\uB808\uC774\uD558\uAE30
            </button>
            <button class="regenerate-btn" (click)="generateAiCharacter()">
              \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uD328\uB110 -->
  <div class="game-panel scenario-creator-panel" *ngIf="showScenarioCreatorPanel">
    <div class="panel-header">
      <h3>\u{1F3AC} AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131</h3>
      <button class="close-btn" (click)="novelState.closeScenarioCreator()">\xD7</button>
    </div>
    <div class="panel-content">
      <div class="scenario-creator-container">
        <div class="creator-intro">
          <h4>\u2728 Loworld AI\uB85C \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30</h4>
          <p>AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uC2DC\uB098\uB9AC\uC624\uB97C \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4.</p>
        </div>

        <div class="scenario-type-buttons">
          <button class="generate-btn primary" (click)="generateAiScenario('\uBB34\uD611', '\uC804\uD1B5\uC801\uC778', '\uAE34\uC7A5\uAC10 \uB118\uCE58\uB294')" [disabled]="isGeneratingScenario">
            <span *ngIf="!isGeneratingScenario">\u2694\uFE0F \uC804\uD1B5 \uBB34\uD611</span>
            <span *ngIf="isGeneratingScenario">\u23F3 \uC0DD\uC131 \uC911...</span>
          </button>
          <button class="generate-btn" (click)="generateAiScenario('\uD310\uD0C0\uC9C0', '\uD604\uB300\uC801\uC778', '\uC2E0\uBE44\uB85C\uC6B4')" [disabled]="isGeneratingScenario">
            <span *ngIf="!isGeneratingScenario">\u{1F31F} \uD604\uB300 \uD310\uD0C0\uC9C0</span>
            <span *ngIf="isGeneratingScenario">\u23F3 \uC0DD\uC131 \uC911...</span>
          </button>
          <button class="generate-btn" (click)="generateAiScenario('\uBB34\uD611', '\uC554\uD751', '\uC5B4\uB450\uC6B4')" [disabled]="isGeneratingScenario">
            <span *ngIf="!isGeneratingScenario">\u{1F311} \uC554\uD751 \uBB34\uD611</span>
            <span *ngIf="isGeneratingScenario">\u23F3 \uC0DD\uC131 \uC911...</span>
          </button>
          <button class="generate-btn" (click)="generateAiScenario('\uB85C\uB9E8\uC2A4', '\uAC10\uC131\uC801\uC778', '\uB2EC\uCF64\uD55C')" [disabled]="isGeneratingScenario">
            <span *ngIf="!isGeneratingScenario">\u{1F49D} \uB85C\uB9E8\uC2A4</span>
            <span *ngIf="isGeneratingScenario">\u23F3 \uC0DD\uC131 \uC911...</span>
          </button>
        </div>

        <!-- \uC5D0\uB7EC \uBA54\uC2DC\uC9C0 -->
        <div class="error-message" *ngIf="scenarioGenerationError">
          \u26A0\uFE0F {{scenarioGenerationError}}
        </div>

        <!-- \uC0DD\uC131\uB41C \uC2DC\uB098\uB9AC\uC624 \uC815\uBCF4 -->
        <div class="generated-scenario-info" *ngIf="generatedScenario">
          <h4>\u{1F389} \uC2DC\uB098\uB9AC\uC624\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!</h4>
          
          <div class="scenario-title">
            <h2>{{generatedScenario.title}}</h2>
          </div>

          <div class="scenario-description">
            <h5>\u{1F4D6} \uC124\uBA85</h5>
            <p>{{generatedScenario.description}}</p>
          </div>

          <div class="scenario-description">
            <h5>\u{1F4CD} \uBC30\uACBD</h5>
            <p>{{generatedScenario.setting}}</p>
          </div>

          <div class="scenario-characters" *ngIf="generatedScenario.characters">
            <h5>\u{1F465} \uB4F1\uC7A5\uC778\uBB3C</h5>
            <ul>
              <li *ngFor="let character of generatedScenario.characters">{{character}}</li>
            </ul>
          </div>

          <div class="scenario-description">
            <h5>\u2694\uFE0F \uAC08\uB4F1</h5>
            <p>{{generatedScenario.conflict}}</p>
          </div>

          <div class="scenario-description">
            <h5>\u{1F3AF} \uBAA9\uD45C</h5>
            <p>{{generatedScenario.goal}}</p>
          </div>

          <div class="scenario-description">
            <h5>\u{1F4AD} \uBD84\uC704\uAE30</h5>
            <p>{{generatedScenario.mood}}</p>
          </div>

          <div class="scenario-tags" *ngIf="generatedScenario.tags">
            <h5>\u{1F3F7}\uFE0F \uD0DC\uADF8</h5>
            <div class="tags-list">
              <span class="tag-item" *ngFor="let tag of generatedScenario.tags">{{tag}}</span>
            </div>
          </div>

          <div class="action-buttons">
            <button class="apply-btn" (click)="saveGeneratedScenario()">
              \u{1F4BE} \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5\uD558\uAE30
            </button>
            <button class="start-btn" (click)="startGameWithScenario()">
              \u{1F3AE} \uC774 \uC2DC\uB098\uB9AC\uC624\uB85C \uAC8C\uC784 \uC2DC\uC791
            </button>
            <button class="regenerate-btn" (click)="generateAiScenario()">
              \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- AI \uC544\uC774\uD15C \uC0DD\uC131 \uD328\uB110 -->
  <div class="game-panel item-creator-panel" *ngIf="showItemCreatorPanel">
    <div class="panel-header">
      <h3>\u{1F48E} AI \uC544\uC774\uD15C \uC0DD\uC131</h3>
      <button class="close-btn" (click)="novelState.closeItemCreator()">\xD7</button>
    </div>
    <div class="panel-content">
      <div class="item-creator-container">
        <div class="creator-intro">
          <h4>\u2728 Loworld AI\uB85C \uC544\uC774\uD15C \uC0DD\uC131\uD558\uAE30</h4>
          <p>AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uC544\uC774\uD15C\uC744 \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4.</p>
        </div>

        <div class="item-type-buttons">
          <button class="generate-btn random" (click)="generateAiItem()" [disabled]="isGeneratingItem">
            <span *ngIf="!isGeneratingItem">\u{1F3B2} \uB79C\uB364 10\uAC1C \uC0DD\uC131</span>
            <span *ngIf="isGeneratingItem">\u23F3 \uC0DD\uC131 \uC911...</span>
          </button>
          <button class="generate-btn weapon" (click)="generateAiItem('\uBB34\uAE30')" [disabled]="isGeneratingItem">
            <span *ngIf="!isGeneratingItem">\u2694\uFE0F \uBB34\uAE30 10\uAC1C</span>
            <span *ngIf="isGeneratingItem">\u23F3 \uC0DD\uC131 \uC911...</span>
          </button>
          <button class="generate-btn armor" (click)="generateAiItem('\uBC29\uC5B4\uAD6C')" [disabled]="isGeneratingItem">
            <span *ngIf="!isGeneratingItem">\u{1F6E1}\uFE0F \uBC29\uC5B4\uAD6C 10\uAC1C</span>
            <span *ngIf="isGeneratingItem">\u23F3 \uC0DD\uC131 \uC911...</span>
          </button>
          <button class="generate-btn consumable" (click)="generateAiItem('\uC18C\uBE44\uD488')" [disabled]="isGeneratingItem">
            <span *ngIf="!isGeneratingItem">\u{1F9EA} \uC18C\uBE44\uD488 10\uAC1C</span>
            <span *ngIf="isGeneratingItem">\u23F3 \uC0DD\uC131 \uC911...</span>
          </button>
        </div>

        <!-- \uC5D0\uB7EC \uBA54\uC2DC\uC9C0 -->
        <div class="error-message" *ngIf="itemGenerationError">
          \u26A0\uFE0F {{itemGenerationError}}
        </div>

        <!-- \uC0DD\uC131\uB41C \uC544\uC774\uD15C \uBAA9\uB85D -->
        <div class="generated-items-list" *ngIf="generatedItems.length > 0">
          <h4>\u{1F389} {{generatedItems.length}}\uAC1C\uC758 \uC544\uC774\uD15C\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!</h4>
          
          <div class="items-grid">
            <div class="item-card" *ngFor="let item of generatedItems; let i = index" 
                 [class.grade-common]="item.grade === '\uC77C\uBC18'"
                 [class.grade-uncommon]="item.grade === '\uACE0\uAE09'"
                 [class.grade-rare]="item.grade === '\uD76C\uADC0'"
                 [class.grade-epic]="item.grade === '\uC601\uC6C5'"
                 [class.grade-legendary]="item.grade === '\uC804\uC124' || item.grade === '\uC2E0\uD654'">
              
              <div class="item-card-header">
                <h5>{{item.name}}</h5>
                <span class="item-grade-badge" [class]="'grade-' + item.grade">{{item.grade}}</span>
              </div>
              
              <div class="item-card-type">
                \u{1F4E6} {{item.type}}
              </div>
              
              <div class="item-card-description">
                {{item.description}}
              </div>
              
              <div class="item-card-stats" *ngIf="item.stats">
                <span *ngIf="item.stats.attack" class="stat-mini">\u2694\uFE0F +{{item.stats.attack}}</span>
                <span *ngIf="item.stats.defense" class="stat-mini">\u{1F6E1}\uFE0F +{{item.stats.defense}}</span>
                <span *ngIf="item.stats.hp" class="stat-mini">\u2764\uFE0F +{{item.stats.hp}}</span>
                <span *ngIf="item.stats.mp" class="stat-mini">\u{1F499} +{{item.stats.mp}}</span>
              </div>
              
              <div class="item-card-actions">
                <button class="save-mini-btn" (click)="saveGeneratedItemByIndex(i)">
                  \u{1F4BE} \uC800\uC7A5
                </button>
              </div>
            </div>
          </div>

          <div class="bulk-actions">
            <button class="save-all-btn" (click)="saveAllGeneratedItems()">
              \u{1F4BE} \uBAA8\uB450 \uC800\uC7A5
            </button>
          </div>
        </div>

        <!-- \uAE30\uC874 \uB2E8\uC77C \uC544\uC774\uD15C \uC815\uBCF4 (\uD638\uD658\uC131 \uC720\uC9C0) -->
        <div class="generated-item-info" *ngIf="generatedItem && generatedItems.length === 0">
          <h4>\u{1F389} \uC544\uC774\uD15C\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!</h4>
          
          <div class="item-title" [class.grade-legendary]="generatedItem.grade === '\uC2E0\uD654' || generatedItem.grade === '\uC804\uC124'">
            <h2>{{generatedItem.name}}</h2>
            <div class="item-grade-badge" [class]="'grade-' + generatedItem.grade">
              {{generatedItem.grade}}
            </div>
          </div>

          <div class="item-type-info">
            <span class="type-badge">\u{1F4E6} {{generatedItem.type}}</span>
          </div>

          <div class="item-description">
            <h5>\u{1F4D6} \uC124\uBA85</h5>
            <p>{{generatedItem.description}}</p>
          </div>

          <div class="item-stats" *ngIf="generatedItem.stats">
            <h5>\u{1F4CA} \uB2A5\uB825\uCE58</h5>
            <div class="stats-grid">
              <div class="stat-item" *ngIf="generatedItem.stats.attack">
                <span class="stat-label">\u2694\uFE0F \uACF5\uACA9\uB825</span>
                <span class="stat-value">+{{generatedItem.stats.attack}}</span>
              </div>
              <div class="stat-item" *ngIf="generatedItem.stats.defense">
                <span class="stat-label">\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825</span>
                <span class="stat-value">+{{generatedItem.stats.defense}}</span>
              </div>
              <div class="stat-item" *ngIf="generatedItem.stats.hp">
                <span class="stat-label">\u2764\uFE0F HP</span>
                <span class="stat-value">+{{generatedItem.stats.hp}}</span>
              </div>
              <div class="stat-item" *ngIf="generatedItem.stats.mp">
                <span class="stat-label">\u{1F499} MP</span>
                <span class="stat-value">+{{generatedItem.stats.mp}}</span>
              </div>
            </div>
          </div>

          <div class="item-effects" *ngIf="generatedItem.effects && generatedItem.effects.length > 0">
            <h5>\u2728 \uD6A8\uACFC</h5>
            <ul>
              <li *ngFor="let effect of generatedItem.effects">{{effect}}</li>
            </ul>
          </div>

          <div class="item-requirements" *ngIf="generatedItem.requirements">
            <h5>\u26A0\uFE0F \uC0AC\uC6A9 \uC870\uAC74</h5>
            <p>{{generatedItem.requirements}}</p>
          </div>

          <div class="item-lore" *ngIf="generatedItem.lore">
            <h5>\u{1F4DC} \uC804\uC124</h5>
            <p class="lore-text">{{generatedItem.lore}}</p>
          </div>

          <div class="item-tags" *ngIf="generatedItem.tags && generatedItem.tags.length > 0">
            <h5>\u{1F3F7}\uFE0F \uD0DC\uADF8</h5>
            <div class="tags-list">
              <span class="tag-item" *ngFor="let tag of generatedItem.tags">{{tag}}</span>
            </div>
          </div>

          <div class="action-buttons">
            <button class="save-btn" (click)="saveGeneratedItem()">
              \u{1F4BE} \uC544\uC774\uD15C \uC800\uC7A5\uD558\uAE30
            </button>
            <button class="add-btn" (click)="addGeneratedItemToInventory()">
              \u{1F392} \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00
            </button>
            <button class="regenerate-btn" (click)="generateAiItem()">
              \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0 \uD328\uB110 (\uCD5C\uC0C1\uC704 \uB808\uBCA8) -->
<div class="story-flow-overlay" *ngIf="showStoryFlowPanel">
  <div class="story-flow-panel">
    <div class="flow-header">
      <div class="header-left">
        <h3>\u{1F5FA}\uFE0F \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0</h3>
      </div>
      <button class="close-btn" (click)="toggleStoryFlowPanel()">\u2715</button>
    </div>

    <div class="flow-info">
      <p>\uD604\uC7AC\uAE4C\uC9C0\uC758 \uC120\uD0DD\uACFC \uC55E\uC73C\uB85C\uC758 \uAC00\uB2A5\uD55C \uACBD\uB85C\uB97C \uBCF4\uC5EC\uC90D\uB2C8\uB2E4.</p>
      <div class="flow-stats">
        <span class="stat-item">\u{1F4CA} \uC9C4\uD589 \uB2E8\uACC4: {{storyBlocks.length}}</span>
        <span class="stat-item">\u{1F500} \uC120\uD0DD \uD69F\uC218: {{currentPath.length}}</span>
        <span class="stat-item">\u{1F3AF} \uD604\uC7AC \uC120\uD0DD\uC9C0: {{choices.length}}</span>
      </div>
    </div>

    <div class="flow-canvas">
      <div class="flow-nodes">
        <div 
          *ngFor="let node of storyFlowNodes; let i = index" 
          class="flow-node"
          [ngClass]="{
            'node-start': node.type === 'start',
            'node-story': node.type === 'story',
            'node-choice': node.type === 'choice',
            'node-current': node.type === 'current'
          }"
          [style.margin-left.px]="node.level * 40">
          
          <div class="node-icon">
            <span *ngIf="node.type === 'start'">\u{1F3AC}</span>
            <span *ngIf="node.type === 'story'">\u{1F4D6}</span>
            <span *ngIf="node.type === 'choice'">\u{1F500}</span>
            <span *ngIf="node.type === 'current'">\u{1F4CD}</span>
          </div>
          
          <div class="node-content">
            <div class="node-label">{{node.label}}</div>
            <div class="node-level">\uB808\uBCA8 {{node.level}}</div>
            
            <!-- \uD604\uC7AC \uB178\uB4DC\uC758 \uC120\uD0DD\uC9C0\uB4E4 -->
            <div class="node-choices" *ngIf="node.type === 'current' && node.choices">
              <div class="choice-preview" *ngFor="let choice of node.choices">
                \u2192 {{choice.substring(0, 30)}}{{choice.length > 30 ? '...' : ''}}
              </div>
            </div>
          </div>

          <!-- \uC5F0\uACB0\uC120 -->
          <div class="flow-connector" *ngIf="i < storyFlowNodes.length - 1"></div>
        </div>
      </div>

      <div class="flow-legend">
        <h4>\uBC94\uB840</h4>
        <div class="legend-items">
          <div class="legend-item"><span class="legend-icon start">\u{1F3AC}</span> \uC2DC\uC791</div>
          <div class="legend-item"><span class="legend-icon story">\u{1F4D6}</span> \uC2A4\uD1A0\uB9AC</div>
          <div class="legend-item"><span class="legend-icon choice">\u{1F500}</span> \uC120\uD0DD</div>
          <div class="legend-item"><span class="legend-icon current">\u{1F4CD}</span> \uD604\uC7AC \uC704\uCE58</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0 \uD328\uB110 -->
<div class="scenario-link-overlay" *ngIf="showScenarioLinkPanel">
  <div class="scenario-link-panel" cdkDrag cdkDragBoundary=".scenario-link-overlay">
    <div class="link-header" cdkDragHandle>
      <div class="header-left">
        <span class="drag-indicator">\u22EE\u22EE</span>
        <h3>\u{1F517} \uC120\uD0DD\uC9C0\uC5D0 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0</h3>
      </div>
      <button class="close-btn" (click)="closeScenarioLinkPanel()">\u2715</button>
    </div>

    <div class="link-info">
      <p>\uC120\uD0DD\uC9C0 <strong>#{{currentLinkingChoiceIndex + 1}}</strong>\uC5D0 \uC5F0\uACB0\uD560 \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uC138\uC694.</p>
      <p class="hint">\u{1F4A1} \uC120\uD0DD\uD558\uBA74 \uD574\uB2F9 \uC120\uD0DD\uC9C0\uB97C \uACE0\uB97C \uB54C \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC804\uAC1C\uB429\uB2C8\uB2E4.</p>
    </div>

    <div class="scenario-list">
      <div class="scenario-grid">
        <div 
          *ngFor="let scenario of savedScenarios" 
          class="scenario-card"
          (click)="linkScenarioToChoice(currentLinkingChoiceIndex, scenario.id)">
          
          <div class="scenario-header">
            <h4>{{scenario.title}}</h4>
            <span class="scenario-genre">{{scenario.genre}}</span>
          </div>
          
          <div class="scenario-body">
            <p class="scenario-description">{{scenario.description}}</p>
            
            <div class="scenario-meta">
              <span class="meta-item">\u{1F4CD} {{scenario.setting}}</span>
              <span class="meta-item">\u{1F3AD} {{scenario.mood}}</span>
            </div>
            
            <div class="scenario-tags" *ngIf="scenario.tags && scenario.tags.length > 0">
              <span class="tag" *ngFor="let tag of scenario.tags.slice(0, 3)">{{tag}}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="no-scenarios" *ngIf="savedScenarios.length === 0">
        <p>\uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.</p>
        <button class="create-scenario-btn" (click)="openScenarioCreator(); closeScenarioLinkPanel()">
          \u{1F3AC} \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30
        </button>
      </div>
    </div>
  </div>
</div>

<!-- \uD50C\uB85C\uC6B0 \uD328\uB110 (\uC6B0\uCE21 \uACE0\uC815) -->
<div class="flow-side-panel" 
     *ngIf="gameStarted && storyNodes.length > 0 && isFlowPanelOpen"
     [@slideInOut]>
  <div class="panel-container">
    <!-- \uD5E4\uB354 -->
    <div class="panel-header">
      <div class="status-bar">
        <span class="time">{{getCurrentTime()}}</span>
        <span class="progress">{{calculateExplorationRate()}}%</span>
      </div>
      <div class="title-bar">
        <h3>
          {{flowPanelTab === 'character' ? '\u{1F3AD} \uCE90\uB9AD\uD130 \uC815\uBCF4' : 
            flowPanelTab === 'organization' ? '\u{1F3DB}\uFE0F \uC870\uC9C1 \uC815\uBCF4' : 
            '\u{1F5FA}\uFE0F \uC2A4\uD1A0\uB9AC \uB9F5'}}
        </h3>
        <div class="header-actions">
          <button class="expand-btn" (click)="toggleAdvancedFlowPanel()" title="\uC804\uCCB4\uD654\uBA74" *ngIf="flowPanelTab === 'map'">
            \u26F6
          </button>
          <button class="close-btn" (click)="toggleFlowPanel()" title="\uB2EB\uAE30">
            \u2715
          </button>
        </div>
      </div>
    </div>
    
    <!-- \uCEE8\uD150\uCE20 \uC2AC\uB77C\uC774\uB354 -->
    <div class="panel-content-slider" [attr.data-tab]="flowPanelTab">
      <!-- \uCE90\uB9AD\uD130 \uC815\uBCF4 \uD0ED -->
      <div class="tab-content character-tab">
        <div class="character-info-card">
          <div class="character-header">
            <div class="character-avatar">
              <span class="avatar-icon">\u{1F3AD}</span>
            </div>
            <div class="character-basic">
              <div class="character-name">{{playerCharacter.name || '\uBAA8\uD5D8\uAC00'}}</div>
              <div class="character-level">Lv.{{playerCharacter.level || 1}}</div>
            </div>
          </div>
          
          <div class="character-stats">
            <!-- HP \uBC14 -->
            <div class="stat-row">
              <div class="stat-label">
                <span class="stat-icon hp">\u2764\uFE0F</span>
                <span class="stat-name">HP</span>
              </div>
              <div class="stat-bar-container">
                <div class="stat-bar hp">
                  <div class="stat-bar-fill" 
                       [style.width.%]="playerCharacter.hp && playerCharacter.maxHp ? (playerCharacter.hp / playerCharacter.maxHp * 100) : 100"></div>
                </div>
                <span class="stat-value">{{playerCharacter.hp || 100}}/{{playerCharacter.maxHp || 100}}</span>
              </div>
            </div>
            
            <!-- MP \uBC14 -->
            <div class="stat-row">
              <div class="stat-label">
                <span class="stat-icon mp">\u{1F499}</span>
                <span class="stat-name">MP</span>
              </div>
              <div class="stat-bar-container">
                <div class="stat-bar mp">
                  <div class="stat-bar-fill" 
                       [style.width.%]="playerCharacter.mp && playerCharacter.maxMp ? (playerCharacter.mp / playerCharacter.maxMp * 100) : 100"></div>
                </div>
                <span class="stat-value">{{playerCharacter.mp || 50}}/{{playerCharacter.maxMp || 50}}</span>
              </div>
            </div>
            
            <!-- \uACE8\uB4DC & \uD654\uB825 -->
            <div class="stat-row inline">
              <div class="inline-stat">
                <span class="stat-icon">\u{1F4B0}</span>
                <span class="stat-value">{{gold || 100}}G</span>
              </div>
              <div class="inline-stat">
                <span class="stat-icon">\u{1F525}</span>
                <span class="stat-value">{{playerInternalPower.current || 100}}/{{playerInternalPower.max || 100}}</span>
              </div>
            </div>
            
            <!-- \uCD08\uB958 -->
            <div class="stat-row special">
              <div class="stat-label">
                <span class="stat-icon">\u2B50</span>
                <span class="stat-name">\uCD08\uB958</span>
              </div>
              <div class="cultivation-badge">{{playerInternalPower.realm || '\uCD08\uB958'}}</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- \uC2A4\uD1A0\uB9AC \uB9F5 \uD0ED -->
      <div class="tab-content map-tab">
        <!-- \uD604\uC7AC \uC704\uCE58 \uC694\uC57D -->
    <div class="current-status" *ngIf="getCurrentNode()">
      <div class="status-icon">{{getNodeIcon(getCurrentNode()!)}}</div>
      <div class="status-info">
        <div class="status-title">{{getCurrentNode()!.title}}</div>
        <div class="status-path">\uACBD\uB85C: {{storyProgress.visitedNodes.length}}/{{storyNodes.length}}</div>
      </div>
    </div>
    
    <!-- \uBBF8\uB2C8 \uD50C\uB85C\uC6B0 \uB9F5 -->
    <div class="mini-flow-map">
      <svg [attr.viewBox]="flowViewBox" width="100%" height="100%" preserveAspectRatio="xMidYMid meet">
        <!-- \uC5F0\uACB0\uC120 -->
        <g class="mini-connections">
          <path *ngFor="let conn of storyConnections"
                [attr.d]="conn.path"
                [attr.stroke]="conn.color"
                [attr.stroke-width]="conn.width * 0.5"
                fill="none"
                opacity="0.6">
          </path>
        </g>
        
        <!-- \uB178\uB4DC -->
        <g class="mini-nodes">
          <g *ngFor="let node of visibleNodes"
             [attr.transform]="'translate(' + node.position.x + ',' + node.position.y + ')'">
            <circle r="20"
                    [attr.fill]="getNodeColor(node)"
                    [attr.stroke]="getNodeBorderColor(node)"
                    [attr.stroke-width]="node.isCurrent ? 3 : 1.5"
                    [class.pulse]="node.isCurrent">
            </circle>
            <text text-anchor="middle" dy="7" font-size="16">
              {{getNodeIcon(node)}}
            </text>
          </g>
        </g>
      </svg>
    </div>
    
    <!-- \uD035 \uD1B5\uACC4 -->
    <div class="quick-stats">
      <div class="stat-item">
        <span class="stat-icon">\u{1F4CD}</span>
        <span class="stat-text">{{storyProgress.visitedNodes.length}}</span>
      </div>
      <div class="stat-item">
        <span class="stat-icon">\u{1F500}</span>
        <span class="stat-text">{{storyProgress.totalChoices}}</span>
      </div>
      <div class="stat-item">
        <span class="stat-icon">\u2694\uFE0F</span>
        <span class="stat-text">{{storyProgress.battlesWon}}/{{storyProgress.battlesWon + storyProgress.battlesLost}}</span>
      </div>
    </div>
    
    <!-- \uCD5C\uADFC \uACBD\uB85C -->
    <div class="recent-path" *ngIf="storyProgress.pathHistory.length > 0">
      <div class="recent-title">\uCD5C\uADFC \uACBD\uB85C</div>
      <div class="path-dots">
        <span *ngFor="let step of storyProgress.pathHistory.slice(-8)"
              class="path-dot"
              [class.current]="step.nodeId === currentStoryNodeId"
              [title]="getNodeById(step.nodeId)?.title || '\uC54C \uC218 \uC5C6\uC74C'">
          {{getNodeIcon(getNodeById(step.nodeId) || storyNodes[0])}}
        </span>
      </div>
    </div>
      </div>
      
      <!-- \uC870\uC9C1 \uD0ED -->
      <div class="tab-content organization-tab">
        <div class="organization-container" *ngIf="playerOrganization">
          <!-- \uC870\uC9C1 \uC815\uBCF4 \uD5E4\uB354 -->
          <div class="organization-header">
            <div class="org-name-section">
              <h3 class="org-name">{{playerOrganization.name}}</h3>
              <span class="org-level">Lv.{{playerOrganization.level}}</span>
            </div>
            <div class="org-stats">
              <div class="org-stat">
                <span class="stat-label">\uC778\uC6D0</span>
                <span class="stat-value">{{playerOrganization.members.length}}/{{playerOrganization.maxMembers}}</span>
              </div>
              <div class="org-stat">
                <span class="stat-label">\uBA85\uC131</span>
                <span class="stat-value">{{playerOrganization.reputation}}</span>
              </div>
            </div>
          </div>
          
          <!-- \uC870\uC9C1\uC6D0 \uBAA9\uB85D -->
          <div class="members-list">
            <div class="member-card" 
                 *ngFor="let member of playerOrganization.members"
                 [class.selected]="selectedMember?.id === member.id"
                 (click)="selectMember(member)">
              <!-- \uBA64\uBC84 \uD5E4\uB354 -->
              <div class="member-header">
                <div class="member-avatar">{{member.avatar || '\u{1F464}'}}</div>
                <div class="member-basic">
                  <div class="member-name-row">
                    <span class="member-name">{{member.name}}</span>
                    <span class="member-role" [attr.data-role]="member.role">
                      {{getRoleName(member.role)}}
                    </span>
                  </div>
                  <div class="member-level">Lv.{{member.level}} | {{member.specialty}}</div>
                </div>
                <div class="member-status" [attr.data-status]="member.status">
                  {{getStatusName(member.status)}}
                </div>
              </div>
              
              <!-- \uBA64\uBC84 \uC2A4\uD0EF \uBC14 -->
              <div class="member-stats-bars">
                <div class="stat-bar-row">
                  <span class="bar-label">HP</span>
                  <div class="mini-stat-bar hp">
                    <div class="mini-bar-fill" 
                         [style.width.%]="(member.stats.hp / member.stats.maxHp * 100)"></div>
                  </div>
                  <span class="bar-value">{{member.stats.hp}}/{{member.stats.maxHp}}</span>
                </div>
                <div class="stat-bar-row" *ngIf="member.internalPower">
                  <span class="bar-label">\uB0B4\uACF5</span>
                  <div class="mini-stat-bar mp">
                    <div class="mini-bar-fill" 
                         [style.width.%]="(member.internalPower.current / member.internalPower.max * 100)"></div>
                  </div>
                  <span class="bar-value">{{member.internalPower.current}}/{{member.internalPower.max}}</span>
                </div>
              </div>
              
              <!-- \uBA64\uBC84 \uD2B9\uC131 -->
              <div class="member-details">
                <div class="detail-row">
                  <span class="detail-icon">\u2694\uFE0F</span>
                  <span class="detail-text">\uACF5\uACA9 {{member.stats.attack}} | \uBC29\uC5B4 {{member.stats.defense}}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-icon">\u{1F496}</span>
                  <span class="detail-text">\uCDA9\uC131\uB3C4: {{member.loyalty}}%</span>
                  <div class="loyalty-bar">
                    <div class="loyalty-fill" [style.width.%]="member.loyalty"></div>
                  </div>
                </div>
                <div class="detail-row" *ngIf="member.internalPower">
                  <span class="detail-icon">\u2B50</span>
                  <span class="detail-text">{{member.internalPower.realm}}</span>
                </div>
              </div>
              
              <!-- \uC2A4\uD0AC \uBAA9\uB85D -->
              <div class="member-skills" *ngIf="member.skills && member.skills.length > 0">
                <span class="skill-tag" *ngFor="let skill of member.skills.slice(0, 3)">
                  {{skill}}
                </span>
              </div>
              
              <!-- \uC124\uBA85 -->
              <div class="member-description" *ngIf="member.description">
                <p>{{member.description}}</p>
              </div>
            </div>
            
            <!-- \uC870\uC9C1\uC6D0 \uC5C6\uC744 \uB54C -->
            <div class="no-members" *ngIf="playerOrganization.members.length === 0">
              <p>\uC544\uC9C1 \uC870\uC9C1\uC6D0\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.</p>
              <p>\uBAA8\uD5D8\uC744 \uD1B5\uD574 \uB3D9\uB8CC\uB97C \uBAA8\uC9D1\uD558\uC138\uC694!</p>
            </div>
          </div>
        </div>
        
        <!-- \uC870\uC9C1\uC774 \uC5C6\uC744 \uB54C -->
        <div class="no-organization" *ngIf="!playerOrganization">
          <p>\uC544\uC9C1 \uC870\uC9C1\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.</p>
          <p>\uAC8C\uC784\uC744 \uC2DC\uC791\uD558\uBA74 \uC870\uC9C1\uC774 \uC0DD\uC131\uB429\uB2C8\uB2E4.</p>
        </div>
      </div>
    </div>
    
    <!-- \uD558\uB2E8 \uD0ED \uB124\uBE44\uAC8C\uC774\uC158 -->
    <div class="tab-navigation bottom">
      <button class="tab-btn" 
              [class.active]="flowPanelTab === 'character'"
              (click)="switchFlowTab('character')">
        <span class="tab-icon">\u{1F3AD}</span>
        <span class="tab-label">\uCE90\uB9AD\uD130</span>
      </button>
      <button class="tab-btn" 
              [class.active]="flowPanelTab === 'organization'"
              (click)="switchFlowTab('organization')">
        <span class="tab-icon">\u{1F3DB}\uFE0F</span>
        <span class="tab-label">\uC870\uC9C1</span>
      </button>
      <button class="tab-btn" 
              [class.active]="flowPanelTab === 'map'"
              (click)="switchFlowTab('map')">
        <span class="tab-icon">\u{1F5FA}\uFE0F</span>
        <span class="tab-label">\uC2A4\uD1A0\uB9AC</span>
      </button>
    </div>
  </div>
</div>

<!-- \uD50C\uB85C\uC6B0 \uD328\uB110 \uD1A0\uAE00 \uBC84\uD2BC (\uD328\uB110\uC774 \uB2EB\uD614\uC744 \uB54C \uD45C\uC2DC) -->
<button class="flow-panel-toggle-btn" 
        *ngIf="gameStarted && storyNodes.length > 0 && !isFlowPanelOpen"
        (click)="toggleFlowPanel()"
        title="\uC2A4\uD1A0\uB9AC \uB9F5 \uC5F4\uAE30">
  <span class="toggle-icon">\u{1F5FA}\uFE0F</span>
  <span class="toggle-text">\uB9F5</span>
</button>

<!-- \uACE0\uAE09 \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0 \uC2DC\uAC01\uD654 \uD328\uB110 (\uC804\uCCB4\uD654\uBA74 \uBAA8\uB4DC) -->
<div class="advanced-story-flow-overlay" *ngIf="showAdvancedFlowPanel">
  <div class="advanced-flow-panel">
    <!-- \uD5E4\uB354 -->
    <div class="advanced-flow-header">
      <div class="header-left">
        <h2>\u{1F5FA}\uFE0F \uBE44\uC120\uD615 \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0</h2>
        <span class="subtitle">\uC120\uD0DD\uACFC \uC804\uD22C\uAC00 \uB9CC\uB4DC\uB294 \uB2F9\uC2E0\uB9CC\uC758 \uC5EC\uC815</span>
      </div>
      <button class="close-btn" (click)="toggleAdvancedFlowPanel()">
        \u2715
      </button>
    </div>

    <!-- \uD234\uBC14 -->
    <div class="flow-toolbar" *ngIf="storyNodes.length > 0">
      <div class="toolbar-section">
        <button class="tool-btn" (click)="zoomIn()" title="\uD655\uB300">
          \u{1F50D}+ \uD655\uB300
        </button>
        <button class="tool-btn" (click)="zoomOut()" title="\uCD95\uC18C">
          \u{1F50D}\u2212 \uCD95\uC18C
        </button>
        <button class="tool-btn" (click)="centerView()" title="\uC911\uC559\uC73C\uB85C">
          \u{1F3AF} \uC911\uC559
        </button>
        <button class="tool-btn" (click)="fitToScreen()" title="\uD654\uBA74\uC5D0 \uB9DE\uCD94\uAE30">
          \u{1F4D0} \uC804\uCCB4
        </button>
      </div>

      <div class="toolbar-section">
        <button class="filter-btn" [class.active]="showVisitedOnly" 
                (click)="toggleFilter('visited')" title="\uBC29\uBB38\uD55C \uACBD\uB85C\uB9CC \uD45C\uC2DC">
          \u2705 \uBC29\uBB38 \uACBD\uB85C
        </button>
        <button class="filter-btn" [class.active]="showBattlesOnly" 
                (click)="toggleFilter('battles')" title="\uC804\uD22C \uB178\uB4DC\uB9CC \uD45C\uC2DC">
          \u2694\uFE0F \uC804\uD22C
        </button>
        <button class="filter-btn" [class.active]="showEndingsOnly" 
                (click)="toggleFilter('endings')" title="\uC5D4\uB529 \uB178\uB4DC\uB9CC \uD45C\uC2DC">
          \u{1F3C1} \uC5D4\uB529
        </button>
      </div>

      <div class="toolbar-section">
        <select class="layout-selector" [(ngModel)]="flowLayoutType" 
                (change)="changeLayout(flowLayoutType)">
          <option value="hierarchical">\uACC4\uCE35\uD615</option>
          <option value="radial">\uBC29\uC0AC\uD615</option>
          <option value="force">\uC790\uC720\uD615</option>
        </select>
      </div>

      <div class="toolbar-section">
        <button class="tool-btn" [class.active]="showStats" 
                (click)="toggleStats()" title="\uD1B5\uACC4 \uD45C\uC2DC/\uC228\uAE30\uAE30">
          \u{1F4CA} \uD1B5\uACC4
        </button>
      </div>
      
      <div class="toolbar-section toolbar-hint">
        <span class="hint-text">\u{1F4A1} \uB4DC\uB798\uADF8\uB85C \uB178\uB4DC \uC774\uB3D9</span>
      </div>
    </div>

    <!-- \uCE94\uBC84\uC2A4 \uC601\uC5ED -->
    <div class="flow-canvas-container" *ngIf="storyNodes.length > 0"
         (mousedown)="onCanvasMouseDown($event)"
         (mousemove)="onCanvasMouseMove($event)"
         (mouseup)="onCanvasMouseUp()"
         (mouseleave)="onCanvasMouseUp()"
         (wheel)="onCanvasWheel($event)">
      
      <!-- SVG \uCE94\uBC84\uC2A4 -->
      <svg class="flow-svg-canvas" 
           [attr.width]="'100%'"
           [attr.height]="'100%'">
        
        <!-- \uC815\uC758 (\uD654\uC0B4\uD45C \uB9C8\uCEE4 \uB4F1) -->
        <defs>
          <marker id="arrowhead" markerWidth="10" markerHeight="10" 
                  refX="9" refY="3" orient="auto">
            <polygon points="0 0, 10 3, 0 6" fill="#cbd5e0"/>
          </marker>
          <marker id="arrowhead-visited" markerWidth="10" markerHeight="10" 
                  refX="9" refY="3" orient="auto">
            <polygon points="0 0, 10 3, 0 6" fill="#48bb78"/>
          </marker>
          <marker id="arrowhead-current" markerWidth="10" markerHeight="10" 
                  refX="9" refY="3" orient="auto">
            <polygon points="0 0, 10 3, 0 6" fill="#4299e1"/>
          </marker>
          <marker id="arrowhead-battle" markerWidth="10" markerHeight="10" 
                  refX="9" refY="3" orient="auto">
            <polygon points="0 0, 10 3, 0 6" fill="#fc8181"/>
          </marker>
          
          <!-- \uADF8\uB9AC\uB4DC \uD328\uD134 -->
          <pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse">
            <path d="M 50 0 L 0 0 0 50" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="1"/>
          </pattern>
        </defs>

        <!-- \uC804\uCCB4 \uBCC0\uD658 \uADF8\uB8F9 (\uD328\uB2DD & \uC90C) -->
        <g [attr.transform]="getCanvasTransform()">
          <!-- \uADF8\uB9AC\uB4DC \uBC30\uACBD -->
          <rect x="-5000" y="-5000" width="10000" height="10000" fill="url(#grid)"/>
          
          <!-- \uC5F0\uACB0\uC120 \uB808\uC774\uC5B4 -->
          <g class="connections-layer">
            <path *ngFor="let conn of storyConnections"
                  [attr.d]="conn.path"
                  class="connection-path"
                  [class.visited]="conn.isVisited"
                  [class.current]="conn.isCurrent"
                  [attr.stroke]="conn.color"
                  [attr.stroke-width]="conn.width"
                  [attr.marker-end]="conn.isVisited ? 'url(#arrowhead-visited)' : 'url(#arrowhead)'">
            </path>
          </g>

          <!-- \uB178\uB4DC \uB808\uC774\uC5B4 -->
          <g class="nodes-layer">
            <g *ngFor="let node of visibleNodes"
               class="story-node"
               [class.current]="node.isCurrent"
               [class.visited]="node.isVisited"
               [class.available]="node.isAvailable"
               [class.selected]="selectedNode?.id === node.id"
               [class.dragging]="draggingNode?.id === node.id"
               [class.battle]="node.type === 'battle'"
               [class.ending]="node.type === 'ending'"
               [class.event]="node.type === 'event'"
               [attr.transform]="'translate(' + node.position.x + ',' + node.position.y + ')'"
               (mousedown)="onNodeMouseDown(node, $event)"
               (click)="onNodeClick(node, $event)">
              
              <!-- \uC120\uD0DD \uD6A8\uACFC -->
              <circle *ngIf="selectedNode?.id === node.id" r="55" 
                      fill="none"
                      stroke="#fbbf24"
                      stroke-width="3"
                      opacity="0.8"
                      class="node-selection-ring">
                <animate attributeName="r" values="55;60;55" dur="2s" repeatCount="indefinite"/>
              </circle>
              
              <!-- \uB178\uB4DC \uBC30\uACBD \uC6D0 -->
              <circle r="40" 
                      [attr.fill]="getNodeColor(node)"
                      [attr.stroke]="getNodeBorderColor(node)"
                      stroke-width="3"
                      class="node-circle">
              </circle>

              <!-- \uD604\uC7AC \uB178\uB4DC \uC678\uACFD \uBE5B \uD6A8\uACFC -->
              <circle *ngIf="node.isCurrent" r="50" 
                      [attr.stroke]="getNodeBorderColor(node)"
                      stroke-width="2"
                      fill="none"
                      opacity="0.5"
                      class="node-glow">
              </circle>

              <!-- \uB178\uB4DC \uC544\uC774\uCF58 -->
              <text class="node-icon" 
                    text-anchor="middle" 
                    dy="10"
                    font-size="28">
                {{getNodeIcon(node)}}
              </text>

              <!-- \uB178\uB4DC \uC81C\uBAA9 -->
              <text class="node-title" 
                    y="60" 
                    text-anchor="middle"
                    font-size="14"
                    font-weight="600">
                {{node.title.length > 12 ? (node.title.substring(0, 12) + '...') : node.title}}
              </text>

              <!-- \uBC30\uC9C0 (\uBC29\uBB38 \uD69F\uC218, \uD2B9\uBCC4 \uB9C8\uD06C \uB4F1) -->
              <g *ngIf="node.badge" transform="translate(25, -25)">
                <circle r="15" fill="#e53e3e"></circle>
                <text class="badge-text" 
                      text-anchor="middle" 
                      dy="5"
                      font-size="16">
                  {{node.badge}}
                </text>
              </g>

              <!-- \uBC29\uBB38 \uD69F\uC218 \uD45C\uC2DC -->
              <g *ngIf="node.visitCount && node.visitCount > 1" transform="translate(-25, -25)">
                <circle r="12" fill="#4299e1"></circle>
                <text class="visit-count" 
                      text-anchor="middle" 
                      dy="4"
                      font-size="10"
                      fill="white">
                  {{node.visitCount}}
                </text>
              </g>
            </g>
          </g>
        </g>
      </svg>

      <!-- \uC90C \uCEE8\uD2B8\uB864 -->
      <div class="zoom-controls">
        <button class="zoom-btn" (click)="zoomIn()" title="\uD655\uB300 (Ctrl + Scroll Up)">
          <span>\u{1F50D}+</span>
        </button>
        <div class="zoom-level">{{(flowZoomLevel * 100).toFixed(0)}}%</div>
        <button class="zoom-btn" (click)="zoomOut()" title="\uCD95\uC18C (Ctrl + Scroll Down)">
          <span>\u{1F50D}-</span>
        </button>
        <button class="zoom-btn" (click)="resetZoom()" title="\uCD08\uAE30\uD654 (\uB354\uBE14\uD074\uB9AD)">
          <span>\u27F2</span>
        </button>
        <button class="zoom-btn" (click)="focusOnCurrentNode()" title="\uD604\uC7AC \uB178\uB4DC\uB85C \uC774\uB3D9">
          <span>\u{1F4CD}</span>
        </button>
      </div>

      <!-- \uBC94\uB840 (\uCEF4\uD329\uD2B8 \uBC84\uC804) -->
      <div class="legend-compact">
        <div class="legend-item"><span class="icon">\u{1F3AC}</span> \uC2DC\uC791</div>
        <div class="legend-item"><span class="icon">\u{1F4D6}</span> \uC2A4\uD1A0\uB9AC</div>
        <div class="legend-item"><span class="icon">\u2694\uFE0F</span> \uC804\uD22C</div>
        <div class="legend-item"><span class="icon">\u2728</span> \uC774\uBCA4\uD2B8</div>
        <div class="legend-item"><span class="icon">\u{1F3C1}</span> \uC5D4\uB529</div>
      </div>
    </div>

    <!-- \uB178\uB4DC \uC0C1\uC138 \uC815\uBCF4 \uD328\uB110 -->
    <div class="node-detail-panel" *ngIf="selectedNode">
      <div class="detail-header">
        <h3>{{selectedNode.title}}</h3>
        <button class="detail-close-btn" (click)="selectedNode = null">\u2715</button>
      </div>

      <div class="detail-body">
        <div class="detail-type">
          <span class="type-badge" [class.battle]="selectedNode.type === 'battle'"
                [class.ending]="selectedNode.type === 'ending'"
                [class.event]="selectedNode.type === 'event'">
            {{getNodeIcon(selectedNode)}} {{selectedNode.type}}
          </span>
        </div>

        <div class="detail-content" *ngIf="selectedNode.content && selectedNode.content.length > 0">
          <h4>\u{1F4D6} \uB0B4\uC6A9 \uBBF8\uB9AC\uBCF4\uAE30</h4>
          <p *ngFor="let line of selectedNode.content.slice(0, 3)">{{line}}</p>
          <p *ngIf="selectedNode.content.length > 3" class="more-indicator">... \uB354\uBCF4\uAE30</p>
        </div>

        <div class="detail-stats" *ngIf="selectedNode.isVisited">
          <h4>\u{1F4CA} \uD1B5\uACC4</h4>
          <div class="stat-row">
            <span class="stat-label">\uBC29\uBB38 \uD69F\uC218:</span>
            <span class="stat-value">{{selectedNode.visitCount || 1}}</span>
          </div>
        </div>

        <div class="detail-conditions" *ngIf="selectedNode.conditions && selectedNode.conditions.length > 0">
          <h4>\u{1F512} \uC9C4\uC785 \uC870\uAC74</h4>
          <ul>
            <li *ngFor="let cond of selectedNode.conditions">
              {{cond.description || cond.type}}
            </li>
          </ul>
        </div>

        <div class="detail-choices" *ngIf="selectedNode.choices && selectedNode.choices.length > 0">
          <h4>\u{1F500} \uC120\uD0DD\uC9C0 ({{selectedNode.choices.length}}\uAC1C)</h4>
          <div *ngFor="let choice of selectedNode.choices" class="choice-preview">
            <span class="choice-icon">{{choice.icon || '\u25B6\uFE0F'}}</span>
            <span class="choice-text">{{choice.text}}</span>
          </div>
        </div>

        <div class="detail-battle" *ngIf="selectedNode.type === 'battle' && selectedNode.battleConfig">
          <h4>\u2694\uFE0F \uC804\uD22C \uC815\uBCF4</h4>
          <p><strong>\uC801:</strong> {{selectedNode.battleConfig.enemyName}}</p>
          <p><strong>\uB09C\uC774\uB3C4:</strong> {{'\u2B50'.repeat(selectedNode.battleConfig.difficulty)}}</p>
        </div>
      </div>
    </div>

    <!-- \uD1B5\uACC4 \uD328\uB110 -->
    <div class="stats-overlay" *ngIf="showStats && storyNodes.length > 0">
      <h3>\u{1F4CA} \uC9C4\uD589 \uD1B5\uACC4</h3>
      
      <!-- \uD604\uC7AC \uC704\uCE58 \uD45C\uC2DC -->
      <div class="current-location" *ngIf="getCurrentNode()">
        <h4>\u{1F4CD} \uD604\uC7AC \uC704\uCE58</h4>
        <div class="location-card">
          <div class="location-icon">{{getNodeIcon(getCurrentNode()!)}}</div>
          <div class="location-info">
            <div class="location-title">{{getCurrentNode()!.title}}</div>
            <div class="location-path">\uACBD\uB85C: {{currentPath.join(' \u2192 ') || '\uC2DC\uC791'}}</div>
          </div>
        </div>
      </div>
      
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">\u{1F4CD}</div>
          <div class="stat-value">{{storyProgress.visitedNodes.length}}/{{storyNodes.length}}</div>
          <div class="stat-label">\uBC29\uBB38\uD55C \uB178\uB4DC</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">\u{1F500}</div>
          <div class="stat-value">{{storyProgress.totalChoices}}</div>
          <div class="stat-label">\uC120\uD0DD \uD69F\uC218</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">\u2694\uFE0F</div>
          <div class="stat-value">
            {{storyProgress.battlesWon}}/{{storyProgress.battlesWon + storyProgress.battlesLost}}
          </div>
          <div class="stat-label">\uC804\uD22C \uC2B9\uB960</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">\u{1F5FA}\uFE0F</div>
          <div class="stat-value">{{calculateExplorationRate()}}%</div>
          <div class="stat-label">\uD0D0\uD5D8\uB960</div>
        </div>
      </div>
      
      <!-- \uCD5C\uADFC \uACBD\uB85C \uC774\uB825 -->
      <div class="path-history" *ngIf="storyProgress.pathHistory.length > 0">
        <h4>\u{1F6E4}\uFE0F \uCD5C\uADFC \uACBD\uB85C</h4>
        <div class="history-list">
          <div *ngFor="let step of storyProgress.pathHistory.slice(-5).reverse()" class="history-item">
            <ng-container *ngIf="getNodeById(step.nodeId) as node">
              <span class="history-icon">{{getNodeIcon(node)}}</span>
              <span class="history-node">{{node.title}}</span>
              <span class="history-choice" *ngIf="step.choiceText">\u2192 {{step.choiceText}}</span>
            </ng-container>
          </div>
        </div>
      </div>
    </div>

    <!-- \uBE48 \uC0C1\uD0DC -->
    <div class="empty-state" *ngIf="storyNodes.length === 0">
      <div class="empty-icon">\u{1F5FA}\uFE0F</div>
      <h3>\uC2A4\uD1A0\uB9AC \uB9F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4</h3>
      <p>\uC0D8\uD50C \uC2A4\uD1A0\uB9AC\uB97C \uB85C\uB4DC\uD558\uAC70\uB098 AI\uB85C \uC0C8\uB85C\uC6B4 \uC2A4\uD1A0\uB9AC\uB97C \uC0DD\uC131\uD558\uC138\uC694.</p>
      <div class="empty-actions">
        <button class="primary-btn" (click)="loadSampleStoryMap()">
          \u{1F4E5} \uC0D8\uD50C \uC2A4\uD1A0\uB9AC \uB85C\uB4DC
        </button>
        <button class="secondary-btn" (click)="toggleStoryCreatorPanel()">
          \u2728 AI \uC2A4\uD1A0\uB9AC \uC0DD\uC131
        </button>
      </div>
    </div>
  </div>
</div>

<!-- \uFFFD \uC5EC\uAE30\uAC00 novel-book-container\uC758 \uB05D\uC785\uB2C8\uB2E4 -->

<!-- \uD50C\uB85C\uC6B0 \uAE30\uBC18 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0 \uD328\uB110 -->
<div class="flow-scenario-link-overlay" *ngIf="showFlowScenarioLinkPanel">
  <div class="flow-scenario-link-panel" cdkDrag cdkDragBoundary=".flow-scenario-link-overlay">
    <div class="link-header" cdkDragHandle>
      <div class="header-left">
        <span class="drag-indicator">\u22EE\u22EE</span>
        <h3>\u{1F3AC} \uD50C\uB85C\uC6B0 \uB178\uB4DC\uC5D0 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0</h3>
      </div>
      <button class="close-btn" (click)="closeFlowScenarioLinkPanel()">\u2715</button>
    </div>

    <div class="link-info">
      <div class="node-info-card" *ngIf="getNodeById(currentLinkingNodeId) as node">
        <div class="node-icon-large">{{getNodeIcon(node)}}</div>
        <div class="node-details">
          <h4>{{node.title}}</h4>
          <p class="node-type-badge">{{node.type}}</p>
        </div>
      </div>
      <div class="choice-info" *ngIf="currentLinkingChoiceId">
        <span class="choice-label">\uC120\uD0DD\uC9C0 ID:</span>
        <span class="choice-value">{{currentLinkingChoiceId}}</span>
      </div>
      <p class="hint">\u{1F4A1} \uC774 \uC120\uD0DD\uC9C0\uC5D0 \uC5F0\uACB0\uD560 \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uC138\uC694.</p>
    </div>

    <div class="scenario-list">
      <div class="scenario-grid">
        <div 
          *ngFor="let scenario of savedScenarios" 
          class="scenario-card"
          [class.linked]="getLinkedScenarioId(currentLinkingNodeId, currentLinkingChoiceId) === scenario.id"
          (click)="linkScenarioToFlowNode(scenario.id)">
          
          <div class="scenario-header">
            <h4>{{scenario.title}}</h4>
            <span class="scenario-genre">{{scenario.genre}}</span>
            <span class="linked-badge" *ngIf="getLinkedScenarioId(currentLinkingNodeId, currentLinkingChoiceId) === scenario.id">
              \u2713 \uC5F0\uACB0\uB428
            </span>
          </div>
          
          <div class="scenario-body">
            <p class="scenario-description">{{scenario.description}}</p>
            
            <div class="scenario-meta">
              <span class="meta-item">\u{1F4CD} {{scenario.setting}}</span>
              <span class="meta-item">\u{1F3AD} {{scenario.mood}}</span>
            </div>
            
            <div class="scenario-tags" *ngIf="scenario.tags && scenario.tags.length > 0">
              <span class="tag" *ngFor="let tag of scenario.tags.slice(0, 3)">{{tag}}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="no-scenarios" *ngIf="savedScenarios.length === 0">
        <div class="empty-icon">\u{1F3AC}</div>
        <p>\uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.</p>
        <button class="create-scenario-btn" (click)="openScenarioCreator(); closeFlowScenarioLinkPanel()">
          \u2728 \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30
        </button>
      </div>
    </div>
  </div>
</div>

<!-- \uC218\uB828 \uBAA8\uB4DC \uD328\uB110 -->
<div class="wuxia-overlay" 
     *ngIf="showWuxiaPanel" 
     (click)="closeWuxiaPanel()"
     [class.mobile]="responsiveService.isMobile$ | async">
  <div class="wuxia-panel" 
       cdkDrag 
       cdkDragBoundary=".wuxia-overlay" 
       (click)="$event.stopPropagation()"
       [class.mobile]="responsiveService.isMobile$ | async">
    <div class="wuxia-header" cdkDragHandle>
      <h2>\u{1F3AF} \uC218\uB828 \uBAA8\uB4DC \u4FEE\u7149\u6A21\u5F0F</h2>
      <button class="close-btn" (click)="closeWuxiaPanel()">\u2715</button>
    </div>

    <div class="wuxia-tabs">
      <button class="tab-btn" [class.active]="wuxiaActiveTab === 'cultivation'" (click)="novelState.setWuxiaTab('cultivation')">
        \u{1F525} \uB0B4\uACF5\uC218\uB828
      </button>
      <button class="tab-btn" [class.active]="wuxiaActiveTab === 'skills'" (click)="novelState.setWuxiaTab('skills')">
        \u{1F4D6} \uBB34\uACF5\uCD08\uC2DD
      </button>
      <button class="tab-btn" [class.active]="wuxiaActiveTab === 'faction'" (click)="novelState.setWuxiaTab('faction')">
        \u{1F3DB}\uFE0F \uBB38\uD30C
      </button>
      <button class="tab-btn" [class.active]="wuxiaActiveTab === 'elixir'" (click)="novelState.setWuxiaTab('elixir')">
        \u{1F48A} \uB2E8\uC57D
      </button>
      <button class="tab-btn" [class.active]="wuxiaActiveTab === 'meridians'" (click)="novelState.setWuxiaTab('meridians')">
        \u2B55 \uD608\uB3C4
      </button>
    </div>

    <!-- \uB0B4\uACF5 \uC218\uB828 \uD0ED -->
    <div class="tab-content" *ngIf="wuxiaActiveTab === 'cultivation'">
      <div class="cultivation-section">
        <h3>\u5167\u529F\u4FEE\u7149 (\uB0B4\uACF5\uC218\uB828)</h3>
        
        <!-- \uB0B4\uACF5 \uAC8C\uC774\uC9C0 -->
        <div class="internal-power-gauge">
          <div class="gauge-header">
            <span class="gauge-label">\u5167\u529B (\uB0B4\uB825)</span>
            <span class="gauge-value">{{playerInternalPower.current}} / {{playerInternalPower.max}}</span>
          </div>
          <div class="gauge-bar">
            <div class="gauge-fill" 
                 [style.width.%]="(playerInternalPower.current / playerInternalPower.max) * 100">
            </div>
          </div>
          <div class="gauge-info">
            <span>\uD68C\uBCF5 \uC18D\uB3C4: {{playerInternalPower.recoveryRate}}/\uD134</span>
            <span>\uC21C\uB3C4: {{playerInternalPower.purity}}%</span>
            <span>\uC548\uC815\uC131: {{playerInternalPower.stability}}%</span>
          </div>
        </div>

        <!-- \uACBD\uC9C0 \uD45C\uC2DC -->
        <div class="realm-display">
          <div class="realm-badge" [class]="'realm-' + playerInternalPower.realm">
            <span class="realm-icon">\u2B50</span>
            <div class="realm-info">
              <span class="realm-name">{{playerInternalPower.realm}}</span>
              <span class="realm-subtitle">\u5883\u754C (\uACBD\uC9C0)</span>
            </div>
          </div>
          <div class="realm-progress">
            <span class="progress-label">\uB3CC\uD30C \uC9C4\uD589\uB3C4</span>
            <div class="progress-bar">
              <div class="progress-fill" [style.width.%]="playerInternalPower.realmProgress"></div>
            </div>
            <span class="progress-value">{{playerInternalPower.realmProgress}}%</span>
          </div>
        </div>

        <!-- \uC218\uB828 \uBC84\uD2BC -->
        <div class="cultivation-actions">
          <button class="cultivation-btn" (click)="cultivateInternalPower(1)">
            <span class="btn-icon">\u{1F9D8}</span>
            <span class="btn-text">1\uC2DC\uAC04 \uC218\uB828</span>
          </button>
          <button class="cultivation-btn" (click)="cultivateInternalPower(4)">
            <span class="btn-icon">\u{1F9D8}\u200D\u2642\uFE0F</span>
            <span class="btn-text">4\uC2DC\uAC04 \uC218\uB828</span>
          </button>
          <button class="cultivation-btn" (click)="cultivateInternalPower(12)">
            <span class="btn-icon">\u{1F9D8}\u200D\u2640\uFE0F</span>
            <span class="btn-text">12\uC2DC\uAC04 \uC218\uB828</span>
          </button>
        </div>

        <!-- \uC218\uB828\uB3C4 -->
        <div class="training-level">
          <span class="training-label">\u4FEE\u7DF4\u5EA6 (\uC218\uB828\uB3C4)</span>
          <div class="training-bar">
            <div class="training-fill" [style.width.%]="playerInternalPower.trainingLevel"></div>
          </div>
          <span class="training-value">{{playerInternalPower.trainingLevel}}%</span>
        </div>
      </div>
    </div>

    <!-- \uBB34\uACF5 \uCD08\uC2DD \uD0ED -->
    <div class="tab-content" *ngIf="wuxiaActiveTab === 'skills'">
      <div class="skills-section">
        <h3>\u6B66\u529F\u62DB\u5F0F (\uBB34\uACF5\uCD08\uC2DD)</h3>
        
        <div class="learned-skills-count">
          <span>\uC2B5\uB4DD\uD55C \uBB34\uACF5: {{learnedMartialSkills.length}}\uAC1C</span>
        </div>

        <div class="skills-grid">
          <div *ngFor="let skill of learnedMartialSkills" 
               class="skill-card"
               [class]="'grade-' + skill.grade">
            <div class="skill-header">
              <div class="skill-names">
                <h4 class="skill-name-chinese">{{skill.chineseName}}</h4>
                <p class="skill-name-korean">{{skill.name}}</p>
              </div>
              <span class="skill-grade-badge">{{skill.grade}}</span>
            </div>
            
            <div class="skill-type">
              <span class="type-icon" *ngIf="skill.type === 'choShik'">\u2694\uFE0F</span>
              <span class="type-icon" *ngIf="skill.type === 'shimBeop'">\u{1F4FF}</span>
              <span class="type-icon" *ngIf="skill.type === 'gyeongGong'">\u{1F985}</span>
              <span class="type-icon" *ngIf="skill.type === 'amGi'">\u{1F5E1}\uFE0F</span>
              <span class="type-label">
                {{skill.type === 'choShik' ? '\uCD08\uC2DD' : skill.type === 'shimBeop' ? '\uC2EC\uBC95' : skill.type === 'gyeongGong' ? '\uACBD\uACF5' : '\uC554\uAE30'}}
              </span>
            </div>

            <div class="skill-stats">
              <div class="stat-row">
                <span class="stat-label">\uC18C\uBAA8 \uB0B4\uB825:</span>
                <span class="stat-value">{{skill.internalPowerCost}}</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">\uC704\uB825:</span>
                <span class="stat-value">\xD7{{skill.damageMultiplier}}</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">\uBA85\uC911\uB960:</span>
                <span class="stat-value">{{(skill.hitRate * 100).toFixed(0)}}%</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">\uCE58\uBA85\uD0C0:</span>
                <span class="stat-value">{{(skill.criticalRate * 100).toFixed(0)}}%</span>
              </div>
            </div>

            <div class="skill-description">
              <p>{{skill.description}}</p>
              <p class="skill-effect">{{skill.skillEffect}}</p>
            </div>

            <div class="skill-element" *ngIf="skill.element">
              <span class="element-icon" [class]="'element-' + skill.element">
                {{skill.element === 'fire' ? '\u{1F525}' : skill.element === 'ice' ? '\u2744\uFE0F' : skill.element === 'wind' ? '\u{1F32A}\uFE0F' : skill.element === 'thunder' ? '\u26A1' : '\u2620\uFE0F'}}
              </span>
              <span class="element-name">{{skill.element}}</span>
            </div>

            <div class="skill-faction" *ngIf="skill.factionId">
              <span class="faction-label">\uC18C\uC18D:</span>
              <span class="faction-name">{{getFactionName(skill.factionId)}}</span>
            </div>
          </div>
        </div>

        <div class="no-skills" *ngIf="learnedMartialSkills.length === 0">
          <p>\uC544\uC9C1 \uC2B5\uB4DD\uD55C \uBB34\uACF5\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.</p>
          <p>\uBB38\uD30C\uC5D0 \uC785\uBB38\uD558\uAC70\uB098 \uBB34\uACF5 \uBE44\uAE09\uC744 \uC5BB\uC73C\uC138\uC694!</p>
        </div>
      </div>
    </div>

    <!-- \uBB38\uD30C \uD0ED -->
    <div class="tab-content" *ngIf="wuxiaActiveTab === 'faction'">
      <div class="faction-section">
        <h3>\u9580\u6D3E (\uBB38\uD30C)</h3>

        <div class="current-faction" *ngIf="playerFaction">
          <div class="faction-card current">
            <div class="faction-header">
              <h4>{{playerFaction.chineseName}}</h4>
              <p class="faction-name-korean">{{playerFaction.name}}</p>
            </div>
            <div class="faction-type" [class]="'type-' + playerFaction.type">
              {{playerFaction.type === 'righteous' ? '\u6B63\u6D3E' : playerFaction.type === 'evil' ? '\u9B54\u654E' : '\u4E2D\u7ACB'}}
            </div>
            <div class="faction-info">
              <p>{{playerFaction.description}}</p>
              <p><strong>\uBCF8\uAC70\uC9C0:</strong> {{playerFaction.headquarters}}</p>
              <p><strong>\uCC3D\uC2DC\uC790:</strong> {{playerFaction.founder}}</p>
            </div>
            <div class="faction-reputation">
              <span>\uD3C9\uD310:</span>
              <div class="reputation-bar">
                <div class="reputation-fill" 
                     [style.width]="((playerFaction.reputation + 1000) / 2000 * 100) + '%'">
                </div>
              </div>
              <span>{{playerFaction.reputation}}</span>
            </div>
          </div>
        </div>

        <div class="no-faction" *ngIf="!playerFaction">
          <p>\uC544\uC9C1 \uBB38\uD30C\uC5D0 \uC18C\uC18D\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.</p>
          <h4>\uC785\uBB38 \uAC00\uB2A5\uD55C \uBB38\uD30C:</h4>
          <div class="factions-grid">
            <div *ngFor="let faction of availableFactions" 
                 class="faction-card"
                 [class]="'type-' + faction.type">
              <div class="faction-header">
                <h4>{{faction.chineseName}}</h4>
                <p class="faction-name-korean">{{faction.name}}</p>
              </div>
              <div class="faction-type" [class]="'type-' + faction.type">
                {{faction.type === 'righteous' ? '\u6B63\u6D3E' : faction.type === 'evil' ? '\u9B54\u654E' : '\u4E2D\u7ACB'}}
              </div>
              <div class="faction-info">
                <p>{{faction.description}}</p>
                <p><strong>\uBCF8\uAC70\uC9C0:</strong> {{faction.headquarters}}</p>
              </div>
              <div class="faction-specialties">
                <span *ngFor="let specialty of faction.specialties" class="specialty-badge">
                  {{specialty}}
                </span>
              </div>
              <button class="join-faction-btn" (click)="joinFaction(faction.id)">
                \uC785\uBB38\uD558\uAE30
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- \uB2E8\uC57D \uD0ED -->
    <div class="tab-content" *ngIf="wuxiaActiveTab === 'elixir'">
      <div class="elixir-section">
        <h3>\u4E39\u85E5 (\uB2E8\uC57D)</h3>

        <div class="elixir-inventory">
          <div *ngFor="let elixir of elixirs" 
               class="elixir-card"
               [class]="'grade-' + elixir.grade">
            <div class="elixir-header">
              <div class="elixir-names">
                <h4 class="elixir-chinese">{{elixir.chineseName}}</h4>
                <p class="elixir-korean">{{elixir.name}}</p>
              </div>
              <span class="elixir-grade">{{elixir.grade}}</span>
            </div>

            <div class="elixir-type">
              <span class="type-badge">{{elixir.type}}</span>
              <span class="rarity-stars">
                <span *ngFor="let star of [].constructor(elixir.rarity)" class="star">\u2B50</span>
              </span>
            </div>

            <div class="elixir-description">
              <p>{{elixir.description}}</p>
            </div>

            <div class="elixir-effects">
              <div *ngFor="let effect of elixir.effects" class="effect-item">
                <span class="effect-icon">\u2728</span>
                <span class="effect-text">{{effect.description}}</span>
              </div>
            </div>

            <div class="elixir-warning" *ngIf="elixir.sideEffect">
              <span class="warning-icon">\u26A0\uFE0F</span>
              <span class="warning-text">{{elixir.sideEffect}} ({{(elixir.sideEffectChance! * 100).toFixed(0)}}%)</span>
            </div>

            <div class="elixir-footer">
              <span class="elixir-price">\u{1F4B0} {{elixir.price}}G</span>
              <button class="use-elixir-btn" (click)="useElixir(elixir.id)">
                \uC0AC\uC6A9\uD558\uAE30
              </button>
            </div>
          </div>
        </div>

        <div class="no-elixir" *ngIf="elixirs.length === 0">
          <p>\uBCF4\uC720\uD55C \uB2E8\uC57D\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.</p>
        </div>
      </div>
    </div>

    <!-- \uD608\uB3C4 \uD0ED -->
    <div class="tab-content" *ngIf="wuxiaActiveTab === 'meridians'">
      <div class="meridians-section">
        <h3>\u7D93\u8108 (\uACBD\uB9E5)</h3>

        <div class="meridian-info">
          <p>\uAC1C\uD1B5\uB41C \uD608\uB3C4: {{playerInternalPower.meridians.opened}} / {{playerInternalPower.meridians.total}}</p>
        </div>

        <div class="meridian-diagram">
          <div *ngFor="let meridian of playerInternalPower.meridians.meridians; let i = index" 
               class="meridian-point"
               [class.opened]="meridian.isOpened"
               [style.top]="getMeridianPosition(i).top"
               [style.left]="getMeridianPosition(i).left"
               [title]="meridian.name + ' ' + meridian.chineseName">
            <div class="point-circle">
              <span class="point-number">{{i + 1}}</span>
            </div>
            <div class="point-info" *ngIf="!meridian.isOpened">
              <button class="open-meridian-btn" (click)="openMeridian(meridian.id)">
                \uAC1C\uD1B5
              </button>
            </div>
          </div>
        </div>

        <div class="meridian-list">
          <div *ngFor="let meridian of playerInternalPower.meridians.meridians; let i = index" 
               class="meridian-item"
               [class.opened]="meridian.isOpened">
            <div class="meridian-number">{{i + 1}}</div>
            <div class="meridian-details">
              <h4>{{meridian.chineseName}}</h4>
              <p>{{meridian.name}}</p>
              <div class="meridian-progress" *ngIf="!meridian.isOpened">
                <div class="progress-bar">
                  <div class="progress-fill" [style.width.%]="meridian.openProgress"></div>
                </div>
                <span>{{meridian.openProgress}}%</span>
              </div>
              <div class="meridian-bonus">
                <span *ngFor="let key of getObjectKeys(meridian.bonus)" class="bonus-item">
                  {{key}}: +{{meridian.bonus[key]}}
                </span>
              </div>
            </div>
            <div class="meridian-status">
              <span *ngIf="meridian.isOpened" class="status-opened">\u2713 \uAC1C\uD1B5\uB428</span>
              <button *ngIf="!meridian.isOpened" 
                      class="open-btn" 
                      (click)="openMeridian(meridian.id)">
                \uAC1C\uD1B5\uD558\uAE30
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- \uB358\uC804 \uB2E4\uC774\uC5BC\uB85C\uADF8 -->
<div class="dungeon-test-dialog" *ngIf="showDungeonTestDialog">
  <div class="dialog-overlay" (click)="showDungeonPanel ? null : closeDungeonDialog()"></div>
  <div class="dialog-content" [class.dungeon-active]="showDungeonPanel">
    <div class="dialog-header">
      <h3>\u{1F3F0} \uB358\uC804 \uD14C\uC2A4\uD2B8</h3>
      <button class="close-btn" (click)="closeDungeonDialog()">\xD7</button>
    </div>

    <!-- \uB358\uC804 \uC120\uD0DD \uD328\uB110 -->
    <div class="dungeon-panel" *ngIf="!showDungeonPanel">
          <h4 class="section-title">\u2694\uFE0F \uC7A5\uBE44 \uC2AC\uB86F</h4>
          
          <div class="equipment-grid-diablo">
            <!-- \uC88C\uCE21 \uC5F4 -->
            <div class="equipment-column left-column">
              <!-- \uD22C\uAD6C -->
              <div class="equipment-slot-diablo helmet-slot" [attr.data-rarity]="playerCharacter.equipment?.helmet?.rarity || 'empty'" (click)="playerCharacter.equipment?.helmet && unequipItem('helmet')" [style.cursor]="playerCharacter.equipment?.helmet ? 'pointer' : 'default'">
                <div class="slot-label">\uD22C\uAD6C</div>
                <div class="slot-content" *ngIf="playerCharacter.equipment?.helmet; else emptyHelmet">
                  <div class="item-icon-diablo">\u26D1\uFE0F</div>
                  <div class="item-name-short">{{playerCharacter.equipment?.helmet?.baseType}}</div>
                </div>
                <ng-template #emptyHelmet>
                  <div class="slot-content empty">
                    <div class="empty-icon-diablo">\u26D1\uFE0F</div>
                  </div>
                </ng-template>
              </div>
              
              <!-- \uAC11\uC637 -->
              <div class="equipment-slot-diablo armor-slot" [attr.data-rarity]="playerCharacter.equipment?.armor?.rarity || 'empty'" (click)="playerCharacter.equipment?.armor && unequipItem('armor')" [style.cursor]="playerCharacter.equipment?.armor ? 'pointer' : 'default'">
                <div class="slot-label">\uAC11\uC637</div>
                <div class="slot-content" *ngIf="playerCharacter.equipment?.armor; else emptyArmor">
                  <div class="item-icon-diablo">\u{1F6E1}\uFE0F</div>
                  <div class="item-name-short">{{playerCharacter.equipment?.armor?.baseType}}</div>
                </div>
                <ng-template #emptyArmor>
                  <div class="slot-content empty">
                    <div class="empty-icon-diablo">\u{1F6E1}\uFE0F</div>
                  </div>
                </ng-template>
              </div>
              
              <!-- \uC7A5\uAC11 -->
              <div class="equipment-slot-diablo gloves-slot" [attr.data-rarity]="playerCharacter.equipment?.gloves?.rarity || 'empty'" (click)="playerCharacter.equipment?.gloves && unequipItem('gloves')" [style.cursor]="playerCharacter.equipment?.gloves ? 'pointer' : 'default'">
                <div class="slot-label">\uC7A5\uAC11</div>
                <div class="slot-content" *ngIf="playerCharacter.equipment?.gloves; else emptyGloves">
                  <div class="item-icon-diablo">\u{1F9E4}</div>
                  <div class="item-name-short">{{playerCharacter.equipment?.gloves?.baseType}}</div>
                </div>
                <ng-template #emptyGloves>
                  <div class="slot-content empty">
                    <div class="empty-icon-diablo">\u{1F9E4}</div>
                  </div>
                </ng-template>
              </div>
              
              <!-- \uC2E0\uBC1C -->
              <div class="equipment-slot-diablo boots-slot" [attr.data-rarity]="playerCharacter.equipment?.boots?.rarity || 'empty'" (click)="playerCharacter.equipment?.boots && unequipItem('boots')" [style.cursor]="playerCharacter.equipment?.boots ? 'pointer' : 'default'">
                <div class="slot-label">\uC2E0\uBC1C</div>
                <div class="slot-content" *ngIf="playerCharacter.equipment?.boots; else emptyBoots">
                  <div class="item-icon-diablo">\u{1F462}</div>
                  <div class="item-name-short">{{playerCharacter.equipment?.boots?.baseType}}</div>
                </div>
                <ng-template #emptyBoots>
                  <div class="slot-content empty">
                    <div class="empty-icon-diablo">\u{1F462}</div>
                  </div>
                </ng-template>
              </div>
            </div>
            
            <!-- \uC911\uC559 (\uBB34\uAE30) -->
            <div class="equipment-column center-column">
              <div class="equipment-slot-diablo weapon-slot large" [attr.data-rarity]="playerCharacter.equipment?.weapon?.rarity || 'empty'" (click)="playerCharacter.equipment?.weapon && unequipItem('weapon')" [style.cursor]="playerCharacter.equipment?.weapon ? 'pointer' : 'default'">
                <div class="slot-label">\uBB34\uAE30</div>
                <div class="slot-content" *ngIf="playerCharacter.equipment?.weapon; else emptyWeapon">
                  <div class="item-icon-diablo large">\u2694\uFE0F</div>
                  <div class="item-name-short">{{playerCharacter.equipment?.weapon?.baseType}}</div>
                  <div class="item-damage" *ngIf="playerCharacter.equipment?.weapon?.baseStats">
                    {{playerCharacter.equipment?.weapon?.baseStats?.minDamage}}-{{playerCharacter.equipment?.weapon?.baseStats?.maxDamage}}
                  </div>
                </div>
                <ng-template #emptyWeapon>
                  <div class="slot-content empty">
                    <div class="empty-icon-diablo large">\u2694\uFE0F</div>
                  </div>
                </ng-template>
              </div>
            </div>
            
            <!-- \uC6B0\uCE21 \uC5F4 -->
            <div class="equipment-column right-column">
              <!-- \uBAA9\uAC78\uC774 -->
              <div class="equipment-slot-diablo amulet-slot" [attr.data-rarity]="playerCharacter.equipment?.amulet?.rarity || 'empty'" (click)="playerCharacter.equipment?.amulet && unequipItem('amulet')" [style.cursor]="playerCharacter.equipment?.amulet ? 'pointer' : 'default'">
                <div class="slot-label">\uBAA9\uAC78\uC774</div>
                <div class="slot-content" *ngIf="playerCharacter.equipment?.amulet; else emptyAmulet">
                  <div class="item-icon-diablo">\u{1F4FF}</div>
                  <div class="item-name-short">{{playerCharacter.equipment?.amulet?.baseType}}</div>
                </div>
                <ng-template #emptyAmulet>
                  <div class="slot-content empty">
                    <div class="empty-icon-diablo">\u{1F4FF}</div>
                  </div>
                </ng-template>
              </div>
              
              <!-- \uBCA8\uD2B8 -->
              <div class="equipment-slot-diablo belt-slot" [attr.data-rarity]="playerCharacter.equipment?.belt?.rarity || 'empty'" (click)="playerCharacter.equipment?.belt && unequipItem('belt')" [style.cursor]="playerCharacter.equipment?.belt ? 'pointer' : 'default'">
                <div class="slot-label">\uBCA8\uD2B8</div>
                <div class="slot-content" *ngIf="playerCharacter.equipment?.belt; else emptyBelt">
                  <div class="item-icon-diablo">\u{1F397}\uFE0F</div>
                  <div class="item-name-short">{{playerCharacter.equipment?.belt?.baseType}}</div>
                </div>
                <ng-template #emptyBelt>
                  <div class="slot-content empty">
                    <div class="empty-icon-diablo">\u{1F397}\uFE0F</div>
                  </div>
                </ng-template>
              </div>
              
              <!-- \uBC18\uC9C0 1 -->
              <div class="equipment-slot-diablo ring-slot" [attr.data-rarity]="playerCharacter.equipment?.ring1?.rarity || 'empty'" (click)="playerCharacter.equipment?.ring1 && unequipItem('ring1')" [style.cursor]="playerCharacter.equipment?.ring1 ? 'pointer' : 'default'">
                <div class="slot-label">\uBC18\uC9C0</div>
                <div class="slot-content" *ngIf="playerCharacter.equipment?.ring1; else emptyRing1">
                  <div class="item-icon-diablo">\u{1F48D}</div>
                  <div class="item-name-short">{{playerCharacter.equipment?.ring1?.baseType}}</div>
                </div>
                <ng-template #emptyRing1>
                  <div class="slot-content empty">
                    <div class="empty-icon-diablo">\u{1F48D}</div>
                  </div>
                </ng-template>
              </div>
              
              <!-- \uBC18\uC9C0 2 -->
              <div class="equipment-slot-diablo ring-slot" [attr.data-rarity]="playerCharacter.equipment?.ring2?.rarity || 'empty'" (click)="playerCharacter.equipment?.ring2 && unequipItem('ring2')" [style.cursor]="playerCharacter.equipment?.ring2 ? 'pointer' : 'default'">
                <div class="slot-label">\uBC18\uC9C0</div>
                <div class="slot-content" *ngIf="playerCharacter.equipment?.ring2; else emptyRing2">
                  <div class="item-icon-diablo">\u{1F48D}</div>
                  <div class="item-name-short">{{playerCharacter.equipment?.ring2?.baseType}}</div>
                </div>
                <ng-template #emptyRing2>
                  <div class="slot-content empty">
                    <div class="empty-icon-diablo">\u{1F48D}</div>
                  </div>
                </ng-template>
              </div>
            </div>
          </div>
          
          <!-- \uC7A5\uBE44 \uD6A8\uACFC \uC694\uC57D (\uB514\uC544\uBE14\uB85C \uC2A4\uD0C0\uC77C) -->
          <div class="equipment-summary-diablo">
            <div class="summary-item">
              <span class="summary-icon">\u2694\uFE0F</span>
              <span class="summary-label">\uCD1D \uACF5\uACA9\uB825</span>
              <span class="summary-value">{{getTotalAttack()}}</span>
            </div>
            <div class="summary-item">
              <span class="summary-icon">\u{1F6E1}\uFE0F</span>
              <span class="summary-label">\uCD1D \uBC29\uC5B4\uB825</span>
              <span class="summary-value">{{getTotalDefense()}}</span>
            </div>
            <div class="summary-item">
              <span class="summary-icon">\u2728</span>
              <span class="summary-label">\uD2B9\uC218 \uD6A8\uACFC</span>
              <span class="summary-value">{{getSpecialEffectsCount()}}</span>
            </div>
          </div>
        </div>
        
        <!-- \uC778\uBCA4\uD1A0\uB9AC \uC139\uC158 -->
        <div class="inventory-section">
          <div class="inventory-header">
            <h4 class="section-title">\u{1F392} \uC778\uBCA4\uD1A0\uB9AC</h4>
            <button mat-raised-button color="accent" (click)="generateRandomItems()" *ngIf="playerCharacter">
              <mat-icon>casino</mat-icon>
              AI \uC544\uC774\uD15C \uC0DD\uC131
            </button>
          </div>
          
          <!-- \uC778\uBCA4\uD1A0\uB9AC \uD544\uD130 \uBC84\uD2BC -->
          <div class="inventory-filter-buttons">
            <button mat-button 
                    [class.active]="inventoryFilter === 'all'"
                    (click)="setInventoryFilter('all')">
              <mat-icon>apps</mat-icon>
              <span>\uC804\uCCB4</span>
            </button>
            <button mat-button 
                    [class.active]="inventoryFilter === 'weapon'"
                    (click)="setInventoryFilter('weapon')">
              <span class="filter-icon">\u2694\uFE0F</span>
              <span>\uBB34\uAE30</span>
            </button>
            <button mat-button 
                    [class.active]="inventoryFilter === 'armor'"
                    (click)="setInventoryFilter('armor')">
              <span class="filter-icon">\u{1F6E1}\uFE0F</span>
              <span>\uBC29\uC5B4\uAD6C</span>
            </button>
            <button mat-button 
                    [class.active]="inventoryFilter === 'accessory'"
                    (click)="setInventoryFilter('accessory')">
              <span class="filter-icon">\u{1F48D}</span>
              <span>\uC7A5\uC2E0\uAD6C</span>
            </button>
            <button mat-button 
                    [class.active]="inventoryFilter === 'consumable'"
                    (click)="setInventoryFilter('consumable')">
              <span class="filter-icon">\u{1F9EA}</span>
              <span>\uC18C\uBAA8\uD488</span>
            </button>
            <button mat-button 
                    [class.active]="inventoryFilter === 'material'"
                    (click)="setInventoryFilter('material')">
              <span class="filter-icon">\u{1F4E6}</span>
              <span>\uAE30\uD0C0</span>
            </button>
          </div>
          
          <div class="inventory-grid" *ngIf="getFilteredInventory().length > 0">
            <div class="inventory-item" *ngFor="let item of getFilteredInventory(); let i = index"
                 [ngClass]="getItemTypeColorClass(item.type)">
              <!-- \uBA54\uB274 \uD2B8\uB9AC\uAC70 \uBC84\uD2BC (\uBCF4\uC774\uC9C0 \uC54A\uC74C) -->
              <button class="item-card-trigger"
                      [attr.data-rarity]="item.rarity"
                      [matMenuTriggerFor]="itemMenu"
                      (menuOpened)="selectInventoryItem(item, getOriginalInventoryIndex(item))">
                <div class="item-card-content">
                  <div class="item-card-icon">
                    <span *ngIf="item.type === 'weapon'">\u2694\uFE0F</span>
                    <span *ngIf="item.type === 'armor'">\u{1F6E1}\uFE0F</span>
                    <span *ngIf="item.type === 'helmet'">\u26D1\uFE0F</span>
                    <span *ngIf="item.type === 'gloves'">\u{1F9E4}</span>
                    <span *ngIf="item.type === 'boots'">\u{1F462}</span>
                    <span *ngIf="item.type === 'belt'">\u{1F397}\uFE0F</span>
                    <span *ngIf="item.type === 'amulet'">\u{1F4FF}</span>
                    <span *ngIf="item.type === 'ring'">\u{1F48D}</span>
                    <span *ngIf="item.type === 'consumable'">\u{1F9EA}</span>
                    <span *ngIf="item.type === 'material'">\u{1F4E6}</span>
                  </div>
                  <div class="item-card-info">
                    <div class="item-card-name" [class]="'rarity-text-' + item.rarity">{{item.name}}</div>
                    <div class="item-card-rarity-badge" [class]="'rarity-badge-' + item.rarity">
                      {{getRarityText(item.rarity)}}
                    </div>
                    <div class="item-card-type">{{getItemTypeText(item.type)}}</div>
                    <div class="item-card-slot" *ngIf="getEquipmentSlotName(item.type)">
                      <span class="slot-label">{{getEquipmentSlotName(item.type)}}</span>
                    </div>
                    <div class="item-card-stats" *ngIf="item.stats">
                      <!-- \uB370\uBBF8\uC9C0 -->
                      <span class="mini-stat damage" *ngIf="item.stats.minDamage && item.stats.maxDamage">\u2694\uFE0F {{item.stats.minDamage}}-{{item.stats.maxDamage}}</span>
                      <span class="mini-stat damage" *ngIf="item.stats.attack && !item.stats.minDamage">\u2694\uFE0F +{{item.stats.attack}}</span>
                      
                      <!-- \uBC29\uC5B4 -->
                      <span class="mini-stat defense" *ngIf="item.stats.armor">\u{1F6E1}\uFE0F +{{item.stats.armor}}</span>
                      <span class="mini-stat defense" *ngIf="item.stats.defense && !item.stats.armor">\u{1F6E1}\uFE0F +{{item.stats.defense}}</span>
                      
                      <!-- \uC0DD\uBA85\uB825/\uB9C8\uB098 -->
                      <span class="mini-stat vital" *ngIf="item.stats.hp">\u2764\uFE0F +{{item.stats.hp}}</span>
                      <span class="mini-stat vital" *ngIf="item.stats.mp">\u{1F499} +{{item.stats.mp}}</span>
                      
                      <!-- \uD06C\uB9AC\uD2F0\uCEEC -->
                      <span class="mini-stat critical" *ngIf="item.stats.critChance">\u{1F4A5} {{item.stats.critChance}}%</span>
                      <span class="mini-stat critical" *ngIf="item.stats.critDamage">\u{1F4A2} {{item.stats.critDamage}}%</span>
                      
                      <!-- \uC0DD\uBA85\uB825 \uD761\uC218 -->
                      <span class="mini-stat lifesteal" *ngIf="item.stats.lifeSteal">\u{1FA78} {{item.stats.lifeSteal}}%</span>
                      
                      <!-- \uC800\uD56D -->
                      <span class="mini-stat resist" *ngIf="item.stats.fireResist">\u{1F525} +{{item.stats.fireResist}}%</span>
                      <span class="mini-stat resist" *ngIf="item.stats.coldResist">\u2744\uFE0F +{{item.stats.coldResist}}%</span>
                      <span class="mini-stat resist" *ngIf="item.stats.lightningResist">\u26A1 +{{item.stats.lightningResist}}%</span>
                      <span class="mini-stat resist" *ngIf="item.stats.allResist">\u2728 +{{item.stats.allResist}}%</span>
                      
                      <!-- \uD2B9\uC218 \uD6A8\uACFC -->
                      <span class="mini-stat special" *ngIf="item.stats.magicFind">\u{1F3B2} +{{item.stats.magicFind}}%</span>
                      <span class="mini-stat special" *ngIf="item.stats.goldFind">\u{1F4B0} +{{item.stats.goldFind}}%</span>
                      <span class="mini-stat special" *ngIf="item.stats.movementSpeed">\u{1F3C3} +{{item.stats.movementSpeed}}%</span>
                    </div>
                    <div class="item-card-quantity" *ngIf="item.quantity && item.quantity > 1">
                      <span class="quantity-badge">\xD7{{item.quantity}}</span>
                    </div>
                  </div>
                  <div class="item-card-rarity">
                    {{getRaritySymbol(item.rarity)}}
                  </div>
                </div>
                
                <!-- \uC0AD\uC81C \uBC84\uD2BC (\uC6B0\uCE21 \uC0C1\uB2E8 \uACE0\uC815) -->
                <button mat-icon-button class="delete-item-btn" (click)="deleteInventoryItem(getOriginalInventoryIndex(item)); $event.stopPropagation()">
                  <mat-icon>close</mat-icon>
                </button>
              </button>
            </div>
          </div>
          
          <!-- Angular Material \uCEE8\uD14D\uC2A4\uD2B8 \uBA54\uB274 -->
          <mat-menu #itemMenu="matMenu" 
                    class="item-context-menu-mat"
                    xPosition="after"
                    yPosition="below"
                    [overlapTrigger]="false">
            <button mat-menu-item 
                    *ngIf="selectedContextItem && 
                           selectedContextItem.type !== 'consumable' && 
                           selectedContextItem.type !== 'material' &&
                           selectedContextItem.type !== 'quest' &&
                           selectedContextItem.type !== 'misc'"
                    (click)="onContextMenuAction('equip')">
              <mat-icon>upload</mat-icon>
              <span>\uC7A5\uBE44\uD558\uAE30</span>
            </button>
            <button mat-menu-item 
                    *ngIf="selectedContextItem && 
                           selectedContextItem.type !== 'consumable' && 
                           selectedContextItem.type !== 'material' &&
                           selectedContextItem.type !== 'quest' &&
                           selectedContextItem.type !== 'misc'"
                    (click)="onContextMenuAction('compare')">
              <mat-icon>compare_arrows</mat-icon>
              <span>\uBE44\uAD50\uD558\uAE30</span>
            </button>
            <button mat-menu-item (click)="onContextMenuAction('info')">
              <mat-icon>info</mat-icon>
              <span>\uC815\uBCF4 \uBCF4\uAE30</span>
            </button>
            <button mat-menu-item (click)="deleteInventoryItem(selectedContextItemIndex)">
              <mat-icon color="warn">delete</mat-icon>
              <span>\uC0AD\uC81C\uD558\uAE30</span>
            </button>
          </mat-menu>
          
          <div *ngIf="getFilteredInventory().length === 0" class="empty-inventory">
            <div class="empty-icon">\u{1F392}</div>
            <p *ngIf="inventoryFilter === 'all'">\uC778\uBCA4\uD1A0\uB9AC\uAC00 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4</p>
            <p *ngIf="inventoryFilter !== 'all'">\uD574\uB2F9 \uD0C0\uC785\uC758 \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4</p>
            <p class="hint" *ngIf="inventoryFilter === 'all'">AI \uC544\uC774\uD15C \uC0DD\uC131 \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC5EC \uC544\uC774\uD15C\uC744 \uC0DD\uC131\uD558\uC138\uC694</p>
            <button mat-raised-button color="primary" (click)="generateRandomItems()" *ngIf="playerCharacter && inventoryFilter === 'all'">
              <mat-icon>add</mat-icon>
              \uCCAB \uC544\uC774\uD15C \uC0DD\uC131\uD558\uAE30
            </button>
          </div>
        </div>
        
        <!-- \uC7A5\uBE44\uAC00 \uC5C6\uC744 \uB54C -->
        <div *ngIf="!playerCharacter" class="empty-equipment-state">
          <div class="empty-icon">\u2694\uFE0F</div>
          <h3>\uCE90\uB9AD\uD130 \uC815\uBCF4 \uC5C6\uC74C</h3>
          <p>\uCE90\uB9AD\uD130\uB97C \uC0DD\uC131\uD558\uBA74 \uC7A5\uBE44 \uC815\uBCF4\uAC00 \uD45C\uC2DC\uB429\uB2C8\uB2E4</p>
        </div>
      </div>
</div>

<!-- \uB358\uC804 \uB2E4\uC774\uC5BC\uB85C\uADF8 -->
<div class="dungeon-test-dialog" *ngIf="showDungeonTestDialog">
  <div class="dialog-overlay" (click)="showDungeonPanel ? null : closeDungeonDialog()"></div>
  <div class="dialog-content" [class.dungeon-active]="showDungeonPanel">
    <div class="dialog-header">
      <h3>\u{1F3F0} \uB358\uC804 \uD14C\uC2A4\uD2B8</h3>
      <button class="close-btn" (click)="closeDungeonDialog()">\xD7</button>
    </div>

    <!-- \uB358\uC804 \uC120\uD0DD \uD328\uB110 -->
    <div class="dungeon-panel" *ngIf="!showDungeonPanel">
      <h2>\u{1F3F0} \uB358\uC804 \uC120\uD0DD</h2>
      <p>\uD0D0\uD5D8\uD560 \uB358\uC804\uC744 \uC120\uD0DD\uD558\uC138\uC694</p>
    </div>

    <!-- \uB358\uC804 \uC9C4\uD589 \uD328\uB110 -->
    <div class="dungeon-progress-panel" *ngIf="showDungeonPanel">
      <h2>\u2694\uFE0F \uB358\uC804 \uC9C4\uD589 \uC911</h2>
      <p>\uB358\uC804 \uD0D0\uD5D8\uC774 \uC9C4\uD589 \uC911\uC785\uB2C8\uB2E4.</p>
    </div>
  </div>
</div>

<!-- \uD50C\uB85C\uC6B0 \uBBF8\uB2C8\uB9F5 \uD328\uB110 -->
<div class="flow-minimap-panel" *ngIf="showFlowPanel">
  <div class="flow-panel-header">
    <h3>\u{1F5FA}\uFE0F \uD50C\uB85C\uC6B0 \uBBF8\uB2C8\uB9F5</h3>
    <button class="close-btn" (click)="toggleFlowPanel()">\xD7</button>
  </div>
  <div class="flow-panel-content">
    <p>\uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0\uAC00 \uD45C\uC2DC\uB429\uB2C8\uB2E4</p>
  </div>
</div>

<!-- \uACE0\uAE09 \uD50C\uB85C\uC6B0 \uD328\uB110 -->
<div class="advanced-flow-panel" *ngIf="showAdvancedFlowPanel">
  <div class="advanced-flow-header">
    <h3>\u{1F500} \uACE0\uAE09 \uD50C\uB85C\uC6B0</h3>
    <button class="close-btn" (click)="toggleAdvancedFlowPanel()">\xD7</button>
  </div>
  <div class="advanced-flow-content">
    <p>\uACE0\uAE09 \uD50C\uB85C\uC6B0 \uAE30\uB2A5\uC774 \uD45C\uC2DC\uB429\uB2C8\uB2E4</p>
  </div>
</div>

<!-- \uBB34\uD611 \uC218\uB828 \uD328\uB110 -->
<div class="wuxia-panel" *ngIf="showWuxiaPanel">
  <div class="wuxia-panel-header">
    <h3>\u2694\uFE0F \uBB34\uD611 \uC218\uB828</h3>
    <button class="close-btn" (click)="toggleWuxiaPanel()">\xD7</button>
  </div>
  <div class="wuxia-panel-content">
    <p>\uC218\uB828 \uAE30\uB2A5\uC774 \uD45C\uC2DC\uB429\uB2C8\uB2E4</p>
  </div>
</div>

<!-- \uB358\uC804 \uB2E4\uC774\uC5BC\uB85C\uADF8 -->
<div class="dungeon-test-dialog" *ngIf="showDungeonTestDialog">
  <div class="dialog-overlay" (click)="showDungeonPanel ? null : closeDungeonDialog()"></div>
  <div class="dialog-content" [class.dungeon-active]="showDungeonPanel">
    <div class="dialog-header">
      <h2>\u{1F3F0} {{ showDungeonPanel ? '\uB358\uC804 \uD0D0\uD5D8' : '\uB358\uC804' }}</h2>
      <button class="close-btn" (click)="showDungeonPanel ? onDungeonEscape() : closeDungeonDialog()">\u2715</button>
    </div>
    
    <!-- \uB358\uC804 \uC124\uC815 \uD654\uBA74 (\uB358\uC804 \uC2DC\uC791 \uC804) -->
    <div class="dialog-body" *ngIf="!showDungeonPanel">
      <!-- \uB358\uC804 \uD0C0\uC785 \uC120\uD0DD -->
      <div class="test-section">
        <h3>\uB358\uC804 \uC120\uD0DD</h3>
        <div class="dungeon-type-grid">
          <div
            *ngFor="let dungeonType of dungeonTypes"
            class="dungeon-type-card"
            [class.selected]="selectedDungeonType?.id === dungeonType.id"
            (click)="selectDungeonType(dungeonType)"
          >
            <div class="skills-list">
              <div class="skill-item" *ngFor="let skill of playerCharacter.skills">
                <div class="skill-header">
                  <span class="skill-name">{{skill.name}}</span>
                  <span class="skill-level">Lv.{{skill.level}}/{{skill.maxLevel}}</span>
                </div>
                <p class="skill-description">{{skill.description}}</p>
                <div class="skill-type-badge" [ngClass]="'type-' + skill.type">
                  {{skill.type === 'combat' ? '\uC804\uD22C' : skill.type === 'magic' ? '\uB9C8\uBC95' : '\uD328\uC2DC\uBE0C'}}
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- \uCE90\uB9AD\uD130\uAC00 \uC5C6\uC744 \uB54C -->
        <div *ngIf="!playerCharacter" class="empty-character-state">
          <div class="empty-icon">\u{1F464}</div>
          <h3>\uCE90\uB9AD\uD130 \uC815\uBCF4 \uC5C6\uC74C</h3>
          <p>\uC544\uC9C1 \uC0DD\uC131\uB41C \uCE90\uB9AD\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4</p>
          <p class="hint">\uC18C\uC124\uC744 \uC2DC\uC791\uD558\uBA74 \uCE90\uB9AD\uD130 \uC815\uBCF4\uAC00 \uD45C\uC2DC\uB429\uB2C8\uB2E4</p>
        </div>
      </div>
    </div>
  </div>
</div>

      <h2>\uFFFD \uB358\uC804 \uC120\uD0DD</h2>




<!-- \uB358\uC804 \uB2E4\uC774\uC5BC\uB85C\uADF8 -->
<div class="dungeon-test-dialog" *ngIf="showDungeonTestDialog">
  <div class="dialog-overlay" (click)="showDungeonPanel ? null : closeDungeonDialog()"></div>
  <div class="dialog-content" [class.dungeon-active]="showDungeonPanel">
    <div class="dialog-header">
      <h2>\u{1F3F0} {{ showDungeonPanel ? '\uB358\uC804 \uD0D0\uD5D8' : '\uB358\uC804' }}</h2>
      <button class="close-btn" (click)="showDungeonPanel ? onDungeonEscape() : closeDungeonDialog()">\u2715</button>
    </div>
    
    <!-- \uB358\uC804 \uC124\uC815 \uD654\uBA74 (\uB358\uC804 \uC2DC\uC791 \uC804) -->
    <div class="dialog-body" *ngIf="!showDungeonPanel">
      <!-- \uB358\uC804 \uD0C0\uC785 \uC120\uD0DD -->
      <div class="test-section">
        <h3>\uB358\uC804 \uC120\uD0DD</h3>
        <div class="dungeon-type-grid">
          <div
            *ngFor="let dungeonType of dungeonTypes"
            class="dungeon-type-card"
            [class.selected]="selectedDungeonType?.id === dungeonType.id"
            (click)="selectDungeonType(dungeonType)"
          >
            <div class="dungeon-icon">{{ dungeonType.icon }}</div>
            <div class="dungeon-name">{{ dungeonType.koreanName }}</div>
            <div class="dungeon-level">Lv.{{ dungeonType.minLevel }}-{{ dungeonType.recommendedLevel }}</div>
            <div class="dungeon-floors">{{ dungeonType.baseFloors }}\uCE35</div>
          </div>
        </div>
      </div>
      
      <!-- \uB09C\uC774\uB3C4 \uC120\uD0DD -->
      <div class="test-section" *ngIf="selectedDungeonType">
        <h3>\uB09C\uC774\uB3C4 \uC120\uD0DD</h3>
        <div class="difficulty-grid">
          <button
            class="difficulty-btn easy"
            [class.selected]="selectedDifficulty === 'easy'"
            (click)="selectDifficulty('easy')"
          >
            \u{1F60A} \uC26C\uC6C0
            <span class="difficulty-mult">\xD70.75</span>
          </button>
          <button
            class="difficulty-btn normal"
            [class.selected]="selectedDifficulty === 'normal'"
            (click)="selectDifficulty('normal')"
          >
            \u{1F610} \uBCF4\uD1B5
            <span class="difficulty-mult">\xD71.0</span>
          </button>
          <button
            class="difficulty-btn hard"
            [class.selected]="selectedDifficulty === 'hard'"
            (click)="selectDifficulty('hard')"
          >
            \u{1F630} \uC5B4\uB824\uC6C0
            <span class="difficulty-mult">\xD71.25</span>
          </button>
          <button
            class="difficulty-btn hell"
            [class.selected]="selectedDifficulty === 'hell'"
            (click)="selectDifficulty('hell')"
          >
            \u{1F480} \uC9C0\uC625
            <span class="difficulty-mult">\xD71.5</span>
          </button>
        </div>
      </div>
      
      <!-- \uD14C\uC2A4\uD2B8 \uC635\uC158 -->
      <div class="test-section" *ngIf="selectedDifficulty">
        <h3>\uD14C\uC2A4\uD2B8 \uC635\uC158</h3>
        <div class="test-options">
          <label class="option-item">
            <input type="checkbox" [(ngModel)]="dungeonTestOptions.godMode">
            <span>\u{1F6E1}\uFE0F \uBB34\uC801 \uBAA8\uB4DC (HP \uC790\uB3D9 \uD68C\uBCF5)</span>
          </label>
          <label class="option-item">
            <input type="checkbox" [(ngModel)]="dungeonTestOptions.oneHitKill">
            <span>\u2694\uFE0F \uC6D0\uD0AC \uBAA8\uB4DC (\uBAAC\uC2A4\uD130 1\uD0C0)</span>
          </label>
          <label class="option-item">
            <input type="checkbox" [(ngModel)]="dungeonTestOptions.showAllRooms">
            <span>\u{1F5FA}\uFE0F \uC804\uCCB4 \uB9F5 \uACF5\uAC1C</span>
          </label>
          <label class="option-item">
            <input type="checkbox" [(ngModel)]="dungeonTestOptions.skipCombat">
            <span>\u23ED\uFE0F \uC804\uD22C \uC2A4\uD0B5 (\uC790\uB3D9 \uC2B9\uB9AC)</span>
          </label>
          <label class="option-item">
            <input type="checkbox" [(ngModel)]="dungeonTestOptions.unlockAllRooms">
            <span>\u{1F513} \uBAA8\uB4E0 \uBC29 \uC7A0\uAE08 \uD574\uC81C</span>
          </label>
        </div>
      </div>
      
      <!-- \uD50C\uB808\uC774\uC5B4 \uC0C1\uD0DC -->
      <div class="test-section" *ngIf="selectedDifficulty">
        <h3>\uD50C\uB808\uC774\uC5B4 \uC0C1\uD0DC</h3>
        <div class="player-stats">
          <div class="stat-row">
            <label>\uB808\uBCA8:</label>
            <span>{{ playerCharacter.level }}</span>
          </div>
          <div class="stat-row">
            <label>HP:</label>
            <span>{{ playerCharacter.hp }} / {{ playerCharacter.maxHp }}</span>
          </div>
          <div class="stat-row">
            <label>MP:</label>
            <span>{{ playerCharacter.mp }} / {{ playerCharacter.maxMp }}</span>
          </div>
          <div class="stat-row">
            <label>\uACF5\uACA9\uB825:</label>
            <span>{{ playerCharacter.attack }}</span>
          </div>
          <div class="stat-row">
            <label>\uBC29\uC5B4\uB825:</label>
            <span>{{ playerCharacter.defense }}</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- \uB358\uC804 \uD0D0\uD5D8 \uD654\uBA74 (\uB358\uC804 \uC2DC\uC791 \uD6C4) -->
    <div class="dungeon-container" *ngIf="showDungeonPanel && currentDungeon && currentDungeonRoom">
      <app-dungeon-explorer
        [dungeon]="currentDungeon"
        [currentRoom]="currentDungeonRoom"
        [playerHp]="playerCharacter.hp"
        [playerMaxHp]="playerCharacter.maxHp"
        [playerMp]="playerCharacter.mp"
        [playerMaxMp]="playerCharacter.maxMp"
        [playerName]="playerCharacter.name"
        [playerLevel]="playerCharacter.level"
        [playerAttackPower]="playerCharacter.attack"
        [playerDefensePower]="playerCharacter.defense"
        [playerEquipment]="getPlayerEquipment()"
        [playerSkills]="getPlayerSkills()"
        (roomMove)="onDungeonRoomMove($event)"
        (monsterAttack)="onDungeonMonsterAttack($event)"
        (interactableUse)="onDungeonInteractableUse($event)"
        (dungeonEscape)="onDungeonEscape()"
        (floorMove)="onDungeonFloorMove($event)"
        (rewardsClaimed)="onDungeonRewardsClaimed($event)"
      ></app-dungeon-explorer>
    </div>
    
    <div class="dialog-footer" *ngIf="!showDungeonPanel">
      <button class="btn-secondary" (click)="closeDungeonDialog()">\uCDE8\uC18C</button>
      <button
        class="btn-primary"
        [disabled]="!selectedDungeonType || !selectedDifficulty"
        (click)="startDungeon()"
      >
        \u{1F3F0} \uB358\uC804 \uC785\uC7A5
      </button>
    </div>
  </div>
</div>

<!-- \uB358\uC804 \uD0D0\uD5D8 UI (DungeonExplorerComponent) - \uC804\uCCB4 \uD654\uBA74 \uC624\uBC84\uB808\uC774 -->
<div class="dungeon-overlay" *ngIf="showDungeonPanel && currentDungeon && currentDungeonRoom">
  <app-dungeon-explorer
    [dungeon]="currentDungeon"
    [currentRoom]="currentDungeonRoom"
    [playerHp]="playerCharacter.hp"
    [playerMaxHp]="playerCharacter.maxHp"
    [playerMp]="playerCharacter.mp"
    [playerMaxMp]="playerCharacter.maxMp"
    (roomMove)="onDungeonRoomMove($event)"
    (monsterAttack)="onDungeonMonsterAttack($event)"
    (interactableUse)="onDungeonInteractableUse($event)"
    (dungeonEscape)="onDungeonEscape()"
    (floorMove)="onDungeonFloorMove($event)"
    (rewardsClaimed)="onDungeonRewardsClaimed($event)"
  ></app-dungeon-explorer>
</div>

<!-- \uCE90\uB9AD\uD130 \uC778\uBCA4\uD1A0\uB9AC \uBAA8\uB2EC (\uAC8C\uC784 \uB0B4 \uC778\uBCA4\uD1A0\uB9AC \uD328\uB110\uACFC \uB3D9\uC77C\uD55C \uB514\uC544\uBE14\uB85C \uC2A4\uD0C0\uC77C) -->
<div class="character-inventory-modal-overlay" *ngIf="showCharacterInventoryModal" (click)="closeCharacterInventory()">
  <div class="character-inventory-modal game-panel inventory-panel" (click)="$event.stopPropagation()">
    <div class="panel-header">
      <h3>\u{1F392} {{ selectedCharacterForInventory?.name }}\uC758 \uC778\uBCA4\uD1A0\uB9AC & \uC7A5\uBE44</h3>
      <button class="close-btn" (click)="closeCharacterInventory()">\xD7</button>
    </div>
    
    <!-- \uCE90\uB9AD\uD130 \uC815\uBCF4 \uD45C\uC2DC -->
    <div class="character-info-bar" *ngIf="selectedCharacterGameData">
      <div class="info-badges">
        <span class="stat-badge level">Lv.{{ selectedCharacterGameData.playerCharacter.level }}</span>
        <span class="stat-badge gold">\u{1F4B0} {{ selectedCharacterGameData.playerCharacter.gold | number }}G</span>
      </div>
    </div>
    
    <!-- \uD0ED \uBA54\uB274 -->
    <div class="inventory-tabs">
      <button 
        class="tab-btn"
        [class.active]="characterInventoryTab === 'equipment'"
        (click)="characterInventoryTab = 'equipment'">
        \u2694\uFE0F \uC7A5\uBE44 & \uC778\uBCA4\uD1A0\uB9AC
      </button>
      <button 
        class="tab-btn"
        [class.active]="characterInventoryTab === 'shop'"
        (click)="characterInventoryTab = 'shop'">
        \u{1F6D2} \uC0C1\uC810
      </button>
    </div>
    
    <!-- \uC7A5\uBE44 & \uC778\uBCA4\uD1A0\uB9AC \uD0ED -->
    <div class="tab-content" *ngIf="selectedCharacterGameData && characterInventoryTab === 'equipment'">
      <!-- \uC7A5\uBE44 \uC2AC\uB86F \uC601\uC5ED - \uB514\uC544\uBE14\uB85C \uC2A4\uD0C0\uC77C -->
      <div class="equipment-slots-section">
        <h4 class="section-title">\u2694\uFE0F \uC7A5\uCC29 \uC911\uC778 \uC7A5\uBE44</h4>
        <div class="diablo-equipment-layout">
          <!-- \uC88C\uCE21 \uCEEC\uB7FC (\uBB34\uAE30, \uBC29\uC5B4\uAD6C) -->
          <div class="equipment-column left-column">
            <!-- \uBB34\uAE30 -->
            <div class="equipment-slot-diablo weapon-slot" 
                 [class.has-item]="selectedCharacterGameData.playerCharacter.equipment?.weapon"
                 [class.rarity-common]="selectedCharacterGameData.playerCharacter.equipment?.weapon?.rarity === 'common'"
                 [class.rarity-uncommon]="selectedCharacterGameData.playerCharacter.equipment?.weapon?.rarity === 'uncommon'"
                 [class.rarity-rare]="selectedCharacterGameData.playerCharacter.equipment?.weapon?.rarity === 'rare'"
                 [class.rarity-epic]="selectedCharacterGameData.playerCharacter.equipment?.weapon?.rarity === 'epic'"
                 [class.rarity-legendary]="selectedCharacterGameData.playerCharacter.equipment?.weapon?.rarity === 'legendary'">
              <div class="slot-icon">\u2694\uFE0F</div>
              <div class="slot-content" *ngIf="selectedCharacterGameData.playerCharacter.equipment?.weapon as weapon; else emptyWeapon">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{weapon.name || weapon.baseType}}</div>
                </div>
              </div>
              <ng-template #emptyWeapon>
                <div class="slot-empty-text">\uBB34\uAE30</div>
              </ng-template>
            </div>

            <!-- \uBC29\uC5B4\uAD6C -->
            <div class="equipment-slot-diablo armor-slot" 
                 [class.has-item]="selectedCharacterGameData.playerCharacter.equipment?.armor"
                 [class.rarity-common]="selectedCharacterGameData.playerCharacter.equipment?.armor?.rarity === 'common'"
                 [class.rarity-uncommon]="selectedCharacterGameData.playerCharacter.equipment?.armor?.rarity === 'uncommon'"
                 [class.rarity-rare]="selectedCharacterGameData.playerCharacter.equipment?.armor?.rarity === 'rare'"
                 [class.rarity-epic]="selectedCharacterGameData.playerCharacter.equipment?.armor?.rarity === 'epic'"
                 [class.rarity-legendary]="selectedCharacterGameData.playerCharacter.equipment?.armor?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F6E1}\uFE0F</div>
              <div class="slot-content" *ngIf="selectedCharacterGameData.playerCharacter.equipment?.armor as armor; else emptyArmor">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{armor.name || armor.baseType}}</div>
                </div>
              </div>
              <ng-template #emptyArmor>
                <div class="slot-empty-text">\uBC29\uC5B4\uAD6C</div>
              </ng-template>
            </div>
          </div>

          <!-- \uC911\uC559 \uCEEC\uB7FC (\uBA38\uB9AC, \uBAA9, \uD5C8\uB9AC) -->
          <div class="equipment-column center-column">
            <!-- \uD22C\uAD6C -->
            <div class="equipment-slot-diablo helmet-slot" 
                 [class.has-item]="selectedCharacterGameData.playerCharacter.equipment?.helmet"
                 [class.rarity-common]="selectedCharacterGameData.playerCharacter.equipment?.helmet?.rarity === 'common'"
                 [class.rarity-uncommon]="selectedCharacterGameData.playerCharacter.equipment?.helmet?.rarity === 'uncommon'"
                 [class.rarity-rare]="selectedCharacterGameData.playerCharacter.equipment?.helmet?.rarity === 'rare'"
                 [class.rarity-epic]="selectedCharacterGameData.playerCharacter.equipment?.helmet?.rarity === 'epic'"
                 [class.rarity-legendary]="selectedCharacterGameData.playerCharacter.equipment?.helmet?.rarity === 'legendary'">
              <div class="slot-icon">\u26D1\uFE0F</div>
              <div class="slot-content" *ngIf="selectedCharacterGameData.playerCharacter.equipment?.helmet as helmet; else emptyHelmet">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{helmet.name || helmet.baseType}}</div>
                </div>
              </div>
              <ng-template #emptyHelmet>
                <div class="slot-empty-text">\uD22C\uAD6C</div>
              </ng-template>
            </div>

            <!-- \uBAA9\uAC78\uC774 -->
            <div class="equipment-slot-diablo amulet-slot" 
                 [class.has-item]="selectedCharacterGameData.playerCharacter.equipment?.amulet"
                 [class.rarity-common]="selectedCharacterGameData.playerCharacter.equipment?.amulet?.rarity === 'common'"
                 [class.rarity-uncommon]="selectedCharacterGameData.playerCharacter.equipment?.amulet?.rarity === 'uncommon'"
                 [class.rarity-rare]="selectedCharacterGameData.playerCharacter.equipment?.amulet?.rarity === 'rare'"
                 [class.rarity-epic]="selectedCharacterGameData.playerCharacter.equipment?.amulet?.rarity === 'epic'"
                 [class.rarity-legendary]="selectedCharacterGameData.playerCharacter.equipment?.amulet?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F4FF}</div>
              <div class="slot-content" *ngIf="selectedCharacterGameData.playerCharacter.equipment?.amulet as amulet; else emptyAmulet">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{amulet.name || amulet.baseType}}</div>
                </div>
              </div>
              <ng-template #emptyAmulet>
                <div class="slot-empty-text">\uBAA9\uAC78\uC774</div>
              </ng-template>
            </div>

            <!-- \uD5C8\uB9AC\uB760 -->
            <div class="equipment-slot-diablo belt-slot" 
                 [class.has-item]="selectedCharacterGameData.playerCharacter.equipment?.belt"
                 [class.rarity-common]="selectedCharacterGameData.playerCharacter.equipment?.belt?.rarity === 'common'"
                 [class.rarity-uncommon]="selectedCharacterGameData.playerCharacter.equipment?.belt?.rarity === 'uncommon'"
                 [class.rarity-rare]="selectedCharacterGameData.playerCharacter.equipment?.belt?.rarity === 'rare'"
                 [class.rarity-epic]="selectedCharacterGameData.playerCharacter.equipment?.belt?.rarity === 'epic'"
                 [class.rarity-legendary]="selectedCharacterGameData.playerCharacter.equipment?.belt?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F454}</div>
              <div class="slot-content" *ngIf="selectedCharacterGameData.playerCharacter.equipment?.belt as belt; else emptyBelt">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{belt.name || belt.baseType}}</div>
                </div>
              </div>
              <ng-template #emptyBelt>
                <div class="slot-empty-text">\uD5C8\uB9AC\uB760</div>
              </ng-template>
            </div>
          </div>

          <!-- \uC6B0\uCE21 \uCEEC\uB7FC (\uC7A5\uAC11, \uC2E0\uBC1C) -->
          <div class="equipment-column right-column">
            <!-- \uC7A5\uAC11 -->
            <div class="equipment-slot-diablo gloves-slot" 
                 [class.has-item]="selectedCharacterGameData.playerCharacter.equipment?.gloves"
                 [class.rarity-common]="selectedCharacterGameData.playerCharacter.equipment?.gloves?.rarity === 'common'"
                 [class.rarity-uncommon]="selectedCharacterGameData.playerCharacter.equipment?.gloves?.rarity === 'uncommon'"
                 [class.rarity-rare]="selectedCharacterGameData.playerCharacter.equipment?.gloves?.rarity === 'rare'"
                 [class.rarity-epic]="selectedCharacterGameData.playerCharacter.equipment?.gloves?.rarity === 'epic'"
                 [class.rarity-legendary]="selectedCharacterGameData.playerCharacter.equipment?.gloves?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F9E4}</div>
              <div class="slot-content" *ngIf="selectedCharacterGameData.playerCharacter.equipment?.gloves as gloves; else emptyGloves">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{gloves.name || gloves.baseType}}</div>
                </div>
              </div>
              <ng-template #emptyGloves>
                <div class="slot-empty-text">\uC7A5\uAC11</div>
              </ng-template>
            </div>

            <!-- \uC2E0\uBC1C -->
            <div class="equipment-slot-diablo boots-slot" 
                 [class.has-item]="selectedCharacterGameData.playerCharacter.equipment?.boots"
                 [class.rarity-common]="selectedCharacterGameData.playerCharacter.equipment?.boots?.rarity === 'common'"
                 [class.rarity-uncommon]="selectedCharacterGameData.playerCharacter.equipment?.boots?.rarity === 'uncommon'"
                 [class.rarity-rare]="selectedCharacterGameData.playerCharacter.equipment?.boots?.rarity === 'rare'"
                 [class.rarity-epic]="selectedCharacterGameData.playerCharacter.equipment?.boots?.rarity === 'epic'"
                 [class.rarity-legendary]="selectedCharacterGameData.playerCharacter.equipment?.boots?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F462}</div>
              <div class="slot-content" *ngIf="selectedCharacterGameData.playerCharacter.equipment?.boots as boots; else emptyBoots">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{boots.name || boots.baseType}}</div>
                </div>
              </div>
              <ng-template #emptyBoots>
                <div class="slot-empty-text">\uC2E0\uBC1C</div>
              </ng-template>
            </div>
          </div>

          <!-- \uD558\uB2E8: \uBC18\uC9C0 \uC2AC\uB86F -->
          <div class="equipment-rings-row">
            <!-- \uBC18\uC9C01 -->
            <div class="equipment-slot-diablo ring-slot ring-left" 
                 [class.has-item]="selectedCharacterGameData.playerCharacter.equipment?.ring1"
                 [class.rarity-common]="selectedCharacterGameData.playerCharacter.equipment?.ring1?.rarity === 'common'"
                 [class.rarity-uncommon]="selectedCharacterGameData.playerCharacter.equipment?.ring1?.rarity === 'uncommon'"
                 [class.rarity-rare]="selectedCharacterGameData.playerCharacter.equipment?.ring1?.rarity === 'rare'"
                 [class.rarity-epic]="selectedCharacterGameData.playerCharacter.equipment?.ring1?.rarity === 'epic'"
                 [class.rarity-legendary]="selectedCharacterGameData.playerCharacter.equipment?.ring1?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F48D}</div>
              <div class="slot-content" *ngIf="selectedCharacterGameData.playerCharacter.equipment?.ring1 as ring1; else emptyRing1">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{ring1.name || ring1.baseType}}</div>
                </div>
              </div>
              <ng-template #emptyRing1>
                <div class="slot-empty-text">\uBC18\uC9C0</div>
              </ng-template>
            </div>

            <!-- \uBC18\uC9C02 -->
            <div class="equipment-slot-diablo ring-slot ring-right" 
                 [class.has-item]="selectedCharacterGameData.playerCharacter.equipment?.ring2"
                 [class.rarity-common]="selectedCharacterGameData.playerCharacter.equipment?.ring2?.rarity === 'common'"
                 [class.rarity-uncommon]="selectedCharacterGameData.playerCharacter.equipment?.ring2?.rarity === 'uncommon'"
                 [class.rarity-rare]="selectedCharacterGameData.playerCharacter.equipment?.ring2?.rarity === 'rare'"
                 [class.rarity-epic]="selectedCharacterGameData.playerCharacter.equipment?.ring2?.rarity === 'epic'"
                 [class.rarity-legendary]="selectedCharacterGameData.playerCharacter.equipment?.ring2?.rarity === 'legendary'">
              <div class="slot-icon">\u{1F48D}</div>
              <div class="slot-content" *ngIf="selectedCharacterGameData.playerCharacter.equipment?.ring2 as ring2; else emptyRing2">
                <div class="item-tooltip">
                  <div class="tooltip-name">{{ring2.name || ring2.baseType}}</div>
                </div>
              </div>
              <ng-template #emptyRing2>
                <div class="slot-empty-text">\uBC18\uC9C0</div>
              </ng-template>
            </div>
          </div>
        </div>
      </div>

      <!-- \uC778\uBCA4\uD1A0\uB9AC \uADF8\uB9AC\uB4DC \uC601\uC5ED -->
      <div class="inventory-tab-grid">
        <h4 class="section-title">\u{1F392} \uBCF4\uC720 \uC544\uC774\uD15C</h4>
        
        <!-- \uADF8\uB9AC\uB4DC \uCEE8\uD14C\uC774\uB108 -->
        <div class="inventory-grid-container">
          <div class="inventory-grid-cells">
            <!-- \uC544\uC774\uD15C \uC140 -->
            <div *ngFor="let item of selectedCharacterGameData.playerCharacter.inventory; let i = index"
                 class="inventory-cell"
                 [class]="'rarity-' + (item.rarity || 'common')"
                 [title]="item.name">
              
              <div class="cell-content">
                <!-- \uC544\uC774\uCF58 -->
                <div class="cell-icon">{{item.icon || '\u{1F4E6}'}}</div>
                
                <!-- \uC774\uB984 -->
                <div class="cell-name" [title]="item.name">
                  {{item.name}}
                </div>
                
                <!-- \uC218\uB7C9 -->
                <div class="cell-quantity" *ngIf="item.quantity && item.quantity > 1">
                  \xD7{{item.quantity}}
                </div>
              </div>
              
              <!-- \uD234\uD301 -->
              <div class="item-tooltip-detail">
                <div class="tooltip-header" [class]="'rarity-' + (item.rarity || 'common')">
                  <div class="tooltip-name">{{item.name}}</div>
                  <div class="tooltip-rarity">{{item.rarity || 'common'}}</div>
                </div>
                <div class="tooltip-type">{{item.type}}</div>
                <div class="tooltip-stats" *ngIf="item.stats">
                  <div *ngIf="item.stats.attack">\u2694\uFE0F \uACF5\uACA9\uB825: +{{item.stats.attack}}</div>
                  <div *ngIf="item.stats.defense">\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825: +{{item.stats.defense}}</div>
                </div>
                <div class="tooltip-description" *ngIf="item.description">{{item.description}}</div>
              </div>
            </div>
            
            <!-- \uBE48 \uCE78 (\uC544\uC774\uD15C\uC774 \uC5C6\uC744 \uB54C\uB3C4 \uADF8\uB9AC\uB4DC \uAD6C\uC870 \uC720\uC9C0) -->
            <div *ngFor="let empty of getEmptyCharacterInventorySlots()"
                 class="inventory-cell empty">
              <div class="cell-content">
                <div class="empty-icon">\u{1F4E6}</div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- \uD558\uB2E8 \uC815\uBCF4 -->
        <div class="inventory-footer">
          <span class="inventory-count">
            {{(selectedCharacterGameData.playerCharacter.inventory || []).length}} / {{maxInventorySize}} \uC544\uC774\uD15C
          </span>
        </div>
      </div>
    </div>
    <!-- \uC7A5\uBE44 & \uC778\uBCA4\uD1A0\uB9AC \uD0ED \uB05D -->
    
    <!-- \uC0C1\uC810 \uD0ED -->
    <div class="tab-content" *ngIf="selectedCharacterGameData && characterInventoryTab === 'shop'">
      <div class="shop-wrapper">
        <!-- \uC0C1\uC810 \uD5E4\uB354 -->
        <div class="shop-header">
          <div class="shop-title-section">
            <h4 class="shop-title">\u{1F3EA} \uBAA8\uD5D8\uAC00 \uC0C1\uC810</h4>
            <p class="shop-subtitle">AI\uAC00 \uC0DD\uC131\uD55C \uD2B9\uBCC4\uD55C \uC544\uC774\uD15C\uC744 \uAD6C\uB9E4\uD558\uC138\uC694</p>
          </div>
          <div class="shop-wallet">
            <div class="wallet-icon">\u{1F4B0}</div>
            <div class="wallet-info">
              <span class="wallet-label">\uBCF4\uC720 \uACE8\uB4DC</span>
              <span class="wallet-amount">{{selectedCharacterGameData.playerCharacter.gold | number}} G</span>
            </div>
          </div>
        </div>

        <!-- \uC0C1\uC810 \uC544\uC774\uD15C \uADF8\uB9AC\uB4DC -->
        <div class="shop-items-container" *ngIf="savedItems.length > 0">
          <div 
            class="shop-item-card"
            *ngFor="let item of savedItems"
            [class.grade-legendary]="item.grade === '\uC2E0\uD654' || item.grade === '\uC804\uC124'"
            [class.grade-epic]="item.grade === '\uC601\uC6C5'"
            [class.grade-rare]="item.grade === '\uD76C\uADC0'"
            [class.grade-uncommon]="item.grade === '\uACE0\uAE09'"
            [class.grade-common]="item.grade === '\uC77C\uBC18'">
            
            <!-- \uC544\uC774\uD15C \uBC30\uC9C0 -->
            <div class="item-badge-container">
              <span class="item-grade-badge">{{item.grade}}</span>
              <span class="item-type-badge">{{item.type}}</span>
            </div>

            <!-- \uC544\uC774\uD15C \uC774\uBBF8\uC9C0 \uC601\uC5ED -->
            <div class="item-image-section">
              <div class="item-icon-large">\u{1F4E6}</div>
            </div>

            <!-- \uC544\uC774\uD15C \uC815\uBCF4 -->
            <div class="item-info-section">
              <h5 class="item-name">{{item.name}}</h5>
              <p class="item-description">{{item.description}}</p>

              <!-- \uC544\uC774\uD15C \uB2A5\uB825\uCE58 -->
              <div class="item-stats-row" *ngIf="item.stats && (item.stats.attack || item.stats.defense || item.stats.hp || item.stats.mp)">
                <div class="stat-chip" *ngIf="item.stats.attack">
                  <span class="stat-icon">\u2694\uFE0F</span>
                  <span class="stat-value">+{{item.stats.attack}}</span>
                </div>
                <div class="stat-chip" *ngIf="item.stats.defense">
                  <span class="stat-icon">\u{1F6E1}\uFE0F</span>
                  <span class="stat-value">+{{item.stats.defense}}</span>
                </div>
                <div class="stat-chip" *ngIf="item.stats.hp">
                  <span class="stat-icon">\u2764\uFE0F</span>
                  <span class="stat-value">+{{item.stats.hp}}</span>
                </div>
                <div class="stat-chip" *ngIf="item.stats.mp">
                  <span class="stat-icon">\u{1F499}</span>
                  <span class="stat-value">+{{item.stats.mp}}</span>
                </div>
              </div>

              <!-- \uC544\uC774\uD15C \uD6A8\uACFC -->
              <div class="item-effects" *ngIf="item.effects && item.effects.length > 0">
                <div class="effect-item" *ngFor="let effect of item.effects.slice(0, 2)">
                  <span class="effect-icon">\u2728</span>
                  <span class="effect-text">{{effect}}</span>
                </div>
              </div>
            </div>

            <!-- \uAD6C\uB9E4 \uBC84\uD2BC \uC601\uC5ED -->
            <div class="item-purchase-section">
              <div class="item-price-display">
                <span class="price-icon">\u{1F4B0}</span>
                <span class="price-amount">{{item.price || calculateItemPriceByGrade(item.grade)}}</span>
                <span class="price-unit">G</span>
              </div>
              <button 
                class="purchase-button"
                [class.can-buy]="selectedCharacterGameData.playerCharacter.gold >= (item.price || calculateItemPriceByGrade(item.grade))"
                [class.cannot-buy]="selectedCharacterGameData.playerCharacter.gold < (item.price || calculateItemPriceByGrade(item.grade))"
                [disabled]="selectedCharacterGameData.playerCharacter.gold < (item.price || calculateItemPriceByGrade(item.grade))"
                (click)="buyItemForCharacter(item, $event)">
                <span *ngIf="selectedCharacterGameData.playerCharacter.gold >= (item.price || calculateItemPriceByGrade(item.grade))">
                  <span class="btn-icon">\u{1F6D2}</span> \uAD6C\uB9E4\uD558\uAE30
                </span>
                <span *ngIf="selectedCharacterGameData.playerCharacter.gold < (item.price || calculateItemPriceByGrade(item.grade))">
                  <span class="btn-icon">\u{1F4B8}</span> \uACE8\uB4DC \uBD80\uC871
                </span>
              </button>
            </div>
          </div>
        </div>

        <!-- \uBE48 \uC0C1\uC810 \uBA54\uC2DC\uC9C0 -->
        <div *ngIf="savedItems.length === 0" class="empty-shop-state">
          <div class="empty-icon">\u{1F3EA}</div>
          <h5 class="empty-title">\uC0C1\uC810\uC5D0 \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4</h5>
          <p class="empty-message">AI \uC544\uC774\uD15C \uC0DD\uC131\uAE30\uB85C \uD2B9\uBCC4\uD55C \uC544\uC774\uD15C\uC744 \uB9CC\uB4E4\uC5B4\uBCF4\uC138\uC694!</p>
          <div class="empty-hint">
            <span class="hint-icon">\u{1F4A1}</span>
            <span class="hint-text">\uD648 \uD654\uBA74\uC758 "AI \uC544\uC774\uD15C \uC0DD\uC131" \uBA54\uB274\uB97C \uC774\uC6A9\uD558\uC138\uC694</span>
          </div>
        </div>
      </div>
    </div>
    <!-- \uC0C1\uC810 \uD0ED \uB05D -->
    
    <div class="panel-footer">
      <button class="btn-secondary" (click)="closeCharacterInventory()">\uB2EB\uAE30</button>
    </div>
  </div>
</div>

`, styles: ['@charset "UTF-8";\n\n/* src/app/modules/novel/components/novel-generator/novel-generator.component.scss */\n.dialogue {\n  color: #2196F3;\n  cursor: default;\n  padding: 2px 4px;\n  border-radius: 4px;\n  display: inline-block;\n}\n.dialogue-choice {\n  display: block !important;\n  margin: 16px 0 !important;\n  padding: 16px 20px;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  border: 2px solid transparent;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 255, 255, 0.1) 0%,\n      rgba(255, 255, 255, 0.05) 100%);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  clear: both;\n  width: 100%;\n  box-sizing: border-box;\n}\np .dialogue-choice {\n  display: block !important;\n  margin: 16px -20px !important;\n  max-width: calc(100% + 40px);\n}\n.dialogue-choice:hover {\n  transform: translateX(8px) scale(1.02);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\n}\n.dialogue-choice.selected {\n  transform: translateX(12px) scale(1.03);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);\n  font-weight: 500;\n}\n.dialogue-choice .choice-icon {\n  font-size: 20px;\n  margin-right: 12px;\n  vertical-align: middle;\n}\n.dialogue-choice .choice-text {\n  font-size: 16px;\n  line-height: 1.6;\n  vertical-align: middle;\n}\n.dialogue-choice .choice-label {\n  display: inline-block;\n  margin-left: 12px;\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  vertical-align: middle;\n  letter-spacing: 0.5px;\n}\n.dialogue-choice[data-choice-type=positive] {\n  border-color: #4CAF50;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.1) 0%,\n      rgba(76, 175, 80, 0.05) 100%);\n}\n.dialogue-choice[data-choice-type=positive]:hover {\n  border-color: #45a049;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.15) 0%,\n      rgba(76, 175, 80, 0.08) 100%);\n}\n.dialogue-choice[data-choice-type=positive].selected {\n  border-color: #45a049;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.25) 0%,\n      rgba(76, 175, 80, 0.15) 100%);\n  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);\n}\n.dialogue-choice[data-choice-type=positive] .choice-label {\n  background: #4CAF50;\n  color: white;\n}\n.dialogue-choice[data-choice-type=negative] {\n  border-color: #f44336;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(244, 67, 54, 0.1) 0%,\n      rgba(244, 67, 54, 0.05) 100%);\n}\n.dialogue-choice[data-choice-type=negative]:hover {\n  border-color: #da190b;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(244, 67, 54, 0.15) 0%,\n      rgba(244, 67, 54, 0.08) 100%);\n}\n.dialogue-choice[data-choice-type=negative].selected {\n  border-color: #da190b;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(244, 67, 54, 0.25) 0%,\n      rgba(244, 67, 54, 0.15) 100%);\n  box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.2);\n}\n.dialogue-choice[data-choice-type=negative] .choice-label {\n  background: #f44336;\n  color: white;\n}\n.dialogue-choice[data-choice-type=neutral] {\n  border-color: #9E9E9E;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(158, 158, 158, 0.1) 0%,\n      rgba(158, 158, 158, 0.05) 100%);\n}\n.dialogue-choice[data-choice-type=neutral]:hover {\n  border-color: #757575;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(158, 158, 158, 0.15) 0%,\n      rgba(158, 158, 158, 0.08) 100%);\n}\n.dialogue-choice[data-choice-type=neutral].selected {\n  border-color: #757575;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(158, 158, 158, 0.25) 0%,\n      rgba(158, 158, 158, 0.15) 100%);\n  box-shadow: 0 0 0 3px rgba(158, 158, 158, 0.2);\n}\n.dialogue-choice[data-choice-type=neutral] .choice-label {\n  background: #9E9E9E;\n  color: white;\n}\n.dialogue-choice[data-choice-type=aggressive] {\n  border-color: #FF5722;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 87, 34, 0.1) 0%,\n      rgba(255, 87, 34, 0.05) 100%);\n}\n.dialogue-choice[data-choice-type=aggressive]:hover {\n  border-color: #E64A19;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 87, 34, 0.15) 0%,\n      rgba(255, 87, 34, 0.08) 100%);\n}\n.dialogue-choice[data-choice-type=aggressive].selected {\n  border-color: #E64A19;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 87, 34, 0.25) 0%,\n      rgba(255, 87, 34, 0.15) 100%);\n  box-shadow: 0 0 0 3px rgba(255, 87, 34, 0.2);\n}\n.dialogue-choice[data-choice-type=aggressive] .choice-label {\n  background: #FF5722;\n  color: white;\n}\n.dialogue-choice[data-choice-type=passive] {\n  border-color: #2196F3;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(33, 150, 243, 0.1) 0%,\n      rgba(33, 150, 243, 0.05) 100%);\n}\n.dialogue-choice[data-choice-type=passive]:hover {\n  border-color: #1976D2;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(33, 150, 243, 0.15) 0%,\n      rgba(33, 150, 243, 0.08) 100%);\n}\n.dialogue-choice[data-choice-type=passive].selected {\n  border-color: #1976D2;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(33, 150, 243, 0.25) 0%,\n      rgba(33, 150, 243, 0.15) 100%);\n  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);\n}\n.dialogue-choice[data-choice-type=passive] .choice-label {\n  background: #2196F3;\n  color: white;\n}\n.selectable {\n  position: relative;\n}\nbody.dark-theme .dialogue-choice,\nbody.dark-mode .dialogue-choice,\n[data-theme=dark] .dialogue-choice {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 255, 255, 0.05) 0%,\n      rgba(255, 255, 255, 0.02) 100%);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\nbody.dark-theme .dialogue-choice:hover,\nbody.dark-mode .dialogue-choice:hover,\n[data-theme=dark] .dialogue-choice:hover {\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);\n}\nbody.dark-theme .dialogue-choice[data-choice-type=positive],\nbody.dark-mode .dialogue-choice[data-choice-type=positive],\n[data-theme=dark] .dialogue-choice[data-choice-type=positive] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.15) 0%,\n      rgba(76, 175, 80, 0.08) 100%);\n}\nbody.dark-theme .dialogue-choice[data-choice-type=positive]:hover,\nbody.dark-mode .dialogue-choice[data-choice-type=positive]:hover,\n[data-theme=dark] .dialogue-choice[data-choice-type=positive]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.2) 0%,\n      rgba(76, 175, 80, 0.12) 100%);\n}\nbody.dark-theme .dialogue-choice[data-choice-type=positive].selected,\nbody.dark-mode .dialogue-choice[data-choice-type=positive].selected,\n[data-theme=dark] .dialogue-choice[data-choice-type=positive].selected {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.3) 0%,\n      rgba(76, 175, 80, 0.2) 100%);\n}\nbody.dark-theme .dialogue-choice[data-choice-type=negative],\nbody.dark-mode .dialogue-choice[data-choice-type=negative],\n[data-theme=dark] .dialogue-choice[data-choice-type=negative] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(244, 67, 54, 0.15) 0%,\n      rgba(244, 67, 54, 0.08) 100%);\n}\nbody.dark-theme .dialogue-choice[data-choice-type=negative]:hover,\nbody.dark-mode .dialogue-choice[data-choice-type=negative]:hover,\n[data-theme=dark] .dialogue-choice[data-choice-type=negative]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(244, 67, 54, 0.2) 0%,\n      rgba(244, 67, 54, 0.12) 100%);\n}\nbody.dark-theme .dialogue-choice[data-choice-type=negative].selected,\nbody.dark-mode .dialogue-choice[data-choice-type=negative].selected,\n[data-theme=dark] .dialogue-choice[data-choice-type=negative].selected {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(244, 67, 54, 0.3) 0%,\n      rgba(244, 67, 54, 0.2) 100%);\n}\nbody.dark-theme .dialogue,\nbody.dark-mode .dialogue,\n[data-theme=dark] .dialogue {\n  color: #64B5F6;\n}\n.battle-trigger-button {\n  display: block !important;\n  margin: 20px 0 !important;\n  padding: 20px 24px;\n  border-radius: 16px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  border: 3px solid #FF5722;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 87, 34, 0.15) 0%,\n      rgba(255, 87, 34, 0.08) 100%);\n  box-shadow: 0 4px 12px rgba(255, 87, 34, 0.3);\n  text-align: center;\n  font-weight: 600;\n  color: #FF5722;\n  width: 100%;\n  box-sizing: border-box;\n}\n.battle-trigger-button:hover {\n  transform: scale(1.05);\n  box-shadow: 0 6px 20px rgba(255, 87, 34, 0.4);\n  border-color: #E64A19;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 87, 34, 0.25) 0%,\n      rgba(255, 87, 34, 0.15) 100%);\n}\n.battle-trigger-button:active {\n  transform: scale(0.98);\n}\n.battle-trigger-button .battle-icon {\n  font-size: 28px;\n  margin-right: 12px;\n  vertical-align: middle;\n  animation: battlePulse 1.5s ease-in-out infinite;\n}\n@keyframes battlePulse {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n}\n.battle-trigger-button .battle-text {\n  font-size: 18px;\n  vertical-align: middle;\n  letter-spacing: 1px;\n}\nbody.dark-theme .battle-trigger-button,\nbody.dark-mode .battle-trigger-button,\n[data-theme=dark] .battle-trigger-button {\n  border-color: #FF7043;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 112, 67, 0.2) 0%,\n      rgba(255, 112, 67, 0.1) 100%);\n  color: #FF7043;\n}\nbody.dark-theme .battle-trigger-button:hover,\nbody.dark-mode .battle-trigger-button:hover,\n[data-theme=dark] .battle-trigger-button:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 112, 67, 0.3) 0%,\n      rgba(255, 112, 67, 0.18) 100%);\n  box-shadow: 0 6px 20px rgba(255, 112, 67, 0.5);\n}\n.dialogue-selection-hint {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  background: rgba(33, 150, 243, 0.9);\n  color: white;\n  padding: 12px 16px;\n  border-radius: 8px;\n  font-size: 13px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  z-index: 1000;\n  animation: fadeIn 0.3s ease-in;\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n.text-battle-display {\n  margin: 30px 0;\n  padding: 20px;\n  background: var(--bg-secondary);\n  border: 2px solid #FF5722;\n  border-radius: 12px;\n  box-shadow: 0 4px 16px rgba(255, 87, 34, 0.2);\n}\n.battle-text-divider {\n  text-align: center;\n  font-size: 18px;\n  font-weight: bold;\n  color: #FF5722;\n  margin: 20px 0;\n  padding: 10px 0;\n  border-top: 2px solid #FF5722;\n  border-bottom: 2px solid #FF5722;\n  letter-spacing: 2px;\n}\n.battle-text-participants {\n  margin: 20px 0;\n  padding: 15px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  font-size: 16px;\n  line-height: 1.8;\n}\n.battle-text-participants p {\n  margin: 8px 0;\n}\n.battle-character-info {\n  padding: 15px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  margin: 10px 0;\n  border: 2px solid var(--border-color);\n}\n.battle-character-info .character-name {\n  font-size: 18px;\n  margin-bottom: 12px;\n  color: var(--text-primary);\n}\n.stat-row {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin: 8px 0;\n}\n.stat-label {\n  min-width: 35px;\n  font-weight: bold;\n  font-size: 14px;\n  color: var(--text-secondary);\n}\n.stat-bar-container {\n  flex: 1;\n  height: 24px;\n  background: var(--bg-tertiary);\n  border-radius: 12px;\n  overflow: hidden;\n  border: 2px solid var(--border-color);\n  position: relative;\n}\n.stat-bar {\n  height: 100%;\n  transition: width 0.5s ease-out;\n  border-radius: 10px;\n  position: relative;\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n.stat-bar::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 50%;\n  background:\n    linear-gradient(\n      to bottom,\n      rgba(255, 255, 255, 0.3),\n      transparent);\n  border-radius: 10px 10px 0 0;\n}\n.hp-bar {\n  background:\n    linear-gradient(\n      90deg,\n      #ef5350 0%,\n      #f44336 50%,\n      #e53935 100%);\n}\n.mp-bar {\n  background:\n    linear-gradient(\n      90deg,\n      #42a5f5 0%,\n      #2196f3 50%,\n      #1e88e5 100%);\n}\n.stat-value {\n  min-width: 80px;\n  text-align: right;\n  font-size: 14px;\n  font-weight: bold;\n  color: var(--text-primary);\n}\n.stat-value span {\n  color: var(--accent-primary);\n}\n.battle-text-log {\n  margin: 20px 0;\n  padding: 20px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  max-height: 400px;\n  overflow-y: auto;\n  border: 1px solid var(--border-color);\n}\n.battle-text-entry {\n  padding: 8px 12px;\n  margin: 6px 0;\n  background: var(--bg-secondary);\n  border-left: 3px solid #2196F3;\n  border-radius: 4px;\n  font-size: 15px;\n  line-height: 1.6;\n}\n.battle-text-result {\n  margin: 20px 0;\n}\n.battle-text-actions {\n  margin: 20px 0;\n  text-align: center;\n}\n.battle-text-actions p {\n  font-size: 18px;\n  font-weight: bold;\n  margin-bottom: 15px;\n  color: var(--accent-primary);\n}\n.battle-text-actions .action-buttons {\n  display: flex;\n  gap: 10px;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n.battle-text-actions button {\n  min-width: 120px;\n}\nbody.dark-theme .text-battle-display,\nbody.dark-mode .text-battle-display,\n[data-theme=dark] .text-battle-display {\n  background: rgba(255, 87, 34, 0.05);\n  border-color: #FF7043;\n  box-shadow: 0 4px 16px rgba(255, 112, 67, 0.3);\n}\nbody.dark-theme .battle-text-divider,\nbody.dark-mode .battle-text-divider,\n[data-theme=dark] .battle-text-divider {\n  color: #FF7043;\n  border-color: #FF7043;\n}\nbody.dark-theme .battle-text-entry,\nbody.dark-mode .battle-text-entry,\n[data-theme=dark] .battle-text-entry {\n  border-left-color: #4fc3f7;\n}\nbody.dark-theme .battle-character-info,\nbody.dark-mode .battle-character-info,\n[data-theme=dark] .battle-character-info {\n  background: rgba(45, 45, 45, 0.8);\n  border-color: #555555;\n}\nbody.dark-theme .stat-bar-container,\nbody.dark-mode .stat-bar-container,\n[data-theme=dark] .stat-bar-container {\n  background: rgba(64, 64, 64, 0.8);\n  border-color: #666666;\n}\nbody.dark-theme .hp-bar,\nbody.dark-mode .hp-bar,\n[data-theme=dark] .hp-bar {\n  background:\n    linear-gradient(\n      90deg,\n      #d32f2f 0%,\n      #f44336 50%,\n      #ef5350 100%);\n}\nbody.dark-theme .mp-bar,\nbody.dark-mode .mp-bar,\n[data-theme=dark] .mp-bar {\n  background:\n    linear-gradient(\n      90deg,\n      #1565c0 0%,\n      #2196f3 50%,\n      #42a5f5 100%);\n}\n@media (max-width: 768px) {\n  .game-layout.mobile {\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    overflow: hidden;\n  }\n  .left-panel-container.mobile,\n  .right-panel-container.mobile {\n    position: fixed !important;\n    top: 0;\n    left: 0;\n    width: 85vw !important;\n    max-width: 320px !important;\n    height: 100vh !important;\n    z-index: 1000;\n    transition: transform 0.3s ease;\n  }\n  .left-panel-container.mobile.collapsed,\n  .right-panel-container.mobile.collapsed {\n    transform: translateX(-100%) !important;\n  }\n  .left-panel-container.mobile:not(.collapsed),\n  .right-panel-container.mobile:not(.collapsed) {\n    transform: translateX(0) !important;\n    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);\n  }\n  .right-panel-container.mobile {\n    left: auto;\n    right: 0;\n  }\n  .right-panel-container.mobile.collapsed {\n    transform: translateX(100%) !important;\n  }\n  .main-content-area.mobile {\n    width: 100% !important;\n    height: 100vh !important;\n    padding: 0 !important;\n    margin: 0 !important;\n  }\n  .game-status-bar.mobile {\n    height: 56px !important;\n    min-height: 56px !important;\n    max-height: 56px !important;\n    padding: 6px 8px !important;\n    display: flex !important;\n    flex-wrap: nowrap !important;\n    justify-content: space-between !important;\n    align-items: center !important;\n    gap: 6px !important;\n    overflow: hidden !important;\n  }\n  .game-status-bar.mobile .toggle-btn {\n    min-width: 44px !important;\n    width: 44px !important;\n    height: 44px !important;\n    padding: 10px !important;\n    flex-shrink: 0;\n  }\n  .game-status-bar.mobile .back-home-btn {\n    min-width: 44px !important;\n    width: 44px !important;\n    height: 44px !important;\n    padding: 10px !important;\n    flex-shrink: 0;\n  }\n  .game-status-bar.mobile .back-home-btn span {\n    display: none !important;\n  }\n  .game-status-bar.mobile .status-bar-actions:not(.mobile-actions) {\n    display: none !important;\n  }\n  .game-status-bar.mobile .status-bar-actions.mobile-actions {\n    display: flex !important;\n    gap: 8px !important;\n    flex: 1;\n    justify-content: flex-end !important;\n    align-items: center !important;\n  }\n  .game-status-bar.mobile .status-bar-actions.mobile-actions button {\n    min-width: 44px !important;\n    width: 44px !important;\n    height: 44px !important;\n    padding: 10px !important;\n    flex-shrink: 0;\n    position: relative;\n  }\n  .game-status-bar.mobile .status-bar-actions.mobile-actions button span:not(.badge) {\n    display: none !important;\n  }\n  .game-status-bar.mobile .status-bar-actions.mobile-actions button svg {\n    width: 22px !important;\n    height: 22px !important;\n  }\n  .game-status-bar.mobile .status-bar-actions.mobile-actions button .badge {\n    position: absolute;\n    top: 2px;\n    right: 2px;\n    background: #ff4757;\n    color: white;\n    border-radius: 10px;\n    padding: 2px 5px;\n    font-size: 0.65rem;\n    font-weight: bold;\n    min-width: 18px;\n    height: 18px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .novel-scroll-area {\n    padding: 20px 16px !important;\n  }\n  .novel-scroll-area .story-blocks .story-block {\n    padding: 20px 16px !important;\n  }\n  .novel-scroll-area .story-blocks .story-block p {\n    font-size: 1rem !important;\n    line-height: 1.7 !important;\n  }\n  .novel-scroll-area button {\n    min-height: 44px !important;\n    padding: 12px 20px !important;\n  }\n  .game-panel.mobile,\n  .character-panel.mobile,\n  .inventory-panel.mobile,\n  .shop-panel.mobile {\n    width: 100vw !important;\n    height: 100vh !important;\n    max-width: 100vw !important;\n    max-height: 100vh !important;\n    border-radius: 0 !important;\n  }\n  .game-panel.mobile .panel-header,\n  .character-panel.mobile .panel-header,\n  .inventory-panel.mobile .panel-header,\n  .shop-panel.mobile .panel-header {\n    padding: 16px 20px !important;\n  }\n  .game-panel.mobile .panel-header h3,\n  .character-panel.mobile .panel-header h3,\n  .inventory-panel.mobile .panel-header h3,\n  .shop-panel.mobile .panel-header h3 {\n    font-size: 1.3rem !important;\n  }\n  .game-panel.mobile .panel-content,\n  .character-panel.mobile .panel-content,\n  .inventory-panel.mobile .panel-content,\n  .shop-panel.mobile .panel-content {\n    padding: 16px !important;\n    overflow-y: auto !important;\n    height: calc(100vh - 150px) !important;\n  }\n  .inventory-panel.mobile .inventory-tabs {\n    display: flex !important;\n    gap: 8px !important;\n    padding: 12px 16px !important;\n    overflow-x: auto !important;\n  }\n  .inventory-panel.mobile .inventory-tabs .tab-btn {\n    min-width: auto !important;\n    padding: 10px 16px !important;\n    font-size: 0.9rem !important;\n    white-space: nowrap !important;\n  }\n  .inventory-panel.mobile .tab-content {\n    padding: 16px !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section {\n    margin-bottom: 24px !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section .diablo-equipment-layout {\n    display: flex !important;\n    flex-direction: column !important;\n    gap: 16px !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section .diablo-equipment-layout .equipment-column {\n    width: 100% !important;\n    display: grid !important;\n    grid-template-columns: repeat(2, 1fr) !important;\n    gap: 12px !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section .diablo-equipment-layout .equipment-column.left-column,\n  .inventory-panel.mobile .equipment-slots-section .diablo-equipment-layout .equipment-column.right-column {\n    width: 100% !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section .diablo-equipment-layout .equipment-column.center-column {\n    grid-template-columns: 1fr !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section .diablo-equipment-layout .equipment-slot-diablo {\n    width: 100% !important;\n    height: 80px !important;\n    min-height: 80px !important;\n    padding: 8px !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section .diablo-equipment-layout .equipment-slot-diablo .slot-icon {\n    font-size: 1.5rem !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section .diablo-equipment-layout .equipment-slot-diablo .slot-empty-text {\n    font-size: 0.85rem !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section .diablo-equipment-layout .equipment-slot-diablo .item-tooltip .tooltip-name {\n    font-size: 0.85rem !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section .diablo-equipment-layout .equipment-slot-diablo .item-tooltip .btn-unequip-small {\n    width: 24px !important;\n    height: 24px !important;\n    font-size: 1rem !important;\n  }\n  .inventory-panel.mobile .inventory-grid-section .inventory-grid {\n    grid-template-columns: repeat(3, 1fr) !important;\n    gap: 8px !important;\n  }\n  .inventory-panel.mobile .inventory-grid-section .inventory-grid .inventory-slot {\n    width: 100% !important;\n    height: 80px !important;\n    padding: 6px !important;\n  }\n  .inventory-panel.mobile .inventory-grid-section .inventory-grid .inventory-slot .item-icon {\n    font-size: 1.2rem !important;\n  }\n  .inventory-panel.mobile .inventory-grid-section .inventory-grid .inventory-slot .item-name {\n    font-size: 0.75rem !important;\n  }\n  .inventory-panel.mobile .inventory-grid-section .inventory-grid .inventory-slot .item-stats {\n    font-size: 0.7rem !important;\n  }\n  .inventory-panel.mobile .currency-display {\n    grid-template-columns: repeat(2, 1fr) !important;\n    gap: 12px !important;\n  }\n  .inventory-panel.mobile .currency-display .currency-item {\n    padding: 12px !important;\n  }\n  .inventory-panel.mobile .currency-display .currency-item .currency-icon {\n    font-size: 1.5rem !important;\n  }\n  .inventory-panel.mobile .currency-display .currency-item .currency-amount {\n    font-size: 1.1rem !important;\n  }\n  .character-panel.mobile .character-stats {\n    display: flex !important;\n    flex-direction: column !important;\n    gap: 12px !important;\n  }\n  .character-panel.mobile .character-stats .stat-item {\n    width: 100% !important;\n    padding: 12px !important;\n  }\n  .character-panel.mobile .currency-mini-grid {\n    grid-template-columns: repeat(2, 1fr) !important;\n    gap: 10px !important;\n  }\n  .character-panel.mobile .skills-list {\n    display: flex !important;\n    flex-direction: column !important;\n    gap: 8px !important;\n  }\n  .character-panel.mobile .skills-list .skill-item {\n    padding: 10px !important;\n  }\n  .panel-backdrop.mobile {\n    display: block !important;\n    opacity: 1 !important;\n  }\n  .novel-home-screen.mobile {\n    padding: 16px 12px !important;\n  }\n  .novel-home-screen.mobile .quick-actions {\n    grid-template-columns: 1fr !important;\n    gap: 12px !important;\n  }\n  .wuxia-panel.mobile {\n    width: 95vw !important;\n    max-width: 95vw !important;\n    height: 90vh !important;\n    max-height: 90vh !important;\n  }\n}\n@media (min-width: 768px) and (max-width: 1024px) {\n  .game-status-bar {\n    padding: 8px 16px !important;\n  }\n  .game-status-bar .status-bar-actions button {\n    padding: 8px 12px !important;\n    font-size: 0.9rem !important;\n  }\n}\n@media (max-width: 480px) {\n  .game-status-bar.mobile {\n    padding: 4px 6px !important;\n    gap: 4px !important;\n  }\n  .game-status-bar.mobile .toggle-btn,\n  .game-status-bar.mobile .back-home-btn {\n    min-width: 40px !important;\n    width: 40px !important;\n    height: 40px !important;\n  }\n  .game-status-bar.mobile .status-bar-actions.mobile-actions button {\n    min-width: 40px !important;\n    width: 40px !important;\n    height: 40px !important;\n    padding: 8px !important;\n  }\n  .game-status-bar.mobile .status-bar-actions.mobile-actions button svg {\n    width: 20px !important;\n    height: 20px !important;\n  }\n  .novel-scroll-area {\n    padding: 16px 12px !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section .equipment-slot-diablo {\n    height: 70px !important;\n    min-height: 70px !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section .equipment-slot-diablo .slot-icon {\n    font-size: 1.2rem !important;\n  }\n  .inventory-panel.mobile .equipment-slots-section .equipment-slot-diablo .slot-empty-text {\n    font-size: 0.75rem !important;\n  }\n  .inventory-panel.mobile .inventory-grid-section .inventory-grid {\n    grid-template-columns: repeat(2, 1fr) !important;\n  }\n  .inventory-panel.mobile .inventory-grid-section .inventory-grid .inventory-slot {\n    height: 70px !important;\n  }\n  .inventory-panel.mobile .inventory-tabs .tab-btn {\n    padding: 8px 12px !important;\n    font-size: 0.85rem !important;\n  }\n}\n@media (pointer: coarse) {\n  button,\n  .clickable {\n    min-width: 44px !important;\n    min-height: 44px !important;\n  }\n  .choice-btn {\n    padding: 16px 20px !important;\n    margin: 8px 0 !important;\n  }\n}\n@media (max-width: 768px) and (orientation: landscape) {\n  .game-status-bar.mobile {\n    height: 48px !important;\n    min-height: 48px !important;\n  }\n  .wuxia-panel.mobile {\n    height: 95vh !important;\n  }\n}\n:host {\n  --button-height-mobile: 56px;\n  --button-height-tablet: 52px;\n  --button-height-desktop: 48px;\n  --font-xs: 0.75rem;\n  --font-sm: 0.875rem;\n  --font-base: 1rem;\n  --font-md: 1.0625rem;\n  --font-lg: 1.125rem;\n  --font-xl: 1.25rem;\n  --font-2xl: 1.5rem;\n  --spacing-xs: 8px;\n  --spacing-sm: 12px;\n  --spacing-md: 16px;\n  --spacing-lg: 20px;\n  --spacing-xl: 24px;\n  --spacing-2xl: 32px;\n}\n@media (max-width: 768px) {\n  h1 {\n    font-size: clamp(1.75rem, 4vw, 2.5rem);\n    line-height: 1.2;\n  }\n}\n@media (max-width: 480px) {\n  h1 {\n    font-size: clamp(2rem, 5vw, 2.8rem);\n  }\n}\n@media (max-width: 768px) {\n  h2 {\n    font-size: clamp(1.5rem, 3.5vw, 2rem);\n    line-height: 1.3;\n  }\n}\n@media (max-width: 480px) {\n  h2 {\n    font-size: clamp(1.75rem, 4vw, 2.25rem);\n  }\n}\n@media (max-width: 768px) {\n  h3 {\n    font-size: clamp(1.25rem, 3vw, 1.5rem);\n    line-height: 1.4;\n  }\n}\n@media (max-width: 480px) {\n  h3 {\n    font-size: clamp(1.375rem, 3.5vw, 1.75rem);\n  }\n}\n@media (max-width: 768px) {\n  p,\n  .text-content {\n    font-size: var(--font-base);\n    line-height: 1.6;\n  }\n}\n@media (max-width: 480px) {\n  p,\n  .text-content {\n    font-size: var(--font-md);\n    line-height: 1.7;\n  }\n}\n.novel-book-container {\n  min-height: 100vh;\n  background: var(--bg-secondary);\n  font-family:\n    "Inter",\n    "Segoe UI",\n    system-ui,\n    -apple-system,\n    sans-serif;\n  color: var(--text-primary);\n  transition: background-color 0.3s ease;\n}\n.novel-book-container .book-cover {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  background: var(--bg-primary);\n}\n.novel-book-container .book-cover .cover-content {\n  text-align: center;\n  max-width: 800px;\n  padding: 60px 50px;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 16px;\n  box-shadow: 0 8px 24px var(--shadow);\n  position: relative;\n  overflow: hidden;\n}\n.novel-book-container .book-cover .cover-content::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: var(--gradient-primary);\n}\n.novel-book-container .book-cover .cover-content .book-title {\n  font-size: 3.5rem;\n  font-weight: 700;\n  margin-bottom: 20px;\n  background: var(--gradient-primary);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  letter-spacing: -1px;\n}\n.novel-book-container .book-cover .cover-content .book-subtitle {\n  font-size: 1.3rem;\n  margin-bottom: 16px;\n  color: var(--text-secondary);\n  font-weight: 400;\n}\n.novel-book-container .book-cover .cover-content .author {\n  font-size: 0.9rem;\n  margin-bottom: 50px;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 2px;\n}\n.novel-book-container .book-cover .cover-content .select-guide {\n  font-size: 1.1rem;\n  color: var(--text-secondary);\n  margin-bottom: 30px;\n  font-weight: 500;\n}\n.novel-book-container .book-cover .cover-content .start-reading-btn {\n  padding: 16px 48px;\n  font-size: 1.1rem;\n  background: var(--accent-primary);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.novel-book-container .book-cover .cover-content .start-reading-btn:hover {\n  background: var(--accent-secondary);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);\n}\n.novel-book-container .book-cover .cover-content .start-reading-btn:active {\n  transform: translateY(0) scale(0.98);\n}\n.novel-book-container .book-cover .cover-content .back-btn {\n  padding: 12px 32px;\n  font-size: 1rem;\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  margin-right: 16px;\n}\n.novel-book-container .book-cover .cover-content .back-btn:hover {\n  background: var(--bg-primary);\n  border-color: var(--accent-primary);\n  transform: translateY(-2px);\n}\n.novel-book-container .book-cover .cover-content .back-btn:active {\n  transform: translateY(0) scale(0.98);\n}\n.novel-book-container .book-cover .cover-content.novel-start-screen {\n  max-width: 700px;\n}\n.novel-book-container .book-cover .cover-content.novel-start-screen .selected-novel-icon {\n  font-size: 5rem;\n  margin-bottom: 20px;\n  animation: float 3s ease-in-out infinite;\n}\n.novel-book-container .book-cover .cover-content.novel-start-screen .novel-intro {\n  font-size: 1.1rem;\n  color: var(--text-secondary);\n  margin: 24px 0;\n  line-height: 1.6;\n}\n.novel-book-container .book-cover .cover-content.novel-start-screen .start-info {\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  padding: 24px;\n  margin: 32px 0;\n  border: 1px solid var(--border-color);\n}\n.novel-book-container .book-cover .cover-content.novel-start-screen .start-info .info-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 0;\n  border-bottom: 1px solid var(--border-color);\n}\n.novel-book-container .book-cover .cover-content.novel-start-screen .start-info .info-item:last-child {\n  border-bottom: none;\n}\n.novel-book-container .book-cover .cover-content.novel-start-screen .start-info .info-item .info-label {\n  font-weight: 600;\n  color: var(--text-secondary);\n  font-size: 1rem;\n}\n.novel-book-container .book-cover .cover-content.novel-start-screen .start-info .info-item .info-value {\n  font-weight: 700;\n  color: var(--text-primary);\n  font-size: 1.1rem;\n}\n.novel-book-container .book-cover .cover-content.novel-start-screen .start-info .info-item .info-value.difficulty-badge-easy {\n  color: #10b981;\n}\n.novel-book-container .book-cover .cover-content.novel-start-screen .start-info .info-item .info-value.difficulty-badge-normal {\n  color: #f59e0b;\n}\n.novel-book-container .book-cover .cover-content.novel-start-screen .start-info .info-item .info-value.difficulty-badge-hard {\n  color: #ef4444;\n}\n.novel-book-container .book-cover .cover-content.novel-start-screen .action-buttons {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 32px;\n}\n.novel-book-container .novel-home-screen {\n  min-height: 100vh;\n  height: 100vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n  background: var(--bg-secondary);\n  padding: 40px;\n  position: relative;\n}\n.novel-book-container .novel-home-screen .mobile-home-header {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 60px;\n  background: var(--bg-primary);\n  border-bottom: 2px solid var(--border-color);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 16px;\n  z-index: 1000;\n  box-shadow: 0 2px 8px var(--shadow);\n}\n.novel-book-container .novel-home-screen .mobile-home-header .header-brand h1 {\n  font-size: 1.3rem;\n  font-weight: 700;\n  margin: 0;\n  background: var(--gradient-primary);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.novel-book-container .novel-home-screen .mobile-home-header .header-user-actions {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.novel-book-container .novel-home-screen .mobile-home-header .header-user-actions .user-badge {\n  padding: 6px 12px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--accent-primary);\n  border-radius: 20px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--text-primary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 120px;\n}\n.novel-book-container .novel-home-screen .mobile-home-header .header-user-actions .header-logout-btn {\n  padding: 8px 12px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 1.2rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.novel-book-container .novel-home-screen .mobile-home-header .header-user-actions .header-logout-btn:hover {\n  background: var(--accent-primary);\n  border-color: var(--accent-primary);\n  transform: scale(1.05);\n}\n.novel-book-container .novel-home-screen .mobile-home-header .header-user-actions .header-logout-btn:active {\n  transform: scale(0.95);\n}\n.novel-book-container .novel-home-screen::-webkit-scrollbar {\n  width: 10px;\n}\n.novel-book-container .novel-home-screen::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.05);\n}\n.novel-book-container .novel-home-screen::-webkit-scrollbar-thumb {\n  background: rgba(139, 92, 246, 0.3);\n  border-radius: 5px;\n}\n.novel-book-container .novel-home-screen::-webkit-scrollbar-thumb:hover {\n  background: rgba(139, 92, 246, 0.5);\n}\n.novel-book-container .novel-home-screen .home-container {\n  max-width: 1400px;\n  margin: 0 auto;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section {\n  margin-bottom: 60px;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .welcome-header {\n  position: relative;\n  text-align: center;\n  margin-bottom: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .welcome-header .header-content {\n  flex: 1;\n  text-align: center;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .welcome-header h2 {\n  font-size: 3rem;\n  font-weight: 700;\n  margin-bottom: 16px;\n  background: var(--gradient-primary);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  letter-spacing: -1px;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .welcome-header .subtitle {\n  font-size: 1.3rem;\n  color: var(--text-secondary);\n  font-weight: 400;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .welcome-header .header-actions {\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .welcome-header .header-actions .user-info {\n  padding: 10px 18px;\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary) 0%,\n      var(--bg-primary) 100%);\n  border: 2px solid var(--accent-primary);\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  box-shadow: 0 2px 8px var(--shadow);\n  transition: all 0.3s ease;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .welcome-header .header-actions .user-info:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px var(--shadow);\n  border-color: var(--accent-secondary);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .welcome-header .header-actions .user-info .user-name {\n  font-size: 0.95rem;\n  font-weight: 600;\n  background: var(--gradient-primary);\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .welcome-header .header-actions .logout-btn {\n  padding: 12px 20px;\n  font-size: 1rem;\n  font-weight: 600;\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary) 0%,\n      var(--bg-primary) 100%);\n  color: var(--text-primary);\n  border: 2px solid var(--accent-primary);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 8px var(--shadow);\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .welcome-header .header-actions .logout-btn:hover {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-secondary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 16px var(--shadow);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .welcome-header .header-actions .logout-btn:active {\n  transform: translateY(0);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));\n  gap: 24px;\n}\n@media (min-width: 1400px) {\n  .novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions {\n    grid-template-columns: repeat(5, 1fr);\n  }\n}\n@media (min-width: 1000px) and (max-width: 1399px) {\n  .novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n@media (max-width: 768px) {\n  .novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions {\n    grid-template-columns: 1fr;\n  }\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card {\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 16px;\n  padding: 32px 28px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: var(--gradient-primary);\n  transform: scaleX(0);\n  transition: transform 0.3s ease;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card.featured {\n  border-color: var(--accent-primary);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.05) 0%,\n      rgba(139, 92, 246, 0.05) 100%);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card.ai-special {\n  border-color: #8b5cf6;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 92, 246, 0.08) 0%,\n      rgba(236, 72, 153, 0.08) 100%);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card.ai-special::before {\n  background:\n    linear-gradient(\n      90deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card.ai-special:hover {\n  border-color: #8b5cf6;\n  box-shadow: 0 8px 32px rgba(139, 92, 246, 0.3);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card.ai-special:hover .card-icon {\n  animation: aiGlow 2s ease-in-out infinite;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card.ai-special .card-badge.ai-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n  animation: pulse 2s ease-in-out infinite;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card.wuxia-special {\n  border-color: #d4af37;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 69, 19, 0.08) 0%,\n      rgba(212, 175, 55, 0.08) 100%);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card.wuxia-special::before {\n  background:\n    linear-gradient(\n      90deg,\n      #8b4513 0%,\n      #d4af37 100%);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card.wuxia-special:hover {\n  border-color: #d4af37;\n  box-shadow: 0 8px 32px rgba(212, 175, 55, 0.3);\n  transform: translateY(-4px);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card.wuxia-special:hover .card-icon {\n  animation: swordGlow 2s ease-in-out infinite;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card.wuxia-special .card-badge.wuxia-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #8b4513 0%,\n      #d4af37 100%);\n  color: #fff;\n  font-weight: 600;\n  animation: pulse 2s ease-in-out infinite;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px var(--shadow);\n  border-color: var(--accent-primary);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card:hover::before {\n  transform: scaleX(1);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card:hover .card-icon {\n  transform: scale(1.15);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card .card-icon {\n  font-size: 3rem;\n  margin-bottom: 16px;\n  transition: all 0.3s ease;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card h3 {\n  font-size: 1.4rem;\n  font-weight: 700;\n  margin-bottom: 8px;\n  color: var(--text-primary);\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card p {\n  font-size: 1rem;\n  color: var(--text-secondary);\n  margin-bottom: 16px;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .quick-actions .action-card .card-badge {\n  display: inline-block;\n  padding: 6px 14px;\n  background: var(--accent-primary);\n  color: white;\n  border-radius: 20px;\n  font-size: 0.85rem;\n  font-weight: 700;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .generation-progress {\n  margin-top: 24px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 92, 246, 0.1) 0%,\n      rgba(236, 72, 153, 0.1) 100%);\n  border: 1px solid #8b5cf6;\n  border-radius: 16px;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .generation-progress .progress-container {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  justify-content: center;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .generation-progress .progress-container .progress-spinner {\n  width: 32px;\n  height: 32px;\n  border: 3px solid rgba(139, 92, 246, 0.2);\n  border-top-color: #8b5cf6;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n.novel-book-container .novel-home-screen .home-container .welcome-section .generation-progress .progress-container .progress-text {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.novel-book-container .novel-home-screen .home-container .section-header {\n  margin-bottom: 32px;\n}\n.novel-book-container .novel-home-screen .home-container .section-header h3 {\n  font-size: 2rem;\n  font-weight: 700;\n  margin-bottom: 8px;\n  color: var(--text-primary);\n}\n.novel-book-container .novel-home-screen .home-container .section-header .section-desc {\n  font-size: 1.1rem;\n  color: var(--text-secondary);\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 24px;\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card {\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 16px;\n  padding: 24px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card:hover {\n  transform: translateY(-6px);\n  box-shadow: 0 8px 24px var(--shadow);\n  border-color: var(--accent-primary);\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card:hover .novel-icon {\n  transform: scale(1.15) rotate(5deg);\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card .novel-card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card .novel-card-header .novel-icon {\n  font-size: 3rem;\n  transition: all 0.3s ease;\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card .novel-card-header .novel-difficulty {\n  padding: 6px 12px;\n  border-radius: 16px;\n  font-size: 0.8rem;\n  font-weight: 700;\n  text-transform: uppercase;\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card .novel-card-header .novel-difficulty.difficulty-easy {\n  background: rgba(16, 185, 129, 0.1);\n  color: #10b981;\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card .novel-card-header .novel-difficulty.difficulty-normal {\n  background: rgba(245, 158, 11, 0.1);\n  color: #f59e0b;\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card .novel-card-header .novel-difficulty.difficulty-hard {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card .novel-info h4 {\n  font-size: 1.4rem;\n  font-weight: 700;\n  margin-bottom: 8px;\n  color: var(--text-primary);\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card .novel-info .novel-genre {\n  font-size: 0.85rem;\n  color: var(--accent-primary);\n  font-weight: 600;\n  text-transform: uppercase;\n  margin-bottom: 12px;\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card .novel-info .novel-description {\n  font-size: 0.95rem;\n  color: var(--text-secondary);\n  line-height: 1.5;\n  margin-bottom: 16px;\n  min-height: 44px;\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card .novel-info .novel-stats {\n  display: flex;\n  gap: 12px;\n  padding-top: 12px;\n  border-top: 1px solid var(--border-color);\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card .novel-info .novel-stats .stat-item {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.9rem;\n  color: var(--text-secondary);\n  font-weight: 600;\n}\n.novel-book-container .novel-home-screen .home-container .novels-section .novel-grid .novel-card .novel-info .novel-stats .stat-item .stat-icon {\n  font-size: 1.1rem;\n}\n.novel-book-container .novel-home-screen.mobile {\n  padding: 20px 16px;\n  padding-top: 80px;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .welcome-section {\n  margin-bottom: 40px;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .welcome-section .welcome-header {\n  flex-direction: column;\n  gap: 16px;\n  margin-bottom: 32px;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .welcome-section .welcome-header .header-content h2 {\n  font-size: 2rem;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .welcome-section .welcome-header .header-content .subtitle {\n  font-size: 1rem;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .welcome-section .welcome-header .header-actions {\n  position: static;\n  width: 100%;\n  flex-direction: column;\n  gap: 10px;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .welcome-section .welcome-header .header-actions .user-info {\n  width: 100%;\n  justify-content: center;\n  padding: 12px 16px;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .welcome-section .welcome-header .header-actions .logout-btn {\n  width: 100%;\n  justify-content: center;\n  padding: 14px 20px;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .welcome-section .quick-actions {\n  gap: 16px;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .welcome-section .quick-actions .action-card {\n  padding: 24px 20px;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .welcome-section .quick-actions .action-card .card-icon {\n  font-size: 2.5rem;\n  margin-bottom: 12px;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .welcome-section .quick-actions .action-card h3 {\n  font-size: 1.2rem;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .welcome-section .quick-actions .action-card p {\n  font-size: 0.9rem;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .section-header {\n  margin-bottom: 24px;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .section-header h3 {\n  font-size: 1.5rem;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .section-header .section-desc {\n  font-size: 0.95rem;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .novels-section .novel-grid {\n  grid-template-columns: 1fr;\n  gap: 16px;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .novels-section .novel-grid .novel-card {\n  padding: 20px;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .novels-section .novel-grid .novel-card .novel-card-header .novel-icon {\n  font-size: 2.5rem;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .novels-section .novel-grid .novel-card .novel-info h4 {\n  font-size: 1.2rem;\n}\n.novel-book-container .novel-home-screen.mobile .home-container .novels-section .novel-grid .novel-card .novel-info .novel-description {\n  font-size: 0.9rem;\n}\n.novel-book-container .game-layout {\n  display: flex;\n  flex-direction: row;\n  min-height: 100vh;\n  position: relative;\n  background: var(--bg-secondary);\n}\n.novel-book-container .left-panel-container,\n.novel-book-container .right-panel-container {\n  position: fixed;\n  top: 70px;\n  height: calc(100vh - 70px);\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  z-index: 999;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  box-shadow: 0 2px 8px var(--shadow);\n}\n.novel-book-container .left-panel-container.collapsed:hover,\n.novel-book-container .right-panel-container.collapsed:hover {\n  transform: translateX(0) !important;\n  box-shadow: 0 4px 16px var(--shadow);\n}\n.novel-book-container .left-panel-container.mobile,\n.novel-book-container .right-panel-container.mobile {\n  top: 50px;\n  height: calc(100vh - 50px);\n  width: 85vw;\n  max-width: 320px;\n  z-index: 2000;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);\n}\n.novel-book-container .left-panel-container.mobile.collapsed:hover,\n.novel-book-container .right-panel-container.mobile.collapsed:hover {\n  transform: translateX(-100%) !important;\n}\n.novel-book-container .left-panel-container.mobile.collapsed.left-panel-container:hover,\n.novel-book-container .right-panel-container.mobile.collapsed.left-panel-container:hover {\n  transform: translateX(-100%) !important;\n}\n.novel-book-container .left-panel-container.mobile.collapsed.right-panel-container:hover,\n.novel-book-container .right-panel-container.mobile.collapsed.right-panel-container:hover {\n  transform: translateX(100%) !important;\n}\n.novel-book-container .left-panel-container.mobile:not(.collapsed),\n.novel-book-container .right-panel-container.mobile:not(.collapsed) {\n  transform: translateX(0) !important;\n}\n.novel-book-container .left-panel-container .side-panel,\n.novel-book-container .right-panel-container .side-panel {\n  height: 100%;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.novel-book-container .left-panel-container .side-panel::-webkit-scrollbar,\n.novel-book-container .right-panel-container .side-panel::-webkit-scrollbar {\n  width: 6px;\n}\n.novel-book-container .left-panel-container .side-panel::-webkit-scrollbar-track,\n.novel-book-container .right-panel-container .side-panel::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n}\n.novel-book-container .left-panel-container .side-panel::-webkit-scrollbar-thumb,\n.novel-book-container .right-panel-container .side-panel::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.novel-book-container .left-panel-container .side-panel::-webkit-scrollbar-thumb:hover,\n.novel-book-container .right-panel-container .side-panel::-webkit-scrollbar-thumb:hover {\n  background: var(--text-secondary);\n}\n.novel-book-container .left-panel-container {\n  left: 0;\n  width: 280px;\n}\n.novel-book-container .left-panel-container.collapsed {\n  transform: translateX(-100%);\n}\n.novel-book-container .right-panel-container {\n  right: 0;\n  width: 280px;\n}\n.novel-book-container .right-panel-container.collapsed {\n  transform: translateX(100%);\n}\n.novel-book-container .collapsed-view {\n  padding: 30px 15px;\n  cursor: pointer;\n  text-align: center;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  transition: background 0.2s ease;\n}\n.novel-book-container .collapsed-view .collapse-icon {\n  font-size: 2rem;\n  margin-bottom: 20px;\n  color: var(--accent-primary);\n  transition: transform 0.2s ease;\n}\n.novel-book-container .collapsed-view .collapse-text {\n  font-size: 0.9rem;\n  writing-mode: vertical-rl;\n  letter-spacing: 2px;\n  color: var(--text-secondary);\n  font-weight: 600;\n  text-transform: uppercase;\n}\n.novel-book-container .collapsed-view:hover {\n  background: var(--bg-secondary);\n}\n.novel-book-container .collapsed-view:hover .collapse-icon {\n  transform: scale(1.1);\n}\n.novel-book-container .expanded-view .panel-header {\n  padding: 20px 24px;\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .novel-book-container .expanded-view .panel-header {\n    padding: 16px 20px;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n  }\n}\n.novel-book-container .expanded-view .panel-header h3 {\n  margin: 0;\n  font-size: 1.2rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n}\n@media (max-width: 768px) {\n  .novel-book-container .expanded-view .panel-header h3 {\n    font-size: 1.1rem;\n  }\n}\n@media (max-width: 480px) {\n  .novel-book-container .expanded-view .panel-header h3 {\n    font-size: 1rem;\n    letter-spacing: 0.5px;\n  }\n}\n.novel-book-container .expanded-view .panel-header .close-btn {\n  background: transparent;\n  border: 1px solid var(--border-color);\n  color: var(--text-primary);\n  font-size: 1.3rem;\n  cursor: pointer;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n@media (max-width: 768px) {\n  .novel-book-container .expanded-view .panel-header .close-btn {\n    width: 40px;\n    height: 40px;\n    font-size: 1.5rem;\n  }\n}\n@media (max-width: 480px) {\n  .novel-book-container .expanded-view .panel-header .close-btn {\n    width: 44px;\n    height: 44px;\n  }\n}\n.novel-book-container .expanded-view .panel-header .close-btn:hover {\n  background: var(--bg-secondary);\n  border-color: var(--accent-primary);\n}\n.novel-book-container .expanded-view .panel-content {\n  padding: 20px;\n}\n@media (max-width: 768px) {\n  .novel-book-container .expanded-view .panel-content {\n    padding: 16px;\n  }\n}\n.novel-book-container .expanded-view .panel-content .menu-item {\n  width: 100%;\n  padding: 14px 16px;\n  margin-bottom: 10px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  cursor: pointer;\n  text-align: left;\n  font-size: 1rem;\n  font-weight: 500;\n  color: var(--text-primary);\n  transition: all 0.3s ease;\n}\n@media (max-width: 768px) {\n  .novel-book-container .expanded-view .panel-content .menu-item {\n    padding: 16px 18px;\n    margin-bottom: 12px;\n    font-size: 1.05rem;\n    min-height: 52px;\n    display: flex;\n    align-items: center;\n  }\n}\n@media (max-width: 480px) {\n  .novel-book-container .expanded-view .panel-content .menu-item {\n    padding: 18px 20px;\n    min-height: 56px;\n  }\n}\n.novel-book-container .expanded-view .panel-content .menu-item:hover {\n  background: var(--bg-primary);\n  border-color: var(--accent-primary);\n  transform: translateX(4px);\n}\n.novel-book-container .expanded-view .panel-content .stat-summary,\n.novel-book-container .expanded-view .panel-content .inventory-summary,\n.novel-book-container .expanded-view .panel-content .gold-summary {\n  margin-top: 14px;\n  padding: 14px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n}\n.novel-book-container .expanded-view .panel-content .stat-summary .stat-item,\n.novel-book-container .expanded-view .panel-content .stat-summary .summary-item,\n.novel-book-container .expanded-view .panel-content .inventory-summary .stat-item,\n.novel-book-container .expanded-view .panel-content .inventory-summary .summary-item,\n.novel-book-container .expanded-view .panel-content .gold-summary .stat-item,\n.novel-book-container .expanded-view .panel-content .gold-summary .summary-item {\n  display: flex;\n  justify-content: space-between;\n  padding: 8px 0;\n  border-bottom: 1px solid rgba(148, 163, 184, 0.05);\n}\n.novel-book-container .expanded-view .panel-content .stat-summary .stat-item:last-child,\n.novel-book-container .expanded-view .panel-content .stat-summary .summary-item:last-child,\n.novel-book-container .expanded-view .panel-content .inventory-summary .stat-item:last-child,\n.novel-book-container .expanded-view .panel-content .inventory-summary .summary-item:last-child,\n.novel-book-container .expanded-view .panel-content .gold-summary .stat-item:last-child,\n.novel-book-container .expanded-view .panel-content .gold-summary .summary-item:last-child {\n  border-bottom: none;\n}\n.novel-book-container .expanded-view .panel-content .stat-summary .stat-item .label,\n.novel-book-container .expanded-view .panel-content .stat-summary .summary-item .label,\n.novel-book-container .expanded-view .panel-content .inventory-summary .stat-item .label,\n.novel-book-container .expanded-view .panel-content .inventory-summary .summary-item .label,\n.novel-book-container .expanded-view .panel-content .gold-summary .stat-item .label,\n.novel-book-container .expanded-view .panel-content .gold-summary .summary-item .label {\n  color: var(--text-secondary);\n  font-weight: 500;\n  font-size: 0.9rem;\n}\n.novel-book-container .expanded-view .panel-content .stat-summary .stat-item .value,\n.novel-book-container .expanded-view .panel-content .stat-summary .summary-item .value,\n.novel-book-container .expanded-view .panel-content .inventory-summary .stat-item .value,\n.novel-book-container .expanded-view .panel-content .inventory-summary .summary-item .value,\n.novel-book-container .expanded-view .panel-content .gold-summary .stat-item .value,\n.novel-book-container .expanded-view .panel-content .gold-summary .summary-item .value {\n  color: var(--text-primary);\n  font-weight: 600;\n}\n.novel-book-container .expanded-view .panel-content .stat-summary .stat-item .value.gold,\n.novel-book-container .expanded-view .panel-content .stat-summary .summary-item .value.gold,\n.novel-book-container .expanded-view .panel-content .inventory-summary .stat-item .value.gold,\n.novel-book-container .expanded-view .panel-content .inventory-summary .summary-item .value.gold,\n.novel-book-container .expanded-view .panel-content .gold-summary .stat-item .value.gold,\n.novel-book-container .expanded-view .panel-content .gold-summary .summary-item .value.gold {\n  color: var(--accent-primary);\n}\n.novel-book-container .expanded-view .panel-content h4 {\n  color: var(--text-primary);\n  font-size: 1rem;\n  font-weight: 700;\n  margin: 24px 0 12px 0;\n  padding-bottom: 8px;\n  border-bottom: 1px solid var(--border-color);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n}\n.novel-book-container .expanded-view .panel-content .info-section {\n  margin-bottom: 20px;\n}\n.novel-book-container .expanded-view .panel-content .info-section .info-item {\n  display: flex;\n  justify-content: space-between;\n  padding: 10px 14px;\n  margin-bottom: 8px;\n  background: var(--bg-secondary);\n  border-radius: 6px;\n  border-left: 2px solid var(--accent-primary);\n  transition: all 0.3s ease;\n}\n.novel-book-container .expanded-view .panel-content .info-section .info-item:hover {\n  background: var(--bg-primary);\n  border-left-width: 3px;\n}\n.novel-book-container .expanded-view .panel-content .info-section .info-item .label {\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n}\n.novel-book-container .expanded-view .panel-content .info-section .info-item .value {\n  color: var(--text-primary);\n  font-weight: 600;\n}\n.novel-book-container .expanded-view .panel-content .info-section .progress-item .label {\n  display: block;\n  color: var(--text-secondary);\n  margin-bottom: 8px;\n  font-weight: 500;\n  font-size: 0.9rem;\n}\n.novel-book-container .expanded-view .panel-content .info-section .progress-item .progress-bar {\n  height: 20px;\n  background: var(--bg-secondary);\n  border-radius: 10px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n  margin-bottom: 6px;\n}\n.novel-book-container .expanded-view .panel-content .info-section .progress-item .progress-bar .progress-fill {\n  height: 100%;\n  background: var(--accent-primary);\n  transition: width 0.3s ease;\n}\n.novel-book-container .expanded-view .panel-content .info-section .progress-item .progress-text {\n  text-align: right;\n  color: var(--text-secondary);\n  font-size: 0.85rem;\n  font-weight: 600;\n}\n.novel-book-container .expanded-view .panel-content .inventory-quick-list .quick-item {\n  display: flex;\n  align-items: center;\n  padding: 10px 14px;\n  margin-bottom: 8px;\n  background: var(--bg-secondary);\n  border-radius: 6px;\n  border-left: 2px solid var(--accent-primary);\n  transition: all 0.3s ease;\n}\n.novel-book-container .expanded-view .panel-content .inventory-quick-list .quick-item:hover {\n  background: var(--bg-primary);\n  border-left-width: 3px;\n}\n.novel-book-container .expanded-view .panel-content .inventory-quick-list .quick-item .item-icon {\n  font-size: 1.5rem;\n  margin-right: 10px;\n}\n.novel-book-container .expanded-view .panel-content .inventory-quick-list .quick-item .item-name {\n  flex: 1;\n  color: var(--text-primary);\n  font-weight: 500;\n}\n.novel-book-container .expanded-view .panel-content .inventory-quick-list .quick-item .item-quantity {\n  color: var(--accent-primary);\n  font-weight: 600;\n}\n.novel-book-container .expanded-view .panel-content .inventory-quick-list .empty-message {\n  text-align: center;\n  color: var(--text-secondary);\n  padding: 24px;\n  font-style: italic;\n  font-size: 0.9rem;\n}\n.novel-book-container .expanded-view .panel-content .quick-action-btn {\n  width: 100%;\n  padding: 12px 18px;\n  margin-bottom: 10px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  cursor: pointer;\n  color: var(--text-primary);\n  font-weight: 500;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n.novel-book-container .expanded-view .panel-content .quick-action-btn .icon {\n  font-size: 1.2rem;\n}\n.novel-book-container .expanded-view .panel-content .quick-action-btn:hover {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px var(--shadow);\n}\n.novel-book-container .main-content-area {\n  flex: 1;\n  position: relative;\n  transition: all 0.3s ease;\n  margin-left: 0;\n  margin-right: 0;\n  margin-top: 70px;\n  overflow-y: auto;\n  height: calc(100vh - 70px);\n  background: var(--bg-primary);\n}\n.novel-book-container .main-content-area.mobile {\n  margin-top: 50px;\n  height: calc(100vh - 50px);\n}\n.novel-book-container .main-content-area::-webkit-scrollbar {\n  width: 8px;\n}\n.novel-book-container .main-content-area::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n}\n.novel-book-container .main-content-area::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 4px;\n}\n.novel-book-container .main-content-area::-webkit-scrollbar-thumb:hover {\n  background: var(--text-secondary);\n}\n.novel-book-container .game-status-bar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 70px;\n  z-index: 1001;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  padding: 12px 32px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.1);\n  gap: 16px;\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  overflow: hidden;\n}\n.novel-book-container .game-status-bar::before {\n  content: "";\n  position: absolute;\n  top: -50%;\n  right: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    radial-gradient(\n      circle,\n      rgba(255, 255, 255, 0.1) 0%,\n      transparent 70%);\n  animation: headerGlow 8s ease-in-out infinite;\n  pointer-events: none;\n}\n.novel-book-container .game-status-bar::after {\n  content: "";\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 2px;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.5) 50%,\n      transparent 100%);\n}\n.novel-book-container .game-status-bar .toggle-btn {\n  padding: 12px 16px;\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  color: white;\n  position: relative;\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 50px;\n  height: 50px;\n}\n.novel-book-container .game-status-bar .toggle-btn svg {\n  transition: all 0.3s ease;\n}\n.novel-book-container .game-status-bar .toggle-btn:hover {\n  background: rgba(255, 255, 255, 0.25);\n  border-color: rgba(255, 255, 255, 0.4);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.novel-book-container .game-status-bar .toggle-btn:hover svg {\n  transform: scale(1.1);\n}\n.novel-book-container .game-status-bar .toggle-btn:active {\n  transform: translateY(0) scale(0.95);\n}\n.novel-book-container .game-status-bar .back-home-btn {\n  padding: 10px 20px;\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  cursor: pointer;\n  font-size: 1rem;\n  font-weight: 700;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  color: white;\n  white-space: nowrap;\n  position: relative;\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  height: 50px;\n}\n.novel-book-container .game-status-bar .back-home-btn svg {\n  transition: all 0.3s ease;\n}\n.novel-book-container .game-status-bar .back-home-btn:hover {\n  background: rgba(255, 255, 255, 0.25);\n  border-color: rgba(255, 255, 255, 0.4);\n  transform: translateX(-3px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.novel-book-container .game-status-bar .back-home-btn:hover svg {\n  transform: scale(1.1);\n}\n.novel-book-container .game-status-bar .back-home-btn:active {\n  transform: translateX(0) scale(0.95);\n}\n.novel-book-container .game-status-bar .status-bar-actions {\n  display: flex;\n  gap: 10px;\n  align-items: center;\n  position: relative;\n  z-index: 1;\n  flex: 1;\n  justify-content: center;\n}\n.novel-book-container .game-status-bar .equipment-btn,\n.novel-book-container .game-status-bar .inventory-btn,\n.novel-book-container .game-status-bar .dungeon-btn,\n.novel-book-container .game-status-bar .training-btn,\n.novel-book-container .game-status-bar .flow-btn {\n  padding: 10px 16px;\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  cursor: pointer;\n  font-size: 0.95rem;\n  font-weight: 700;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  color: white;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  white-space: nowrap;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.novel-book-container .game-status-bar .equipment-btn svg,\n.novel-book-container .game-status-bar .inventory-btn svg,\n.novel-book-container .game-status-bar .dungeon-btn svg,\n.novel-book-container .game-status-bar .training-btn svg,\n.novel-book-container .game-status-bar .flow-btn svg {\n  transition: all 0.3s ease;\n}\n.novel-book-container .game-status-bar .equipment-btn:hover,\n.novel-book-container .game-status-bar .inventory-btn:hover,\n.novel-book-container .game-status-bar .dungeon-btn:hover,\n.novel-book-container .game-status-bar .training-btn:hover,\n.novel-book-container .game-status-bar .flow-btn:hover {\n  background: rgba(255, 255, 255, 0.25);\n  border-color: rgba(255, 255, 255, 0.4);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\n}\n.novel-book-container .game-status-bar .equipment-btn:hover svg,\n.novel-book-container .game-status-bar .inventory-btn:hover svg,\n.novel-book-container .game-status-bar .dungeon-btn:hover svg,\n.novel-book-container .game-status-bar .training-btn:hover svg,\n.novel-book-container .game-status-bar .flow-btn:hover svg {\n  transform: scale(1.15);\n}\n.novel-book-container .game-status-bar .equipment-btn:active,\n.novel-book-container .game-status-bar .inventory-btn:active,\n.novel-book-container .game-status-bar .dungeon-btn:active,\n.novel-book-container .game-status-bar .training-btn:active,\n.novel-book-container .game-status-bar .flow-btn:active {\n  transform: translateY(0) scale(0.95);\n}\n.novel-book-container .game-status-bar .equipment-btn.active,\n.novel-book-container .game-status-bar .inventory-btn.active,\n.novel-book-container .game-status-bar .dungeon-btn.active,\n.novel-book-container .game-status-bar .training-btn.active,\n.novel-book-container .game-status-bar .flow-btn.active {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-color: transparent;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);\n}\n.novel-book-container .game-status-bar .equipment-btn.active svg,\n.novel-book-container .game-status-bar .inventory-btn.active svg,\n.novel-book-container .game-status-bar .dungeon-btn.active svg,\n.novel-book-container .game-status-bar .training-btn.active svg,\n.novel-book-container .game-status-bar .flow-btn.active svg {\n  animation: pulse 2s ease-in-out infinite;\n}\n.novel-book-container .game-status-bar .equipment-btn:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.3) 0%,\n      rgba(218, 165, 32, 0.3) 100%);\n  border-color: rgba(255, 215, 0, 0.5);\n  box-shadow: 0 6px 20px rgba(255, 215, 0, 0.3);\n}\n.novel-book-container .game-status-bar .equipment-btn.active {\n  background:\n    linear-gradient(\n      135deg,\n      #FFD700 0%,\n      #DAA520 100%);\n  box-shadow: 0 4px 16px rgba(255, 215, 0, 0.5);\n}\n.novel-book-container .game-status-bar .inventory-btn:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(76, 175, 80, 0.3) 0%,\n      rgba(46, 125, 50, 0.3) 100%);\n  border-color: rgba(76, 175, 80, 0.5);\n  box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);\n}\n.novel-book-container .game-status-bar .inventory-btn.active {\n  background:\n    linear-gradient(\n      135deg,\n      #4CAF50 0%,\n      #2E7D32 100%);\n  box-shadow: 0 4px 16px rgba(76, 175, 80, 0.5);\n}\n.novel-book-container .game-status-bar .dungeon-btn:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 0, 0, 0.4) 0%,\n      rgba(178, 34, 34, 0.4) 100%);\n  border-color: rgba(139, 0, 0, 0.6);\n  box-shadow: 0 6px 20px rgba(139, 0, 0, 0.4);\n}\n.novel-book-container .game-status-bar .dungeon-btn.active {\n  background:\n    linear-gradient(\n      135deg,\n      #8B0000 0%,\n      #B22222 100%);\n  box-shadow: 0 4px 16px rgba(139, 0, 0, 0.6);\n}\n.novel-book-container .game-status-bar .logout-btn-game {\n  padding: 12px 16px;\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  color: white;\n  min-width: 50px;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.novel-book-container .game-status-bar .logout-btn-game svg {\n  transition: all 0.3s ease;\n}\n.novel-book-container .game-status-bar .logout-btn-game:hover {\n  background: rgba(239, 68, 68, 0.25);\n  border-color: rgba(239, 68, 68, 0.4);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(239, 68, 68, 0.3);\n}\n.novel-book-container .game-status-bar .logout-btn-game:hover svg {\n  transform: translateX(3px) scale(1.1);\n}\n.novel-book-container .game-status-bar .logout-btn-game:active {\n  transform: translateY(0) scale(0.95);\n}\n.novel-book-container .game-status-bar.mobile {\n  height: 50px;\n  padding: 8px 12px;\n  gap: 8px;\n}\n.novel-book-container .game-status-bar.mobile .toggle-btn,\n.novel-book-container .game-status-bar.mobile .back-home-btn {\n  min-width: 40px;\n  height: 40px;\n  padding: 8px;\n}\n.novel-book-container .game-status-bar.mobile .toggle-btn span,\n.novel-book-container .game-status-bar.mobile .back-home-btn span {\n  display: none;\n}\n.novel-book-container .game-status-bar.mobile .toggle-btn svg,\n.novel-book-container .game-status-bar.mobile .back-home-btn svg {\n  width: 20px;\n  height: 20px;\n}\n.novel-book-container .game-status-bar.mobile .status-bar-actions {\n  gap: 6px;\n}\n.novel-book-container .game-status-bar.mobile .status-bar-actions button {\n  min-width: 40px;\n  height: 40px;\n  padding: 8px;\n  font-size: 0.85rem;\n}\n.novel-book-container .game-status-bar.mobile .status-bar-actions button span {\n  display: none;\n}\n.novel-book-container .game-status-bar.mobile .status-bar-actions button svg {\n  width: 18px;\n  height: 18px;\n}\n.novel-book-container .game-status-bar.mobile .status-bar-actions .dungeon-btn {\n  min-width: 48px;\n  height: 48px;\n  padding: 10px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 0, 0, 0.3),\n      rgba(178, 34, 34, 0.3));\n  border: 2px solid rgba(139, 0, 0, 0.5);\n}\n.novel-book-container .game-status-bar.mobile .status-bar-actions .dungeon-btn svg {\n  width: 24px;\n  height: 24px;\n}\n.novel-book-container .game-status-bar.mobile .status-bar-actions .dungeon-btn span {\n  display: none;\n}\n.novel-book-container .game-status-bar.mobile .mobile-actions {\n  display: flex;\n  gap: 8px;\n}\n.novel-book-container .game-status-bar.mobile .mobile-actions button {\n  min-width: 48px !important;\n  height: 48px !important;\n  padding: 10px !important;\n  border-radius: 12px;\n}\n.novel-book-container .game-status-bar.mobile .mobile-actions button svg {\n  width: 22px !important;\n  height: 22px !important;\n}\n.novel-book-container .game-status-bar.mobile .mobile-actions .dungeon-btn {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 0, 0, 0.4),\n      rgba(178, 34, 34, 0.4)) !important;\n  border: 2px solid rgba(220, 38, 38, 0.6) !important;\n  box-shadow: 0 2px 8px rgba(139, 0, 0, 0.3);\n}\n.novel-book-container .game-status-bar.mobile .mobile-actions .dungeon-btn svg {\n  stroke-width: 2.5;\n  filter: drop-shadow(0 0 2px rgba(220, 38, 38, 0.5));\n}\n.novel-book-container .game-status-bar.mobile .mobile-actions .dungeon-btn:active {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(185, 28, 28, 0.5),\n      rgba(220, 38, 38, 0.5)) !important;\n  transform: scale(0.95);\n}\n.novel-book-container .game-status-bar.mobile .player-stats-compact {\n  gap: 8px;\n  font-size: 0.8rem;\n}\n.novel-book-container .game-status-bar.mobile .player-stats-compact .stat-item {\n  padding: 4px 8px;\n}\n.novel-book-container .game-status-bar.mobile .player-stats-compact .stat-item .stat-icon {\n  font-size: 0.9rem;\n}\n.novel-book-container .game-status-bar.mobile .player-stats-compact .stat-item .stat-label {\n  display: none;\n}\n.novel-book-container .novel-scroll-area {\n  max-width: 900px;\n  margin: 0 auto;\n  padding: 40px;\n  min-height: calc(100vh - 62px);\n  padding-bottom: 100px;\n}\n@media (max-width: 768px) {\n  .novel-book-container .novel-scroll-area {\n    padding: 24px 16px;\n    padding-bottom: 80px;\n  }\n}\n@media (max-width: 480px) {\n  .novel-book-container .novel-scroll-area {\n    padding: 20px 12px;\n    padding-bottom: 60px;\n  }\n}\n.novel-book-container .novel-scroll-area .novel-header {\n  text-align: center;\n  padding: 48px 0 48px;\n  margin-bottom: 48px;\n  position: relative;\n  overflow: hidden;\n}\n.novel-book-container .novel-scroll-area .novel-header::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 120%;\n  height: 100%;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.08) 0%,\n      rgba(118, 75, 162, 0.08) 100%);\n  border-radius: 24px;\n  z-index: 0;\n}\n.novel-book-container .novel-scroll-area .novel-header::after {\n  content: "";\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 80%;\n  height: 3px;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      #667eea 20%,\n      #764ba2 50%,\n      #667eea 80%,\n      transparent 100%);\n  border-radius: 3px;\n  box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);\n  animation: lineGlow 3s ease-in-out infinite;\n}\n.novel-book-container .novel-scroll-area .novel-header h2 {\n  font-size: 2.8rem;\n  font-weight: 800;\n  margin: 0;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  letter-spacing: -1px;\n  text-shadow: 0 2px 20px rgba(102, 126, 234, 0.3);\n  position: relative;\n  z-index: 1;\n  padding: 0 24px;\n}\n.novel-book-container .novel-scroll-area .novel-header h2::before {\n  content: "\\1f4d6";\n  position: absolute;\n  left: -20px;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 2rem;\n  opacity: 0.7;\n  animation: bookFloat 3s ease-in-out infinite;\n}\n.novel-book-container .novel-scroll-area .novel-header h2::after {\n  content: "\\2728";\n  position: absolute;\n  right: -20px;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 1.5rem;\n  opacity: 0.7;\n  animation: sparkle 2s ease-in-out infinite;\n}\n@keyframes lineGlow {\n  0%, 100% {\n    opacity: 0.6;\n    box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);\n  }\n  50% {\n    opacity: 1;\n    box-shadow: 0 0 30px rgba(102, 126, 234, 0.8);\n  }\n}\n@keyframes bookFloat {\n  0%, 100% {\n    transform: translateY(-50%) translateX(0);\n  }\n  50% {\n    transform: translateY(-50%) translateX(-5px);\n  }\n}\n@keyframes sparkle {\n  0%, 100% {\n    opacity: 0.7;\n    transform: translateY(-50%) rotate(0deg);\n  }\n  50% {\n    opacity: 1;\n    transform: translateY(-50%) rotate(180deg);\n  }\n}\n.novel-book-container .novel-scroll-area .story-blocks .story-block {\n  margin-bottom: 28px;\n  padding: 28px;\n  background: #ffffff;\n  border-radius: 12px;\n  border: 1px solid #e0e0e0;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n.novel-book-container .novel-scroll-area .story-blocks .story-block:hover {\n  border-color: var(--accent-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n}\n.novel-book-container .novel-scroll-area .story-blocks .story-block p {\n  font-size: 1.1rem;\n  line-height: 1.8;\n  color: #1a1a1a;\n  margin: 14px 0;\n  text-align: justify;\n}\n@media (max-width: 768px) {\n  .novel-book-container .novel-scroll-area .story-blocks .story-block {\n    padding: 20px;\n    margin-bottom: 20px;\n    border-radius: 10px;\n  }\n  .novel-book-container .novel-scroll-area .story-blocks .story-block p {\n    font-size: 1rem;\n    line-height: 1.8;\n    margin: 12px 0;\n  }\n}\n@media (max-width: 480px) {\n  .novel-book-container .novel-scroll-area .story-blocks .story-block {\n    padding: 16px;\n    margin-bottom: 16px;\n  }\n  .novel-book-container .novel-scroll-area .story-blocks .story-block p {\n    font-size: 0.95rem;\n    line-height: 1.75;\n  }\n}\n.novel-book-container .novel-scroll-area .story-blocks .story-block.choice-result {\n  background: #f8fafc;\n  border: 1px solid var(--accent-primary);\n  border-left-width: 4px;\n}\n.novel-book-container .novel-scroll-area .story-blocks .story-block.choice-result > div {\n  color: var(--text-secondary);\n  font-weight: 600;\n  font-size: 1.05rem;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.novel-book-container .novel-scroll-area .story-blocks .story-block.choice-result > div .choice-icon {\n  font-size: 1.4rem;\n  color: var(--accent-primary);\n}\n.novel-book-container .novel-scroll-area h3 {\n  text-align: center;\n  color: var(--text-secondary);\n  font-size: 1.6rem;\n  font-weight: 700;\n  margin: 40px 0 28px;\n  text-transform: uppercase;\n  letter-spacing: 1.5px;\n}\n.novel-book-container .novel-scroll-area button {\n  width: 100%;\n  padding: 20px 28px;\n  margin: 14px 0;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 10px;\n  color: var(--text-primary);\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  text-align: left;\n  position: relative;\n  overflow: hidden;\n}\n@media (max-width: 768px) {\n  .novel-book-container .novel-scroll-area button {\n    min-height: var(--button-height-tablet);\n    padding: 16px 24px;\n    font-size: var(--font-md);\n  }\n}\n@media (max-width: 480px) {\n  .novel-book-container .novel-scroll-area button {\n    min-height: var(--button-height-mobile);\n    padding: 18px 24px;\n    font-size: var(--font-lg);\n  }\n}\n.novel-book-container .novel-scroll-area button::before {\n  content: "";\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  background: var(--accent-primary);\n  transform: scaleY(0);\n  transition: transform 0.3s ease;\n}\n.novel-book-container .novel-scroll-area button:hover {\n  background: var(--bg-secondary);\n  border-color: var(--accent-primary);\n  transform: translateX(8px);\n  box-shadow: 0 4px 12px var(--shadow);\n}\n.novel-book-container .novel-scroll-area button:hover::before {\n  transform: scaleY(1);\n}\n.novel-book-container .novel-scroll-area button:active {\n  transform: translateX(8px) scale(0.98);\n}\n.novel-book-container .panel-backdrop {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.75);\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n  z-index: 1999;\n  animation: fadeIn 0.3s ease-in-out;\n  cursor: pointer;\n}\n.novel-book-container .panel-backdrop.mobile {\n  background: rgba(0, 0, 0, 0.85);\n  -webkit-backdrop-filter: blur(6px);\n  backdrop-filter: blur(6px);\n}\n.novel-book-container .game-panel {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  transform: none !important;\n  background: var(--bg-primary);\n  border: none;\n  border-radius: 0 !important;\n  z-index: 2000;\n  box-shadow: none;\n  overflow: hidden;\n  animation: fadeIn 0.3s ease-out;\n  display: flex;\n  flex-direction: column;\n}\n.novel-book-container .game-panel .panel-header {\n  padding: 20px 48px;\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 2px solid var(--border-color);\n  flex-shrink: 0;\n}\n.novel-book-container .game-panel .panel-header h3 {\n  margin: 0;\n  font-size: 1.8rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.novel-book-container .game-panel .panel-header .close-btn {\n  background: transparent;\n  border: 1px solid var(--border-color);\n  color: var(--text-primary);\n  font-size: 1.8rem;\n  cursor: pointer;\n  width: 42px;\n  height: 42px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n}\n.novel-book-container .game-panel .panel-header .close-btn:hover {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n  transform: rotate(90deg);\n}\n.novel-book-container .game-panel .panel-content {\n  padding: 40px 60px;\n  flex: 1;\n  overflow-y: auto;\n}\n.novel-book-container .game-panel .panel-content::-webkit-scrollbar {\n  width: 6px;\n}\n.novel-book-container .game-panel .panel-content::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n}\n.novel-book-container .game-panel .panel-content::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.novel-book-container .game-panel .panel-content::-webkit-scrollbar-thumb:hover {\n  background: var(--text-secondary);\n}\n.novel-book-container .game-panel .panel-content > div {\n  padding: 16px 20px;\n  margin: 12px 0;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  border-left: 3px solid var(--accent-primary);\n  color: var(--text-primary);\n  font-size: 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  transition: all 0.3s ease;\n}\n.novel-book-container .game-panel .panel-content > div:hover {\n  background: var(--bg-primary);\n  border-left-width: 4px;\n  transform: translateX(4px);\n  box-shadow: 0 2px 8px var(--shadow);\n}\n.novel-book-container .game-panel .panel-content > div button {\n  padding: 8px 16px;\n  background: var(--accent-primary);\n  border: none;\n  border-radius: 6px;\n  color: white;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin-left: 10px;\n}\n.novel-book-container .game-panel .panel-content > div button:hover {\n  background: var(--accent-secondary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n.novel-book-container .game-panel .panel-content > div button:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  transform: none;\n}\n.character-panel .panel-content {\n  padding: 0;\n}\n.character-panel .character-basic-info {\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary),\n      var(--bg-primary));\n  border-bottom: 2px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .character-panel .character-basic-info {\n    padding: 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .character-basic-info {\n    padding: 24px;\n  }\n}\n.character-panel .character-basic-info .character-avatar {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n@media (max-width: 768px) {\n  .character-panel .character-basic-info .character-avatar {\n    gap: 16px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .character-basic-info .character-avatar {\n    gap: 20px;\n  }\n}\n.character-panel .character-basic-info .character-avatar .avatar-circle {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background:\n    linear-gradient(\n      135deg,\n      var(--primary-color),\n      var(--primary-dark));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n@media (max-width: 768px) {\n  .character-panel .character-basic-info .character-avatar .avatar-circle {\n    width: 72px;\n    height: 72px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .character-basic-info .character-avatar .avatar-circle {\n    width: 88px;\n    height: 88px;\n  }\n}\n.character-panel .character-basic-info .character-avatar .avatar-circle .avatar-icon {\n  font-size: 40px;\n}\n@media (max-width: 768px) {\n  .character-panel .character-basic-info .character-avatar .avatar-circle .avatar-icon {\n    font-size: 36px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .character-basic-info .character-avatar .avatar-circle .avatar-icon {\n    font-size: 44px;\n  }\n}\n.character-panel .character-basic-info .character-avatar .character-name-badge {\n  flex: 1;\n}\n.character-panel .character-basic-info .character-avatar .character-name-badge h2 {\n  margin: 0 0 8px 0;\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n@media (max-width: 768px) {\n  .character-panel .character-basic-info .character-avatar .character-name-badge h2 {\n    font-size: 22px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .character-basic-info .character-avatar .character-name-badge h2 {\n    font-size: 26px;\n  }\n}\n.character-panel .character-basic-info .character-avatar .character-name-badge .level-badge {\n  display: inline-block;\n  padding: 4px 12px;\n  background: var(--primary-color);\n  color: white;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 700;\n}\n@media (max-width: 768px) {\n  .character-panel .character-basic-info .character-avatar .character-name-badge .level-badge {\n    padding: 5px 14px;\n    font-size: 15px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .character-basic-info .character-avatar .character-name-badge .level-badge {\n    padding: 6px 16px;\n    font-size: 16px;\n  }\n}\n.character-panel .exp-section {\n  padding: 20px 24px;\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .character-panel .exp-section {\n    padding: 18px 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .exp-section {\n    padding: 20px 24px;\n  }\n}\n.character-panel .exp-section .exp-label {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 8px;\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n@media (max-width: 768px) {\n  .character-panel .exp-section .exp-label {\n    font-size: 14px;\n    margin-bottom: 10px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .exp-section .exp-label {\n    font-size: 15px;\n    margin-bottom: 12px;\n  }\n}\n.character-panel .exp-section .exp-label .exp-values {\n  color: var(--primary-color);\n}\n.character-panel .exp-section .progress-bar {\n  height: 20px;\n  background: var(--bg-primary);\n  border-radius: 10px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n  margin-bottom: 4px;\n}\n@media (max-width: 768px) {\n  .character-panel .exp-section .progress-bar {\n    height: 24px;\n    margin-bottom: 6px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .exp-section .progress-bar {\n    height: 28px;\n    margin-bottom: 8px;\n  }\n}\n.character-panel .exp-section .progress-bar .progress-fill {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #ffd700,\n      #ffa500);\n  transition: width 0.3s ease;\n  box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.3);\n}\n.character-panel .exp-section .exp-percentage {\n  text-align: right;\n  font-size: 11px;\n  color: var(--text-secondary);\n}\n@media (max-width: 768px) {\n  .character-panel .exp-section .exp-percentage {\n    font-size: 12px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .exp-section .exp-percentage {\n    font-size: 13px;\n  }\n}\n.character-panel .status-bars {\n  padding: 20px 24px;\n  background: var(--bg-primary);\n  border-bottom: 1px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .character-panel .status-bars {\n    padding: 18px 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .status-bars {\n    padding: 20px 24px;\n  }\n}\n.character-panel .status-bars .status-item {\n  margin-bottom: 16px;\n}\n@media (max-width: 768px) {\n  .character-panel .status-bars .status-item {\n    margin-bottom: 18px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .status-bars .status-item {\n    margin-bottom: 20px;\n  }\n}\n.character-panel .status-bars .status-item:last-child {\n  margin-bottom: 0;\n}\n.character-panel .status-bars .status-item .status-label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 6px;\n  font-size: 14px;\n  font-weight: 600;\n}\n@media (max-width: 768px) {\n  .character-panel .status-bars .status-item .status-label {\n    font-size: 15px;\n    margin-bottom: 8px;\n    gap: 10px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .status-bars .status-item .status-label {\n    font-size: 16px;\n    margin-bottom: 10px;\n    gap: 12px;\n  }\n}\n.character-panel .status-bars .status-item .status-label .icon {\n  font-size: 18px;\n}\n@media (max-width: 768px) {\n  .character-panel .status-bars .status-item .status-label .icon {\n    font-size: 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .status-bars .status-item .status-label .icon {\n    font-size: 22px;\n  }\n}\n.character-panel .status-bars .status-item .status-label .text {\n  color: var(--text-primary);\n}\n.character-panel .status-bars .status-item .status-label .values {\n  margin-left: auto;\n  color: var(--text-secondary);\n  font-size: 13px;\n}\n@media (max-width: 768px) {\n  .character-panel .status-bars .status-item .status-label .values {\n    font-size: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .status-bars .status-item .status-label .values {\n    font-size: 15px;\n  }\n}\n.character-panel .status-bars .status-item .progress-bar {\n  height: 16px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .character-panel .status-bars .status-item .progress-bar {\n    height: 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .status-bars .status-item .progress-bar {\n    height: 24px;\n  }\n}\n.character-panel .status-bars .status-item .progress-bar .progress-fill {\n  height: 100%;\n  transition: width 0.3s ease, background 0.3s ease;\n  box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.2);\n}\n.character-panel .status-bars .status-item .progress-bar .progress-fill.low {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444,\n      #dc2626);\n  animation: pulse 1s infinite;\n}\n.character-panel .status-bars .status-item .progress-bar .progress-fill.medium {\n  background:\n    linear-gradient(\n      90deg,\n      #f59e0b,\n      #d97706);\n}\n.character-panel .status-bars .status-item.hp .progress-fill {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444,\n      #dc2626);\n}\n.character-panel .status-bars .status-item.mp .progress-fill {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6,\n      #2563eb);\n}\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.7;\n  }\n}\n.character-panel .stats-section {\n  padding: 20px 24px;\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .character-panel .stats-section {\n    padding: 18px 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .stats-section {\n    padding: 20px 24px;\n  }\n}\n.character-panel .stats-section .section-title {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 16px;\n  padding-bottom: 8px;\n  border-bottom: 2px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .character-panel .stats-section .section-title {\n    font-size: 17px;\n    margin-bottom: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .stats-section .section-title {\n    font-size: 18px;\n    margin-bottom: 18px;\n  }\n}\n.character-panel .stats-section .stats-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n}\n@media (max-width: 768px) {\n  .character-panel .stats-section .stats-grid {\n    gap: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .stats-section .stats-grid {\n    gap: 16px;\n    grid-template-columns: 1fr;\n  }\n}\n.character-panel .stats-section .stats-grid .stat-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n@media (max-width: 768px) {\n  .character-panel .stats-section .stats-grid .stat-item {\n    padding: 14px;\n    gap: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .stats-section .stats-grid .stat-item {\n    padding: 16px;\n    gap: 16px;\n    min-height: 64px;\n  }\n}\n.character-panel .stats-section .stats-grid .stat-item:hover {\n  border-color: var(--primary-color);\n  transform: translateX(2px);\n}\n.character-panel .stats-section .stats-grid .stat-item .stat-icon {\n  font-size: 24px;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-secondary);\n  border-radius: 6px;\n}\n@media (max-width: 768px) {\n  .character-panel .stats-section .stats-grid .stat-item .stat-icon {\n    font-size: 26px;\n    width: 40px;\n    height: 40px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .stats-section .stats-grid .stat-item .stat-icon {\n    font-size: 28px;\n    width: 44px;\n    height: 44px;\n  }\n}\n.character-panel .stats-section .stats-grid .stat-item .stat-info {\n  flex: 1;\n}\n.character-panel .stats-section .stats-grid .stat-item .stat-info .stat-name {\n  font-size: 12px;\n  color: var(--text-secondary);\n  margin-bottom: 2px;\n}\n@media (max-width: 768px) {\n  .character-panel .stats-section .stats-grid .stat-item .stat-info .stat-name {\n    font-size: 13px;\n    margin-bottom: 4px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .stats-section .stats-grid .stat-item .stat-info .stat-name {\n    font-size: 14px;\n  }\n}\n.character-panel .stats-section .stats-grid .stat-item .stat-info .stat-value {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n@media (max-width: 768px) {\n  .character-panel .stats-section .stats-grid .stat-item .stat-info .stat-value {\n    font-size: 20px;\n  }\n}\n@media (max-width: 480px) {\n  .character-panel .stats-section .stats-grid .stat-item .stat-info .stat-value {\n    font-size: 22px;\n  }\n}\n.character-panel .currency-section {\n  padding: 20px 24px;\n  background: var(--bg-primary);\n  border-bottom: 1px solid var(--border-color);\n}\n.character-panel .currency-section .section-title {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 16px;\n  padding-bottom: 8px;\n  border-bottom: 2px solid var(--border-color);\n}\n.character-panel .currency-section .currency-mini-grid {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 12px;\n}\n.character-panel .currency-section .currency-mini-grid .currency-mini-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  padding: 12px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  border: 2px solid var(--border-color);\n}\n.character-panel .currency-section .currency-mini-grid .currency-mini-item.gold {\n  border-color: rgba(255, 215, 0, 0.5);\n}\n.character-panel .currency-section .currency-mini-grid .currency-mini-item.gem {\n  border-color: rgba(138, 43, 226, 0.5);\n}\n.character-panel .currency-section .currency-mini-grid .currency-mini-item.crystal {\n  border-color: rgba(0, 191, 255, 0.5);\n}\n.character-panel .currency-section .currency-mini-grid .currency-mini-item.ticket {\n  border-color: rgba(255, 105, 180, 0.5);\n}\n.character-panel .currency-section .currency-mini-grid .currency-mini-item .currency-mini-icon {\n  font-size: 24px;\n}\n.character-panel .currency-section .currency-mini-grid .currency-mini-item .currency-mini-value {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n.character-panel .skills-section {\n  padding: 20px 24px;\n  background: var(--bg-secondary);\n}\n.character-panel .skills-section .section-title {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 16px;\n  padding-bottom: 8px;\n  border-bottom: 2px solid var(--border-color);\n}\n.character-panel .skills-section .skills-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.character-panel .skills-section .skills-list .skill-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 14px;\n  background: var(--bg-primary);\n  border-radius: 6px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n.character-panel .skills-section .skills-list .skill-item:hover {\n  border-color: var(--primary-color);\n  transform: translateX(2px);\n}\n.character-panel .skills-section .skills-list .skill-item .skill-name {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.character-panel .skills-section .skills-list .skill-item .skill-level {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--primary-color);\n  padding: 2px 8px;\n  background: var(--bg-secondary);\n  border-radius: 4px;\n}\n.battle-section {\n  width: 100%;\n  padding: 32px 24px;\n  margin: 24px 0;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n.battle-section .battle-header {\n  text-align: center;\n  margin-bottom: 24px;\n}\n.battle-section .battle-header h3 {\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.battle-section .battle-characters {\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  margin-bottom: 50px;\n  gap: 50px;\n  flex-wrap: wrap;\n  position: relative;\n  z-index: 1;\n}\n.battle-section .battle-characters .battle-character {\n  flex: 1;\n  min-width: 280px;\n  max-width: 340px;\n  padding: 24px 20px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: visible;\n}\n.battle-section .battle-characters .battle-character.taking-damage {\n  animation: damageShakeStrong 0.5s ease-in-out;\n}\n.battle-section .battle-characters .battle-character.taking-damage::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 0, 0, 0.3);\n  border-radius: 12px;\n  animation: damageFlash 0.5s ease-out;\n  pointer-events: none;\n  z-index: 10;\n}\n.battle-section .battle-characters .battle-character.player.active {\n  border-color: #3b82f6;\n  box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3), inset 0 0 0 1px rgba(59, 130, 246, 0.2);\n}\n.battle-section .battle-characters .battle-character.enemy.active {\n  border-color: #ef4444;\n  box-shadow: 0 4px 20px rgba(239, 68, 68, 0.3), inset 0 0 0 1px rgba(239, 68, 68, 0.2);\n}\n.battle-section .battle-characters .battle-character .character-avatar {\n  display: none;\n}\n.battle-section .battle-characters .battle-character .character-name {\n  font-size: 1.3rem;\n  font-weight: 600;\n  margin-bottom: 20px;\n  text-align: center;\n  color: var(--text-primary);\n  letter-spacing: 0.5px;\n}\n.battle-section .battle-characters .battle-character .character-stats {\n  margin-bottom: 16px;\n}\n.battle-section .battle-characters .battle-character .character-stats .stat-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n  font-size: 0.95rem;\n  color: var(--text-secondary);\n}\n.battle-section .battle-characters .battle-character .character-stats .stat-row .stat-label {\n  font-weight: 600;\n}\n.battle-section .battle-characters .battle-character .character-stats .stat-row .stat-value {\n  font-weight: 500;\n  color: var(--text-primary);\n}\n.battle-section .battle-characters .battle-character .hp-bar,\n.battle-section .battle-characters .battle-character .mp-bar {\n  margin-bottom: 12px;\n  position: relative;\n  background: transparent;\n}\n.battle-section .battle-characters .battle-character .hp-bar .bar-label,\n.battle-section .battle-characters .battle-character .mp-bar .bar-label {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n  background: transparent;\n}\n.battle-section .battle-characters .battle-character .hp-bar .bar-label .bar-name,\n.battle-section .battle-characters .battle-character .mp-bar .bar-label .bar-name {\n  font-size: 0.75rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 1.5px;\n  padding: 2px 8px;\n  border-radius: 4px;\n  background: transparent;\n  color: var(--accent-primary);\n}\n.battle-section .battle-characters .battle-character .hp-bar .bar-label .bar-text,\n.battle-section .battle-characters .battle-character .mp-bar .bar-label .bar-text {\n  font-size: 0.85rem;\n  color: var(--text-primary);\n  font-weight: 700;\n  font-family: "Courier New", monospace;\n}\n.battle-section .battle-characters .battle-character .hp-bar .bar-container,\n.battle-section .battle-characters .battle-character .mp-bar .bar-container {\n  height: 20px;\n  background: transparent;\n  border-radius: 10px;\n  overflow: hidden;\n  border: 2px solid rgba(255, 255, 255, 0.1);\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.1);\n  position: relative;\n}\n.battle-section .battle-characters .battle-character .hp-bar .bar-container::before,\n.battle-section .battle-characters .battle-character .mp-bar .bar-container::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 50%;\n  background:\n    linear-gradient(\n      to bottom,\n      rgba(255, 255, 255, 0.2),\n      transparent);\n  border-radius: 10px 10px 0 0;\n  pointer-events: none;\n  z-index: 2;\n}\n.battle-section .battle-characters .battle-character .hp-bar .bar-container .bar-fill,\n.battle-section .battle-characters .battle-character .mp-bar .bar-container .bar-fill {\n  height: 100%;\n  transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);\n  border-radius: 8px;\n  position: relative;\n  overflow: hidden;\n  box-shadow: inset 0 -2px 4px rgba(0, 0, 0, 0.3);\n}\n.battle-section .battle-characters .battle-character .hp-bar .bar-container .bar-fill::before,\n.battle-section .battle-characters .battle-character .mp-bar .bar-container .bar-fill::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 40%;\n  background:\n    linear-gradient(\n      to bottom,\n      rgba(255, 255, 255, 0.4),\n      transparent);\n  border-radius: 8px 8px 0 0;\n  z-index: 1;\n}\n.battle-section .battle-characters .battle-character .hp-bar .bar-container .bar-fill.hp,\n.battle-section .battle-characters .battle-character .mp-bar .bar-container .bar-fill.hp {\n  background:\n    linear-gradient(\n      135deg,\n      #ef4444 0%,\n      #dc2626 50%,\n      #ef4444 100%);\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), inset 0 -1px 0 rgba(0, 0, 0, 0.1);\n}\n.battle-section .battle-characters .battle-character .hp-bar .bar-container .bar-fill.hp.low,\n.battle-section .battle-characters .battle-character .mp-bar .bar-container .bar-fill.hp.low {\n  background:\n    linear-gradient(\n      135deg,\n      #dc2626 0%,\n      #b91c1c 50%,\n      #dc2626 100%);\n  animation: hpPulseLow 0.8s ease-in-out infinite;\n}\n.battle-section .battle-characters .battle-character .hp-bar .bar-container .bar-fill.mp,\n.battle-section .battle-characters .battle-character .mp-bar .bar-container .bar-fill.mp {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6 0%,\n      #2563eb 50%,\n      #3b82f6 100%);\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), inset 0 -1px 0 rgba(0, 0, 0, 0.1);\n}\n.battle-section .battle-characters .vs-indicator {\n  font-size: 2rem;\n  font-weight: 700;\n  color: var(--text-secondary);\n  opacity: 0.6;\n}\n.battle-section .battle-log {\n  max-height: 280px;\n  overflow-y: auto;\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n  margin-bottom: 24px;\n  font-family:\n    "Inter",\n    -apple-system,\n    sans-serif;\n  scroll-behavior: smooth;\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);\n}\n.battle-section .battle-log::-webkit-scrollbar {\n  width: 6px;\n}\n.battle-section .battle-log::-webkit-scrollbar-track {\n  background: transparent;\n}\n.battle-section .battle-log::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n}\n.battle-section .battle-log::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.3);\n}\n.battle-section .battle-log .log-entry {\n  padding: 6px 10px;\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n  line-height: 1.5;\n  border-radius: 4px;\n  margin-bottom: 2px;\n  animation: fadeInUp 0.3s ease-out;\n}\n.battle-section .battle-log .log-entry:last-child {\n  border-bottom: none;\n}\n.battle-section .battle-log .log-entry.damage {\n  color: #ef4444;\n  font-weight: 600;\n  background: rgba(239, 68, 68, 0.08);\n}\n.battle-section .battle-log .log-entry.heal {\n  color: #10b981;\n  font-weight: 600;\n  background: rgba(16, 185, 129, 0.08);\n}\n.battle-section .battle-log .log-entry.victory {\n  color: #fbbf24;\n  font-weight: 700;\n  font-size: 1rem;\n  background: rgba(251, 191, 36, 0.1);\n  padding: 8px;\n  text-align: center;\n  border-radius: 6px;\n}\n.battle-section .battle-log .log-entry.defeat {\n  color: #6b7280;\n  font-weight: 700;\n  font-size: 1rem;\n  background: rgba(107, 114, 128, 0.1);\n  padding: 8px;\n  text-align: center;\n  border-radius: 6px;\n  opacity: 0.8;\n}\n.battle-section .battle-actions {\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n.battle-section .battle-actions .action-btn {\n  padding: 10px 20px;\n  font-size: 0.95rem;\n  font-weight: 600;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: white;\n}\n.battle-section .battle-actions .action-btn.attack {\n  background: #ef4444;\n}\n.battle-section .battle-actions .action-btn.attack:hover:not(:disabled) {\n  background: #dc2626;\n}\n.battle-section .battle-actions .action-btn.skill {\n  background: #3b82f6;\n}\n.battle-section .battle-actions .action-btn.skill:hover:not(:disabled) {\n  background: #2563eb;\n}\n.battle-section .battle-actions .action-btn.defend {\n  background: #10b981;\n}\n.battle-section .battle-actions .action-btn.defend:hover:not(:disabled) {\n  background: #059669;\n}\n.battle-section .battle-actions .action-btn.potion {\n  background: #8b5cf6;\n}\n.battle-section .battle-actions .action-btn.potion:hover:not(:disabled) {\n  background: #7c3aed;\n}\n.battle-section .battle-actions .action-btn:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n.battle-section .battle-actions .action-btn:active:not(:disabled) {\n  transform: scale(0.95);\n}\n.battle-section .battle-result {\n  text-align: center;\n  padding: 32px 24px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n  margin-top: 16px;\n}\n.battle-section .battle-result h2,\n.battle-section .battle-result h3 {\n  font-size: 1.8rem;\n  font-weight: 700;\n  margin-bottom: 16px;\n}\n.battle-section .battle-result h2.victory,\n.battle-section .battle-result h3.victory {\n  color: #fbbf24;\n}\n.battle-section .battle-result h2.defeat,\n.battle-section .battle-result h3.defeat {\n  color: #6b7280;\n}\n.battle-section .battle-result h3 {\n  font-size: 1.6rem;\n}\n.battle-section .battle-result p {\n  font-size: 0.95rem;\n  color: var(--text-secondary);\n  margin-bottom: 12px;\n  line-height: 1.6;\n}\n.battle-section .battle-result .auto-continue {\n  font-size: 0.9rem;\n  color: var(--text-secondary);\n  opacity: 0.7;\n  margin-top: 16px;\n}\n.battle-section .battle-result .end-battle-btn {\n  margin-top: 20px;\n  padding: 10px 24px;\n  font-size: 1rem;\n  font-weight: 600;\n  background: var(--accent-primary);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.battle-section .battle-result .end-battle-btn:hover {\n  background: var(--accent-secondary);\n}\n.battle-section .battle-result .end-battle-btn:active {\n  transform: scale(0.95);\n}\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.6;\n  }\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(5px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n@keyframes aiGlow {\n  0%, 100% {\n    filter: drop-shadow(0 0 8px rgba(139, 92, 246, 0.5));\n  }\n  50% {\n    filter: drop-shadow(0 0 16px rgba(236, 72, 153, 0.8));\n  }\n}\n@keyframes swordGlow {\n  0%, 100% {\n    filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.5));\n    transform: rotate(0deg);\n  }\n  50% {\n    filter: drop-shadow(0 0 16px rgba(212, 175, 55, 0.8));\n    transform: rotate(5deg);\n  }\n}\n@keyframes battlePulse {\n  0%, 100% {\n    transform: translate(-50%, -50%) scale(1);\n    opacity: 0.5;\n  }\n  50% {\n    transform: translate(-50%, -50%) scale(1.2);\n    opacity: 0.3;\n  }\n}\n@keyframes playerGlow {\n  0%, 100% {\n    box-shadow: 0 15px 40px rgba(59, 130, 246, 0.6), 0 0 30px rgba(59, 130, 246, 0.4);\n  }\n  50% {\n    box-shadow: 0 15px 40px rgba(59, 130, 246, 0.8), 0 0 40px rgba(59, 130, 246, 0.6);\n  }\n}\n@keyframes enemyGlow {\n  0%, 100% {\n    box-shadow: 0 15px 40px rgba(239, 68, 68, 0.6), 0 0 30px rgba(239, 68, 68, 0.4);\n  }\n  50% {\n    box-shadow: 0 15px 40px rgba(239, 68, 68, 0.8), 0 0 40px rgba(239, 68, 68, 0.6);\n  }\n}\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n@keyframes hpPulseLow {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.7;\n  }\n}\n@keyframes shimmerFlow {\n  0% {\n    transform: translateX(-100%);\n  }\n  100% {\n    transform: translateX(200%);\n  }\n}\n@keyframes damageShakeStrong {\n  0%, 100% {\n    transform: translateX(0) rotate(0deg);\n  }\n  10% {\n    transform: translateX(-10px) rotate(-2deg);\n  }\n  20% {\n    transform: translateX(10px) rotate(2deg);\n  }\n  30% {\n    transform: translateX(-10px) rotate(-2deg);\n  }\n  40% {\n    transform: translateX(10px) rotate(2deg);\n  }\n  50% {\n    transform: translateX(-8px) rotate(-1deg);\n  }\n  60% {\n    transform: translateX(8px) rotate(1deg);\n  }\n  70% {\n    transform: translateX(-5px) rotate(-0.5deg);\n  }\n  80% {\n    transform: translateX(5px) rotate(0.5deg);\n  }\n  90% {\n    transform: translateX(-2px) rotate(0deg);\n  }\n}\n@keyframes damageFlash {\n  0% {\n    opacity: 0;\n  }\n  10% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n@keyframes damageNumber {\n  0% {\n    transform: translateY(0) scale(0.5);\n    opacity: 0;\n  }\n  20% {\n    transform: translateY(-20px) scale(1.2);\n    opacity: 1;\n  }\n  80% {\n    transform: translateY(-60px) scale(1);\n    opacity: 1;\n  }\n  100% {\n    transform: translateY(-80px) scale(0.8);\n    opacity: 0;\n  }\n}\n@keyframes vsGlow {\n  0%, 100% {\n    filter: drop-shadow(0 0 20px rgba(59, 130, 246, 0.6));\n    transform: scale(1);\n  }\n  50% {\n    filter: drop-shadow(0 0 30px rgba(59, 130, 246, 0.9));\n    transform: scale(1.1);\n  }\n}\n@keyframes sparkle {\n  0%, 100% {\n    opacity: 0.5;\n    transform: rotate(0deg) scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: rotate(180deg) scale(1.2);\n  }\n}\n@keyframes damageShake {\n  0%, 100% {\n    transform: translateX(0);\n  }\n  25% {\n    transform: translateX(-3px);\n  }\n  75% {\n    transform: translateX(3px);\n  }\n}\n@keyframes healPulse {\n  0%, 100% {\n    transform: scale(1);\n    box-shadow: 0 0 0 rgba(16, 185, 129, 0);\n  }\n  50% {\n    transform: scale(1.05);\n    box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);\n  }\n}\n@keyframes victoryFlash {\n  0%, 100% {\n    opacity: 1;\n    box-shadow: 0 0 10px rgba(251, 191, 36, 0.5);\n  }\n  50% {\n    opacity: 0.8;\n    box-shadow: 0 0 20px rgba(251, 191, 36, 0.8);\n  }\n}\n@keyframes resultGlow {\n  0%, 100% {\n    opacity: 0.3;\n  }\n  50% {\n    opacity: 0.6;\n  }\n}\n@keyframes victoryBounce {\n  0%, 100% {\n    transform: translateY(0) scale(1);\n  }\n  50% {\n    transform: translateY(-10px) scale(1.05);\n  }\n}\n@keyframes celebrate {\n  0%, 100% {\n    transform: translateY(0) rotate(0deg);\n  }\n  50% {\n    transform: translateY(-15px) rotate(360deg);\n  }\n}\n@keyframes blink {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.4;\n  }\n}\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@keyframes slideInUp {\n  from {\n    opacity: 0;\n    transform: translate(-50%, -45%);\n  }\n  to {\n    opacity: 1;\n    transform: translate(-50%, -50%);\n  }\n}\n::ng-deep .battle-modal-backdrop {\n  background-color: rgba(0, 0, 0, 0.75) !important;\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n  animation: fadeIn 0.3s ease-in-out;\n}\n::ng-deep .cdk-overlay-dark-backdrop {\n  background-color: rgba(0, 0, 0, 0.75) !important;\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n.character-creator-panel .character-creator-container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  max-width: 100%;\n}\n.character-creator-panel .character-creator-container .creator-intro {\n  text-align: center;\n  margin-bottom: 30px;\n  padding: 20px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n}\n.character-creator-panel .character-creator-container .creator-intro h4 {\n  font-size: 1.4rem;\n  margin-bottom: 12px;\n  color: var(--accent-primary);\n}\n.character-creator-panel .character-creator-container .creator-intro p {\n  color: var(--text-secondary);\n  font-size: 1rem;\n}\n.character-creator-panel .character-creator-container .character-type-buttons {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16px;\n  margin-bottom: 40px;\n  width: 100%;\n}\n.character-creator-panel .character-creator-container .character-type-buttons .generate-btn {\n  padding: 16px 24px;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n}\n.character-creator-panel .character-creator-container .character-type-buttons .generate-btn:hover:not(:disabled) {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.character-creator-panel .character-creator-container .character-type-buttons .generate-btn.primary {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n}\n.character-creator-panel .character-creator-container .character-type-buttons .generate-btn.primary:hover:not(:disabled) {\n  background: var(--accent-secondary);\n}\n.character-creator-panel .character-creator-container .character-type-buttons .generate-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n.character-creator-panel .character-creator-container .error-message {\n  padding: 16px;\n  background: var(--danger);\n  color: white;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  text-align: center;\n  font-weight: 600;\n}\n.character-creator-panel .character-creator-container .generated-character-info {\n  margin-top: 30px;\n  background: var(--bg-secondary);\n  padding: 28px;\n  border-radius: 12px;\n  border: 2px solid var(--accent-primary);\n  animation: slideInUp 0.4s ease-out;\n  width: 100%;\n  box-sizing: border-box;\n}\n.character-creator-panel .character-creator-container .generated-character-info > h4 {\n  text-align: center;\n  font-size: 1.5rem;\n  margin-bottom: 24px;\n  color: var(--accent-primary);\n}\n.character-creator-panel .character-creator-container .generated-character-info .character-details {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-bottom: 24px;\n  width: 100%;\n}\n.character-creator-panel .character-creator-container .generated-character-info .character-details .detail-row {\n  display: flex;\n  align-items: center;\n  padding: 12px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n}\n.character-creator-panel .character-creator-container .generated-character-info .character-details .detail-row .label {\n  font-weight: 600;\n  color: var(--text-secondary);\n  margin-right: 12px;\n  min-width: 60px;\n}\n.character-creator-panel .character-creator-container .generated-character-info .character-details .detail-row .value {\n  font-size: 1.1rem;\n  color: var(--text-primary);\n  font-weight: 500;\n}\n.character-creator-panel .character-creator-container .generated-character-info .character-description {\n  margin-bottom: 20px;\n}\n.character-creator-panel .character-creator-container .generated-character-info .character-description h5 {\n  font-size: 1.2rem;\n  margin-bottom: 12px;\n  color: var(--accent-primary);\n}\n.character-creator-panel .character-creator-container .generated-character-info .character-description p {\n  padding: 16px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  line-height: 1.6;\n  color: var(--text-primary);\n}\n.character-creator-panel .character-creator-container .generated-character-info .character-abilities,\n.character-creator-panel .character-creator-container .generated-character-info .character-traits {\n  margin-bottom: 20px;\n}\n.character-creator-panel .character-creator-container .generated-character-info .character-abilities h5,\n.character-creator-panel .character-creator-container .generated-character-info .character-traits h5 {\n  font-size: 1.2rem;\n  margin-bottom: 12px;\n  color: var(--accent-primary);\n}\n.character-creator-panel .character-creator-container .generated-character-info .character-abilities .abilities-list,\n.character-creator-panel .character-creator-container .generated-character-info .character-abilities .traits-list,\n.character-creator-panel .character-creator-container .generated-character-info .character-traits .abilities-list,\n.character-creator-panel .character-creator-container .generated-character-info .character-traits .traits-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n.character-creator-panel .character-creator-container .generated-character-info .character-abilities .ability-tag,\n.character-creator-panel .character-creator-container .generated-character-info .character-abilities .trait-tag,\n.character-creator-panel .character-creator-container .generated-character-info .character-traits .ability-tag,\n.character-creator-panel .character-creator-container .generated-character-info .character-traits .trait-tag {\n  padding: 8px 16px;\n  background: var(--bg-primary);\n  border: 2px solid var(--accent-primary);\n  border-radius: 20px;\n  font-weight: 600;\n  color: var(--accent-primary);\n  font-size: 0.95rem;\n}\n.character-creator-panel .character-creator-container .generated-character-info .action-buttons {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-top: 30px;\n  width: 100%;\n}\n.character-creator-panel .character-creator-container .generated-character-info .action-buttons button {\n  width: 100%;\n  padding: 16px 24px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.character-creator-panel .character-creator-container .generated-character-info .action-buttons .save-btn {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981 0%,\n      #059669 100%);\n  color: white;\n  border: none;\n}\n.character-creator-panel .character-creator-container .generated-character-info .action-buttons .save-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);\n}\n.character-creator-panel .character-creator-container .generated-character-info .action-buttons .apply-btn {\n  background: var(--accent-primary);\n  color: white;\n  border: none;\n}\n.character-creator-panel .character-creator-container .generated-character-info .action-buttons .apply-btn:hover {\n  background: var(--accent-secondary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.character-creator-panel .character-creator-container .generated-character-info .action-buttons .regenerate-btn {\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  border: 2px solid var(--border-color);\n}\n.character-creator-panel .character-creator-container .generated-character-info .action-buttons .regenerate-btn:hover {\n  border-color: var(--accent-primary);\n  color: var(--accent-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n@keyframes aiGlow {\n  0%, 100% {\n    filter: drop-shadow(0 0 8px rgba(139, 92, 246, 0.4));\n  }\n  50% {\n    filter: drop-shadow(0 0 16px rgba(236, 72, 153, 0.6));\n  }\n}\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.85;\n    transform: scale(1.05);\n  }\n}\n.saved-characters-section {\n  margin-top: 32px;\n  padding: 0;\n  background: transparent;\n  border: none;\n}\n.saved-characters-section .section-header {\n  margin-bottom: 24px;\n}\n.saved-characters-section .section-header h3 {\n  font-size: 32px;\n  color: var(--text-primary);\n  margin-bottom: 8px;\n  font-weight: bold;\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #3b82f6 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.saved-characters-section .section-header .section-desc {\n  color: var(--text-secondary);\n  font-size: 16px;\n}\n.saved-characters-section .characters-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 20px;\n}\n.saved-characters-section .characters-grid .character-card {\n  background: var(--bg-secondary);\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 12px var(--shadow);\n  transition: all 0.3s ease;\n  cursor: pointer;\n  border: 2px solid var(--border-color);\n  position: relative;\n}\n.saved-characters-section .characters-grid .character-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(139, 92, 246, 0.3);\n  border-color: rgba(139, 92, 246, 0.5);\n}\n.saved-characters-section .characters-grid .character-card .character-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n.saved-characters-section .characters-grid .character-card .character-header h4 {\n  font-size: 20px;\n  font-weight: bold;\n  color: var(--text-primary);\n  margin: 0;\n  flex: 1;\n}\n.saved-characters-section .characters-grid .character-card .character-header .level-badge {\n  display: inline-block;\n  padding: 4px 10px;\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6,\n      #a78bfa);\n  color: white;\n  border-radius: 6px;\n  font-size: 13px;\n  font-weight: 700;\n  margin-left: 8px;\n  box-shadow: 0 2px 4px rgba(139, 92, 246, 0.3);\n}\n.saved-characters-section .characters-grid .character-card .character-header .delete-btn {\n  background: none;\n  border: none;\n  color: #ef4444;\n  font-size: 24px;\n  cursor: pointer;\n  padding: 4px 8px;\n  transition: all 0.2s ease;\n}\n.saved-characters-section .characters-grid .character-card .character-header .delete-btn:hover {\n  transform: scale(1.2);\n  color: #dc2626;\n}\n.saved-characters-section .characters-grid .character-card .character-meta {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 12px;\n  flex-wrap: wrap;\n}\n.saved-characters-section .characters-grid .character-card .character-meta .meta-item {\n  background: rgba(139, 92, 246, 0.15);\n  color: #a78bfa;\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n}\n.saved-characters-section .characters-grid .character-card .character-desc {\n  color: var(--text-secondary);\n  font-size: 14px;\n  line-height: 1.6;\n  margin-bottom: 12px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.saved-characters-section .characters-grid .character-card .character-traits {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.saved-characters-section .characters-grid .character-card .character-traits .trait {\n  background: rgba(59, 130, 246, 0.15);\n  color: #60a5fa;\n  padding: 4px 12px;\n  border-radius: 10px;\n  font-size: 11px;\n  font-weight: 500;\n}\n.saved-characters-section .characters-grid .character-card .character-currency {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  margin-bottom: 12px;\n  padding: 12px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n}\n.saved-characters-section .characters-grid .character-card .character-currency .currency-item {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 10px;\n  background: var(--bg-secondary);\n  border-radius: 6px;\n}\n.saved-characters-section .characters-grid .character-card .character-currency .currency-item .icon {\n  font-size: 16px;\n}\n.saved-characters-section .characters-grid .character-card .character-currency .currency-item .value {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.saved-characters-section .characters-grid .character-card .character-inventory-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 14px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.15),\n      rgba(139, 92, 246, 0.15));\n  border: 1px solid rgba(139, 92, 246, 0.3);\n  border-radius: 8px;\n  margin-bottom: 12px;\n}\n.saved-characters-section .characters-grid .character-card .character-inventory-badge .icon {\n  font-size: 16px;\n}\n.saved-characters-section .characters-grid .character-card .character-inventory-badge .label {\n  font-size: 13px;\n  color: var(--text-secondary);\n  font-weight: 500;\n}\n.saved-characters-section .characters-grid .character-card .character-inventory-badge .count {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--primary-color);\n}\n.saved-characters-section .characters-grid .character-card .character-footer {\n  font-size: 11px;\n  color: var(--text-secondary);\n  padding-top: 8px;\n  border-top: 1px solid var(--border-color);\n}\n.saved-scenarios-section {\n  margin-top: 32px;\n  padding: 0;\n  background: transparent;\n  border: none;\n}\n.saved-scenarios-section h2 {\n  font-size: 32px;\n  color: var(--text-primary);\n  margin-bottom: 24px;\n  font-weight: bold;\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.saved-scenarios-section .scenarios-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 20px;\n}\n.saved-scenarios-section .scenarios-grid .scenario-card {\n  background: var(--bg-secondary);\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 12px var(--shadow);\n  transition: all 0.3s ease;\n  cursor: pointer;\n  border: 2px solid var(--border-color);\n  position: relative;\n}\n.saved-scenarios-section .scenarios-grid .scenario-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(139, 92, 246, 0.3);\n  border-color: rgba(139, 92, 246, 0.5);\n}\n.saved-scenarios-section .scenarios-grid .scenario-card .card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.saved-scenarios-section .scenarios-grid .scenario-card .card-header h3 {\n  font-size: 20px;\n  font-weight: bold;\n  color: var(--text-primary);\n  margin: 0;\n  flex: 1;\n}\n.saved-scenarios-section .scenarios-grid .scenario-card .card-header .delete-btn {\n  background: none;\n  border: none;\n  color: #ef4444;\n  font-size: 24px;\n  cursor: pointer;\n  padding: 4px 8px;\n  transition: all 0.2s ease;\n}\n.saved-scenarios-section .scenarios-grid .scenario-card .card-header .delete-btn:hover {\n  transform: scale(1.2);\n  color: #dc2626;\n}\n.saved-scenarios-section .scenarios-grid .scenario-card .card-description {\n  color: var(--text-secondary);\n  font-size: 14px;\n  line-height: 1.6;\n  margin-bottom: 16px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.saved-scenarios-section .scenarios-grid .scenario-card .card-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n.saved-scenarios-section .scenarios-grid .scenario-card .card-tags .tag {\n  background: rgba(139, 92, 246, 0.15);\n  color: #a78bfa;\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n}\n.saved-scenarios-section .scenarios-grid .scenario-card .card-meta {\n  display: flex;\n  justify-content: space-between;\n  font-size: 12px;\n  color: var(--text-secondary);\n  padding-top: 12px;\n  border-top: 1px solid var(--border-color);\n}\n.saved-scenarios-section .scenarios-grid .scenario-card .card-meta .genre {\n  font-weight: 600;\n  color: #a78bfa;\n}\n.scenario-creator-panel .scenario-creator-container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  max-width: 100%;\n}\n.scenario-creator-panel .scenario-creator-container .creator-intro {\n  text-align: center;\n  margin-bottom: 32px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 92, 246, 0.05) 0%,\n      rgba(236, 72, 153, 0.05) 100%);\n  border-radius: 16px;\n  border: 2px solid rgba(139, 92, 246, 0.1);\n}\n.scenario-creator-panel .scenario-creator-container .creator-intro h4 {\n  font-size: 24px;\n  color: var(--text-primary);\n  margin-bottom: 12px;\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.scenario-creator-panel .scenario-creator-container .creator-intro p {\n  color: var(--text-secondary);\n  font-size: 16px;\n}\n.scenario-creator-panel .scenario-creator-container .scenario-type-buttons {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16px;\n  margin-bottom: 40px;\n  width: 100%;\n}\n.scenario-creator-panel .scenario-creator-container .scenario-type-buttons .generate-btn {\n  padding: 16px 24px;\n  border: 2px solid var(--border-color);\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n}\n.scenario-creator-panel .scenario-creator-container .scenario-type-buttons .generate-btn.primary {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n  border-color: transparent;\n  color: white;\n}\n.scenario-creator-panel .scenario-creator-container .scenario-type-buttons .generate-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(139, 92, 246, 0.3);\n  border-color: #8b5cf6;\n}\n.scenario-creator-panel .scenario-creator-container .scenario-type-buttons .generate-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n.scenario-creator-panel .scenario-creator-container .error-message {\n  background: #fee;\n  color: #c33;\n  padding: 16px;\n  border-radius: 12px;\n  margin-bottom: 24px;\n  border: 2px solid #fcc;\n  text-align: center;\n  font-weight: 500;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info {\n  margin-top: 30px;\n  background: var(--bg-secondary);\n  border-radius: 20px;\n  padding: 32px;\n  box-shadow: 0 8px 32px var(--shadow);\n  border: 2px solid var(--border-color);\n  width: 100%;\n  box-sizing: border-box;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info h4 {\n  font-size: 24px;\n  color: var(--text-primary);\n  margin-bottom: 24px;\n  text-align: center;\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-title {\n  text-align: center;\n  margin-bottom: 24px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 92, 246, 0.05) 0%,\n      rgba(236, 72, 153, 0.05) 100%);\n  border-radius: 16px;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-title h2 {\n  font-size: 32px;\n  font-weight: bold;\n  color: var(--text-primary);\n  margin: 0;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-description {\n  margin-bottom: 20px;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-description h5 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #8b5cf6;\n  margin-bottom: 8px;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-description p {\n  color: var(--text-secondary);\n  line-height: 1.8;\n  font-size: 15px;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-characters {\n  margin-bottom: 20px;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-characters h5 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #8b5cf6;\n  margin-bottom: 8px;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-characters ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-characters ul li {\n  padding: 8px 16px;\n  background: rgba(139, 92, 246, 0.05);\n  border-left: 3px solid #8b5cf6;\n  margin-bottom: 8px;\n  border-radius: 8px;\n  color: var(--text-secondary);\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-tags {\n  margin-bottom: 24px;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-tags h5 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #8b5cf6;\n  margin-bottom: 12px;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-tags .tags-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .scenario-tags .tags-list .tag-item {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 92, 246, 0.1) 0%,\n      rgba(236, 72, 153, 0.1) 100%);\n  color: #8b5cf6;\n  padding: 6px 16px;\n  border-radius: 20px;\n  font-size: 13px;\n  font-weight: 500;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .action-buttons {\n  display: flex;\n  gap: 12px;\n  margin-top: 32px;\n  padding-top: 24px;\n  border-top: 2px solid rgba(139, 92, 246, 0.1);\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .action-buttons button {\n  flex: 1;\n  padding: 16px 24px;\n  border: none;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .action-buttons .apply-btn {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981 0%,\n      #059669 100%);\n  color: white;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .action-buttons .apply-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .action-buttons .start-btn {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #ec4899 100%);\n  color: white;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .action-buttons .start-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .action-buttons .regenerate-btn {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b 0%,\n      #d97706 100%);\n  color: white;\n}\n.scenario-creator-panel .scenario-creator-container .generated-scenario-info .action-buttons .regenerate-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);\n}\n.saved-items-section {\n  margin-top: 32px;\n  padding: 0;\n  background: transparent;\n  border: none;\n}\n.saved-items-section .section-header {\n  margin-bottom: 24px;\n}\n.saved-items-section .section-header h3 {\n  font-size: 32px;\n  color: var(--text-primary);\n  margin-bottom: 8px;\n  font-weight: bold;\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ec4899 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.saved-items-section .section-header .section-desc {\n  color: var(--text-secondary);\n  font-size: 16px;\n}\n.saved-items-section .items-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n}\n.saved-items-section .items-grid .item-card {\n  background: var(--bg-secondary);\n  border-radius: 16px;\n  padding: 20px;\n  box-shadow: 0 4px 12px var(--shadow);\n  transition: all 0.3s ease;\n  cursor: pointer;\n  border: 2px solid var(--border-color);\n  position: relative;\n}\n.saved-items-section .items-grid .item-card.grade-legendary {\n  border-color: #ffd700;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.1) 0%,\n      rgba(255, 165, 0, 0.1) 100%);\n}\n.saved-items-section .items-grid .item-card.grade-rare {\n  border-color: #a855f7;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(168, 85, 247, 0.1) 0%,\n      rgba(139, 92, 246, 0.1) 100%);\n}\n.saved-items-section .items-grid .item-card.grade-uncommon {\n  border-color: #3b82f6;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.1) 0%,\n      rgba(37, 99, 235, 0.1) 100%);\n}\n.saved-items-section .items-grid .item-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(255, 215, 0, 0.3);\n}\n.saved-items-section .items-grid .item-card .item-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n.saved-items-section .items-grid .item-card .item-header h4 {\n  font-size: 18px;\n  font-weight: bold;\n  color: var(--text-primary);\n  margin: 0;\n  flex: 1;\n}\n.saved-items-section .items-grid .item-card .item-header .delete-btn {\n  background: none;\n  border: none;\n  color: #ef4444;\n  font-size: 20px;\n  cursor: pointer;\n  padding: 4px;\n  transition: all 0.2s ease;\n}\n.saved-items-section .items-grid .item-card .item-header .delete-btn:hover {\n  transform: scale(1.2);\n  color: #dc2626;\n}\n.saved-items-section .items-grid .item-card .item-desc {\n  color: var(--text-secondary);\n  font-size: 13px;\n  line-height: 1.5;\n  margin-bottom: 12px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.saved-items-section .items-grid .item-card .item-stats {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-bottom: 12px;\n}\n.saved-items-section .items-grid .item-card .item-stats .stat {\n  background: rgba(16, 185, 129, 0.1);\n  color: #10b981;\n  padding: 4px 10px;\n  border-radius: 8px;\n  font-size: 12px;\n  font-weight: 600;\n}\n.saved-items-section .items-grid .item-card .item-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.saved-items-section .items-grid .item-card .item-tags .tag {\n  background: rgba(139, 92, 246, 0.1);\n  color: #8b5cf6;\n  padding: 3px 10px;\n  border-radius: 10px;\n  font-size: 11px;\n  font-weight: 500;\n}\n.saved-items-section .items-grid .item-card .item-tags .tag.type-tag {\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n}\n.saved-items-section .items-grid .item-card .item-tags .tag.grade-tag {\n  background: rgba(255, 215, 0, 0.2);\n  color: #d97706;\n  font-weight: 600;\n}\n.saved-items-section .items-grid .item-card .item-meta {\n  font-size: 11px;\n  color: var(--text-secondary);\n  padding-top: 8px;\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\n}\n.item-creator-panel .item-creator-container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n.item-creator-panel .item-creator-container .creator-intro {\n  text-align: center;\n  margin-bottom: 32px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.05) 0%,\n      rgba(236, 72, 153, 0.05) 100%);\n  border-radius: 16px;\n  border: 2px solid rgba(255, 215, 0, 0.2);\n}\n.item-creator-panel .item-creator-container .creator-intro h4 {\n  font-size: 24px;\n  color: var(--text-primary);\n  margin-bottom: 12px;\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ec4899 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.item-creator-panel .item-creator-container .creator-intro p {\n  color: var(--text-secondary);\n  font-size: 16px;\n}\n.item-creator-panel .item-creator-container .item-type-buttons {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16px;\n  margin-bottom: 40px;\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn {\n  padding: 16px 24px;\n  border: 2px solid rgba(255, 215, 0, 0.3);\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn.weapon {\n  border-color: #ef4444;\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn.weapon:hover:not(:disabled) {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(239, 68, 68, 0.1) 0%,\n      rgba(220, 38, 38, 0.1) 100%);\n  border-color: #dc2626;\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn.armor {\n  border-color: #3b82f6;\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn.armor:hover:not(:disabled) {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.1) 0%,\n      rgba(37, 99, 235, 0.1) 100%);\n  border-color: #2563eb;\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn.rare {\n  border-color: #a855f7;\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn.rare:hover:not(:disabled) {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(168, 85, 247, 0.1) 0%,\n      rgba(139, 92, 246, 0.1) 100%);\n  border-color: #8b5cf6;\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn.legendary {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff8c00 100%);\n  border-color: transparent;\n  color: white;\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn.legendary:hover:not(:disabled) {\n  box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn.consumable {\n  border-color: #10b981;\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn.consumable:hover:not(:disabled) {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(16, 185, 129, 0.1) 0%,\n      rgba(5, 150, 105, 0.1) 100%);\n  border-color: #059669;\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn.special {\n  border-color: #ec4899;\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn.special:hover:not(:disabled) {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(236, 72, 153, 0.1) 0%,\n      rgba(219, 39, 119, 0.1) 100%);\n  border-color: #db2777;\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\n}\n.item-creator-panel .item-creator-container .item-type-buttons .generate-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n.item-creator-panel .item-creator-container .error-message {\n  background: #fee;\n  color: #c33;\n  padding: 16px;\n  border-radius: 12px;\n  margin-bottom: 24px;\n  border: 2px solid #fcc;\n  text-align: center;\n  font-weight: 500;\n}\n.item-creator-panel .item-creator-container .generated-items-list {\n  margin-top: 30px;\n}\n.item-creator-panel .item-creator-container .generated-items-list h4 {\n  font-size: 20px;\n  color: var(--text-primary);\n  margin-bottom: 20px;\n  text-align: center;\n}\n.item-creator-panel .item-creator-container .generated-items-list .items-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 16px;\n  margin-bottom: 20px;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card {\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  padding: 16px;\n  border: 2px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card.grade-common {\n  border-color: #9e9e9e;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card.grade-uncommon {\n  border-color: #4caf50;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card.grade-rare {\n  border-color: #2196f3;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card.grade-epic {\n  border-color: #9c27b0;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card.grade-legendary {\n  border-color: #ff9800;\n  box-shadow: 0 0 15px rgba(255, 152, 0, 0.3);\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 8px;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-header h5 {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n  flex: 1;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-header .item-grade-badge {\n  padding: 2px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  font-weight: 600;\n  white-space: nowrap;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-header .item-grade-badge.grade-\\c77c\\bc18  {\n  background: #9e9e9e;\n  color: white;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-header .item-grade-badge.grade-\\ace0\\ae09  {\n  background: #4caf50;\n  color: white;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-header .item-grade-badge.grade-\\d76c\\adc0  {\n  background: #2196f3;\n  color: white;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-header .item-grade-badge.grade-\\c601\\c6c5  {\n  background: #9c27b0;\n  color: white;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-header .item-grade-badge.grade-\\c804\\c124 ,\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-header .item-grade-badge.grade-\\c2e0\\d654  {\n  background:\n    linear-gradient(\n      135deg,\n      #ff9800,\n      #f44336);\n  color: white;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-type {\n  font-size: 12px;\n  color: var(--text-secondary);\n  margin-bottom: 8px;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-description {\n  font-size: 13px;\n  color: var(--text-primary);\n  line-height: 1.5;\n  margin-bottom: 12px;\n  min-height: 60px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-stats {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-stats .stat-mini {\n  padding: 4px 8px;\n  background: var(--bg-primary);\n  border-radius: 4px;\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-actions {\n  display: flex;\n  gap: 8px;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-actions .save-mini-btn {\n  flex: 1;\n  padding: 8px;\n  background: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.item-creator-panel .item-creator-container .generated-items-list .item-card .item-card-actions .save-mini-btn:hover {\n  background: var(--primary-dark);\n  transform: scale(1.02);\n}\n.item-creator-panel .item-creator-container .generated-items-list .bulk-actions {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n.item-creator-panel .item-creator-container .generated-items-list .bulk-actions .save-all-btn {\n  padding: 14px 32px;\n  background:\n    linear-gradient(\n      135deg,\n      var(--primary-color),\n      var(--primary-dark));\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 16px;\n  font-weight: 700;\n  cursor: pointer;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  transition: all 0.3s ease;\n}\n.item-creator-panel .item-creator-container .generated-items-list .bulk-actions .save-all-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);\n}\n.item-creator-panel .item-creator-container .generated-items-list .bulk-actions .save-all-btn:active {\n  transform: translateY(0);\n}\n.item-creator-panel .item-creator-container .generated-item-info {\n  margin-top: 30px;\n  background: var(--bg-secondary);\n  border-radius: 20px;\n  padding: 32px;\n  box-shadow: var(--shadow);\n  border: 2px solid var(--border-color);\n  width: 100%;\n}\n.item-creator-panel .item-creator-container .generated-item-info h4 {\n  font-size: 24px;\n  color: var(--text-primary);\n  margin-bottom: 24px;\n  text-align: center;\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ec4899 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-title {\n  text-align: center;\n  margin-bottom: 20px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.1) 0%,\n      rgba(236, 72, 153, 0.1) 100%);\n  border-radius: 16px;\n  position: relative;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-title.grade-legendary {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.15) 0%,\n      rgba(255, 165, 0, 0.15) 100%);\n  border: 2px solid rgba(255, 215, 0, 0.5);\n  animation: legendaryGlow 2s ease-in-out infinite;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-title h2 {\n  font-size: 28px;\n  font-weight: bold;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-title .item-grade-badge {\n  display: inline-block;\n  padding: 6px 16px;\n  border-radius: 20px;\n  font-size: 13px;\n  font-weight: 600;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-title .item-grade-badge.grade-\\c77c\\bc18  {\n  background: #9ca3af;\n  color: white;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-title .item-grade-badge.grade-\\ace0\\ae09  {\n  background: #3b82f6;\n  color: white;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-title .item-grade-badge.grade-\\d76c\\adc0  {\n  background: #a855f7;\n  color: white;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-title .item-grade-badge.grade-\\c804\\c124  {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff8c00 100%);\n  color: white;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-title .item-grade-badge.grade-\\c2e0\\d654  {\n  background:\n    linear-gradient(\n      135deg,\n      #ff0080 0%,\n      #7928ca 100%);\n  color: white;\n  animation: pulse 2s ease-in-out infinite;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-type-info {\n  text-align: center;\n  margin-bottom: 20px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-type-info .type-badge {\n  display: inline-block;\n  padding: 8px 20px;\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n  border-radius: 20px;\n  font-size: 14px;\n  font-weight: 600;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-description {\n  margin-bottom: 20px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-description h5 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffd700;\n  margin-bottom: 8px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-description p {\n  color: var(--text-secondary);\n  line-height: 1.8;\n  font-size: 15px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-stats {\n  margin-bottom: 20px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-stats h5 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffd700;\n  margin-bottom: 12px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-stats .stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 12px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-stats .stats-grid .stat-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px;\n  background: rgba(16, 185, 129, 0.05);\n  border-left: 3px solid #10b981;\n  border-radius: 8px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-stats .stats-grid .stat-item .stat-label {\n  color: var(--text-secondary);\n  font-size: 14px;\n  font-weight: 500;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-stats .stats-grid .stat-item .stat-value {\n  color: #10b981;\n  font-size: 16px;\n  font-weight: 700;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-effects {\n  margin-bottom: 20px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-effects h5 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffd700;\n  margin-bottom: 8px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-effects ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-effects ul li {\n  padding: 8px 16px;\n  background: rgba(139, 92, 246, 0.05);\n  border-left: 3px solid #8b5cf6;\n  margin-bottom: 8px;\n  border-radius: 8px;\n  color: var(--text-secondary);\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-requirements {\n  margin-bottom: 20px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-requirements h5 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffd700;\n  margin-bottom: 8px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-requirements p {\n  color: #ef4444;\n  font-weight: 500;\n  padding: 12px;\n  background: rgba(239, 68, 68, 0.05);\n  border-left: 3px solid #ef4444;\n  border-radius: 8px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-lore {\n  margin-bottom: 20px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-lore h5 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffd700;\n  margin-bottom: 8px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-lore .lore-text {\n  color: var(--text-secondary);\n  font-style: italic;\n  padding: 16px;\n  background: rgba(139, 92, 246, 0.05);\n  border-radius: 12px;\n  border: 2px dashed rgba(139, 92, 246, 0.3);\n  line-height: 1.8;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-tags {\n  margin-bottom: 24px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-tags h5 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffd700;\n  margin-bottom: 12px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-tags .tags-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.item-creator-panel .item-creator-container .generated-item-info .item-tags .tags-list .tag-item {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.1) 0%,\n      rgba(236, 72, 153, 0.1) 100%);\n  color: #d97706;\n  padding: 6px 16px;\n  border-radius: 20px;\n  font-size: 13px;\n  font-weight: 500;\n}\n.item-creator-panel .item-creator-container .generated-item-info .action-buttons {\n  display: flex;\n  gap: 12px;\n  margin-top: 32px;\n  padding-top: 24px;\n  border-top: 2px solid rgba(255, 215, 0, 0.2);\n}\n.item-creator-panel .item-creator-container .generated-item-info .action-buttons button {\n  flex: 1;\n  padding: 16px 24px;\n  border: none;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.item-creator-panel .item-creator-container .generated-item-info .action-buttons .save-btn {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981 0%,\n      #059669 100%);\n  color: white;\n}\n.item-creator-panel .item-creator-container .generated-item-info .action-buttons .save-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);\n}\n.item-creator-panel .item-creator-container .generated-item-info .action-buttons .add-btn {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff8c00 100%);\n  color: white;\n}\n.item-creator-panel .item-creator-container .generated-item-info .action-buttons .add-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);\n}\n.item-creator-panel .item-creator-container .generated-item-info .action-buttons .regenerate-btn {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b 0%,\n      #d97706 100%);\n  color: white;\n}\n.item-creator-panel .item-creator-container .generated-item-info .action-buttons .regenerate-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);\n}\n.story-creator-panel {\n  margin-top: 40px;\n  padding: 32px;\n  background: var(--bg-secondary);\n  border-radius: 24px;\n  border: 2px solid var(--border-color);\n  box-shadow: var(--shadow);\n}\n.story-creator-panel .creator-container {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n.story-creator-panel .creator-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n}\n.story-creator-panel .creator-header h3 {\n  font-size: 28px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  margin: 0;\n}\n.story-creator-panel .creator-header .close-btn {\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: var(--bg-primary);\n  border-radius: 12px;\n  font-size: 24px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n}\n.story-creator-panel .creator-header .close-btn:hover {\n  transform: rotate(90deg);\n  background: #ef4444;\n  color: white;\n}\n.story-creator-panel .creator-intro {\n  text-align: center;\n  margin-bottom: 32px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.05) 0%,\n      rgba(118, 75, 162, 0.05) 100%);\n  border-radius: 16px;\n  border: 2px solid rgba(102, 126, 234, 0.2);\n}\n.story-creator-panel .creator-intro h4 {\n  font-size: 22px;\n  color: var(--text-primary);\n  margin-bottom: 12px;\n}\n.story-creator-panel .creator-intro p {\n  color: var(--text-secondary);\n  font-size: 15px;\n  line-height: 1.6;\n}\n.story-creator-panel .error-message {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n  padding: 16px;\n  border-radius: 12px;\n  margin-bottom: 24px;\n  border: 2px solid rgba(239, 68, 68, 0.3);\n  text-align: center;\n  font-weight: 500;\n}\n.story-creator-panel .title-input-section {\n  margin-bottom: 32px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.05) 0%,\n      rgba(118, 75, 162, 0.05) 100%);\n  border-radius: 16px;\n  border: 2px solid rgba(102, 126, 234, 0.2);\n}\n.story-creator-panel .title-input-section label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.story-creator-panel .title-input-section label .label-icon {\n  font-size: 20px;\n}\n.story-creator-panel .title-input-section label .required {\n  color: #ef4444;\n  font-size: 18px;\n}\n.story-creator-panel .title-input-section .title-input {\n  width: 100%;\n  padding: 14px 18px;\n  font-size: 16px;\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  transition: all 0.3s ease;\n  font-family: inherit;\n}\n.story-creator-panel .title-input-section .title-input::placeholder {\n  color: var(--text-secondary);\n  opacity: 0.6;\n}\n.story-creator-panel .title-input-section .title-input:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n.story-creator-panel .title-input-section .title-input:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.story-creator-panel .title-input-section .char-count {\n  text-align: right;\n  margin-top: 8px;\n  font-size: 13px;\n  color: var(--text-secondary);\n}\n.story-creator-panel .selection-section {\n  display: grid;\n  gap: 24px;\n  margin-bottom: 32px;\n}\n.story-creator-panel .selection-section .select-group h5 {\n  font-size: 18px;\n  color: var(--text-primary);\n  margin-bottom: 16px;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.story-creator-panel .selection-section .select-group h5 .selection-count {\n  font-size: 14px;\n  color: #667eea;\n  font-weight: 500;\n  padding: 4px 12px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 12px;\n}\n.story-creator-panel .selection-section .select-group .select-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 12px;\n}\n.story-creator-panel .selection-section .select-group .select-item {\n  padding: 16px;\n  background: var(--bg-primary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.story-creator-panel .selection-section .select-group .select-item:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: #667eea;\n}\n.story-creator-panel .selection-section .select-group .select-item.selected {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.15) 0%,\n      rgba(118, 75, 162, 0.15) 100%);\n  border-color: #667eea;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);\n}\n.story-creator-panel .selection-section .select-group .select-item .item-name {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n}\n.story-creator-panel .selection-section .select-group .select-item .item-desc {\n  font-size: 13px;\n  color: var(--text-secondary);\n}\n.story-creator-panel .selection-section .select-group .no-content {\n  text-align: center;\n  color: var(--text-secondary);\n  padding: 24px;\n  background: var(--bg-primary);\n  border-radius: 12px;\n  font-size: 14px;\n}\n.story-creator-panel .creator-actions {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 32px;\n}\n.story-creator-panel .creator-actions .generate-story-btn {\n  padding: 18px 48px;\n  font-size: 18px;\n  font-weight: 600;\n  border: none;\n  border-radius: 16px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);\n}\n.story-creator-panel .creator-actions .generate-story-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.5);\n}\n.story-creator-panel .creator-actions .generate-story-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n.story-creator-panel .generated-story-result {\n  margin-top: 32px;\n  padding: 32px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.08) 0%,\n      rgba(118, 75, 162, 0.08) 100%);\n  border-radius: 20px;\n  border: 2px solid rgba(102, 126, 234, 0.3);\n}\n.story-creator-panel .generated-story-result > h4 {\n  text-align: center;\n  font-size: 24px;\n  color: #667eea;\n  margin-bottom: 24px;\n}\n.story-creator-panel .generated-story-result .story-preview {\n  background: var(--bg-secondary);\n  padding: 24px;\n  border-radius: 16px;\n  margin-bottom: 24px;\n}\n.story-creator-panel .generated-story-result .story-preview .story-title {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n}\n.story-creator-panel .generated-story-result .story-preview .story-title .story-icon {\n  font-size: 36px;\n}\n.story-creator-panel .generated-story-result .story-preview .story-title h3 {\n  font-size: 28px;\n  color: var(--text-primary);\n  margin: 0;\n}\n.story-creator-panel .generated-story-result .story-preview .story-desc {\n  color: var(--text-secondary);\n  font-size: 16px;\n  line-height: 1.6;\n  margin-bottom: 16px;\n}\n.story-creator-panel .generated-story-result .story-preview .story-meta {\n  display: flex;\n  gap: 16px;\n  flex-wrap: wrap;\n  margin-bottom: 20px;\n}\n.story-creator-panel .generated-story-result .story-preview .story-meta .meta-item {\n  padding: 8px 16px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 20px;\n  font-size: 14px;\n  color: #667eea;\n  font-weight: 500;\n}\n.story-creator-panel .generated-story-result .story-preview .story-intro h5 {\n  font-size: 16px;\n  color: var(--text-primary);\n  margin-bottom: 12px;\n  font-weight: 600;\n}\n.story-creator-panel .generated-story-result .story-preview .story-intro p {\n  color: var(--text-secondary);\n  line-height: 1.8;\n  margin-bottom: 8px;\n  font-size: 15px;\n}\n.story-creator-panel .generated-story-result .story-actions {\n  display: flex;\n  gap: 16px;\n  justify-content: center;\n}\n.story-creator-panel .generated-story-result .story-actions button {\n  padding: 14px 32px;\n  font-size: 16px;\n  font-weight: 600;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.story-creator-panel .generated-story-result .story-actions .save-btn {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);\n}\n.story-creator-panel .generated-story-result .story-actions .save-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);\n}\n.story-creator-panel .generated-story-result .story-actions .start-btn {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981 0%,\n      #059669 100%);\n  color: white;\n  box-shadow: 0 4px 16px rgba(16, 185, 129, 0.3);\n}\n.story-creator-panel .generated-story-result .story-actions .start-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);\n}\n.story-creator-panel .generated-story-result .story-actions .regenerate-btn {\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  border: 2px solid var(--border-color);\n}\n.story-creator-panel .generated-story-result .story-actions .regenerate-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: #667eea;\n}\n.saved-section {\n  margin-top: 32px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 2px solid var(--border-color);\n  overflow: hidden;\n  transition: all 0.2s ease;\n}\n.saved-section:hover {\n  border-color: #667eea;\n}\n.saved-section .section-header-collapsible {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px;\n  cursor: pointer;\n  background: var(--bg-primary);\n  transition: background 0.2s ease;\n}\n.saved-section .section-header-collapsible:hover {\n  background: var(--bg-secondary);\n}\n.saved-section .section-header-collapsible .header-left {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  flex: 1;\n}\n.saved-section .section-header-collapsible .header-left .expand-icon {\n  font-size: 14px;\n  color: #667eea;\n  transition: transform 0.2s ease;\n  min-width: 20px;\n}\n.saved-section .section-header-collapsible .header-left h3 {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n}\n.saved-section .section-header-collapsible .header-left .count-badge {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  height: 28px;\n  padding: 0 12px;\n  background: #667eea;\n  color: white;\n  border-radius: 14px;\n  font-size: 13px;\n  font-weight: 700;\n}\n.saved-section .section-header-collapsible .header-left .gold-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: #f59e0b;\n  color: white;\n  border-radius: 10px;\n  font-size: 14px;\n  font-weight: 700;\n}\n.saved-section .section-header-collapsible .toggle-btn {\n  padding: 8px 16px;\n  background: var(--bg-secondary);\n  color: #667eea;\n  border: 2px solid #667eea;\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.saved-section .section-header-collapsible .toggle-btn:hover {\n  background: #667eea;\n  color: white;\n}\n.saved-section .section-header-collapsible .toggle-btn:active {\n  transform: scale(0.98);\n}\n.saved-section .section-content {\n  padding: 24px;\n  animation: slideDown 0.3s ease;\n  background: var(--bg-primary);\n}\n.saved-section .section-content .section-desc {\n  text-align: center;\n  color: var(--text-secondary);\n  font-size: 14px;\n  margin-bottom: 24px;\n}\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    max-height: 0;\n  }\n  to {\n    opacity: 1;\n    max-height: 5000px;\n  }\n}\n.saved-section.shop-section:hover {\n  border-color: #f59e0b;\n}\n.saved-section.shop-section .section-header-collapsible.shop-header .header-left .expand-icon {\n  color: #f59e0b;\n}\n.saved-section.shop-section .section-header-collapsible.shop-header .header-left h3 {\n  color: var(--text-primary);\n}\n.saved-section.shop-section .section-header-collapsible.shop-header .header-left .shop-badge {\n  background: #f59e0b;\n}\n.saved-section.shop-section .section-header-collapsible.shop-header .toggle-btn {\n  color: #f59e0b;\n  border-color: #f59e0b;\n}\n.saved-section.shop-section .section-header-collapsible.shop-header .toggle-btn:hover {\n  background: #f59e0b;\n  color: white;\n}\n.saved-stories-section {\n  margin-top: 48px;\n  padding: 0;\n}\n.saved-stories-section .section-header {\n  text-align: center;\n  margin-bottom: 32px;\n}\n.saved-stories-section .section-header h3 {\n  font-size: 28px;\n  color: var(--text-primary);\n  margin-bottom: 8px;\n}\n.saved-stories-section .section-header .section-desc {\n  color: var(--text-secondary);\n  font-size: 15px;\n}\n.saved-stories-section .stories-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 24px;\n}\n.saved-stories-section .story-card {\n  background: var(--bg-primary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 24px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: var(--shadow);\n}\n.saved-stories-section .story-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n  border-color: #667eea;\n}\n.saved-stories-section .story-card .story-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 16px;\n}\n.saved-stories-section .story-card .story-header .story-icon-title {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex: 1;\n}\n.saved-stories-section .story-card .story-header .story-icon-title .story-icon {\n  font-size: 32px;\n}\n.saved-stories-section .story-card .story-header .story-icon-title h4 {\n  font-size: 20px;\n  color: var(--text-primary);\n  margin: 0;\n  font-weight: 700;\n}\n.saved-stories-section .story-card .story-header .delete-btn {\n  background: none;\n  border: none;\n  font-size: 20px;\n  cursor: pointer;\n  opacity: 0.6;\n  transition: all 0.3s ease;\n  padding: 4px 8px;\n}\n.saved-stories-section .story-card .story-header .delete-btn:hover {\n  opacity: 1;\n  transform: scale(1.2);\n}\n.saved-stories-section .story-card .story-meta {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n  margin-bottom: 16px;\n}\n.saved-stories-section .story-card .story-meta .meta-item {\n  padding: 6px 12px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 12px;\n  font-size: 13px;\n  color: #667eea;\n  font-weight: 500;\n}\n.saved-stories-section .story-card .story-description {\n  color: var(--text-secondary);\n  font-size: 14px;\n  line-height: 1.6;\n  margin-bottom: 16px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.saved-stories-section .story-card .story-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 16px;\n  border-top: 1px solid var(--border-color);\n}\n.saved-stories-section .story-card .story-footer .date {\n  font-size: 12px;\n  color: var(--text-secondary);\n}\n.saved-stories-section .story-card .story-footer .created-by {\n  font-size: 12px;\n  color: #667eea;\n  font-weight: 500;\n}\n.action-card.premium {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.1) 0%,\n      rgba(255, 165, 0, 0.1) 100%);\n  border: 2px solid rgba(255, 215, 0, 0.3);\n}\n.action-card.premium .card-icon {\n  font-size: 48px;\n  animation: sparkle 2s ease-in-out infinite;\n}\n.action-card.premium:hover {\n  border-color: #ffd700;\n  box-shadow: 0 8px 32px rgba(255, 215, 0, 0.3);\n}\n.action-card.premium .premium-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff8c00 100%);\n  color: white;\n  font-weight: 700;\n  animation: pulse 2s ease-in-out infinite;\n}\n@keyframes sparkle {\n  0%, 100% {\n    transform: scale(1) rotate(0deg);\n  }\n  50% {\n    transform: scale(1.1) rotate(5deg);\n  }\n}\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.8;\n  }\n}\n@keyframes legendaryGlow {\n  0%, 100% {\n    box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);\n  }\n}\n.story-flow-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.75);\n  -webkit-backdrop-filter: blur(8px);\n  backdrop-filter: blur(8px);\n  display: block;\n  z-index: 99999 !important;\n  animation: fadeIn 0.3s ease;\n  pointer-events: all;\n}\n.story-flow-overlay .story-flow-panel {\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  background: var(--bg-primary);\n  border: none;\n  border-radius: 0 !important;\n  box-shadow: none;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  animation: fadeIn 0.3s ease;\n  position: relative;\n}\n.story-flow-overlay .story-flow-panel .flow-header {\n  padding: 20px 48px;\n  background:\n    linear-gradient(\n      135deg,\n      var(--accent-primary) 0%,\n      var(--accent-secondary) 100%);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 2px solid var(--border-color);\n  cursor: default;\n  -webkit-user-select: none;\n  user-select: none;\n  flex-shrink: 0;\n}\n.story-flow-overlay .story-flow-panel .flow-header .header-left {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n.story-flow-overlay .story-flow-panel .flow-header .header-left h3 {\n  margin: 0;\n  font-size: 1.7rem;\n  font-weight: 700;\n  color: white;\n}\n.story-flow-overlay .story-flow-panel .flow-header .close-btn {\n  background: rgba(255, 255, 255, 0.2);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 10px 18px;\n  border-radius: 8px;\n  font-size: 1.3rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.story-flow-overlay .story-flow-panel .flow-header .close-btn:hover {\n  background: rgba(255, 255, 255, 0.3);\n  transform: scale(1.1) rotate(90deg);\n}\n.story-flow-overlay .story-flow-panel .flow-info {\n  padding: 24px 48px;\n  background: var(--bg-secondary);\n  border-bottom: 2px solid var(--border-color);\n  flex-shrink: 0;\n}\n.story-flow-overlay .story-flow-panel .flow-info p {\n  margin: 0 0 16px 0;\n  color: var(--text-secondary);\n  font-size: 1.1rem;\n}\n.story-flow-overlay .story-flow-panel .flow-info p strong {\n  color: var(--accent-primary);\n  font-weight: 600;\n}\n.story-flow-overlay .story-flow-panel .flow-info .flow-stats {\n  display: flex;\n  gap: 20px;\n  flex-wrap: wrap;\n}\n.story-flow-overlay .story-flow-panel .flow-info .flow-stats .stat-item {\n  padding: 12px 20px;\n  background: var(--bg-primary);\n  border: 2px solid var(--accent-primary);\n  border-radius: 8px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas {\n  flex: 1;\n  padding: 48px 60px;\n  overflow-y: auto;\n  background: var(--bg-primary);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas::-webkit-scrollbar {\n  width: 12px;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 6px;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 6px;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes {\n  min-height: 100%;\n  position: relative;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node {\n  display: flex;\n  align-items: flex-start;\n  gap: 20px;\n  padding: 24px;\n  margin-bottom: 32px;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  transition: all 0.3s ease;\n  position: relative;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node:hover {\n  transform: translateX(8px);\n  box-shadow: 0 4px 16px var(--shadow);\n  border-color: var(--accent-primary);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node.node-start {\n  border-color: #10b981;\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary) 0%,\n      rgba(16, 185, 129, 0.1) 100%);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node.node-start .node-icon {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981 0%,\n      #059669 100%);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node.node-story {\n  border-color: #3b82f6;\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary) 0%,\n      rgba(59, 130, 246, 0.1) 100%);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node.node-story .node-icon {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node.node-choice {\n  border-color: #f59e0b;\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary) 0%,\n      rgba(245, 158, 11, 0.1) 100%);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node.node-choice .node-icon {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b 0%,\n      #d97706 100%);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node.node-current {\n  border-color: var(--accent-primary);\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-secondary) 0%,\n      rgba(139, 92, 246, 0.2) 100%);\n  box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);\n  animation: pulse 2s ease-in-out infinite;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node.node-current .node-icon {\n  background: var(--gradient-primary);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node .node-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  flex-shrink: 0;\n  box-shadow: 0 4px 12px var(--shadow);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node .node-content {\n  flex: 1;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node .node-content .node-label {\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 6px;\n  line-height: 1.4;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node .node-content .node-level {\n  font-size: 0.85rem;\n  color: var(--text-secondary);\n  margin-bottom: 8px;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node .node-content .node-choices {\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid var(--border-color);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node .node-content .node-choices .choice-preview {\n  padding: 8px 12px;\n  margin-bottom: 8px;\n  background: var(--bg-primary);\n  border-left: 3px solid var(--accent-primary);\n  border-radius: 6px;\n  font-size: 0.9rem;\n  color: var(--text-secondary);\n  transition: all 0.2s ease;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node .node-content .node-choices .choice-preview:hover {\n  background: var(--accent-primary);\n  color: white;\n  transform: translateX(4px);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node .node-content .node-choices .choice-preview:last-child {\n  margin-bottom: 0;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node .flow-connector {\n  position: absolute;\n  left: 40px;\n  bottom: -24px;\n  width: 2px;\n  height: 24px;\n  background: var(--accent-primary);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-nodes .flow-node .flow-connector::after {\n  content: "\\25bc";\n  position: absolute;\n  bottom: -8px;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 0.6rem;\n  color: var(--accent-primary);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-legend {\n  margin-top: 32px;\n  padding: 20px;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-legend h4 {\n  margin: 0 0 16px 0;\n  font-size: 1.1rem;\n  color: var(--text-primary);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-legend .legend-items {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 12px;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-legend .legend-items .legend-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  font-size: 0.9rem;\n  color: var(--text-primary);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-legend .legend-items .legend-item .legend-icon {\n  width: 32px;\n  height: 32px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1rem;\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-legend .legend-items .legend-item .legend-icon.start {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981 0%,\n      #059669 100%);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-legend .legend-items .legend-item .legend-icon.story {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-legend .legend-items .legend-item .legend-icon.choice {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b 0%,\n      #d97706 100%);\n}\n.story-flow-overlay .story-flow-panel .flow-canvas .flow-legend .legend-items .legend-item .legend-icon.current {\n  background: var(--gradient-primary);\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes slideUp {\n  from {\n    transform: translateY(30px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n@keyframes pulse {\n  0%, 100% {\n    box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(139, 92, 246, 0.6);\n  }\n}\n.choice-container {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin: 20px 0;\n}\n@media (max-width: 768px) {\n  .choice-container {\n    gap: 14px;\n    margin: 24px 0;\n  }\n}\n@media (max-width: 480px) {\n  .choice-container {\n    gap: 16px;\n  }\n}\n.choice-item {\n  display: flex;\n  align-items: stretch;\n  gap: 8px;\n}\n@media (max-width: 768px) {\n  .choice-item {\n    gap: 10px;\n  }\n}\n.choice-button {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 20px;\n  background: rgba(139, 69, 255, 0.1);\n  border: 2px solid rgba(139, 69, 255, 0.3);\n  border-radius: 12px;\n  transition: all 0.3s ease;\n  cursor: pointer;\n  text-align: left;\n  min-width: 0;\n}\n.choice-button .choice-number {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: rgba(139, 69, 255, 0.2);\n  border-radius: 50%;\n  font-weight: bold;\n  color: #8b45ff;\n  font-size: 14px;\n  flex-shrink: 0;\n}\n.choice-button .choice-text {\n  flex: 1;\n  color: var(--text-color);\n  font-size: 15px;\n  line-height: 1.5;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.choice-button:hover {\n  background: rgba(139, 69, 255, 0.2);\n  border-color: rgba(139, 69, 255, 0.5);\n  transform: translateX(8px);\n  box-shadow: 0 4px 12px rgba(139, 69, 255, 0.2);\n}\n.choice-button:active {\n  transform: translateX(8px) scale(0.98);\n}\n@media (max-width: 768px) {\n  .choice-button {\n    min-height: 56px;\n    padding: 18px 20px;\n    gap: 14px;\n  }\n  .choice-button .choice-number {\n    width: 36px;\n    height: 36px;\n    font-size: 16px;\n  }\n  .choice-button .choice-text {\n    font-size: 1.05rem;\n    line-height: 1.6;\n  }\n  .choice-button:hover {\n    transform: translateX(4px);\n  }\n}\n@media (max-width: 480px) {\n  .choice-button {\n    min-height: 60px;\n    padding: 20px 18px;\n  }\n  .choice-button .choice-text {\n    font-size: 1.1rem;\n  }\n}\n.link-scenario-btn {\n  padding: 0;\n  background: transparent;\n  border: 2px solid rgba(139, 69, 255, 0.5);\n  border-radius: 8px;\n  color: #8b45ff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 16px;\n  flex-shrink: 0;\n  width: 40px;\n  min-width: 40px;\n  max-width: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.link-scenario-btn:hover {\n  background: rgba(139, 69, 255, 0.3);\n  border-color: rgba(139, 69, 255, 0.7);\n  transform: scale(1.15);\n  box-shadow: 0 2px 8px rgba(139, 69, 255, 0.3);\n}\n.link-scenario-btn:active {\n  transform: scale(0.95);\n}\n.scenario-link-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 99998;\n  animation: fadeIn 0.3s ease;\n}\n.scenario-link-panel {\n  background: #ffffff;\n  border: 2px solid #ced4da;\n  border-radius: 16px;\n  padding: 24px;\n  width: 90%;\n  max-width: 1200px;\n  max-height: 80vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n  position: relative;\n}\n.scenario-link-panel .link-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid #e9ecef;\n  cursor: move;\n}\n.scenario-link-panel .link-header .header-left {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.scenario-link-panel .link-header .header-left .drag-indicator {\n  color: #6c757d;\n  font-size: 18px;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.scenario-link-panel .link-header .header-left h3 {\n  color: #212529;\n  font-size: 20px;\n  font-weight: bold;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.scenario-link-panel .link-header .close-btn {\n  padding: 8px 16px;\n  background: #f8f9fa;\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  color: #212529;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 18px;\n  line-height: 1;\n}\n.scenario-link-panel .link-header .close-btn:hover {\n  background: #e9ecef;\n  transform: scale(1.05);\n}\n.scenario-link-panel .link-info {\n  margin-bottom: 20px;\n  padding: 16px;\n  background: #f8f9fa;\n  border-radius: 8px;\n  border-left: 4px solid #0d6efd;\n}\n.scenario-link-panel .link-info p {\n  color: #212529;\n  margin: 0 0 8px 0;\n  font-size: 15px;\n}\n.scenario-link-panel .link-info p:last-child {\n  margin-bottom: 0;\n}\n.scenario-link-panel .link-info p strong {\n  color: #0d6efd;\n  font-weight: bold;\n}\n.scenario-link-panel .link-info .hint {\n  font-size: 13px;\n  opacity: 0.8;\n  color: #6c757d;\n}\n.scenario-link-panel .scenario-list {\n  flex: 1;\n  overflow-y: auto;\n}\n.scenario-link-panel .scenario-list::-webkit-scrollbar {\n  width: 8px;\n}\n.scenario-link-panel .scenario-list::-webkit-scrollbar-track {\n  background: rgba(139, 69, 255, 0.1);\n  border-radius: 4px;\n}\n.scenario-link-panel .scenario-list::-webkit-scrollbar-thumb {\n  background: rgba(139, 69, 255, 0.3);\n  border-radius: 4px;\n}\n.scenario-link-panel .scenario-list::-webkit-scrollbar-thumb:hover {\n  background: rgba(139, 69, 255, 0.5);\n}\n.scenario-link-panel .no-scenarios {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n}\n.scenario-link-panel .no-scenarios p {\n  color: #6c757d;\n  font-size: 16px;\n  margin-bottom: 20px;\n  opacity: 0.7;\n}\n.scenario-link-panel .no-scenarios .create-scenario-btn {\n  padding: 12px 24px;\n  background: #0d6efd;\n  border: 2px solid #0d6efd;\n  border-radius: 8px;\n  color: #ffffff;\n  font-size: 15px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.scenario-link-panel .no-scenarios .create-scenario-btn:hover {\n  background: #0b5ed7;\n  border-color: #0b5ed7;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(13, 110, 253, 0.3);\n}\n.scenario-link-panel .panel-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid rgba(139, 69, 255, 0.2);\n  cursor: move;\n}\n.scenario-link-panel .panel-header h3 {\n  color: var(--text-color);\n  font-size: 20px;\n  font-weight: bold;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.scenario-link-panel .panel-header .close-btn {\n  padding: 8px 16px;\n  background: rgba(139, 69, 255, 0.2);\n  border: 1px solid rgba(139, 69, 255, 0.3);\n  border-radius: 8px;\n  color: var(--text-color);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.scenario-link-panel .panel-header .close-btn:hover {\n  background: rgba(139, 69, 255, 0.3);\n  transform: scale(1.05);\n}\n.scenario-link-panel .panel-content {\n  flex: 1;\n  overflow-y: auto;\n}\n.scenario-link-panel .panel-content::-webkit-scrollbar {\n  width: 8px;\n}\n.scenario-link-panel .panel-content::-webkit-scrollbar-track {\n  background: rgba(139, 69, 255, 0.1);\n  border-radius: 4px;\n}\n.scenario-link-panel .panel-content::-webkit-scrollbar-thumb {\n  background: rgba(139, 69, 255, 0.3);\n  border-radius: 4px;\n}\n.scenario-link-panel .panel-content::-webkit-scrollbar-thumb:hover {\n  background: rgba(139, 69, 255, 0.5);\n}\n.flow-scenario-link-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.7);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: fadeIn 0.3s ease;\n}\n.flow-scenario-link-panel {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 24px;\n  width: 90%;\n  max-width: 1000px;\n  max-height: 85vh;\n  padding: 32px;\n  box-shadow: 0 20px 60px rgba(102, 126, 234, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.2);\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  position: relative;\n  overflow: hidden;\n}\n.flow-scenario-link-panel::before {\n  content: "";\n  position: absolute;\n  top: -50%;\n  right: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    radial-gradient(\n      circle,\n      rgba(255, 255, 255, 0.1) 0%,\n      transparent 70%);\n  animation: headerGlow 8s ease-in-out infinite;\n  pointer-events: none;\n}\n.flow-scenario-link-panel .link-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 20px;\n  border-bottom: 2px solid rgba(255, 255, 255, 0.2);\n  cursor: move;\n  position: relative;\n  z-index: 1;\n}\n.flow-scenario-link-panel .link-header .header-left {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.flow-scenario-link-panel .link-header .header-left .drag-indicator {\n  font-size: 20px;\n  opacity: 0.5;\n  color: white;\n}\n.flow-scenario-link-panel .link-header .header-left h3 {\n  color: white;\n  font-size: 24px;\n  font-weight: 800;\n  margin: 0;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n.flow-scenario-link-panel .link-header .close-btn {\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  color: white;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n.flow-scenario-link-panel .link-header .close-btn:hover {\n  background: rgba(239, 68, 68, 0.25);\n  border-color: rgba(239, 68, 68, 0.4);\n  transform: scale(1.1) rotate(90deg);\n}\n.flow-scenario-link-panel .link-info {\n  background: rgba(255, 255, 255, 0.1);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border-radius: 16px;\n  padding: 20px;\n  position: relative;\n  z-index: 1;\n}\n.flow-scenario-link-panel .link-info .node-info-card {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 16px;\n  padding: 16px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n.flow-scenario-link-panel .link-info .node-info-card .node-icon-large {\n  font-size: 48px;\n  line-height: 1;\n}\n.flow-scenario-link-panel .link-info .node-info-card .node-details {\n  flex: 1;\n}\n.flow-scenario-link-panel .link-info .node-info-card .node-details h4 {\n  color: white;\n  font-size: 20px;\n  font-weight: 700;\n  margin: 0 0 8px 0;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n.flow-scenario-link-panel .link-info .node-info-card .node-details .node-type-badge {\n  display: inline-block;\n  padding: 4px 12px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  color: white;\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: uppercase;\n  margin: 0;\n}\n.flow-scenario-link-panel .link-info .choice-info {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n  margin-bottom: 12px;\n  padding: 12px;\n  background: rgba(255, 255, 255, 0.08);\n  border-radius: 8px;\n}\n.flow-scenario-link-panel .link-info .choice-info .choice-label {\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 13px;\n  font-weight: 600;\n}\n.flow-scenario-link-panel .link-info .choice-info .choice-value {\n  color: white;\n  font-size: 14px;\n  font-weight: 700;\n  font-family: monospace;\n}\n.flow-scenario-link-panel .link-info .hint {\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 14px;\n  margin: 0;\n  line-height: 1.6;\n}\n.flow-scenario-link-panel .scenario-list {\n  flex: 1;\n  overflow-y: auto;\n  position: relative;\n  z-index: 1;\n}\n.flow-scenario-link-panel .scenario-list::-webkit-scrollbar {\n  width: 10px;\n}\n.flow-scenario-link-panel .scenario-list::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 5px;\n}\n.flow-scenario-link-panel .scenario-list::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 5px;\n}\n.flow-scenario-link-panel .scenario-list::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.4);\n}\n.flow-scenario-link-panel .scenario-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 16px;\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card {\n  background: white;\n  border-radius: 16px;\n  padding: 20px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  border: 2px solid transparent;\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);\n  border-color: rgba(102, 126, 234, 0.5);\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card.linked {\n  border-color: #10b981;\n  background:\n    linear-gradient(\n      135deg,\n      #f0fdf4 0%,\n      #ecfdf5 100%);\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card.linked .linked-badge {\n  display: inline-block;\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card .scenario-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 12px;\n  gap: 8px;\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card .scenario-header h4 {\n  flex: 1;\n  font-size: 16px;\n  font-weight: 700;\n  color: #1a202c;\n  margin: 0;\n  line-height: 1.4;\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card .scenario-header .scenario-genre {\n  padding: 4px 10px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 600;\n  white-space: nowrap;\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card .scenario-header .linked-badge {\n  display: none;\n  padding: 4px 10px;\n  background: #10b981;\n  color: white;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 700;\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card .scenario-body .scenario-description {\n  font-size: 13px;\n  color: #4a5568;\n  line-height: 1.6;\n  margin-bottom: 12px;\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card .scenario-body .scenario-meta {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 8px;\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card .scenario-body .scenario-meta .meta-item {\n  font-size: 12px;\n  color: #718096;\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card .scenario-body .scenario-tags {\n  display: flex;\n  gap: 6px;\n  flex-wrap: wrap;\n}\n.flow-scenario-link-panel .scenario-grid .scenario-card .scenario-body .scenario-tags .tag {\n  padding: 3px 8px;\n  background: #edf2f7;\n  color: #4a5568;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 600;\n}\n.flow-scenario-link-panel .no-scenarios {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 16px;\n}\n.flow-scenario-link-panel .no-scenarios .empty-icon {\n  font-size: 64px;\n  margin-bottom: 16px;\n}\n.flow-scenario-link-panel .no-scenarios p {\n  color: white;\n  font-size: 16px;\n  margin-bottom: 20px;\n}\n.flow-scenario-link-panel .no-scenarios .create-scenario-btn {\n  padding: 12px 24px;\n  background: white;\n  color: #667eea;\n  border: none;\n  border-radius: 12px;\n  font-weight: 700;\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n.flow-scenario-link-panel .no-scenarios .create-scenario-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);\n}\n.scenario-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 16px;\n}\n.scenario-card {\n  background: #f8f9fa;\n  border: 2px solid #dee2e6;\n  border-radius: 12px;\n  padding: 16px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n}\n.scenario-card:hover {\n  background: #e9ecef;\n  border-color: #adb5bd;\n  transform: translateY(-4px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);\n}\n.scenario-card .scenario-header {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 12px;\n}\n.scenario-card .scenario-header h4 {\n  color: #212529;\n  font-size: 16px;\n  font-weight: bold;\n  margin: 0;\n}\n.scenario-card .scenario-header .scenario-genre {\n  display: inline-block;\n  align-self: flex-start;\n  padding: 4px 8px;\n  background: #0d6efd;\n  border-radius: 6px;\n  font-size: 12px;\n  color: #ffffff;\n}\n.scenario-card .scenario-body .scenario-description {\n  color: #495057;\n  font-size: 13px;\n  line-height: 1.5;\n  margin-bottom: 12px;\n  opacity: 0.8;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.scenario-card .scenario-body .scenario-meta {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.scenario-card .scenario-body .scenario-meta .meta-item {\n  color: #6c757d;\n  font-size: 12px;\n  opacity: 0.7;\n}\n.scenario-card .scenario-body .scenario-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n}\n.scenario-card .scenario-body .scenario-tags .tag {\n  padding: 4px 8px;\n  background: #e9ecef;\n  border-radius: 4px;\n  font-size: 11px;\n  color: #495057;\n}\n.scenario-card .scenario-title {\n  color: #212529;\n  font-size: 16px;\n  font-weight: bold;\n  margin: 0 0 8px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.scenario-card .scenario-genre {\n  display: inline-block;\n  padding: 4px 8px;\n  background: #0d6efd;\n  border-radius: 6px;\n  font-size: 12px;\n  color: #ffffff;\n  margin-bottom: 8px;\n}\n.scenario-card .scenario-description {\n  color: #495057;\n  font-size: 13px;\n  line-height: 1.5;\n  margin-bottom: 12px;\n  opacity: 0.8;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.scenario-card .scenario-details {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  font-size: 12px;\n  color: #6c757d;\n  opacity: 0.7;\n}\n.scenario-card .scenario-details .detail-item {\n  display: flex;\n  gap: 4px;\n}\n.scenario-card .scenario-details .detail-item strong {\n  color: #0d6efd;\n}\n.scenario-card .scenario-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  margin-top: 12px;\n}\n.scenario-card .scenario-tags .tag {\n  padding: 4px 8px;\n  background: #e9ecef;\n  border-radius: 4px;\n  font-size: 11px;\n  color: #495057;\n}\n.scenario-card .select-icon {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  font-size: 20px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n}\n.scenario-card:hover .select-icon {\n  opacity: 1;\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n:host-context(body.dark-theme) .scenario-link-overlay,\n:host-context(body.dark-mode) .scenario-link-overlay,\n:host-context([data-theme=dark]) .scenario-link-overlay {\n  background: rgba(0, 0, 0, 0.85) !important;\n}\n:host-context(body.dark-theme) .scenario-link-panel,\n:host-context(body.dark-mode) .scenario-link-panel,\n:host-context([data-theme=dark]) .scenario-link-panel {\n  background: #1a1a2e !important;\n  border-color: #2d2d44 !important;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5) !important;\n}\n:host-context(body.dark-theme) .scenario-link-panel .link-header,\n:host-context(body.dark-mode) .scenario-link-panel .link-header,\n:host-context([data-theme=dark]) .scenario-link-panel .link-header {\n  border-bottom-color: #2d2d44 !important;\n}\n:host-context(body.dark-theme) .scenario-link-panel .link-header .header-left .drag-indicator,\n:host-context(body.dark-mode) .scenario-link-panel .link-header .header-left .drag-indicator,\n:host-context([data-theme=dark]) .scenario-link-panel .link-header .header-left .drag-indicator {\n  color: #8e8e93 !important;\n}\n:host-context(body.dark-theme) .scenario-link-panel .link-header .header-left h3,\n:host-context(body.dark-mode) .scenario-link-panel .link-header .header-left h3,\n:host-context([data-theme=dark]) .scenario-link-panel .link-header .header-left h3 {\n  color: #f5f5f7 !important;\n}\n:host-context(body.dark-theme) .scenario-link-panel .link-header .close-btn,\n:host-context(body.dark-mode) .scenario-link-panel .link-header .close-btn,\n:host-context([data-theme=dark]) .scenario-link-panel .link-header .close-btn {\n  color: #f5f5f7 !important;\n  background: #2d2d44 !important;\n  border-color: #3d3d54 !important;\n}\n:host-context(body.dark-theme) .scenario-link-panel .link-header .close-btn:hover,\n:host-context(body.dark-mode) .scenario-link-panel .link-header .close-btn:hover,\n:host-context([data-theme=dark]) .scenario-link-panel .link-header .close-btn:hover {\n  background: #3d3d54 !important;\n}\n:host-context(body.dark-theme) .scenario-link-panel .link-info,\n:host-context(body.dark-mode) .scenario-link-panel .link-info,\n:host-context([data-theme=dark]) .scenario-link-panel .link-info {\n  background: #2d2d44 !important;\n  border-left-color: #0a84ff !important;\n}\n:host-context(body.dark-theme) .scenario-link-panel .link-info p,\n:host-context(body.dark-mode) .scenario-link-panel .link-info p,\n:host-context([data-theme=dark]) .scenario-link-panel .link-info p {\n  color: #f5f5f7 !important;\n}\n:host-context(body.dark-theme) .scenario-link-panel .link-info p strong,\n:host-context(body.dark-mode) .scenario-link-panel .link-info p strong,\n:host-context([data-theme=dark]) .scenario-link-panel .link-info p strong {\n  color: #0a84ff !important;\n}\n:host-context(body.dark-theme) .scenario-link-panel .link-info .hint,\n:host-context(body.dark-mode) .scenario-link-panel .link-info .hint,\n:host-context([data-theme=dark]) .scenario-link-panel .link-info .hint {\n  color: #8e8e93 !important;\n}\n:host-context(body.dark-theme) .scenario-card,\n:host-context(body.dark-mode) .scenario-card,\n:host-context([data-theme=dark]) .scenario-card {\n  background: #2d2d44 !important;\n  border-color: #3d3d54 !important;\n}\n:host-context(body.dark-theme) .scenario-card:hover,\n:host-context(body.dark-mode) .scenario-card:hover,\n:host-context([data-theme=dark]) .scenario-card:hover {\n  background: #3d3d54 !important;\n  border-color: #4d4d64 !important;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3) !important;\n}\n:host-context(body.dark-theme) .scenario-card .scenario-header h4,\n:host-context(body.dark-mode) .scenario-card .scenario-header h4,\n:host-context([data-theme=dark]) .scenario-card .scenario-header h4 {\n  color: #f5f5f7 !important;\n}\n:host-context(body.dark-theme) .scenario-card .scenario-header .scenario-genre,\n:host-context(body.dark-mode) .scenario-card .scenario-header .scenario-genre,\n:host-context([data-theme=dark]) .scenario-card .scenario-header .scenario-genre {\n  background: #0a84ff !important;\n  color: #ffffff !important;\n}\n:host-context(body.dark-theme) .scenario-card .scenario-body .scenario-description,\n:host-context(body.dark-mode) .scenario-card .scenario-body .scenario-description,\n:host-context([data-theme=dark]) .scenario-card .scenario-body .scenario-description {\n  color: #d1d1d6 !important;\n}\n:host-context(body.dark-theme) .scenario-card .scenario-body .scenario-meta .meta-item,\n:host-context(body.dark-mode) .scenario-card .scenario-body .scenario-meta .meta-item,\n:host-context([data-theme=dark]) .scenario-card .scenario-body .scenario-meta .meta-item {\n  color: #8e8e93 !important;\n}\n:host-context(body.dark-theme) .scenario-card .scenario-body .scenario-tags .tag,\n:host-context(body.dark-mode) .scenario-card .scenario-body .scenario-tags .tag,\n:host-context([data-theme=dark]) .scenario-card .scenario-body .scenario-tags .tag {\n  background: #3d3d54 !important;\n  color: #d1d1d6 !important;\n}\n:host-context(body.dark-theme) .scenario-card .scenario-title,\n:host-context(body.dark-mode) .scenario-card .scenario-title,\n:host-context([data-theme=dark]) .scenario-card .scenario-title {\n  color: #f5f5f7 !important;\n}\n:host-context(body.dark-theme) .scenario-card .scenario-genre,\n:host-context(body.dark-mode) .scenario-card .scenario-genre,\n:host-context([data-theme=dark]) .scenario-card .scenario-genre {\n  background: #0a84ff !important;\n  color: #ffffff !important;\n}\n:host-context(body.dark-theme) .scenario-card .scenario-description,\n:host-context(body.dark-mode) .scenario-card .scenario-description,\n:host-context([data-theme=dark]) .scenario-card .scenario-description {\n  color: #d1d1d6 !important;\n}\n:host-context(body.dark-theme) .scenario-card .scenario-details,\n:host-context(body.dark-mode) .scenario-card .scenario-details,\n:host-context([data-theme=dark]) .scenario-card .scenario-details {\n  color: #8e8e93 !important;\n}\n:host-context(body.dark-theme) .scenario-card .scenario-details .detail-item strong,\n:host-context(body.dark-mode) .scenario-card .scenario-details .detail-item strong,\n:host-context([data-theme=dark]) .scenario-card .scenario-details .detail-item strong {\n  color: #0a84ff !important;\n}\n:host-context(body.dark-theme) .scenario-card .scenario-tags .tag,\n:host-context(body.dark-mode) .scenario-card .scenario-tags .tag,\n:host-context([data-theme=dark]) .scenario-card .scenario-tags .tag {\n  background: #3d3d54 !important;\n  color: #d1d1d6 !important;\n}\n:host-context(body.dark-theme) .no-scenarios p,\n:host-context(body.dark-mode) .no-scenarios p,\n:host-context([data-theme=dark]) .no-scenarios p {\n  color: #8e8e93 !important;\n}\n:host-context(body.dark-theme) .no-scenarios .create-scenario-btn,\n:host-context(body.dark-mode) .no-scenarios .create-scenario-btn,\n:host-context([data-theme=dark]) .no-scenarios .create-scenario-btn {\n  color: #ffffff !important;\n  background: #0a84ff !important;\n  border-color: #0a84ff !important;\n}\n:host-context(body.dark-theme) .no-scenarios .create-scenario-btn:hover,\n:host-context(body.dark-mode) .no-scenarios .create-scenario-btn:hover,\n:host-context([data-theme=dark]) .no-scenarios .create-scenario-btn:hover {\n  background: #0040dd !important;\n  border-color: #0040dd !important;\n}\n::ng-deep .custom-confirm-dialog .mat-mdc-dialog-container {\n  padding: 0 !important;\n  border-radius: 16px !important;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;\n  overflow: hidden !important;\n}\n::ng-deep .custom-confirm-dialog .mdc-dialog__surface {\n  border-radius: 16px !important;\n  overflow: hidden !important;\n}\n::ng-deep .cdk-overlay-backdrop.cdk-overlay-backdrop-showing {\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n  background: rgba(0, 0, 0, 0.5);\n}\n.advanced-story-flow-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.85);\n  -webkit-backdrop-filter: blur(8px);\n  backdrop-filter: blur(8px);\n  z-index: 10000;\n  display: block;\n  animation: fadeIn 0.3s ease;\n}\n.advanced-flow-panel {\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  background: var(--bg-primary);\n  border-radius: 0 !important;\n  box-shadow: none;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  animation: fadeIn 0.3s ease;\n  position: relative;\n}\n.advanced-flow-panel .empty-state {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: 48px;\n}\n.advanced-flow-panel .empty-state .empty-icon {\n  font-size: 80px;\n  margin-bottom: 24px;\n  opacity: 0.6;\n}\n.advanced-flow-panel .empty-state h3 {\n  font-size: 24px;\n  font-weight: 700;\n  margin: 0 0 12px;\n  color: var(--text-primary);\n}\n.advanced-flow-panel .empty-state p {\n  color: var(--text-secondary);\n  margin: 0 0 32px;\n  line-height: 1.6;\n  font-size: 16px;\n}\n.advanced-flow-panel .empty-state .empty-actions {\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n}\n.advanced-flow-panel .empty-state .empty-actions button {\n  padding: 12px 24px;\n  border-radius: 10px;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  border: none;\n}\n.advanced-flow-panel .empty-state .empty-actions button.primary-btn {\n  background: #667eea;\n  color: white;\n}\n.advanced-flow-panel .empty-state .empty-actions button.primary-btn:hover {\n  background: #5568d3;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n}\n.advanced-flow-panel .empty-state .empty-actions button.secondary-btn {\n  background: white;\n  color: #667eea;\n  border: 2px solid #667eea;\n}\n.advanced-flow-panel .empty-state .empty-actions button.secondary-btn:hover {\n  background: #667eea;\n  color: white;\n}\n.advanced-flow-header {\n  padding: 20px 48px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  flex-shrink: 0;\n}\n.advanced-flow-header .header-left h2 {\n  margin: 0;\n  font-size: 1.8rem;\n  font-weight: 700;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.advanced-flow-header .header-left .subtitle {\n  font-size: 0.95rem;\n  opacity: 0.9;\n  margin-top: 4px;\n}\n.advanced-flow-header .close-btn {\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  font-size: 1.6rem;\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.advanced-flow-header .close-btn:hover {\n  background: rgba(255, 255, 255, 0.3);\n  transform: rotate(90deg) scale(1.1);\n}\n.flow-toolbar {\n  padding: 24px 60px;\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n  display: flex;\n  gap: 20px;\n  flex-wrap: wrap;\n  align-items: center;\n  flex-shrink: 0;\n}\n.flow-toolbar .toolbar-section {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n}\n.flow-toolbar .toolbar-section:not(:last-child) {\n  border-right: 1px solid var(--border-color);\n  padding-right: 20px;\n}\n.flow-toolbar .toolbar-section.toolbar-hint {\n  margin-left: auto;\n  border: none;\n  padding-right: 0;\n}\n.flow-toolbar .toolbar-section.toolbar-hint .hint-text {\n  font-size: 13px;\n  color: var(--text-secondary);\n  font-weight: 500;\n  padding: 8px 12px;\n  background: rgba(251, 191, 36, 0.1);\n  border-radius: 6px;\n  border: 1px dashed rgba(251, 191, 36, 0.3);\n}\n.flow-toolbar .tool-btn,\n.flow-toolbar .filter-btn {\n  padding: 12px 20px;\n  border: 1px solid var(--border-color);\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  white-space: nowrap;\n}\n.flow-toolbar .tool-btn:hover,\n.flow-toolbar .filter-btn:hover {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n  transform: translateY(-1px);\n}\n.flow-toolbar .tool-btn.active,\n.flow-toolbar .filter-btn.active {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n}\n.flow-toolbar .layout-selector {\n  padding: 8px 16px;\n  border: 1px solid var(--border-color);\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  border-radius: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  min-width: 120px;\n}\n.flow-toolbar .layout-selector:focus {\n  outline: none;\n  border-color: var(--accent-primary);\n}\n.flow-canvas-container {\n  flex: 1;\n  position: relative;\n  overflow: hidden;\n  background:\n    linear-gradient(\n      180deg,\n      var(--bg-primary) 0%,\n      var(--bg-secondary) 100%);\n  cursor: grab;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.flow-canvas-container:active {\n  cursor: grabbing;\n}\n.flow-svg-canvas {\n  width: 100%;\n  height: 100%;\n}\n.flow-svg-canvas .connection-path {\n  fill: none;\n  stroke: #cbd5e0;\n  stroke-width: 2;\n  opacity: 0.6;\n  transition: all 0.3s ease;\n}\n.flow-svg-canvas .connection-path.visited {\n  stroke: #48bb78;\n  stroke-width: 3;\n  opacity: 0.9;\n}\n.flow-svg-canvas .connection-path.current {\n  stroke: #4299e1;\n  stroke-width: 4;\n  opacity: 1;\n  animation: pathPulse 2s infinite;\n}\n.flow-svg-canvas .connection-path:hover {\n  stroke-width: 4;\n  opacity: 1;\n}\n.flow-svg-canvas .story-node {\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.flow-svg-canvas .story-node:hover .node-circle {\n  filter: brightness(1.1);\n  transform: scale(1.1);\n}\n.flow-svg-canvas .story-node.selected .node-selection-ring {\n  stroke: #fbbf24;\n  stroke-width: 3;\n  opacity: 0.8;\n}\n.flow-svg-canvas .story-node.dragging {\n  cursor: move !important;\n  opacity: 0.8;\n}\n.flow-svg-canvas .story-node.dragging .node-circle {\n  filter: drop-shadow(0 0 15px rgba(251, 191, 36, 0.6));\n  transform: scale(1.15);\n}\n.flow-svg-canvas .story-node.current .node-circle {\n  filter: drop-shadow(0 0 20px #4299e1);\n  animation: nodeGlow 2s infinite;\n}\n.flow-svg-canvas .story-node.current .node-glow {\n  animation: glowPulse 2s infinite;\n}\n.flow-svg-canvas .story-node.visited .node-circle {\n  filter: drop-shadow(0 0 8px rgba(72, 187, 120, 0.5));\n}\n.flow-svg-canvas .story-node.battle .node-circle {\n  filter: drop-shadow(0 0 10px rgba(252, 129, 129, 0.6));\n}\n.flow-svg-canvas .story-node.ending .node-circle {\n  filter: drop-shadow(0 0 15px rgba(159, 122, 234, 0.8));\n}\n.flow-svg-canvas .story-node .node-circle {\n  transition: all 0.3s ease;\n}\n.flow-svg-canvas .story-node .node-selection-ring {\n  transition: all 0.3s ease;\n}\n.flow-svg-canvas .story-node .node-icon {\n  pointer-events: none;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.flow-svg-canvas .story-node .node-title {\n  fill: var(--text-primary);\n  pointer-events: none;\n}\n.flow-svg-canvas .story-node .badge-text,\n.flow-svg-canvas .story-node .visit-count {\n  fill: white;\n  font-weight: 600;\n  pointer-events: none;\n}\n.zoom-controls {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  background: rgba(255, 255, 255, 0.95);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  padding: 12px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n  z-index: 10;\n}\n.zoom-controls .zoom-btn {\n  width: 44px;\n  height: 44px;\n  border: 2px solid var(--border-color);\n  border-radius: 8px;\n  background: white;\n  color: var(--text-primary);\n  font-size: 18px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.zoom-controls .zoom-btn:hover {\n  background: var(--accent-primary);\n  color: white;\n  border-color: var(--accent-primary);\n  transform: scale(1.05);\n}\n.zoom-controls .zoom-btn:active {\n  transform: scale(0.95);\n}\n.zoom-controls .zoom-level {\n  text-align: center;\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-secondary);\n  padding: 6px 0;\n  border-top: 1px solid var(--border-color);\n  border-bottom: 1px solid var(--border-color);\n  margin: 4px 0;\n}\n.legend-compact {\n  position: absolute;\n  bottom: 20px;\n  left: 20px;\n  display: flex;\n  gap: 16px;\n  background: rgba(255, 255, 255, 0.95);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  padding: 12px 16px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n  z-index: 10;\n}\n.legend-compact .legend-item {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 13px;\n  color: var(--text-secondary);\n  font-weight: 500;\n}\n.legend-compact .legend-item .icon {\n  font-size: 18px;\n}\n@media (max-width: 768px) {\n  .legend-compact {\n    flex-direction: column;\n    gap: 8px;\n    font-size: 12px;\n  }\n  .legend-compact .legend-item {\n    gap: 4px;\n  }\n  .legend-compact .legend-item .icon {\n    font-size: 16px;\n  }\n}\n.node-detail-panel {\n  position: absolute;\n  top: 50%;\n  right: 24px;\n  transform: translateY(-50%);\n  width: 350px;\n  max-height: 80vh;\n  background: var(--bg-primary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  animation: slideInRight 0.3s ease;\n}\n.node-detail-panel .detail-header {\n  padding: 20px;\n  background: var(--accent-primary);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.node-detail-panel .detail-header h3 {\n  margin: 0;\n  font-size: 20px;\n  font-weight: 700;\n}\n.node-detail-panel .detail-header .detail-close-btn {\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  font-size: 20px;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.node-detail-panel .detail-header .detail-close-btn:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n.node-detail-panel .detail-body {\n  padding: 20px;\n  max-height: calc(80vh - 80px);\n  overflow-y: auto;\n}\n.node-detail-panel .detail-body h4 {\n  font-size: 16px;\n  font-weight: 700;\n  margin: 16px 0 8px;\n  color: var(--text-primary);\n}\n.node-detail-panel .detail-body .detail-type {\n  margin-bottom: 16px;\n}\n.node-detail-panel .detail-body .detail-type .type-badge {\n  display: inline-block;\n  padding: 6px 14px;\n  background: var(--bg-secondary);\n  border-radius: 20px;\n  font-size: 14px;\n  font-weight: 600;\n}\n.node-detail-panel .detail-body .detail-type .type-badge.battle {\n  background: rgba(252, 129, 129, 0.2);\n  color: #c53030;\n}\n.node-detail-panel .detail-body .detail-type .type-badge.ending {\n  background: rgba(159, 122, 234, 0.2);\n  color: #6b46c1;\n}\n.node-detail-panel .detail-body .detail-type .type-badge.event {\n  background: rgba(246, 173, 85, 0.2);\n  color: #dd6b20;\n}\n.node-detail-panel .detail-body .detail-content,\n.node-detail-panel .detail-body .detail-stats,\n.node-detail-panel .detail-body .detail-conditions,\n.node-detail-panel .detail-body .detail-choices,\n.node-detail-panel .detail-body .detail-battle {\n  margin-bottom: 20px;\n}\n.node-detail-panel .detail-body .detail-content p,\n.node-detail-panel .detail-body .detail-stats p,\n.node-detail-panel .detail-body .detail-conditions p,\n.node-detail-panel .detail-body .detail-choices p,\n.node-detail-panel .detail-body .detail-battle p {\n  margin: 4px 0;\n  color: var(--text-secondary);\n  line-height: 1.6;\n}\n.node-detail-panel .detail-body .detail-content ul,\n.node-detail-panel .detail-body .detail-stats ul,\n.node-detail-panel .detail-body .detail-conditions ul,\n.node-detail-panel .detail-body .detail-choices ul,\n.node-detail-panel .detail-body .detail-battle ul {\n  margin: 8px 0;\n  padding-left: 20px;\n}\n.node-detail-panel .detail-body .detail-content ul li,\n.node-detail-panel .detail-body .detail-stats ul li,\n.node-detail-panel .detail-body .detail-conditions ul li,\n.node-detail-panel .detail-body .detail-choices ul li,\n.node-detail-panel .detail-body .detail-battle ul li {\n  margin: 4px 0;\n  color: var(--text-secondary);\n}\n.node-detail-panel .detail-body .detail-content .more-indicator,\n.node-detail-panel .detail-body .detail-stats .more-indicator,\n.node-detail-panel .detail-body .detail-conditions .more-indicator,\n.node-detail-panel .detail-body .detail-choices .more-indicator,\n.node-detail-panel .detail-body .detail-battle .more-indicator {\n  color: var(--accent-primary);\n  font-style: italic;\n}\n.node-detail-panel .detail-body .stat-row {\n  display: flex;\n  justify-content: space-between;\n  padding: 8px 0;\n  border-bottom: 1px solid var(--border-color);\n}\n.node-detail-panel .detail-body .stat-row .stat-label {\n  color: var(--text-secondary);\n}\n.node-detail-panel .detail-body .stat-row .stat-value {\n  font-weight: 700;\n  color: var(--accent-primary);\n}\n.node-detail-panel .detail-body .choice-preview {\n  padding: 10px 12px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  margin: 8px 0;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.node-detail-panel .detail-body .choice-preview .choice-icon {\n  font-size: 18px;\n}\n.node-detail-panel .detail-body .choice-preview .choice-text {\n  flex: 1;\n  color: var(--text-primary);\n  font-size: 14px;\n}\n.stats-overlay {\n  position: absolute;\n  top: 24px;\n  right: 24px;\n  background: rgba(255, 255, 255, 0.95);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);\n  min-width: 320px;\n  max-height: calc(100vh - 100px);\n  overflow-y: auto;\n  animation: slideInRight 0.3s ease;\n}\n.stats-overlay h3 {\n  margin: 0 0 20px;\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n.stats-overlay h4 {\n  margin: 16px 0 12px;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.stats-overlay .current-location {\n  margin-bottom: 20px;\n}\n.stats-overlay .current-location .location-card {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(66, 153, 225, 0.1) 0%,\n      rgba(66, 153, 225, 0.05) 100%);\n  border: 2px solid #4299e1;\n  border-radius: 12px;\n  animation: nodeGlow 2s ease-in-out infinite;\n}\n.stats-overlay .current-location .location-card .location-icon {\n  font-size: 32px;\n  flex-shrink: 0;\n}\n.stats-overlay .current-location .location-card .location-info {\n  flex: 1;\n}\n.stats-overlay .current-location .location-card .location-info .location-title {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n}\n.stats-overlay .current-location .location-card .location-info .location-path {\n  font-size: 12px;\n  color: var(--text-secondary);\n  font-family: monospace;\n}\n.stats-overlay .stats-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16px;\n  margin-bottom: 20px;\n}\n.stats-overlay .stat-card {\n  text-align: center;\n  padding: 16px;\n  background: var(--bg-primary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s;\n}\n.stats-overlay .stat-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.stats-overlay .stat-card .stat-icon {\n  font-size: 32px;\n  margin-bottom: 8px;\n}\n.stats-overlay .stat-card .stat-value {\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--accent-primary);\n  margin-bottom: 4px;\n}\n.stats-overlay .stat-card .stat-label {\n  font-size: 12px;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.stats-overlay .path-history .history-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.stats-overlay .path-history .history-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n  font-size: 13px;\n  transition: all 0.2s;\n}\n.stats-overlay .path-history .history-item:hover {\n  background: rgba(66, 153, 225, 0.05);\n  border-color: #4299e1;\n}\n.stats-overlay .path-history .history-item .history-icon {\n  font-size: 20px;\n  flex-shrink: 0;\n}\n.stats-overlay .path-history .history-item .history-node {\n  font-weight: 600;\n  color: var(--text-primary);\n  flex-shrink: 0;\n}\n.stats-overlay .path-history .history-item .history-choice {\n  font-size: 12px;\n  color: var(--text-secondary);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n@keyframes pathPulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n@keyframes nodeGlow {\n  0%, 100% {\n    filter: drop-shadow(0 0 20px #4299e1);\n  }\n  50% {\n    filter: drop-shadow(0 0 30px #4299e1);\n  }\n}\n@keyframes glowPulse {\n  0%, 100% {\n    opacity: 0.5;\n    r: 50;\n  }\n  50% {\n    opacity: 0.8;\n    r: 55;\n  }\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(40px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n@keyframes slideInRight {\n  from {\n    opacity: 0;\n    transform: translateX(40px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n[data-theme=dark] .minimap,\n[data-theme=dark] .legend,\n[data-theme=dark] .stats-overlay {\n  background: rgba(26, 32, 44, 0.95);\n}\n[data-theme=dark] .node-title {\n  fill: #e2e8f0;\n}\n.flow-side-panel {\n  position: fixed;\n  top: 80px;\n  right: 24px;\n  z-index: 900;\n  animation: slideInRight 0.4s ease;\n  pointer-events: all;\n}\n.flow-side-panel .panel-container {\n  width: 300px;\n  background: white;\n  border-radius: 16px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  max-height: calc(100vh - 120px);\n}\n.flow-side-panel .panel-header {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  padding: 20px;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.25);\n}\n.flow-side-panel .panel-header::before {\n  content: "";\n  position: absolute;\n  top: -50%;\n  right: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    radial-gradient(\n      circle,\n      rgba(255, 255, 255, 0.1) 0%,\n      transparent 70%);\n  animation: headerGlow 8s ease-in-out infinite;\n  pointer-events: none;\n}\n.flow-side-panel .panel-header .status-bar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 11px;\n  margin-bottom: 12px;\n  font-weight: 600;\n  position: relative;\n  z-index: 1;\n}\n.flow-side-panel .panel-header .status-bar .time {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  background: rgba(255, 255, 255, 0.15);\n  padding: 4px 10px;\n  border-radius: 12px;\n  letter-spacing: 0.5px;\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n}\n.flow-side-panel .panel-header .status-bar .time::before {\n  content: "\\1f550";\n  font-size: 13px;\n}\n.flow-side-panel .panel-header .status-bar .progress {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  background: rgba(255, 255, 255, 0.15);\n  padding: 4px 10px;\n  border-radius: 12px;\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n}\n.flow-side-panel .panel-header .status-bar .progress::before {\n  content: "\\1f3af";\n  font-size: 13px;\n}\n.flow-side-panel .panel-header .title-bar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  z-index: 1;\n}\n.flow-side-panel .panel-header .title-bar h3 {\n  margin: 0;\n  font-size: 20px;\n  font-weight: 800;\n  letter-spacing: -0.5px;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.flow-side-panel .panel-header .title-bar .header-actions {\n  display: flex;\n  gap: 6px;\n}\n.flow-side-panel .panel-header .title-bar .expand-btn,\n.flow-side-panel .panel-header .title-bar .close-btn {\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: white;\n  width: 36px;\n  height: 36px;\n  border-radius: 10px;\n  cursor: pointer;\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n}\n.flow-side-panel .panel-header .title-bar .expand-btn::before,\n.flow-side-panel .panel-header .title-bar .close-btn::before {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.3);\n  transform: translate(-50%, -50%);\n  transition: width 0.4s, height 0.4s;\n}\n.flow-side-panel .panel-header .title-bar .expand-btn:hover,\n.flow-side-panel .panel-header .title-bar .close-btn:hover {\n  background: rgba(255, 255, 255, 0.25);\n  border-color: rgba(255, 255, 255, 0.4);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.flow-side-panel .panel-header .title-bar .expand-btn:hover::before,\n.flow-side-panel .panel-header .title-bar .close-btn:hover::before {\n  width: 100%;\n  height: 100%;\n}\n.flow-side-panel .panel-header .title-bar .expand-btn:active,\n.flow-side-panel .panel-header .title-bar .close-btn:active {\n  transform: translateY(0);\n}\n.flow-side-panel .panel-header .title-bar .close-btn:hover {\n  background: rgba(239, 68, 68, 0.2);\n  border-color: rgba(239, 68, 68, 0.4);\n}\n.flow-side-panel .tab-navigation {\n  display: flex;\n  gap: 8px;\n  padding: 12px 16px 0;\n  background: transparent;\n  position: relative;\n  z-index: 1;\n}\n.flow-side-panel .tab-navigation.bottom {\n  padding: 0;\n  background: white;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.08);\n  gap: 0;\n}\n.flow-side-panel .tab-navigation.bottom .tab-btn {\n  flex: 1;\n  padding: 14px 20px;\n  background: white;\n  border-radius: 0;\n  color: #718096;\n  border: none;\n  border-top: 3px solid transparent;\n}\n.flow-side-panel .tab-navigation.bottom .tab-btn::before {\n  display: none;\n}\n.flow-side-panel .tab-navigation.bottom .tab-btn .tab-icon {\n  font-size: 24px;\n  display: block;\n  margin-bottom: 4px;\n}\n.flow-side-panel .tab-navigation.bottom .tab-btn .tab-label {\n  font-size: 11px;\n  display: block;\n  letter-spacing: 0.3px;\n}\n.flow-side-panel .tab-navigation.bottom .tab-btn:hover:not(.active) {\n  background: #f7fafc;\n  color: #4a5568;\n}\n.flow-side-panel .tab-navigation.bottom .tab-btn:hover:not(.active) .tab-icon {\n  transform: scale(1.1);\n}\n.flow-side-panel .tab-navigation.bottom .tab-btn.active {\n  background: white;\n  color: #667eea;\n  border-top-color: #667eea;\n  box-shadow: none;\n}\n.flow-side-panel .tab-navigation.bottom .tab-btn.active .tab-icon {\n  transform: scale(1.2);\n}\n.flow-side-panel .tab-navigation .tab-btn {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  padding: 10px 16px;\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border: 2px solid transparent;\n  border-radius: 12px 12px 0 0;\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 14px;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n}\n.flow-side-panel .tab-navigation .tab-btn .tab-icon {\n  font-size: 18px;\n  transition: transform 0.3s;\n}\n.flow-side-panel .tab-navigation .tab-btn .tab-label {\n  font-size: 13px;\n  letter-spacing: 0.3px;\n}\n.flow-side-panel .tab-navigation .tab-btn::before {\n  content: "";\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 3px;\n  background: white;\n  transform: scaleX(0);\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n.flow-side-panel .tab-navigation .tab-btn:hover:not(.active) {\n  background: rgba(255, 255, 255, 0.25);\n  color: white;\n}\n.flow-side-panel .tab-navigation .tab-btn:hover:not(.active) .tab-icon {\n  transform: scale(1.1);\n}\n.flow-side-panel .tab-navigation .tab-btn.active {\n  background: white;\n  color: #667eea;\n  border-color: rgba(255, 255, 255, 0.3);\n  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);\n}\n.flow-side-panel .tab-navigation .tab-btn.active::before {\n  transform: scaleX(1);\n}\n.flow-side-panel .tab-navigation .tab-btn.active .tab-icon {\n  transform: scale(1.15);\n}\n.flow-side-panel .panel-content-slider {\n  position: relative;\n  width: 100%;\n  overflow: hidden;\n  flex: 1;\n  display: flex;\n}\n.flow-side-panel .panel-content-slider .tab-content {\n  width: 100%;\n  flex-shrink: 0;\n  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.flow-side-panel .panel-content-slider .tab-content.character-tab {\n  transform: translateX(0);\n}\n.flow-side-panel .panel-content-slider .tab-content.organization-tab {\n  transform: translateX(0);\n}\n.flow-side-panel .panel-content-slider .tab-content.map-tab {\n  transform: translateX(0);\n}\n.flow-side-panel .panel-content-slider[data-tab=character] .character-tab {\n  transform: translateX(0);\n}\n.flow-side-panel .panel-content-slider[data-tab=character] .organization-tab {\n  transform: translateX(100%);\n}\n.flow-side-panel .panel-content-slider[data-tab=character] .map-tab {\n  transform: translateX(100%);\n}\n.flow-side-panel .panel-content-slider[data-tab=organization] .character-tab {\n  transform: translateX(-100%);\n}\n.flow-side-panel .panel-content-slider[data-tab=organization] .organization-tab {\n  transform: translateX(-100%);\n}\n.flow-side-panel .panel-content-slider[data-tab=organization] .map-tab {\n  transform: translateX(100%);\n}\n.flow-side-panel .panel-content-slider[data-tab=map] .character-tab {\n  transform: translateX(-200%);\n}\n.flow-side-panel .panel-content-slider[data-tab=map] .organization-tab {\n  transform: translateX(-200%);\n}\n.flow-side-panel .panel-content-slider[data-tab=map] .map-tab {\n  transform: translateX(-200%);\n}\n@keyframes headerGlow {\n  0%, 100% {\n    transform: translate(0, 0) rotate(0deg);\n    opacity: 0.5;\n  }\n  50% {\n    transform: translate(-10%, -10%) rotate(180deg);\n    opacity: 0.8;\n  }\n}\n.flow-side-panel .character-info-card {\n  padding: 20px;\n  background: white;\n  margin: 0;\n  height: 100%;\n  overflow-y: auto;\n}\n.flow-side-panel .character-info-card .character-header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n}\n.flow-side-panel .character-info-card .character-header .character-avatar {\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n  flex-shrink: 0;\n}\n.flow-side-panel .character-info-card .character-header .character-avatar .avatar-icon {\n  font-size: 32px;\n}\n.flow-side-panel .character-info-card .character-header .character-basic {\n  flex: 1;\n}\n.flow-side-panel .character-info-card .character-header .character-basic .character-name {\n  font-size: 18px;\n  font-weight: 800;\n  color: #1a202c;\n  margin-bottom: 2px;\n  letter-spacing: -0.3px;\n}\n.flow-side-panel .character-info-card .character-header .character-basic .character-level {\n  font-size: 13px;\n  font-weight: 700;\n  color: #667eea;\n  background: rgba(102, 126, 234, 0.1);\n  padding: 2px 10px;\n  border-radius: 12px;\n  display: inline-block;\n}\n.flow-side-panel .character-info-card .character-stats {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n.flow-side-panel .character-info-card .character-stats .stat-row {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.flow-side-panel .character-info-card .character-stats .stat-row.inline {\n  display: flex;\n  gap: 12px;\n}\n.flow-side-panel .character-info-card .character-stats .stat-row.inline .inline-stat {\n  flex: 1;\n  background: white;\n  padding: 10px;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n}\n.flow-side-panel .character-info-card .character-stats .stat-row.inline .inline-stat .stat-icon {\n  font-size: 18px;\n}\n.flow-side-panel .character-info-card .character-stats .stat-row.inline .inline-stat .stat-value {\n  font-size: 14px;\n  font-weight: 700;\n  color: #2d3748;\n}\n.flow-side-panel .character-info-card .character-stats .stat-row.special {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.2) 0%,\n      rgba(255, 165, 0, 0.2) 100%);\n  padding: 10px;\n  border-radius: 10px;\n  border: 2px solid rgba(255, 215, 0, 0.3);\n}\n.flow-side-panel .character-info-card .character-stats .stat-row.special .cultivation-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ffa500 100%);\n  color: #1a202c;\n  padding: 4px 12px;\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 800;\n  box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);\n}\n.flow-side-panel .character-info-card .character-stats .stat-row .stat-label {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  min-width: 60px;\n}\n.flow-side-panel .character-info-card .character-stats .stat-row .stat-label .stat-icon {\n  font-size: 18px;\n}\n.flow-side-panel .character-info-card .character-stats .stat-row .stat-label .stat-icon.hp {\n  filter: drop-shadow(0 0 4px rgba(239, 68, 68, 0.3));\n}\n.flow-side-panel .character-info-card .character-stats .stat-row .stat-label .stat-icon.mp {\n  filter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.3));\n}\n.flow-side-panel .character-info-card .character-stats .stat-row .stat-label .stat-name {\n  font-size: 12px;\n  font-weight: 700;\n  color: #4a5568;\n}\n.flow-side-panel .character-info-card .character-stats .stat-row .stat-bar-container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.flow-side-panel .character-info-card .character-stats .stat-row .stat-bar-container .stat-bar {\n  height: 10px;\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 20px;\n  overflow: hidden;\n  position: relative;\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n.flow-side-panel .character-info-card .character-stats .stat-row .stat-bar-container .stat-bar.hp .stat-bar-fill {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444 0%,\n      #dc2626 100%);\n  box-shadow: 0 0 8px rgba(239, 68, 68, 0.6);\n}\n.flow-side-panel .character-info-card .character-stats .stat-row .stat-bar-container .stat-bar.mp .stat-bar-fill {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n  box-shadow: 0 0 8px rgba(59, 130, 246, 0.6);\n}\n.flow-side-panel .character-info-card .character-stats .stat-row .stat-bar-container .stat-bar .stat-bar-fill {\n  height: 100%;\n  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n  border-radius: 20px;\n  position: relative;\n}\n.flow-side-panel .character-info-card .character-stats .stat-row .stat-bar-container .stat-bar .stat-bar-fill::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 50%;\n  background:\n    linear-gradient(\n      to bottom,\n      rgba(255, 255, 255, 0.3),\n      transparent);\n  border-radius: 20px 20px 0 0;\n}\n.flow-side-panel .character-info-card .character-stats .stat-row .stat-bar-container .stat-value {\n  font-size: 11px;\n  font-weight: 700;\n  color: #4a5568;\n  text-align: right;\n}\n.flow-side-panel .organization-container {\n  padding: 20px;\n  background: white;\n  height: 100%;\n  overflow-y: auto;\n}\n.flow-side-panel .organization-container .organization-header {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  padding: 20px;\n  border-radius: 16px;\n  color: white;\n  margin-bottom: 20px;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);\n}\n.flow-side-panel .organization-container .organization-header .org-name-section {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n}\n.flow-side-panel .organization-container .organization-header .org-name-section .org-name {\n  font-size: 20px;\n  font-weight: 800;\n  margin: 0;\n}\n.flow-side-panel .organization-container .organization-header .org-name-section .org-level {\n  background: rgba(255, 255, 255, 0.2);\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 13px;\n  font-weight: 700;\n}\n.flow-side-panel .organization-container .organization-header .org-stats {\n  display: flex;\n  gap: 20px;\n}\n.flow-side-panel .organization-container .organization-header .org-stats .org-stat {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.flow-side-panel .organization-container .organization-header .org-stats .org-stat .stat-label {\n  font-size: 11px;\n  opacity: 0.8;\n}\n.flow-side-panel .organization-container .organization-header .org-stats .org-stat .stat-value {\n  font-size: 16px;\n  font-weight: 700;\n}\n.flow-side-panel .organization-container .members-list {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.flow-side-panel .organization-container .member-card {\n  background: #f8fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 16px;\n  padding: 16px;\n  transition: all 0.3s;\n  cursor: pointer;\n}\n.flow-side-panel .organization-container .member-card:hover {\n  border-color: #667eea;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.2);\n  transform: translateY(-2px);\n}\n.flow-side-panel .organization-container .member-card.selected {\n  border-color: #667eea;\n  background: #eef2ff;\n  box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);\n}\n.flow-side-panel .organization-container .member-card .member-header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-avatar {\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 28px;\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.flow-side-panel .organization-container .member-card .member-header .member-basic {\n  flex: 1;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-basic .member-name-row {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 4px;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-basic .member-name-row .member-name {\n  font-size: 16px;\n  font-weight: 700;\n  color: #1a202c;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-basic .member-name-row .member-role {\n  padding: 2px 8px;\n  border-radius: 8px;\n  font-size: 11px;\n  font-weight: 700;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-basic .member-name-row .member-role[data-role=leader] {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700,\n      #ffa500);\n  color: #1a202c;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-basic .member-name-row .member-role[data-role=vice_leader] {\n  background:\n    linear-gradient(\n      135deg,\n      #c0c0c0,\n      #a8a8a8);\n  color: white;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-basic .member-name-row .member-role[data-role=elder] {\n  background:\n    linear-gradient(\n      135deg,\n      #cd7f32,\n      #b87333);\n  color: white;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-basic .member-name-row .member-role[data-role=captain] {\n  background: #667eea;\n  color: white;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-basic .member-name-row .member-role[data-role=member],\n.flow-side-panel .organization-container .member-card .member-header .member-basic .member-name-row .member-role[data-role=recruit] {\n  background: #cbd5e0;\n  color: #2d3748;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-basic .member-level {\n  font-size: 13px;\n  color: #718096;\n  font-weight: 600;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-status {\n  padding: 6px 12px;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 700;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-status[data-status=active] {\n  background: #d4edda;\n  color: #155724;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-status[data-status=resting] {\n  background: #fff3cd;\n  color: #856404;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-status[data-status=injured] {\n  background: #f8d7da;\n  color: #721c24;\n}\n.flow-side-panel .organization-container .member-card .member-header .member-status[data-status=on_mission] {\n  background: #d1ecf1;\n  color: #0c5460;\n}\n.flow-side-panel .organization-container .member-card .member-stats-bars {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 12px;\n}\n.flow-side-panel .organization-container .member-card .member-stats-bars .stat-bar-row {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.flow-side-panel .organization-container .member-card .member-stats-bars .stat-bar-row .bar-label {\n  font-size: 11px;\n  font-weight: 700;\n  color: #4a5568;\n  width: 40px;\n}\n.flow-side-panel .organization-container .member-card .member-stats-bars .stat-bar-row .mini-stat-bar {\n  flex: 1;\n  height: 8px;\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 10px;\n  overflow: hidden;\n}\n.flow-side-panel .organization-container .member-card .member-stats-bars .stat-bar-row .mini-stat-bar.hp .mini-bar-fill {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444,\n      #dc2626);\n}\n.flow-side-panel .organization-container .member-card .member-stats-bars .stat-bar-row .mini-stat-bar.mp .mini-bar-fill {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6,\n      #2563eb);\n}\n.flow-side-panel .organization-container .member-card .member-stats-bars .stat-bar-row .mini-stat-bar .mini-bar-fill {\n  height: 100%;\n  transition: width 0.4s;\n}\n.flow-side-panel .organization-container .member-card .member-stats-bars .stat-bar-row .bar-value {\n  font-size: 11px;\n  font-weight: 700;\n  color: #4a5568;\n  min-width: 60px;\n  text-align: right;\n}\n.flow-side-panel .organization-container .member-card .member-details {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  margin-bottom: 12px;\n  padding: 12px;\n  background: white;\n  border-radius: 12px;\n}\n.flow-side-panel .organization-container .member-card .member-details .detail-row {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 12px;\n}\n.flow-side-panel .organization-container .member-card .member-details .detail-row .detail-icon {\n  font-size: 14px;\n}\n.flow-side-panel .organization-container .member-card .member-details .detail-row .detail-text {\n  color: #2d3748;\n  font-weight: 600;\n}\n.flow-side-panel .organization-container .member-card .member-details .detail-row .loyalty-bar {\n  flex: 1;\n  height: 6px;\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 10px;\n  overflow: hidden;\n  margin-left: 8px;\n}\n.flow-side-panel .organization-container .member-card .member-details .detail-row .loyalty-bar .loyalty-fill {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #f59e0b,\n      #ef4444);\n  transition: width 0.4s;\n}\n.flow-side-panel .organization-container .member-card .member-skills {\n  display: flex;\n  gap: 6px;\n  flex-wrap: wrap;\n  margin-bottom: 8px;\n}\n.flow-side-panel .organization-container .member-card .member-skills .skill-tag {\n  padding: 4px 10px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border-radius: 8px;\n  font-size: 11px;\n  font-weight: 700;\n}\n.flow-side-panel .organization-container .member-card .member-description {\n  padding: 8px;\n  background: white;\n  border-radius: 8px;\n  border-left: 3px solid #667eea;\n}\n.flow-side-panel .organization-container .member-card .member-description p {\n  margin: 0;\n  font-size: 12px;\n  color: #4a5568;\n  font-style: italic;\n}\n.flow-side-panel .organization-container .no-members {\n  text-align: center;\n  padding: 40px 20px;\n  color: #718096;\n}\n.flow-side-panel .organization-container .no-members p {\n  margin: 8px 0;\n  font-size: 14px;\n}\n.flow-side-panel .no-organization {\n  padding: 60px 20px;\n  text-align: center;\n  color: #718096;\n}\n.flow-side-panel .no-organization p {\n  margin: 8px 0;\n  font-size: 14px;\n}\n.flow-side-panel .current-status {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px;\n  background: rgba(66, 153, 225, 0.05);\n  border-bottom: 2px solid rgba(66, 153, 225, 0.2);\n}\n.flow-side-panel .current-status .status-icon {\n  font-size: 36px;\n  flex-shrink: 0;\n}\n.flow-side-panel .current-status .status-info {\n  flex: 1;\n  min-width: 0;\n}\n.flow-side-panel .current-status .status-info .status-title {\n  font-size: 15px;\n  font-weight: 700;\n  color: #1a202c;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-bottom: 4px;\n}\n.flow-side-panel .current-status .status-info .status-path {\n  font-size: 12px;\n  color: #718096;\n  font-weight: 600;\n}\n.flow-side-panel .mini-flow-map {\n  flex: 1;\n  min-height: 280px;\n  max-height: 360px;\n  background: #f8fafc;\n  position: relative;\n  overflow: hidden;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n}\n.flow-side-panel .mini-flow-map svg {\n  display: block;\n}\n.flow-side-panel .mini-flow-map .mini-connections path {\n  transition: all 0.3s;\n}\n.flow-side-panel .mini-flow-map .mini-nodes circle {\n  transition: all 0.3s;\n}\n.flow-side-panel .mini-flow-map .mini-nodes circle.pulse {\n  animation: phonePulse 2s ease-in-out infinite;\n}\n.flow-side-panel .quick-stats {\n  display: flex;\n  justify-content: space-around;\n  padding: 16px;\n  background: white;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n}\n.flow-side-panel .quick-stats .stat-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n}\n.flow-side-panel .quick-stats .stat-item .stat-icon {\n  font-size: 22px;\n}\n.flow-side-panel .quick-stats .stat-item .stat-text {\n  font-size: 13px;\n  font-weight: 700;\n  color: #2d3748;\n}\n.flow-side-panel .recent-path {\n  padding: 16px;\n  background: white;\n}\n.flow-side-panel .recent-path .recent-title {\n  font-size: 11px;\n  font-weight: 700;\n  color: #718096;\n  margin-bottom: 10px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.flow-side-panel .recent-path .path-dots {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.flow-side-panel .recent-path .path-dots .path-dot {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 10px;\n  background: #edf2f7;\n  font-size: 16px;\n  transition: all 0.2s;\n  cursor: pointer;\n  border: 2px solid transparent;\n}\n.flow-side-panel .recent-path .path-dots .path-dot:hover {\n  transform: translateY(-2px) scale(1.1);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  border-color: #4299e1;\n}\n.flow-side-panel .recent-path .path-dots .path-dot.current {\n  background:\n    linear-gradient(\n      135deg,\n      #4299e1 0%,\n      #3182ce 100%);\n  box-shadow: 0 6px 16px rgba(66, 153, 225, 0.4);\n  transform: translateY(-2px) scale(1.15);\n  border-color: #2b6cb0;\n}\n.flow-panel-toggle-btn {\n  position: fixed;\n  top: 80px;\n  right: 24px;\n  z-index: 899;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 16px;\n  padding: 14px 18px;\n  cursor: pointer;\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.2);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  animation: slideInRight 0.4s ease, pulseGlow 3s ease-in-out infinite;\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  position: relative;\n  overflow: hidden;\n}\n.flow-panel-toggle-btn::before {\n  content: "";\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    linear-gradient(\n      45deg,\n      transparent 30%,\n      rgba(255, 255, 255, 0.3) 50%,\n      transparent 70%);\n  animation: shimmer 3s infinite;\n}\n.flow-panel-toggle-btn:hover {\n  transform: translateX(-6px) translateY(-2px) scale(1.08);\n  box-shadow: 0 12px 32px rgba(102, 126, 234, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.4);\n}\n.flow-panel-toggle-btn:hover .toggle-icon {\n  transform: scale(1.2) rotate(10deg);\n}\n.flow-panel-toggle-btn:active {\n  transform: translateX(-6px) scale(1.02);\n}\n.flow-panel-toggle-btn .toggle-icon {\n  font-size: 28px;\n  line-height: 1;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  z-index: 1;\n}\n.flow-panel-toggle-btn .toggle-text {\n  font-size: 12px;\n  font-weight: 800;\n  letter-spacing: 1px;\n  text-transform: uppercase;\n  position: relative;\n  z-index: 1;\n}\n@keyframes shimmer {\n  0% {\n    transform: translateX(-100%) translateY(-100%) rotate(0deg);\n  }\n  100% {\n    transform: translateX(100%) translateY(100%) rotate(0deg);\n  }\n}\n@keyframes pulseGlow {\n  0%, 100% {\n    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.2);\n  }\n  50% {\n    box-shadow:\n      0 8px 32px rgba(102, 126, 234, 0.6),\n      0 0 0 1px rgba(255, 255, 255, 0.3),\n      0 0 20px rgba(102, 126, 234, 0.3);\n  }\n}\n@keyframes phonePulse {\n  0%, 100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.7;\n    transform: scale(1.1);\n  }\n}\n@media (max-width: 1400px) {\n  .flow-side-panel {\n    display: none;\n  }\n}\n[data-theme=dark] .flow-side-panel .panel-container {\n  background: #1a202c;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1);\n}\n[data-theme=dark] .flow-side-panel .current-status {\n  background: rgba(66, 153, 225, 0.1);\n  border-bottom-color: rgba(66, 153, 225, 0.3);\n}\n[data-theme=dark] .flow-side-panel .current-status .status-title {\n  color: #f7fafc;\n}\n[data-theme=dark] .flow-side-panel .current-status .status-path {\n  color: #a0aec0;\n}\n[data-theme=dark] .flow-side-panel .mini-flow-map {\n  background: #2d3748;\n  border-bottom-color: rgba(255, 255, 255, 0.05);\n}\n[data-theme=dark] .flow-side-panel .quick-stats {\n  background: #1a202c;\n  border-bottom-color: rgba(255, 255, 255, 0.05);\n}\n[data-theme=dark] .flow-side-panel .quick-stats .stat-text {\n  color: #e2e8f0;\n}\n[data-theme=dark] .flow-side-panel .recent-path {\n  background: #1a202c;\n}\n[data-theme=dark] .flow-side-panel .recent-path .recent-title {\n  color: #a0aec0;\n}\n[data-theme=dark] .flow-side-panel .recent-path .path-dot {\n  background: #2d3748;\n  border-color: transparent;\n}\n[data-theme=dark] .flow-side-panel .recent-path .path-dot:hover {\n  border-color: #4299e1;\n}\n[data-theme=dark] .flow-panel-toggle-btn {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  box-shadow:\n    0 8px 24px rgba(102, 126, 234, 0.5),\n    0 0 0 1px rgba(255, 255, 255, 0.2),\n    0 0 30px rgba(102, 126, 234, 0.3);\n}\n[data-theme=dark] .flow-panel-toggle-btn:hover {\n  box-shadow:\n    0 12px 32px rgba(102, 126, 234, 0.6),\n    0 0 0 1px rgba(255, 255, 255, 0.3),\n    0 0 40px rgba(102, 126, 234, 0.4);\n}\n.wuxia-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.85);\n  -webkit-backdrop-filter: blur(8px);\n  backdrop-filter: blur(8px);\n  z-index: 2000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  animation: fadeIn 0.3s ease;\n}\n.wuxia-panel {\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  background: var(--bg-primary);\n  border-radius: 0 !important;\n  box-shadow: none;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n.wuxia-panel .wuxia-header {\n  padding: 20px 48px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: move;\n  position: relative;\n  z-index: 1;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  flex-shrink: 0;\n}\n.wuxia-panel .wuxia-header h2 {\n  font-size: 1.8rem;\n  font-weight: 700;\n  color: white;\n  margin: 0;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n  letter-spacing: 1px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.wuxia-panel .wuxia-header .close-btn {\n  width: 44px;\n  height: 44px;\n  background: rgba(255, 255, 255, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 50%;\n  color: white;\n  font-size: 1.5rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.wuxia-panel .wuxia-header .close-btn:hover {\n  background: rgba(255, 255, 255, 0.25);\n  transform: rotate(90deg) scale(1.1);\n}\n.wuxia-panel .wuxia-tabs {\n  display: flex;\n  padding: 20px 40px;\n  gap: 12px;\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n  overflow-x: auto;\n  position: relative;\n  z-index: 1;\n}\n.wuxia-panel .wuxia-tabs::-webkit-scrollbar {\n  height: 6px;\n}\n.wuxia-panel .wuxia-tabs::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 3px;\n}\n.wuxia-panel .wuxia-tabs::-webkit-scrollbar-thumb {\n  background: rgba(102, 126, 234, 0.5);\n  border-radius: 3px;\n}\n.wuxia-panel .wuxia-tabs::-webkit-scrollbar-thumb:hover {\n  background: rgba(102, 126, 234, 0.7);\n}\n.wuxia-panel .wuxia-tabs .tab-btn {\n  padding: 12px 24px;\n  background: transparent;\n  border: 2px solid transparent;\n  border-radius: 12px;\n  color: var(--text-secondary);\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.wuxia-panel .wuxia-tabs .tab-btn:hover {\n  background: rgba(102, 126, 234, 0.1);\n  color: var(--text-primary);\n  border-color: rgba(102, 126, 234, 0.2);\n}\n.wuxia-panel .wuxia-tabs .tab-btn.active {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-color: transparent;\n  color: white;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n.wuxia-panel .tab-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 40px;\n  position: relative;\n  z-index: 1;\n  background: var(--bg-primary);\n}\n.wuxia-panel .tab-content::-webkit-scrollbar {\n  width: 8px;\n}\n.wuxia-panel .tab-content::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n  border-radius: 4px;\n}\n.wuxia-panel .tab-content::-webkit-scrollbar-thumb {\n  background: rgba(102, 126, 234, 0.5);\n  border-radius: 4px;\n}\n.wuxia-panel .tab-content::-webkit-scrollbar-thumb:hover {\n  background: rgba(102, 126, 234, 0.7);\n}\n.wuxia-panel .tab-content h3 {\n  font-size: 1.6rem;\n  color: var(--text-primary);\n  margin: 0 0 32px 0;\n  text-align: center;\n  font-weight: 700;\n  position: relative;\n  padding-bottom: 16px;\n}\n.wuxia-panel .tab-content h3::after {\n  content: "";\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 80px;\n  height: 3px;\n  background:\n    linear-gradient(\n      90deg,\n      transparent,\n      #667eea,\n      transparent);\n  border-radius: 2px;\n}\n.cultivation-section {\n  max-width: 1000px;\n  margin: 0 auto;\n}\n.cultivation-section .internal-power-gauge {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 16px;\n  padding: 28px;\n  margin-bottom: 24px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n}\n.cultivation-section .internal-power-gauge .gauge-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.cultivation-section .internal-power-gauge .gauge-header .gauge-label {\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: var(--text-primary);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.cultivation-section .internal-power-gauge .gauge-header .gauge-label::before {\n  content: "\\1f525";\n  font-size: 1.4rem;\n}\n.cultivation-section .internal-power-gauge .gauge-header .gauge-value {\n  font-size: 1.3rem;\n  color: #667eea;\n  font-weight: 700;\n  font-variant-numeric: tabular-nums;\n}\n.cultivation-section .internal-power-gauge .gauge-bar {\n  height: 32px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 16px;\n  overflow: hidden;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n  position: relative;\n}\n.cultivation-section .internal-power-gauge .gauge-bar .gauge-fill {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 16px;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3), 0 0 20px rgba(102, 126, 234, 0.5);\n  transition: width 0.5s ease;\n  position: relative;\n}\n.cultivation-section .internal-power-gauge .gauge-bar .gauge-fill::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.3) 50%,\n      transparent 100%);\n  animation: shimmer 2s infinite;\n}\n.cultivation-section .internal-power-gauge .gauge-info {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 16px;\n  margin-top: 20px;\n}\n.cultivation-section .internal-power-gauge .gauge-info span {\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n  padding: 8px 12px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  text-align: center;\n  border: 1px solid var(--border-color);\n}\n.cultivation-section .realm-display {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 16px;\n  padding: 28px;\n  margin-bottom: 24px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n}\n.cultivation-section .realm-display .realm-badge {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  padding: 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.1) 0%,\n      rgba(118, 75, 162, 0.1) 100%);\n  border: 2px solid rgba(102, 126, 234, 0.3);\n  border-radius: 12px;\n  margin-bottom: 20px;\n  transition: all 0.3s ease;\n}\n.cultivation-section .realm-display .realm-badge:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);\n}\n.cultivation-section .realm-display .realm-badge .realm-icon {\n  font-size: 3rem;\n  filter: drop-shadow(0 4px 8px rgba(102, 126, 234, 0.5));\n}\n.cultivation-section .realm-display .realm-badge .realm-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.cultivation-section .realm-display .realm-badge .realm-info .realm-name {\n  font-size: 2rem;\n  font-weight: 700;\n  color: var(--text-primary);\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.cultivation-section .realm-display .realm-badge .realm-info .realm-subtitle {\n  font-size: 0.95rem;\n  color: var(--text-secondary);\n  font-weight: 500;\n}\n.cultivation-section .realm-display .realm-progress {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.cultivation-section .realm-display .realm-progress .progress-label {\n  color: var(--text-primary);\n  font-size: 1rem;\n  font-weight: 600;\n}\n.cultivation-section .realm-display .realm-progress .progress-bar {\n  height: 24px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 12px;\n  overflow: hidden;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n  position: relative;\n}\n.cultivation-section .realm-display .realm-progress .progress-bar .progress-fill {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 12px;\n  transition: width 0.5s ease;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);\n}\n.cultivation-section .realm-display .realm-progress .progress-value {\n  color: var(--text-primary);\n  font-weight: 600;\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n.cultivation-section .cultivation-actions {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\n  gap: 16px;\n  margin-bottom: 24px;\n}\n.cultivation-section .cultivation-actions .cultivation-btn {\n  padding: 24px;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  color: var(--text-primary);\n  font-size: 1.05rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  position: relative;\n  overflow: hidden;\n}\n.cultivation-section .cultivation-actions .cultivation-btn::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      transparent,\n      rgba(102, 126, 234, 0.2),\n      transparent);\n  transition: left 0.5s ease;\n}\n.cultivation-section .cultivation-actions .cultivation-btn .btn-icon {\n  font-size: 2.5rem;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));\n}\n.cultivation-section .cultivation-actions .cultivation-btn:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.1) 0%,\n      rgba(118, 75, 162, 0.1) 100%);\n  border-color: #667eea;\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.25);\n}\n.cultivation-section .cultivation-actions .cultivation-btn:hover::before {\n  left: 100%;\n}\n.cultivation-section .cultivation-actions .cultivation-btn:hover .btn-icon {\n  transform: scale(1.1);\n}\n.cultivation-section .cultivation-actions .cultivation-btn:active {\n  transform: translateY(-2px);\n}\n.cultivation-section .training-level {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 12px;\n  padding: 24px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n}\n.cultivation-section .training-level .training-label {\n  color: var(--text-primary);\n  font-weight: 600;\n  font-size: 1.1rem;\n}\n.cultivation-section .training-level .training-bar {\n  height: 28px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 14px;\n  overflow: hidden;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n}\n.cultivation-section .training-level .training-bar .training-fill {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 14px;\n  transition: width 0.5s ease;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);\n}\n.cultivation-section .training-level .training-value {\n  color: var(--text-primary);\n  font-weight: 600;\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n.skills-section {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n.skills-section .learned-skills-count {\n  text-align: center;\n  margin-bottom: 32px;\n  padding: 16px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 12px;\n}\n.skills-section .learned-skills-count span {\n  color: var(--text-primary);\n  font-size: 1.2rem;\n  font-weight: 700;\n}\n.skills-section .learned-skills-count span strong {\n  color: #667eea;\n  font-size: 1.4rem;\n}\n.skills-section .skills-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 20px;\n}\n.skills-section .skills-grid .skill-card {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 24px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n.skills-section .skills-grid .skill-card::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  transform: scaleX(0);\n  transform-origin: left;\n  transition: transform 0.3s ease;\n}\n.skills-section .skills-grid .skill-card:hover::before {\n  transform: scaleX(1);\n}\n.skills-section .skills-grid .skill-card.grade-\\d558\\c2b9  {\n  border-color: rgba(156, 163, 175, 0.5);\n}\n.skills-section .skills-grid .skill-card.grade-\\d558\\c2b9  .skill-header .skill-grade {\n  background:\n    linear-gradient(\n      135deg,\n      #9ca3af 0%,\n      #6b7280 100%);\n}\n.skills-section .skills-grid .skill-card.grade-\\c911\\c2b9  {\n  border-color: rgba(59, 130, 246, 0.5);\n}\n.skills-section .skills-grid .skill-card.grade-\\c911\\c2b9  .skill-header .skill-grade {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.skills-section .skills-grid .skill-card.grade-\\c0c1\\c2b9  {\n  border-color: rgba(168, 85, 247, 0.5);\n}\n.skills-section .skills-grid .skill-card.grade-\\c0c1\\c2b9  .skill-header .skill-grade {\n  background:\n    linear-gradient(\n      135deg,\n      #a855f7 0%,\n      #9333ea 100%);\n}\n.skills-section .skills-grid .skill-card.grade-\\c808\\d559  {\n  border-color: rgba(251, 191, 36, 0.5);\n}\n.skills-section .skills-grid .skill-card.grade-\\c808\\d559  .skill-header .skill-grade {\n  background:\n    linear-gradient(\n      135deg,\n      #fbbf24 0%,\n      #f59e0b 100%);\n}\n.skills-section .skills-grid .skill-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 32px rgba(102, 126, 234, 0.25);\n  border-color: #667eea;\n}\n.skills-section .skills-grid .skill-card .skill-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 20px;\n}\n.skills-section .skills-grid .skill-card .skill-header .skill-names {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.skills-section .skills-grid .skill-card .skill-header .skill-names .skill-name-chinese {\n  font-size: 1.5rem;\n  font-weight: 800;\n  color: var(--text-primary);\n  margin: 0;\n  line-height: 1.2;\n}\n.skills-section .skills-grid .skill-card .skill-header .skill-names .skill-name-korean {\n  font-size: 1rem;\n  color: var(--text-secondary);\n  margin: 0;\n  font-weight: 500;\n}\n.skills-section .skills-grid .skill-card .skill-header .skill-grade {\n  padding: 8px 16px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 20px;\n  color: white;\n  font-size: 0.9rem;\n  font-weight: 700;\n  white-space: nowrap;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n}\n.skills-section .skills-grid .skill-card .skill-type {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 16px;\n  padding: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n}\n.skills-section .skills-grid .skill-card .skill-type .type-icon {\n  font-size: 1.5rem;\n}\n.skills-section .skills-grid .skill-card .skill-type .type-label {\n  color: var(--text-secondary);\n  font-size: 1rem;\n  font-weight: 600;\n}\n.skills-section .skills-grid .skill-card .skill-stats {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 10px;\n  margin-bottom: 16px;\n}\n.skills-section .skills-grid .skill-card .skill-stats .stat-row {\n  display: flex;\n  justify-content: space-between;\n  padding: 10px 12px;\n  background: var(--bg-tertiary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  transition: all 0.2s ease;\n}\n.skills-section .skills-grid .skill-card .skill-stats .stat-row:hover {\n  background: rgba(102, 126, 234, 0.1);\n  border-color: rgba(102, 126, 234, 0.3);\n}\n.skills-section .skills-grid .skill-card .skill-stats .stat-row .stat-label {\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n  font-weight: 500;\n}\n.skills-section .skills-grid .skill-card .skill-stats .stat-row .stat-value {\n  color: var(--text-primary);\n  font-weight: 700;\n  font-size: 1rem;\n}\n.skills-section .skills-grid .skill-card .skill-description {\n  margin-bottom: 16px;\n  padding: 16px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border-left: 3px solid #667eea;\n}\n.skills-section .skills-grid .skill-card .skill-description p {\n  color: var(--text-primary);\n  font-size: 0.95rem;\n  margin: 0 0 10px 0;\n  line-height: 1.6;\n}\n.skills-section .skills-grid .skill-card .skill-description .skill-effect {\n  color: #667eea;\n  font-style: italic;\n  font-weight: 600;\n}\n.skills-section .skills-grid .skill-card .skill-element {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 10px;\n  padding: 8px 14px;\n  background: rgba(102, 126, 234, 0.15);\n  border-radius: 20px;\n  border: 1px solid rgba(102, 126, 234, 0.3);\n}\n.skills-section .skills-grid .skill-card .skill-element .element-icon {\n  font-size: 1.2rem;\n}\n.skills-section .skills-grid .skill-card .skill-element .element-name {\n  color: var(--text-primary);\n  font-size: 0.9rem;\n  font-weight: 600;\n  text-transform: uppercase;\n}\n.skills-section .skills-grid .skill-card .skill-faction {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 14px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n}\n.skills-section .skills-grid .skill-card .skill-faction .faction-label {\n  color: var(--text-secondary);\n  font-size: 0.85rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.skills-section .skills-grid .skill-card .skill-faction .faction-name {\n  color: #667eea;\n  font-weight: 700;\n  font-size: 0.95rem;\n}\n.skills-section .no-skills {\n  text-align: center;\n  padding: 80px 20px;\n  background: var(--bg-secondary);\n  border-radius: 16px;\n  border: 2px dashed var(--border-color);\n}\n.skills-section .no-skills p {\n  color: var(--text-secondary);\n  font-size: 1.2rem;\n  margin: 12px 0;\n}\n.faction-section {\n  max-width: 1000px;\n  margin: 0 auto;\n}\n.faction-section .current-faction {\n  margin-bottom: 40px;\n}\n.faction-section .current-faction .faction-card.current {\n  border-width: 3px;\n  box-shadow: 0 0 30px rgba(195, 20, 50, 0.4);\n}\n.faction-section .no-faction {\n  text-align: center;\n  padding: 60px 20px;\n  background: var(--bg-secondary);\n  border-radius: 16px;\n  border: 2px dashed var(--border-color);\n  margin-bottom: 40px;\n}\n.faction-section .no-faction p {\n  color: var(--text-secondary);\n  font-size: 1.2rem;\n  margin-bottom: 24px;\n  font-weight: 500;\n}\n.faction-section .no-faction h4 {\n  color: var(--text-primary);\n  font-size: 1.4rem;\n  margin-bottom: 24px;\n  font-weight: 700;\n}\n.faction-section .factions-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));\n  gap: 24px;\n}\n.faction-section .factions-grid .faction-card {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 28px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n.faction-section .factions-grid .faction-card::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  transform: scaleX(0);\n  transform-origin: left;\n  transition: transform 0.3s ease;\n}\n.faction-section .factions-grid .faction-card:hover::before {\n  transform: scaleX(1);\n}\n.faction-section .factions-grid .faction-card.type-righteous {\n  border-color: rgba(59, 130, 246, 0.5);\n}\n.faction-section .factions-grid .faction-card.type-righteous::before {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.faction-section .factions-grid .faction-card.type-righteous:hover {\n  box-shadow: 0 12px 32px rgba(59, 130, 246, 0.25);\n  border-color: #3b82f6;\n}\n.faction-section .factions-grid .faction-card.type-evil {\n  border-color: rgba(239, 68, 68, 0.5);\n}\n.faction-section .factions-grid .faction-card.type-evil::before {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444 0%,\n      #dc2626 100%);\n}\n.faction-section .factions-grid .faction-card.type-evil:hover {\n  box-shadow: 0 12px 32px rgba(239, 68, 68, 0.25);\n  border-color: #ef4444;\n}\n.faction-section .factions-grid .faction-card.type-neutral {\n  border-color: rgba(156, 163, 175, 0.5);\n}\n.faction-section .factions-grid .faction-card.type-neutral::before {\n  background:\n    linear-gradient(\n      90deg,\n      #9ca3af 0%,\n      #6b7280 100%);\n}\n.faction-section .factions-grid .faction-card.type-neutral:hover {\n  box-shadow: 0 12px 32px rgba(156, 163, 175, 0.25);\n  border-color: #9ca3af;\n}\n.faction-section .factions-grid .faction-card:hover {\n  transform: translateY(-4px);\n}\n.faction-section .factions-grid .faction-card .faction-header {\n  margin-bottom: 20px;\n}\n.faction-section .factions-grid .faction-card .faction-header h4 {\n  font-size: 1.8rem;\n  font-weight: 800;\n  color: var(--text-primary);\n  margin: 0 0 8px 0;\n  line-height: 1.2;\n}\n.faction-section .factions-grid .faction-card .faction-header .faction-name-korean {\n  font-size: 1.1rem;\n  color: var(--text-secondary);\n  margin: 0;\n  font-weight: 500;\n}\n.faction-section .factions-grid .faction-card .faction-type {\n  display: inline-flex;\n  align-items: center;\n  padding: 8px 18px;\n  border-radius: 20px;\n  font-size: 0.95rem;\n  font-weight: 700;\n  margin-bottom: 20px;\n}\n.faction-section .factions-grid .faction-card .faction-type.type-righteous {\n  background: rgba(59, 130, 246, 0.15);\n  color: #3b82f6;\n  border: 1px solid rgba(59, 130, 246, 0.3);\n}\n.faction-section .factions-grid .faction-card .faction-type.type-evil {\n  background: rgba(239, 68, 68, 0.15);\n  color: #ef4444;\n  border: 1px solid rgba(239, 68, 68, 0.3);\n}\n.faction-section .factions-grid .faction-card .faction-type.type-neutral {\n  background: rgba(156, 163, 175, 0.15);\n  color: #9ca3af;\n  border: 1px solid rgba(156, 163, 175, 0.3);\n}\n.faction-section .factions-grid .faction-card .faction-info {\n  margin-bottom: 20px;\n  padding: 16px;\n  background: var(--bg-tertiary);\n  border-radius: 12px;\n  border-left: 3px solid #667eea;\n}\n.faction-section .factions-grid .faction-card .faction-info p {\n  color: var(--text-primary);\n  line-height: 1.7;\n  margin: 0 0 12px 0;\n  font-size: 0.95rem;\n}\n.faction-section .factions-grid .faction-card .faction-info strong {\n  color: #667eea;\n  font-weight: 700;\n}\n.faction-section .factions-grid .faction-card .faction-specialties {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n.faction-section .factions-grid .faction-card .faction-specialties .specialty-badge {\n  padding: 8px 16px;\n  background: rgba(102, 126, 234, 0.15);\n  border: 1px solid rgba(102, 126, 234, 0.3);\n  border-radius: 20px;\n  color: #667eea;\n  font-size: 0.85rem;\n  font-weight: 600;\n  transition: all 0.2s ease;\n}\n.faction-section .factions-grid .faction-card .faction-specialties .specialty-badge:hover {\n  background: rgba(102, 126, 234, 0.25);\n  transform: translateY(-2px);\n}\n.faction-section .factions-grid .faction-card .faction-reputation {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n}\n.faction-section .factions-grid .faction-card .faction-reputation span {\n  color: var(--text-secondary);\n  font-weight: 600;\n  font-size: 0.9rem;\n  white-space: nowrap;\n}\n.faction-section .factions-grid .faction-card .faction-reputation .reputation-bar {\n  flex: 1;\n  height: 12px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 6px;\n  overflow: hidden;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n}\n.faction-section .factions-grid .faction-card .faction-reputation .reputation-bar .reputation-fill {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  transition: width 0.5s ease;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);\n}\n.faction-section .factions-grid .faction-card .join-faction-btn {\n  width: 100%;\n  padding: 14px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  font-size: 1.05rem;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin-top: 16px;\n}\n.faction-section .factions-grid .faction-card .join-faction-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n}\n.elixir-section {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n.elixir-section .elixir-inventory {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 20px;\n}\n.elixir-section .elixir-inventory .elixir-card {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 24px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n.elixir-section .elixir-inventory .elixir-card::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  transform: scaleX(0);\n  transform-origin: left;\n  transition: transform 0.3s ease;\n}\n.elixir-section .elixir-inventory .elixir-card:hover::before {\n  transform: scaleX(1);\n}\n.elixir-section .elixir-inventory .elixir-card.grade-\\d558\\d488  {\n  border-color: rgba(156, 163, 175, 0.5);\n}\n.elixir-section .elixir-inventory .elixir-card.grade-\\d558\\d488::before {\n  background:\n    linear-gradient(\n      90deg,\n      #9ca3af 0%,\n      #6b7280 100%);\n}\n.elixir-section .elixir-inventory .elixir-card.grade-\\c911\\d488  {\n  border-color: rgba(59, 130, 246, 0.5);\n}\n.elixir-section .elixir-inventory .elixir-card.grade-\\c911\\d488::before {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.elixir-section .elixir-inventory .elixir-card.grade-\\c0c1\\d488  {\n  border-color: rgba(168, 85, 247, 0.5);\n}\n.elixir-section .elixir-inventory .elixir-card.grade-\\c0c1\\d488::before {\n  background:\n    linear-gradient(\n      90deg,\n      #a855f7 0%,\n      #9333ea 100%);\n}\n.elixir-section .elixir-inventory .elixir-card.grade-\\adf9\\d488  {\n  border-color: rgba(251, 191, 36, 0.5);\n}\n.elixir-section .elixir-inventory .elixir-card.grade-\\adf9\\d488::before {\n  background:\n    linear-gradient(\n      90deg,\n      #fbbf24 0%,\n      #f59e0b 100%);\n}\n.elixir-section .elixir-inventory .elixir-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 32px rgba(102, 126, 234, 0.25);\n  border-color: #667eea;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 16px;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-header .elixir-names {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-header .elixir-names .elixir-chinese {\n  font-size: 1.4rem;\n  font-weight: 800;\n  color: var(--text-primary);\n  margin: 0;\n  line-height: 1.2;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-header .elixir-names .elixir-korean {\n  font-size: 0.95rem;\n  color: var(--text-secondary);\n  margin: 0;\n  font-weight: 500;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-header .elixir-grade {\n  padding: 8px 14px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 20px;\n  color: white;\n  font-size: 0.85rem;\n  font-weight: 700;\n  white-space: nowrap;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-type {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-type .type-badge {\n  padding: 8px 14px;\n  background: rgba(102, 126, 234, 0.15);\n  border: 1px solid rgba(102, 126, 234, 0.3);\n  border-radius: 20px;\n  color: #667eea;\n  font-size: 0.85rem;\n  font-weight: 600;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-type .rarity-stars {\n  display: flex;\n  gap: 4px;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-type .rarity-stars .star {\n  font-size: 1rem;\n  filter: drop-shadow(0 2px 4px rgba(251, 191, 36, 0.5));\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-description {\n  margin-bottom: 16px;\n  padding: 14px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border-left: 3px solid #667eea;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-description p {\n  color: var(--text-primary);\n  font-size: 0.95rem;\n  line-height: 1.6;\n  margin: 0;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-effects {\n  margin-bottom: 16px;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-effects .effect-item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 12px;\n  background: var(--bg-tertiary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  margin-bottom: 8px;\n  transition: all 0.2s ease;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-effects .effect-item:hover {\n  background: rgba(102, 126, 234, 0.1);\n  border-color: rgba(102, 126, 234, 0.3);\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-effects .effect-item .effect-icon {\n  font-size: 1.2rem;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-effects .effect-item .effect-text {\n  color: var(--text-primary);\n  font-size: 0.9rem;\n  font-weight: 500;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-warning {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 12px;\n  background: rgba(239, 68, 68, 0.1);\n  border: 1px solid rgba(239, 68, 68, 0.3);\n  border-radius: 10px;\n  margin-bottom: 16px;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-warning .warning-icon {\n  font-size: 1.3rem;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-warning .warning-text {\n  color: #ef4444;\n  font-size: 0.9rem;\n  font-weight: 600;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 16px;\n  border-top: 1px solid var(--border-color);\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-footer .elixir-price {\n  color: #ffd700;\n  font-weight: 700;\n  font-size: 1.1rem;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-footer .use-elixir-btn {\n  padding: 8px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n.elixir-section .elixir-inventory .elixir-card .elixir-footer .use-elixir-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n}\n.elixir-section .no-elixir {\n  text-align: center;\n  padding: 60px 20px;\n}\n.elixir-section .no-elixir p {\n  color: rgba(255, 255, 255, 0.6);\n  font-size: 1.1rem;\n}\n.meridians-section {\n  max-width: 1000px;\n  margin: 0 auto;\n}\n.meridians-section .meridian-info {\n  text-align: center;\n  margin-bottom: 40px;\n  padding: 20px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.meridians-section .meridian-info p {\n  color: var(--text-primary);\n  font-size: 1.2rem;\n  font-weight: 700;\n  margin: 0;\n}\n.meridians-section .meridian-diagram {\n  position: relative;\n  width: 100%;\n  max-width: 600px;\n  height: 600px;\n  margin: 0 auto 40px auto;\n  background:\n    radial-gradient(\n      circle,\n      rgba(102, 126, 234, 0.05) 0%,\n      transparent 70%);\n  border-radius: 50%;\n  border: 2px solid rgba(102, 126, 234, 0.2);\n  box-shadow: 0 8px 32px rgba(102, 126, 234, 0.1);\n}\n.meridians-section .meridian-diagram .meridian-point {\n  position: absolute;\n  transform: translate(-50%, -50%);\n}\n.meridians-section .meridian-diagram .meridian-point .point-circle {\n  width: 64px;\n  height: 64px;\n  border-radius: 50%;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.meridians-section .meridian-diagram .meridian-point .point-circle .point-number {\n  color: var(--text-secondary);\n  font-weight: 800;\n  font-size: 1.3rem;\n}\n.meridians-section .meridian-diagram .meridian-point.opened .point-circle {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-color: transparent;\n  box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2), 0 8px 24px rgba(102, 126, 234, 0.4);\n}\n.meridians-section .meridian-diagram .meridian-point.opened .point-circle .point-number {\n  color: white;\n}\n.meridians-section .meridian-diagram .meridian-point:hover .point-circle {\n  transform: scale(1.15);\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);\n}\n.meridians-section .meridian-list {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.meridians-section .meridian-list .meridian-item {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  padding: 24px;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n.meridians-section .meridian-list .meridian-item::before {\n  content: "";\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  background: transparent;\n  transition: background 0.3s ease;\n}\n.meridians-section .meridian-list .meridian-item.opened {\n  border-color: rgba(102, 126, 234, 0.5);\n  background: rgba(102, 126, 234, 0.05);\n}\n.meridians-section .meridian-list .meridian-item.opened::before {\n  background:\n    linear-gradient(\n      180deg,\n      #667eea 0%,\n      #764ba2 100%);\n}\n.meridians-section .meridian-list .meridian-item:hover {\n  transform: translateX(6px);\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.2);\n  border-color: #667eea;\n}\n.meridians-section .meridian-list .meridian-item .meridian-number {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  background: rgba(102, 126, 234, 0.15);\n  border: 2px solid rgba(102, 126, 234, 0.3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 800;\n  color: var(--text-primary);\n  font-size: 1.2rem;\n  flex-shrink: 0;\n}\n.meridians-section .meridian-list .meridian-item .meridian-details {\n  flex: 1;\n}\n.meridians-section .meridian-list .meridian-item .meridian-details h4 {\n  font-size: 1.3rem;\n  color: var(--text-primary);\n  margin: 0 0 8px 0;\n  font-weight: 700;\n}\n.meridians-section .meridian-list .meridian-item .meridian-details p {\n  color: var(--text-secondary);\n  margin: 0 0 12px 0;\n  line-height: 1.5;\n}\n.meridians-section .meridian-list .meridian-item .meridian-details .meridian-progress {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.meridians-section .meridian-list .meridian-item .meridian-details .meridian-progress .progress-bar {\n  flex: 1;\n  height: 14px;\n  background: rgba(102, 126, 234, 0.1);\n  border-radius: 7px;\n  overflow: hidden;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n}\n.meridians-section .meridian-list .meridian-item .meridian-details .meridian-progress .progress-bar .progress-fill {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  transition: width 0.5s ease;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);\n}\n.meridians-section .meridian-list .meridian-item .meridian-details .meridian-progress span {\n  color: var(--text-primary);\n  font-size: 0.9rem;\n  font-weight: 600;\n  font-variant-numeric: tabular-nums;\n}\n.meridians-section .meridian-list .meridian-item .meridian-details .meridian-bonus {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-top: 12px;\n}\n.meridians-section .meridian-list .meridian-item .meridian-details .meridian-bonus .bonus-item {\n  padding: 6px 14px;\n  background: rgba(102, 126, 234, 0.15);\n  border: 1px solid rgba(102, 126, 234, 0.3);\n  border-radius: 20px;\n  color: #667eea;\n  font-size: 0.85rem;\n  font-weight: 600;\n}\n.meridians-section .meridian-list .meridian-item .meridian-status {\n  flex-shrink: 0;\n}\n.meridians-section .meridian-list .meridian-item .meridian-status .status-opened {\n  color: #667eea;\n  font-weight: 700;\n  font-size: 1.1rem;\n}\n.meridians-section .meridian-list .meridian-item .meridian-status .open-btn {\n  padding: 12px 28px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  font-weight: 700;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n.meridians-section .meridian-list .meridian-item .meridian-status .open-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n}\n.meridians-section .meridian-list .meridian-item .meridian-status .open-btn:active {\n  transform: translateY(0);\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes shimmer {\n  0% {\n    transform: translateX(-100%);\n  }\n  100% {\n    transform: translateX(200%);\n  }\n}\n@keyframes pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.1);\n    opacity: 0.8;\n  }\n}\n.battle-actions {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  gap: 12px;\n  padding: 20px;\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 12px;\n  margin: 16px 0;\n}\n.battle-actions .action-btn {\n  padding: 16px 12px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.2) 0%,\n      rgba(118, 75, 162, 0.2) 100%);\n  border: 2px solid rgba(102, 126, 234, 0.5);\n  border-radius: 10px;\n  color: white;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n}\n.battle-actions .action-btn .btn-icon {\n  font-size: 1.8rem;\n}\n.battle-actions .action-btn .btn-text {\n  font-size: 0.95rem;\n}\n.battle-actions .action-btn:hover:not(:disabled) {\n  transform: translateY(-3px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\n}\n.battle-actions .action-btn:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  filter: grayscale(0.5);\n}\n.battle-actions .action-btn.attack-btn {\n  border-color: rgba(255, 100, 100, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 100, 100, 0.2) 0%,\n      rgba(195, 20, 50, 0.2) 100%);\n}\n.battle-actions .action-btn.attack-btn:hover:not(:disabled) {\n  box-shadow: 0 6px 20px rgba(255, 100, 100, 0.4);\n}\n.battle-actions .action-btn.skill-btn {\n  border-color: rgba(138, 43, 226, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(138, 43, 226, 0.2) 0%,\n      rgba(102, 126, 234, 0.2) 100%);\n}\n.battle-actions .action-btn.skill-btn:hover:not(:disabled) {\n  box-shadow: 0 6px 20px rgba(138, 43, 226, 0.4);\n}\n.battle-actions .action-btn.defend-btn {\n  border-color: rgba(100, 200, 255, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(100, 200, 255, 0.2) 0%,\n      rgba(64, 156, 255, 0.2) 100%);\n}\n.battle-actions .action-btn.defend-btn:hover:not(:disabled) {\n  box-shadow: 0 6px 20px rgba(100, 200, 255, 0.4);\n}\n.battle-actions .action-btn.potion-btn {\n  border-color: rgba(50, 205, 50, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(50, 205, 50, 0.2) 0%,\n      rgba(34, 139, 34, 0.2) 100%);\n}\n.battle-actions .action-btn.potion-btn:hover:not(:disabled) {\n  box-shadow: 0 6px 20px rgba(50, 205, 50, 0.4);\n}\n.martial-skills-section {\n  padding: 20px;\n  background: rgba(0, 0, 0, 0.3);\n  border: 2px solid rgba(195, 20, 50, 0.3);\n  border-radius: 12px;\n  margin: 16px 0;\n}\n.martial-skills-section .skills-title {\n  font-size: 1.3rem;\n  color: #ffd700;\n  margin: 0 0 16px 0;\n  text-align: center;\n  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);\n}\n.martial-skills-section .martial-skills-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\n  gap: 12px;\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn {\n  padding: 14px;\n  background: rgba(0, 0, 0, 0.4);\n  border: 2px solid rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  color: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  position: relative;\n  overflow: hidden;\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background:\n    linear-gradient(\n      135deg,\n      transparent 0%,\n      rgba(255, 215, 0, 0.1) 100%);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn:hover:not(:disabled)::before {\n  opacity: 1;\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn.grade-\\d558\\c2b9  {\n  border-color: rgba(150, 150, 150, 0.4);\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn.grade-\\c911\\c2b9  {\n  border-color: rgba(100, 200, 255, 0.4);\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn.grade-\\c0c1\\c2b9  {\n  border-color: rgba(138, 43, 226, 0.5);\n  box-shadow: 0 0 10px rgba(138, 43, 226, 0.2);\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn.grade-\\c808\\d559  {\n  border-color: rgba(255, 215, 0, 0.6);\n  box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);\n  animation: skillPulse 2s ease-in-out infinite;\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn:hover:not(:disabled) {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 25px rgba(195, 20, 50, 0.4);\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  filter: grayscale(0.7);\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn:disabled::after {\n  content: "\\b0b4\\acf5  \\bd80\\c871";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: rgba(0, 0, 0, 0.8);\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  color: rgb(255, 100, 100);\n  white-space: nowrap;\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn .skill-name {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n  position: relative;\n  z-index: 1;\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn .skill-name .skill-chinese {\n  font-size: 1.3rem;\n  font-weight: 700;\n  color: #ffd700;\n  text-shadow: 0 0 8px rgba(255, 215, 0, 0.4);\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn .skill-name .skill-korean {\n  font-size: 0.85rem;\n  color: rgba(255, 255, 255, 0.8);\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn .skill-cost {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  padding: 4px 8px;\n  background: rgba(195, 20, 50, 0.3);\n  border-radius: 6px;\n  position: relative;\n  z-index: 1;\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn .skill-cost .cost-icon {\n  font-size: 1rem;\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn .skill-cost .cost-value {\n  font-size: 0.9rem;\n  font-weight: 700;\n  color: rgb(255, 150, 150);\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn .skill-damage {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  position: relative;\n  z-index: 1;\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn .skill-damage .damage-icon {\n  font-size: 1rem;\n}\n.martial-skills-section .martial-skills-grid .martial-skill-btn .skill-damage .damage-value {\n  font-size: 0.95rem;\n  font-weight: 700;\n  color: rgb(255, 200, 100);\n}\n.internal-power-bar {\n  margin-top: 8px;\n}\n.internal-power-bar .bar-label {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 4px;\n}\n.internal-power-bar .bar-label .bar-name {\n  font-weight: 600;\n  color: rgb(255, 150, 150);\n  text-shadow: 0 0 5px rgba(255, 100, 100, 0.5);\n}\n.internal-power-bar .bar-label .bar-text {\n  font-size: 0.85rem;\n  color: rgba(255, 255, 255, 0.9);\n}\n.internal-power-bar .bar-container {\n  height: 12px;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 6px;\n  overflow: hidden;\n  border: 1px solid rgba(255, 100, 100, 0.3);\n}\n.internal-power-bar .bar-container .bar-fill.internal-power {\n  background:\n    linear-gradient(\n      90deg,\n      #ff6b6b 0%,\n      #ffd700 50%,\n      #ff6b6b 100%);\n  background-size: 200% 100%;\n  animation: powerFlow 3s ease-in-out infinite;\n  box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);\n}\n@keyframes skillPulse {\n  0%, 100% {\n    box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);\n  }\n  50% {\n    box-shadow: 0 0 25px rgba(255, 215, 0, 0.5);\n  }\n}\n.epic-battle {\n  position: relative;\n  overflow: hidden;\n  background:\n    linear-gradient(\n      135deg,\n      #0f0c29 0%,\n      #302b63 50%,\n      #24243e 100%);\n  border-radius: 20px;\n  box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6), inset 0 0 80px rgba(138, 43, 226, 0.1);\n}\n.epic-battle .battle-background {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: none;\n  overflow: hidden;\n}\n.epic-battle .battle-background .battle-particles {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-image:\n    radial-gradient(\n      2px 2px at 20% 30%,\n      rgba(255, 255, 255, 0.3),\n      transparent),\n    radial-gradient(\n      2px 2px at 60% 70%,\n      rgba(138, 43, 226, 0.3),\n      transparent),\n    radial-gradient(\n      1px 1px at 50% 50%,\n      rgba(255, 215, 0, 0.3),\n      transparent),\n    radial-gradient(\n      1px 1px at 80% 10%,\n      rgba(195, 20, 50, 0.3),\n      transparent);\n  background-size:\n    200% 200%,\n    180% 180%,\n    220% 220%,\n    190% 190%;\n  animation: particleFloat 20s ease-in-out infinite;\n}\n.epic-battle .battle-background .battle-glow {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(138, 43, 226, 0.15) 0%,\n      transparent 70%);\n  animation: glowPulse 4s ease-in-out infinite;\n}\n.epic-battle .battle-header {\n  position: relative;\n  z-index: 1;\n  padding: 24px 32px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(138, 43, 226, 0.3) 0%,\n      rgba(195, 20, 50, 0.3) 100%);\n  border-bottom: 3px solid rgba(255, 215, 0, 0.3);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.epic-battle .battle-header h3 {\n  font-size: 2rem;\n  font-weight: 800;\n  color: white;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  text-shadow: 0 0 20px rgba(255, 215, 0, 0.6), 0 0 40px rgba(138, 43, 226, 0.4);\n  animation: titlePulse 2s ease-in-out infinite;\n}\n.epic-battle .battle-header h3 .battle-title-icon {\n  animation: iconSpin 3s linear infinite;\n}\n.epic-battle .battle-header .turn-indicator {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 24px;\n  background: rgba(0, 0, 0, 0.4);\n  border-radius: 12px;\n  border: 2px solid rgba(255, 215, 0, 0.3);\n}\n.epic-battle .battle-header .turn-indicator .turn-label {\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 1rem;\n  font-weight: 600;\n}\n.epic-battle .battle-header .turn-indicator .turn-value {\n  font-size: 1.2rem;\n  font-weight: 800;\n  padding: 4px 12px;\n  border-radius: 6px;\n  transition: all 0.3s ease;\n}\n.epic-battle .battle-header .turn-indicator .turn-value.player-turn {\n  color: #64c8ff;\n  background: rgba(100, 200, 255, 0.2);\n  box-shadow: 0 0 20px rgba(100, 200, 255, 0.4);\n  animation: turnGlow 1s ease-in-out infinite;\n}\n.epic-battle .battle-header .turn-indicator .turn-value.enemy-turn {\n  color: #ff6464;\n  background: rgba(255, 100, 100, 0.2);\n  box-shadow: 0 0 20px rgba(255, 100, 100, 0.4);\n  animation: turnGlow 1s ease-in-out infinite;\n}\n.epic-battle .battle-arena {\n  position: relative;\n  z-index: 1;\n  padding: 40px 20px;\n}\n.epic-battle .battle-characters {\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  gap: 40px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n.epic-battle .battle-characters .battle-character {\n  flex: 1;\n  max-width: 400px;\n  position: relative;\n  transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n.epic-battle .battle-characters .battle-character.active {\n  transform: scale(1.05);\n}\n.epic-battle .battle-characters .battle-character.active .character-glow {\n  opacity: 1;\n  animation: activeGlow 1.5s ease-in-out infinite;\n}\n.epic-battle .battle-characters .battle-character.taking-damage {\n  animation: shakeDamage 0.5s ease-in-out;\n}\n.epic-battle .battle-characters .battle-character.attacking {\n  animation: attackPulse 0.8s ease-out;\n}\n.epic-battle .battle-characters .battle-character .character-glow {\n  position: absolute;\n  top: -20px;\n  left: -20px;\n  right: -20px;\n  bottom: -20px;\n  background:\n    radial-gradient(\n      circle,\n      rgba(100, 200, 255, 0.3) 0%,\n      transparent 70%);\n  border-radius: 50%;\n  opacity: 0;\n  transition: opacity 0.5s ease;\n  pointer-events: none;\n}\n.epic-battle .battle-characters .battle-character .character-glow.enemy-glow {\n  background:\n    radial-gradient(\n      circle,\n      rgba(255, 100, 100, 0.3) 0%,\n      transparent 70%);\n}\n.epic-battle .battle-characters .battle-character .character-card {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 60, 0.9) 0%,\n      rgba(20, 20, 40, 0.9) 100%);\n  border-radius: 20px;\n  padding: 24px;\n  border: 3px solid rgba(100, 200, 255, 0.3);\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), inset 0 0 40px rgba(100, 200, 255, 0.05);\n  position: relative;\n  overflow: hidden;\n}\n.epic-battle .battle-characters .battle-character .character-card::before {\n  content: "";\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    linear-gradient(\n      45deg,\n      transparent 30%,\n      rgba(255, 255, 255, 0.05) 50%,\n      transparent 70%);\n  animation: cardShine 3s ease-in-out infinite;\n}\n.epic-battle .battle-characters .battle-character .character-card.enemy-card {\n  border-color: rgba(255, 100, 100, 0.3);\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), inset 0 0 40px rgba(255, 100, 100, 0.05);\n}\n.epic-battle .battle-characters .battle-character .character-avatar-container {\n  position: relative;\n  width: 120px;\n  height: 120px;\n  margin: 0 auto 16px;\n}\n.epic-battle .battle-characters .battle-character .character-avatar-container .avatar-ring {\n  position: absolute;\n  top: -10px;\n  left: -10px;\n  right: -10px;\n  bottom: -10px;\n  border: 3px solid rgba(100, 200, 255, 0.5);\n  border-radius: 50%;\n  animation: ringRotate 4s linear infinite;\n}\n.epic-battle .battle-characters .battle-character .character-avatar-container .avatar-ring::before,\n.epic-battle .battle-characters .battle-character .character-avatar-container .avatar-ring::after {\n  content: "";\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  background: rgb(100, 200, 255);\n  border-radius: 50%;\n  box-shadow: 0 0 15px rgba(100, 200, 255, 0.8);\n}\n.epic-battle .battle-characters .battle-character .character-avatar-container .avatar-ring::before {\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.epic-battle .battle-characters .battle-character .character-avatar-container .avatar-ring::after {\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.epic-battle .battle-characters .battle-character .character-avatar-container .avatar-ring.enemy-ring {\n  border-color: rgba(255, 100, 100, 0.5);\n}\n.epic-battle .battle-characters .battle-character .character-avatar-container .avatar-ring.enemy-ring::before,\n.epic-battle .battle-characters .battle-character .character-avatar-container .avatar-ring.enemy-ring::after {\n  background: rgb(255, 100, 100);\n  box-shadow: 0 0 15px rgba(255, 100, 100, 0.8);\n}\n.epic-battle .battle-characters .battle-character .character-avatar-container .character-avatar {\n  font-size: 5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background:\n    radial-gradient(\n      circle,\n      rgba(138, 43, 226, 0.2) 0%,\n      transparent 70%);\n  border-radius: 50%;\n  filter: drop-shadow(0 0 20px rgba(138, 43, 226, 0.5));\n  animation: avatarFloat 3s ease-in-out infinite;\n}\n.epic-battle .battle-characters .battle-character .character-avatar-container .level-badge {\n  position: absolute;\n  bottom: 5px;\n  right: 5px;\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff6b6b 100%);\n  color: white;\n  font-weight: 800;\n  font-size: 0.9rem;\n  padding: 4px 12px;\n  border-radius: 20px;\n  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);\n  animation: badgePulse 2s ease-in-out infinite;\n}\n.epic-battle .battle-characters .battle-character .character-name {\n  font-size: 1.6rem;\n  font-weight: 800;\n  color: white;\n  text-align: center;\n  margin-bottom: 20px;\n  text-shadow: 0 0 10px rgba(100, 200, 255, 0.5), 0 2px 4px rgba(0, 0, 0, 0.5);\n  letter-spacing: 2px;\n}\n.epic-battle .battle-characters .battle-character .stats-container {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-bottom: 16px;\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-label,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-label,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-label {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 6px;\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-label .bar-icon,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-label .bar-icon,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-label .bar-icon {\n  font-size: 1.2rem;\n  filter: drop-shadow(0 0 5px currentColor);\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-label .bar-name,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-label .bar-name,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-label .bar-name {\n  font-weight: 700;\n  font-size: 1rem;\n  margin-left: 8px;\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-label .bar-text,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-label .bar-text,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-label .bar-text {\n  font-size: 0.95rem;\n  font-weight: 700;\n  color: rgba(255, 255, 255, 0.9);\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-container,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-container,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-container {\n  height: 16px;\n  background: rgba(0, 0, 0, 0.6);\n  border-radius: 10px;\n  overflow: hidden;\n  border: 2px solid rgba(255, 255, 255, 0.2);\n  position: relative;\n  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.5);\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-container .bar-fill,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-container .bar-fill,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-container .bar-fill {\n  height: 100%;\n  position: relative;\n  transition: width 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-container .bar-fill .bar-shine,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-container .bar-fill .bar-shine,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-container .bar-fill .bar-shine {\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.4) 50%,\n      transparent 100%);\n  animation: barShine 2s ease-in-out infinite;\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-container .bar-fill.hp,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-container .bar-fill.hp,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-container .bar-fill.hp {\n  background:\n    linear-gradient(\n      90deg,\n      #ff6b6b 0%,\n      #ee5a6f 100%);\n  box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-container .bar-fill.hp.low,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-container .bar-fill.hp.low,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-container .bar-fill.hp.low {\n  animation: hpWarning 1s ease-in-out infinite;\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-container .bar-fill.hp.critical,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-container .bar-fill.hp.critical,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-container .bar-fill.hp.critical {\n  animation: hpCritical 0.5s ease-in-out infinite;\n  box-shadow: 0 0 25px rgba(255, 0, 0, 0.8);\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-container .bar-fill.hp.enemy-hp,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-container .bar-fill.hp.enemy-hp,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-container .bar-fill.hp.enemy-hp {\n  background:\n    linear-gradient(\n      90deg,\n      #c31432 0%,\n      #8e0000 100%);\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-container .bar-fill.mp,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-container .bar-fill.mp,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-container .bar-fill.mp {\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  box-shadow: 0 0 15px rgba(102, 126, 234, 0.5);\n}\n.epic-battle .battle-characters .battle-character .hp-bar .bar-container .bar-fill.internal-power,\n.epic-battle .battle-characters .battle-character .mp-bar .bar-container .bar-fill.internal-power,\n.epic-battle .battle-characters .battle-character .internal-power-bar .bar-container .bar-fill.internal-power {\n  background:\n    linear-gradient(\n      90deg,\n      #ff6b6b 0%,\n      #ffd700 50%,\n      #ff6b6b 100%);\n  background-size: 200% 100%;\n  box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);\n  animation: powerFlow 3s ease-in-out infinite;\n}\n.epic-battle .battle-characters .battle-character .character-stats-row {\n  display: flex;\n  justify-content: space-around;\n  gap: 12px;\n  margin-top: 16px;\n}\n.epic-battle .battle-characters .battle-character .character-stats-row .stat-item {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 12px;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 10px;\n  border: 2px solid rgba(255, 255, 255, 0.1);\n}\n.epic-battle .battle-characters .battle-character .character-stats-row .stat-item .stat-icon {\n  font-size: 1.3rem;\n  filter: drop-shadow(0 0 5px currentColor);\n}\n.epic-battle .battle-characters .battle-character .character-stats-row .stat-item .stat-value {\n  font-size: 1.2rem;\n  font-weight: 800;\n  color: white;\n  text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);\n}\n.epic-battle .battle-characters .battle-vs-container {\n  position: relative;\n  flex-shrink: 0;\n}\n.epic-battle .battle-characters .battle-vs-container .vs-circle {\n  width: 100px;\n  height: 100px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  box-shadow: 0 0 40px rgba(102, 126, 234, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.2);\n  animation: vsRotate 4s linear infinite;\n}\n.epic-battle .battle-characters .battle-vs-container .vs-circle::before,\n.epic-battle .battle-characters .battle-vs-container .vs-circle::after {\n  content: "";\n  position: absolute;\n  border-radius: 50%;\n}\n.epic-battle .battle-characters .battle-vs-container .vs-circle::before {\n  top: -10px;\n  left: -10px;\n  right: -10px;\n  bottom: -10px;\n  border: 3px dashed rgba(255, 215, 0, 0.5);\n  animation: ringRotate 6s linear infinite reverse;\n}\n.epic-battle .battle-characters .battle-vs-container .vs-circle::after {\n  top: -20px;\n  left: -20px;\n  right: -20px;\n  bottom: -20px;\n  border: 2px dotted rgba(255, 255, 255, 0.3);\n  animation: ringRotate 8s linear infinite;\n}\n.epic-battle .battle-characters .battle-vs-container .vs-circle .vs-text {\n  font-size: 2rem;\n  font-weight: 900;\n  color: white;\n  text-shadow: 0 0 20px rgb(255, 215, 0), 0 0 40px rgba(138, 43, 226, 0.8);\n  animation: vsScale 2s ease-in-out infinite;\n  z-index: 1;\n}\n.epic-battle .battle-characters .battle-vs-container .vs-circle .vs-lightning {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.epic-battle .battle-characters .battle-vs-container .vs-circle .vs-lightning::before,\n.epic-battle .battle-characters .battle-vs-container .vs-circle .vs-lightning::after {\n  content: "\\26a1";\n  position: absolute;\n  font-size: 1.5rem;\n  animation: lightningFlash 2s ease-in-out infinite;\n}\n.epic-battle .battle-characters .battle-vs-container .vs-circle .vs-lightning::before {\n  top: -10px;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.epic-battle .battle-characters .battle-vs-container .vs-circle .vs-lightning::after {\n  bottom: -10px;\n  left: 50%;\n  transform: translateX(-50%);\n  animation-delay: 1s;\n}\n.epic-actions {\n  position: relative;\n  z-index: 1;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  gap: 16px;\n  padding: 24px 32px;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(0, 0, 0, 0.3) 0%,\n      rgba(0, 0, 0, 0.5) 100%);\n  border-radius: 16px;\n  margin: 20px 32px;\n  border: 2px solid rgba(255, 215, 0, 0.2);\n}\n.epic-actions .action-btn {\n  position: relative;\n  padding: 20px 16px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.3) 0%,\n      rgba(118, 75, 162, 0.3) 100%);\n  border: 3px solid rgba(102, 126, 234, 0.6);\n  border-radius: 14px;\n  color: white;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  overflow: hidden;\n}\n.epic-actions .action-btn .btn-glow {\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    radial-gradient(\n      circle,\n      rgba(255, 255, 255, 0.2) 0%,\n      transparent 70%);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.epic-actions .action-btn .btn-particles {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image:\n    radial-gradient(\n      2px 2px at 20% 30%,\n      rgba(255, 255, 255, 0.5),\n      transparent),\n    radial-gradient(\n      2px 2px at 80% 70%,\n      rgba(255, 255, 255, 0.5),\n      transparent);\n  background-size: 100% 100%;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.epic-actions .action-btn .btn-icon {\n  font-size: 2.2rem;\n  filter: drop-shadow(0 0 10px currentColor);\n  transition: transform 0.3s ease;\n  z-index: 1;\n}\n.epic-actions .action-btn .btn-text {\n  font-size: 1rem;\n  letter-spacing: 1px;\n  z-index: 1;\n}\n.epic-actions .action-btn .btn-cost {\n  font-size: 0.85rem;\n  color: rgba(255, 255, 255, 0.7);\n  z-index: 1;\n}\n.epic-actions .action-btn:hover:not(:disabled) {\n  transform: translateY(-5px) scale(1.05);\n  box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);\n}\n.epic-actions .action-btn:hover:not(:disabled) .btn-glow {\n  opacity: 1;\n}\n.epic-actions .action-btn:hover:not(:disabled) .btn-particles {\n  opacity: 1;\n  animation: particleRise 2s ease-out infinite;\n}\n.epic-actions .action-btn:hover:not(:disabled) .btn-icon {\n  transform: scale(1.2) rotate(5deg);\n}\n.epic-actions .action-btn:active:not(:disabled) {\n  transform: translateY(-3px) scale(1.02);\n}\n.epic-actions .action-btn:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  filter: grayscale(0.7);\n  transform: scale(0.95);\n}\n.epic-actions .action-btn.attack-btn {\n  border-color: rgba(255, 100, 100, 0.6);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 100, 100, 0.3) 0%,\n      rgba(195, 20, 50, 0.3) 100%);\n}\n.epic-actions .action-btn.attack-btn:hover:not(:disabled) {\n  box-shadow: 0 15px 40px rgba(255, 100, 100, 0.6);\n}\n.epic-actions .action-btn.skill-btn {\n  border-color: rgba(138, 43, 226, 0.6);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(138, 43, 226, 0.3) 0%,\n      rgba(102, 126, 234, 0.3) 100%);\n}\n.epic-actions .action-btn.skill-btn:hover:not(:disabled) {\n  box-shadow: 0 15px 40px rgba(138, 43, 226, 0.6);\n}\n.epic-actions .action-btn.defend-btn {\n  border-color: rgba(100, 200, 255, 0.6);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(100, 200, 255, 0.3) 0%,\n      rgba(64, 156, 255, 0.3) 100%);\n}\n.epic-actions .action-btn.defend-btn:hover:not(:disabled) {\n  box-shadow: 0 15px 40px rgba(100, 200, 255, 0.6);\n}\n.epic-actions .action-btn.potion-btn {\n  border-color: rgba(50, 205, 50, 0.6);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(50, 205, 50, 0.3) 0%,\n      rgba(34, 139, 34, 0.3) 100%);\n}\n.epic-actions .action-btn.potion-btn:hover:not(:disabled) {\n  box-shadow: 0 15px 40px rgba(50, 205, 50, 0.6);\n}\n.epic-skills {\n  position: relative;\n  z-index: 1;\n  padding: 28px 32px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(195, 20, 50, 0.2) 0%,\n      rgba(36, 11, 54, 0.3) 100%);\n  border: 3px solid rgba(255, 215, 0, 0.4);\n  border-radius: 16px;\n  margin: 20px 32px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), inset 0 0 40px rgba(255, 215, 0, 0.05);\n}\n.epic-skills .skills-header {\n  text-align: center;\n  margin-bottom: 24px;\n}\n.epic-skills .skills-header .skills-title {\n  font-size: 1.6rem;\n  color: #ffd700;\n  margin: 0 0 8px 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 16px;\n  text-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4);\n}\n.epic-skills .skills-header .skills-title .title-decoration {\n  animation: decorationPulse 2s ease-in-out infinite;\n}\n.epic-skills .skills-header .skills-title .title-text {\n  letter-spacing: 4px;\n}\n.epic-skills .skills-header .skills-subtitle {\n  font-size: 1.2rem;\n  color: rgba(255, 215, 0, 0.7);\n  letter-spacing: 6px;\n  font-weight: 300;\n}\n.epic-skills .epic-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 16px;\n}\n.epic-skills .epic-grid .epic-skill-btn {\n  position: relative;\n  padding: 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.6) 0%,\n      rgba(30, 30, 60, 0.6) 100%);\n  border: 3px solid rgba(255, 255, 255, 0.2);\n  border-radius: 14px;\n  color: white;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  overflow: hidden;\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-glow {\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background:\n    radial-gradient(\n      circle,\n      rgba(255, 215, 0, 0.3) 0%,\n      transparent 70%);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-particles {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image:\n    radial-gradient(\n      1px 1px at 20% 30%,\n      rgba(255, 215, 0, 0.6),\n      transparent),\n    radial-gradient(\n      1px 1px at 80% 70%,\n      rgba(255, 215, 0, 0.6),\n      transparent),\n    radial-gradient(\n      1px 1px at 50% 50%,\n      rgba(255, 215, 0, 0.6),\n      transparent);\n  background-size: 100% 100%;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.epic-skills .epic-grid .epic-skill-btn.grade-\\d558\\c2b9  {\n  border-color: rgba(150, 150, 150, 0.5);\n}\n.epic-skills .epic-grid .epic-skill-btn.grade-\\c911\\c2b9  {\n  border-color: rgba(100, 200, 255, 0.5);\n  box-shadow: 0 0 15px rgba(100, 200, 255, 0.2);\n}\n.epic-skills .epic-grid .epic-skill-btn.grade-\\c0c1\\c2b9  {\n  border-color: rgba(138, 43, 226, 0.6);\n  box-shadow: 0 0 20px rgba(138, 43, 226, 0.3);\n}\n.epic-skills .epic-grid .epic-skill-btn.grade-\\c808\\d559  {\n  border-color: rgba(255, 215, 0, 0.8);\n  box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);\n  animation: epicSkillGlow 2s ease-in-out infinite;\n}\n.epic-skills .epic-grid .epic-skill-btn.grade-\\c808\\d559::before {\n  content: "";\n  position: absolute;\n  top: -2px;\n  left: -2px;\n  right: -2px;\n  bottom: -2px;\n  background:\n    linear-gradient(\n      45deg,\n      rgba(255, 215, 0, 0) 0%,\n      rgba(255, 215, 0, 0.5) 50%,\n      rgba(255, 215, 0, 0) 100%);\n  border-radius: 14px;\n  animation: borderFlow 3s linear infinite;\n}\n.epic-skills .epic-grid .epic-skill-btn:hover:not(:disabled) {\n  transform: translateY(-8px) scale(1.05);\n  box-shadow: 0 20px 50px rgba(255, 215, 0, 0.4);\n}\n.epic-skills .epic-grid .epic-skill-btn:hover:not(:disabled) .skill-glow {\n  opacity: 1;\n}\n.epic-skills .epic-grid .epic-skill-btn:hover:not(:disabled) .skill-particles {\n  opacity: 1;\n  animation: particleRise 2s ease-out infinite;\n}\n.epic-skills .epic-grid .epic-skill-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n  filter: grayscale(0.8);\n  transform: scale(0.95);\n}\n.epic-skills .epic-grid .epic-skill-btn:disabled::after {\n  content: "\\b0b4\\acf5  \\bd80\\c871";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: rgba(0, 0, 0, 0.9);\n  padding: 8px 16px;\n  border-radius: 8px;\n  font-size: 0.85rem;\n  color: #ff6464;\n  font-weight: 800;\n  white-space: nowrap;\n  box-shadow: 0 0 20px rgba(255, 100, 100, 0.5);\n  z-index: 10;\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-name {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n  position: relative;\n  z-index: 1;\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-name .skill-chinese {\n  font-size: 1.6rem;\n  font-weight: 800;\n  color: #ffd700;\n  text-shadow: 0 0 15px rgba(255, 215, 0, 0.6), 0 2px 4px rgba(0, 0, 0, 0.5);\n  letter-spacing: 2px;\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-name .skill-korean {\n  font-size: 0.95rem;\n  color: rgba(255, 255, 255, 0.9);\n  font-weight: 600;\n  letter-spacing: 1px;\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-info-row {\n  display: flex;\n  justify-content: space-around;\n  gap: 12px;\n  position: relative;\n  z-index: 1;\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-info-row .skill-cost {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  padding: 8px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(195, 20, 50, 0.4) 0%,\n      rgba(138, 43, 226, 0.4) 100%);\n  border-radius: 8px;\n  border: 2px solid rgba(195, 20, 50, 0.5);\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-info-row .skill-cost .cost-icon {\n  font-size: 1.1rem;\n  filter: drop-shadow(0 0 5px currentColor);\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-info-row .skill-cost .cost-value {\n  font-size: 1rem;\n  font-weight: 800;\n  color: #ff9999;\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-info-row .skill-damage {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  padding: 8px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.3) 0%,\n      rgba(255, 140, 0, 0.3) 100%);\n  border-radius: 8px;\n  border: 2px solid rgba(255, 215, 0, 0.5);\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-info-row .skill-damage .damage-icon {\n  font-size: 1.1rem;\n  filter: drop-shadow(0 0 5px currentColor);\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-info-row .skill-damage .damage-value {\n  font-size: 1rem;\n  font-weight: 800;\n  color: #ffd700;\n}\n.epic-skills .epic-grid .epic-skill-btn .skill-grade-label {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.8) 0%,\n      rgba(30, 30, 60, 0.8) 100%);\n  color: #ffd700;\n  font-size: 0.75rem;\n  font-weight: 800;\n  padding: 4px 10px;\n  border-radius: 6px;\n  border: 1px solid rgba(255, 215, 0, 0.5);\n  z-index: 1;\n}\n.epic-log {\n  position: relative;\n  z-index: 1;\n  margin: 20px 32px;\n  padding: 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.6) 0%,\n      rgba(30, 30, 60, 0.6) 100%);\n  border: 2px solid rgba(138, 43, 226, 0.3);\n  border-radius: 14px;\n  max-height: 300px;\n  overflow-y: auto;\n  box-shadow: inset 0 0 40px rgba(0, 0, 0, 0.5);\n}\n.epic-log .log-header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 2px solid rgba(138, 43, 226, 0.3);\n}\n.epic-log .log-header .log-icon {\n  font-size: 1.5rem;\n  filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5));\n}\n.epic-log .log-header .log-title {\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: #ffd700;\n  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);\n  letter-spacing: 2px;\n}\n.epic-log .log-entries {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.epic-log .log-entries .log-entry {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 8px;\n  border-left: 4px solid rgba(138, 43, 226, 0.5);\n  animation: logEntrySlide 0.3s ease-out;\n  transition: all 0.3s ease;\n}\n.epic-log .log-entries .log-entry:hover {\n  background: rgba(0, 0, 0, 0.5);\n  transform: translateX(5px);\n}\n.epic-log .log-entries .log-entry .log-number {\n  flex-shrink: 0;\n  width: 40px;\n  height: 40px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 800;\n  font-size: 0.9rem;\n  color: white;\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n}\n.epic-log .log-entries .log-entry .log-text {\n  flex: 1;\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  line-height: 1.5;\n}\n.epic-log .log-entries .log-entry.damage {\n  border-left-color: rgba(255, 100, 100, 0.8);\n}\n.epic-log .log-entries .log-entry.damage .log-number {\n  background:\n    linear-gradient(\n      135deg,\n      #ff6b6b 0%,\n      #c31432 100%);\n}\n.epic-log .log-entries .log-entry.damage .log-text {\n  color: #ff9999;\n}\n.epic-log .log-entries .log-entry.heal {\n  border-left-color: rgba(50, 205, 50, 0.8);\n}\n.epic-log .log-entries .log-entry.heal .log-number {\n  background:\n    linear-gradient(\n      135deg,\n      #32cd32 0%,\n      #228b22 100%);\n}\n.epic-log .log-entries .log-entry.heal .log-text {\n  color: #90ee90;\n}\n.epic-log .log-entries .log-entry.critical {\n  border-left-color: rgba(255, 215, 0, 0.8);\n  animation: criticalPulse 0.5s ease-out, logEntrySlide 0.3s ease-out;\n}\n.epic-log .log-entries .log-entry.critical .log-number {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff6b6b 100%);\n  animation: criticalShake 0.5s ease-out;\n}\n.epic-log .log-entries .log-entry.critical .log-text {\n  color: #ffd700;\n  font-weight: 700;\n}\n.epic-log .log-entries .log-entry.combo {\n  border-left-color: rgba(255, 140, 0, 0.8);\n}\n.epic-log .log-entries .log-entry.combo .log-number {\n  background:\n    linear-gradient(\n      135deg,\n      #ff8c00 0%,\n      #ff6347 100%);\n}\n.epic-log .log-entries .log-entry.combo .log-text {\n  color: #ffb347;\n  font-weight: 600;\n}\n.epic-log .log-entries .log-entry.special {\n  border-left-color: rgba(138, 43, 226, 0.8);\n}\n.epic-log .log-entries .log-entry.special .log-number {\n  background:\n    linear-gradient(\n      135deg,\n      #8a2be2 0%,\n      #4b0082 100%);\n}\n.epic-log .log-entries .log-entry.special .log-text {\n  color: #da70d6;\n}\n.epic-result {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n  animation: resultFadeIn 0.5s ease-out;\n}\n.epic-result .result-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n}\n.epic-result .result-content {\n  position: relative;\n  z-index: 1;\n  text-align: center;\n  padding: 60px 80px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 60, 0.95) 0%,\n      rgba(20, 20, 40, 0.95) 100%);\n  border-radius: 30px;\n  border: 4px solid rgba(255, 215, 0, 0.5);\n  box-shadow: 0 40px 100px rgba(0, 0, 0, 0.8), inset 0 0 60px rgba(255, 215, 0, 0.1);\n  animation: resultScale 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n.epic-result .result-content .result-icon {\n  font-size: 8rem;\n  animation: iconBounce 0.8s ease-out, iconSpin 2s ease-in-out infinite;\n  filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.8));\n  margin-bottom: 24px;\n}\n.epic-result .result-content .result-icon.defeat {\n  filter: drop-shadow(0 0 30px rgba(255, 100, 100, 0.8));\n}\n.epic-result .result-content .result-title {\n  font-size: 4rem;\n  font-weight: 900;\n  color: #ffd700;\n  margin: 0 0 16px 0;\n  text-shadow: 0 0 30px rgb(255, 215, 0), 0 0 60px rgba(255, 215, 0, 0.5);\n  letter-spacing: 8px;\n  animation: titleBounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n.epic-result .result-content .result-title.defeat-title {\n  color: #ff6464;\n  text-shadow: 0 0 30px rgb(255, 100, 100), 0 0 60px rgba(255, 100, 100, 0.5);\n}\n.epic-result .result-content .result-message {\n  font-size: 1.2rem;\n  color: rgba(255, 255, 255, 0.8);\n  margin: 0;\n  animation: messageFade 1s ease-in-out 0.5s both;\n}\n@keyframes particleFloat {\n  0%, 100% {\n    background-position:\n      0% 0%,\n      100% 100%,\n      50% 50%,\n      80% 20%;\n  }\n  50% {\n    background-position:\n      100% 100%,\n      0% 0%,\n      70% 70%,\n      20% 80%;\n  }\n}\n@keyframes glowPulse {\n  0%, 100% {\n    opacity: 0.3;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.6;\n    transform: scale(1.1);\n  }\n}\n@keyframes titlePulse {\n  0%, 100% {\n    text-shadow: 0 0 20px rgba(255, 215, 0, 0.6), 0 0 40px rgba(138, 43, 226, 0.4);\n  }\n  50% {\n    text-shadow: 0 0 30px rgb(255, 215, 0), 0 0 60px rgba(138, 43, 226, 0.6);\n  }\n}\n@keyframes iconSpin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n@keyframes turnGlow {\n  0%, 100% {\n    box-shadow: 0 0 20px currentColor;\n  }\n  50% {\n    box-shadow: 0 0 40px currentColor;\n  }\n}\n@keyframes shakeDamage {\n  0%, 100% {\n    transform: translateX(0) scale(1);\n  }\n  25% {\n    transform: translateX(-10px) scale(0.98);\n  }\n  75% {\n    transform: translateX(10px) scale(0.98);\n  }\n}\n@keyframes attackPulse {\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.1);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n@keyframes activeGlow {\n  0%, 100% {\n    box-shadow: 0 0 30px currentColor;\n  }\n  50% {\n    box-shadow: 0 0 60px currentColor;\n  }\n}\n@keyframes cardShine {\n  0% {\n    transform: translateX(-100%) translateY(-100%) rotate(45deg);\n  }\n  100% {\n    transform: translateX(100%) translateY(100%) rotate(45deg);\n  }\n}\n@keyframes ringRotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n@keyframes avatarFloat {\n  0%, 100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n@keyframes badgePulse {\n  0%, 100% {\n    transform: scale(1);\n    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);\n  }\n  50% {\n    transform: scale(1.1);\n    box-shadow: 0 6px 25px rgba(255, 215, 0, 0.6);\n  }\n}\n@keyframes barShine {\n  0% {\n    left: -100%;\n  }\n  100% {\n    left: 100%;\n  }\n}\n@keyframes hpWarning {\n  0%, 100% {\n    box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(255, 107, 107, 0.8);\n  }\n}\n@keyframes hpCritical {\n  0%, 100% {\n    box-shadow: 0 0 25px rgba(255, 0, 0, 0.8);\n  }\n  50% {\n    box-shadow: 0 0 50px rgb(255, 0, 0);\n  }\n}\n@keyframes vsRotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n@keyframes vsScale {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n}\n@keyframes lightningFlash {\n  0%, 100% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n}\n@keyframes particleRise {\n  0% {\n    background-position: 0% 0%;\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    background-position: 0% -100%;\n    opacity: 0;\n  }\n}\n@keyframes epicSkillGlow {\n  0%, 100% {\n    box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);\n  }\n}\n@keyframes borderFlow {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 200% 50%;\n  }\n}\n@keyframes decorationPulse {\n  0%, 100% {\n    opacity: 0.5;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(1.2);\n  }\n}\n@keyframes logEntrySlide {\n  from {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n@keyframes criticalPulse {\n  0%, 100% {\n    background: rgba(0, 0, 0, 0.3);\n  }\n  50% {\n    background: rgba(255, 215, 0, 0.2);\n  }\n}\n@keyframes criticalShake {\n  0%, 100% {\n    transform: rotate(0deg);\n  }\n  25% {\n    transform: rotate(-5deg);\n  }\n  75% {\n    transform: rotate(5deg);\n  }\n}\n@keyframes resultFadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes resultScale {\n  from {\n    transform: scale(0.5);\n    opacity: 0;\n  }\n  to {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n@keyframes iconBounce {\n  0% {\n    transform: translateY(-100px) scale(0);\n  }\n  60% {\n    transform: translateY(10px) scale(1.1);\n  }\n  80% {\n    transform: translateY(-5px) scale(0.95);\n  }\n  100% {\n    transform: translateY(0) scale(1);\n  }\n}\n@keyframes titleBounce {\n  0% {\n    transform: scale(0);\n  }\n  60% {\n    transform: scale(1.1);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n@keyframes messageFade {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n.epic-log-compact {\n  position: relative;\n  z-index: 1;\n  margin: 20px 32px;\n  padding: 16px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.5) 0%,\n      rgba(30, 30, 60, 0.5) 100%);\n  border: 2px solid rgba(138, 43, 226, 0.2);\n  border-radius: 14px;\n  min-height: 100px;\n  max-height: 120px;\n  overflow: hidden;\n  box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.4);\n}\n.epic-log-compact .log-stream {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  align-items: center;\n  justify-content: flex-start;\n}\n.epic-log-compact .log-stream .log-bubble {\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 12px;\n  background: rgba(0, 0, 0, 0.4);\n  border-radius: 20px;\n  border: 2px solid rgba(138, 43, 226, 0.4);\n  animation: bubblePop 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n  transition: all 0.3s ease;\n  cursor: pointer;\n}\n.epic-log-compact .log-stream .log-bubble:hover {\n  transform: scale(1.1);\n  z-index: 10;\n  box-shadow: 0 8px 25px rgba(138, 43, 226, 0.5);\n}\n.epic-log-compact .log-stream .log-bubble.player {\n  border-color: rgba(100, 200, 255, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(100, 200, 255, 0.15) 0%,\n      rgba(64, 156, 255, 0.15) 100%);\n}\n.epic-log-compact .log-stream .log-bubble.player:hover {\n  box-shadow: 0 8px 25px rgba(100, 200, 255, 0.5);\n}\n.epic-log-compact .log-stream .log-bubble.enemy {\n  border-color: rgba(255, 100, 100, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 100, 100, 0.15) 0%,\n      rgba(195, 20, 50, 0.15) 100%);\n}\n.epic-log-compact .log-stream .log-bubble.enemy:hover {\n  box-shadow: 0 8px 25px rgba(255, 100, 100, 0.5);\n}\n.epic-log-compact .log-stream .log-bubble.damage {\n  border-color: rgba(255, 100, 100, 0.6);\n  animation: damageBubble 0.5s ease-out;\n}\n.epic-log-compact .log-stream .log-bubble.heal {\n  border-color: rgba(50, 205, 50, 0.6);\n  animation: healBubble 0.5s ease-out;\n}\n.epic-log-compact .log-stream .log-bubble.critical {\n  border-color: rgba(255, 215, 0, 0.8);\n  border-width: 3px;\n  animation: criticalBubble 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n  box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);\n}\n.epic-log-compact .log-stream .log-bubble.critical .log-icon-main {\n  animation: criticalBounce 0.6s ease-out infinite;\n}\n.epic-log-compact .log-stream .log-bubble.combo {\n  border-color: rgba(255, 140, 0, 0.6);\n  animation: comboBubble 0.5s ease-out;\n}\n.epic-log-compact .log-stream .log-bubble.special {\n  border-color: rgba(138, 43, 226, 0.6);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(138, 43, 226, 0.2) 0%,\n      rgba(102, 126, 234, 0.2) 100%);\n  animation: specialBubble 0.7s ease-out;\n}\n.epic-log-compact .log-stream .log-bubble.special .log-icon-main {\n  animation: specialFloat 2s ease-in-out infinite;\n}\n.epic-log-compact .log-stream .log-bubble .log-icon-main {\n  font-size: 1.4rem;\n  filter: drop-shadow(0 0 8px currentColor);\n  flex-shrink: 0;\n  animation: iconPulse 2s ease-in-out infinite;\n}\n.epic-log-compact .log-stream .log-bubble .log-text-compact {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-weight: 700;\n  white-space: nowrap;\n}\n.epic-log-compact .log-stream .log-bubble .log-text-compact .log-value {\n  font-size: 1.1rem;\n  color: white;\n  font-weight: 900;\n  text-shadow: 0 0 10px currentColor, 0 2px 4px rgba(0, 0, 0, 0.5);\n}\n.epic-log-compact .log-stream .log-bubble .log-text-compact .log-label {\n  font-size: 0.75rem;\n  color: rgba(255, 255, 255, 0.8);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  font-weight: 800;\n}\n.epic-log-compact .log-stream .log-bubble.damage .log-value {\n  color: #ff6b6b;\n  text-shadow: 0 0 15px rgba(255, 107, 107, 0.8), 0 2px 4px rgba(0, 0, 0, 0.5);\n}\n.epic-log-compact .log-stream .log-bubble.heal .log-value {\n  color: #32cd32;\n  text-shadow: 0 0 15px rgba(50, 205, 50, 0.8), 0 2px 4px rgba(0, 0, 0, 0.5);\n}\n.epic-log-compact .log-stream .log-bubble.critical .log-value {\n  color: #ffd700;\n  font-size: 1.3rem;\n  text-shadow: 0 0 20px rgb(255, 215, 0), 0 2px 4px rgba(0, 0, 0, 0.5);\n  animation: criticalTextGlow 0.5s ease-in-out infinite;\n}\n.epic-log-compact .log-stream .log-bubble.combo .log-value {\n  color: #ff8c00;\n  text-shadow: 0 0 15px rgba(255, 140, 0, 0.8), 0 2px 4px rgba(0, 0, 0, 0.5);\n}\n@keyframes bubblePop {\n  0% {\n    transform: scale(0);\n    opacity: 0;\n  }\n  70% {\n    transform: scale(1.15);\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n@keyframes damageBubble {\n  0%, 100% {\n    transform: scale(1);\n  }\n  25% {\n    transform: scale(1.1) rotate(-3deg);\n  }\n  75% {\n    transform: scale(1.1) rotate(3deg);\n  }\n}\n@keyframes healBubble {\n  0% {\n    transform: scale(0.8) translateY(10px);\n    opacity: 0;\n  }\n  100% {\n    transform: scale(1) translateY(0);\n    opacity: 1;\n  }\n}\n@keyframes criticalBubble {\n  0% {\n    transform: scale(0.5) rotate(-10deg);\n    opacity: 0;\n  }\n  50% {\n    transform: scale(1.2) rotate(5deg);\n  }\n  100% {\n    transform: scale(1) rotate(0deg);\n    opacity: 1;\n  }\n}\n@keyframes comboBubble {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.15);\n  }\n}\n@keyframes specialBubble {\n  0% {\n    transform: scale(0) rotate(0deg);\n    opacity: 0;\n  }\n  100% {\n    transform: scale(1) rotate(360deg);\n    opacity: 1;\n  }\n}\n@keyframes iconPulse {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.1);\n  }\n}\n@keyframes criticalBounce {\n  0%, 100% {\n    transform: translateY(0) scale(1);\n  }\n  50% {\n    transform: translateY(-5px) scale(1.2);\n  }\n}\n@keyframes specialFloat {\n  0%, 100% {\n    transform: translateY(0) rotate(0deg);\n  }\n  50% {\n    transform: translateY(-3px) rotate(15deg);\n  }\n}\n@keyframes criticalTextGlow {\n  0%, 100% {\n    text-shadow: 0 0 20px rgb(255, 215, 0), 0 2px 4px rgba(0, 0, 0, 0.5);\n  }\n  50% {\n    text-shadow:\n      0 0 30px rgb(255, 215, 0),\n      0 0 50px rgba(255, 215, 0, 0.5),\n      0 2px 4px rgba(0, 0, 0, 0.5);\n  }\n}\n.text-only-log {\n  position: relative;\n  z-index: 1;\n  margin: 20px 32px;\n  padding: 16px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.7) 0%,\n      rgba(20, 20, 40, 0.7) 100%);\n  border: 2px solid rgba(138, 43, 226, 0.3);\n  border-radius: 12px;\n  min-height: 120px;\n  max-height: 180px;\n  overflow-y: auto;\n  box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.5), 0 4px 20px rgba(0, 0, 0, 0.3);\n}\n@media (max-width: 768px) {\n  .text-only-log {\n    margin: 16px 16px;\n    padding: 12px 16px;\n    min-height: 100px;\n    max-height: 150px;\n    border-radius: 10px;\n  }\n}\n@media (max-width: 480px) {\n  .text-only-log {\n    margin: 12px 12px;\n    padding: 10px 12px;\n    min-height: 80px;\n    max-height: 120px;\n  }\n}\n.text-only-log::-webkit-scrollbar {\n  width: 8px;\n}\n.text-only-log::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 4px;\n}\n.text-only-log::-webkit-scrollbar-thumb {\n  background: rgba(138, 43, 226, 0.5);\n  border-radius: 4px;\n}\n.text-only-log::-webkit-scrollbar-thumb:hover {\n  background: rgba(138, 43, 226, 0.7);\n}\n.text-only-log .log-lines {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n@media (max-width: 768px) {\n  .text-only-log .log-lines {\n    gap: 6px;\n  }\n}\n.text-only-log .log-lines .log-line {\n  padding: 10px 16px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  border-left: 3px solid rgba(138, 43, 226, 0.6);\n  color: var(--text-primary);\n  font-size: 0.95rem;\n  line-height: 1.5;\n  animation: textSlideIn 0.3s ease-out;\n  transition: all 0.2s ease;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n@media (max-width: 768px) {\n  .text-only-log .log-lines .log-line {\n    padding: 8px 12px;\n    font-size: 0.85rem;\n    line-height: 1.4;\n  }\n}\n@media (max-width: 480px) {\n  .text-only-log .log-lines .log-line {\n    padding: 6px 10px;\n    font-size: 0.8rem;\n  }\n}\n.text-only-log .log-lines .log-line:hover {\n  background: rgba(138, 43, 226, 0.08);\n  transform: translateX(5px);\n  border-left-color: rgb(138, 43, 226);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n}\n.text-only-log .log-lines .log-line.damage {\n  border-left-color: #ff6464;\n  background: rgba(255, 100, 100, 0.05);\n}\n.text-only-log .log-lines .log-line.damage:hover {\n  background: rgba(255, 100, 100, 0.12);\n  border-left-color: #ff4444;\n}\n.text-only-log .log-lines .log-line.heal {\n  border-left-color: #4ade80;\n  background: rgba(74, 222, 128, 0.05);\n}\n.text-only-log .log-lines .log-line.heal:hover {\n  background: rgba(74, 222, 128, 0.12);\n  border-left-color: #22c55e;\n}\n.text-only-log .log-lines .log-line.critical {\n  border-left-color: #ffd700;\n  border-left-width: 4px;\n  background: rgba(255, 215, 0, 0.08);\n  font-weight: 600;\n  box-shadow: 0 2px 8px rgba(255, 215, 0, 0.2);\n  animation: criticalTextPulse 0.5s ease-out, textSlideIn 0.3s ease-out;\n}\n.text-only-log .log-lines .log-line.critical:hover {\n  background: rgba(255, 215, 0, 0.15);\n  box-shadow: 0 3px 12px rgba(255, 215, 0, 0.35);\n  border-left-color: #ffa500;\n}\n.text-only-log .log-lines .log-line.combo {\n  border-left-color: #ff8c00;\n  background: rgba(255, 140, 0, 0.05);\n  font-weight: 500;\n}\n.text-only-log .log-lines .log-line.combo:hover {\n  background: rgba(255, 140, 0, 0.12);\n  border-left-color: #ff6600;\n}\n@keyframes textSlideIn {\n  from {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n@keyframes criticalTextPulse {\n  0% {\n    background: rgba(255, 215, 0, 0.05);\n    box-shadow: 0 0 15px rgba(255, 215, 0, 0.2);\n  }\n  50% {\n    background: rgba(255, 215, 0, 0.15);\n    box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);\n  }\n  100% {\n    background: rgba(255, 215, 0, 0.05);\n    box-shadow: 0 0 15px rgba(255, 215, 0, 0.2);\n  }\n}\n.battle-text-choices {\n  position: relative;\n  z-index: 1;\n  margin: 20px 32px;\n  padding: 20px 24px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.6) 0%,\n      rgba(20, 20, 40, 0.6) 100%);\n  border: 2px solid rgba(138, 43, 226, 0.3);\n  border-radius: 12px;\n  box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.4), 0 4px 20px rgba(0, 0, 0, 0.3);\n}\n.battle-text-choices .choice-item {\n  padding: 12px 20px;\n  margin-bottom: 10px;\n  background: rgba(0, 0, 0, 0.3);\n  border-left: 4px solid rgba(138, 43, 226, 0.6);\n  border-radius: 8px;\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.battle-text-choices .choice-item:last-child {\n  margin-bottom: 0;\n}\n.battle-text-choices .choice-item:hover:not(.disabled) {\n  background: rgba(138, 43, 226, 0.2);\n  border-left-color: rgb(138, 43, 226);\n  transform: translateX(8px);\n  color: white;\n  box-shadow: 0 4px 15px rgba(138, 43, 226, 0.3);\n}\n.battle-text-choices .choice-item:active:not(.disabled) {\n  transform: translateX(12px);\n  background: rgba(138, 43, 226, 0.3);\n}\n.battle-text-choices .choice-item.disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  color: rgba(255, 255, 255, 0.5);\n  border-left-color: rgba(100, 100, 100, 0.5);\n}\n.battle-text-choices .choice-item.disabled:hover {\n  transform: none;\n  background: rgba(0, 0, 0, 0.3);\n}\n.battle-text-choices .choice-item .choice-cost {\n  margin-left: auto;\n  font-size: 0.85rem;\n  color: rgba(255, 200, 100, 0.8);\n  font-weight: 500;\n}\n.battle-text-choices .choice-item .choice-grade {\n  padding: 2px 8px;\n  background: rgba(100, 200, 255, 0.2);\n  border: 1px solid rgba(100, 200, 255, 0.5);\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 700;\n  color: #64c8ff;\n}\n.battle-text-choices .choice-item .choice-grade.grade-\\c808\\d559  {\n  background: rgba(255, 215, 0, 0.2);\n  border-color: rgba(255, 215, 0, 0.8);\n  color: #ffd700;\n  box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);\n  animation: gradePulse 2s ease-in-out infinite;\n}\n.battle-text-choices .martial-skills-text {\n  margin-top: 16px;\n  padding-top: 16px;\n  border-top: 1px solid rgba(138, 43, 226, 0.3);\n}\n.battle-text-choices .martial-skills-text .choice-item {\n  border-left-color: rgba(255, 215, 0, 0.6);\n}\n.battle-text-choices .martial-skills-text .choice-item:hover:not(.disabled) {\n  border-left-color: rgb(255, 215, 0);\n  background: rgba(255, 215, 0, 0.15);\n  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);\n}\n@keyframes gradePulse {\n  0%, 100% {\n    box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);\n  }\n}\n@media (max-width: 768px) {\n  .battle-choices {\n    margin: 24px 0;\n  }\n}\n.battle-choices .choice-button:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  background: rgba(100, 100, 100, 0.3);\n}\n.battle-choices .choice-button:disabled:hover {\n  transform: none;\n  background: rgba(100, 100, 100, 0.3);\n}\n.battle-choices .choice-button .choice-cost {\n  margin-left: 8px;\n  font-size: 0.85rem;\n  color: rgba(255, 200, 100, 0.9);\n  font-weight: 500;\n}\n@media (max-width: 768px) {\n  .battle-choices .choice-button .choice-cost {\n    font-size: 0.8rem;\n    margin-left: 6px;\n  }\n}\n@media (max-width: 480px) {\n  .battle-choices .choice-button .choice-cost {\n    display: block;\n    margin-left: 0;\n    margin-top: 4px;\n    font-size: 0.75rem;\n  }\n}\n.battle-choices .choice-button .choice-grade {\n  margin-left: 8px;\n  padding: 2px 8px;\n  background: rgba(100, 200, 255, 0.3);\n  border: 1px solid rgba(100, 200, 255, 0.6);\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 700;\n  color: #64c8ff;\n}\n@media (max-width: 480px) {\n  .battle-choices .choice-button .choice-grade {\n    margin-left: 6px;\n    padding: 2px 6px;\n    font-size: 0.7rem;\n  }\n}\n.battle-choices .choice-button .choice-grade.grade-\\c808\\d559  {\n  background: rgba(255, 215, 0, 0.3);\n  border-color: rgba(255, 215, 0, 0.9);\n  color: #ffd700;\n  box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);\n  animation: gradeGlow 2s ease-in-out infinite;\n}\n.battle-choices .martial-skill-choice .choice-button {\n  border-left-color: rgba(255, 215, 0, 0.6);\n}\n.battle-choices .martial-skill-choice .choice-button:hover:not(:disabled) {\n  border-left-color: rgb(255, 215, 0);\n  background: rgba(255, 215, 0, 0.1);\n}\n@keyframes gradeGlow {\n  0%, 100% {\n    box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(255, 215, 0, 0.7);\n  }\n}\n.flat-battle {\n  margin: 30px 0;\n  padding: 0;\n  background: transparent;\n  border: none;\n  box-shadow: none;\n}\n.flat-battle .battle-container {\n  max-width: 800px;\n  margin: 0 auto;\n}\n.flat-battle .battle-title {\n  text-align: center;\n  margin-bottom: 30px;\n  padding-bottom: 20px;\n  border-bottom: 1px solid rgba(150, 150, 150, 0.3);\n}\n@media (max-width: 768px) {\n  .flat-battle .battle-title {\n    margin-bottom: 20px;\n    padding-bottom: 16px;\n  }\n}\n@media (max-width: 480px) {\n  .flat-battle .battle-title {\n    margin-bottom: 16px;\n    padding-bottom: 12px;\n  }\n}\n.flat-battle .battle-title h3 {\n  font-size: 1.4rem;\n  font-weight: 400;\n  color: rgba(0, 0, 0, 0.8);\n  margin: 0 0 10px 0;\n  letter-spacing: 8px;\n}\n@media (max-width: 768px) {\n  .flat-battle .battle-title h3 {\n    font-size: 1.2rem;\n    letter-spacing: 6px;\n  }\n}\n@media (max-width: 480px) {\n  .flat-battle .battle-title h3 {\n    font-size: 1.1rem;\n    letter-spacing: 4px;\n  }\n}\n.flat-battle .battle-title .turn-text {\n  font-size: 0.95rem;\n  color: rgba(100, 100, 100, 0.8);\n  font-style: italic;\n  margin: 0;\n}\n@media (max-width: 768px) {\n  .flat-battle .battle-title .turn-text {\n    font-size: 0.85rem;\n  }\n}\n@media (max-width: 480px) {\n  .flat-battle .battle-title .turn-text {\n    font-size: 0.8rem;\n  }\n}\n.flat-battle .battle-board {\n  display: grid;\n  grid-template-columns: 1fr auto 1fr;\n  gap: 30px;\n  align-items: start;\n}\n@media (max-width: 768px) {\n  .flat-battle .battle-board {\n    grid-template-columns: 1fr;\n    gap: 16px;\n  }\n  .flat-battle .battle-board .vs-divider {\n    order: 2;\n    padding: 12px 0;\n    font-size: 1.2rem;\n  }\n  .flat-battle .battle-board .player-side {\n    order: 1;\n  }\n  .flat-battle .battle-board .enemy-side {\n    order: 3;\n  }\n}\n.flat-battle .battle-board .combatant {\n  background: rgba(250, 250, 250, 0.8);\n  border: 1px solid rgba(200, 200, 200, 0.4);\n  border-radius: 4px;\n  padding: 20px;\n  transition: all 0.3s ease;\n}\n.flat-battle .battle-board .combatant.active-turn {\n  border-color: rgba(100, 100, 100, 0.6);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n@media (max-width: 768px) {\n  .flat-battle .battle-board .combatant {\n    padding: 16px;\n  }\n}\n@media (max-width: 480px) {\n  .flat-battle .battle-board .combatant {\n    padding: 12px;\n  }\n}\n.flat-battle .battle-board .combatant .combatant-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid rgba(200, 200, 200, 0.3);\n}\n.flat-battle .battle-board .combatant .combatant-header h4 {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: rgba(0, 0, 0, 0.85);\n  margin: 0;\n}\n.flat-battle .battle-board .combatant .combatant-header .level-tag {\n  font-size: 0.75rem;\n  color: rgba(100, 100, 100, 0.7);\n  padding: 2px 8px;\n  background: rgba(200, 200, 200, 0.3);\n  border-radius: 3px;\n}\n@media (max-width: 768px) {\n  .flat-battle .battle-board .combatant .combatant-header {\n    margin-bottom: 12px;\n    padding-bottom: 10px;\n  }\n  .flat-battle .battle-board .combatant .combatant-header h4 {\n    font-size: 1rem;\n  }\n  .flat-battle .battle-board .combatant .combatant-header .level-tag {\n    font-size: 0.7rem;\n    padding: 2px 6px;\n  }\n}\n.flat-battle .battle-board .combatant .stats-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n@media (max-width: 768px) {\n  .flat-battle .battle-board .combatant .stats-list {\n    gap: 10px;\n  }\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row.compact {\n  margin-top: 8px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(200, 200, 200, 0.2);\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-label {\n  font-size: 0.85rem;\n  color: rgba(100, 100, 100, 0.8);\n  min-width: 40px;\n  font-weight: 500;\n}\n@media (max-width: 768px) {\n  .flat-battle .battle-board .combatant .stats-list .stat-row .stat-label {\n    font-size: 0.8rem;\n    min-width: 36px;\n  }\n}\n@media (max-width: 480px) {\n  .flat-battle .battle-board .combatant .stats-list .stat-row .stat-label {\n    font-size: 0.75rem;\n    min-width: 32px;\n  }\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n@media (max-width: 768px) {\n  .flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper {\n    gap: 8px;\n  }\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-bar {\n  flex: 1;\n  height: 8px;\n  background: rgba(220, 220, 220, 0.6);\n  border-radius: 4px;\n  overflow: hidden;\n}\n@media (max-width: 768px) {\n  .flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-bar {\n    height: 10px;\n  }\n}\n@media (max-width: 480px) {\n  .flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-bar {\n    height: 12px;\n  }\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-bar .stat-bar-fill {\n  height: 100%;\n  transition: width 0.3s ease;\n  border-radius: 4px;\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-bar .stat-bar-fill.hp {\n  background: #e57373;\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-bar .stat-bar-fill.hp.low {\n  background: #ef5350;\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-bar .stat-bar-fill.enemy-hp {\n  background: #ba68c8;\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-bar .stat-bar-fill.enemy-hp.low {\n  background: #ab47bc;\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-bar .stat-bar-fill.mp {\n  background: #64b5f6;\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-bar .stat-bar-fill.internal {\n  background: #ffb74d;\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-value {\n  font-size: 0.8rem;\n  color: rgba(100, 100, 100, 0.8);\n  min-width: 60px;\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-value-inline {\n  font-size: 0.85rem;\n  color: rgba(50, 50, 50, 0.9);\n  font-weight: 600;\n  font-variant-numeric: tabular-nums;\n}\n.flat-battle .battle-board .combatant .stats-list .stat-row .stat-separator {\n  color: rgba(150, 150, 150, 0.5);\n  margin: 0 6px;\n}\n.flat-battle .battle-board .vs-divider {\n  font-size: 0.9rem;\n  font-weight: 300;\n  color: rgba(150, 150, 150, 0.6);\n  text-align: center;\n  padding-top: 50px;\n  letter-spacing: 2px;\n}\n.dark-theme .story-blocks .story-block {\n  background: #1e232d;\n  border-color: #3a3a3a;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n.dark-theme .story-blocks .story-block p {\n  color: #e8e8e8;\n}\n.dark-theme .story-blocks .story-block.choice-result {\n  background: #282d37;\n  border-color: var(--accent-primary);\n}\n.dark-theme .flat-battle .battle-title {\n  border-bottom-color: rgba(100, 100, 100, 0.3);\n}\n.dark-theme .flat-battle .battle-title h3 {\n  color: rgba(255, 255, 255, 0.9);\n}\n.dark-theme .flat-battle .battle-title .turn-text {\n  color: rgba(200, 200, 200, 0.7);\n}\n.dark-theme .flat-battle .battle-board .combatant {\n  background: rgba(30, 30, 30, 0.8);\n  border-color: rgba(100, 100, 100, 0.4);\n}\n.dark-theme .flat-battle .battle-board .combatant.active-turn {\n  border-color: rgba(150, 150, 150, 0.6);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n.dark-theme .flat-battle .battle-board .combatant .combatant-header {\n  border-bottom-color: rgba(100, 100, 100, 0.3);\n}\n.dark-theme .flat-battle .battle-board .combatant .combatant-header h4 {\n  color: rgba(255, 255, 255, 0.9);\n}\n.dark-theme .flat-battle .battle-board .combatant .combatant-header .level-tag {\n  background: rgba(100, 100, 100, 0.3);\n  color: rgba(200, 200, 200, 0.7);\n}\n.dark-theme .flat-battle .battle-board .combatant .stats-list .stat-row.compact {\n  border-top-color: rgba(100, 100, 100, 0.2);\n}\n.dark-theme .flat-battle .battle-board .combatant .stats-list .stat-row .stat-label {\n  color: rgba(200, 200, 200, 0.7);\n}\n.dark-theme .flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-bar {\n  background: rgba(60, 60, 60, 0.6);\n}\n.dark-theme .flat-battle .battle-board .combatant .stats-list .stat-row .stat-bar-wrapper .stat-value {\n  color: rgba(200, 200, 200, 0.7);\n}\n.dark-theme .flat-battle .battle-board .combatant .stats-list .stat-row .stat-value-inline {\n  color: rgba(220, 220, 220, 0.9);\n}\n.dark-theme .flat-battle .battle-board .combatant .stats-list .stat-row .stat-separator {\n  color: rgba(100, 100, 100, 0.5);\n}\n.dark-theme .flat-battle .battle-board .vs-divider {\n  color: rgba(150, 150, 150, 0.5);\n}\n.feature-map-floating-btn {\n  position: fixed;\n  bottom: 20px;\n  right: 96px;\n  z-index: 100000 !important;\n}\n.feature-map-floating-btn .feature-map-toggle {\n  width: 56px;\n  height: 56px;\n  background:\n    linear-gradient(\n      135deg,\n      #f093fb 0%,\n      #f5576c 100%);\n  border: none;\n  border-radius: 16px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 16px rgba(245, 87, 108, 0.4), 0 2px 8px rgba(0, 0, 0, 0.1);\n  color: white;\n  gap: 2px;\n  padding: 8px;\n}\n.feature-map-floating-btn .feature-map-toggle:hover {\n  transform: translateY(-2px) scale(1.05);\n  box-shadow: 0 8px 24px rgba(245, 87, 108, 0.5), 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n.feature-map-floating-btn .feature-map-toggle:active {\n  transform: translateY(0) scale(0.98);\n}\n.feature-map-floating-btn .feature-map-toggle.active {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.6), 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.feature-map-floating-btn .feature-map-toggle.active svg {\n  animation: pulse 2s ease-in-out infinite;\n}\n.feature-map-floating-btn .feature-map-toggle svg {\n  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n}\n.feature-map-floating-btn .feature-map-toggle .btn-label {\n  font-size: 10px;\n  font-weight: 700;\n  letter-spacing: -0.3px;\n  margin-top: 2px;\n}\n.feature-map-panel {\n  position: fixed;\n  bottom: 90px;\n  right: 20px;\n  width: 420px;\n  max-height: 600px;\n  background: var(--bg-primary);\n  -webkit-backdrop-filter: blur(20px);\n  backdrop-filter: blur(20px);\n  border-radius: 20px;\n  border: 1px solid var(--border-color);\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\n  z-index: 100000 !important;\n  overflow: hidden;\n  animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  flex-direction: column;\n}\n.feature-map-panel .feature-map-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px 16px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(240, 147, 251, 0.1) 0%,\n      rgba(245, 87, 108, 0.1) 100%);\n  border-bottom: 1px solid var(--border-color);\n  flex-shrink: 0;\n}\n.feature-map-panel .feature-map-header h3 {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.feature-map-panel .feature-map-header .close-btn {\n  width: 32px;\n  height: 32px;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  color: var(--text-primary);\n  font-size: 24px;\n  line-height: 1;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.feature-map-panel .feature-map-header .close-btn:hover {\n  background: rgba(239, 68, 68, 0.2);\n  border-color: rgba(239, 68, 68, 0.4);\n  color: #ef4444;\n  transform: scale(1.1);\n}\n.feature-map-panel .feature-map-tabs {\n  flex: 1;\n  overflow: hidden;\n}\n.feature-map-panel .feature-map-tabs ::ng-deep .mat-mdc-tab-labels {\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n}\n.feature-map-panel .feature-map-tabs ::ng-deep .mat-mdc-tab {\n  min-width: 120px;\n}\n.feature-map-panel .feature-map-tabs ::ng-deep .mat-mdc-tab .mdc-tab__content {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.feature-map-panel .feature-map-tabs ::ng-deep .mat-mdc-tab .tab-icon {\n  font-size: 18px;\n  transition: transform 0.2s ease;\n}\n.feature-map-panel .feature-map-tabs ::ng-deep .mat-mdc-tab .tab-label {\n  font-weight: 600;\n  font-size: 14px;\n}\n.feature-map-panel .feature-map-tabs ::ng-deep .mat-mdc-tab:hover .tab-icon {\n  transform: scale(1.1);\n}\n.feature-map-panel .feature-map-tabs ::ng-deep .mat-mdc-tab.mdc-tab--active .tab-icon {\n  animation: bounce 0.5s ease;\n}\n.feature-map-panel .feature-map-tabs ::ng-deep .mat-mdc-tab-header {\n  border-bottom: none;\n}\n.feature-map-panel .feature-map-tabs ::ng-deep .mdc-tab-indicator__content--underline {\n  border-color: var(--accent-color);\n  border-width: 3px;\n}\n.feature-map-panel .feature-map-tabs ::ng-deep .mat-mdc-tab-body-wrapper {\n  flex: 1;\n  overflow: hidden;\n}\n.feature-map-panel .feature-map-tabs ::ng-deep .mat-mdc-tab-body-content {\n  overflow-y: visible;\n  height: 100%;\n}\n.feature-map-panel .feature-map-content {\n  padding: 20px;\n  max-height: 100%;\n  overflow-y: auto;\n}\n.feature-map-panel .feature-map-content::-webkit-scrollbar {\n  width: 8px;\n}\n.feature-map-panel .feature-map-content::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n  border-radius: 4px;\n}\n.feature-map-panel .feature-map-content::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 4px;\n}\n.feature-map-panel .feature-map-content::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-color);\n}\n.feature-map-panel .feature-section {\n  margin-bottom: 24px;\n}\n.feature-map-panel .feature-section:last-child {\n  margin-bottom: 0;\n}\n.feature-map-panel .feature-section h4 {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid var(--border-color);\n}\n.feature-map-panel .feature-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 10px;\n}\n.feature-map-panel .feature-item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 12px 14px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.feature-map-panel .feature-item:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--accent-color);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.feature-map-panel .feature-item .feature-icon {\n  font-size: 20px;\n  flex-shrink: 0;\n}\n.feature-map-panel .feature-item .feature-name {\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-primary);\n  line-height: 1.3;\n}\n.feature-map-panel .minimap-content {\n  padding: 16px;\n  height: 100%;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.feature-map-panel .minimap-content::-webkit-scrollbar {\n  width: 6px;\n}\n.feature-map-panel .minimap-content::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n  border-radius: 3px;\n}\n.feature-map-panel .minimap-content::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.feature-map-panel .minimap-content::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-color);\n}\n.feature-map-panel .minimap-info {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.1) 0%,\n      rgba(118, 75, 162, 0.1) 100%);\n  padding: 16px;\n  border-radius: 12px;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n}\n.feature-map-panel .minimap-info p {\n  margin: 0 0 12px 0;\n  font-size: 13px;\n  color: var(--text-primary);\n  font-weight: 600;\n}\n.feature-map-panel .minimap-info .minimap-stats {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.feature-map-panel .minimap-info .minimap-stats .stat-badge {\n  padding: 6px 12px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-primary);\n  white-space: nowrap;\n}\n.feature-map-panel .minimap-canvas {\n  flex: 1;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n  padding: 16px;\n  min-height: 300px;\n  overflow-y: auto;\n}\n.feature-map-panel .minimap-canvas::-webkit-scrollbar {\n  width: 6px;\n}\n.feature-map-panel .minimap-canvas::-webkit-scrollbar-track {\n  background: var(--bg-tertiary);\n  border-radius: 3px;\n}\n.feature-map-panel .minimap-canvas::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.feature-map-panel .flow-nodes-mini {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini {\n  display: flex;\n  align-items: flex-start;\n  gap: 10px;\n  padding: 10px;\n  background: var(--bg-tertiary);\n  border: 1px solid var(--border-color);\n  border-radius: 10px;\n  transition: all 0.2s ease;\n  position: relative;\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini:hover {\n  border-color: var(--accent-color);\n  background: var(--bg-primary);\n  transform: translateX(2px);\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini.node-start {\n  border-color: rgba(34, 197, 94, 0.5);\n  background: rgba(34, 197, 94, 0.05);\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini.node-story {\n  border-color: rgba(59, 130, 246, 0.5);\n  background: rgba(59, 130, 246, 0.05);\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini.node-choice {\n  border-color: rgba(168, 85, 247, 0.5);\n  background: rgba(168, 85, 247, 0.05);\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini.node-current {\n  border-color: rgba(245, 87, 108, 0.7);\n  background: rgba(245, 87, 108, 0.1);\n  box-shadow: 0 0 20px rgba(245, 87, 108, 0.2);\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini.node-current .node-icon-mini {\n  animation: pulse 2s ease-in-out infinite;\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini .node-icon-mini {\n  font-size: 16px;\n  flex-shrink: 0;\n  width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini .node-content-mini {\n  flex: 1;\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini .node-content-mini .node-label-mini {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n  line-height: 1.4;\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini .node-content-mini .node-choices-mini {\n  margin-top: 8px;\n  padding-top: 8px;\n  border-top: 1px solid var(--border-color);\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini .node-content-mini .node-choices-mini .choice-preview-mini {\n  font-size: 11px;\n  color: var(--text-secondary);\n  padding: 4px 0;\n  line-height: 1.3;\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini .node-content-mini .node-choices-mini .more-choices {\n  font-size: 10px;\n  color: var(--accent-color);\n  font-weight: 700;\n  margin-top: 4px;\n}\n.feature-map-panel .flow-nodes-mini .flow-node-mini .flow-connector-mini {\n  position: absolute;\n  left: 18px;\n  top: 100%;\n  width: 2px;\n  height: 8px;\n  background: var(--border-color);\n}\n.feature-map-panel .empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40px 20px;\n  text-align: center;\n}\n.feature-map-panel .empty-state .empty-icon {\n  font-size: 48px;\n  margin-bottom: 16px;\n  opacity: 0.5;\n}\n.feature-map-panel .empty-state p {\n  margin: 0 0 8px 0;\n  color: var(--text-primary);\n  font-weight: 600;\n  font-size: 14px;\n}\n.feature-map-panel .empty-state p.hint {\n  font-size: 12px;\n  color: var(--text-secondary);\n  font-weight: 400;\n}\n.feature-map-panel .minimap-legend {\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n  flex-wrap: wrap;\n  padding: 12px;\n  background: var(--bg-secondary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n}\n.feature-map-panel .minimap-legend .legend-item-mini {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n.feature-map-panel .minimap-legend .legend-item-mini .legend-icon-mini {\n  font-size: 14px;\n  width: 22px;\n  height: 22px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-tertiary);\n  border-radius: 6px;\n  border: 1px solid var(--border-color);\n}\n.feature-map-panel .minimap-legend .legend-item-mini .legend-icon-mini.start {\n  border-color: rgba(34, 197, 94, 0.5);\n  background: rgba(34, 197, 94, 0.1);\n}\n.feature-map-panel .minimap-legend .legend-item-mini .legend-icon-mini.story {\n  border-color: rgba(59, 130, 246, 0.5);\n  background: rgba(59, 130, 246, 0.1);\n}\n.feature-map-panel .minimap-legend .legend-item-mini .legend-icon-mini.choice {\n  border-color: rgba(168, 85, 247, 0.5);\n  background: rgba(168, 85, 247, 0.1);\n}\n.feature-map-panel .minimap-legend .legend-item-mini .legend-icon-mini.current {\n  border-color: rgba(245, 87, 108, 0.5);\n  background: rgba(245, 87, 108, 0.1);\n}\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n@keyframes bounce {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n}\n@media (max-width: 768px) {\n  .feature-map-floating-btn {\n    bottom: 16px;\n    right: 88px;\n  }\n  .feature-map-floating-btn .feature-map-toggle {\n    width: 52px;\n    height: 52px;\n  }\n  .feature-map-panel {\n    bottom: 80px;\n    right: 16px;\n    left: 16px;\n    width: auto;\n    max-height: 70vh;\n  }\n  .feature-map-panel .feature-grid {\n    grid-template-columns: 1fr;\n  }\n  .inventory-panel.mobile .equipment-slots-section {\n    padding: 16px;\n    overflow: visible;\n  }\n  .inventory-panel.mobile .equipment-slots-section .section-title {\n    font-size: 18px;\n    margin-bottom: 20px;\n  }\n  .inventory-panel.mobile .diablo-equipment-layout {\n    gap: 8px;\n    padding: 0;\n  }\n  .inventory-panel.mobile .diablo-equipment-layout .equipment-column {\n    gap: 8px;\n  }\n  .inventory-panel.mobile .diablo-equipment-layout .equipment-rings-row {\n    gap: 8px;\n  }\n  .inventory-panel.mobile .inventory-grid-cells {\n    grid-template-columns: repeat(4, 1fr) !important;\n    gap: 6px;\n  }\n  .inventory-panel.mobile .inventory-grid-cells .inventory-cell {\n    min-height: 70px;\n    padding: 6px;\n    position: relative;\n  }\n  .inventory-panel.mobile .inventory-grid-cells .inventory-cell .cell-icon {\n    font-size: 22px;\n  }\n  .inventory-panel.mobile .inventory-grid-cells .inventory-cell .cell-name {\n    font-size: 10px;\n  }\n  .inventory-panel.mobile .inventory-grid-cells .inventory-cell .quick-equip-btn {\n    position: absolute;\n    top: 2px;\n    right: 2px;\n    width: 24px;\n    height: 24px;\n    background: rgba(16, 185, 129, 0.9);\n    border: 1px solid rgb(16, 185, 129);\n    border-radius: 6px;\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    z-index: 10;\n    padding: 0;\n  }\n  .inventory-panel.mobile .inventory-grid-cells .inventory-cell .quick-equip-btn:active {\n    transform: scale(0.9);\n    background: rgb(16, 185, 129);\n  }\n  .inventory-panel.mobile .inventory-grid-cells .inventory-cell .quick-equip-btn:hover {\n    background: rgb(16, 185, 129);\n    box-shadow: 0 0 8px rgba(16, 185, 129, 0.6);\n  }\n  .inventory-panel.mobile .equipment-slot-diablo {\n    min-width: 80px;\n    min-height: 80px;\n    touch-action: manipulation;\n  }\n  .inventory-panel.mobile .equipment-slot-diablo .slot-icon {\n    font-size: 24px;\n  }\n  .inventory-panel.mobile .equipment-slot-diablo .slot-empty-text {\n    font-size: 11px;\n  }\n  .inventory-panel.mobile .equipment-slot-diablo .btn-unequip-small {\n    width: 28px;\n    height: 28px;\n    font-size: 18px;\n  }\n  .inventory-panel.mobile .inventory-tabs .tab-btn {\n    padding: 14px 12px;\n    font-size: 14px;\n    min-height: 48px;\n  }\n  .inventory-panel.mobile .inventory-controls {\n    flex-direction: column;\n    gap: 12px;\n  }\n  .inventory-panel.mobile .inventory-controls .filter-buttons {\n    flex-wrap: wrap;\n    gap: 8px;\n  }\n  .inventory-panel.mobile .inventory-controls .filter-buttons button {\n    padding: 10px 14px;\n    font-size: 13px;\n    min-height: 44px;\n  }\n  .inventory-panel.mobile .inventory-controls .sort-controls {\n    width: 100%;\n  }\n  .inventory-panel.mobile .inventory-controls .sort-controls select {\n    padding: 10px;\n    font-size: 14px;\n  }\n  .inventory-panel.mobile .inventory-controls .sort-controls .btn-auto-sort {\n    padding: 10px 14px;\n    min-height: 44px;\n  }\n}\n.character-info-content {\n  padding: 20px;\n  overflow-y: auto;\n  height: 100%;\n}\n.character-info-content::-webkit-scrollbar {\n  width: 6px;\n}\n.character-info-content::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n  border-radius: 3px;\n}\n.character-info-content::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.character-info-content::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-color);\n}\n.character-detail {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n.character-header {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n  padding: 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(102, 126, 234, 0.1) 0%,\n      rgba(118, 75, 162, 0.1) 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(102, 126, 234, 0.2);\n}\n.character-header .character-avatar {\n  position: relative;\n}\n.character-header .character-avatar .avatar-circle {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);\n}\n.character-header .character-avatar .avatar-circle .avatar-initial {\n  font-size: 32px;\n  font-weight: 700;\n  color: white;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n.character-header .character-avatar .level-badge {\n  position: absolute;\n  bottom: -6px;\n  right: -6px;\n  background:\n    linear-gradient(\n      135deg,\n      #f093fb 0%,\n      #f5576c 100%);\n  color: white;\n  padding: 4px 10px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 700;\n  box-shadow: 0 2px 8px rgba(245, 87, 108, 0.4);\n}\n.character-header .character-basic-info {\n  flex: 1;\n}\n.character-header .character-basic-info .character-name {\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.character-header .character-basic-info .exp-bar-container .exp-bar {\n  height: 8px;\n  background: var(--bg-secondary);\n  border-radius: 4px;\n  overflow: hidden;\n  margin-bottom: 6px;\n  border: 1px solid var(--border-color);\n}\n.character-header .character-basic-info .exp-bar-container .exp-bar .exp-bar-fill {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea 0%,\n      #764ba2 100%);\n  transition: width 0.3s ease;\n}\n.character-header .character-basic-info .exp-bar-container .exp-text {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n.character-status-bars {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.character-status-bars .status-bar-item .status-bar-label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 6px;\n}\n.character-status-bars .status-bar-item .status-bar-label .status-icon {\n  font-size: 16px;\n}\n.character-status-bars .status-bar-item .status-bar-label .status-name {\n  font-weight: 700;\n  color: var(--text-primary);\n  font-size: 14px;\n}\n.character-status-bars .status-bar-item .status-bar-label .status-value {\n  margin-left: auto;\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n.character-status-bars .status-bar-item .status-bar {\n  height: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 6px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n}\n.character-status-bars .status-bar-item .status-bar .status-bar-fill {\n  height: 100%;\n  transition: width 0.3s ease;\n}\n.character-status-bars .status-bar-item .status-bar.hp-bar .status-bar-fill {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444 0%,\n      #dc2626 100%);\n}\n.character-status-bars .status-bar-item .status-bar.mp-bar .status-bar-fill {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.character-stats {\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.character-stats .section-title {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 16px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.character-stats .stats-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n}\n.character-stats .stats-grid .stat-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n.character-stats .stats-grid .stat-item:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: var(--accent-color);\n}\n.character-stats .stats-grid .stat-item .stat-icon {\n  font-size: 24px;\n}\n.character-stats .stats-grid .stat-item .stat-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n.character-stats .stats-grid .stat-item .stat-info .stat-name {\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.character-stats .stats-grid .stat-item .stat-info .stat-value {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n.character-stats .stats-grid .stat-item .stat-info .stat-value.highlight {\n  color: var(--accent-color);\n}\n.character-skills {\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.character-skills .section-title {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 16px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.character-skills .skills-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.character-skills .skills-list .skill-item {\n  padding: 14px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n  position: relative;\n}\n.character-skills .skills-list .skill-item:hover {\n  transform: translateX(4px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: var(--accent-color);\n}\n.character-skills .skills-list .skill-item .skill-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n.character-skills .skills-list .skill-item .skill-header .skill-name {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n.character-skills .skills-list .skill-item .skill-header .skill-level {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--accent-color);\n  background: rgba(102, 126, 234, 0.1);\n  padding: 2px 8px;\n  border-radius: 6px;\n}\n.character-skills .skills-list .skill-item .skill-description {\n  margin: 0 0 10px 0;\n  font-size: 12px;\n  color: var(--text-secondary);\n  line-height: 1.5;\n}\n.character-skills .skills-list .skill-item .skill-type-badge {\n  display: inline-block;\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 600;\n}\n.character-skills .skills-list .skill-item .skill-type-badge.type-combat {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n  border: 1px solid rgba(239, 68, 68, 0.2);\n}\n.character-skills .skills-list .skill-item .skill-type-badge.type-magic {\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n  border: 1px solid rgba(59, 130, 246, 0.2);\n}\n.character-skills .skills-list .skill-item .skill-type-badge.type-passive {\n  background: rgba(34, 197, 94, 0.1);\n  color: #22c55e;\n  border: 1px solid rgba(34, 197, 94, 0.2);\n}\n.empty-character-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n  min-height: 400px;\n}\n.empty-character-state .empty-icon {\n  font-size: 64px;\n  margin-bottom: 20px;\n  opacity: 0.3;\n}\n.empty-character-state h3 {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.empty-character-state p {\n  margin: 0 0 8px 0;\n  color: var(--text-secondary);\n  font-size: 14px;\n}\n.empty-character-state p.hint {\n  font-size: 12px;\n  color: var(--text-tertiary);\n  font-weight: 400;\n}\n@media (max-width: 480px) {\n  .feature-map-floating-btn {\n    right: 80px;\n  }\n  .feature-map-floating-btn .feature-map-toggle {\n    width: 48px;\n    height: 48px;\n  }\n  .feature-map-floating-btn .feature-map-toggle .btn-label {\n    font-size: 9px;\n  }\n  .feature-map-panel .feature-map-header {\n    padding: 16px 18px;\n  }\n  .feature-map-panel .feature-map-header h3 {\n    font-size: 16px;\n  }\n  .feature-map-panel .feature-map-content {\n    padding: 16px;\n  }\n  .feature-map-panel .feature-section h4 {\n    font-size: 13px;\n  }\n  .feature-map-panel .feature-item {\n    padding: 10px 12px;\n  }\n  .feature-map-panel .feature-item .feature-icon {\n    font-size: 18px;\n  }\n  .feature-map-panel .feature-item .feature-name {\n    font-size: 12px;\n  }\n  .character-header {\n    flex-direction: column;\n    text-align: center;\n  }\n  .character-header .character-basic-info .character-name {\n    font-size: 20px;\n  }\n  .character-stats .stats-grid {\n    grid-template-columns: 1fr;\n  }\n  .organization-resources .resources-grid {\n    grid-template-columns: 1fr;\n  }\n  .organization-facilities .facilities-grid {\n    grid-template-columns: 1fr;\n  }\n  .inventory-panel.mobile .equipment-slots-section {\n    padding: 12px;\n    overflow: visible;\n  }\n  .inventory-panel.mobile .equipment-slots-section .section-title {\n    font-size: 16px;\n    margin-bottom: 16px;\n  }\n  .inventory-panel.mobile .diablo-equipment-layout {\n    padding: 0;\n    gap: 6px;\n  }\n  .inventory-panel.mobile .diablo-equipment-layout .equipment-column {\n    gap: 6px;\n  }\n  .inventory-panel.mobile .diablo-equipment-layout .equipment-rings-row {\n    gap: 6px;\n  }\n  .inventory-panel.mobile .inventory-grid-cells {\n    grid-template-columns: repeat(3, 1fr) !important;\n    gap: 4px;\n  }\n  .inventory-panel.mobile .inventory-grid-cells .inventory-cell {\n    min-height: 65px;\n    padding: 4px;\n  }\n  .inventory-panel.mobile .inventory-grid-cells .inventory-cell .cell-icon {\n    font-size: 20px;\n  }\n  .inventory-panel.mobile .inventory-grid-cells .inventory-cell .cell-name {\n    font-size: 9px;\n  }\n  .inventory-panel.mobile .inventory-grid-cells .inventory-cell .quick-equip-btn {\n    width: 22px;\n    height: 22px;\n    font-size: 12px;\n  }\n  .inventory-panel.mobile .equipment-slot-diablo {\n    min-width: 75px;\n    min-height: 75px;\n  }\n  .inventory-panel.mobile .equipment-slot-diablo .slot-icon {\n    font-size: 26px;\n  }\n  .inventory-panel.mobile .equipment-slot-diablo .slot-empty-text {\n    font-size: 10px;\n  }\n  .inventory-panel.mobile .inventory-tabs .tab-btn {\n    padding: 12px 8px;\n    font-size: 13px;\n  }\n  .inventory-panel.mobile .inventory-controls .filter-buttons button {\n    padding: 8px 10px;\n    font-size: 12px;\n  }\n}\n.organization-info-content {\n  padding: 20px;\n  overflow-y: auto;\n  height: 100%;\n}\n.organization-info-content::-webkit-scrollbar {\n  width: 6px;\n}\n.organization-info-content::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n  border-radius: 3px;\n}\n.organization-info-content::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.organization-info-content::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-color);\n}\n.organization-detail {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n.organization-header {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n  padding: 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(245, 158, 11, 0.1) 0%,\n      rgba(217, 119, 6, 0.1) 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(245, 158, 11, 0.2);\n}\n.organization-header .org-icon-wrapper {\n  position: relative;\n}\n.organization-header .org-icon-wrapper .org-icon {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b 0%,\n      #d97706 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 16px rgba(245, 158, 11, 0.4);\n  font-size: 40px;\n}\n.organization-header .org-icon-wrapper .org-level-badge {\n  position: absolute;\n  bottom: -6px;\n  right: -6px;\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6 0%,\n      #7c3aed 100%);\n  color: white;\n  padding: 4px 10px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 700;\n  box-shadow: 0 2px 8px rgba(139, 92, 246, 0.4);\n}\n.organization-header .org-basic-info {\n  flex: 1;\n}\n.organization-header .org-basic-info .org-name {\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 8px 0;\n}\n.organization-header .org-basic-info .org-type-badge {\n  display: inline-block;\n  padding: 4px 12px;\n  border-radius: 8px;\n  font-size: 12px;\n  font-weight: 700;\n  margin-bottom: 12px;\n}\n.organization-header .org-basic-info .org-type-badge.type-guild {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n  border: 1px solid rgba(239, 68, 68, 0.2);\n}\n.organization-header .org-basic-info .org-type-badge.type-faction {\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n  border: 1px solid rgba(59, 130, 246, 0.2);\n}\n.organization-header .org-basic-info .org-type-badge.type-clan {\n  background: rgba(34, 197, 94, 0.1);\n  color: #22c55e;\n  border: 1px solid rgba(34, 197, 94, 0.2);\n}\n.organization-header .org-basic-info .org-type-badge.type-sect {\n  background: rgba(139, 92, 246, 0.1);\n  color: #8b5cf6;\n  border: 1px solid rgba(139, 92, 246, 0.2);\n}\n.organization-header .org-basic-info .org-type-badge.type-company {\n  background: rgba(245, 158, 11, 0.1);\n  color: #f59e0b;\n  border: 1px solid rgba(245, 158, 11, 0.2);\n}\n.organization-header .org-basic-info .reputation-bar-container .reputation-label {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 6px;\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n.organization-header .org-basic-info .reputation-bar-container .reputation-label .rep-value {\n  color: var(--accent-color);\n}\n.organization-header .org-basic-info .reputation-bar-container .reputation-bar {\n  height: 8px;\n  background: var(--bg-secondary);\n  border-radius: 4px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n}\n.organization-header .org-basic-info .reputation-bar-container .reputation-bar .reputation-bar-fill {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #f59e0b 0%,\n      #d97706 100%);\n  transition: width 0.3s ease;\n}\n.organization-resources {\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.organization-resources .section-title {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 16px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.organization-resources .resources-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 12px;\n}\n.organization-resources .resources-grid .resource-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n.organization-resources .resources-grid .resource-item:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: var(--accent-color);\n}\n.organization-resources .resources-grid .resource-item .resource-icon {\n  font-size: 24px;\n}\n.organization-resources .resources-grid .resource-item .resource-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n.organization-resources .resources-grid .resource-item .resource-info .resource-name {\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n}\n.organization-resources .resources-grid .resource-item .resource-info .resource-value {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n.organization-members {\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.organization-members .members-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.organization-members .members-header .section-title {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.organization-members .members-header .member-count {\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--accent-color);\n  background: rgba(102, 126, 234, 0.1);\n  padding: 4px 12px;\n  border-radius: 8px;\n}\n.organization-members .members-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  max-height: 400px;\n  overflow-y: auto;\n}\n.organization-members .members-list::-webkit-scrollbar {\n  width: 6px;\n}\n.organization-members .members-list::-webkit-scrollbar-track {\n  background: var(--bg-tertiary);\n  border-radius: 3px;\n}\n.organization-members .members-list::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 3px;\n}\n.organization-members .members-list::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-color);\n}\n.organization-members .members-list .member-card {\n  padding: 14px;\n  background: var(--bg-tertiary);\n  border-radius: 12px;\n  border: 2px solid var(--border-color);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.organization-members .members-list .member-card:hover {\n  transform: translateX(4px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: var(--accent-color);\n}\n.organization-members .members-list .member-card.selected {\n  border-color: var(--accent-color);\n  background: rgba(102, 126, 234, 0.05);\n  box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);\n}\n.organization-members .members-list .member-card .member-header-row {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n.organization-members .members-list .member-card .member-header-row .member-avatar {\n  position: relative;\n}\n.organization-members .members-list .member-card .member-header-row .member-avatar .avatar-emoji {\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n  background: var(--bg-secondary);\n  border-radius: 50%;\n  border: 2px solid var(--border-color);\n}\n.organization-members .members-list .member-card .member-header-row .member-avatar .member-level-badge {\n  position: absolute;\n  bottom: -4px;\n  right: -4px;\n  background: var(--accent-color);\n  color: white;\n  padding: 2px 6px;\n  border-radius: 8px;\n  font-size: 10px;\n  font-weight: 700;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n.organization-members .members-list .member-card .member-header-row .member-basic {\n  flex: 1;\n}\n.organization-members .members-list .member-card .member-header-row .member-basic .member-name {\n  font-size: 15px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n}\n.organization-members .members-list .member-card .member-header-row .member-basic .member-role {\n  display: inline-block;\n  padding: 2px 8px;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 600;\n}\n.organization-members .members-list .member-card .member-header-row .member-basic .member-role.role-leader {\n  background: rgba(245, 158, 11, 0.2);\n  color: #f59e0b;\n}\n.organization-members .members-list .member-card .member-header-row .member-basic .member-role.role-vice_leader {\n  background: rgba(245, 158, 11, 0.15);\n  color: #f59e0b;\n}\n.organization-members .members-list .member-card .member-header-row .member-basic .member-role.role-elder {\n  background: rgba(139, 92, 246, 0.2);\n  color: #8b5cf6;\n}\n.organization-members .members-list .member-card .member-header-row .member-basic .member-role.role-captain {\n  background: rgba(59, 130, 246, 0.2);\n  color: #3b82f6;\n}\n.organization-members .members-list .member-card .member-header-row .member-basic .member-role.role-member {\n  background: rgba(34, 197, 94, 0.2);\n  color: #22c55e;\n}\n.organization-members .members-list .member-card .member-header-row .member-basic .member-role.role-recruit {\n  background: rgba(156, 163, 175, 0.2);\n  color: #9ca3af;\n}\n.organization-members .members-list .member-card .member-header-row .member-status-indicator {\n  width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  font-size: 14px;\n}\n.organization-members .members-list .member-card .member-header-row .member-status-indicator.status-active {\n  background: rgba(34, 197, 94, 0.2);\n  color: #22c55e;\n}\n.organization-members .members-list .member-card .member-header-row .member-status-indicator.status-resting {\n  background: rgba(156, 163, 175, 0.2);\n  color: #9ca3af;\n}\n.organization-members .members-list .member-card .member-header-row .member-status-indicator.status-injured {\n  background: rgba(239, 68, 68, 0.2);\n  color: #ef4444;\n}\n.organization-members .members-list .member-card .member-header-row .member-status-indicator.status-on_mission {\n  background: rgba(59, 130, 246, 0.2);\n  color: #3b82f6;\n}\n.organization-members .members-list .member-card .member-stats-mini {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 10px;\n}\n.organization-members .members-list .member-card .member-stats-mini .stat-mini {\n  flex: 1;\n}\n.organization-members .members-list .member-card .member-stats-mini .stat-mini .stat-label {\n  font-size: 10px;\n  font-weight: 600;\n  color: var(--text-secondary);\n  margin-bottom: 4px;\n  display: block;\n}\n.organization-members .members-list .member-card .member-stats-mini .stat-mini .stat-bar-mini {\n  height: 6px;\n  background: var(--bg-secondary);\n  border-radius: 3px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n}\n.organization-members .members-list .member-card .member-stats-mini .stat-mini .stat-bar-mini .stat-bar-fill-mini {\n  height: 100%;\n  transition: width 0.3s ease;\n}\n.organization-members .members-list .member-card .member-stats-mini .stat-mini .stat-bar-mini .stat-bar-fill-mini.hp {\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444 0%,\n      #dc2626 100%);\n}\n.organization-members .members-list .member-card .member-stats-mini .stat-mini .stat-bar-mini .stat-bar-fill-mini.mp {\n  background:\n    linear-gradient(\n      90deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.organization-members .members-list .member-card .member-specialty {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 10px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  font-size: 12px;\n  margin-bottom: 8px;\n}\n.organization-members .members-list .member-card .member-specialty .specialty-icon {\n  font-size: 14px;\n}\n.organization-members .members-list .member-card .member-specialty .specialty-text {\n  flex: 1;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.organization-members .members-list .member-card .member-specialty .loyalty-badge {\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--accent-color);\n  background: rgba(102, 126, 234, 0.1);\n  padding: 2px 8px;\n  border-radius: 6px;\n}\n.organization-members .members-list .member-card .member-internal-power {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 6px 10px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(239, 68, 68, 0.1) 0%,\n      rgba(220, 38, 38, 0.1) 100%);\n  border-radius: 8px;\n  border: 1px solid rgba(239, 68, 68, 0.2);\n}\n.organization-members .members-list .member-card .member-internal-power .power-icon {\n  font-size: 14px;\n}\n.organization-members .members-list .member-card .member-internal-power .power-realm {\n  font-size: 11px;\n  font-weight: 700;\n  color: #ef4444;\n  white-space: nowrap;\n}\n.organization-members .members-list .member-card .member-internal-power .power-bar-mini {\n  flex: 1;\n  height: 6px;\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  overflow: hidden;\n}\n.organization-members .members-list .member-card .member-internal-power .power-bar-mini .power-bar-fill {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444 0%,\n      #dc2626 100%);\n  transition: width 0.3s ease;\n}\n.organization-facilities {\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.organization-facilities .section-title {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 16px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.organization-facilities .facilities-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 10px;\n}\n.organization-facilities .facilities-grid .facility-item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 12px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n.organization-facilities .facilities-grid .facility-item:hover {\n  transform: translateX(4px);\n  border-color: var(--accent-color);\n}\n.organization-facilities .facilities-grid .facility-item .facility-icon {\n  font-size: 20px;\n}\n.organization-facilities .facilities-grid .facility-item .facility-name {\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.organization-territory {\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.organization-territory .section-title {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.organization-territory .territory-info {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 14px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  border: 1px solid var(--border-color);\n}\n.organization-territory .territory-info .territory-icon {\n  font-size: 24px;\n}\n.organization-territory .territory-info .territory-name {\n  font-size: 15px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.empty-organization-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n  min-height: 400px;\n}\n.empty-organization-state .empty-icon {\n  font-size: 64px;\n  margin-bottom: 20px;\n  opacity: 0.3;\n}\n.empty-organization-state h3 {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.empty-organization-state p {\n  margin: 0 0 8px 0;\n  color: var(--text-secondary);\n  font-size: 14px;\n}\n.empty-organization-state p.hint {\n  font-size: 12px;\n  color: var(--text-tertiary);\n  font-weight: 400;\n}\n.equipment-content {\n  padding: 12px;\n  height: 100%;\n  overflow-y: visible;\n}\n.equipment-content .section-title {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n.equipped-items {\n  margin-bottom: 20px;\n}\n.equipped-items.diablo-style {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  padding: 16px;\n  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.5);\n}\n.equipped-items .equipment-grid-diablo {\n  display: grid;\n  grid-template-columns: 1fr auto 1fr;\n  gap: 10px;\n  margin-bottom: 16px;\n  min-height: auto;\n  max-height: 350px;\n}\n.equipped-items .equipment-grid-diablo .equipment-column {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.equipped-items .equipment-grid-diablo .equipment-column.center-column {\n  justify-content: center;\n  align-items: center;\n}\n.equipped-items .equipment-slot-diablo {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 10px;\n  padding: 8px;\n  min-width: 90px;\n  min-height: 70px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  cursor: pointer;\n}\n.equipped-items .equipment-slot-diablo::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background:\n    radial-gradient(\n      circle at 30% 30%,\n      var(--bg-highlight),\n      transparent);\n  pointer-events: none;\n}\n@media (max-width: 768px) {\n  .equipped-items .equipment-slot-diablo {\n    min-width: 100px;\n    min-height: 90px;\n    padding: 12px;\n  }\n  .equipped-items .equipment-slot-diablo.large {\n    min-width: 130px;\n    min-height: 140px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items .equipment-slot-diablo {\n    min-width: 80px;\n    min-height: 80px;\n    padding: 10px;\n  }\n  .equipped-items .equipment-slot-diablo .slot-icon {\n    font-size: 28px !important;\n  }\n  .equipped-items .equipment-slot-diablo .slot-empty-text {\n    font-size: 11px;\n  }\n}\n.equipped-items .equipment-slot-diablo.large {\n  min-width: 120px;\n  min-height: 130px;\n}\n.equipped-items .equipment-slot-diablo[data-rarity=normal] {\n  border-color: #8a8a8a;\n}\n.equipped-items .equipment-slot-diablo[data-rarity=magic] {\n  border-color: #6363f7;\n  box-shadow: 0 0 10px rgba(99, 99, 247, 0.3);\n}\n.equipped-items .equipment-slot-diablo[data-rarity=rare] {\n  border-color: #ffff00;\n  box-shadow: 0 0 10px rgba(255, 255, 0, 0.3);\n}\n.equipped-items .equipment-slot-diablo[data-rarity=unique] {\n  border-color: #a57c3e;\n  box-shadow: 0 0 10px rgba(165, 124, 62, 0.4);\n}\n.equipped-items .equipment-slot-diablo[data-rarity=set] {\n  border-color: #00ff00;\n  box-shadow: 0 0 15px rgba(0, 255, 0, 0.3);\n}\n.equipped-items .equipment-slot-diablo[data-rarity=legendary] {\n  border-color: #ff8000;\n  box-shadow: 0 0 20px rgba(255, 128, 0, 0.5);\n  animation: legendary-pulse 2s ease-in-out infinite;\n}\n.equipped-items .equipment-slot-diablo:hover {\n  transform: scale(1.05);\n  z-index: 10;\n}\n.equipped-items .equipment-slot-diablo .slot-label {\n  font-size: 9px;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-bottom: 4px;\n  text-align: center;\n  font-weight: 600;\n}\n.equipped-items .equipment-slot-diablo .slot-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n}\n.equipped-items .equipment-slot-diablo .slot-content.empty {\n  opacity: 0.3;\n}\n.equipped-items .equipment-slot-diablo .slot-content .item-icon-diablo {\n  font-size: 24px;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);\n}\n.equipped-items .equipment-slot-diablo .slot-content .item-icon-diablo.large {\n  font-size: 36px;\n}\n.equipped-items .equipment-slot-diablo .slot-content .empty-icon-diablo {\n  font-size: 24px;\n  opacity: 0.2;\n}\n.equipped-items .equipment-slot-diablo .slot-content .empty-icon-diablo.large {\n  font-size: 36px;\n}\n.equipped-items .equipment-slot-diablo .slot-content .item-name-short {\n  font-size: 10px;\n  color: var(--text-primary);\n  text-align: center;\n  font-weight: 500;\n  line-height: 1.2;\n  max-width: 80px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n.equipped-items .equipment-slot-diablo .slot-content .item-damage {\n  font-size: 11px;\n  color: #ff6b6b;\n  font-weight: 700;\n  text-shadow: 0 0 8px rgba(255, 107, 107, 0.5);\n}\n.equipped-items .equipment-summary-diablo {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 10px;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.equipped-items .equipment-summary-diablo .summary-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px;\n  background: var(--bg-primary);\n  border-radius: 6px;\n  border: 1px solid var(--border-color);\n  transition: all 0.3s ease;\n}\n.equipped-items .equipment-summary-diablo .summary-item:hover {\n  background: var(--bg-highlight);\n  transform: translateX(2px);\n}\n.equipped-items .equipment-summary-diablo .summary-item .summary-icon {\n  font-size: 18px;\n  margin-right: 8px;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));\n}\n.equipped-items .equipment-summary-diablo .summary-item .summary-label {\n  font-size: 13px;\n  color: var(--text-secondary);\n  font-weight: 600;\n  flex: 1;\n}\n.equipped-items .equipment-summary-diablo .summary-item .summary-value {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  text-shadow: 0 0 10px currentColor;\n  min-width: 40px;\n  text-align: right;\n}\n.equipped-items .equipment-summary-diablo .summary-item .summary-value.damage {\n  color: #ff6b6b;\n}\n.equipped-items .equipment-summary-diablo .summary-item .summary-value.defense {\n  color: #6363f7;\n}\n.equipped-items .equipment-summary-diablo .summary-item .summary-value.magic {\n  color: #a78bfa;\n}\n.equipped-items .equipment-summary-diablo .summary-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 6px 0;\n  border-bottom: 1px solid var(--border-color);\n}\n.equipped-items .equipment-summary-diablo .summary-row:last-child {\n  border-bottom: none;\n}\n.equipped-items .equipment-summary-diablo .summary-row .summary-label {\n  font-size: 12px;\n  color: var(--text-secondary);\n  font-weight: 600;\n}\n.equipped-items .equipment-summary-diablo .summary-row .summary-value {\n  font-size: 15px;\n  font-weight: 700;\n  text-shadow: 0 0 10px currentColor;\n}\n.equipped-items .equipment-summary-diablo .summary-row .summary-value.damage {\n  color: #ff6b6b;\n}\n.equipped-items .equipment-summary-diablo .summary-row .summary-value.defense {\n  color: #6363f7;\n}\n.equipped-items .equipment-summary-diablo .summary-row .summary-value.magic {\n  color: #a78bfa;\n}\n@keyframes legendary-pulse {\n  0%, 100% {\n    box-shadow: 0 0 20px rgba(255, 128, 0, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(255, 128, 0, 0.8);\n  }\n}\n.equipped-items .equipment-slots {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  margin-bottom: 20px;\n}\n@media (max-width: 768px) {\n  .equipped-items .equipment-slots {\n    gap: 14px;\n    margin-bottom: 16px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items .equipment-slots {\n    gap: 16px;\n    margin-bottom: 20px;\n  }\n}\n.equipped-items .equipment-slot {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  padding: 16px;\n  transition: all 0.3s ease;\n}\n@media (max-width: 768px) {\n  .equipped-items .equipment-slot {\n    padding: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items .equipment-slot {\n    padding: 16px;\n    min-height: 88px;\n  }\n}\n.equipped-items .equipment-slot:hover {\n  border-color: var(--accent-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px var(--shadow);\n}\n.equipped-items .equipment-slot .slot-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .equipped-items .equipment-slot .slot-header {\n    gap: 10px;\n    margin-bottom: 10px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items .equipment-slot .slot-header {\n    gap: 12px;\n    margin-bottom: 12px;\n    padding-bottom: 10px;\n  }\n}\n.equipped-items .equipment-slot .slot-header .slot-icon {\n  font-size: 20px;\n}\n@media (max-width: 768px) {\n  .equipped-items .equipment-slot .slot-header .slot-icon {\n    font-size: 22px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items .equipment-slot .slot-header .slot-icon {\n    font-size: 24px;\n  }\n}\n.equipped-items .equipment-slot .slot-header .slot-name {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n@media (max-width: 768px) {\n  .equipped-items .equipment-slot .slot-header .slot-name {\n    font-size: 15px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items .equipment-slot .slot-header .slot-name {\n    font-size: 16px;\n  }\n}\n.equipped-items .equipment-slot .slot-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n@media (max-width: 768px) {\n  .equipped-items .equipment-slot .slot-item {\n    gap: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items .equipment-slot .slot-item {\n    gap: 16px;\n  }\n}\n.equipped-items .equipment-slot .slot-item .item-icon {\n  font-size: 32px;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n}\n@media (max-width: 768px) {\n  .equipped-items .equipment-slot .slot-item .item-icon {\n    font-size: 36px;\n    width: 52px;\n    height: 52px;\n  }\n}\n@media (max-width: 480px) {\n  .equipped-items .equipment-slot .slot-item .item-icon {\n    font-size: 40px;\n    width: 56px;\n    height: 56px;\n  }\n}\n.equipped-items .equipment-slot .slot-item .item-info {\n  flex: 1;\n}\n.equipped-items .equipment-slot .slot-item .item-info .item-name {\n  font-size: 15px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 6px;\n}\n.equipped-items .equipment-slot .slot-item .item-info .item-stats {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.equipped-items .equipment-slot .slot-item .item-info .item-stats .stat-badge {\n  padding: 4px 8px;\n  border-radius: 6px;\n  font-size: 12px;\n  font-weight: 500;\n}\n.equipped-items .equipment-slot .slot-item .item-info .item-stats .stat-badge.attack {\n  background:\n    linear-gradient(\n      135deg,\n      #ff6b6b,\n      #ee5a52);\n  color: white;\n}\n.equipped-items .equipment-slot .slot-item .item-info .item-stats .stat-badge.defense {\n  background:\n    linear-gradient(\n      135deg,\n      #4dabf7,\n      #3b8cd2);\n  color: white;\n}\n.equipped-items .equipment-slot .slot-item .item-info .item-stats .stat-badge.special {\n  background:\n    linear-gradient(\n      135deg,\n      #a78bfa,\n      #8b5cf6);\n  color: white;\n}\n.equipped-items .equipment-slot .slot-item .item-info .item-stats .item-rarity {\n  padding: 4px 8px;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 600;\n}\n.equipped-items .equipment-slot .slot-item .item-info .item-stats .item-rarity.rarity-common {\n  background: #e9ecef;\n  color: #495057;\n}\n.equipped-items .equipment-slot .slot-item .item-info .item-stats .item-rarity.rarity-uncommon {\n  background: #51cf66;\n  color: white;\n}\n.equipped-items .equipment-slot .slot-item .item-info .item-stats .item-rarity.rarity-rare {\n  background: #339af0;\n  color: white;\n}\n.equipped-items .equipment-slot .slot-item .item-info .item-stats .item-rarity.rarity-epic {\n  background: #9775fa;\n  color: white;\n}\n.equipped-items .equipment-slot .slot-item .item-info .item-stats .item-rarity.rarity-legendary {\n  background:\n    linear-gradient(\n      135deg,\n      #ff8c00,\n      #ffa500);\n  color: white;\n}\n.equipped-items .equipment-slot .slot-empty {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  border: 2px dashed var(--border-color);\n}\n.equipped-items .equipment-slot .slot-empty .empty-icon {\n  font-size: 20px;\n  opacity: 0.5;\n}\n.equipped-items .equipment-slot .slot-empty .empty-text {\n  font-size: 13px;\n  color: var(--text-tertiary);\n}\n.equipped-items .equipment-summary {\n  background:\n    linear-gradient(\n      135deg,\n      var(--accent-primary),\n      var(--accent-secondary));\n  border-radius: 12px;\n  padding: 16px;\n  margin-top: 20px;\n}\n.equipped-items .equipment-summary h5 {\n  font-size: 14px;\n  font-weight: 700;\n  color: white;\n  margin: 0 0 12px 0;\n}\n.equipped-items .equipment-summary .summary-stats {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 12px;\n}\n.equipped-items .equipment-summary .summary-stats .summary-stat {\n  background: rgba(255, 255, 255, 0.15);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  border-radius: 8px;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n}\n.equipped-items .equipment-summary .summary-stats .summary-stat .stat-icon {\n  font-size: 20px;\n}\n.equipped-items .equipment-summary .summary-stats .summary-stat .stat-label {\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.8);\n  font-weight: 500;\n}\n.equipped-items .equipment-summary .summary-stats .summary-stat .stat-value {\n  font-size: 16px;\n  font-weight: 700;\n  color: white;\n}\n.inventory-section {\n  margin-top: 24px;\n}\n.inventory-section .inventory-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.inventory-section .inventory-header .section-title {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.inventory-section .inventory-header button {\n  font-size: 13px;\n  padding: 0 16px;\n  height: 36px;\n}\n.inventory-section .inventory-header button mat-icon {\n  font-size: 20px;\n  width: 20px;\n  height: 20px;\n  margin-right: 6px;\n}\n.inventory-section .inventory-filter-buttons {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-bottom: 16px;\n  padding: 14px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n.inventory-section .inventory-filter-buttons button {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 18px;\n  border-radius: 10px;\n  background: var(--bg-primary);\n  border: 2px solid var(--border-color);\n  color: var(--text-secondary);\n  font-size: 14px;\n  font-weight: 600;\n  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  min-width: auto;\n  position: relative;\n  overflow: hidden;\n}\n.inventory-section .inventory-filter-buttons button::before {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.1);\n  transform: translate(-50%, -50%);\n  transition: width 0.4s, height 0.4s;\n}\n.inventory-section .inventory-filter-buttons button .filter-icon {\n  font-size: 22px;\n  transition: all 0.3s ease;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));\n}\n.inventory-section .inventory-filter-buttons button mat-icon {\n  font-size: 22px;\n  width: 22px;\n  height: 22px;\n  transition: all 0.3s ease;\n}\n.inventory-section .inventory-filter-buttons button span {\n  position: relative;\n  z-index: 1;\n}\n.inventory-section .inventory-filter-buttons button:hover {\n  background: var(--bg-hover);\n  border-color: var(--primary-color);\n  transform: translateY(-3px) scale(1.05);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n.inventory-section .inventory-filter-buttons button:hover::before {\n  width: 200%;\n  height: 200%;\n}\n.inventory-section .inventory-filter-buttons button:hover .filter-icon {\n  transform: scale(1.15) rotate(5deg);\n  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));\n}\n.inventory-section .inventory-filter-buttons button:hover mat-icon {\n  transform: scale(1.15);\n}\n.inventory-section .inventory-filter-buttons button.active {\n  background: var(--primary-color);\n  border-color: var(--primary-color);\n  color: white;\n  box-shadow: 0 4px 16px rgba(var(--primary-rgb), 0.4);\n  transform: translateY(-2px);\n}\n.inventory-section .inventory-filter-buttons button.active .filter-icon {\n  animation: filter-active-bounce 0.6s ease-in-out;\n  filter: drop-shadow(0 4px 8px rgba(255, 255, 255, 0.3));\n}\n.inventory-section .inventory-filter-buttons button.active mat-icon {\n  animation: filter-active-bounce 0.6s ease-in-out;\n}\n@keyframes filter-active-bounce {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n}\n.inventory-section .inventory-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n  gap: 16px;\n  padding: 8px;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger {\n  all: unset;\n  display: block;\n  width: 100%;\n  cursor: pointer;\n  position: relative;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger .item-card-content {\n  background: var(--bg-primary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 20px 16px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  min-height: 160px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger .item-card-content::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: var(--gradient-primary);\n  transform: scaleX(0);\n  transition: transform 0.3s ease;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger[data-rarity=common] .item-card-content {\n  border-color: #9e9e9e;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger[data-rarity=common] .item-card-content::before {\n  background:\n    linear-gradient(\n      90deg,\n      #9e9e9e 0%,\n      #757575 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger[data-rarity=uncommon] .item-card-content {\n  border-color: #51cf66;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(81, 207, 102, 0.05) 0%,\n      rgba(46, 125, 50, 0.05) 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger[data-rarity=uncommon] .item-card-content::before {\n  background:\n    linear-gradient(\n      90deg,\n      #51cf66 0%,\n      #2e7d32 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger[data-rarity=rare] .item-card-content {\n  border-color: #339af0;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(51, 154, 240, 0.08) 0%,\n      rgba(25, 118, 210, 0.08) 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger[data-rarity=rare] .item-card-content::before {\n  background:\n    linear-gradient(\n      90deg,\n      #339af0 0%,\n      #1976d2 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger[data-rarity=epic] .item-card-content {\n  border-color: #9775fa;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(151, 117, 250, 0.1) 0%,\n      rgba(123, 31, 162, 0.1) 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger[data-rarity=epic] .item-card-content::before {\n  background:\n    linear-gradient(\n      90deg,\n      #9775fa 0%,\n      #7b1fa2 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger[data-rarity=legendary] .item-card-content {\n  border-color: #ff8000;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 128, 0, 0.12) 0%,\n      rgba(230, 81, 0, 0.12) 100%);\n  animation: legendary-border-glow 2s ease-in-out infinite;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger[data-rarity=legendary] .item-card-content::before {\n  background:\n    linear-gradient(\n      90deg,\n      #ff8000 0%,\n      #e65100 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger:hover .item-card-content {\n  transform: translateY(-6px);\n  box-shadow: 0 8px 24px var(--shadow);\n  border-color: var(--accent-primary);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger:hover .item-card-content::before {\n  transform: scaleX(1);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-weapon .item-card-content {\n  border-left: 6px solid #ff6b6b !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 107, 107, 0.08) 0%,\n      transparent 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-weapon .item-card-content .item-card-icon {\n  filter: drop-shadow(0 0 8px rgba(255, 107, 107, 0.5));\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-weapon .item-card-content .item-card-type {\n  color: #ff6b6b;\n  font-weight: 800;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-weapon .item-card-content .item-card-slot .slot-label {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 107, 107, 0.3),\n      rgba(255, 107, 107, 0.15));\n  border-color: #ff6b6b;\n  color: #ff6b6b;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-armor .item-card-content {\n  border-left: 6px solid #4dabf7 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(77, 171, 247, 0.08) 0%,\n      transparent 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-armor .item-card-content .item-card-icon {\n  filter: drop-shadow(0 0 8px rgba(77, 171, 247, 0.5));\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-armor .item-card-content .item-card-type {\n  color: #4dabf7;\n  font-weight: 800;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-armor .item-card-content .item-card-slot .slot-label {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(77, 171, 247, 0.3),\n      rgba(77, 171, 247, 0.15));\n  border-color: #4dabf7;\n  color: #4dabf7;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-accessory .item-card-content {\n  border-left: 6px solid #cc5de8 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(204, 93, 232, 0.08) 0%,\n      transparent 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-accessory .item-card-content .item-card-icon {\n  filter: drop-shadow(0 0 8px rgba(204, 93, 232, 0.5));\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-accessory .item-card-content .item-card-type {\n  color: #cc5de8;\n  font-weight: 800;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-accessory .item-card-content .item-card-slot .slot-label {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(204, 93, 232, 0.3),\n      rgba(204, 93, 232, 0.15));\n  border-color: #cc5de8;\n  color: #cc5de8;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-consumable .item-card-content {\n  border-left: 6px solid #51cf66 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(81, 207, 102, 0.08) 0%,\n      transparent 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-consumable .item-card-content .item-card-icon {\n  filter: drop-shadow(0 0 8px rgba(81, 207, 102, 0.5));\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-consumable .item-card-content .item-card-type {\n  color: #51cf66;\n  font-weight: 800;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-consumable .item-card-content .item-card-slot .slot-label {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(81, 207, 102, 0.3),\n      rgba(81, 207, 102, 0.15));\n  border-color: #51cf66;\n  color: #51cf66;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-material .item-card-content {\n  border-left: 6px solid #ffd43b !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 212, 59, 0.08) 0%,\n      transparent 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-material .item-card-content .item-card-icon {\n  filter: drop-shadow(0 0 8px rgba(255, 212, 59, 0.5));\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-material .item-card-content .item-card-type {\n  color: #ffd43b;\n  font-weight: 800;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger.item-type-material .item-card-content .item-card-slot .slot-label {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 212, 59, 0.3),\n      rgba(255, 212, 59, 0.15));\n  border-color: #ffd43b;\n  color: #ffd43b;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger .delete-item-btn {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  width: 26px;\n  height: 26px;\n  padding: 0;\n  min-width: 26px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  background: rgba(244, 67, 54, 0.9);\n  border-radius: 50%;\n  z-index: 10;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger .delete-item-btn:hover {\n  background: rgb(244, 67, 54);\n  transform: scale(1.1);\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger .delete-item-btn mat-icon {\n  font-size: 16px;\n  width: 16px;\n  height: 16px;\n  line-height: 16px;\n  color: white;\n}\n.inventory-section .inventory-grid .inventory-item .item-card-trigger:hover .delete-item-btn {\n  opacity: 1;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-weapon .item-card-content {\n  border-left: 6px solid #ff6b6b !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 107, 107, 0.12) 0%,\n      transparent 100%) !important;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-weapon .item-card-content .item-card-icon {\n  filter: drop-shadow(0 0 12px rgba(255, 107, 107, 0.8)) drop-shadow(0 4px 8px rgba(255, 107, 107, 0.4));\n  animation: weapon-pulse 2s ease-in-out infinite;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-weapon .item-card-content .item-card-icon span {\n  background:\n    linear-gradient(\n      135deg,\n      #ff6b6b 0%,\n      #ff8787 50%,\n      #ff6b6b 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-weapon .item-card-content .item-card-type {\n  color: #ff6b6b;\n  font-weight: 800;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-weapon .item-card-content .item-card-slot .slot-label {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 107, 107, 0.4),\n      rgba(255, 107, 107, 0.2));\n  border-color: #ff6b6b;\n  color: #ff6b6b;\n}\n@keyframes weapon-pulse {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.05);\n  }\n}\n.inventory-section .inventory-grid .inventory-item.item-type-armor .item-card-content {\n  border-left: 6px solid #4dabf7 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(77, 171, 247, 0.12) 0%,\n      transparent 100%) !important;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-armor .item-card-content .item-card-icon {\n  filter: drop-shadow(0 0 12px rgba(77, 171, 247, 0.8)) drop-shadow(0 4px 8px rgba(77, 171, 247, 0.4));\n  animation: armor-shield 2.5s ease-in-out infinite;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-armor .item-card-content .item-card-icon span {\n  background:\n    linear-gradient(\n      135deg,\n      #4dabf7 0%,\n      #74c0fc 50%,\n      #4dabf7 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-armor .item-card-content .item-card-type {\n  color: #4dabf7;\n  font-weight: 800;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-armor .item-card-content .item-card-slot .slot-label {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(77, 171, 247, 0.4),\n      rgba(77, 171, 247, 0.2));\n  border-color: #4dabf7;\n  color: #4dabf7;\n}\n@keyframes armor-shield {\n  0%, 100% {\n    filter: drop-shadow(0 0 12px rgba(77, 171, 247, 0.8));\n  }\n  50% {\n    filter: drop-shadow(0 0 20px rgb(77, 171, 247));\n  }\n}\n.inventory-section .inventory-grid .inventory-item.item-type-accessory .item-card-content {\n  border-left: 6px solid #cc5de8 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(204, 93, 232, 0.12) 0%,\n      transparent 100%) !important;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-accessory .item-card-content .item-card-icon {\n  filter: drop-shadow(0 0 12px rgba(204, 93, 232, 0.8)) drop-shadow(0 4px 8px rgba(204, 93, 232, 0.4));\n  animation: accessory-glow 3s ease-in-out infinite;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-accessory .item-card-content .item-card-icon span {\n  background:\n    linear-gradient(\n      135deg,\n      #cc5de8 0%,\n      #e599f7 50%,\n      #cc5de8 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-accessory .item-card-content .item-card-type {\n  color: #cc5de8;\n  font-weight: 800;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-accessory .item-card-content .item-card-slot .slot-label {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(204, 93, 232, 0.4),\n      rgba(204, 93, 232, 0.2));\n  border-color: #cc5de8;\n  color: #cc5de8;\n}\n@keyframes accessory-glow {\n  0%, 100% {\n    filter: drop-shadow(0 0 12px rgba(204, 93, 232, 0.8));\n    transform: rotate(0deg);\n  }\n  50% {\n    filter: drop-shadow(0 0 20px rgb(204, 93, 232));\n    transform: rotate(5deg);\n  }\n}\n.inventory-section .inventory-grid .inventory-item.item-type-consumable .item-card-content {\n  border-left: 6px solid #51cf66 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(81, 207, 102, 0.12) 0%,\n      transparent 100%) !important;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-consumable .item-card-content .item-card-icon {\n  filter: drop-shadow(0 0 12px rgba(81, 207, 102, 0.8)) drop-shadow(0 4px 8px rgba(81, 207, 102, 0.4));\n  animation: consumable-bounce 2s ease-in-out infinite;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-consumable .item-card-content .item-card-icon span {\n  background:\n    linear-gradient(\n      135deg,\n      #51cf66 0%,\n      #8ce99a 50%,\n      #51cf66 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-consumable .item-card-content .item-card-type {\n  color: #51cf66;\n  font-weight: 800;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-consumable .item-card-content .item-card-slot .slot-label {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(81, 207, 102, 0.4),\n      rgba(81, 207, 102, 0.2));\n  border-color: #51cf66;\n  color: #51cf66;\n}\n@keyframes consumable-bounce {\n  0%, 100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-4px);\n  }\n}\n.inventory-section .inventory-grid .inventory-item.item-type-material .item-card-content {\n  border-left: 6px solid #ffd43b !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 212, 59, 0.12) 0%,\n      transparent 100%) !important;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-material .item-card-content .item-card-icon {\n  filter: drop-shadow(0 0 12px rgba(255, 212, 59, 0.8)) drop-shadow(0 4px 8px rgba(255, 212, 59, 0.4));\n  animation: material-shine 3s ease-in-out infinite;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-material .item-card-content .item-card-icon span {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd43b 0%,\n      #ffe066 50%,\n      #ffd43b 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-material .item-card-content .item-card-type {\n  color: #ffd43b;\n  font-weight: 800;\n}\n.inventory-section .inventory-grid .inventory-item.item-type-material .item-card-content .item-card-slot .slot-label {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 212, 59, 0.4),\n      rgba(255, 212, 59, 0.2));\n  border-color: #ffd43b;\n  color: #ffd43b;\n}\n@keyframes material-shine {\n  0%, 100% {\n    filter: drop-shadow(0 0 12px rgba(255, 212, 59, 0.8));\n  }\n  50% {\n    filter: drop-shadow(0 0 20px rgb(255, 212, 59)) drop-shadow(0 0 30px rgba(255, 212, 59, 0.5));\n  }\n}\n.inventory-section .inventory-grid .inventory-item .item-card {\n  background: var(--bg-primary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 20px 16px;\n  transition: all 0.3s ease;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  min-height: 160px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.inventory-section .inventory-grid .inventory-item .item-card::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: var(--gradient-primary);\n  transform: scaleX(0);\n  transition: transform 0.3s ease;\n}\n.inventory-section .inventory-grid .inventory-item .item-card[data-rarity=common] {\n  border-color: #9e9e9e;\n}\n.inventory-section .inventory-grid .inventory-item .item-card[data-rarity=common]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #9e9e9e 0%,\n      #757575 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card[data-rarity=uncommon] {\n  border-color: #51cf66;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(81, 207, 102, 0.05) 0%,\n      rgba(46, 125, 50, 0.05) 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card[data-rarity=uncommon]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #51cf66 0%,\n      #2e7d32 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card[data-rarity=rare] {\n  border-color: #339af0;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(51, 154, 240, 0.08) 0%,\n      rgba(25, 118, 210, 0.08) 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card[data-rarity=rare]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #339af0 0%,\n      #1976d2 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card[data-rarity=epic] {\n  border-color: #9775fa;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(151, 117, 250, 0.1) 0%,\n      rgba(123, 31, 162, 0.1) 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card[data-rarity=epic]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #9775fa 0%,\n      #7b1fa2 100%);\n}\n.inventory-section .inventory-grid .inventory-item .item-card[data-rarity=legendary] {\n  border-color: #ff8000;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 128, 0, 0.12) 0%,\n      rgba(230, 81, 0, 0.12) 100%);\n  animation: legendary-border-glow 2s ease-in-out infinite;\n}\n.inventory-section .inventory-grid .inventory-item .item-card[data-rarity=legendary]::before {\n  background:\n    linear-gradient(\n      90deg,\n      #ff8000 0%,\n      #e65100 100%);\n}\n@keyframes legendary-border-glow {\n  0%, 100% {\n    box-shadow: 0 0 15px rgba(255, 128, 0, 0.3);\n  }\n  50% {\n    box-shadow: 0 0 25px rgba(255, 128, 0, 0.5);\n  }\n}\n.inventory-section .inventory-grid .inventory-item .item-card .delete-item-btn {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  width: 26px;\n  height: 26px;\n  padding: 0;\n  min-width: 26px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  background: rgba(244, 67, 54, 0.9);\n  border-radius: 50%;\n  z-index: 10;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .delete-item-btn:hover {\n  background: rgb(244, 67, 54);\n  transform: scale(1.1);\n}\n.inventory-section .inventory-grid .inventory-item .item-card .delete-item-btn mat-icon {\n  font-size: 16px;\n  width: 16px;\n  height: 16px;\n  line-height: 16px;\n  color: white;\n}\n.inventory-section .inventory-grid .inventory-item .item-card:hover .delete-item-btn {\n  opacity: 1;\n}\n.inventory-section .inventory-grid .inventory-item .item-card:hover {\n  transform: translateY(-8px) scale(1.02);\n  box-shadow: 0 12px 32px var(--shadow);\n  border-color: var(--accent-primary);\n  cursor: pointer;\n}\n.inventory-section .inventory-grid .inventory-item .item-card:hover::before {\n  transform: scaleX(1);\n}\n.inventory-section .inventory-grid .inventory-item .item-card:hover .item-card-icon {\n  transform: scale(1.25) rotate(5deg);\n  filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.5));\n}\n.inventory-section .inventory-grid .inventory-item .item-card:hover .item-card-icon::after {\n  opacity: 1 !important;\n  animation: sparkle-hover 0.6s ease-in-out infinite;\n}\n@keyframes sparkle-hover {\n  0%, 100% {\n    transform: scale(1) rotate(0deg);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.2) rotate(180deg);\n    opacity: 0.7;\n  }\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-icon {\n  font-size: 4rem;\n  text-align: center;\n  margin-bottom: 16px;\n  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4));\n  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  z-index: 1;\n  position: relative;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-icon::after {\n  content: "\\2728";\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  font-size: 1rem;\n  opacity: 0;\n  animation: sparkle 3s ease-in-out infinite;\n}\n@keyframes sparkle {\n  0%, 100% {\n    opacity: 0;\n    transform: scale(0) rotate(0deg);\n  }\n  25% {\n    opacity: 1;\n    transform: scale(1) rotate(45deg);\n  }\n  50% {\n    opacity: 0;\n    transform: scale(0.8) rotate(90deg);\n  }\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info {\n  width: 100%;\n  z-index: 1;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-name {\n  font-size: 12px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n  text-align: center;\n  line-height: 1.3;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-name.rarity-text-common {\n  color: #9ca3af;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-name.rarity-text-uncommon {\n  color: #51cf66;\n  font-weight: 800;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-name.rarity-text-rare {\n  color: #fbbf24;\n  font-weight: 800;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-name.rarity-text-epic {\n  color: #a855f7;\n  font-weight: 900;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-name.rarity-text-legendary {\n  color: #ff8000;\n  font-weight: 900;\n  animation: legendary-text-glow 2s ease-in-out infinite;\n}\n@keyframes legendary-text-glow {\n  0%, 100% {\n    text-shadow: 0 0 8px rgba(255, 128, 0, 0.6), 0 1px 2px rgba(0, 0, 0, 0.5);\n  }\n  50% {\n    text-shadow: 0 0 12px rgba(255, 128, 0, 0.9), 0 1px 2px rgba(0, 0, 0, 0.5);\n  }\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-rarity-badge {\n  font-size: 9px;\n  font-weight: 700;\n  text-align: center;\n  padding: 3px 8px;\n  margin: 4px auto;\n  border-radius: 10px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  display: inline-block;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-rarity-badge.rarity-badge-common {\n  background:\n    linear-gradient(\n      135deg,\n      #6b7280,\n      #4b5563);\n  color: #d1d5db;\n  border: 1px solid #9ca3af;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-rarity-badge.rarity-badge-uncommon {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669);\n  color: white;\n  border: 1px solid #34d399;\n  box-shadow: 0 0 8px rgba(16, 185, 129, 0.4);\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-rarity-badge.rarity-badge-rare {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b,\n      #d97706);\n  color: white;\n  border: 1px solid #fbbf24;\n  box-shadow: 0 0 8px rgba(251, 191, 36, 0.5);\n  animation: rare-glow 2s ease-in-out infinite;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-rarity-badge.rarity-badge-epic {\n  background:\n    linear-gradient(\n      135deg,\n      #a855f7,\n      #7c3aed);\n  color: white;\n  border: 1px solid #c084fc;\n  box-shadow: 0 0 10px rgba(168, 85, 247, 0.6);\n  animation: epic-glow 2s ease-in-out infinite;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-rarity-badge.rarity-badge-legendary {\n  background:\n    linear-gradient(\n      135deg,\n      #ff8000,\n      #cc6600);\n  color: white;\n  border: 1px solid #ffaa44;\n  box-shadow: 0 0 12px rgba(255, 128, 0, 0.8);\n  animation: legendary-glow 1.5s ease-in-out infinite;\n}\n@keyframes rare-glow {\n  0%, 100% {\n    box-shadow: 0 0 8px rgba(251, 191, 36, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 16px rgba(251, 191, 36, 0.8);\n  }\n}\n@keyframes epic-glow {\n  0%, 100% {\n    box-shadow: 0 0 10px rgba(168, 85, 247, 0.6);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(168, 85, 247, 0.9);\n  }\n}\n@keyframes legendary-glow {\n  0%, 100% {\n    box-shadow: 0 0 12px rgba(255, 128, 0, 0.8);\n  }\n  50% {\n    box-shadow: 0 0 24px rgb(255, 128, 0);\n  }\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-type {\n  font-size: 10px;\n  color: var(--text-tertiary);\n  text-align: center;\n  margin-bottom: 4px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  font-weight: 600;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-slot {\n  font-size: 10px;\n  text-align: center;\n  margin-bottom: 8px;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-slot .slot-label {\n  display: inline-block;\n  padding: 4px 10px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 255, 255, 0.1),\n      rgba(255, 255, 255, 0.05));\n  border-radius: 10px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  font-weight: 700;\n  font-size: 9px;\n  color: var(--text-primary);\n  text-transform: uppercase;\n  letter-spacing: 0.3px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-stats {\n  display: flex;\n  justify-content: center;\n  gap: 4px;\n  flex-wrap: wrap;\n  margin-top: 8px;\n  max-height: 80px;\n  overflow-y: auto;\n  padding: 4px;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-stats::-webkit-scrollbar {\n  width: 3px;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-stats::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-stats::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 2px;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-stats .mini-stat {\n  font-size: 9px;\n  padding: 3px 6px;\n  background: var(--accent-primary);\n  border-radius: 10px;\n  color: white;\n  font-weight: 600;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n  white-space: nowrap;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-stats .mini-stat.damage {\n  background:\n    linear-gradient(\n      135deg,\n      #ef4444,\n      #dc2626);\n  border: 1px solid #f87171;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-stats .mini-stat.defense {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6,\n      #2563eb);\n  border: 1px solid #60a5fa;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-stats .mini-stat.vital {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669);\n  border: 1px solid #34d399;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-stats .mini-stat.critical {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b,\n      #d97706);\n  border: 1px solid #fbbf24;\n  animation: pulse-glow 2s ease-in-out infinite;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-stats .mini-stat.lifesteal {\n  background:\n    linear-gradient(\n      135deg,\n      #ec4899,\n      #db2777);\n  border: 1px solid #f472b6;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-stats .mini-stat.resist {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6,\n      #7c3aed);\n  border: 1px solid #a78bfa;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-stats .mini-stat.special {\n  background:\n    linear-gradient(\n      135deg,\n      #eab308,\n      #ca8a04);\n  border: 1px solid #fbbf24;\n  animation: shimmer 3s ease-in-out infinite;\n}\n@keyframes pulse-glow {\n  0%, 100% {\n    box-shadow: 0 0 5px rgba(251, 146, 60, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 15px rgba(251, 146, 60, 0.8);\n  }\n}\n@keyframes shimmer {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.8;\n  }\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-quantity {\n  text-align: center;\n  margin-top: 6px;\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-info .item-card-quantity .quantity-badge {\n  display: inline-block;\n  padding: 4px 10px;\n  background: var(--accent-primary);\n  color: white;\n  border-radius: 20px;\n  font-size: 11px;\n  font-weight: 700;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n.inventory-section .inventory-grid .inventory-item .item-card .item-card-rarity {\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  font-size: 20px;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));\n  z-index: 5;\n}\n.inventory-section .empty-inventory {\n  text-align: center;\n  padding: 50px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.3),\n      rgba(0, 0, 0, 0.5));\n  border-radius: 16px;\n  border: 2px dashed rgba(255, 255, 255, 0.2);\n}\n.inventory-section .empty-inventory .empty-icon {\n  font-size: 64px;\n  margin-bottom: 20px;\n  opacity: 0.7;\n  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));\n  animation: float 3s ease-in-out infinite;\n}\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n.inventory-section .empty-inventory p {\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 15px;\n  margin-bottom: 10px;\n  font-weight: 600;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);\n}\n.inventory-section .empty-inventory p.hint {\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.5);\n  font-weight: 400;\n  margin-bottom: 20px;\n}\n.inventory-section .empty-inventory button {\n  margin-top: 10px;\n  padding: 0 24px;\n  height: 40px;\n  font-size: 14px;\n  font-weight: 700;\n  box-shadow: 0 4px 12px rgba(103, 58, 183, 0.4);\n}\n.inventory-section .empty-inventory button mat-icon {\n  margin-right: 6px;\n}\n.empty-equipment-state {\n  text-align: center;\n  padding: 60px 20px;\n}\n.empty-equipment-state .empty-icon {\n  font-size: 64px;\n  margin-bottom: 20px;\n  opacity: 0.3;\n}\n.empty-equipment-state h3 {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.empty-equipment-state p {\n  margin: 0;\n  color: var(--text-secondary);\n  font-size: 14px;\n}\n::ng-deep .item-context-menu-mat .mat-mdc-menu-content {\n  padding: 8px 0;\n}\n::ng-deep .item-context-menu-mat .mat-mdc-menu-item {\n  min-height: 48px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 0 20px;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n::ng-deep .item-context-menu-mat .mat-mdc-menu-item mat-icon {\n  width: 20px;\n  height: 20px;\n  font-size: 20px;\n  margin-right: 8px;\n}\n::ng-deep .item-context-menu-mat .mat-mdc-menu-item:hover {\n  background: var(--accent-primary) !important;\n  color: white !important;\n}\n::ng-deep .item-context-menu-mat .mat-mdc-menu-item:hover mat-icon {\n  color: white !important;\n}\n::ng-deep .cdk-overlay-container {\n  z-index: 9999999 !important;\n}\n::ng-deep .cdk-overlay-pane {\n  z-index: 9999999 !important;\n}\n::ng-deep .mat-mdc-menu-panel {\n  z-index: 9999999 !important;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2) !important;\n  border-radius: 8px;\n  min-width: 180px !important;\n}\n::ng-deep .comparison-snackbar .mdc-snackbar__surface {\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-primary),\n      var(--bg-secondary)) !important;\n  border: 2px solid var(--accent-primary) !important;\n  border-radius: 12px !important;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;\n  min-width: 350px !important;\n  max-width: 500px !important;\n}\n::ng-deep .comparison-snackbar .mdc-snackbar__label {\n  color: var(--text-primary) !important;\n  font-size: 14px !important;\n  line-height: 1.6 !important;\n  white-space: pre-line !important;\n  font-family: "Noto Sans KR", sans-serif !important;\n  padding: 16px 24px !important;\n}\n::ng-deep .comparison-snackbar .mat-mdc-snack-bar-action {\n  color: var(--accent-primary) !important;\n  font-weight: 600 !important;\n}\n::ng-deep .success-snackbar .mdc-snackbar__surface {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669) !important;\n  border-radius: 12px !important;\n  box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3) !important;\n}\n::ng-deep .success-snackbar .mdc-snackbar__label {\n  color: white !important;\n  font-weight: 600 !important;\n  font-size: 15px !important;\n}\n::ng-deep .success-snackbar .mat-mdc-snack-bar-action {\n  color: white !important;\n  font-weight: 700 !important;\n}\n.inventory-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(500px, 1fr));\n  gap: 12px;\n  padding: 20px;\n  width: 100%;\n}\n@media (max-width: 768px) {\n  .inventory-grid {\n    grid-template-columns: 1fr;\n  }\n}\n.inventory-item.diablo-card {\n  position: relative;\n  padding: 0;\n  border-radius: 0;\n  border: 2px solid;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(25, 25, 30, 0.98) 0%,\n      rgba(15, 15, 20, 0.98) 100%);\n  cursor: pointer;\n  transition: all 0.25s ease-out;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.8), inset 0 1px 0 rgba(255, 255, 255, 0.05);\n  display: flex;\n  flex-direction: row;\n  overflow: hidden;\n  min-height: 180px;\n}\n.inventory-item.diablo-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.9), inset 0 1px 0 rgba(255, 255, 255, 0.1);\n}\n.inventory-item.diablo-card .item-image-section {\n  width: 180px;\n  min-width: 180px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 35, 0.95) 0%,\n      rgba(20, 20, 25, 0.98) 100%);\n  display: flex;\n  flex-direction: column;\n  border-right: 2px solid rgba(255, 255, 255, 0.08);\n  position: relative;\n}\n.inventory-item.diablo-card .item-image-section .item-image-wrapper {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n}\n.inventory-item.diablo-card .item-image-section .item-image-wrapper .item-image {\n  max-width: 100%;\n  max-height: 140px;\n  object-fit: contain;\n  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.8));\n}\n.inventory-item.diablo-card .item-image-section .item-image-wrapper .item-image-icon {\n  font-size: 96px;\n  text-align: center;\n  opacity: 0.85;\n  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.9));\n  transition: all 0.3s ease;\n}\n.inventory-item.diablo-card .item-image-section .item-image-wrapper .item-image-icon:hover {\n  transform: scale(1.05);\n  filter: drop-shadow(0 6px 16px rgb(0, 0, 0));\n}\n.inventory-item.diablo-card .item-image-section .item-image-wrapper .item-image-placeholder {\n  width: 100%;\n  height: 120px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background:\n    radial-gradient(\n      circle,\n      rgba(60, 60, 70, 0.4) 0%,\n      transparent 70%);\n}\n.inventory-item.diablo-card .item-image-section .item-image-wrapper .item-image-placeholder .placeholder-icon {\n  font-size: 64px;\n  opacity: 0.4;\n}\n.inventory-item.diablo-card .item-image-section .item-meta {\n  padding: 12px 16px;\n  background: rgba(0, 0, 0, 0.4);\n  border-top: 1px solid rgba(255, 255, 255, 0.05);\n}\n.inventory-item.diablo-card .item-image-section .item-meta .item-type-badge {\n  font-size: 11px;\n  color: #9ca3af;\n  text-align: center;\n  margin-bottom: 8px;\n  text-transform: none;\n  font-weight: 600;\n}\n.inventory-item.diablo-card .item-image-section .item-meta .item-footer {\n  display: flex;\n  justify-content: center;\n  gap: 16px;\n  font-size: 11px;\n  color: #6b7280;\n}\n.inventory-item.diablo-card .item-image-section .item-meta .item-footer .favorites,\n.inventory-item.diablo-card .item-image-section .item-meta .item-footer .comments {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.inventory-item.diablo-card .item-image-section .item-meta .item-footer .favorites .star-icon,\n.inventory-item.diablo-card .item-image-section .item-meta .item-footer .comments .star-icon {\n  color: #fbbf24;\n  font-size: 12px;\n}\n.inventory-item.diablo-card .item-image-section .item-meta .item-footer .favorites .comment-icon,\n.inventory-item.diablo-card .item-image-section .item-meta .item-footer .comments .comment-icon {\n  font-size: 12px;\n}\n.inventory-item.diablo-card .item-info-section {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 20px;\n  position: relative;\n}\n.inventory-item.diablo-card .item-info-section .item-header {\n  margin-bottom: 12px;\n}\n.inventory-item.diablo-card .item-info-section .item-header .header-top {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 12px;\n  margin-bottom: 8px;\n}\n.inventory-item.diablo-card .item-info-section .item-header .header-top .item-name {\n  font-size: 16px;\n  font-weight: 700;\n  line-height: 1.3;\n  flex: 1;\n  letter-spacing: 0.3px;\n  color: #d1d5db;\n}\n.inventory-item.diablo-card .item-info-section .item-header .header-top .attack-speed {\n  font-size: 11px;\n  color: #9ca3af;\n  white-space: nowrap;\n  align-self: flex-start;\n}\n.inventory-item.diablo-card .item-info-section .item-header .header-badges {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.inventory-item.diablo-card .item-info-section .item-header .header-badges .badge-chaos,\n.inventory-item.diablo-card .item-info-section .item-header .header-badges .badge-class {\n  font-size: 10px;\n  color: #9ca3af;\n  padding: 2px 0;\n}\n.inventory-item.diablo-card .item-info-section .unique-effect-highlight {\n  margin-bottom: 12px;\n  padding: 10px 0;\n  border-top: 1px solid rgba(255, 255, 255, 0.06);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.06);\n}\n.inventory-item.diablo-card .item-info-section .unique-effect-highlight .effect-text-main {\n  font-size: 13px;\n  line-height: 1.6;\n  color: #fbbf24;\n  font-weight: 600;\n  text-shadow: 0 0 8px rgba(251, 191, 36, 0.4);\n  word-break: keep-all;\n}\n.inventory-item.diablo-card .item-info-section .unique-effect-highlight .effect-text-main::first-line {\n  color: #fb923c;\n}\n.inventory-item.diablo-card .item-info-section .item-stats-detailed {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.inventory-item.diablo-card .item-info-section .item-stats-detailed .stat-line {\n  font-size: 12px;\n  line-height: 1.5;\n  color: #d1d5db;\n  font-weight: 500;\n  padding: 2px 0;\n}\n.inventory-item.diablo-card .item-info-section .item-stats-detailed .stat-line.damage {\n  color: #d1d5db;\n}\n.inventory-item.diablo-card .item-info-section .item-stats-detailed .stat-line.defense {\n  color: #d1d5db;\n}\n.inventory-item.diablo-card .item-info-section .item-stats-detailed .stat-line.vital {\n  color: #d1d5db;\n}\n.inventory-item.diablo-card .item-info-section .item-stats-detailed .stat-line.critical {\n  color: #d1d5db;\n}\n.inventory-item.diablo-card .item-info-section .item-stats-detailed .stat-line.special {\n  color: #d1d5db;\n}\n.inventory-item.diablo-card .item-info-section .item-stats-legacy {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.inventory-item.diablo-card .item-info-section .item-stats-legacy .stat-line {\n  font-size: 12px;\n  color: #d1d5db;\n}\n.inventory-item.diablo-card .item-info-section .item-actions-inline {\n  display: flex;\n  gap: 8px;\n  margin-top: auto;\n}\n.inventory-item.diablo-card .item-info-section .item-actions-inline button {\n  flex: 1;\n  padding: 8px 14px;\n  font-size: 10px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  border: 1px solid;\n  border-radius: 2px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  background: rgba(0, 0, 0, 0.4);\n  color: #d1d5db;\n  border-color: rgba(255, 255, 255, 0.2);\n}\n.inventory-item.diablo-card .item-info-section .item-actions-inline button:hover {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.4);\n}\n.inventory-item.diablo-card .item-info-section .item-actions-inline .btn-equip {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(59, 130, 246, 0.6) 0%,\n      rgba(37, 99, 235, 0.7) 100%);\n  border-color: #3b82f6;\n  color: #ffffff;\n}\n.inventory-item.diablo-card .item-info-section .item-actions-inline .btn-equip:hover {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(59, 130, 246, 0.8) 0%,\n      rgba(37, 99, 235, 0.9) 100%);\n}\n.inventory-item.diablo-card .item-info-section .item-actions-inline .btn-sell {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(234, 179, 8, 0.6) 0%,\n      rgba(202, 138, 4, 0.7) 100%);\n  border-color: #eab308;\n  color: #1a1a1a;\n}\n.inventory-item.diablo-card .item-info-section .item-actions-inline .btn-sell:hover {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(234, 179, 8, 0.8) 0%,\n      rgba(202, 138, 4, 0.9) 100%);\n}\n.inventory-item.diablo-card .item-quantity {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 2px;\n  font-size: 11px;\n  font-weight: 800;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);\n  z-index: 10;\n}\n.inventory-item.diablo-card.rarity-common {\n  border-color: #6b7280;\n}\n.inventory-item.diablo-card.rarity-common .item-name {\n  color: #9ca3af;\n}\n.inventory-item.diablo-card.rarity-uncommon {\n  border-color: #3b82f6;\n}\n.inventory-item.diablo-card.rarity-uncommon .item-name {\n  color: #60a5fa;\n}\n.inventory-item.diablo-card.rarity-rare {\n  border-color: #fbbf24;\n}\n.inventory-item.diablo-card.rarity-rare .item-name {\n  color: #fcd34d;\n}\n.inventory-item.diablo-card.rarity-epic {\n  border-color: #a855f7;\n}\n.inventory-item.diablo-card.rarity-epic .item-name {\n  color: #c084fc;\n}\n.inventory-item.diablo-card.rarity-legendary {\n  border-color: #f97316;\n}\n.inventory-item.diablo-card.rarity-legendary .item-name {\n  color: #fb923c;\n}\n.inventory-item.diablo-card.rarity-unique {\n  border-color: #a855f7;\n  border-width: 3px;\n}\n.inventory-item.diablo-card.rarity-unique .item-name {\n  color: #c084fc;\n  text-shadow: 0 0 12px rgba(168, 85, 247, 0.6);\n}\n.inventory-item.diablo-card.rarity-unique .unique-effect-highlight .effect-text-main {\n  color: #fbbf24;\n  text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);\n}\n.inventory-item.diablo-card.rarity-mythic {\n  border-color: #ec4899;\n  border-width: 3px;\n  box-shadow:\n    0 4px 12px rgba(0, 0, 0, 0.8),\n    0 0 20px rgba(236, 72, 153, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.05);\n}\n.inventory-item.diablo-card.rarity-mythic .item-name {\n  color: #f472b6;\n  text-shadow: 0 0 15px rgba(236, 72, 153, 0.7);\n  font-weight: 800;\n}\n.inventory-item.diablo-card.rarity-mythic .unique-effect-highlight .effect-text-main {\n  color: #fb923c;\n  text-shadow: 0 0 12px rgba(251, 146, 60, 0.6);\n}\n.inventory-item.diablo-card.rarity-mythic:hover {\n  box-shadow:\n    0 8px 20px rgba(0, 0, 0, 0.9),\n    0 0 30px rgba(236, 72, 153, 0.6),\n    inset 0 1px 0 rgba(255, 255, 255, 0.1);\n}\n.inventory-item:not(.diablo-card) {\n  position: relative;\n  padding: 0;\n  border-radius: 4px;\n  border: 2px solid;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(20, 20, 25, 0.98) 0%,\n      rgba(10, 10, 15, 0.98) 100%);\n  cursor: pointer;\n  transition: all 0.25s ease-out;\n  box-shadow:\n    0 4px 8px rgba(0, 0, 0, 0.6),\n    0 2px 4px rgba(0, 0, 0, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.1);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.inventory-item:not(.diablo-card):hover {\n  transform: translateY(-3px);\n}\n.inventory-item:not(.diablo-card).rarity-legendary {\n  border-color: #f97316;\n  border-width: 3px;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(249, 115, 22, 0.15) 0%,\n      rgba(10, 10, 15, 0.98) 100%);\n}\n.inventory-item:not(.diablo-card).rarity-legendary::before {\n  content: "";\n  position: absolute;\n  top: -3px;\n  left: -3px;\n  right: -3px;\n  bottom: -3px;\n  border-radius: 4px;\n  background:\n    linear-gradient(\n      45deg,\n      #f97316 0%,\n      #fb923c 20%,\n      #fbbf24 40%,\n      #fb923c 60%,\n      #f97316 80%,\n      #fb923c 100%);\n  z-index: -1;\n  opacity: 0.6;\n  filter: blur(12px);\n  animation: legendary-glow 3s ease-in-out infinite;\n}\n.inventory-item:not(.diablo-card).rarity-legendary::after {\n  height: 60%;\n  background:\n    linear-gradient(\n      180deg,\n      transparent 0%,\n      rgba(249, 115, 22, 0.3) 50%,\n      rgba(0, 0, 0, 0.6) 100%);\n}\n.inventory-item:not(.diablo-card).rarity-legendary:hover {\n  border-color: #fb923c;\n  transform: translateY(-4px) scale(1.01);\n  box-shadow:\n    0 12px 24px rgba(249, 115, 22, 0.8),\n    0 6px 12px rgba(0, 0, 0, 0.6),\n    0 0 40px rgba(249, 115, 22, 0.7),\n    inset 0 0 35px rgba(249, 115, 22, 0.25);\n}\n.inventory-item:not(.diablo-card).rarity-legendary:hover::before {\n  opacity: 0.9;\n  filter: blur(15px);\n}\n.inventory-item:not(.diablo-card).rarity-legendary .item-name {\n  color: #fdba74;\n  text-shadow:\n    0 2px 6px rgb(0, 0, 0),\n    0 0 25px rgb(249, 115, 22),\n    0 0 15px rgb(251, 146, 60),\n    0 0 8px rgba(251, 191, 36, 0.8);\n  letter-spacing: 1.5px;\n  font-weight: 900;\n  text-transform: uppercase;\n  animation: legendary-text 2s ease-in-out infinite;\n}\n.inventory-item:not(.diablo-card).rarity-legendary .item-header {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(249, 115, 22, 0.4) 0%,\n      rgba(249, 115, 22, 0.15) 100%);\n  border-bottom: 2px solid rgba(249, 115, 22, 0.8);\n}\n@keyframes legendary-glow {\n  0%, 100% {\n    opacity: 0.6;\n    filter: blur(12px);\n  }\n  50% {\n    opacity: 0.85;\n    filter: blur(15px);\n  }\n}\n@keyframes legendary-text {\n  0%, 100% {\n    text-shadow:\n      0 2px 6px rgb(0, 0, 0),\n      0 0 25px rgb(249, 115, 22),\n      0 0 15px rgb(251, 146, 60),\n      0 0 8px rgba(251, 191, 36, 0.8);\n  }\n  50% {\n    text-shadow:\n      0 2px 6px rgb(0, 0, 0),\n      0 0 30px rgb(249, 115, 22),\n      0 0 20px rgb(251, 146, 60),\n      0 0 12px rgb(251, 191, 36);\n  }\n}\n.inventory-item:not(.diablo-card) .item-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 18px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  position: relative;\n  z-index: 1;\n}\n.inventory-item:not(.diablo-card) .item-header::after {\n  content: "";\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 1px;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.3) 50%,\n      transparent 100%);\n}\n.inventory-item:not(.diablo-card) .item-header .item-name {\n  font-size: 15px;\n  font-weight: 700;\n  line-height: 1.4;\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  letter-spacing: 0.8px;\n  font-family:\n    "Exocet",\n    "Cinzel",\n    "Trajan Pro",\n    serif,\n    -apple-system,\n    BlinkMacSystemFont,\n    "Segoe UI";\n}\n.inventory-item:not(.diablo-card) .item-header .item-rarity {\n  font-size: 9px;\n  padding: 4px 10px;\n  border-radius: 2px;\n  background: rgba(0, 0, 0, 0.5);\n  color: rgba(255, 255, 255, 0.85);\n  white-space: nowrap;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  font-weight: 800;\n  flex-shrink: 0;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);\n}\n.inventory-item:not(.diablo-card) .item-stats {\n  padding: 14px 18px;\n  font-size: 12px;\n  line-height: 1.8;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  position: relative;\n  z-index: 1;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(0, 0, 0, 0.2) 0%,\n      transparent 100%);\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line {\n  color: #d1d5db;\n  padding: 3px 0;\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.15s ease;\n  font-family:\n    "Segoe UI",\n    Roboto,\n    Arial,\n    sans-serif;\n  font-weight: 600;\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line::before {\n  content: "\\25c6";\n  font-size: 8px;\n  opacity: 0.6;\n  color: inherit;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line:hover {\n  color: #f3f4f6;\n  transform: translateX(2px);\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9);\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.damage {\n  color: #ef4444;\n  font-weight: 800;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 8px rgba(239, 68, 68, 0.5);\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.damage::before {\n  content: "\\2694";\n  color: #dc2626;\n  opacity: 1;\n  font-size: 10px;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.defense {\n  color: #3b82f6;\n  font-weight: 800;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 8px rgba(59, 130, 246, 0.5);\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.defense::before {\n  content: "\\1f6e1";\n  opacity: 1;\n  font-size: 10px;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.vital {\n  color: #dc2626;\n  font-weight: 800;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 10px rgba(220, 38, 38, 0.6);\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.vital::before {\n  content: "\\2764";\n  color: #dc2626;\n  opacity: 1;\n  font-size: 10px;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.critical {\n  color: #f97316;\n  font-weight: 900;\n  text-shadow:\n    0 1px 4px rgb(0, 0, 0),\n    0 0 12px rgba(249, 115, 22, 0.8),\n    0 0 6px rgba(251, 146, 60, 0.6);\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.critical::before {\n  content: "\\1f4a5";\n  opacity: 1;\n  font-size: 11px;\n  filter: drop-shadow(0 0 4px rgba(249, 115, 22, 0.8));\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.lifesteal {\n  color: #ec4899;\n  font-weight: 800;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 10px rgba(236, 72, 153, 0.6);\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.lifesteal::before {\n  content: "\\1fa78";\n  opacity: 1;\n  font-size: 10px;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.manasteal {\n  color: #06b6d4;\n  font-weight: 800;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 10px rgba(6, 182, 212, 0.6);\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.manasteal::before {\n  content: "\\1f4a7";\n  opacity: 1;\n  font-size: 10px;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.resist {\n  color: #a855f7;\n  font-weight: 700;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.resist::before {\n  content: "\\2726";\n  opacity: 1;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.resist.fire {\n  color: #f87171;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.resist.fire::before {\n  content: "\\1f525";\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.resist.cold {\n  color: #60a5fa;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.resist.cold::before {\n  content: "\\2744\\fe0f";\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.resist.lightning {\n  color: #fbbf24;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.resist.lightning::before {\n  content: "\\26a1";\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.resist.poison {\n  color: #34d399;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.resist.poison::before {\n  content: "\\2620\\fe0f";\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.resist.all {\n  color: #a855f7;\n  font-weight: 800;\n  text-shadow: 0 0 8px rgba(168, 85, 247, 0.6);\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.resist.all::before {\n  content: "\\2728";\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.special {\n  color: #fbbf24;\n  font-weight: 700;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.special::before {\n  content: "\\2605";\n  opacity: 1;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.special.magic {\n  color: #c084fc;\n  text-shadow: 0 0 6px rgba(192, 132, 252, 0.5);\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.special.magic::before {\n  content: "\\2728";\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.special.gold {\n  color: #fbbf24;\n  text-shadow: 0 0 6px rgba(251, 191, 36, 0.5);\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.special.gold::before {\n  content: "\\1f4b0";\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.special.exp {\n  color: #60a5fa;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.special.exp::before {\n  content: "\\2b50";\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.special.move {\n  color: #34d399;\n}\n.inventory-item:not(.diablo-card) .item-stats .stat-line.special.move::before {\n  content: "\\26a1";\n}\n.inventory-item:not(.diablo-card) .item-actions {\n  display: flex;\n  gap: 8px;\n  padding: 12px 18px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  background:\n    linear-gradient(\n      180deg,\n      rgba(0, 0, 0, 0.3) 0%,\n      rgba(0, 0, 0, 0.5) 100%);\n  position: relative;\n  z-index: 1;\n}\n.inventory-item:not(.diablo-card) .item-actions::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 1px;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.2) 50%,\n      transparent 100%);\n}\n.inventory-item:not(.diablo-card) .item-actions button {\n  flex: 1;\n  padding: 10px 16px;\n  font-size: 11px;\n  font-weight: 800;\n  text-transform: uppercase;\n  letter-spacing: 0.8px;\n  border: 2px solid;\n  border-radius: 2px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  overflow: hidden;\n  font-family:\n    "Segoe UI",\n    Arial,\n    sans-serif;\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.15);\n}\n.inventory-item:not(.diablo-card) .item-actions button::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.3) 50%,\n      transparent 100%);\n  transition: left 0.5s ease;\n}\n.inventory-item:not(.diablo-card) .item-actions button:hover::before {\n  left: 100%;\n}\n.inventory-item:not(.diablo-card) .item-actions button:hover {\n  transform: translateY(-2px);\n}\n.inventory-item:not(.diablo-card) .item-actions button:active {\n  transform: translateY(0);\n}\n.inventory-item:not(.diablo-card) .item-actions .btn-use {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(16, 185, 129, 0.8) 0%,\n      rgba(5, 150, 105, 0.9) 100%);\n  border-color: #34d399;\n  color: #ffffff;\n}\n.inventory-item:not(.diablo-card) .item-actions .btn-use:hover {\n  background:\n    linear-gradient(\n      180deg,\n      rgb(16, 185, 129) 0%,\n      rgb(5, 150, 105) 100%);\n  border-color: #6ee7b7;\n  box-shadow:\n    0 4px 8px rgba(16, 185, 129, 0.6),\n    0 0 15px rgba(16, 185, 129, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.25);\n}\n.inventory-item:not(.diablo-card) .item-actions .btn-equip {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(59, 130, 246, 0.8) 0%,\n      rgba(37, 99, 235, 0.9) 100%);\n  border-color: #60a5fa;\n  color: #ffffff;\n}\n.inventory-item:not(.diablo-card) .item-actions .btn-equip:hover {\n  background:\n    linear-gradient(\n      180deg,\n      rgb(59, 130, 246) 0%,\n      rgb(37, 99, 235) 100%);\n  border-color: #93c5fd;\n  box-shadow:\n    0 4px 8px rgba(59, 130, 246, 0.6),\n    0 0 15px rgba(59, 130, 246, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.25);\n}\n.inventory-item:not(.diablo-card) .item-actions .btn-sell {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(234, 179, 8, 0.8) 0%,\n      rgba(202, 138, 4, 0.9) 100%);\n  border-color: #fbbf24;\n  color: #1a1a1a;\n  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.3);\n}\n.inventory-item:not(.diablo-card) .item-actions .btn-sell:hover {\n  background:\n    linear-gradient(\n      180deg,\n      rgb(234, 179, 8) 0%,\n      rgb(202, 138, 4) 100%);\n  border-color: #fcd34d;\n  box-shadow:\n    0 4px 8px rgba(234, 179, 8, 0.6),\n    0 0 15px rgba(234, 179, 8, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.4);\n  color: #000000;\n}\n.inventory-item:not(.diablo-card) .item-quantity {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  font-weight: 800;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);\n  z-index: 10;\n}\n.inventory-item:not(.diablo-card) .item-badges {\n  display: flex;\n  gap: 6px;\n  padding: 8px 18px;\n  background: rgba(0, 0, 0, 0.25);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n  flex-wrap: wrap;\n  position: relative;\n  z-index: 1;\n}\n.inventory-item:not(.diablo-card) .item-badges .badge {\n  display: inline-flex;\n  align-items: center;\n  padding: 4px 10px;\n  font-size: 10px;\n  font-weight: 800;\n  text-transform: uppercase;\n  letter-spacing: 0.8px;\n  border-radius: 2px;\n  border: 1px solid;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);\n}\n.inventory-item:not(.diablo-card) .item-badges .badge.chaos {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(168, 85, 247, 0.8) 0%,\n      rgba(124, 58, 237, 0.9) 100%);\n  border-color: #a855f7;\n  color: #fae8ff;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6), 0 0 10px rgba(168, 85, 247, 0.5);\n}\n.inventory-item:not(.diablo-card) .item-badges .badge.class {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.8) 0%,\n      rgba(37, 99, 235, 0.9) 100%);\n  border-color: #3b82f6;\n  color: #dbeafe;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6), 0 0 8px rgba(59, 130, 246, 0.4);\n}\n.inventory-item:not(.diablo-card) .item-badges .badge.aps {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(34, 197, 94, 0.8) 0%,\n      rgba(22, 163, 74, 0.9) 100%);\n  border-color: #22c55e;\n  color: #dcfce7;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6), 0 0 8px rgba(34, 197, 94, 0.4);\n}\n.inventory-item:not(.diablo-card) .unique-effect {\n  padding: 14px 18px;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(168, 85, 247, 0.15) 0%,\n      rgba(0, 0, 0, 0.3) 100%);\n  border-top: 1px solid rgba(168, 85, 247, 0.3);\n  border-bottom: 1px solid rgba(168, 85, 247, 0.2);\n  position: relative;\n  z-index: 1;\n}\n.inventory-item:not(.diablo-card) .unique-effect::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 1px;\n  background:\n    linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(168, 85, 247, 0.5) 50%,\n      transparent 100%);\n}\n.inventory-item:not(.diablo-card) .unique-effect .effect-label {\n  font-size: 10px;\n  font-weight: 800;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  color: #c084fc;\n  margin-bottom: 6px;\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8), 0 0 8px rgba(168, 85, 247, 0.6);\n}\n.inventory-item:not(.diablo-card) .unique-effect .effect-text {\n  font-size: 12px;\n  line-height: 1.6;\n  color: #e9d5ff;\n  font-weight: 600;\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);\n  font-family:\n    "Segoe UI",\n    Roboto,\n    Arial,\n    sans-serif;\n  word-break: keep-all;\n  overflow-wrap: break-word;\n}\n.inventory-item:not(.diablo-card).rarity-unique {\n  border-color: #a855f7;\n  border-width: 3px;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(168, 85, 247, 0.12) 0%,\n      rgba(10, 10, 15, 0.98) 100%);\n}\n.inventory-item:not(.diablo-card).rarity-unique:hover {\n  border-color: #c084fc;\n  box-shadow:\n    0 10px 20px rgba(168, 85, 247, 0.6),\n    0 4px 8px rgba(0, 0, 0, 0.5),\n    0 0 35px rgba(168, 85, 247, 0.5),\n    inset 0 0 30px rgba(168, 85, 247, 0.18);\n}\n.inventory-item:not(.diablo-card).rarity-unique .item-name {\n  color: #d8b4fe;\n  text-shadow:\n    0 2px 4px rgba(0, 0, 0, 0.9),\n    0 0 18px rgba(168, 85, 247, 0.9),\n    0 0 10px rgba(168, 85, 247, 0.7);\n  letter-spacing: 1px;\n  font-weight: 900;\n}\n.inventory-item:not(.diablo-card).rarity-unique .item-header {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(168, 85, 247, 0.32) 0%,\n      rgba(168, 85, 247, 0.1) 100%);\n  border-bottom: 2px solid rgba(168, 85, 247, 0.65);\n}\n.inventory-item:not(.diablo-card).rarity-mythic {\n  border-color: #ec4899;\n  border-width: 4px;\n  background:\n    linear-gradient(\n      180deg,\n      rgba(236, 72, 153, 0.18) 0%,\n      rgba(10, 10, 15, 0.98) 100%);\n}\n.inventory-item:not(.diablo-card).rarity-mythic::before {\n  content: "";\n  position: absolute;\n  top: -4px;\n  left: -4px;\n  right: -4px;\n  bottom: -4px;\n  border-radius: 4px;\n  background:\n    linear-gradient(\n      45deg,\n      #ec4899 0%,\n      #f472b6 20%,\n      #f9a8d4 40%,\n      #f472b6 60%,\n      #ec4899 80%,\n      #f472b6 100%);\n  z-index: -1;\n  opacity: 0.7;\n  filter: blur(14px);\n  animation: legendary-glow 3s ease-in-out infinite;\n}\n.inventory-item:not(.diablo-card).rarity-mythic:hover {\n  border-color: #f472b6;\n  transform: translateY(-5px) scale(1.02);\n  box-shadow:\n    0 15px 30px rgba(236, 72, 153, 0.9),\n    0 8px 16px rgba(0, 0, 0, 0.6),\n    0 0 50px rgba(236, 72, 153, 0.8),\n    inset 0 0 40px rgba(236, 72, 153, 0.3);\n}\n.inventory-item:not(.diablo-card).rarity-mythic:hover::before {\n  opacity: 1;\n  filter: blur(18px);\n}\n.inventory-item:not(.diablo-card).rarity-mythic .item-name {\n  color: #fbcfe8;\n  text-shadow:\n    0 2px 6px rgb(0, 0, 0),\n    0 0 30px rgb(236, 72, 153),\n    0 0 20px rgb(244, 114, 182),\n    0 0 12px rgba(249, 168, 212, 0.9);\n  letter-spacing: 2px;\n  font-weight: 900;\n  text-transform: uppercase;\n  animation: legendary-text 2s ease-in-out infinite;\n}\n.inventory-item:not(.diablo-card).rarity-mythic .item-header {\n  background:\n    linear-gradient(\n      180deg,\n      rgba(236, 72, 153, 0.45) 0%,\n      rgba(236, 72, 153, 0.18) 100%);\n  border-bottom: 2px solid rgba(236, 72, 153, 0.85);\n}\n@keyframes legendary-item-pulse {\n  0%, 100% {\n    box-shadow:\n      inset 0 2px 6px var(--shadow),\n      0 2px 8px var(--shadow),\n      0 0 20px rgba(249, 115, 22, 0.4);\n  }\n  50% {\n    box-shadow:\n      inset 0 2px 6px var(--shadow),\n      0 2px 8px var(--shadow),\n      0 0 30px rgba(249, 115, 22, 0.7);\n  }\n}\n@keyframes legendary-text-shine {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 200% 50%;\n  }\n}\n@keyframes legendary-header-shine {\n  0% {\n    left: -100%;\n  }\n  50%, 100% {\n    left: 200%;\n  }\n}\n.empty-message {\n  text-align: center;\n  padding: 60px 20px;\n  color: var(--text-secondary);\n  font-size: 16px;\n  font-style: italic;\n}\n@keyframes legendary-pulse {\n  0%, 100% {\n    box-shadow: 0 0 20px rgba(249, 115, 22, 0.4);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(249, 115, 22, 0.7);\n  }\n}\n::ng-deep .item-details-snackbar .mdc-snackbar__surface {\n  background: var(--bg-secondary) !important;\n  border: 2px solid var(--border-color) !important;\n  border-radius: 12px !important;\n  box-shadow: 0 12px 48px var(--shadow) !important;\n  min-width: 400px !important;\n  max-width: 500px !important;\n}\n::ng-deep .item-details-snackbar .mdc-snackbar__label {\n  color: var(--text-primary) !important;\n  font-size: 13px !important;\n  line-height: 1.8 !important;\n  white-space: pre-line !important;\n  font-family:\n    "Consolas",\n    "Monaco",\n    monospace !important;\n  padding: 20px 24px !important;\n}\n::ng-deep .item-details-snackbar.rarity-common .mdc-snackbar__surface {\n  border-color: #9ca3af !important;\n}\n::ng-deep .item-details-snackbar.rarity-uncommon .mdc-snackbar__surface {\n  border-color: #3b82f6 !important;\n  box-shadow: 0 12px 48px rgba(59, 130, 246, 0.3) !important;\n}\n::ng-deep .item-details-snackbar.rarity-rare .mdc-snackbar__surface {\n  border-color: #eab308 !important;\n  box-shadow: 0 12px 48px rgba(234, 179, 8, 0.3) !important;\n}\n::ng-deep .item-details-snackbar.rarity-epic .mdc-snackbar__surface {\n  border-color: #a855f7 !important;\n  box-shadow: 0 12px 48px rgba(168, 85, 247, 0.4) !important;\n}\n::ng-deep .item-details-snackbar.rarity-legendary .mdc-snackbar__surface {\n  border-color: #f97316 !important;\n  box-shadow: 0 12px 48px rgba(249, 115, 22, 0.5) !important;\n  animation: legendary-pulse 2s ease-in-out infinite;\n}\n.inventory-panel {\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  top: 0 !important;\n  left: 0 !important;\n  transform: none !important;\n  border-radius: 0 !important;\n  display: flex !important;\n  flex-direction: column !important;\n}\n.inventory-panel .panel-header {\n  background: var(--bg-secondary);\n  border-bottom: 2px solid var(--border-color);\n  flex-shrink: 0;\n}\n.inventory-panel .inventory-tabs {\n  flex-shrink: 0;\n}\n.inventory-panel .tab-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  overflow-x: hidden;\n  min-height: 0;\n}\n.inventory-panel .tab-content::-webkit-scrollbar {\n  width: 10px;\n}\n.inventory-panel .tab-content::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n}\n.inventory-panel .tab-content::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 5px;\n}\n.inventory-panel .tab-content::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-primary);\n}\n.inventory-panel .tab-content:has(.equipment-slots-section) {\n  display: flex !important;\n  flex-direction: column;\n  gap: 0;\n}\n.inventory-panel .tab-content:has(.equipment-slots-section) .equipment-slots-section {\n  border-bottom: 3px solid var(--border-color);\n  border-right: none;\n  flex-shrink: 0;\n}\n.inventory-panel .tab-content:has(.equipment-slots-section) .inventory-tab-grid {\n  border-top: 3px solid var(--border-color);\n  border-left: none;\n  flex: 1;\n  min-height: 0;\n}\n.inventory-panel .currency-display {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n  padding: 12px 16px;\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border-color);\n  margin: 0;\n  flex-wrap: wrap;\n}\n.inventory-panel .currency-display .currency-item {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: var(--bg-primary);\n  border-radius: 4px;\n  border: 1px solid var(--border-color);\n  min-width: 120px;\n}\n.inventory-panel .currency-display .currency-item.gold .currency-amount {\n  color: #d4af37;\n}\n.inventory-panel .currency-display .currency-item.gem .currency-amount {\n  color: #9370db;\n}\n.inventory-panel .currency-display .currency-item.crystal .currency-amount {\n  color: #4682b4;\n}\n.inventory-panel .currency-display .currency-item.ticket .currency-amount {\n  color: #db7093;\n}\n.inventory-panel .currency-display .currency-item .currency-icon {\n  font-size: 18px;\n}\n.inventory-panel .currency-display .currency-item .currency-label {\n  font-size: 11px;\n  font-weight: 500;\n  color: var(--text-secondary);\n}\n.inventory-panel .currency-display .currency-item .currency-amount {\n  font-size: 15px;\n  font-weight: 600;\n  min-width: 40px;\n  text-align: right;\n}\n.inventory-panel .currency-display .currency-item .currency-unit {\n  font-size: 11px;\n  font-weight: 500;\n  color: var(--text-secondary);\n}\n.inventory-panel .currency-tab-content {\n  padding: 40px;\n  width: 100%;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n.inventory-panel .currency-tab-content .currency-header {\n  margin-bottom: 32px;\n  text-align: center;\n}\n.inventory-panel .currency-tab-content .currency-header .section-title {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 8px;\n}\n.inventory-panel .currency-tab-content .currency-header .currency-subtitle {\n  font-size: 14px;\n  color: var(--text-secondary);\n  margin: 0;\n}\n.inventory-panel .currency-tab-content .currency-grid {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 24px;\n  margin-bottom: 40px;\n}\n@media (max-width: 1200px) {\n  .inventory-panel .currency-tab-content .currency-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n@media (max-width: 768px) {\n  .inventory-panel .currency-tab-content .currency-grid {\n    grid-template-columns: 1fr;\n  }\n}\n.inventory-panel .currency-tab-content .currency-card {\n  position: relative;\n  border-radius: 16px;\n  padding: 24px;\n  overflow: hidden;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  cursor: pointer;\n}\n.inventory-panel .currency-tab-content .currency-card .currency-background {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0.05;\n  transition: opacity 0.3s ease;\n}\n.inventory-panel .currency-tab-content .currency-card .currency-content {\n  position: relative;\n  z-index: 1;\n}\n.inventory-panel .currency-tab-content .currency-card .currency-top {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n.inventory-panel .currency-tab-content .currency-card .currency-top .currency-icon-wrapper {\n  width: 50px;\n  height: 50px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.3s ease;\n}\n.inventory-panel .currency-tab-content .currency-card .currency-top .currency-icon-wrapper .currency-icon {\n  font-size: 28px;\n}\n.inventory-panel .currency-tab-content .currency-card .currency-top .currency-label {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.inventory-panel .currency-tab-content .currency-card .currency-amount-section .currency-amount {\n  display: flex;\n  align-items: baseline;\n  gap: 6px;\n  margin-bottom: 8px;\n}\n.inventory-panel .currency-tab-content .currency-card .currency-amount-section .currency-amount .amount-number {\n  font-size: 32px;\n  font-weight: 700;\n  line-height: 1;\n}\n.inventory-panel .currency-tab-content .currency-card .currency-amount-section .currency-amount .amount-unit {\n  font-size: 16px;\n  font-weight: 600;\n  opacity: 0.7;\n}\n.inventory-panel .currency-tab-content .currency-card .currency-amount-section .currency-usage {\n  font-size: 12px;\n  color: var(--text-secondary);\n  margin: 0;\n}\n.inventory-panel .currency-tab-content .currency-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 32px var(--shadow);\n}\n.inventory-panel .currency-tab-content .currency-card:hover .currency-background {\n  opacity: 0.1;\n}\n.inventory-panel .currency-tab-content .currency-card:hover .currency-icon-wrapper {\n  transform: scale(1.1);\n}\n.inventory-panel .currency-tab-content .currency-card.gold-card {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(245, 158, 11, 0.1),\n      rgba(217, 119, 6, 0.05));\n  border: 2px solid rgba(245, 158, 11, 0.3);\n}\n.inventory-panel .currency-tab-content .currency-card.gold-card .currency-background {\n  background:\n    radial-gradient(\n      circle at top right,\n      #f59e0b,\n      transparent);\n}\n.inventory-panel .currency-tab-content .currency-card.gold-card .currency-icon-wrapper {\n  background: rgba(245, 158, 11, 0.15);\n}\n.inventory-panel .currency-tab-content .currency-card.gold-card .amount-number {\n  color: #f59e0b;\n}\n.inventory-panel .currency-tab-content .currency-card.gem-card {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 92, 246, 0.1),\n      rgba(124, 58, 237, 0.05));\n  border: 2px solid rgba(139, 92, 246, 0.3);\n}\n.inventory-panel .currency-tab-content .currency-card.gem-card .currency-background {\n  background:\n    radial-gradient(\n      circle at top right,\n      #8b5cf6,\n      transparent);\n}\n.inventory-panel .currency-tab-content .currency-card.gem-card .currency-icon-wrapper {\n  background: rgba(139, 92, 246, 0.15);\n}\n.inventory-panel .currency-tab-content .currency-card.gem-card .amount-number {\n  color: #8b5cf6;\n}\n.inventory-panel .currency-tab-content .currency-card.crystal-card {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.1),\n      rgba(37, 99, 235, 0.05));\n  border: 2px solid rgba(59, 130, 246, 0.3);\n}\n.inventory-panel .currency-tab-content .currency-card.crystal-card .currency-background {\n  background:\n    radial-gradient(\n      circle at top right,\n      #3b82f6,\n      transparent);\n}\n.inventory-panel .currency-tab-content .currency-card.crystal-card .currency-icon-wrapper {\n  background: rgba(59, 130, 246, 0.15);\n}\n.inventory-panel .currency-tab-content .currency-card.crystal-card .amount-number {\n  color: #3b82f6;\n}\n.inventory-panel .currency-tab-content .currency-card.ticket-card {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(236, 72, 153, 0.1),\n      rgba(219, 39, 119, 0.05));\n  border: 2px solid rgba(236, 72, 153, 0.3);\n}\n.inventory-panel .currency-tab-content .currency-card.ticket-card .currency-background {\n  background:\n    radial-gradient(\n      circle at top right,\n      #ec4899,\n      transparent);\n}\n.inventory-panel .currency-tab-content .currency-card.ticket-card .currency-icon-wrapper {\n  background: rgba(236, 72, 153, 0.15);\n}\n.inventory-panel .currency-tab-content .currency-card.ticket-card .amount-number {\n  color: #ec4899;\n}\n.inventory-panel .currency-tab-content .currency-guide {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 12px;\n  padding: 20px;\n}\n.inventory-panel .currency-tab-content .currency-guide .guide-title {\n  font-size: 15px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin: 0 0 16px 0;\n}\n.inventory-panel .currency-tab-content .currency-guide .guide-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.inventory-panel .currency-tab-content .currency-guide .guide-list .guide-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n  transition: all 0.2s ease;\n}\n.inventory-panel .currency-tab-content .currency-guide .guide-list .guide-item .guide-icon {\n  font-size: 20px;\n  flex-shrink: 0;\n}\n.inventory-panel .currency-tab-content .currency-guide .guide-list .guide-item .guide-text {\n  font-size: 14px;\n  color: var(--text-secondary);\n}\n.inventory-panel .currency-tab-content .currency-guide .guide-list .guide-item:hover {\n  border-color: var(--accent-color);\n  background: var(--bg-secondary);\n}\n.inventory-panel .shop-wrapper {\n  padding: 40px;\n  height: 100%;\n  overflow-y: auto;\n  width: 100%;\n  max-width: 1600px;\n  margin: 0 auto;\n}\n.inventory-panel .shop-wrapper .shop-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 32px;\n  padding-bottom: 24px;\n  border-bottom: 2px solid var(--border-color);\n}\n.inventory-panel .shop-wrapper .shop-header .shop-title-section .shop-title {\n  font-size: 22px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 8px 0;\n}\n.inventory-panel .shop-wrapper .shop-header .shop-title-section .shop-subtitle {\n  font-size: 14px;\n  color: var(--text-secondary);\n  margin: 0;\n}\n.inventory-panel .shop-wrapper .shop-header .shop-wallet {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(245, 158, 11, 0.1),\n      rgba(217, 119, 6, 0.05));\n  border: 2px solid rgba(245, 158, 11, 0.3);\n  border-radius: 12px;\n}\n.inventory-panel .shop-wrapper .shop-header .shop-wallet .wallet-icon {\n  font-size: 28px;\n}\n.inventory-panel .shop-wrapper .shop-header .shop-wallet .wallet-info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n.inventory-panel .shop-wrapper .shop-header .shop-wallet .wallet-info .wallet-label {\n  font-size: 11px;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.inventory-panel .shop-wrapper .shop-header .shop-wallet .wallet-info .wallet-amount {\n  font-size: 20px;\n  font-weight: 700;\n  color: #f59e0b;\n}\n.inventory-panel .shop-wrapper .shop-items-container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 28px;\n}\n@media (min-width: 1400px) {\n  .inventory-panel .shop-wrapper .shop-items-container {\n    grid-template-columns: repeat(4, 1fr);\n  }\n}\n@media (min-width: 1000px) and (max-width: 1399px) {\n  .inventory-panel .shop-wrapper .shop-items-container {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n@media (min-width: 700px) and (max-width: 999px) {\n  .inventory-panel .shop-wrapper .shop-items-container {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n@media (max-width: 699px) {\n  .inventory-panel .shop-wrapper .shop-items-container {\n    grid-template-columns: 1fr;\n  }\n}\n.inventory-panel .shop-wrapper .shop-item-card {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 0;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.inventory-panel .shop-wrapper .shop-item-card::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.inventory-panel .shop-wrapper .shop-item-card:hover {\n  transform: translateY(-6px);\n  box-shadow: 0 16px 48px var(--shadow);\n  border-color: var(--accent-color);\n}\n.inventory-panel .shop-wrapper .shop-item-card:hover::before {\n  opacity: 1;\n}\n.inventory-panel .shop-wrapper .shop-item-card:hover .item-icon-large {\n  transform: scale(1.15) rotate(5deg);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-legendary {\n  border-color: rgba(245, 158, 11, 0.5);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-legendary::before {\n  background:\n    linear-gradient(\n      90deg,\n      #f59e0b,\n      #ef4444);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-legendary .item-grade-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b,\n      #ef4444);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-epic {\n  border-color: rgba(168, 85, 247, 0.5);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-epic::before {\n  background:\n    linear-gradient(\n      90deg,\n      #a855f7,\n      #8b5cf6);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-epic .item-grade-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #a855f7,\n      #8b5cf6);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-rare {\n  border-color: rgba(139, 92, 246, 0.5);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-rare::before {\n  background:\n    linear-gradient(\n      90deg,\n      #8b5cf6,\n      #3b82f6);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-rare .item-grade-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6,\n      #3b82f6);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-uncommon {\n  border-color: rgba(16, 185, 129, 0.5);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-uncommon::before {\n  background:\n    linear-gradient(\n      90deg,\n      #10b981,\n      #06b6d4);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-uncommon .item-grade-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #06b6d4);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-common {\n  border-color: rgba(107, 114, 128, 0.5);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-common::before {\n  background:\n    linear-gradient(\n      90deg,\n      #6b7280,\n      #9ca3af);\n}\n.inventory-panel .shop-wrapper .shop-item-card.grade-common .item-grade-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #6b7280,\n      #9ca3af);\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-badge-container {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  right: 12px;\n  display: flex;\n  justify-content: space-between;\n  z-index: 2;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-badge-container .item-grade-badge,\n.inventory-panel .shop-wrapper .shop-item-card .item-badge-container .item-type-badge {\n  padding: 6px 12px;\n  border-radius: 8px;\n  font-size: 11px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  color: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-badge-container .item-type-badge {\n  background: rgba(0, 0, 0, 0.6);\n  -webkit-backdrop-filter: blur(8px);\n  backdrop-filter: blur(8px);\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-image-section {\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-tertiary),\n      var(--bg-primary));\n  padding: 40px 20px 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-bottom: 1px solid var(--border-color);\n  position: relative;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-image-section .item-icon-large {\n  font-size: 64px;\n  transition: transform 0.3s ease;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-info-section {\n  padding: 20px;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-info-section .item-name {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n  line-height: 1.3;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-info-section .item-description {\n  font-size: 13px;\n  color: var(--text-secondary);\n  line-height: 1.6;\n  margin: 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-info-section .item-stats-row {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-info-section .item-stats-row .stat-chip {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 10px;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-info-section .item-stats-row .stat-chip .stat-icon {\n  font-size: 14px;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-info-section .item-stats-row .stat-chip .stat-value {\n  color: var(--accent-color);\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-info-section .item-effects {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-info-section .item-effects .effect-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: rgba(139, 92, 246, 0.05);\n  border: 1px solid rgba(139, 92, 246, 0.2);\n  border-radius: 8px;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-info-section .item-effects .effect-item .effect-icon {\n  font-size: 14px;\n  flex-shrink: 0;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-info-section .item-effects .effect-item .effect-text {\n  font-size: 12px;\n  color: var(--text-secondary);\n  line-height: 1.4;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-purchase-section {\n  padding: 16px 20px;\n  background: var(--bg-tertiary);\n  border-top: 1px solid var(--border-color);\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-purchase-section .item-price-display {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-purchase-section .item-price-display .price-icon {\n  font-size: 20px;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-purchase-section .item-price-display .price-amount {\n  font-size: 24px;\n  font-weight: 700;\n  color: #f59e0b;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-purchase-section .item-price-display .price-unit {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-purchase-section .purchase-button {\n  width: 100%;\n  padding: 14px 20px;\n  border-radius: 10px;\n  font-size: 15px;\n  font-weight: 700;\n  border: none;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-purchase-section .purchase-button .btn-icon {\n  font-size: 18px;\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-purchase-section .purchase-button.can-buy {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669);\n  color: white;\n  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-purchase-section .purchase-button.can-buy:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #059669,\n      #047857);\n  box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);\n  transform: translateY(-2px);\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-purchase-section .purchase-button.can-buy:active {\n  transform: translateY(0);\n}\n.inventory-panel .shop-wrapper .shop-item-card .item-purchase-section .purchase-button.cannot-buy {\n  background: var(--bg-secondary);\n  color: var(--text-secondary);\n  border: 2px solid var(--border-color);\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n.inventory-panel .shop-wrapper .empty-shop-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 80px 20px;\n  text-align: center;\n}\n.inventory-panel .shop-wrapper .empty-shop-state .empty-icon {\n  font-size: 80px;\n  margin-bottom: 24px;\n  opacity: 0.6;\n}\n.inventory-panel .shop-wrapper .empty-shop-state .empty-title {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.inventory-panel .shop-wrapper .empty-shop-state .empty-message {\n  font-size: 15px;\n  color: var(--text-secondary);\n  margin: 0 0 24px 0;\n  line-height: 1.6;\n}\n.inventory-panel .shop-wrapper .empty-shop-state .empty-hint {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 10px;\n}\n.inventory-panel .shop-wrapper .empty-shop-state .empty-hint .hint-icon {\n  font-size: 18px;\n}\n.inventory-panel .shop-wrapper .empty-shop-state .empty-hint .hint-text {\n  font-size: 13px;\n  color: var(--text-secondary);\n}\n.inventory-panel .section-title {\n  font-size: 16px;\n  font-weight: 700;\n  color: var(--text-primary);\n  padding: 16px 20px 12px;\n  margin: 0;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.1),\n      rgba(37, 99, 235, 0.1));\n  border-bottom: 2px solid rgba(59, 130, 246, 0.3);\n  text-align: center;\n}\n.inventory-panel .equipment-slots-section {\n  padding: 20px;\n  margin-bottom: 0;\n  border-bottom: 3px solid var(--border-color);\n  background: var(--bg-secondary);\n  height: auto;\n  overflow: visible;\n  flex-shrink: 0;\n}\n.inventory-panel .equipment-slots-section .section-title {\n  font-size: 22px;\n  margin-bottom: 30px;\n}\n.inventory-panel .equipment-slots-section::-webkit-scrollbar {\n  width: 10px;\n}\n.inventory-panel .equipment-slots-section::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.2);\n}\n.inventory-panel .equipment-slots-section::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 5px;\n}\n.inventory-panel .equipment-slots-section::-webkit-scrollbar-thumb:hover {\n  background: var(--accent-primary);\n}\n.inventory-panel .diablo-equipment-layout {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 30px;\n  max-width: 100%;\n  width: 100%;\n  margin: 0;\n}\n.inventory-panel .diablo-equipment-layout .equipment-column {\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n}\n.inventory-panel .diablo-equipment-layout .equipment-rings-row {\n  grid-column: 1/-1;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 30px;\n  max-width: 800px;\n  margin: 0 auto;\n  width: 100%;\n}\n@media (max-width: 1200px) {\n  .inventory-panel .diablo-equipment-layout {\n    gap: 16px;\n  }\n  .inventory-panel .diablo-equipment-layout .equipment-column {\n    gap: 16px;\n  }\n  .inventory-panel .diablo-equipment-layout .equipment-rings-row {\n    gap: 16px;\n    max-width: 600px;\n  }\n}\n@media (max-width: 768px) {\n  .inventory-panel .diablo-equipment-layout {\n    grid-template-columns: 1fr;\n    gap: 12px;\n    padding: 20px;\n  }\n  .inventory-panel .diablo-equipment-layout .equipment-column {\n    gap: 12px;\n  }\n  .inventory-panel .diablo-equipment-layout .equipment-rings-row {\n    grid-template-columns: 1fr 1fr;\n    gap: 12px;\n    max-width: 100%;\n  }\n}\n@media (max-width: 480px) {\n  .inventory-panel .diablo-equipment-layout {\n    padding: 16px;\n    gap: 10px;\n  }\n  .inventory-panel .diablo-equipment-layout .equipment-column {\n    gap: 10px;\n  }\n  .inventory-panel .diablo-equipment-layout .equipment-rings-row {\n    gap: 10px;\n  }\n}\n.inventory-panel .equipment-slot-diablo {\n  position: relative;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 30, 0.9),\n      rgba(20, 20, 20, 0.95));\n  border: 3px solid var(--border-color);\n  border-radius: 16px;\n  padding: 24px;\n  min-height: 140px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: inset 0 2px 12px var(--shadow), 0 6px 16px var(--shadow);\n}\n.inventory-panel .equipment-slot-diablo::before {\n  content: "";\n  position: absolute;\n  inset: 5px;\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 12px;\n  pointer-events: none;\n  opacity: 0.5;\n}\n.inventory-panel .equipment-slot-diablo .slot-icon {\n  font-size: 48px;\n  opacity: 0.4;\n  margin-bottom: 12px;\n  filter: grayscale(100%);\n  transition: all 0.3s ease;\n}\n.inventory-panel .equipment-slot-diablo .slot-empty-text {\n  font-size: 13px;\n  color: var(--text-muted);\n  text-transform: uppercase;\n  letter-spacing: 1.5px;\n  font-weight: 700;\n  text-align: center;\n}\n.inventory-panel .equipment-slot-diablo:not(.has-item):hover {\n  border-color: rgba(59, 130, 246, 0.5);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 30, 0.95),\n      rgb(20, 20, 20));\n}\n.inventory-panel .equipment-slot-diablo:not(.has-item):hover .slot-icon {\n  opacity: 0.6;\n}\n.inventory-panel .equipment-slot-diablo:not(.has-item):hover .slot-empty-text {\n  color: rgba(59, 130, 246, 0.8);\n}\n.inventory-panel .equipment-slot-diablo.has-item {\n  border-color: var(--accent-primary);\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 50, 0.95),\n      rgb(20, 20, 40));\n  box-shadow: inset 0 2px 12px var(--shadow), 0 6px 20px rgba(59, 130, 246, 0.25);\n}\n.inventory-panel .equipment-slot-diablo.has-item .slot-icon {\n  opacity: 1;\n  filter: grayscale(0%) drop-shadow(0 0 8px currentColor);\n  font-size: 52px;\n}\n.inventory-panel .equipment-slot-diablo.has-item:hover {\n  box-shadow: inset 0 2px 12px var(--shadow), 0 12px 30px rgba(59, 130, 246, 0.4);\n}\n.inventory-panel .equipment-slot-diablo.rarity-common.has-item {\n  border-color: #9ca3af;\n  box-shadow: inset 0 2px 12px var(--shadow), 0 0 20px rgba(156, 163, 175, 0.4);\n}\n.inventory-panel .equipment-slot-diablo.rarity-uncommon.has-item {\n  border-color: #10b981;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 50, 40, 0.95),\n      rgb(20, 40, 30));\n  box-shadow: inset 0 2px 12px var(--shadow), 0 0 25px rgba(16, 185, 129, 0.6);\n  animation: uncommon-glow 2s ease-in-out infinite;\n}\n.inventory-panel .equipment-slot-diablo.rarity-rare.has-item {\n  border-color: #3b82f6;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 40, 60, 0.95),\n      rgb(20, 30, 50));\n  box-shadow: inset 0 2px 12px var(--shadow), 0 0 30px rgba(59, 130, 246, 0.7);\n  animation: rare-glow 2s ease-in-out infinite;\n}\n.inventory-panel .equipment-slot-diablo.rarity-epic.has-item {\n  border-color: #a855f7;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(50, 30, 60, 0.95),\n      rgb(40, 20, 50));\n  box-shadow: inset 0 2px 12px var(--shadow), 0 0 35px rgba(168, 85, 247, 0.8);\n  animation: epic-glow 2s ease-in-out infinite;\n}\n.inventory-panel .equipment-slot-diablo.rarity-legendary.has-item {\n  border-color: #f97316;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(60, 30, 20, 0.95),\n      rgb(50, 20, 10));\n  box-shadow: inset 0 2px 12px var(--shadow), 0 0 45px rgba(249, 115, 22, 0.9);\n  animation: legendary-glow-diablo 1.5s ease-in-out infinite;\n}\n.inventory-panel .equipment-slot-diablo.rarity-legendary.has-item::after {\n  content: "";\n  position: absolute;\n  inset: -3px;\n  border: 2px solid rgba(249, 115, 22, 0.4);\n  border-radius: 12px;\n  animation: legendary-pulse-border 1.5s ease-in-out infinite;\n  pointer-events: none;\n}\n.inventory-panel .equipment-slot-diablo .item-tooltip {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 12px;\n  padding: 8px 0;\n  margin-top: 8px;\n}\n.inventory-panel .equipment-slot-diablo .item-tooltip .tooltip-name {\n  flex: 1;\n  font-size: 15px;\n  font-weight: 700;\n  color: #ffffff;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-shadow:\n    0 2px 4px rgb(0, 0, 0),\n    0 0 8px rgba(0, 0, 0, 0.8),\n    0 1px 2px rgba(0, 0, 0, 0.9);\n  letter-spacing: 0.5px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.5),\n      rgba(0, 0, 0, 0.3));\n  padding: 6px 12px;\n  border-radius: 6px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n.inventory-panel .equipment-slot-diablo .item-tooltip .btn-unequip-small {\n  flex-shrink: 0;\n  width: 28px;\n  height: 28px;\n  padding: 0;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(220, 38, 38, 0.9),\n      rgba(185, 28, 28, 0.95));\n  border: 2px solid rgb(220, 38, 38);\n  border-radius: 6px;\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.5);\n  position: relative;\n  z-index: 100;\n  pointer-events: auto;\n}\n.inventory-panel .equipment-slot-diablo .item-tooltip .btn-unequip-small:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgb(185, 28, 28),\n      rgb(153, 27, 27));\n  transform: scale(1.1);\n  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.6);\n}\n.inventory-panel .equipment-slot-diablo .item-tooltip .btn-unequip-small:active {\n  transform: scale(0.95);\n}\n@media (max-width: 1200px) {\n  .inventory-panel .equipment-slot-diablo {\n    padding: 20px;\n    min-height: 120px;\n  }\n  .inventory-panel .equipment-slot-diablo .slot-icon {\n    font-size: 42px;\n  }\n  .inventory-panel .equipment-slot-diablo.has-item .slot-icon {\n    font-size: 46px;\n  }\n  .inventory-panel .equipment-slot-diablo .item-tooltip .tooltip-name {\n    font-size: 13px;\n  }\n}\n@media (max-width: 768px) {\n  .inventory-panel .equipment-slot-diablo {\n    padding: 18px;\n    min-height: 100px;\n  }\n  .inventory-panel .equipment-slot-diablo .slot-icon {\n    font-size: 36px;\n  }\n  .inventory-panel .equipment-slot-diablo.has-item .slot-icon {\n    font-size: 40px;\n  }\n  .inventory-panel .equipment-slot-diablo .slot-empty-text {\n    font-size: 11px;\n  }\n  .inventory-panel .equipment-slot-diablo .item-tooltip .tooltip-name {\n    font-size: 12px;\n  }\n  .inventory-panel .equipment-slot-diablo .item-tooltip .btn-unequip-small {\n    width: 24px;\n    height: 24px;\n    font-size: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .inventory-panel .equipment-slot-diablo {\n    padding: 14px;\n    min-height: 85px;\n  }\n  .inventory-panel .equipment-slot-diablo .slot-icon {\n    font-size: 30px;\n    margin-bottom: 8px;\n  }\n  .inventory-panel .equipment-slot-diablo.has-item .slot-icon {\n    font-size: 34px;\n  }\n  .inventory-panel .equipment-slot-diablo .slot-empty-text {\n    font-size: 10px;\n    letter-spacing: 1px;\n  }\n  .inventory-panel .equipment-slot-diablo .item-tooltip .tooltip-name {\n    font-size: 11px;\n  }\n  .inventory-panel .equipment-slot-diablo .item-tooltip .btn-unequip-small {\n    width: 22px;\n    height: 22px;\n    font-size: 13px;\n  }\n}\n.inventory-panel .section-title {\n  font-size: 20px;\n  font-weight: 800;\n  margin-bottom: 24px;\n  text-align: center;\n  color: var(--text-primary);\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);\n  padding-bottom: 16px;\n  border-bottom: 2px solid var(--border-color);\n}\n.inventory-panel .inventory-items-section {\n  background: var(--bg-primary);\n  padding: 20px;\n}\n.inventory-panel .inventory-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  gap: 16px;\n  width: 100%;\n}\n.inventory-tab-grid {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow: visible;\n  width: 100%;\n  flex: 1;\n}\n.inventory-tab-grid .section-title {\n  padding: 16px;\n  margin: 0;\n  background: var(--bg-tertiary);\n  border-bottom: 2px solid var(--border-color);\n  font-size: 18px;\n}\n.inventory-controls {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-bottom: 2px solid var(--border-color);\n  gap: 16px;\n  flex-wrap: wrap;\n}\n.inventory-controls .filter-buttons {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.inventory-controls .filter-buttons button {\n  padding: 8px 16px;\n  border: 2px solid var(--border-color);\n  border-radius: 6px;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.inventory-controls .filter-buttons button:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--accent-primary);\n  transform: translateY(-2px);\n}\n.inventory-controls .filter-buttons button.active {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6,\n      #2563eb);\n  color: white;\n  border-color: #3b82f6;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n  transform: translateY(-2px);\n}\n.inventory-controls .sort-controls {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.inventory-controls .sort-controls label {\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.inventory-controls .sort-controls select {\n  padding: 8px 12px;\n  border: 2px solid var(--border-color);\n  border-radius: 6px;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  font-size: 13px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.inventory-controls .sort-controls select:hover {\n  border-color: var(--accent-primary);\n}\n.inventory-controls .sort-controls select:focus {\n  outline: none;\n  border-color: var(--accent-primary);\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n.inventory-controls .sort-controls .btn-auto-sort {\n  padding: 8px 16px;\n  border: 2px solid var(--border-color);\n  border-radius: 6px;\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6,\n      #2563eb);\n  color: white;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.inventory-controls .sort-controls .btn-auto-sort:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #2563eb,\n      #1d4ed8);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);\n}\n.inventory-controls .sort-controls .btn-auto-sort:active {\n  transform: translateY(0);\n}\n.inventory-grid-container {\n  flex: 1;\n  overflow: visible;\n  padding: 16px;\n  background: var(--bg-primary);\n}\n.inventory-grid-cells {\n  display: grid;\n  grid-template-columns: repeat(8, 1fr);\n  gap: 12px;\n  width: 100%;\n  max-width: 100%;\n}\n@media (max-width: 1400px) {\n  .inventory-grid-cells {\n    grid-template-columns: repeat(6, 1fr);\n    gap: 10px;\n  }\n}\n@media (max-width: 1000px) {\n  .inventory-grid-cells {\n    grid-template-columns: repeat(5, 1fr);\n    gap: 10px;\n  }\n}\n@media (max-width: 768px) {\n  .inventory-grid-cells {\n    grid-template-columns: repeat(4, 1fr);\n    gap: 8px;\n  }\n}\n@media (max-width: 480px) {\n  .inventory-grid-cells {\n    grid-template-columns: repeat(3, 1fr);\n    gap: 6px;\n  }\n}\n.inventory-cell {\n  position: relative;\n  aspect-ratio: 1;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 30, 0.8),\n      rgba(20, 20, 20, 0.9));\n  border: 3px solid var(--border-color);\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  overflow: hidden;\n}\n.inventory-cell::before {\n  content: "";\n  position: absolute;\n  inset: 3px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 7px;\n  pointer-events: none;\n}\n.inventory-cell .cell-content {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 8px;\n  z-index: 1;\n}\n.inventory-cell .cell-icon {\n  font-size: 40px;\n  margin-bottom: 4px;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));\n}\n@media (max-width: 768px) {\n  .inventory-cell .cell-icon {\n    font-size: 32px;\n  }\n}\n.inventory-cell .cell-name {\n  font-size: 11px;\n  font-weight: 700;\n  color: var(--text-primary);\n  text-align: center;\n  line-height: 1.2;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 100%;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);\n  letter-spacing: 0.3px;\n}\n@media (max-width: 768px) {\n  .inventory-cell .cell-name {\n    font-size: 10px;\n  }\n}\n.inventory-cell .cell-quantity {\n  position: absolute;\n  bottom: 6px;\n  right: 6px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(0, 0, 0, 0.9),\n      rgba(0, 0, 0, 0.8));\n  color: white;\n  font-size: 12px;\n  font-weight: bold;\n  padding: 3px 8px;\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);\n  z-index: 2;\n}\n.inventory-cell:hover:not(.empty) {\n  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.5);\n  z-index: 10;\n}\n.inventory-cell:active:not(.empty) {\n  opacity: 0.9;\n}\n.inventory-cell.rarity-common {\n  border-color: #9ca3af;\n}\n.inventory-cell.rarity-common .cell-name {\n  color: #d1d5db;\n}\n.inventory-cell.rarity-common:hover {\n  border-color: #d1d5db;\n  box-shadow: 0 12px 28px rgba(156, 163, 175, 0.4);\n}\n.inventory-cell.rarity-uncommon {\n  border-color: #10b981;\n}\n.inventory-cell.rarity-uncommon .cell-name {\n  color: #34d399;\n}\n.inventory-cell.rarity-uncommon::after {\n  content: "";\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(16, 185, 129, 0.2),\n      transparent 70%);\n  pointer-events: none;\n}\n.inventory-cell.rarity-uncommon:hover {\n  border-color: #34d399;\n  box-shadow: 0 12px 28px rgba(16, 185, 129, 0.5);\n}\n.inventory-cell.rarity-rare {\n  border-color: #3b82f6;\n}\n.inventory-cell.rarity-rare .cell-name {\n  color: #60a5fa;\n}\n.inventory-cell.rarity-rare::after {\n  content: "";\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(59, 130, 246, 0.2),\n      transparent 70%);\n  pointer-events: none;\n}\n.inventory-cell.rarity-rare:hover {\n  border-color: #60a5fa;\n  box-shadow: 0 12px 28px rgba(59, 130, 246, 0.6);\n}\n.inventory-cell.rarity-epic {\n  border-color: #a855f7;\n}\n.inventory-cell.rarity-epic .cell-name {\n  color: #c084fc;\n}\n.inventory-cell.rarity-epic::after {\n  content: "";\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(168, 85, 247, 0.25),\n      transparent 70%);\n  pointer-events: none;\n  animation: epic-glow-pulse 2s ease-in-out infinite;\n}\n.inventory-cell.rarity-epic:hover {\n  border-color: #c084fc;\n  box-shadow: 0 12px 28px rgba(168, 85, 247, 0.7);\n}\n.inventory-cell.rarity-legendary {\n  border-color: #f97316;\n}\n.inventory-cell.rarity-legendary .cell-name {\n  color: #fb923c;\n  animation: legendary-text-glow 2s ease-in-out infinite;\n}\n.inventory-cell.rarity-legendary::after {\n  content: "";\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(249, 115, 22, 0.3),\n      transparent 70%);\n  pointer-events: none;\n  animation: legendary-glow-pulse 1.5s ease-in-out infinite;\n}\n.inventory-cell.rarity-legendary:hover {\n  border-color: #fb923c;\n  box-shadow: 0 12px 32px rgba(249, 115, 22, 0.9);\n}\n.inventory-cell.rarity-unique {\n  border-color: #14b8a6;\n}\n.inventory-cell.rarity-unique .cell-name {\n  color: #5eead4;\n}\n.inventory-cell.rarity-unique::after {\n  content: "";\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(20, 184, 166, 0.25),\n      transparent 70%);\n  pointer-events: none;\n}\n.inventory-cell.rarity-unique:hover {\n  border-color: #5eead4;\n  box-shadow: 0 12px 28px rgba(20, 184, 166, 0.7);\n}\n.inventory-cell.rarity-mythic {\n  border-color: #ec4899;\n}\n.inventory-cell.rarity-mythic .cell-name {\n  color: #f9a8d4;\n  animation: mythic-text-glow 1.5s ease-in-out infinite;\n}\n.inventory-cell.rarity-mythic::after {\n  content: "";\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(\n      circle at 50% 50%,\n      rgba(236, 72, 153, 0.3),\n      transparent 70%);\n  pointer-events: none;\n  animation: mythic-glow-pulse 1.2s ease-in-out infinite;\n}\n.inventory-cell.rarity-mythic:hover {\n  border-color: #f9a8d4;\n  box-shadow: 0 12px 32px rgba(236, 72, 153, 0.9);\n}\n.inventory-cell.empty {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(20, 20, 20, 0.3),\n      rgba(15, 15, 15, 0.4));\n  border-color: rgba(255, 255, 255, 0.05);\n  cursor: default;\n}\n.inventory-cell.empty::before {\n  border-color: rgba(255, 255, 255, 0.03);\n}\n.inventory-cell.empty .empty-icon {\n  font-size: 28px;\n  opacity: 0.15;\n  filter: grayscale(100%);\n}\n.inventory-cell.empty:hover {\n  transform: none;\n  box-shadow: none;\n  border-color: rgba(255, 255, 255, 0.08);\n}\n.inventory-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  background: var(--bg-secondary);\n  border-top: 2px solid var(--border-color);\n}\n.inventory-footer .inventory-count {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.inventory-footer .inventory-weight {\n  font-size: 13px;\n  color: var(--text-muted);\n}\n@keyframes icon-bounce {\n  0%, 100% {\n    transform: translateY(0) scale(1);\n  }\n  50% {\n    transform: translateY(-4px) scale(1.1);\n  }\n}\n@keyframes epic-glow-pulse {\n  0%, 100% {\n    opacity: 0.25;\n  }\n  50% {\n    opacity: 0.4;\n  }\n}\n@keyframes legendary-glow-pulse {\n  0%, 100% {\n    opacity: 0.3;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n@keyframes legendary-text-glow {\n  0%, 100% {\n    text-shadow: 0 0 10px rgba(249, 115, 22, 0.8), 0 2px 4px rgba(0, 0, 0, 0.8);\n  }\n  50% {\n    text-shadow: 0 0 20px rgb(249, 115, 22), 0 2px 4px rgba(0, 0, 0, 0.8);\n  }\n}\n@keyframes mythic-glow-pulse {\n  0%, 100% {\n    opacity: 0.3;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n@keyframes mythic-text-glow {\n  0%, 100% {\n    text-shadow: 0 0 10px rgba(236, 72, 153, 0.8), 0 2px 4px rgba(0, 0, 0, 0.8);\n  }\n  50% {\n    text-shadow: 0 0 20px rgb(236, 72, 153), 0 2px 4px rgba(0, 0, 0, 0.8);\n  }\n}\n.drag-preview {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 12px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(30, 30, 30, 0.95),\n      rgba(20, 20, 20, 0.98));\n  border: 3px solid var(--accent-primary);\n  border-radius: 10px;\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.8), 0 0 20px rgba(59, 130, 246, 0.6);\n  opacity: 0.9;\n  cursor: grabbing;\n  min-width: 100px;\n  min-height: 100px;\n}\n.drag-preview .preview-icon {\n  font-size: 48px;\n  margin-bottom: 8px;\n  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.8));\n  animation: drag-icon-pulse 0.5s ease-in-out infinite;\n}\n.drag-preview .preview-name {\n  font-size: 13px;\n  font-weight: 700;\n  color: white;\n  text-align: center;\n  text-shadow: 0 2px 6px rgba(0, 0, 0, 0.9);\n}\n.cdk-drag-placeholder {\n  opacity: 0.3;\n  background: rgba(255, 255, 255, 0.05) !important;\n  border: 2px dashed rgba(255, 255, 255, 0.3) !important;\n}\n.cdk-drag-placeholder * {\n  opacity: 0;\n}\n.cdk-drag-animating {\n  transition: transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1);\n}\n.cdk-drag {\n  cursor: grab;\n  transition: all 0.2s ease;\n}\n.cdk-drag:active {\n  cursor: grabbing;\n}\n.inventory-grid-cells.cdk-drop-list-dragging .inventory-cell:not(.cdk-drag-placeholder) {\n  transition: transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1);\n}\n.cdk-drop-list-receiving {\n  background: rgba(59, 130, 246, 0.05);\n  border-color: var(--accent-primary);\n}\n.cdk-drop-list-receiving::before {\n  content: "";\n  position: absolute;\n  inset: 0;\n  border: 2px solid var(--accent-primary);\n  border-radius: 8px;\n  pointer-events: none;\n  animation: drop-zone-pulse 1s ease-in-out infinite;\n}\n@keyframes drag-icon-pulse {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.1);\n  }\n}\n@keyframes drop-zone-pulse {\n  0%, 100% {\n    opacity: 0.5;\n    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);\n  }\n  50% {\n    opacity: 1;\n    box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);\n  }\n}\n.cdk-drag-preview {\n  cursor: grabbing !important;\n}\n.equipment-slot-diablo {\n  transition: all 0.3s ease;\n}\n.equipment-slot-diablo.cdk-drop-list-dragging {\n  border-style: dashed;\n  border-width: 3px;\n  background: rgba(59, 130, 246, 0.05);\n}\n.equipment-slot-diablo.cdk-drop-list-receiving {\n  border-color: #3b82f6 !important;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(59, 130, 246, 0.2),\n      rgba(37, 99, 235, 0.15)) !important;\n  box-shadow: inset 0 0 20px rgba(59, 130, 246, 0.3), 0 0 20px rgba(59, 130, 246, 0.5) !important;\n  animation: equipment-drop-pulse 1s ease-in-out infinite;\n  transform: scale(1.05);\n}\n.equipment-slot-diablo.cdk-drop-list-receiving .slot-icon {\n  animation: equipment-icon-bounce 0.5s ease-in-out infinite;\n  filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.8));\n}\n.equipment-slot-diablo.cdk-drop-list-receiving .slot-empty-text {\n  color: #3b82f6;\n  font-weight: 700;\n  text-shadow: 0 0 10px rgba(59, 130, 246, 0.8);\n}\n.equipment-slot-diablo .cdk-drag {\n  cursor: grab;\n}\n.equipment-slot-diablo .cdk-drag:active {\n  cursor: grabbing;\n}\n.equipment-slot-diablo .cdk-drag-placeholder {\n  opacity: 0.3;\n  border: 2px dashed var(--border-color);\n}\n.equipment-slot-diablo .cdk-drag-placeholder .item-tooltip {\n  opacity: 0;\n}\n.equipment-slot-diablo .cdk-drag-animating {\n  transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1);\n}\n@keyframes equipment-drop-pulse {\n  0%, 100% {\n    box-shadow: inset 0 0 20px rgba(59, 130, 246, 0.3), 0 0 20px rgba(59, 130, 246, 0.5);\n  }\n  50% {\n    box-shadow: inset 0 0 30px rgba(59, 130, 246, 0.5), 0 0 30px rgba(59, 130, 246, 0.8);\n  }\n}\n@keyframes equipment-icon-bounce {\n  0%, 100% {\n    transform: translateY(0) scale(1);\n  }\n  50% {\n    transform: translateY(-8px) scale(1.15);\n  }\n}\n@keyframes legendary-glow-diablo {\n  0%, 100% {\n    box-shadow: inset 0 2px 8px var(--shadow), 0 0 40px rgba(249, 115, 22, 0.8);\n    border-color: #f97316;\n  }\n  50% {\n    box-shadow: inset 0 2px 8px var(--shadow), 0 0 60px rgb(249, 115, 22);\n    border-color: #fb923c;\n  }\n}\n@keyframes legendary-pulse-border {\n  0%, 100% {\n    opacity: 0.3;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.6;\n    transform: scale(1.05);\n  }\n}\n@keyframes legendary-glow {\n  0%, 100% {\n    box-shadow: 0 0 12px rgba(249, 115, 22, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(249, 115, 22, 0.8);\n  }\n}\n@keyframes legendary-pulse {\n  0%, 100% {\n    box-shadow: 0 0 20px rgba(249, 115, 22, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 30px rgba(249, 115, 22, 0.8);\n  }\n}\n.menu-divider {\n  height: 1px;\n  background: var(--border-color);\n  margin: 12px 0;\n  opacity: 0.5;\n}\n@media (max-width: 768px) {\n  .menu-divider {\n    margin: 16px 0;\n  }\n}\n.menu-section-title {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 8px 16px;\n  margin-top: 4px;\n}\n@media (max-width: 768px) {\n  .menu-section-title {\n    font-size: 13px;\n    padding: 10px 18px;\n    margin-top: 6px;\n  }\n}\n@media (max-width: 480px) {\n  .menu-section-title {\n    font-size: 14px;\n  }\n}\n.menu-item.success {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669);\n  color: white;\n}\n.menu-item.success:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #059669,\n      #047857);\n  transform: translateX(8px);\n}\n.menu-item.warning {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b,\n      #d97706);\n  color: white;\n}\n.menu-item.warning:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #d97706,\n      #b45309);\n  transform: translateX(8px);\n}\n.menu-item.danger {\n  background:\n    linear-gradient(\n      135deg,\n      #ef4444,\n      #dc2626);\n  color: white;\n}\n.menu-item.danger:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #dc2626,\n      #b91c1c);\n  transform: translateX(8px);\n}\n.shop-section {\n  margin-top: 40px;\n  padding: 30px;\n  background: var(--bg-primary);\n  border-radius: 16px;\n  border: 1px solid var(--border-color);\n}\n.shop-section .section-header {\n  margin-bottom: 30px;\n}\n.shop-section .section-header h3 {\n  font-size: 2rem;\n  font-weight: 700;\n  margin-bottom: 10px;\n  color: var(--text-primary);\n}\n.shop-section .section-header .section-desc {\n  color: var(--text-secondary);\n  font-size: 1rem;\n}\n.shop-section .section-header .section-desc .gold-amount {\n  color: #f59e0b;\n  font-weight: 700;\n  font-size: 1.1rem;\n}\n.shop-section .shop-items-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 24px;\n  margin-top: 24px;\n}\n.shop-section .shop-items-grid .shop-item-card {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 20px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.shop-section .shop-items-grid .shop-item-card::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.shop-section .shop-items-grid .shop-item-card:hover {\n  transform: translateY(-6px);\n  box-shadow: 0 16px 48px rgba(0, 0, 0, 0.3);\n  border-color: var(--accent-color);\n}\n.shop-section .shop-items-grid .shop-item-card:hover::before {\n  opacity: 1;\n}\n.shop-section .shop-items-grid .shop-item-card.grade-legendary {\n  border-color: rgba(245, 158, 11, 0.5);\n}\n.shop-section .shop-items-grid .shop-item-card.grade-legendary::before {\n  background:\n    linear-gradient(\n      90deg,\n      #f59e0b,\n      #ef4444);\n}\n.shop-section .shop-items-grid .shop-item-card.grade-rare {\n  border-color: rgba(139, 92, 246, 0.5);\n}\n.shop-section .shop-items-grid .shop-item-card.grade-rare::before {\n  background:\n    linear-gradient(\n      90deg,\n      #8b5cf6,\n      #3b82f6);\n}\n.shop-section .shop-items-grid .shop-item-card.grade-uncommon {\n  border-color: rgba(16, 185, 129, 0.5);\n}\n.shop-section .shop-items-grid .shop-item-card.grade-uncommon::before {\n  background:\n    linear-gradient(\n      90deg,\n      #10b981,\n      #06b6d4);\n}\n.shop-section .shop-items-grid .shop-item-card .item-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 12px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid var(--border-color);\n}\n.shop-section .shop-items-grid .shop-item-card .item-header h4 {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n  flex: 1;\n  line-height: 1.3;\n}\n.shop-section .shop-items-grid .shop-item-card .item-header .item-price {\n  font-size: 18px;\n  font-weight: 700;\n  color: #f59e0b;\n  white-space: nowrap;\n  padding: 4px 12px;\n  background: rgba(245, 158, 11, 0.1);\n  border-radius: 8px;\n}\n.shop-section .shop-items-grid .shop-item-card .item-desc {\n  font-size: 14px;\n  color: var(--text-secondary);\n  line-height: 1.6;\n  margin: 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.shop-section .shop-items-grid .shop-item-card .item-stats {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  padding: 8px 0;\n}\n.shop-section .shop-items-grid .shop-item-card .item-stats .stat {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 12px;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.shop-section .shop-items-grid .shop-item-card .item-tags {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.shop-section .shop-items-grid .shop-item-card .item-tags .tag {\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.shop-section .shop-items-grid .shop-item-card .item-tags .tag.type-tag {\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n  border: 1px solid rgba(59, 130, 246, 0.3);\n}\n.shop-section .shop-items-grid .shop-item-card .item-tags .tag.grade-tag {\n  background: rgba(139, 92, 246, 0.1);\n  color: #8b5cf6;\n  border: 1px solid rgba(139, 92, 246, 0.3);\n}\n.shop-section .shop-items-grid .shop-item-card .item-footer {\n  margin-top: auto;\n  padding-top: 12px;\n  border-top: 1px solid var(--border-color);\n}\n.shop-section .shop-items-grid .shop-item-card .item-footer .buy-btn {\n  width: 100%;\n  padding: 12px 20px;\n  border-radius: 10px;\n  font-size: 15px;\n  font-weight: 700;\n  border: none;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669);\n  color: white;\n  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n}\n.shop-section .shop-items-grid .shop-item-card .item-footer .buy-btn:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #059669,\n      #047857);\n  box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);\n  transform: translateY(-2px);\n}\n.shop-section .shop-items-grid .shop-item-card .item-footer .buy-btn:active {\n  transform: translateY(0);\n}\n.shop-section .shop-items-grid .shop-item-card .item-footer .buy-btn.insufficient-gold {\n  background: var(--bg-tertiary);\n  color: var(--text-secondary);\n  border: 2px solid var(--border-color);\n  cursor: not-allowed;\n  opacity: 0.6;\n  box-shadow: none;\n}\n.shop-section .shop-items-grid .shop-item-card .item-footer .buy-btn.insufficient-gold:hover {\n  transform: none;\n  background: var(--bg-tertiary);\n}\n.shop-section .shop-wrapper {\n  padding: 24px;\n}\n.shop-section .shop-wrapper .shop-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 32px;\n  padding-bottom: 24px;\n  border-bottom: 2px solid var(--border-color);\n}\n.shop-section .shop-wrapper .shop-header .shop-title-section .shop-title {\n  font-size: 22px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 8px 0;\n}\n.shop-section .shop-wrapper .shop-header .shop-title-section .shop-subtitle {\n  font-size: 14px;\n  color: var(--text-secondary);\n  margin: 0;\n}\n.shop-section .shop-wrapper .shop-header .shop-wallet {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(245, 158, 11, 0.1),\n      rgba(217, 119, 6, 0.05));\n  border: 2px solid rgba(245, 158, 11, 0.3);\n  border-radius: 12px;\n}\n.shop-section .shop-wrapper .shop-header .shop-wallet .wallet-icon {\n  font-size: 28px;\n}\n.shop-section .shop-wrapper .shop-header .shop-wallet .wallet-info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n.shop-section .shop-wrapper .shop-header .shop-wallet .wallet-info .wallet-label {\n  font-size: 11px;\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.shop-section .shop-wrapper .shop-header .shop-wallet .wallet-info .wallet-amount {\n  font-size: 20px;\n  font-weight: 700;\n  color: #f59e0b;\n}\n.shop-section .shop-wrapper .shop-items-container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 24px;\n}\n.shop-section .shop-wrapper .shop-item-card {\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 16px;\n  padding: 0;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.shop-section .shop-wrapper .shop-item-card::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n.shop-section .shop-wrapper .shop-item-card:hover {\n  transform: translateY(-6px);\n  box-shadow: 0 16px 48px var(--shadow);\n  border-color: var(--accent-color);\n}\n.shop-section .shop-wrapper .shop-item-card:hover::before {\n  opacity: 1;\n}\n.shop-section .shop-wrapper .shop-item-card:hover .item-icon-large {\n  transform: scale(1.15) rotate(5deg);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-legendary {\n  border-color: rgba(245, 158, 11, 0.5);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-legendary::before {\n  background:\n    linear-gradient(\n      90deg,\n      #f59e0b,\n      #ef4444);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-legendary .item-grade-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b,\n      #ef4444);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-epic {\n  border-color: rgba(168, 85, 247, 0.5);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-epic::before {\n  background:\n    linear-gradient(\n      90deg,\n      #a855f7,\n      #8b5cf6);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-epic .item-grade-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #a855f7,\n      #8b5cf6);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-rare {\n  border-color: rgba(139, 92, 246, 0.5);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-rare::before {\n  background:\n    linear-gradient(\n      90deg,\n      #8b5cf6,\n      #3b82f6);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-rare .item-grade-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6,\n      #3b82f6);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-uncommon {\n  border-color: rgba(16, 185, 129, 0.5);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-uncommon::before {\n  background:\n    linear-gradient(\n      90deg,\n      #10b981,\n      #06b6d4);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-uncommon .item-grade-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #06b6d4);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-common {\n  border-color: rgba(107, 114, 128, 0.5);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-common::before {\n  background:\n    linear-gradient(\n      90deg,\n      #6b7280,\n      #9ca3af);\n}\n.shop-section .shop-wrapper .shop-item-card.grade-common .item-grade-badge {\n  background:\n    linear-gradient(\n      135deg,\n      #6b7280,\n      #9ca3af);\n}\n.shop-section .shop-wrapper .shop-item-card .item-badge-container {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  right: 12px;\n  display: flex;\n  justify-content: space-between;\n  z-index: 2;\n}\n.shop-section .shop-wrapper .shop-item-card .item-badge-container .item-grade-badge,\n.shop-section .shop-wrapper .shop-item-card .item-badge-container .item-type-badge {\n  padding: 6px 12px;\n  border-radius: 8px;\n  font-size: 11px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  color: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n.shop-section .shop-wrapper .shop-item-card .item-badge-container .item-type-badge {\n  background: rgba(0, 0, 0, 0.6);\n  -webkit-backdrop-filter: blur(8px);\n  backdrop-filter: blur(8px);\n}\n.shop-section .shop-wrapper .shop-item-card .item-image-section {\n  background:\n    linear-gradient(\n      135deg,\n      var(--bg-tertiary),\n      var(--bg-primary));\n  padding: 40px 20px 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-bottom: 1px solid var(--border-color);\n  position: relative;\n}\n.shop-section .shop-wrapper .shop-item-card .item-image-section .item-icon-large {\n  font-size: 64px;\n  transition: transform 0.3s ease;\n}\n.shop-section .shop-wrapper .shop-item-card .item-info-section {\n  padding: 20px;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.shop-section .shop-wrapper .shop-item-card .item-info-section .item-name {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0;\n  line-height: 1.3;\n}\n.shop-section .shop-wrapper .shop-item-card .item-info-section .item-description {\n  font-size: 13px;\n  color: var(--text-secondary);\n  line-height: 1.6;\n  margin: 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.shop-section .shop-wrapper .shop-item-card .item-info-section .item-stats-row {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.shop-section .shop-wrapper .shop-item-card .item-info-section .item-stats-row .stat-chip {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 10px;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n}\n.shop-section .shop-wrapper .shop-item-card .item-info-section .item-stats-row .stat-chip .stat-icon {\n  font-size: 14px;\n}\n.shop-section .shop-wrapper .shop-item-card .item-info-section .item-stats-row .stat-chip .stat-value {\n  color: var(--accent-color);\n}\n.shop-section .shop-wrapper .shop-item-card .item-info-section .item-effects {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.shop-section .shop-wrapper .shop-item-card .item-info-section .item-effects .effect-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: rgba(139, 92, 246, 0.05);\n  border: 1px solid rgba(139, 92, 246, 0.2);\n  border-radius: 8px;\n}\n.shop-section .shop-wrapper .shop-item-card .item-info-section .item-effects .effect-item .effect-icon {\n  font-size: 14px;\n  flex-shrink: 0;\n}\n.shop-section .shop-wrapper .shop-item-card .item-info-section .item-effects .effect-item .effect-text {\n  font-size: 12px;\n  color: var(--text-secondary);\n  line-height: 1.4;\n}\n.shop-section .shop-wrapper .shop-item-card .item-purchase-section {\n  padding: 16px 20px;\n  background: var(--bg-tertiary);\n  border-top: 1px solid var(--border-color);\n}\n.shop-section .shop-wrapper .shop-item-card .item-purchase-section .item-price-display {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.shop-section .shop-wrapper .shop-item-card .item-purchase-section .item-price-display .price-icon {\n  font-size: 20px;\n}\n.shop-section .shop-wrapper .shop-item-card .item-purchase-section .item-price-display .price-amount {\n  font-size: 24px;\n  font-weight: 700;\n  color: #f59e0b;\n}\n.shop-section .shop-wrapper .shop-item-card .item-purchase-section .item-price-display .price-unit {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n.shop-section .shop-wrapper .shop-item-card .item-purchase-section .purchase-button {\n  width: 100%;\n  padding: 14px 20px;\n  border-radius: 10px;\n  font-size: 15px;\n  font-weight: 700;\n  border: none;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n}\n.shop-section .shop-wrapper .shop-item-card .item-purchase-section .purchase-button .btn-icon {\n  font-size: 18px;\n}\n.shop-section .shop-wrapper .shop-item-card .item-purchase-section .purchase-button.can-buy {\n  background:\n    linear-gradient(\n      135deg,\n      #10b981,\n      #059669);\n  color: white;\n  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n}\n.shop-section .shop-wrapper .shop-item-card .item-purchase-section .purchase-button.can-buy:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #059669,\n      #047857);\n  box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);\n  transform: translateY(-2px);\n}\n.shop-section .shop-wrapper .shop-item-card .item-purchase-section .purchase-button.can-buy:active {\n  transform: translateY(0);\n}\n.shop-section .shop-wrapper .shop-item-card .item-purchase-section .purchase-button.cannot-buy {\n  background: var(--bg-secondary);\n  color: var(--text-secondary);\n  border: 2px solid var(--border-color);\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n.shop-section .shop-wrapper .empty-shop-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 80px 20px;\n  text-align: center;\n}\n.shop-section .shop-wrapper .empty-shop-state .empty-icon {\n  font-size: 80px;\n  margin-bottom: 24px;\n  opacity: 0.6;\n}\n.shop-section .shop-wrapper .empty-shop-state .empty-title {\n  font-size: 20px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin: 0 0 12px 0;\n}\n.shop-section .shop-wrapper .empty-shop-state .empty-message {\n  font-size: 15px;\n  color: var(--text-secondary);\n  margin: 0 0 24px 0;\n  line-height: 1.6;\n}\n.shop-section .shop-wrapper .empty-shop-state .empty-hint {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 10px;\n}\n.shop-section .shop-wrapper .empty-shop-state .empty-hint .hint-icon {\n  font-size: 18px;\n}\n.shop-section .shop-wrapper .empty-shop-state .empty-hint .hint-text {\n  font-size: 13px;\n  color: var(--text-secondary);\n}\n.inventory-tabs {\n  display: flex;\n  gap: 8px;\n  padding: 16px 20px 0;\n  background: var(--bg-secondary);\n  border-bottom: 2px solid var(--border-color);\n  flex-shrink: 0;\n}\n.inventory-tabs .tab-btn {\n  flex: 1;\n  padding: 12px 20px;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-bottom: none;\n  border-radius: 8px 8px 0 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  white-space: nowrap;\n}\n.inventory-tabs .tab-btn:hover:not(.active) {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n}\n.inventory-tabs .tab-btn.active {\n  background: var(--bg-secondary);\n  color: var(--accent-color);\n  border-color: var(--accent-color);\n  border-bottom-color: var(--bg-secondary);\n  transform: translateY(2px);\n}\n.inventory-tabs .tab-btn.active::after {\n  content: "";\n  position: absolute;\n  bottom: -2px;\n  left: 0;\n  right: 0;\n  height: 2px;\n  background: var(--bg-secondary);\n}\n.tab-content {\n  animation: fadeIn 0.3s ease;\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n.shop-content-wrapper {\n  display: none;\n}\n.dungeon-test-dialog {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  z-index: 10000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.dungeon-test-dialog .dialog-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.8);\n  -webkit-backdrop-filter: blur(5px);\n  backdrop-filter: blur(5px);\n}\n.dungeon-test-dialog .dialog-content {\n  position: relative;\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  background: var(--bg-primary);\n  border-radius: 0 !important;\n  box-shadow: none;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.dungeon-test-dialog .dialog-header {\n  padding: 18px 40px;\n  border-bottom: 2px solid var(--border-color);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 215, 0, 0.1) 0%,\n      rgba(255, 140, 0, 0.1) 100%);\n  flex-shrink: 0;\n}\n.dungeon-test-dialog .dialog-header h2 {\n  margin: 0;\n  font-size: 22px;\n  font-weight: bold;\n  color: var(--text-primary);\n}\n.dungeon-test-dialog .dialog-header .close-btn {\n  width: 36px;\n  height: 36px;\n  border: none;\n  background: rgba(255, 255, 255, 0.1);\n  color: var(--text-primary);\n  font-size: 22px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n.dungeon-test-dialog .dialog-header .close-btn:hover {\n  background: rgba(255, 255, 255, 0.2);\n  transform: rotate(90deg);\n}\n.dungeon-test-dialog .dialog-body {\n  padding: 40px 60px;\n  overflow-y: auto;\n  flex: 1;\n}\n.dungeon-test-dialog .dialog-body::-webkit-scrollbar {\n  width: 10px;\n}\n.dungeon-test-dialog .dialog-body::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 5px;\n}\n.dungeon-test-dialog .dialog-body::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 5px;\n}\n.dungeon-test-dialog .dialog-body::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n.dungeon-test-dialog .dialog-body .test-section {\n  margin-bottom: 40px;\n}\n.dungeon-test-dialog .dialog-body .test-section h3 {\n  margin: 0 0 20px 0;\n  font-size: 22px;\n  color: var(--text-primary);\n  font-weight: 600;\n}\n.dungeon-test-dialog .dialog-body .dungeon-type-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n  gap: 20px;\n}\n.dungeon-test-dialog .dialog-body .dungeon-type-grid .dungeon-type-card {\n  padding: 30px;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s;\n  text-align: center;\n}\n.dungeon-test-dialog .dialog-body .dungeon-type-grid .dungeon-type-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);\n  border-color: rgba(255, 215, 0, 0.5);\n}\n.dungeon-test-dialog .dialog-body .dungeon-type-grid .dungeon-type-card.selected {\n  border-color: #ffd700;\n  background: rgba(255, 215, 0, 0.1);\n  box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);\n}\n.dungeon-test-dialog .dialog-body .dungeon-type-grid .dungeon-type-card .dungeon-icon {\n  font-size: 64px;\n  margin-bottom: 16px;\n}\n.dungeon-test-dialog .dialog-body .dungeon-type-grid .dungeon-type-card .dungeon-name {\n  font-size: 20px;\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: var(--text-primary);\n}\n.dungeon-test-dialog .dialog-body .dungeon-type-grid .dungeon-type-card .dungeon-level {\n  font-size: 16px;\n  color: var(--text-secondary);\n  margin-bottom: 6px;\n}\n.dungeon-test-dialog .dialog-body .dungeon-type-grid .dungeon-type-card .dungeon-floors {\n  font-size: 14px;\n  color: var(--text-tertiary);\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\n  gap: 16px;\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid .difficulty-btn {\n  padding: 24px;\n  border: 2px solid var(--border-color);\n  border-radius: 10px;\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  font-size: 18px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid .difficulty-btn .difficulty-mult {\n  font-size: 14px;\n  opacity: 0.7;\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid .difficulty-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid .difficulty-btn.selected {\n  border-width: 3px;\n  box-shadow: 0 0 15px;\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid .difficulty-btn.easy {\n  border-color: #4caf50;\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid .difficulty-btn.easy.selected {\n  background: rgba(76, 175, 80, 0.2);\n  box-shadow: 0 0 15px rgba(76, 175, 80, 0.5);\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid .difficulty-btn.normal {\n  border-color: #2196f3;\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid .difficulty-btn.normal.selected {\n  background: rgba(33, 150, 243, 0.2);\n  box-shadow: 0 0 15px rgba(33, 150, 243, 0.5);\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid .difficulty-btn.hard {\n  border-color: #ff9800;\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid .difficulty-btn.hard.selected {\n  background: rgba(255, 152, 0, 0.2);\n  box-shadow: 0 0 15px rgba(255, 152, 0, 0.5);\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid .difficulty-btn.hell {\n  border-color: #f44336;\n}\n.dungeon-test-dialog .dialog-body .difficulty-grid .difficulty-btn.hell.selected {\n  background: rgba(244, 67, 54, 0.2);\n  box-shadow: 0 0 15px rgba(244, 67, 54, 0.5);\n}\n.dungeon-test-dialog .dialog-body .test-options {\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n}\n.dungeon-test-dialog .dialog-body .test-options .option-item {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 16px 20px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n.dungeon-test-dialog .dialog-body .test-options .option-item:hover {\n  background: rgba(255, 255, 255, 0.05);\n}\n.dungeon-test-dialog .dialog-body .test-options .option-item input[type=checkbox] {\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n}\n.dungeon-test-dialog .dialog-body .test-options .option-item span {\n  font-size: 17px;\n  color: var(--text-primary);\n}\n.dungeon-test-dialog .dialog-body .player-stats {\n  background: var(--bg-secondary);\n  padding: 24px;\n  border-radius: 8px;\n}\n.dungeon-test-dialog .dialog-body .player-stats .stat-row {\n  display: flex;\n  justify-content: space-between;\n  padding: 12px 0;\n  border-bottom: 1px solid var(--border-color);\n}\n.dungeon-test-dialog .dialog-body .player-stats .stat-row:last-child {\n  border-bottom: none;\n}\n.dungeon-test-dialog .dialog-body .player-stats .stat-row label {\n  font-size: 17px;\n  color: var(--text-secondary);\n  font-weight: 500;\n}\n.dungeon-test-dialog .dialog-body .player-stats .stat-row span {\n  font-size: 17px;\n  color: var(--text-primary);\n  font-weight: 600;\n}\n.dungeon-test-dialog .dialog-footer {\n  padding: 24px 60px;\n  border-top: 2px solid var(--border-color);\n  display: flex;\n  justify-content: flex-end;\n  gap: 16px;\n  background: rgba(0, 0, 0, 0.2);\n}\n@media (max-width: 768px) {\n  .dungeon-test-dialog .dialog-footer {\n    padding: 20px 24px;\n    gap: 12px;\n  }\n}\n@media (max-width: 480px) {\n  .dungeon-test-dialog .dialog-footer {\n    padding: 20px 16px;\n    flex-direction: row;\n    justify-content: stretch;\n  }\n  .dungeon-test-dialog .dialog-footer button {\n    flex: 1;\n  }\n}\n.dungeon-test-dialog .dialog-footer button {\n  padding: 14px 32px;\n  font-size: 17px;\n  font-weight: 600;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n@media (max-width: 768px) {\n  .dungeon-test-dialog .dialog-footer button {\n    min-height: 52px;\n    padding: 14px 28px;\n    font-size: 16px;\n  }\n}\n@media (max-width: 480px) {\n  .dungeon-test-dialog .dialog-footer button {\n    min-height: 56px;\n    padding: 16px 24px;\n    font-size: 17px;\n    border-radius: 12px;\n  }\n}\n.dungeon-test-dialog .dialog-footer button.btn-secondary {\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  border: 2px solid var(--border-color);\n}\n@media (max-width: 480px) {\n  .dungeon-test-dialog .dialog-footer button.btn-secondary {\n    background: rgba(239, 68, 68, 0.2);\n    border-color: rgba(239, 68, 68, 0.4);\n    color: #fca5a5;\n  }\n}\n.dungeon-test-dialog .dialog-footer button.btn-secondary:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n.dungeon-test-dialog .dialog-footer button.btn-secondary:active {\n  transform: scale(0.97);\n}\n.dungeon-test-dialog .dialog-footer button.btn-primary {\n  background:\n    linear-gradient(\n      135deg,\n      #ffd700 0%,\n      #ff8c00 100%);\n  color: #000;\n}\n.dungeon-test-dialog .dialog-footer button.btn-primary:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);\n}\n.dungeon-test-dialog .dialog-footer button.btn-primary:active:not(:disabled) {\n  transform: scale(0.97);\n}\n.dungeon-test-dialog .dialog-footer button.btn-primary:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.dungeon-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 9999;\n  background: rgba(0, 0, 0, 0.95);\n  overflow: hidden;\n}\n.dungeon-overlay app-dungeon-explorer {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.dungeon-test-dialog .dialog-content.dungeon-active {\n  width: 100vw !important;\n  max-width: 100vw !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n}\n.dungeon-test-dialog .dialog-content.dungeon-active .dialog-header {\n  flex-shrink: 0;\n}\n.dungeon-test-dialog .dialog-content.dungeon-active .dialog-body {\n  display: none;\n}\n.dungeon-test-dialog .dungeon-container {\n  flex: 1;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.dungeon-test-dialog .dungeon-container app-dungeon-explorer {\n  display: block;\n  width: 100%;\n  height: 100%;\n  flex: 1;\n}\n.item-context-menu {\n  position: fixed;\n  z-index: 10000;\n  background: var(--bg-secondary);\n  border: 2px solid var(--border-color);\n  border-radius: 8px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);\n  padding: 8px 0;\n  min-width: 180px;\n  animation: contextMenuFadeIn 0.15s ease-out;\n}\n.item-context-menu .context-menu-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: var(--text-primary);\n}\n.item-context-menu .context-menu-item .menu-icon {\n  font-size: 18px;\n  width: 24px;\n  text-align: center;\n}\n.item-context-menu .context-menu-item .menu-text {\n  font-size: 14px;\n  font-weight: 500;\n}\n.item-context-menu .context-menu-item:hover {\n  background: var(--bg-tertiary);\n  color: var(--accent-primary);\n}\n.item-context-menu .context-menu-item.danger:hover {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n}\n@keyframes contextMenuFadeIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n.item-info-modal {\n  position: fixed;\n  z-index: 10001;\n  background: var(--bg-primary);\n  border: 3px solid var(--accent-primary);\n  border-radius: 12px;\n  box-shadow: 0 12px 48px rgba(0, 0, 0, 0.5);\n  min-width: 400px;\n  max-width: 500px;\n  cursor: move;\n  animation: modalSlideIn 0.3s ease-out;\n}\n.item-info-modal .modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  background: var(--bg-secondary);\n  border-bottom: 2px solid var(--border-color);\n  border-radius: 10px 10px 0 0;\n  -webkit-user-select: none;\n  user-select: none;\n}\n@media (max-width: 768px) {\n  .item-info-modal .modal-header {\n    padding: 18px 20px;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n    background: var(--bg-secondary);\n  }\n}\n@media (max-width: 480px) {\n  .item-info-modal .modal-header {\n    padding: 20px;\n  }\n}\n.item-info-modal .modal-header .modal-title {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--accent-primary);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n@media (max-width: 768px) {\n  .item-info-modal .modal-header .modal-title {\n    font-size: 19px;\n  }\n}\n@media (max-width: 480px) {\n  .item-info-modal .modal-header .modal-title {\n    font-size: 20px;\n  }\n}\n.item-info-modal .modal-header .modal-close-btn {\n  background: transparent;\n  border: 1px solid var(--border-color);\n  color: var(--text-primary);\n  font-size: 24px;\n  width: 36px;\n  height: 36px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n}\n@media (max-width: 768px) {\n  .item-info-modal .modal-header .modal-close-btn {\n    width: 44px;\n    height: 44px;\n    font-size: 26px;\n  }\n}\n@media (max-width: 480px) {\n  .item-info-modal .modal-header .modal-close-btn {\n    width: 48px;\n    height: 48px;\n    font-size: 28px;\n  }\n}\n.item-info-modal .modal-header .modal-close-btn:hover {\n  background: #ef4444;\n  border-color: #ef4444;\n  color: white;\n}\n.item-info-modal .modal-body {\n  padding: 20px;\n  cursor: default;\n}\n@media (max-width: 768px) {\n  .item-info-modal .modal-body {\n    padding: 16px;\n  }\n}\n@media (max-width: 480px) {\n  .item-info-modal .modal-body {\n    padding: 20px;\n  }\n}\n.item-info-modal .modal-body .item-info-header {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 16px;\n  border-radius: 8px;\n  background: var(--bg-secondary);\n  margin-bottom: 16px;\n  border: 2px solid var(--border-color);\n}\n@media (max-width: 768px) {\n  .item-info-modal .modal-body .item-info-header {\n    padding: 18px;\n    gap: 14px;\n  }\n}\n@media (max-width: 480px) {\n  .item-info-modal .modal-body .item-info-header {\n    padding: 20px;\n  }\n}\n.item-info-modal .modal-body .item-info-header.rarity-common {\n  border-color: #9ca3af;\n}\n.item-info-modal .modal-body .item-info-header.rarity-uncommon {\n  border-color: #10b981;\n}\n.item-info-modal .modal-body .item-info-header.rarity-rare {\n  border-color: #3b82f6;\n}\n.item-info-modal .modal-body .item-info-header.rarity-epic {\n  border-color: #a855f7;\n}\n.item-info-modal .modal-body .item-info-header.rarity-legendary {\n  border-color: #f97316;\n}\n.item-info-modal .modal-body .item-info-header.rarity-unique {\n  border-color: #ec4899;\n}\n.item-info-modal .modal-body .item-info-header.rarity-mythic {\n  border-color: #fbbf24;\n}\n.item-info-modal .modal-body .item-info-header .item-info-icon {\n  font-size: 48px;\n  width: 64px;\n  height: 64px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  flex-shrink: 0;\n}\n@media (max-width: 768px) {\n  .item-info-modal .modal-body .item-info-header .item-info-icon {\n    font-size: 52px;\n    width: 72px;\n    height: 72px;\n  }\n}\n@media (max-width: 480px) {\n  .item-info-modal .modal-body .item-info-header .item-info-icon {\n    font-size: 56px;\n    width: 80px;\n    height: 80px;\n  }\n}\n.item-info-modal .modal-body .item-info-header .item-info-title {\n  flex: 1;\n}\n.item-info-modal .modal-body .item-info-header .item-info-title h3 {\n  margin: 0 0 8px 0;\n  font-size: 22px;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n.item-info-modal .modal-body .item-info-header .item-info-title .item-rarity-badge {\n  display: inline-block;\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 600;\n  background: var(--accent-primary);\n  color: white;\n}\n.item-info-modal .modal-body .item-info-meta {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n.item-info-modal .modal-body .item-info-meta .meta-badge {\n  padding: 6px 12px;\n  border-radius: 6px;\n  font-size: 13px;\n  font-weight: 500;\n}\n.item-info-modal .modal-body .item-info-meta .meta-badge.type-badge {\n  background: var(--bg-secondary);\n  color: var(--accent-primary);\n  border: 1px solid var(--accent-primary);\n}\n.item-info-modal .modal-body .item-info-meta .meta-badge.quantity-badge {\n  background: var(--accent-primary);\n  color: white;\n}\n.item-info-modal .modal-body .item-info-stats {\n  background: var(--bg-secondary);\n  padding: 16px;\n  border-radius: 8px;\n  margin-bottom: 16px;\n}\n.item-info-modal .modal-body .item-info-stats .stats-title {\n  margin: 0 0 12px 0;\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--accent-primary);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n}\n.item-info-modal .modal-body .item-info-stats .stats-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n}\n.item-info-modal .modal-body .item-info-stats .stats-grid .stat-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px;\n  background: var(--bg-primary);\n  border-radius: 6px;\n  border: 1px solid var(--border-color);\n}\n.item-info-modal .modal-body .item-info-stats .stats-grid .stat-item .stat-icon {\n  font-size: 20px;\n  width: 28px;\n  text-align: center;\n}\n.item-info-modal .modal-body .item-info-stats .stats-grid .stat-item .stat-label {\n  flex: 1;\n  font-size: 13px;\n  color: var(--text-secondary);\n}\n.item-info-modal .modal-body .item-info-stats .stats-grid .stat-item .stat-value {\n  font-size: 15px;\n  font-weight: 700;\n  color: var(--accent-primary);\n}\n.item-info-modal .modal-body .item-info-description {\n  background: var(--bg-secondary);\n  padding: 16px;\n  border-radius: 8px;\n  margin-bottom: 16px;\n}\n.item-info-modal .modal-body .item-info-description .desc-title {\n  margin: 0 0 8px 0;\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--accent-primary);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n}\n.item-info-modal .modal-body .item-info-description p {\n  margin: 0;\n  font-size: 14px;\n  line-height: 1.6;\n  color: var(--text-secondary);\n}\n.item-info-modal .modal-body .item-info-actions {\n  display: flex;\n  gap: 12px;\n}\n.item-info-modal .modal-body .item-info-actions .action-btn {\n  flex: 1;\n  padding: 12px 20px;\n  border-radius: 8px;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 2px solid;\n}\n.item-info-modal .modal-body .item-info-actions .action-btn.equip-btn {\n  background: var(--accent-primary);\n  border-color: var(--accent-primary);\n  color: white;\n}\n.item-info-modal .modal-body .item-info-actions .action-btn.equip-btn:hover {\n  background: transparent;\n  color: var(--accent-primary);\n}\n.item-info-modal .modal-body .item-info-actions .action-btn.discard-btn {\n  background: transparent;\n  border-color: #ef4444;\n  color: #ef4444;\n}\n.item-info-modal .modal-body .item-info-actions .action-btn.discard-btn:hover {\n  background: #ef4444;\n  color: white;\n}\n@keyframes modalSlideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-20px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n.character-inventory-modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  padding: 20px;\n  animation: fadeIn 0.2s ease;\n}\n.character-inventory-modal-overlay .character-inventory-modal {\n  background: var(--bg-primary);\n  border-radius: 20px;\n  width: 100%;\n  max-width: 1000px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  border: 2px solid var(--border-color);\n  animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  overflow: hidden;\n}\n.character-inventory-modal-overlay .character-inventory-modal .panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px;\n  border-bottom: 2px solid var(--border-color);\n  background: var(--bg-secondary);\n  flex-shrink: 0;\n}\n.character-inventory-modal-overlay .character-inventory-modal .panel-header h3 {\n  margin: 0;\n  font-size: 22px;\n  font-weight: 700;\n  color: var(--text-primary);\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.character-inventory-modal-overlay .character-inventory-modal .panel-header .close-btn {\n  background: none;\n  border: none;\n  font-size: 32px;\n  color: var(--text-secondary);\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  min-width: 40px;\n  min-height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 8px;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n}\n.character-inventory-modal-overlay .character-inventory-modal .panel-header .close-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: var(--text-primary);\n}\n.character-inventory-modal-overlay .character-inventory-modal .character-info-bar {\n  padding: 12px 24px;\n  background: var(--bg-tertiary);\n  border-bottom: 1px solid var(--border-color);\n}\n.character-inventory-modal-overlay .character-inventory-modal .character-info-bar .info-badges {\n  display: flex;\n  gap: 12px;\n}\n.character-inventory-modal-overlay .character-inventory-modal .character-info-bar .info-badges .stat-badge {\n  padding: 6px 14px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n}\n.character-inventory-modal-overlay .character-inventory-modal .character-info-bar .info-badges .stat-badge.level {\n  background:\n    linear-gradient(\n      135deg,\n      #8b5cf6,\n      #a78bfa);\n  color: white;\n  box-shadow: 0 2px 6px rgba(139, 92, 246, 0.3);\n}\n.character-inventory-modal-overlay .character-inventory-modal .character-info-bar .info-badges .stat-badge.gold {\n  background:\n    linear-gradient(\n      135deg,\n      #fbbf24,\n      #f59e0b);\n  color: white;\n  box-shadow: 0 2px 6px rgba(251, 191, 36, 0.3);\n}\n.character-inventory-modal-overlay .character-inventory-modal .tab-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px;\n}\n.character-inventory-modal-overlay .character-inventory-modal .tab-content .inventory-sections {\n  display: flex;\n  flex-direction: column;\n  gap: 32px;\n}\n.character-inventory-modal-overlay .character-inventory-modal .tab-content .inventory-sections .equipment-section h3,\n.character-inventory-modal-overlay .character-inventory-modal .tab-content .inventory-sections .inventory-items-section h3 {\n  font-size: 22px;\n  font-weight: 700;\n  color: var(--text-primary);\n  margin-bottom: 20px;\n  padding-bottom: 12px;\n  border-bottom: 2px solid var(--border-color);\n}\n.character-inventory-modal-overlay .character-inventory-modal .tab-content .inventory-sections .equipment-section .no-equipment,\n.character-inventory-modal-overlay .character-inventory-modal .tab-content .inventory-sections .equipment-section .no-items,\n.character-inventory-modal-overlay .character-inventory-modal .tab-content .inventory-sections .inventory-items-section .no-equipment,\n.character-inventory-modal-overlay .character-inventory-modal .tab-content .inventory-sections .inventory-items-section .no-items {\n  text-align: center;\n  padding: 40px;\n  color: var(--text-secondary);\n  font-size: 16px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n}\n.character-inventory-modal-overlay .character-inventory-modal .panel-footer {\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px 24px;\n  border-top: 2px solid var(--border-color);\n  background: var(--bg-secondary);\n  flex-shrink: 0;\n}\n.character-inventory-modal-overlay .character-inventory-modal .panel-footer .btn-secondary {\n  padding: 10px 24px;\n  background: var(--bg-tertiary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  color: var(--text-primary);\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.character-inventory-modal-overlay .character-inventory-modal .panel-footer .btn-secondary:hover {\n  background: var(--bg-primary);\n  border-color: var(--primary-color);\n  color: var(--primary-color);\n}\n@keyframes modalSlideIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95) translateY(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n/*# sourceMappingURL=novel-generator.component.css.map */\n'] }]
  }], () => [{ type: ChangeDetectorRef }, { type: MatDialog }, { type: MatSnackBar }, { type: Router }, { type: ActivatedRoute }, { type: GeminiAiService }, { type: ScenarioDbService }, { type: ItemDbService }, { type: CharacterDbService }, { type: NovelAuthService }, { type: StoryDbService }, { type: NotificationService }, { type: GameStorageService }, { type: DungeonGeneratorService }, { type: DungeonService }, { type: BattleService }, { type: BattleLogService }, { type: InventoryService }, { type: EquipmentService }, { type: ShopService }, { type: WuxiaDataService }, { type: ItemGeneratorService }, { type: StoryElementGeneratorHelper }, { type: ResponsiveService }], { battleLogContainer: [{
    type: ViewChild,
    args: ["battleLogContainer"]
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(NovelGeneratorComponent, { className: "NovelGeneratorComponent", filePath: "src/app/modules/novel/components/novel-generator/novel-generator.component.ts", lineNumber: 108 });
})();

// src/app/modules/novel/components/novel-login/novel-login.ts
var _c02 = ["loginComponent"];
var NovelLogin = class _NovelLogin {
  authService;
  router;
  loginComponent;
  loginConfig = {
    title: "\u{1F4D6} \uC18C\uC124 \uB77C\uC774\uBE0C\uB7EC\uB9AC",
    subtitle: "\uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124 \uC138\uACC4\uC5D0 \uC624\uC2E0 \uAC83\uC744 \uD658\uC601\uD569\uB2C8\uB2E4",
    moduleName: "novel",
    showSocialLogin: false,
    showRegisterLink: false,
    backgroundAnimation: ["\u{1F4D6}", "\u{1F4DA}", "\u2728", "\u{1F3AD}", "\u2694\uFE0F", "\u{1F3F0}", "\u{1F52E}", "\u{1F4DC}"],
    themeColors: {
      primary: "#8b5cf6",
      // 보라색 (소설/문학)
      secondary: "#6366f1",
      // 인디고
      accent: "#a855f7"
      // 밝은 보라
    }
  };
  constructor(authService, router) {
    this.authService = authService;
    this.router = router;
  }
  ngOnInit() {
    if (this.authService.isLoggedIn()) {
      this.router.navigate(["/novel"]);
    }
  }
  /**
   * 로그인 처리 - 통합 로그인 컴포넌트에서 호출
   */
  onLogin(credentials) {
    const success = this.authService.login(credentials.username, credentials.password);
    if (success) {
      this.router.navigate(["/novel"]);
    } else {
      if (this.loginComponent) {
        this.loginComponent.setError("\uC0AC\uC6A9\uC790 \uC774\uB984 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");
      }
    }
  }
  static \u0275fac = function NovelLogin_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelLogin)(\u0275\u0275directiveInject(NovelAuthService), \u0275\u0275directiveInject(Router));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _NovelLogin, selectors: [["app-novel-login"]], viewQuery: function NovelLogin_Query(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275viewQuery(_c02, 5);
    }
    if (rf & 2) {
      let _t;
      \u0275\u0275queryRefresh(_t = \u0275\u0275loadQuery()) && (ctx.loginComponent = _t.first);
    }
  }, standalone: false, decls: 2, vars: 1, consts: [["loginComponent", ""], [3, "loginSubmit", "config"]], template: function NovelLogin_Template(rf, ctx) {
    if (rf & 1) {
      const _r1 = \u0275\u0275getCurrentView();
      \u0275\u0275elementStart(0, "app-unified-login", 1, 0);
      \u0275\u0275listener("loginSubmit", function NovelLogin_Template_app_unified_login_loginSubmit_0_listener($event) {
        \u0275\u0275restoreView(_r1);
        return \u0275\u0275resetView(ctx.onLogin($event));
      });
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275property("config", ctx.loginConfig);
    }
  }, dependencies: [UnifiedLoginComponent], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelLogin, [{
    type: Component,
    args: [{
      selector: "app-novel-login",
      standalone: false,
      template: '<app-unified-login #loginComponent [config]="loginConfig" (loginSubmit)="onLogin($event)"></app-unified-login>'
    }]
  }], () => [{ type: NovelAuthService }, { type: Router }], { loginComponent: [{
    type: ViewChild,
    args: ["loginComponent"]
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(NovelLogin, { className: "NovelLogin", filePath: "src/app/modules/novel/components/novel-login/novel-login.ts", lineNumber: 11 });
})();

// src/app/modules/novel/components/novel-top-menu/novel-top-menu.component.ts
function NovelTopMenuComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 20);
    \u0275\u0275element(1, "div", 21);
    \u0275\u0275elementEnd();
  }
}
function NovelTopMenuComponent_button_24_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 22);
    \u0275\u0275listener("click", function NovelTopMenuComponent_button_24_Template_button_click_0_listener() {
      const item_r3 = \u0275\u0275restoreView(_r2).$implicit;
      const ctx_r3 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r3.onMenuItemClick(item_r3));
    });
    \u0275\u0275elementStart(1, "mat-icon");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r3 = ctx.$implicit;
    const ctx_r3 = \u0275\u0275nextContext();
    \u0275\u0275property("disabled", ctx_r3.isMenuDisabled(item_r3.name));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r3.getMenuIcon(item_r3.name));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r3.name);
  }
}
function NovelTopMenuComponent_div_25_span_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 27);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r3 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(ctx_r3.novelTitle);
  }
}
function NovelTopMenuComponent_div_25_span_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 28);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r3 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(ctx_r3.getWordCountText());
  }
}
function NovelTopMenuComponent_div_25_span_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 29);
    \u0275\u0275text(1, "\uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd();
  }
}
function NovelTopMenuComponent_div_25_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 23);
    \u0275\u0275template(1, NovelTopMenuComponent_div_25_span_1_Template, 2, 1, "span", 24)(2, NovelTopMenuComponent_div_25_span_2_Template, 2, 1, "span", 25)(3, NovelTopMenuComponent_div_25_span_3_Template, 2, 0, "span", 26);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r3 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r3.novelTitle);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r3.wordCount > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r3.isGenerating);
  }
}
function NovelTopMenuComponent_span_26_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 30)(1, "b");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275text(3, "\uAC1C ");
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r3 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r3.searchResultCount);
  }
}
var NovelTopMenuComponent = class _NovelTopMenuComponent {
  router;
  constructor(router) {
    this.router = router;
  }
  activeMenu = "\uD648";
  currentActiveMenu = "\uD648";
  novelTitle = "";
  isGenerating = false;
  wordCount = 0;
  isSearchMode = false;
  searchResults = { current: 0, total: 0 };
  generatedNovel = "";
  menuAction = new EventEmitter();
  menuChange = new EventEmitter();
  toolbarAction = new EventEmitter();
  search = new EventEmitter();
  leftPanelToggle = new EventEmitter();
  rightPanelToggle = new EventEmitter();
  searchQuery = "";
  searchResultCount = null;
  isSearching = false;
  lastSelectedMenu = "\uC0C8\uC18C\uC124";
  // 마지막으로 선택한 메뉴 추적
  // 소설 전용 메뉴 아이템들
  menuItems = [
    { name: "\uC0C8\uC18C\uC124", active: false },
    { name: "\uC800\uC7A5", active: false },
    { name: "\uBD88\uB7EC\uC624\uAE30", active: false },
    { name: "\uB0B4\uBCF4\uB0B4\uAE30", active: false },
    { name: "\uC124\uC815", active: false }
  ];
  // 소설 전용 툴바 액션들
  toolbarActions = [
    {
      action: "new-novel",
      icon: "/images/btn-gnb-doc@3x.png",
      tooltip: "\uC0C8 \uC18C\uC124 \uC0DD\uC131"
    },
    {
      action: "save-novel",
      icon: "/images/ico-save@3x.png",
      tooltip: "\uC18C\uC124 \uC800\uC7A5"
    },
    {
      action: "open-novel",
      icon: "/images/ico-file@3x.png",
      tooltip: "\uC18C\uC124 \uC5F4\uAE30"
    },
    {
      action: "export-novel",
      icon: "/images/btn-gnb-download@3x.png",
      tooltip: "\uC18C\uC124 \uB0B4\uBCF4\uB0B4\uAE30"
    },
    {
      action: "novel-settings",
      icon: "/images/btn-gnb-setting.png",
      tooltip: "\uC18C\uC124 \uC124\uC815"
    },
    {
      action: "writing-tools",
      icon: "/images/btn-gnb-edit@3x.png",
      tooltip: "\uC791\uC131 \uB3C4\uAD6C"
    }
  ];
  onMenuItemClick(item) {
    if (item.disabled)
      return;
    this.lastSelectedMenu = item.name;
    this.menuItems.forEach((menuItem) => menuItem.active = false);
    item.active = true;
    switch (item.name) {
      case "\uC0C8\uC18C\uC124":
        this.toolbarAction.emit("new-novel");
        break;
      case "\uC800\uC7A5":
        this.toolbarAction.emit("save-novel");
        break;
      case "\uBD88\uB7EC\uC624\uAE30":
        this.toolbarAction.emit("open-novel");
        break;
      case "\uB0B4\uBCF4\uB0B4\uAE30":
        this.toolbarAction.emit("export-novel");
        break;
      case "\uC124\uC815":
        this.toolbarAction.emit("settings");
        break;
    }
    this.menuAction.emit({
      action: "menu-change",
      data: { menu: item.name }
    });
    this.menuChange.emit(item.name);
  }
  getMenuIcon(menuName) {
    switch (menuName) {
      case "\uC0C8\uC18C\uC124":
        return "note_add";
      case "\uC800\uC7A5":
        return "save";
      case "\uBD88\uB7EC\uC624\uAE30":
        return "folder_open";
      case "\uB0B4\uBCF4\uB0B4\uAE30":
        return "download";
      case "\uC124\uC815":
        return "settings";
      default:
        return "menu";
    }
  }
  onToolbarAction(action) {
    this.toolbarAction.emit(action);
  }
  onSearchChange(queryOrEvent) {
    let query;
    if (typeof queryOrEvent === "string") {
      query = queryOrEvent;
    } else {
      const target = queryOrEvent.target;
      query = target ? target.value : "";
    }
    this.searchQuery = query;
    this.search.emit(query);
    if (query.trim()) {
      this.isSearching = true;
      setTimeout(() => {
        this.isSearching = false;
        this.searchResultCount = Math.floor(Math.random() * 10) + 1;
      }, 500);
    } else {
      this.searchResultCount = null;
    }
  }
  onSearchEnter() {
    if (this.searchQuery.trim()) {
      this.menuAction.emit({
        action: "search",
        data: { query: this.searchQuery }
      });
    }
  }
  onFileSelected(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = (e) => {
        const content = e.target?.result;
        this.loadNovelFromFile(content, file.name);
      };
      reader.readAsText(file);
    }
  }
  loadNovelFromFile(content, fileName) {
    this.novelTitle = fileName.replace(/\.[^/.]+$/, "");
    this.wordCount = content.length;
    this.toolbarAction.emit("load-file");
  }
  isMenuDisabled(menuName) {
    if (this.isGenerating) {
      return ["\uC800\uC7A5", "\uB0B4\uBCF4\uB0B4\uAE30"].includes(menuName);
    }
    return false;
  }
  getWordCountText() {
    if (this.wordCount === 0)
      return "";
    if (this.wordCount < 1e3) {
      return `${this.wordCount}\uC790`;
    } else if (this.wordCount < 1e4) {
      return `${(this.wordCount / 1e3).toFixed(1)}\uCC9C\uC790`;
    } else {
      return `${(this.wordCount / 1e4).toFixed(1)}\uB9CC\uC790`;
    }
  }
  onMenuChange(menuName) {
    this.menuChange.emit(menuName);
  }
  static \u0275fac = function NovelTopMenuComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelTopMenuComponent)(\u0275\u0275directiveInject(Router));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _NovelTopMenuComponent, selectors: [["app-novel-top-menu"]], inputs: { activeMenu: "activeMenu", currentActiveMenu: "currentActiveMenu", novelTitle: "novelTitle", isGenerating: "isGenerating", wordCount: "wordCount", isSearchMode: "isSearchMode", searchResults: "searchResults", generatedNovel: "generatedNovel" }, outputs: { menuAction: "menuAction", menuChange: "menuChange", toolbarAction: "toolbarAction", search: "search", leftPanelToggle: "leftPanelToggle", rightPanelToggle: "rightPanelToggle" }, standalone: false, decls: 33, vars: 7, consts: [["fileInput", ""], ["mainMenu", "matMenu"], ["class", "search-progress-bar", 4, "ngIf"], [1, "top-menu-bar"], ["type", "file", "accept", ".txt,.docx,.md", 2, "display", "none", 3, "change"], [1, "brand"], ["title", "\uBA54\uB274 \uD328\uB110", 1, "panel-toggle-btn", "left", 3, "click"], [1, "hamburger-icon"], [1, "title-section"], [1, "app-title"], [1, "menu-separator"], [1, "last-menu"], [1, "menu-center"], [1, "menu-right", 2, "display", "flex", "align-items", "center", "gap", "8px"], ["mat-icon-button", "", "title", "\uBA54\uB274", 1, "app-menu-trigger", 3, "matMenuTriggerFor"], ["mat-menu-item", "", 3, "disabled", "click", 4, "ngFor", "ngForOf"], ["class", "novel-status", 4, "ngIf"], ["class", "search-result-count-inline", 4, "ngIf"], ["type", "text", "placeholder", "\u{1F50D} \uC18C\uC124 \uB0B4\uC6A9 \uAC80\uC0C9", 1, "search-box", 3, "ngModelChange", "input", "keydown.enter", "ngModel"], ["title", "\uBA54\uB274 \uD328\uB110", 1, "panel-toggle-btn", 3, "click"], [1, "search-progress-bar"], [1, "search-progress"], ["mat-menu-item", "", 3, "click", "disabled"], [1, "novel-status"], ["class", "novel-title", 4, "ngIf"], ["class", "word-count", 4, "ngIf"], ["class", "generation-status", 4, "ngIf"], [1, "novel-title"], [1, "word-count"], [1, "generation-status"], [1, "search-result-count-inline"]], template: function NovelTopMenuComponent_Template(rf, ctx) {
    if (rf & 1) {
      const _r1 = \u0275\u0275getCurrentView();
      \u0275\u0275template(0, NovelTopMenuComponent_div_0_Template, 2, 0, "div", 2);
      \u0275\u0275elementStart(1, "nav", 3)(2, "input", 4, 0);
      \u0275\u0275listener("change", function NovelTopMenuComponent_Template_input_change_2_listener($event) {
        \u0275\u0275restoreView(_r1);
        return \u0275\u0275resetView(ctx.onFileSelected($event));
      });
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(4, "div", 5)(5, "button", 6);
      \u0275\u0275listener("click", function NovelTopMenuComponent_Template_button_click_5_listener() {
        \u0275\u0275restoreView(_r1);
        return \u0275\u0275resetView(ctx.leftPanelToggle.emit());
      });
      \u0275\u0275elementStart(6, "div", 7);
      \u0275\u0275element(7, "span")(8, "span")(9, "span");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(10, "div", 8)(11, "span", 9);
      \u0275\u0275text(12, "\uC18C\uC124 \uC791\uC131");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(13, "span", 10);
      \u0275\u0275text(14, "\u2022");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(15, "span", 11);
      \u0275\u0275text(16);
      \u0275\u0275elementEnd()()();
      \u0275\u0275element(17, "div", 12);
      \u0275\u0275elementStart(18, "div", 13)(19, "button", 14)(20, "mat-icon");
      \u0275\u0275text(21, "apps");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(22, "mat-menu", null, 1);
      \u0275\u0275template(24, NovelTopMenuComponent_button_24_Template, 5, 3, "button", 15);
      \u0275\u0275elementEnd();
      \u0275\u0275template(25, NovelTopMenuComponent_div_25_Template, 4, 3, "div", 16)(26, NovelTopMenuComponent_span_26_Template, 4, 1, "span", 17);
      \u0275\u0275elementStart(27, "input", 18);
      \u0275\u0275twoWayListener("ngModelChange", function NovelTopMenuComponent_Template_input_ngModelChange_27_listener($event) {
        \u0275\u0275restoreView(_r1);
        \u0275\u0275twoWayBindingSet(ctx.searchQuery, $event) || (ctx.searchQuery = $event);
        return \u0275\u0275resetView($event);
      });
      \u0275\u0275listener("input", function NovelTopMenuComponent_Template_input_input_27_listener() {
        \u0275\u0275restoreView(_r1);
        return \u0275\u0275resetView(ctx.onSearchChange(ctx.searchQuery));
      })("keydown.enter", function NovelTopMenuComponent_Template_input_keydown_enter_27_listener() {
        \u0275\u0275restoreView(_r1);
        return \u0275\u0275resetView(ctx.onSearchEnter());
      });
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(28, "button", 19);
      \u0275\u0275listener("click", function NovelTopMenuComponent_Template_button_click_28_listener() {
        \u0275\u0275restoreView(_r1);
        return \u0275\u0275resetView(ctx.rightPanelToggle.emit());
      });
      \u0275\u0275elementStart(29, "div", 7);
      \u0275\u0275element(30, "span")(31, "span")(32, "span");
      \u0275\u0275elementEnd()()()();
    }
    if (rf & 2) {
      const mainMenu_r5 = \u0275\u0275reference(23);
      \u0275\u0275property("ngIf", ctx.isSearching);
      \u0275\u0275advance(16);
      \u0275\u0275textInterpolate(ctx.lastSelectedMenu);
      \u0275\u0275advance(3);
      \u0275\u0275property("matMenuTriggerFor", mainMenu_r5);
      \u0275\u0275advance(5);
      \u0275\u0275property("ngForOf", ctx.menuItems);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.novelTitle || ctx.wordCount > 0);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.searchResultCount !== null && !ctx.isSearching);
      \u0275\u0275advance();
      \u0275\u0275twoWayProperty("ngModel", ctx.searchQuery);
    }
  }, dependencies: [NgForOf, NgIf, DefaultValueAccessor, NgControlStatus, NgModel, MatIconButton, MatIcon, MatMenu, MatMenuItem, MatMenuTrigger], styles: ['\n\n.search-result-count-inline[_ngcontent-%COMP%] {\n  font-size: 15px;\n  color: var(--text-primary);\n  background: var(--bg-warning);\n  border: 1px solid var(--warning-color);\n  border-radius: 4px;\n  padding: 2px 8px;\n  font-weight: 500;\n  margin-left: 4px;\n  display: inline-block;\n  vertical-align: middle;\n}\n.search-result-count[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 5px;\n  right: 24px;\n  font-size: 15px;\n  color: var(--text-primary);\n  background: var(--bg-warning);\n  border: 1px solid var(--warning-color);\n  border-radius: 4px;\n  padding: 2px 10px;\n  z-index: 1001;\n  font-weight: 500;\n}\n.search-progress-bar[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 3px;\n  background: transparent;\n  z-index: 1000;\n}\n.search-progress[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #ffd700 0%,\n      #ffe066 100%);\n  animation: _ngcontent-%COMP%_search-progress-ani 0.7s linear infinite alternate;\n  border-radius: 2px;\n}\n@keyframes _ngcontent-%COMP%_search-progress-ani {\n  0% {\n    opacity: 0.5;\n    transform: scaleX(0.2);\n  }\n  100% {\n    opacity: 1;\n    transform: scaleX(1);\n  }\n}\n.top-menu-bar[_ngcontent-%COMP%] {\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  padding: 0px 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  position: relative;\n  z-index: 1000;\n  height: 48px;\n  flex-shrink: 0;\n  margin: 0;\n  transition: all 0.3s ease;\n  border-bottom: 1px solid var(--border-color);\n}\n.brand[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  min-width: 200px;\n  height: 100%;\n  flex: 1;\n}\n.brand[_ngcontent-%COMP%]   .panel-toggle-btn.left[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  padding: 8px 10px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 36px;\n  width: 40px;\n  position: relative;\n}\n.brand[_ngcontent-%COMP%]   .panel-toggle-btn.left[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--primary-color);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n.brand[_ngcontent-%COMP%]   .panel-toggle-btn.left[_ngcontent-%COMP%]:hover   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  background: var(--primary-color);\n}\n.brand[_ngcontent-%COMP%]   .panel-toggle-btn.left[_ngcontent-%COMP%]:hover   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1) {\n  transform: translateY(-1px);\n}\n.brand[_ngcontent-%COMP%]   .panel-toggle-btn.left[_ngcontent-%COMP%]:hover   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3) {\n  transform: translateY(1px);\n}\n.brand[_ngcontent-%COMP%]   .panel-toggle-btn.left[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n.brand[_ngcontent-%COMP%]   .panel-toggle-btn.left[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  width: 20px;\n}\n.brand[_ngcontent-%COMP%]   .panel-toggle-btn.left[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  display: block;\n  width: 100%;\n  height: 2px;\n  background: var(--text-primary);\n  border-radius: 2px;\n  transition: all 0.3s ease;\n}\n.brand[_ngcontent-%COMP%]   .panel-toggle-btn.left[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2) {\n  width: 70%;\n}\n.brand[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-left: 16px;\n  height: 100%;\n  padding: 0 4px;\n}\n.brand[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%] {\n  font-size: 18px;\n  font-weight: 700;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 50%,\n      #f093fb 100%);\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  text-shadow: 0 2px 4px rgba(102, 126, 234, 0.2);\n  letter-spacing: 0.5px;\n  white-space: nowrap;\n  position: relative;\n}\n.brand[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  bottom: -2px;\n  left: 0;\n  right: 0;\n  height: 2px;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea,\n      #764ba2);\n  border-radius: 1px;\n  opacity: 0.6;\n}\n.brand[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .menu-separator[_ngcontent-%COMP%] {\n  color: var(--text-muted);\n  font-size: 14px;\n  margin: 0 6px;\n  font-weight: 300;\n}\n.brand[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .last-menu[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 600;\n  color: #ffffff;\n  padding: 4px 12px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 16px;\n  border: none;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n  white-space: nowrap;\n  position: relative;\n  overflow: hidden;\n}\n.brand[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .last-menu[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      transparent,\n      rgba(255, 255, 255, 0.2),\n      transparent);\n  transition: left 0.5s;\n}\n.brand[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .last-menu[_ngcontent-%COMP%]:hover::before {\n  left: 100%;\n}\n.toolbar[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 4px 0;\n}\n.toolbar-menu-label[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-primary);\n  margin-right: 12px;\n  padding: 4px 10px 4px 0;\n  letter-spacing: -0.5px;\n  transition: color 0.3s ease;\n}\n.toolbar-menu-label.novel-menu-btn[_ngcontent-%COMP%] {\n  cursor: pointer;\n  padding: 4px 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n}\n.toolbar-menu-label.novel-menu-btn[_ngcontent-%COMP%]:hover {\n  background-color: var(--bg-tertiary);\n}\n.toolbar-menu-label.novel-menu-btn[_ngcontent-%COMP%]:active {\n  background-color: var(--bg-secondary);\n}\n.toolbar-btn[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  padding: 4px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: background 0.15s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--text-primary);\n}\n.toolbar-btn[_ngcontent-%COMP%]:hover, \n.toolbar-btn[_ngcontent-%COMP%]:focus {\n  background: var(--bg-tertiary);\n}\n.toolbar-btn.disabled[_ngcontent-%COMP%], \n.toolbar-btn[_ngcontent-%COMP%]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n.toolbar-btn.disabled[_ngcontent-%COMP%]   .toolbar-icon[_ngcontent-%COMP%], \n.toolbar-btn[_ngcontent-%COMP%]:disabled   .toolbar-icon[_ngcontent-%COMP%] {\n  opacity: 0.5;\n}\n.toolbar-icon[_ngcontent-%COMP%] {\n  width: 20px;\n  height: 20px;\n}\n.menu-center[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n}\n.menu-center[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 4px;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n.menu-center[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n  position: relative;\n  cursor: pointer;\n  transition: color 0.2s;\n  color: var(--text-primary);\n  font-size: 14px;\n  font-weight: 500;\n  padding: 0 6px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border-radius: 4px 4px 0 0;\n}\n.menu-center[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]::after {\n  content: "";\n  display: block;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 2px;\n  height: 2px;\n  background: var(--border-color);\n  border-radius: 1px;\n}\n.menu-center[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover::after {\n  background: rgb(255, 98, 0);\n}\n.menu-center[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]::after {\n  background: rgb(255, 98, 0);\n}\n.menu-center[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%] {\n  color: rgb(255, 98, 0);\n}\n.menu-center[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%] {\n  color: #ccc;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n.menu-center[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]::after {\n  display: none;\n}\n.menu-right[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 14px;\n  white-space: nowrap;\n}\n.search-box[_ngcontent-%COMP%] {\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  padding: 6px 30px 6px 8px;\n  font-size: 13px;\n  width: 180px;\n  outline: none;\n  transition: border-color 0.2s;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n}\n.search-box[_ngcontent-%COMP%]:focus {\n  border-color: rgb(255, 98, 0);\n  box-shadow: 0 0 0 2px rgba(255, 98, 0, 0.1);\n}\n.search-icon[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 28px;\n  pointer-events: none;\n  display: flex;\n  align-items: center;\n}\n.panel-toggle-btn[_ngcontent-%COMP%] {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  padding: 8px 10px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 36px;\n  width: 40px;\n  position: relative;\n}\n.panel-toggle-btn[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--primary-color);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n.panel-toggle-btn[_ngcontent-%COMP%]:hover   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  background: var(--primary-color);\n}\n.panel-toggle-btn[_ngcontent-%COMP%]:hover   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1) {\n  transform: translateY(-1px);\n}\n.panel-toggle-btn[_ngcontent-%COMP%]:hover   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3) {\n  transform: translateY(1px);\n}\n.panel-toggle-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n.panel-toggle-btn[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  width: 20px;\n}\n.panel-toggle-btn[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  display: block;\n  width: 100%;\n  height: 2px;\n  background: var(--text-primary);\n  border-radius: 2px;\n  transition: all 0.3s ease;\n}\n.panel-toggle-btn[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2) {\n  width: 70%;\n}\n.novel-status[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 4px 8px;\n  background: #f8f9fa;\n  border-radius: 4px;\n  font-size: 12px;\n  margin-right: 8px;\n}\n.novel-status[_ngcontent-%COMP%]   .novel-title[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: #333;\n  max-width: 120px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.novel-status[_ngcontent-%COMP%]   .word-count[_ngcontent-%COMP%] {\n  background: #e3f2fd;\n  color: #1976d2;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-size: 11px;\n  font-weight: 500;\n}\n.novel-status[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%] {\n  background: #e8f5e8;\n  color: #2e7d32;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-size: 11px;\n  font-weight: 500;\n  animation: _ngcontent-%COMP%_pulse 2s infinite;\n}\n@keyframes _ngcontent-%COMP%_pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.7;\n  }\n}\n@media (max-width: 768px) {\n  .top-menu-bar[_ngcontent-%COMP%] {\n    padding: 0 12px;\n    height: 44px;\n  }\n  .brand[_ngcontent-%COMP%] {\n    margin-right: 16px;\n    font-size: 18px;\n  }\n  .toolbar[_ngcontent-%COMP%] {\n    gap: 6px;\n    padding: 6px 0;\n  }\n  .toolbar-menu-label[_ngcontent-%COMP%] {\n    font-size: 13px;\n    padding: 3px 6px;\n  }\n  .toolbar-btn[_ngcontent-%COMP%] {\n    padding: 3px;\n  }\n  .toolbar-icon[_ngcontent-%COMP%] {\n    width: 18px;\n    height: 18px;\n  }\n  .menu-center[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\n    gap: 2px;\n    margin-left: -40px;\n  }\n  .menu-center[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n    padding: 0 4px;\n    font-size: 13px;\n    height: 36px;\n  }\n  .search-box[_ngcontent-%COMP%] {\n    width: 140px;\n    padding: 5px 25px 5px 6px;\n    font-size: 12px;\n  }\n  .novel-status[_ngcontent-%COMP%] {\n    gap: 6px;\n    padding: 3px 6px;\n    font-size: 11px;\n  }\n  .novel-status[_ngcontent-%COMP%]   .novel-title[_ngcontent-%COMP%] {\n    max-width: 80px;\n  }\n}\n.toolbar-group[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-right: 16px;\n}\n.toolbar-group[_ngcontent-%COMP%]:last-child {\n  margin-right: 0;\n}\n.modern-btn[_ngcontent-%COMP%], \n.text-btn[_ngcontent-%COMP%] {\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  padding: 8px 12px;\n  color: var(--text-primary);\n  font-size: 13px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  position: relative;\n  box-shadow: 0 2px 4px var(--shadow);\n}\n.modern-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%], \n.text-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%] {\n  font-size: 12px;\n  white-space: nowrap;\n}\n.modern-btn[_ngcontent-%COMP%]:hover:not(:disabled), \n.text-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background: var(--bg-tertiary);\n  border-color: var(--text-muted);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px var(--shadow);\n}\n.modern-btn[_ngcontent-%COMP%]:active:not(:disabled), \n.text-btn[_ngcontent-%COMP%]:active:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px var(--shadow);\n}\n.modern-btn[_ngcontent-%COMP%]:disabled, \n.text-btn[_ngcontent-%COMP%]:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n  background: var(--bg-secondary);\n  color: var(--text-muted);\n  box-shadow: 0 1px 2px var(--shadow);\n}\n.modern-btn.save-btn.has-content[_ngcontent-%COMP%], \n.save-btn.has-content.text-btn[_ngcontent-%COMP%] {\n  background: var(--bg-accent);\n  border-color: var(--accent-color);\n  color: var(--accent-color);\n}\n.modern-btn.save-btn.has-content[_ngcontent-%COMP%]:hover:not(:disabled), \n.save-btn.has-content.text-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background: var(--bg-accent);\n  opacity: 0.8;\n}\n.modern-btn.save-btn[_ngcontent-%COMP%]   .save-indicator[_ngcontent-%COMP%], \n.save-btn.text-btn[_ngcontent-%COMP%]   .save-indicator[_ngcontent-%COMP%] {\n  color: var(--accent-color);\n  font-size: 8px;\n  position: absolute;\n  top: 2px;\n  right: 2px;\n  animation: _ngcontent-%COMP%_pulse 2s infinite;\n}\n.modern-btn.export-btn[_ngcontent-%COMP%]:not(:disabled), \n.export-btn.text-btn[_ngcontent-%COMP%]:not(:disabled) {\n  background: var(--bg-warning);\n  border-color: var(--warning-color);\n  color: var(--warning-color);\n}\n.modern-btn.export-btn[_ngcontent-%COMP%]:not(:disabled):hover, \n.export-btn.text-btn[_ngcontent-%COMP%]:not(:disabled):hover {\n  background: var(--bg-warning);\n  opacity: 0.8;\n}\n.modern-btn.settings-btn[_ngcontent-%COMP%], \n.settings-btn.text-btn[_ngcontent-%COMP%] {\n  background: var(--bg-tertiary);\n  border-color: var(--text-muted);\n  color: var(--text-primary);\n}\n.modern-btn.settings-btn[_ngcontent-%COMP%]:hover, \n.settings-btn.text-btn[_ngcontent-%COMP%]:hover {\n  background: var(--bg-secondary);\n}\n@keyframes _ngcontent-%COMP%_pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n.novel-menu-btn[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.15) !important;\n  border-left: 3px solid #3b82f6 !important;\n}\n.novel-menu-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.25) !important;\n}\n.main-menu-trigger[_ngcontent-%COMP%] {\n  background: var(--bg-primary) !important;\n  border: 1px solid var(--border-color) !important;\n  border-radius: 8px !important;\n  padding: 8px 16px !important;\n  color: var(--text-primary) !important;\n  font-size: 14px !important;\n  font-weight: 500 !important;\n  transition: all 0.3s ease !important;\n  display: flex !important;\n  align-items: center !important;\n  gap: 8px !important;\n  min-height: 32px !important;\n}\n.main-menu-trigger[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary) !important;\n  border-color: var(--text-muted) !important;\n  transform: translateY(-1px) !important;\n  box-shadow: 0 4px 8px var(--shadow) !important;\n}\n.main-menu-trigger[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\n  font-size: 18px !important;\n  width: 18px !important;\n  height: 18px !important;\n}\n  .mat-mdc-menu-panel {\n  background: var(--bg-primary) !important;\n  border: 1px solid var(--border-color) !important;\n  border-radius: 8px !important;\n  box-shadow: 0 8px 24px var(--shadow) !important;\n  min-width: 200px !important;\n}\n  .mat-mdc-menu-item {\n  color: var(--text-primary) !important;\n  font-size: 14px !important;\n  padding: 12px 16px !important;\n  height: auto !important;\n  line-height: 1.4 !important;\n}\n  .mat-mdc-menu-item:hover {\n  background: var(--bg-tertiary) !important;\n}\n  .mat-mdc-menu-item[disabled] {\n  color: var(--text-muted) !important;\n  opacity: 0.6 !important;\n}\n  .mat-mdc-menu-item mat-icon {\n  margin-right: 12px !important;\n  font-size: 18px !important;\n  width: 18px !important;\n  height: 18px !important;\n  color: var(--text-secondary) !important;\n}\n.app-menu-trigger[_ngcontent-%COMP%] {\n  color: var(--text-primary) !important;\n  background: transparent !important;\n  border: none !important;\n  padding: 8px !important;\n  border-radius: 6px !important;\n  transition: all 0.2s ease !important;\n  margin-right: 8px !important;\n}\n.app-menu-trigger[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary) !important;\n  color: var(--primary-color) !important;\n}\n.app-menu-trigger[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\n  font-size: 20px !important;\n  width: 20px !important;\n  height: 20px !important;\n}\n  .mat-icon[fonticon=apps] {\n  font-variation-settings:\n    "FILL" 0,\n    "wght" 400,\n    "GRAD" 0,\n    "opsz" 24;\n}\n.dark-theme[_nghost-%COMP%]   .title-section[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .title-section[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8b9cf7 0%,\n      #a855f7 50%,\n      #f472b6 100%);\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  text-shadow: 0 2px 6px rgba(139, 156, 247, 0.4);\n}\n.dark-theme[_nghost-%COMP%]   .title-section[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]::after, .dark-theme   [_nghost-%COMP%]   .title-section[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]::after {\n  background:\n    linear-gradient(\n      90deg,\n      #8b9cf7,\n      #a855f7);\n  opacity: 0.8;\n}\n.dark-theme[_nghost-%COMP%]   .title-section[_ngcontent-%COMP%]   .last-menu[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .title-section[_ngcontent-%COMP%]   .last-menu[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8b9cf7 0%,\n      #a855f7 100%);\n  box-shadow: 0 2px 12px rgba(139, 156, 247, 0.4);\n}\n@keyframes _ngcontent-%COMP%_titleGlow {\n  0%, 100% {\n    filter: brightness(1) saturate(1);\n  }\n  50% {\n    filter: brightness(1.1) saturate(1.2);\n  }\n}\n.title-section[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_titleGlow 3s ease-in-out infinite;\n}\n/*# sourceMappingURL=novel-top-menu.component.css.map */'] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelTopMenuComponent, [{
    type: Component,
    args: [{ selector: "app-novel-top-menu", standalone: false, template: '<div *ngIf="isSearching" class="search-progress-bar">\n  <div class="search-progress"></div>\n</div>\n\n<!-- \uC18C\uC124 \uC804\uC6A9 \uC0C1\uB2E8 \uBA54\uB274\uBC14 -->\n<nav class="top-menu-bar">\n  <!-- \uC228\uACA8\uC9C4 \uD30C\uC77C \uC785\uB825 -->\n  <input \n    #fileInput \n    type="file" \n    accept=".txt,.docx,.md" \n    style="display: none;" \n    (change)="onFileSelected($event)">\n\n  <div class="brand">\n    <!-- \uC88C\uCE21 \uD328\uB110 \uD1A0\uAE00 \uBC84\uD2BC (ERP \uC2A4\uD0C0\uC77C) -->\n    <button \n      class="panel-toggle-btn left" \n      (click)="leftPanelToggle.emit()" \n      title="\uBA54\uB274 \uD328\uB110">\n      <div class="hamburger-icon">\n        <span></span>\n        <span></span>\n        <span></span>\n      </div>\n    </button>\n    \n    <!-- \uD0C0\uC774\uD2C0 \uC601\uC5ED -->\n    <div class="title-section">\n      <span class="app-title">\uC18C\uC124 \uC791\uC131</span>\n      <span class="menu-separator">\u2022</span>\n      <span class="last-menu">{{ lastSelectedMenu }}</span>\n    </div>\n  </div>\n\n  <div class="menu-center">\n    <!-- \uC911\uC559 \uC601\uC5ED \uBE44\uC6C0 -->\n  </div>\n\n  <div class="menu-right" style="display: flex; align-items: center; gap: 8px;">\n    <!-- Angular Material \uBA54\uB274 \uB4DC\uB86D\uB2E4\uC6B4 -->\n    <button mat-icon-button [matMenuTriggerFor]="mainMenu" class="app-menu-trigger" title="\uBA54\uB274">\n      <mat-icon>apps</mat-icon>\n    </button>\n    \n    <mat-menu #mainMenu="matMenu">\n      <button mat-menu-item *ngFor="let item of menuItems" \n              [disabled]="isMenuDisabled(item.name)"\n              (click)="onMenuItemClick(item)">\n        <mat-icon>{{ getMenuIcon(item.name) }}</mat-icon>\n        <span>{{ item.name }}</span>\n      </button>\n    </mat-menu>\n    \n    <!-- \uC18C\uC124 \uC0C1\uD0DC \uC815\uBCF4 -->\n    <div class="novel-status" *ngIf="novelTitle || wordCount > 0">\n      <span class="novel-title" *ngIf="novelTitle">{{ novelTitle }}</span>\n      <span class="word-count" *ngIf="wordCount > 0">{{ getWordCountText() }}</span>\n      <span class="generation-status" *ngIf="isGenerating">\uC0DD\uC131 \uC911...</span>\n    </div>\n    \n    <!-- \uAC80\uC0C9 \uACB0\uACFC \uD45C\uC2DC -->\n    <span *ngIf="searchResultCount !== null && !isSearching" class="search-result-count-inline">\n      <b>{{searchResultCount}}</b>\uAC1C\n    </span>\n    \n    <!-- \uAC80\uC0C9 \uC785\uB825\uCC3D -->\n    <input type="text" \n           class="search-box" \n           placeholder="\u{1F50D} \uC18C\uC124 \uB0B4\uC6A9 \uAC80\uC0C9"\n           [(ngModel)]="searchQuery"\n           (input)="onSearchChange(searchQuery)"\n           (keydown.enter)="onSearchEnter()">\n    \n    <!-- \uC6B0\uCE21 \uD328\uB110 \uD1A0\uAE00 \uBC84\uD2BC (ERP \uC2A4\uD0C0\uC77C) -->\n    <button \n      class="panel-toggle-btn" \n      (click)="rightPanelToggle.emit()" \n      title="\uBA54\uB274 \uD328\uB110">\n      <div class="hamburger-icon">\n        <span></span>\n        <span></span>\n        <span></span>\n      </div>\n    </button>\n  </div>\n</nav>', styles: ['/* src/app/modules/novel/components/novel-top-menu/novel-top-menu.component.scss */\n.search-result-count-inline {\n  font-size: 15px;\n  color: var(--text-primary);\n  background: var(--bg-warning);\n  border: 1px solid var(--warning-color);\n  border-radius: 4px;\n  padding: 2px 8px;\n  font-weight: 500;\n  margin-left: 4px;\n  display: inline-block;\n  vertical-align: middle;\n}\n.search-result-count {\n  position: absolute;\n  top: 5px;\n  right: 24px;\n  font-size: 15px;\n  color: var(--text-primary);\n  background: var(--bg-warning);\n  border: 1px solid var(--warning-color);\n  border-radius: 4px;\n  padding: 2px 10px;\n  z-index: 1001;\n  font-weight: 500;\n}\n.search-progress-bar {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 3px;\n  background: transparent;\n  z-index: 1000;\n}\n.search-progress {\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #ffd700 0%,\n      #ffe066 100%);\n  animation: search-progress-ani 0.7s linear infinite alternate;\n  border-radius: 2px;\n}\n@keyframes search-progress-ani {\n  0% {\n    opacity: 0.5;\n    transform: scaleX(0.2);\n  }\n  100% {\n    opacity: 1;\n    transform: scaleX(1);\n  }\n}\n.top-menu-bar {\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  padding: 0px 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  position: relative;\n  z-index: 1000;\n  height: 48px;\n  flex-shrink: 0;\n  margin: 0;\n  transition: all 0.3s ease;\n  border-bottom: 1px solid var(--border-color);\n}\n.brand {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  min-width: 200px;\n  height: 100%;\n  flex: 1;\n}\n.brand .panel-toggle-btn.left {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  padding: 8px 10px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 36px;\n  width: 40px;\n  position: relative;\n}\n.brand .panel-toggle-btn.left:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--primary-color);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n.brand .panel-toggle-btn.left:hover .hamburger-icon span {\n  background: var(--primary-color);\n}\n.brand .panel-toggle-btn.left:hover .hamburger-icon span:nth-child(1) {\n  transform: translateY(-1px);\n}\n.brand .panel-toggle-btn.left:hover .hamburger-icon span:nth-child(3) {\n  transform: translateY(1px);\n}\n.brand .panel-toggle-btn.left:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n.brand .panel-toggle-btn.left .hamburger-icon {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  width: 20px;\n}\n.brand .panel-toggle-btn.left .hamburger-icon span {\n  display: block;\n  width: 100%;\n  height: 2px;\n  background: var(--text-primary);\n  border-radius: 2px;\n  transition: all 0.3s ease;\n}\n.brand .panel-toggle-btn.left .hamburger-icon span:nth-child(2) {\n  width: 70%;\n}\n.brand .title-section {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-left: 16px;\n  height: 100%;\n  padding: 0 4px;\n}\n.brand .title-section .app-title {\n  font-size: 18px;\n  font-weight: 700;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 50%,\n      #f093fb 100%);\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  text-shadow: 0 2px 4px rgba(102, 126, 234, 0.2);\n  letter-spacing: 0.5px;\n  white-space: nowrap;\n  position: relative;\n}\n.brand .title-section .app-title::after {\n  content: "";\n  position: absolute;\n  bottom: -2px;\n  left: 0;\n  right: 0;\n  height: 2px;\n  background:\n    linear-gradient(\n      90deg,\n      #667eea,\n      #764ba2);\n  border-radius: 1px;\n  opacity: 0.6;\n}\n.brand .title-section .menu-separator {\n  color: var(--text-muted);\n  font-size: 14px;\n  margin: 0 6px;\n  font-weight: 300;\n}\n.brand .title-section .last-menu {\n  font-size: 14px;\n  font-weight: 600;\n  color: #ffffff;\n  padding: 4px 12px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  border-radius: 16px;\n  border: none;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n  white-space: nowrap;\n  position: relative;\n  overflow: hidden;\n}\n.brand .title-section .last-menu::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      transparent,\n      rgba(255, 255, 255, 0.2),\n      transparent);\n  transition: left 0.5s;\n}\n.brand .title-section .last-menu:hover::before {\n  left: 100%;\n}\n.toolbar {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 4px 0;\n}\n.toolbar-menu-label {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-primary);\n  margin-right: 12px;\n  padding: 4px 10px 4px 0;\n  letter-spacing: -0.5px;\n  transition: color 0.3s ease;\n}\n.toolbar-menu-label.novel-menu-btn {\n  cursor: pointer;\n  padding: 4px 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n}\n.toolbar-menu-label.novel-menu-btn:hover {\n  background-color: var(--bg-tertiary);\n}\n.toolbar-menu-label.novel-menu-btn:active {\n  background-color: var(--bg-secondary);\n}\n.toolbar-btn {\n  background: none;\n  border: none;\n  padding: 4px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: background 0.15s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--text-primary);\n}\n.toolbar-btn:hover,\n.toolbar-btn:focus {\n  background: var(--bg-tertiary);\n}\n.toolbar-btn.disabled,\n.toolbar-btn:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n.toolbar-btn.disabled .toolbar-icon,\n.toolbar-btn:disabled .toolbar-icon {\n  opacity: 0.5;\n}\n.toolbar-icon {\n  width: 20px;\n  height: 20px;\n}\n.menu-center {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n}\n.menu-center ul {\n  display: flex;\n  gap: 4px;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n.menu-center li {\n  position: relative;\n  cursor: pointer;\n  transition: color 0.2s;\n  color: var(--text-primary);\n  font-size: 14px;\n  font-weight: 500;\n  padding: 0 6px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border-radius: 4px 4px 0 0;\n}\n.menu-center li::after {\n  content: "";\n  display: block;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 2px;\n  height: 2px;\n  background: var(--border-color);\n  border-radius: 1px;\n}\n.menu-center li:hover::after {\n  background: rgb(255, 98, 0);\n}\n.menu-center li.active::after {\n  background: rgb(255, 98, 0);\n}\n.menu-center li.active {\n  color: rgb(255, 98, 0);\n}\n.menu-center li.disabled {\n  color: #ccc;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n.menu-center li.disabled::after {\n  display: none;\n}\n.menu-right {\n  position: absolute;\n  right: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 14px;\n  white-space: nowrap;\n}\n.search-box {\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  padding: 6px 30px 6px 8px;\n  font-size: 13px;\n  width: 180px;\n  outline: none;\n  transition: border-color 0.2s;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n}\n.search-box:focus {\n  border-color: rgb(255, 98, 0);\n  box-shadow: 0 0 0 2px rgba(255, 98, 0, 0.1);\n}\n.search-icon {\n  position: absolute;\n  right: 28px;\n  pointer-events: none;\n  display: flex;\n  align-items: center;\n}\n.panel-toggle-btn {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  padding: 8px 10px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: var(--text-primary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 36px;\n  width: 40px;\n  position: relative;\n}\n.panel-toggle-btn:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--primary-color);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n.panel-toggle-btn:hover .hamburger-icon span {\n  background: var(--primary-color);\n}\n.panel-toggle-btn:hover .hamburger-icon span:nth-child(1) {\n  transform: translateY(-1px);\n}\n.panel-toggle-btn:hover .hamburger-icon span:nth-child(3) {\n  transform: translateY(1px);\n}\n.panel-toggle-btn:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n.panel-toggle-btn .hamburger-icon {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  width: 20px;\n}\n.panel-toggle-btn .hamburger-icon span {\n  display: block;\n  width: 100%;\n  height: 2px;\n  background: var(--text-primary);\n  border-radius: 2px;\n  transition: all 0.3s ease;\n}\n.panel-toggle-btn .hamburger-icon span:nth-child(2) {\n  width: 70%;\n}\n.novel-status {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 4px 8px;\n  background: #f8f9fa;\n  border-radius: 4px;\n  font-size: 12px;\n  margin-right: 8px;\n}\n.novel-status .novel-title {\n  font-weight: 600;\n  color: #333;\n  max-width: 120px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.novel-status .word-count {\n  background: #e3f2fd;\n  color: #1976d2;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-size: 11px;\n  font-weight: 500;\n}\n.novel-status .generation-status {\n  background: #e8f5e8;\n  color: #2e7d32;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-size: 11px;\n  font-weight: 500;\n  animation: pulse 2s infinite;\n}\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.7;\n  }\n}\n@media (max-width: 768px) {\n  .top-menu-bar {\n    padding: 0 12px;\n    height: 44px;\n  }\n  .brand {\n    margin-right: 16px;\n    font-size: 18px;\n  }\n  .toolbar {\n    gap: 6px;\n    padding: 6px 0;\n  }\n  .toolbar-menu-label {\n    font-size: 13px;\n    padding: 3px 6px;\n  }\n  .toolbar-btn {\n    padding: 3px;\n  }\n  .toolbar-icon {\n    width: 18px;\n    height: 18px;\n  }\n  .menu-center ul {\n    gap: 2px;\n    margin-left: -40px;\n  }\n  .menu-center li {\n    padding: 0 4px;\n    font-size: 13px;\n    height: 36px;\n  }\n  .search-box {\n    width: 140px;\n    padding: 5px 25px 5px 6px;\n    font-size: 12px;\n  }\n  .novel-status {\n    gap: 6px;\n    padding: 3px 6px;\n    font-size: 11px;\n  }\n  .novel-status .novel-title {\n    max-width: 80px;\n  }\n}\n.toolbar-group {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-right: 16px;\n}\n.toolbar-group:last-child {\n  margin-right: 0;\n}\n.modern-btn,\n.text-btn {\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  padding: 8px 12px;\n  color: var(--text-primary);\n  font-size: 13px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  position: relative;\n  box-shadow: 0 2px 4px var(--shadow);\n}\n.modern-btn .btn-text,\n.text-btn .btn-text {\n  font-size: 12px;\n  white-space: nowrap;\n}\n.modern-btn:hover:not(:disabled),\n.text-btn:hover:not(:disabled) {\n  background: var(--bg-tertiary);\n  border-color: var(--text-muted);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px var(--shadow);\n}\n.modern-btn:active:not(:disabled),\n.text-btn:active:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px var(--shadow);\n}\n.modern-btn:disabled,\n.text-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n  background: var(--bg-secondary);\n  color: var(--text-muted);\n  box-shadow: 0 1px 2px var(--shadow);\n}\n.modern-btn.save-btn.has-content,\n.save-btn.has-content.text-btn {\n  background: var(--bg-accent);\n  border-color: var(--accent-color);\n  color: var(--accent-color);\n}\n.modern-btn.save-btn.has-content:hover:not(:disabled),\n.save-btn.has-content.text-btn:hover:not(:disabled) {\n  background: var(--bg-accent);\n  opacity: 0.8;\n}\n.modern-btn.save-btn .save-indicator,\n.save-btn.text-btn .save-indicator {\n  color: var(--accent-color);\n  font-size: 8px;\n  position: absolute;\n  top: 2px;\n  right: 2px;\n  animation: pulse 2s infinite;\n}\n.modern-btn.export-btn:not(:disabled),\n.export-btn.text-btn:not(:disabled) {\n  background: var(--bg-warning);\n  border-color: var(--warning-color);\n  color: var(--warning-color);\n}\n.modern-btn.export-btn:not(:disabled):hover,\n.export-btn.text-btn:not(:disabled):hover {\n  background: var(--bg-warning);\n  opacity: 0.8;\n}\n.modern-btn.settings-btn,\n.settings-btn.text-btn {\n  background: var(--bg-tertiary);\n  border-color: var(--text-muted);\n  color: var(--text-primary);\n}\n.modern-btn.settings-btn:hover,\n.settings-btn.text-btn:hover {\n  background: var(--bg-secondary);\n}\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n.novel-menu-btn {\n  background: rgba(255, 255, 255, 0.15) !important;\n  border-left: 3px solid #3b82f6 !important;\n}\n.novel-menu-btn:hover {\n  background: rgba(255, 255, 255, 0.25) !important;\n}\n.main-menu-trigger {\n  background: var(--bg-primary) !important;\n  border: 1px solid var(--border-color) !important;\n  border-radius: 8px !important;\n  padding: 8px 16px !important;\n  color: var(--text-primary) !important;\n  font-size: 14px !important;\n  font-weight: 500 !important;\n  transition: all 0.3s ease !important;\n  display: flex !important;\n  align-items: center !important;\n  gap: 8px !important;\n  min-height: 32px !important;\n}\n.main-menu-trigger:hover {\n  background: var(--bg-tertiary) !important;\n  border-color: var(--text-muted) !important;\n  transform: translateY(-1px) !important;\n  box-shadow: 0 4px 8px var(--shadow) !important;\n}\n.main-menu-trigger mat-icon {\n  font-size: 18px !important;\n  width: 18px !important;\n  height: 18px !important;\n}\n::ng-deep .mat-mdc-menu-panel {\n  background: var(--bg-primary) !important;\n  border: 1px solid var(--border-color) !important;\n  border-radius: 8px !important;\n  box-shadow: 0 8px 24px var(--shadow) !important;\n  min-width: 200px !important;\n}\n::ng-deep .mat-mdc-menu-item {\n  color: var(--text-primary) !important;\n  font-size: 14px !important;\n  padding: 12px 16px !important;\n  height: auto !important;\n  line-height: 1.4 !important;\n}\n::ng-deep .mat-mdc-menu-item:hover {\n  background: var(--bg-tertiary) !important;\n}\n::ng-deep .mat-mdc-menu-item[disabled] {\n  color: var(--text-muted) !important;\n  opacity: 0.6 !important;\n}\n::ng-deep .mat-mdc-menu-item mat-icon {\n  margin-right: 12px !important;\n  font-size: 18px !important;\n  width: 18px !important;\n  height: 18px !important;\n  color: var(--text-secondary) !important;\n}\n.app-menu-trigger {\n  color: var(--text-primary) !important;\n  background: transparent !important;\n  border: none !important;\n  padding: 8px !important;\n  border-radius: 6px !important;\n  transition: all 0.2s ease !important;\n  margin-right: 8px !important;\n}\n.app-menu-trigger:hover {\n  background: var(--bg-tertiary) !important;\n  color: var(--primary-color) !important;\n}\n.app-menu-trigger mat-icon {\n  font-size: 20px !important;\n  width: 20px !important;\n  height: 20px !important;\n}\n::ng-deep .mat-icon[fonticon=apps] {\n  font-variation-settings:\n    "FILL" 0,\n    "wght" 400,\n    "GRAD" 0,\n    "opsz" 24;\n}\n:host-context(.dark-theme) .title-section .app-title {\n  background:\n    linear-gradient(\n      135deg,\n      #8b9cf7 0%,\n      #a855f7 50%,\n      #f472b6 100%);\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  text-shadow: 0 2px 6px rgba(139, 156, 247, 0.4);\n}\n:host-context(.dark-theme) .title-section .app-title::after {\n  background:\n    linear-gradient(\n      90deg,\n      #8b9cf7,\n      #a855f7);\n  opacity: 0.8;\n}\n:host-context(.dark-theme) .title-section .last-menu {\n  background:\n    linear-gradient(\n      135deg,\n      #8b9cf7 0%,\n      #a855f7 100%);\n  box-shadow: 0 2px 12px rgba(139, 156, 247, 0.4);\n}\n@keyframes titleGlow {\n  0%, 100% {\n    filter: brightness(1) saturate(1);\n  }\n  50% {\n    filter: brightness(1.1) saturate(1.2);\n  }\n}\n.title-section .app-title {\n  animation: titleGlow 3s ease-in-out infinite;\n}\n/*# sourceMappingURL=novel-top-menu.component.css.map */\n'] }]
  }], () => [{ type: Router }], { activeMenu: [{
    type: Input
  }], currentActiveMenu: [{
    type: Input
  }], novelTitle: [{
    type: Input
  }], isGenerating: [{
    type: Input
  }], wordCount: [{
    type: Input
  }], isSearchMode: [{
    type: Input
  }], searchResults: [{
    type: Input
  }], generatedNovel: [{
    type: Input
  }], menuAction: [{
    type: Output
  }], menuChange: [{
    type: Output
  }], toolbarAction: [{
    type: Output
  }], search: [{
    type: Output
  }], leftPanelToggle: [{
    type: Output
  }], rightPanelToggle: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(NovelTopMenuComponent, { className: "NovelTopMenuComponent", filePath: "src/app/modules/novel/components/novel-top-menu/novel-top-menu.component.ts", lineNumber: 29 });
})();

// src/app/modules/novel/components/novel-header/novel-header.component.ts
var NovelHeaderComponent = class _NovelHeaderComponent {
  router;
  novelTitle = "";
  activeMenu = "\uC791\uC131";
  wordCount = 0;
  isSearchMode = false;
  searchResults = { current: 0, total: 0 };
  isGenerating = false;
  generatedNovel = "";
  menuChange = new EventEmitter();
  toolbarAction = new EventEmitter();
  search = new EventEmitter();
  rightPanelToggle = new EventEmitter();
  leftPanelToggle = new EventEmitter();
  constructor(router) {
    this.router = router;
  }
  onMenuChange(menu) {
    this.menuChange.emit(menu);
  }
  onToolbarAction(action) {
    this.toolbarAction.emit(action);
  }
  onSearch(searchTerm) {
    this.search.emit(searchTerm);
  }
  onRightPanelToggle() {
    this.rightPanelToggle.emit();
  }
  onLeftPanelToggle() {
    this.leftPanelToggle.emit();
  }
  goToHome() {
  }
  static \u0275fac = function NovelHeaderComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelHeaderComponent)(\u0275\u0275directiveInject(Router));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _NovelHeaderComponent, selectors: [["app-novel-header"]], inputs: { novelTitle: "novelTitle", activeMenu: "activeMenu", wordCount: "wordCount", isSearchMode: "isSearchMode", searchResults: "searchResults", isGenerating: "isGenerating", generatedNovel: "generatedNovel" }, outputs: { menuChange: "menuChange", toolbarAction: "toolbarAction", search: "search", rightPanelToggle: "rightPanelToggle", leftPanelToggle: "leftPanelToggle" }, standalone: false, decls: 2, vars: 7, consts: [[1, "novel-header"], [3, "menuChange", "toolbarAction", "search", "rightPanelToggle", "leftPanelToggle", "activeMenu", "novelTitle", "wordCount", "isSearchMode", "searchResults", "isGenerating", "generatedNovel"]], template: function NovelHeaderComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0)(1, "app-novel-top-menu", 1);
      \u0275\u0275listener("menuChange", function NovelHeaderComponent_Template_app_novel_top_menu_menuChange_1_listener($event) {
        return ctx.onMenuChange($event);
      })("toolbarAction", function NovelHeaderComponent_Template_app_novel_top_menu_toolbarAction_1_listener($event) {
        return ctx.onToolbarAction($event);
      })("search", function NovelHeaderComponent_Template_app_novel_top_menu_search_1_listener($event) {
        return ctx.onSearch($event);
      })("rightPanelToggle", function NovelHeaderComponent_Template_app_novel_top_menu_rightPanelToggle_1_listener() {
        return ctx.onRightPanelToggle();
      })("leftPanelToggle", function NovelHeaderComponent_Template_app_novel_top_menu_leftPanelToggle_1_listener() {
        return ctx.onLeftPanelToggle();
      });
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      \u0275\u0275advance();
      \u0275\u0275property("activeMenu", ctx.activeMenu)("novelTitle", ctx.novelTitle)("wordCount", ctx.wordCount)("isSearchMode", ctx.isSearchMode)("searchResults", ctx.searchResults)("isGenerating", ctx.isGenerating)("generatedNovel", ctx.generatedNovel);
    }
  }, dependencies: [NovelTopMenuComponent], styles: ["\n\n.novel-header[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  background: var(--bg-primary);\n  border-bottom: 1px solid var(--border-color);\n  position: sticky;\n  top: 0;\n  z-index: 1000;\n  box-shadow: 0 2px 4px var(--shadow);\n  width: 100%;\n  min-height: 48px;\n  transition: all 0.3s ease;\n}\n@media (max-width: 992px) {\n  .novel-header[_ngcontent-%COMP%] {\n    position: sticky;\n    min-height: 48px;\n    box-shadow: 0 2px 8px var(--shadow);\n  }\n}\n@media (max-width: 768px) {\n  .novel-header[_ngcontent-%COMP%] {\n    position: sticky;\n    min-height: 48px;\n  }\n  .novel-header[_ngcontent-%COMP%]   app-novel-top-menu[_ngcontent-%COMP%] {\n    width: 100%;\n    display: block;\n  }\n}\n@media (max-width: 480px) {\n  .novel-header[_ngcontent-%COMP%] {\n    min-height: 48px;\n    box-shadow: 0 1px 4px var(--shadow);\n  }\n}\n/*# sourceMappingURL=novel-header.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelHeaderComponent, [{
    type: Component,
    args: [{ selector: "app-novel-header", standalone: false, template: '<!-- Novel \uBAA8\uB4DC \uC804\uC6A9 \uD5E4\uB354 (Docs \uC2A4\uD0C0\uC77C \uC801\uC6A9) -->\n<div class="novel-header">\n  <!-- Novel \uC804\uC6A9 \uC0C1\uB2E8 \uBA54\uB274 \uBC14 -->\n  <app-novel-top-menu\n    [activeMenu]="activeMenu"\n    [novelTitle]="novelTitle"\n    [wordCount]="wordCount"\n    [isSearchMode]="isSearchMode"\n    [searchResults]="searchResults"\n    [isGenerating]="isGenerating"\n    [generatedNovel]="generatedNovel"\n    (menuChange)="onMenuChange($event)"\n    (toolbarAction)="onToolbarAction($event)"\n    (search)="onSearch($event)"\n    (rightPanelToggle)="onRightPanelToggle()"\n    (leftPanelToggle)="onLeftPanelToggle()">\n  </app-novel-top-menu>\n</div>', styles: ["/* src/app/modules/novel/components/novel-header/novel-header.component.scss */\n.novel-header {\n  display: flex;\n  flex-direction: column;\n  background: var(--bg-primary);\n  border-bottom: 1px solid var(--border-color);\n  position: sticky;\n  top: 0;\n  z-index: 1000;\n  box-shadow: 0 2px 4px var(--shadow);\n  width: 100%;\n  min-height: 48px;\n  transition: all 0.3s ease;\n}\n@media (max-width: 992px) {\n  .novel-header {\n    position: sticky;\n    min-height: 48px;\n    box-shadow: 0 2px 8px var(--shadow);\n  }\n}\n@media (max-width: 768px) {\n  .novel-header {\n    position: sticky;\n    min-height: 48px;\n  }\n  .novel-header app-novel-top-menu {\n    width: 100%;\n    display: block;\n  }\n}\n@media (max-width: 480px) {\n  .novel-header {\n    min-height: 48px;\n    box-shadow: 0 1px 4px var(--shadow);\n  }\n}\n/*# sourceMappingURL=novel-header.component.css.map */\n"] }]
  }], () => [{ type: Router }], { novelTitle: [{
    type: Input
  }], activeMenu: [{
    type: Input
  }], wordCount: [{
    type: Input
  }], isSearchMode: [{
    type: Input
  }], searchResults: [{
    type: Input
  }], isGenerating: [{
    type: Input
  }], generatedNovel: [{
    type: Input
  }], menuChange: [{
    type: Output
  }], toolbarAction: [{
    type: Output
  }], search: [{
    type: Output
  }], rightPanelToggle: [{
    type: Output
  }], leftPanelToggle: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(NovelHeaderComponent, { className: "NovelHeaderComponent", filePath: "src/app/modules/novel/components/novel-header/novel-header.component.ts", lineNumber: 10 });
})();

// src/app/modules/novel/components/novel-left-menu/novel-left-menu.component.ts
function NovelLeftMenuComponent_div_1_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 7);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const menu_r3 = ctx.$implicit;
    \u0275\u0275property("title", menu_r3.title);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", menu_r3.icon, " ");
  }
}
function NovelLeftMenuComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 4);
    \u0275\u0275listener("click", function NovelLeftMenuComponent_div_1_Template_div_click_0_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onExpand());
    });
    \u0275\u0275elementStart(1, "div", 5);
    \u0275\u0275template(2, NovelLeftMenuComponent_div_1_div_2_Template, 2, 2, "div", 6);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r1.menuGroups);
  }
}
function NovelLeftMenuComponent_div_2_div_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 13);
    \u0275\u0275listener("click", function NovelLeftMenuComponent_div_2_div_7_Template_div_click_0_listener() {
      const menu_r6 = \u0275\u0275restoreView(_r5).$implicit;
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r1.onMenuClick(menu_r6.id));
    });
    \u0275\u0275elementStart(1, "div", 14);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 15)(4, "div", 16);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 17);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 18);
    \u0275\u0275text(9, "\u203A");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const menu_r6 = ctx.$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(menu_r6.icon);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(menu_r6.title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", menu_r6.items.length, "\uAC1C \uD56D\uBAA9");
  }
}
function NovelLeftMenuComponent_div_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 8)(1, "div", 9)(2, "h3");
    \u0275\u0275text(3, "\uBA54\uB274");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 10);
    \u0275\u0275listener("click", function NovelLeftMenuComponent_div_2_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r4);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onClose());
    });
    \u0275\u0275text(5, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 11);
    \u0275\u0275template(7, NovelLeftMenuComponent_div_2_div_7_Template, 10, 3, "div", 12);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(7);
    \u0275\u0275property("ngForOf", ctx_r1.menuGroups);
  }
}
function NovelLeftMenuComponent_div_3_div_10_div_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 29);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r9 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(item_r9.description);
  }
}
function NovelLeftMenuComponent_div_3_div_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 24);
    \u0275\u0275listener("click", function NovelLeftMenuComponent_div_3_div_10_Template_div_click_0_listener() {
      const item_r9 = \u0275\u0275restoreView(_r8).$implicit;
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r1.onSubItemClick(item_r9.id));
    });
    \u0275\u0275elementStart(1, "div", 25)(2, "div", 26);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275template(4, NovelLeftMenuComponent_div_3_div_10_div_4_Template, 2, 1, "div", 27);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 28);
    \u0275\u0275text(6, "\u203A");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r9 = ctx.$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r9.label);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r9.description);
  }
}
function NovelLeftMenuComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 19)(1, "div", 20)(2, "div", 9)(3, "button", 21);
    \u0275\u0275listener("click", function NovelLeftMenuComponent_div_3_Template_button_click_3_listener() {
      \u0275\u0275restoreView(_r7);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onBack());
    });
    \u0275\u0275text(4, "\u2039");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "h3");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "button", 10);
    \u0275\u0275listener("click", function NovelLeftMenuComponent_div_3_Template_button_click_7_listener() {
      \u0275\u0275restoreView(_r7);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onClose());
    });
    \u0275\u0275text(8, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 22);
    \u0275\u0275template(10, NovelLeftMenuComponent_div_3_div_10_Template, 7, 2, "div", 23);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(ctx_r1.getMenuTitle());
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r1.getMenuItems());
  }
}
var NovelLeftMenuComponent = class _NovelLeftMenuComponent {
  recentWorks = [];
  isCollapsed = false;
  menuAction = new EventEmitter();
  close = new EventEmitter();
  itemClick = new EventEmitter();
  expand = new EventEmitter();
  expandedMenuId = null;
  onExpand() {
    this.expand.emit();
  }
  // ERP 스타일 메뉴 그룹 - 소설 작성 기능 포함
  menuGroups = [
    {
      id: "novel",
      title: "\uC18C\uC124 \uC791\uC131",
      icon: "\u{1F4D6}",
      items: [
        { id: "new-novel", label: "\uC0C8 \uC18C\uC124", description: "\uBE48 \uC18C\uC124 \uC0DD\uC131" },
        { id: "open-novel", label: "\uC18C\uC124 \uC5F4\uAE30", description: "\uAE30\uC874 \uC18C\uC124 \uBD88\uB7EC\uC624\uAE30" },
        { id: "recent-novels", label: "\uCD5C\uADFC \uC18C\uC124", description: "\uCD5C\uADFC \uC791\uC5C5\uD55C \uC18C\uC124 \uBAA9\uB85D" },
        { id: "save-novel", label: "\uC18C\uC124 \uC800\uC7A5", description: "\uD604\uC7AC \uC18C\uC124 \uC800\uC7A5" }
      ]
    },
    {
      id: "templates",
      title: "\uD15C\uD50C\uB9BF",
      icon: "\u{1F4C4}",
      items: [
        { id: "wuxia-template", label: "\uBB34\uD611 \uD15C\uD50C\uB9BF", description: "\uBB34\uD611 \uC18C\uC124 \uAE30\uBCF8 \uAD6C\uC870" },
        { id: "romance-template", label: "\uB85C\uB9E8\uC2A4 \uD15C\uD50C\uB9BF", description: "\uB85C\uB9E8\uC2A4 \uC18C\uC124 \uAE30\uBCF8 \uAD6C\uC870" },
        { id: "fantasy-template", label: "\uD310\uD0C0\uC9C0 \uD15C\uD50C\uB9BF", description: "\uD310\uD0C0\uC9C0 \uC18C\uC124 \uAE30\uBCF8 \uAD6C\uC870" },
        { id: "modern-template", label: "\uD604\uB300 \uD15C\uD50C\uB9BF", description: "\uD604\uB300 \uC18C\uC124 \uAE30\uBCF8 \uAD6C\uC870" }
      ]
    },
    {
      id: "characters",
      title: "\uCE90\uB9AD\uD130 \uAD00\uB9AC",
      icon: "\u{1F465}",
      items: [
        { id: "add-character", label: "\uCE90\uB9AD\uD130 \uCD94\uAC00", description: "\uC0C8 \uCE90\uB9AD\uD130 \uC0DD\uC131" },
        { id: "character-list", label: "\uCE90\uB9AD\uD130 \uBAA9\uB85D", description: "\uAE30\uC874 \uCE90\uB9AD\uD130 \uAD00\uB9AC" },
        { id: "character-relation", label: "\uAD00\uACC4\uB3C4", description: "\uCE90\uB9AD\uD130 \uAC04 \uAD00\uACC4 \uC124\uC815" },
        { id: "character-profile", label: "\uD504\uB85C\uD544 \uD3B8\uC9D1", description: "\uCE90\uB9AD\uD130 \uC0C1\uC138 \uC815\uBCF4" }
      ]
    },
    {
      id: "plot",
      title: "\uD50C\uB86F \uAD00\uB9AC",
      icon: "\u{1F4CA}",
      items: [
        { id: "plot-outline", label: "\uD50C\uB86F \uAC1C\uC694", description: "\uC804\uCCB4 \uC2A4\uD1A0\uB9AC \uAD6C\uC870" },
        { id: "chapter-plan", label: "\uCC55\uD130 \uACC4\uD68D", description: "\uCC55\uD130\uBCC4 \uACC4\uD68D \uC218\uB9BD" },
        { id: "timeline", label: "\uD0C0\uC784\uB77C\uC778", description: "\uC2DC\uAC04\uC21C \uC0AC\uAC74 \uC815\uB9AC" },
        { id: "plot-analysis", label: "\uD50C\uB86F \uBD84\uC11D", description: "\uC2A4\uD1A0\uB9AC \uAD6C\uC870 \uBD84\uC11D" }
      ]
    },
    {
      id: "data",
      title: "\uB370\uC774\uD130 \uAD00\uB9AC",
      icon: "\u{1F5C2}\uFE0F",
      items: [
        { id: "manage-characters", label: "\uCE90\uB9AD\uD130 \uAD00\uB9AC", description: "\uB4F1\uC7A5\uC778\uBB3C \uC0DD\uC131 \uBC0F \uAD00\uB9AC" },
        { id: "manage-scenarios", label: "\uC0C1\uD669 \uAD00\uB9AC", description: "\uC2DC\uB098\uB9AC\uC624 \uBC0F \uC0C1\uD669 \uC124\uC815" },
        { id: "manage-items", label: "\uC544\uC774\uD15C \uAD00\uB9AC", description: "\uC18C\uD488 \uBC0F \uB3C4\uAD6C \uAD00\uB9AC" },
        { id: "data-export", label: "\uB370\uC774\uD130 \uB0B4\uBCF4\uB0B4\uAE30", description: "\uC124\uC815 \uB370\uC774\uD130 \uBC31\uC5C5" }
      ]
    },
    {
      id: "tools",
      title: "\uCC3D\uC791 \uB3C4\uAD6C",
      icon: "\u{1F527}",
      items: [
        { id: "word-count", label: "\uAE00\uC790 \uC218 \uACC4\uC0B0", description: "\uC791\uD488 \uBD84\uB7C9 \uD655\uC778" },
        { id: "name-generator", label: "\uC774\uB984 \uC0DD\uC131\uAE30", description: "\uCE90\uB9AD\uD130 \uC774\uB984 \uCD94\uCC9C" },
        { id: "grammar-check", label: "\uB9DE\uCDA4\uBC95 \uAC80\uC0AC", description: "\uD14D\uC2A4\uD2B8 \uC624\uB958 \uAC80\uC0AC" },
        { id: "writing-tips", label: "\uCC3D\uC791 \uD301", description: "\uAE00\uC4F0\uAE30 \uAC00\uC774\uB4DC" }
      ]
    },
    {
      id: "export",
      title: "\uB0B4\uBCF4\uB0B4\uAE30",
      icon: "\u{1F4E4}",
      items: [
        { id: "export-txt", label: "TXT\uB85C \uC800\uC7A5", description: "\uD14D\uC2A4\uD2B8 \uD30C\uC77C\uB85C \uB0B4\uBCF4\uB0B4\uAE30" },
        { id: "export-docx", label: "DOCX\uB85C \uBCC0\uD658", description: "Word \uBB38\uC11C\uB85C \uC800\uC7A5" },
        { id: "export-pdf", label: "PDF\uB85C \uC800\uC7A5", description: "PDF \uD30C\uC77C\uB85C \uB0B4\uBCF4\uB0B4\uAE30" },
        { id: "export-epub", label: "EPUB\uB85C \uBCC0\uD658", description: "\uC804\uC790\uCC45 \uD615\uD0DC\uB85C \uC800\uC7A5" }
      ]
    }
  ];
  toggleMenu(menuId) {
    if (this.expandedMenuId === menuId) {
      this.expandedMenuId = null;
    } else {
      this.expandedMenuId = menuId;
    }
  }
  onItemClick(item, groupId) {
    this.itemClick.emit({ item, groupId });
    switch (item.id) {
      case "new-novel":
        this.menuAction.emit({ type: "NEW_NOVEL" });
        break;
      case "open-novel":
        this.menuAction.emit({ type: "OPEN_NOVEL" });
        break;
      case "save-novel":
        this.menuAction.emit({ type: "SAVE_NOVEL" });
        break;
      // 데이터 관리 관련 아이템들
      case "manage-characters":
      case "manage-scenarios":
      case "manage-items":
      case "data-export":
        this.menuAction.emit({ type: "DATA", data: item.id });
        break;
      default:
        this.menuAction.emit({ type: "NEW_NOVEL", data: item });
        break;
    }
  }
  isMenuExpanded(menuId) {
    return this.expandedMenuId === menuId;
  }
  onClose() {
    this.close.emit();
  }
  getExpandedItems() {
    const menu = this.menuGroups.find((m) => m.id === this.expandedMenuId);
    return menu ? menu.items : [];
  }
  getExpandedMenuTitle() {
    const menu = this.menuGroups.find((m) => m.id === this.expandedMenuId);
    return menu ? menu.title : "";
  }
  onMenuClick(menuId) {
    this.toggleMenu(menuId);
  }
  onBack() {
    this.expandedMenuId = null;
  }
  getMenuTitle() {
    return this.getExpandedMenuTitle();
  }
  getMenuItems() {
    return this.getExpandedItems();
  }
  onSubItemClick(itemId) {
    const menu = this.menuGroups.find((m) => m.id === this.expandedMenuId);
    if (menu) {
      const item = menu.items.find((i) => i.id === itemId);
      if (item) {
        this.onItemClick(item, menu.id);
      }
    }
  }
  static \u0275fac = function NovelLeftMenuComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelLeftMenuComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _NovelLeftMenuComponent, selectors: [["app-novel-left-menu"]], inputs: { recentWorks: "recentWorks", isCollapsed: "isCollapsed" }, outputs: { menuAction: "menuAction", close: "close", itemClick: "itemClick", expand: "expand" }, standalone: false, decls: 4, vars: 5, consts: [[1, "novel-left-menu"], ["class", "collapsed-view", 3, "click", 4, "ngIf"], ["class", "main-menu", 4, "ngIf"], ["class", "expanded-panel", 4, "ngIf"], [1, "collapsed-view", 3, "click"], [1, "icon-list"], ["class", "menu-icon", 3, "title", 4, "ngFor", "ngForOf"], [1, "menu-icon", 3, "title"], [1, "main-menu"], [1, "panel-header"], ["title", "\uCD95\uC18C", 1, "close-btn", 3, "click"], [1, "category-list"], ["class", "category-item", 3, "click", 4, "ngFor", "ngForOf"], [1, "category-item", 3, "click"], [1, "category-icon"], [1, "category-content"], [1, "category-title"], [1, "category-count"], [1, "category-arrow"], [1, "expanded-panel"], [1, "panel-content"], [1, "back-btn", 3, "click"], [1, "panel-items"], ["class", "menu-item", 3, "click", 4, "ngFor", "ngForOf"], [1, "menu-item", 3, "click"], [1, "item-content"], [1, "item-label"], ["class", "item-description", 4, "ngIf"], [1, "item-arrow"], [1, "item-description"]], template: function NovelLeftMenuComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0);
      \u0275\u0275template(1, NovelLeftMenuComponent_div_1_Template, 3, 1, "div", 1)(2, NovelLeftMenuComponent_div_2_Template, 8, 1, "div", 2)(3, NovelLeftMenuComponent_div_3_Template, 11, 2, "div", 3);
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275classProp("collapsed", ctx.isCollapsed);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.isCollapsed);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.expandedMenuId && !ctx.isCollapsed);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.expandedMenuId && !ctx.isCollapsed);
    }
  }, dependencies: [NgForOf, NgIf], styles: ["\n\n[_nghost-%COMP%] {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.novel-left-menu[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 280px;\n  z-index: 1002;\n  margin: 0 !important;\n  padding: 0 !important;\n  background: var(--bg-primary);\n  border-right: 1px solid var(--border-color);\n  box-shadow: 2px 0 8px var(--shadow);\n  animation: _ngcontent-%COMP%_slideInFromLeft 0.3s ease-out;\n  transition: width 0.3s ease;\n}\n.novel-left-menu.collapsed[_ngcontent-%COMP%] {\n  width: 48px;\n  overflow: hidden;\n}\n.novel-left-menu.collapsed[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 12px 0;\n  height: 100%;\n  overflow-y: auto;\n  cursor: pointer;\n}\n.novel-left-menu.collapsed[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .icon-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 16px;\n  width: 100%;\n}\n.novel-left-menu.collapsed[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .icon-list[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%] {\n  font-size: 24px;\n  padding: 8px;\n  text-align: center;\n  transition: all 0.2s ease;\n  border-radius: 8px;\n}\n.novel-left-menu.collapsed[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .icon-list[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]:hover {\n  background: var(--bg-secondary);\n  transform: scale(1.1);\n}\n.novel-left-menu[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%], \n.novel-left-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%] {\n  height: 100%;\n  overflow-y: auto;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color);\n  background: var(--bg-secondary);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  flex: 1;\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.novel-left-menu[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%], \n.novel-left-menu[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  color: var(--text-primary);\n  font-size: 20px;\n  cursor: pointer;\n  padding: 4px 8px;\n  border-radius: 4px;\n  transition: background 0.2s ease;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover, \n.novel-left-menu[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary);\n}\n.novel-left-menu[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%] {\n  padding: 16px;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 16px;\n  margin-bottom: 8px;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:hover {\n  background: var(--bg-secondary);\n  border-color: var(--border-color);\n  transform: translateX(4px);\n}\n.novel-left-menu[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%] {\n  font-size: 24px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   .category-count[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n}\n.novel-left-menu[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-arrow[_ngcontent-%COMP%] {\n  font-size: 18px;\n  color: var(--text-secondary);\n  transition: transform 0.2s ease;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:hover   .category-arrow[_ngcontent-%COMP%] {\n  transform: translateX(4px);\n}\n.novel-left-menu[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%] {\n  padding: 16px;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  margin-bottom: 8px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover {\n  background: var(--bg-secondary);\n  border-color: var(--border-color);\n  transform: translateX(4px);\n}\n.novel-left-menu[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-label[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-primary);\n  margin-bottom: 2px;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  line-height: 1.3;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-arrow[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: var(--text-secondary);\n  transition: transform 0.2s ease;\n}\n.novel-left-menu[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover   .item-arrow[_ngcontent-%COMP%] {\n  transform: translateX(2px);\n}\n@keyframes _ngcontent-%COMP%_slideInFromLeft {\n  from {\n    transform: translateX(-100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n@media (max-width: 768px) {\n  .novel-left-menu[_ngcontent-%COMP%] {\n    width: 260px;\n  }\n  .novel-left-menu.collapsed[_ngcontent-%COMP%] {\n    width: 44px;\n  }\n  .novel-left-menu[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%] {\n    padding: 12px 16px;\n  }\n  .novel-left-menu[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n    font-size: 16px;\n  }\n  .novel-left-menu[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%], \n   .novel-left-menu[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%] {\n    padding: 12px;\n  }\n  .novel-left-menu[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%] {\n    padding: 12px;\n  }\n  .novel-left-menu[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%] {\n    width: 36px;\n    height: 36px;\n    font-size: 20px;\n  }\n  .novel-left-menu[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%] {\n    font-size: 14px;\n  }\n}\n/*# sourceMappingURL=novel-left-menu.component.css.map */"], data: { animation: [
    trigger("expandCollapse", [
      state("expanded", style({
        height: "*",
        opacity: 1,
        overflow: "visible"
      })),
      state("collapsed", style({
        height: "0px",
        opacity: 0,
        overflow: "hidden"
      })),
      transition("expanded <=> collapsed", [
        animate("300ms ease-in-out")
      ])
    ])
  ] } });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelLeftMenuComponent, [{
    type: Component,
    args: [{ selector: "app-novel-left-menu", standalone: false, animations: [
      trigger("expandCollapse", [
        state("expanded", style({
          height: "*",
          opacity: 1,
          overflow: "visible"
        })),
        state("collapsed", style({
          height: "0px",
          opacity: 0,
          overflow: "hidden"
        })),
        transition("expanded <=> collapsed", [
          animate("300ms ease-in-out")
        ])
      ])
    ], template: '<div class="novel-left-menu" [class.collapsed]="isCollapsed">\n  <!-- \uCD95\uC18C\uB41C \uC0C1\uD0DC (48px \uB108\uBE44, \uC544\uC774\uCF58\uB9CC \uD45C\uC2DC) -->\n  <div class="collapsed-view" *ngIf="isCollapsed" (click)="onExpand()">\n    <div class="icon-list">\n      <div class="menu-icon" *ngFor="let menu of menuGroups" [title]="menu.title">\n        {{ menu.icon }}\n      </div>\n    </div>\n  </div>\n\n  <!-- \uD655\uC7A5\uB41C \uC0C1\uD0DC (\uBA54\uC778 \uCE74\uD14C\uACE0\uB9AC \uBA54\uB274) -->\n  <div class="main-menu" *ngIf="!expandedMenuId && !isCollapsed">\n    <div class="panel-header">\n      <h3>\uBA54\uB274</h3>\n      <button class="close-btn" (click)="onClose()" title="\uCD95\uC18C">\xD7</button>\n    </div>\n    <div class="category-list">\n      <div class="category-item" \n           *ngFor="let menu of menuGroups" \n           (click)="onMenuClick(menu.id)">\n        <div class="category-icon">{{ menu.icon }}</div>\n        <div class="category-content">\n          <div class="category-title">{{ menu.title }}</div>\n          <div class="category-count">{{ menu.items.length }}\uAC1C \uD56D\uBAA9</div>\n        </div>\n        <div class="category-arrow">\u203A</div>\n      </div>\n    </div>\n  </div>\n\n  <!-- \uC11C\uBE0C \uBA54\uB274 \uD328\uB110 (expandedMenuId\uAC00 \uC788\uC744 \uB54C) -->\n  <div class="expanded-panel" *ngIf="expandedMenuId && !isCollapsed">\n    <div class="panel-content">\n      <div class="panel-header">\n        <button class="back-btn" (click)="onBack()">\u2039</button>\n        <h3>{{ getMenuTitle() }}</h3>\n        <button class="close-btn" (click)="onClose()" title="\uCD95\uC18C">\xD7</button>\n      </div>\n      <div class="panel-items">\n        <div class="menu-item" *ngFor="let item of getMenuItems()" (click)="onSubItemClick(item.id)">\n          <div class="item-content">\n            <div class="item-label">{{ item.label }}</div>\n            <div class="item-description" *ngIf="item.description">{{ item.description }}</div>\n          </div>\n          <div class="item-arrow">\u203A</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>', styles: ["/* src/app/modules/novel/components/novel-left-menu/novel-left-menu.component.scss */\n:host {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.novel-left-menu {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 280px;\n  z-index: 1002;\n  margin: 0 !important;\n  padding: 0 !important;\n  background: var(--bg-primary);\n  border-right: 1px solid var(--border-color);\n  box-shadow: 2px 0 8px var(--shadow);\n  animation: slideInFromLeft 0.3s ease-out;\n  transition: width 0.3s ease;\n}\n.novel-left-menu.collapsed {\n  width: 48px;\n  overflow: hidden;\n}\n.novel-left-menu.collapsed .collapsed-view {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 12px 0;\n  height: 100%;\n  overflow-y: auto;\n  cursor: pointer;\n}\n.novel-left-menu.collapsed .collapsed-view .icon-list {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 16px;\n  width: 100%;\n}\n.novel-left-menu.collapsed .collapsed-view .icon-list .menu-icon {\n  font-size: 24px;\n  padding: 8px;\n  text-align: center;\n  transition: all 0.2s ease;\n  border-radius: 8px;\n}\n.novel-left-menu.collapsed .collapsed-view .icon-list .menu-icon:hover {\n  background: var(--bg-secondary);\n  transform: scale(1.1);\n}\n.novel-left-menu .main-menu,\n.novel-left-menu .expanded-panel {\n  height: 100%;\n  overflow-y: auto;\n}\n.novel-left-menu .panel-header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color);\n  background: var(--bg-secondary);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n}\n.novel-left-menu .panel-header h3 {\n  flex: 1;\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.novel-left-menu .panel-header .back-btn,\n.novel-left-menu .panel-header .close-btn {\n  background: none;\n  border: none;\n  color: var(--text-primary);\n  font-size: 20px;\n  cursor: pointer;\n  padding: 4px 8px;\n  border-radius: 4px;\n  transition: background 0.2s ease;\n}\n.novel-left-menu .panel-header .back-btn:hover,\n.novel-left-menu .panel-header .close-btn:hover {\n  background: var(--bg-tertiary);\n}\n.novel-left-menu .category-list {\n  padding: 16px;\n}\n.novel-left-menu .category-list .category-item {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 16px;\n  margin-bottom: 8px;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n.novel-left-menu .category-list .category-item:hover {\n  background: var(--bg-secondary);\n  border-color: var(--border-color);\n  transform: translateX(4px);\n}\n.novel-left-menu .category-list .category-item .category-icon {\n  font-size: 24px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n}\n.novel-left-menu .category-list .category-item .category-content {\n  flex: 1;\n}\n.novel-left-menu .category-list .category-item .category-content .category-title {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n}\n.novel-left-menu .category-list .category-item .category-content .category-count {\n  font-size: 12px;\n  color: var(--text-secondary);\n}\n.novel-left-menu .category-list .category-item .category-arrow {\n  font-size: 18px;\n  color: var(--text-secondary);\n  transition: transform 0.2s ease;\n}\n.novel-left-menu .category-list .category-item:hover .category-arrow {\n  transform: translateX(4px);\n}\n.novel-left-menu .panel-items {\n  padding: 16px;\n}\n.novel-left-menu .panel-items .menu-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  margin-bottom: 8px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n.novel-left-menu .panel-items .menu-item:hover {\n  background: var(--bg-secondary);\n  border-color: var(--border-color);\n  transform: translateX(4px);\n}\n.novel-left-menu .panel-items .menu-item .item-content {\n  flex: 1;\n}\n.novel-left-menu .panel-items .menu-item .item-content .item-label {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-primary);\n  margin-bottom: 2px;\n}\n.novel-left-menu .panel-items .menu-item .item-content .item-description {\n  font-size: 12px;\n  color: var(--text-secondary);\n  line-height: 1.3;\n}\n.novel-left-menu .panel-items .menu-item .item-arrow {\n  font-size: 14px;\n  color: var(--text-secondary);\n  transition: transform 0.2s ease;\n}\n.novel-left-menu .panel-items .menu-item:hover .item-arrow {\n  transform: translateX(2px);\n}\n@keyframes slideInFromLeft {\n  from {\n    transform: translateX(-100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n@media (max-width: 768px) {\n  .novel-left-menu {\n    width: 260px;\n  }\n  .novel-left-menu.collapsed {\n    width: 44px;\n  }\n  .novel-left-menu .panel-header {\n    padding: 12px 16px;\n  }\n  .novel-left-menu .panel-header h3 {\n    font-size: 16px;\n  }\n  .novel-left-menu .category-list,\n  .novel-left-menu .panel-items {\n    padding: 12px;\n  }\n  .novel-left-menu .category-item {\n    padding: 12px;\n  }\n  .novel-left-menu .category-item .category-icon {\n    width: 36px;\n    height: 36px;\n    font-size: 20px;\n  }\n  .novel-left-menu .category-item .category-content .category-title {\n    font-size: 14px;\n  }\n}\n/*# sourceMappingURL=novel-left-menu.component.css.map */\n"] }]
  }], null, { recentWorks: [{
    type: Input
  }], isCollapsed: [{
    type: Input
  }], menuAction: [{
    type: Output
  }], close: [{
    type: Output
  }], itemClick: [{
    type: Output
  }], expand: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(NovelLeftMenuComponent, { className: "NovelLeftMenuComponent", filePath: "src/app/modules/novel/components/novel-left-menu/novel-left-menu.component.ts", lineNumber: 45 });
})();

// src/app/modules/novel/components/battle-modal/battle-modal.component.ts
function BattleModalComponent_div_40_span_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\uD50C\uB808\uC774\uC5B4 \uD134");
    \u0275\u0275elementEnd();
  }
}
function BattleModalComponent_div_40_span_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, "\uC801 \uD134");
    \u0275\u0275elementEnd();
  }
}
function BattleModalComponent_div_40_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 27);
    \u0275\u0275template(1, BattleModalComponent_div_40_span_1_Template, 2, 0, "span", 28)(2, BattleModalComponent_div_40_span_2_Template, 2, 0, "span", 28);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.currentTurn === "player");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.currentTurn === "enemy");
  }
}
function BattleModalComponent_div_41_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 29)(1, "span", 30);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", ctx_r0.winner, " \uC2B9\uB9AC!");
  }
}
function BattleModalComponent_div_43_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 31);
    \u0275\u0275listener("click", function BattleModalComponent_div_43_Template_div_click_0_listener() {
      const i_r3 = \u0275\u0275restoreView(_r2).index;
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.selectEnemy(i_r3));
    });
    \u0275\u0275elementStart(1, "div", 6)(2, "h3");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 32);
    \u0275\u0275text(5, "\u{1F479}");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 8)(7, "div", 9)(8, "label");
    \u0275\u0275text(9, "HP");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "div", 10);
    \u0275\u0275element(11, "div", 11);
    \u0275\u0275elementStart(12, "span", 12);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(14, "div", 13)(15, "label");
    \u0275\u0275text(16, "MP");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "div", 10);
    \u0275\u0275element(18, "div", 14);
    \u0275\u0275elementStart(19, "span", 12);
    \u0275\u0275text(20);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(21, "div", 15)(22, "span");
    \u0275\u0275text(23);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(24, "span");
    \u0275\u0275text(25);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const enemy_r4 = ctx.$implicit;
    const i_r3 = ctx.index;
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275classProp("active", ctx_r0.currentTurn === "enemy")("selected", i_r3 === ctx_r0.selectedEnemyIndex && ctx_r0.currentTurn === "player")("defeated", enemy_r4.currentHp <= 0);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(enemy_r4.name);
    \u0275\u0275advance(8);
    \u0275\u0275styleProp("width", ctx_r0.getHpPercentage(enemy_r4), "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", enemy_r4.currentHp, "/", enemy_r4.maxHp);
    \u0275\u0275advance(5);
    \u0275\u0275styleProp("width", ctx_r0.getMpPercentage(enemy_r4), "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", enemy_r4.currentMp, "/", enemy_r4.maxMp);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("\uACF5\uACA9: ", enemy_r4.attack);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\uBC29\uC5B4: ", enemy_r4.defense);
  }
}
function BattleModalComponent_div_48_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 33)(1, "span", 34);
    \u0275\u0275text(2);
    \u0275\u0275pipe(3, "date");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 35);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const log_r5 = ctx.$implicit;
    \u0275\u0275property("ngClass", "log-" + log_r5.type);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind2(3, 3, log_r5.timestamp, "HH:mm:ss"));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(log_r5.message);
  }
}
function BattleModalComponent_div_49_div_7_div_4_button_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 48);
    \u0275\u0275listener("click", function BattleModalComponent_div_49_div_7_div_4_button_4_Template_button_click_0_listener() {
      const skill_r9 = \u0275\u0275restoreView(_r8).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r0.playerUseSkill(skill_r9));
    });
    \u0275\u0275elementStart(1, "div", 49)(2, "span", 50);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 51);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const skill_r9 = ctx.$implicit;
    const ctx_r0 = \u0275\u0275nextContext(4);
    \u0275\u0275property("color", skill_r9.type === "attack" ? "warn" : skill_r9.type === "heal" ? "primary" : "accent")("disabled", ctx_r0.playerCharacter.currentMp < skill_r9.mpCost)("title", skill_r9.description + " (MP: " + skill_r9.mpCost + ")");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(skill_r9.name);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("MP: ", skill_r9.mpCost);
  }
}
function BattleModalComponent_div_49_div_7_div_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 45)(1, "h5");
    \u0275\u0275text(2, "\uAE30\uC220");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 46);
    \u0275\u0275template(4, BattleModalComponent_div_49_div_7_div_4_button_4_Template, 6, 5, "button", 47);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r0.playerCharacter.skills);
  }
}
function BattleModalComponent_div_49_div_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 41)(1, "div", 42)(2, "button", 43);
    \u0275\u0275listener("click", function BattleModalComponent_div_49_div_7_Template_button_click_2_listener() {
      \u0275\u0275restoreView(_r7);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.playerAttack());
    });
    \u0275\u0275text(3, " \u2694\uFE0F \uC77C\uBC18 \uACF5\uACA9 ");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(4, BattleModalComponent_div_49_div_7_div_4_Template, 5, 1, "div", 44);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngIf", ctx_r0.playerCharacter.skills.length > 0);
  }
}
function BattleModalComponent_div_49_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 36)(1, "div", 37)(2, "h4");
    \u0275\u0275text(3, "\uD589\uB3D9 \uC120\uD0DD");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 38)(5, "button", 39);
    \u0275\u0275listener("click", function BattleModalComponent_div_49_Template_button_click_5_listener() {
      \u0275\u0275restoreView(_r6);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.startAutoBattle());
    });
    \u0275\u0275text(6, " \u{1F916} \uC790\uB3D9 \uC804\uD22C \uC2DC\uC791 ");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(7, BattleModalComponent_div_49_div_7_Template, 5, 1, "div", 40);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(7);
    \u0275\u0275property("ngIf", ctx_r0.currentTurn === "player");
  }
}
function BattleModalComponent_div_50_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 52)(1, "div", 53);
    \u0275\u0275element(2, "mat-spinner", 54);
    \u0275\u0275elementStart(3, "span");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "button", 55);
    \u0275\u0275listener("click", function BattleModalComponent_div_50_Template_button_click_5_listener() {
      \u0275\u0275restoreView(_r10);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.stopAutoBattle());
    });
    \u0275\u0275text(6, "\uC911\uB2E8");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("\u{1F916} \uC790\uB3D9 \uC804\uD22C \uC9C4\uD589 \uC911... (", ctx_r0.currentTurn === "player" ? "\uD50C\uB808\uC774\uC5B4" : "\uC801", " \uD134)");
  }
}
function BattleModalComponent_div_51_Template(rf, ctx) {
  if (rf & 1) {
    const _r11 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 56)(1, "button", 39);
    \u0275\u0275listener("click", function BattleModalComponent_div_51_Template_button_click_1_listener() {
      \u0275\u0275restoreView(_r11);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.restartBattle());
    });
    \u0275\u0275text(2, " \uB2E4\uC2DC \uC804\uD22C ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "button", 57);
    \u0275\u0275listener("click", function BattleModalComponent_div_51_Template_button_click_3_listener() {
      \u0275\u0275restoreView(_r11);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.closeBattle());
    });
    \u0275\u0275text(4, " \uC804\uD22C \uC885\uB8CC ");
    \u0275\u0275elementEnd()();
  }
}
var BattleModalComponent = class _BattleModalComponent {
  dialogRef;
  data;
  playerCharacter;
  enemyCharacters = [];
  // 단일 적 → 여러 적 배열
  battleLogs = [];
  currentTurn = "player";
  battleEnded = false;
  winner = "";
  isProcessing = false;
  isAutoBattle = false;
  selectedEnemyIndex = 0;
  // 타겟 선택된 적의 인덱스
  constructor(dialogRef, data) {
    this.dialogRef = dialogRef;
    this.data = data;
    this.initializeBattle();
  }
  initializeBattle() {
    if (this.data && this.data.playerCharacter) {
      this.playerCharacter = this.convertToBattleCharacter(this.data.playerCharacter, "player");
      if (this.data.enemyCharacters && Array.isArray(this.data.enemyCharacters)) {
        this.enemyCharacters = this.data.enemyCharacters.map((enemy) => this.convertToBattleCharacter(enemy, "enemy"));
      } else if (this.data.enemyCharacter) {
        const baseEnemy = this.convertToBattleCharacter(this.data.enemyCharacter, "enemy");
        const enemyCount = 2 + Math.floor(Math.random() * 2);
        this.enemyCharacters = Array.from({ length: enemyCount }, (_, i) => {
          if (i === 0) {
            return baseEnemy;
          } else {
            return __spreadProps(__spreadValues({}, baseEnemy), {
              id: `${baseEnemy.id}_${i}`,
              name: `${baseEnemy.name} ${i + 1}`,
              maxHp: Math.floor(baseEnemy.maxHp * (0.8 + Math.random() * 0.4)),
              // 80~120%
              currentHp: Math.floor(baseEnemy.maxHp * (0.8 + Math.random() * 0.4)),
              attack: Math.floor(baseEnemy.attack * (0.9 + Math.random() * 0.2)),
              // 90~110%
              defense: Math.floor(baseEnemy.defense * (0.9 + Math.random() * 0.2))
            });
          }
        });
      } else {
        const enemyCount = 2 + Math.floor(Math.random() * 2);
        this.enemyCharacters = Array.from({ length: enemyCount }, (_, i) => this.generateRandomEnemy(i));
      }
    } else {
      this.playerCharacter = {
        id: "player1",
        name: "\uC8FC\uC778\uACF5",
        type: "player",
        maxHp: 100,
        currentHp: 100,
        maxMp: 50,
        currentMp: 50,
        attack: 35,
        defense: 15,
        agility: 18,
        skills: [
          { id: "skill1", name: "\uC5F0\uC18D\uBCA0\uAE30", description: "\uC801\uC5D0\uAC8C 2\uD68C \uC5F0\uC18D \uACF5\uACA9", mpCost: 10, damage: 25, type: "attack", isAOE: false },
          { id: "skill2", name: "\uAC15\uD0C0", description: "\uAC15\uB825\uD55C \uC77C\uACA9", mpCost: 15, damage: 40, type: "attack", isAOE: false },
          { id: "skill3", name: "\uD68C\uC804\uBCA0\uAE30", description: "\uBAA8\uB4E0 \uC801\uC5D0\uAC8C \uAD11\uC5ED \uACF5\uACA9", mpCost: 20, damage: 30, type: "attack", isAOE: true },
          // 새로운 광역 스킬
          { id: "skill4", name: "\uD68C\uBCF5\uC220", description: "HP\uB97C \uD68C\uBCF5", mpCost: 15, damage: -25, type: "heal", isAOE: false }
        ],
        items: [
          { id: "item1", name: "\uAC15\uCCA0\uAC80", description: "\uACF5\uACA9\uB825 +10", type: "weapon", effect: 10 },
          { id: "item2", name: "\uAC00\uC8FD\uAC11\uC637", description: "\uBC29\uC5B4\uB825 +8", type: "armor", effect: 8 },
          { id: "item3", name: "\uCCB4\uB825\uD3EC\uC158", description: "HP +30 \uD68C\uBCF5", type: "consumable", effect: 30 }
        ]
      };
      const enemyCount = 2 + Math.floor(Math.random() * 2);
      this.enemyCharacters = Array.from({ length: enemyCount }, (_, i) => this.generateRandomEnemy(i));
    }
    this.addBattleLog("\uC804\uD22C\uAC00 \uC2DC\uC791\uB418\uC5C8\uC2B5\uB2C8\uB2E4!", "system");
    const enemyNames = this.enemyCharacters.map((e) => e.name).join(", ");
    this.addBattleLog(`${this.playerCharacter.name} vs ${enemyNames} (\uCD1D ${this.enemyCharacters.length}\uB9C8\uB9AC)`, "system");
  }
  // NovelCharacter를 BattleCharacter로 변환
  convertToBattleCharacter(novelChar, type) {
    const hp = this.extractStat(novelChar.notes, "HP") || 100;
    const attack = this.extractStat(novelChar.notes, "\uACF5\uACA9\uB825") || 20;
    const defense = this.extractStat(novelChar.notes, "\uBC29\uC5B4\uB825") || 15;
    const speed = this.extractStat(novelChar.notes, "\uC18D\uB3C4") || 18;
    const skills = (novelChar.abilities || []).map((ability, index) => ({
      id: `skill${index + 1}`,
      name: ability,
      description: `${ability} \uAE30\uC220`,
      mpCost: 10 + index * 5,
      damage: 15 + index * 5,
      type: "attack"
    }));
    if (skills.length === 0) {
      skills.push({ id: "skill1", name: "\uC77C\uBC18 \uACF5\uACA9", description: "\uAE30\uBCF8 \uACF5\uACA9", mpCost: 0, damage: 10, type: "attack" });
    }
    return {
      id: novelChar.id,
      name: novelChar.name,
      type,
      maxHp: hp,
      currentHp: hp,
      maxMp: 50,
      currentMp: 50,
      attack,
      defense,
      agility: speed,
      skills,
      items: []
    };
  }
  // notes에서 능력치 추출
  extractStat(notes, statName) {
    if (!notes)
      return null;
    const regex = new RegExp(`${statName}:\\s*(\\d+)`, "i");
    const match = notes.match(regex);
    return match ? parseInt(match[1], 10) : null;
  }
  generateRandomEnemy(index = 0) {
    const enemyNames = ["\uC624\uD06C \uC804\uC0AC", "\uC2A4\uCF08\uB808\uD1A4 \uB9C8\uBC95\uC0AC", "\uACE0\uBE14\uB9B0 \uB3C4\uC801", "\uB2E4\uD06C\uC5D8\uD504 \uC554\uC0B4\uC790", "\uD2B8\uB864 \uAC70\uC778"];
    const randomName = enemyNames[Math.floor(Math.random() * enemyNames.length)];
    const baseHp = 80 + Math.floor(Math.random() * 40);
    const baseMp = 30 + Math.floor(Math.random() * 30);
    return {
      id: `enemy${index + 1}`,
      name: randomName,
      type: "enemy",
      maxHp: baseHp,
      currentHp: baseHp,
      maxMp: baseMp,
      currentMp: baseMp,
      attack: 15 + Math.floor(Math.random() * 10),
      defense: 10 + Math.floor(Math.random() * 8),
      agility: 12 + Math.floor(Math.random() * 12),
      skills: [
        { id: `enemy${index + 1}_skill1`, name: "\uAC15\uD0C0", description: "\uAC15\uB825\uD55C \uACF5\uACA9", mpCost: 8, damage: 18, type: "attack", isAOE: false },
        { id: `enemy${index + 1}_skill2`, name: "\uB9C8\uBC95 \uBC29\uD328", description: "\uB9C8\uBC95\uC73C\uB85C \uBC29\uC5B4", mpCost: 6, damage: 0, type: "defense", isAOE: false }
      ],
      items: [
        { id: `enemy${index + 1}_item1`, name: "\uB179\uC2A8 \uB3C4\uB07C", description: "\uACF5\uACA9\uB825 +5", type: "weapon", effect: 5 },
        { id: `enemy${index + 1}_item2`, name: "\uB0A1\uC740 \uAC11\uC637", description: "\uBC29\uC5B4\uB825 +3", type: "armor", effect: 3 }
      ]
    };
  }
  // 적 선택
  selectEnemy(index) {
    if (this.enemyCharacters[index].currentHp > 0) {
      this.selectedEnemyIndex = index;
    }
  }
  // 살아있는 적들만 반환
  getAliveEnemies() {
    return this.enemyCharacters.filter((e) => e.currentHp > 0);
  }
  playerAttack() {
    if (this.battleEnded || this.currentTurn !== "player")
      return;
    const aliveEnemies = this.getAliveEnemies();
    if (aliveEnemies.length === 0)
      return;
    if (this.enemyCharacters[this.selectedEnemyIndex].currentHp <= 0) {
      this.selectedEnemyIndex = this.enemyCharacters.findIndex((e) => e.currentHp > 0);
    }
    const targetEnemy = this.enemyCharacters[this.selectedEnemyIndex];
    const attackVariations = [
      `${this.playerCharacter.name}\uC774 \uAC80\uC744 \uD720\uB450\uB974\uBA70 ${targetEnemy.name}\uC5D0\uAC8C \uC804\uC9C4\uD569\uB2C8\uB2E4!`,
      `${this.playerCharacter.name}\uC774 \uBE60\uB978 \uB3D9\uC791\uC73C\uB85C ${targetEnemy.name}\uC744 \uACF5\uACA9\uD569\uB2C8\uB2E4!`,
      `${this.playerCharacter.name}\uC774 \uC804\uD22C\uC790\uC138\uB97C \uCDE8\uD558\uACE0 ${targetEnemy.name}\uC744 \uACF5\uACA9\uD569\uB2C8\uB2E4!`
    ];
    const attackMsg = attackVariations[Math.floor(Math.random() * attackVariations.length)];
    this.addBattleLog(attackMsg, "status");
    const damage = this.calculateDamage(this.playerCharacter, targetEnemy, "normal");
    this.applyDamage(targetEnemy, damage);
    this.addBattleLog(`\uACF5\uACA9\uC774 \uBA85\uC911\uD574 ${targetEnemy.name}\uC5D0\uAC8C ${damage}\uC758 \uD53C\uD574\uB97C \uC785\uD614\uC2B5\uB2C8\uB2E4!`, "action", this.playerCharacter.name);
    this.checkBattleEnd();
    if (!this.battleEnded) {
      this.switchTurn();
    }
  }
  playerUseSkill(skill) {
    if (this.battleEnded || this.currentTurn !== "player")
      return;
    if (this.playerCharacter.currentMp < skill.mpCost) {
      this.addBattleLog("MP\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4!", "status");
      return;
    }
    this.addBattleLog(`${this.playerCharacter.name}\uC774 \uC9D1\uC911\uD558\uBA70 ${skill.name}\uC744 \uBC1C\uB3D9\uC900\uBE44\uB97C \uD569\uB2C8\uB2E4...`, "status");
    this.playerCharacter.currentMp -= skill.mpCost;
    if (skill.type === "attack") {
      if (skill.isAOE) {
        this.addBattleLog(`${skill.name}\uC774 \uBC1C\uB3D9\uB418\uC5B4 \uBAA8\uB4E0 \uC801\uC744 \uD729\uC4F8\uC5C8\uC2B5\uB2C8\uB2E4!`, "action", this.playerCharacter.name);
        let totalDamage = 0;
        this.enemyCharacters.forEach((enemy) => {
          if (enemy.currentHp > 0) {
            const damage = this.calculateDamage(this.playerCharacter, enemy, "skill", skill);
            this.applyDamage(enemy, damage);
            this.addBattleLog(`${enemy.name}\uC5D0\uAC8C ${damage}\uC758 \uD53C\uD574!`, "damage");
            totalDamage += damage;
          }
        });
        this.addBattleLog(`\uCD1D ${totalDamage}\uC758 \uAD11\uC5ED \uD53C\uD574\uB97C \uC785\uD614\uC2B5\uB2C8\uB2E4!`, "action", this.playerCharacter.name);
      } else {
        const aliveEnemies = this.getAliveEnemies();
        if (aliveEnemies.length === 0)
          return;
        if (this.enemyCharacters[this.selectedEnemyIndex].currentHp <= 0) {
          this.selectedEnemyIndex = this.enemyCharacters.findIndex((e) => e.currentHp > 0);
        }
        const targetEnemy = this.enemyCharacters[this.selectedEnemyIndex];
        const damage = this.calculateDamage(this.playerCharacter, targetEnemy, "skill", skill);
        this.applyDamage(targetEnemy, damage);
        this.addBattleLog(`${skill.name}\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uBC1C\uB3D9\uB418\uC5B4 ${targetEnemy.name}\uC5D0\uAC8C ${damage}\uC758 \uAC15\uB825\uD55C \uD53C\uD574\uB97C \uC785\uD614\uC2B5\uB2C8\uB2E4!`, "action", this.playerCharacter.name);
      }
    } else if (skill.type === "heal") {
      const healAmount = Math.abs(skill.damage);
      this.playerCharacter.currentHp = Math.min(this.playerCharacter.maxHp, this.playerCharacter.currentHp + healAmount);
      this.addBattleLog(`${skill.name}\uC758 \uCE58\uC720 \uC5D0\uB108\uC9C0\uAC00 \uBAB8\uC744 \uAC10\uC2F8\uBA70 ${healAmount}\uC758 HP\uB97C \uD68C\uBCF5\uD588\uC2B5\uB2C8\uB2E4.`, "heal", this.playerCharacter.name);
    } else if (skill.type === "defense") {
      this.addBattleLog(`${skill.name}\uC744 \uC0AC\uC6A9\uD558\uC5EC \uAC15\uB825\uD55C \uBC29\uC5B4 \uC790\uC138\uB97C \uCDE8\uD588\uC2B5\uB2C8\uB2E4.`, "action", this.playerCharacter.name);
    }
    this.checkBattleEnd();
    if (!this.battleEnded) {
      this.switchTurn();
    }
  }
  enemyTurn() {
    if (this.battleEnded || this.currentTurn !== "enemy")
      return;
    const aliveEnemies = this.getAliveEnemies();
    for (const enemy of aliveEnemies) {
      const enemyHpPercent = enemy.currentHp / enemy.maxHp * 100;
      const enemyMpPercent = enemy.currentMp / enemy.maxMp * 100;
      this.addBattleLog(`${enemy.name}\uC774 \uB0A0\uCE74\uB85C\uC6B4 \uB208\uBE5B\uC73C\uB85C \uC801\uC744 \uB178\uB824\uBCF4\uACE0 \uC788\uC2B5\uB2C8\uB2E4... (HP: ${Math.round(enemyHpPercent)}%)`, "status");
      const useSkillChance = enemyMpPercent > 30 ? 0.6 : 0.2;
      if (Math.random() < useSkillChance && enemy.skills.length > 0) {
        const availableSkills = enemy.skills.filter((skill) => skill.mpCost <= enemy.currentMp);
        if (availableSkills.length > 0) {
          const skill = availableSkills[Math.floor(Math.random() * availableSkills.length)];
          this.addBattleLog(`${enemy.name}\uC774 \uC5B4\uB460 \uC18D\uC5D0\uC11C \uD2B9\uC218\uD55C \uAE30\uC220\uC744 \uC900\uBE44\uD569\uB2C8\uB2E4!`, "status");
          enemy.currentMp -= skill.mpCost;
          if (skill.type === "attack") {
            const damage = this.calculateDamage(enemy, this.playerCharacter, "skill", skill);
            this.applyDamage(this.playerCharacter, damage);
            this.addBattleLog(`${enemy.name}\uC774 ${skill.name}\uB85C \uAC15\uB825\uD55C \uACF5\uACA9\uC744 \uAC00\uD574 ${damage}\uC758 \uD53C\uD574\uB97C \uC785\uD614\uC2B5\uB2C8\uB2E4!`, "action", enemy.name);
          }
        } else {
          this.addBattleLog(`${enemy.name}\uC774 \uB9C8\uB825\uC774 \uBD80\uC871\uD574 \uAE30\uBCF8 \uACF5\uACA9\uC73C\uB85C \uB300\uC2E0\uD569\uB2C8\uB2E4.`, "status");
          const damage = this.calculateDamage(enemy, this.playerCharacter, "normal");
          this.applyDamage(this.playerCharacter, damage);
          this.addBattleLog(`${enemy.name}\uC758 \uC77C\uBC18 \uACF5\uACA9\uC774 ${damage}\uC758 \uD53C\uD574\uB97C \uC785\uD614\uC2B5\uB2C8\uB2E4.`, "action", enemy.name);
        }
      } else {
        const attackVariations = [
          `${enemy.name}\uC774 \uAC70\uCE60\uAC8C \uB2EC\uB824\uB4ED\uB2C8\uB2E4!`,
          `${enemy.name}\uC774 \uB0A0\uCE74\uB85C\uC6B4 \uBC1C\uD1B1\uC73C\uB85C \uACF5\uACA9\uD569\uB2C8\uB2E4!`,
          `${enemy.name}\uC774 \uD798\uCC2C \uC8FC\uBA39\uC744 \uD718\uB450\uB985\uB2C8\uB2E4!`
        ];
        const attackMsg = attackVariations[Math.floor(Math.random() * attackVariations.length)];
        this.addBattleLog(attackMsg, "status");
        const damage = this.calculateDamage(enemy, this.playerCharacter, "normal");
        this.applyDamage(this.playerCharacter, damage);
        this.addBattleLog(`\uACF5\uACA9\uC774 \uC131\uACF5\uD574 ${damage}\uC758 \uD53C\uD574\uB97C \uC785\uD614\uC2B5\uB2C8\uB2E4!`, "action", enemy.name);
      }
    }
    this.checkBattleEnd();
    if (!this.battleEnded) {
      this.switchTurn();
    }
  }
  calculateDamage(attacker, defender, type, skill) {
    let baseDamage = attacker.attack;
    if (type === "skill" && skill) {
      baseDamage += skill.damage * 2.5;
    } else {
      baseDamage *= 1.5;
    }
    const defense = defender.defense;
    let finalDamage = Math.max(1, baseDamage - defense * 0.5);
    const randomFactor = 0.85 + Math.random() * 0.5;
    finalDamage = Math.floor(finalDamage * randomFactor);
    if (Math.random() < 0.25) {
      finalDamage = Math.floor(finalDamage * 2.5);
      this.addBattleLog("\u{1F4A5} \uD06C\uB9AC\uD2F0\uCEEC \uD788\uD2B8!", "status");
    }
    const defenseChance = Math.min(0.15, defense / 150);
    if (Math.random() < defenseChance) {
      finalDamage = Math.floor(finalDamage * 0.7);
      this.addBattleLog(`${defender.name}\uC774(\uAC00) \uBC29\uC5B4\uC5D0 \uC131\uACF5\uD588\uC2B5\uB2C8\uB2E4! (\uBC29\uC5B4\uB825: ${defense})`, "status");
    }
    return Math.max(1, finalDamage);
  }
  applyDamage(target, damage) {
    target.currentHp = Math.max(0, target.currentHp - damage);
  }
  switchTurn() {
    this.currentTurn = this.currentTurn === "player" ? "enemy" : "player";
    if (this.currentTurn === "enemy" && !this.isAutoBattle) {
      setTimeout(() => {
        this.enemyTurn();
      }, 100);
    }
  }
  checkBattleEnd() {
    const aliveEnemies = this.getAliveEnemies();
    if (this.playerCharacter.currentHp <= 0) {
      this.battleEnded = true;
      this.isAutoBattle = false;
      this.winner = "\uC801\uB4E4";
      this.addBattleLog(`\uC801\uB4E4\uC774 \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!`, "system");
    } else if (aliveEnemies.length === 0) {
      this.battleEnded = true;
      this.isAutoBattle = false;
      this.winner = this.playerCharacter.name;
      this.addBattleLog(`${this.playerCharacter.name}\uC774(\uAC00) \uBAA8\uB4E0 \uC801\uC744 \uBB3C\uB9AC\uCE58\uACE0 \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!`, "system");
    }
  }
  addBattleLog(message, type, character) {
    const log = {
      id: Date.now().toString(),
      timestamp: /* @__PURE__ */ new Date(),
      message,
      type,
      character
    };
    this.battleLogs.push(log);
    setTimeout(() => {
      const logContainer = document.querySelector(".battle-log-container");
      if (logContainer) {
        logContainer.scrollTop = logContainer.scrollHeight;
      }
    }, 100);
  }
  getHpPercentage(character) {
    return character.currentHp / character.maxHp * 100;
  }
  getMpPercentage(character) {
    return character.currentMp / character.maxMp * 100;
  }
  restartBattle() {
    this.battleEnded = false;
    this.winner = "";
    this.currentTurn = "player";
    this.battleLogs = [];
    this.isProcessing = false;
    this.isAutoBattle = false;
    this.initializeBattle();
  }
  startAutoBattle() {
    if (this.battleEnded || this.isProcessing)
      return;
    this.isAutoBattle = true;
    this.addBattleLog("\uC790\uB3D9 \uC804\uD22C\uAC00 \uC2DC\uC791\uB429\uB2C8\uB2E4!", "system");
    this.processBattleTurn();
  }
  processBattleTurn() {
    if (this.battleEnded || !this.isAutoBattle)
      return;
    const turnName = this.currentTurn === "player" ? this.playerCharacter.name : "\uC801\uB4E4";
    this.addBattleLog(`--- ${turnName}\uC758 \uD134 ---`, "system");
    setTimeout(() => {
      if (this.currentTurn === "player") {
        this.autoPlayerAction();
      } else {
        this.enemyTurn();
      }
      if (!this.battleEnded && this.isAutoBattle) {
        setTimeout(() => {
          this.processBattleTurn();
        }, 250);
      }
    }, 60);
  }
  autoPlayerAction() {
    const hpPercent = this.playerCharacter.currentHp / this.playerCharacter.maxHp * 100;
    const mpPercent = this.playerCharacter.currentMp / this.playerCharacter.maxMp * 100;
    this.addBattleLog(`${this.playerCharacter.name}\uC774 \uC804\uC220\uC744 \uACE0\uBBFC\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4... (HP: ${Math.round(hpPercent)}%, MP: ${Math.round(mpPercent)}%)`, "status");
    if (hpPercent < 30) {
      const healSkill = this.playerCharacter.skills.find((skill) => skill.type === "heal" && skill.mpCost <= this.playerCharacter.currentMp);
      if (healSkill) {
        this.addBattleLog(`${this.playerCharacter.name}\uC774 \uC704\uD5D8\uC744 \uB290\uB07C\uACE0 \uD68C\uBCF5\uC744 \uC2DC\uB3C4\uD569\uB2C8\uB2E4!`, "status");
        this.playerUseSkill(healSkill);
        return;
      }
    }
    if (Math.random() < 0.5 && this.playerCharacter.skills.length > 0) {
      const availableSkills = this.playerCharacter.skills.filter((skill) => skill.mpCost <= this.playerCharacter.currentMp && skill.type === "attack");
      if (availableSkills.length > 0) {
        const skill = availableSkills[Math.floor(Math.random() * availableSkills.length)];
        this.addBattleLog(`${this.playerCharacter.name}\uC774 \uB2E4\uC591\uD55C \uAE30\uC220 \uC911 ${skill.name}\uC744 \uC120\uD0DD\uD569\uB2C8\uB2E4!`, "status");
        this.playerUseSkill(skill);
        return;
      }
    }
    this.addBattleLog(`${this.playerCharacter.name}\uC774 \uAE30\uBCF8 \uACF5\uACA9\uC73C\uB85C \uC2B9\uBD80\uB97C \uAC78\uACA0\uC2B5\uB2C8\uB2E4!`, "status");
    this.playerAttack();
  }
  stopAutoBattle() {
    this.isAutoBattle = false;
    this.isProcessing = false;
    this.addBattleLog("\uC790\uB3D9 \uC804\uD22C\uAC00 \uC911\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4.", "system");
  }
  closeBattle() {
    if (this.battleEnded) {
      this.dialogRef.close({
        winner: this.winner,
        logs: this.battleLogs,
        playerCharacter: this.playerCharacter,
        enemyCharacters: this.enemyCharacters
      });
    } else {
      this.dialogRef.close();
    }
  }
  static \u0275fac = function BattleModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _BattleModalComponent)(\u0275\u0275directiveInject(MatDialogRef), \u0275\u0275directiveInject(MAT_DIALOG_DATA));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _BattleModalComponent, selectors: [["app-battle-modal"]], standalone: false, decls: 52, vars: 21, consts: [[1, "battle-modal"], [1, "battle-header"], ["mat-icon-button", "", 1, "close-btn", 3, "click"], [1, "battle-content"], [1, "characters-status"], [1, "character-panel", "player"], [1, "character-info"], [1, "character-avatar", "player-avatar"], [1, "status-bars"], [1, "status-bar", "hp"], [1, "bar-container"], [1, "bar-fill", "hp-bar"], [1, "bar-text"], [1, "status-bar", "mp"], [1, "bar-fill", "mp-bar"], [1, "character-stats"], [1, "vs-indicator"], ["class", "turn-indicator", 4, "ngIf"], ["class", "battle-result", 4, "ngIf"], [1, "enemies-container"], ["class", "character-panel enemy", 3, "active", "selected", "defeated", "click", 4, "ngFor", "ngForOf"], [1, "battle-log-section"], [1, "battle-log-container"], ["class", "log-entry", 3, "ngClass", 4, "ngFor", "ngForOf"], ["class", "action-buttons", 4, "ngIf"], ["class", "auto-battle-status", 4, "ngIf"], ["class", "battle-end-actions", 4, "ngIf"], [1, "turn-indicator"], [4, "ngIf"], [1, "battle-result"], [1, "winner"], [1, "character-panel", "enemy", 3, "click"], [1, "character-avatar", "enemy-avatar"], [1, "log-entry", 3, "ngClass"], [1, "log-time"], [1, "log-message"], [1, "action-buttons"], [1, "action-section"], [1, "auto-battle-section"], ["mat-raised-button", "", "color", "primary", 3, "click"], ["class", "manual-actions", 4, "ngIf"], [1, "manual-actions"], [1, "button-row"], ["mat-raised-button", "", "color", "warn", 3, "click"], ["class", "skills-section", 4, "ngIf"], [1, "skills-section"], [1, "skills-grid"], ["mat-stroked-button", "", "class", "skill-button", 3, "color", "disabled", "title", "click", 4, "ngFor", "ngForOf"], ["mat-stroked-button", "", 1, "skill-button", 3, "click", "color", "disabled", "title"], [1, "skill-info"], [1, "skill-name"], [1, "skill-cost"], [1, "auto-battle-status"], [1, "auto-battle-info"], ["diameter", "30"], ["mat-button", "", "color", "warn", 3, "click"], [1, "battle-end-actions"], ["mat-raised-button", "", 3, "click"]], template: function BattleModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0)(1, "div", 1)(2, "h2");
      \u0275\u0275text(3, "\uC804\uD22C \uC2DC\uBBAC\uB808\uC774\uC158");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(4, "button", 2);
      \u0275\u0275listener("click", function BattleModalComponent_Template_button_click_4_listener() {
        return ctx.closeBattle();
      });
      \u0275\u0275elementStart(5, "mat-icon");
      \u0275\u0275text(6, "close");
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(7, "div", 3)(8, "div", 4)(9, "div", 5)(10, "div", 6)(11, "h3");
      \u0275\u0275text(12);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(13, "div", 7);
      \u0275\u0275text(14, "\u{1F464}");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(15, "div", 8)(16, "div", 9)(17, "label");
      \u0275\u0275text(18, "HP");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(19, "div", 10);
      \u0275\u0275element(20, "div", 11);
      \u0275\u0275elementStart(21, "span", 12);
      \u0275\u0275text(22);
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(23, "div", 13)(24, "label");
      \u0275\u0275text(25, "MP");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(26, "div", 10);
      \u0275\u0275element(27, "div", 14);
      \u0275\u0275elementStart(28, "span", 12);
      \u0275\u0275text(29);
      \u0275\u0275elementEnd()()()();
      \u0275\u0275elementStart(30, "div", 15)(31, "span");
      \u0275\u0275text(32);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(33, "span");
      \u0275\u0275text(34);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(35, "span");
      \u0275\u0275text(36);
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(37, "div", 16)(38, "span");
      \u0275\u0275text(39, "VS");
      \u0275\u0275elementEnd();
      \u0275\u0275template(40, BattleModalComponent_div_40_Template, 3, 2, "div", 17)(41, BattleModalComponent_div_41_Template, 3, 1, "div", 18);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(42, "div", 19);
      \u0275\u0275template(43, BattleModalComponent_div_43_Template, 26, 17, "div", 20);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(44, "div", 21)(45, "h4");
      \u0275\u0275text(46, "\uC804\uD22C \uB85C\uADF8");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(47, "div", 22);
      \u0275\u0275template(48, BattleModalComponent_div_48_Template, 6, 6, "div", 23);
      \u0275\u0275elementEnd()();
      \u0275\u0275template(49, BattleModalComponent_div_49_Template, 8, 1, "div", 24)(50, BattleModalComponent_div_50_Template, 7, 1, "div", 25)(51, BattleModalComponent_div_51_Template, 5, 0, "div", 26);
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      \u0275\u0275advance(9);
      \u0275\u0275classProp("active", ctx.currentTurn === "player");
      \u0275\u0275advance(3);
      \u0275\u0275textInterpolate(ctx.playerCharacter.name);
      \u0275\u0275advance(8);
      \u0275\u0275styleProp("width", ctx.getHpPercentage(ctx.playerCharacter), "%");
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate2("", ctx.playerCharacter.currentHp, "/", ctx.playerCharacter.maxHp);
      \u0275\u0275advance(5);
      \u0275\u0275styleProp("width", ctx.getMpPercentage(ctx.playerCharacter), "%");
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate2("", ctx.playerCharacter.currentMp, "/", ctx.playerCharacter.maxMp);
      \u0275\u0275advance(3);
      \u0275\u0275textInterpolate1("\uACF5\uACA9\uB825: ", ctx.playerCharacter.attack);
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate1("\uBC29\uC5B4\uB825: ", ctx.playerCharacter.defense);
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate1("\uBBFC\uCCA9\uC131: ", ctx.playerCharacter.agility);
      \u0275\u0275advance(4);
      \u0275\u0275property("ngIf", !ctx.battleEnded);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.battleEnded);
      \u0275\u0275advance(2);
      \u0275\u0275property("ngForOf", ctx.enemyCharacters);
      \u0275\u0275advance(5);
      \u0275\u0275property("ngForOf", ctx.battleLogs);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.battleEnded && !ctx.isAutoBattle);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.isAutoBattle && !ctx.battleEnded);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.battleEnded);
    }
  }, dependencies: [NgClass, NgForOf, NgIf, MatButton, MatIconButton, MatIcon, MatProgressSpinner, DatePipe], styles: ['@charset "UTF-8";\n\n\n\n.battle-modal[_ngcontent-%COMP%] {\n  width: 100%;\n  max-width: 900px;\n  height: 85vh;\n  max-height: 750px;\n  display: flex;\n  flex-direction: column;\n  background:\n    linear-gradient(\n      135deg,\n      #1a1a2e 0%,\n      #16213e 100%);\n  color: var(--text-primary);\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\n}\n.battle-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 24px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border-bottom: none;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.battle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 20px;\n  font-weight: 700;\n  color: white;\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);\n  letter-spacing: 0.5px;\n}\n.battle-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%] {\n  color: rgba(255, 255, 255, 0.9);\n  transition: all 0.2s ease;\n}\n.battle-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover {\n  color: white;\n  transform: scale(1.1);\n}\n.battle-content[_ngcontent-%COMP%] {\n  flex: 1;\n  padding: 16px 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  overflow: hidden;\n  position: relative;\n  min-height: 0;\n}\n.characters-status[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 12px;\n  margin-bottom: 0;\n  flex-wrap: nowrap;\n  overflow: visible;\n  flex-shrink: 0;\n}\n.enemies-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  flex: 1;\n  min-width: 0;\n  overflow-y: auto;\n  max-height: 350px;\n  padding: 4px;\n}\n.character-panel[_ngcontent-%COMP%] {\n  flex: 1;\n  min-width: 0;\n  padding: 12px;\n  border: 2px solid rgba(255, 255, 255, 0.1);\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n.character-panel.active[_ngcontent-%COMP%] {\n  border-color: rgba(102, 126, 234, 0.8);\n  box-shadow: 0 0 30px rgba(102, 126, 234, 0.4), inset 0 0 20px rgba(102, 126, 234, 0.1);\n  transform: translateY(-4px) scale(1.02);\n  background: rgba(102, 126, 234, 0.1);\n  animation: _ngcontent-%COMP%_glow 2s ease-in-out infinite;\n}\n.character-panel.player.active[_ngcontent-%COMP%] {\n  border-color: rgba(76, 255, 100, 0.8);\n  box-shadow: 0 0 30px rgba(76, 255, 100, 0.4), inset 0 0 20px rgba(76, 255, 100, 0.1);\n  background: rgba(76, 255, 100, 0.1);\n  animation: _ngcontent-%COMP%_glow-green 2s ease-in-out infinite;\n}\n.character-panel.enemy[_ngcontent-%COMP%] {\n  cursor: pointer;\n  flex: 0 0 auto;\n  min-height: auto;\n}\n.character-panel.enemy[_ngcontent-%COMP%]:hover:not(.defeated) {\n  background: rgba(244, 67, 54, 0.1);\n  border-color: rgba(244, 67, 54, 0.6);\n  transform: translateX(-4px);\n}\n.character-panel.enemy.selected[_ngcontent-%COMP%] {\n  border-color: rgba(255, 215, 0, 0.8);\n  box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);\n  background: rgba(255, 215, 0, 0.1);\n}\n.character-panel.enemy.defeated[_ngcontent-%COMP%] {\n  opacity: 0.3;\n  cursor: not-allowed;\n  filter: grayscale(100%);\n}\n.character-panel.enemy.active[_ngcontent-%COMP%]:not(.defeated) {\n  border-color: rgba(255, 76, 76, 0.8);\n  box-shadow: 0 0 30px rgba(255, 76, 76, 0.4), inset 0 0 20px rgba(255, 76, 76, 0.1);\n  background: rgba(255, 76, 76, 0.1);\n  animation: _ngcontent-%COMP%_glow-red 2s ease-in-out infinite;\n}\n.character-info[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n.character-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n}\n.character-avatar[_ngcontent-%COMP%] {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 28px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  transition: all 0.3s ease;\n}\n.character-avatar.player-avatar[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #4caf50,\n      #8bc34a);\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.5);\n  animation: _ngcontent-%COMP%_float 3s ease-in-out infinite;\n}\n.character-avatar.enemy-avatar[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #f44336,\n      #ff9800);\n  box-shadow: 0 4px 12px rgba(244, 67, 54, 0.5);\n  animation: _ngcontent-%COMP%_float 3s ease-in-out infinite reverse;\n}\n@keyframes _ngcontent-%COMP%_float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-6px);\n  }\n}\n.status-bars[_ngcontent-%COMP%] {\n  margin-bottom: 12px;\n}\n.status-bar[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n}\n.status-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: 600;\n  width: 30px;\n}\n.bar-container[_ngcontent-%COMP%] {\n  flex: 1;\n  position: relative;\n  height: 20px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n}\n.bar-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  transition: width 0.3s ease;\n  border-radius: 10px;\n  position: relative;\n  overflow: hidden;\n}\n.bar-fill[_ngcontent-%COMP%]::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      transparent,\n      rgba(255, 255, 255, 0.3),\n      transparent);\n  animation: _ngcontent-%COMP%_shimmer 2s infinite;\n}\n.bar-fill.hp-bar[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #4caf50,\n      #8bc34a);\n  box-shadow: 0 2px 8px rgba(76, 175, 80, 0.4);\n}\n.bar-fill.mp-bar[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #2196f3,\n      #03a9f4);\n  box-shadow: 0 2px 8px rgba(33, 150, 243, 0.4);\n}\n.bar-text[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--text-primary);\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);\n}\n.character-stats[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  gap: 6px;\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.9);\n  flex-wrap: wrap;\n}\n.character-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 6px 10px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  -webkit-backdrop-filter: blur(5px);\n  backdrop-filter: blur(5px);\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n.character-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.2);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n.vs-indicator[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 8px;\n  min-width: 60px;\n  max-width: 80px;\n  flex-shrink: 0;\n  padding-top: 20px;\n}\n.vs-indicator[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%] {\n  font-size: 24px;\n  font-weight: 900;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea,\n      #764ba2,\n      #f093fb);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  text-shadow: none;\n  animation: _ngcontent-%COMP%_rainbow 3s ease-in-out infinite;\n  filter: drop-shadow(0 2px 8px rgba(102, 126, 234, 0.5));\n}\n.turn-indicator[_ngcontent-%COMP%] {\n  padding: 8px 16px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea,\n      #764ba2);\n  color: white;\n  border-radius: 20px;\n  font-size: 13px;\n  font-weight: 700;\n  animation: _ngcontent-%COMP%_pulse-glow 2s infinite;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n  letter-spacing: 0.5px;\n}\n@keyframes _ngcontent-%COMP%_pulse-glow {\n  0%, 100% {\n    transform: scale(1);\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n  }\n  50% {\n    transform: scale(1.05);\n    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);\n  }\n}\n.battle-result[_ngcontent-%COMP%]   .winner[_ngcontent-%COMP%] {\n  padding: 12px 24px;\n  background:\n    linear-gradient(\n      135deg,\n      #4caf50,\n      #8bc34a);\n  color: white;\n  border-radius: 24px;\n  font-size: 16px;\n  font-weight: 700;\n  animation: _ngcontent-%COMP%_victory 1.5s ease-in-out;\n  box-shadow: 0 8px 24px rgba(76, 175, 80, 0.5);\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);\n  letter-spacing: 1px;\n}\n@keyframes _ngcontent-%COMP%_victory {\n  0% {\n    transform: scale(0) rotate(-180deg);\n    opacity: 0;\n  }\n  50% {\n    transform: scale(1.2) rotate(10deg);\n  }\n  100% {\n    transform: scale(1) rotate(0deg);\n    opacity: 1;\n  }\n}\n.battle-log-section[_ngcontent-%COMP%] {\n  flex: 1;\n  min-height: 0;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.battle-log-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  margin: 0 0 8px 0;\n  font-size: 15px;\n  font-weight: 600;\n  color: white;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  flex-shrink: 0;\n}\n.battle-log-container[_ngcontent-%COMP%] {\n  flex: 1;\n  min-height: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  background: rgba(0, 0, 0, 0.3);\n  -webkit-backdrop-filter: blur(5px);\n  backdrop-filter: blur(5px);\n  padding: 10px;\n}\n.battle-log-container[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 4px;\n}\n.battle-log-container[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 2px;\n}\n.battle-log-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea,\n      #764ba2);\n  border-radius: 2px;\n}\n.battle-log-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #764ba2,\n      #667eea);\n}\n.log-entry[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 8px;\n  padding: 8px 10px;\n  border-radius: 8px;\n  font-size: 13px;\n  line-height: 1.4;\n  background: rgba(255, 255, 255, 0.05);\n  animation: _ngcontent-%COMP%_slideIn 0.3s ease-out;\n  transition: all 0.2s ease;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n}\n.log-entry[_ngcontent-%COMP%]:hover {\n  background: rgba(255, 255, 255, 0.1);\n  transform: translateX(4px);\n}\n.log-entry.log-action[_ngcontent-%COMP%] {\n  border-left: 3px solid #667eea;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(102, 126, 234, 0.2),\n      transparent);\n}\n.log-entry.log-damage[_ngcontent-%COMP%] {\n  border-left: 3px solid #f44336;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(244, 67, 54, 0.2),\n      transparent);\n}\n.log-entry.log-heal[_ngcontent-%COMP%] {\n  border-left: 3px solid #4caf50;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(76, 175, 80, 0.2),\n      transparent);\n}\n.log-entry.log-status[_ngcontent-%COMP%] {\n  border-left: 3px solid #ffc107;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(255, 193, 7, 0.2),\n      transparent);\n}\n.log-entry.log-system[_ngcontent-%COMP%] {\n  border-left: 3px solid #9e9e9e;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(158, 158, 158, 0.2),\n      transparent);\n  font-weight: 600;\n}\n.log-time[_ngcontent-%COMP%] {\n  color: var(--text-muted);\n  font-size: 11px;\n  min-width: 60px;\n}\n.log-message[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.action-buttons[_ngcontent-%COMP%] {\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  padding-top: 10px;\n  overflow-x: hidden;\n  flex-shrink: 0;\n}\n.action-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  margin: 0 0 8px 0;\n  font-size: 15px;\n  font-weight: 600;\n  color: white;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n}\n.action-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  margin: 12px 0 6px 0;\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.8);\n  font-weight: 500;\n}\n.auto-battle-section[_ngcontent-%COMP%] {\n  margin-bottom: 12px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n}\n.auto-battle-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  font-size: 14px;\n  padding: 10px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea,\n      #764ba2);\n  border: none;\n  color: white;\n  font-weight: 600;\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n  transition: all 0.3s ease;\n}\n.auto-battle-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);\n}\n.auto-battle-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n}\n.manual-actions[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%] {\n  margin-bottom: 10px;\n}\n.button-row[_ngcontent-%COMP%] {\n  margin-bottom: 10px;\n}\n.skills-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  gap: 6px;\n  max-width: 100%;\n}\n.skill-button[_ngcontent-%COMP%] {\n  height: auto !important;\n  padding: 8px 10px !important;\n  background: rgba(255, 255, 255, 0.1) !important;\n  border: 1px solid rgba(255, 255, 255, 0.2) !important;\n  border-radius: 10px !important;\n  transition: all 0.3s ease !important;\n}\n.skill-button[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.2) !important;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4) !important;\n}\n.skill-button[_ngcontent-%COMP%]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n.skill-button[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 4px;\n}\n.skill-button[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: 600;\n  color: white;\n}\n.skill-button[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%] {\n  font-size: 11px;\n  opacity: 0.8;\n  color: #03a9f4;\n}\n.auto-battle-status[_ngcontent-%COMP%] {\n  border-top: 1px solid var(--border-color);\n  padding: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  margin-top: 10px;\n  flex-shrink: 0;\n}\n.auto-battle-info[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n}\n.auto-battle-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-primary);\n}\n.auto-battle-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  margin-left: auto;\n}\n.battle-end-actions[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  gap: 12px;\n  padding-top: 16px;\n  border-top: 1px solid var(--border-color);\n}\n.processing-overlay[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n.processing-spinner[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  background: var(--bg-primary);\n  padding: 24px;\n  border-radius: 12px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n}\n.processing-spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-primary);\n}\n@keyframes _ngcontent-%COMP%_pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.05);\n    opacity: 0.8;\n  }\n}\n@keyframes _ngcontent-%COMP%_bounce {\n  0%, 20%, 50%, 80%, 100% {\n    transform: translateY(0);\n  }\n  40% {\n    transform: translateY(-10px);\n  }\n  60% {\n    transform: translateY(-5px);\n  }\n}\n@keyframes _ngcontent-%COMP%_glow {\n  0%, 100% {\n    box-shadow: 0 0 30px rgba(102, 126, 234, 0.4), inset 0 0 20px rgba(102, 126, 234, 0.1);\n  }\n  50% {\n    box-shadow: 0 0 40px rgba(102, 126, 234, 0.6), inset 0 0 30px rgba(102, 126, 234, 0.2);\n  }\n}\n@keyframes _ngcontent-%COMP%_glow-green {\n  0%, 100% {\n    box-shadow: 0 0 30px rgba(76, 255, 100, 0.4), inset 0 0 20px rgba(76, 255, 100, 0.1);\n  }\n  50% {\n    box-shadow: 0 0 40px rgba(76, 255, 100, 0.6), inset 0 0 30px rgba(76, 255, 100, 0.2);\n  }\n}\n@keyframes _ngcontent-%COMP%_glow-red {\n  0%, 100% {\n    box-shadow: 0 0 30px rgba(255, 76, 76, 0.4), inset 0 0 20px rgba(255, 76, 76, 0.1);\n  }\n  50% {\n    box-shadow: 0 0 40px rgba(255, 76, 76, 0.6), inset 0 0 30px rgba(255, 76, 76, 0.2);\n  }\n}\n@keyframes _ngcontent-%COMP%_shimmer {\n  0% {\n    left: -100%;\n  }\n  100% {\n    left: 100%;\n  }\n}\n@keyframes _ngcontent-%COMP%_rainbow {\n  0%, 100% {\n    filter: drop-shadow(0 2px 8px rgba(102, 126, 234, 0.5));\n  }\n  33% {\n    filter: drop-shadow(0 2px 8px rgba(118, 75, 162, 0.5));\n  }\n  66% {\n    filter: drop-shadow(0 2px 8px rgba(240, 147, 251, 0.5));\n  }\n}\n@keyframes _ngcontent-%COMP%_slideIn {\n  from {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n.battle-log-container[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 6px;\n}\n.battle-log-container[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-tertiary);\n  border-radius: 3px;\n}\n.battle-log-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--primary-color);\n  border-radius: 3px;\n}\n.battle-log-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: var(--primary-color-dark);\n}\n@media (max-width: 768px) {\n  .battle-modal[_ngcontent-%COMP%] {\n    width: 95vw;\n    max-width: 95vw;\n    height: 90vh;\n    overflow-x: hidden;\n  }\n  .battle-content[_ngcontent-%COMP%] {\n    padding: 12px;\n    overflow-x: hidden;\n  }\n  .characters-status[_ngcontent-%COMP%] {\n    flex-direction: column;\n    gap: 10px;\n  }\n  .character-panel[_ngcontent-%COMP%] {\n    width: 100%;\n    max-width: 100%;\n  }\n  .vs-indicator[_ngcontent-%COMP%] {\n    transform: rotate(90deg);\n    margin: 8px 0;\n    min-width: 50px;\n  }\n  .skills-grid[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr;\n  }\n  .character-stats[_ngcontent-%COMP%] {\n    font-size: 10px;\n  }\n  .character-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n    padding: 4px 6px;\n  }\n  .log-entry[_ngcontent-%COMP%] {\n    font-size: 12px;\n    padding: 6px 8px;\n  }\n}\n/*# sourceMappingURL=battle-modal.component.css.map */'] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(BattleModalComponent, [{
    type: Component,
    args: [{ selector: "app-battle-modal", standalone: false, template: `<div class="battle-modal">
  <div class="battle-header">
    <h2>\uC804\uD22C \uC2DC\uBBAC\uB808\uC774\uC158</h2>
    <button mat-icon-button (click)="closeBattle()" class="close-btn">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div class="battle-content">
    <!-- \uCE90\uB9AD\uD130 \uC0C1\uD0DC \uD45C\uC2DC -->
    <div class="characters-status">
      <!-- \uD50C\uB808\uC774\uC5B4 \uCE90\uB9AD\uD130 -->
      <div class="character-panel player" [class.active]="currentTurn === 'player'">
        <div class="character-info">
          <h3>{{ playerCharacter.name }}</h3>
          <div class="character-avatar player-avatar">\u{1F464}</div>
        </div>
        <div class="status-bars">
          <div class="status-bar hp">
            <label>HP</label>
            <div class="bar-container">
              <div class="bar-fill hp-bar" [style.width.%]="getHpPercentage(playerCharacter)"></div>
              <span class="bar-text">{{ playerCharacter.currentHp }}/{{ playerCharacter.maxHp }}</span>
            </div>
          </div>
          <div class="status-bar mp">
            <label>MP</label>
            <div class="bar-container">
              <div class="bar-fill mp-bar" [style.width.%]="getMpPercentage(playerCharacter)"></div>
              <span class="bar-text">{{ playerCharacter.currentMp }}/{{ playerCharacter.maxMp }}</span>
            </div>
          </div>
        </div>
        <div class="character-stats">
          <span>\uACF5\uACA9\uB825: {{ playerCharacter.attack }}</span>
          <span>\uBC29\uC5B4\uB825: {{ playerCharacter.defense }}</span>
          <span>\uBBFC\uCCA9\uC131: {{ playerCharacter.agility }}</span>
        </div>
      </div>

      <!-- VS \uD45C\uC2DC -->
      <div class="vs-indicator">
        <span>VS</span>
        <div class="turn-indicator" *ngIf="!battleEnded">
          <span *ngIf="currentTurn === 'player'">\uD50C\uB808\uC774\uC5B4 \uD134</span>
          <span *ngIf="currentTurn === 'enemy'">\uC801 \uD134</span>
        </div>
        <div class="battle-result" *ngIf="battleEnded">
          <span class="winner">{{ winner }} \uC2B9\uB9AC!</span>
        </div>
      </div>

      <!-- \uC801 \uCE90\uB9AD\uD130\uB4E4 -->
      <div class="enemies-container">
        <div class="character-panel enemy" 
             *ngFor="let enemy of enemyCharacters; let i = index"
             [class.active]="currentTurn === 'enemy'"
             [class.selected]="i === selectedEnemyIndex && currentTurn === 'player'"
             [class.defeated]="enemy.currentHp <= 0"
             (click)="selectEnemy(i)">
          <div class="character-info">
            <h3>{{ enemy.name }}</h3>
            <div class="character-avatar enemy-avatar">\u{1F479}</div>
          </div>
          <div class="status-bars">
            <div class="status-bar hp">
              <label>HP</label>
              <div class="bar-container">
                <div class="bar-fill hp-bar" [style.width.%]="getHpPercentage(enemy)"></div>
                <span class="bar-text">{{ enemy.currentHp }}/{{ enemy.maxHp }}</span>
              </div>
            </div>
            <div class="status-bar mp">
              <label>MP</label>
              <div class="bar-container">
                <div class="bar-fill mp-bar" [style.width.%]="getMpPercentage(enemy)"></div>
                <span class="bar-text">{{ enemy.currentMp }}/{{ enemy.maxMp }}</span>
              </div>
            </div>
          </div>
          <div class="character-stats">
            <span>\uACF5\uACA9: {{ enemy.attack }}</span>
            <span>\uBC29\uC5B4: {{ enemy.defense }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- \uC804\uD22C \uB85C\uADF8 -->
    <div class="battle-log-section">
      <h4>\uC804\uD22C \uB85C\uADF8</h4>
      <div class="battle-log-container">
        <div 
          *ngFor="let log of battleLogs" 
          class="log-entry"
          [ngClass]="'log-' + log.type">
          <span class="log-time">{{ log.timestamp | date:'HH:mm:ss' }}</span>
          <span class="log-message">{{ log.message }}</span>
        </div>
      </div>
    </div>

    <!-- \uD50C\uB808\uC774\uC5B4 \uC561\uC158 \uBC84\uD2BC -->
    <div class="action-buttons" *ngIf="!battleEnded && !isAutoBattle">
      <div class="action-section">
        <h4>\uD589\uB3D9 \uC120\uD0DD</h4>
        
        <!-- \uC790\uB3D9 \uC804\uD22C \uC2DC\uC791 \uBC84\uD2BC -->
        <div class="auto-battle-section">
          <button 
            mat-raised-button 
            color="primary"
            (click)="startAutoBattle()">
            \u{1F916} \uC790\uB3D9 \uC804\uD22C \uC2DC\uC791
          </button>
        </div>
        
        <!-- \uC218\uB3D9 \uC561\uC158 \uBC84\uD2BC\uB4E4 (\uD50C\uB808\uC774\uC5B4 \uD134\uC77C \uB54C\uB9CC) -->
        <div class="manual-actions" *ngIf="currentTurn === 'player'">
          <div class="button-row">
            <button 
              mat-raised-button 
              color="warn"
              (click)="playerAttack()">
              \u2694\uFE0F \uC77C\uBC18 \uACF5\uACA9
            </button>
          </div>
          
          <div class="skills-section" *ngIf="playerCharacter.skills.length > 0">
            <h5>\uAE30\uC220</h5>
            <div class="skills-grid">
              <button 
                *ngFor="let skill of playerCharacter.skills"
                mat-stroked-button
                [color]="skill.type === 'attack' ? 'warn' : skill.type === 'heal' ? 'primary' : 'accent'"
                (click)="playerUseSkill(skill)"
                [disabled]="playerCharacter.currentMp < skill.mpCost"
                class="skill-button"
                [title]="skill.description + ' (MP: ' + skill.mpCost + ')'">
                <div class="skill-info">
                  <span class="skill-name">{{ skill.name }}</span>
                  <span class="skill-cost">MP: {{ skill.mpCost }}</span>
                </div>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- \uC790\uB3D9 \uC804\uD22C \uC9C4\uD589 \uC911 \uD45C\uC2DC -->
    <div class="auto-battle-status" *ngIf="isAutoBattle && !battleEnded">
      <div class="auto-battle-info">
        <mat-spinner diameter="30"></mat-spinner>
        <span>\u{1F916} \uC790\uB3D9 \uC804\uD22C \uC9C4\uD589 \uC911... ({{ currentTurn === 'player' ? '\uD50C\uB808\uC774\uC5B4' : '\uC801' }} \uD134)</span>
        <button mat-button color="warn" (click)="stopAutoBattle()">\uC911\uB2E8</button>
      </div>
    </div>

    <!-- \uC804\uD22C \uC885\uB8CC \uBC84\uD2BC -->
    <div class="battle-end-actions" *ngIf="battleEnded">
      <button mat-raised-button color="primary" (click)="restartBattle()">
        \uB2E4\uC2DC \uC804\uD22C
      </button>
      <button mat-raised-button (click)="closeBattle()">
        \uC804\uD22C \uC885\uB8CC
      </button>
    </div>
  </div>
</div>`, styles: ['@charset "UTF-8";\n\n/* src/app/modules/novel/components/battle-modal/battle-modal.component.scss */\n.battle-modal {\n  width: 100%;\n  max-width: 900px;\n  height: 85vh;\n  max-height: 750px;\n  display: flex;\n  flex-direction: column;\n  background:\n    linear-gradient(\n      135deg,\n      #1a1a2e 0%,\n      #16213e 100%);\n  color: var(--text-primary);\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\n}\n.battle-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 24px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border-bottom: none;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.battle-header h2 {\n  margin: 0;\n  font-size: 20px;\n  font-weight: 700;\n  color: white;\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);\n  letter-spacing: 0.5px;\n}\n.battle-header .close-btn {\n  color: rgba(255, 255, 255, 0.9);\n  transition: all 0.2s ease;\n}\n.battle-header .close-btn:hover {\n  color: white;\n  transform: scale(1.1);\n}\n.battle-content {\n  flex: 1;\n  padding: 16px 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  overflow: hidden;\n  position: relative;\n  min-height: 0;\n}\n.characters-status {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 12px;\n  margin-bottom: 0;\n  flex-wrap: nowrap;\n  overflow: visible;\n  flex-shrink: 0;\n}\n.enemies-container {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  flex: 1;\n  min-width: 0;\n  overflow-y: auto;\n  max-height: 350px;\n  padding: 4px;\n}\n.character-panel {\n  flex: 1;\n  min-width: 0;\n  padding: 12px;\n  border: 2px solid rgba(255, 255, 255, 0.1);\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n.character-panel.active {\n  border-color: rgba(102, 126, 234, 0.8);\n  box-shadow: 0 0 30px rgba(102, 126, 234, 0.4), inset 0 0 20px rgba(102, 126, 234, 0.1);\n  transform: translateY(-4px) scale(1.02);\n  background: rgba(102, 126, 234, 0.1);\n  animation: glow 2s ease-in-out infinite;\n}\n.character-panel.player.active {\n  border-color: rgba(76, 255, 100, 0.8);\n  box-shadow: 0 0 30px rgba(76, 255, 100, 0.4), inset 0 0 20px rgba(76, 255, 100, 0.1);\n  background: rgba(76, 255, 100, 0.1);\n  animation: glow-green 2s ease-in-out infinite;\n}\n.character-panel.enemy {\n  cursor: pointer;\n  flex: 0 0 auto;\n  min-height: auto;\n}\n.character-panel.enemy:hover:not(.defeated) {\n  background: rgba(244, 67, 54, 0.1);\n  border-color: rgba(244, 67, 54, 0.6);\n  transform: translateX(-4px);\n}\n.character-panel.enemy.selected {\n  border-color: rgba(255, 215, 0, 0.8);\n  box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);\n  background: rgba(255, 215, 0, 0.1);\n}\n.character-panel.enemy.defeated {\n  opacity: 0.3;\n  cursor: not-allowed;\n  filter: grayscale(100%);\n}\n.character-panel.enemy.active:not(.defeated) {\n  border-color: rgba(255, 76, 76, 0.8);\n  box-shadow: 0 0 30px rgba(255, 76, 76, 0.4), inset 0 0 20px rgba(255, 76, 76, 0.1);\n  background: rgba(255, 76, 76, 0.1);\n  animation: glow-red 2s ease-in-out infinite;\n}\n.character-info {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n.character-info h3 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n}\n.character-avatar {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 28px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  transition: all 0.3s ease;\n}\n.character-avatar.player-avatar {\n  background:\n    linear-gradient(\n      135deg,\n      #4caf50,\n      #8bc34a);\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.5);\n  animation: float 3s ease-in-out infinite;\n}\n.character-avatar.enemy-avatar {\n  background:\n    linear-gradient(\n      135deg,\n      #f44336,\n      #ff9800);\n  box-shadow: 0 4px 12px rgba(244, 67, 54, 0.5);\n  animation: float 3s ease-in-out infinite reverse;\n}\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-6px);\n  }\n}\n.status-bars {\n  margin-bottom: 12px;\n}\n.status-bar {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n}\n.status-bar label {\n  font-size: 12px;\n  font-weight: 600;\n  width: 30px;\n}\n.bar-container {\n  flex: 1;\n  position: relative;\n  height: 20px;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n}\n.bar-fill {\n  height: 100%;\n  transition: width 0.3s ease;\n  border-radius: 10px;\n  position: relative;\n  overflow: hidden;\n}\n.bar-fill::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      transparent,\n      rgba(255, 255, 255, 0.3),\n      transparent);\n  animation: shimmer 2s infinite;\n}\n.bar-fill.hp-bar {\n  background:\n    linear-gradient(\n      90deg,\n      #4caf50,\n      #8bc34a);\n  box-shadow: 0 2px 8px rgba(76, 175, 80, 0.4);\n}\n.bar-fill.mp-bar {\n  background:\n    linear-gradient(\n      90deg,\n      #2196f3,\n      #03a9f4);\n  box-shadow: 0 2px 8px rgba(33, 150, 243, 0.4);\n}\n.bar-text {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size: 11px;\n  font-weight: 600;\n  color: var(--text-primary);\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);\n}\n.character-stats {\n  display: flex;\n  justify-content: space-between;\n  gap: 6px;\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.9);\n  flex-wrap: wrap;\n}\n.character-stats span {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 6px 10px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  -webkit-backdrop-filter: blur(5px);\n  backdrop-filter: blur(5px);\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n.character-stats span:hover {\n  background: rgba(255, 255, 255, 0.2);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n.vs-indicator {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 8px;\n  min-width: 60px;\n  max-width: 80px;\n  flex-shrink: 0;\n  padding-top: 20px;\n}\n.vs-indicator > span {\n  font-size: 24px;\n  font-weight: 900;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea,\n      #764ba2,\n      #f093fb);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  text-shadow: none;\n  animation: rainbow 3s ease-in-out infinite;\n  filter: drop-shadow(0 2px 8px rgba(102, 126, 234, 0.5));\n}\n.turn-indicator {\n  padding: 8px 16px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea,\n      #764ba2);\n  color: white;\n  border-radius: 20px;\n  font-size: 13px;\n  font-weight: 700;\n  animation: pulse-glow 2s infinite;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n  letter-spacing: 0.5px;\n}\n@keyframes pulse-glow {\n  0%, 100% {\n    transform: scale(1);\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n  }\n  50% {\n    transform: scale(1.05);\n    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);\n  }\n}\n.battle-result .winner {\n  padding: 12px 24px;\n  background:\n    linear-gradient(\n      135deg,\n      #4caf50,\n      #8bc34a);\n  color: white;\n  border-radius: 24px;\n  font-size: 16px;\n  font-weight: 700;\n  animation: victory 1.5s ease-in-out;\n  box-shadow: 0 8px 24px rgba(76, 175, 80, 0.5);\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);\n  letter-spacing: 1px;\n}\n@keyframes victory {\n  0% {\n    transform: scale(0) rotate(-180deg);\n    opacity: 0;\n  }\n  50% {\n    transform: scale(1.2) rotate(10deg);\n  }\n  100% {\n    transform: scale(1) rotate(0deg);\n    opacity: 1;\n  }\n}\n.battle-log-section {\n  flex: 1;\n  min-height: 0;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.battle-log-section h4 {\n  margin: 0 0 8px 0;\n  font-size: 15px;\n  font-weight: 600;\n  color: white;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  flex-shrink: 0;\n}\n.battle-log-container {\n  flex: 1;\n  min-height: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  background: rgba(0, 0, 0, 0.3);\n  -webkit-backdrop-filter: blur(5px);\n  backdrop-filter: blur(5px);\n  padding: 10px;\n}\n.battle-log-container::-webkit-scrollbar {\n  width: 4px;\n}\n.battle-log-container::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 2px;\n}\n.battle-log-container::-webkit-scrollbar-thumb {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea,\n      #764ba2);\n  border-radius: 2px;\n}\n.battle-log-container::-webkit-scrollbar-thumb:hover {\n  background:\n    linear-gradient(\n      135deg,\n      #764ba2,\n      #667eea);\n}\n.log-entry {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 8px;\n  padding: 8px 10px;\n  border-radius: 8px;\n  font-size: 13px;\n  line-height: 1.4;\n  background: rgba(255, 255, 255, 0.05);\n  animation: slideIn 0.3s ease-out;\n  transition: all 0.2s ease;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n}\n.log-entry:hover {\n  background: rgba(255, 255, 255, 0.1);\n  transform: translateX(4px);\n}\n.log-entry.log-action {\n  border-left: 3px solid #667eea;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(102, 126, 234, 0.2),\n      transparent);\n}\n.log-entry.log-damage {\n  border-left: 3px solid #f44336;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(244, 67, 54, 0.2),\n      transparent);\n}\n.log-entry.log-heal {\n  border-left: 3px solid #4caf50;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(76, 175, 80, 0.2),\n      transparent);\n}\n.log-entry.log-status {\n  border-left: 3px solid #ffc107;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(255, 193, 7, 0.2),\n      transparent);\n}\n.log-entry.log-system {\n  border-left: 3px solid #9e9e9e;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(158, 158, 158, 0.2),\n      transparent);\n  font-weight: 600;\n}\n.log-time {\n  color: var(--text-muted);\n  font-size: 11px;\n  min-width: 60px;\n}\n.log-message {\n  flex: 1;\n}\n.action-buttons {\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  padding-top: 10px;\n  overflow-x: hidden;\n  flex-shrink: 0;\n}\n.action-section h4 {\n  margin: 0 0 8px 0;\n  font-size: 15px;\n  font-weight: 600;\n  color: white;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n}\n.action-section h5 {\n  margin: 12px 0 6px 0;\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.8);\n  font-weight: 500;\n}\n.auto-battle-section {\n  margin-bottom: 12px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n}\n.auto-battle-section button {\n  font-size: 14px;\n  padding: 10px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea,\n      #764ba2);\n  border: none;\n  color: white;\n  font-weight: 600;\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n  transition: all 0.3s ease;\n}\n.auto-battle-section button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);\n}\n.auto-battle-section button:active {\n  transform: translateY(0);\n}\n.manual-actions .button-row {\n  margin-bottom: 10px;\n}\n.button-row {\n  margin-bottom: 10px;\n}\n.skills-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  gap: 6px;\n  max-width: 100%;\n}\n.skill-button {\n  height: auto !important;\n  padding: 8px 10px !important;\n  background: rgba(255, 255, 255, 0.1) !important;\n  border: 1px solid rgba(255, 255, 255, 0.2) !important;\n  border-radius: 10px !important;\n  transition: all 0.3s ease !important;\n}\n.skill-button:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.2) !important;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4) !important;\n}\n.skill-button:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n.skill-button .skill-info {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 4px;\n}\n.skill-button .skill-name {\n  font-size: 13px;\n  font-weight: 600;\n  color: white;\n}\n.skill-button .skill-cost {\n  font-size: 11px;\n  opacity: 0.8;\n  color: #03a9f4;\n}\n.auto-battle-status {\n  border-top: 1px solid var(--border-color);\n  padding: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n  margin-top: 10px;\n  flex-shrink: 0;\n}\n.auto-battle-info {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n}\n.auto-battle-info span {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-primary);\n}\n.auto-battle-info button {\n  margin-left: auto;\n}\n.battle-end-actions {\n  display: flex;\n  justify-content: center;\n  gap: 12px;\n  padding-top: 16px;\n  border-top: 1px solid var(--border-color);\n}\n.processing-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n.processing-spinner {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  background: var(--bg-primary);\n  padding: 24px;\n  border-radius: 12px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n}\n.processing-spinner span {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-primary);\n}\n@keyframes pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.05);\n    opacity: 0.8;\n  }\n}\n@keyframes bounce {\n  0%, 20%, 50%, 80%, 100% {\n    transform: translateY(0);\n  }\n  40% {\n    transform: translateY(-10px);\n  }\n  60% {\n    transform: translateY(-5px);\n  }\n}\n@keyframes glow {\n  0%, 100% {\n    box-shadow: 0 0 30px rgba(102, 126, 234, 0.4), inset 0 0 20px rgba(102, 126, 234, 0.1);\n  }\n  50% {\n    box-shadow: 0 0 40px rgba(102, 126, 234, 0.6), inset 0 0 30px rgba(102, 126, 234, 0.2);\n  }\n}\n@keyframes glow-green {\n  0%, 100% {\n    box-shadow: 0 0 30px rgba(76, 255, 100, 0.4), inset 0 0 20px rgba(76, 255, 100, 0.1);\n  }\n  50% {\n    box-shadow: 0 0 40px rgba(76, 255, 100, 0.6), inset 0 0 30px rgba(76, 255, 100, 0.2);\n  }\n}\n@keyframes glow-red {\n  0%, 100% {\n    box-shadow: 0 0 30px rgba(255, 76, 76, 0.4), inset 0 0 20px rgba(255, 76, 76, 0.1);\n  }\n  50% {\n    box-shadow: 0 0 40px rgba(255, 76, 76, 0.6), inset 0 0 30px rgba(255, 76, 76, 0.2);\n  }\n}\n@keyframes shimmer {\n  0% {\n    left: -100%;\n  }\n  100% {\n    left: 100%;\n  }\n}\n@keyframes rainbow {\n  0%, 100% {\n    filter: drop-shadow(0 2px 8px rgba(102, 126, 234, 0.5));\n  }\n  33% {\n    filter: drop-shadow(0 2px 8px rgba(118, 75, 162, 0.5));\n  }\n  66% {\n    filter: drop-shadow(0 2px 8px rgba(240, 147, 251, 0.5));\n  }\n}\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n.battle-log-container::-webkit-scrollbar {\n  width: 6px;\n}\n.battle-log-container::-webkit-scrollbar-track {\n  background: var(--bg-tertiary);\n  border-radius: 3px;\n}\n.battle-log-container::-webkit-scrollbar-thumb {\n  background: var(--primary-color);\n  border-radius: 3px;\n}\n.battle-log-container::-webkit-scrollbar-thumb:hover {\n  background: var(--primary-color-dark);\n}\n@media (max-width: 768px) {\n  .battle-modal {\n    width: 95vw;\n    max-width: 95vw;\n    height: 90vh;\n    overflow-x: hidden;\n  }\n  .battle-content {\n    padding: 12px;\n    overflow-x: hidden;\n  }\n  .characters-status {\n    flex-direction: column;\n    gap: 10px;\n  }\n  .character-panel {\n    width: 100%;\n    max-width: 100%;\n  }\n  .vs-indicator {\n    transform: rotate(90deg);\n    margin: 8px 0;\n    min-width: 50px;\n  }\n  .skills-grid {\n    grid-template-columns: 1fr;\n  }\n  .character-stats {\n    font-size: 10px;\n  }\n  .character-stats span {\n    padding: 4px 6px;\n  }\n  .log-entry {\n    font-size: 12px;\n    padding: 6px 8px;\n  }\n}\n/*# sourceMappingURL=battle-modal.component.css.map */\n'] }]
  }], () => [{ type: MatDialogRef }, { type: void 0, decorators: [{
    type: Inject,
    args: [MAT_DIALOG_DATA]
  }] }], null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(BattleModalComponent, { className: "BattleModalComponent", filePath: "src/app/modules/novel/components/battle-modal/battle-modal.component.ts", lineNumber: 52 });
})();

// src/app/modules/novel/components/novel-right-sidebar/novel-right-sidebar.component.ts
function NovelRightSidebarComponent_div_1_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 7);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const menu_r3 = ctx.$implicit;
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275property("title", menu_r3.title + " - \uD074\uB9AD\uD558\uC5EC \uC5F4\uAE30");
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r1.getGroupIcon(menu_r3.title), " ");
  }
}
function NovelRightSidebarComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 4);
    \u0275\u0275listener("click", function NovelRightSidebarComponent_div_1_Template_div_click_0_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onExpand());
    });
    \u0275\u0275elementStart(1, "div", 5);
    \u0275\u0275template(2, NovelRightSidebarComponent_div_1_div_2_Template, 2, 2, "div", 6);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r1.menuGroups);
  }
}
function NovelRightSidebarComponent_div_2_div_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 15)(1, "span", 16);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275classProp("generating", ctx_r1.isGenerating);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r1.generationStatusText);
  }
}
function NovelRightSidebarComponent_div_2_div_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 17);
    \u0275\u0275listener("click", function NovelRightSidebarComponent_div_2_div_8_Template_div_click_0_listener() {
      const menu_r6 = \u0275\u0275restoreView(_r5).$implicit;
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r1.onMenuClick(menu_r6.id));
    });
    \u0275\u0275elementStart(1, "div", 18);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 19)(4, "div", 20);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 21);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 22);
    \u0275\u0275text(9, "\u203A");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const menu_r6 = ctx.$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(menu_r6.icon);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(menu_r6.title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", menu_r6.items.length, "\uAC1C \uD56D\uBAA9");
  }
}
function NovelRightSidebarComponent_div_2_div_9_div_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 26)(1, "span", 27);
    \u0275\u0275text(2, "\uCC55\uD130");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 28);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("", ctx_r1.chapterCount, "\uAC1C");
  }
}
function NovelRightSidebarComponent_div_2_div_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 23)(1, "div", 24);
    \u0275\u0275text(2, "\uC18C\uC124 \uC815\uBCF4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 25)(4, "div", 26)(5, "span", 27);
    \u0275\u0275text(6, "\uBD84\uB7C9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "span", 28);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 26)(10, "span", 27);
    \u0275\u0275text(11, "\uC608\uC0C1 \uB3C5\uC11C\uC2DC\uAC04");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "span", 28);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(14, NovelRightSidebarComponent_div_2_div_9_div_14_Template, 5, 1, "div", 29);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate1("", ctx_r1.novelLength.toLocaleString(), "\uC790");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("", ctx_r1.estimatedReadTime, "\uBD84");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r1.chapterCount > 1);
  }
}
function NovelRightSidebarComponent_div_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 8)(1, "div", 9)(2, "h3");
    \u0275\u0275text(3, "\uC18C\uC124 \uB3C4\uAD6C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 10);
    \u0275\u0275listener("click", function NovelRightSidebarComponent_div_2_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r4);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onClose());
    });
    \u0275\u0275text(5, " \xD7 ");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(6, NovelRightSidebarComponent_div_2_div_6_Template, 3, 3, "div", 11);
    \u0275\u0275elementStart(7, "div", 12);
    \u0275\u0275template(8, NovelRightSidebarComponent_div_2_div_8_Template, 10, 3, "div", 13);
    \u0275\u0275elementEnd();
    \u0275\u0275template(9, NovelRightSidebarComponent_div_2_div_9_Template, 15, 3, "div", 14);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(6);
    \u0275\u0275property("ngIf", ctx_r1.isGenerating);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r1.menuGroups);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r1.novelLength > 0);
  }
}
function NovelRightSidebarComponent_div_3_div_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 15)(1, "span", 16);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275classProp("generating", ctx_r1.isGenerating);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r1.generationStatusText);
  }
}
function NovelRightSidebarComponent_div_3_div_11_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 43);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r9 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(item_r9.icon);
  }
}
function NovelRightSidebarComponent_div_3_div_11_div_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 44);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r9 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(item_r9.description);
  }
}
function NovelRightSidebarComponent_div_3_div_11_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 36);
    \u0275\u0275listener("click", function NovelRightSidebarComponent_div_3_div_11_Template_div_click_0_listener() {
      const item_r9 = \u0275\u0275restoreView(_r8).$implicit;
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r1.onSubItemClick(item_r9.id));
    });
    \u0275\u0275elementStart(1, "div", 37);
    \u0275\u0275template(2, NovelRightSidebarComponent_div_3_div_11_div_2_Template, 2, 1, "div", 38);
    \u0275\u0275elementStart(3, "div", 39)(4, "div", 40);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275template(6, NovelRightSidebarComponent_div_3_div_11_div_6_Template, 2, 1, "div", 41);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "div", 42);
    \u0275\u0275text(8, "\u203A");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r9 = ctx.$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", item_r9.icon);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r9.label);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r9.description);
  }
}
function NovelRightSidebarComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 30)(1, "div", 31)(2, "div", 32)(3, "button", 33);
    \u0275\u0275listener("click", function NovelRightSidebarComponent_div_3_Template_button_click_3_listener() {
      \u0275\u0275restoreView(_r7);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onBack());
    });
    \u0275\u0275text(4, "\u2039");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "h3");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "button", 10);
    \u0275\u0275listener("click", function NovelRightSidebarComponent_div_3_Template_button_click_7_listener() {
      \u0275\u0275restoreView(_r7);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onClose());
    });
    \u0275\u0275text(8, "\xD7");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(9, NovelRightSidebarComponent_div_3_div_9_Template, 3, 3, "div", 11);
    \u0275\u0275elementStart(10, "div", 34);
    \u0275\u0275template(11, NovelRightSidebarComponent_div_3_div_11_Template, 9, 3, "div", 35);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(ctx_r1.getMenuTitle());
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r1.isGenerating);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r1.getMenuItems());
  }
}
var NovelRightSidebarComponent = class _NovelRightSidebarComponent {
  dialog;
  isVisible = true;
  isCollapsed = true;
  // 기본값을 true로 변경하여 닫힌 상태로 시작
  novelLength = 0;
  wordCount = 0;
  chapterCount = 1;
  characterCount = 0;
  isGenerating = false;
  currentStep = "";
  generatedContent = "";
  action = new EventEmitter();
  close = new EventEmitter();
  expand = new EventEmitter();
  // 확장된 메뉴 ID (드릴다운 네비게이션용)
  expandedMenuId = null;
  menuGroups = [
    {
      id: "generation",
      title: "AI \uC0DD\uC131",
      icon: "\u{1F916}",
      items: [
        { id: "generate-full", label: "\uC804\uCCB4 \uC18C\uC124 \uC0DD\uC131", icon: "\u{1F916}", description: "AI\uB85C \uC644\uC804\uD55C \uC18C\uC124 \uC0DD\uC131" },
        { id: "generate-chapter", label: "\uCC55\uD130 \uC0DD\uC131", icon: "\u{1F4D6}", description: "\uD604\uC7AC \uCC55\uD130 \uC790\uB3D9 \uC0DD\uC131" }
      ]
    },
    {
      id: "editing",
      title: "\uD3B8\uC9D1 \uB3C4\uAD6C",
      icon: "\u270F\uFE0F",
      items: [
        { id: "edit-novel", label: "\uC18C\uC124 \uD3B8\uC9D1", icon: "\u270F\uFE0F", description: "\uC18C\uC124 \uB0B4\uC6A9 \uC218\uC815" },
        { id: "save-novel", label: "\uC18C\uC124 \uC800\uC7A5", icon: "\u{1F4BE}", description: "\uD604\uC7AC \uC791\uC5C5 \uC800\uC7A5" },
        { id: "writing-tools", label: "\uC791\uC131 \uB3C4\uAD6C", icon: "\u{1F6E0}\uFE0F", description: "\uC791\uC131 \uBCF4\uC870 \uB3C4\uAD6C" }
      ]
    },
    {
      id: "management",
      title: "\uB370\uC774\uD130 \uAD00\uB9AC",
      icon: "\u{1F4CA}",
      items: [
        { id: "manage-characters", label: "\uC778\uBB3C \uAD00\uB9AC", icon: "\u{1F465}", description: "\uCE90\uB9AD\uD130 \uC0DD\uC131 \uBC0F \uAD00\uB9AC" },
        { id: "manage-scenarios", label: "\uC2DC\uB098\uB9AC\uC624 \uAD00\uB9AC", icon: "\u{1F4CB}", description: "\uC2A4\uD1A0\uB9AC \uC2DC\uB098\uB9AC\uC624 \uAD00\uB9AC" },
        { id: "manage-items", label: "\uC18C\uD488 \uAD00\uB9AC", icon: "\u2694\uFE0F", description: "\uC544\uC774\uD15C \uBC0F \uC18C\uD488 \uAD00\uB9AC" }
      ]
    },
    {
      id: "settings",
      title: "\uC124\uC815",
      icon: "\u2699\uFE0F",
      items: [
        { id: "novel-settings", label: "\uC18C\uC124 \uC124\uC815", icon: "\u2699\uFE0F", description: "\uC7A5\uB974, \uC2A4\uD0C0\uC77C \uB4F1 \uC124\uC815" },
        { id: "export-novel", label: "\uC18C\uC124 \uB0B4\uBCF4\uB0B4\uAE30", icon: "\u{1F4E4}", description: "PDF, TXT \uB4F1\uC73C\uB85C \uB0B4\uBCF4\uB0B4\uAE30" }
      ]
    },
    {
      id: "simulation",
      title: "\uC2DC\uBBAC\uB808\uC774\uC158",
      icon: "\u2694\uFE0F",
      items: [
        { id: "battle-simulation", label: "\uC804\uD22C \uC2DC\uBBAC\uB808\uC774\uC158", icon: "\u2694\uFE0F", description: "\uC804\uD22C \uC7A5\uBA74 \uC2DC\uBBAC\uB808\uC774\uC158" },
        { id: "character-battle", label: "\uCE90\uB9AD\uD130 \uC804\uD22C", icon: "\u{1F94A}", description: "\uCE90\uB9AD\uD130 \uAC04 \uB300\uACB0" }
      ]
    }
  ];
  constructor(dialog) {
    this.dialog = dialog;
  }
  ngOnInit() {
  }
  ngOnChanges(changes) {
  }
  onClose() {
    this.close.emit();
  }
  onExpand() {
    this.expand.emit();
  }
  // 드릴다운 네비게이션 메서드
  onMenuClick(menuId) {
    this.expandedMenuId = this.expandedMenuId === menuId ? null : menuId;
  }
  onSubItemClick(itemId) {
    this.onActionClick(itemId);
  }
  onBack() {
    this.expandedMenuId = null;
  }
  getMenuTitle() {
    const menu = this.menuGroups.find((m) => m.id === this.expandedMenuId);
    return menu ? menu.title : "";
  }
  getMenuItems() {
    const menu = this.menuGroups.find((m) => m.id === this.expandedMenuId);
    return menu ? menu.items : [];
  }
  onActionClick(type, data) {
    if (type === "battle-simulation" || type === "character-battle") {
      this.openBattleModal();
      return;
    }
    this.action.emit({ type, data });
  }
  openBattleModal() {
    const dialogRef = this.dialog.open(BattleModalComponent, {
      width: "900px",
      height: "700px",
      maxWidth: "95vw",
      maxHeight: "90vh",
      disableClose: false,
      panelClass: "battle-modal-panel"
    });
    dialogRef.afterClosed().subscribe((result) => {
    });
  }
  // Specific action handlers
  onGenerateFull() {
    this.onActionClick("generate-full");
  }
  onGenerateChapter() {
    this.onActionClick("generate-chapter");
  }
  onEditNovel() {
    this.onActionClick("edit-novel");
  }
  onSaveNovel() {
    this.onActionClick("save-novel");
  }
  onExportNovel() {
    this.onActionClick("export-novel");
  }
  onNovelSettings() {
    this.onActionClick("novel-settings");
  }
  // Data management handlers
  onManageCharacters() {
    this.onActionClick("manage-characters");
  }
  onManageScenarios() {
    this.onActionClick("manage-scenarios");
  }
  onManageItems() {
    this.onActionClick("manage-items");
  }
  // Writing tools handler
  onWritingTools() {
    this.onActionClick("writing-tools");
  }
  // Computed properties
  get generationStatusText() {
    switch (this.currentStep) {
      case "analyzing":
        return "\uBD84\uC11D \uC911...";
      case "generating":
        return "\uC0DD\uC131 \uC911...";
      case "complete":
        return "\uC644\uB8CC";
      default:
        return "\uB300\uAE30 \uC911";
    }
  }
  get estimatedReadTime() {
    return Math.ceil(this.novelLength / 200);
  }
  getIconText(iconName) {
    const iconMap = {
      "ico-ai": "\u{1F916}",
      "ico-edit": "\u270F\uFE0F",
      "ico-save": "\u{1F4BE}",
      "ico-tools": "\u{1F6E0}\uFE0F",
      "ico-character": "\u{1F465}",
      "ico-scenario": "\u{1F3AC}",
      "ico-item": "\u{1F3FA}",
      "ico-setting": "\u2699\uFE0F",
      "ico-export": "\u{1F4E4}"
    };
    return iconMap[iconName] || "\u{1F4C4}";
  }
  getGroupIcon(groupTitle) {
    const groupIconMap = {
      "AI \uC0DD\uC131": "\u{1F916}",
      "\uC791\uC131 \uB3C4\uAD6C": "\u270F\uFE0F",
      "\uC2A4\uD1A0\uB9AC \uAD00\uB9AC": "\u{1F4DA}",
      "\uC11C\uC2DD": "\u2699\uFE0F",
      "\uC561\uC158\uAD00\uB9AC": "\u2694\uFE0F",
      "\uB0B4\uBCF4\uB0B4\uAE30": "\u{1F4E4}"
    };
    return groupIconMap[groupTitle] || "\u{1F4C4}";
  }
  static \u0275fac = function NovelRightSidebarComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelRightSidebarComponent)(\u0275\u0275directiveInject(MatDialog));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _NovelRightSidebarComponent, selectors: [["app-novel-right-sidebar"]], inputs: { isVisible: "isVisible", isCollapsed: "isCollapsed", novelLength: "novelLength", wordCount: "wordCount", chapterCount: "chapterCount", characterCount: "characterCount", isGenerating: "isGenerating", currentStep: "currentStep", generatedContent: "generatedContent" }, outputs: { action: "action", close: "close", expand: "expand" }, standalone: false, features: [\u0275\u0275NgOnChangesFeature], decls: 4, vars: 5, consts: [[1, "novel-right-sidebar"], ["class", "collapsed-view", 3, "click", 4, "ngIf"], ["class", "main-menu", 4, "ngIf"], ["class", "expanded-panel", 4, "ngIf"], [1, "collapsed-view", 3, "click"], [1, "icon-list"], ["class", "menu-icon", 3, "title", 4, "ngFor", "ngForOf"], [1, "menu-icon", 3, "title"], [1, "main-menu"], [1, "sidebar-header"], ["title", "\uB2EB\uAE30", 1, "close-panel-btn", 3, "click"], ["class", "generation-status", 3, "generating", 4, "ngIf"], [1, "category-list"], ["class", "category-item", 3, "click", 4, "ngFor", "ngForOf"], ["class", "novel-info-section", 4, "ngIf"], [1, "generation-status"], [1, "status-text"], [1, "category-item", 3, "click"], [1, "category-icon"], [1, "category-content"], [1, "category-title"], [1, "category-count"], [1, "category-arrow"], [1, "novel-info-section"], [1, "info-title"], [1, "info-items"], [1, "info-item"], [1, "info-label"], [1, "info-value"], ["class", "info-item", 4, "ngIf"], [1, "expanded-panel"], [1, "panel-content"], [1, "panel-header"], [1, "back-btn", 3, "click"], [1, "panel-items"], ["class", "menu-item", 3, "click", 4, "ngFor", "ngForOf"], [1, "menu-item", 3, "click"], [1, "item-content"], ["class", "item-icon", 4, "ngIf"], [1, "item-text"], [1, "item-label"], ["class", "item-description", 4, "ngIf"], [1, "item-arrow"], [1, "item-icon"], [1, "item-description"]], template: function NovelRightSidebarComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0);
      \u0275\u0275template(1, NovelRightSidebarComponent_div_1_Template, 3, 1, "div", 1)(2, NovelRightSidebarComponent_div_2_Template, 10, 3, "div", 2)(3, NovelRightSidebarComponent_div_3_Template, 12, 3, "div", 3);
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275classProp("collapsed", ctx.isCollapsed);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.isCollapsed);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.expandedMenuId && !ctx.isCollapsed);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.expandedMenuId && !ctx.isCollapsed);
    }
  }, dependencies: [NgForOf, NgIf], styles: ["\n\n[_nghost-%COMP%] {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.novel-right-sidebar[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 100%;\n  width: 350px;\n  z-index: 1002;\n  margin: 0 !important;\n  padding: 0 !important;\n  background: var(--bg-primary);\n  border-left: 1px solid var(--border-color);\n  box-shadow: -2px 0 8px var(--shadow);\n  animation: _ngcontent-%COMP%_slideInFromRight 0.3s ease-out;\n  transition: width 0.3s ease;\n}\n.novel-right-sidebar.collapsed[_ngcontent-%COMP%] {\n  width: 48px;\n  overflow: hidden;\n}\n.novel-right-sidebar.collapsed[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 12px 0;\n  height: 100%;\n  overflow-y: auto;\n  cursor: pointer;\n}\n.novel-right-sidebar.collapsed[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .icon-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  width: 100%;\n}\n.novel-right-sidebar.collapsed[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .icon-list[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%] {\n  font-size: 24px;\n  padding: 8px;\n  text-align: center;\n  transition: all 0.2s ease;\n  border-radius: 8px;\n}\n.novel-right-sidebar.collapsed[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .icon-list[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]:hover {\n  background: var(--bg-secondary);\n  transform: scale(1.1);\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%], \n.novel-right-sidebar[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%] {\n  height: 100%;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color);\n  background: var(--bg-secondary);\n  flex-shrink: 0;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .close-panel-btn[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  font-size: 24px;\n  cursor: pointer;\n  color: var(--text-muted);\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .close-panel-btn[_ngcontent-%COMP%]:hover {\n  color: var(--accent-danger);\n  transform: rotate(90deg);\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%] {\n  padding: 12px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      #ffeaa7,\n      #fdcb6e);\n  border-bottom: 1px solid var(--border-color);\n  margin: 0;\n  flex-shrink: 0;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: #2d3436;\n  font-weight: 500;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .generation-status.generating[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_generatePulse 1.5s infinite;\n}\n@keyframes _ngcontent-%COMP%_generatePulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.7;\n  }\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color);\n  background: var(--bg-secondary);\n  flex-shrink: 0;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  flex: 1;\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%], \n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-panel-btn[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  font-size: 28px;\n  cursor: pointer;\n  color: var(--text-muted);\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover {\n  color: var(--accent-primary);\n  transform: translateX(-2px);\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-panel-btn[_ngcontent-%COMP%]:hover {\n  color: var(--accent-danger);\n  transform: rotate(90deg);\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%] {\n  padding: 12px;\n  flex: 1;\n  overflow-y: auto;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 16px;\n  margin-bottom: 8px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--primary-color);\n  transform: translateX(-4px);\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%] {\n  font-size: 32px;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   .category-count[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-arrow[_ngcontent-%COMP%] {\n  font-size: 24px;\n  color: var(--text-secondary);\n  opacity: 0.5;\n  transition: all 0.2s ease;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:hover   .category-arrow[_ngcontent-%COMP%] {\n  opacity: 1;\n  transform: translateX(-4px);\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%] {\n  padding: 12px;\n  flex: 1;\n  overflow-y: auto;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 14px 16px;\n  margin-bottom: 8px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--primary-color);\n  transform: translateX(-4px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n  width: 24px;\n  text-align: center;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%]   .item-label[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  opacity: 0.8;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-arrow[_ngcontent-%COMP%] {\n  font-size: 20px;\n  color: var(--text-secondary);\n  opacity: 0.5;\n  transition: all 0.2s ease;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover   .item-arrow[_ngcontent-%COMP%] {\n  opacity: 1;\n  transform: translateX(-4px);\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .novel-info-section[_ngcontent-%COMP%] {\n  padding: 16px 20px;\n  border-top: 1px solid var(--border-color);\n  background: var(--bg-secondary);\n  flex-shrink: 0;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .novel-info-section[_ngcontent-%COMP%]   .info-title[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-secondary);\n  margin-bottom: 12px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .novel-info-section[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .novel-info-section[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .novel-info-section[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: var(--text-secondary);\n}\n.novel-right-sidebar[_ngcontent-%COMP%]   .novel-info-section[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-primary);\n}\n@keyframes _ngcontent-%COMP%_slideInFromRight {\n  from {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n@media (max-width: 992px) {\n  .novel-right-sidebar[_ngcontent-%COMP%] {\n    width: 320px;\n  }\n}\n@media (max-width: 768px) {\n  .novel-right-sidebar[_ngcontent-%COMP%] {\n    width: 100%;\n    max-width: 350px;\n  }\n}\n/*# sourceMappingURL=novel-right-sidebar.component.css.map */"], data: { animation: [
    trigger("slideAnimation", [
      state("expanded", style({
        height: "*",
        opacity: 1,
        overflow: "visible"
      })),
      state("collapsed", style({
        height: "0px",
        opacity: 0,
        overflow: "hidden"
      })),
      transition("expanded <=> collapsed", [
        animate("300ms ease-in-out")
      ])
    ])
  ] } });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelRightSidebarComponent, [{
    type: Component,
    args: [{ selector: "app-novel-right-sidebar", standalone: false, animations: [
      trigger("slideAnimation", [
        state("expanded", style({
          height: "*",
          opacity: 1,
          overflow: "visible"
        })),
        state("collapsed", style({
          height: "0px",
          opacity: 0,
          overflow: "hidden"
        })),
        transition("expanded <=> collapsed", [
          animate("300ms ease-in-out")
        ])
      ])
    ], template: `<div class="novel-right-sidebar" [class.collapsed]="isCollapsed">
  <!-- \uCD95\uC18C\uB41C \uC0C1\uD0DC -->
  <div class="collapsed-view" *ngIf="isCollapsed" (click)="onExpand()">
    <div class="icon-list">
      <div class="menu-icon" *ngFor="let menu of menuGroups" [title]="menu.title + ' - \uD074\uB9AD\uD558\uC5EC \uC5F4\uAE30'">
        {{ getGroupIcon(menu.title) }}
      </div>
    </div>
  </div>

  <!-- \uD655\uC7A5\uB41C \uC0C1\uD0DC (\uBA54\uC778 \uCE74\uD14C\uACE0\uB9AC \uBA54\uB274) -->
  <div class="main-menu" *ngIf="!expandedMenuId && !isCollapsed">
    <div class="sidebar-header">
      <h3>\uC18C\uC124 \uB3C4\uAD6C</h3>
      <button class="close-panel-btn" 
              title="\uB2EB\uAE30"
              (click)="onClose()">
        \xD7
      </button>
    </div>

    <!-- AI \uC0DD\uC131 \uC0C1\uD0DC \uD45C\uC2DC -->
    <div class="generation-status" *ngIf="isGenerating" [class.generating]="isGenerating">
      <span class="status-text">{{ generationStatusText }}</span>
    </div>
    
    <div class="category-list">
      <div class="category-item" 
           *ngFor="let menu of menuGroups" 
           (click)="onMenuClick(menu.id)">
        <div class="category-icon">{{ menu.icon }}</div>
        <div class="category-content">
          <div class="category-title">{{ menu.title }}</div>
          <div class="category-count">{{ menu.items.length }}\uAC1C \uD56D\uBAA9</div>
        </div>
        <div class="category-arrow">\u203A</div>
      </div>
    </div>
    
    <!-- \uC18C\uC124 \uC815\uBCF4 \uC139\uC158 -->
    <div class="novel-info-section" *ngIf="novelLength > 0">
      <div class="info-title">\uC18C\uC124 \uC815\uBCF4</div>
      <div class="info-items">
        <div class="info-item">
          <span class="info-label">\uBD84\uB7C9</span>
          <span class="info-value">{{ novelLength.toLocaleString() }}\uC790</span>
        </div>
        <div class="info-item">
          <span class="info-label">\uC608\uC0C1 \uB3C5\uC11C\uC2DC\uAC04</span>
          <span class="info-value">{{ estimatedReadTime }}\uBD84</span>
        </div>
        <div class="info-item" *ngIf="chapterCount > 1">
          <span class="info-label">\uCC55\uD130</span>
          <span class="info-value">{{ chapterCount }}\uAC1C</span>
        </div>
      </div>
    </div>
  </div>

  <!-- \uC11C\uBE0C \uBA54\uB274 \uD328\uB110 (expandedMenuId\uAC00 \uC788\uC744 \uB54C) -->
  <div class="expanded-panel" *ngIf="expandedMenuId && !isCollapsed">
    <div class="panel-content">
      <div class="panel-header">
        <button class="back-btn" (click)="onBack()">\u2039</button>
        <h3>{{ getMenuTitle() }}</h3>
        <button class="close-panel-btn" (click)="onClose()" title="\uB2EB\uAE30">\xD7</button>
      </div>
      
      <!-- AI \uC0DD\uC131 \uC0C1\uD0DC \uD45C\uC2DC (\uC11C\uBE0C \uBA54\uB274\uC5D0\uC11C\uB3C4) -->
      <div class="generation-status" *ngIf="isGenerating" [class.generating]="isGenerating">
        <span class="status-text">{{ generationStatusText }}</span>
      </div>
      
      <div class="panel-items">
        <div class="menu-item" 
             *ngFor="let item of getMenuItems()" 
             (click)="onSubItemClick(item.id)">
          <div class="item-content">
            <div class="item-icon" *ngIf="item.icon">{{ item.icon }}</div>
            <div class="item-text">
              <div class="item-label">{{ item.label }}</div>
              <div class="item-description" *ngIf="item.description">{{ item.description }}</div>
            </div>
          </div>
          <div class="item-arrow">\u203A</div>
        </div>
      </div>
    </div>
  </div>
</div>
`, styles: ["/* src/app/modules/novel/components/novel-right-sidebar/novel-right-sidebar.component.scss */\n:host {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.novel-right-sidebar {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 100%;\n  width: 350px;\n  z-index: 1002;\n  margin: 0 !important;\n  padding: 0 !important;\n  background: var(--bg-primary);\n  border-left: 1px solid var(--border-color);\n  box-shadow: -2px 0 8px var(--shadow);\n  animation: slideInFromRight 0.3s ease-out;\n  transition: width 0.3s ease;\n}\n.novel-right-sidebar.collapsed {\n  width: 48px;\n  overflow: hidden;\n}\n.novel-right-sidebar.collapsed .collapsed-view {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 12px 0;\n  height: 100%;\n  overflow-y: auto;\n  cursor: pointer;\n}\n.novel-right-sidebar.collapsed .collapsed-view .icon-list {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  width: 100%;\n}\n.novel-right-sidebar.collapsed .collapsed-view .icon-list .menu-icon {\n  font-size: 24px;\n  padding: 8px;\n  text-align: center;\n  transition: all 0.2s ease;\n  border-radius: 8px;\n}\n.novel-right-sidebar.collapsed .collapsed-view .icon-list .menu-icon:hover {\n  background: var(--bg-secondary);\n  transform: scale(1.1);\n}\n.novel-right-sidebar .main-menu,\n.novel-right-sidebar .expanded-panel {\n  height: 100%;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n}\n.novel-right-sidebar .sidebar-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color);\n  background: var(--bg-secondary);\n  flex-shrink: 0;\n}\n.novel-right-sidebar .sidebar-header h3 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.novel-right-sidebar .sidebar-header .close-panel-btn {\n  background: none;\n  border: none;\n  font-size: 24px;\n  cursor: pointer;\n  color: var(--text-muted);\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n.novel-right-sidebar .sidebar-header .close-panel-btn:hover {\n  color: var(--accent-danger);\n  transform: rotate(90deg);\n}\n.novel-right-sidebar .generation-status {\n  padding: 12px 20px;\n  background:\n    linear-gradient(\n      135deg,\n      #ffeaa7,\n      #fdcb6e);\n  border-bottom: 1px solid var(--border-color);\n  margin: 0;\n  flex-shrink: 0;\n}\n.novel-right-sidebar .generation-status .status-text {\n  font-size: 14px;\n  color: #2d3436;\n  font-weight: 500;\n}\n.novel-right-sidebar .generation-status.generating {\n  animation: generatePulse 1.5s infinite;\n}\n@keyframes generatePulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.7;\n  }\n}\n.novel-right-sidebar .panel-content {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n.novel-right-sidebar .panel-header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color);\n  background: var(--bg-secondary);\n  flex-shrink: 0;\n}\n.novel-right-sidebar .panel-header h3 {\n  flex: 1;\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.novel-right-sidebar .panel-header .back-btn,\n.novel-right-sidebar .panel-header .close-panel-btn {\n  background: none;\n  border: none;\n  font-size: 28px;\n  cursor: pointer;\n  color: var(--text-muted);\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n.novel-right-sidebar .panel-header .back-btn:hover {\n  color: var(--accent-primary);\n  transform: translateX(-2px);\n}\n.novel-right-sidebar .panel-header .close-panel-btn:hover {\n  color: var(--accent-danger);\n  transform: rotate(90deg);\n}\n.novel-right-sidebar .category-list {\n  padding: 12px;\n  flex: 1;\n  overflow-y: auto;\n}\n.novel-right-sidebar .category-list .category-item {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 16px;\n  margin-bottom: 8px;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n.novel-right-sidebar .category-list .category-item:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--primary-color);\n  transform: translateX(-4px);\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);\n}\n.novel-right-sidebar .category-list .category-item .category-icon {\n  font-size: 32px;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--bg-tertiary);\n  border-radius: 10px;\n}\n.novel-right-sidebar .category-list .category-item .category-content {\n  flex: 1;\n}\n.novel-right-sidebar .category-list .category-item .category-content .category-title {\n  font-size: 15px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n}\n.novel-right-sidebar .category-list .category-item .category-content .category-count {\n  font-size: 12px;\n  color: var(--text-secondary);\n}\n.novel-right-sidebar .category-list .category-item .category-arrow {\n  font-size: 24px;\n  color: var(--text-secondary);\n  opacity: 0.5;\n  transition: all 0.2s ease;\n}\n.novel-right-sidebar .category-list .category-item:hover .category-arrow {\n  opacity: 1;\n  transform: translateX(-4px);\n}\n.novel-right-sidebar .panel-items {\n  padding: 12px;\n  flex: 1;\n  overflow-y: auto;\n}\n.novel-right-sidebar .panel-items .menu-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 14px 16px;\n  margin-bottom: 8px;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n.novel-right-sidebar .panel-items .menu-item:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--primary-color);\n  transform: translateX(-4px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.novel-right-sidebar .panel-items .menu-item .item-content {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.novel-right-sidebar .panel-items .menu-item .item-content .item-icon {\n  font-size: 20px;\n  width: 24px;\n  text-align: center;\n}\n.novel-right-sidebar .panel-items .menu-item .item-content .item-text {\n  flex: 1;\n}\n.novel-right-sidebar .panel-items .menu-item .item-content .item-text .item-label {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n}\n.novel-right-sidebar .panel-items .menu-item .item-content .item-text .item-description {\n  font-size: 12px;\n  color: var(--text-secondary);\n  opacity: 0.8;\n}\n.novel-right-sidebar .panel-items .menu-item .item-arrow {\n  font-size: 20px;\n  color: var(--text-secondary);\n  opacity: 0.5;\n  transition: all 0.2s ease;\n}\n.novel-right-sidebar .panel-items .menu-item:hover .item-arrow {\n  opacity: 1;\n  transform: translateX(-4px);\n}\n.novel-right-sidebar .novel-info-section {\n  padding: 16px 20px;\n  border-top: 1px solid var(--border-color);\n  background: var(--bg-secondary);\n  flex-shrink: 0;\n}\n.novel-right-sidebar .novel-info-section .info-title {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-secondary);\n  margin-bottom: 12px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.novel-right-sidebar .novel-info-section .info-items {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.novel-right-sidebar .novel-info-section .info-items .info-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.novel-right-sidebar .novel-info-section .info-items .info-item .info-label {\n  font-size: 14px;\n  color: var(--text-secondary);\n}\n.novel-right-sidebar .novel-info-section .info-items .info-item .info-value {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-primary);\n}\n@keyframes slideInFromRight {\n  from {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n@media (max-width: 992px) {\n  .novel-right-sidebar {\n    width: 320px;\n  }\n}\n@media (max-width: 768px) {\n  .novel-right-sidebar {\n    width: 100%;\n    max-width: 350px;\n  }\n}\n/*# sourceMappingURL=novel-right-sidebar.component.css.map */\n"] }]
  }], () => [{ type: MatDialog }], { isVisible: [{
    type: Input
  }], isCollapsed: [{
    type: Input
  }], novelLength: [{
    type: Input
  }], wordCount: [{
    type: Input
  }], chapterCount: [{
    type: Input
  }], characterCount: [{
    type: Input
  }], isGenerating: [{
    type: Input
  }], currentStep: [{
    type: Input
  }], generatedContent: [{
    type: Input
  }], action: [{
    type: Output
  }], close: [{
    type: Output
  }], expand: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(NovelRightSidebarComponent, { className: "NovelRightSidebarComponent", filePath: "src/app/modules/novel/components/novel-right-sidebar/novel-right-sidebar.component.ts", lineNumber: 50 });
})();

// src/app/modules/novel/components/novel-sidebar/novel-sidebar.component.ts
function NovelSidebarComponent_div_16_span_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 19);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r2 = \u0275\u0275nextContext().$implicit;
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(ctx_r2.formatWordCount(item_r2.wordCount));
  }
}
function NovelSidebarComponent_div_16_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 12);
    \u0275\u0275listener("click", function NovelSidebarComponent_div_16_Template_div_click_0_listener() {
      const item_r2 = \u0275\u0275restoreView(_r1).$implicit;
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onItemClick(item_r2));
    });
    \u0275\u0275elementStart(1, "div", 13)(2, "div", 14);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 15);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 16)(7, "span", 17);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275template(9, NovelSidebarComponent_div_16_span_9_Template, 2, 1, "span", 18);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const item_r2 = ctx.$implicit;
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r2.title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r2.description);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r2.formatDate(item_r2.createdDate));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r2.wordCount);
  }
}
function NovelSidebarComponent_div_26_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 12);
    \u0275\u0275listener("click", function NovelSidebarComponent_div_26_Template_div_click_0_listener() {
      const item_r5 = \u0275\u0275restoreView(_r4).$implicit;
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onItemClick(item_r5));
    });
    \u0275\u0275elementStart(1, "div", 13)(2, "div", 14);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 15);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const item_r5 = ctx.$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r5.title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r5.description);
  }
}
function NovelSidebarComponent_div_36_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 12);
    \u0275\u0275listener("click", function NovelSidebarComponent_div_36_Template_div_click_0_listener() {
      const item_r7 = \u0275\u0275restoreView(_r6).$implicit;
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onItemClick(item_r7));
    });
    \u0275\u0275elementStart(1, "div", 13)(2, "div", 14);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 15);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const item_r7 = ctx.$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(item_r7.title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r7.description);
  }
}
function NovelSidebarComponent_div_37_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 20)(1, "div", 21);
    \u0275\u0275text(2, "\u{1F4DD}");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p");
    \u0275\u0275text(4, "\uC544\uC9C1 \uC791\uC131\uB41C \uBB34\uD611\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
    \u0275\u0275element(5, "br");
    \u0275\u0275text(6, "\uC0C8\uB85C\uC6B4 \uC791\uD488\uC744 \uC2DC\uC791\uD574\uBCF4\uC138\uC694!");
    \u0275\u0275elementEnd()();
  }
}
var NovelSidebarComponent = class _NovelSidebarComponent {
  isVisible = true;
  close = new EventEmitter();
  itemClick = new EventEmitter();
  // 섹션 펼침/접힘 상태
  sectionsExpanded = {
    recent: true,
    template: true,
    inspiration: true
  };
  // 샘플 데이터
  sidebarItems = [
    // 최근 작품
    {
      id: "recent-1",
      title: "\uAC80\uD669\uC758 \uADC0\uD658",
      description: "\uC2ED\uB144\uAC04 \uC2E4\uC885\uB418\uC5C8\uB358 \uAC80\uD669\uC774 \uB3CC\uC544\uC624\uB2E4",
      icon: "\u2694\uFE0F",
      category: "recent",
      createdDate: "2024-01-15",
      wordCount: 25e3
    },
    {
      id: "recent-2",
      title: "\uD654\uC0B0\uC2E0\uAC80",
      description: "\uD654\uC0B0\uD30C\uC758 \uC2E0\uBE44\uD55C \uAC80\uC220",
      icon: "\u{1F525}",
      category: "recent",
      createdDate: "2024-01-10",
      wordCount: 18500
    },
    {
      id: "recent-3",
      title: "\uBB34\uB9BC\uB9F9\uC8FC",
      description: "\uBB34\uB9BC\uC758 \uC0C8\uB85C\uC6B4 \uB9F9\uC8FC \uD0C4\uC0DD\uAE30",
      icon: "\u{1F451}",
      category: "recent",
      createdDate: "2024-01-05",
      wordCount: 32100
    },
    // 템플릿
    {
      id: "template-1",
      title: "\uBCF5\uC218 \uC2A4\uD1A0\uB9AC",
      description: "\uAC00\uC871\uC758 \uC6D0\uC218\uB97C \uAC1A\uB294 \uC8FC\uC778\uACF5",
      icon: "\u26A1",
      category: "template"
    },
    {
      id: "template-2",
      title: "\uC0AC\uB791\uACFC \uBB34\uACF5",
      description: "\uC0AC\uB791\uC744 \uC704\uD574 \uAC15\uD574\uC9C0\uB294 \uC774\uC57C\uAE30",
      icon: "\u{1F496}",
      category: "template"
    },
    {
      id: "template-3",
      title: "\uC815\uC758\uC758 \uAD6C\uD604",
      description: "\uC62C\uBC14\uB978 \uBB34\uB9BC\uC744 \uB9CC\uB4E4\uC5B4\uAC00\uB294 \uC5EC\uC815",
      icon: "\u2696\uFE0F",
      category: "template"
    },
    // 영감
    {
      id: "inspiration-1",
      title: "\uC804\uC124\uC758 \uBB34\uAE30",
      description: "\uACE0\uB300\uBD80\uD130 \uB0B4\uB824\uC628 \uC2E0\uBE44\uB85C\uC6B4 \uBB34\uAE30\uB4E4",
      icon: "\u{1F5E1}\uFE0F",
      category: "inspiration"
    },
    {
      id: "inspiration-2",
      title: "\uBB34\uB9BC \uBB38\uD30C",
      description: "\uB2E4\uC591\uD55C \uBB34\uB9BC \uBB38\uD30C\uC640 \uADF8\uB4E4\uC758 \uD2B9\uC9D5",
      icon: "\u{1F3EF}",
      category: "inspiration"
    },
    {
      id: "inspiration-3",
      title: "\uB0B4\uACF5 \uC218\uB828\uBC95",
      description: "\uAC15\uB825\uD55C \uB0B4\uACF5\uC744 \uAE30\uB974\uB294 \uBC29\uBC95\uB4E4",
      icon: "\u{1F9D8}",
      category: "inspiration"
    }
  ];
  get recentItems() {
    return this.sidebarItems.filter((item) => item.category === "recent");
  }
  get templateItems() {
    return this.sidebarItems.filter((item) => item.category === "template");
  }
  get inspirationItems() {
    return this.sidebarItems.filter((item) => item.category === "inspiration");
  }
  onItemClick(item) {
    this.itemClick.emit(item);
  }
  onClose() {
    this.close.emit();
  }
  // 섹션 토글
  toggleSection(section) {
    this.sectionsExpanded[section] = !this.sectionsExpanded[section];
  }
  // 섹션이 펼쳐져 있는지 확인
  isSectionExpanded(section) {
    return this.sectionsExpanded[section];
  }
  formatWordCount(count) {
    if (count >= 1e4) {
      return `${Math.floor(count / 1e3)}k\uC790`;
    }
    return `${count.toLocaleString()}\uC790`;
  }
  formatDate(dateString) {
    const date = new Date(dateString);
    const now = /* @__PURE__ */ new Date();
    const diffTime = Math.abs(now.getTime() - date.getTime());
    const diffDays = Math.ceil(diffTime / (1e3 * 60 * 60 * 24));
    if (diffDays === 1)
      return "\uC624\uB298";
    if (diffDays === 2)
      return "\uC5B4\uC81C";
    if (diffDays <= 7)
      return `${diffDays - 1}\uC77C \uC804`;
    return date.toLocaleDateString("ko-KR");
  }
  static \u0275fac = function NovelSidebarComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelSidebarComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _NovelSidebarComponent, selectors: [["app-novel-sidebar"]], inputs: { isVisible: "isVisible" }, outputs: { close: "close", itemClick: "itemClick" }, standalone: false, decls: 38, vars: 26, consts: [[1, "novel-sidebar"], [1, "sidebar-header"], ["title", "\uB2EB\uAE30", 1, "close-panel-btn", 3, "click"], [1, "sidebar-content"], [1, "section"], [1, "section-title", 3, "click"], [1, "title-text"], [1, "expand-arrow"], [1, "count"], [1, "items-container"], ["class", "sidebar-item", 3, "click", 4, "ngFor", "ngForOf"], ["class", "empty-state", 4, "ngIf"], [1, "sidebar-item", 3, "click"], [1, "item-content"], [1, "item-title"], [1, "item-description"], [1, "item-meta"], [1, "date"], ["class", "word-count", 4, "ngIf"], [1, "word-count"], [1, "empty-state"], [1, "empty-icon"]], template: function NovelSidebarComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0)(1, "div", 1)(2, "h3");
      \u0275\u0275text(3, "\uC791\uD488 \uAD00\uB9AC");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(4, "button", 2);
      \u0275\u0275listener("click", function NovelSidebarComponent_Template_button_click_4_listener() {
        return ctx.onClose();
      });
      \u0275\u0275text(5, " \xD7 ");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(6, "div", 3)(7, "div", 4)(8, "div", 5);
      \u0275\u0275listener("click", function NovelSidebarComponent_Template_div_click_8_listener() {
        return ctx.toggleSection("recent");
      });
      \u0275\u0275elementStart(9, "span", 6)(10, "span", 7);
      \u0275\u0275text(11, "\u25B6");
      \u0275\u0275elementEnd();
      \u0275\u0275text(12, " \uCD5C\uADFC \uC791\uD488 ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(13, "span", 8);
      \u0275\u0275text(14);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(15, "div", 9);
      \u0275\u0275template(16, NovelSidebarComponent_div_16_Template, 10, 4, "div", 10);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(17, "div", 4)(18, "div", 5);
      \u0275\u0275listener("click", function NovelSidebarComponent_Template_div_click_18_listener() {
        return ctx.toggleSection("template");
      });
      \u0275\u0275elementStart(19, "span", 6)(20, "span", 7);
      \u0275\u0275text(21, "\u25B6");
      \u0275\u0275elementEnd();
      \u0275\u0275text(22, " \uC2A4\uD1A0\uB9AC \uD15C\uD50C\uB9BF ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(23, "span", 8);
      \u0275\u0275text(24);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(25, "div", 9);
      \u0275\u0275template(26, NovelSidebarComponent_div_26_Template, 6, 2, "div", 10);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(27, "div", 4)(28, "div", 5);
      \u0275\u0275listener("click", function NovelSidebarComponent_Template_div_click_28_listener() {
        return ctx.toggleSection("inspiration");
      });
      \u0275\u0275elementStart(29, "span", 6)(30, "span", 7);
      \u0275\u0275text(31, "\u25B6");
      \u0275\u0275elementEnd();
      \u0275\u0275text(32, " \uCC3D\uC791 \uC601\uAC10 ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(33, "span", 8);
      \u0275\u0275text(34);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(35, "div", 9);
      \u0275\u0275template(36, NovelSidebarComponent_div_36_Template, 6, 2, "div", 10);
      \u0275\u0275elementEnd()()();
      \u0275\u0275template(37, NovelSidebarComponent_div_37_Template, 7, 0, "div", 11);
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275styleProp("display", ctx.isVisible ? "" : "none");
      \u0275\u0275classProp("closed", !ctx.isVisible);
      \u0275\u0275advance(10);
      \u0275\u0275classProp("expanded", ctx.isSectionExpanded("recent"));
      \u0275\u0275advance(4);
      \u0275\u0275textInterpolate1("(", ctx.recentItems.length, ")");
      \u0275\u0275advance();
      \u0275\u0275classProp("collapsed", !ctx.isSectionExpanded("recent"));
      \u0275\u0275property("@slideAnimation", ctx.isSectionExpanded("recent") ? "expanded" : "collapsed");
      \u0275\u0275advance();
      \u0275\u0275property("ngForOf", ctx.recentItems);
      \u0275\u0275advance(4);
      \u0275\u0275classProp("expanded", ctx.isSectionExpanded("template"));
      \u0275\u0275advance(4);
      \u0275\u0275textInterpolate1("(", ctx.templateItems.length, ")");
      \u0275\u0275advance();
      \u0275\u0275classProp("collapsed", !ctx.isSectionExpanded("template"));
      \u0275\u0275property("@slideAnimation", ctx.isSectionExpanded("template") ? "expanded" : "collapsed");
      \u0275\u0275advance();
      \u0275\u0275property("ngForOf", ctx.templateItems);
      \u0275\u0275advance(4);
      \u0275\u0275classProp("expanded", ctx.isSectionExpanded("inspiration"));
      \u0275\u0275advance(4);
      \u0275\u0275textInterpolate1("(", ctx.inspirationItems.length, ")");
      \u0275\u0275advance();
      \u0275\u0275classProp("collapsed", !ctx.isSectionExpanded("inspiration"));
      \u0275\u0275property("@slideAnimation", ctx.isSectionExpanded("inspiration") ? "expanded" : "collapsed");
      \u0275\u0275advance();
      \u0275\u0275property("ngForOf", ctx.inspirationItems);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.sidebarItems.length === 0);
    }
  }, dependencies: [NgForOf, NgIf], styles: ['@charset "UTF-8";\n\n\n\n.novel-sidebar[_ngcontent-%COMP%] {\n  width: 250px;\n  background: var(--bg-primary);\n  border-right: 1px solid var(--border-color);\n  display: flex;\n  flex-direction: column;\n  margin-left: 40px;\n  transition: all 0.25s cubic-bezier(0.4, 1.4, 0.6, 1);\n  transform: translateX(0);\n  opacity: 1;\n  z-index: 1000;\n  height: 100%;\n  box-shadow: 2px 0 8px var(--shadow);\n}\n.novel-sidebar.closed[_ngcontent-%COMP%] {\n  transform: translateX(-100%);\n  opacity: 0;\n  pointer-events: none;\n}\n.sidebar-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color);\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  transition: all 0.3s ease;\n}\n.sidebar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n}\n.close-panel-btn[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  font-size: 18px;\n  cursor: pointer;\n  width: 28px;\n  height: 28px;\n  line-height: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--text-muted);\n  border-radius: 4px;\n  transition: all 0.15s;\n}\n.close-panel-btn[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n}\n.sidebar-content[_ngcontent-%COMP%] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px 0;\n}\n.section[_ngcontent-%COMP%] {\n  margin-bottom: 24px;\n}\n.section[_ngcontent-%COMP%]:last-child {\n  margin-bottom: 8px;\n}\n.section-title[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 20px;\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-muted);\n  border-bottom: 1px solid var(--border-color);\n  margin-bottom: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.section-title[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n}\n.section-title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n.section-title[_ngcontent-%COMP%]   .expand-arrow[_ngcontent-%COMP%] {\n  font-size: 10px;\n  transition: transform 0.3s ease;\n  color: var(--text-muted);\n}\n.section-title[_ngcontent-%COMP%]   .expand-arrow.expanded[_ngcontent-%COMP%] {\n  transform: rotate(90deg);\n  color: var(--text-secondary);\n}\n.section-title[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%] {\n  color: var(--text-muted);\n  font-size: 11px;\n}\n.items-container[_ngcontent-%COMP%] {\n  padding: 0 12px;\n  transition: all 0.3s ease;\n}\n.items-container.collapsed[_ngcontent-%COMP%] {\n  height: 0 !important;\n  opacity: 0;\n  overflow: hidden;\n  padding: 0 12px;\n}\n.sidebar-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: flex-start;\n  padding: 12px 8px;\n  margin-bottom: 4px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s;\n  border: 1px solid transparent;\n}\n.sidebar-item[_ngcontent-%COMP%]:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px var(--shadow);\n}\n.sidebar-item[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n  box-shadow: 0 1px 4px var(--shadow);\n}\n.item-content[_ngcontent-%COMP%] {\n  flex: 1;\n  min-width: 0;\n}\n.item-title[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n  line-height: 1.3;\n  transition: color 0.3s ease;\n}\n.item-description[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: var(--text-secondary);\n  line-height: 1.4;\n  margin-bottom: 6px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  transition: color 0.3s ease;\n}\n.item-meta[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 11px;\n  color: var(--text-muted);\n  transition: color 0.3s ease;\n}\n.item-meta[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%] {\n  font-weight: 500;\n}\n.item-meta[_ngcontent-%COMP%]   .word-count[_ngcontent-%COMP%] {\n  background: var(--bg-accent);\n  color: var(--accent-primary);\n  padding: 2px 6px;\n  border-radius: 10px;\n  font-weight: 600;\n}\n.empty-state[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  text-align: center;\n  color: var(--text-muted);\n  transition: color 0.3s ease;\n}\n.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%] {\n  font-size: 48px;\n  margin-bottom: 16px;\n  opacity: 0.6;\n}\n.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  font-size: 13px;\n  line-height: 1.5;\n  margin: 0;\n}\n.sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 6px;\n}\n.sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: var(--bg-tertiary);\n}\n.sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: var(--text-muted);\n  border-radius: 3px;\n}\n.sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: var(--text-secondary);\n}\n@media (max-width: 768px) {\n  .novel-sidebar[_ngcontent-%COMP%] {\n    width: 200px;\n  }\n  .sidebar-header[_ngcontent-%COMP%] {\n    padding: 12px 16px;\n  }\n  .sidebar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n    font-size: 14px;\n  }\n  .section-title[_ngcontent-%COMP%] {\n    padding: 6px 16px;\n    font-size: 12px;\n  }\n  .items-container[_ngcontent-%COMP%] {\n    padding: 0 8px;\n  }\n  .sidebar-item[_ngcontent-%COMP%] {\n    padding: 10px 6px;\n  }\n  .item-title[_ngcontent-%COMP%] {\n    font-size: 13px;\n  }\n  .item-description[_ngcontent-%COMP%] {\n    font-size: 11px;\n  }\n}\n/*# sourceMappingURL=novel-sidebar.component.css.map */'], data: { animation: [
    trigger("slideAnimation", [
      state("expanded", style({
        height: "*",
        opacity: 1,
        overflow: "visible"
      })),
      state("collapsed", style({
        height: "0px",
        opacity: 0,
        overflow: "hidden"
      })),
      transition("expanded <=> collapsed", [
        animate("300ms ease-in-out")
      ])
    ])
  ] } });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelSidebarComponent, [{
    type: Component,
    args: [{ selector: "app-novel-sidebar", standalone: false, animations: [
      trigger("slideAnimation", [
        state("expanded", style({
          height: "*",
          opacity: 1,
          overflow: "visible"
        })),
        state("collapsed", style({
          height: "0px",
          opacity: 0,
          overflow: "hidden"
        })),
        transition("expanded <=> collapsed", [
          animate("300ms ease-in-out")
        ])
      ])
    ], template: `<div class="novel-sidebar" 
     [class.closed]="!isVisible"
     [style.display]="isVisible ? '' : 'none'">
  <div class="sidebar-header">
    <h3>\uC791\uD488 \uAD00\uB9AC</h3>
    <button class="close-panel-btn" 
            title="\uB2EB\uAE30"
            (click)="onClose()">
      \xD7
    </button>
  </div>
  
  <div class="sidebar-content">
    <!-- \uCD5C\uADFC \uC791\uD488 \uC139\uC158 -->
    <div class="section">
      <div class="section-title" (click)="toggleSection('recent')">
        <span class="title-text">
          <span class="expand-arrow" [class.expanded]="isSectionExpanded('recent')">\u25B6</span>
          \uCD5C\uADFC \uC791\uD488
        </span>
        <span class="count">({{recentItems.length}})</span>
      </div>
      <div class="items-container" 
           [class.collapsed]="!isSectionExpanded('recent')"
           [@slideAnimation]="isSectionExpanded('recent') ? 'expanded' : 'collapsed'">
        <div class="sidebar-item" 
             *ngFor="let item of recentItems"
             (click)="onItemClick(item)">
          <div class="item-content">
            <div class="item-title">{{ item.title }}</div>
            <div class="item-description">{{ item.description }}</div>
            <div class="item-meta">
              <span class="date">{{ formatDate(item.createdDate!) }}</span>
              <span class="word-count" *ngIf="item.wordCount">{{ formatWordCount(item.wordCount) }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- \uD15C\uD50C\uB9BF \uC139\uC158 -->
    <div class="section">
      <div class="section-title" (click)="toggleSection('template')">
        <span class="title-text">
          <span class="expand-arrow" [class.expanded]="isSectionExpanded('template')">\u25B6</span>
          \uC2A4\uD1A0\uB9AC \uD15C\uD50C\uB9BF
        </span>
        <span class="count">({{templateItems.length}})</span>
      </div>
      <div class="items-container"
           [class.collapsed]="!isSectionExpanded('template')"
           [@slideAnimation]="isSectionExpanded('template') ? 'expanded' : 'collapsed'">
        <div class="sidebar-item" 
             *ngFor="let item of templateItems"
             (click)="onItemClick(item)">
          <div class="item-content">
            <div class="item-title">{{ item.title }}</div>
            <div class="item-description">{{ item.description }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- \uC601\uAC10 \uC139\uC158 -->
    <div class="section">
      <div class="section-title" (click)="toggleSection('inspiration')">
        <span class="title-text">
          <span class="expand-arrow" [class.expanded]="isSectionExpanded('inspiration')">\u25B6</span>
          \uCC3D\uC791 \uC601\uAC10
        </span>
        <span class="count">({{inspirationItems.length}})</span>
      </div>
      <div class="items-container"
           [class.collapsed]="!isSectionExpanded('inspiration')"
           [@slideAnimation]="isSectionExpanded('inspiration') ? 'expanded' : 'collapsed'">
        <div class="sidebar-item" 
             *ngFor="let item of inspirationItems"
             (click)="onItemClick(item)">
          <div class="item-content">
            <div class="item-title">{{ item.title }}</div>
            <div class="item-description">{{ item.description }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- \uBE48 \uC0C1\uD0DC \uBA54\uC2DC\uC9C0 -->
  <div class="empty-state" *ngIf="sidebarItems.length === 0">
    <div class="empty-icon">\u{1F4DD}</div>
    <p>\uC544\uC9C1 \uC791\uC131\uB41C \uBB34\uD611\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.<br>\uC0C8\uB85C\uC6B4 \uC791\uD488\uC744 \uC2DC\uC791\uD574\uBCF4\uC138\uC694!</p>
  </div>
</div>`, styles: ['@charset "UTF-8";\n\n/* src/app/modules/novel/components/novel-sidebar/novel-sidebar.component.scss */\n.novel-sidebar {\n  width: 250px;\n  background: var(--bg-primary);\n  border-right: 1px solid var(--border-color);\n  display: flex;\n  flex-direction: column;\n  margin-left: 40px;\n  transition: all 0.25s cubic-bezier(0.4, 1.4, 0.6, 1);\n  transform: translateX(0);\n  opacity: 1;\n  z-index: 1000;\n  height: 100%;\n  box-shadow: 2px 0 8px var(--shadow);\n}\n.novel-sidebar.closed {\n  transform: translateX(-100%);\n  opacity: 0;\n  pointer-events: none;\n}\n.sidebar-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color);\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  transition: all 0.3s ease;\n}\n.sidebar-header h3 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n}\n.close-panel-btn {\n  background: none;\n  border: none;\n  font-size: 18px;\n  cursor: pointer;\n  width: 28px;\n  height: 28px;\n  line-height: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--text-muted);\n  border-radius: 4px;\n  transition: all 0.15s;\n}\n.close-panel-btn:hover {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n}\n.sidebar-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px 0;\n}\n.section {\n  margin-bottom: 24px;\n}\n.section:last-child {\n  margin-bottom: 8px;\n}\n.section-title {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 20px;\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--text-muted);\n  border-bottom: 1px solid var(--border-color);\n  margin-bottom: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.section-title:hover {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n}\n.section-title .title-text {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n.section-title .expand-arrow {\n  font-size: 10px;\n  transition: transform 0.3s ease;\n  color: var(--text-muted);\n}\n.section-title .expand-arrow.expanded {\n  transform: rotate(90deg);\n  color: var(--text-secondary);\n}\n.section-title .count {\n  color: var(--text-muted);\n  font-size: 11px;\n}\n.items-container {\n  padding: 0 12px;\n  transition: all 0.3s ease;\n}\n.items-container.collapsed {\n  height: 0 !important;\n  opacity: 0;\n  overflow: hidden;\n  padding: 0 12px;\n}\n.sidebar-item {\n  display: flex;\n  align-items: flex-start;\n  padding: 12px 8px;\n  margin-bottom: 4px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s;\n  border: 1px solid transparent;\n}\n.sidebar-item:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px var(--shadow);\n}\n.sidebar-item:active {\n  transform: translateY(0);\n  box-shadow: 0 1px 4px var(--shadow);\n}\n.item-content {\n  flex: 1;\n  min-width: 0;\n}\n.item-title {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin-bottom: 4px;\n  line-height: 1.3;\n  transition: color 0.3s ease;\n}\n.item-description {\n  font-size: 12px;\n  color: var(--text-secondary);\n  line-height: 1.4;\n  margin-bottom: 6px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  transition: color 0.3s ease;\n}\n.item-meta {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 11px;\n  color: var(--text-muted);\n  transition: color 0.3s ease;\n}\n.item-meta .date {\n  font-weight: 500;\n}\n.item-meta .word-count {\n  background: var(--bg-accent);\n  color: var(--accent-primary);\n  padding: 2px 6px;\n  border-radius: 10px;\n  font-weight: 600;\n}\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  text-align: center;\n  color: var(--text-muted);\n  transition: color 0.3s ease;\n}\n.empty-state .empty-icon {\n  font-size: 48px;\n  margin-bottom: 16px;\n  opacity: 0.6;\n}\n.empty-state p {\n  font-size: 13px;\n  line-height: 1.5;\n  margin: 0;\n}\n.sidebar-content::-webkit-scrollbar {\n  width: 6px;\n}\n.sidebar-content::-webkit-scrollbar-track {\n  background: var(--bg-tertiary);\n}\n.sidebar-content::-webkit-scrollbar-thumb {\n  background: var(--text-muted);\n  border-radius: 3px;\n}\n.sidebar-content::-webkit-scrollbar-thumb:hover {\n  background: var(--text-secondary);\n}\n@media (max-width: 768px) {\n  .novel-sidebar {\n    width: 200px;\n  }\n  .sidebar-header {\n    padding: 12px 16px;\n  }\n  .sidebar-header h3 {\n    font-size: 14px;\n  }\n  .section-title {\n    padding: 6px 16px;\n    font-size: 12px;\n  }\n  .items-container {\n    padding: 0 8px;\n  }\n  .sidebar-item {\n    padding: 10px 6px;\n  }\n  .item-title {\n    font-size: 13px;\n  }\n  .item-description {\n    font-size: 11px;\n  }\n}\n/*# sourceMappingURL=novel-sidebar.component.css.map */\n'] }]
  }], null, { isVisible: [{
    type: Input
  }], close: [{
    type: Output
  }], itemClick: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(NovelSidebarComponent, { className: "NovelSidebarComponent", filePath: "src/app/modules/novel/components/novel-sidebar/novel-sidebar.component.ts", lineNumber: 37 });
})();

// src/app/modules/novel/components/novel-vertical-menu/novel-vertical-menu.component.ts
function NovelVerticalMenuComponent_div_1_ng_container_2_div_10_div_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 20)(1, "span");
    \u0275\u0275text(2, "\u2190");
    \u0275\u0275elementEnd()();
  }
}
function NovelVerticalMenuComponent_div_1_ng_container_2_div_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 15);
    \u0275\u0275listener("click", function NovelVerticalMenuComponent_div_1_ng_container_2_div_10_Template_div_click_0_listener() {
      const action_r4 = \u0275\u0275restoreView(_r3).$implicit;
      const menuItem_r5 = \u0275\u0275nextContext().ngIf;
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(!ctx_r1.isActionDisabled(menuItem_r5.id, action_r4.id) && ctx_r1.onActionClick(menuItem_r5.id, action_r4.id));
    });
    \u0275\u0275elementStart(1, "div", 16)(2, "div", 17);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 18);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(6, NovelVerticalMenuComponent_div_1_ng_container_2_div_10_div_6_Template, 3, 0, "div", 19);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const action_r4 = ctx.$implicit;
    const menuItem_r5 = \u0275\u0275nextContext().ngIf;
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275classProp("disabled", ctx_r1.isActionDisabled(menuItem_r5.id, action_r4.id));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(action_r4.label);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(action_r4.description);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r1.isActionDisabled(menuItem_r5.id, action_r4.id));
  }
}
function NovelVerticalMenuComponent_div_1_ng_container_2_div_11_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 25)(1, "span", 26);
    \u0275\u0275text(2, "\u23F3");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 27);
    \u0275\u0275text(4, "\uC18C\uC124 \uC0DD\uC131 \uC911...");
    \u0275\u0275elementEnd()();
  }
}
function NovelVerticalMenuComponent_div_1_ng_container_2_div_11_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 28)(1, "span", 26);
    \u0275\u0275text(2, "\u2705");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 27);
    \u0275\u0275text(4, "\uC18C\uC124 \uC0DD\uC131 \uC644\uB8CC");
    \u0275\u0275elementEnd()();
  }
}
function NovelVerticalMenuComponent_div_1_ng_container_2_div_11_div_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 29)(1, "span", 30);
    \u0275\u0275text(2, "\uD604\uC7AC \uB2E8\uACC4:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 31);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r1.currentStep);
  }
}
function NovelVerticalMenuComponent_div_1_ng_container_2_div_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 21);
    \u0275\u0275template(1, NovelVerticalMenuComponent_div_1_ng_container_2_div_11_div_1_Template, 5, 0, "div", 22)(2, NovelVerticalMenuComponent_div_1_ng_container_2_div_11_div_2_Template, 5, 0, "div", 23)(3, NovelVerticalMenuComponent_div_1_ng_container_2_div_11_div_3_Template, 5, 1, "div", 24);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r1.isGenerating);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r1.generatedNovel && !ctx_r1.isGenerating);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r1.currentStep !== "setup");
  }
}
function NovelVerticalMenuComponent_div_1_ng_container_2_div_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 32)(1, "div", 33)(2, "span", 34);
    \u0275\u0275text(3, "\uC0DD\uC131\uB41C \uC18C\uC124:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 35);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r1.generatedNovel.length > 50 ? ctx_r1.generatedNovel.substring(0, 50) + "..." : ctx_r1.generatedNovel);
  }
}
function NovelVerticalMenuComponent_div_1_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementContainerStart(0);
    \u0275\u0275elementStart(1, "div", 7)(2, "div", 8)(3, "span", 9);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "h3");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "p", 10);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 11);
    \u0275\u0275template(10, NovelVerticalMenuComponent_div_1_ng_container_2_div_10_Template, 7, 5, "div", 12);
    \u0275\u0275elementEnd();
    \u0275\u0275template(11, NovelVerticalMenuComponent_div_1_ng_container_2_div_11_Template, 4, 3, "div", 13)(12, NovelVerticalMenuComponent_div_1_ng_container_2_div_12_Template, 6, 1, "div", 14);
    \u0275\u0275elementContainerEnd();
  }
  if (rf & 2) {
    const menuItem_r5 = ctx.ngIf;
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(menuItem_r5.icon);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(menuItem_r5.title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(menuItem_r5.description);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", menuItem_r5.actions);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", menuItem_r5.id === "generate");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", menuItem_r5.id === "export" && ctx_r1.generatedNovel);
  }
}
function NovelVerticalMenuComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 4);
    \u0275\u0275listener("mouseenter", function NovelVerticalMenuComponent_div_1_Template_div_mouseenter_0_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onPanelHover());
    })("mouseleave", function NovelVerticalMenuComponent_div_1_Template_div_mouseleave_0_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onPanelLeave());
    });
    \u0275\u0275elementStart(1, "div", 5);
    \u0275\u0275template(2, NovelVerticalMenuComponent_div_1_ng_container_2_Template, 13, 6, "ng-container", 6);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275property("@slideIn", ctx_r1.expandedMenuId ? "expanded" : "collapsed");
    \u0275\u0275advance();
    \u0275\u0275property("@fadeIn", ctx_r1.expandedMenuId ? "visible" : "hidden");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r1.getMenuItemById(ctx_r1.expandedMenuId));
  }
}
function NovelVerticalMenuComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 36);
    \u0275\u0275listener("mouseenter", function NovelVerticalMenuComponent_div_3_Template_div_mouseenter_0_listener() {
      const item_r7 = \u0275\u0275restoreView(_r6).$implicit;
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onMenuHover(item_r7.id));
    })("mouseleave", function NovelVerticalMenuComponent_div_3_Template_div_mouseleave_0_listener() {
      \u0275\u0275restoreView(_r6);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onMenuLeave());
    });
    \u0275\u0275elementStart(1, "span", 37);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r7 = ctx.$implicit;
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275classProp("active", ctx_r1.expandedMenuId === item_r7.id);
    \u0275\u0275property("title", item_r7.title);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r7.icon);
  }
}
var NovelVerticalMenuComponent = class _NovelVerticalMenuComponent {
  isGenerating = false;
  generatedNovel = "";
  currentStep = "setup";
  menuAction = new EventEmitter();
  expandedMenuId = null;
  hoveredMenuId = null;
  menuItems = [
    {
      id: "generate",
      icon: "\u2728",
      title: "\uC18C\uC124 \uC0DD\uC131",
      description: "AI\uB85C \uBB34\uD611\uC9C0 \uC0DD\uC131",
      actions: [
        { id: "full", label: "\uC804\uCCB4 \uC0DD\uC131", description: "\uC644\uC804\uD55C \uC18C\uC124\uC744 \uD55C\uBC88\uC5D0 \uC0DD\uC131" },
        { id: "chapter", label: "\uC7A5\uBCC4 \uC0DD\uC131", description: "\uD55C \uC7A5\uC529 \uC21C\uCC28\uC801\uC73C\uB85C \uC0DD\uC131" },
        { id: "continue", label: "\uC774\uC5B4\uC4F0\uAE30", description: "\uAE30\uC874 \uC18C\uC124\uC5D0 \uC774\uC5B4\uC11C \uC791\uC131" }
      ]
    },
    {
      id: "manage",
      icon: "\u{1F4BE}",
      title: "\uC791\uD488 \uAD00\uB9AC",
      description: "\uC800\uC7A5 \uBC0F \uD3B8\uC9D1",
      actions: [
        { id: "save", label: "\uC791\uD488 \uC800\uC7A5", description: "\uB0B4 \uC791\uD488\uBAA9\uB85D\uC5D0 \uC800\uC7A5" },
        { id: "edit", label: "\uC18C\uC124 \uD3B8\uC9D1", description: "\uC0DD\uC131\uB41C \uC18C\uC124 \uC218\uC815" },
        { id: "delete", label: "\uC791\uD488 \uC0AD\uC81C", description: "\uC120\uD0DD\uD55C \uC791\uD488 \uC0AD\uC81C" }
      ]
    },
    {
      id: "data",
      icon: "\u{1F5C2}\uFE0F",
      title: "\uB370\uC774\uD130 \uAD00\uB9AC",
      description: "\uB9AC\uC18C\uC2A4 \uAD00\uB9AC",
      actions: [
        { id: "manage-characters", label: "\u{1F465} \uCE90\uB9AD\uD130 \uAD00\uB9AC", description: "\uB4F1\uC7A5\uC778\uBB3C\uC744 \uC0DD\uC131\uD558\uACE0 \uAD00\uB9AC\uD569\uB2C8\uB2E4" },
        { id: "manage-scenarios", label: "\u{1F4D6} \uC0C1\uD669 \uAD00\uB9AC", description: "\uC2DC\uB098\uB9AC\uC624\uC640 \uC0C1\uD669\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4" },
        { id: "manage-items", label: "\u2694\uFE0F \uC544\uC774\uD15C \uAD00\uB9AC", description: "\uBB34\uAE30, \uBB3C\uD488 \uB4F1\uC744 \uAD00\uB9AC\uD569\uB2C8\uB2E4" }
      ]
    },
    {
      id: "tools",
      icon: "\u{1F527}",
      title: "\uC791\uC131 \uB3C4\uAD6C",
      description: "\uBD84\uC11D \uBC0F \uB3C4\uAD6C",
      actions: [
        { id: "analyze", label: "\uBB38\uCCB4 \uBD84\uC11D", description: "\uC18C\uC124\uC758 \uBB38\uCCB4\uC640 \uD2B9\uC9D5 \uBD84\uC11D" },
        { id: "plot", label: "\uD50C\uB86F \uAD6C\uC870", description: "\uC2A4\uD1A0\uB9AC \uAD6C\uC870 \uC2DC\uAC01\uD654" },
        { id: "grammar", label: "\uB9DE\uCDA4\uBC95 \uAC80\uC0AC", description: "\uC624\uD0C8\uC790 \uBC0F \uBB38\uBC95 \uAC80\uC0AC" }
      ]
    },
    {
      id: "export",
      icon: "\u{1F4E4}",
      title: "\uB0B4\uBCF4\uB0B4\uAE30",
      description: "\uD30C\uC77C \uC800\uC7A5",
      actions: [
        { id: "txt", label: "TXT \uD30C\uC77C", description: "\uD14D\uC2A4\uD2B8 \uD30C\uC77C\uB85C \uC800\uC7A5" },
        { id: "pdf", label: "PDF \uD30C\uC77C", description: "PDF \uBB38\uC11C\uB85C \uC800\uC7A5" },
        { id: "epub", label: "EPUB \uD30C\uC77C", description: "\uC804\uC790\uCC45 \uD615\uC2DD\uC73C\uB85C \uC800\uC7A5" },
        { id: "docx", label: "Word \uD30C\uC77C", description: "Word \uBB38\uC11C\uB85C \uC800\uC7A5" }
      ]
    },
    {
      id: "settings",
      icon: "\u2699\uFE0F",
      title: "\uC124\uC815",
      description: "\uD658\uACBD \uC124\uC815",
      actions: [
        { id: "novel-settings", label: "\uC791\uD488 \uC124\uC815", description: "\uC81C\uBAA9, \uC7A5\uB974, \uD0DC\uADF8 \uC124\uC815" },
        { id: "ai-settings", label: "AI \uC124\uC815", description: "AI \uC0DD\uC131 \uC635\uC158 \uC870\uC815" },
        { id: "ui-settings", label: "UI \uC124\uC815", description: "\uC778\uD130\uD398\uC774\uC2A4 \uAC1C\uC778\uD654" }
      ]
    }
  ];
  onIconClick(menuId) {
    const menuItem = this.getMenuItemById(menuId);
    if (menuItem && menuItem.actions.length > 0) {
      const firstAction = menuItem.actions[0];
      if (!this.isActionDisabled(menuId, firstAction.id)) {
        this.onActionClick(menuId, firstAction.id);
      }
    }
  }
  onMenuHover(menuId) {
    this.hoveredMenuId = menuId;
    this.expandedMenuId = menuId;
  }
  onMenuLeave() {
    this.hoveredMenuId = null;
    setTimeout(() => {
      if (!this.hoveredMenuId) {
        this.expandedMenuId = null;
      }
    }, 200);
  }
  onPanelHover() {
    this.hoveredMenuId = "panel";
  }
  onPanelLeave() {
    this.hoveredMenuId = null;
    setTimeout(() => {
      if (!this.hoveredMenuId) {
        this.expandedMenuId = null;
      }
    }, 200);
  }
  onActionClick(menuType, actionId) {
    const action = {
      type: menuType,
      subAction: actionId
    };
    this.menuAction.emit(action);
    this.expandedMenuId = null;
    this.hoveredMenuId = null;
  }
  isActionDisabled(menuId, actionId) {
    const requiresNovel = ["edit", "save", "analyze", "txt", "pdf", "epub", "docx"];
    if (requiresNovel.includes(actionId) && !this.generatedNovel) {
      return true;
    }
    if (this.isGenerating && ["full", "chapter", "continue"].includes(actionId)) {
      return true;
    }
    return false;
  }
  getMenuItemById(id) {
    return this.menuItems.find((item) => item.id === id);
  }
  static \u0275fac = function NovelVerticalMenuComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelVerticalMenuComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _NovelVerticalMenuComponent, selectors: [["app-novel-vertical-menu"]], inputs: { isGenerating: "isGenerating", generatedNovel: "generatedNovel", currentStep: "currentStep" }, outputs: { menuAction: "menuAction" }, standalone: false, decls: 4, vars: 2, consts: [[1, "novel-vertical-menu"], ["class", "expanded-panel", 3, "mouseenter", "mouseleave", 4, "ngIf"], [1, "icon-menu"], ["class", "menu-icon", 3, "active", "title", "mouseenter", "mouseleave", 4, "ngFor", "ngForOf"], [1, "expanded-panel", 3, "mouseenter", "mouseleave"], [1, "panel-content"], [4, "ngIf"], [1, "panel-header"], [1, "panel-title"], [1, "panel-icon"], [1, "panel-description"], [1, "panel-actions"], ["class", "action-item", 3, "disabled", "click", 4, "ngFor", "ngForOf"], ["class", "generation-status", 4, "ngIf"], ["class", "export-info", 4, "ngIf"], [1, "action-item", 3, "click"], [1, "action-content"], [1, "action-label"], [1, "action-description"], ["class", "action-arrow", 4, "ngIf"], [1, "action-arrow"], [1, "generation-status"], ["class", "status-item generating", 4, "ngIf"], ["class", "status-item completed", 4, "ngIf"], ["class", "current-step", 4, "ngIf"], [1, "status-item", "generating"], [1, "status-icon"], [1, "status-text"], [1, "status-item", "completed"], [1, "current-step"], [1, "step-label"], [1, "step-value"], [1, "export-info"], [1, "info-item"], [1, "info-label"], [1, "info-value"], [1, "menu-icon", 3, "mouseenter", "mouseleave", "title"], [1, "icon"]], template: function NovelVerticalMenuComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0);
      \u0275\u0275template(1, NovelVerticalMenuComponent_div_1_Template, 3, 3, "div", 1);
      \u0275\u0275elementStart(2, "div", 2);
      \u0275\u0275template(3, NovelVerticalMenuComponent_div_3_Template, 3, 4, "div", 3);
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.expandedMenuId);
      \u0275\u0275advance(2);
      \u0275\u0275property("ngForOf", ctx.menuItems);
    }
  }, dependencies: [NgForOf, NgIf], styles: ["\n\n.novel-vertical-menu[_ngcontent-%COMP%] {\n  position: relative;\n  display: flex;\n  align-items: flex-start;\n  height: 100%;\n  width: 100%;\n  z-index: 1000;\n  margin: 0 !important;\n  padding: 0 !important;\n  flex-direction: row-reverse;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 16px 8px;\n  background: var(--bg-primary);\n  border-radius: 0;\n  border-left: 1px solid var(--border-color);\n  border-top: 1px solid var(--border-color);\n  border-bottom: 1px solid var(--border-color);\n  border-right: none;\n  box-shadow: -2px 0 8px var(--shadow);\n  height: 100%;\n  width: 60px;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  background: transparent;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\n  font-size: 20px;\n  transition: transform 0.2s ease;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]:hover {\n  background: var(--bg-accent);\n  transform: translateX(-2px);\n  box-shadow: 0 2px 8px var(--shadow);\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%] {\n  transform: scale(1.1);\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]   .menu-icon.active[_ngcontent-%COMP%] {\n  background: var(--accent-color);\n  color: white;\n  box-shadow: 0 4px 12px var(--shadow);\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]   .menu-icon.active[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\n  transform: scale(1.05);\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]::after {\n  content: attr(title);\n  position: absolute;\n  right: 100%;\n  top: 50%;\n  transform: translateY(-50%);\n  margin-right: 8px;\n  padding: 4px 8px;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  border-radius: 4px;\n  font-size: 12px;\n  white-space: nowrap;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.2s ease;\n  z-index: 1001;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]:hover::after {\n  opacity: 1;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]   .menu-icon.active[_ngcontent-%COMP%]::after {\n  display: none;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 60px;\n  top: 0;\n  height: 100%;\n  width: 190px;\n  background: var(--bg-primary);\n  border-radius: 0;\n  box-shadow: -2px 0 12px var(--shadow);\n  overflow: hidden;\n  border-top: 1px solid var(--border-color);\n  border-left: 1px solid var(--border-color);\n  border-bottom: 1px solid var(--border-color);\n  border-right: none;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] {\n  padding: 20px;\n  height: 100%;\n  overflow-y: auto;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%] {\n  border-bottom: 1px solid var(--border-color);\n  padding-bottom: 16px;\n  margin-bottom: 20px;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 8px;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]   .panel-icon[_ngcontent-%COMP%] {\n  font-size: 24px;\n  padding: 8px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .panel-description[_ngcontent-%COMP%] {\n  margin: 0;\n  color: var(--text-secondary);\n  font-size: 14px;\n  margin-left: 56px;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-actions[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-actions[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-actions[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .action-content[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-actions[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .action-content[_ngcontent-%COMP%]   .action-label[_ngcontent-%COMP%] {\n  font-weight: 500;\n  color: #1f2937;\n  font-size: 14px;\n  margin-bottom: 4px;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-actions[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .action-content[_ngcontent-%COMP%]   .action-description[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: #6b7280;\n  line-height: 1.3;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-actions[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .action-arrow[_ngcontent-%COMP%] {\n  color: #9ca3af;\n  font-size: 14px;\n  transition: all 0.2s ease;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-actions[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]:hover:not(.disabled) {\n  background: #f8fafc;\n  border-color: #e5e7eb;\n  transform: translateX(-2px);\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-actions[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]:hover:not(.disabled)   .action-arrow[_ngcontent-%COMP%] {\n  color: #3b82f6;\n  transform: translateX(-2px);\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-actions[_ngcontent-%COMP%]   .action-item.disabled[_ngcontent-%COMP%] {\n  opacity: 0.5;\n  cursor: not-allowed;\n  background: #f9fafb;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-actions[_ngcontent-%COMP%]   .action-item.disabled[_ngcontent-%COMP%]   .action-label[_ngcontent-%COMP%] {\n  color: #9ca3af;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .panel-actions[_ngcontent-%COMP%]   .action-item.disabled[_ngcontent-%COMP%]   .action-description[_ngcontent-%COMP%] {\n  color: #d1d5db;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%] {\n  margin-top: 20px;\n  padding: 16px;\n  background: #f8fafc;\n  border-radius: 8px;\n  border: 1px solid #e5e7eb;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%] {\n  font-size: 16px;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 500;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%]   .status-item.generating[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%] {\n  animation: _ngcontent-%COMP%_pulse 2s infinite;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%]   .status-item.generating[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%] {\n  color: #f59e0b;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%]   .status-item.completed[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%] {\n  color: #10b981;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%]   .current-step[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 8px;\n  font-size: 13px;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%]   .current-step[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%] {\n  color: #6b7280;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .generation-status[_ngcontent-%COMP%]   .current-step[_ngcontent-%COMP%]   .step-value[_ngcontent-%COMP%] {\n  color: #1f2937;\n  font-weight: 500;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .export-info[_ngcontent-%COMP%] {\n  margin-top: 20px;\n  padding: 16px;\n  background: #f0f9ff;\n  border-radius: 8px;\n  border: 1px solid #bae6fd;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .export-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .export-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: #0369a1;\n  font-weight: 500;\n}\n.novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .export-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: #1e40af;\n  line-height: 1.4;\n}\n@keyframes _ngcontent-%COMP%_pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n@media (max-width: 768px) {\n  .novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%] {\n    width: 50px;\n    padding: 12px 6px;\n  }\n  .novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%] {\n    width: 38px;\n    height: 38px;\n  }\n  .novel-vertical-menu[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\n    font-size: 18px;\n  }\n  .novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%] {\n    left: 50px;\n    width: 200px;\n  }\n  .novel-vertical-menu[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] {\n    padding: 16px;\n  }\n}\n/*# sourceMappingURL=novel-vertical-menu.component.css.map */"], data: { animation: [
    trigger("slideIn", [
      state("collapsed", style({
        width: "0px",
        opacity: 0,
        transform: "translateX(100%)"
        // 우측에서 나타나도록
      })),
      state("expanded", style({
        width: "190px",
        // 패널 너비
        opacity: 1,
        transform: "translateX(0)"
      })),
      transition("collapsed <=> expanded", [
        animate("250ms cubic-bezier(0.4, 0.0, 0.2, 1)")
      ])
    ]),
    trigger("fadeIn", [
      state("hidden", style({
        opacity: 0,
        transform: "translateX(20px)"
      })),
      state("visible", style({
        opacity: 1,
        transform: "translateX(0)"
      })),
      transition("hidden => visible", [
        animate("300ms 100ms ease-out")
      ]),
      transition("visible => hidden", [
        animate("200ms ease-in")
      ])
    ])
  ] } });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelVerticalMenuComponent, [{
    type: Component,
    args: [{ selector: "app-novel-vertical-menu", standalone: false, animations: [
      trigger("slideIn", [
        state("collapsed", style({
          width: "0px",
          opacity: 0,
          transform: "translateX(100%)"
          // 우측에서 나타나도록
        })),
        state("expanded", style({
          width: "190px",
          // 패널 너비
          opacity: 1,
          transform: "translateX(0)"
        })),
        transition("collapsed <=> expanded", [
          animate("250ms cubic-bezier(0.4, 0.0, 0.2, 1)")
        ])
      ]),
      trigger("fadeIn", [
        state("hidden", style({
          opacity: 0,
          transform: "translateX(20px)"
        })),
        state("visible", style({
          opacity: 1,
          transform: "translateX(0)"
        })),
        transition("hidden => visible", [
          animate("300ms 100ms ease-out")
        ]),
        transition("visible => hidden", [
          animate("200ms ease-in")
        ])
      ])
    ], template: `<div class="novel-vertical-menu">
  <!-- \uD655\uC7A5 \uD328\uB110 (\uC88C\uCE21\uC5D0 \uBC30\uCE58) -->
  <div 
    class="expanded-panel"
    *ngIf="expandedMenuId"
    [@slideIn]="expandedMenuId ? 'expanded' : 'collapsed'"
    (mouseenter)="onPanelHover()"
    (mouseleave)="onPanelLeave()"
  >
    <div class="panel-content" [@fadeIn]="expandedMenuId ? 'visible' : 'hidden'">
      <ng-container *ngIf="getMenuItemById(expandedMenuId) as menuItem">
        <!-- \uD328\uB110 \uD5E4\uB354 -->
        <div class="panel-header">
          <div class="panel-title">
            <span class="panel-icon">{{ menuItem.icon }}</span>
            <h3>{{ menuItem.title }}</h3>
          </div>
          <p class="panel-description">{{ menuItem.description }}</p>
        </div>

        <!-- \uC561\uC158 \uBAA9\uB85D -->
        <div class="panel-actions">
          <div 
            *ngFor="let action of menuItem.actions"
            class="action-item"
            [class.disabled]="isActionDisabled(menuItem.id, action.id)"
            (click)="!isActionDisabled(menuItem.id, action.id) && onActionClick(menuItem.id, action.id)"
          >
            <div class="action-content">
              <div class="action-label">{{ action.label }}</div>
              <div class="action-description">{{ action.description }}</div>
            </div>
            <div class="action-arrow" *ngIf="!isActionDisabled(menuItem.id, action.id)">
              <span>\u2190</span>
            </div>
          </div>
        </div>

        <!-- \uC18C\uC124 \uC0DD\uC131 \uBA54\uB274 \uD2B9\uBCC4 \uCC98\uB9AC -->
        <div *ngIf="menuItem.id === 'generate'" class="generation-status">
          <div *ngIf="isGenerating" class="status-item generating">
            <span class="status-icon">\u23F3</span>
            <span class="status-text">\uC18C\uC124 \uC0DD\uC131 \uC911...</span>
          </div>
          <div *ngIf="generatedNovel && !isGenerating" class="status-item completed">
            <span class="status-icon">\u2705</span>
            <span class="status-text">\uC18C\uC124 \uC0DD\uC131 \uC644\uB8CC</span>
          </div>
          <div *ngIf="currentStep !== 'setup'" class="current-step">
            <span class="step-label">\uD604\uC7AC \uB2E8\uACC4:</span>
            <span class="step-value">{{ currentStep }}</span>
          </div>
        </div>

        <!-- \uB0B4\uBCF4\uB0B4\uAE30 \uBA54\uB274 \uD2B9\uBCC4 \uCC98\uB9AC -->
        <div *ngIf="menuItem.id === 'export' && generatedNovel" class="export-info">
          <div class="info-item">
            <span class="info-label">\uC0DD\uC131\uB41C \uC18C\uC124:</span>
            <span class="info-value">{{ generatedNovel.length > 50 ? generatedNovel.substring(0, 50) + '...' : generatedNovel }}</span>
          </div>
        </div>
      </ng-container>
    </div>
  </div>

  <!-- \uC218\uC9C1 \uC544\uC774\uCF58 \uBA54\uB274 (\uC6B0\uCE21\uC5D0 \uBC30\uCE58) -->
  <div class="icon-menu">
    <div 
      *ngFor="let item of menuItems"
      class="menu-icon"
      [class.active]="expandedMenuId === item.id"
      (mouseenter)="onMenuHover(item.id)"
      (mouseleave)="onMenuLeave()"
      [title]="item.title"
    >
      <span class="icon">{{ item.icon }}</span>
    </div>
  </div>
</div>`, styles: ["/* src/app/modules/novel/components/novel-vertical-menu/novel-vertical-menu.component.scss */\n.novel-vertical-menu {\n  position: relative;\n  display: flex;\n  align-items: flex-start;\n  height: 100%;\n  width: 100%;\n  z-index: 1000;\n  margin: 0 !important;\n  padding: 0 !important;\n  flex-direction: row-reverse;\n}\n.novel-vertical-menu .icon-menu {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 16px 8px;\n  background: var(--bg-primary);\n  border-radius: 0;\n  border-left: 1px solid var(--border-color);\n  border-top: 1px solid var(--border-color);\n  border-bottom: 1px solid var(--border-color);\n  border-right: none;\n  box-shadow: -2px 0 8px var(--shadow);\n  height: 100%;\n  width: 60px;\n}\n.novel-vertical-menu .icon-menu .menu-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  background: transparent;\n}\n.novel-vertical-menu .icon-menu .menu-icon .icon {\n  font-size: 20px;\n  transition: transform 0.2s ease;\n}\n.novel-vertical-menu .icon-menu .menu-icon:hover {\n  background: var(--bg-accent);\n  transform: translateX(-2px);\n  box-shadow: 0 2px 8px var(--shadow);\n}\n.novel-vertical-menu .icon-menu .menu-icon:hover .icon {\n  transform: scale(1.1);\n}\n.novel-vertical-menu .icon-menu .menu-icon.active {\n  background: var(--accent-color);\n  color: white;\n  box-shadow: 0 4px 12px var(--shadow);\n}\n.novel-vertical-menu .icon-menu .menu-icon.active .icon {\n  transform: scale(1.05);\n}\n.novel-vertical-menu .icon-menu .menu-icon::after {\n  content: attr(title);\n  position: absolute;\n  right: 100%;\n  top: 50%;\n  transform: translateY(-50%);\n  margin-right: 8px;\n  padding: 4px 8px;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  border-radius: 4px;\n  font-size: 12px;\n  white-space: nowrap;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.2s ease;\n  z-index: 1001;\n}\n.novel-vertical-menu .icon-menu .menu-icon:hover::after {\n  opacity: 1;\n}\n.novel-vertical-menu .icon-menu .menu-icon.active::after {\n  display: none;\n}\n.novel-vertical-menu .expanded-panel {\n  position: absolute;\n  right: 60px;\n  top: 0;\n  height: 100%;\n  width: 190px;\n  background: var(--bg-primary);\n  border-radius: 0;\n  box-shadow: -2px 0 12px var(--shadow);\n  overflow: hidden;\n  border-top: 1px solid var(--border-color);\n  border-left: 1px solid var(--border-color);\n  border-bottom: 1px solid var(--border-color);\n  border-right: none;\n}\n.novel-vertical-menu .expanded-panel .panel-content {\n  padding: 20px;\n  height: 100%;\n  overflow-y: auto;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-header {\n  border-bottom: 1px solid var(--border-color);\n  padding-bottom: 16px;\n  margin-bottom: 20px;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-header .panel-title {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 8px;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-header .panel-title .panel-icon {\n  font-size: 24px;\n  padding: 8px;\n  background: var(--bg-tertiary);\n  border-radius: 8px;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-header .panel-title h3 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-header .panel-description {\n  margin: 0;\n  color: var(--text-secondary);\n  font-size: 14px;\n  margin-left: 56px;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-actions {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-actions .action-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-actions .action-item .action-content {\n  flex: 1;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-actions .action-item .action-content .action-label {\n  font-weight: 500;\n  color: #1f2937;\n  font-size: 14px;\n  margin-bottom: 4px;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-actions .action-item .action-content .action-description {\n  font-size: 12px;\n  color: #6b7280;\n  line-height: 1.3;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-actions .action-item .action-arrow {\n  color: #9ca3af;\n  font-size: 14px;\n  transition: all 0.2s ease;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-actions .action-item:hover:not(.disabled) {\n  background: #f8fafc;\n  border-color: #e5e7eb;\n  transform: translateX(-2px);\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-actions .action-item:hover:not(.disabled) .action-arrow {\n  color: #3b82f6;\n  transform: translateX(-2px);\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-actions .action-item.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  background: #f9fafb;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-actions .action-item.disabled .action-label {\n  color: #9ca3af;\n}\n.novel-vertical-menu .expanded-panel .panel-content .panel-actions .action-item.disabled .action-description {\n  color: #d1d5db;\n}\n.novel-vertical-menu .expanded-panel .panel-content .generation-status {\n  margin-top: 20px;\n  padding: 16px;\n  background: #f8fafc;\n  border-radius: 8px;\n  border: 1px solid #e5e7eb;\n}\n.novel-vertical-menu .expanded-panel .panel-content .generation-status .status-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n}\n.novel-vertical-menu .expanded-panel .panel-content .generation-status .status-item .status-icon {\n  font-size: 16px;\n}\n.novel-vertical-menu .expanded-panel .panel-content .generation-status .status-item .status-text {\n  font-size: 14px;\n  font-weight: 500;\n}\n.novel-vertical-menu .expanded-panel .panel-content .generation-status .status-item.generating .status-icon {\n  animation: pulse 2s infinite;\n}\n.novel-vertical-menu .expanded-panel .panel-content .generation-status .status-item.generating .status-text {\n  color: #f59e0b;\n}\n.novel-vertical-menu .expanded-panel .panel-content .generation-status .status-item.completed .status-text {\n  color: #10b981;\n}\n.novel-vertical-menu .expanded-panel .panel-content .generation-status .current-step {\n  display: flex;\n  gap: 8px;\n  font-size: 13px;\n}\n.novel-vertical-menu .expanded-panel .panel-content .generation-status .current-step .step-label {\n  color: #6b7280;\n}\n.novel-vertical-menu .expanded-panel .panel-content .generation-status .current-step .step-value {\n  color: #1f2937;\n  font-weight: 500;\n}\n.novel-vertical-menu .expanded-panel .panel-content .export-info {\n  margin-top: 20px;\n  padding: 16px;\n  background: #f0f9ff;\n  border-radius: 8px;\n  border: 1px solid #bae6fd;\n}\n.novel-vertical-menu .expanded-panel .panel-content .export-info .info-item {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.novel-vertical-menu .expanded-panel .panel-content .export-info .info-item .info-label {\n  font-size: 12px;\n  color: #0369a1;\n  font-weight: 500;\n}\n.novel-vertical-menu .expanded-panel .panel-content .export-info .info-item .info-value {\n  font-size: 13px;\n  color: #1e40af;\n  line-height: 1.4;\n}\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n@media (max-width: 768px) {\n  .novel-vertical-menu .icon-menu {\n    width: 50px;\n    padding: 12px 6px;\n  }\n  .novel-vertical-menu .icon-menu .menu-icon {\n    width: 38px;\n    height: 38px;\n  }\n  .novel-vertical-menu .icon-menu .menu-icon .icon {\n    font-size: 18px;\n  }\n  .novel-vertical-menu .expanded-panel {\n    left: 50px;\n    width: 200px;\n  }\n  .novel-vertical-menu .expanded-panel .panel-content {\n    padding: 16px;\n  }\n}\n/*# sourceMappingURL=novel-vertical-menu.component.css.map */\n"] }]
  }], null, { isGenerating: [{
    type: Input
  }], generatedNovel: [{
    type: Input
  }], currentStep: [{
    type: Input
  }], menuAction: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(NovelVerticalMenuComponent, { className: "NovelVerticalMenuComponent", filePath: "src/app/modules/novel/components/novel-vertical-menu/novel-vertical-menu.component.ts", lineNumber: 62 });
})();

// src/app/modules/novel/services/wuxia-scene.service.ts
var WuxiaSceneService = class _WuxiaSceneService {
  // 장면 데이터베이스
  scenes = /* @__PURE__ */ new Map();
  // 현재 장면
  currentScene = null;
  constructor() {
  }
  /**
   * 장면 등록
   */
  registerScene(scene) {
    this.scenes.set(scene.id, scene);
  }
  /**
   * 여러 장면 일괄 등록
   */
  registerScenes(scenes) {
    scenes.forEach((scene) => this.registerScene(scene));
  }
  /**
   * 장면 로드
   */
  loadScene(sceneId) {
    const scene = this.scenes.get(sceneId);
    if (scene) {
      this.currentScene = scene;
      return scene;
    }
    return null;
  }
  /**
   * 현재 장면의 선택지를 플레이어 상태에 맞게 평가
   */
  evaluateChoices(scene, player) {
    const evaluatedChoices = [];
    for (const choice of scene.choices) {
      const evaluatedChoice = __spreadValues({}, choice);
      if (choice.conditions && choice.conditions.length > 0) {
        const { isAvailable, reason } = this.checkConditions(choice.conditions, player);
        evaluatedChoice.isDisabled = !isAvailable;
        evaluatedChoice.disabledReason = reason;
      } else {
        evaluatedChoice.isDisabled = false;
      }
      evaluatedChoices.push(evaluatedChoice);
    }
    return evaluatedChoices;
  }
  /**
   * 조건 체크
   */
  checkConditions(conditions, player) {
    for (const condition of conditions) {
      const result = this.evaluateCondition(condition, player);
      if (!result.isAvailable) {
        return result;
      }
    }
    return { isAvailable: true };
  }
  /**
   * 개별 조건 평가
   */
  evaluateCondition(condition, player) {
    switch (condition.type) {
      case "stat":
        return this.checkStatCondition(condition, player);
      case "item":
        return this.checkItemCondition(condition, player);
      case "flag":
        return this.checkFlagCondition(condition, player);
      case "injury":
        return this.checkInjuryCondition(condition, player);
      case "skill":
        return this.checkSkillCondition(condition, player);
      case "sect":
        return this.checkSectCondition(condition, player);
      case "personality":
        return this.checkPersonalityCondition(condition, player);
      case "tendency":
        return this.checkTendencyCondition(condition, player);
      case "relationship":
        return this.checkRelationshipCondition(condition, player);
      default:
        return { isAvailable: false, reason: "\uC54C \uC218 \uC5C6\uB294 \uC870\uAC74 \uD0C0\uC785" };
    }
  }
  /**
   * 스탯 조건 체크
   */
  checkStatCondition(condition, player) {
    const statValue = player.stats[condition.param];
    if (statValue === void 0) {
      return { isAvailable: false, reason: `\uC2A4\uD0EF\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC74C: ${condition.param}` };
    }
    const result = this.compareValues(statValue, condition.operator, condition.value);
    if (!result) {
      const displayText = condition.displayText || `${condition.param} ${condition.operator} ${condition.value} \uD544\uC694 (\uD604\uC7AC: ${statValue})`;
      return { isAvailable: false, reason: displayText };
    }
    return { isAvailable: true };
  }
  /**
   * 아이템 조건 체크
   */
  checkItemCondition(condition, player) {
    const hasItem = player.inventory.some((item) => item.id === condition.param);
    if (condition.operator === "==" && !hasItem) {
      return { isAvailable: false, reason: `\uD544\uC694 \uC544\uC774\uD15C: ${condition.param}` };
    }
    if (condition.operator === "!=" && hasItem) {
      return { isAvailable: false, reason: `\uBD88\uAC00\uB2A5 (\uC544\uC774\uD15C \uC18C\uC9C0 \uC911: ${condition.param})` };
    }
    return { isAvailable: true };
  }
  /**
   * 플래그 조건 체크
   */
  checkFlagCondition(condition, player) {
    const hasFlag = player.flags.has(condition.param);
    if (condition.operator === "==" && !hasFlag) {
      return { isAvailable: false, reason: condition.displayText || `\uD544\uC694 \uC870\uAC74 \uBBF8\uCDA9\uC871` };
    }
    if (condition.operator === "!=" && hasFlag) {
      return { isAvailable: false, reason: condition.displayText || `\uC774\uBBF8 \uC644\uB8CC\uB428` };
    }
    return { isAvailable: true };
  }
  /**
   * 부상 조건 체크
   */
  checkInjuryCondition(condition, player) {
    const hasInjury = player.injuries.some((injury) => injury.type === condition.param);
    if (hasInjury) {
      return { isAvailable: false, reason: `\uBD80\uC0C1\uC73C\uB85C \uC778\uD574 \uBD88\uAC00\uB2A5: ${condition.param}` };
    }
    return { isAvailable: true };
  }
  /**
   * 무공 조건 체크
   */
  checkSkillCondition(condition, player) {
    const hasSkill = player.learnedSkills.includes(condition.param);
    if (!hasSkill) {
      return { isAvailable: false, reason: `\uD544\uC694 \uBB34\uACF5: ${condition.param}` };
    }
    return { isAvailable: true };
  }
  /**
   * 문파 조건 체크
   */
  checkSectCondition(condition, player) {
    if (player.sect !== condition.value) {
      return { isAvailable: false, reason: `${condition.value} \uBB38\uD30C\uB9CC \uAC00\uB2A5` };
    }
    return { isAvailable: true };
  }
  /**
   * 성격 조건 체크
   */
  checkPersonalityCondition(condition, player) {
    if (player.personality !== condition.value) {
      return { isAvailable: false, reason: condition.displayText || `\uC131\uACA9 \uC870\uAC74 \uBBF8\uCDA9\uC871` };
    }
    return { isAvailable: true };
  }
  /**
   * 성향 조건 체크
   */
  checkTendencyCondition(condition, player) {
    const result = this.compareValues(player.tendency.value, condition.operator, condition.value);
    if (!result) {
      return {
        isAvailable: false,
        reason: `\uC131\uD5A5 \uC870\uAC74 \uBBF8\uCDA9\uC871 (\uD604\uC7AC: ${player.tendency.label})`
      };
    }
    return { isAvailable: true };
  }
  /**
   * 관계도 조건 체크
   */
  checkRelationshipCondition(condition, player) {
    const relationship = player.relationships.get(condition.param) || 0;
    const result = this.compareValues(relationship, condition.operator, condition.value);
    if (!result) {
      return {
        isAvailable: false,
        reason: `\uAD00\uACC4\uB3C4 \uBD80\uC871 (${condition.param}: ${relationship})`
      };
    }
    return { isAvailable: true };
  }
  /**
   * 판정 실행
   */
  executeJudgment(judgment, player) {
    const playerStat = player.stats[judgment.stat];
    const difficulty = judgment.difficulty;
    const difference = playerStat - difficulty;
    const success = playerStat >= difficulty;
    const isCriticalSuccess = difference >= 20;
    const isCriticalFailure = difference <= -20;
    let nextSceneId;
    let resultText;
    let isCritical = false;
    if (isCriticalSuccess && judgment.criticalSuccess) {
      nextSceneId = judgment.criticalSuccess;
      resultText = `[\uB300\uC131\uACF5!] (${judgment.stat}: ${playerStat} / \uD544\uC694: ${difficulty})`;
      isCritical = true;
    } else if (success) {
      nextSceneId = judgment.successSceneId;
      resultText = `[\uC131\uACF5!] (${judgment.stat}: ${playerStat} / \uD544\uC694: ${difficulty})`;
    } else if (isCriticalFailure && judgment.criticalFailure) {
      nextSceneId = judgment.criticalFailure;
      resultText = `[\uB300\uC2E4\uD328!] (${judgment.stat}: ${playerStat} / \uD544\uC694: ${difficulty})`;
      isCritical = true;
    } else {
      nextSceneId = judgment.failureSceneId;
      resultText = `[\uC2E4\uD328] (${judgment.stat}: ${playerStat} / \uD544\uC694: ${difficulty})`;
    }
    return {
      success,
      nextSceneId,
      resultText,
      isCritical
    };
  }
  /**
   * 결과 적용
   */
  applyConsequences(consequences, player) {
    const logs = [];
    for (const consequence of consequences) {
      const log = this.applyConsequence(consequence, player);
      if (log)
        logs.push(log);
    }
    return logs;
  }
  /**
   * 개별 결과 적용
   */
  applyConsequence(consequence, player) {
    switch (consequence.type) {
      case "stat_change":
        return this.applyStatChange(consequence, player);
      case "health_change":
        return this.applyHealthChange(consequence, player);
      case "injury_add":
        return this.applyInjuryAdd(consequence, player);
      case "injury_remove":
        return this.applyInjuryRemove(consequence, player);
      case "item_gain":
        return this.applyItemGain(consequence, player);
      case "item_lose":
        return this.applyItemLose(consequence, player);
      case "flag_set":
        return this.applyFlagSet(consequence, player);
      case "flag_remove":
        return this.applyFlagRemove(consequence, player);
      case "relationship_change":
        return this.applyRelationshipChange(consequence, player);
      case "tendency_change":
        return this.applyTendencyChange(consequence, player);
      case "skill_learn":
        return this.applySkillLearn(consequence, player);
      default:
        return "";
    }
  }
  applyStatChange(consequence, player) {
    const stat = consequence.param;
    const oldValue = player.stats[stat];
    player.stats[stat] += consequence.value;
    return `${stat} ${oldValue} \u2192 ${player.stats[stat]}`;
  }
  applyHealthChange(consequence, player) {
    const oldHealth = player.health;
    player.health = Math.max(0, Math.min(player.maxHealth, player.health + consequence.value));
    return `\uC0DD\uBA85\uB825 ${oldHealth} \u2192 ${player.health}`;
  }
  applyInjuryAdd(consequence, player) {
    player.injuries.push(consequence.value);
    return `\uBD80\uC0C1 \uD68D\uB4DD: ${consequence.value.description}`;
  }
  applyInjuryRemove(consequence, player) {
    const index = player.injuries.findIndex((inj) => inj.type === consequence.param);
    if (index !== -1) {
      const removed = player.injuries.splice(index, 1)[0];
      return `\uBD80\uC0C1 \uCE58\uB8CC: ${removed.description}`;
    }
    return "";
  }
  applyItemGain(consequence, player) {
    if (typeof consequence.value === "string") {
      return `\uC544\uC774\uD15C \uD68D\uB4DD: ${consequence.value} (\uBBF8\uAD6C\uD604)`;
    } else {
      player.inventory.push(consequence.value);
      return `\uC544\uC774\uD15C \uD68D\uB4DD: ${consequence.value.name}`;
    }
  }
  applyItemLose(consequence, player) {
    const index = player.inventory.findIndex((item) => item.id === consequence.param);
    if (index !== -1) {
      const removed = player.inventory.splice(index, 1)[0];
      return `\uC544\uC774\uD15C \uC0C1\uC2E4: ${removed.name}`;
    }
    return "";
  }
  applyFlagSet(consequence, player) {
    player.flags.add(consequence.param);
    return consequence.description || `\uD50C\uB798\uADF8 \uC124\uC815: ${consequence.param}`;
  }
  applyFlagRemove(consequence, player) {
    player.flags.delete(consequence.param);
    return `\uD50C\uB798\uADF8 \uC81C\uAC70: ${consequence.param}`;
  }
  applyRelationshipChange(consequence, player) {
    const npcId = consequence.param;
    const current = player.relationships.get(npcId) || 0;
    const newValue = current + consequence.value;
    player.relationships.set(npcId, newValue);
    const change = consequence.value > 0 ? `+${consequence.value}` : `${consequence.value}`;
    return `${npcId} \uD638\uAC10\uB3C4 ${change} (${current} \u2192 ${newValue})`;
  }
  applyTendencyChange(consequence, player) {
    const oldValue = player.tendency.value;
    player.tendency.value = Math.max(-100, Math.min(100, player.tendency.value + consequence.value));
    this.updateTendencyLabel(player.tendency);
    const change = consequence.value > 0 ? `+${consequence.value}` : `${consequence.value}`;
    return `\uC131\uD5A5 ${change} (${player.tendency.label})`;
  }
  applySkillLearn(consequence, player) {
    if (!player.learnedSkills.includes(consequence.param)) {
      player.learnedSkills.push(consequence.param);
      return `\uBB34\uACF5 \uC2B5\uB4DD: ${consequence.param}`;
    }
    return "";
  }
  /**
   * 성향 레이블 업데이트
   */
  updateTendencyLabel(tendency) {
    if (tendency.value <= -60) {
      tendency.label = "\uC815\uB3C4\uC758 \uD654\uC2E0";
      tendency.description = "\uC815\uC758\uB85C\uC6C0\uC774 \uC628 \uBAB8\uC5D0\uC11C \uBFDC\uC5B4\uC838 \uB098\uC628\uB2E4.";
    } else if (tendency.value <= -20) {
      tendency.label = "\uC815\uD30C";
      tendency.description = "\uBC14\uB978 \uAE38\uC744 \uAC77\uACE0 \uC788\uB2E4.";
    } else if (tendency.value < 20) {
      tendency.label = "\uC911\uB9BD";
      tendency.description = "\uC120\uACFC \uC545 \uC0AC\uC774\uB97C \uC624\uAC04\uB2E4.";
    } else if (tendency.value < 60) {
      tendency.label = "\uC0AC\uD30C";
      tendency.description = "\uC5B4\uB450\uC6B4 \uAE38\uB85C \uC811\uC5B4\uB4E4\uACE0 \uC788\uB2E4.";
    } else {
      tendency.label = "\uB9C8\uB3C4\uC758 \uD654\uC2E0";
      tendency.description = "\uD611\uAE30\uAC00 \uC628 \uBAB8\uC744 \uAC10\uC2F8\uACE0 \uC788\uB2E4.";
    }
  }
  /**
   * 값 비교 헬퍼
   */
  compareValues(actual, operator, expected) {
    switch (operator) {
      case ">":
        return actual > expected;
      case "<":
        return actual < expected;
      case ">=":
        return actual >= expected;
      case "<=":
        return actual <= expected;
      case "==":
        return actual === expected;
      case "!=":
        return actual !== expected;
      default:
        return false;
    }
  }
  /**
   * 현재 장면 가져오기
   */
  getCurrentScene() {
    return this.currentScene;
  }
  /**
   * 장면 데이터베이스 가져오기
   */
  getSceneDatabase() {
    return this.scenes;
  }
  static \u0275fac = function WuxiaSceneService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _WuxiaSceneService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _WuxiaSceneService, factory: _WuxiaSceneService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(WuxiaSceneService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [], null);
})();

// src/app/modules/novel/services/wuxia-situation.service.ts
var WuxiaSituationService = class _WuxiaSituationService {
  // 등록된 템플릿
  templates = /* @__PURE__ */ new Map();
  // 활성 상황
  activeInstances = [];
  // 완료된 상황
  completedSituations = /* @__PURE__ */ new Set();
  constructor() {
    this.initializeDefaultTemplates();
  }
  /**
   * 기본 템플릿 초기화
   */
  initializeDefaultTemplates() {
    const bridgeEncounter = {
      id: "LOVE_ENCOUNTER_BRIDGE",
      name: "\uC18C\uC6D4\uAD50 \uC704\uC758 \uB9CC\uB0A8",
      category: "romance",
      priority: 5,
      canRepeat: false,
      roles: [
        {
          roleId: "hero",
          roleName: "\uC8FC\uC778\uACF5"
        },
        {
          roleId: "love_interest",
          roleName: "\uC6B4\uBA85\uC758 \uC0C1\uB300",
          criteria: {
            npcTags: ["potential_romance"],
            state: "idle"
          }
        }
      ],
      prerequisites: [
        {
          type: "location",
          param: "soweol_bridge",
          description: "\uC18C\uC6D4\uAD50 \uB2E4\uB9AC\uC5D0 \uC704\uCE58"
        },
        {
          type: "time",
          param: "timeOfDay",
          operator: "==",
          value: "evening",
          description: "\uD574\uC9C8\uB158"
        },
        {
          type: "tendency",
          param: "tendency.value",
          operator: ">",
          value: 20,
          description: "\uC815\uD30C \uC131\uD5A5"
        }
      ],
      stages: [
        {
          stageId: "stage_1_meeting",
          stageNumber: 1,
          scene: {
            id: "bridge_encounter_s1",
            title: "\uC18C\uC6D4\uAD50\uC758 \uADF8\uB9BC\uC790",
            narrativeText: [
              "\uC11D\uC591\uC774 \uAC15\uBB3C\uC744 \uBD89\uAC8C \uBB3C\uB4E4\uC774\uB294 \uC18C\uC6D4\uAD50.",
              "\uB2E4\uB9AC \uB09C\uAC04\uC5D0 \uAE30\uB304 \uD55C \uC5EC\uC778\uC758 \uB4B7\uBAA8\uC2B5\uC774 \uB208\uC5D0 \uB4E4\uC5B4\uC628\uB2E4.",
              "\uADF8\uB140\uB294 \uC2AC\uD508 \uB208\uC73C\uB85C \uAC15\uBB3C\uC744 \uBC14\uB77C\uBCF4\uACE0 \uC788\uB2E4."
            ],
            choices: [
              {
                id: "choice_ask",
                text: "\uBB34\uC2A8 \uC77C\uC774\uB0D0\uACE0 \uBB3B\uB294\uB2E4.",
                nextSceneId: "bridge_encounter_s2_ask"
              },
              {
                id: "choice_handkerchief",
                text: "\uBC14\uB78C\uC5D0 \uB0A0\uB9AC\uB294 \uADF8\uB140\uC758 \uC190\uC218\uAC74\uC744 \uC7A1\uC544\uC900\uB2E4.",
                nextSceneId: "bridge_encounter_s2_kind",
                conditions: [
                  {
                    type: "personality",
                    param: "personality",
                    operator: "==",
                    value: "calm",
                    displayText: "[\uC131\uACA9: \uB0C9\uCCA0\uD568]"
                  }
                ],
                consequences: [
                  {
                    type: "relationship_change",
                    param: "{love_interest}",
                    value: 10,
                    description: "\uD638\uAC10\uB3C4 +10"
                  }
                ]
              },
              {
                id: "choice_pass",
                text: "\uADF8\uB0E5 \uC9C0\uB098\uAC04\uB2E4.",
                nextSceneId: "bridge_encounter_end",
                consequences: [
                  {
                    type: "flag_set",
                    param: "missed_bridge_encounter",
                    value: true
                  }
                ]
              }
            ]
          }
        },
        {
          stageId: "stage_2_interaction",
          stageNumber: 2,
          scene: {
            id: "bridge_encounter_s2_kind",
            title: "\uC190\uC218\uAC74",
            narrativeText: [
              "\uB2F9\uC2E0\uC740 \uBC14\uB78C\uC5D0 \uB0A0\uB9AC\uB294 \uD558\uC580 \uC190\uC218\uAC74\uC744 \uB09A\uC544\uCC44\uB4EF \uC7A1\uC558\uB2E4.",
              "\uC5EC\uC778\uC774 \uB180\uB780 \uB208\uC73C\uB85C \uB2F9\uC2E0\uC744 \uB3CC\uC544\uBCF8\uB2E4.",
              '"...\uAC10\uC0AC\uD569\uB2C8\uB2E4." \uADF8\uB140\uC758 \uBEA8\uC774 \uC0B4\uC9DD \uBD89\uC5B4\uC9C4\uB2E4.'
            ],
            choices: [
              {
                id: "choice_name",
                text: "\uC774\uB984\uC744 \uBB3B\uB294\uB2E4.",
                nextSceneId: "bridge_encounter_s3_name",
                consequences: [
                  {
                    type: "flag_set",
                    param: "bridge_encounter_asked_name",
                    value: true
                  }
                ]
              },
              {
                id: "choice_leave",
                text: "\uBBF8\uC18C\uB9CC \uC9D3\uACE0 \uC790\uB9AC\uB97C \uB72C\uB2E4.",
                nextSceneId: "bridge_encounter_s3_mysterious",
                consequences: [
                  {
                    type: "relationship_change",
                    param: "{love_interest}",
                    value: 5,
                    description: "\uD638\uAC10\uB3C4 +5 (\uC2E0\uBE44\uB85C\uC6C0)"
                  },
                  {
                    type: "flag_set",
                    param: "bridge_encounter_mysterious",
                    value: true
                  }
                ]
              }
            ]
          }
        }
      ],
      outcomes: [
        {
          outcomeId: "outcome_romance_start",
          triggerCondition: "choice_name",
          consequences: [
            {
              type: "flag_set",
              param: "romance_{love_interest}_started",
              value: true
            },
            {
              type: "relationship_change",
              param: "{love_interest}",
              value: 15
            }
          ],
          unlockedSituations: ["LOVE_TEA_HOUSE", "LOVE_RESCUE"],
          description: "\uC5F0\uC560 \uB8E8\uD2B8 \uC2DC\uC791"
        }
      ]
    };
    this.registerTemplate(bridgeEncounter);
    const martialOpportunity = {
      id: "MARTIAL_OPPORTUNITY_CAVE",
      name: "\uBE44\uBC00 \uB3D9\uAD74\uC758 \uBB34\uACF5 \uBE44\uAE09",
      category: "opportunity",
      priority: 7,
      canRepeat: false,
      roles: [
        {
          roleId: "hero",
          roleName: "\uC8FC\uC778\uACF5"
        }
      ],
      prerequisites: [
        {
          type: "location",
          param: "hidden_cave",
          description: "\uC228\uACA8\uC9C4 \uB3D9\uAD74 \uBC1C\uACAC"
        },
        {
          type: "stat",
          param: "insight",
          operator: ">=",
          value: 40,
          description: "\uD1B5\uCC30\uB825 40 \uC774\uC0C1"
        }
      ],
      stages: [
        {
          stageId: "stage_1_discovery",
          stageNumber: 1,
          scene: {
            id: "cave_discovery",
            title: "\uBE44\uBC00\uC758 \uB3D9\uAD74",
            narrativeText: [
              "\uBCBC\uB791 \uB4A4\uC5D0 \uC228\uACA8\uC9C4 \uC881\uC740 \uD2C8\uC0C8\uB97C \uBC1C\uACAC\uD588\uB2E4.",
              "\uC608\uB9AC\uD55C \uAD00\uCC30\uB825\uC774 \uC544\uB2C8\uC5C8\uB2E4\uBA74 \uD3C9\uC0DD \uC9C0\uB098\uCE60 \uBED4\uD588\uB2E4.",
              "\uC548\uC73C\uB85C \uB4E4\uC5B4\uAC00\uC790 \uD76C\uBBF8\uD55C \uBE5B\uC774 \uBCF4\uC778\uB2E4."
            ],
            choices: [
              {
                id: "choice_enter",
                text: "\uC870\uC2EC\uC2A4\uB7FD\uAC8C \uB4E4\uC5B4\uAC04\uB2E4.",
                nextSceneId: "cave_interior",
                judgment: {
                  stat: "dexterity",
                  difficulty: 30,
                  successSceneId: "cave_safe_entry",
                  failureSceneId: "cave_trap_trigger"
                }
              },
              {
                id: "choice_leave",
                text: "\uC758\uC2EC\uC2A4\uB7FD\uB2E4. \uB098\uC911\uC5D0 \uB2E4\uC2DC \uC628\uB2E4.",
                nextSceneId: "cave_abandoned"
              }
            ]
          }
        },
        {
          stageId: "stage_2_manual",
          stageNumber: 2,
          scene: {
            id: "cave_safe_entry",
            title: "\uD574\uACE8\uACFC \uBE44\uAE09",
            narrativeText: [
              "\uB3D9\uAD74 \uAE4A\uC219\uD55C \uACF3, \uC624\uB798\uB41C \uD574\uACE8 \uC606\uC5D0 \uBA3C\uC9C0 \uC313\uC778 \uCC45\uC774 \uB193\uC5EC\uC788\uB2E4.",
              "\u300E\uCC9C\uC0B0\uC721\uC591\uC7A5\u300F\uC774\uB77C\uB294 \uAE00\uC790\uAC00 \uD76C\uBBF8\uD558\uAC8C \uBCF4\uC778\uB2E4.",
              "\uC808\uD559\uAE09 \uBB34\uACF5\uC774\uB2E4!"
            ],
            choices: [
              {
                id: "choice_learn",
                text: "\uBB34\uACF5\uC744 \uC775\uD78C\uB2E4. (2\uC2DC\uAC04 \uC18C\uC694)",
                nextSceneId: "cave_learn_success",
                consequences: [
                  {
                    type: "skill_learn",
                    param: "tianshan_liuyang",
                    value: true,
                    description: "\uCC9C\uC0B0\uC721\uC591\uC7A5 \uC2B5\uB4DD"
                  },
                  {
                    type: "stat_change",
                    param: "innerPower",
                    value: 10,
                    description: "\uB0B4\uACF5 +10"
                  }
                ]
              },
              {
                id: "choice_take",
                text: "\uBE44\uAE09\uC744 \uAC00\uC838\uAC04\uB2E4. (\uB098\uC911\uC5D0 \uBC30\uC6B4\uB2E4)",
                nextSceneId: "cave_take_manual",
                consequences: [
                  {
                    type: "item_gain",
                    param: "tianshan_manual",
                    value: 1
                  }
                ]
              }
            ]
          }
        }
      ],
      outcomes: [
        {
          outcomeId: "outcome_learned",
          triggerCondition: "choice_learn",
          consequences: [
            {
              type: "flag_set",
              param: "tianshan_master",
              value: true
            }
          ],
          description: "\uCC9C\uC0B0\uC721\uC591\uC7A5 \uB9C8\uC2A4\uD130"
        }
      ]
    };
    this.registerTemplate(martialOpportunity);
  }
  /**
   * 템플릿 등록
   */
  registerTemplate(template) {
    const id = template.id || template.templateId || `template_${Date.now()}`;
    this.templates.set(id, template);
  }
  /**
   * 상황 트리거 체크
   * @returns 발동 가능한 상황 템플릿 ID 배열
   */
  checkTriggers(player, currentLocation, timeOfDay, availableNPCs) {
    const triggeredSituations = [];
    for (const [templateId, template] of this.templates) {
      if (this.completedSituations.has(templateId) && !template.canRepeat) {
        continue;
      }
      if (this.activeInstances.some((inst) => inst.templateId === templateId)) {
        continue;
      }
      if (!template.prerequisites || this.checkPrerequisites(template.prerequisites, player, currentLocation, timeOfDay)) {
        if (this.canAssignParticipants(template, player, availableNPCs)) {
          triggeredSituations.push(templateId);
        }
      }
    }
    return triggeredSituations.sort((a, b) => {
      const templateA = this.templates.get(a);
      const templateB = this.templates.get(b);
      return templateB.priority - templateA.priority;
    });
  }
  /**
   * Prerequisites 체크
   */
  checkPrerequisites(prerequisites, player, currentLocation, timeOfDay) {
    for (const prereq of prerequisites) {
      if (!this.evaluatePrerequisite(prereq, player, currentLocation, timeOfDay)) {
        return false;
      }
    }
    return true;
  }
  /**
   * 개별 Prerequisite 평가
   */
  evaluatePrerequisite(prereq, player, currentLocation, timeOfDay) {
    switch (prereq.type) {
      case "location":
        return currentLocation === prereq.param;
      case "time":
        if (prereq.param === "timeOfDay") {
          return timeOfDay === prereq.value;
        }
        return false;
      case "stat":
        const statValue = player.stats[prereq.param];
        return this.compareValues(statValue, prereq.operator, prereq.value);
      case "tendency":
        if (prereq.param === "tendency.value") {
          return this.compareValues(player.tendency.value, prereq.operator, prereq.value);
        }
        return false;
      case "item":
        return player.inventory.some((item) => item.id === prereq.param);
      case "flag":
        return player.flags.has(prereq.param);
      case "npc":
        return true;
      // TODO: 구현 필요
      default:
        return false;
    }
  }
  /**
   * 참여자 할당 가능 여부
   */
  canAssignParticipants(template, player, availableNPCs) {
    if (!template.roles)
      return true;
    for (const role of template.roles) {
      if (role.roleId === "hero") {
        continue;
      }
      const suitableNPC = this.findSuitableNPC(role, availableNPCs, player);
      if (!suitableNPC) {
        return false;
      }
    }
    return true;
  }
  /**
   * 적합한 NPC 찾기
   */
  findSuitableNPC(role, availableNPCs, player) {
    if (!role.criteria) {
      return availableNPCs[0] || null;
    }
    for (const npc of availableNPCs) {
      if (role.criteria.npcTags) {
        const hasAllTags = role.criteria.npcTags.every((tag) => npc.tags.includes(tag));
        if (!hasAllTags)
          continue;
      }
      if (role.criteria.state && npc.state !== role.criteria.state) {
        continue;
      }
      if (role.criteria.relationship !== void 0) {
        const relationship = player.relationships.get(npc.id) || npc.initialRelationship;
        if (relationship < role.criteria.relationship) {
          continue;
        }
      }
      return npc;
    }
    return null;
  }
  /**
   * 상황 시작
   */
  startSituation(templateId, player, availableNPCs) {
    const template = this.templates.get(templateId);
    if (!template)
      return null;
    const participants = /* @__PURE__ */ new Map();
    if (template.roles) {
      for (const role of template.roles) {
        if (role.roleId === "hero") {
          participants.set("hero", "player");
        } else {
          const npc = this.findSuitableNPC(role, availableNPCs, player);
          if (npc) {
            participants.set(role.roleId, npc.id);
          }
        }
      }
    }
    const instance = {
      templateId,
      instanceId: `${templateId}_${Date.now()}`,
      participants,
      currentStage: 1,
      isActive: true,
      startedAt: /* @__PURE__ */ new Date(),
      choiceHistory: []
    };
    this.activeInstances.push(instance);
    return instance;
  }
  /**
   * 상황 종료
   */
  completeSituation(instanceId) {
    const index = this.activeInstances.findIndex((inst) => inst.instanceId === instanceId);
    if (index !== -1) {
      const instance = this.activeInstances[index];
      this.completedSituations.add(instance.templateId);
      this.activeInstances.splice(index, 1);
    }
  }
  /**
   * 값 비교 헬퍼
   */
  compareValues(actual, operator, expected) {
    switch (operator) {
      case ">":
        return actual > expected;
      case "<":
        return actual < expected;
      case ">=":
        return actual >= expected;
      case "<=":
        return actual <= expected;
      case "==":
        return actual === expected;
      case "!=":
        return actual !== expected;
      default:
        return false;
    }
  }
  /**
   * 활성 상황 가져오기
   */
  getActiveInstances() {
    return this.activeInstances;
  }
  /**
   * 템플릿 가져오기
   */
  getTemplate(templateId) {
    return this.templates.get(templateId);
  }
  static \u0275fac = function WuxiaSituationService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _WuxiaSituationService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _WuxiaSituationService, factory: _WuxiaSituationService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(WuxiaSituationService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [], null);
})();

// src/app/modules/novel/services/wuxia-battle.adapter.ts
var WuxiaBattleAdapter = class {
  /**
   * WuxiaRPGCharacter → BattleCharacter 변환
   * @param equipmentService - 장비 서비스 (옵션)
   */
  static convertPlayerToBattle(wuxiaChar, equipmentService) {
    let equipBonus = {
      attack: 0,
      defense: 0,
      hp: 0,
      mp: 0,
      critChance: 0,
      evasion: 0
    };
    if (equipmentService) {
      equipBonus = equipmentService.calculateEquipmentBonusWuxia(wuxiaChar);
    }
    const battleChar = {
      id: "player",
      name: wuxiaChar.name,
      type: "player",
      maxHp: wuxiaChar.maxHealth + equipBonus.hp,
      // 장비 보너스 HP 추가
      currentHp: wuxiaChar.health,
      maxMp: wuxiaChar.stats.innerPower * 10 + equipBonus.mp,
      currentMp: wuxiaChar.stats.innerPower * 10 + equipBonus.mp,
      attack: this.calculateAttack(wuxiaChar) + equipBonus.attack,
      defense: this.calculateDefense(wuxiaChar) + equipBonus.defense,
      agility: wuxiaChar.stats.dexterity,
      skills: this.convertSkills(wuxiaChar),
      items: this.convertItems(wuxiaChar)
    };
    return battleChar;
  }
  /**
   * WuxiaNPC → BattleCharacter 변환
   */
  static convertNPCToBattle(npc) {
    const level = 5;
    const baseHp = 100 + level * 20;
    const baseMp = 50 + level * 10;
    const battleChar = {
      id: npc.id,
      name: npc.name,
      type: "enemy",
      maxHp: baseHp,
      currentHp: baseHp,
      maxMp: baseMp,
      currentMp: baseMp,
      attack: 15 + level * 3,
      defense: 10 + level * 2,
      agility: 12 + level,
      skills: this.generateNPCSkills(npc),
      items: []
    };
    return battleChar;
  }
  /**
   * 공격력 계산
   */
  static calculateAttack(char) {
    return Math.floor(char.stats.strength * 0.6 + char.stats.innerPower * 0.4);
  }
  /**
   * 방어력 계산
   */
  static calculateDefense(char) {
    return Math.floor(char.stats.strength * 0.4 + char.stats.innerPower * 0.3 + char.stats.dexterity * 0.3);
  }
  /**
   * 스킬 변환
   */
  static convertSkills(char) {
    const skills = [];
    if (char.sect === "huashan") {
      skills.push({
        id: "huashan_basic_thrust",
        name: "\uD654\uC0B0\uAC80\uBC95: \uAE30\uBCF8\uC790\uC138",
        description: "\uD654\uC0B0\uD30C\uC758 \uAE30\uBCF8 \uCC0C\uB974\uAE30 \uAC80\uBC95",
        mpCost: 10,
        damage: 25,
        type: "attack"
      });
      skills.push({
        id: "huashan_triple_strike",
        name: "\uD654\uC0B0\uAC80\uBC95: \uC0BC\uC5F0\uACA9",
        description: "\uC138 \uBC88 \uC5F0\uC18D \uBCA0\uAE30",
        mpCost: 20,
        damage: 40,
        type: "attack"
      });
    }
    skills.push({
      id: "qi_meditation",
      name: "\uB0B4\uACF5 \uC6B4\uC6A9",
      description: "\uB0B4\uACF5\uC744 \uC6B4\uC6A9\uD558\uC5EC \uCCB4\uB825\uC744 \uD68C\uBCF5",
      mpCost: 15,
      damage: 0,
      type: "heal"
    });
    skills.push({
      id: "defensive_stance",
      name: "\uBC29\uC5B4 \uC790\uC138",
      description: "\uB2E4\uC74C \uACF5\uACA9\uC758 \uD53C\uD574\uB97C \uAC10\uC18C",
      mpCost: 5,
      damage: 0,
      type: "defense"
    });
    return skills;
  }
  /**
   * 아이템 변환
   */
  static convertItems(char) {
    const battleItems = [];
    for (const item of char.inventory) {
      if (item.type === "consumable") {
        battleItems.push({
          id: item.id,
          name: item.name,
          description: item.description || "",
          type: "consumable",
          effect: 50
          // 기본 회복량
        });
      }
    }
    return battleItems;
  }
  /**
   * NPC 스킬 생성
   */
  static generateNPCSkills(npc) {
    const skills = [];
    skills.push({
      id: "basic_attack",
      name: "\uC77C\uBC18 \uACF5\uACA9",
      description: "\uAE30\uBCF8 \uACF5\uACA9",
      mpCost: 0,
      damage: 15,
      type: "attack"
    });
    if (npc.tags?.includes("boss")) {
      skills.push({
        id: "special_attack",
        name: "\uD544\uC0B4\uAE30",
        description: `${npc.name}\uC758 \uAC15\uB825\uD55C \uC77C\uACA9`,
        mpCost: 30,
        damage: 50,
        type: "attack"
      });
    }
    return skills;
  }
  /**
   * 전투 결과를 무협 캐릭터에 반영
   */
  static applyBattleResult(wuxiaChar, battleChar, victory) {
    wuxiaChar.health = Math.max(0, battleChar.currentHp);
    if (victory) {
      wuxiaChar.stats.strength += 1;
      wuxiaChar.stats.innerPower += 1;
    }
    if (!victory && wuxiaChar.health <= 0) {
      wuxiaChar.injuries.push({
        type: "internal_injury",
        severity: 5,
        duration: 3,
        description: "\uC804\uD22C \uC911 \uC785\uC740 \uB0B4\uC0C1",
        penalties: {
          stats: {
            strength: -5,
            innerPower: -3
          }
        }
      });
    }
  }
};

// src/app/modules/novel/data/chapter1-scenes.data.ts
var CHAPTER_1_SCENES = [
  // ===== 기존 장면들 =====
  {
    id: "scene_start",
    title: "\uD63C\uD0C1\uD55C \uAC15\uD638",
    type: "narrative",
    autoProgress: true,
    autoDelay: 3e3,
    narrativeText: [
      "\uD654\uC0B0\uD30C\uC758 \uB9C9\uB0B4 \uC81C\uC790\uC778 \uB2F9\uC2E0\uC740 \uC2EC\uAC01\uD55C \uC18C\uC2DD\uC744 \uB4E4\uC5C8\uB2E4.",
      "\uAC00\uC7A5 \uC544\uB07C\uB358 \uC0AC\uD615 `\uCCAD\uC6B4`\uC774 \uD751\uD48D\uCC44\uB85C \uB5A0\uB09C \uB4A4 \uC18C\uC2DD\uC774 \uB04A\uACBC\uB2E4\uB294 \uAC83\uC774\uB2E4.",
      "",
      "\uC7A5\uBB38\uC778\uAED8\uC11C\uB294 \uB2F9\uC2E0\uC744 \uBD80\uB974\uC168\uB2E4.",
      '"\uB124\uAC00 \uAC00\uAC70\uB77C. \uC0AC\uD615\uC744 \uCC3E\uC544\uC624\uB108\uB77C. \uADF8\uB7EC\uB098... \uBB34\uB9AC\uD558\uC9C0\uB294 \uB9D0\uAC70\uB77C."'
    ],
    choices: [
      {
        id: "choice_continue_journey",
        text: "\uB099\uC591\uC73C\uB85C \uCD9C\uBC1C\uD55C\uB2E4.",
        nextSceneId: "scene_road_to_luoyang"
      }
    ],
    tags: ["chapter_1", "main_quest", "intro"],
    location: "huashan_sect",
    timeOfDay: "morning"
  },
  {
    id: "scene_road_to_luoyang",
    title: "\uB099\uC591\uC73C\uB85C \uAC00\uB294 \uAE38",
    type: "decision",
    narrativeText: [
      "\uB099\uC591\uC73C\uB85C \uAC00\uB294 \uAE38\uBAA9, \uB2F9\uC2E0\uC740 \uD55C \uC8FC\uB9C9 \uC55E\uC5D0 \uBA48\uCDB0 \uC130\uB2E4.",
      "\uC774\uACF3\uC5D0\uC11C \uC815\uBCF4\uB97C \uC5BB\uC744 \uC218\uB3C4 \uC788\uACE0, \uC11C\uB458\uB7EC \uD751\uD48D\uCC44\uB85C \uD5A5\uD560 \uC218\uB3C4 \uC788\uB2E4."
    ],
    choices: [
      {
        id: "choice_enter_inn",
        text: "\uC8FC\uB9C9\uC5D0 \uB4E4\uC5B4\uAC00 \uC815\uBCF4\uB97C \uC5BB\uB294\uB2E4.",
        importance: "major",
        nextSceneId: "scene_inn_inside"
      },
      {
        id: "choice_continue",
        text: "\uC11C\uB450\uB978\uB2E4. \uACE7\uC7A5 \uD751\uD48D\uCC44\uB85C \uD5A5\uD55C\uB2E4.",
        importance: "major",
        nextSceneId: "scene_forest_path",
        conditions: [
          {
            type: "stat",
            param: "dexterity",
            operator: ">=",
            value: 15,
            displayText: "[\uBBFC\uCCA9 15 \uC774\uC0C1]"
          }
        ]
      },
      {
        id: "choice_meditate",
        text: "\uADFC\uCC98 \uBC14\uC704\uC5D0 \uC549\uC544 \uB0B4\uACF5\uC744 \uC6B4\uC6A9\uD55C\uB2E4.",
        importance: "minor",
        nextSceneId: "scene_meditation",
        consequences: [
          {
            type: "stat_change",
            param: "innerPower",
            value: 2,
            description: "\uB0B4\uACF5 +2"
          }
        ]
      }
    ],
    tags: ["chapter_1", "main_quest"],
    location: "road_to_luoyang",
    timeOfDay: "afternoon"
  },
  // ===== 주막 내부 =====
  {
    id: "scene_inn_inside",
    title: "\uC740\uC740\uD55C \uC220 \uB0C4\uC0C8",
    narrativeText: [
      "\uC8FC\uB9C9 \uC548\uC740 \uC2DC\uB04C\uBC85\uC801\uD558\uB2E4.",
      "\uD55C\uCABD \uAD6C\uC11D\uC5D0\uC11C \uC218\uC0C1\uD55C \uC0AC\uB0B4\uB4E4\uC774 \uC6C5\uC131\uAC70\uB9AC\uACE0 \uC788\uB2E4.",
      '\uC8FC\uBAA8\uAC00 \uB2E4\uAC00\uC640 \uBB3B\uB294\uB2E4. "\uBB34\uC5C7\uC744 \uB4DC\uC2DC\uACA0\uC2B5\uB2C8\uAE4C, \uC18C\uD611?"'
    ],
    choices: [
      {
        id: "choice_order_wine",
        text: "\uC220 \uD55C \uC794\uC744 \uC2DC\uD0A8\uB2E4. (\uAE08\uD654 5)",
        nextSceneId: "scene_inn_wine",
        consequences: [
          {
            type: "stat_change",
            param: "gold",
            value: -5,
            description: "\uAE08\uD654 -5"
          }
        ]
      },
      {
        id: "choice_ask_info",
        text: "[\uD1B5\uCC30 20 \uC774\uC0C1] \uC8FC\uBAA8\uC5D0\uAC8C \uD751\uD48D\uCC44\uC5D0 \uB300\uD574 \uC740\uBC00\uD788 \uBB3C\uC5B4\uBCF8\uB2E4.",
        nextSceneId: "scene_inn_information",
        conditions: [
          {
            type: "stat",
            param: "insight",
            operator: ">=",
            value: 20,
            displayText: "[\uD1B5\uCC30 20 \uC774\uC0C1]"
          }
        ]
      },
      {
        id: "choice_approach_thugs",
        text: "\uC218\uC0C1\uD55C \uC0AC\uB0B4\uB4E4\uC5D0\uAC8C \uB2E4\uAC00\uAC04\uB2E4.",
        nextSceneId: "scene_inn_confrontation",
        judgment: {
          stat: "insight",
          difficulty: 25,
          successSceneId: "scene_inn_info_success",
          failureSceneId: "scene_inn_fight"
        }
      }
    ],
    location: "inn",
    timeOfDay: "afternoon"
  },
  // ===== 주막 - 술 =====
  {
    id: "scene_inn_wine",
    title: "\uD0C1\uC8FC \uD55C \uC794",
    narrativeText: [
      "\uC8FC\uBAA8\uAC00 \uD0C1\uC8FC\uB97C \uB530\uB77C\uC900\uB2E4.",
      "\uC794\uC744 \uAE30\uC6B8\uC774\uBA70 \uC8FC\uBCC0\uC744 \uC0B4\uD540\uB2E4.",
      "\uD55C\uCABD\uC5D0\uC11C \uB4E4\uB824\uC624\uB294 \uB300\uD654\uAC00 \uADD3\uAC00\uB97C \uC2A4\uCE5C\uB2E4.",
      "",
      '"...\uD751\uD48D\uCC44 \uB188\uB4E4\uC774 \uC694\uC998 \uC218\uC0C1\uD558\uB2E4\uB354\uAD70..."',
      '"\uC27F! \uBAA9\uC228\uC774 \uC544\uAE5D\uC9C0 \uC54A\uB098!"'
    ],
    choices: [
      {
        id: "choice_listen_more",
        text: "[\uD1B5\uCC30 25 \uC774\uC0C1] \uB300\uD654\uC5D0 \uC9D1\uC911\uD55C\uB2E4.",
        nextSceneId: "scene_overhear_info",
        conditions: [
          {
            type: "stat",
            param: "insight",
            operator: ">=",
            value: 25,
            displayText: "[\uD1B5\uCC30 25 \uC774\uC0C1]"
          }
        ]
      },
      {
        id: "choice_leave_inn",
        text: "\uC220\uAC12\uC744 \uCE58\uB974\uACE0 \uC8FC\uB9C9\uC744 \uB098\uC120\uB2E4.",
        nextSceneId: "scene_forest_path"
      }
    ],
    location: "inn",
    timeOfDay: "afternoon"
  },
  // ===== 주막 - 정보 성공 =====
  {
    id: "scene_inn_information",
    title: "\uC8FC\uBAA8\uC758 \uC815\uBCF4",
    type: "narrative",
    autoProgress: true,
    autoDelay: 4e3,
    narrativeText: [
      "\uB2F9\uC2E0\uC740 \uC740\uC790 \uBA87 \uB0E5\uC744 \uC2AC\uCA4D \uC8FC\uBAA8\uC758 \uC190\uC5D0 \uC950\uC5EC\uC900\uB2E4.",
      "\uC8FC\uBAA8\uAC00 \uB208\uCE58\uB97C \uC0B4\uD53C\uB354\uB2C8 \uB0AE\uC740 \uBAA9\uC18C\uB9AC\uB85C \uB9D0\uD55C\uB2E4.",
      "",
      '"\uD751\uD48D\uCC44\uB77C... \uC704\uD5D8\uD55C \uACF3\uC774\uC624. \uCD5C\uADFC \uB4E4\uC5B4 \uB354\uC6B1 \uD749\uC545\uD574\uC84C\uB2E4\uACE0 \uD558\uB354\uAD70\uC694."',
      '"\uD654\uC0B0\uD30C \uC81C\uC790\uB77C\uB294 \uBD84\uC774 \uC77C\uC8FC\uC77C \uC804\uCBE4 \uC774 \uAE38\uC744 \uC9C0\uB098\uAC14\uC18C."',
      '"\uD478\uB978 \uB3C4\uBCF5\uC744 \uC785\uC740... \uB208\uBE5B\uC774 \uAC15\uC778\uD55C \uCCAD\uB144\uC774\uC5C8\uC9C0\uC694."',
      "",
      "\uCCAD\uC6B4 \uC0AC\uD615\uC774 \uBD84\uBA85\uD558\uB2E4!",
      "",
      '"\uC0B0\uC801\uB4E4\uC774 \uBC24\uC5D0 \uD65C\uB3D9\uD55C\uB2E4\uACE0 \uD558\uB2C8, \uC870\uC2EC\uD558\uC2DC\uC624."'
    ],
    choices: [
      {
        id: "choice_thank_and_leave",
        text: "\uAC10\uC0AC\uB97C \uD45C\uD558\uACE0 \uC8FC\uB9C9\uC744 \uB098\uC120\uB2E4.",
        nextSceneId: "scene_forest_path",
        consequences: [
          {
            type: "flag_set",
            param: "got_inn_information",
            value: true,
            description: "\uC8FC\uBAA8\uB85C\uBD80\uD130 \uC815\uBCF4 \uD68D\uB4DD"
          }
        ]
      }
    ],
    location: "inn",
    timeOfDay: "afternoon"
  },
  // ===== 주막 - 엿듣기 =====
  {
    id: "scene_overhear_info",
    title: "\uC5FF\uB4E4\uC740 \uB300\uD654",
    narrativeText: [
      "\uADC0\uB97C \uAE30\uC6B8\uC774\uC790 \uB300\uD654\uAC00 \uB354 \uC120\uBA85\uD558\uAC8C \uB4E4\uB9B0\uB2E4.",
      "",
      '"\uD751\uD48D\uCC44 \uB188\uB4E4\uC774 \uCD5C\uADFC \uD654\uC0B0\uD30C \uC81C\uC790\uB97C \uC7A1\uC558\uB2E4\uB358\uB370..."',
      '"\uC27F! \uADF8\uB7F0 \uB9D0 \uD568\uBD80\uB85C \uD558\uB294 \uAC70 \uC544\uB0D0! \uB4E4\uD0A4\uBA74 \uBAA9\uC774 \uB2EC\uC544\uB09C\uB2E4\uACE0!"',
      "",
      "\uC2EC\uC7A5\uC774 \uCFF5\uCF85\uAC70\uB9B0\uB2E4. \uC0AC\uD615\uC774 \uC704\uD5D8\uC5D0 \uCC98\uD55C \uAC83\uC778\uAC00!",
      "",
      '"\uC800\uB141\uC774 \uB418\uBA74 \uC0B0\uC801\uB4E4\uC774 \uC21C\uCC30\uC744 \uB3C8\uB2E4\uB354\uAD70. \uC870\uC2EC\uD574\uC57C \uD574."'
    ],
    choices: [
      {
        id: "choice_rush_to_stronghold",
        text: "\uB2F9\uC7A5 \uD751\uD48D\uCC44\uB85C \uD5A5\uD55C\uB2E4!",
        nextSceneId: "scene_forest_path_urgent",
        consequences: [
          {
            type: "flag_set",
            param: "knows_seongun_captured",
            value: true
          },
          {
            type: "tendency_change",
            param: "tendency",
            value: -5,
            description: "\uC815\uC758\uB85C\uC6B4 \uC120\uD0DD (\uC131\uD5A5 -5)"
          }
        ]
      },
      {
        id: "choice_plan_carefully",
        text: "\uC2E0\uC911\uD558\uAC8C \uACC4\uD68D\uC744 \uC138\uC6B4\uB2E4.",
        nextSceneId: "scene_planning",
        consequences: [
          {
            type: "flag_set",
            param: "knows_seongun_captured",
            value: true
          }
        ]
      }
    ],
    location: "inn",
    timeOfDay: "afternoon"
  },
  // ===== 숲길 =====
  {
    id: "scene_forest_path",
    title: "\uC5B4\uB450\uC6B4 \uC232",
    type: "narrative",
    autoProgress: true,
    autoDelay: 3e3,
    narrativeText: [
      "\uC8FC\uB9C9\uC744 \uB098\uC11C\uC790 \uC6B8\uCC3D\uD55C \uC232\uC774 \uD3BC\uCCD0\uC9C4\uB2E4.",
      "\uD751\uD48D\uCC44\uB85C \uAC00\uB294 \uAE38\uC740 \uD5D8\uD558\uACE0 \uC5B4\uB461\uB2E4.",
      "",
      "\uC7A0\uC2DC \uAC77\uC790, \uAC08\uB9BC\uAE38\uC774 \uB098\uD0C0\uB09C\uB2E4."
    ],
    choices: [
      {
        id: "choice_continue_forest",
        text: "\uACC4\uC18D \uC804\uC9C4\uD55C\uB2E4.",
        nextSceneId: "scene_forest_fork"
      }
    ],
    location: "dark_forest",
    timeOfDay: "evening"
  },
  {
    id: "scene_forest_fork",
    title: "\uAC08\uB9BC\uAE38",
    type: "decision",
    narrativeText: [
      "\uC67C\uCABD\uC740 \uD5D8\uD55C \uC0B0\uAE38, \uC624\uB978\uCABD\uC740 \uD3C9\uD0C4\uD55C \uAE38\uC774\uB2E4.",
      "\uC5B4\uB290 \uAE38\uB85C \uAC08 \uAC83\uC778\uAC00?"
    ],
    choices: [
      {
        id: "choice_mountain_path",
        text: "[\uBBFC\uCCA9 30 \uC774\uC0C1] \uD5D8\uD55C \uC0B0\uAE38\uB85C \uAC04\uB2E4. (\uC9C0\uB984\uAE38)",
        importance: "major",
        nextSceneId: "scene_mountain_path",
        judgment: {
          stat: "dexterity",
          difficulty: 30,
          successSceneId: "scene_mountain_success",
          failureSceneId: "scene_mountain_fall"
        }
      },
      {
        id: "choice_flat_road",
        text: "\uD3C9\uD0C4\uD55C \uAE38\uB85C \uAC04\uB2E4.",
        nextSceneId: "scene_flat_road"
      },
      {
        id: "choice_scout",
        text: "[\uD1B5\uCC30 28 \uC774\uC0C1] \uC8FC\uBCC0\uC744 \uC0B4\uD540\uB2E4.",
        nextSceneId: "scene_hidden_path",
        conditions: [
          {
            type: "stat",
            param: "insight",
            operator: ">=",
            value: 28,
            displayText: "[\uD1B5\uCC30 28 \uC774\uC0C1]"
          }
        ]
      }
    ],
    location: "dark_forest",
    timeOfDay: "evening"
  },
  // ===== 산길 성공 =====
  {
    id: "scene_mountain_success",
    title: "\uB0A0\uB835\uD55C \uACBD\uACF5",
    type: "narrative",
    autoProgress: true,
    autoDelay: 3500,
    narrativeText: [
      "[\uD310\uC815 \uC131\uACF5!]",
      "",
      "\uB2F9\uC2E0\uC740 \uAC00\uBCBC\uC6B4 \uACBD\uACF5\uC73C\uB85C \uD5D8\uD55C \uBC14\uC704\uB4E4\uC744 \uB6F0\uC5B4\uB118\uB294\uB2E4.",
      "\uC228\uACB0\uC744 \uC870\uC808\uD558\uBA70 \uC704\uD5D8\uD55C \uC808\uBCBD\uC744 \uC9C0\uB098\uCE5C\uB2E4.",
      "",
      "\uC21C\uC2DD\uAC04\uC5D0 \uD3C9\uC9C0\uB85C \uB0B4\uB824\uC120\uB2E4.",
      "\uBE60\uB978 \uAE38\uC744 \uD0DD\uD55C \uB355\uC5D0 \uC2DC\uAC04\uC744 \uC544\uAF08\uB2E4!",
      "",
      "\uC800 \uBA40\uB9AC \uD751\uD48D\uCC44\uC758 \uB9DD\uB8E8\uAC00 \uBCF4\uC778\uB2E4."
    ],
    choices: [
      {
        id: "choice_approach_stronghold",
        text: "\uD751\uD48D\uCC44\uC5D0 \uC811\uADFC\uD55C\uB2E4.",
        nextSceneId: "scene_stronghold_approach"
      }
    ],
    location: "mountain_path",
    timeOfDay: "evening"
  },
  // ===== 산길 실패 =====
  {
    id: "scene_mountain_fall",
    title: "\uC2E4\uC871",
    type: "narrative",
    autoProgress: true,
    autoDelay: 3500,
    narrativeText: [
      "[\uD310\uC815 \uC2E4\uD328!]",
      "",
      "\uBC1C\uC774 \uBBF8\uB044\uB7EC\uC9C4\uB2E4!",
      '"\uD06D!"',
      "",
      "\uB2F9\uC2E0\uC740 \uAC00\uD30C\uB978 \uACBD\uC0AC\uBA74\uC744 \uAD74\uB7EC\uB5A8\uC5B4\uC9C4\uB2E4.",
      "\uB098\uBB34\uBFCC\uB9AC\uB97C \uBD99\uC7A1\uC544 \uAC04\uC2E0\uD788 \uBA48\uCD98\uB2E4.",
      "",
      "\uC628\uBAB8\uC774 \uC464\uC2E0\uB2E4. \uD314\uC5D0 \uCC30\uACFC\uC0C1\uC744 \uC785\uC5C8\uB2E4.",
      "",
      "[\uC0DD\uBA85\uB825 -15]",
      "[\uBD80\uC0C1: \uACBD\uBBF8\uD55C \uD0C0\uBC15\uC0C1 \uD68D\uB4DD]"
    ],
    choices: [
      {
        id: "choice_continue_injured",
        text: "\uC774\uB97C \uC545\uBB3C\uACE0 \uC77C\uC5B4\uC120\uB2E4.",
        nextSceneId: "scene_flat_road",
        consequences: [
          {
            type: "health_change",
            param: "health",
            value: -15,
            description: "\uC0DD\uBA85\uB825 -15"
          },
          {
            type: "injury_add",
            param: "injury",
            value: {
              type: "minor_wound",
              severity: 3,
              duration: 20,
              description: "\uACBD\uBBF8\uD55C \uD0C0\uBC15\uC0C1",
              penalties: {
                stats: { dexterity: -2 }
              }
            },
            description: "\uD0C0\uBC15\uC0C1\uC73C\uB85C \uBBFC\uCCA9 -2"
          }
        ]
      }
    ],
    location: "mountain_path",
    timeOfDay: "evening"
  },
  // ===== 평탄한 길 =====
  {
    id: "scene_flat_road",
    title: "\uAE34 \uC6B0\uD68C\uB85C",
    narrativeText: [
      "\uD3C9\uD0C4\uD55C \uAE38\uC744 \uB530\uB77C \uD55C\uCC38\uC744 \uAC77\uB294\uB2E4.",
      "\uC548\uC804\uD558\uC9C0\uB9CC \uC2DC\uAC04\uC774 \uB9CE\uC774 \uAC78\uB9B0\uB2E4.",
      "",
      "\uD574\uAC00 \uC9C0\uACE0 \uC5B4\uB460\uC774 \uAE54\uB9B0\uB2E4.",
      "\uC800 \uBA40\uB9AC\uC11C \uD683\uBD88 \uBE5B\uC774 \uBCF4\uC778\uB2E4.",
      "",
      "\uD751\uD48D\uCC44\uAC00 \uAC00\uAE4C\uC6CC\uC84C\uB2E4."
    ],
    choices: [
      {
        id: "choice_approach_night",
        text: "\uBC24\uC5D0 \uC811\uADFC\uD55C\uB2E4.",
        nextSceneId: "scene_stronghold_night"
      },
      {
        id: "choice_rest",
        text: "\uBA3C\uC800 \uC26C\uC5C8\uB2E4\uAC00 \uAC04\uB2E4.",
        nextSceneId: "scene_camp_rest",
        consequences: [
          {
            type: "health_change",
            param: "health",
            value: 10,
            description: "\uC0DD\uBA85\uB825 +10 \uD68C\uBCF5"
          }
        ]
      }
    ],
    location: "flat_road",
    timeOfDay: "night"
  },
  // ===== 숨겨진 길 발견 =====
  {
    id: "scene_hidden_path",
    title: "\uC228\uACA8\uC9C4 \uC9C0\uB984\uAE38",
    narrativeText: [
      "[\uD1B5\uCC30\uB825 \uBC1C\uD718!]",
      "",
      "\uC8FC\uBCC0\uC744 \uC8FC\uC758\uAE4A\uAC8C \uC0B4\uD53C\uC790, \uC228\uACA8\uC9C4 \uC624\uC194\uAE38\uC774 \uB208\uC5D0 \uB4E4\uC5B4\uC628\uB2E4.",
      "\uD480\uC232\uC5D0 \uAC00\uB824\uC9C4 \uC881\uC740 \uAE38\uC774\uB2E4.",
      "",
      "\uC774 \uAE38\uC740... \uC0B0\uC801\uB4E4\uC774 \uC0AC\uC6A9\uD558\uB294 \uBE44\uBC00 \uD1B5\uB85C\uC778 \uAC83 \uAC19\uB2E4!",
      "\uBC1C\uC790\uAD6D\uC774 \uC5EC\uB7FF \uBCF4\uC778\uB2E4.",
      "",
      "\uC774 \uAE38\uC744 \uB530\uB77C\uAC00\uBA74 \uD751\uD48D\uCC44 \uB4A4\uD3B8\uC73C\uB85C \uC811\uADFC\uD560 \uC218 \uC788\uC744 \uAC83\uC774\uB2E4."
    ],
    choices: [
      {
        id: "choice_use_secret_path",
        text: "\uBE44\uBC00 \uD1B5\uB85C\uB97C \uC774\uC6A9\uD55C\uB2E4.",
        nextSceneId: "scene_secret_entrance",
        consequences: [
          {
            type: "flag_set",
            param: "found_secret_path",
            value: true
          }
        ]
      },
      {
        id: "choice_ignore",
        text: "\uC758\uC2EC\uC2A4\uB7FD\uB2E4. \uC815\uBA74\uC73C\uB85C \uAC04\uB2E4.",
        nextSceneId: "scene_stronghold_approach"
      }
    ],
    location: "dark_forest",
    timeOfDay: "evening"
  },
  // ===== 흑풍채 접근 =====
  {
    id: "scene_stronghold_approach",
    title: "\uD751\uD48D\uCC44 \uC785\uAD6C",
    narrativeText: [
      "\uD5D8\uC900\uD55C \uC0B0\uAE38 \uB05D\uC5D0 \uD751\uD48D\uCC44\uAC00 \uBAA8\uC2B5\uC744 \uB4DC\uB7EC\uB0B8\uB2E4.",
      "\uAC70\uB300\uD55C \uBAA9\uCC45\uC774 \uB458\uB7EC\uC2F8\uACE0 \uC788\uACE0, \uC785\uAD6C\uC5D0\uB294 \uBB34\uC7A5\uD55C \uC0B0\uC801\uB4E4\uC774 \uBCF4\uC778\uB2E4.",
      "",
      "\uD55C \uC0B0\uC801\uC774 \uB2F9\uC2E0\uC744 \uBC1C\uACAC\uD558\uACE0 \uC678\uCE5C\uB2E4.",
      '"\uB204\uAD6C\uB0D0! \uC123\uBD88\uB9AC \uB2E4\uAC00\uC624\uC9C0 \uB9C8\uB77C!"',
      "",
      "\uAC80\uC5D0 \uC190\uC744 \uC5B9\uC740 \uCC44 \uACBD\uACC4\uD558\uACE0 \uC788\uB2E4."
    ],
    choices: [
      {
        id: "choice_announce_huashan",
        text: '[\uD654\uC0B0\uD30C \uC81C\uC790] "\uD654\uC0B0\uD30C \uC81C\uC790\uB2E4. \uC0AC\uD615\uC744 \uCC3E\uC73C\uB7EC \uC654\uB2E4."',
        nextSceneId: "scene_negotiate_huashan",
        conditions: [
          {
            type: "sect",
            param: "sect",
            operator: "==",
            value: "huashan",
            displayText: "[\uD654\uC0B0\uD30C \uC81C\uC790\uB9CC]"
          }
        ]
      },
      {
        id: "choice_bribe",
        text: "[\uAE08\uD654 50 \uC774\uC0C1] \uC740\uC790\uB97C \uAC74\uB128\uB2E4.",
        nextSceneId: "scene_bribe_guards",
        conditions: [
          {
            type: "stat",
            param: "gold",
            operator: ">=",
            value: 50,
            displayText: "[\uAE08\uD654 50 \uC774\uC0C1]"
          }
        ]
      },
      {
        id: "choice_fight_guards",
        text: "\u2694\uFE0F \uC815\uBA74 \uB3CC\uD30C! \uAC80\uC744 \uBF51\uB294\uB2E4!",
        nextSceneId: "scene_battle_guards",
        consequences: [
          {
            type: "tendency_change",
            param: "tendency",
            value: 5,
            description: "\uD3ED\uB825\uC801 \uC120\uD0DD (\uC131\uD5A5 +5)"
          },
          {
            type: "battle_start",
            param: "battle",
            value: {
              enemies: ["bandit_guard_1", "bandit_guard_2"],
              onVictory: "scene_guards_defeated",
              onDefeat: "scene_captured"
            },
            description: "\uC0B0\uC801 \uACBD\uBE44\uBCD1\uB4E4\uACFC \uC804\uD22C \uC2DC\uC791"
          }
        ]
      },
      {
        id: "choice_sneak",
        text: "[\uBBFC\uCCA9 35 \uC774\uC0C1] \uACBD\uACF5\uC73C\uB85C \uB2F4\uC744 \uB118\uB294\uB2E4.",
        judgment: {
          stat: "dexterity",
          difficulty: 35,
          successSceneId: "scene_sneak_success",
          failureSceneId: "scene_sneak_caught",
          criticalSuccess: "scene_sneak_critical"
        }
      }
    ],
    location: "stronghold_entrance",
    timeOfDay: "evening"
  },
  // ===== 엔딩 장면 (샘플) =====
  {
    id: "scene_chapter1_end",
    title: "\uCC55\uD130 1 \uC644\uB8CC",
    narrativeText: [
      "\u2501".repeat(50),
      "",
      "\u3010 \uCC55\uD130 1: \uC0AC\uB77C\uC9C4 \uC0AC\uD615 - \uC644\uB8CC \u3011",
      "",
      "\uB2F9\uC2E0\uC740 \uD751\uD48D\uCC44\uC5D0 \uC7A0\uC785\uD558\uB294 \uB370 \uC131\uACF5\uD588\uB2E4.",
      "\uC774\uC81C \uCCAD\uC6B4 \uC0AC\uD615\uC744 \uCC3E\uC544\uC57C \uD55C\uB2E4.",
      "",
      "\uD558\uC9C0\uB9CC \uCC44\uB0B4\uB294 \uC704\uD5D8\uC73C\uB85C \uAC00\uB4DD\uD558\uB2E4...",
      "",
      "\u2501".repeat(50),
      "",
      "[ \uCC55\uD130 2\uC5D0\uC11C \uACC4\uC18D ]"
    ],
    choices: [
      {
        id: "choice_continue_ch2",
        text: "\uACC4\uC18D\uD558\uAE30 (\uBBF8\uAD6C\uD604)",
        nextSceneId: "scene_start"
      }
    ],
    location: "stronghold_inside",
    timeOfDay: "night"
  },
  // ===== 전투 관련 장면 =====
  // 경비병 격파 후
  {
    id: "scene_guards_defeated",
    title: "\uD608\uB85C \uAC1C\uCC99",
    narrativeText: [
      "\u2694\uFE0F [\uC804\uD22C \uC2B9\uB9AC!]",
      "",
      "\uB450 \uBA85\uC758 \uC0B0\uC801\uC774 \uC2E0\uC74C\uD558\uBA70 \uC4F0\uB7EC\uC9C4\uB2E4.",
      '"\uD06C\uC73D... \uC774\uB7F0 \uC2E4\uB825\uC774..."',
      "",
      "\uB2F9\uC2E0\uC740 \uAC80\uC744 \uAC70\uB450\uACE0 \uBAA9\uCC45 \uC548\uC73C\uB85C \uAC78\uC5B4 \uB4E4\uC5B4\uAC04\uB2E4.",
      "\uBA40\uB9AC\uC11C \uACE0\uD568\uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4. \uB354 \uB9CE\uC740 \uC0B0\uC801\uB4E4\uC774 \uB2EC\uB824\uC624\uACE0 \uC788\uB2E4!",
      "",
      "\uC11C\uB458\uB7EC \uC6C0\uC9C1\uC5EC\uC57C \uD55C\uB2E4."
    ],
    choices: [
      {
        id: "choice_search_prison",
        text: "\uAC10\uC625\uC774 \uC788\uC744 \uBC95\uD55C \uACF3\uC73C\uB85C \uB2EC\uB824\uAC04\uB2E4.",
        nextSceneId: "scene_rescue_seongun"
      },
      {
        id: "choice_hide",
        text: "\uC77C\uB2E8 \uC228\uC5B4\uC11C \uC0C1\uD669\uC744 \uC0B4\uD540\uB2E4.",
        nextSceneId: "scene_hide_observe"
      }
    ],
    location: "stronghold_entrance",
    timeOfDay: "evening"
  },
  // 포로로 잡힘
  {
    id: "scene_captured",
    title: "\uD328\uBC30...",
    type: "narrative",
    autoProgress: true,
    autoDelay: 3e3,
    narrativeText: [
      "\u{1F480} [\uC804\uD22C \uD328\uBC30...]",
      "",
      "\uAC80\uC774 \uC190\uC5D0\uC11C \uBBF8\uB044\uB7EC\uC9C4\uB2E4.",
      "\uC628\uBAB8\uC774 \uCC9C\uADFC\uB9CC\uADFC\uC774\uB2E4. \uB354 \uC774\uC0C1 \uC2F8\uC6B8 \uD798\uC774 \uC5C6\uB2E4.",
      "",
      "\uC758\uC2DD\uC774 \uD750\uB824\uC9C4\uB2E4...",
      "",
      "\u{1F3E5} \uB204\uAD70\uAC00\uAC00 \uB2F9\uC2E0\uC744 \uBC1C\uACAC\uD558\uC5EC \uB099\uC591 \uC758\uC6D0\uC73C\uB85C \uAE34\uAE09 \uC774\uC1A1\uD55C\uB2E4..."
    ],
    choices: [
      {
        id: "choice_auto_hospital",
        text: "(\uC790\uB3D9 \uC9C4\uD589)",
        nextSceneId: "scene_hospital"
      }
    ],
    location: "stronghold_entrance",
    timeOfDay: "evening",
    tags: ["defeat", "hospital_redirect"]
  },
  // 병원 - 치료소
  {
    id: "scene_hospital",
    title: "\uB099\uC591 \uC758\uC6D0 (\u6D1B\u967D\u91AB\u9662)",
    type: "decision",
    narrativeText: [
      "\u{1F48A} [\uB099\uC591 \uC758\uC6D0]",
      "",
      "\uC815\uC2E0\uC744 \uCC28\uB9AC\uB2C8 \uB099\uC591\uC758 \uD55C \uC758\uC6D0\uC5D0 \uB204\uC6CC\uC788\uB2E4.",
      "\uBC31\uBC1C\uC758 \uC758\uC6D0\uC774 \uB2F9\uC2E0\uC744 \uB0B4\uB824\uB2E4\uBCF8\uB2E4.",
      "",
      '"\uAE68\uC5B4\uB098\uC168\uAD70\uC694. \uC911\uC0C1\uC744 \uC785\uACE0 \uC4F0\uB7EC\uC838 \uACC4\uC168\uC2B5\uB2C8\uB2E4."',
      '"\uB2E4\uD589\uD788 \uC0DD\uBA85\uC5D0\uB294 \uC9C0\uC7A5\uC774 \uC5C6\uC73C\uB098, \uC644\uC804\uD55C \uD68C\uBCF5\uC744 \uC704\uD574\uC120 \uCE58\uB8CC\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4."',
      "",
      "\uD604\uC7AC \uC0C1\uD0DC\uB97C \uD655\uC778\uD55C\uB2E4..."
    ],
    choices: [
      {
        id: "choice_basic_treatment",
        text: "\uAE30\uBCF8 \uCE58\uB8CC\uB97C \uBC1B\uB294\uB2E4 (\uAE08\uD654 20, HP 50 \uD68C\uBCF5)",
        nextSceneId: "scene_hospital_treated",
        importance: "major",
        conditions: [
          {
            type: "stat",
            param: "gold",
            operator: ">=",
            value: 20,
            displayText: "[\uAE08\uD654 20 \uD544\uC694]"
          }
        ],
        consequences: [
          {
            type: "stat_change",
            param: "gold",
            value: -20,
            description: "\uAE08\uD654 -20"
          },
          {
            type: "health_change",
            param: "health",
            value: 50,
            description: "HP +50"
          }
        ]
      },
      {
        id: "choice_advanced_treatment",
        text: "\uACE0\uAE09 \uCE58\uB8CC\uB97C \uBC1B\uB294\uB2E4 (\uAE08\uD654 50, HP \uC644\uC804 \uD68C\uBCF5 + \uBC84\uD504)",
        nextSceneId: "scene_hospital_advanced_treated",
        importance: "major",
        conditions: [
          {
            type: "stat",
            param: "gold",
            operator: ">=",
            value: 50,
            displayText: "[\uAE08\uD654 50 \uD544\uC694]"
          }
        ],
        consequences: [
          {
            type: "stat_change",
            param: "gold",
            value: -50,
            description: "\uAE08\uD654 -50"
          },
          {
            type: "health_change",
            param: "health",
            value: 9999,
            description: "HP \uC644\uC804 \uD68C\uBCF5"
          },
          {
            type: "stat_change",
            param: "strength",
            value: 1,
            description: "\uADFC\uB825 +1"
          },
          {
            type: "stat_change",
            param: "innerPower",
            value: 1,
            description: "\uB0B4\uACF5 +1"
          }
        ]
      },
      {
        id: "choice_rest_only",
        text: "\uADF8\uB0E5 \uC26C\uAE30\uB9CC \uD55C\uB2E4 (\uBB34\uB8CC, HP 30 \uD68C\uBCF5)",
        nextSceneId: "scene_hospital_rested",
        importance: "minor",
        consequences: [
          {
            type: "health_change",
            param: "health",
            value: 30,
            description: "HP +30"
          }
        ]
      },
      {
        id: "choice_leave_hospital",
        text: "\uCE58\uB8CC\uB97C \uAC70\uBD80\uD558\uACE0 \uB5A0\uB09C\uB2E4",
        nextSceneId: "scene_hospital_leave",
        importance: "minor"
      }
    ],
    location: "luoyang_hospital",
    timeOfDay: "afternoon",
    tags: ["hospital", "recovery"]
  },
  // 기본 치료 후
  {
    id: "scene_hospital_treated",
    title: "\uCE58\uB8CC \uC644\uB8CC",
    type: "narrative",
    autoProgress: true,
    autoDelay: 3e3,
    narrativeText: [
      "\u2728 [\uCE58\uB8CC \uC644\uB8CC]",
      "",
      "\uC758\uC6D0\uC774 \uB2F9\uC2E0\uC758 \uC0C1\uCC98\uB97C \uCE58\uB8CC\uD55C\uB2E4.",
      "\uCE68\uC744 \uB193\uACE0, \uC57D\uCD08\uB97C \uB2EC\uC5EC \uB9C8\uC2DC\uAC8C \uD55C\uB2E4.",
      "",
      '"\uC774\uC81C \uAD1C\uCC2E\uC744 \uAC81\uB2C8\uB2E4. \uD558\uC9C0\uB9CC \uBB34\uB9AC\uB294 \uAE08\uBB3C\uC774\uC624."',
      "",
      "\uC0C1\uCC98\uAC00 \uC544\uBB3C\uACE0, \uAE30\uC6B4\uC774 \uB3CC\uC544\uC628\uB2E4.",
      "\uB2E4\uC2DC \uC2F8\uC6B8 \uC218 \uC788\uC744 \uAC83 \uAC19\uB2E4."
    ],
    choices: [
      {
        id: "choice_continue",
        text: "\uC758\uC6D0\uC744 \uB098\uC120\uB2E4",
        nextSceneId: "scene_road_to_luoyang"
      }
    ],
    location: "luoyang_hospital",
    timeOfDay: "afternoon",
    tags: ["hospital", "recovery"]
  },
  // 고급 치료 후
  {
    id: "scene_hospital_advanced_treated",
    title: "\uC644\uBCBD\uD55C \uD68C\uBCF5",
    type: "narrative",
    autoProgress: true,
    autoDelay: 3500,
    narrativeText: [
      "\u2728 [\uC644\uBCBD\uD55C \uD68C\uBCF5]",
      "",
      "\uC758\uC6D0\uC774 \uBE44\uC804\uC758 \uCE58\uB8CC\uBC95\uC744 \uC2DC\uC804\uD55C\uB2E4.",
      "\uCE68\uC220\uACFC \uD568\uAED8 \uD2B9\uC81C \uC601\uC57D\uC744 \uBCF5\uC6A9\uD55C\uB2E4.",
      "",
      '"\uC774 \uC57D\uC740 \uB0B4\uACF5 \uC6B4\uD589\uACFC \uADFC\uB825 \uAC15\uD654\uC5D0\uB3C4 \uB3C4\uC6C0\uC774 \uB420 \uAC83\uC774\uC624."',
      "",
      "\uC628\uBAB8\uC5D0 \uB530\uB73B\uD55C \uAE30\uC6B4\uC774 \uD37C\uC9C4\uB2E4.",
      "\uC0C1\uCC98\uAC00 \uC644\uC804\uD788 \uC544\uBB3C\uACE0, \uC624\uD788\uB824 \uC804\uBCF4\uB2E4 \uB354 \uAC15\uD574\uC9C4 \uAE30\uBD84\uC774\uB2E4!",
      "",
      "\u{1F4AA} \uADFC\uB825\uACFC \uB0B4\uACF5\uC774 \uAC15\uD654\uB418\uC5C8\uB2E4!"
    ],
    choices: [
      {
        id: "choice_continue",
        text: "\uAC10\uC0AC \uC778\uC0AC\uB97C \uD558\uACE0 \uC758\uC6D0\uC744 \uB098\uC120\uB2E4",
        nextSceneId: "scene_road_to_luoyang"
      }
    ],
    location: "luoyang_hospital",
    timeOfDay: "afternoon",
    tags: ["hospital", "recovery", "buff"]
  },
  // 휴식만 한 경우
  {
    id: "scene_hospital_rested",
    title: "\uD734\uC2DD",
    type: "narrative",
    autoProgress: true,
    autoDelay: 2500,
    narrativeText: [
      "\u{1F60C} [\uD734\uC2DD]",
      "",
      "\uB2F9\uC2E0\uC740 \uCE68\uC0C1\uC5D0 \uB204\uC6CC \uC270\uB2E4.",
      "\uC2DC\uAC04\uC774 \uC9C0\uB098\uBA74\uC11C \uC870\uAE08\uC529 \uAE30\uC6B4\uC774 \uB3CC\uC544\uC628\uB2E4.",
      "",
      "\uC644\uC804\uD788 \uD68C\uBCF5\uB418\uC9C0\uB294 \uC54A\uC558\uC9C0\uB9CC, \uC5B4\uB290 \uC815\uB3C4 \uC6C0\uC9C1\uC77C \uC218 \uC788\uC744 \uAC83 \uAC19\uB2E4.",
      "",
      '"\uBB34\uB9AC\uD558\uC9C0 \uB9C8\uC2DC\uC624. \uC544\uC9C1 \uC644\uCE58\uB418\uC9C0 \uC54A\uC558\uC18C."'
    ],
    choices: [
      {
        id: "choice_continue",
        text: "\uC758\uC6D0\uC744 \uB098\uC120\uB2E4",
        nextSceneId: "scene_road_to_luoyang"
      }
    ],
    location: "luoyang_hospital",
    timeOfDay: "afternoon",
    tags: ["hospital", "recovery"]
  },
  // 치료 거부
  {
    id: "scene_hospital_leave",
    title: "\uC758\uC6D0\uC744 \uB5A0\uB098\uB2E4",
    type: "narrative",
    autoProgress: true,
    autoDelay: 2e3,
    narrativeText: [
      "\u26A0\uFE0F [\uCE58\uB8CC \uAC70\uBD80]",
      "",
      '"\uCE58\uB8CC\uAC00 \uD544\uC694\uD558\uC2E0\uB370... \uBB34\uB9AC\uD558\uC9C0 \uB9C8\uC2DC\uC624."',
      "",
      "\uB2F9\uC2E0\uC740 \uACE0\uAC1C\uB97C \uC800\uC73C\uBA70 \uC758\uC6D0\uC744 \uB098\uC120\uB2E4.",
      "\uC544\uC9C1 \uBAB8\uC774 \uC628\uC804\uCE58 \uC54A\uC9C0\uB9CC, \uC2DC\uAC04\uC774 \uC5C6\uB2E4.",
      "",
      "\uC870\uC2EC\uC2A4\uB7FD\uAC8C \uAC78\uC74C\uC744 \uC62E\uAE34\uB2E4..."
    ],
    choices: [
      {
        id: "choice_continue",
        text: "\uAE38\uC744 \uB098\uC120\uB2E4",
        nextSceneId: "scene_road_to_luoyang"
      }
    ],
    location: "luoyang_hospital",
    timeOfDay: "afternoon",
    tags: ["hospital", "no_recovery"]
  },
  // 청운 구출 성공
  {
    id: "scene_rescue_seongun",
    title: "\uC0AC\uD615 \uAD6C\uCD9C",
    narrativeText: [
      "\uC5B4\uB450\uC6B4 \uAC10\uC625 \uC548, \uB2F9\uC2E0\uC740 \uC0AC\uD615\uC744 \uBC1C\uACAC\uD55C\uB2E4.",
      "",
      '"\uCCAD\uC6B4 \uC0AC\uD615!"',
      '"...\uD6C4\uBC30? \uB124\uAC00 \uC65C \uC5EC\uAE30\uC5D0..."',
      "",
      "\uCCAD\uC6B4\uC758 \uC5BC\uAD74\uC740 \uC0C1\uCC98\uD22C\uC131\uC774\uB2E4. \uD558\uC9C0\uB9CC \uB208\uBE5B\uB9CC\uC740 \uC5EC\uC804\uD788 \uAC15\uB82C\uD558\uB2E4.",
      "",
      '"\uB2A6\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4, \uC0AC\uD615!"',
      "",
      "\u2501".repeat(50),
      "",
      "[ \uCC55\uD130 1 \uC644\uB8CC - \uCCAD\uC6B4 \uC0AC\uD615 \uAD6C\uCD9C \uC131\uACF5 ]"
    ],
    choices: [
      {
        id: "choice_continue_to_chapter2",
        text: "\uACC4\uC18D...",
        nextSceneId: "scene_chapter1_end"
      }
    ],
    location: "stronghold_prison",
    timeOfDay: "evening",
    tags: ["main_quest", "success"]
  },
  // 은신 후 관찰
  {
    id: "scene_hide_observe",
    title: "\uC5B4\uB460 \uC18D\uC5D0\uC11C",
    type: "narrative",
    autoProgress: true,
    autoDelay: 3500,
    narrativeText: [
      "\uB2F9\uC2E0\uC740 \uC7AC\uBE60\uB974\uAC8C \uCC3D\uACE0 \uB4A4\uC5D0 \uC228\uB294\uB2E4.",
      "\uC0B0\uC801\uB4E4\uC774 \uC6B0\uB974\uB974 \uC9C0\uB098\uAC04\uB2E4.",
      "",
      '"\uCE68\uC785\uC790\uB294 \uC5B4\uB514 \uAC14\uC5B4?"',
      '"\uCC3E\uC544\uB77C! \uBD84\uBA85 \uCC44\uB0B4\uC5D0 \uC788\uC744 \uAC83\uC774\uB2E4!"',
      "",
      "\uADF8\uB4E4\uC774 \uC9C0\uB098\uAC04 \uD6C4, \uB2F9\uC2E0\uC740 \uC870\uC6A9\uD788 \uC6C0\uC9C1\uC778\uB2E4.",
      "\uBA40\uB9AC \uCC3D\uC0B4\uC774 \uBCF4\uC774\uB294 \uAC74\uBB3C\uC774 \uB208\uC5D0 \uB748\uB2E4. \uAC10\uC625\uC77C \uAC83\uC774\uB2E4!"
    ],
    choices: [
      {
        id: "choice_approach_prison",
        text: "\uAC10\uC625\uC73C\uB85C \uC870\uC2EC\uC2A4\uB7FD\uAC8C \uB2E4\uAC00\uAC04\uB2E4.",
        nextSceneId: "scene_rescue_seongun"
      }
    ],
    location: "stronghold_inside",
    timeOfDay: "evening"
  },
  // ===== 명상 장면 =====
  {
    id: "scene_meditation",
    title: "\uB0B4\uACF5 \uC6B4\uC6A9",
    type: "narrative",
    autoProgress: true,
    autoDelay: 3e3,
    narrativeText: [
      "\uB2F9\uC2E0\uC740 \uADFC\uCC98 \uBC14\uC704\uC5D0 \uC549\uC544 \uB208\uC744 \uAC10\uB294\uB2E4.",
      "\uC228\uC744 \uACE0\uB974\uACE0 \uB2E8\uC804\uC5D0 \uAE30\uC6B4\uC744 \uBAA8\uC740\uB2E4.",
      "",
      "\uB9D1\uC740 \uAE30\uC6B4\uC774 \uACBD\uB9E5\uC744 \uB530\uB77C \uD750\uB978\uB2E4.",
      "\uC7A0\uC2DC \uD6C4, \uBAB8 \uC0C1\uD0DC\uAC00 \uD55C\uACB0 \uB098\uC544\uC9C4 \uAC83\uC744 \uB290\uB080\uB2E4.",
      "",
      "[\uB0B4\uACF5 +2]"
    ],
    choices: [
      {
        id: "choice_continue_after_meditation",
        text: "\uC218\uB828\uC744 \uB9C8\uCE58\uACE0 \uAE38\uC744 \uB5A0\uB09C\uB2E4.",
        nextSceneId: "scene_forest_path"
      }
    ],
    location: "road_to_luoyang",
    timeOfDay: "afternoon"
  },
  // ===== 던전 입장 장면 =====
  {
    id: "scene_dungeon_entrance",
    title: "\uBE44\uBC00 \uB3D9\uAD74 \uC785\uAD6C",
    type: "decision",
    narrativeText: [
      "\uB099\uC591 \uADFC\uCC98 \uC232\uAE38\uC744 \uAC77\uB358 \uC911, \uB2F9\uC2E0\uC740 \uC774\uC0C1\uD55C \uB3D9\uAD74 \uC785\uAD6C\uB97C \uBC1C\uACAC\uD588\uB2E4.",
      "\uC785\uAD6C \uADFC\uCC98\uC5D0\uC11C \uC624\uB798\uB41C \uD54F\uC790\uAD6D\uACFC \uAC80\uC740 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.",
      "",
      "\uB3D9\uAD74 \uC548\uC5D0\uC11C \uD76C\uBBF8\uD558\uAC8C \uBCF4\uBB3C\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.",
      "\uD558\uC9C0\uB9CC \uB3D9\uC2DC\uC5D0 \uC704\uD5D8\uD55C \uAE30\uC6B4\uB3C4 \uD568\uAED8 \uAC10\uC9C0\uB41C\uB2E4.",
      "",
      "\uB4E4\uC5B4\uAC08 \uAC83\uC778\uAC00?"
    ],
    choices: [
      {
        id: "choice_enter_dungeon",
        text: "\uB3D9\uAD74\uB85C \uB4E4\uC5B4\uAC04\uB2E4. (\uB358\uC804 \uC9C4\uC785)",
        importance: "major",
        nextSceneId: "dungeon_entry_point"
      },
      {
        id: "choice_explore_forest",
        text: "\uC704\uD5D8\uD574 \uBCF4\uC778\uB2E4. \uB2E4\uB978 \uAE38\uC744 \uCC3E\uB294\uB2E4.",
        nextSceneId: "scene_forest_path"
      }
    ],
    location: "road_to_luoyang",
    timeOfDay: "afternoon",
    tags: ["dungeon_entrance", "exploration"]
  }
];

// src/app/modules/novel/data/chapter1-npcs.data.ts
var CHAPTER_1_NPCS = [
  // ===== 주모 =====
  {
    id: "npc_innkeeper",
    name: "\uC8FC\uBAA8",
    title: "\uCDE8\uD5A5\uB8E8 \uC8FC\uBAA8",
    sect: "none",
    personality: ["shrewd", "observant"],
    state: "idle",
    currentLocation: "inn",
    initialRelationship: 0,
    tags: ["merchant", "information_broker"],
    dialogues: [
      {
        dialogueId: "dia_greeting",
        text: "\uBB34\uC5C7\uC744 \uB4DC\uC2DC\uACA0\uC2B5\uB2C8\uAE4C, \uC18C\uD611?",
        priority: 1
      },
      {
        dialogueId: "dia_after_bribe",
        text: "\uD751\uD48D\uCC44\uB77C... \uC704\uD5D8\uD55C \uACF3\uC774\uC624. \uC870\uC2EC\uD558\uC2DC\uC624.",
        conditions: [
          {
            type: "flag",
            param: "got_inn_information",
            operator: "==",
            value: true
          }
        ],
        priority: 10
      },
      {
        dialogueId: "dia_high_affection",
        text: "\uC18C\uD611\uC740 \uC88B\uC740 \uBD84\uC774\uC2DC\uC624. \uBB34\uC6B4\uC744 \uBE4C\uACA0\uC18C.",
        conditions: [
          {
            type: "relationship",
            param: "npc_innkeeper",
            operator: ">=",
            value: 20
          }
        ],
        priority: 15
      }
    ]
  },
  // ===== 산적 두목 =====
  {
    id: "npc_bandit_leader",
    name: "\uD751\uD48D",
    title: "\uD751\uD48D\uCC44 \uB450\uBAA9",
    sect: "none",
    personality: ["cruel", "cunning", "greedy"],
    state: "busy",
    currentLocation: "stronghold_inside",
    initialRelationship: -50,
    tags: ["boss", "enemy", "important"],
    dialogues: [
      {
        dialogueId: "dia_threat",
        text: "\uD654\uC0B0\uD30C \uB188\uC774 \uB610 \uC654\uAD70. \uB124\uB188\uB3C4 \uC7A1\uC544\uAC00\uB450\uC5B4\uB77C!",
        priority: 1
      },
      {
        dialogueId: "dia_negotiation",
        text: "\uD765, \uD654\uC0B0\uD30C\uAC00 \uBB50 \uB300\uB2E8\uD558\uB2E4\uACE0... \uC740\uC790\uB97C \uB0B4\uB193\uC73C\uBA74 \uC0B4\uB824\uC8FC\uC9C0.",
        conditions: [
          {
            type: "tendency",
            param: "tendency.value",
            operator: ">",
            value: 30
          }
        ],
        priority: 10
      }
    ]
  },
  // ===== 정보원 =====
  {
    id: "npc_informant",
    name: "\uBB34\uC601",
    title: "\uB5A0\uB3CC\uC774 \uD611\uAC1D",
    sect: "none",
    personality: ["mysterious", "helpful"],
    state: "idle",
    currentLocation: "inn",
    initialRelationship: 5,
    tags: ["informant", "potential_ally"],
    dialogues: [
      {
        dialogueId: "dia_greeting",
        text: "...\uD63C\uC790 \uD751\uD48D\uCC44\uC5D0 \uAC00\uB824\uB294 \uAC74\uAC00? \uBB34\uBAA8\uD558\uAD70.",
        priority: 1
      },
      {
        dialogueId: "dia_hint",
        text: "\uBC24\uC5D0 \uB3D9\uCABD \uB2F4\uC774 \uD5C8\uC220\uD558\uB2E4\uB124. \uC870\uC2EC\uD558\uAC8C.",
        conditions: [
          {
            type: "stat",
            param: "insight",
            operator: ">=",
            value: 30
          }
        ],
        priority: 10
      },
      {
        dialogueId: "dia_friendship",
        text: "\uC790\uB124\uB294 \uBBFF\uC744 \uB9CC\uD55C \uC0AC\uB78C\uC774\uAD70. \uB2E4\uC74C\uC5D0 \uB610 \uB9CC\uB098\uAE30\uB97C.",
        conditions: [
          {
            type: "relationship",
            param: "npc_informant",
            operator: ">=",
            value: 30
          }
        ],
        priority: 15
      }
    ]
  },
  // ===== 청운 사형 (목표 NPC) =====
  {
    id: "npc_seongun",
    name: "\uCCAD\uC6B4",
    title: "\uD654\uC0B0\uD30C \uC81C\uC790",
    sect: "huashan",
    personality: ["righteous", "brave", "loyal"],
    state: "in_danger",
    currentLocation: "stronghold_prison",
    initialRelationship: 80,
    tags: ["important", "quest_target", "ally"],
    dialogues: [
      {
        dialogueId: "dia_rescue",
        text: "\uC0AC\uC81C! \uBB34\uC0AC\uD558\uAD6C\uB098! \uC5B4\uC11C \uC774\uACF3\uC744 \uBC97\uC5B4\uB098\uC790!",
        priority: 1
      },
      {
        dialogueId: "dia_warning",
        text: "\uC870\uC2EC\uD574\uB77C. \uD751\uD48D\uC740 \uACE0\uC218\uB2E4. \uC123\uBD88\uB9AC \uB364\uBE44\uC9C0 \uB9C8\uB77C.",
        priority: 5
      }
    ]
  },
  // ===== 초선 (연애 이벤트용) =====
  {
    id: "npc_choseon",
    name: "\uCD08\uC120",
    title: "\uB099\uC591 \uC81C\uC77C\uBBF8\uC778",
    sect: "none",
    personality: ["gentle", "mysterious", "kind"],
    state: "idle",
    currentLocation: "soweol_bridge",
    initialRelationship: 0,
    tags: ["potential_romance", "important"],
    dialogues: [
      {
        dialogueId: "dia_first_meet",
        text: "...\uAC10\uC0AC\uD569\uB2C8\uB2E4.",
        priority: 1
      },
      {
        dialogueId: "dia_handkerchief",
        text: "\uC81C \uC190\uC218\uAC74\uC744... \uC815\uB9D0 \uAC10\uC0AC\uB4DC\uB9BD\uB2C8\uB2E4.",
        conditions: [
          {
            type: "flag",
            param: "bridge_encounter_handkerchief",
            operator: "==",
            value: true
          }
        ],
        priority: 10
      },
      {
        dialogueId: "dia_affection",
        text: "\uB2F9\uC2E0\uC744 \uB2E4\uC2DC \uB9CC\uB0A0 \uC904\uC740... \uC6B4\uBA85\uC778\uAC00 \uBD05\uB2C8\uB2E4.",
        conditions: [
          {
            type: "relationship",
            param: "npc_choseon",
            operator: ">=",
            value: 30
          }
        ],
        priority: 15
      },
      {
        dialogueId: "dia_high_affection",
        text: "\uB2F9\uC2E0\uACFC \uD568\uAED8 \uC788\uC73C\uBA74... \uB9C8\uC74C\uC774 \uD3B8\uC548\uD569\uB2C8\uB2E4.",
        conditions: [
          {
            type: "relationship",
            param: "npc_choseon",
            operator: ">=",
            value: 60
          }
        ],
        priority: 20
      }
    ]
  },
  // ===== 산적 병졸 =====
  {
    id: "npc_bandit_soldier",
    name: "\uC0B0\uC801 \uBCD1\uC878",
    title: "\uD751\uD48D\uCC44 \uBCD1\uC0AC",
    sect: "none",
    personality: ["cowardly", "greedy"],
    state: "idle",
    currentLocation: "stronghold_entrance",
    initialRelationship: -20,
    tags: ["enemy", "guard"],
    dialogues: [
      {
        dialogueId: "dia_challenge",
        text: "\uB204\uAD6C\uB0D0! \uB2F9\uC7A5 \uBB3C\uB7EC\uC11C\uC9C0 \uBABB\uD560\uAE4C!",
        priority: 1
      },
      {
        dialogueId: "dia_bribe",
        text: "\uD760... \uC774 \uC815\uB3C4\uBA74... \uBABB \uBCF8 \uCC99 \uD574\uC8FC\uC9C0.",
        conditions: [
          {
            type: "flag",
            param: "bribed_guard",
            operator: "==",
            value: true
          }
        ],
        priority: 10
      }
    ]
  },
  // ===== 전투용 산적 NPC =====
  {
    id: "bandit_guard_1",
    name: "\uD751\uD48D\uCC44 \uACBD\uBE44\uBCD1 (\uAC11)",
    title: "\uD751\uD48D\uCC44 \uC878\uAC1C",
    sect: "none",
    personality: ["aggressive", "greedy"],
    state: "hostile",
    currentLocation: "stronghold_entrance",
    initialRelationship: -50,
    tags: ["enemy", "bandit", "combatant"],
    dialogues: [
      {
        dialogueId: "dia_challenge",
        text: "\uD654\uC0B0\uD30C \uB188\uC774 \uAC10\uD788! \uBAA9\uC228\uC744 \uB0B4\uB194\uB77C!",
        priority: 1
      }
    ]
  },
  {
    id: "bandit_guard_2",
    name: "\uD751\uD48D\uCC44 \uACBD\uBE44\uBCD1 (\uC744)",
    title: "\uD751\uD48D\uCC44 \uC878\uAC1C",
    sect: "none",
    personality: ["aggressive", "cruel"],
    state: "hostile",
    currentLocation: "stronghold_entrance",
    initialRelationship: -50,
    tags: ["enemy", "bandit", "combatant"],
    dialogues: [
      {
        dialogueId: "dia_taunt",
        text: "\uB124 \uC0AC\uD615\uCC98\uB7FC \uAF3C\uC9DD \uBABB\uD558\uAC8C \uD574\uC8FC\uB9C8!",
        priority: 1
      }
    ]
  }
];

// src/app/modules/novel/data/situation-templates.data.ts
var ADDITIONAL_SITUATION_TEMPLATES = [
  // ===== 1. 무림 결투 도전 =====
  {
    id: "RIVALRY_MARTIAL_DUEL",
    name: "\uBB34\uB9BC \uACB0\uD22C \uB3C4\uC804",
    category: "rivalry",
    priority: 15,
    canRepeat: true,
    cooldown: 3,
    roles: [
      { roleId: "hero", roleName: "\uC8FC\uC778\uACF5" },
      {
        roleId: "rival",
        roleName: "\uACBD\uC7C1\uC790",
        criteria: {
          npcTags: ["rival", "martial_artist"],
          state: "idle"
        }
      }
    ],
    prerequisites: [
      {
        type: "stat",
        param: "martial_arts",
        operator: ">=",
        value: 40,
        description: "\uBB34\uACF5 \uC218\uC900 40 \uC774\uC0C1"
      },
      {
        type: "tendency",
        param: "tendency.value",
        operator: "<",
        value: 0,
        description: "\uC815\uD30C \uC131\uD5A5"
      }
    ],
    stages: [
      {
        stageId: "stage_1",
        stageNumber: 1,
        scene: {
          id: "rivalry_duel_s1",
          title: "\uB3C4\uC804",
          narrativeText: [
            "{npc_name}\uC774(\uAC00) \uB2F9\uC2E0 \uC55E\uC744 \uAC00\uB85C\uB9C9\uC558\uB2E4.",
            '"\uB124\uB188\uC758 \uC2E4\uB825\uC774 \uC5BC\uB9C8\uB098 \uB298\uC5C8\uB294\uC9C0 \uBCF4\uC790!"'
          ],
          choices: [
            {
              id: "accept",
              text: "\uC815\uBA74\uC73C\uB85C \uC2B9\uBD80\uD55C\uB2E4",
              nextSceneId: "rivalry_duel_result"
            },
            {
              id: "decline",
              text: "\uC2F8\uC6C0\uC744 \uD53C\uD55C\uB2E4",
              consequences: [
                { type: "stat_change", param: "reputation", value: -5 }
              ]
            }
          ]
        }
      }
    ],
    outcomes: []
  },
  // ===== 2. 무공 비급 발견 =====
  {
    id: "MARTIAL_SECRET_DISCOVERY",
    name: "\uBB34\uACF5 \uBE44\uAE09 \uBC1C\uACAC",
    category: "opportunity",
    priority: 20,
    canRepeat: false,
    cooldown: 5,
    roles: [
      { roleId: "hero", roleName: "\uC8FC\uC778\uACF5" }
    ],
    prerequisites: [
      {
        type: "stat",
        param: "luck",
        operator: ">=",
        value: 30,
        description: "\uC6B4 30 \uC774\uC0C1"
      }
    ],
    stages: [
      {
        stageId: "stage_1",
        stageNumber: 1,
        scene: {
          id: "secret_discovery_s1",
          title: "\uBC1C\uACAC",
          narrativeText: [
            "\uC624\uB798\uB41C \uB098\uBB34 \uBC11\uB3D9\uC5D0\uC11C \uBB34\uC5B8\uAC00 \uBC18\uC9DD\uC774\uB294 \uAC83\uC774 \uBCF4\uC778\uB2E4.",
            "\uB0A1\uC740 \uC0C1\uC790 \uC548\uC5D0\uB294 \uACE0\uC11C\uAC00 \uB4E4\uC5B4\uC788\uB2E4!"
          ],
          choices: [
            {
              id: "study",
              text: "\uC2E0\uC911\uD558\uAC8C \uC5F0\uAD6C\uD55C\uB2E4",
              nextSceneId: "secret_study_result"
            },
            {
              id: "practice",
              text: "\uC989\uC2DC \uC218\uB828\uD55C\uB2E4",
              nextSceneId: "secret_practice_result"
            },
            {
              id: "keep",
              text: "\uB098\uC911\uC744 \uC704\uD574 \uBCF4\uAD00\uD55C\uB2E4",
              consequences: [
                { type: "item_gain", param: "secret_manual", value: 1 }
              ]
            }
          ]
        }
      }
    ],
    outcomes: []
  },
  // ===== 3. 독살 위기 =====
  {
    id: "CRISIS_POISONING",
    name: "\uB3C5\uC0B4 \uC704\uAE30",
    category: "crisis",
    priority: 25,
    canRepeat: true,
    cooldown: 4,
    roles: [
      { roleId: "hero", roleName: "\uC8FC\uC778\uACF5" }
    ],
    prerequisites: [
      {
        type: "stat",
        param: "reputation",
        operator: ">=",
        value: 30,
        description: "\uBA85\uC131 30 \uC774\uC0C1"
      },
      {
        type: "flag",
        param: "made_enemies",
        operator: "==",
        value: true,
        description: "\uC801\uC744 \uB9CC\uB4E0 \uC0C1\uD0DC"
      }
    ],
    stages: [
      {
        stageId: "stage_1",
        stageNumber: 1,
        scene: {
          id: "poison_crisis_s1",
          title: "\uC704\uAE30",
          narrativeText: [
            "\uAC1D\uC810\uC5D0\uC11C \uC220\uC744 \uB9C8\uC2DC\uB824\uB294 \uC21C\uAC04, \uBBF8\uBB18\uD55C \uB0C4\uC0C8\uAC00 \uB290\uAEF4\uC9C4\uB2E4.",
            "\uC774\uAC83\uC740... \uB3C5\uC758 \uAE30\uC6B4\uC778\uAC00?"
          ],
          choices: [
            {
              id: "detect",
              text: "\uB3C5\uC744 \uD0D0\uC9C0\uD558\uACE0 \uC911\uD654\uD55C\uB2E4",
              nextSceneId: "poison_detect_result",
              conditions: [
                {
                  type: "stat",
                  param: "insight",
                  operator: ">=",
                  value: 45
                }
              ]
            },
            {
              id: "pretend",
              text: "\uB9C8\uC2E0 \uCC99\uD558\uACE0 \uBC94\uC778\uC744 \uCD94\uC801\uD55C\uB2E4",
              nextSceneId: "poison_pretend_result",
              conditions: [
                {
                  type: "stat",
                  param: "insight",
                  operator: ">=",
                  value: 40
                }
              ]
            },
            {
              id: "resist",
              text: "\uB0B4\uACF5\uC73C\uB85C \uB3C5\uC744 \uC5B5\uC81C\uD55C\uB2E4",
              nextSceneId: "poison_resist_result",
              conditions: [
                {
                  type: "stat",
                  param: "martial_arts",
                  operator: ">=",
                  value: 50
                }
              ]
            }
          ]
        }
      }
    ],
    outcomes: []
  },
  // ===== 4. 약자 구조 =====
  {
    id: "HELP_WEAK",
    name: "\uC57D\uC790 \uAD6C\uC870",
    category: "moral_choice",
    priority: 10,
    canRepeat: true,
    cooldown: 2,
    roles: [
      { roleId: "hero", roleName: "\uC8FC\uC778\uACF5" },
      {
        roleId: "victim",
        roleName: "\uD53C\uD574\uC790",
        criteria: {
          npcTags: ["victim", "civilian"]
        }
      }
    ],
    prerequisites: [
      {
        type: "tendency",
        param: "tendency.value",
        operator: "<",
        value: 20,
        description: "\uC815\uD30C \uC131\uD5A5"
      }
    ],
    stages: [
      {
        stageId: "stage_1",
        stageNumber: 1,
        scene: {
          id: "help_weak_s1",
          title: "\uAD6C\uC870",
          narrativeText: [
            "\uAE38 \uC55E\uC5D0\uC11C \uBE44\uBA85\uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4.",
            "\uC0C1\uC778\uC774 \uC0B0\uC801\uB4E4\uC5D0\uAC8C \uC2B5\uACA9\uB2F9\uD558\uACE0 \uC788\uB2E4!"
          ],
          choices: [
            {
              id: "rescue",
              text: "\uC0B0\uC801\uB4E4\uACFC \uC2F8\uC6CC \uAD6C\uD55C\uB2E4",
              nextSceneId: "help_rescue_result"
            },
            {
              id: "negotiate",
              text: "\uC0B0\uC801\uB4E4\uACFC \uD611\uC0C1\uD55C\uB2E4",
              nextSceneId: "help_negotiate_result",
              conditions: [
                {
                  type: "stat",
                  param: "insight",
                  operator: ">=",
                  value: 35
                }
              ]
            },
            {
              id: "ignore",
              text: "\uBAA8\uB978 \uCC99 \uC9C0\uB098\uAC04\uB2E4",
              consequences: [
                { type: "tendency_change", param: "tendency.value", value: 15 },
                { type: "stat_change", param: "reputation", value: -5 }
              ]
            }
          ]
        }
      }
    ],
    outcomes: []
  }
];

// src/app/modules/novel/data/equipment-items.data.ts
var WEAPONS = [
  // ===== 일반 무기 =====
  {
    id: "weapon_wooden_sword",
    name: "\uBAA9\uAC80",
    description: "\uD6C8\uB828\uC6A9 \uB098\uBB34 \uAC80. \uAE30\uBCF8\uC801\uC778 \uBB34\uAE30.",
    type: "weapon",
    quantity: 1,
    buyPrice: 50,
    sellPrice: 10,
    rarity: "common",
    stats: {
      attack: 5,
      minDamage: 3,
      maxDamage: 8
    }
  },
  {
    id: "weapon_iron_sword",
    name: "\uCCA0\uAC80",
    description: "\uC77C\uBC18\uC801\uC778 \uCCA0\uC81C \uAC80. \uBB34\uB09C\uD55C \uC131\uB2A5.",
    type: "weapon",
    quantity: 1,
    buyPrice: 200,
    sellPrice: 50,
    rarity: "common",
    stats: {
      attack: 15,
      minDamage: 10,
      maxDamage: 20
    }
  },
  {
    id: "weapon_steel_sword",
    name: "\uAC15\uCCA0\uAC80",
    description: "\uB2E8\uB828\uB41C \uAC15\uCCA0\uB85C \uB9CC\uB4E0 \uAC80. \uC6B0\uC218\uD55C \uD488\uC9C8.",
    type: "weapon",
    quantity: 1,
    buyPrice: 500,
    sellPrice: 125,
    rarity: "uncommon",
    stats: {
      attack: 30,
      minDamage: 20,
      maxDamage: 40,
      critChance: 5
    }
  },
  // ===== 고급 무기 =====
  {
    id: "weapon_azure_cloud_sword",
    name: "\uCCAD\uC6B4\uAC80",
    description: "\uD654\uC0B0\uD30C\uC758 \uC81C\uC790\uB4E4\uC774 \uC0AC\uC6A9\uD558\uB294 \uBA85\uAC80. \uD478\uB978 \uBE5B\uC774 \uAC10\uB3C8\uB2E4.",
    type: "weapon",
    quantity: 1,
    buyPrice: 1500,
    sellPrice: 375,
    rarity: "rare",
    stats: {
      attack: 50,
      minDamage: 35,
      maxDamage: 65,
      critChance: 10,
      attackSpeed: 10
    },
    uniqueEffect: "\uD654\uC0B0\uD30C \uAC80\uBC95 \uC704\uB825 +15%"
  },
  {
    id: "weapon_cold_moon_blade",
    name: "\uD55C\uC6D4\uB3C4",
    description: "\uB2EC\uBE5B\uCC98\uB7FC \uCC28\uAC00\uC6B4 \uAE30\uC6B4\uC744 \uBFDC\uB294 \uB3C4. \uBE60\uB978 \uACF5\uACA9\uC5D0 \uD2B9\uD654.",
    type: "weapon",
    quantity: 1,
    buyPrice: 2e3,
    sellPrice: 500,
    rarity: "rare",
    stats: {
      attack: 45,
      minDamage: 30,
      maxDamage: 60,
      attackSpeed: 20,
      critDamage: 25
    }
  },
  // ===== 전설 무기 =====
  {
    id: "weapon_dragon_slayer",
    name: "\uC6A9\uB9B0\uAC80",
    description: "\uC804\uC124\uC758 \uC6A9\uC744 \uC4F0\uB7EC\uB728\uB838\uB2E4\uB294 \uBA85\uAC80. \uC5C4\uCCAD\uB09C \uD30C\uAD34\uB825\uC744 \uC790\uB791\uD55C\uB2E4.",
    type: "weapon",
    quantity: 1,
    buyPrice: 5e3,
    sellPrice: 1250,
    rarity: "epic",
    stats: {
      attack: 80,
      minDamage: 60,
      maxDamage: 120,
      critChance: 15,
      critDamage: 50,
      lifeSteal: 5
    },
    uniqueEffect: "\uC6A9\uC871\uC5D0\uAC8C \uCD94\uAC00 \uD53C\uD574 +30%"
  },
  {
    id: "weapon_heavenly_demon_sword",
    name: "\uCC9C\uB9C8\uAC80",
    description: "\uCC9C\uB9C8\uC2E0\uAD50\uC758 \uBE44\uC804 \uAC80. \uC0AC\uC545\uD55C \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.",
    type: "weapon",
    quantity: 1,
    buyPrice: 8e3,
    sellPrice: 2e3,
    rarity: "legendary",
    stats: {
      attack: 100,
      minDamage: 80,
      maxDamage: 150,
      critChance: 20,
      critDamage: 75,
      lifeSteal: 10,
      attackSpeed: 15
    },
    uniqueEffect: "\uB9C8\uACF5 \uC0AC\uC6A9 \uC2DC \uC704\uB825 +25%, \uC131\uD5A5 +1/\uC77C"
  }
];
var ARMORS = [
  // ===== 일반 의복 =====
  {
    id: "armor_cloth_robe",
    name: "\uCC9C\uC758",
    description: "\uC77C\uBC18\uC801\uC778 \uCC9C\uC73C\uB85C \uB9CC\uB4E0 \uC637.",
    type: "armor",
    quantity: 1,
    buyPrice: 30,
    sellPrice: 7,
    rarity: "common",
    stats: {
      defense: 5,
      armor: 3,
      hp: 20
    }
  },
  {
    id: "armor_leather_armor",
    name: "\uAC00\uC8FD \uAC11\uC637",
    description: "\uC9C8\uAE34 \uAC00\uC8FD\uC73C\uB85C \uB9CC\uB4E0 \uAC11\uC637. \uC801\uB2F9\uD55C \uBC29\uC5B4\uB825.",
    type: "armor",
    quantity: 1,
    buyPrice: 150,
    sellPrice: 37,
    rarity: "common",
    stats: {
      defense: 15,
      armor: 10,
      hp: 50,
      evasion: 5
    }
  },
  // ===== 고급 의복 =====
  {
    id: "armor_huashan_robe",
    name: "\uD654\uC0B0\uB3C4\uBCF5",
    description: "\uD654\uC0B0\uD30C\uC758 \uC815\uC2DD \uC81C\uC790\uAC00 \uC785\uB294 \uB3C4\uBCF5. \uD478\uB978\uC0C9\uC774 \uC544\uB984\uB2F5\uB2E4.",
    type: "armor",
    quantity: 1,
    buyPrice: 800,
    sellPrice: 200,
    rarity: "uncommon",
    stats: {
      defense: 30,
      armor: 20,
      hp: 100,
      mp: 50,
      evasion: 10
    },
    uniqueEffect: "\uD654\uC0B0\uD30C \uBB34\uACF5 \uC218\uB828 \uC18D\uB3C4 +20%"
  },
  {
    id: "armor_silkworm_armor",
    name: "\uCC9C\uC7A0\uAC11\uC758",
    description: "\uC804\uC124\uC758 \uCC9C\uC7A0\uC0AC\uB85C \uC9E0 \uAC11\uC637. \uAC00\uBCCD\uC9C0\uB9CC \uAC15\uD558\uB2E4.",
    type: "armor",
    quantity: 1,
    buyPrice: 2500,
    sellPrice: 625,
    rarity: "rare",
    stats: {
      defense: 50,
      armor: 40,
      hp: 200,
      evasion: 20,
      allResist: 10
    },
    uniqueEffect: "\uB3C5 \uC800\uD56D +50%"
  },
  // ===== 전설 방어구 =====
  {
    id: "armor_dragon_scale",
    name: "\uC6A9\uB9B0\uAC11",
    description: "\uC6A9\uC758 \uBE44\uB298\uB85C \uB9CC\uB4E0 \uAC11\uC637. \uAC70\uC758 \uBB34\uC801\uC5D0 \uAC00\uAE4C\uC6B4 \uBC29\uC5B4\uB825.",
    type: "armor",
    quantity: 1,
    buyPrice: 6e3,
    sellPrice: 1500,
    rarity: "epic",
    stats: {
      defense: 80,
      armor: 70,
      hp: 300,
      allResist: 25,
      lifeRegen: 5
    },
    uniqueEffect: "\uD654\uC5FC \uACF5\uACA9 \uBB34\uD6A8\uD654"
  },
  {
    id: "armor_heavenly_silk",
    name: "\uCC9C\uC7A0\uC2E0\uC758",
    description: "\uCC9C\uB144 \uCC9C\uC7A0\uC0AC\uB85C \uB9CC\uB4E0 \uC2E0\uC758. \uBAA8\uB4E0 \uACF5\uACA9\uC744 \uBD80\uB4DC\uB7FD\uAC8C \uD758\uB9B0\uB2E4.",
    type: "armor",
    quantity: 1,
    buyPrice: 1e4,
    sellPrice: 2500,
    rarity: "legendary",
    stats: {
      defense: 100,
      armor: 90,
      hp: 400,
      mp: 200,
      evasion: 30,
      allResist: 35,
      lifeRegen: 10
    },
    uniqueEffect: "\uBAA8\uB4E0 \uC0C1\uD0DC\uC774\uC0C1 \uC800\uD56D +50%"
  }
];
var ACCESSORIES = [
  // ===== 목걸이 =====
  {
    id: "accessory_jade_pendant",
    name: "\uC625\uD328",
    description: "\uB9D1\uC740 \uC625\uC73C\uB85C \uB9CC\uB4E0 \uD328. \uAE30\uC6B4\uC744 \uC548\uC815\uC2DC\uD0A8\uB2E4.",
    type: "amulet",
    quantity: 1,
    buyPrice: 300,
    sellPrice: 75,
    rarity: "uncommon",
    stats: {
      hp: 50,
      mp: 30,
      manaRegen: 2
    }
  },
  {
    id: "accessory_inner_power_amulet",
    name: "\uB0B4\uACF5 \uBD80\uC801",
    description: "\uB0B4\uACF5 \uC218\uB828\uC5D0 \uB3C4\uC6C0\uC744 \uC8FC\uB294 \uBD80\uC801.",
    type: "amulet",
    quantity: 1,
    buyPrice: 1e3,
    sellPrice: 250,
    rarity: "rare",
    stats: {
      mp: 100,
      manaRegen: 5,
      attack: 20
    },
    uniqueEffect: "\uB0B4\uACF5 \uD68C\uBCF5 \uC18D\uB3C4 +25%"
  },
  // ===== 반지 =====
  {
    id: "accessory_strength_ring",
    name: "\uB825\uB7C9\uC758 \uBC18\uC9C0",
    description: "\uCC29\uC6A9\uC790\uC758 \uD798\uC744 \uC99D\uD3ED\uC2DC\uD0A4\uB294 \uBC18\uC9C0.",
    type: "ring",
    quantity: 1,
    buyPrice: 500,
    sellPrice: 125,
    rarity: "uncommon",
    stats: {
      attack: 15,
      minDamage: 5,
      maxDamage: 10
    }
  },
  {
    id: "accessory_swift_ring",
    name: "\uC2E0\uC18D\uC758 \uBC18\uC9C0",
    description: "\uCC29\uC6A9\uC790\uC758 \uBBFC\uCCA9\uD568\uC744 \uB192\uC5EC\uC8FC\uB294 \uBC18\uC9C0.",
    type: "ring",
    quantity: 1,
    buyPrice: 500,
    sellPrice: 125,
    rarity: "uncommon",
    stats: {
      evasion: 10,
      attackSpeed: 10,
      critChance: 5
    }
  },
  // ===== 전설 악세사리 =====
  {
    id: "accessory_phoenix_feather",
    name: "\uBD09\uD669\uC758 \uAE43\uD138",
    description: "\uBD88\uC0AC\uC870\uC758 \uAE43\uD138\uB85C \uB9CC\uB4E0 \uBAA9\uAC78\uC774. \uC0DD\uBA85\uB825\uC774 \uB118\uCE5C\uB2E4.",
    type: "amulet",
    quantity: 1,
    buyPrice: 5e3,
    sellPrice: 1250,
    rarity: "epic",
    stats: {
      hp: 300,
      lifeRegen: 10,
      lifeSteal: 5,
      fireResist: 50
    },
    uniqueEffect: "\uC0DD\uBA85\uB825 30% \uC774\uD558 \uC2DC \uC790\uB3D9 \uD68C\uBCF5 (1\uD68C/\uC804\uD22C)"
  },
  {
    id: "accessory_dragon_heart",
    name: "\uC6A9\uC758 \uC2EC\uC7A5",
    description: "\uC804\uC124\uC758 \uC6A9\uC774 \uB0A8\uAE34 \uC2EC\uC7A5 \uACB0\uC815. \uC5C4\uCCAD\uB09C \uD798\uC774 \uB290\uAEF4\uC9C4\uB2E4.",
    type: "ring",
    quantity: 1,
    buyPrice: 8e3,
    sellPrice: 2e3,
    rarity: "legendary",
    stats: {
      attack: 50,
      hp: 200,
      mp: 100,
      critChance: 15,
      critDamage: 30,
      allResist: 20
    },
    uniqueEffect: "\uBAA8\uB4E0 \uB2A5\uB825\uCE58 +10%"
  }
];
var ALL_EQUIPMENT_ITEMS = [
  ...WEAPONS,
  ...ARMORS,
  ...ACCESSORIES
];
var STARTER_EQUIPMENT = [
  __spreadValues({}, WEAPONS[0]),
  // 목검
  __spreadValues({}, ARMORS[0])
  // 천의
];

// src/app/modules/novel/components/game-modal/game-modal.component.ts
function GameModalComponent_div_0_button_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 12);
    \u0275\u0275listener("click", function GameModalComponent_div_0_button_12_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r3);
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r1.onCancel());
    });
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r1.cancelText, " ");
  }
}
function GameModalComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 1);
    \u0275\u0275listener("click", function GameModalComponent_div_0_Template_div_click_0_listener($event) {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onBackdropClick($event));
    });
    \u0275\u0275elementStart(1, "div", 2)(2, "div", 3)(3, "div", 4);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "h3", 5);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "button", 6);
    \u0275\u0275listener("click", function GameModalComponent_div_0_Template_button_click_7_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onClose());
    });
    \u0275\u0275text(8, "\u2715");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 7);
    \u0275\u0275element(10, "p", 8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "div", 9);
    \u0275\u0275template(12, GameModalComponent_div_0_button_12_Template, 2, 1, "button", 10);
    \u0275\u0275elementStart(13, "button", 11);
    \u0275\u0275listener("click", function GameModalComponent_div_0_Template_button_click_13_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.onConfirm());
    });
    \u0275\u0275text(14);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275classMap("modal-" + ctx_r1.type);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r1.getIcon());
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r1.title);
    \u0275\u0275advance(4);
    \u0275\u0275property("innerHTML", ctx_r1.message, \u0275\u0275sanitizeHtml);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r1.showCancel);
    \u0275\u0275advance();
    \u0275\u0275classMap("modal-btn-" + ctx_r1.type);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r1.confirmText, " ");
  }
}
var GameModalComponent = class _GameModalComponent {
  isOpen = false;
  type = "info";
  title = "";
  message = "";
  confirmText = "\uD655\uC778";
  cancelText = "\uCDE8\uC18C";
  showCancel = false;
  confirm = new EventEmitter();
  cancel = new EventEmitter();
  close = new EventEmitter();
  onConfirm() {
    this.confirm.emit();
    this.isOpen = false;
  }
  onCancel() {
    this.cancel.emit();
    this.isOpen = false;
  }
  onClose() {
    this.close.emit();
    this.isOpen = false;
  }
  onBackdropClick(event) {
    if (event.target === event.currentTarget) {
      this.onClose();
    }
  }
  getIcon() {
    switch (this.type) {
      case "success":
        return "\u2713";
      case "warning":
        return "\u26A0";
      case "error":
        return "\u2715";
      case "confirm":
        return "?";
      default:
        return "\u2139";
    }
  }
  static \u0275fac = function GameModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _GameModalComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _GameModalComponent, selectors: [["app-game-modal"]], inputs: { isOpen: "isOpen", type: "type", title: "title", message: "message", confirmText: "confirmText", cancelText: "cancelText", showCancel: "showCancel" }, outputs: { confirm: "confirm", cancel: "cancel", close: "close" }, decls: 1, vars: 1, consts: [["class", "modal-overlay", 3, "click", 4, "ngIf"], [1, "modal-overlay", 3, "click"], [1, "modal-container"], [1, "modal-header"], [1, "modal-icon"], [1, "modal-title"], ["aria-label", "\uB2EB\uAE30", 1, "modal-close", 3, "click"], [1, "modal-body"], [1, "modal-message", 3, "innerHTML"], [1, "modal-footer"], ["class", "modal-btn modal-btn-cancel", 3, "click", 4, "ngIf"], [1, "modal-btn", "modal-btn-confirm", 3, "click"], [1, "modal-btn", "modal-btn-cancel", 3, "click"]], template: function GameModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275template(0, GameModalComponent_div_0_Template, 15, 9, "div", 0);
    }
    if (rf & 2) {
      \u0275\u0275property("ngIf", ctx.isOpen);
    }
  }, dependencies: [CommonModule, NgIf], styles: ['\n\n.modal-overlay[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  animation: _ngcontent-%COMP%_fadeIn 0.2s ease-out;\n  padding: 1rem;\n}\n@keyframes _ngcontent-%COMP%_fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n.modal-container[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #f5f1e8 0%,\n      #e8dcc8 100%);\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\n  max-width: 500px;\n  width: 100%;\n  overflow: hidden;\n  animation: _ngcontent-%COMP%_slideUp 0.3s ease-out;\n  border: 2px solid rgba(139, 69, 19, 0.3);\n}\n@keyframes _ngcontent-%COMP%_slideUp {\n  from {\n    transform: translateY(50px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n.modal-header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1.5rem;\n  border-bottom: 2px solid rgba(139, 69, 19, 0.2);\n  background: rgba(139, 69, 19, 0.05);\n}\n.modal-icon[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  font-size: 1.5rem;\n  font-weight: bold;\n  flex-shrink: 0;\n}\n.modal-title[_ngcontent-%COMP%] {\n  flex: 1;\n  margin: 0;\n  font-size: 1.3rem;\n  font-weight: 600;\n  color: #2c2416;\n  font-family:\n    "Noto Sans KR",\n    "Malgun Gothic",\n    sans-serif;\n}\n.modal-close[_ngcontent-%COMP%] {\n  width: 32px;\n  height: 32px;\n  border: none;\n  background: rgba(139, 69, 19, 0.1);\n  border-radius: 50%;\n  font-size: 1.2rem;\n  color: #666;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n.modal-close[_ngcontent-%COMP%]:hover {\n  background: rgba(139, 69, 19, 0.2);\n  color: #333;\n  transform: scale(1.1);\n}\n.modal-close[_ngcontent-%COMP%]:active {\n  transform: scale(0.95);\n}\n.modal-body[_ngcontent-%COMP%] {\n  padding: 2rem 1.5rem;\n}\n.modal-message[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 1.05rem;\n  line-height: 1.6;\n  color: #4a3520;\n  text-align: center;\n  font-family:\n    "Noto Sans KR",\n    "Malgun Gothic",\n    sans-serif;\n}\n.modal-footer[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.75rem;\n  padding: 1rem 1.5rem 1.5rem;\n  justify-content: flex-end;\n}\n.modal-btn[_ngcontent-%COMP%] {\n  padding: 0.75rem 2rem;\n  border: none;\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-family:\n    "Noto Sans KR",\n    "Malgun Gothic",\n    sans-serif;\n  min-width: 100px;\n}\n.modal-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n.modal-btn[_ngcontent-%COMP%]:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);\n}\n.modal-btn-cancel[_ngcontent-%COMP%] {\n  background: #6c757d;\n  color: white;\n}\n.modal-btn-cancel[_ngcontent-%COMP%]:hover {\n  background: #5a6268;\n}\n.modal-btn-confirm[_ngcontent-%COMP%] {\n  background: #8b4513;\n  color: white;\n}\n.modal-btn-confirm[_ngcontent-%COMP%]:hover {\n  background: #704010;\n}\n.modal-info[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%] {\n  background: rgba(23, 162, 184, 0.15);\n  color: #17a2b8;\n}\n.modal-info[_ngcontent-%COMP%]   .modal-btn-info[_ngcontent-%COMP%] {\n  background: #17a2b8;\n  color: white;\n}\n.modal-info[_ngcontent-%COMP%]   .modal-btn-info[_ngcontent-%COMP%]:hover {\n  background: #138496;\n}\n.modal-success[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%] {\n  background: rgba(40, 167, 69, 0.15);\n  color: #28a745;\n}\n.modal-success[_ngcontent-%COMP%]   .modal-btn-success[_ngcontent-%COMP%] {\n  background: #28a745;\n  color: white;\n}\n.modal-success[_ngcontent-%COMP%]   .modal-btn-success[_ngcontent-%COMP%]:hover {\n  background: #218838;\n}\n.modal-warning[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%] {\n  background: rgba(255, 193, 7, 0.15);\n  color: #ffc107;\n}\n.modal-warning[_ngcontent-%COMP%]   .modal-btn-warning[_ngcontent-%COMP%] {\n  background: #ffc107;\n  color: #333;\n}\n.modal-warning[_ngcontent-%COMP%]   .modal-btn-warning[_ngcontent-%COMP%]:hover {\n  background: #e0a800;\n}\n.modal-error[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%] {\n  background: rgba(220, 53, 69, 0.15);\n  color: #dc3545;\n}\n.modal-error[_ngcontent-%COMP%]   .modal-btn-error[_ngcontent-%COMP%] {\n  background: #dc3545;\n  color: white;\n}\n.modal-error[_ngcontent-%COMP%]   .modal-btn-error[_ngcontent-%COMP%]:hover {\n  background: #c82333;\n}\n.modal-confirm[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%] {\n  background: rgba(139, 69, 19, 0.15);\n  color: #8b4513;\n}\n.modal-confirm[_ngcontent-%COMP%]   .modal-btn-confirm[_ngcontent-%COMP%] {\n  background: #8b4513;\n  color: white;\n}\n.modal-confirm[_ngcontent-%COMP%]   .modal-btn-confirm[_ngcontent-%COMP%]:hover {\n  background: #704010;\n}\n@media (max-width: 768px) {\n  .modal-container[_ngcontent-%COMP%] {\n    max-width: 95%;\n    margin: 1rem;\n  }\n  .modal-header[_ngcontent-%COMP%] {\n    padding: 1.2rem;\n  }\n  .modal-title[_ngcontent-%COMP%] {\n    font-size: 1.1rem;\n  }\n  .modal-body[_ngcontent-%COMP%] {\n    padding: 1.5rem 1.2rem;\n  }\n  .modal-message[_ngcontent-%COMP%] {\n    font-size: 0.95rem;\n  }\n  .modal-footer[_ngcontent-%COMP%] {\n    padding: 0.8rem 1.2rem 1.2rem;\n    flex-direction: column;\n  }\n  .modal-btn[_ngcontent-%COMP%] {\n    width: 100%;\n    min-width: auto;\n  }\n}\n/*# sourceMappingURL=game-modal.component.css.map */'] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(GameModalComponent, [{
    type: Component,
    args: [{ selector: "app-game-modal", standalone: true, imports: [CommonModule], template: `<!-- \uBB34\uD611 \uAC8C\uC784 \uACF5\uD1B5 \uBAA8\uB2EC -->
<div class="modal-overlay" *ngIf="isOpen" (click)="onBackdropClick($event)">
  <div class="modal-container" [class]="'modal-' + type">
    <!-- \uBAA8\uB2EC \uD5E4\uB354 -->
    <div class="modal-header">
      <div class="modal-icon">{{ getIcon() }}</div>
      <h3 class="modal-title">{{ title }}</h3>
      <button class="modal-close" (click)="onClose()" aria-label="\uB2EB\uAE30">\u2715</button>
    </div>

    <!-- \uBAA8\uB2EC \uBC14\uB514 -->
    <div class="modal-body">
      <p class="modal-message" [innerHTML]="message"></p>
    </div>

    <!-- \uBAA8\uB2EC \uD478\uD130 -->
    <div class="modal-footer">
      <button 
        *ngIf="showCancel" 
        class="modal-btn modal-btn-cancel" 
        (click)="onCancel()">
        {{ cancelText }}
      </button>
      <button 
        class="modal-btn modal-btn-confirm" 
        [class]="'modal-btn-' + type"
        (click)="onConfirm()">
        {{ confirmText }}
      </button>
    </div>
  </div>
</div>
`, styles: ['/* src/app/modules/novel/components/game-modal/game-modal.component.scss */\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  animation: fadeIn 0.2s ease-out;\n  padding: 1rem;\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n.modal-container {\n  background:\n    linear-gradient(\n      135deg,\n      #f5f1e8 0%,\n      #e8dcc8 100%);\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\n  max-width: 500px;\n  width: 100%;\n  overflow: hidden;\n  animation: slideUp 0.3s ease-out;\n  border: 2px solid rgba(139, 69, 19, 0.3);\n}\n@keyframes slideUp {\n  from {\n    transform: translateY(50px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n.modal-header {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1.5rem;\n  border-bottom: 2px solid rgba(139, 69, 19, 0.2);\n  background: rgba(139, 69, 19, 0.05);\n}\n.modal-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  font-size: 1.5rem;\n  font-weight: bold;\n  flex-shrink: 0;\n}\n.modal-title {\n  flex: 1;\n  margin: 0;\n  font-size: 1.3rem;\n  font-weight: 600;\n  color: #2c2416;\n  font-family:\n    "Noto Sans KR",\n    "Malgun Gothic",\n    sans-serif;\n}\n.modal-close {\n  width: 32px;\n  height: 32px;\n  border: none;\n  background: rgba(139, 69, 19, 0.1);\n  border-radius: 50%;\n  font-size: 1.2rem;\n  color: #666;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n.modal-close:hover {\n  background: rgba(139, 69, 19, 0.2);\n  color: #333;\n  transform: scale(1.1);\n}\n.modal-close:active {\n  transform: scale(0.95);\n}\n.modal-body {\n  padding: 2rem 1.5rem;\n}\n.modal-message {\n  margin: 0;\n  font-size: 1.05rem;\n  line-height: 1.6;\n  color: #4a3520;\n  text-align: center;\n  font-family:\n    "Noto Sans KR",\n    "Malgun Gothic",\n    sans-serif;\n}\n.modal-footer {\n  display: flex;\n  gap: 0.75rem;\n  padding: 1rem 1.5rem 1.5rem;\n  justify-content: flex-end;\n}\n.modal-btn {\n  padding: 0.75rem 2rem;\n  border: none;\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-family:\n    "Noto Sans KR",\n    "Malgun Gothic",\n    sans-serif;\n  min-width: 100px;\n}\n.modal-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n.modal-btn:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);\n}\n.modal-btn-cancel {\n  background: #6c757d;\n  color: white;\n}\n.modal-btn-cancel:hover {\n  background: #5a6268;\n}\n.modal-btn-confirm {\n  background: #8b4513;\n  color: white;\n}\n.modal-btn-confirm:hover {\n  background: #704010;\n}\n.modal-info .modal-icon {\n  background: rgba(23, 162, 184, 0.15);\n  color: #17a2b8;\n}\n.modal-info .modal-btn-info {\n  background: #17a2b8;\n  color: white;\n}\n.modal-info .modal-btn-info:hover {\n  background: #138496;\n}\n.modal-success .modal-icon {\n  background: rgba(40, 167, 69, 0.15);\n  color: #28a745;\n}\n.modal-success .modal-btn-success {\n  background: #28a745;\n  color: white;\n}\n.modal-success .modal-btn-success:hover {\n  background: #218838;\n}\n.modal-warning .modal-icon {\n  background: rgba(255, 193, 7, 0.15);\n  color: #ffc107;\n}\n.modal-warning .modal-btn-warning {\n  background: #ffc107;\n  color: #333;\n}\n.modal-warning .modal-btn-warning:hover {\n  background: #e0a800;\n}\n.modal-error .modal-icon {\n  background: rgba(220, 53, 69, 0.15);\n  color: #dc3545;\n}\n.modal-error .modal-btn-error {\n  background: #dc3545;\n  color: white;\n}\n.modal-error .modal-btn-error:hover {\n  background: #c82333;\n}\n.modal-confirm .modal-icon {\n  background: rgba(139, 69, 19, 0.15);\n  color: #8b4513;\n}\n.modal-confirm .modal-btn-confirm {\n  background: #8b4513;\n  color: white;\n}\n.modal-confirm .modal-btn-confirm:hover {\n  background: #704010;\n}\n@media (max-width: 768px) {\n  .modal-container {\n    max-width: 95%;\n    margin: 1rem;\n  }\n  .modal-header {\n    padding: 1.2rem;\n  }\n  .modal-title {\n    font-size: 1.1rem;\n  }\n  .modal-body {\n    padding: 1.5rem 1.2rem;\n  }\n  .modal-message {\n    font-size: 0.95rem;\n  }\n  .modal-footer {\n    padding: 0.8rem 1.2rem 1.2rem;\n    flex-direction: column;\n  }\n  .modal-btn {\n    width: 100%;\n    min-width: auto;\n  }\n}\n/*# sourceMappingURL=game-modal.component.css.map */\n'] }]
  }], null, { isOpen: [{
    type: Input
  }], type: [{
    type: Input
  }], title: [{
    type: Input
  }], message: [{
    type: Input
  }], confirmText: [{
    type: Input
  }], cancelText: [{
    type: Input
  }], showCancel: [{
    type: Input
  }], confirm: [{
    type: Output
  }], cancel: [{
    type: Output
  }], close: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(GameModalComponent, { className: "GameModalComponent", filePath: "src/app/modules/novel/components/game-modal/game-modal.component.ts", lineNumber: 13 });
})();

// src/app/modules/novel/components/wuxia-game/wuxia-game.component.ts
function WuxiaGameComponent_div_37_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 21)(1, "div", 22)(2, "span", 23);
    \u0275\u0275text(3, "\uC774\uB984:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 24);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 22)(7, "span", 23);
    \u0275\u0275text(8, "\uB808\uBCA8:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "span", 24);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(11, "div", 22)(12, "span", 23);
    \u0275\u0275text(13, "\uC804\uD22C\uB825:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "span", 25);
    \u0275\u0275text(15);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(16, "div", 26)(17, "span", 23);
    \u0275\u0275text(18, "\uC0DD\uBA85\uB825:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(19, "span", 24);
    \u0275\u0275text(20);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(21, "div", 27);
    \u0275\u0275element(22, "div", 28);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(23, "div", 22)(24, "span", 23);
    \u0275\u0275text(25, "\uC131\uD5A5:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(26, "span", 29);
    \u0275\u0275text(27);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.player.name);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.player.level);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.getTotalCombatPower());
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate2("", ctx_r0.player.health, " / ", ctx_r0.player.maxHealth);
    \u0275\u0275advance(2);
    \u0275\u0275styleProp("width", ctx_r0.player.health / ctx_r0.player.maxHealth * 100, "%");
    \u0275\u0275advance(4);
    \u0275\u0275classProp("righteous", ctx_r0.player.tendency.value < -20)("neutral", ctx_r0.player.tendency.value >= -20 && ctx_r0.player.tendency.value < 20)("evil", ctx_r0.player.tendency.value >= 20);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.player.tendency.label, " ");
  }
}
function WuxiaGameComponent_div_38_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 30)(1, "div", 31)(2, "span", 32);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(4, "div", 33);
    \u0275\u0275element(5, "div", 34);
    \u0275\u0275elementEnd();
    \u0275\u0275element(6, "div", 35);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r0.getExperienceText());
    \u0275\u0275advance(2);
    \u0275\u0275styleProp("width", ctx_r0.getExperiencePercentage(), "%");
  }
}
function WuxiaGameComponent_div_39_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 36)(1, "div", 37);
    \u0275\u0275text(2, "\uD604\uC7AC \uBAA9\uD45C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 38);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r0.gameState.currentObjective);
  }
}
function WuxiaGameComponent_div_40_div_31_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 62)(1, "div", 46);
    \u0275\u0275text(2);
    \u0275\u0275elementStart(3, "span", 63);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(5, "div", 48)(6, "div", 49)(7, "div", 23);
    \u0275\u0275text(8, "HP");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "div", 50);
    \u0275\u0275element(10, "div", 64);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "div", 52);
    \u0275\u0275text(12);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const enemy_r2 = ctx.$implicit;
    const i_r3 = ctx.index;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275classProp("defeated", enemy_r2.currentHp <= 0)("targeted", ctx_r0.battleState.targetedEnemyIndex === i_r3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", enemy_r2.name, " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u26A1 ", ctx_r0.getEnemyCombatPower(enemy_r2));
    \u0275\u0275advance(6);
    \u0275\u0275styleProp("width", enemy_r2.currentHp / enemy_r2.maxHp * 100, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", enemy_r2.currentHp, " / ", enemy_r2.maxHp);
  }
}
function WuxiaGameComponent_div_40_div_33_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 65);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const log_r4 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", log_r4.message, " ");
  }
}
function WuxiaGameComponent_div_40_div_34_div_8_button_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 76);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_40_div_34_div_8_button_4_Template_button_click_0_listener() {
      const skill_r7 = \u0275\u0275restoreView(_r6).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(4);
      return \u0275\u0275resetView(ctx_r0.playerUseSkill(skill_r7));
    });
    \u0275\u0275elementStart(1, "div", 77);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 78)(4, "span", 79);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "span", 80);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const skill_r7 = ctx.$implicit;
    const ctx_r0 = \u0275\u0275nextContext(4);
    \u0275\u0275property("disabled", skill_r7.mpCost > ctx_r0.battleState.player.currentMp);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(skill_r7.name);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("MP ", skill_r7.mpCost);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\uB370\uBBF8\uC9C0 ", skill_r7.damage);
  }
}
function WuxiaGameComponent_div_40_div_34_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 72)(1, "div", 73);
    \u0275\u0275text(2, "\uC2A4\uD0AC \uC120\uD0DD");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 74);
    \u0275\u0275template(4, WuxiaGameComponent_div_40_div_34_div_8_button_4_Template, 8, 4, "button", 75);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r0.battleState.player.skills);
  }
}
function WuxiaGameComponent_div_40_div_34_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 66)(1, "div", 67)(2, "button", 68);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_40_div_34_Template_button_click_2_listener() {
      \u0275\u0275restoreView(_r5);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.startAutoBattle());
    });
    \u0275\u0275text(3, " \u{1F916} \uC790\uB3D9 \uC804\uD22C ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 69);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_40_div_34_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r5);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.playerBattleAttack());
    });
    \u0275\u0275text(5, " \u2694\uFE0F \uC77C\uBC18 \uACF5\uACA9 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "button", 70);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_40_div_34_Template_button_click_6_listener() {
      \u0275\u0275restoreView(_r5);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.toggleSkillMenu());
    });
    \u0275\u0275text(7, " \u2728 \uC2A4\uD0AC \uC0AC\uC6A9 ");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(8, WuxiaGameComponent_div_40_div_34_div_8_Template, 5, 1, "div", 71);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(8);
    \u0275\u0275property("ngIf", ctx_r0.showSkillMenu);
  }
}
function WuxiaGameComponent_div_40_div_35_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 81)(1, "span");
    \u0275\u0275text(2, "\u{1F916} \uC790\uB3D9 \uC804\uD22C \uC9C4\uD589 \uC911...");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "button", 82);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_40_div_35_Template_button_click_3_listener() {
      \u0275\u0275restoreView(_r8);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.stopAutoBattle());
    });
    \u0275\u0275text(4, "\uC911\uB2E8");
    \u0275\u0275elementEnd()();
  }
}
function WuxiaGameComponent_div_40_div_36_h3_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "h3");
    \u0275\u0275text(1, "\u{1F389} \uC2B9\uB9AC!");
    \u0275\u0275elementEnd();
  }
}
function WuxiaGameComponent_div_40_div_36_h3_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "h3");
    \u0275\u0275text(1, "\u{1F480} \uD328\uBC30...");
    \u0275\u0275elementEnd();
  }
}
function WuxiaGameComponent_div_40_div_36_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 83);
    \u0275\u0275template(1, WuxiaGameComponent_div_40_div_36_h3_1_Template, 2, 0, "h3", 84)(2, WuxiaGameComponent_div_40_div_36_h3_2_Template, 2, 0, "h3", 84);
    \u0275\u0275elementStart(3, "button", 85);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_40_div_36_Template_button_click_3_listener() {
      \u0275\u0275restoreView(_r9);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.endBattle());
    });
    \u0275\u0275text(4, "\uACC4\uC18D\uD558\uAE30");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.battleState.victory);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r0.battleState.victory);
  }
}
function WuxiaGameComponent_div_40_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 39)(1, "div", 40)(2, "h2");
    \u0275\u0275text(3, "\u2694\uFE0F \uC804\uD22C \uC9C4\uD589 \uC911");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 41)(5, "span", 42);
    \u0275\u0275text(6, "\uD604\uC7AC \uD134:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "span", 43);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(9, "div", 44)(10, "div", 45)(11, "div", 46);
    \u0275\u0275text(12);
    \u0275\u0275elementStart(13, "span", 47);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(15, "div", 48)(16, "div", 49)(17, "div", 23);
    \u0275\u0275text(18, "HP");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(19, "div", 50);
    \u0275\u0275element(20, "div", 51);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(21, "div", 52);
    \u0275\u0275text(22);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(23, "div", 53)(24, "div", 23);
    \u0275\u0275text(25, "MP");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(26, "div", 50);
    \u0275\u0275element(27, "div", 54);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(28, "div", 52);
    \u0275\u0275text(29);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(30, "div", 55);
    \u0275\u0275template(31, WuxiaGameComponent_div_40_div_31_Template, 13, 10, "div", 56);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(32, "div", 57);
    \u0275\u0275template(33, WuxiaGameComponent_div_40_div_33_Template, 2, 1, "div", 58);
    \u0275\u0275elementEnd();
    \u0275\u0275template(34, WuxiaGameComponent_div_40_div_34_Template, 9, 1, "div", 59)(35, WuxiaGameComponent_div_40_div_35_Template, 5, 0, "div", 60)(36, WuxiaGameComponent_div_40_div_36_Template, 5, 2, "div", 61);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(7);
    \u0275\u0275classProp("player-turn", ctx_r0.battleState.currentTurn === "player")("enemy-turn", ctx_r0.battleState.currentTurn === "enemy");
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.battleState.currentTurn === "player" ? "\uD50C\uB808\uC774\uC5B4" : "\uC801", " ");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r0.battleState.player.name, " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("\u26A1 ", ctx_r0.getPlayerCombatPower());
    \u0275\u0275advance(6);
    \u0275\u0275styleProp("width", ctx_r0.battleState.player.currentHp / ctx_r0.battleState.player.maxHp * 100, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", ctx_r0.battleState.player.currentHp, " / ", ctx_r0.battleState.player.maxHp);
    \u0275\u0275advance(5);
    \u0275\u0275styleProp("width", ctx_r0.battleState.player.currentMp / ctx_r0.battleState.player.maxMp * 100, "%");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", ctx_r0.battleState.player.currentMp, " / ", ctx_r0.battleState.player.maxMp);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r0.battleState.enemies);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r0.battleState.logs);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.battleState.currentTurn === "player" && !ctx_r0.battleState.isAutoBattle && !ctx_r0.battleState.ended);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.battleState.isAutoBattle && !ctx_r0.battleState.ended);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.battleState.ended);
  }
}
function WuxiaGameComponent_div_41_app_dungeon_explorer_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r11 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "app-dungeon-explorer", 91);
    \u0275\u0275listener("roomMove", function WuxiaGameComponent_div_41_app_dungeon_explorer_6_Template_app_dungeon_explorer_roomMove_0_listener($event) {
      \u0275\u0275restoreView(_r11);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.onDungeonRoomMove($event));
    })("interactableUse", function WuxiaGameComponent_div_41_app_dungeon_explorer_6_Template_app_dungeon_explorer_interactableUse_0_listener($event) {
      \u0275\u0275restoreView(_r11);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.onDungeonInteract($event));
    })("monsterAttack", function WuxiaGameComponent_div_41_app_dungeon_explorer_6_Template_app_dungeon_explorer_monsterAttack_0_listener($event) {
      \u0275\u0275restoreView(_r11);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.onDungeonMonsterBattle($event));
    })("rewardsClaimed", function WuxiaGameComponent_div_41_app_dungeon_explorer_6_Template_app_dungeon_explorer_rewardsClaimed_0_listener($event) {
      \u0275\u0275restoreView(_r11);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.onDungeonRewardsClaimed($event));
    })("floorMove", function WuxiaGameComponent_div_41_app_dungeon_explorer_6_Template_app_dungeon_explorer_floorMove_0_listener($event) {
      \u0275\u0275restoreView(_r11);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.onDungeonFloorChange($event));
    })("dungeonEscape", function WuxiaGameComponent_div_41_app_dungeon_explorer_6_Template_app_dungeon_explorer_dungeonEscape_0_listener() {
      \u0275\u0275restoreView(_r11);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.onDungeonEscape());
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("dungeon", ctx_r0.currentDungeon)("currentRoom", ctx_r0.currentDungeonRoom)("playerHp", (ctx_r0.player == null ? null : ctx_r0.player.health) || 100)("playerMaxHp", (ctx_r0.player == null ? null : ctx_r0.player.maxHealth) || 100)("playerName", (ctx_r0.player == null ? null : ctx_r0.player.name) || "\uD50C\uB808\uC774\uC5B4")("playerLevel", (ctx_r0.player == null ? null : ctx_r0.player.level) || 1)("playerAttackPower", ctx_r0.getTotalAttack())("playerDefensePower", ctx_r0.getTotalDefense());
  }
}
function WuxiaGameComponent_div_41_div_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 92)(1, "p");
    \u0275\u0275text(2, "\uB358\uC804\uC744 \uC0DD\uC131 \uC911\uC785\uB2C8\uB2E4...");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p");
    \u0275\u0275text(4, "\uACE7 \uD0D0\uD5D8\uC774 \uC2DC\uC791\uB429\uB2C8\uB2E4.");
    \u0275\u0275elementEnd()();
  }
}
function WuxiaGameComponent_div_41_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 86)(1, "div", 87)(2, "h2");
    \u0275\u0275text(3, "\u{1F3F0} \uB358\uC804 \uD0D0\uD5D8");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 88);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_41_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r10);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.onDungeonEscape());
    });
    \u0275\u0275text(5, "\uD0C8\uCD9C\uD558\uAE30");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(6, WuxiaGameComponent_div_41_app_dungeon_explorer_6_Template, 1, 8, "app-dungeon-explorer", 89)(7, WuxiaGameComponent_div_41_div_7_Template, 5, 0, "div", 90);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(6);
    \u0275\u0275property("ngIf", ctx_r0.currentDungeon);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r0.currentDungeon);
  }
}
function WuxiaGameComponent_div_42_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "div", 95);
  }
  if (rf & 2) {
    const log_r12 = ctx.$implicit;
    \u0275\u0275property("innerHTML", log_r12, \u0275\u0275sanitizeHtml);
  }
}
function WuxiaGameComponent_div_42_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 93);
    \u0275\u0275template(1, WuxiaGameComponent_div_42_div_1_Template, 1, 1, "div", 94);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r0.gameLog);
  }
}
function WuxiaGameComponent_div_43_span_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 101);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" (", ctx_r0.autoProgressCountdown.toFixed(1), "\uCD08 \uD6C4 \uC790\uB3D9 \uC9C4\uD589... Space\uB85C \uC989\uC2DC \uC9C4\uD589) ");
  }
}
function WuxiaGameComponent_div_43_button_5_span_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 106);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const choice_r14 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" (", choice_r14.disabledReason, ") ");
  }
}
function WuxiaGameComponent_div_43_button_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r13 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 102);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_43_button_5_Template_button_click_0_listener() {
      const choice_r14 = \u0275\u0275restoreView(_r13).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.selectChoice(choice_r14));
    });
    \u0275\u0275elementStart(1, "span", 103);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 104);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275template(5, WuxiaGameComponent_div_43_button_5_span_5_Template, 2, 1, "span", 105);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const choice_r14 = ctx.$implicit;
    const i_r15 = ctx.index;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275classProp("disabled", choice_r14.isDisabled)("auto-progressing", ctx_r0.isAutoProgressing);
    \u0275\u0275property("disabled", choice_r14.isDisabled);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(i_r15 + 1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(choice_r14.text);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", choice_r14.isDisabled);
  }
}
function WuxiaGameComponent_div_43_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 96)(1, "div", 97);
    \u0275\u0275text(2, " \u25B6 \uC120\uD0DD\uC9C0 ");
    \u0275\u0275template(3, WuxiaGameComponent_div_43_span_3_Template, 2, 1, "span", 98);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 99);
    \u0275\u0275template(5, WuxiaGameComponent_div_43_button_5_Template, 6, 8, "button", 100);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r0.isAutoProgressing);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r0.availableChoices);
  }
}
function WuxiaGameComponent_div_44_div_1_span_50_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 135);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" +", ctx_r0.getEquipmentBonus().attack, " ");
  }
}
function WuxiaGameComponent_div_44_div_1_span_58_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 135);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" +", ctx_r0.getEquipmentBonus().defense, " ");
  }
}
function WuxiaGameComponent_div_44_div_1_span_66_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 135);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" +", ctx_r0.getEquipmentBonus().hp, " ");
  }
}
function WuxiaGameComponent_div_44_div_1_div_69_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 125)(1, "span", 23);
    \u0275\u0275text(2, "\uCE58\uBA85\uD0C0\uC728");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 136);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", ctx_r0.getEquipmentBonus().critChance, "%");
  }
}
function WuxiaGameComponent_div_44_div_1_div_70_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 125)(1, "span", 23);
    \u0275\u0275text(2, "\uD68C\uD53C\uC728");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 136);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("+", ctx_r0.getEquipmentBonus().evasion, "%");
  }
}
function WuxiaGameComponent_div_44_div_1_div_102_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 139);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const injury_r16 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate2(" \u26A0 ", injury_r16.description, " (\uC2EC\uAC01\uB3C4: ", injury_r16.severity, ") ");
  }
}
function WuxiaGameComponent_div_44_div_1_div_102_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 137);
    \u0275\u0275template(1, WuxiaGameComponent_div_44_div_1_div_102_div_1_Template, 2, 2, "div", 138);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r0.player.injuries);
  }
}
function WuxiaGameComponent_div_44_div_1_div_103_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 140);
    \u0275\u0275text(1, " \u2713 \uBD80\uC0C1 \uC5C6\uC74C ");
    \u0275\u0275elementEnd();
  }
}
function WuxiaGameComponent_div_44_div_1_div_104_div_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 143);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const skill_r17 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" \u2694 ", skill_r17, " ");
  }
}
function WuxiaGameComponent_div_44_div_1_div_104_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 113)(1, "h3");
    \u0275\u0275text(2, "\uC2B5\uB4DD\uD55C \uBB34\uACF5");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 141);
    \u0275\u0275template(4, WuxiaGameComponent_div_44_div_1_div_104_div_4_Template, 2, 1, "div", 142);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275property("ngForOf", ctx_r0.player.learnedSkills);
  }
}
function WuxiaGameComponent_div_44_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 111)(1, "h2", 112);
    \u0275\u0275text(2, "\uCE90\uB9AD\uD130 \uC815\uBCF4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 113)(4, "h3");
    \u0275\u0275text(5, "\uAE30\uBCF8 \uC815\uBCF4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 114)(7, "span", 115);
    \u0275\u0275text(8, "\uC774\uB984:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "span", 116);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(11, "div", 114)(12, "span", 115);
    \u0275\u0275text(13, "\uB808\uBCA8:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "span", 116);
    \u0275\u0275text(15);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(16, "div", 114)(17, "span", 115);
    \u0275\u0275text(18, "\uACBD\uD5D8\uCE58:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(19, "span", 116);
    \u0275\u0275text(20);
    \u0275\u0275elementStart(21, "span", 117);
    \u0275\u0275text(22);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(23, "div", 118);
    \u0275\u0275element(24, "div", 119);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(25, "div", 114)(26, "span", 115);
    \u0275\u0275text(27, "\uBB38\uD30C:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(28, "span", 116);
    \u0275\u0275text(29);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(30, "div", 114)(31, "span", 115);
    \u0275\u0275text(32, "\uC131\uACA9:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(33, "span", 116);
    \u0275\u0275text(34);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(35, "div", 120)(36, "h3");
    \u0275\u0275text(37, "\u2694\uFE0F \uC804\uD22C\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(38, "div", 121)(39, "div", 122)(40, "span", 23);
    \u0275\u0275text(41, "\uC885\uD569 \uC804\uD22C\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(42, "span", 123);
    \u0275\u0275text(43);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(44, "div", 124)(45, "div", 125)(46, "span", 23);
    \u0275\u0275text(47, "\uACF5\uACA9\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(48, "span", 24);
    \u0275\u0275text(49);
    \u0275\u0275template(50, WuxiaGameComponent_div_44_div_1_span_50_Template, 2, 1, "span", 126);
    \u0275\u0275elementStart(51, "span", 127);
    \u0275\u0275text(52);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(53, "div", 125)(54, "span", 23);
    \u0275\u0275text(55, "\uBC29\uC5B4\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(56, "span", 24);
    \u0275\u0275text(57);
    \u0275\u0275template(58, WuxiaGameComponent_div_44_div_1_span_58_Template, 2, 1, "span", 126);
    \u0275\u0275elementStart(59, "span", 127);
    \u0275\u0275text(60);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(61, "div", 125)(62, "span", 23);
    \u0275\u0275text(63, "\uCD5C\uB300 \uC0DD\uBA85\uB825");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(64, "span", 24);
    \u0275\u0275text(65);
    \u0275\u0275template(66, WuxiaGameComponent_div_44_div_1_span_66_Template, 2, 1, "span", 126);
    \u0275\u0275elementStart(67, "span", 127);
    \u0275\u0275text(68);
    \u0275\u0275elementEnd()()();
    \u0275\u0275template(69, WuxiaGameComponent_div_44_div_1_div_69_Template, 5, 1, "div", 128)(70, WuxiaGameComponent_div_44_div_1_div_70_Template, 5, 1, "div", 128);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(71, "div", 113)(72, "h3");
    \u0275\u0275text(73, "\uB2A5\uB825\uCE58");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(74, "div", 129)(75, "span", 130);
    \u0275\u0275text(76, "\uADFC\uB825 (Strength)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(77, "span", 131);
    \u0275\u0275text(78);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(79, "div", 129)(80, "span", 130);
    \u0275\u0275text(81, "\uBBFC\uCCA9 (Dexterity)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(82, "span", 131);
    \u0275\u0275text(83);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(84, "div", 129)(85, "span", 130);
    \u0275\u0275text(86, "\uB0B4\uACF5 (Inner Power)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(87, "span", 131);
    \u0275\u0275text(88);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(89, "div", 129)(90, "span", 130);
    \u0275\u0275text(91, "\uD1B5\uCC30 (Insight)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(92, "span", 131);
    \u0275\u0275text(93);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(94, "div", 113)(95, "h3");
    \u0275\u0275text(96, "\uC0C1\uD0DC");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(97, "div", 114)(98, "span", 115);
    \u0275\u0275text(99, "\uC0DD\uBA85\uB825:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(100, "span", 116);
    \u0275\u0275text(101);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(102, WuxiaGameComponent_div_44_div_1_div_102_Template, 2, 1, "div", 132)(103, WuxiaGameComponent_div_44_div_1_div_103_Template, 2, 0, "div", 133);
    \u0275\u0275elementEnd();
    \u0275\u0275template(104, WuxiaGameComponent_div_44_div_1_div_104_Template, 5, 1, "div", 134);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(10);
    \u0275\u0275textInterpolate(ctx_r0.player.name);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.player.level);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate2(" ", ctx_r0.player.experience, " / ", ctx_r0.player.experienceToNext, " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("(", ctx_r0.getExperiencePercentage().toFixed(1), "%)");
    \u0275\u0275advance(2);
    \u0275\u0275styleProp("width", ctx_r0.getExperiencePercentage(), "%");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.player.sect || "\uBB34\uC18C\uC18D");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.player.personality);
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate(ctx_r0.getTotalCombatPower());
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", ctx_r0.getBaseAttack(), " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.getEquipmentBonus().attack > 0);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("= ", ctx_r0.getTotalAttack());
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r0.getBaseDefense(), " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.getEquipmentBonus().defense > 0);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("= ", ctx_r0.getTotalDefense());
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r0.getBaseMaxHp(), " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.getEquipmentBonus().hp > 0);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("= ", ctx_r0.player.maxHealth);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.getEquipmentBonus().critChance > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.getEquipmentBonus().evasion > 0);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate(ctx_r0.player.stats.strength);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.player.stats.dexterity);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.player.stats.innerPower);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.player.stats.insight);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate2("", ctx_r0.player.health, " / ", ctx_r0.player.maxHealth);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.player.injuries.length > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.player.injuries.length === 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.player.learnedSkills.length > 0);
  }
}
function WuxiaGameComponent_div_44_div_2_div_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r18 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 155)(1, "span", 156);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "button", 157);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_44_div_2_div_10_Template_button_click_3_listener() {
      \u0275\u0275restoreView(_r18);
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.unequipItem("weapon"));
    });
    \u0275\u0275text(4, "\uD574\uC81C");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const weapon_r19 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275classMap("rarity-" + weapon_r19.rarity);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(weapon_r19.name);
  }
}
function WuxiaGameComponent_div_44_div_2_span_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 158);
    \u0275\u0275text(1, "\uC5C6\uC74C");
    \u0275\u0275elementEnd();
  }
}
function WuxiaGameComponent_div_44_div_2_div_15_Template(rf, ctx) {
  if (rf & 1) {
    const _r20 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 155)(1, "span", 156);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "button", 157);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_44_div_2_div_15_Template_button_click_3_listener() {
      \u0275\u0275restoreView(_r20);
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.unequipItem("armor"));
    });
    \u0275\u0275text(4, "\uD574\uC81C");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const armor_r21 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275classMap("rarity-" + armor_r21.rarity);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(armor_r21.name);
  }
}
function WuxiaGameComponent_div_44_div_2_span_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 158);
    \u0275\u0275text(1, "\uC5C6\uC74C");
    \u0275\u0275elementEnd();
  }
}
function WuxiaGameComponent_div_44_div_2_div_20_Template(rf, ctx) {
  if (rf & 1) {
    const _r22 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 155)(1, "span", 156);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "button", 157);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_44_div_2_div_20_Template_button_click_3_listener() {
      \u0275\u0275restoreView(_r22);
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.unequipItem("accessory"));
    });
    \u0275\u0275text(4, "\uD574\uC81C");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const accessory_r23 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275classMap("rarity-" + accessory_r23.rarity);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(accessory_r23.name);
  }
}
function WuxiaGameComponent_div_44_div_2_span_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 158);
    \u0275\u0275text(1, "\uC5C6\uC74C");
    \u0275\u0275elementEnd();
  }
}
function WuxiaGameComponent_div_44_div_2_div_25_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 159);
    \u0275\u0275text(1, " \uC778\uBCA4\uD1A0\uB9AC\uAC00 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4. ");
    \u0275\u0275elementEnd();
  }
}
function WuxiaGameComponent_div_44_div_2_div_27_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 169);
    \u0275\u0275text(1, " [\uC7A5\uCC29\uC911] ");
    \u0275\u0275elementEnd();
  }
}
function WuxiaGameComponent_div_44_div_2_div_27_span_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 170);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r24 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" x", item_r24.quantity, " ");
  }
}
function WuxiaGameComponent_div_44_div_2_div_27_div_8_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 173);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const statLine_r25 = ctx.$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", statLine_r25, " ");
  }
}
function WuxiaGameComponent_div_44_div_2_div_27_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 171);
    \u0275\u0275template(1, WuxiaGameComponent_div_44_div_2_div_27_div_8_div_1_Template, 2, 1, "div", 172);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const item_r24 = \u0275\u0275nextContext().$implicit;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r0.getItemStatsDisplay(item_r24));
  }
}
function WuxiaGameComponent_div_44_div_2_div_27_button_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r26 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 174);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_44_div_2_div_27_button_10_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r26);
      const item_r24 = \u0275\u0275nextContext().$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.equipItem(item_r24));
    });
    \u0275\u0275text(1, " \uC7A5\uCC29 ");
    \u0275\u0275elementEnd();
  }
}
function WuxiaGameComponent_div_44_div_2_div_27_button_11_Template(rf, ctx) {
  if (rf & 1) {
    const _r27 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 175);
    \u0275\u0275listener("click", function WuxiaGameComponent_div_44_div_2_div_27_button_11_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r27);
      const item_r24 = \u0275\u0275nextContext().$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.unequipItemByItem(item_r24));
    });
    \u0275\u0275text(1, " \uD574\uC81C ");
    \u0275\u0275elementEnd();
  }
}
function WuxiaGameComponent_div_44_div_2_div_27_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 160)(1, "div", 161)(2, "span", 156);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275template(4, WuxiaGameComponent_div_44_div_2_div_27_span_4_Template, 2, 0, "span", 162)(5, WuxiaGameComponent_div_44_div_2_div_27_span_5_Template, 2, 1, "span", 163);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 164);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275template(8, WuxiaGameComponent_div_44_div_2_div_27_div_8_Template, 2, 1, "div", 165);
    \u0275\u0275elementStart(9, "div", 166);
    \u0275\u0275template(10, WuxiaGameComponent_div_44_div_2_div_27_button_10_Template, 2, 0, "button", 167)(11, WuxiaGameComponent_div_44_div_2_div_27_button_11_Template, 2, 0, "button", 168);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const item_r24 = ctx.$implicit;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(2);
    \u0275\u0275classMap("rarity-" + item_r24.rarity);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", item_r24.name, " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r24.isEquipped);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r24.quantity > 1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(item_r24.description);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r24.stats);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", ctx_r0.canEquipItem(item_r24) && !item_r24.isEquipped);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", item_r24.isEquipped);
  }
}
function WuxiaGameComponent_div_44_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 144)(1, "h2", 112);
    \u0275\u0275text(2, "\uC18C\uC9C0\uD488");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 145)(4, "h3");
    \u0275\u0275text(5, "\uC7A5\uCC29 \uC911");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "div", 146)(7, "div", 147)(8, "span", 148);
    \u0275\u0275text(9, "\uBB34\uAE30:");
    \u0275\u0275elementEnd();
    \u0275\u0275template(10, WuxiaGameComponent_div_44_div_2_div_10_Template, 5, 3, "div", 149)(11, WuxiaGameComponent_div_44_div_2_span_11_Template, 2, 0, "span", 150);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "div", 147)(13, "span", 148);
    \u0275\u0275text(14, "\uC758\uBCF5:");
    \u0275\u0275elementEnd();
    \u0275\u0275template(15, WuxiaGameComponent_div_44_div_2_div_15_Template, 5, 3, "div", 149)(16, WuxiaGameComponent_div_44_div_2_span_16_Template, 2, 0, "span", 150);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "div", 147)(18, "span", 148);
    \u0275\u0275text(19, "\uC545\uC138\uC0AC\uB9AC:");
    \u0275\u0275elementEnd();
    \u0275\u0275template(20, WuxiaGameComponent_div_44_div_2_div_20_Template, 5, 3, "div", 149)(21, WuxiaGameComponent_div_44_div_2_span_21_Template, 2, 0, "span", 150);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(22, "div", 151)(23, "h3");
    \u0275\u0275text(24, "\uBCF4\uC720 \uC911");
    \u0275\u0275elementEnd();
    \u0275\u0275template(25, WuxiaGameComponent_div_44_div_2_div_25_Template, 2, 0, "div", 152);
    \u0275\u0275elementStart(26, "div", 153);
    \u0275\u0275template(27, WuxiaGameComponent_div_44_div_2_div_27_Template, 12, 9, "div", 154);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(10);
    \u0275\u0275property("ngIf", ctx_r0.getEquippedWeapon());
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r0.getEquippedWeapon());
    \u0275\u0275advance(4);
    \u0275\u0275property("ngIf", ctx_r0.getEquippedArmor());
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r0.getEquippedArmor());
    \u0275\u0275advance(4);
    \u0275\u0275property("ngIf", ctx_r0.getEquippedAccessory());
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r0.getEquippedAccessory());
    \u0275\u0275advance(4);
    \u0275\u0275property("ngIf", ctx_r0.player.inventory.length === 0);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngForOf", ctx_r0.player.inventory);
  }
}
function WuxiaGameComponent_div_44_div_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 176)(1, "h2", 112);
    \u0275\u0275text(2, "\uB3C4\uC6C0\uB9D0");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 177)(4, "h3");
    \u0275\u0275text(5, "\uAC8C\uC784 \uC18C\uAC1C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "p");
    \u0275\u0275text(7, " \uBB35\uD5A5\uC9C0\uC5F0(\u58A8\u9999\u4E4B\u7DE3)\uC740 100% \uD14D\uC2A4\uD2B8\uB85C \uC9C4\uD589\uB418\uB294 \uBB34\uD611 \uC778\uD130\uB799\uD2F0\uBE0C \uD53D\uC158 \uAC8C\uC784\uC785\uB2C8\uB2E4. \uB2F9\uC2E0\uC758 \uC120\uD0DD, \uB2A5\uB825\uCE58, \uC131\uD5A5\uC5D0 \uB530\uB77C \uC774\uC57C\uAE30\uAC00 \uC2E4\uC2DC\uAC04\uC73C\uB85C \uBCC0\uD654\uD569\uB2C8\uB2E4. ");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 177)(9, "h3");
    \u0275\u0275text(10, "\uB2A5\uB825\uCE58 \uC124\uBA85");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "ul")(12, "li")(13, "strong");
    \u0275\u0275text(14, "\uADFC\uB825:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(15, " \uBB3C\uB9AC\uC801 \uD310\uC815, \uBB34\uAC70\uC6B4 \uBB34\uAE30 \uC0AC\uC6A9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "li")(17, "strong");
    \u0275\u0275text(18, "\uBBFC\uCCA9:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(19, " \uD68C\uD53C, \uC7A0\uC785, \uACBD\uACF5, \uC554\uAE30 \uD310\uC815");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "li")(21, "strong");
    \u0275\u0275text(22, "\uB0B4\uACF5:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(23, " \uBB34\uACF5 \uC704\uB825, \uB0B4\uACF5 \uAC10\uC9C0, \uD68C\uBCF5 \uC18D\uB3C4");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(24, "li")(25, "strong");
    \u0275\u0275text(26, "\uD1B5\uCC30:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(27, " \uB2E8\uC11C \uBC1C\uACAC, \uC758\uB3C4 \uAC04\uD30C, \uD568\uC815 \uBC1C\uACAC");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(28, "div", 177)(29, "h3");
    \u0275\u0275text(30, "\uC131\uD5A5 \uC2DC\uC2A4\uD15C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(31, "p");
    \u0275\u0275text(32, " \uB2F9\uC2E0\uC758 \uD589\uB3D9\uC5D0 \uB530\uB77C \uC131\uD5A5\uC774 \uBCC0\uD654\uD569\uB2C8\uB2E4.");
    \u0275\u0275element(33, "br");
    \u0275\u0275elementStart(34, "span", 178);
    \u0275\u0275text(35, "\uC815\uB3C4");
    \u0275\u0275elementEnd();
    \u0275\u0275text(36, " (-100 ~ -20) / ");
    \u0275\u0275elementStart(37, "span", 179);
    \u0275\u0275text(38, "\uC911\uB9BD");
    \u0275\u0275elementEnd();
    \u0275\u0275text(39, " (-19 ~ 19) / ");
    \u0275\u0275elementStart(40, "span", 180);
    \u0275\u0275text(41, "\uC0AC\uB3C4");
    \u0275\u0275elementEnd();
    \u0275\u0275text(42, " (20 ~ 100) ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(43, "p");
    \u0275\u0275text(44, " \uC131\uD5A5\uC740 NPC\uC758 \uBC18\uC751, \uC120\uD0DD\uC9C0, \uD2B9\uC218 \uC774\uBCA4\uD2B8 \uBC1C\uB3D9\uC5D0 \uC601\uD5A5\uC744 \uC90D\uB2C8\uB2E4. ");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(45, "div", 177)(46, "h3");
    \u0275\u0275text(47, "\uC870\uC791 \uBC29\uBC95");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(48, "ul")(49, "li");
    \u0275\u0275text(50, "\uC22B\uC790 \uBC84\uD2BC \uB610\uB294 \uD074\uB9AD\uC73C\uB85C \uC120\uD0DD\uC9C0\uB97C \uC120\uD0DD\uD569\uB2C8\uB2E4.");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(51, "li");
    \u0275\u0275text(52, "[\uC870\uAC74]\uC774 \uD45C\uC2DC\uB41C \uC120\uD0DD\uC9C0\uB294 \uD2B9\uC815 \uC870\uAC74\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(53, "li");
    \u0275\u0275text(54, "\uC870\uAC74 \uBBF8\uB2EC \uC2DC \uC120\uD0DD\uC9C0\uAC00 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4.");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(55, "li");
    \u0275\u0275text(56, "\uD310\uC815\uC774 \uD544\uC694\uD55C \uC120\uD0DD\uC9C0\uB294 \uB2A5\uB825\uCE58\uB85C \uC131\uACF5/\uC2E4\uD328\uAC00 \uACB0\uC815\uB429\uB2C8\uB2E4.");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(57, "div", 177)(58, "h3");
    \u0275\u0275text(59, "\uB3D9\uC801 \uC0C1\uD669 \uC2DC\uC2A4\uD15C");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(60, "p");
    \u0275\u0275text(61, " \uD2B9\uC815 \uC870\uAC74(\uC7A5\uC18C, \uC2DC\uAC04, \uB2A5\uB825\uCE58, \uC544\uC774\uD15C \uB4F1)\uC774 \uCDA9\uC871\uB418\uBA74 \uBA54\uC778 \uC2A4\uD1A0\uB9AC\uC640 \uBCC4\uAC1C\uB85C \uD2B9\uC218 \uC774\uBCA4\uD2B8\uAC00 \uC790\uB3D9\uC73C\uB85C \uBC1C\uC0DD\uD569\uB2C8\uB2E4. ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(62, "p");
    \u0275\u0275text(63, " \uAE30\uC5F0, \uC5F0\uC560, \uB77C\uC774\uBC8C\uACFC\uC758 \uC870\uC6B0 \uB4F1 \uB2E4\uC591\uD55C \uC0C1\uD669\uC744 \uACBD\uD5D8\uD558\uC138\uC694. ");
    \u0275\u0275elementEnd()()();
  }
}
function WuxiaGameComponent_div_44_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 107);
    \u0275\u0275template(1, WuxiaGameComponent_div_44_div_1_Template, 105, 30, "div", 108)(2, WuxiaGameComponent_div_44_div_2_Template, 28, 8, "div", 109)(3, WuxiaGameComponent_div_44_div_3_Template, 64, 0, "div", 110);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.showCharacterSheet && ctx_r0.player);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.showInventory && ctx_r0.player);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.showHelp);
  }
}
var WuxiaGameComponent = class _WuxiaGameComponent {
  destroy$ = new Subject();
  // Services
  sceneService = inject(WuxiaSceneService);
  situationService = inject(WuxiaSituationService);
  notification = inject(NotificationService);
  equipmentService = inject(EquipmentService);
  debugLogger = inject(DebugLoggerService);
  dungeonGenerator = inject(DungeonGeneratorService);
  dungeonService = inject(DungeonService);
  gameStorage = inject(GameStorageService);
  modalService = inject(GameModalService);
  cdr = inject(ChangeDetectorRef);
  // 모달 상태
  modalState = null;
  isModalOpen = false;
  // ===== 게임 상태 =====
  gameState = null;
  player = null;
  // ===== 현재 장면 =====
  currentScene = null;
  availableChoices = [];
  // ===== 전투 상태 =====
  inBattle = false;
  battleState = null;
  showSkillMenu = false;
  autoBattleInterval;
  // ===== UI 상태 =====
  showInventory = false;
  showCharacterSheet = false;
  showHelp = false;
  // ===== 게임 로그 =====
  gameLog = [];
  maxLogLines = 100;
  // ===== 자동 진행 =====
  autoProgressTimer;
  isAutoProgressing = false;
  autoProgressCountdown = 0;
  // ===== 임시: NPC 데이터 =====
  availableNPCs = [];
  // ===== 메타 =====
  currentLocation = "start_village";
  currentTimeOfDay = "morning";
  ngOnInit() {
    this.inBattle = false;
    this.battleState = null;
    this.showSkillMenu = false;
    this.showDungeonExplorer = false;
    this.currentDungeon = null;
    this.currentDungeonRoom = null;
    this.initializeGame();
    this.setupKeyboardListeners();
    this.subscribeToModal();
  }
  ngOnDestroy() {
    this.destroy$.next();
    this.destroy$.complete();
    this.clearAutoProgress();
  }
  /**
   * 모달 구독 설정
   */
  subscribeToModal() {
    this.modalService.modal$.pipe(takeUntil(this.destroy$)).subscribe((state2) => {
      this.isModalOpen = state2.isOpen;
      this.modalState = state2.config;
      this.cdr.detectChanges();
    });
  }
  /**
   * 모달 확인
   */
  onModalConfirm() {
    if (this.modalState?.onConfirm) {
      this.modalState.onConfirm();
    }
    this.modalService.close();
  }
  /**
   * 모달 취소
   */
  onModalCancel() {
    if (this.modalState?.onCancel) {
      this.modalState.onCancel();
    }
    this.modalService.close();
  }
  /**
   * 모달 닫기
   */
  onModalClose() {
    this.modalService.close();
  }
  /**
   * 키보드 리스너 설정
   */
  setupKeyboardListeners() {
    document.addEventListener("keydown", (event) => {
      if (event.code === "Space" && !this.inBattle) {
        event.preventDefault();
        this.handleSpaceKey();
      }
    });
  }
  /**
   * 게임 초기화
   */
  initializeGame() {
    return __async(this, null, function* () {
      this.loadChapter1Scenes();
      this.loadChapter1NPCs();
      this.loadAdditionalSituations();
      const hasSavedGame = yield this.checkAndLoadSavedGame();
      if (!hasSavedGame) {
        this.startNewGameInternal();
      }
    });
  }
  /**
   * 저장된 게임 확인 및 자동 로드
   */
  checkAndLoadSavedGame() {
    return __async(this, null, function* () {
      try {
        const saveData = yield this.gameStorage.loadGame("slot_1");
        if (saveData) {
          this.inBattle = false;
          this.battleState = null;
          this.showSkillMenu = false;
          const player = saveData.playerCharacter;
          this.player = __spreadProps(__spreadValues({}, player), {
            flags: new Set(player.flags || []),
            relationships: new Map(player.relationships || [])
          });
          if (!this.player) {
            return false;
          }
          this.gameState = {
            gameId: "wuxia_rpg",
            currentChapter: saveData.currentChapter,
            chapterProgress: 0,
            player: this.player,
            currentSceneId: "",
            visitedScenes: [],
            completedSituations: [],
            activeSituations: [],
            currentObjective: "",
            completedObjectives: [],
            playTime: 0,
            saveDate: new Date(saveData.saveDate)
          };
          if (saveData.dungeonProgress && saveData.dungeonProgress.isInDungeon) {
            this.currentDungeon = saveData.dungeonProgress.currentDungeon;
            this.currentDungeonRoom = saveData.dungeonProgress.currentRoom;
            this.showDungeonExplorer = false;
            this.inBattle = false;
            this.battleState = null;
            this.showSkillMenu = false;
            this.addLog("\u{1F3F0} [\uB358\uC804 \uB370\uC774\uD130 \uBCF5\uC6D0\uB428]");
            this.addLog("\u26A0\uFE0F [\uC804\uD22C \uBC29\uC9C0\uB97C \uC704\uD574 \uB358\uC804 \uD654\uBA74\uC740 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4]");
            this.addLog("\u{1F4A1} [\uB358\uC804 \uC785\uC7A5 \uBC84\uD2BC\uC744 \uB20C\uB7EC \uB2E4\uC2DC \uC785\uC7A5\uD558\uC138\uC694]");
          } else {
            this.loadScene("scene_start");
          }
          this.addLog("=== \uBB35\uD5A5\uC9C0\uC5F0 (\u58A8\u9999\u4E4B\u7DE3) ===");
          this.addLog("\u{1F4C2} [\uC800\uC7A5\uB41C \uAC8C\uC784\uC744 \uBD88\uB7EC\uC654\uC2B5\uB2C8\uB2E4]");
          this.addLog(`\uB808\uBCA8: ${this.player.level} | \uACBD\uD5D8\uCE58: ${this.player.experience}/${this.player.experienceToNext}`);
          this.addLog(`\uC804\uD22C\uB825: ${saveData.combatPower || 0}`);
          this.addLog(`\uC9C4\uD589\uB3C4: \uCC55\uD130 ${this.gameState.currentChapter}`);
          this.addLog("");
          this.debugLogger.info("WuxiaGame", "\uC800\uC7A5\uB41C \uAC8C\uC784 \uC790\uB3D9 \uB85C\uB4DC \uC644\uB8CC");
          return true;
        }
        return false;
      } catch (error) {
        this.debugLogger.error("WuxiaGame", `\uC790\uB3D9 \uB85C\uB4DC \uC2E4\uD328: ${error}`);
        return false;
      }
    });
  }
  /**
   * 새 게임 시작 (내부용)
   */
  startNewGameInternal() {
    this.debugLogger.info("WuxiaGame", "=== \uC0C8 \uAC8C\uC784 \uC2DC\uC791 ===");
    this.inBattle = false;
    this.battleState = null;
    this.showSkillMenu = false;
    this.debugLogger.info("WuxiaGame", `\uC804\uD22C \uC0C1\uD0DC \uCD08\uAE30\uD654: inBattle=${this.inBattle}`);
    this.showDungeonExplorer = false;
    this.currentDungeon = null;
    this.currentDungeonRoom = null;
    this.debugLogger.info("WuxiaGame", `\uB358\uC804 \uC0C1\uD0DC \uCD08\uAE30\uD654: showDungeonExplorer=${this.showDungeonExplorer}`);
    this.showInventory = false;
    this.showCharacterSheet = false;
    this.showHelp = false;
    this.cdr.detectChanges();
    this.player = this.createDefaultPlayer();
    this.gameState = {
      gameId: `game_${Date.now()}`,
      saveDate: /* @__PURE__ */ new Date(),
      playTime: 0,
      player: this.player,
      currentSceneId: "scene_start",
      visitedScenes: [],
      activeSituations: [],
      completedSituations: [],
      currentChapter: 1,
      chapterProgress: 0,
      currentObjective: "\uC0AC\uB77C\uC9C4 \uC0AC\uD615\uC744 \uCC3E\uC544\uB77C",
      completedObjectives: []
    };
    this.loadScene("scene_start");
    this.addLog("=== \uBB35\uD5A5\uC9C0\uC5F0 (\u58A8\u9999\u4E4B\u7DE3) ===");
    this.addLog("\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uBB34\uD611 RPG\uC5D0 \uC624\uC2E0 \uAC83\uC744 \uD658\uC601\uD569\uB2C8\uB2E4.");
    this.addLog("");
    this.cdr.detectChanges();
    this.debugLogger.info("WuxiaGame", `\uC0C8 \uAC8C\uC784 \uC2DC\uC791 \uC644\uB8CC - inBattle: ${this.inBattle}, showDungeonExplorer: ${this.showDungeonExplorer}`);
  }
  /**
   * 기본 플레이어 생성
   */
  createDefaultPlayer() {
    const starterWeapon = __spreadProps(__spreadValues({}, STARTER_EQUIPMENT[0]), { isEquipped: true });
    const starterArmor = __spreadProps(__spreadValues({}, STARTER_EQUIPMENT[1]), { isEquipped: true });
    const testWeapon = __spreadValues({}, WEAPONS[2]);
    const testArmor = __spreadValues({}, ARMORS[2]);
    return {
      name: "\uAC80\uAC1D",
      level: 1,
      experience: 0,
      experienceToNext: 100,
      // 레벨 2까지 100 경험치
      stats: {
        strength: 18,
        // 근력
        dexterity: 20,
        // 민첩
        innerPower: 15,
        // 내공
        insight: 22
        // 통찰
      },
      health: 100,
      maxHealth: 100,
      injuries: [],
      sect: "huashan",
      // 화산파
      personality: "righteous",
      tendency: {
        value: -10,
        // 정파 성향
        label: "\uC815\uD30C",
        description: "\uC815\uC758\uB85C\uC6B4 \uD611\uAC1D\uC758 \uAE38\uC744 \uAC77\uB294\uB2E4."
      },
      learnedSkills: ["huashan_basic_sword"],
      inventory: [
        starterWeapon,
        // 목검 (장착중)
        starterArmor,
        // 천의 (장착중)
        testWeapon,
        // 강철검 (테스트용)
        testArmor,
        // 화산도복 (테스트용)
        {
          id: "silver",
          name: "\uC740\uC790",
          type: "misc",
          rarity: "common",
          description: "\uAC15\uD638\uC5D0\uC11C \uD1B5\uC6A9\uB418\uB294 \uD654\uD3D0",
          quantity: 100
        }
      ],
      equippedItems: {
        weapon: starterWeapon.id,
        armor: starterArmor.id
      },
      flags: /* @__PURE__ */ new Set(),
      relationships: /* @__PURE__ */ new Map()
    };
  }
  /**
   * 챕터 1 장면 데이터 로드
   */
  loadChapter1Scenes() {
    this.sceneService.registerScenes(CHAPTER_1_SCENES);
    this.addLog(`\u2713 \uCC55\uD130 1 \uC7A5\uBA74 ${CHAPTER_1_SCENES.length}\uAC1C \uB85C\uB4DC \uC644\uB8CC`);
  }
  /**
   * 챕터 1 NPC 로드
   */
  loadChapter1NPCs() {
    this.availableNPCs = CHAPTER_1_NPCS;
    this.addLog(`\u2713 NPC ${CHAPTER_1_NPCS.length}\uBA85 \uB85C\uB4DC \uC644\uB8CC`);
  }
  /**
   * 추가 상황 템플릿 등록
   */
  loadAdditionalSituations() {
    ADDITIONAL_SITUATION_TEMPLATES.forEach((template) => {
      this.situationService.registerTemplate(template);
    });
    this.addLog(`\u2713 \uC0C1\uD669 \uD15C\uD50C\uB9BF ${ADDITIONAL_SITUATION_TEMPLATES.length}\uAC1C \uB4F1\uB85D \uC644\uB8CC`);
  }
  /**
   * 샘플 장면 데이터 로드 (레거시 - 제거 예정)
   */
  loadSampleScenes() {
    const scenes = [
      {
        id: "scene_start",
        title: "\uD63C\uD0C1\uD55C \uAC15\uD638",
        narrativeText: [
          "\uD654\uC0B0\uD30C\uC758 \uB9C9\uB0B4 \uC81C\uC790\uC778 \uB2F9\uC2E0\uC740 \uC2EC\uAC01\uD55C \uC18C\uC2DD\uC744 \uB4E4\uC5C8\uB2E4.",
          "\uAC00\uC7A5 \uC544\uB07C\uB358 \uC0AC\uD615 `\uCCAD\uC6B4`\uC774 \uD751\uD48D\uCC44\uB85C \uB5A0\uB09C \uB4A4 \uC18C\uC2DD\uC774 \uB04A\uACBC\uB2E4\uB294 \uAC83\uC774\uB2E4.",
          "",
          "\uC7A5\uBB38\uC778\uAED8\uC11C\uB294 \uB2F9\uC2E0\uC744 \uBD80\uB974\uC168\uB2E4.",
          '"\uB124\uAC00 \uAC00\uAC70\uB77C. \uC0AC\uD615\uC744 \uCC3E\uC544\uC624\uB108\uB77C. \uADF8\uB7EC\uB098... \uBB34\uB9AC\uD558\uC9C0\uB294 \uB9D0\uAC70\uB77C."',
          "",
          "\uB099\uC591\uC73C\uB85C \uAC00\uB294 \uAE38\uBAA9, \uB2F9\uC2E0\uC740 \uD55C \uC8FC\uB9C9 \uC55E\uC5D0 \uBA48\uCDB0 \uC130\uB2E4."
        ],
        choices: [
          {
            id: "choice_enter_inn",
            text: "\uC8FC\uB9C9\uC5D0 \uB4E4\uC5B4\uAC00 \uC815\uBCF4\uB97C \uC5BB\uB294\uB2E4.",
            nextSceneId: "scene_inn_inside"
          },
          {
            id: "choice_continue",
            text: "\uC11C\uB450\uB978\uB2E4. \uACE7\uC7A5 \uD751\uD48D\uCC44\uB85C \uD5A5\uD55C\uB2E4.",
            nextSceneId: "scene_forest_path",
            conditions: [
              {
                type: "stat",
                param: "dexterity",
                operator: ">=",
                value: 15,
                displayText: "[\uBBFC\uCCA9 15 \uC774\uC0C1]"
              }
            ]
          },
          {
            id: "choice_meditate",
            text: "\uADFC\uCC98 \uBC14\uC704\uC5D0 \uC549\uC544 \uB0B4\uACF5\uC744 \uC6B4\uC6A9\uD55C\uB2E4.",
            nextSceneId: "scene_meditation",
            consequences: [
              {
                type: "stat_change",
                param: "innerPower",
                value: 2,
                description: "\uB0B4\uACF5 +2"
              }
            ]
          }
        ],
        tags: ["chapter_1", "main_quest"],
        location: "road_to_luoyang",
        timeOfDay: "afternoon"
      },
      {
        id: "scene_inn_inside",
        title: "\uC740\uC740\uD55C \uC220 \uB0C4\uC0C8",
        narrativeText: [
          "\uC8FC\uB9C9 \uC548\uC740 \uC2DC\uB04C\uBC85\uC801\uD558\uB2E4.",
          "\uD55C\uCABD \uAD6C\uC11D\uC5D0\uC11C \uC218\uC0C1\uD55C \uC0AC\uB0B4\uB4E4\uC774 \uC6C5\uC131\uAC70\uB9AC\uACE0 \uC788\uB2E4.",
          '\uC8FC\uBAA8\uAC00 \uB2E4\uAC00\uC640 \uBB3B\uB294\uB2E4. "\uBB34\uC5C7\uC744 \uB4DC\uC2DC\uACA0\uC2B5\uB2C8\uAE4C, \uC18C\uD611?"'
        ],
        choices: [
          {
            id: "choice_order_wine",
            text: "\uC220 \uD55C \uC794\uC744 \uC2DC\uD0A8\uB2E4.",
            nextSceneId: "scene_inn_wine",
            consequences: [
              {
                type: "item_lose",
                param: "gold",
                value: 5,
                description: "\uAE08\uD654 -5"
              }
            ]
          },
          {
            id: "choice_ask_info",
            text: "[\uD1B5\uCC30 20 \uC774\uC0C1] \uC8FC\uBAA8\uC5D0\uAC8C \uD751\uD48D\uCC44\uC5D0 \uB300\uD574 \uC740\uBC00\uD788 \uBB3C\uC5B4\uBCF8\uB2E4.",
            nextSceneId: "scene_inn_information",
            conditions: [
              {
                type: "stat",
                param: "insight",
                operator: ">=",
                value: 20,
                displayText: "[\uD1B5\uCC30 20 \uC774\uC0C1]"
              }
            ]
          },
          {
            id: "choice_approach_thugs",
            text: "\uC218\uC0C1\uD55C \uC0AC\uB0B4\uB4E4\uC5D0\uAC8C \uB2E4\uAC00\uAC04\uB2E4.",
            nextSceneId: "scene_inn_confrontation",
            judgment: {
              stat: "insight",
              difficulty: 25,
              successSceneId: "scene_inn_info_success",
              failureSceneId: "scene_inn_fight"
            }
          }
        ],
        location: "inn",
        timeOfDay: "afternoon"
      },
      {
        id: "scene_meditation",
        title: "\uACE0\uC694\uD55C \uC218\uB828",
        narrativeText: [
          "\uBC14\uC704\uC5D0 \uC549\uC544 \uC228\uC744 \uAC00\uB2E4\uB4EC\uB294\uB2E4.",
          "\uB2E8\uC804\uC5D0 \uAE30\uC6B4\uC774 \uBAA8\uC774\uB294 \uAC83\uC744 \uB290\uB080\uB2E4.",
          "\uC7A0\uC2DC \uD6C4, \uBA38\uB9BF\uC18D\uC774 \uD55C\uACB0 \uB9D1\uC544\uC9C4 \uAE30\uBD84\uC774\uB2E4.",
          "",
          "[\uB0B4\uACF5 +2]"
        ],
        choices: [
          {
            id: "choice_continue_meditation",
            text: "\uC870\uAE08 \uB354 \uC218\uB828\uD55C\uB2E4.",
            nextSceneId: "scene_meditation_deep",
            conditions: [
              {
                type: "stat",
                param: "innerPower",
                operator: ">=",
                value: 12,
                displayText: "[\uB0B4\uACF5 12 \uC774\uC0C1]"
              }
            ]
          },
          {
            id: "choice_stop",
            text: "\uADF8\uB9CC\uD558\uACE0 \uAE38\uC744 \uB5A0\uB09C\uB2E4.",
            nextSceneId: "scene_forest_path"
          }
        ],
        location: "road_to_luoyang",
        timeOfDay: "evening"
      }
    ];
    this.sceneService.registerScenes(scenes);
  }
  /**
   * 샘플 NPC 로드
   */
  loadSampleNPCs() {
    this.availableNPCs = [
      {
        id: "npc_choseon",
        name: "\uCD08\uC120",
        title: "\uB099\uC591 \uC81C\uC77C\uBBF8\uC778",
        sect: "none",
        personality: ["gentle", "mysterious"],
        state: "idle",
        currentLocation: "soweol_bridge",
        initialRelationship: 0,
        dialogues: [
          {
            dialogueId: "dia_1",
            text: "...\uAC10\uC0AC\uD569\uB2C8\uB2E4.",
            priority: 1
          }
        ],
        tags: ["potential_romance", "important"]
      }
    ];
  }
  /**
   * 장면 로드
   */
  loadScene(sceneId) {
    const scene = this.sceneService.loadScene(sceneId);
    if (!scene) {
      this.addLog(`[\uC624\uB958] \uC7A5\uBA74\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4: ${sceneId}`);
      return;
    }
    this.currentScene = scene;
    if (this.gameState && !this.gameState.visitedScenes.includes(sceneId)) {
      this.gameState.visitedScenes.push(sceneId);
    }
    if (scene.location) {
      this.currentLocation = scene.location;
    }
    if (scene.timeOfDay) {
      this.currentTimeOfDay = scene.timeOfDay;
    }
    this.checkSituationTriggers();
    this.displayScene(scene);
    if (this.player) {
      this.availableChoices = this.sceneService.evaluateChoices(scene, this.player);
      this.debugLogger.info("WuxiaGame", `[\uC7A5\uBA74: ${scene.id}] \uC120\uD0DD\uC9C0 \uAC1C\uC218: ${this.availableChoices.length}`);
      this.availableChoices.forEach((choice, idx) => {
        this.debugLogger.info("WuxiaGame", `  ${idx + 1}. ${choice.text} (disabled: ${choice.isDisabled})`);
      });
    }
    this.checkAutoProgress();
  }
  /**
   * 자동 진행 체크 및 시작
   */
  checkAutoProgress() {
    if (!this.currentScene)
      return;
    const scene = this.currentScene;
    const sceneType = scene.type || "decision";
    const autoProgress = scene.autoProgress ?? (sceneType === "narrative" || sceneType === "cutscene");
    if (autoProgress && scene.choices.length === 1 && scene.choices[0].nextSceneId) {
      const delay = scene.autoDelay ?? 2e3;
      this.startAutoProgress(scene.choices[0], delay);
    }
  }
  /**
   * 자동 진행 시작
   */
  startAutoProgress(choice, delay) {
    this.clearAutoProgress();
    this.isAutoProgressing = true;
    this.autoProgressCountdown = delay / 1e3;
    this.debugLogger.info("WuxiaGame", `\uC790\uB3D9 \uC9C4\uD589 \uC2DC\uC791: ${delay}ms \uD6C4 \uB2E4\uC74C \uC7A5\uBA74\uC73C\uB85C`);
    const countdownInterval = setInterval(() => {
      this.autoProgressCountdown -= 0.1;
      if (this.autoProgressCountdown <= 0) {
        clearInterval(countdownInterval);
      }
    }, 100);
    this.autoProgressTimer = setTimeout(() => {
      clearInterval(countdownInterval);
      this.isAutoProgressing = false;
      this.selectChoice(choice);
    }, delay);
  }
  /**
   * 자동 진행 취소
   */
  clearAutoProgress() {
    if (this.autoProgressTimer) {
      clearTimeout(this.autoProgressTimer);
      this.autoProgressTimer = null;
    }
    this.isAutoProgressing = false;
    this.autoProgressCountdown = 0;
  }
  /**
   * Space 키 핸들러
   */
  handleSpaceKey() {
    if (this.isAutoProgressing) {
      this.clearAutoProgress();
      if (this.currentScene && this.currentScene.choices.length === 1) {
        this.selectChoice(this.currentScene.choices[0]);
      }
      return;
    }
    if (this.availableChoices.length === 1 && !this.availableChoices[0].isDisabled) {
      this.selectChoice(this.availableChoices[0]);
    }
  }
  /**
   * 장면 출력
   */
  displayScene(scene) {
    if (this.player && this.player.health <= 10 && scene.id !== "scene_hospital" && !scene.id.startsWith("scene_hospital")) {
      this.addLog("");
      this.addLog("\u26A0\uFE0F [\uC704\uAE09 \uC0C1\uD669]");
      this.addLog("\uC0DD\uBA85\uB825\uC774 \uC704\uD5D8 \uC218\uC900\uC785\uB2C8\uB2E4!");
      this.addLog("\u{1F3E5} \uAE34\uAE09 \uCE58\uB8CC\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4...");
      this.addLog("");
      setTimeout(() => {
        this.loadScene("scene_hospital");
      }, 2e3);
      return;
    }
    this.addLog("");
    this.addLog("\u2500".repeat(50));
    if (scene.title) {
      this.addLog(`\u3010 ${scene.title} \u3011`);
      this.addLog("");
    }
    for (const text of scene.narrativeText) {
      this.addLog(text);
    }
    this.addLog("");
    this.addLog("\u2500".repeat(50));
  }
  /**
   * 선택지 선택
   */
  selectChoice(choice) {
    if (choice.isDisabled) {
      this.notification.show(choice.disabledReason || "\uC870\uAC74\uC744 \uB9CC\uC871\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.", 3e3);
      return;
    }
    this.addLog("");
    this.addLog(`\u25B6 ${choice.text}`);
    this.addLog("");
    if (choice.nextSceneId === "dungeon_entry_point") {
      this.enterDungeon();
      return;
    }
    if (choice.consequences && this.player) {
      const battleConsequence = choice.consequences.find((c) => c.type === "battle_start");
      if (battleConsequence && battleConsequence.value) {
        const battleData = battleConsequence.value;
        this.debugLogger.info("WuxiaGame", `\uC804\uD22C \uC2DC\uC791 \uC694\uCCAD: \uC801 ${battleData.enemies.length}\uBA85`);
        this.startBattle(battleData.enemies, battleData.onVictory, battleData.onDefeat);
        return;
      }
      const otherConsequences = choice.consequences.filter((c) => c.type !== "battle_start");
      if (otherConsequences.length > 0) {
        const logs = this.sceneService.applyConsequences(otherConsequences, this.player);
        logs.forEach((log) => this.addLog(`  ${log}`));
      }
    }
    if (choice.judgment && this.player) {
      const result = this.sceneService.executeJudgment(choice.judgment, this.player);
      this.addLog(result.resultText);
      if (result.isCritical) {
        this.addLog("\u2501".repeat(50));
        this.gainExperience(20);
      } else if (result.success) {
        this.gainExperience(10);
      }
      this.loadScene(result.nextSceneId);
      return;
    }
    if (choice.nextSceneId) {
      this.loadScene(choice.nextSceneId);
    }
  }
  /**
   * 동적 상황 트리거 체크
   */
  checkSituationTriggers() {
    if (!this.player)
      return;
    const triggered = this.situationService.checkTriggers(this.player, this.currentLocation, this.currentTimeOfDay, this.availableNPCs);
    if (triggered.length > 0) {
      const situationId = triggered[0];
      this.addLog("");
      this.addLog(`[\uD2B9\uC218 \uC0C1\uD669 \uBC1C\uB3D9!]`);
      this.startSituation(situationId);
    }
  }
  /**
   * 상황 시작
   */
  startSituation(templateId) {
    if (!this.player)
      return;
    const instance = this.situationService.startSituation(templateId, this.player, this.availableNPCs);
    if (instance && this.gameState) {
      this.gameState.activeSituations.push(instance);
      const template = this.situationService.getTemplate(templateId);
      if (template && template.stages && template.stages.length > 0) {
        const firstScene = template.stages[0].scene;
        this.sceneService.registerScene(firstScene);
        this.loadScene(firstScene.id);
      }
    }
  }
  /**
   * 로그 추가
   */
  addLog(message) {
    this.gameLog.push(message);
    if (this.gameLog.length > this.maxLogLines) {
      this.gameLog = this.gameLog.slice(-this.maxLogLines);
    }
  }
  /**
   * 인벤토리 토글
   */
  toggleInventory() {
    this.showInventory = !this.showInventory;
    this.showCharacterSheet = false;
    this.showHelp = false;
  }
  /**
   * 새 게임 시작
   */
  startNewGame() {
    this.modalService.showConfirm("\uC0C8 \uAC8C\uC784\uC744 \uC2DC\uC791\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?<br>\uD604\uC7AC \uC9C4\uD589 \uC911\uC778 \uAC8C\uC784\uC740 \uC800\uC7A5\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.", () => {
      this.gameLog = [];
      this.inBattle = false;
      this.battleState = null;
      this.showSkillMenu = false;
      this.showDungeonExplorer = false;
      this.currentDungeon = null;
      this.currentDungeonRoom = null;
      this.showInventory = false;
      this.showCharacterSheet = false;
      this.showHelp = false;
      this.startNewGameInternal();
      this.modalService.showSuccess("\uC0C8 \uAC8C\uC784\uC774 \uC2DC\uC791\uB418\uC5C8\uC2B5\uB2C8\uB2E4.", "\uAC8C\uC784 \uC2DC\uC791");
    }, "\uC0C8 \uAC8C\uC784", "\uC2DC\uC791", "\uCDE8\uC18C");
  }
  /**
   * 캐릭터 시트 토글
   */
  toggleCharacterSheet() {
    this.showCharacterSheet = !this.showCharacterSheet;
    this.showInventory = false;
    this.showHelp = false;
  }
  /**
   * 도움말 토글
   */
  toggleHelp() {
    this.showHelp = !this.showHelp;
    this.showInventory = false;
    this.showCharacterSheet = false;
  }
  /**
   * 게임 저장
   */
  saveGame() {
    return __async(this, null, function* () {
      if (!this.gameState || !this.player) {
        this.modalService.showWarning("\uC800\uC7A5\uD560 \uAC8C\uC784 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
        return;
      }
      if (this.inBattle) {
        this.modalService.showWarning("\uC804\uD22C \uC911\uC5D0\uB294 \uC800\uC7A5\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.<br>\uC804\uD22C\uB97C \uC885\uB8CC\uD55C \uD6C4 \uC800\uC7A5\uD558\uC138\uC694.", "\uC800\uC7A5 \uBD88\uAC00");
        this.addLog("\u26A0\uFE0F [\uC804\uD22C \uC911\uC5D0\uB294 \uC800\uC7A5\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4]");
        return;
      }
      try {
        this.gameState.saveDate = /* @__PURE__ */ new Date();
        const playerWithArrays = __spreadProps(__spreadValues({}, this.player), {
          flags: Array.from(this.player.flags),
          relationships: Array.from(this.player.relationships.entries())
        });
        const saveData = {
          id: "slot_1",
          novelId: "wuxia_rpg",
          novelTitle: "\uBB35\uD5A5\uC9C0\uC5F0",
          novelTemplate: null,
          playerCharacter: playerWithArrays,
          storyBlocks: [],
          currentPath: [],
          choices: [],
          gameStarted: true,
          gold: 0,
          // TODO: 골드 시스템 추가 시 연동
          inventory: this.player.inventory || [],
          completedQuests: [],
          currentChapter: this.gameState.currentChapter,
          saveDate: this.gameState.saveDate,
          // 무협 게임 추가 정보
          combatPower: this.getTotalCombatPower(),
          experience: this.player.experience,
          experienceToNext: this.player.experienceToNext,
          level: this.player.level,
          equippedItems: this.player.equippedItems,
          stats: this.player.stats,
          health: this.player.health,
          maxHealth: this.player.maxHealth,
          // 던전 진행 상태
          dungeonProgress: {
            currentDungeon: this.currentDungeon,
            currentRoom: this.currentDungeonRoom,
            currentFloor: this.currentDungeon?.currentFloor || 0,
            isInDungeon: this.showDungeonExplorer
          }
        };
        yield this.gameStorage.saveGame(saveData);
        this.modalService.showSuccess("\uAC8C\uC784\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.", "\uC800\uC7A5 \uC644\uB8CC");
        this.addLog("\u{1F4BE} [\uAC8C\uC784 \uC800\uC7A5\uB428]");
        this.debugLogger.info("WuxiaGame", "\uAC8C\uC784 \uC800\uC7A5 \uC644\uB8CC (IndexedDB)");
      } catch (error) {
        this.debugLogger.error("WuxiaGame", `\uC800\uC7A5 \uC2E4\uD328: ${error}`);
        this.modalService.showError("\uAC8C\uC784 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.", "\uC800\uC7A5 \uC2E4\uD328");
      }
    });
  }
  /**
   * 게임 불러오기
   */
  loadGame() {
    return __async(this, null, function* () {
      try {
        const saveData = yield this.gameStorage.loadGame("slot_1");
        if (!saveData) {
          this.modalService.showInfo("\uC800\uC7A5\uB41C \uAC8C\uC784\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");
          return;
        }
        this.inBattle = false;
        this.battleState = null;
        this.showSkillMenu = false;
        const player = saveData.playerCharacter;
        this.player = __spreadProps(__spreadValues({}, player), {
          flags: new Set(player.flags || []),
          relationships: new Map(player.relationships || [])
        });
        if (!this.player) {
          this.modalService.showError("\uD50C\uB808\uC774\uC5B4 \uB370\uC774\uD130 \uBCF5\uC6D0\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.", "\uBCF5\uC6D0 \uC2E4\uD328");
          return;
        }
        this.gameState = {
          gameId: "wuxia_rpg",
          currentChapter: saveData.currentChapter,
          chapterProgress: 0,
          player: this.player,
          currentSceneId: "",
          visitedScenes: [],
          completedSituations: [],
          activeSituations: [],
          currentObjective: "",
          completedObjectives: [],
          playTime: 0,
          saveDate: new Date(saveData.saveDate)
        };
        if (saveData.dungeonProgress && saveData.dungeonProgress.isInDungeon) {
          this.currentDungeon = saveData.dungeonProgress.currentDungeon;
          this.currentDungeonRoom = saveData.dungeonProgress.currentRoom;
          this.showDungeonExplorer = false;
          this.inBattle = false;
          this.battleState = null;
          this.showSkillMenu = false;
          this.addLog("\u{1F3F0} [\uB358\uC804 \uB370\uC774\uD130 \uBCF5\uC6D0]");
          this.addLog("\u26A0\uFE0F [\uC804\uD22C \uBC29\uC9C0\uB97C \uC704\uD574 \uB358\uC804 \uD654\uBA74\uC740 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4]");
          this.addLog("\u{1F4A1} [\uB358\uC804 \uC785\uC7A5 \uBC84\uD2BC\uC744 \uB20C\uB7EC \uB2E4\uC2DC \uC785\uC7A5\uD558\uC138\uC694]");
        }
        if (!this.currentDungeon) {
          this.loadScene("scene_start");
        }
        this.modalService.showSuccess("\uAC8C\uC784\uC744 \uBD88\uB7EC\uC654\uC2B5\uB2C8\uB2E4.", "\uBD88\uB7EC\uC624\uAE30 \uC644\uB8CC");
        this.addLog("\u{1F4C2} [\uAC8C\uC784 \uBD88\uB7EC\uC634]");
        this.addLog(`\uB808\uBCA8: ${this.player.level} | \uACBD\uD5D8\uCE58: ${this.player.experience}/${this.player.experienceToNext}`);
        this.addLog(`\uC804\uD22C\uB825: ${saveData.combatPower || 0}`);
        this.addLog(`\uC9C4\uD589\uB3C4: \uCC55\uD130 ${this.gameState.currentChapter}`);
        this.debugLogger.info("WuxiaGame", "\uAC8C\uC784 \uB85C\uB4DC \uC644\uB8CC (IndexedDB)");
      } catch (error) {
        this.debugLogger.error("WuxiaGame", `\uB85C\uB4DC \uC2E4\uD328: ${error}`);
        this.modalService.showError("\uAC8C\uC784\uC744 \uBD88\uB7EC\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.", "\uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328");
      }
    });
  }
  // ============================================================
  // 전투 시스템 통합 (인라인)
  // ============================================================
  /**
   * 전투 시작
   * @param enemyIds 적 NPC ID 배열
   * @param onVictory 승리 시 이동할 장면 ID
   * @param onDefeat 패배 시 이동할 장면 ID
   */
  startBattle(enemyIds, onVictory, onDefeat) {
    this.debugLogger.info("WuxiaGame", `\uC804\uD22C \uC2DC\uC791 \uD568\uC218 \uD638\uCD9C\uB428 - \uC801: ${enemyIds.join(", ")}`);
    if (!this.player || !this.gameState) {
      this.debugLogger.error("WuxiaGame", "\uD50C\uB808\uC774\uC5B4 \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");
      return;
    }
    const enemies = [];
    for (const enemyId of enemyIds) {
      const npc = CHAPTER_1_NPCS.find((n) => n.id === enemyId);
      if (npc) {
        const battleEnemy = WuxiaBattleAdapter.convertNPCToBattle(npc);
        enemies.push(battleEnemy);
        this.debugLogger.info("WuxiaGame", `\uC801 \uCD94\uAC00: ${npc.name} (ID: ${enemyId})`);
      } else {
        this.debugLogger.error("WuxiaGame", `\uC801\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC74C: ${enemyId}`);
      }
    }
    if (enemies.length === 0) {
      this.debugLogger.error("WuxiaGame", "\uC801\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");
      return;
    }
    const battlePlayer = WuxiaBattleAdapter.convertPlayerToBattle(this.player, this.equipmentService);
    this.debugLogger.info("WuxiaGame", `\uD50C\uB808\uC774\uC5B4 \uC804\uD22C \uC2A4\uD0EF - \uACF5\uACA9: ${battlePlayer.attack}, \uBC29\uC5B4: ${battlePlayer.defense}, HP: ${battlePlayer.maxHp}`);
    this.battleState = {
      player: battlePlayer,
      enemies,
      currentTurn: "player",
      targetedEnemyIndex: 0,
      logs: [],
      isAutoBattle: false,
      ended: false,
      victory: false,
      onVictoryScene: onVictory,
      onDefeatScene: onDefeat
    };
    this.inBattle = true;
    this.debugLogger.info("WuxiaGame", `\uC804\uD22C \uC0C1\uD0DC \uCD08\uAE30\uD654 \uC644\uB8CC - inBattle: ${this.inBattle}`);
    this.addBattleLog("\u2694\uFE0F \uC804\uD22C \uC2DC\uC791!");
    this.addBattleLog("\u2501".repeat(40));
    this.addLog("\u2694\uFE0F [\uC804\uD22C \uC2DC\uC791]");
    const combatPower = this.getTotalCombatPower();
    this.addBattleLog(`\u26A1 \uB098\uC758 \uC804\uD22C\uB825: ${combatPower}`);
    const equipBonus = this.equipmentService.calculateEquipmentBonusWuxia(this.player);
    if (equipBonus.attack > 0 || equipBonus.defense > 0) {
      this.addBattleLog(`\u{1F6E1}\uFE0F \uC7A5\uBE44 \uBCF4\uB108\uC2A4: \uACF5\uACA9 +${equipBonus.attack}, \uBC29\uC5B4 +${equipBonus.defense}`);
    }
    if (equipBonus.critChance > 0) {
      this.addBattleLog(`\u{1F4A5} \uCE58\uBA85\uD0C0 \uD655\uB960: ${equipBonus.critChance}%`);
    }
    if (equipBonus.evasion > 0) {
      this.addBattleLog(`\u2728 \uD68C\uD53C \uD655\uB960: ${equipBonus.evasion}%`);
    }
    if (equipBonus.lifeSteal > 0) {
      this.addBattleLog(`\u{1F49A} \uC0DD\uBA85\uB825 \uD761\uC218: ${equipBonus.lifeSteal}%`);
    }
    this.addBattleLog("\u2501".repeat(40));
  }
  /**
   * 던전 몬스터와 전투 시작
   */
  startDungeonBattle(monster) {
    if (!this.player)
      return;
    const battleEnemy = {
      id: monster.id || `monster_${Date.now()}`,
      name: monster.name,
      type: "enemy",
      maxHp: monster.maxHp || monster.hp,
      currentHp: monster.currentHp || monster.hp,
      attack: monster.attack,
      defense: monster.defense,
      agility: monster.agility || 5,
      skills: monster.skills || [],
      items: [],
      currentMp: 0,
      maxMp: 0
    };
    const battlePlayer = WuxiaBattleAdapter.convertPlayerToBattle(this.player, this.equipmentService);
    this.battleState = {
      player: battlePlayer,
      enemies: [battleEnemy],
      currentTurn: "player",
      targetedEnemyIndex: 0,
      logs: [],
      isAutoBattle: false,
      ended: false,
      victory: false,
      onVictoryScene: "",
      // 던전 전투는 장면 전환 없음
      onDefeatScene: ""
    };
    this.inBattle = true;
    this.addBattleLog("\u2694\uFE0F \uC804\uD22C \uC2DC\uC791!");
    this.addBattleLog("\u2501".repeat(40));
    const combatPower = this.getTotalCombatPower();
    this.addBattleLog(`\u26A1 \uB098\uC758 \uC804\uD22C\uB825: ${combatPower}`);
    const equipBonus = this.equipmentService.calculateEquipmentBonusWuxia(this.player);
    if (equipBonus.attack > 0 || equipBonus.defense > 0) {
      this.addBattleLog(`\u{1F6E1}\uFE0F \uC7A5\uBE44 \uBCF4\uB108\uC2A4: \uACF5\uACA9 +${equipBonus.attack}, \uBC29\uC5B4 +${equipBonus.defense}`);
    }
    if (equipBonus.critChance > 0) {
      this.addBattleLog(`\u{1F4A5} \uCE58\uBA85\uD0C0 \uD655\uB960: ${equipBonus.critChance}%`);
    }
    if (equipBonus.evasion > 0) {
      this.addBattleLog(`\u2728 \uD68C\uD53C \uD655\uB960: ${equipBonus.evasion}%`);
    }
    if (equipBonus.lifeSteal > 0) {
      this.addBattleLog(`\u{1F49A} \uC0DD\uBA85\uB825 \uD761\uC218: ${equipBonus.lifeSteal}%`);
    }
    this.addBattleLog("\u2501".repeat(40));
  }
  /**
   * 전투 로그 추가
   */
  addBattleLog(message) {
    if (!this.battleState)
      return;
    this.battleState.logs.push({ message });
    if (this.battleState.logs.length > 50) {
      this.battleState.logs.shift();
    }
  }
  /**
   * 플레이어 일반 공격
   */
  playerBattleAttack() {
    if (!this.battleState || this.battleState.currentTurn !== "player")
      return;
    const targetEnemy = this.battleState.enemies[this.battleState.targetedEnemyIndex];
    if (!targetEnemy || targetEnemy.currentHp <= 0) {
      this.findNextAliveEnemy();
      return;
    }
    const baseDamage = this.battleState.player.attack - Math.floor(targetEnemy.defense * 0.5);
    const variance = baseDamage * 0.2;
    const randomFactor = Math.random() * variance * 2 - variance;
    const damage = Math.max(1, Math.floor(baseDamage + randomFactor));
    targetEnemy.currentHp = Math.max(0, targetEnemy.currentHp - damage);
    const critChance = this.getEquipmentBonus().critChance || 0;
    const isCritical = Math.random() * 100 < critChance;
    if (isCritical) {
      const critDamage = Math.floor(damage * 0.5);
      targetEnemy.currentHp = Math.max(0, targetEnemy.currentHp - critDamage);
      this.addBattleLog(`\u{1F4A5} ${this.battleState.player.name}\uC758 \uCE58\uBA85\uD0C0! ${targetEnemy.name}\uC5D0\uAC8C ${damage + critDamage} \uB370\uBBF8\uC9C0!`);
    } else {
      this.addBattleLog(`${this.battleState.player.name}\uC758 \uACF5\uACA9! ${targetEnemy.name}\uC5D0\uAC8C ${damage} \uB370\uBBF8\uC9C0!`);
    }
    if (targetEnemy.currentHp <= 0) {
      this.addBattleLog(`${targetEnemy.name}\uC744(\uB97C) \uC4F0\uB7EC\uB728\uB838\uB2E4!`);
      this.findNextAliveEnemy();
    }
    this.cdr.detectChanges();
    this.checkBattleEnd();
    if (!this.battleState.ended) {
      this.battleState.currentTurn = "enemy";
      setTimeout(() => this.enemyTurn(), 800);
    }
  }
  /**
   * 플레이어 스킬 사용
   */
  playerUseSkill(skill) {
    if (!this.battleState || this.battleState.currentTurn !== "player")
      return;
    if (skill.mpCost > this.battleState.player.currentMp) {
      this.addBattleLog("MP\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4!");
      return;
    }
    this.battleState.player.currentMp -= skill.mpCost;
    this.showSkillMenu = false;
    if (skill.type === "heal") {
      const healAmount = skill.damage || 30;
      this.battleState.player.currentHp = Math.min(this.battleState.player.maxHp, this.battleState.player.currentHp + healAmount);
      this.addBattleLog(`${this.battleState.player.name}\uC774(\uAC00) ${skill.name} \uC0AC\uC6A9! HP ${healAmount} \uD68C\uBCF5!`);
    } else {
      const targetEnemy = this.battleState.enemies[this.battleState.targetedEnemyIndex];
      if (targetEnemy && targetEnemy.currentHp > 0) {
        const damage = skill.damage + Math.floor(this.battleState.player.attack / 2);
        targetEnemy.currentHp = Math.max(0, targetEnemy.currentHp - damage);
        this.addBattleLog(`${this.battleState.player.name}\uC774(\uAC00) ${skill.name} \uC0AC\uC6A9! ${targetEnemy.name}\uC5D0\uAC8C ${damage} \uB370\uBBF8\uC9C0!`);
        if (targetEnemy.currentHp <= 0) {
          this.addBattleLog(`${targetEnemy.name}\uC744(\uB97C) \uC4F0\uB7EC\uB728\uB838\uB2E4!`);
          this.findNextAliveEnemy();
        }
      }
    }
    this.cdr.detectChanges();
    this.checkBattleEnd();
    if (!this.battleState.ended) {
      this.battleState.currentTurn = "enemy";
      setTimeout(() => this.enemyTurn(), 800);
    }
  }
  /**
   * 적 턴
   */
  enemyTurn() {
    if (!this.battleState)
      return;
    const aliveEnemies = this.battleState.enemies.filter((e) => e.currentHp > 0);
    if (aliveEnemies.length === 0)
      return;
    const enemy = aliveEnemies[Math.floor(Math.random() * aliveEnemies.length)];
    const baseDamage = enemy.attack - Math.floor(this.battleState.player.defense * 0.5);
    const variance = Math.max(5, baseDamage * 0.2);
    const randomFactor = Math.random() * variance * 2 - variance;
    const damage = Math.max(1, Math.floor(baseDamage + randomFactor));
    this.battleState.player.currentHp = Math.max(0, this.battleState.player.currentHp - damage);
    const evasion = this.getEquipmentBonus().evasion || 0;
    const evaded = Math.random() * 100 < evasion;
    if (evaded) {
      this.addBattleLog(`\u2728 ${this.battleState.player.name}\uC774(\uAC00) ${enemy.name}\uC758 \uACF5\uACA9\uC744 \uD68C\uD53C\uD588\uB2E4!`);
    } else {
      this.addBattleLog(`${enemy.name}\uC758 \uACF5\uACA9! ${this.battleState.player.name}\uC5D0\uAC8C ${damage} \uB370\uBBF8\uC9C0!`);
      const lifeSteal = this.getEquipmentBonus().lifeSteal || 0;
      if (lifeSteal > 0 && damage > 0) {
        const healAmount = Math.floor(damage * (lifeSteal / 100));
        if (healAmount > 0) {
          this.battleState.player.currentHp = Math.min(this.battleState.player.maxHp, this.battleState.player.currentHp + healAmount);
          this.addBattleLog(`\u{1F49A} \uC0DD\uBA85\uB825 \uD761\uC218\uB85C ${healAmount} HP \uD68C\uBCF5!`);
        }
      }
    }
    this.cdr.detectChanges();
    this.checkBattleEnd();
    if (!this.battleState.ended) {
      this.battleState.currentTurn = "player";
      if (this.battleState.isAutoBattle) {
        setTimeout(() => this.autoPlayerAction(), 600);
      }
    }
  }
  /**
   * 전투 종료 확인
   */
  checkBattleEnd() {
    if (!this.battleState)
      return;
    const aliveEnemies = this.battleState.enemies.filter((e) => e.currentHp > 0);
    if (aliveEnemies.length === 0) {
      this.battleState.ended = true;
      this.battleState.victory = true;
      this.addBattleLog("\u{1F389} \uC2B9\uB9AC!");
      this.cdr.detectChanges();
      setTimeout(() => this.endBattle(), 1500);
      return;
    }
    if (this.battleState.player.currentHp <= 0) {
      this.battleState.ended = true;
      this.battleState.victory = false;
      this.addBattleLog("\u{1F480} \uD328\uBC30...");
      this.cdr.detectChanges();
      setTimeout(() => this.endBattle(), 1500);
      return;
    }
  }
  /**
   * 자동전투 시작
   */
  startAutoBattle() {
    if (!this.battleState)
      return;
    this.battleState.isAutoBattle = true;
    this.addBattleLog("\u{1F916} \uC790\uB3D9 \uC804\uD22C \uC2DC\uC791!");
    if (this.battleState.currentTurn === "player") {
      setTimeout(() => this.autoPlayerAction(), 600);
    }
  }
  /**
   * 자동전투 중단
   */
  stopAutoBattle() {
    if (!this.battleState)
      return;
    this.battleState.isAutoBattle = false;
    this.addBattleLog("\u23F8\uFE0F \uC790\uB3D9 \uC804\uD22C \uC911\uB2E8");
  }
  /**
   * AI 플레이어 행동
   */
  autoPlayerAction() {
    if (!this.battleState || !this.battleState.isAutoBattle)
      return;
    const hpPercent = this.battleState.player.currentHp / this.battleState.player.maxHp * 100;
    if (hpPercent < 30) {
      const healSkill = this.battleState.player.skills.find((s) => s.type === "heal" && s.mpCost <= this.battleState.player.currentMp);
      if (healSkill) {
        this.playerUseSkill(healSkill);
        return;
      }
    }
    if (Math.random() < 0.5) {
      const availableSkills = this.battleState.player.skills.filter((s) => s.type === "attack" && s.mpCost <= this.battleState.player.currentMp);
      if (availableSkills.length > 0) {
        const skill = availableSkills[Math.floor(Math.random() * availableSkills.length)];
        this.playerUseSkill(skill);
        return;
      }
    }
    this.playerBattleAttack();
  }
  /**
   * 다음 살아있는 적 찾기
   */
  findNextAliveEnemy() {
    if (!this.battleState)
      return;
    for (let i = 0; i < this.battleState.enemies.length; i++) {
      if (this.battleState.enemies[i].currentHp > 0) {
        this.battleState.targetedEnemyIndex = i;
        return;
      }
    }
  }
  /**
   * 스킬 메뉴 토글
   */
  toggleSkillMenu() {
    this.showSkillMenu = !this.showSkillMenu;
  }
  /**
   * 전투 종료 및 결과 처리
   */
  endBattle() {
    if (!this.battleState || !this.player)
      return;
    const victory = this.battleState.victory;
    WuxiaBattleAdapter.applyBattleResult(this.player, this.battleState.player, victory);
    if (victory) {
      this.addLog("\u2694\uFE0F [\uC804\uD22C \uC2B9\uB9AC!]");
      this.addLog("\u2501".repeat(40));
      const expGain = 50;
      const oldLevel = this.player.level;
      this.gainExperience(expGain);
      this.player.stats.strength += 1;
      this.player.stats.innerPower += 1;
      this.addLog("\u{1F4AA} \uADFC\uB825 +1, \uB0B4\uACF5 +1");
      const combatPower = this.getTotalCombatPower();
      this.addLog(`\u26A1 \uD604\uC7AC \uC804\uD22C\uB825: ${combatPower}`);
      if (this.player.level > oldLevel) {
        this.addLog(`\u{1F38A} \uB808\uBCA8 ${this.player.level}\uB85C \uC0C1\uC2B9!`);
      }
      this.addLog("\u2501".repeat(40));
      if (!this.battleState.onVictoryScene && this.currentDungeonRoom) {
        this.currentDungeonRoom.isCleared = true;
        if (this.currentDungeon) {
          this.currentDungeon.stats.monstersKilled += this.battleState.enemies.length;
        }
        this.addLog("\u2705 \uBC29\uC744 \uD074\uB9AC\uC5B4\uD588\uC2B5\uB2C8\uB2E4!");
        this.modalService.showSuccess("\uC804\uD22C\uC5D0\uC11C \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!<br>\uBC29\uC744 \uD074\uB9AC\uC5B4\uD588\uC2B5\uB2C8\uB2E4.", "\uC804\uD22C \uC2B9\uB9AC");
      } else if (this.battleState.onVictoryScene) {
        this.modalService.showSuccess("\uC804\uD22C\uC5D0\uC11C \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!", "\uC804\uD22C \uC2B9\uB9AC");
        this.loadScene(this.battleState.onVictoryScene);
      }
    } else {
      this.addLog("\u{1F480} [\uC804\uD22C \uD328\uBC30...]");
      this.addLog("\u2501".repeat(40));
      if (!this.battleState.onDefeatScene && this.currentDungeon) {
        this.addLog("\u2620\uFE0F [\uB358\uC804\uC5D0\uC11C \uC4F0\uB7EC\uC84C\uC2B5\uB2C8\uB2E4...]");
        this.addLog("\uC758\uC2DD\uC774 \uD750\uB824\uC9C0\uBA70 \uC5B4\uB460 \uC18D\uC73C\uB85C \uBE60\uC838\uB4E0\uB2E4...");
        this.addLog("");
        this.addLog("\u{1F3E5} \uB099\uC591 \uC758\uC6D0\uC73C\uB85C \uAE34\uAE09 \uC774\uC1A1\uB429\uB2C8\uB2E4...");
        this.modalService.showWarning("\uB358\uC804\uC5D0\uC11C \uC4F0\uB7EC\uC84C\uC2B5\uB2C8\uB2E4...<br>\uC758\uC6D0\uC73C\uB85C \uC774\uC1A1\uB429\uB2C8\uB2E4.", "\uC804\uD22C \uD328\uBC30");
        this.player.health = Math.max(1, this.player.health);
        setTimeout(() => {
          this.loadScene("scene_hospital");
        }, 1500);
      } else if (this.battleState.onDefeatScene) {
        this.addLog("\u2620\uFE0F [\uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...]");
        this.addLog("\uC758\uC2DD\uC774 \uD750\uB824\uC9C4\uB2E4...");
        this.addLog("");
        this.addLog("\u{1F3E5} \uCE58\uB8CC\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4...");
        this.player.health = Math.max(1, this.player.health);
        if (this.battleState.onDefeatScene === "scene_captured") {
          this.modalService.showWarning("\uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...<br>\uC758\uC6D0\uC73C\uB85C \uC774\uC1A1\uB429\uB2C8\uB2E4.", "\uC804\uD22C \uD328\uBC30");
          setTimeout(() => {
            this.loadScene("scene_hospital");
          }, 1500);
        } else {
          this.modalService.showWarning("\uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...", "\uC804\uD22C \uD328\uBC30");
          this.loadScene(this.battleState.onDefeatScene);
        }
      } else {
        this.addLog("\u2620\uFE0F [\uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...]");
        this.addLog("");
        this.addLog("\u{1F3E5} \uC758\uC6D0\uC73C\uB85C \uC774\uC1A1\uB429\uB2C8\uB2E4...");
        this.player.health = Math.max(1, this.player.health);
        this.modalService.showWarning("\uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...<br>\uC758\uC6D0\uC73C\uB85C \uC774\uC1A1\uB429\uB2C8\uB2E4.", "\uC804\uD22C \uD328\uBC30");
        setTimeout(() => {
          this.loadScene("scene_hospital");
        }, 1500);
      }
    }
    this.inBattle = false;
    this.battleState = null;
    this.showSkillMenu = false;
    this.saveGame();
  }
  /**
   * 테스트용: 흑풍채 입구로 바로 이동
   */
  jumpToStronghold() {
    if (!this.player) {
      this.notification.show("\uBA3C\uC800 \uAC8C\uC784\uC744 \uC2DC\uC791\uD558\uC138\uC694.", 2e3);
      return;
    }
    this.loadScene("scene_stronghold_approach");
    this.addLog("\u{1F3AE} [\uD14C\uC2A4\uD2B8] \uD751\uD48D\uCC44 \uC785\uAD6C\uB85C \uC774\uB3D9");
  }
  /**
   * 테스트용: 병원으로 바로 이동 (생명력 10 이하 시뮬레이션)
   */
  testGoToHospital() {
    if (!this.player) {
      this.notification.show("\uBA3C\uC800 \uAC8C\uC784\uC744 \uC2DC\uC791\uD558\uC138\uC694.", 2e3);
      return;
    }
    this.addLog(`\u{1F3AE} [\uD14C\uC2A4\uD2B8] \uBCD1\uC6D0\uC73C\uB85C \uC774\uB3D9 (\uD604\uC7AC HP: ${this.player.health})`);
    this.loadScene("scene_hospital");
  }
  /**
   * 디버그: 전투 상태 강제 리셋
   */
  debugResetBattle() {
    console.log("=== \uC804\uD22C \uC0C1\uD0DC \uB9AC\uC14B \uC804 ===");
    console.log("inBattle:", this.inBattle);
    console.log("battleState:", this.battleState);
    console.log("showDungeonExplorer:", this.showDungeonExplorer);
    console.log("currentDungeon:", this.currentDungeon);
    console.log("currentDungeonRoom:", this.currentDungeonRoom);
    this.inBattle = false;
    this.battleState = null;
    this.showSkillMenu = false;
    this.showDungeonExplorer = false;
    this.currentDungeon = null;
    this.currentDungeonRoom = null;
    if (this.autoBattleInterval) {
      clearInterval(this.autoBattleInterval);
      this.autoBattleInterval = null;
    }
    this.cdr.detectChanges();
    console.log("=== \uC804\uD22C \uC0C1\uD0DC \uB9AC\uC14B \uD6C4 ===");
    console.log("inBattle:", this.inBattle);
    console.log("battleState:", this.battleState);
    console.log("showDungeonExplorer:", this.showDungeonExplorer);
    console.log("currentDungeon:", this.currentDungeon);
    this.addLog("\u{1F527} [\uB514\uBC84\uADF8] \uC804\uD22C \uBC0F \uB358\uC804 \uC0C1\uD0DC\uAC00 \uC644\uC804\uD788 \uB9AC\uC14B\uB418\uC5C8\uC2B5\uB2C8\uB2E4");
    this.addLog("\u{1F527} [\uB514\uBC84\uADF8] \uC77C\uBC18 \uAC8C\uC784 \uBAA8\uB4DC\uB85C \uBCF5\uADC0\uD569\uB2C8\uB2E4");
    if (this.currentScene) {
      this.addLog(`\u{1F4CD} \uD604\uC7AC \uC7A5\uBA74: ${this.currentScene.title || this.currentScene.id}`);
    } else {
      this.addLog("\u26A0\uFE0F \uD604\uC7AC \uC7A5\uBA74\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. \uAC8C\uC784\uC744 \uB2E4\uC2DC \uC2DC\uC791\uD558\uC138\uC694.");
    }
    this.modalService.showSuccess(`\uC804\uD22C/\uB358\uC804 \uC0C1\uD0DC \uB9AC\uC14B \uC644\uB8CC<br>inBattle: ${this.inBattle}<br>battleState: ${this.battleState}<br>\uB358\uC804 \uBAA8\uB4DC: ${this.showDungeonExplorer}<br>\uC77C\uBC18 \uAC8C\uC784\uC73C\uB85C \uBCF5\uADC0`, "\uB514\uBC84\uADF8");
  }
  // ==================== 장비 시스템 메서드 ====================
  /**
   * 장착된 무기 가져오기
   */
  getEquippedWeapon() {
    if (!this.player?.equippedItems.weapon)
      return null;
    return this.player.inventory.find((i) => i.id === this.player.equippedItems.weapon);
  }
  /**
   * 장착된 방어구 가져오기
   */
  getEquippedArmor() {
    if (!this.player?.equippedItems.armor)
      return null;
    return this.player.inventory.find((i) => i.id === this.player.equippedItems.armor);
  }
  /**
   * 장착된 악세사리 가져오기
   */
  getEquippedAccessory() {
    if (!this.player?.equippedItems.accessory)
      return null;
    return this.player.inventory.find((i) => i.id === this.player.equippedItems.accessory);
  }
  /**
   * 아이템 장착 가능 여부
   */
  canEquipItem(item) {
    return ["weapon", "armor", "amulet", "accessory"].includes(item.type);
  }
  /**
   * 아이템 장착
   */
  equipItem(item) {
    if (!this.player)
      return;
    const result = this.equipmentService.equipItemWuxia(this.player, item);
    if (result.success) {
      this.addLog(`\u2728 ${result.message}`);
      this.notification.show(result.message, 2e3);
      this.saveGame();
    } else {
      this.notification.show(result.message, 2e3);
    }
  }
  /**
   * 슬롯별 장비 해제
   */
  unequipItem(slot) {
    if (!this.player)
      return;
    const result = this.equipmentService.unequipItemWuxia(this.player, slot);
    if (result.success) {
      this.addLog(`\u{1F513} ${result.message}`);
      this.notification.show(result.message, 2e3);
      this.saveGame();
    } else {
      this.notification.show(result.message, 2e3);
    }
  }
  /**
   * 아이템으로 장비 해제
   */
  unequipItemByItem(item) {
    if (!this.player)
      return;
    const slot = this.equipmentService["getEquipmentSlotWuxia"](item);
    if (slot) {
      this.unequipItem(slot);
    }
  }
  /**
   * 아이템 스탯 표시용 텍스트
   */
  getItemStatsDisplay(item) {
    return this.equipmentService.getItemStatsTextWuxia(item);
  }
  // ==================== 전투력 계산 메서드 ====================
  /**
   * 장비 보너스 가져오기
   */
  getEquipmentBonus() {
    if (!this.player) {
      return {
        attack: 0,
        defense: 0,
        hp: 0,
        mp: 0,
        critChance: 0,
        evasion: 0,
        lifeSteal: 0,
        attackSpeed: 0
      };
    }
    return this.equipmentService.calculateEquipmentBonusWuxia(this.player);
  }
  /**
   * 기본 공격력 (WuxiaBattleAdapter와 동일한 공식)
   */
  getBaseAttack() {
    if (!this.player)
      return 0;
    return Math.floor(this.player.stats.strength * 0.6 + this.player.stats.innerPower * 0.4);
  }
  /**
   * 총 공격력
   */
  getTotalAttack() {
    return this.getBaseAttack() + this.getEquipmentBonus().attack;
  }
  /**
   * 기본 방어력 (WuxiaBattleAdapter와 동일한 공식)
   */
  getBaseDefense() {
    if (!this.player)
      return 0;
    return Math.floor(this.player.stats.strength * 0.4 + this.player.stats.innerPower * 0.3 + this.player.stats.dexterity * 0.3);
  }
  /**
   * 총 방어력
   */
  getTotalDefense() {
    return this.getBaseDefense() + this.getEquipmentBonus().defense;
  }
  /**
   * 기본 최대 HP
   */
  getBaseMaxHp() {
    if (!this.player)
      return 0;
    return this.player.level * 100;
  }
  /**
   * 종합 전투력 계산
   */
  getTotalCombatPower() {
    if (!this.player)
      return 0;
    const attack = this.getTotalAttack();
    const defense = this.getTotalDefense();
    const bonus = this.getEquipmentBonus();
    const hp = this.player.maxHealth + bonus.hp;
    const basePower = attack * 2 + defense + hp / 10;
    const critMultiplier = 1 + bonus.critChance / 100;
    return Math.floor(basePower * critMultiplier);
  }
  /**
   * 전투 중 플레이어 전투력 계산
   * 참고: battleState.player는 이미 장비 보너스가 적용된 스탯입니다.
   */
  getPlayerCombatPower() {
    if (!this.battleState)
      return this.getTotalCombatPower();
    const player = this.battleState.player;
    const basePower = player.attack * 2 + player.defense + player.maxHp / 10;
    const critChance = this.getEquipmentBonus().critChance || 0;
    const critMultiplier = 1 + critChance / 100;
    return Math.floor(basePower * critMultiplier);
  }
  /**
   * 전투 중 적 전투력 계산
   */
  getEnemyCombatPower(enemy) {
    if (!enemy)
      return 0;
    const basePower = enemy.attack * 2 + enemy.defense + enemy.maxHp / 10;
    return Math.floor(basePower);
  }
  // ==================== 경험치 시스템 메서드 ====================
  /**
   * 경험치 획득
   */
  gainExperience(amount) {
    if (!this.player)
      return;
    this.player.experience += amount;
    this.addLog(`\u2B50 \uACBD\uD5D8\uCE58 +${amount}`);
    while (this.player.experience >= this.player.experienceToNext) {
      this.levelUp();
    }
    this.saveGame();
  }
  /**
   * 레벨업 처리
   */
  levelUp() {
    if (!this.player)
      return;
    this.player.level++;
    this.player.experience -= this.player.experienceToNext;
    this.player.experienceToNext = this.player.level * 100;
    this.player.stats.strength += 2;
    this.player.stats.dexterity += 2;
    this.player.stats.innerPower += 2;
    this.player.stats.insight += 2;
    this.player.maxHealth = this.getBaseMaxHp() + this.getEquipmentBonus().hp;
    this.player.health = this.player.maxHealth;
    this.addLog("\u{1F389} [\uB808\uBCA8\uC5C5!]");
    this.addLog(`\uB808\uBCA8 ${this.player.level}\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4!`);
    this.addLog(`\uADFC\uB825, \uBBFC\uCCA9, \uB0B4\uACF5, \uD1B5\uCC30 +2`);
    this.addLog(`\uCCB4\uB825 \uC644\uC804 \uD68C\uBCF5!`);
    this.modalService.showSuccess(`\uB808\uBCA8 ${this.player.level}\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4!<br>\uADFC\uB825, \uBBFC\uCCA9, \uB0B4\uACF5, \uD1B5\uCC30 +2<br>\uCCB4\uB825 \uC644\uC804 \uD68C\uBCF5!`, "\u{1F389} \uB808\uBCA8\uC5C5!");
    this.saveGame();
  }
  /**
   * 경험치 퍼센티지 (프로그레스 바용)
   */
  getExperiencePercentage() {
    if (!this.player || this.player.experienceToNext === 0)
      return 0;
    return this.player.experience / this.player.experienceToNext * 100;
  }
  /**
   * 경험치 표시 텍스트
   */
  getExperienceText() {
    if (!this.player)
      return "0 / 0";
    return `${this.player.experience} / ${this.player.experienceToNext}`;
  }
  // ===== 던전 시스템 =====
  showDungeonExplorer = false;
  currentDungeon = null;
  currentDungeonRoom = null;
  /**
   * 던전 진입
   */
  enterDungeon() {
    this.addLog("\u2501".repeat(50));
    this.addLog("\u{1F3F0} [\uB358\uC804 \uC9C4\uC785]");
    this.addLog("\uC5B4\uB461\uACE0 \uC2B5\uD55C \uACF5\uAE30\uAC00 \uCF54\uB97C \uCC0C\uB978\uB2E4...");
    this.addLog("\uB358\uC804\uC744 \uC0DD\uC131\uD558\uB294 \uC911...");
    this.addLog("\u2501".repeat(50));
    const dungeonTypes = this.dungeonService.getDefaultDungeonTypes();
    const dungeonType = dungeonTypes[0];
    const difficulty = "normal";
    if (!this.player)
      return;
    const dungeon = this.dungeonService.generateDungeon(dungeonType, difficulty, this.player.level);
    this.currentDungeon = dungeon;
    this.currentDungeon.currentFloor = 1;
    if (dungeon.floors && dungeon.floors.length > 0) {
      const firstFloor = dungeon.floors[0];
      if (firstFloor.rooms && firstFloor.rooms.length > 0) {
        this.currentDungeonRoom = firstFloor.rooms[0];
        this.addLog("");
        this.addLog(`\u{1F4CD} ${dungeonType.koreanName} \uC785\uC7A5`);
        this.addLog(`\uB09C\uC774\uB3C4: \uBCF4\uD1B5`);
        this.addLog(`\uCD1D ${dungeon.totalFloors}\uCE35`);
        this.addLog("");
        this.addLog(`\uD604\uC7AC \uC704\uCE58: ${firstFloor.floorNumber}\uCE35 - \uC785\uAD6C`);
        this.addLog(this.currentDungeonRoom.description);
      }
    }
    this.showDungeonExplorer = true;
    this.modalService.showSuccess(`${dungeonType.koreanName}\uC5D0 \uC9C4\uC785\uD588\uC2B5\uB2C8\uB2E4!<br>\uB09C\uC774\uB3C4: \uBCF4\uD1B5 | \uCD1D ${dungeon.totalFloors}\uCE35`, "\uB358\uC804 \uC785\uC7A5");
  }
  /**
  /**
   * 테스트: 던전 바로 입장
   */
  testEnterDungeon() {
    this.notification.show("\uB358\uC804 \uD14C\uC2A4\uD2B8 \uBAA8\uB4DC \uC9C4\uC785!", 2e3);
    this.loadScene("scene_dungeon_entrance");
  }
  /**
   * 던전 탈출
   */
  onDungeonEscape() {
    this.showDungeonExplorer = false;
    this.currentDungeon = null;
    this.currentDungeonRoom = null;
    this.addLog("\u2501".repeat(50));
    this.addLog("\u{1F6AA} [\uB358\uC804 \uD0C8\uCD9C]");
    this.addLog("\uBB34\uC0AC\uD788 \uB358\uC804\uC744 \uBE60\uC838\uB098\uC654\uB2E4.");
    this.addLog("\u2501".repeat(50));
    this.loadScene("scene_forest_path");
  }
  /**
   * 던전 방 이동
   */
  onDungeonRoomMove(roomId) {
    if (this.currentDungeon && this.currentDungeon.floors && this.currentDungeonRoom) {
      const currentFloorNum = this.currentDungeonRoom.floorNumber;
      const floor = this.currentDungeon.floors.find((f) => f.floorNumber === currentFloorNum);
      if (floor && floor.rooms) {
        const nextRoom = floor.rooms.find((room) => room.id === roomId);
        if (nextRoom) {
          this.currentDungeonRoom = nextRoom;
          this.currentDungeonRoom.isExplored = true;
          this.addLog("\u2501".repeat(40));
          this.addLog(`\u2192 ${this.getRoomTypeName(nextRoom.type)}\uB85C \uC774\uB3D9`);
          this.addLog(nextRoom.description);
          return;
        }
      }
    }
    this.addLog(`\u2192 \uB2E4\uC74C \uBC29\uC73C\uB85C \uC774\uB3D9: ${roomId}`);
  }
  /**
   * 방 타입 한글 이름
   */
  getRoomTypeName(type) {
    const names = {
      entrance: "\uC785\uAD6C",
      normal: "\uC77C\uBC18 \uBC29",
      elite: "\uC5D8\uB9AC\uD2B8 \uBC29",
      boss: "\uBCF4\uC2A4 \uBC29",
      treasure: "\uBCF4\uBB3C \uBC29",
      shrine: "\uC131\uC18C",
      shop: "\uC0C1\uC810",
      safe: "\uC548\uC804 \uC9C0\uB300",
      event: "\uC774\uBCA4\uD2B8 \uBC29",
      exit: "\uCD9C\uAD6C"
    };
    return names[type] || "\uC54C \uC218 \uC5C6\uB294 \uBC29";
  }
  /**
   * 던전 상호작용
   */
  onDungeonInteract(interactable) {
    this.addLog(`\u{1F50D} ${interactable.name || interactable}\uC744(\uB97C) \uC870\uC0AC\uD588\uB2E4.`);
  }
  /**
   * 던전 몬스터 전투
   */
  onDungeonMonsterBattle(monster) {
    if (!this.player || !monster)
      return;
    if (monster.isDead) {
      const expGain = this.calculateMonsterExp(monster);
      this.gainExperience(expGain);
      this.addLog(`\u2694\uFE0F ${monster.name} \uCC98\uCE58!`);
      this.addLog(`\u2728 \uACBD\uD5D8\uCE58 +${expGain}`);
      return;
    }
    this.addLog("\u2501".repeat(50));
    this.addLog(`\u2694\uFE0F [\uC804\uD22C \uC2DC\uC791] ${monster.name}\uC640 \uC870\uC6B0!`);
    this.addLog("\u2501".repeat(50));
    this.startDungeonBattle(monster);
  }
  /**
   * 던전 보상 수령
   */
  onDungeonRewardsClaimed(rewards) {
    if (!this.player || !rewards)
      return;
    if (rewards.exp > 0) {
      this.gainExperience(rewards.exp);
      this.addLog(`\u2728 \uACBD\uD5D8\uCE58 +${rewards.exp}`);
    }
    if (rewards.gold > 0) {
      this.addLog(`\u{1F4B0} \uACE8\uB4DC +${rewards.gold} (\uC778\uBCA4\uD1A0\uB9AC \uCD94\uAC00 \uC608\uC815)`);
    }
    if (rewards.items && rewards.items.length > 0) {
      rewards.items.forEach((item) => {
        this.addLog(`\u{1F381} ${item.name} \uD68D\uB4DD!`);
      });
    }
    this.notification.show(`\uC804\uD22C \uBCF4\uC0C1 \uD68D\uB4DD! \uACBD\uD5D8\uCE58 +${rewards.exp}`, 3e3);
  }
  /**
   * 몬스터 경험치 계산
   */
  calculateMonsterExp(monster) {
    const expMultiplier = {
      normal: 20,
      elite: 50,
      boss: 150
    };
    return monster.level * (expMultiplier[monster.type] || 20);
  }
  /**
   * 던전 층 이동
   */
  onDungeonFloorChange(floor) {
    this.addLog(`\u{1F4CD} ${floor}\uCE35\uC73C\uB85C \uC774\uB3D9\uD588\uB2E4.`);
  }
  static \u0275fac = function WuxiaGameComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _WuxiaGameComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _WuxiaGameComponent, selectors: [["app-wuxia-game"]], standalone: false, decls: 46, vars: 21, consts: [[1, "wuxia-game-container"], [1, "game-header"], [1, "game-title"], [1, "game-controls"], [1, "btn-control", "btn-new-game", 3, "click"], [1, "material-icons"], [1, "btn-control", "btn-test", 2, "background", "#ff6b6b", "color", "white", 3, "click"], [1, "btn-control", "btn-test", 2, "background", "#9c27b0", "color", "white", 3, "click"], [1, "btn-control", "btn-test", 2, "background", "#26a69a", "color", "white", 3, "click"], [1, "btn-control", 3, "click"], [1, "game-content"], [1, "main-panel"], ["class", "status-bar", 4, "ngIf"], ["class", "experience-bar-container", 4, "ngIf"], ["class", "objective-panel", 4, "ngIf"], ["class", "battle-screen", 4, "ngIf"], ["class", "dungeon-screen", 4, "ngIf"], ["class", "game-log", 4, "ngIf"], ["class", "choices-panel", 4, "ngIf"], ["class", "info-panel", 4, "ngIf"], [3, "confirm", "cancel", "close", "isOpen", "type", "title", "message", "confirmText", "cancelText", "showCancel"], [1, "status-bar"], [1, "stat-item"], [1, "stat-label"], [1, "stat-value"], [1, "stat-value", "combat-power"], [1, "stat-item", "health"], [1, "health-bar"], [1, "health-fill"], [1, "stat-value", "tendency"], [1, "experience-bar-container"], [1, "exp-info-wrapper"], [1, "exp-current"], [1, "exp-bar"], [1, "exp-fill"], [1, "exp-end-bar"], [1, "objective-panel"], [1, "objective-title"], [1, "objective-text"], [1, "battle-screen"], [1, "battle-header"], [1, "battle-turn-indicator"], [1, "turn-label"], [1, "turn-value"], [1, "battle-participants"], [1, "battle-character", "player-character"], [1, "character-name"], [1, "character-power"], [1, "character-stats"], [1, "stat-bar", "hp-bar"], [1, "stat-progress"], [1, "stat-fill", "hp-fill"], [1, "stat-text"], [1, "stat-bar", "mp-bar"], [1, "stat-fill", "mp-fill"], [1, "enemy-list"], ["class", "battle-character enemy-character", 3, "defeated", "targeted", 4, "ngFor", "ngForOf"], [1, "battle-log"], ["class", "battle-log-entry", 4, "ngFor", "ngForOf"], ["class", "battle-actions", 4, "ngIf"], ["class", "auto-battle-indicator", 4, "ngIf"], ["class", "battle-result", 4, "ngIf"], [1, "battle-character", "enemy-character"], [1, "character-power", "enemy-power"], [1, "stat-fill", "hp-fill", "enemy-hp"], [1, "battle-log-entry"], [1, "battle-actions"], [1, "action-buttons"], [1, "action-btn", "auto-battle-btn", 3, "click"], [1, "action-btn", "attack-btn", 3, "click"], [1, "action-btn", "skill-btn", 3, "click"], ["class", "skill-menu", 4, "ngIf"], [1, "skill-menu"], [1, "skill-menu-title"], [1, "skill-list-battle"], ["class", "skill-button", 3, "disabled", "click", 4, "ngFor", "ngForOf"], [1, "skill-button", 3, "click", "disabled"], [1, "skill-name"], [1, "skill-info"], [1, "skill-mp"], [1, "skill-damage"], [1, "auto-battle-indicator"], [1, "stop-auto-btn", 3, "click"], [1, "battle-result"], [4, "ngIf"], [1, "continue-btn", 3, "click"], [1, "dungeon-screen"], [1, "dungeon-header"], [1, "escape-btn", 3, "click"], [3, "dungeon", "currentRoom", "playerHp", "playerMaxHp", "playerName", "playerLevel", "playerAttackPower", "playerDefensePower", "roomMove", "interactableUse", "monsterAttack", "rewardsClaimed", "floorMove", "dungeonEscape", 4, "ngIf"], ["class", "dungeon-placeholder", 4, "ngIf"], [3, "roomMove", "interactableUse", "monsterAttack", "rewardsClaimed", "floorMove", "dungeonEscape", "dungeon", "currentRoom", "playerHp", "playerMaxHp", "playerName", "playerLevel", "playerAttackPower", "playerDefensePower"], [1, "dungeon-placeholder"], [1, "game-log"], ["class", "log-line", 3, "innerHTML", 4, "ngFor", "ngForOf"], [1, "log-line", 3, "innerHTML"], [1, "choices-panel"], [1, "choices-title"], ["class", "auto-progress-indicator", 4, "ngIf"], [1, "choice-list"], ["class", "choice-button", 3, "disabled", "auto-progressing", "click", 4, "ngFor", "ngForOf"], [1, "auto-progress-indicator"], [1, "choice-button", 3, "click", "disabled"], [1, "choice-number"], [1, "choice-text"], ["class", "choice-reason", 4, "ngIf"], [1, "choice-reason"], [1, "info-panel"], ["class", "character-sheet", 4, "ngIf"], ["class", "inventory-panel", 4, "ngIf"], ["class", "help-panel", 4, "ngIf"], [1, "character-sheet"], [1, "panel-title"], [1, "character-section"], [1, "info-row"], [1, "info-label"], [1, "info-value"], [1, "exp-percentage"], [1, "exp-bar-full"], [1, "exp-fill-full"], [1, "character-section", "combat-power-section"], [1, "combat-stats"], [1, "combat-stat-row", "total-power"], [1, "stat-value", "total"], [1, "combat-stat-breakdown"], [1, "combat-stat-row"], ["class", "bonus", 4, "ngIf"], [1, "total-value"], ["class", "combat-stat-row", 4, "ngIf"], [1, "stat-row"], [1, "stat-name"], [1, "stat-number"], ["class", "injuries-list", 4, "ngIf"], ["class", "no-injuries", 4, "ngIf"], ["class", "character-section", 4, "ngIf"], [1, "bonus"], [1, "stat-value", "bonus-only"], [1, "injuries-list"], ["class", "injury-item", 4, "ngFor", "ngForOf"], [1, "injury-item"], [1, "no-injuries"], [1, "skill-list"], ["class", "skill-item", 4, "ngFor", "ngForOf"], [1, "skill-item"], [1, "inventory-panel"], [1, "equipped-section"], [1, "equipped-slots"], [1, "equipped-slot"], [1, "slot-label"], ["class", "slot-item", 4, "ngIf"], ["class", "slot-empty", 4, "ngIf"], [1, "inventory-section"], ["class", "empty-inventory", 4, "ngIf"], [1, "inventory-list"], ["class", "inventory-item", 4, "ngFor", "ngForOf"], [1, "slot-item"], [1, "item-name"], [1, "btn-unequip", 3, "click"], [1, "slot-empty"], [1, "empty-inventory"], [1, "inventory-item"], [1, "item-header"], ["class", "item-equipped-badge", 4, "ngIf"], ["class", "item-quantity", 4, "ngIf"], [1, "item-description"], ["class", "item-stats", 4, "ngIf"], [1, "item-actions"], ["class", "btn-equip", 3, "click", 4, "ngIf"], ["class", "btn-unequip-item", 3, "click", 4, "ngIf"], [1, "item-equipped-badge"], [1, "item-quantity"], [1, "item-stats"], ["class", "stat-line", 4, "ngFor", "ngForOf"], [1, "stat-line"], [1, "btn-equip", 3, "click"], [1, "btn-unequip-item", 3, "click"], [1, "help-panel"], [1, "help-section"], [1, "tendency-mark", "righteous"], [1, "tendency-mark", "neutral"], [1, "tendency-mark", "evil"]], template: function WuxiaGameComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0)(1, "div", 1)(2, "h1", 2);
      \u0275\u0275text(3, "\uBB35\uD5A5\uC9C0\uC5F0 (\u58A8\u9999\u4E4B\u7DE3)");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(4, "div", 3)(5, "button", 4);
      \u0275\u0275listener("click", function WuxiaGameComponent_Template_button_click_5_listener() {
        return ctx.startNewGame();
      });
      \u0275\u0275elementStart(6, "i", 5);
      \u0275\u0275text(7, "add_circle");
      \u0275\u0275elementEnd();
      \u0275\u0275text(8, " \uC0C8 \uAC8C\uC784 ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(9, "button", 6);
      \u0275\u0275listener("click", function WuxiaGameComponent_Template_button_click_9_listener() {
        return ctx.jumpToStronghold();
      });
      \u0275\u0275text(10, " \u{1F3AE} \uD14C\uC2A4\uD2B8: \uD751\uD48D\uCC44 \uC785\uAD6C ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(11, "button", 7);
      \u0275\u0275listener("click", function WuxiaGameComponent_Template_button_click_11_listener() {
        return ctx.testEnterDungeon();
      });
      \u0275\u0275text(12, " \u{1F3F0} \uD14C\uC2A4\uD2B8: \uB358\uC804 \uC785\uC7A5 ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(13, "button", 8);
      \u0275\u0275listener("click", function WuxiaGameComponent_Template_button_click_13_listener() {
        return ctx.testGoToHospital();
      });
      \u0275\u0275text(14, " \u{1F3E5} \uD14C\uC2A4\uD2B8: \uBCD1\uC6D0 \uC785\uC7A5 ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(15, "button", 9);
      \u0275\u0275listener("click", function WuxiaGameComponent_Template_button_click_15_listener() {
        return ctx.toggleCharacterSheet();
      });
      \u0275\u0275elementStart(16, "i", 5);
      \u0275\u0275text(17, "person");
      \u0275\u0275elementEnd();
      \u0275\u0275text(18, " \uCE90\uB9AD\uD130 ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(19, "button", 9);
      \u0275\u0275listener("click", function WuxiaGameComponent_Template_button_click_19_listener() {
        return ctx.toggleInventory();
      });
      \u0275\u0275elementStart(20, "i", 5);
      \u0275\u0275text(21, "inventory_2");
      \u0275\u0275elementEnd();
      \u0275\u0275text(22, " \uC18C\uC9C0\uD488 ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(23, "button", 9);
      \u0275\u0275listener("click", function WuxiaGameComponent_Template_button_click_23_listener() {
        return ctx.saveGame();
      });
      \u0275\u0275elementStart(24, "i", 5);
      \u0275\u0275text(25, "save");
      \u0275\u0275elementEnd();
      \u0275\u0275text(26, " \uC800\uC7A5 ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(27, "button", 9);
      \u0275\u0275listener("click", function WuxiaGameComponent_Template_button_click_27_listener() {
        return ctx.loadGame();
      });
      \u0275\u0275elementStart(28, "i", 5);
      \u0275\u0275text(29, "folder_open");
      \u0275\u0275elementEnd();
      \u0275\u0275text(30, " \uBD88\uB7EC\uC624\uAE30 ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(31, "button", 9);
      \u0275\u0275listener("click", function WuxiaGameComponent_Template_button_click_31_listener() {
        return ctx.toggleHelp();
      });
      \u0275\u0275elementStart(32, "i", 5);
      \u0275\u0275text(33, "help_outline");
      \u0275\u0275elementEnd();
      \u0275\u0275text(34, " \uB3C4\uC6C0\uB9D0 ");
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(35, "div", 10)(36, "div", 11);
      \u0275\u0275template(37, WuxiaGameComponent_div_37_Template, 28, 14, "div", 12)(38, WuxiaGameComponent_div_38_Template, 7, 3, "div", 13)(39, WuxiaGameComponent_div_39_Template, 5, 1, "div", 14)(40, WuxiaGameComponent_div_40_Template, 37, 20, "div", 15)(41, WuxiaGameComponent_div_41_Template, 8, 2, "div", 16)(42, WuxiaGameComponent_div_42_Template, 2, 1, "div", 17)(43, WuxiaGameComponent_div_43_Template, 6, 2, "div", 18);
      \u0275\u0275elementEnd();
      \u0275\u0275template(44, WuxiaGameComponent_div_44_Template, 4, 3, "div", 19);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(45, "app-game-modal", 20);
      \u0275\u0275listener("confirm", function WuxiaGameComponent_Template_app_game_modal_confirm_45_listener() {
        return ctx.onModalConfirm();
      })("cancel", function WuxiaGameComponent_Template_app_game_modal_cancel_45_listener() {
        return ctx.onModalCancel();
      })("close", function WuxiaGameComponent_Template_app_game_modal_close_45_listener() {
        return ctx.onModalClose();
      });
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275advance(15);
      \u0275\u0275classProp("active", ctx.showCharacterSheet);
      \u0275\u0275advance(4);
      \u0275\u0275classProp("active", ctx.showInventory);
      \u0275\u0275advance(12);
      \u0275\u0275classProp("active", ctx.showHelp);
      \u0275\u0275advance(6);
      \u0275\u0275property("ngIf", ctx.player);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.player);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.gameState);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.inBattle && ctx.battleState);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showDungeonExplorer);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.inBattle && !ctx.showDungeonExplorer);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.currentScene && ctx.availableChoices.length > 0 && !ctx.inBattle && !ctx.showDungeonExplorer);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.showCharacterSheet || ctx.showInventory || ctx.showHelp);
      \u0275\u0275advance();
      \u0275\u0275property("isOpen", ctx.isModalOpen)("type", (ctx.modalState == null ? null : ctx.modalState.type) || "info")("title", (ctx.modalState == null ? null : ctx.modalState.title) || "")("message", (ctx.modalState == null ? null : ctx.modalState.message) || "")("confirmText", (ctx.modalState == null ? null : ctx.modalState.confirmText) || "\uD655\uC778")("cancelText", (ctx.modalState == null ? null : ctx.modalState.cancelText) || "\uCDE8\uC18C")("showCancel", (ctx.modalState == null ? null : ctx.modalState.showCancel) || false);
    }
  }, dependencies: [NgForOf, NgIf, GameModalComponent, DungeonExplorer], styles: ['@charset "UTF-8";\n\n\n\n.wuxia-game-container[_ngcontent-%COMP%] {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background:\n    linear-gradient(\n      135deg,\n      #f5f1e8 0%,\n      #e8dcc8 100%);\n  color: #2c2416;\n  font-family:\n    "Noto Sans KR",\n    "Malgun Gothic",\n    sans-serif;\n  overflow: hidden;\n}\n.game-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  background: rgba(139, 69, 19, 0.1);\n  border-bottom: 2px solid #8b4513;\n  box-shadow: 0 2px 8px rgba(139, 69, 19, 0.2);\n}\n.game-title[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 1.8rem;\n  font-weight: bold;\n  color: #8b4513;\n  text-shadow: 1px 1px 2px rgba(212, 175, 55, 0.3);\n  letter-spacing: 2px;\n}\n.game-controls[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.5rem;\n}\n.btn-control[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.5rem 1rem;\n  background: rgba(139, 69, 19, 0.1);\n  border: 1px solid #8b4513;\n  border-radius: 4px;\n  color: #2c2416;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-size: 0.9rem;\n}\n.btn-control[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n}\n.btn-control[_ngcontent-%COMP%]:hover {\n  background: rgba(139, 69, 19, 0.2);\n  border-color: #8b4513;\n  color: #000;\n}\n.btn-control.active[_ngcontent-%COMP%] {\n  background: rgba(139, 69, 19, 0.15);\n  border-color: #8b4513;\n  color: #8b4513;\n  font-weight: 600;\n}\n.btn-control.btn-new-game[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(212, 175, 55, 0.2),\n      rgba(139, 69, 19, 0.1));\n  border-color: #8b4513;\n  font-weight: 600;\n}\n.btn-control.btn-new-game[_ngcontent-%COMP%]:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(212, 175, 55, 0.3),\n      rgba(139, 69, 19, 0.2));\n  box-shadow: 0 0 10px rgba(139, 69, 19, 0.2);\n}\n.game-content[_ngcontent-%COMP%] {\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n}\n.main-panel[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  overflow-y: auto;\n}\n.info-panel[_ngcontent-%COMP%] {\n  width: 400px;\n  background: rgba(255, 255, 255, 0.9);\n  border-left: 2px solid #8b4513;\n  padding: 1.5rem;\n  overflow-y: auto;\n}\n.status-bar[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 1.5rem;\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.8);\n  border: 1px solid #8b4513;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  font-size: 0.95rem;\n  box-shadow: 0 2px 6px rgba(139, 69, 19, 0.1);\n}\n.stat-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.stat-item.health[_ngcontent-%COMP%] {\n  flex-direction: column;\n  align-items: flex-start;\n}\n.stat-label[_ngcontent-%COMP%] {\n  color: #666;\n  font-weight: 500;\n}\n.stat-value[_ngcontent-%COMP%] {\n  color: #2c2416;\n  font-weight: bold;\n}\n.stat-value.combat-power[_ngcontent-%COMP%] {\n  color: #ff8000;\n  font-size: 1.1rem;\n  font-weight: 900;\n  text-shadow: 0 1px 2px rgba(255, 128, 0, 0.3);\n  padding: 2px 8px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 128, 0, 0.15),\n      rgba(255, 165, 0, 0.15));\n  border-radius: 4px;\n  border: 1px solid rgba(255, 128, 0, 0.3);\n}\n.stat-value.tendency[_ngcontent-%COMP%] {\n  padding: 2px 8px;\n  border-radius: 3px;\n  font-size: 0.85rem;\n}\n.stat-value.tendency.righteous[_ngcontent-%COMP%] {\n  background: rgba(100, 149, 237, 0.2);\n  color: #4169e1;\n}\n.stat-value.tendency.neutral[_ngcontent-%COMP%] {\n  background: rgba(128, 128, 128, 0.2);\n  color: #666;\n}\n.stat-value.tendency.evil[_ngcontent-%COMP%] {\n  background: rgba(220, 20, 60, 0.3);\n  color: #dc143c;\n}\n.health-bar[_ngcontent-%COMP%] {\n  width: 100px;\n  height: 6px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 3px;\n  overflow: hidden;\n  margin-top: 4px;\n}\n.health-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #dc143c 0%,\n      #ff6347 100%);\n  transition: width 0.3s;\n}\n.experience-bar-container[_ngcontent-%COMP%] {\n  padding: 0;\n  margin-bottom: 1rem;\n  background: #d0d0d0;\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n.exp-info-wrapper[_ngcontent-%COMP%] {\n  position: absolute;\n  left: 8px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 2;\n}\n.exp-info-wrapper[_ngcontent-%COMP%]   .exp-current[_ngcontent-%COMP%] {\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: #fff;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);\n  background: rgba(0, 0, 0, 0.3);\n  padding: 2px 6px;\n  border-radius: 3px;\n  white-space: nowrap;\n}\n.exp-bar[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 20px;\n  background: #d0d0d0;\n  overflow: hidden;\n  position: relative;\n}\n.exp-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #ff6b35 0%,\n      #ff8c42 50%,\n      #ffa600 100%);\n  box-shadow: 0 0 8px rgba(255, 140, 66, 0.6), inset 0 1px 2px rgba(255, 255, 255, 0.3);\n  transition: width 0.5s ease-out;\n  position: relative;\n}\n.exp-fill[_ngcontent-%COMP%]::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      transparent,\n      rgba(255, 255, 255, 0.4),\n      transparent);\n  animation: _ngcontent-%COMP%_shimmer 2s infinite;\n}\n.exp-end-bar[_ngcontent-%COMP%] {\n  width: 3px;\n  height: 20px;\n  background:\n    linear-gradient(\n      180deg,\n      #333 0%,\n      #666 50%,\n      #333 100%);\n  box-shadow: -1px 0 2px rgba(0, 0, 0, 0.3);\n}\n@keyframes _ngcontent-%COMP%_shimmer {\n  0% {\n    left: -100%;\n  }\n  100% {\n    left: 100%;\n  }\n}\n.objective-panel[_ngcontent-%COMP%] {\n  padding: 0.8rem 1rem;\n  background: rgba(139, 69, 19, 0.08);\n  border-left: 4px solid #8b4513;\n  border-radius: 4px;\n  margin-bottom: 1rem;\n}\n.objective-title[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: #8b4513;\n  font-weight: bold;\n  margin-bottom: 0.3rem;\n}\n.objective-text[_ngcontent-%COMP%] {\n  font-size: 1rem;\n  color: #2c2416;\n}\n.game-log[_ngcontent-%COMP%] {\n  flex: 1;\n  padding: 1.5rem;\n  background: rgba(255, 255, 255, 0.85);\n  border: 1px solid #8b4513;\n  border-radius: 6px;\n  overflow-y: auto;\n  font-family:\n    "Noto Serif KR",\n    "Batang",\n    serif;\n  line-height: 1.8;\n  margin-bottom: 1rem;\n  max-height: calc(100vh - 400px);\n}\n.log-line[_ngcontent-%COMP%] {\n  margin-bottom: 0.5rem;\n  color: #3c3020;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.log-line[_ngcontent-%COMP%]:empty {\n  height: 0.5rem;\n}\n.choices-panel[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.9);\n  border: 1px solid #8b4513;\n  border-radius: 6px;\n  padding: 1rem;\n  box-shadow: 0 2px 8px rgba(139, 69, 19, 0.15);\n}\n.choices-title[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  font-weight: bold;\n  color: #8b4513;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.3);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.auto-progress-indicator[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n  font-weight: normal;\n  color: #4169e1;\n  animation: _ngcontent-%COMP%_pulse 1s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.6;\n  }\n}\n.choice-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.7rem;\n}\n.choice-button[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.8rem;\n  padding: 0.8rem 1rem;\n  background: rgba(255, 255, 255, 0.9);\n  border: 1px solid #8b4513;\n  border-radius: 4px;\n  color: #2c2416;\n  text-align: left;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-size: 1rem;\n}\n.choice-button[_ngcontent-%COMP%]:hover:not(.disabled) {\n  background: rgba(139, 69, 19, 0.15);\n  border-color: #8b4513;\n  transform: translateX(4px);\n  box-shadow: 0 2px 6px rgba(139, 69, 19, 0.2);\n}\n.choice-button.disabled[_ngcontent-%COMP%] {\n  opacity: 0.5;\n  cursor: not-allowed;\n  background: rgba(200, 200, 200, 0.3);\n  border-color: #999;\n}\n.choice-button.auto-progressing[_ngcontent-%COMP%] {\n  background: rgba(65, 105, 225, 0.1);\n  border-color: #4169e1;\n  animation: _ngcontent-%COMP%_choice-pulse 2s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_choice-pulse {\n  0%, 100% {\n    border-color: #4169e1;\n    box-shadow: 0 0 0 0 rgba(65, 105, 225, 0.4);\n  }\n  50% {\n    border-color: #6495ed;\n    box-shadow: 0 0 0 4px rgba(65, 105, 225, 0);\n  }\n}\n.choice-number[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  background: rgba(139, 69, 19, 0.15);\n  border: 1px solid #8b4513;\n  border-radius: 50%;\n  font-weight: bold;\n  color: #8b4513;\n  font-size: 0.85rem;\n}\n.choice-text[_ngcontent-%COMP%] {\n  flex: 1;\n}\n.choice-reason[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: #999;\n  font-style: italic;\n}\n.panel-title[_ngcontent-%COMP%] {\n  margin: 0 0 1.5rem 0;\n  font-size: 1.5rem;\n  color: #8b4513;\n  border-bottom: 2px solid #8b4513;\n  padding-bottom: 0.5rem;\n}\n.character-section[_ngcontent-%COMP%], \n.equipped-section[_ngcontent-%COMP%], \n.inventory-section[_ngcontent-%COMP%], \n.help-section[_ngcontent-%COMP%] {\n  margin-bottom: 1.5rem;\n}\n.character-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], \n.equipped-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], \n.inventory-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], \n.help-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  color: #8b4513;\n  margin-bottom: 0.8rem;\n  font-weight: 600;\n}\n.combat-power-section[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 69, 19, 0.05),\n      rgba(160, 82, 45, 0.05));\n  border: 2px solid #8b4513;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n}\n.combat-power-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  color: #8b4513;\n  margin-bottom: 1rem;\n  text-align: center;\n  font-weight: bold;\n}\n.combat-stats[_ngcontent-%COMP%]   .total-power[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #8b4513,\n      #a0522d);\n  color: white;\n  padding: 1rem;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  text-align: center;\n  box-shadow: 0 4px 8px rgba(139, 69, 19, 0.3);\n}\n.combat-stats[_ngcontent-%COMP%]   .total-power[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  font-size: 1rem;\n  font-weight: 600;\n  display: block;\n  margin-bottom: 0.5rem;\n  opacity: 0.9;\n}\n.combat-stats[_ngcontent-%COMP%]   .total-power[_ngcontent-%COMP%]   .stat-value.total[_ngcontent-%COMP%] {\n  font-size: 2rem;\n  font-weight: bold;\n  display: block;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n}\n.combat-stats[_ngcontent-%COMP%]   .combat-stat-breakdown[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.8);\n  border-radius: 6px;\n  padding: 0.8rem;\n}\n.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.6rem 0;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.1);\n}\n.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]:last-child {\n  border-bottom: none;\n}\n.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  color: #666;\n  font-size: 0.95rem;\n  font-weight: 500;\n}\n.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  color: #2c2416;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]   .bonus[_ngcontent-%COMP%] {\n  color: #28a745;\n  font-size: 0.9rem;\n  font-weight: bold;\n}\n.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%] {\n  color: #8b4513;\n  font-weight: bold;\n}\n.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]   .stat-value.bonus-only[_ngcontent-%COMP%] {\n  color: #28a745;\n  font-weight: bold;\n}\n.info-row[_ngcontent-%COMP%], \n.stat-row[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.15);\n  flex-wrap: wrap;\n}\n.info-row[_ngcontent-%COMP%]:last-child, \n.stat-row[_ngcontent-%COMP%]:last-child {\n  border-bottom: none;\n}\n.info-label[_ngcontent-%COMP%], \n.stat-name[_ngcontent-%COMP%] {\n  color: #666;\n}\n.info-value[_ngcontent-%COMP%], \n.stat-number[_ngcontent-%COMP%] {\n  color: #2c2416;\n  font-weight: bold;\n}\n.info-value[_ngcontent-%COMP%]   .exp-percentage[_ngcontent-%COMP%], \n.stat-number[_ngcontent-%COMP%]   .exp-percentage[_ngcontent-%COMP%] {\n  color: #888;\n  font-size: 0.85em;\n  margin-left: 0.5rem;\n}\n.exp-bar-full[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 8px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 4px;\n  overflow: hidden;\n  margin-top: 0.5rem;\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);\n}\n.exp-fill-full[_ngcontent-%COMP%] {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #ffd700 0%,\n      #ffed4e 50%,\n      #ffd700 100%);\n  box-shadow: 0 0 10px rgba(255, 215, 0, 0.8);\n  transition: width 0.5s ease-out;\n  animation: _ngcontent-%COMP%_shimmer 2s infinite;\n}\n@keyframes _ngcontent-%COMP%_shimmer {\n  0% {\n    background-position: -100% 0;\n  }\n  100% {\n    background-position: 100% 0;\n  }\n}\n.injuries-list[_ngcontent-%COMP%] {\n  margin-top: 0.5rem;\n}\n.injury-item[_ngcontent-%COMP%] {\n  padding: 0.5rem;\n  background: rgba(220, 20, 60, 0.1);\n  border-left: 3px solid #dc143c;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n  color: #8b0000;\n}\n.no-injuries[_ngcontent-%COMP%] {\n  color: #228b22;\n  font-size: 0.9rem;\n}\n.skill-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.skill-item[_ngcontent-%COMP%] {\n  padding: 0.5rem;\n  background: rgba(139, 69, 19, 0.1);\n  border-left: 3px solid #8b4513;\n  font-size: 0.9rem;\n  color: #2c2416;\n}\n.equipped-item[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 1rem;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.15);\n}\n.item-slot[_ngcontent-%COMP%] {\n  color: #666;\n  min-width: 80px;\n}\n.empty-inventory[_ngcontent-%COMP%] {\n  color: #999;\n  font-style: italic;\n  text-align: center;\n  padding: 2rem;\n}\n.inventory-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n}\n.inventory-item[_ngcontent-%COMP%] {\n  padding: 0.8rem;\n  background: rgba(255, 255, 255, 0.6);\n  border: 1px solid #8b4513;\n  border-radius: 4px;\n}\n.item-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.3rem;\n}\n.item-name[_ngcontent-%COMP%] {\n  font-weight: bold;\n}\n.item-name.rarity-common[_ngcontent-%COMP%] {\n  color: #fff;\n}\n.item-name.rarity-uncommon[_ngcontent-%COMP%] {\n  color: #1eff00;\n}\n.item-name.rarity-rare[_ngcontent-%COMP%] {\n  color: #0070dd;\n}\n.item-name.rarity-epic[_ngcontent-%COMP%] {\n  color: #a335ee;\n}\n.item-name.rarity-legendary[_ngcontent-%COMP%] {\n  color: #ff8000;\n}\n.item-quantity[_ngcontent-%COMP%] {\n  color: #999;\n  font-size: 0.9rem;\n}\n.item-description[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: #aaa;\n  font-style: italic;\n}\n.help-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\n  list-style: none;\n  padding-left: 0;\n}\n.help-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n  padding: 0.3rem 0;\n  padding-left: 1.5rem;\n  position: relative;\n}\n.help-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]::before {\n  content: "\\25b8";\n  position: absolute;\n  left: 0;\n  color: #d4af37;\n}\n.help-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  color: #d4af37;\n}\n.help-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  line-height: 1.6;\n  color: #ccc;\n  margin-bottom: 0.8rem;\n}\n.tendency-mark[_ngcontent-%COMP%] {\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-weight: bold;\n  font-size: 0.9rem;\n}\n.tendency-mark.righteous[_ngcontent-%COMP%] {\n  background: rgba(100, 149, 237, 0.3);\n  color: #6495ed;\n}\n.tendency-mark.neutral[_ngcontent-%COMP%] {\n  background: rgba(128, 128, 128, 0.3);\n  color: #ccc;\n}\n.tendency-mark.evil[_ngcontent-%COMP%] {\n  background: rgba(220, 20, 60, 0.3);\n  color: #dc143c;\n}\n.game-log[_ngcontent-%COMP%]::-webkit-scrollbar, \n.main-panel[_ngcontent-%COMP%]::-webkit-scrollbar, \n.info-panel[_ngcontent-%COMP%]::-webkit-scrollbar {\n  width: 8px;\n}\n.game-log[_ngcontent-%COMP%]::-webkit-scrollbar-track, \n.main-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track, \n.info-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.3);\n}\n.game-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, \n.main-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, \n.info-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n  background: rgba(139, 69, 19, 0.5);\n  border-radius: 4px;\n}\n.game-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, \n.main-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, \n.info-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover {\n  background: rgba(139, 69, 19, 0.7);\n}\n@media (max-width: 1024px) {\n  .info-panel[_ngcontent-%COMP%] {\n    width: 350px;\n  }\n  .game-title[_ngcontent-%COMP%] {\n    font-size: 1.4rem;\n  }\n}\n@media (max-width: 768px) {\n  .game-content[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n  .info-panel[_ngcontent-%COMP%] {\n    width: 100%;\n    border-left: none;\n    border-top: 2px solid #8b4513;\n    max-height: 300px;\n  }\n  .status-bar[_ngcontent-%COMP%] {\n    flex-wrap: wrap;\n    gap: 1rem;\n  }\n  .game-controls[_ngcontent-%COMP%] {\n    flex-wrap: wrap;\n  }\n}\n.battle-screen[_ngcontent-%COMP%] {\n  background: rgba(255, 255, 255, 0.95);\n  border: 2px solid #8b4513;\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 1rem;\n}\n.battle-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1rem;\n  border-bottom: 2px solid #8b4513;\n}\n.battle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  margin: 0;\n  color: #8b4513;\n  font-size: 1.5rem;\n}\n.battle-turn-indicator[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 1.1rem;\n}\n.battle-turn-indicator[_ngcontent-%COMP%]   .turn-label[_ngcontent-%COMP%] {\n  color: #666;\n}\n.battle-turn-indicator[_ngcontent-%COMP%]   .turn-value[_ngcontent-%COMP%] {\n  font-weight: bold;\n  padding: 0.3rem 0.8rem;\n  border-radius: 4px;\n}\n.battle-turn-indicator[_ngcontent-%COMP%]   .turn-value.player-turn[_ngcontent-%COMP%] {\n  background: rgba(65, 105, 225, 0.2);\n  color: #4169e1;\n}\n.battle-turn-indicator[_ngcontent-%COMP%]   .turn-value.enemy-turn[_ngcontent-%COMP%] {\n  background: rgba(220, 20, 60, 0.2);\n  color: #dc143c;\n}\n.battle-participants[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  gap: 2rem;\n  margin-bottom: 1.5rem;\n}\n.battle-character[_ngcontent-%COMP%] {\n  flex: 1;\n  padding: 1rem;\n  border: 2px solid #8b4513;\n  border-radius: 6px;\n  background: rgba(255, 255, 255, 0.6);\n}\n.battle-character.player-character[_ngcontent-%COMP%] {\n  border-color: #4169e1;\n}\n.battle-character.enemy-character[_ngcontent-%COMP%] {\n  border-color: #dc143c;\n}\n.battle-character.enemy-character.defeated[_ngcontent-%COMP%] {\n  opacity: 0.4;\n  filter: grayscale(1);\n}\n.battle-character.enemy-character.targeted[_ngcontent-%COMP%] {\n  border-color: #ff6347;\n  border-width: 3px;\n  box-shadow: 0 0 10px rgba(220, 20, 60, 0.4);\n}\n.battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  font-weight: bold;\n  color: #2c2416;\n  margin-bottom: 0.8rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n}\n.battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]   .character-power[_ngcontent-%COMP%] {\n  font-size: 0.95rem;\n  color: #ff8000;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 128, 0, 0.1),\n      rgba(255, 215, 0, 0.1));\n  padding: 0.25rem 0.6rem;\n  border-radius: 12px;\n  border: 1px solid rgba(255, 128, 0, 0.3);\n  font-weight: 600;\n  white-space: nowrap;\n}\n.battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]   .character-power.enemy-power[_ngcontent-%COMP%] {\n  color: #dc143c;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(220, 20, 60, 0.1),\n      rgba(255, 69, 0, 0.1));\n  border-color: rgba(220, 20, 60, 0.3);\n}\n.character-stats[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.stat-bar[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9rem;\n}\n.stat-bar[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  min-width: 30px;\n  font-weight: 600;\n  color: #666;\n}\n.stat-bar[_ngcontent-%COMP%]   .stat-progress[_ngcontent-%COMP%] {\n  flex: 1;\n  height: 20px;\n  background: rgba(200, 200, 200, 0.3);\n  border-radius: 10px;\n  overflow: hidden;\n  border: 1px solid #999;\n}\n.stat-bar[_ngcontent-%COMP%]   .stat-fill[_ngcontent-%COMP%] {\n  height: 100%;\n  transition: width 0.3s ease;\n}\n.stat-bar[_ngcontent-%COMP%]   .stat-fill.hp-fill[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #dc143c,\n      #ff6347);\n}\n.stat-bar[_ngcontent-%COMP%]   .stat-fill.hp-fill.enemy-hp[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #8b0000,\n      #dc143c);\n}\n.stat-bar[_ngcontent-%COMP%]   .stat-fill.mp-fill[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      90deg,\n      #4169e1,\n      #6495ed);\n}\n.stat-bar[_ngcontent-%COMP%]   .stat-text[_ngcontent-%COMP%] {\n  min-width: 80px;\n  text-align: right;\n  font-weight: 600;\n  color: #2c2416;\n}\n.enemy-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n  flex: 1;\n}\n.battle-log[_ngcontent-%COMP%] {\n  background: rgba(245, 241, 232, 0.8);\n  border: 1px solid #8b4513;\n  border-radius: 6px;\n  padding: 1rem;\n  max-height: 150px;\n  overflow-y: auto;\n  margin-bottom: 1rem;\n}\n.battle-log[_ngcontent-%COMP%]   .battle-log-entry[_ngcontent-%COMP%] {\n  padding: 0.3rem 0;\n  color: #3c3020;\n  font-size: 0.95rem;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.1);\n}\n.battle-log[_ngcontent-%COMP%]   .battle-log-entry[_ngcontent-%COMP%]:last-child {\n  border-bottom: none;\n}\n.battle-actions[_ngcontent-%COMP%] {\n  margin-top: 1rem;\n}\n.action-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.8rem;\n  flex-wrap: wrap;\n}\n.action-btn[_ngcontent-%COMP%] {\n  flex: 1;\n  min-width: 150px;\n  padding: 0.8rem 1.2rem;\n  border: 2px solid #8b4513;\n  border-radius: 6px;\n  background: rgba(255, 255, 255, 0.9);\n  color: #2c2416;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.action-btn[_ngcontent-%COMP%]:hover {\n  background: rgba(139, 69, 19, 0.15);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(139, 69, 19, 0.2);\n}\n.action-btn.auto-battle-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(100, 149, 237, 0.2),\n      rgba(65, 105, 225, 0.15));\n  border-color: #4169e1;\n  color: #4169e1;\n}\n.action-btn.attack-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(220, 20, 60, 0.2),\n      rgba(255, 99, 71, 0.15));\n  border-color: #dc143c;\n  color: #dc143c;\n}\n.action-btn.skill-btn[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(148, 0, 211, 0.2),\n      rgba(138, 43, 226, 0.15));\n  border-color: #9400d3;\n  color: #9400d3;\n}\n.skill-menu[_ngcontent-%COMP%] {\n  margin-top: 1rem;\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.95);\n  border: 2px solid #9400d3;\n  border-radius: 6px;\n}\n.skill-menu[_ngcontent-%COMP%]   .skill-menu-title[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  font-weight: bold;\n  color: #9400d3;\n  margin-bottom: 0.8rem;\n}\n.skill-list-battle[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.6rem;\n}\n.skill-button[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.8rem 1rem;\n  background: rgba(255, 255, 255, 0.9);\n  border: 1px solid #9400d3;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.skill-button[_ngcontent-%COMP%]:hover:not(:disabled) {\n  background: rgba(148, 0, 211, 0.1);\n  transform: translateX(4px);\n}\n.skill-button[_ngcontent-%COMP%]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.skill-button[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: #2c2416;\n}\n.skill-button[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 1rem;\n  font-size: 0.9rem;\n}\n.skill-button[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]   .skill-mp[_ngcontent-%COMP%] {\n  color: #4169e1;\n}\n.skill-button[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%] {\n  color: #dc143c;\n}\n.auto-battle-indicator[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: rgba(100, 149, 237, 0.1);\n  border: 2px solid #4169e1;\n  border-radius: 6px;\n  margin-top: 1rem;\n}\n.auto-battle-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  color: #4169e1;\n  font-weight: 600;\n  font-size: 1.1rem;\n}\n.auto-battle-indicator[_ngcontent-%COMP%]   .stop-auto-btn[_ngcontent-%COMP%] {\n  padding: 0.5rem 1.2rem;\n  background: #dc143c;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.auto-battle-indicator[_ngcontent-%COMP%]   .stop-auto-btn[_ngcontent-%COMP%]:hover {\n  background: #a00;\n  transform: scale(1.05);\n}\n.battle-result[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 2rem;\n  background: rgba(255, 255, 255, 0.95);\n  border: 2px solid #8b4513;\n  border-radius: 8px;\n  margin-top: 1rem;\n}\n.battle-result[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 2rem;\n  margin-bottom: 1.5rem;\n  color: #8b4513;\n}\n.battle-result[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%] {\n  padding: 0.8rem 2rem;\n  background:\n    linear-gradient(\n      135deg,\n      #8b4513,\n      #a0522d);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.battle-result[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 12px rgba(139, 69, 19, 0.3);\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipped-section[_ngcontent-%COMP%] {\n  margin-bottom: 2rem;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipped-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  color: #8b4513;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.3);\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipped-slots[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipped-slot[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 0.8rem;\n  background: rgba(255, 255, 255, 0.8);\n  border: 1px solid #d4a574;\n  border-radius: 4px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipped-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: #8b4513;\n  min-width: 80px;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipped-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  flex: 1;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipped-slot[_ngcontent-%COMP%]   .slot-empty[_ngcontent-%COMP%] {\n  color: #999;\n  font-style: italic;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipped-slot[_ngcontent-%COMP%]   .btn-unequip[_ngcontent-%COMP%] {\n  padding: 0.3rem 0.8rem;\n  background: #dc3545;\n  color: white;\n  border: none;\n  border-radius: 3px;\n  font-size: 0.85rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.inventory-panel[_ngcontent-%COMP%]   .equipped-slot[_ngcontent-%COMP%]   .btn-unequip[_ngcontent-%COMP%]:hover {\n  background: #c82333;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  color: #8b4513;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.3);\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%] {\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.9);\n  border: 1px solid #d4a574;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]:hover {\n  box-shadow: 0 2px 8px rgba(139, 69, 19, 0.15);\n  border-color: #8b4513;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%] {\n  font-weight: 600;\n  font-size: 1.05rem;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-name.rarity-common[_ngcontent-%COMP%] {\n  color: #808080;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-name.rarity-uncommon[_ngcontent-%COMP%] {\n  color: #00aa00;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-name.rarity-rare[_ngcontent-%COMP%] {\n  color: #0070dd;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-name.rarity-epic[_ngcontent-%COMP%] {\n  color: #a335ee;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-name.rarity-legendary[_ngcontent-%COMP%] {\n  color: #ff8000;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-equipped-badge[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: #28a745;\n  font-weight: 600;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n  color: #666;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%] {\n  color: #666;\n  font-size: 0.95rem;\n  margin-bottom: 0.5rem;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%] {\n  margin-top: 0.8rem;\n  padding: 0.8rem;\n  background: rgba(139, 69, 19, 0.05);\n  border-left: 3px solid #8b4513;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n  color: #4a3520;\n  margin-bottom: 0.3rem;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%]:last-child {\n  margin-bottom: 0;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%] {\n  margin-top: 0.8rem;\n  display: flex;\n  gap: 0.5rem;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  padding: 0.5rem 1rem;\n  border: none;\n  border-radius: 3px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .btn-equip[_ngcontent-%COMP%] {\n  background: #28a745;\n  color: white;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .btn-equip[_ngcontent-%COMP%]:hover {\n  background: #218838;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .btn-unequip-item[_ngcontent-%COMP%] {\n  background: #ffc107;\n  color: #333;\n}\n.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .btn-unequip-item[_ngcontent-%COMP%]:hover {\n  background: #e0a800;\n}\n.dungeon-screen[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  overflow: hidden;\n}\n.dungeon-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: rgba(139, 69, 19, 0.1);\n  border-radius: 6px;\n  margin-bottom: 1rem;\n}\n.dungeon-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 1.5rem;\n  color: #8b4513;\n}\n.dungeon-header[_ngcontent-%COMP%]   .escape-btn[_ngcontent-%COMP%] {\n  padding: 0.5rem 1rem;\n  background: #dc3545;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.dungeon-header[_ngcontent-%COMP%]   .escape-btn[_ngcontent-%COMP%]:hover {\n  background: #c82333;\n  transform: translateY(-1px);\n}\n.dungeon-placeholder[_ngcontent-%COMP%] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 1rem;\n}\n.dungeon-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  font-size: 1.2rem;\n  color: #8b4513;\n  margin: 0;\n}\n/*# sourceMappingURL=wuxia-game.component.css.map */'] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(WuxiaGameComponent, [{
    type: Component,
    args: [{ selector: "app-wuxia-game", standalone: false, template: `<!-- \uBB35\uD5A5\uC9C0\uC5F0 (\u58A8\u9999\u4E4B\u7DE3) - \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uBB34\uD611 RPG -->
<div class="wuxia-game-container">
  
  <!-- \uD5E4\uB354: \uAC8C\uC784 \uC81C\uBAA9 \uBC0F \uC870\uC791 \uBC84\uD2BC -->
  <div class="game-header">
    <h1 class="game-title">\uBB35\uD5A5\uC9C0\uC5F0 (\u58A8\u9999\u4E4B\u7DE3)</h1>
    <div class="game-controls">
      <button class="btn-control btn-new-game" (click)="startNewGame()">
        <i class="material-icons">add_circle</i> \uC0C8 \uAC8C\uC784
      </button>
      <button class="btn-control btn-test" (click)="jumpToStronghold()" 
              style="background: #ff6b6b; color: white;">
        \u{1F3AE} \uD14C\uC2A4\uD2B8: \uD751\uD48D\uCC44 \uC785\uAD6C
      </button>
      <button class="btn-control btn-test" (click)="testEnterDungeon()" 
              style="background: #9c27b0; color: white;">
        \u{1F3F0} \uD14C\uC2A4\uD2B8: \uB358\uC804 \uC785\uC7A5
      </button>
      <button class="btn-control btn-test" (click)="testGoToHospital()" 
              style="background: #26a69a; color: white;">
        \u{1F3E5} \uD14C\uC2A4\uD2B8: \uBCD1\uC6D0 \uC785\uC7A5
      </button>
      <button class="btn-control" (click)="toggleCharacterSheet()" 
              [class.active]="showCharacterSheet">
        <i class="material-icons">person</i> \uCE90\uB9AD\uD130
      </button>
      <button class="btn-control" (click)="toggleInventory()" 
              [class.active]="showInventory">
        <i class="material-icons">inventory_2</i> \uC18C\uC9C0\uD488
      </button>
      <button class="btn-control" (click)="saveGame()">
        <i class="material-icons">save</i> \uC800\uC7A5
      </button>
      <button class="btn-control" (click)="loadGame()">
        <i class="material-icons">folder_open</i> \uBD88\uB7EC\uC624\uAE30
      </button>
      <button class="btn-control" (click)="toggleHelp()" 
              [class.active]="showHelp">
        <i class="material-icons">help_outline</i> \uB3C4\uC6C0\uB9D0
      </button>
    </div>
  </div>

  <!-- \uBA54\uC778 \uCEE8\uD150\uCE20 \uC601\uC5ED -->
  <div class="game-content">
    
    <!-- \uC88C\uCE21: \uAC8C\uC784 \uC9C4\uD589 \uD654\uBA74 -->
    <div class="main-panel">
      
      <!-- \uC0C1\uD0DC \uBC14 -->
      <div class="status-bar" *ngIf="player">
        <div class="stat-item">
          <span class="stat-label">\uC774\uB984:</span>
          <span class="stat-value">{{ player.name }}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">\uB808\uBCA8:</span>
          <span class="stat-value">{{ player.level }}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">\uC804\uD22C\uB825:</span>
          <span class="stat-value combat-power">{{ getTotalCombatPower() }}</span>
        </div>
        <div class="stat-item health">
          <span class="stat-label">\uC0DD\uBA85\uB825:</span>
          <span class="stat-value">{{ player.health }} / {{ player.maxHealth }}</span>
          <div class="health-bar">
            <div class="health-fill" [style.width.%]="(player.health / player.maxHealth) * 100"></div>
          </div>
        </div>
        <div class="stat-item">
          <span class="stat-label">\uC131\uD5A5:</span>
          <span class="stat-value tendency" [class.righteous]="player.tendency.value < -20"
                [class.neutral]="player.tendency.value >= -20 && player.tendency.value < 20"
                [class.evil]="player.tendency.value >= 20">
            {{ player.tendency.label }}
          </span>
        </div>
      </div>
      
      <!-- \uACBD\uD5D8\uCE58 \uBC14 (\uC804\uCCB4 \uB108\uBE44) -->
      <div class="experience-bar-container" *ngIf="player">
        <div class="exp-info-wrapper">
          <span class="exp-current">{{ getExperienceText() }}</span>
        </div>
        <div class="exp-bar">
          <div class="exp-fill" [style.width.%]="getExperiencePercentage()"></div>
        </div>
        <div class="exp-end-bar"></div>
      </div>
      
  <!-- \uD0ED \uBA54\uB274 -->      <!-- \uBAA9\uD45C -->
      <div class="objective-panel" *ngIf="gameState">
        <div class="objective-title">\uD604\uC7AC \uBAA9\uD45C</div>
        <div class="objective-text">{{ gameState.currentObjective }}</div>
      </div>

      <!-- \uC804\uD22C \uD654\uBA74 -->
      <div class="battle-screen" *ngIf="inBattle && battleState">
        <div class="battle-header">
          <h2>\u2694\uFE0F \uC804\uD22C \uC9C4\uD589 \uC911</h2>
          <div class="battle-turn-indicator">
            <span class="turn-label">\uD604\uC7AC \uD134:</span>
            <span class="turn-value" [class.player-turn]="battleState.currentTurn === 'player'" 
                                     [class.enemy-turn]="battleState.currentTurn === 'enemy'">
              {{ battleState.currentTurn === 'player' ? '\uD50C\uB808\uC774\uC5B4' : '\uC801' }}
            </span>
          </div>
        </div>

        <!-- \uC804\uD22C \uCC38\uAC00\uC790\uB4E4 -->
        <div class="battle-participants">
          <!-- \uD50C\uB808\uC774\uC5B4 -->
          <div class="battle-character player-character">
            <div class="character-name">
              {{ battleState.player.name }}
              <span class="character-power">\u26A1 {{ getPlayerCombatPower() }}</span>
            </div>
            <div class="character-stats">
              <div class="stat-bar hp-bar">
                <div class="stat-label">HP</div>
                <div class="stat-progress">
                  <div class="stat-fill hp-fill" 
                       [style.width.%]="(battleState.player.currentHp / battleState.player.maxHp) * 100">
                  </div>
                </div>
                <div class="stat-text">{{ battleState.player.currentHp }} / {{ battleState.player.maxHp }}</div>
              </div>
              <div class="stat-bar mp-bar">
                <div class="stat-label">MP</div>
                <div class="stat-progress">
                  <div class="stat-fill mp-fill" 
                       [style.width.%]="(battleState.player.currentMp / battleState.player.maxMp) * 100">
                  </div>
                </div>
                <div class="stat-text">{{ battleState.player.currentMp }} / {{ battleState.player.maxMp }}</div>
              </div>
            </div>
          </div>

          <!-- \uC801\uB4E4 -->
          <div class="enemy-list">
            <div *ngFor="let enemy of battleState.enemies; let i = index" 
                 class="battle-character enemy-character"
                 [class.defeated]="enemy.currentHp <= 0"
                 [class.targeted]="battleState.targetedEnemyIndex === i">
              <div class="character-name">
                {{ enemy.name }}
                <span class="character-power enemy-power">\u26A1 {{ getEnemyCombatPower(enemy) }}</span>
              </div>
              <div class="character-stats">
                <div class="stat-bar hp-bar">
                  <div class="stat-label">HP</div>
                  <div class="stat-progress">
                    <div class="stat-fill hp-fill enemy-hp" 
                         [style.width.%]="(enemy.currentHp / enemy.maxHp) * 100">
                    </div>
                  </div>
                  <div class="stat-text">{{ enemy.currentHp }} / {{ enemy.maxHp }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- \uC804\uD22C \uB85C\uADF8 -->
        <div class="battle-log">
          <div *ngFor="let log of battleState.logs" class="battle-log-entry">
            {{ log.message }}
          </div>
        </div>

        <!-- \uC804\uD22C \uC561\uC158 (\uD50C\uB808\uC774\uC5B4 \uD134 && \uC790\uB3D9\uC804\uD22C \uC544\uB2D0 \uB54C) -->
        <div class="battle-actions" *ngIf="battleState.currentTurn === 'player' && !battleState.isAutoBattle && !battleState.ended">
          <div class="action-buttons">
            <button class="action-btn auto-battle-btn" (click)="startAutoBattle()">
              \u{1F916} \uC790\uB3D9 \uC804\uD22C
            </button>
            <button class="action-btn attack-btn" (click)="playerBattleAttack()">
              \u2694\uFE0F \uC77C\uBC18 \uACF5\uACA9
            </button>
            <button class="action-btn skill-btn" (click)="toggleSkillMenu()">
              \u2728 \uC2A4\uD0AC \uC0AC\uC6A9
            </button>
          </div>

          <!-- \uC2A4\uD0AC \uC120\uD0DD \uBA54\uB274 -->
          <div class="skill-menu" *ngIf="showSkillMenu">
            <div class="skill-menu-title">\uC2A4\uD0AC \uC120\uD0DD</div>
            <div class="skill-list-battle">
              <button *ngFor="let skill of battleState.player.skills" 
                      class="skill-button"
                      [disabled]="skill.mpCost > battleState.player.currentMp"
                      (click)="playerUseSkill(skill)">
                <div class="skill-name">{{ skill.name }}</div>
                <div class="skill-info">
                  <span class="skill-mp">MP {{ skill.mpCost }}</span>
                  <span class="skill-damage">\uB370\uBBF8\uC9C0 {{ skill.damage }}</span>
                </div>
              </button>
            </div>
          </div>
        </div>

        <!-- \uC790\uB3D9\uC804\uD22C \uC911 \uD45C\uC2DC -->
        <div class="auto-battle-indicator" *ngIf="battleState.isAutoBattle && !battleState.ended">
          <span>\u{1F916} \uC790\uB3D9 \uC804\uD22C \uC9C4\uD589 \uC911...</span>
          <button class="stop-auto-btn" (click)="stopAutoBattle()">\uC911\uB2E8</button>
        </div>

        <!-- \uC804\uD22C \uC885\uB8CC -->
        <div class="battle-result" *ngIf="battleState.ended">
          <h3 *ngIf="battleState.victory">\u{1F389} \uC2B9\uB9AC!</h3>
          <h3 *ngIf="!battleState.victory">\u{1F480} \uD328\uBC30...</h3>
          <button class="continue-btn" (click)="endBattle()">\uACC4\uC18D\uD558\uAE30</button>
        </div>
      </div>

      <!-- \uB358\uC804 \uD0D0\uD5D8 \uD654\uBA74 -->
      <div class="dungeon-screen" *ngIf="showDungeonExplorer">
        <div class="dungeon-header">
          <h2>\u{1F3F0} \uB358\uC804 \uD0D0\uD5D8</h2>
          <button class="escape-btn" (click)="onDungeonEscape()">\uD0C8\uCD9C\uD558\uAE30</button>
        </div>
        
        <app-dungeon-explorer
          *ngIf="currentDungeon"
          [dungeon]="currentDungeon"
          [currentRoom]="currentDungeonRoom"
          [playerHp]="player?.health || 100"
          [playerMaxHp]="player?.maxHealth || 100"
          [playerName]="player?.name || '\uD50C\uB808\uC774\uC5B4'"
          [playerLevel]="player?.level || 1"
          [playerAttackPower]="getTotalAttack()"
          [playerDefensePower]="getTotalDefense()"
          (roomMove)="onDungeonRoomMove($event)"
          (interactableUse)="onDungeonInteract($event)"
          (monsterAttack)="onDungeonMonsterBattle($event)"
          (rewardsClaimed)="onDungeonRewardsClaimed($event)"
          (floorMove)="onDungeonFloorChange($event)"
          (dungeonEscape)="onDungeonEscape()">
        </app-dungeon-explorer>
        
        <div class="dungeon-placeholder" *ngIf="!currentDungeon">
          <p>\uB358\uC804\uC744 \uC0DD\uC131 \uC911\uC785\uB2C8\uB2E4...</p>
          <p>\uACE7 \uD0D0\uD5D8\uC774 \uC2DC\uC791\uB429\uB2C8\uB2E4.</p>
        </div>
      </div>

      <!-- \uAC8C\uC784 \uB85C\uADF8 (\uC804\uD22C \uC911\uC774 \uC544\uB2D0 \uB54C\uB9CC) -->
      <div class="game-log" *ngIf="!inBattle && !showDungeonExplorer">
        <div *ngFor="let log of gameLog" class="log-line" [innerHTML]="log"></div>
      </div>

      <!-- \uC120\uD0DD\uC9C0 \uD328\uB110 (\uC804\uD22C \uC911\uC774 \uC544\uB2D0 \uB54C\uB9CC) -->
      <div class="choices-panel" *ngIf="currentScene && availableChoices.length > 0 && !inBattle && !showDungeonExplorer">
        <div class="choices-title">
          \u25B6 \uC120\uD0DD\uC9C0
          <span class="auto-progress-indicator" *ngIf="isAutoProgressing">
            ({{ autoProgressCountdown.toFixed(1) }}\uCD08 \uD6C4 \uC790\uB3D9 \uC9C4\uD589... Space\uB85C \uC989\uC2DC \uC9C4\uD589)
          </span>
        </div>
        <div class="choice-list">
          <button 
            *ngFor="let choice of availableChoices; let i = index" 
            class="choice-button"
            [class.disabled]="choice.isDisabled"
            [class.auto-progressing]="isAutoProgressing"
            [disabled]="choice.isDisabled"
            (click)="selectChoice(choice)">
            <span class="choice-number">{{ i + 1 }}</span>
            <span class="choice-text">{{ choice.text }}</span>
            <span *ngIf="choice.isDisabled" class="choice-reason">
              ({{ choice.disabledReason }})
            </span>
          </button>
        </div>
      </div>
    </div>

    <!-- \uC6B0\uCE21: \uC815\uBCF4 \uD328\uB110 (\uCE90\uB9AD\uD130 \uC2DC\uD2B8 / \uC778\uBCA4\uD1A0\uB9AC / \uB3C4\uC6C0\uB9D0) -->
    <div class="info-panel" *ngIf="showCharacterSheet || showInventory || showHelp">
      
      <!-- \uCE90\uB9AD\uD130 \uC2DC\uD2B8 -->
      <div class="character-sheet" *ngIf="showCharacterSheet && player">
        <h2 class="panel-title">\uCE90\uB9AD\uD130 \uC815\uBCF4</h2>
        
        <div class="character-section">
          <h3>\uAE30\uBCF8 \uC815\uBCF4</h3>
          <div class="info-row">
            <span class="info-label">\uC774\uB984:</span>
            <span class="info-value">{{ player.name }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">\uB808\uBCA8:</span>
            <span class="info-value">{{ player.level }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">\uACBD\uD5D8\uCE58:</span>
            <span class="info-value">
              {{ player.experience }} / {{ player.experienceToNext }}
              <span class="exp-percentage">({{ getExperiencePercentage().toFixed(1) }}%)</span>
            </span>
            <div class="exp-bar-full">
              <div class="exp-fill-full" [style.width.%]="getExperiencePercentage()"></div>
            </div>
          </div>
          <div class="info-row">
            <span class="info-label">\uBB38\uD30C:</span>
            <span class="info-value">{{ player.sect || '\uBB34\uC18C\uC18D' }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">\uC131\uACA9:</span>
            <span class="info-value">{{ player.personality }}</span>
          </div>
        </div>

        <!-- \uC804\uD22C\uB825 \uC815\uBCF4 -->
        <div class="character-section combat-power-section">
          <h3>\u2694\uFE0F \uC804\uD22C\uB825</h3>
          <div class="combat-stats">
            <div class="combat-stat-row total-power">
              <span class="stat-label">\uC885\uD569 \uC804\uD22C\uB825</span>
              <span class="stat-value total">{{ getTotalCombatPower() }}</span>
            </div>
            <div class="combat-stat-breakdown">
              <div class="combat-stat-row">
                <span class="stat-label">\uACF5\uACA9\uB825</span>
                <span class="stat-value">
                  {{ getBaseAttack() }}
                  <span class="bonus" *ngIf="getEquipmentBonus().attack > 0">
                    +{{ getEquipmentBonus().attack }}
                  </span>
                  <span class="total-value">= {{ getTotalAttack() }}</span>
                </span>
              </div>
              <div class="combat-stat-row">
                <span class="stat-label">\uBC29\uC5B4\uB825</span>
                <span class="stat-value">
                  {{ getBaseDefense() }}
                  <span class="bonus" *ngIf="getEquipmentBonus().defense > 0">
                    +{{ getEquipmentBonus().defense }}
                  </span>
                  <span class="total-value">= {{ getTotalDefense() }}</span>
                </span>
              </div>
              <div class="combat-stat-row">
                <span class="stat-label">\uCD5C\uB300 \uC0DD\uBA85\uB825</span>
                <span class="stat-value">
                  {{ getBaseMaxHp() }}
                  <span class="bonus" *ngIf="getEquipmentBonus().hp > 0">
                    +{{ getEquipmentBonus().hp }}
                  </span>
                  <span class="total-value">= {{ player.maxHealth }}</span>
                </span>
              </div>
              <div class="combat-stat-row" *ngIf="getEquipmentBonus().critChance > 0">
                <span class="stat-label">\uCE58\uBA85\uD0C0\uC728</span>
                <span class="stat-value bonus-only">+{{ getEquipmentBonus().critChance }}%</span>
              </div>
              <div class="combat-stat-row" *ngIf="getEquipmentBonus().evasion > 0">
                <span class="stat-label">\uD68C\uD53C\uC728</span>
                <span class="stat-value bonus-only">+{{ getEquipmentBonus().evasion }}%</span>
              </div>
            </div>
          </div>
        </div>

        <div class="character-section">
          <h3>\uB2A5\uB825\uCE58</h3>
          <div class="stat-row">
            <span class="stat-name">\uADFC\uB825 (Strength)</span>
            <span class="stat-number">{{ player.stats.strength }}</span>
          </div>
          <div class="stat-row">
            <span class="stat-name">\uBBFC\uCCA9 (Dexterity)</span>
            <span class="stat-number">{{ player.stats.dexterity }}</span>
          </div>
          <div class="stat-row">
            <span class="stat-name">\uB0B4\uACF5 (Inner Power)</span>
            <span class="stat-number">{{ player.stats.innerPower }}</span>
          </div>
          <div class="stat-row">
            <span class="stat-name">\uD1B5\uCC30 (Insight)</span>
            <span class="stat-number">{{ player.stats.insight }}</span>
          </div>
        </div>

        <div class="character-section">
          <h3>\uC0C1\uD0DC</h3>
          <div class="info-row">
            <span class="info-label">\uC0DD\uBA85\uB825:</span>
            <span class="info-value">{{ player.health }} / {{ player.maxHealth }}</span>
          </div>
          <div *ngIf="player.injuries.length > 0" class="injuries-list">
            <div class="injury-item" *ngFor="let injury of player.injuries">
              \u26A0 {{ injury.description }} (\uC2EC\uAC01\uB3C4: {{ injury.severity }})
            </div>
          </div>
          <div *ngIf="player.injuries.length === 0" class="no-injuries">
            \u2713 \uBD80\uC0C1 \uC5C6\uC74C
          </div>
        </div>

        <div class="character-section" *ngIf="player.learnedSkills.length > 0">
          <h3>\uC2B5\uB4DD\uD55C \uBB34\uACF5</h3>
          <div class="skill-list">
            <div class="skill-item" *ngFor="let skill of player.learnedSkills">
              \u2694 {{ skill }}
            </div>
          </div>
        </div>
      </div>

      <!-- \uC778\uBCA4\uD1A0\uB9AC -->
      <div class="inventory-panel" *ngIf="showInventory && player">
        <h2 class="panel-title">\uC18C\uC9C0\uD488</h2>
        
        <div class="equipped-section">
          <h3>\uC7A5\uCC29 \uC911</h3>
          <div class="equipped-slots">
            <div class="equipped-slot">
              <span class="slot-label">\uBB34\uAE30:</span>
              <div class="slot-item" *ngIf="getEquippedWeapon(); let weapon">
                <span class="item-name" [class]="'rarity-' + weapon.rarity">{{ weapon.name }}</span>
                <button class="btn-unequip" (click)="unequipItem('weapon')">\uD574\uC81C</button>
              </div>
              <span class="slot-empty" *ngIf="!getEquippedWeapon()">\uC5C6\uC74C</span>
            </div>
            
            <div class="equipped-slot">
              <span class="slot-label">\uC758\uBCF5:</span>
              <div class="slot-item" *ngIf="getEquippedArmor(); let armor">
                <span class="item-name" [class]="'rarity-' + armor.rarity">{{ armor.name }}</span>
                <button class="btn-unequip" (click)="unequipItem('armor')">\uD574\uC81C</button>
              </div>
              <span class="slot-empty" *ngIf="!getEquippedArmor()">\uC5C6\uC74C</span>
            </div>
            
            <div class="equipped-slot">
              <span class="slot-label">\uC545\uC138\uC0AC\uB9AC:</span>
              <div class="slot-item" *ngIf="getEquippedAccessory(); let accessory">
                <span class="item-name" [class]="'rarity-' + accessory.rarity">{{ accessory.name }}</span>
                <button class="btn-unequip" (click)="unequipItem('accessory')">\uD574\uC81C</button>
              </div>
              <span class="slot-empty" *ngIf="!getEquippedAccessory()">\uC5C6\uC74C</span>
            </div>
          </div>
        </div>

        <div class="inventory-section">
          <h3>\uBCF4\uC720 \uC911</h3>
          <div *ngIf="player.inventory.length === 0" class="empty-inventory">
            \uC778\uBCA4\uD1A0\uB9AC\uAC00 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.
          </div>
          <div class="inventory-list">
            <div class="inventory-item" *ngFor="let item of player.inventory">
              <div class="item-header">
                <span class="item-name" [class]="'rarity-' + item.rarity">
                  {{ item.name }}
                </span>
                <span class="item-equipped-badge" *ngIf="item.isEquipped">
                  [\uC7A5\uCC29\uC911]
                </span>
                <span class="item-quantity" *ngIf="item.quantity > 1">
                  x{{ item.quantity }}
                </span>
              </div>
              <div class="item-description">{{ item.description }}</div>
              
              <!-- \uC7A5\uBE44 \uC2A4\uD0EF \uD45C\uC2DC -->
              <div class="item-stats" *ngIf="item.stats">
                <div class="stat-line" *ngFor="let statLine of getItemStatsDisplay(item)">
                  {{ statLine }}
                </div>
              </div>
              
              <!-- \uC7A5\uCC29/\uC0AC\uC6A9 \uBC84\uD2BC -->
              <div class="item-actions">
                <button class="btn-equip" 
                        *ngIf="canEquipItem(item) && !item.isEquipped"
                        (click)="equipItem(item)">
                  \uC7A5\uCC29
                </button>
                <button class="btn-unequip-item" 
                        *ngIf="item.isEquipped"
                        (click)="unequipItemByItem(item)">
                  \uD574\uC81C
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- \uB3C4\uC6C0\uB9D0 -->
      <div class="help-panel" *ngIf="showHelp">
        <h2 class="panel-title">\uB3C4\uC6C0\uB9D0</h2>
        
        <div class="help-section">
          <h3>\uAC8C\uC784 \uC18C\uAC1C</h3>
          <p>
            \uBB35\uD5A5\uC9C0\uC5F0(\u58A8\u9999\u4E4B\u7DE3)\uC740 100% \uD14D\uC2A4\uD2B8\uB85C \uC9C4\uD589\uB418\uB294 \uBB34\uD611 \uC778\uD130\uB799\uD2F0\uBE0C \uD53D\uC158 \uAC8C\uC784\uC785\uB2C8\uB2E4.
            \uB2F9\uC2E0\uC758 \uC120\uD0DD, \uB2A5\uB825\uCE58, \uC131\uD5A5\uC5D0 \uB530\uB77C \uC774\uC57C\uAE30\uAC00 \uC2E4\uC2DC\uAC04\uC73C\uB85C \uBCC0\uD654\uD569\uB2C8\uB2E4.
          </p>
        </div>

        <div class="help-section">
          <h3>\uB2A5\uB825\uCE58 \uC124\uBA85</h3>
          <ul>
            <li><strong>\uADFC\uB825:</strong> \uBB3C\uB9AC\uC801 \uD310\uC815, \uBB34\uAC70\uC6B4 \uBB34\uAE30 \uC0AC\uC6A9</li>
            <li><strong>\uBBFC\uCCA9:</strong> \uD68C\uD53C, \uC7A0\uC785, \uACBD\uACF5, \uC554\uAE30 \uD310\uC815</li>
            <li><strong>\uB0B4\uACF5:</strong> \uBB34\uACF5 \uC704\uB825, \uB0B4\uACF5 \uAC10\uC9C0, \uD68C\uBCF5 \uC18D\uB3C4</li>
            <li><strong>\uD1B5\uCC30:</strong> \uB2E8\uC11C \uBC1C\uACAC, \uC758\uB3C4 \uAC04\uD30C, \uD568\uC815 \uBC1C\uACAC</li>
          </ul>
        </div>

        <div class="help-section">
          <h3>\uC131\uD5A5 \uC2DC\uC2A4\uD15C</h3>
          <p>
            \uB2F9\uC2E0\uC758 \uD589\uB3D9\uC5D0 \uB530\uB77C \uC131\uD5A5\uC774 \uBCC0\uD654\uD569\uB2C8\uB2E4.<br>
            <span class="tendency-mark righteous">\uC815\uB3C4</span> (-100 ~ -20) / 
            <span class="tendency-mark neutral">\uC911\uB9BD</span> (-19 ~ 19) / 
            <span class="tendency-mark evil">\uC0AC\uB3C4</span> (20 ~ 100)
          </p>
          <p>
            \uC131\uD5A5\uC740 NPC\uC758 \uBC18\uC751, \uC120\uD0DD\uC9C0, \uD2B9\uC218 \uC774\uBCA4\uD2B8 \uBC1C\uB3D9\uC5D0 \uC601\uD5A5\uC744 \uC90D\uB2C8\uB2E4.
          </p>
        </div>

        <div class="help-section">
          <h3>\uC870\uC791 \uBC29\uBC95</h3>
          <ul>
            <li>\uC22B\uC790 \uBC84\uD2BC \uB610\uB294 \uD074\uB9AD\uC73C\uB85C \uC120\uD0DD\uC9C0\uB97C \uC120\uD0DD\uD569\uB2C8\uB2E4.</li>
            <li>[\uC870\uAC74]\uC774 \uD45C\uC2DC\uB41C \uC120\uD0DD\uC9C0\uB294 \uD2B9\uC815 \uC870\uAC74\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.</li>
            <li>\uC870\uAC74 \uBBF8\uB2EC \uC2DC \uC120\uD0DD\uC9C0\uAC00 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4.</li>
            <li>\uD310\uC815\uC774 \uD544\uC694\uD55C \uC120\uD0DD\uC9C0\uB294 \uB2A5\uB825\uCE58\uB85C \uC131\uACF5/\uC2E4\uD328\uAC00 \uACB0\uC815\uB429\uB2C8\uB2E4.</li>
          </ul>
        </div>

        <div class="help-section">
          <h3>\uB3D9\uC801 \uC0C1\uD669 \uC2DC\uC2A4\uD15C</h3>
          <p>
            \uD2B9\uC815 \uC870\uAC74(\uC7A5\uC18C, \uC2DC\uAC04, \uB2A5\uB825\uCE58, \uC544\uC774\uD15C \uB4F1)\uC774 \uCDA9\uC871\uB418\uBA74 
            \uBA54\uC778 \uC2A4\uD1A0\uB9AC\uC640 \uBCC4\uAC1C\uB85C \uD2B9\uC218 \uC774\uBCA4\uD2B8\uAC00 \uC790\uB3D9\uC73C\uB85C \uBC1C\uC0DD\uD569\uB2C8\uB2E4.
          </p>
          <p>
            \uAE30\uC5F0, \uC5F0\uC560, \uB77C\uC774\uBC8C\uACFC\uC758 \uC870\uC6B0 \uB4F1 \uB2E4\uC591\uD55C \uC0C1\uD669\uC744 \uACBD\uD5D8\uD558\uC138\uC694.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- \uACF5\uD1B5 \uBAA8\uB2EC -->
<app-game-modal
  [isOpen]="isModalOpen"
  [type]="modalState?.type || 'info'"
  [title]="modalState?.title || ''"
  [message]="modalState?.message || ''"
  [confirmText]="modalState?.confirmText || '\uD655\uC778'"
  [cancelText]="modalState?.cancelText || '\uCDE8\uC18C'"
  [showCancel]="modalState?.showCancel || false"
  (confirm)="onModalConfirm()"
  (cancel)="onModalCancel()"
  (close)="onModalClose()">
</app-game-modal>
`, styles: ['@charset "UTF-8";\n\n/* src/app/modules/novel/components/wuxia-game/wuxia-game.component.scss */\n.wuxia-game-container {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background:\n    linear-gradient(\n      135deg,\n      #f5f1e8 0%,\n      #e8dcc8 100%);\n  color: #2c2416;\n  font-family:\n    "Noto Sans KR",\n    "Malgun Gothic",\n    sans-serif;\n  overflow: hidden;\n}\n.game-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  background: rgba(139, 69, 19, 0.1);\n  border-bottom: 2px solid #8b4513;\n  box-shadow: 0 2px 8px rgba(139, 69, 19, 0.2);\n}\n.game-title {\n  margin: 0;\n  font-size: 1.8rem;\n  font-weight: bold;\n  color: #8b4513;\n  text-shadow: 1px 1px 2px rgba(212, 175, 55, 0.3);\n  letter-spacing: 2px;\n}\n.game-controls {\n  display: flex;\n  gap: 0.5rem;\n}\n.btn-control {\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.5rem 1rem;\n  background: rgba(139, 69, 19, 0.1);\n  border: 1px solid #8b4513;\n  border-radius: 4px;\n  color: #2c2416;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-size: 0.9rem;\n}\n.btn-control i {\n  font-size: 1.2rem;\n}\n.btn-control:hover {\n  background: rgba(139, 69, 19, 0.2);\n  border-color: #8b4513;\n  color: #000;\n}\n.btn-control.active {\n  background: rgba(139, 69, 19, 0.15);\n  border-color: #8b4513;\n  color: #8b4513;\n  font-weight: 600;\n}\n.btn-control.btn-new-game {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(212, 175, 55, 0.2),\n      rgba(139, 69, 19, 0.1));\n  border-color: #8b4513;\n  font-weight: 600;\n}\n.btn-control.btn-new-game:hover {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(212, 175, 55, 0.3),\n      rgba(139, 69, 19, 0.2));\n  box-shadow: 0 0 10px rgba(139, 69, 19, 0.2);\n}\n.game-content {\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n}\n.main-panel {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  overflow-y: auto;\n}\n.info-panel {\n  width: 400px;\n  background: rgba(255, 255, 255, 0.9);\n  border-left: 2px solid #8b4513;\n  padding: 1.5rem;\n  overflow-y: auto;\n}\n.status-bar {\n  display: flex;\n  gap: 1.5rem;\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.8);\n  border: 1px solid #8b4513;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  font-size: 0.95rem;\n  box-shadow: 0 2px 6px rgba(139, 69, 19, 0.1);\n}\n.stat-item {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.stat-item.health {\n  flex-direction: column;\n  align-items: flex-start;\n}\n.stat-label {\n  color: #666;\n  font-weight: 500;\n}\n.stat-value {\n  color: #2c2416;\n  font-weight: bold;\n}\n.stat-value.combat-power {\n  color: #ff8000;\n  font-size: 1.1rem;\n  font-weight: 900;\n  text-shadow: 0 1px 2px rgba(255, 128, 0, 0.3);\n  padding: 2px 8px;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 128, 0, 0.15),\n      rgba(255, 165, 0, 0.15));\n  border-radius: 4px;\n  border: 1px solid rgba(255, 128, 0, 0.3);\n}\n.stat-value.tendency {\n  padding: 2px 8px;\n  border-radius: 3px;\n  font-size: 0.85rem;\n}\n.stat-value.tendency.righteous {\n  background: rgba(100, 149, 237, 0.2);\n  color: #4169e1;\n}\n.stat-value.tendency.neutral {\n  background: rgba(128, 128, 128, 0.2);\n  color: #666;\n}\n.stat-value.tendency.evil {\n  background: rgba(220, 20, 60, 0.3);\n  color: #dc143c;\n}\n.health-bar {\n  width: 100px;\n  height: 6px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 3px;\n  overflow: hidden;\n  margin-top: 4px;\n}\n.health-fill {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #dc143c 0%,\n      #ff6347 100%);\n  transition: width 0.3s;\n}\n.experience-bar-container {\n  padding: 0;\n  margin-bottom: 1rem;\n  background: #d0d0d0;\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n.exp-info-wrapper {\n  position: absolute;\n  left: 8px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 2;\n}\n.exp-info-wrapper .exp-current {\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: #fff;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);\n  background: rgba(0, 0, 0, 0.3);\n  padding: 2px 6px;\n  border-radius: 3px;\n  white-space: nowrap;\n}\n.exp-bar {\n  width: 100%;\n  height: 20px;\n  background: #d0d0d0;\n  overflow: hidden;\n  position: relative;\n}\n.exp-fill {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #ff6b35 0%,\n      #ff8c42 50%,\n      #ffa600 100%);\n  box-shadow: 0 0 8px rgba(255, 140, 66, 0.6), inset 0 1px 2px rgba(255, 255, 255, 0.3);\n  transition: width 0.5s ease-out;\n  position: relative;\n}\n.exp-fill::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      transparent,\n      rgba(255, 255, 255, 0.4),\n      transparent);\n  animation: shimmer 2s infinite;\n}\n.exp-end-bar {\n  width: 3px;\n  height: 20px;\n  background:\n    linear-gradient(\n      180deg,\n      #333 0%,\n      #666 50%,\n      #333 100%);\n  box-shadow: -1px 0 2px rgba(0, 0, 0, 0.3);\n}\n@keyframes shimmer {\n  0% {\n    left: -100%;\n  }\n  100% {\n    left: 100%;\n  }\n}\n.objective-panel {\n  padding: 0.8rem 1rem;\n  background: rgba(139, 69, 19, 0.08);\n  border-left: 4px solid #8b4513;\n  border-radius: 4px;\n  margin-bottom: 1rem;\n}\n.objective-title {\n  font-size: 0.85rem;\n  color: #8b4513;\n  font-weight: bold;\n  margin-bottom: 0.3rem;\n}\n.objective-text {\n  font-size: 1rem;\n  color: #2c2416;\n}\n.game-log {\n  flex: 1;\n  padding: 1.5rem;\n  background: rgba(255, 255, 255, 0.85);\n  border: 1px solid #8b4513;\n  border-radius: 6px;\n  overflow-y: auto;\n  font-family:\n    "Noto Serif KR",\n    "Batang",\n    serif;\n  line-height: 1.8;\n  margin-bottom: 1rem;\n  max-height: calc(100vh - 400px);\n}\n.log-line {\n  margin-bottom: 0.5rem;\n  color: #3c3020;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.log-line:empty {\n  height: 0.5rem;\n}\n.choices-panel {\n  background: rgba(255, 255, 255, 0.9);\n  border: 1px solid #8b4513;\n  border-radius: 6px;\n  padding: 1rem;\n  box-shadow: 0 2px 8px rgba(139, 69, 19, 0.15);\n}\n.choices-title {\n  font-size: 1.1rem;\n  font-weight: bold;\n  color: #8b4513;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.3);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.auto-progress-indicator {\n  font-size: 0.9rem;\n  font-weight: normal;\n  color: #4169e1;\n  animation: pulse 1s ease-in-out infinite;\n}\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.6;\n  }\n}\n.choice-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.7rem;\n}\n.choice-button {\n  display: flex;\n  align-items: center;\n  gap: 0.8rem;\n  padding: 0.8rem 1rem;\n  background: rgba(255, 255, 255, 0.9);\n  border: 1px solid #8b4513;\n  border-radius: 4px;\n  color: #2c2416;\n  text-align: left;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-size: 1rem;\n}\n.choice-button:hover:not(.disabled) {\n  background: rgba(139, 69, 19, 0.15);\n  border-color: #8b4513;\n  transform: translateX(4px);\n  box-shadow: 0 2px 6px rgba(139, 69, 19, 0.2);\n}\n.choice-button.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  background: rgba(200, 200, 200, 0.3);\n  border-color: #999;\n}\n.choice-button.auto-progressing {\n  background: rgba(65, 105, 225, 0.1);\n  border-color: #4169e1;\n  animation: choice-pulse 2s ease-in-out infinite;\n}\n@keyframes choice-pulse {\n  0%, 100% {\n    border-color: #4169e1;\n    box-shadow: 0 0 0 0 rgba(65, 105, 225, 0.4);\n  }\n  50% {\n    border-color: #6495ed;\n    box-shadow: 0 0 0 4px rgba(65, 105, 225, 0);\n  }\n}\n.choice-number {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  background: rgba(139, 69, 19, 0.15);\n  border: 1px solid #8b4513;\n  border-radius: 50%;\n  font-weight: bold;\n  color: #8b4513;\n  font-size: 0.85rem;\n}\n.choice-text {\n  flex: 1;\n}\n.choice-reason {\n  font-size: 0.85rem;\n  color: #999;\n  font-style: italic;\n}\n.panel-title {\n  margin: 0 0 1.5rem 0;\n  font-size: 1.5rem;\n  color: #8b4513;\n  border-bottom: 2px solid #8b4513;\n  padding-bottom: 0.5rem;\n}\n.character-section,\n.equipped-section,\n.inventory-section,\n.help-section {\n  margin-bottom: 1.5rem;\n}\n.character-section h3,\n.equipped-section h3,\n.inventory-section h3,\n.help-section h3 {\n  font-size: 1.1rem;\n  color: #8b4513;\n  margin-bottom: 0.8rem;\n  font-weight: 600;\n}\n.combat-power-section {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(139, 69, 19, 0.05),\n      rgba(160, 82, 45, 0.05));\n  border: 2px solid #8b4513;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n}\n.combat-power-section h3 {\n  font-size: 1.2rem;\n  color: #8b4513;\n  margin-bottom: 1rem;\n  text-align: center;\n  font-weight: bold;\n}\n.combat-stats .total-power {\n  background:\n    linear-gradient(\n      135deg,\n      #8b4513,\n      #a0522d);\n  color: white;\n  padding: 1rem;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  text-align: center;\n  box-shadow: 0 4px 8px rgba(139, 69, 19, 0.3);\n}\n.combat-stats .total-power .stat-label {\n  font-size: 1rem;\n  font-weight: 600;\n  display: block;\n  margin-bottom: 0.5rem;\n  opacity: 0.9;\n}\n.combat-stats .total-power .stat-value.total {\n  font-size: 2rem;\n  font-weight: bold;\n  display: block;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n}\n.combat-stats .combat-stat-breakdown {\n  background: rgba(255, 255, 255, 0.8);\n  border-radius: 6px;\n  padding: 0.8rem;\n}\n.combat-stats .combat-stat-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.6rem 0;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.1);\n}\n.combat-stats .combat-stat-row:last-child {\n  border-bottom: none;\n}\n.combat-stats .combat-stat-row .stat-label {\n  color: #666;\n  font-size: 0.95rem;\n  font-weight: 500;\n}\n.combat-stats .combat-stat-row .stat-value {\n  color: #2c2416;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.combat-stats .combat-stat-row .stat-value .bonus {\n  color: #28a745;\n  font-size: 0.9rem;\n  font-weight: bold;\n}\n.combat-stats .combat-stat-row .stat-value .total-value {\n  color: #8b4513;\n  font-weight: bold;\n}\n.combat-stats .combat-stat-row .stat-value.bonus-only {\n  color: #28a745;\n  font-weight: bold;\n}\n.info-row,\n.stat-row {\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.15);\n  flex-wrap: wrap;\n}\n.info-row:last-child,\n.stat-row:last-child {\n  border-bottom: none;\n}\n.info-label,\n.stat-name {\n  color: #666;\n}\n.info-value,\n.stat-number {\n  color: #2c2416;\n  font-weight: bold;\n}\n.info-value .exp-percentage,\n.stat-number .exp-percentage {\n  color: #888;\n  font-size: 0.85em;\n  margin-left: 0.5rem;\n}\n.exp-bar-full {\n  width: 100%;\n  height: 8px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 4px;\n  overflow: hidden;\n  margin-top: 0.5rem;\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);\n}\n.exp-fill-full {\n  height: 100%;\n  background:\n    linear-gradient(\n      90deg,\n      #ffd700 0%,\n      #ffed4e 50%,\n      #ffd700 100%);\n  box-shadow: 0 0 10px rgba(255, 215, 0, 0.8);\n  transition: width 0.5s ease-out;\n  animation: shimmer 2s infinite;\n}\n@keyframes shimmer {\n  0% {\n    background-position: -100% 0;\n  }\n  100% {\n    background-position: 100% 0;\n  }\n}\n.injuries-list {\n  margin-top: 0.5rem;\n}\n.injury-item {\n  padding: 0.5rem;\n  background: rgba(220, 20, 60, 0.1);\n  border-left: 3px solid #dc143c;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n  color: #8b0000;\n}\n.no-injuries {\n  color: #228b22;\n  font-size: 0.9rem;\n}\n.skill-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.skill-item {\n  padding: 0.5rem;\n  background: rgba(139, 69, 19, 0.1);\n  border-left: 3px solid #8b4513;\n  font-size: 0.9rem;\n  color: #2c2416;\n}\n.equipped-item {\n  display: flex;\n  gap: 1rem;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.15);\n}\n.item-slot {\n  color: #666;\n  min-width: 80px;\n}\n.empty-inventory {\n  color: #999;\n  font-style: italic;\n  text-align: center;\n  padding: 2rem;\n}\n.inventory-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n}\n.inventory-item {\n  padding: 0.8rem;\n  background: rgba(255, 255, 255, 0.6);\n  border: 1px solid #8b4513;\n  border-radius: 4px;\n}\n.item-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.3rem;\n}\n.item-name {\n  font-weight: bold;\n}\n.item-name.rarity-common {\n  color: #fff;\n}\n.item-name.rarity-uncommon {\n  color: #1eff00;\n}\n.item-name.rarity-rare {\n  color: #0070dd;\n}\n.item-name.rarity-epic {\n  color: #a335ee;\n}\n.item-name.rarity-legendary {\n  color: #ff8000;\n}\n.item-quantity {\n  color: #999;\n  font-size: 0.9rem;\n}\n.item-description {\n  font-size: 0.85rem;\n  color: #aaa;\n  font-style: italic;\n}\n.help-panel ul {\n  list-style: none;\n  padding-left: 0;\n}\n.help-panel ul li {\n  padding: 0.3rem 0;\n  padding-left: 1.5rem;\n  position: relative;\n}\n.help-panel ul li::before {\n  content: "\\25b8";\n  position: absolute;\n  left: 0;\n  color: #d4af37;\n}\n.help-panel ul li strong {\n  color: #d4af37;\n}\n.help-panel p {\n  line-height: 1.6;\n  color: #ccc;\n  margin-bottom: 0.8rem;\n}\n.tendency-mark {\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-weight: bold;\n  font-size: 0.9rem;\n}\n.tendency-mark.righteous {\n  background: rgba(100, 149, 237, 0.3);\n  color: #6495ed;\n}\n.tendency-mark.neutral {\n  background: rgba(128, 128, 128, 0.3);\n  color: #ccc;\n}\n.tendency-mark.evil {\n  background: rgba(220, 20, 60, 0.3);\n  color: #dc143c;\n}\n.game-log::-webkit-scrollbar,\n.main-panel::-webkit-scrollbar,\n.info-panel::-webkit-scrollbar {\n  width: 8px;\n}\n.game-log::-webkit-scrollbar-track,\n.main-panel::-webkit-scrollbar-track,\n.info-panel::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.3);\n}\n.game-log::-webkit-scrollbar-thumb,\n.main-panel::-webkit-scrollbar-thumb,\n.info-panel::-webkit-scrollbar-thumb {\n  background: rgba(139, 69, 19, 0.5);\n  border-radius: 4px;\n}\n.game-log::-webkit-scrollbar-thumb:hover,\n.main-panel::-webkit-scrollbar-thumb:hover,\n.info-panel::-webkit-scrollbar-thumb:hover {\n  background: rgba(139, 69, 19, 0.7);\n}\n@media (max-width: 1024px) {\n  .info-panel {\n    width: 350px;\n  }\n  .game-title {\n    font-size: 1.4rem;\n  }\n}\n@media (max-width: 768px) {\n  .game-content {\n    flex-direction: column;\n  }\n  .info-panel {\n    width: 100%;\n    border-left: none;\n    border-top: 2px solid #8b4513;\n    max-height: 300px;\n  }\n  .status-bar {\n    flex-wrap: wrap;\n    gap: 1rem;\n  }\n  .game-controls {\n    flex-wrap: wrap;\n  }\n}\n.battle-screen {\n  background: rgba(255, 255, 255, 0.95);\n  border: 2px solid #8b4513;\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 1rem;\n}\n.battle-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1rem;\n  border-bottom: 2px solid #8b4513;\n}\n.battle-header h2 {\n  margin: 0;\n  color: #8b4513;\n  font-size: 1.5rem;\n}\n.battle-turn-indicator {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 1.1rem;\n}\n.battle-turn-indicator .turn-label {\n  color: #666;\n}\n.battle-turn-indicator .turn-value {\n  font-weight: bold;\n  padding: 0.3rem 0.8rem;\n  border-radius: 4px;\n}\n.battle-turn-indicator .turn-value.player-turn {\n  background: rgba(65, 105, 225, 0.2);\n  color: #4169e1;\n}\n.battle-turn-indicator .turn-value.enemy-turn {\n  background: rgba(220, 20, 60, 0.2);\n  color: #dc143c;\n}\n.battle-participants {\n  display: flex;\n  justify-content: space-between;\n  gap: 2rem;\n  margin-bottom: 1.5rem;\n}\n.battle-character {\n  flex: 1;\n  padding: 1rem;\n  border: 2px solid #8b4513;\n  border-radius: 6px;\n  background: rgba(255, 255, 255, 0.6);\n}\n.battle-character.player-character {\n  border-color: #4169e1;\n}\n.battle-character.enemy-character {\n  border-color: #dc143c;\n}\n.battle-character.enemy-character.defeated {\n  opacity: 0.4;\n  filter: grayscale(1);\n}\n.battle-character.enemy-character.targeted {\n  border-color: #ff6347;\n  border-width: 3px;\n  box-shadow: 0 0 10px rgba(220, 20, 60, 0.4);\n}\n.battle-character .character-name {\n  font-size: 1.2rem;\n  font-weight: bold;\n  color: #2c2416;\n  margin-bottom: 0.8rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n}\n.battle-character .character-name .character-power {\n  font-size: 0.95rem;\n  color: #ff8000;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(255, 128, 0, 0.1),\n      rgba(255, 215, 0, 0.1));\n  padding: 0.25rem 0.6rem;\n  border-radius: 12px;\n  border: 1px solid rgba(255, 128, 0, 0.3);\n  font-weight: 600;\n  white-space: nowrap;\n}\n.battle-character .character-name .character-power.enemy-power {\n  color: #dc143c;\n  background:\n    linear-gradient(\n      135deg,\n      rgba(220, 20, 60, 0.1),\n      rgba(255, 69, 0, 0.1));\n  border-color: rgba(220, 20, 60, 0.3);\n}\n.character-stats {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.stat-bar {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9rem;\n}\n.stat-bar .stat-label {\n  min-width: 30px;\n  font-weight: 600;\n  color: #666;\n}\n.stat-bar .stat-progress {\n  flex: 1;\n  height: 20px;\n  background: rgba(200, 200, 200, 0.3);\n  border-radius: 10px;\n  overflow: hidden;\n  border: 1px solid #999;\n}\n.stat-bar .stat-fill {\n  height: 100%;\n  transition: width 0.3s ease;\n}\n.stat-bar .stat-fill.hp-fill {\n  background:\n    linear-gradient(\n      90deg,\n      #dc143c,\n      #ff6347);\n}\n.stat-bar .stat-fill.hp-fill.enemy-hp {\n  background:\n    linear-gradient(\n      90deg,\n      #8b0000,\n      #dc143c);\n}\n.stat-bar .stat-fill.mp-fill {\n  background:\n    linear-gradient(\n      90deg,\n      #4169e1,\n      #6495ed);\n}\n.stat-bar .stat-text {\n  min-width: 80px;\n  text-align: right;\n  font-weight: 600;\n  color: #2c2416;\n}\n.enemy-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n  flex: 1;\n}\n.battle-log {\n  background: rgba(245, 241, 232, 0.8);\n  border: 1px solid #8b4513;\n  border-radius: 6px;\n  padding: 1rem;\n  max-height: 150px;\n  overflow-y: auto;\n  margin-bottom: 1rem;\n}\n.battle-log .battle-log-entry {\n  padding: 0.3rem 0;\n  color: #3c3020;\n  font-size: 0.95rem;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.1);\n}\n.battle-log .battle-log-entry:last-child {\n  border-bottom: none;\n}\n.battle-actions {\n  margin-top: 1rem;\n}\n.action-buttons {\n  display: flex;\n  gap: 0.8rem;\n  flex-wrap: wrap;\n}\n.action-btn {\n  flex: 1;\n  min-width: 150px;\n  padding: 0.8rem 1.2rem;\n  border: 2px solid #8b4513;\n  border-radius: 6px;\n  background: rgba(255, 255, 255, 0.9);\n  color: #2c2416;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.action-btn:hover {\n  background: rgba(139, 69, 19, 0.15);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(139, 69, 19, 0.2);\n}\n.action-btn.auto-battle-btn {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(100, 149, 237, 0.2),\n      rgba(65, 105, 225, 0.15));\n  border-color: #4169e1;\n  color: #4169e1;\n}\n.action-btn.attack-btn {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(220, 20, 60, 0.2),\n      rgba(255, 99, 71, 0.15));\n  border-color: #dc143c;\n  color: #dc143c;\n}\n.action-btn.skill-btn {\n  background:\n    linear-gradient(\n      135deg,\n      rgba(148, 0, 211, 0.2),\n      rgba(138, 43, 226, 0.15));\n  border-color: #9400d3;\n  color: #9400d3;\n}\n.skill-menu {\n  margin-top: 1rem;\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.95);\n  border: 2px solid #9400d3;\n  border-radius: 6px;\n}\n.skill-menu .skill-menu-title {\n  font-size: 1.1rem;\n  font-weight: bold;\n  color: #9400d3;\n  margin-bottom: 0.8rem;\n}\n.skill-list-battle {\n  display: flex;\n  flex-direction: column;\n  gap: 0.6rem;\n}\n.skill-button {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.8rem 1rem;\n  background: rgba(255, 255, 255, 0.9);\n  border: 1px solid #9400d3;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.skill-button:hover:not(:disabled) {\n  background: rgba(148, 0, 211, 0.1);\n  transform: translateX(4px);\n}\n.skill-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.skill-button .skill-name {\n  font-weight: 600;\n  color: #2c2416;\n}\n.skill-button .skill-info {\n  display: flex;\n  gap: 1rem;\n  font-size: 0.9rem;\n}\n.skill-button .skill-info .skill-mp {\n  color: #4169e1;\n}\n.skill-button .skill-info .skill-damage {\n  color: #dc143c;\n}\n.auto-battle-indicator {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: rgba(100, 149, 237, 0.1);\n  border: 2px solid #4169e1;\n  border-radius: 6px;\n  margin-top: 1rem;\n}\n.auto-battle-indicator span {\n  color: #4169e1;\n  font-weight: 600;\n  font-size: 1.1rem;\n}\n.auto-battle-indicator .stop-auto-btn {\n  padding: 0.5rem 1.2rem;\n  background: #dc143c;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.auto-battle-indicator .stop-auto-btn:hover {\n  background: #a00;\n  transform: scale(1.05);\n}\n.battle-result {\n  text-align: center;\n  padding: 2rem;\n  background: rgba(255, 255, 255, 0.95);\n  border: 2px solid #8b4513;\n  border-radius: 8px;\n  margin-top: 1rem;\n}\n.battle-result h3 {\n  font-size: 2rem;\n  margin-bottom: 1.5rem;\n  color: #8b4513;\n}\n.battle-result .continue-btn {\n  padding: 0.8rem 2rem;\n  background:\n    linear-gradient(\n      135deg,\n      #8b4513,\n      #a0522d);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.battle-result .continue-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 12px rgba(139, 69, 19, 0.3);\n}\n.inventory-panel .equipped-section {\n  margin-bottom: 2rem;\n}\n.inventory-panel .equipped-section h3 {\n  font-size: 1.1rem;\n  color: #8b4513;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.3);\n}\n.inventory-panel .equipped-slots {\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n}\n.inventory-panel .equipped-slot {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 0.8rem;\n  background: rgba(255, 255, 255, 0.8);\n  border: 1px solid #d4a574;\n  border-radius: 4px;\n}\n.inventory-panel .equipped-slot .slot-label {\n  font-weight: 600;\n  color: #8b4513;\n  min-width: 80px;\n}\n.inventory-panel .equipped-slot .slot-item {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  flex: 1;\n}\n.inventory-panel .equipped-slot .slot-empty {\n  color: #999;\n  font-style: italic;\n}\n.inventory-panel .equipped-slot .btn-unequip {\n  padding: 0.3rem 0.8rem;\n  background: #dc3545;\n  color: white;\n  border: none;\n  border-radius: 3px;\n  font-size: 0.85rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.inventory-panel .equipped-slot .btn-unequip:hover {\n  background: #c82333;\n}\n.inventory-panel .inventory-section h3 {\n  font-size: 1.1rem;\n  color: #8b4513;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid rgba(139, 69, 19, 0.3);\n}\n.inventory-panel .inventory-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.inventory-panel .inventory-item {\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.9);\n  border: 1px solid #d4a574;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.inventory-panel .inventory-item:hover {\n  box-shadow: 0 2px 8px rgba(139, 69, 19, 0.15);\n  border-color: #8b4513;\n}\n.inventory-panel .inventory-item .item-header {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.inventory-panel .inventory-item .item-name {\n  font-weight: 600;\n  font-size: 1.05rem;\n}\n.inventory-panel .inventory-item .item-name.rarity-common {\n  color: #808080;\n}\n.inventory-panel .inventory-item .item-name.rarity-uncommon {\n  color: #00aa00;\n}\n.inventory-panel .inventory-item .item-name.rarity-rare {\n  color: #0070dd;\n}\n.inventory-panel .inventory-item .item-name.rarity-epic {\n  color: #a335ee;\n}\n.inventory-panel .inventory-item .item-name.rarity-legendary {\n  color: #ff8000;\n}\n.inventory-panel .inventory-item .item-equipped-badge {\n  font-size: 0.85rem;\n  color: #28a745;\n  font-weight: 600;\n}\n.inventory-panel .inventory-item .item-quantity {\n  font-size: 0.9rem;\n  color: #666;\n}\n.inventory-panel .inventory-item .item-description {\n  color: #666;\n  font-size: 0.95rem;\n  margin-bottom: 0.5rem;\n}\n.inventory-panel .inventory-item .item-stats {\n  margin-top: 0.8rem;\n  padding: 0.8rem;\n  background: rgba(139, 69, 19, 0.05);\n  border-left: 3px solid #8b4513;\n}\n.inventory-panel .inventory-item .item-stats .stat-line {\n  font-size: 0.9rem;\n  color: #4a3520;\n  margin-bottom: 0.3rem;\n}\n.inventory-panel .inventory-item .item-stats .stat-line:last-child {\n  margin-bottom: 0;\n}\n.inventory-panel .inventory-item .item-actions {\n  margin-top: 0.8rem;\n  display: flex;\n  gap: 0.5rem;\n}\n.inventory-panel .inventory-item .item-actions button {\n  padding: 0.5rem 1rem;\n  border: none;\n  border-radius: 3px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.inventory-panel .inventory-item .item-actions .btn-equip {\n  background: #28a745;\n  color: white;\n}\n.inventory-panel .inventory-item .item-actions .btn-equip:hover {\n  background: #218838;\n}\n.inventory-panel .inventory-item .item-actions .btn-unequip-item {\n  background: #ffc107;\n  color: #333;\n}\n.inventory-panel .inventory-item .item-actions .btn-unequip-item:hover {\n  background: #e0a800;\n}\n.dungeon-screen {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  overflow: hidden;\n}\n.dungeon-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: rgba(139, 69, 19, 0.1);\n  border-radius: 6px;\n  margin-bottom: 1rem;\n}\n.dungeon-header h2 {\n  margin: 0;\n  font-size: 1.5rem;\n  color: #8b4513;\n}\n.dungeon-header .escape-btn {\n  padding: 0.5rem 1rem;\n  background: #dc3545;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.dungeon-header .escape-btn:hover {\n  background: #c82333;\n  transform: translateY(-1px);\n}\n.dungeon-placeholder {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 1rem;\n}\n.dungeon-placeholder p {\n  font-size: 1.2rem;\n  color: #8b4513;\n  margin: 0;\n}\n/*# sourceMappingURL=wuxia-game.component.css.map */\n'] }]
  }], null, null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(WuxiaGameComponent, { className: "WuxiaGameComponent", filePath: "src/app/modules/novel/components/wuxia-game/wuxia-game.component.ts", lineNumber: 37 });
})();

// src/app/modules/novel/guards/novel-auth.guard.ts
var NovelAuthGuard = class _NovelAuthGuard {
  authService;
  router;
  constructor(authService, router) {
    this.authService = authService;
    this.router = router;
  }
  canActivate(route, state2) {
    if (this.authService.isLoggedIn()) {
      return true;
    }
    this.router.navigate(["/novel/login"]);
    return false;
  }
  static \u0275fac = function NovelAuthGuard_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelAuthGuard)(\u0275\u0275inject(NovelAuthService), \u0275\u0275inject(Router));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _NovelAuthGuard, factory: _NovelAuthGuard.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelAuthGuard, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{ type: NovelAuthService }, { type: Router }], null);
})();

// src/app/modules/novel/novel-routing.module.ts
var routes = [
  {
    path: "login",
    component: NovelLogin
  },
  {
    path: "wuxia-game",
    component: WuxiaGameComponent,
    canActivate: [NovelAuthGuard]
  },
  {
    path: "game/:gameId",
    component: NovelGeneratorComponent,
    canActivate: [NovelAuthGuard]
  },
  {
    path: "",
    component: NovelGeneratorComponent,
    canActivate: [NovelAuthGuard]
  }
];
var NovelRoutingModule = class _NovelRoutingModule {
  static \u0275fac = function NovelRoutingModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelRoutingModule)();
  };
  static \u0275mod = /* @__PURE__ */ \u0275\u0275defineNgModule({ type: _NovelRoutingModule });
  static \u0275inj = /* @__PURE__ */ \u0275\u0275defineInjector({ imports: [RouterModule.forChild(routes), RouterModule] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelRoutingModule, [{
    type: NgModule,
    args: [{
      imports: [RouterModule.forChild(routes)],
      exports: [RouterModule]
    }]
  }], null, null);
})();

// src/app/modules/novel/novel.module.ts
var NovelModule = class _NovelModule {
  static \u0275fac = function NovelModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NovelModule)();
  };
  static \u0275mod = /* @__PURE__ */ \u0275\u0275defineNgModule({ type: _NovelModule });
  static \u0275inj = /* @__PURE__ */ \u0275\u0275defineInjector({ imports: [
    CommonModule,
    SharedModule,
    NovelRoutingModule,
    GameModalComponent,
    MatSelectModule,
    MatInputModule,
    MatFormFieldModule,
    MatCheckboxModule,
    MatButtonModule,
    MatSliderModule,
    MatChipsModule,
    MatIconModule,
    MatMenuModule,
    MatDialogModule,
    MatProgressSpinnerModule,
    MatTabsModule,
    DragDropModule
  ] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NovelModule, [{
    type: NgModule,
    args: [{
      declarations: [
        NovelGeneratorComponent,
        NovelLogin,
        NovelHeaderComponent,
        NovelLeftMenuComponent,
        NovelRightSidebarComponent,
        NovelSidebarComponent,
        NovelTopMenuComponent,
        NovelVerticalMenuComponent,
        BattleModalComponent,
        DungeonExplorer,
        WuxiaGameComponent
      ],
      imports: [
        CommonModule,
        SharedModule,
        NovelRoutingModule,
        GameModalComponent,
        MatSelectModule,
        MatInputModule,
        MatFormFieldModule,
        MatCheckboxModule,
        MatButtonModule,
        MatSliderModule,
        MatChipsModule,
        MatIconModule,
        MatMenuModule,
        MatDialogModule,
        MatProgressSpinnerModule,
        MatTabsModule,
        DragDropModule
      ]
    }]
  }], null, null);
})();
export {
  NovelModule
};
//# sourceMappingURL=chunk-EPPVTJ6D.js.map
