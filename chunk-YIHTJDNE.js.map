{
  "version": 3,
  "sources": ["src/app/modules/chat-talk/shared/services/chat-talk-auth.service.ts", "src/app/modules/chat-talk/chat-talk.component.ts", "src/app/modules/chat-talk/chat-talk.component.html", "src/app/modules/chat-talk/login/chat-talk-login.component.ts", "src/app/modules/chat-talk/guards/chat-talk-auth.guard.ts", "src/app/modules/chat-talk/chat-talk-routing.module.ts", "src/app/modules/store/services/base-auth.service.ts", "src/app/modules/store/services/customer-auth.service.ts", "src/app/modules/store/services/admin-auth.service.ts", "src/app/modules/store/services/seller-auth.service.ts", "src/app/modules/store/services/auth-mode.service.ts", "src/app/modules/chat-talk/client/components/chat-widget/chat-widget.component.ts", "src/app/modules/chat-talk/client/components/chat-widget/chat-widget.component.html", "src/app/modules/chat-talk/chat-talk.module.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { environment } from '../../../../../environments/environment';\nimport { CryptoUtil } from '../../../../core/utils/crypto.util';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ChatTalkAuthService {\n  private readonly STORAGE_KEY = 'chat_talk_auth';\n  \n  // environmentì—ì„œ ì•”í˜¸í™”ëœ ì¸ì¦ ì •ë³´ë¥¼ ë³µí˜¸í™”í•˜ì—¬ ì‚¬ìš©\n  private readonly CREDENTIALS = {\n    username: CryptoUtil.decrypt(environment.auth.username),\n    password: CryptoUtil.decrypt(environment.auth.password)\n  };\n\n  private isAuthenticatedSubject = new BehaviorSubject<boolean>(this.checkAuthStatus());\n  public isAuthenticated$: Observable<boolean> = this.isAuthenticatedSubject.asObservable();\n\n  constructor(private router: Router) {\n    this.initAuth();\n  }\n\n  private initAuth(): void {\n    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¸ì¦ ìƒíƒœ í™•ì¸\n    this.isAuthenticatedSubject.next(this.checkAuthStatus());\n  }\n\n  /**\n   * ë¡œê·¸ì¸\n   */\n  login(username: string, password: string): boolean {\n    // í•˜ë“œì½”ë”©ëœ ê³„ì •ê³¼ ë¹„êµ\n    if (username === this.CREDENTIALS.username && password === this.CREDENTIALS.password) {\n      const token = this.generateToken(username);\n      this.saveToken(token);\n      this.isAuthenticatedSubject.next(true);\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * ë¡œê·¸ì•„ì›ƒ\n   */\n  logout(): void {\n    console.log('[ChatTalkAuth] ë¡œê·¸ì•„ì›ƒ');\n    \n    try {\n      localStorage.removeItem(this.STORAGE_KEY);\n      sessionStorage.removeItem(this.STORAGE_KEY);\n      this.isAuthenticatedSubject.next(false);\n    } catch (error) {\n      console.error('[ChatTalkAuth] ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜:', error);\n    } finally {\n      // ì˜¤ë¥˜ ë°œìƒ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ í•­ìƒ ì±„íŒ… ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™\n      this.router.navigate(['/chat-talk/login']).catch((err: any) => {\n        console.error('[ChatTalkAuth] ë„¤ë¹„ê²Œì´ì…˜ ì˜ˆì™¸ ë°œìƒ:', err);\n        window.location.hash = '#/chat-talk/login';\n      });\n    }\n  }\n\n  /**\n   * ì¸ì¦ ìƒíƒœ í™•ì¸\n   */\n  isAuthenticated(): boolean {\n    return this.checkAuthStatus();\n  }\n\n  /**\n   * í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°\n   */\n  getCurrentUser(): { username: string } | null {\n    const token = this.getToken();\n    if (!token) {\n      return null;\n    }\n\n    try {\n      const data = JSON.parse(token);\n      \n      // í† í° ë§Œë£Œ í™•ì¸ (24ì‹œê°„)\n      const now = new Date().getTime();\n      if (now - data.timestamp > 24 * 60 * 60 * 1000) {\n        this.logout();\n        return null;\n      }\n\n      return { username: data.username };\n    } catch (error) {\n      this.logout();\n      return null;\n    }\n  }\n\n  /**\n   * ì¸ì¦ ìƒíƒœ ì²´í¬\n   */\n  private checkAuthStatus(): boolean {\n    const token = this.getToken();\n    if (!token) {\n      return false;\n    }\n\n    try {\n      const data = JSON.parse(token);\n      \n      // í† í° ë§Œë£Œ í™•ì¸ (24ì‹œê°„)\n      const now = new Date().getTime();\n      if (now - data.timestamp > 24 * 60 * 60 * 1000) {\n        this.logout();\n        return false;\n      }\n\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * í† í° ìƒì„±\n   */\n  private generateToken(username: string): string {\n    const data = {\n      username,\n      timestamp: new Date().getTime()\n    };\n    \n    return JSON.stringify(data);\n  }\n\n  /**\n   * í† í° ì €ì¥\n   */\n  private saveToken(token: string): void {\n    localStorage.setItem(this.STORAGE_KEY, token);\n    sessionStorage.setItem(this.STORAGE_KEY, token);\n  }\n\n  /**\n   * í† í° ê°€ì ¸ì˜¤ê¸°\n   */\n  private getToken(): string | null {\n    return localStorage.getItem(this.STORAGE_KEY) || sessionStorage.getItem(this.STORAGE_KEY);\n  }\n}\n", "import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ChatTalkAuthService } from './shared/services/chat-talk-auth.service';\n\n@Component({\n  selector: 'app-chat-talk',\n  standalone: false,\n  templateUrl: './chat-talk.component.html',\n  styleUrls: ['./chat-talk.component.scss']\n})\nexport class ChatTalkComponent implements OnInit {\n  currentUser: { username: string } | null = null;\n\n  constructor(\n    private authService: ChatTalkAuthService,\n    private router: Router\n  ) { }\n\n  ngOnInit(): void {\n    this.currentUser = this.authService.getCurrentUser();\n  }\n\n  onLogout(): void {\n    this.authService.logout();\n    this.router.navigate(['/chat-talk/login']);\n  }\n}\n", "<!-- Chat Talk Container -->\n<div class=\"chat-talk-container\">\n  <!-- Header -->\n  <div class=\"chat-talk-header\">\n    <div class=\"header-left\">\n      <mat-icon class=\"logo-icon\">chat</mat-icon>\n      <h1>ì±„íŒ…ìƒë‹´ ì‹œìŠ¤í…œ</h1>\n    </div>\n    \n    <div class=\"header-right\" *ngIf=\"currentUser\">\n      <div class=\"user-info\">\n        <mat-icon>account_circle</mat-icon>\n        <span>{{ currentUser.username }}</span>\n      </div>\n      <button mat-icon-button (click)=\"onLogout()\" matTooltip=\"ë¡œê·¸ì•„ì›ƒ\">\n        <mat-icon>logout</mat-icon>\n      </button>\n    </div>\n  </div>\n\n  <!-- Content -->\n  <div class=\"chat-talk-content\">\n    <router-outlet></router-outlet>\n  </div>\n</div>\n", "import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ChatTalkAuthService } from '../shared/services/chat-talk-auth.service';\nimport { LoginConfig, UnifiedLoginComponent } from '../../shared/components/unified-login/unified-login.component';\n\n@Component({\n  selector: 'app-chat-talk-login',\n  standalone: false,\n  template: '<app-unified-login #loginComponent [config]=\"loginConfig\" (loginSubmit)=\"onLogin($event)\"></app-unified-login>'\n})\nexport class ChatTalkLoginComponent implements OnInit {\n  @ViewChild('loginComponent') loginComponent?: UnifiedLoginComponent;\n\n  loginConfig: LoginConfig = {\n    title: 'ğŸ’¬ ì±„íŒ…í†¡',\n    subtitle: 'ì–¸ì œ ì–´ë””ì„œë‚˜ ì†Œí†µí•˜ì„¸ìš”',\n    moduleName: 'chat-talk',\n    showSocialLogin: false,\n    showRegisterLink: false,\n    themeColors: {\n      primary: '#06b6d4',    // ì‹œì•ˆ (ì±„íŒ…/ë©”ì‹œì§€)\n      secondary: '#0891b2',  // ì§„í•œ ì‹œì•ˆ\n      accent: '#22d3ee'      // ë°ì€ ì‹œì•ˆ\n    }\n  };\n\n  returnUrl: string = '/chat-talk/client/home';\n\n  constructor(\n    private authService: ChatTalkAuthService,\n    private router: Router,\n    private route: ActivatedRoute\n  ) {}\n\n  ngOnInit(): void {\n    // ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆìœ¼ë©´ ë¦¬ë‹¤ì´ë ‰íŠ¸\n    if (this.authService.isAuthenticated()) {\n      this.router.navigate([this.returnUrl]);\n      return;\n    }\n\n    // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì—ì„œ returnUrl ê°€ì ¸ì˜¤ê¸°\n    this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/chat-talk/client/home';\n  }\n\n  onLogin(credentials: { username: string; password: string }): void {\n    // ë¡œê·¸ì¸ ì‹œë„\n    const success = this.authService.login(credentials.username, credentials.password);\n\n    if (success) {\n      // ë¡œê·¸ì¸ ì„±ê³µ - ì•½ê°„ì˜ ë”œë ˆì´ í›„ ì´ë™\n      setTimeout(() => {\n        this.router.navigateByUrl(this.returnUrl).catch(() => {\n          this.router.navigate(['/chat-talk/client/home']);\n        });\n      }, 300);\n    } else {\n      // ë¡œê·¸ì¸ ì‹¤íŒ¨\n      if (this.loginComponent) {\n        this.loginComponent.setError('ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');\n      }\n    }\n  }\n}\n", "import { Injectable } from '@angular/core';\nimport { CanActivate, Router, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { ChatTalkAuthService } from '../shared/services/chat-talk-auth.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ChatTalkAuthGuard implements CanActivate {\n  constructor(\n    private authService: ChatTalkAuthService,\n    private router: Router\n  ) {}\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\n    if (this.authService.isAuthenticated()) {\n      return true;\n    }\n\n    // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ê³  ì›ë˜ ê°€ë ¤ë˜ URLì„ ì €ì¥\n    this.router.navigate(['/chat-talk/login'], {\n      queryParams: { returnUrl: state.url }\n    });\n    return false;\n  }\n}\n", "import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ChatTalkComponent } from './chat-talk.component';\nimport { ChatTalkLoginComponent } from './login/chat-talk-login.component';\nimport { ChatTalkAuthGuard } from './guards/chat-talk-auth.guard';\n\nconst routes: Routes = [\n  {\n    path: 'login',\n    component: ChatTalkLoginComponent\n  },\n  {\n    path: '',\n    component: ChatTalkComponent,\n    children: [\n      {\n        path: 'client',\n        loadChildren: () => import('./client/client.module').then(m => m.ChatTalkClientModule),\n        canActivate: [ChatTalkAuthGuard]\n      },\n      {\n        path: 'agent',\n        loadChildren: () => import('./agent/agent.module').then(m => m.ChatTalkAgentModule),\n        canActivate: [ChatTalkAuthGuard]\n      },\n      {\n        path: '',\n        redirectTo: 'agent',\n        pathMatch: 'full'\n      }\n    ]\n  },\n  {\n    path: '**',\n    redirectTo: 'login'\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ChatTalkRoutingModule { }\n", "import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { BehaviorSubject, Observable, map, catchError } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { Router } from '@angular/router';\nimport { IUser, LoginDto, AuthResponse } from '../interfaces/auth.interface';\nimport { environment } from '../config/environment';\n\nexport abstract class BaseAuthService<T extends IUser> {\n  protected user$ = new BehaviorSubject<T | null>(null);\n  protected initialized = false;\n  protected abstract storageTokenKey: string;\n  protected abstract loginEndpoint: string;\n  protected abstract loginRedirectPath: string;\n  \n  // ì‚¬ìš©ì ì •ë³´ ì €ì¥ í‚¤ ì¶”ê°€\n  protected get storageUserKey(): string {\n    return `${this.storageTokenKey}_user`;\n  }\n\n  constructor(\n    protected http: HttpClient,\n    protected jwtHelper: JwtHelperService,\n    protected router: Router\n  ) {\n    // initUser()ëŠ” ìì‹ í´ë˜ìŠ¤ ìƒì„±ìì—ì„œ í˜¸ì¶œë˜ë„ë¡ ì œê±°\n  }\n\n  getUser$(): Observable<T> {\n    return this.user$.asObservable().pipe(\n      filter((user): user is T => user !== null)\n    );\n  }\n\n  getNullableUser$(): Observable<T | null> {\n    return this.user$.asObservable();\n  }\n\n  getCurrentUser(): T | null {\n    return this.user$.getValue();\n  }\n\n  setUser(user: T): void {\n    this.user$.next(user);\n  }\n\n  initUser(): void {\n    // ì´ë¯¸ ì´ˆê¸°í™”ë˜ì—ˆìœ¼ë©´ skip\n    if (this.initialized) return;\n    this.initialized = true;\n\n    const accessToken = localStorage.getItem(this.storageTokenKey);\n    const userJson = localStorage.getItem(this.storageUserKey);\n    \n    console.log('[BaseAuthService] initUser() - storageKey:', this.storageTokenKey);\n    console.log('[BaseAuthService] initUser() - token:', accessToken);\n    console.log('[BaseAuthService] initUser() - userJson:', userJson);\n\n    // JWT í† í° ìœ íš¨ì„± ê²€ì‚¬\n    if (!this.isValidToken(accessToken)) {\n      console.log('[BaseAuthService] initUser() - í† í°ì´ ìœ íš¨í•˜ì§€ ì•ŠìŒ');\n      if (accessToken) localStorage.removeItem(this.storageTokenKey);\n      if (userJson) localStorage.removeItem(this.storageUserKey);\n      return;\n    }\n\n    // í† í°ì´ ë§Œë£Œëœ ê²½ìš°\n    if (this.jwtHelper.isTokenExpired(accessToken)) {\n      console.log('[BaseAuthService] initUser() - í† í°ì´ ë§Œë£Œë¨');\n      localStorage.removeItem(this.storageTokenKey);\n      localStorage.removeItem(this.storageUserKey);\n      return;\n    }\n\n    // ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ê°€ ìˆìœ¼ë©´ ì‚¬ìš©\n    if (userJson) {\n      try {\n        const user = JSON.parse(userJson) as T;\n        console.log('[BaseAuthService] initUser() - localStorageì—ì„œ ì‚¬ìš©ì ì •ë³´ ë¡œë“œ:', user);\n        this.user$.next(user);\n        console.log('[BaseAuthService] initUser() - user$ ì—…ë°ì´íŠ¸ ì™„ë£Œ');\n        return;\n      } catch (error) {\n        console.warn('[BaseAuthService] initUser() - ì‚¬ìš©ì ì •ë³´ íŒŒì‹± ì‹¤íŒ¨:', error);\n      }\n    }\n\n    // ì €ì¥ëœ ì •ë³´ê°€ ì—†ìœ¼ë©´ JWTì—ì„œ ë””ì½”ë”© ì‹œë„\n    try {\n      const decodedToken = this.jwtHelper.decodeToken(accessToken);\n      console.log('[BaseAuthService] initUser() - ë””ì½”ë”©ëœ í† í°:', decodedToken);\n      \n      // JWT í† í°ì˜ payloadì—ì„œ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ\n      const user = (decodedToken.payload || decodedToken) as T;\n      console.log('[BaseAuthService] initUser() - JWTì—ì„œ ì¶”ì¶œí•œ ì‚¬ìš©ì ì •ë³´:', user);\n      \n      this.user$.next(user);\n      // localStorageì— ì €ì¥\n      localStorage.setItem(this.storageUserKey, JSON.stringify(user));\n      console.log('[BaseAuthService] initUser() - user$ ì—…ë°ì´íŠ¸ ë° localStorage ì €ì¥ ì™„ë£Œ');\n    } catch (error) {\n      console.warn('[BaseAuthService] initUser() - í† í° ë””ì½”ë”© ì‹¤íŒ¨:', error);\n      localStorage.removeItem(this.storageTokenKey);\n      localStorage.removeItem(this.storageUserKey);\n    }\n  }\n\n  login(loginDto: LoginDto): Observable<T> {\n    return this.http.post<any>(this.loginEndpoint, loginDto).pipe(\n      map((response: any) => {\n        console.log('[BaseAuthService] ğŸ” RAW ì‘ë‹µ:', JSON.stringify(response, null, 2));\n        \n        let user: T | null = null;\n        let accessToken: string = '';\n        \n        // íŒ¨í„´ 1: { isSuccess, status, data: { accessToken } } - JWT í† í°ì— user ì •ë³´ í¬í•¨\n        if (response.data?.accessToken && !response.data.user) {\n          accessToken = response.data.accessToken;\n          console.log('[BaseAuthService] âœ… íŒ¨í„´ 1: JWT í† í° ë°©ì‹ (user ì •ë³´ëŠ” í† í°ì— í¬í•¨)');\n          \n          // JWT í† í° ë””ì½”ë”©í•˜ì—¬ user ì •ë³´ ì¶”ì¶œ\n          try {\n            const decodedToken = this.jwtHelper.decodeToken(accessToken);\n            \n            if (decodedToken && decodedToken.payload) {\n              user = decodedToken.payload as T;\n            } else {\n              throw new Error('JWT payload not found');\n            }\n          } catch (error) {\n            throw new Error('Failed to decode JWT token');\n          }\n        }\n        // íŒ¨í„´ 2: { user: {...}, accessToken: '...' }\n        else if (response.user && response.accessToken) {\n          user = response.user;\n          accessToken = response.accessToken;\n        }\n        // íŒ¨í„´ 3: { data: { user: {...}, accessToken: '...' } }\n        else if (response.data?.user && response.data?.accessToken) {\n          user = response.data.user;\n          accessToken = response.data.accessToken;\n        }\n        // íŒ¨í„´ 4: { accessToken: '...', ...user_fields }\n        else if (response.accessToken) {\n          accessToken = response.accessToken;\n          const { accessToken: _, ...userData } = response;\n          user = userData as T;\n        }\n        \n        if (!user) {\n          throw new Error('Invalid response structure: user not found');\n        }\n        \n        if (!accessToken) {\n          throw new Error('Invalid response structure: accessToken not found');\n        }\n        \n        // í† í° ì €ì¥\n        this.setToken(accessToken);\n        \n        // User ê°ì²´ ë§¤í•‘ ë° ì €ì¥\n        const mappedUser = this.mapUser(user);\n        this.user$.next(mappedUser);\n        \n        // localStorageì— ì‚¬ìš©ì ì •ë³´ ì €ì¥\n        localStorage.setItem(this.storageUserKey, JSON.stringify(mappedUser));\n        \n        return mappedUser;\n      }),\n      catchError(error => {\n        throw error;\n      })\n    );\n  }\n\n  logout(): void {\n    localStorage.removeItem(this.storageTokenKey);\n    localStorage.removeItem(this.storageUserKey);\n    this.user$.next(null);\n    this.router.navigate([this.loginRedirectPath]);\n  }\n\n  isAuthenticated(): boolean {\n    const token = localStorage.getItem(this.storageTokenKey);\n    return this.isValidToken(token) && !this.jwtHelper.isTokenExpired(token);\n  }\n\n  protected setToken(token: string): void {\n    localStorage.setItem(this.storageTokenKey, token);\n  }\n\n  private isValidToken(token: string | null): token is string {\n    if (!token) return false;\n\n    const lowerToken = token.toLowerCase().trim();\n    if (['undefined', 'null', 'false', ''].includes(lowerToken)) return false;\n\n    // JWT í˜•ì‹ ì²´í¬ (3ê°œ ë¶€ë¶„ìœ¼ë¡œ êµ¬ì„±ëœ ì ìœ¼ë¡œ êµ¬ë¶„ëœ ë¬¸ìì—´)\n    return /^[A-Za-z0-9_-]+\\.[A-Za-z0-9_-]+\\.[A-Za-z0-9_-]+$/.test(token);\n  }\n\n  protected mapUser(user: T): T {\n    console.log('[BaseAuthService] mapUser() - ì…ë ¥ user:', user);\n    \n    if (!user) {\n      console.warn('[BaseAuthService] mapUser() - userê°€ undefined/nullì…ë‹ˆë‹¤!');\n      throw new Error('User object is undefined or null');\n    }\n    \n    return {\n      ...user,\n      createdAt: user.createdAt ? new Date(user.createdAt) : new Date(),\n      updatedAt: user.updatedAt ? new Date(user.updatedAt) : undefined,\n    } as T;\n  }\n}", "import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { Router } from '@angular/router';\nimport { Observable, map } from 'rxjs';\nimport { BaseAuthService } from './base-auth.service';\nimport { ICustomer, AuthResponse } from '../interfaces/auth.interface';\nimport { environment } from '../config/environment';\n\nexport interface UpdateCustomerDto {\n  name: string;\n  email: string;\n  phone: string;\n}\n\nexport interface CustomerSignupDto {\n  id: string;\n  password: string;\n  name: string;\n  email: string;\n  phone: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CustomerAuthService extends BaseAuthService<ICustomer> {\n  protected storageTokenKey = 'ez_store_customer_token';\n  protected loginEndpoint = environment.baseSyncUrl + '/customer/login';\n  protected loginRedirectPath = '/store/login';\n\n  constructor(\n    protected override http: HttpClient,\n    protected override jwtHelper: JwtHelperService,\n    protected override router: Router\n  ) {\n    super(http, jwtHelper, router);\n    this.initUser();\n  }\n\n  register(signupData: CustomerSignupDto): Observable<ICustomer> {\n    const signupEndpoint = environment.baseSyncUrl + '/customer/signup';\n    return this.http.post<AuthResponse<ICustomer>>(signupEndpoint, signupData).pipe(\n      map(({ user, accessToken }) => {\n        this.setToken(accessToken);\n        return this.mapUser(user);\n      })\n    );\n  }\n\n  updateProfile(updateData: UpdateCustomerDto): Observable<ICustomer> {\n    // idëŠ” ë¬¸ìì—´ userId (ì˜ˆ: \"seller1\"), userIdxëŠ” ìˆ«ì ì¸ë±ìŠ¤\n    const customerId = this.user$.value?.id;\n    if (!customerId) {\n      throw new Error('ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”.');\n    }\n\n\n    // SyncAnaì™€ ë™ì¼í•œ ì—”ë“œí¬ì¸íŠ¸: PATCH /customer/profile/{customerId}\n    const updateEndpoint = environment.baseSyncUrl + `/customer/profile/${customerId}`;\n    return this.http.patch<{ user: ICustomer; accessToken: string }>(updateEndpoint, updateData).pipe(\n      map(({ user, accessToken }) => {\n        // ì•¡ì„¸ìŠ¤ í† í° ì—…ë°ì´íŠ¸\n        this.setToken(accessToken);\n        const mappedUser = this.mapUser(user);\n        this.setUser(mappedUser);\n        return mappedUser;\n      })\n    );\n  }\n}", "import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { Router } from '@angular/router';\nimport { Observable, map } from 'rxjs';\nimport { BaseAuthService } from './base-auth.service';\nimport { IAdmin, AuthResponse } from '../interfaces/auth.interface';\nimport { environment } from '../config/environment';\n\nexport interface AdminSignupDto {\n  id: string;\n  password: string;\n  name: string;\n  email: string;\n  phone: string;\n  role?: 'ADMIN' | 'SUPER_ADMIN';\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AdminAuthService extends BaseAuthService<IAdmin> {\n  protected storageTokenKey = 'ez_store_admin_token';\n  // Admin = User(ê´€ë¦¬ì) - admin/login ì—”ë“œí¬ì¸íŠ¸ ì‚¬ìš© (roleId >= 300 ì²´í¬)\n  protected loginEndpoint = environment.baseSyncUrl + '/users/admin/login';\n  protected loginRedirectPath = '/store/admin/login';\n\n  constructor(\n    protected override http: HttpClient,\n    protected override jwtHelper: JwtHelperService,\n    protected override router: Router\n  ) {\n    super(http, jwtHelper, router);\n    this.initUser();\n  }\n\n  register(signupData: AdminSignupDto): Observable<IAdmin> {\n    const signupEndpoint = environment.baseSyncUrl + '/admin/signup';\n    return this.http.post<AuthResponse<IAdmin>>(signupEndpoint, signupData).pipe(\n      map(({ user, accessToken }) => {\n        this.setToken(accessToken);\n        return this.mapUser(user);\n      })\n    );\n  }\n\n  hasPermission(permission: string): boolean {\n    const user = this.getCurrentUser();\n    if (!user) return false;\n    \n    // ìŠˆí¼ ê´€ë¦¬ìëŠ” ëª¨ë“  ê¶Œí•œ ë³´ìœ \n    if (user.role === 'SUPER_ADMIN') return true;\n    \n    // ì¼ë°˜ ê´€ë¦¬ìëŠ” permissions ë°°ì—´ í™•ì¸\n    return user.permissions?.includes(permission) ?? false;\n  }\n\n  isSuperAdmin(): boolean {\n    const user = this.getCurrentUser();\n    return user?.role === 'SUPER_ADMIN' || false;\n  }\n\n  getAdminList(): Observable<IAdmin[]> {\n    const endpoint = environment.baseSyncUrl + '/admin/list';\n    return this.http.get<{ admins: IAdmin[] }>(endpoint).pipe(\n      map(({ admins }) => admins)\n    );\n  }\n\n  updateAdminPermissions(adminId: string, permissions: string[]): Observable<IAdmin> {\n    const endpoint = environment.baseSyncUrl + `/admin/${adminId}/permissions`;\n    return this.http.put<{ user: IAdmin }>(endpoint, { permissions }).pipe(\n      map(({ user }) => this.mapUser(user))\n    );\n  }\n\n  deleteAdmin(adminId: string): Observable<void> {\n    const endpoint = environment.baseSyncUrl + `/admin/${adminId}`;\n    return this.http.delete<void>(endpoint);\n  }\n}", "import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { Router } from '@angular/router';\nimport { Observable, map } from 'rxjs';\nimport { BaseAuthService } from './base-auth.service';\nimport { ISeller, AuthResponse } from '../interfaces/auth.interface';\nimport { environment } from '../config/environment';\n\nexport interface UpdateSellerDto {\n  name: string;\n  email: string;\n  phone: string;\n}\n\nexport interface SellerSignupDto {\n  id: string;\n  password: string;\n  name: string;\n  email: string;\n  phone: string;\n  businessName?: string;\n  businessNumber?: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SellerAuthService extends BaseAuthService<ISeller> {\n  protected storageTokenKey = 'ez_store_seller_token';\n  protected loginEndpoint = environment.baseSyncUrl + '/seller/login';\n  protected loginRedirectPath = '/store/seller/login';\n\n  constructor(\n    protected override http: HttpClient,\n    protected override jwtHelper: JwtHelperService,\n    protected override router: Router\n  ) {\n    super(http, jwtHelper, router);\n    this.initUser();\n  }\n\n  register(signupData: SellerSignupDto): Observable<ISeller> {\n    const signupEndpoint = environment.baseSyncUrl + '/seller/signup';\n    return this.http.post<AuthResponse<ISeller>>(signupEndpoint, signupData).pipe(\n      map(({ user, accessToken }) => {\n        this.setToken(accessToken);\n        return this.mapUser(user);\n      })\n    );\n  }\n\n  updateProfile(updateData: UpdateSellerDto): Observable<ISeller> {\n    const sellerId = this.user$.value?.userIdx;\n    if (!sellerId) {\n      throw new Error('íŒë§¤ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”.');\n    }\n\n    const updateEndpoint = environment.baseSyncUrl + `/seller/${sellerId}/profile`;\n    return this.http.put<{ user: ISeller }>(updateEndpoint, updateData).pipe(\n      map(({ user }) => {\n        const mappedUser = this.mapUser(user);\n        this.setUser(mappedUser);\n        return mappedUser;\n      })\n    );\n  }\n\n  updateStore(storeData: any): Observable<ISeller> {\n    const sellerId = this.user$.value?.userIdx;\n    if (!sellerId) {\n      throw new Error('íŒë§¤ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”.');\n    }\n\n    const storeEndpoint = environment.baseSyncUrl + `/seller/${sellerId}/store`;\n    return this.http.put<{ user: ISeller }>(storeEndpoint, storeData).pipe(\n      map(({ user }) => {\n        const mappedUser = this.mapUser(user);\n        this.setUser(mappedUser);\n        return mappedUser;\n      })\n    );\n  }\n}", "import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Router } from '@angular/router';\nimport { CustomerAuthService } from './customer-auth.service';\nimport { SellerAuthService } from './seller-auth.service';\nimport { AdminAuthService } from './admin-auth.service';\nimport { UserRole } from '../interfaces/auth.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthModeService {\n  public currentMode$ = new BehaviorSubject<UserRole>('CUSTOMER');\n  private readonly STORAGE_KEY = 'ez_store_auth_mode';\n\n  constructor(\n    private router: Router,\n    private customerAuth: CustomerAuthService,\n    private sellerAuth: SellerAuthService,\n    private adminAuth: AdminAuthService\n  ) {\n    this.initializeMode();\n  }\n\n  getCurrentMode$(): Observable<UserRole> {\n    return this.currentMode$.asObservable();\n  }\n\n  getCurrentMode(): UserRole {\n    return this.currentMode$.value;\n  }\n\n  switchMode(mode: UserRole): Observable<boolean> {\n    // í˜„ì¬ ëª¨ë“  ì„œë¹„ìŠ¤ì—ì„œ ë¡œê·¸ì•„ì›ƒ\n    this.logoutAll();\n    \n    // ìƒˆë¡œìš´ ëª¨ë“œ ì„¤ì •\n    this.setMode(mode);\n    \n    return of(true);\n  }\n\n  logout(): Observable<boolean> {\n    this.logoutAll();\n    return of(true);\n  }\n\n  private setMode(mode: UserRole): void {\n    this.currentMode$.next(mode);\n    localStorage.setItem(this.STORAGE_KEY, mode);\n  }\n\n  private initializeMode(): void {\n    const savedMode = localStorage.getItem(this.STORAGE_KEY) as UserRole;\n    if (savedMode && ['CUSTOMER', 'SELLER', 'ADMIN'].includes(savedMode)) {\n      this.currentMode$.next(savedMode);\n    }\n  }\n\n  private logoutAll(): void {\n    // ëª¨ë“  ì¸ì¦ ì„œë¹„ìŠ¤ì—ì„œ ë¡œê·¸ì•„ì›ƒ (ë¦¬ë‹¤ì´ë ‰íŠ¸ ë°©ì§€)\n    const customerUser = this.customerAuth.getCurrentUser();\n    const sellerUser = this.sellerAuth.getCurrentUser();\n    const adminUser = this.adminAuth.getCurrentUser();\n\n    if (customerUser) {\n      localStorage.removeItem('ez_store_customer_token');\n      this.customerAuth.setUser(null as any);\n    }\n    \n    if (sellerUser) {\n      localStorage.removeItem('ez_store_seller_token');\n      this.sellerAuth.setUser(null as any);\n    }\n    \n    if (adminUser) {\n      localStorage.removeItem('ez_store_admin_token');\n      this.adminAuth.setUser(null as any);\n    }\n  }\n\n  private navigateToLogin(mode: UserRole): void {\n    switch (mode) {\n      case 'CUSTOMER':\n        this.router.navigate(['/store/login']);\n        break;\n      case 'SELLER':\n        this.router.navigate(['/store/seller/login']);\n        break;\n      case 'ADMIN':\n        this.router.navigate(['/store/admin/login']);\n        break;\n    }\n  }\n\n  // í˜„ì¬ í™œì„± ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° (Observable) - ëª¨ë“œ ë³€ê²½ì— ë°˜ì‘\n  getCurrentUser(): Observable<any> {\n    console.log('[AuthModeService] getCurrentUser() í˜¸ì¶œë¨');\n    return this.currentMode$.pipe(\n      switchMap(mode => {\n        switch (mode) {\n          case 'CUSTOMER':\n            const customerUser = this.customerAuth.getCurrentUser();\n            return this.customerAuth.getNullableUser$();\n          case 'SELLER':\n            const sellerUser = this.sellerAuth.getCurrentUser();\n            return this.sellerAuth.getNullableUser$();\n          case 'ADMIN':\n            const adminUser = this.adminAuth.getCurrentUser();\n            return this.adminAuth.getNullableUser$();\n          default:\n            return of(null);\n        }\n      })\n    );\n  }\n\n  // í˜„ì¬ í™œì„± ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° (ë™ê¸°)\n  getCurrentUserSync(): any {\n    const mode = this.getCurrentMode();\n    switch (mode) {\n      case 'CUSTOMER':\n        return this.customerAuth.getCurrentUser();\n      case 'SELLER':\n        return this.sellerAuth.getCurrentUser();\n      case 'ADMIN':\n        return this.adminAuth.getCurrentUser();\n      default:\n        return null;\n    }\n  }\n\n  // í˜„ì¬ ëª¨ë“œê°€ ì¸ì¦ë˜ì—ˆëŠ”ì§€ í™•ì¸ - ëª¨ë“œ ë³€ê²½ì— ë°˜ì‘\n  isAuthenticated(): Observable<boolean> {\n    return this.currentMode$.pipe(\n      switchMap(mode => {\n        switch (mode) {\n          case 'CUSTOMER':\n            return of(this.customerAuth.isAuthenticated());\n          case 'SELLER':\n            return of(this.sellerAuth.isAuthenticated());\n          case 'ADMIN':\n            return of(this.adminAuth.isAuthenticated());\n          default:\n            return of(false);\n        }\n      })\n    );\n  }\n\n  // ëª¨ë“œë³„ í™ˆ ê²½ë¡œ ê°€ì ¸ì˜¤ê¸°\n  getHomeRoute(): string {\n    const mode = this.getCurrentMode();\n    switch (mode) {\n      case 'CUSTOMER':\n        return '/store';\n      case 'SELLER':\n        return '/store/seller/dashboard';\n      case 'ADMIN':\n        return '/store/admin/dashboard';\n      default:\n        return '/store';\n    }\n  }\n}", "import { Component, OnInit, OnDestroy, Input, Output, EventEmitter, ViewChild, ElementRef, Inject, inject } from '@angular/core';\nimport { Subject, takeUntil, debounceTime } from 'rxjs';\nimport { MatDialog, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { ChatTalkApiService } from '../../../shared/services/chat-talk-api.service';\nimport { ChatTalkSocketService } from '../../../shared/services/chat-talk-socket.service';\nimport { ChatBotService } from '../../../shared/services/chatbot.service';\nimport { CustomerAuthService } from '../../../../store/services/customer-auth.service';\nimport { AdminAuthService } from '../../../../store/services/admin-auth.service';\nimport { SellerAuthService } from '../../../../store/services/seller-auth.service';\nimport { AuthModeService } from '../../../../store/services/auth-mode.service';\nimport { Router } from '@angular/router';\nimport { DebugLoggerService } from '../../../../../shared/services/debug-logger.service';\nimport { ChatConsultationToggleService } from '../../../shared/services/chat-consultation-toggle.service';\nimport {\n  IChatMessage,\n  IChatRoom,\n  IClient,\n  SenderType,\n  RoomStatus\n} from '../../../shared/interfaces/chat-talk.interface';\n\n/**\n * í”Œë¡œíŒ… ì±„íŒ… ìœ„ì ¯ ì»´í¬ë„ŒíŠ¸\n * ìŠ¤í† ì–´ í˜ì´ì§€ì— ì„ë² ë“œí•˜ì—¬ ì‚¬ìš©í•˜ëŠ” í”Œë¡œíŒ… ë²„íŠ¼ + ì±„íŒ…ì°½\n */\n@Component({\n  selector: 'app-chat-widget',\n  standalone: false,\n  templateUrl: './chat-widget.component.html',\n  styleUrls: ['./chat-widget.component.scss']\n})\nexport class ChatWidgetComponent implements OnInit, OnDestroy {\n  @Input() organizationId!: string; // ìŠ¤í† ì–´ ID\n  @Output() unreadCountChange = new EventEmitter<number>(); // ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ìˆ˜ ë³€ê²½ ì´ë²¤íŠ¸\n  @ViewChild('messagesContainer') private messagesContainer?: ElementRef;\n  \n  private destroy$ = new Subject<void>();\n  private typingTimeout: any;\n  \n  // === ìƒíƒœ ===\n  isOpen = false;\n  isMinimized = false;\n  isConnected = false;\n  isLoading = false;\n  isLoggedIn = false; // ë¡œê·¸ì¸ ìƒíƒœ\n  needsLogin = false; // ë¡œê·¸ì¸ í•„ìš” ë©”ì‹œì§€ í‘œì‹œ ì—¬ë¶€\n  \n  // === ì±„íŒ… ë°ì´í„° ===\n  currentClient?: IClient;\n  currentRoom?: IChatRoom;\n  messages: IChatMessage[] = [];\n  newMessage = '';\n  \n  // === UI ìƒíƒœ ===\n  unreadCount = 0;\n  isTyping = false;\n  agentTyping = false;\n  errorMessage = '';\n  \n  // === ì±—ë´‡ ë°ì´í„° ===\n  quickReplies: string[] = [];\n  showQuickReplies = false;\n  \n  // Enum exports for template\n  SenderType = SenderType;\n  RoomStatus = RoomStatus;\n  \n  // ğŸ› ë””ë²„ê·¸ ë¡œê±°\n  private debugLogger = inject(DebugLoggerService);\n  public chatConsultationToggle = inject(ChatConsultationToggleService);\n\n  constructor(\n    private apiService: ChatTalkApiService,\n    private socketService: ChatTalkSocketService,\n    private chatBotService: ChatBotService,\n    private customerAuthService: CustomerAuthService,\n    private adminAuthService: AdminAuthService,\n    private sellerAuthService: SellerAuthService,\n    private authModeService: AuthModeService,\n    private router: Router,\n    private dialog: MatDialog\n  ) {}\n\n  ngOnInit(): void {\n    // ì±„íŒ…ìƒë‹´ í™œì„±í™” ìƒíƒœ êµ¬ë…\n    this.chatConsultationToggle.enabled$\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(enabled => {\n        this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', `ğŸ“ ì±„íŒ…ìƒë‹´ ìƒíƒœ ë³€ê²½: ${enabled ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}`);\n        \n        if (enabled) {\n          // í™œì„±í™”: ì´ˆê¸°í™” (Socket ì—°ê²° í¬í•¨)\n          if (!this.currentClient) {\n            this.initialize();\n          }\n        } else {\n          // ë¹„í™œì„±í™”: Socket ì—°ê²° í•´ì œ\n          if (this.socketService.isConnected()) {\n            this.socketService.disconnect();\n            this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', 'ğŸ”Œ Socket ì—°ê²° í•´ì œë¨');\n          }\n        }\n      });\n    \n    // ì´ˆê¸° ìƒíƒœ í™•ì¸\n    if (this.chatConsultationToggle.isEnabled()) {\n      this.initialize();\n    } else {\n      this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', 'âš ï¸ ì±„íŒ…ìƒë‹´ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤');\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.socketService.disconnect();\n    this.destroy$.next();\n    this.destroy$.complete();\n    if (this.typingTimeout) {\n      clearTimeout(this.typingTimeout);\n    }\n  }\n\n  /**\n   * ì´ˆê¸°í™”\n   */\n  async initialize(): Promise<void> {\n    try {\n      this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', 'ğŸš€ ì±„íŒ… ìœ„ì ¯ ì´ˆê¸°í™” ì‹œì‘');\n      this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', `organizationId: ${this.organizationId}`);\n      \n      // í˜„ì¬ ì¸ì¦ ëª¨ë“œ í™•ì¸\n      const currentMode = this.authModeService.getCurrentMode();\n      this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', `í˜„ì¬ ì¸ì¦ ëª¨ë“œ: ${currentMode || 'ì—†ìŒ'}`);\n      \n      // ëª¨ë“œë³„ ì‚¬ìš©ì ì •ë³´ í™•ì¸\n      let currentUser: any = null;\n      \n      if (currentMode === 'CUSTOMER') {\n        currentUser = this.customerAuthService.getCurrentUser();\n        this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', `ê³ ê° ëª¨ë“œ - ì‚¬ìš©ì: ${currentUser?.name || 'ì—†ìŒ'}`);\n      } else if (currentMode === 'ADMIN' || currentMode === 'SUPER_ADMIN') {\n        currentUser = this.adminAuthService.getCurrentUser();\n        this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', `ê´€ë¦¬ì ëª¨ë“œ - ì‚¬ìš©ì: ${currentUser?.name || 'ì—†ìŒ'}`);\n      } else if (currentMode === 'SELLER') {\n        currentUser = this.sellerAuthService.getCurrentUser();\n        this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', `íŒë§¤ì ëª¨ë“œ - ì‚¬ìš©ì: ${currentUser?.name || 'ì—†ìŒ'}`);\n      }\n      \n      if (!currentUser) {\n        this.debugLogger.warn('ì±„íŒ…ìœ„ì ¯', 'âš ï¸ ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ì');\n        this.isLoggedIn = false;\n        this.needsLogin = true;\n        return;\n      }\n      \n      this.isLoggedIn = true;\n      this.needsLogin = false;\n      \n      this.debugLogger.success('ì±„íŒ…ìœ„ì ¯', `âœ… ë¡œê·¸ì¸ í™•ì¸ - ${currentUser.name} (${currentUser.email})`);\n      this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', `ì‚¬ìš©ì ì—­í• : ${JSON.stringify(currentUser.role)}`);\n      \n      // 1. í´ë¼ì´ì–¸íŠ¸ ì‹ë³„ (ë¸Œë¼ìš°ì € í•‘ê±°í”„ë¦°íŠ¸)\n      const fingerprintData = this.generateFingerprintData();\n      this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', 'ğŸ”‘ í•‘ê±°í”„ë¦°íŠ¸ ìƒì„± ì™„ë£Œ');\n      this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', `í•‘ê±°í”„ë¦°íŠ¸ ì •ë³´: ${fingerprintData.platform} | ${fingerprintData.screen}`);\n      \n      // 2. í´ë¼ì´ì–¸íŠ¸ ë“±ë¡/ì¡°íšŒ (ë°±ì—”ë“œ DTO í˜•ì‹ì— ë§ì¶¤)\n      this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', 'ğŸ“ ë°±ì—”ë“œ API í˜¸ì¶œ - ê³ ê° ì‹ë³„');\n      const response = await this.apiService.identifyCustomerWithObject({\n        fingerprintData: fingerprintData,\n        pluginKey: this.organizationId,\n        userName: currentUser?.name,  // ì‚¬ìš©ì ì´ë¦„ ì¶”ê°€\n        userEmail: currentUser?.email  // ì‚¬ìš©ì ì´ë©”ì¼ ì¶”ê°€\n      }).toPromise();\n      \n      this.debugLogger.success('ì±„íŒ…ìœ„ì ¯', `âœ… ê³ ê° ì‹ë³„ ì™„ë£Œ - clientId: ${response?.client?.id}`);\n      this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', `ì‚¬ìš©ì ì •ë³´ ì „ë‹¬ - ${currentUser?.name} (${currentUser?.email})`);\n      \n      if (response?.client) {\n        this.currentClient = response.client;\n        this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', `í´ë¼ì´ì–¸íŠ¸ ì •ë³´ ì €ì¥ - ${response.client.name || response.client.id}`);\n        \n        // 3. ì±„íŒ…ë°© ì„¤ì •\n        this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', 'ğŸ”„ ì±„íŒ…ë°© ì„¤ì • ì‹œì‘');\n        await this.setupChatRoom();\n        \n        // 4. WebSocket ì—°ê²°\n        this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', 'ğŸ”Œ WebSocket ì—°ê²° ì‹œì‘');\n        await this.connectWebSocket();\n        \n        // 5. ë¹ ë¥¸ ë‹µì¥ ë¡œë“œ\n        this.quickReplies = this.chatBotService.getQuickReplies();\n        this.debugLogger.info('ì±„íŒ…ìœ„ì ¯', `ë¹ ë¥¸ ë‹µì¥ ë¡œë“œ: ${this.quickReplies.length}ê°œ`);\n        \n        this.debugLogger.success('ì±„íŒ…ìœ„ì ¯', 'ğŸ‰ ì±„íŒ… ìœ„ì ¯ ì´ˆê¸°í™” ì™„ë£Œ!');\n      }\n    } catch (error: any) {\n      this.debugLogger.error('ì±„íŒ…ìœ„ì ¯', `âŒ ì´ˆê¸°í™” ì‹¤íŒ¨: ${error.message || error}`);\n      this.debugLogger.error('ì±„íŒ…ìœ„ì ¯', `ì—ëŸ¬ ìƒì„¸: status=${error.status}, ${JSON.stringify(error.error || {})}`);\n      this.errorMessage = 'ì±„íŒ…ì„ ì‹œì‘í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';\n    }\n  }\n\n  /**\n   * ì±„íŒ…ë°© ì„¤ì •\n   */\n  async setupChatRoom(): Promise<void> {\n    if (!this.currentClient) {\n      this.debugLogger.error('ì±„íŒ…ë°©ì„¤ì •', 'âŒ í´ë¼ì´ì–¸íŠ¸ ì •ë³´ ì—†ìŒ');\n      return;\n    }\n\n    try {\n      this.debugLogger.info('ì±„íŒ…ë°©ì„¤ì •', `ğŸ“‹ ì±„íŒ…ë°© ì¡°íšŒ ì‹œì‘ - clientId: ${this.currentClient.id}`);\n      \n      // ê¸°ì¡´ ì±„íŒ…ë°© ì¡°íšŒ\n      const rooms = await this.apiService.getClientRooms(this.currentClient.id).toPromise();\n      \n      this.debugLogger.info('ì±„íŒ…ë°©ì„¤ì •', `ì¡°íšŒ ê²°ê³¼: ${rooms?.length || 0}ê°œ ì±„íŒ…ë°© ë°œê²¬`);\n\n      // âœ… í™œì„± ìƒíƒœì˜ ì±„íŒ…ë°©ë§Œ í•„í„°ë§ (ì¢…ë£Œëœ ì±„íŒ…ë°© ì œì™¸)\n      const activeRooms = rooms?.filter(room => \n        room.status !== RoomStatus.RESOLVED && room.status !== RoomStatus.CLOSED\n      ) || [];\n      \n      this.debugLogger.info('ì±„íŒ…ë°©ì„¤ì •', `ğŸ¯ğŸ¯ğŸ¯ í™œì„± ì±„íŒ…ë°© í•„í„°ë§ ê²°ê³¼: ${activeRooms.length}ê°œ (ì „ì²´: ${rooms?.length || 0}ê°œ)`);\n      \n      if (rooms && rooms.length > 0) {\n        this.debugLogger.info('ì±„íŒ…ë°©ì„¤ì •', `ğŸ“‹ ì „ì²´ ì±„íŒ…ë°© ìƒíƒœ: ${rooms.map(r => r.status).join(', ')}`);\n      }\n\n      if (activeRooms.length > 0) {\n        // ê¸°ì¡´ í™œì„± ì±„íŒ…ë°© ì‚¬ìš©\n        this.currentRoom = activeRooms[0];\n        this.debugLogger.success('ì±„íŒ…ë°©ì„¤ì •', `âœ…âœ…âœ… ê¸°ì¡´ í™œì„± ì±„íŒ…ë°© ì¬ì‚¬ìš© - roomId: ${this.currentRoom.id}`);\n        this.debugLogger.info('ì±„íŒ…ë°©ì„¤ì •', `ì±„íŒ…ë°© ìƒíƒœ: ${this.currentRoom.status}`);\n        \n        // ë©”ì‹œì§€ ë¡œë“œ\n        this.debugLogger.info('ì±„íŒ…ë°©ì„¤ì •', 'ğŸ“¨ ë©”ì‹œì§€ ë¡œë“œ ì‹œì‘');\n        await this.loadMessages();\n      } else {\n        // ìƒˆ ì±„íŒ…ë°© ìƒì„± (í™œì„± ì±„íŒ…ë°©ì´ ì—†ì„ ë•Œ)\n        this.debugLogger.warn('ì±„íŒ…ë°©ì„¤ì •', 'âš ï¸âš ï¸âš ï¸ í™œì„± ì±„íŒ…ë°© ì—†ìŒ - ìƒˆ ì±„íŒ…ë°© ìƒì„± ì‹œì‘');\n        \n        try {\n          const response: any = await this.apiService.createRoomWithOrganization({\n            clientId: this.currentClient.id,\n            organizationId: this.organizationId\n          }).toPromise();\n          \n          this.debugLogger.info('ì±„íŒ…ë°©ì„¤ì •', `API ì‘ë‹µ: ${JSON.stringify(response)}`);\n          \n          // ì‘ë‹µ êµ¬ì¡° í™•ì¸ í›„ ì²˜ë¦¬\n          const newRoom = response?.room || response;\n          \n          if (!newRoom || !newRoom.id) {\n            this.debugLogger.error('ì±„íŒ…ë°©ì„¤ì •', 'âŒ ì±„íŒ…ë°© ìƒì„± ì‹¤íŒ¨ - ì‘ë‹µ ë°ì´í„° ì—†ìŒ');\n            this.debugLogger.warn('ì±„íŒ…ë°©ì„¤ì •', 'âš ï¸ ë°±ì—”ë“œ API ë¯¸êµ¬í˜„ - ì„ì‹œ ì±„íŒ…ë°© ìƒì„±');\n            \n            // Fallback: ì„ì‹œ ì±„íŒ…ë°© ìƒì„± (í”„ë¡ íŠ¸ì—”ë“œì—ì„œë§Œ ì‚¬ìš©)\n            const tempRoomId = 'temp-room-' + Date.now();\n            this.currentRoom = {\n              id: tempRoomId,\n              clientId: this.currentClient.id,\n              organizationId: this.organizationId,\n              status: RoomStatus.BOT_ACTIVE,\n              createdAt: new Date()\n            } as any;\n            \n            this.debugLogger.info('ì±„íŒ…ë°©ì„¤ì •', `ğŸ’¡ ì„ì‹œ ì±„íŒ…ë°© ìƒì„± - roomId: ${tempRoomId}`);\n          } else {\n            this.currentRoom = newRoom;\n            this.debugLogger.success('ì±„íŒ…ë°©ì„¤ì •', `âœ… ìƒˆ ì±„íŒ…ë°© ìƒì„± ì™„ë£Œ - roomId: ${newRoom.id}`);\n          }\n          \n          // í™˜ì˜ ë©”ì‹œì§€ ì¶”ê°€\n          const welcomeMessage: IChatMessage = {\n            id: 'welcome-' + Date.now(),\n            roomId: this.currentRoom!.id,\n            senderType: SenderType.BOT,\n            content: 'ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?',\n            createdAt: new Date()\n          };\n          this.messages.push(welcomeMessage);\n          this.debugLogger.info('ì±„íŒ…ë°©ì„¤ì •', 'ğŸ’¬ í™˜ì˜ ë©”ì‹œì§€ ì¶”ê°€');\n        } catch (createError: any) {\n          this.debugLogger.error('ì±„íŒ…ë°©ì„¤ì •', `âŒ ì±„íŒ…ë°© ìƒì„± API ì˜¤ë¥˜: ${createError?.message}`);\n          this.debugLogger.warn('ì±„íŒ…ë°©ì„¤ì •', 'âš ï¸ ì„ì‹œ ì±„íŒ…ë°©ìœ¼ë¡œ ê³„ì† ì§„í–‰');\n          \n          // Fallback: ì„ì‹œ ì±„íŒ…ë°©ìœ¼ë¡œ ê³„ì† ì§„í–‰\n          const tempRoomId = 'temp-room-' + Date.now();\n          this.currentRoom = {\n            id: tempRoomId,\n            clientId: this.currentClient.id,\n            organizationId: this.organizationId,\n            status: RoomStatus.BOT_ACTIVE,\n            createdAt: new Date()\n          } as any;\n          \n          this.debugLogger.info('ì±„íŒ…ë°©ì„¤ì •', `ğŸ’¡ ì„ì‹œ ì±„íŒ…ë°© ìƒì„± - roomId: ${tempRoomId}`);\n          \n          // í™˜ì˜ ë©”ì‹œì§€ ì¶”ê°€\n          const welcomeMessage: IChatMessage = {\n            id: 'welcome-' + Date.now(),\n            roomId: tempRoomId,\n            senderType: SenderType.BOT,\n            content: 'ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”? (ì˜¤í”„ë¼ì¸ ëª¨ë“œ)',\n            createdAt: new Date()\n          };\n          this.messages.push(welcomeMessage);\n        }\n      }\n    } catch (error: any) {\n      this.debugLogger.error('ì±„íŒ…ë°©ì„¤ì •', `âŒ ì±„íŒ…ë°© ì„¤ì • ì‹¤íŒ¨: ${error.message || error}`);\n    }\n  }  /**\n   * ë©”ì‹œì§€ ë¡œë“œ\n   */\n  async loadMessages(): Promise<void> {\n    if (!this.currentRoom) {\n      this.debugLogger.warn('ë©”ì‹œì§€ë¡œë“œ', 'âš ï¸ ì±„íŒ…ë°© ì •ë³´ ì—†ìŒ');\n      return;\n    }\n\n    try {\n      this.debugLogger.info('ë©”ì‹œì§€ë¡œë“œ', `ğŸ“¨ ë©”ì‹œì§€ ì¡°íšŒ - roomId: ${this.currentRoom.id}`);\n      \n      const messages = await this.apiService.getRoomMessages(this.currentRoom.id).toPromise();\n      \n      if (messages) {\n        this.messages = messages;\n        this.debugLogger.success('ë©”ì‹œì§€ë¡œë“œ', `âœ… ë©”ì‹œì§€ ë¡œë“œ ì™„ë£Œ: ${messages.length}ê°œ`);\n        this.scrollToBottom();\n      } else {\n        this.debugLogger.warn('ë©”ì‹œì§€ë¡œë“œ', 'âš ï¸ ë©”ì‹œì§€ ì—†ìŒ');\n      }\n    } catch (error: any) {\n      this.debugLogger.error('ë©”ì‹œì§€ë¡œë“œ', `âŒ ë©”ì‹œì§€ ë¡œë“œ ì‹¤íŒ¨: ${error.message || error}`);\n    }\n  }\n\n  /**\n   * WebSocket ì—°ê²°\n   */\n  async connectWebSocket(): Promise<void> {\n    if (!this.currentClient || !this.currentRoom) {\n      this.debugLogger.warn('WebSocket', 'âš ï¸ í´ë¼ì´ì–¸íŠ¸ ë˜ëŠ” ì±„íŒ…ë°© ì •ë³´ ì—†ìŒ');\n      return;\n    }\n\n    this.debugLogger.info('WebSocket', 'ğŸ”Œ WebSocket ì—°ê²° ì‹œì‘');\n    \n    try {\n      await this.socketService.connect();\n      this.debugLogger.success('WebSocket', 'âœ… WebSocket ì—°ê²° ì„±ê³µ');\n      \n      // ì—°ê²° ìƒíƒœ í™•ì¸\n      const isConnected = this.socketService.isConnected();\n      this.debugLogger.info('WebSocket', `ğŸ“Š ì—°ê²° ìƒíƒœ: ${isConnected ? 'ì—°ê²°ë¨' : 'ì—°ê²° ì•ˆë¨'}`);\n      \n      if (!isConnected) {\n        this.debugLogger.error('WebSocket', 'âŒ ì—°ê²° ì‹¤íŒ¨ - isConnected() = false');\n        this.isConnected = false;\n        return;\n      }\n      \n      // âœ… í´ë¼ì´ì–¸íŠ¸ ë“±ë¡ (ì¤‘ìš”!)\n      this.debugLogger.info('WebSocket', `ğŸ“¤ í´ë¼ì´ì–¸íŠ¸ ë“±ë¡ - clientId: ${this.currentClient.id}, roomId: ${this.currentRoom.id}`);\n      this.socketService.registerClient(this.currentClient.id, this.currentRoom.id);\n      \n      // âœ… ì±„íŒ…ë°© ì°¸ì—¬ (clientId í¬í•¨)\n      this.debugLogger.info('WebSocket', `ğŸ“¤ ì±„íŒ…ë°© ì°¸ì—¬ ìš”ì²­ - roomId: ${this.currentRoom.id}, clientId: ${this.currentClient.id}`);\n      this.socketService.joinRoom(this.currentRoom.id, this.currentClient.id);\n      this.isConnected = true;\n      this.debugLogger.success('WebSocket', `âœ… ì±„íŒ…ë°© ì°¸ì—¬ ì™„ë£Œ - roomId: ${this.currentRoom.id}`);\n      \n      // ğŸ” ëª¨ë“  ì†Œì¼“ ì´ë²¤íŠ¸ ë¡œê¹… (ë””ë²„ê¹…ìš©)\n      this.socketService.onAnyEvent((eventName: string, data: any) => {\n        this.debugLogger.info('ì†Œì¼“ì´ë²¤íŠ¸', `ğŸ¯ ${eventName}`);\n      });\n      \n    } catch (error) {\n      this.debugLogger.error('WebSocket', `âŒ WebSocket ì—°ê²° ì‹¤íŒ¨: ${error}`);\n      this.isConnected = false;\n      return;\n    }\n\n    // ìƒˆ ë©”ì‹œì§€ ìˆ˜ì‹  (ë°±ì—”ë“œëŠ” createChat ì´ë²¤íŠ¸ë¥¼ ë¸Œë¡œë“œìºìŠ¤íŠ¸í•¨!)\n    this.socketService.onEvent<{ chat: IChatMessage }>('createChat')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(event => {\n        this.debugLogger.info('ë©”ì‹œì§€ìˆ˜ì‹ ', `ğŸ¯ğŸ¯ğŸ¯ createChat ì´ë²¤íŠ¸ ìˆ˜ì‹ : ${JSON.stringify(event)}`);\n        \n        if (event && event.chat && event.chat.roomId === this.currentRoom?.id) {\n          this.debugLogger.info('ë©”ì‹œì§€ìˆ˜ì‹ ', `ğŸ“¥ ìƒˆ ë©”ì‹œì§€ ë„ì°© - ${event.chat.senderType}: ${event.chat.content?.substring(0, 20)}...`);\n          \n          // ì¤‘ë³µ ë©”ì‹œì§€ ì²´í¬\n          const exists = this.messages.find(m => m.id === event.chat.id);\n          if (exists) {\n            this.debugLogger.warn('ë©”ì‹œì§€ìˆ˜ì‹ ', 'âš ï¸ ì¤‘ë³µ ë©”ì‹œì§€ ë¬´ì‹œ');\n            return;\n          }\n          \n          this.messages.push(event.chat);\n          this.scrollToBottom();\n          \n          // ì°½ì´ ë‹«í˜€ìˆìœ¼ë©´ ì½ì§€ ì•ŠìŒ ì¹´ìš´íŠ¸ ì¦ê°€\n          if (!this.isOpen) {\n            this.unreadCount++;\n            this.unreadCountChange.emit(this.unreadCount);\n            this.debugLogger.info('ë©”ì‹œì§€ìˆ˜ì‹ ', `ì½ì§€ ì•Šì€ ë©”ì‹œì§€: ${this.unreadCount}ê°œ`);\n          }\n        } else {\n          this.debugLogger.warn('ë©”ì‹œì§€ìˆ˜ì‹ ', `âš ï¸ ë‹¤ë¥¸ ì±„íŒ…ë°©ì˜ ë©”ì‹œì§€ (í˜„ì¬: ${this.currentRoom?.id}, ìˆ˜ì‹ : ${event?.chat?.roomId})`);\n        }\n      });\n\n    // ìƒë‹´ì› ë°°ì • (Backend ì´ë²¤íŠ¸: assignAgent)\n    this.socketService.onEvent<{ roomId: string; agentId: string; status: string }>('assignAgent')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(event => {\n        this.debugLogger.success('ìƒë‹´ì›ë°°ì •', `âœ… ìƒë‹´ì› ë°°ì •ë¨ - agentId: ${event.agentId}`);\n        \n        if (event && this.currentRoom) {\n          this.currentRoom.status = RoomStatus.AGENT_ACTIVE;\n          this.currentRoom.agentId = event.agentId;\n          this.showQuickReplies = false;\n          \n          // ì‹œìŠ¤í…œ ë©”ì‹œì§€ ì¶”ê°€\n          const systemMsg: IChatMessage = {\n            id: 'system-' + Date.now(),\n            roomId: this.currentRoom.id,\n            senderType: SenderType.SYSTEM,\n            content: 'ìƒë‹´ì›ì´ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.',\n            createdAt: new Date()\n          };\n          this.messages.push(systemMsg);\n          this.scrollToBottom();\n          \n          this.debugLogger.info('ìƒë‹´ì›ë°°ì •', 'ğŸ’¬ ìƒë‹´ ì‹œì‘ ê°€ëŠ¥');\n        }\n      });\n\n    // ìƒë‹´ì› íƒ€ì´í•‘\n    this.socketService.onEvent<{ roomId: string; isTyping: boolean }>('agentTyping')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(event => {\n        if (event && event.roomId === this.currentRoom?.id) {\n          this.agentTyping = event.isTyping;\n        }\n      });\n\n    // ìƒë‹´ ì¢…ë£Œ ì´ë²¤íŠ¸ ìˆ˜ì‹  (ìƒë‹´ì›ì´ ì¢…ë£Œí–ˆì„ ë•Œ)\n    this.socketService.onEvent<{ roomId: string }>('roomClosed')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(event => {\n        this.debugLogger.info('ìƒë‹´ì¢…ë£Œ', `ğŸšª ìƒë‹´ì›ì´ ìƒë‹´ì„ ì¢…ë£Œí–ˆìŠµë‹ˆë‹¤ - roomId: ${event.roomId}`);\n        \n        if (event && event.roomId === this.currentRoom?.id) {\n          \n          // ìƒë‹´ ì¢…ë£Œ ì‹œìŠ¤í…œ ë©”ì‹œì§€ ì¶”ê°€\n          const systemMsg: IChatMessage = {\n            id: 'system-' + Date.now(),\n            roomId: this.currentRoom.id,\n            senderType: SenderType.SYSTEM,\n            content: 'ìƒë‹´ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ìš©í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.',\n            createdAt: new Date()\n          };\n          this.messages.push(systemMsg);\n          this.scrollToBottom();\n          \n          // ìƒíƒœ ì—…ë°ì´íŠ¸\n          if (this.currentRoom) {\n            this.currentRoom.status = RoomStatus.RESOLVED;\n            this.currentRoom.agentId = undefined;\n          }\n          \n          this.debugLogger.info('ìƒë‹´ì¢…ë£Œ', 'âœ… ìƒë‹´ ì¢…ë£Œ ì²˜ë¦¬ ì™„ë£Œ');\n          \n          // 3ì´ˆ í›„ ìë™ìœ¼ë¡œ ìœ„ì ¯ ë‹«ê¸° (ì„ íƒì‚¬í•­)\n          setTimeout(() => {\n            this.debugLogger.info('ìƒë‹´ì¢…ë£Œ', 'ğŸ”„ ì±„íŒ… ìœ„ì ¯ ì´ˆê¸°í™”');\n            // ì›í•˜ë©´ ì—¬ê¸°ì„œ ìœ„ì ¯ì„ ë‹«ê±°ë‚˜ ì´ˆê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤\n            // this.closeWidget();\n          }, 3000);\n        } else {\n        }\n      });\n\n    // ì—ëŸ¬ ì²˜ë¦¬\n    this.socketService.onEvent<string>('error')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(error => {\n        if (error) {\n          this.errorMessage = 'ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';\n        }\n      });\n  }\n\n  /**\n   * ì±„íŒ… í† ê¸€\n   */\n  toggleChat(): void {\n    // ì±„íŒ…ì°½ ì—´ê¸°\n    this.isOpen = !this.isOpen;\n    \n    this.debugLogger.info('ì±„íŒ…í† ê¸€', `ğŸ’¬ ì±„íŒ…ì°½ ${this.isOpen ? 'ì—´ë¦¼' : 'ë‹«í˜'}`);\n    \n    if (this.isOpen) {\n      this.unreadCount = 0;\n      this.unreadCountChange.emit(0);\n      this.debugLogger.info('ì±„íŒ…í† ê¸€', 'ğŸ“­ ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ì´ˆê¸°í™”');\n      \n      // ë¡œê·¸ì¸ í™•ì¸ (ì—´ë¦´ ë•Œë§ˆë‹¤ ì²´í¬)\n      const currentMode = this.authModeService.getCurrentMode();\n      let currentUser: any = null;\n      \n      if (currentMode === 'CUSTOMER') {\n        currentUser = this.customerAuthService.getCurrentUser();\n      } else if (currentMode === 'ADMIN' || currentMode === 'SUPER_ADMIN') {\n        currentUser = this.adminAuthService.getCurrentUser();\n      } else if (currentMode === 'SELLER') {\n        currentUser = this.sellerAuthService.getCurrentUser();\n      }\n      \n      if (!currentUser) {\n        // ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê²½ìš° - ë¡œê·¸ì¸ í•„ìš” ë©”ì‹œì§€ í‘œì‹œ\n        this.isLoggedIn = false;\n        this.needsLogin = true;\n        this.debugLogger.warn('ì±„íŒ…í† ê¸€', 'âš ï¸ ë¡œê·¸ì¸ í•„ìš” - ë¡œê·¸ì¸ ì•ˆë‚´ í‘œì‹œ');\n      } else if (!this.isLoggedIn && currentUser) {\n        // ë¡œê·¸ì¸ í›„ ë‹¤ì‹œ ì—´ì—ˆì„ ë•Œ - ì´ˆê¸°í™” ì¬ì‹œë„\n        this.isLoggedIn = true;\n        this.needsLogin = false;\n        this.debugLogger.info('ì±„íŒ…í† ê¸€', 'ğŸ”„ ë¡œê·¸ì¸ í™•ì¸ ì™„ë£Œ - ì±„íŒ… ì¬ì´ˆê¸°í™”');\n        this.initialize();\n      }\n      \n      this.scrollToBottom();\n    }\n  }\n\n  /**\n   * ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™\n   */\n  goToLogin(): void {\n    // í˜„ì¬ URLì„ returnUrlë¡œ ì €ì¥í•˜ê³  ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™\n    this.router.navigate(['/store/login'], {\n      queryParams: { returnUrl: this.router.url }\n    });\n  }\n\n  /**\n   * ë©”ì‹œì§€ ì „ì†¡\n   */\n  async sendMessage(): Promise<void> {\n    if (!this.newMessage.trim() || !this.currentRoom || !this.currentClient) {\n      this.debugLogger.warn('ë©”ì‹œì§€ì „ì†¡', 'âš ï¸ ë©”ì‹œì§€ ë‚´ìš© ë˜ëŠ” ì±„íŒ…ë°© ì •ë³´ ì—†ìŒ');\n      return;\n    }\n\n    // ì¤‘ë³µ ì „ì†¡ ë°©ì§€\n    if (this.isLoading) {\n      this.debugLogger.warn('ë©”ì‹œì§€ì „ì†¡', 'âš ï¸ ì´ë¯¸ ë©”ì‹œì§€ ì „ì†¡ ì¤‘...');\n      return;\n    }\n\n    this.isLoading = true; // ì „ì†¡ ì‹œì‘\n    \n    const messageContent = this.newMessage.trim();\n    this.debugLogger.info('ë©”ì‹œì§€ì „ì†¡', `ğŸ“¤ ë©”ì‹œì§€ ì „ì†¡ ì‹œì‘: \"${messageContent.substring(0, 30)}...\"`);\n    \n    this.newMessage = '';\n    this.showQuickReplies = false;\n\n    // UIì— ì„ì‹œ ë©”ì‹œì§€ ì¶”ê°€\n    const tempMessage: IChatMessage = {\n      id: 'temp-' + Date.now(),\n      roomId: this.currentRoom.id,\n      senderId: this.currentClient.id,\n      senderType: SenderType.CLIENT,\n      content: messageContent,\n      createdAt: new Date()\n    };\n    this.messages.push(tempMessage);\n    this.scrollToBottom();\n    \n    this.debugLogger.info('ë©”ì‹œì§€ì „ì†¡', 'ğŸ’¬ UIì— ì„ì‹œ ë©”ì‹œì§€ ì¶”ê°€ ì™„ë£Œ');\n\n    try {\n      // BOT ëª¨ë“œë©´ ì±—ë´‡ ì‘ë‹µ\n      if (this.currentRoom.status === RoomStatus.BOT_ACTIVE) {\n        this.debugLogger.info('ë©”ì‹œì§€ì „ì†¡', 'ğŸ¤– ì±—ë´‡ ëª¨ë“œ - ìë™ ì‘ë‹µ ìƒì„± ì¤‘');\n        \n        const botResponse = await this.chatBotService.processMessage(messageContent);\n        \n        // ì„œë²„ì— ë©”ì‹œì§€ ì „ì†¡ (Socket) - ë°±ì—”ë“œëŠ” createChat ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•¨!\n        this.debugLogger.info('ë©”ì‹œì§€ì „ì†¡', 'ğŸ”Œ WebSocketìœ¼ë¡œ ë©”ì‹œì§€ ì „ì†¡ (createChat)');\n        this.socketService.emitEvent('createChat', {\n          dto: {\n            roomId: this.currentRoom.id,\n            senderId: this.currentClient.id,\n            senderType: SenderType.CLIENT,\n            content: messageContent\n          },\n          localId: tempMessage.id\n        });\n\n        // ì±—ë´‡ ì‘ë‹µ ì¶”ê°€\n        this.debugLogger.success('ë©”ì‹œì§€ì „ì†¡', `âœ… ì±—ë´‡ ì‘ë‹µ ìˆ˜ì‹ : \"${botResponse.message.substring(0, 30)}...\"`);\n        \n        setTimeout(() => {\n          const botMessage: IChatMessage = {\n            id: 'bot-' + Date.now(),\n            roomId: this.currentRoom!.id,\n            senderType: SenderType.BOT,\n            content: botResponse.message,\n            createdAt: new Date()\n          };\n          this.messages.push(botMessage);\n          this.scrollToBottom();\n\n          // ë¹ ë¥¸ ë‹µì¥ í‘œì‹œ\n          if (botResponse.quickReplies && botResponse.quickReplies.length > 0) {\n            this.quickReplies = botResponse.quickReplies;\n            this.showQuickReplies = true;\n            this.debugLogger.info('ë©”ì‹œì§€ì „ì†¡', `ğŸ’¡ ë¹ ë¥¸ ë‹µì¥ í‘œì‹œ: ${botResponse.quickReplies.length}ê°œ`);\n          }\n        }, 500);\n      } else {\n        // ìƒë‹´ì› ëª¨ë“œë©´ ì‹¤ì‹œê°„ ì „ì†¡\n        this.debugLogger.info('ë©”ì‹œì§€ì „ì†¡', 'ğŸ‘¤ ìƒë‹´ì› ëª¨ë“œ - ì‹¤ì‹œê°„ ì „ì†¡');\n        \n        // âœ… REST APIë¡œ ë©”ì‹œì§€ ì €ì¥\n        try {\n          const savedMessage = await this.apiService.sendMessage({\n            roomId: this.currentRoom.id,\n            senderId: this.currentClient.id,\n            senderType: SenderType.CLIENT,\n            content: messageContent\n          }).toPromise();\n          \n          this.debugLogger.success('ë©”ì‹œì§€ì „ì†¡', 'âœ… ë©”ì‹œì§€ DB ì €ì¥ ì™„ë£Œ');\n          \n          // ì„ì‹œ ë©”ì‹œì§€ë¥¼ ì‹¤ì œ ë©”ì‹œì§€ë¡œ êµì²´\n          if (savedMessage) {\n            const tempIndex = this.messages.findIndex(m => m.id === tempMessage.id);\n            if (tempIndex !== -1) {\n              this.messages[tempIndex] = savedMessage;\n            }\n          }\n        } catch (apiError) {\n          this.debugLogger.warn('ë©”ì‹œì§€ì „ì†¡', `âš ï¸ API ì €ì¥ ì‹¤íŒ¨ (Socketìœ¼ë¡œë§Œ ì „ì†¡): ${apiError}`);\n        }\n        \n        // Socketìœ¼ë¡œ ì‹¤ì‹œê°„ ì „ì†¡ (ë°±ì—”ë“œëŠ” createChat ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•¨!)\n        this.socketService.emitEvent('createChat', {\n          dto: {\n            roomId: this.currentRoom.id,\n            senderId: this.currentClient.id,\n            senderType: SenderType.CLIENT,\n            content: messageContent\n          },\n          localId: tempMessage.id\n        });\n        \n        this.debugLogger.success('ë©”ì‹œì§€ì „ì†¡', 'âœ… ìƒë‹´ì›ì—ê²Œ ë©”ì‹œì§€ ì „ì†¡ ì™„ë£Œ (createChat)');\n      }\n    } catch (error) {\n      this.debugLogger.error('ë©”ì‹œì§€ì „ì†¡', `âŒ ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨: ${error}`);\n      this.errorMessage = 'ë©”ì‹œì§€ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.';\n    } finally {\n      this.isLoading = false; // ì „ì†¡ ì™„ë£Œ\n    }\n  }\n\n  /**\n   * ë¹ ë¥¸ ë‹µì¥ ì„ íƒ\n   */\n  selectQuickReply(reply: string): void {\n    this.newMessage = reply;\n    this.sendMessage();\n  }\n\n  /**\n   * ìƒë‹´ì› ìš”ì²­\n   */\n  async requestSupport(): Promise<void> {\n    if (!this.currentRoom || !this.currentClient) {\n      this.debugLogger.warn('ìƒë‹´ì›ìš”ì²­', 'âš ï¸ ì±„íŒ…ë°© ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì •ë³´ ì—†ìŒ');\n      return;\n    }\n\n    this.debugLogger.info('ìƒë‹´ì›ìš”ì²­', 'ğŸ™‹ ìƒë‹´ì› ì—°ê²° ìš”ì²­ ì‹œì‘');\n    \n    // ì„ì‹œ ì±„íŒ…ë°©ì¸ì§€ í™•ì¸\n    const isTempRoom = this.currentRoom.id.toString().startsWith('temp-room');\n    if (isTempRoom) {\n      this.debugLogger.info('ìƒë‹´ì›ìš”ì²­', 'ğŸ“ ì„ì‹œ ì±„íŒ…ë°© - WebSocketìœ¼ë¡œ ì§ì ‘ ì—°ê²°');\n    }\n\n    try {\n      this.isLoading = true;\n      \n      // REST API í˜¸ì¶œ (ì •ì‹ ì±„íŒ…ë°©ë§Œ) - ì„ íƒì \n      if (!isTempRoom) {\n        this.debugLogger.info('ìƒë‹´ì›ìš”ì²­', 'ğŸ“¡ ì„œë²„ì— ìƒë‹´ì› ì „í™˜ ìš”ì²­ (REST API)');\n        try {\n          await this.apiService.transferToAgent(this.currentRoom.id).toPromise();\n          this.debugLogger.success('ìƒë‹´ì›ìš”ì²­', 'âœ… REST API í˜¸ì¶œ ì„±ê³µ');\n        } catch (apiError) {\n          this.debugLogger.warn('ìƒë‹´ì›ìš”ì²­', 'âš ï¸ REST API ì‹¤íŒ¨ - WebSocketìœ¼ë¡œ ê³„ì† ì§„í–‰');\n        }\n      } else {\n        this.debugLogger.info('ìƒë‹´ì›ìš”ì²­', 'â­ï¸ ì„ì‹œ ì±„íŒ…ë°© - REST API ìŠ¤í‚µ');\n      }\n\n      // WebSocket ì´ë²¤íŠ¸ ë°œì†¡ (requestSupport) - í•„ìˆ˜\n      this.debugLogger.info('ìƒë‹´ì›ìš”ì²­', 'ğŸ”Œ WebSocket requestSupport ì´ë²¤íŠ¸ ì „ì†¡');\n      this.socketService.requestSupport(this.currentRoom.id);\n\n      // ìƒíƒœ ì—…ë°ì´íŠ¸\n      this.currentRoom.status = RoomStatus.WAITING_AGENT;\n      this.showQuickReplies = false;\n      this.debugLogger.info('ìƒë‹´ì›ìš”ì²­', `ğŸ“Š ì±„íŒ…ë°© ìƒíƒœ ë³€ê²½: ${RoomStatus.WAITING_AGENT}`);\n\n      // ì‹œìŠ¤í…œ ë©”ì‹œì§€ ì¶”ê°€\n      const systemMsg: IChatMessage = {\n        id: 'system-' + Date.now(),\n        roomId: this.currentRoom.id,\n        senderType: SenderType.SYSTEM,\n        content: 'ìƒë‹´ì› ì—°ê²°ì„ ìš”ì²­í–ˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.',\n        createdAt: new Date()\n      };\n      this.messages.push(systemMsg);\n      this.scrollToBottom();\n      \n      this.debugLogger.success('ìƒë‹´ì›ìš”ì²­', 'âœ… ìƒë‹´ì› ì—°ê²° ìš”ì²­ ì™„ë£Œ');\n    } catch (error) {\n      this.debugLogger.error('ìƒë‹´ì›ìš”ì²­', `âŒ ìƒë‹´ì› ìš”ì²­ ì‹¤íŒ¨: ${error}`);\n      this.errorMessage = 'ìƒë‹´ ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.';\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  /**\n   * ìƒë‹´ì› ì—°ê²° ìš”ì²­ ì·¨ì†Œ\n   */\n  cancelSupportRequest(): void {\n    if (!this.currentRoom) return;\n\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      width: '360px',\n      data: {\n        title: 'ìƒë‹´ì› ì—°ê²° ì·¨ì†Œ',\n        message: 'ìƒë‹´ì› ì—°ê²°ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\\nì±—ë´‡ ìƒë‹´ìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.',\n        confirmText: 'ì·¨ì†Œí•˜ê¸°',\n        cancelText: 'ê³„ì† ëŒ€ê¸°'\n      }\n    });\n\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        // ìƒíƒœë¥¼ BOT_ACTIVEë¡œ ë˜ëŒë¦¼\n        this.currentRoom!.status = RoomStatus.BOT_ACTIVE;\n        this.showQuickReplies = true;\n\n        // ì·¨ì†Œ ë©”ì‹œì§€ ì¶”ê°€\n        const cancelMsg: IChatMessage = {\n          id: 'system-' + Date.now(),\n          roomId: this.currentRoom!.id,\n          senderType: SenderType.SYSTEM,\n          content: 'ìƒë‹´ì› ì—°ê²°ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì±—ë´‡ ìƒë‹´ì„ ì§„í–‰í•©ë‹ˆë‹¤.',\n          createdAt: new Date()\n        };\n        this.messages.push(cancelMsg);\n        this.scrollToBottom();\n\n        // Socketìœ¼ë¡œ ì·¨ì†Œ ì•Œë¦¼ (í•„ìš”ì‹œ)\n        this.socketService.emitEvent('cancelSupportRequest', {\n          roomId: this.currentRoom!.id\n        });\n      }\n    });\n  }\n\n  /**\n   * íƒ€ì´í•‘ ê°ì§€\n   */\n  onInputTyping(): void {\n    if (!this.currentRoom) return;\n\n    if (!this.isTyping) {\n      this.isTyping = true;\n      this.socketService.emitEvent('userStartedTyping', { roomId: this.currentRoom.id });\n    }\n\n    // ë””ë°”ìš´ìŠ¤: 1ì´ˆê°„ ì…ë ¥ ì—†ìœ¼ë©´ íƒ€ì´í•‘ ì¤‘ì§€\n    if (this.typingTimeout) {\n      clearTimeout(this.typingTimeout);\n    }\n    this.typingTimeout = setTimeout(() => {\n      this.isTyping = false;\n      this.socketService.emitEvent('userStoppedTyping', { roomId: this.currentRoom!.id });\n    }, 1000);\n  }\n\n  /**\n   * ìë™ ìŠ¤í¬ë¡¤\n   */\n  private scrollToBottom(): void {\n    setTimeout(() => {\n      if (this.messagesContainer) {\n        this.messagesContainer.nativeElement.scrollTop = \n          this.messagesContainer.nativeElement.scrollHeight;\n      }\n    }, 100);\n  }\n\n  /**\n   * ë¸Œë¼ìš°ì € í•‘ê±°í”„ë¦°íŠ¸ ë°ì´í„° ìƒì„± (ë°±ì—”ë“œ DTO í˜•ì‹)\n   */\n  private generateFingerprintData(): any {\n    const nav = window.navigator;\n    const screen = window.screen;\n    \n    return {\n      userAgent: nav.userAgent,\n      language: nav.language,\n      platform: nav.platform,\n      screen: `${screen.width}x${screen.height}`,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      canvas: this.generateCanvasFingerprint(),\n      memory: (nav as any).deviceMemory || 'unknown',\n      cores: nav.hardwareConcurrency || 'unknown',\n      cookieEnabled: nav.cookieEnabled,\n      doNotTrack: (nav as any).doNotTrack || 'unspecified',\n      timestamp: Date.now()\n    };\n  }\n\n  /**\n   * Canvas í•‘ê±°í”„ë¦°íŠ¸ ìƒì„±\n   */\n  private generateCanvasFingerprint(): string {\n    try {\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return 'no-canvas';\n\n      canvas.width = 200;\n      canvas.height = 50;\n      ctx.textBaseline = 'top';\n      ctx.font = '14px Arial';\n      ctx.fillText('Browser Fingerprint', 10, 10);\n\n      return canvas.toDataURL().substring(0, 100);\n    } catch (e) {\n      return 'canvas-error';\n    }\n  }\n\n  /**\n   * ë¸Œë¼ìš°ì € í•‘ê±°í”„ë¦°íŠ¸ ìƒì„± (ê¸°ì¡´ ë°©ì‹ - deprecated)\n   */\n  private generateFingerprint(): string {\n    const data = {\n      userAgent: navigator.userAgent,\n      language: navigator.language,\n      screenResolution: `${screen.width}x${screen.height}`,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      platform: navigator.platform\n    };\n    \n    return btoa(JSON.stringify(data));\n  }\n\n  /**\n   * ë©”ì‹œì§€ íŠ¸ë˜í‚¹ í•¨ìˆ˜\n   */\n  trackByMessageId(index: number, message: IChatMessage): string {\n    return message.id;\n  }\n\n  /**\n   * ì—ëŸ¬ ë‹«ê¸°\n   */\n  closeError(): void {\n    this.errorMessage = '';\n  }\n}\n\n/**\n * í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ ì»´í¬ë„ŒíŠ¸\n */\n@Component({\n  selector: 'app-confirm-dialog',\n  standalone: false,\n  template: `\n    <div class=\"confirm-dialog\">\n      <h2 mat-dialog-title>{{ data.title }}</h2>\n      <mat-dialog-content>\n        <p style=\"white-space: pre-line;\">{{ data.message }}</p>\n      </mat-dialog-content>\n      <mat-dialog-actions align=\"end\">\n        <button mat-button [mat-dialog-close]=\"false\">\n          {{ data.cancelText || 'ì·¨ì†Œ' }}\n        </button>\n        <button mat-raised-button color=\"warn\" [mat-dialog-close]=\"true\">\n          {{ data.confirmText || 'í™•ì¸' }}\n        </button>\n      </mat-dialog-actions>\n    </div>\n  `,\n  styles: [`\n    .confirm-dialog {\n      min-width: 300px;\n    }\n    mat-dialog-content {\n      padding: 20px 0;\n    }\n    mat-dialog-content p {\n      margin: 0;\n      line-height: 1.6;\n      color: rgba(0, 0, 0, 0.87);\n    }\n  `]\n})\nexport class ConfirmDialogComponent {\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data: {\n      title: string;\n      message: string;\n      confirmText?: string;\n      cancelText?: string;\n    }\n  ) {}\n}\n", "<!-- ì±„íŒ… ì°½ -->\n<div *ngIf=\"isOpen\" class=\"chat-window\">\n  <!-- í—¤ë” -->\n  <div class=\"chat-header\">\n    <div class=\"header-info\">\n      <mat-icon class=\"store-icon\">store</mat-icon>\n      <div class=\"header-text\">\n        <h3>ê³ ê° ìƒë‹´</h3>\n        <span class=\"status\" [class.connected]=\"isConnected\">\n          <span class=\"status-dot\"></span>\n          {{ isConnected ? 'ì—°ê²°ë¨' : 'ì—°ê²° ì¤‘...' }}\n        </span>\n      </div>\n    </div>\n    <div class=\"header-actions\">\n      <button mat-icon-button (click)=\"toggleChat()\" class=\"close-button\">\n        <mat-icon>close</mat-icon>\n      </button>\n    </div>\n  </div>\n\n  <!-- ì±„íŒ…ìƒë‹´ ë¹„í™œì„±í™” ë©”ì‹œì§€ -->\n  <div class=\"login-required-container\" *ngIf=\"!chatConsultationToggle.isEnabled()\">\n    <div class=\"login-required-content\">\n      <mat-icon class=\"login-icon\">chat_bubble_outline</mat-icon>\n      <h3>ì±„íŒ…ìƒë‹´ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤</h3>\n      <p>ì±„íŒ…ìƒë‹´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´<br>ê¸€ë¡œë²Œ ë„¤ë¹„ê²Œì´í„°ì—ì„œ í™œì„±í™”í•´ì£¼ì„¸ìš”.</p>\n      <p class=\"login-benefit\">âš™ï¸ â†’ ê¸€ë¡œë²Œ ê¸°ëŠ¥ â†’ ì±„íŒ…ìƒë‹´ í™œì„±í™”</p>\n    </div>\n  </div>\n\n  <!-- ì—ëŸ¬ ë°°ë„ˆ -->\n  <div class=\"error-banner\" *ngIf=\"errorMessage && chatConsultationToggle.isEnabled()\">\n    <mat-icon>{{ errorMessage.includes('ë¡œê·¸ì¸') ? 'login' : 'error_outline' }}</mat-icon>\n    <span>{{ errorMessage }}</span>\n    <button \n      mat-raised-button \n      color=\"primary\" \n      class=\"login-button\"\n      *ngIf=\"errorMessage.includes('ë¡œê·¸ì¸')\"\n      (click)=\"goToLogin()\">\n      ë¡œê·¸ì¸\n    </button>\n    <button mat-icon-button (click)=\"closeError()\" *ngIf=\"!errorMessage.includes('ë¡œê·¸ì¸')\">\n      <mat-icon>close</mat-icon>\n    </button>\n  </div>\n\n  <!-- ë¡œê·¸ì¸ í•„ìš” ë©”ì‹œì§€ -->\n  <div class=\"login-required-container\" *ngIf=\"needsLogin && chatConsultationToggle.isEnabled()\">\n    <div class=\"login-required-content\">\n      <mat-icon class=\"login-icon\">lock_person</mat-icon>\n      <h3>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</h3>\n      <p>ì±„íŒ… ìƒë‹´ì€ ë¡œê·¸ì¸ í›„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n      <p class=\"login-benefit\">ë¡œê·¸ì¸í•˜ì‹œë©´ ìƒë‹´ ë‚´ì—­ì„ ì €ì¥í•˜ê³ ,<br>ë” ë‚˜ì€ ì„œë¹„ìŠ¤ë¥¼ ì œê³µë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n      <div class=\"login-actions\">\n        <button \n          mat-raised-button \n          color=\"primary\" \n          class=\"login-button\"\n          (click)=\"goToLogin()\">\n          <mat-icon>login</mat-icon>\n          <span>ë¡œê·¸ì¸í•˜ëŸ¬ ê°€ê¸°</span>\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <!-- ë©”ì‹œì§€ ëª©ë¡ -->\n  <div class=\"messages-container\" #messagesContainer *ngIf=\"!needsLogin && chatConsultationToggle.isEnabled()\">\n    <div class=\"message-wrapper\" \n         *ngFor=\"let message of messages; trackBy: trackByMessageId\"\n         [ngClass]=\"{\n           'message-client': message.senderType === SenderType.CLIENT,\n           'message-agent': message.senderType === SenderType.AGENT,\n           'message-bot': message.senderType === SenderType.BOT,\n           'message-system': message.senderType === SenderType.SYSTEM\n         }\">\n      \n      <!-- ë©”ì‹œì§€ ë²„ë¸” -->\n      <div class=\"message-bubble\">\n        <!-- ë°œì‹ ì ì •ë³´ (ìƒë‹´ì›/ë´‡) -->\n        <div class=\"message-sender\" *ngIf=\"message.senderType !== SenderType.CLIENT\">\n          <mat-icon *ngIf=\"message.senderType === SenderType.BOT\">smart_toy</mat-icon>\n          <mat-icon *ngIf=\"message.senderType === SenderType.AGENT\">person</mat-icon>\n          <mat-icon *ngIf=\"message.senderType === SenderType.SYSTEM\">info</mat-icon>\n          <span class=\"sender-name\">\n            {{ message.senderType === SenderType.BOT ? 'ì±—ë´‡' : \n               message.senderType === SenderType.AGENT ? 'ìƒë‹´ì›' : 'ì‹œìŠ¤í…œ' }}\n          </span>\n        </div>\n\n        <!-- ë©”ì‹œì§€ ë‚´ìš© -->\n        <div class=\"message-content\">{{ message.content }}</div>\n\n        <!-- ì‹œê°„ -->\n        <div class=\"message-time\">\n          {{ message.createdAt | date:'HH:mm' }}\n        </div>\n      </div>\n    </div>\n\n    <!-- íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„° -->\n    <div class=\"typing-indicator\" *ngIf=\"agentTyping\">\n      <div class=\"typing-bubble\">\n        <span></span>\n        <span></span>\n        <span></span>\n      </div>\n      <span class=\"typing-text\">ìƒë‹´ì›ì´ ì…ë ¥ ì¤‘...</span>\n    </div>\n  </div>\n\n  <!-- ë¹ ë¥¸ ë‹µì¥ -->\n  <div class=\"quick-replies\" *ngIf=\"showQuickReplies && quickReplies.length > 0 && !needsLogin && chatConsultationToggle.isEnabled()\">\n    <button \n      *ngFor=\"let reply of quickReplies\" \n      class=\"quick-reply-button\"\n      (click)=\"selectQuickReply(reply)\">\n      {{ reply }}\n    </button>\n  </div>\n\n  <!-- ì…ë ¥ ì˜ì—­ -->\n  <div class=\"chat-input-container\" *ngIf=\"!needsLogin && chatConsultationToggle.isEnabled()\">\n    <!-- ìƒë‹´ì› ëŒ€ê¸° ì¤‘ ìƒíƒœ -->\n    <div \n      *ngIf=\"currentRoom && currentRoom.status === RoomStatus.WAITING_AGENT\"\n      class=\"waiting-agent-status\">\n      <div class=\"waiting-content\">\n        <mat-spinner diameter=\"24\"></mat-spinner>\n        <span class=\"waiting-text\">ìƒë‹´ì› ì—°ê²° ì¤‘...</span>\n      </div>\n      <button \n        mat-stroked-button\n        color=\"warn\"\n        class=\"cancel-support-button\"\n        (click)=\"cancelSupportRequest()\">\n        <mat-icon>close</mat-icon>\n        <span>ì—°ê²° ì·¨ì†Œ</span>\n      </button>\n    </div>\n\n    <!-- ìƒë‹´ì› ìš”ì²­ ë²„íŠ¼ (BOT ëª¨ë“œì¼ ë•Œë§Œ) -->\n    <button \n      *ngIf=\"currentRoom && currentRoom.status === RoomStatus.BOT_ACTIVE\"\n      class=\"request-support-button\"\n      (click)=\"requestSupport()\"\n      [disabled]=\"isLoading\">\n      <mat-icon>support_agent</mat-icon>\n      <span>ìƒë‹´ì› ì—°ê²°</span>\n    </button>\n\n    <!-- ì…ë ¥ í¼ -->\n    <div class=\"input-wrapper\" *ngIf=\"currentRoom && currentRoom.status !== RoomStatus.WAITING_AGENT\">\n      <input \n        type=\"text\"\n        class=\"chat-input\"\n        [(ngModel)]=\"newMessage\"\n        (keyup.enter)=\"sendMessage()\"\n        (input)=\"onInputTyping()\"\n        placeholder=\"ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...\"\n        [disabled]=\"isLoading\" />\n      \n      <button \n        class=\"send-button\"\n        (click)=\"sendMessage()\"\n        [disabled]=\"!newMessage.trim() || isLoading\">\n        <mat-icon *ngIf=\"!isLoading\">send</mat-icon>\n        <mat-spinner *ngIf=\"isLoading\" diameter=\"20\"></mat-spinner>\n      </button>\n    </div>\n  </div>\n</div>\n", "import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n// Angular Material Modules\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatBadgeModule } from '@angular/material/badge';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\n\nimport { ChatTalkRoutingModule } from './chat-talk-routing.module';\nimport { ChatTalkComponent } from './chat-talk.component';\nimport { ChatTalkLoginComponent } from './login/chat-talk-login.component';\nimport { ChatWidgetComponent, ConfirmDialogComponent } from './client/components/chat-widget/chat-widget.component';\nimport { SharedModule } from '../shared/shared.module';\n\n@NgModule({\n  declarations: [\n    ChatTalkComponent,\n    ChatTalkLoginComponent,\n    ChatWidgetComponent,\n    ConfirmDialogComponent\n  ],\n  imports: [\n    CommonModule,\n    RouterModule,\n    ChatTalkRoutingModule,\n    SharedModule,\n    \n    // Forms\n    ReactiveFormsModule,\n    FormsModule,\n\n    // Material\n    MatFormFieldModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    MatTabsModule,\n    MatSidenavModule,\n    MatChipsModule,\n    MatTooltipModule,\n    MatMenuModule,\n    MatDividerModule,\n    MatBadgeModule,\n    MatProgressSpinnerModule,\n    MatDialogModule,\n    MatSnackBarModule\n  ],\n  exports: [\n    ChatTalkComponent,\n    ChatWidgetComponent\n  ]\n})\nexport class ChatTalkModule { }\n"],
  "mappings": "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",
  "names": ["environment", "environment", "environment", "screen"]
}
