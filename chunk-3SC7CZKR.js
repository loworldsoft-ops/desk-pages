import{c as Gn}from"./chunk-MW2KK2IL.js";import{a as Ie}from"./chunk-WQUHQLF7.js";import{a as te}from"./chunk-BHY5HFLU.js";import{b as An}from"./chunk-YAMALYSC.js";import{d as Vn}from"./chunk-BHRABJJR.js";import{a as Lt}from"./chunk-GW37IABN.js";import{a as jn}from"./chunk-3ODN44QF.js";import{a as zn,b as Fn,c as Ln,d as Rn}from"./chunk-CFQLUY3O.js";import{b as $n}from"./chunk-G3T635TF.js";import{d as Nn}from"./chunk-P6GORGWD.js";import{a as Ft}from"./chunk-4DRAGH36.js";import"./chunk-WFQK2EUE.js";import"./chunk-VCISZ2N4.js";import"./chunk-7UZYWCAJ.js";import{a as De}from"./chunk-MTJJXNZ2.js";import{c as Nt,d as We,f as ve,h as Ye}from"./chunk-DUKSTT3K.js";import{c as wn,d as kn,e as Sn,f as Dn,g as In,k as En}from"./chunk-LW5MFUDH.js";import{e as Ce}from"./chunk-DJJXWOPV.js";import"./chunk-WPFHTHSV.js";import"./chunk-2L27H7LU.js";import{j as qn}from"./chunk-VMGIQILY.js";import"./chunk-BSANEL3F.js";import"./chunk-PH6W6J3R.js";import{j as Bn,q as Tn}from"./chunk-A3I3ALLC.js";import{a as dt,b as gt}from"./chunk-UYFSIFAJ.js";import{a as On,b as yn,c as Se,h as rt}from"./chunk-UZ4ZBC3S.js";import{qa as ct,sa as lt,va as st}from"./chunk-43TLI6JO.js";import{b as vn,d as ue,g as zt}from"./chunk-BOMXJJQJ.js";import{k as _n}from"./chunk-IESNQYPT.js";import{C as xn,b as un,c as Cn,h as fn,m as bn,w as hn,x as Pn,y as Mn}from"./chunk-GYV7E64H.js";import{$b as v,Aa as an,Ac as ge,Dd as mn,F as tn,Fc as ee,Fd as ke,Gc as K,Hc as sn,Jc as dn,K as nn,Kb as Y,Kc as F,Lc as L,Oc as j,Rb as p,Sb as o,Sc as B,Tb as i,Ub as S,W as on,Xa as ye,Yb as rn,Zb as cn,_c as at,aa as D,ba as Ze,bb as l,bc as f,dc as d,ea as N,f as Qe,fa as H,g as xe,hb as z,hc as tt,ic as nt,jc as ot,ka as _,la as u,ma as W,na as Z,nc as R,ob as ne,oc as q,od as gn,p as Je,pb as et,pc as y,q as Zt,qd as we,rc as U,rd as ce,sc as c,tc as h,ub as b,uc as M,va as T,vc as E,wc as it,wd as pn,x as en,xb as ie,xc as ln,yc as se,zc as de}from"./chunk-KPABI5SC.js";import{a as k,b as I,h as O}from"./chunk-WWX6BADO.js";function oo(r,t){if(r&1){let e=v();o(0,"button",12),f("click",function(){_(e);let a=d(2);return u(a.onCancel())}),c(1),i()}if(r&2){let e=d(2);l(),M(" ",e.cancelText," ")}}function io(r,t){if(r&1){let e=v();o(0,"div",1),f("click",function(a){_(e);let s=d();return u(s.onBackdropClick(a))}),o(1,"div",2)(2,"div",3)(3,"div",4),c(4),i(),o(5,"h3",5),c(6),i(),o(7,"button",6),f("click",function(){_(e);let a=d();return u(a.onClose())}),c(8,"\u2715"),i()(),o(9,"div",7),S(10,"p",8),i(),o(11,"div",9),b(12,oo,2,1,"button",10),o(13,"button",11),f("click",function(){_(e);let a=d();return u(a.onConfirm())}),c(14),i()()()()}if(r&2){let e=d();l(),U("modal-"+e.type),l(3),h(e.getIcon()),l(2),h(e.title),l(4),p("innerHTML",e.message,ye),l(2),p("ngIf",e.showCancel),l(),U("modal-btn-"+e.type),l(),M(" ",e.confirmText," ")}}var Ee=class r{isOpen=!1;type="info";title="";message="";confirmText="\uD655\uC778";cancelText="\uCDE8\uC18C";showCancel=!1;confirm=new ie;cancel=new ie;close=new ie;onConfirm(){this.confirm.emit(),this.isOpen=!1}onCancel(){this.cancel.emit(),this.isOpen=!1}onClose(){this.close.emit(),this.isOpen=!1}onBackdropClick(t){t.target===t.currentTarget&&this.onClose()}getIcon(){switch(this.type){case"success":return"\u2713";case"warning":return"\u26A0";case"error":return"\u2715";case"confirm":return"?";default:return"\u2139"}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=ne({type:r,selectors:[["app-game-modal"]],inputs:{isOpen:"isOpen",type:"type",title:"title",message:"message",confirmText:"confirmText",cancelText:"cancelText",showCancel:"showCancel"},outputs:{confirm:"confirm",cancel:"cancel",close:"close"},decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-container"],[1,"modal-header"],[1,"modal-icon"],[1,"modal-title"],["aria-label","\uB2EB\uAE30",1,"modal-close",3,"click"],[1,"modal-body"],[1,"modal-message",3,"innerHTML"],[1,"modal-footer"],["class","modal-btn modal-btn-cancel",3,"click",4,"ngIf"],[1,"modal-btn","modal-btn-confirm",3,"click"],[1,"modal-btn","modal-btn-cancel",3,"click"]],template:function(e,n){e&1&&b(0,io,15,9,"div",0),e&2&&p("ngIf",n.isOpen)},dependencies:[ke,ce],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-out;padding:1rem}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f1e8,#e8dcc8);border-radius:12px;box-shadow:0 10px 40px #0000004d;max-width:500px;width:100%;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .3s ease-out;border:2px solid rgba(139,69,19,.3)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem;border-bottom:2px solid rgba(139,69,19,.2);background:#8b45130d}.modal-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;font-size:1.5rem;font-weight:700;flex-shrink:0}.modal-title[_ngcontent-%COMP%]{flex:1;margin:0;font-size:1.3rem;font-weight:600;color:#2c2416;font-family:Noto Sans KR,Malgun Gothic,sans-serif}.modal-close[_ngcontent-%COMP%]{width:32px;height:32px;border:none;background:#8b45131a;border-radius:50%;font-size:1.2rem;color:#666;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;flex-shrink:0}.modal-close[_ngcontent-%COMP%]:hover{background:#8b451333;color:#333;transform:scale(1.1)}.modal-close[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-body[_ngcontent-%COMP%]{padding:2rem 1.5rem}.modal-message[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;line-height:1.6;color:#4a3520;text-align:center;font-family:Noto Sans KR,Malgun Gothic,sans-serif}.modal-footer[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:1rem 1.5rem 1.5rem;justify-content:flex-end}.modal-btn[_ngcontent-%COMP%]{padding:.75rem 2rem;border:none;border-radius:6px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:Noto Sans KR,Malgun Gothic,sans-serif;min-width:100px}.modal-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.modal-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 6px #0000001a}.modal-btn-cancel[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.modal-btn-cancel[_ngcontent-%COMP%]:hover{background:#5a6268}.modal-btn-confirm[_ngcontent-%COMP%]{background:#8b4513;color:#fff}.modal-btn-confirm[_ngcontent-%COMP%]:hover{background:#704010}.modal-info[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{background:#17a2b826;color:#17a2b8}.modal-info[_ngcontent-%COMP%]   .modal-btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.modal-info[_ngcontent-%COMP%]   .modal-btn-info[_ngcontent-%COMP%]:hover{background:#138496}.modal-success[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{background:#28a74526;color:#28a745}.modal-success[_ngcontent-%COMP%]   .modal-btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.modal-success[_ngcontent-%COMP%]   .modal-btn-success[_ngcontent-%COMP%]:hover{background:#218838}.modal-warning[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{background:#ffc10726;color:#ffc107}.modal-warning[_ngcontent-%COMP%]   .modal-btn-warning[_ngcontent-%COMP%]{background:#ffc107;color:#333}.modal-warning[_ngcontent-%COMP%]   .modal-btn-warning[_ngcontent-%COMP%]:hover{background:#e0a800}.modal-error[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{background:#dc354526;color:#dc3545}.modal-error[_ngcontent-%COMP%]   .modal-btn-error[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.modal-error[_ngcontent-%COMP%]   .modal-btn-error[_ngcontent-%COMP%]:hover{background:#c82333}.modal-confirm[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{background:#8b451326;color:#8b4513}.modal-confirm[_ngcontent-%COMP%]   .modal-btn-confirm[_ngcontent-%COMP%]{background:#8b4513;color:#fff}.modal-confirm[_ngcontent-%COMP%]   .modal-btn-confirm[_ngcontent-%COMP%]:hover{background:#704010}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{max-width:95%;margin:1rem}.modal-header[_ngcontent-%COMP%]{padding:1.2rem}.modal-title[_ngcontent-%COMP%]{font-size:1.1rem}.modal-body[_ngcontent-%COMP%]{padding:1.5rem 1.2rem}.modal-message[_ngcontent-%COMP%]{font-size:.95rem}.modal-footer[_ngcontent-%COMP%]{padding:.8rem 1.2rem 1.2rem;flex-direction:column}.modal-btn[_ngcontent-%COMP%]{width:100%;min-width:auto}}"]})};function lo(r,t){if(r&1&&(o(0,"p",10),c(1),i()),r&2){let e=d();l(),h(e.data.verdict)}}var J=class r{constructor(t,e,n){this.dialogRef=t;this.data=e;this.sanitizer=n;this.sanitizedMessage=this.sanitizer.bypassSecurityTrustHtml(e.message),this.isComparisonDialog=e.title?.includes("\uBE44\uAD50")||!1}sanitizedMessage;isComparisonDialog;onCancel(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static \u0275fac=function(e){return new(e||r)(z(On),z(yn),z(_n))};static \u0275cmp=ne({type:r,selectors:[["app-confirm-dialog"]],decls:18,vars:10,consts:[[1,"confirm-dialog"],[1,"dialog-header"],[1,"icon-wrapper"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"dialog-content"],[1,"message-content",3,"innerHTML"],["class","verdict",4,"ngIf"],[1,"dialog-actions"],["mat-button","",1,"cancel-btn",3,"click"],["mat-raised-button","",1,"confirm-btn",3,"click"],[1,"verdict"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon"),c(4),i()(),o(5,"button",3),f("click",function(){return n.onCancel()}),o(6,"mat-icon"),c(7,"close"),i()()(),o(8,"div",4)(9,"h2"),c(10),i(),S(11,"div",5),b(12,lo,2,1,"p",6),i(),o(13,"div",7)(14,"button",8),f("click",function(){return n.onCancel()}),c(15),i(),o(16,"button",9),f("click",function(){return n.onConfirm()}),c(17),i()()()),e&2&&(y("comparison-dialog",n.isComparisonDialog),l(2),y("comparison-icon",n.isComparisonDialog),l(2),h(n.isComparisonDialog?"compare_arrows":"help_outline"),l(6),h(n.data.title||"\uD655\uC778"),l(),p("innerHTML",n.sanitizedMessage,ye),l(),p("ngIf",n.data.verdict),l(3),M(" ",n.data.cancelText||"\uCDE8\uC18C"," "),l(2),M(" ",n.data.confirmText||"\uD655\uC778"," "))},dependencies:[ke,ce,rt,st,lt,ct,gt,dt],styles:['@charset "UTF-8";.confirm-dialog[_ngcontent-%COMP%]{padding:0;background:var(--bg-primary, #ffffff);border-radius:16px;min-width:400px;max-width:500px;overflow:hidden}.confirm-dialog.comparison-dialog[_ngcontent-%COMP%]{min-width:700px;max-width:900px}.dialog-header[_ngcontent-%COMP%]{position:relative;padding:24px 24px 0;display:flex;justify-content:space-between;align-items:flex-start}.icon-wrapper[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #667eea4d}.icon-wrapper.comparison-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#8b5cf6);box-shadow:0 4px 12px #3b82f64d}.icon-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:28px;width:28px;height:28px}.close-btn[_ngcontent-%COMP%]{color:var(--text-secondary, #666);width:32px;height:32px}.close-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.close-btn[_ngcontent-%COMP%]:hover{background:var(--bg-hover, #f5f5f5)}.dialog-content[_ngcontent-%COMP%]{padding:20px 24px 24px}.dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:24px;font-weight:700;color:var(--text-primary, #212529);line-height:1.3}.dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{font-size:16px;line-height:1.6;color:var(--text-secondary, #666)}.dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;line-height:1.6;color:var(--text-secondary, #666)}.dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:var(--bg-secondary, #f8f9fa);border-radius:8px;font-weight:600;font-size:15px;color:var(--accent-primary, #667eea);text-align:center}.dialog-actions[_ngcontent-%COMP%]{padding:16px 24px 24px;display:flex;gap:12px;justify-content:flex-end}.cancel-btn[_ngcontent-%COMP%]{min-width:100px;height:44px;border-radius:8px;font-weight:600;font-size:15px;color:var(--text-secondary, #666);background:transparent;border:1px solid var(--border-color, #e0e0e0);transition:all .2s ease}.cancel-btn[_ngcontent-%COMP%]:hover{background:var(--bg-hover, #f5f5f5);border-color:var(--text-secondary, #666)}.confirm-btn[_ngcontent-%COMP%]{min-width:100px;height:44px;border-radius:8px;font-weight:600;font-size:15px;color:#fff;background:linear-gradient(135deg,#667eea,#764ba2);box-shadow:0 4px 12px #667eea4d;transition:all .2s ease}.confirm-btn[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #667eea66;transform:translateY(-1px)}.confirm-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}body.dark-theme[_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .confirm-dialog[_ngcontent-%COMP%]{background:#1a1a2e!important}body.dark-theme[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f5f5f7!important}body.dark-theme[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .verdict[_ngcontent-%COMP%]{background:#2d2d44!important;color:#3b82f6!important}body.dark-theme[_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{color:#8e8e93!important;border-color:#2d2d44!important}body.dark-theme[_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, body.dark-mode[_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, [data-theme=dark][_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background:#2d2d44!important;border-color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-mode[_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, [data-theme=dark][_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#2d2d44!important}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.confirm-dialog[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .2s ease-out}']})};var $t=[{id:1,name:"Waxing Gibbous",nameKo:"\uCC28\uC624\uB974\uB294 \uCCA0\uC6D4",rarity:"unique",type:"weapon",category:"\uB3C4\uB07C",attackSpeed:"\uBE60\uB984",attacksPerSecond:1.1,favorites:7,tags:["\uACE0\uC720","\uB3C4\uB07C"],stats:[{name:"\uCD08\uB2F9 \uACF5\uACA9 \uD69F\uC218",value:"1.10 (\uBE60\uB984)",type:"special"},{name:"\uCE7C\uB0A0 \uBC1C\uD1B1\uC774 \uB450 \uBC30\uC758 \uD53C\uD574\uB97C \uC904 \uD655\uB960",value:"+50.0%",type:"damage"},{name:"\uADF9\uB300\uD654 \uD53C\uD574",value:"+[88.0-115.0]%",type:"critical"},{name:"\uD53C\uC758 \uC6B8\uBD80\uC9D6\uC74C\uC774 \uBD80\uC5EC\uD558\uB294 \uC740\uD3D0",value:"+[2.2-3.0]\uCD08",type:"special"},{name:"\uCE7C\uB0A0 \uBC1C\uD1B1",value:"+[2-4]",type:"special"},{name:"\uB3C5\uC131 \uBC1C\uD1B1",value:"+[1-2]",type:"special"}],uniqueEffect:"\uCE7C\uB0A0 \uBC1C\uD1B1\uC73C\uB85C \uC801\uC744 \uCC98\uCE58\uD558\uBA74 2\uCD08 \uB3D9\uC548 \uC740\uD3D0\uB97C \uC5BB\uC2B5\uB2C8\uB2E4. \uACF5\uACA9\uD574 \uC740\uD3D0\uAC00 \uC885\uB8CC\uB418\uBA74 1.0-4.0\uCD08 \uB3D9\uC548 \uD655\uC815\uC801\uC73C\uB85C \uADF9\uB300\uD654 \uACF5\uACA9\uD569\uB2C8\uB2E4.",classRestriction:["\uB4DC\uB8E8\uC774\uB4DC"]},{id:2,name:"Butcher's Cleaver",nameKo:"\uB3C4\uC0B4\uC790\uC758 \uC2DD\uCE7C",rarity:"unique",type:"weapon",category:"\uB3C4\uB07C",attackSpeed:"\uBE60\uB984",attacksPerSecond:1.1,favorites:10,tags:["\uACE0\uC720","\uB3C4\uB07C"],stats:[{name:"\uCD08\uB2F9 \uACF5\uACA9 \uD69F\uC218",value:"1.10 (\uBE60\uB984)",type:"special"},{name:"\uBD80\uC0C1\uB2F9\uD55C \uC801\uC5D0\uAC8C \uC8FC\uB294 \uD53C\uD574",value:"+175.0%",type:"damage"},{name:"\uACF5\uD3EC \uC801\uC5D0 \uB300\uD55C \uADF9\uB300\uD654 \uD655\uB960",value:"+[16.0-25.0]%",type:"critical"},{name:"\uC774\uB3D9 \uC18D\uB3C4",value:"+[17.5-23.0]%",type:"special"},{name:"\uACF5\uACA9 \uC18D\uB3C4",value:"+[8.3-10.0]%",type:"special"},{name:"\uBB3C\uB9AC \uD53C\uD574",value:"+[62.5-85.0]%",type:"damage"}],uniqueEffect:"\uD589\uC6B4\uC758 \uC801\uC911: \uC801\uC5D0\uAC8C \uACF5\uACA9\uC774 \uADF9\uB300\uD654\uB85C \uC801\uC911\uD558\uBA74 \uCD5C\uB300 100% \uD655\uB960\uB85C \uD574\uB2F9 \uC801\uC774 4\uCD08 \uB3D9\uC548 \uACF5\uD3EC\uC5D0 \uC9C8\uB9AC\uACE0 61 \u2013 90% \uAC10\uC18D\uB429\uB2C8\uB2E4."},{id:3,name:"Condemnation",nameKo:"\uADDC\uD0C4",rarity:"unique",type:"weapon",category:"\uB2E8\uAC80",attackSpeed:"\uB9E4\uC6B0 \uBE60\uB984",attacksPerSecond:1.2,favorites:13,tags:["\uACE0\uC720","\uB2E8\uAC80","\uD63C\uB3C8\uC758 \uBC29\uC5B4\uAD6C"],chaosArmor:!0,stats:[{name:"\uCD08\uB2F9 \uACF5\uACA9 \uD69F\uC218",value:"1.20 (\uB9E4\uC6B0 \uBE60\uB984)",type:"special"},{name:"\uACF5\uACA9\uB825",value:"+50.0%",type:"damage"},{name:"\uAE30\uBCF8 \uACF5\uACA9 \uC18D\uB3C4",value:"+[16.0-25.0]%",type:"special"},{name:"\uD589\uC6B4\uC758 \uC801\uC911: \uC801\uC744 2\uCD08 \uB3D9\uC548 \uCDE8\uC57D\uD558\uAC8C \uB9CC\uB4E4 \uD655\uB960 \uCD5C\uB300",value:"+[43.3-47.3]%",type:"special"},{name:"\uC18C\uBAA8\uD55C \uC5F0\uACC4 \uC810\uC218\uB2F9 \uD53C\uD574",value:"+[47.0-65.0]%",type:"damage"},{name:"\uBBFC\uCCA9",value:"+[80-94]",type:"special"}],uniqueEffect:"\uC5F0\uACC4 \uC810\uC218 3\uC810\uC744 \uC18C\uBAA8\uD558\uBA74 \uD575\uC2EC \uAE30\uC220\uC758 \uD53C\uD574\uAC00 50\u201370% \uC99D\uAC00\uD569\uB2C8\uB2E4. \uAE30\uBCF8 \uAE30\uC220\uC774 \uD56D\uC0C1 \uC5F0\uACC4 \uC810\uC218 3\uC810\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4.",classRestriction:["\uB3C4\uC801"]},{id:7,name:"The Grandfather",nameKo:"\uADA4\uBA78\uC790",rarity:"mythic",type:"weapon",category:"\uAC80",attackSpeed:"\uBE60\uB984",attacksPerSecond:1.1,favorites:40,tags:["\uC2E0\uD654 \uACE0\uC720","\uB3C4\uAC80"],stats:[{name:"\uCD08\uB2F9 \uACF5\uACA9 \uD69F\uC218",value:"1.10 (\uBE60\uB984)",type:"special"},{name:"\uACF5\uACA9\uB825",value:"+100.0%",type:"damage"},{name:"\uBAA8\uB4E0 \uB2A5\uB825\uCE58",value:"+160",type:"special"},{name:"\uCD5C\uB300 \uC0DD\uBA85\uB825",value:"35.0%",type:"vital"},{name:"\uD53C\uD574 \uAC10\uC18C",value:"10.0%",type:"defense"},{name:"\uD589\uC6B4\uC758 \uC801\uC911: \uCD5C\uB300 15% \uD655\uB960\uB85C \uC0DD\uBA85\uB825",value:"+530 \uD68C\uBCF5",type:"lifesteal"},{name:"\uD589\uC6B4\uC758 \uC801\uC911: \uCD5C\uB300 25% \uD655\uB960\uB85C \uC8FC\uC704 \uC801\uC5D0\uAC8C",value:"900\uC758 \uC554\uD751 \uD53C\uD574",type:"damage"}],uniqueEffect:"\uD589\uC6B4\uC758 \uC801\uC911: \uCD5C\uB300 25% \uD655\uB960\uB85C \uC8FC\uC704 \uC801\uC5D0\uAC8C 900\uC758 \uC554\uD751 \uD53C\uD574\uB97C \uC8FC\uACE0, \uC801\uC774 \uC8FC\uB294 \uD53C\uD574\uB97C 5\uCD08 \uB3D9\uC548 20% \uAC10\uC18C\uC2DC\uD0B5\uB2C8\uB2E4."},{id:19,name:"Doombringer",nameKo:"\uD55C\uC544\uBE44",rarity:"mythic",type:"weapon",category:"\uC591\uC190 \uAC80",attackSpeed:"\uB290\uB9BC",attacksPerSecond:1,favorites:54,tags:["\uC2E0\uD654 \uACE0\uC720","\uC591\uC190 \uAC80"],stats:[{name:"\uCD08\uB2F9 \uACF5\uACA9 \uD69F\uC218",value:"1.00 (\uB290\uB9BC)",type:"special"},{name:"\uACF5\uACA9\uB825",value:"+150.0%",type:"damage"},{name:"\uB0B4\uAD6C\uB3C4 \uAC10\uC18C \uBB34\uC2DC",value:"",type:"special"},{name:"\uBAA8\uB4E0 \uB2A5\uB825\uCE58",value:"+200",type:"special"},{name:"\uACF5\uACA9\uB825",value:"+300.0%",type:"damage"},{name:"\uCD5C\uB300 \uC0DD\uBA85\uB825",value:"+1,800",type:"vital"},{name:"\uCD5C\uB300 \uC790\uC6D0",value:"+20",type:"special"}],uniqueEffect:"\uD50C\uB808\uC774\uC5B4\uC758 \uADF9\uB300\uD654 \uD53C\uD574\uAC00 100% \uC99D\uAC00\uD569\uB2C8\uB2E4. \uC774 \uBB34\uAE30\uC5D0 \uBD99\uB294 \uB098\uBA38\uC9C0 \uC18D\uC131\uC774 \uC77C\uBC18\uC801\uC778 \uC218\uC900\uBCF4\uB2E4 \uB192\uAC8C \uBD99\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4."},{id:21,name:"Melted Heart of Selig",nameKo:"\uC140\uB9AC\uADF8\uC758 \uB179\uC740 \uC2EC\uC7A5",rarity:"mythic",type:"accessory",category:"\uBAA9\uAC78\uC774",favorites:48,tags:["\uC2E0\uD654 \uACE0\uC720","\uBAA9\uAC78\uC774"],stats:[{name:"\uBAA8\uB4E0 \uC6D0\uC18C\uC5D0 \uB300\uD55C \uCD5C\uB300 \uC800\uD56D",value:"+3.0%",type:"resist"},{name:"\uBAA8\uB4E0 \uC6D0\uC18C \uC800\uD56D",value:"+30.0%",type:"resist"},{name:"\uAC74\uAC15 \uC0C1\uD0DC\uC5D0\uC11C \uD53C\uD574 \uAC10\uC18C",value:"15.0%",type:"defense"},{name:"\uD589\uC6B4\uC758 \uC801\uC911 \uD655\uB960",value:"+15.0%",type:"special"},{name:"\uC774\uB3D9 \uC18D\uB3C4",value:"+25.0%",type:"special"},{name:"\uC790\uC6D0 \uC0DD\uC131\uB7C9",value:"15.0%",type:"special"}],uniqueEffect:"60\uC758 \uCD5C\uB300 \uC790\uC6D0\uC744 \uC5BB\uC2B5\uB2C8\uB2E4. \uD53C\uD574\uB97C \uBC1B\uC73C\uBA74 \uCD5C\uB300 \uC0DD\uBA85\uB825\uC758 1%\uC744 \uC783\uC744 \uB54C\uB9C8\uB2E4 75%\uB9CC\uD07C\uC758 \uD53C\uD574\uB97C 2 \uC790\uC6D0\uC73C\uB85C \uB300\uC2E0 \uC783\uC2B5\uB2C8\uB2E4."},{id:43,name:"Andariel's Visage",nameKo:"\uC548\uB2E4\uB9AC\uC5D8\uC758 \uB450\uAC1C\uACE8",rarity:"mythic",type:"armor",category:"\uD22C\uAD6C",favorites:10,tags:["\uC2E0\uD654 \uACE0\uC720","\uD22C\uAD6C"],stats:[{name:"\uB3C5 \uC800\uD56D",value:"+666.0%",type:"resist"},{name:"\uACF5\uACA9 \uC18D\uB3C4",value:"+30.0%",type:"special"},{name:"\uBAA8\uB4E0 \uB2A5\uB825\uCE58",value:"+110",type:"special"},{name:"\uC801\uC911 \uC2DC \uC0DD\uBA85\uB825 \uD68C\uBCF5",value:"+86",type:"lifesteal"},{name:"\uCD5C\uB300 \uB3C5 \uC800\uD56D",value:"+10%",type:"resist"}],uniqueEffect:"\uD589\uC6B4\uC758 \uC801\uC911: \uCD5C\uB300 20% \uD655\uB960\uB85C \uB3C5\uBC1C\uC744 \uBC1C\uB3D9\uD558\uC5EC \uBC94\uC704 \uB0B4\uC758 \uC801\uB4E4\uC5D0\uAC8C 5\uCD08\uC5D0 \uAC78\uCCD0 6,000\uC758 \uC911\uB3C5 \uD53C\uD574\uB97C \uC90D\uB2C8\uB2E4."},{id:44,name:"Harlequin Crest",nameKo:"\uD560\uB9AC\uD038 \uAD00\uBAA8",rarity:"mythic",type:"armor",category:"\uD22C\uAD6C",favorites:88,tags:["\uC2E0\uD654 \uACE0\uC720","\uD22C\uAD6C"],stats:[{name:"\uC7AC\uC0AC\uC6A9 \uB300\uAE30\uC2DC\uAC04 \uAC10\uC18C",value:"20.0%",type:"special"},{name:"\uCD5C\uB300 \uC0DD\uBA85\uB825",value:"800",type:"vital"},{name:"\uCD5C\uB300 \uC790\uC6D0",value:"+18",type:"special"},{name:"\uBC29\uC5B4\uB3C4",value:"+350",type:"defense"}],uniqueEffect:"20%\uC758 \uD53C\uD574 \uAC10\uC18C\uB97C \uC5BB\uC2B5\uB2C8\uB2E4. \uB610\uD55C \uBAA8\uB4E0 \uAE30\uC220 \uB4F1\uAE09\uC774 +4 \uC0C1\uC2B9\uD569\uB2C8\uB2E4."},{id:53,name:"Ring of Starless Skies",nameKo:"\uBCC4 \uC5C6\uB294 \uD558\uB298\uC758 \uBC18\uC9C0",rarity:"mythic",type:"accessory",category:"\uBC18\uC9C0",favorites:21,tags:["\uC2E0\uD654 \uACE0\uC720","\uBC18\uC9C0"],stats:[{name:"\uBAA8\uB4E0 \uC6D0\uC18C \uC800\uD56D",value:"+12.5%",type:"resist"},{name:"\uBAA8\uB4E0 \uC6D0\uC18C \uC800\uD56D",value:"+12.5%",type:"resist"},{name:"\uACF5\uACA9 \uC18D\uB3C4",value:"+17.5%",type:"special"},{name:"\uADF9\uB300\uD654 \uD655\uB960",value:"+12.5%",type:"critical"},{name:"\uD589\uC6B4\uC758 \uC801\uC911 \uD655\uB960",value:"+12.5%",type:"special"},{name:"\uD575\uC2EC \uAE30\uC220",value:"+2",type:"special"}],uniqueEffect:"\uC8FC \uC790\uC6D0\uC744 \uC18C\uBAA8\uD558\uBA74 3\uCD08 \uB3D9\uC548 10%\uB9CC\uD07C, \uCD5C\uB300 50%\uAE4C\uC9C0 \uAE30\uC220\uC758 \uC790\uC6D0 \uC18C\uBAA8\uB7C9\uC774 \uAC10\uC18C\uD558\uACE0 \uC8FC\uB294 \uD53C\uD574\uAC00 \uC99D\uAC00\uD569\uB2C8\uB2E4."},{id:100,name:"Common Sword",nameKo:"\uC77C\uBC18 \uAC80",rarity:"common",type:"weapon",category:"\uAC80",attackSpeed:"\uBCF4\uD1B5",attacksPerSecond:1,stats:[{name:"\uACF5\uACA9\uB825",value:"+10",type:"damage"},{name:"\uD798",value:"+5",type:"special"}]},{id:101,name:"Uncommon Axe",nameKo:"\uD76C\uADC0\uD558\uC9C0 \uC54A\uC740 \uB3C4\uB07C",rarity:"uncommon",type:"weapon",category:"\uB3C4\uB07C",attackSpeed:"\uBE60\uB984",attacksPerSecond:1.1,stats:[{name:"\uACF5\uACA9\uB825",value:"+25",type:"damage"},{name:"\uADF9\uB300\uD654 \uD655\uB960",value:"+5%",type:"critical"},{name:"\uD798",value:"+10",type:"special"}]},{id:102,name:"Rare Dagger",nameKo:"\uD76C\uADC0\uD55C \uB2E8\uAC80",rarity:"rare",type:"weapon",category:"\uB2E8\uAC80",attackSpeed:"\uB9E4\uC6B0 \uBE60\uB984",attacksPerSecond:1.3,stats:[{name:"\uACF5\uACA9\uB825",value:"+45",type:"damage"},{name:"\uADF9\uB300\uD654 \uD53C\uD574",value:"+50%",type:"critical"},{name:"\uBBFC\uCCA9",value:"+25",type:"special"},{name:"\uC0DD\uBA85\uB825 \uD761\uC218",value:"+3%",type:"lifesteal"}]},{id:103,name:"Epic Staff",nameKo:"\uC11C\uC0AC\uC2DC \uC9C0\uD321\uC774",rarity:"epic",type:"weapon",category:"\uC9C0\uD321\uC774",attackSpeed:"\uB290\uB9BC",attacksPerSecond:.9,stats:[{name:"\uACF5\uACA9\uB825",value:"+80",type:"damage"},{name:"\uADF9\uB300\uD654 \uD53C\uD574",value:"+100%",type:"critical"},{name:"\uC9C0\uB2A5",value:"+50",type:"special"},{name:"\uBAA8\uB4E0 \uC6D0\uC18C \uC800\uD56D",value:"+15%",type:"resist"},{name:"\uB9C8\uB098 \uC7AC\uC0DD",value:"+5/\uCD08",type:"manasteal"}]}];var Be=class r{_inventory=T([]);inventory=this._inventory.asReadonly();_gold=T(0);_gem=T(0);_crystal=T(0);_ticket=T(0);gold=this._gold.asReadonly();gem=this._gem.asReadonly();crystal=this._crystal.asReadonly();ticket=this._ticket.asReadonly();_equipment=T({});equipment=this._equipment.asReadonly();_shopItems=T([]);shopItems=this._shopItems.asReadonly();_inventoryFilter=T("all");_inventorySortBy=T("name");inventoryFilter=this._inventoryFilter.asReadonly();inventorySortBy=this._inventorySortBy.asReadonly();filteredInventory=B(()=>{let t=this.inventory(),e=this.inventoryFilter();return e==="all"?t:t.filter(n=>e==="weapon"?n.type==="weapon":e==="armor"?["armor","helmet","gloves","boots"].includes(n.type):e==="accessory"?["belt","amulet","ring","accessory"].includes(n.type):e==="consumable"?n.type==="consumable":e==="material"?n.type==="material":!0)});sortedInventory=B(()=>{let t=this.filteredInventory(),e=this.inventorySortBy();return[...t].sort((n,a)=>{if(e==="name")return n.name.localeCompare(a.name);if(e==="rarity"){let s={common:0,uncommon:1,rare:2,epic:3,legendary:4,unique:5,mythic:6};return s[a.rarity]-s[n.rarity]}return e==="type"?n.type.localeCompare(a.type):0})});inventoryCount=B(()=>this.inventory().length);equipmentSlotsFilled=B(()=>{let t=this.equipment();return Object.values(t).filter(e=>e!==void 0).length});totalCurrency=B(()=>this.gold()+this.gem()+this.crystal()+this.ticket());hasWeaponEquipped=B(()=>!!this.equipment().weapon);hasArmorEquipped=B(()=>!!this.equipment().armor);inventoryValue=B(()=>this.inventory().reduce((t,e)=>t+(e.sellPrice||0)*e.quantity,0));setInventory(t){this._inventory.set(t)}addItem(t){this._inventory.update(e=>e.find(a=>a.id===t.id)?e.map(a=>a.id===t.id?I(k({},a),{quantity:a.quantity+t.quantity}):a):[...e,t])}removeItem(t,e=1){this._inventory.update(n=>n.map(a=>a.id===t?I(k({},a),{quantity:a.quantity-e}):a).filter(a=>a.quantity>0))}clearInventory(){this._inventory.set([])}updateItemQuantity(t,e){this._inventory.update(n=>n.map(a=>a.id===t?I(k({},a),{quantity:e}):a))}setGold(t){this._gold.set(Math.max(0,t))}addGold(t){this._gold.update(e=>Math.max(0,e+t))}spendGold(t){return this.gold()<t?!1:(this._gold.update(e=>e-t),!0)}setGem(t){this._gem.set(Math.max(0,t))}addGem(t){this._gem.update(e=>Math.max(0,e+t))}spendGem(t){return this.gem()<t?!1:(this._gem.update(e=>e-t),!0)}setCrystal(t){this._crystal.set(Math.max(0,t))}addCrystal(t){this._crystal.update(e=>Math.max(0,e+t))}setTicket(t){this._ticket.set(Math.max(0,t))}addTicket(t){this._ticket.update(e=>Math.max(0,e+t))}setEquipment(t){this._equipment.set(t)}equipItem(t,e){this._equipment.update(n=>I(k({},n),{[t]:e}))}unequipItem(t){this._equipment.update(e=>{let n=k({},e);return delete n[t],n})}getEquippedItem(t){return this.equipment()[t]}setFilter(t){this._inventoryFilter.set(t)}setSortBy(t){this._inventorySortBy.set(t)}setShopItems(t){this._shopItems.set(t)}buyShopItem(t){if(!this.spendGold(t.price))return!1;let e={id:t.id,name:t.name,description:t.description,type:t.type,quantity:1,rarity:t.rarity,buyPrice:t.price,stats:t.stats};return this.addItem(e),this._shopItems.update(n=>n.map(a=>a.id===t.id?I(k({},a),{stock:a.stock-1}):a).filter(a=>a.stock>0)),!0}reset(){this._inventory.set([]),this._gold.set(0),this._gem.set(0),this._crystal.set(0),this._ticket.set(0),this._equipment.set({}),this._inventoryFilter.set("all"),this._inventorySortBy.set("name")}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var mt=class{constructor(t){this.component=t}inventoryStateService=H(Be);get inventory(){return this.inventoryStateService.inventory()}get gold(){return this.inventoryStateService.gold()}get gem(){return this.inventoryStateService.gem()}get crystal(){return this.inventoryStateService.crystal()}get ticket(){return this.inventoryStateService.ticket()}get equipment(){return this.inventoryStateService.equipment()}addToInventory(t,e){let n=this.component,a=this.inventory.find(s=>s.id===t);if(a)this.inventoryStateService.updateItemQuantity(t,a.quantity+e);else{let s={id:t,name:t,type:"misc",rarity:"common",quantity:e};this.inventoryStateService.addItem(s)}this.saveInventory()}removeFromInventory(t,e){let n=this.component,a=this.inventory.find(s=>s.id===t);if(!a)return!1;if(a.quantity&&a.quantity>e)a.quantity-=e;else{let s=this.inventory.indexOf(a);this.inventory.splice(s,1)}return this.saveInventory(),!0}useItem(t){let e=this.component;if(t.type==="consumable"){if(this.applyItemEffect(t),t.quantity&&t.quantity>1)t.quantity--;else{let n=this.inventory.indexOf(t);this.inventory.splice(n,1)}this.saveInventory()}}applyItemEffect(t){let e=this.component;t.stats?.hp&&(e.playerCharacter.hp=Math.min(e.playerCharacter.hp+t.stats.hp,e.playerCharacter.maxHp),e.notification.show(`HP\uAC00 ${t.stats.hp} \uD68C\uBCF5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)),t.stats?.mp&&(e.playerCharacter.mp=Math.min(e.playerCharacter.mp+t.stats.mp,e.playerCharacter.maxMp),e.notification.show(`MP\uAC00 ${t.stats.mp} \uD68C\uBCF5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)),t.stats?.attack&&(e.playerCharacter.attack+=t.stats.attack),t.stats?.defense&&(e.playerCharacter.defense+=t.stats.defense)}equipItem(t){let e=this.component,n=this.inventory[t];if(!n||!this.canEquipItem(n))return;let a=this.getEquipmentSlot(n.type);if(!a){e.notification.show("\uCC29\uC6A9\uD560 \uC218 \uC5C6\uB294 \uC544\uC774\uD15C\uC785\uB2C8\uB2E4.");return}this.equipment[a]&&this.unequipItem(a),this.inventoryStateService.equipItem(a,n),this.inventoryStateService.removeItem(n.id,1),this.applyEquipmentStats(n,!0),e.notification.show(`${n.name}\uC744(\uB97C) \uCC29\uC6A9\uD588\uC2B5\uB2C8\uB2E4.`),this.saveInventory()}unequipItem(t){let e=this.component,n=this.equipment[t];if(!n)return;this.applyEquipmentStats(n,!1);let a=n;this.inventoryStateService.addItem(a),this.inventoryStateService.unequipItem(t),e.notification.show(`${n.name}\uC744(\uB97C) \uD574\uC81C\uD588\uC2B5\uB2C8\uB2E4.`),this.saveInventory()}canEquipItem(t){return["weapon","armor","helmet","gloves","boots","belt","amulet","ring"].includes(t.type)}getEquipmentSlot(t){return{weapon:"weapon",armor:"armor",helmet:"helmet",gloves:"gloves",boots:"boots",belt:"belt",amulet:"amulet",ring:"ring1"}[t]||null}applyEquipmentStats(t,e){let n=this.component,a=e?1:-1;t.baseStats&&(t.baseStats.attack&&(n.playerCharacter.attack=(n.playerCharacter.attack||0)+t.baseStats.attack*a),t.baseStats.defense&&(n.playerCharacter.defense=(n.playerCharacter.defense||0)+t.baseStats.defense*a),t.baseStats.hp&&(n.playerCharacter.maxHp=(n.playerCharacter.maxHp||0)+t.baseStats.hp*a),t.baseStats.mp&&(n.playerCharacter.maxMp=(n.playerCharacter.maxMp||0)+t.baseStats.mp*a))}showItemDetails(t){let e=this.component;e.selectedItem=t,e.showItemDetailModal=!0}compareItemWithEquipped(t){let e=this.component,n=this.getEquipmentSlot(t.type);if(!n){e.notification.show("\uC7A5\uBE44 \uC544\uC774\uD15C\uC774 \uC544\uB2D9\uB2C8\uB2E4.");return}let a=this.equipment[n];e.comparisonItem=t,e.comparisonEquipped=a,e.showComparisonModal=!0}sortInventory(t="type"){let e=this.component;this.inventory.sort((n,a)=>{switch(t){case"name":return n.name.localeCompare(a.name);case"type":return n.type.localeCompare(a.type);case"rarity":let s=["common","uncommon","rare","epic","legendary","unique","mythic"];return s.indexOf(a.rarity)-s.indexOf(n.rarity);case"level":let m=n.itemLevel||n.requiredLevel||0;return(a.itemLevel||a.requiredLevel||0)-m;default:return 0}})}filterInventory(t){let e=this.component;return t==="all"?this.inventory:this.inventory.filter(n=>n.type===t)}getItemsByType(t){return this.filterInventory(t)}getFilteredAndSortedInventory(){let t=this.component,e=this.inventory;return t.inventoryFilter!=="all"&&(e=e.filter(n=>n.type===t.inventoryFilter)),this.sortInventory(t.inventorySortBy),e}saveInventory(){let t=this.component;if(t.selectedNovel?.id){let e=`novel_${t.selectedNovel.id}_inventory`;localStorage.setItem(e,JSON.stringify(this.inventory))}}debugInventory(){let t=this.component}buyItemFromShop(t,e){return O(this,null,function*(){let n=this.component;if(e&&e.stopPropagation(),this.gold<t.price){n.notification.show("\uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4.");return}if(t.stock!==void 0&&t.stock<=0){n.notification.show("\uC7AC\uACE0\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4.");return}if(!this.inventoryStateService.spendGold(t.price)){n.notification.show("\uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4.");return}t.stock!==void 0&&t.stock--;let a={id:`${t.id}_${Date.now()}`,name:t.name,description:t.description,type:t.type,quantity:1,buyPrice:t.price,sellPrice:Math.floor(t.price*.5),rarity:t.rarity,stats:t.stats||{}};this.inventoryStateService.addItem(a),n.notification.show(`${t.name}\uC744(\uB97C) \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4.`),this.saveInventory(),n.gameStarted&&n.currentGameId&&n.saveGame("autosave")})}sellItem(t){let e=this.component,n=Math.floor((t.sellPrice||t.buyPrice||0)*.5);this.inventoryStateService.addGold(n),this.removeFromInventory(t.id,1),e.notification.show(`${t.name}\uC744(\uB97C) ${n} \uACE8\uB4DC\uC5D0 \uD310\uB9E4\uD588\uC2B5\uB2C8\uB2E4.`)}equipItemToSlot(t,e){let n=this.component;this.equipment[e]&&this.unequipItem(e),this.equipment[e]=t;let s=this.inventory.indexOf(t);s>=0&&this.inventory.splice(s,1),this.applyEquipmentStats(t,!0),n.notification.show(`${t.name}\uC744(\uB97C) ${e}\uC5D0 \uCC29\uC6A9\uD588\uC2B5\uB2C8\uB2E4.`),this.saveInventory()}autoSortInventory(){this.sortInventory("type")}getEquippedItem(t){let e=this.component;return this.equipment[t]||null}};var Te=class r{_inBattle=T(!1);_battleEnded=T(!1);_battleVictory=T(!1);_battleTurn=T("player");inBattle=this._inBattle.asReadonly();battleEnded=this._battleEnded.asReadonly();battleVictory=this._battleVictory.asReadonly();battleTurn=this._battleTurn.asReadonly();_battleEnemy=T(null);_playerBattleStats=T(null);battleEnemy=this._battleEnemy.asReadonly();playerBattleStats=this._playerBattleStats.asReadonly();_battleLog=T([]);battleLog=this._battleLog.asReadonly();_battleSkills=T([]);_battleItems=T([]);battleSkills=this._battleSkills.asReadonly();battleItems=this._battleItems.asReadonly();_playerStatusEffects=T([]);_enemyStatusEffects=T([]);playerStatusEffects=this._playerStatusEffects.asReadonly();enemyStatusEffects=this._enemyStatusEffects.asReadonly();_currentBattleState=T(null);currentBattleState=this._currentBattleState.asReadonly();_martialBattleState=T(null);martialBattleState=this._martialBattleState.asReadonly();_playerTakingDamage=T(!1);_enemyTakingDamage=T(!1);playerTakingDamage=this._playerTakingDamage.asReadonly();enemyTakingDamage=this._enemyTakingDamage.asReadonly();playerHpPercentage=B(()=>{let t=this.playerBattleStats();return t?t.hp/t.maxHp*100:0});playerMpPercentage=B(()=>{let t=this.playerBattleStats();return t?t.mp/t.maxMp*100:0});enemyHpPercentage=B(()=>{let t=this.battleEnemy();return t?t.hp/t.maxHp*100:0});isPlayerTurn=B(()=>this.battleTurn()==="player");isEnemyTurn=B(()=>this.battleTurn()==="enemy");canUseBattleSkills=B(()=>this.inBattle()&&this.isPlayerTurn()&&!this.battleEnded()&&this.battleSkills().length>0);canUseBattleItems=B(()=>this.inBattle()&&this.isPlayerTurn()&&!this.battleEnded()&&this.battleItems().length>0);hasActiveStatusEffects=B(()=>this.playerStatusEffects().length>0||this.enemyStatusEffects().length>0);isBattleActive=B(()=>this.inBattle()&&!this.battleEnded());startBattle(t){this._inBattle.set(!0),this._battleEnded.set(!1),this._battleVictory.set(!1),this._battleTurn.set("player"),this._battleEnemy.set(t),this._battleLog.set([`\uC804\uD22C \uC2DC\uC791: ${t.name}\uC640(\uACFC) \uC870\uC6B0\uD588\uC2B5\uB2C8\uB2E4!`]),this._playerStatusEffects.set([]),this._enemyStatusEffects.set([])}endBattle(t){this._battleEnded.set(!0),this._battleVictory.set(t),this.addBattleLog(t?"\u2B50 \uC2B9\uB9AC!":"\u{1F480} \uD328\uBC30...")}resetBattle(){this._inBattle.set(!1),this._battleEnded.set(!1),this._battleVictory.set(!1),this._battleTurn.set("player"),this._battleEnemy.set(null),this._battleLog.set([]),this._battleSkills.set([]),this._battleItems.set([]),this._playerStatusEffects.set([]),this._enemyStatusEffects.set([]),this._currentBattleState.set(null),this._martialBattleState.set(null),this._playerTakingDamage.set(!1),this._enemyTakingDamage.set(!1)}switchTurn(){this._battleTurn.update(t=>t==="player"?"enemy":"player")}setPlayerTurn(){this._battleTurn.set("player")}setEnemyTurn(){this._battleTurn.set("enemy")}addBattleLog(t){this._battleLog.update(e=>[...e,t])}clearBattleLog(){this._battleLog.set([])}updatePlayerStats(t){this._playerBattleStats.update(e=>e?k(k({},e),t):null)}setPlayerStats(t){this._playerBattleStats.set(t)}damagePlayer(t){this._playerBattleStats.update(e=>e?I(k({},e),{hp:Math.max(0,e.hp-t)}):null),this._playerTakingDamage.set(!0),setTimeout(()=>this._playerTakingDamage.set(!1),500)}healPlayer(t){this._playerBattleStats.update(e=>e?I(k({},e),{hp:Math.min(e.maxHp,e.hp+t)}):null)}restoreMp(t){this._playerBattleStats.update(e=>e?I(k({},e),{mp:Math.min(e.maxMp,e.mp+t)}):null)}damageEnemy(t){this._battleEnemy.update(e=>e?I(k({},e),{hp:Math.max(0,e.hp-t)}):null),this._enemyTakingDamage.set(!0),setTimeout(()=>this._enemyTakingDamage.set(!1),500)}setBattleSkills(t){this._battleSkills.set(t)}addBattleSkill(t){this._battleSkills.update(e=>[...e,t])}setBattleItems(t){this._battleItems.set(t)}useBattleItem(t){this._battleItems.update(e=>e.map(n=>n.id===t?I(k({},n),{quantity:n.quantity-1}):n).filter(n=>n.quantity>0))}addPlayerStatusEffect(t){this._playerStatusEffects.update(e=>[...e,t])}addEnemyStatusEffect(t){this._enemyStatusEffects.update(e=>[...e,t])}removePlayerStatusEffect(t){this._playerStatusEffects.update(e=>e.filter(n=>n.type!==t))}removeEnemyStatusEffect(t){this._enemyStatusEffects.update(e=>e.filter(n=>n.type!==t))}updateStatusEffectDuration(){this._playerStatusEffects.update(t=>t.map(e=>I(k({},e),{duration:e.duration-1})).filter(e=>e.duration>0)),this._enemyStatusEffects.update(t=>t.map(e=>I(k({},e),{duration:e.duration-1})).filter(e=>e.duration>0))}setBattleState(t){this._currentBattleState.set(t)}setMartialBattleState(t){this._martialBattleState.set(t)}battleCallbacks;setBattleCallbacks(t){this.battleCallbacks=t}triggerBattleWin(t,e){this.battleCallbacks?.onBattleWin?.(t,e)}triggerBattleLose(){this.battleCallbacks?.onBattleLose?.()}triggerBattleEnd(t){this.battleCallbacks?.onBattleEnd?.(t)}triggerLogUpdate(){this.battleCallbacks?.onLogUpdate?.()}triggerEnemyDamage(){this.battleCallbacks?.onEnemyDamage?.()}triggerPlayerDamage(){this.battleCallbacks?.onPlayerDamage?.()}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var qe=class r{executeAttackSkill(t,e,n,a){let s=e.attack*(t.damageMultiplier||1);if(Math.random()>(t.hitRate||.9))return{damage:0,isCritical:!1,isMiss:!0,remainingEnemyHp:n};let P=Math.random()<(t.criticalRate||0),x=Math.max(0,1-a*.01),w=Math.floor(s*(P?1.5:1)*x),g=Math.max(0,n-w);return{damage:w,isCritical:P,isMiss:!1,remainingEnemyHp:g,statusEffect:t.statusEffect}}executeDefenseSkill(t){return{defenseBoost:t.defenseBoost||.5,duration:t.duration||1}}executeHealSkill(t,e,n){let a=Math.floor(n*(t.healAmount||.3)),s=Math.min(a,n-e);return{healAmount:s,newHp:e+s}}executeBuffSkill(t){return{statusEffect:t.statusEffect}}executeDebuffSkill(t){return{statusEffect:t.statusEffect}}executeNormalAttack(t,e,n){let a=Math.max(0,1-n*.01),s=Math.floor(t*a),m=Math.max(0,e-s);return{damage:s,remainingEnemyHp:m}}applyStatusEffect(t,e){return[...t.filter(a=>a.type!==e.type),k({},e)]}decreaseStatusEffectDurations(t){return t.map(e=>I(k({},e),{duration:e.duration-1})).filter(e=>e.duration>0)}calculateStatusEffectDamage(t){return t.reduce((e,n)=>n.type==="poison"||n.type==="burn"?e+n.value:e,0)}calculateStatusEffectModifiers(t){let e=1,n=1,a=1;return t.forEach(s=>{switch(s.type){case"strengthen":e+=s.value;break;case"weaken":e-=s.value;break;case"shield":n+=s.value;break;case"speed":a+=s.value;break;case"slow":case"stun":a-=s.value;break}}),{attackModifier:Math.max(.1,e),defenseModifier:Math.max(.1,n),speedModifier:Math.max(.1,a)}}canUseSkill(t,e){return t.currentCooldown&&t.currentCooldown>0?{canUse:!1,reason:`\uC2A4\uD0AC\uC774 \uCFE8\uB2E4\uC6B4 \uC911\uC785\uB2C8\uB2E4. (${t.currentCooldown}\uD134 \uB0A8\uC74C)`}:e<t.mpCost?{canUse:!1,reason:`MP\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4. (\uD544\uC694: ${t.mpCost}, \uD604\uC7AC: ${e})`}:{canUse:!0}}startSkillCooldown(t){return I(k({},t),{currentCooldown:t.cooldown})}decreaseAllCooldowns(t){return t.map(e=>I(k({},e),{currentCooldown:e.currentCooldown?Math.max(0,e.currentCooldown-1):0}))}isBattleEnded(t,e){return t<=0&&e<=0?{isEnded:!0,result:"draw"}:t<=0?{isEnded:!0,result:"defeat"}:e<=0?{isEnded:!0,result:"victory"}:{isEnded:!1}}calculateRewards(t,e,n=!1){let a=t-e,s=50+t*10,m=20+t*5,C=a>0?1+a*.1:1,P=n?3:1;return{exp:Math.floor(s*C*P),gold:Math.floor(m*P)}}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ae=class r{createLogEntry(t,e,n,a){return k({turn:t,actor:e,action:n,timestamp:new Date},a)}formatBattleLog(t){let n=`${t.actor==="player"?"\u{1F464}":"\u{1F479}"} ${t.action}`;return t.isCritical&&(n+=" \u26A1\uD06C\uB9AC\uD2F0\uCEEC!\u26A1"),t.isMiss&&(n+=" \u{1F4A8}Miss!"),n}formatBattleLogHTML(t){let n=`<div class="battle-log-entry ${t.actor==="player"?"player-action":"enemy-action"}">`,a=t.actor==="player"?"\u{1F464}":"\u{1F479}";return n+=`<span class="actor-icon">${a}</span>`,n+=`<span class="action-text">${t.action}</span>`,t.damage&&(n+=`<span class="damage-text">-${t.damage}</span>`),t.heal&&(n+=`<span class="heal-text">+${t.heal}</span>`),t.isCritical&&(n+='<span class="critical-badge">\u26A1\uD06C\uB9AC\uD2F0\uCEEC\u26A1</span>'),t.isMiss&&(n+='<span class="miss-badge">\u{1F4A8}Miss</span>'),n+="</div>",n}createAttackLog(t,e,n,a,s,m){let C="";return s?C=`${e}\uC774(\uAC00) \uBE57\uB098\uAC14\uB2E4!`:a?C=`${e}! ${n} \uD06C\uB9AC\uD2F0\uCEEC \uB370\uBBF8\uC9C0!`:C=`${e}! ${n} \uB370\uBBF8\uC9C0!`,this.createLogEntry(m,t,C,{damage:s?0:n,isCritical:a,isMiss:s})}createHealLog(t,e,n,a){return this.createLogEntry(a,t,`${e}! HP ${n} \uD68C\uBCF5!`,{heal:n})}createStatusEffectLog(t,e,n,a){let s=n?"\u2728":"\u{1F53B}";return this.createLogEntry(a,t,`${s} ${e} \uD6A8\uACFC \uBC1C\uB3D9!`,{effect:e})}createStatusDamageLog(t,e,n,a){let m={poison:"\u2620\uFE0F",burn:"\u{1F525}",bleeding:"\u{1FA78}"}[e]||"\u{1F4A2}";return this.createLogEntry(a,t,`${m} ${e}\uB85C ${n} \uB370\uBBF8\uC9C0 \uBC1B\uC74C!`,{damage:n,effect:e})}createDefenseLog(t,e,n,a){return this.createLogEntry(a,t,`\u{1F6E1}\uFE0F ${e}! \uBC29\uC5B4\uB825 ${n*100}% \uC99D\uAC00!`)}createItemUseLog(t,e,n){return this.createLogEntry(n,"player",`\u{1F48A} ${t} \uC0AC\uC6A9! ${e}`)}createTurnStartLog(t){return this.createLogEntry(t,"player",`\u2501\u2501\u2501 \uD134 ${t} \uC2DC\uC791 \u2501\u2501\u2501`)}createBattleEndLog(t,e){let n={victory:"\u{1F389} \uC2B9\uB9AC! \uC801\uC744 \uCC98\uCE58\uD588\uC2B5\uB2C8\uB2E4!",defeat:"\u{1F480} \uD328\uBC30... \uC804\uD22C\uC5D0\uC11C \uC4F0\uB7EC\uC84C\uC2B5\uB2C8\uB2E4.",draw:"\u{1F91D} \uBB34\uC2B9\uBD80! \uC591\uCE21 \uBAA8\uB450 \uC4F0\uB7EC\uC84C\uC2B5\uB2C8\uB2E4."};return this.createLogEntry(e,"player",n[t])}filterLogsByActor(t,e){return t.filter(n=>n.actor===e)}filterLogsByTurn(t,e){return t.filter(n=>n.turn===e)}generateBattleStats(t){let e=t.filter(a=>a.actor==="player"),n=t.filter(a=>a.actor==="enemy");return{totalDamageDealt:e.reduce((a,s)=>a+(s.damage||0),0),totalDamageTaken:n.reduce((a,s)=>a+(s.damage||0),0),totalHealing:e.reduce((a,s)=>a+(s.heal||0),0),criticalHits:e.filter(a=>a.isCritical).length,missedAttacks:e.filter(a=>a.isMiss).length,totalTurns:Math.max(...t.map(a=>a.turn))}}exportLogsAsText(t){return t.map(e=>{let n=e.timestamp.toLocaleTimeString(),a=e.actor==="player"?"Player":"Enemy";return`[Turn ${e.turn}] [${n}] ${a}: ${e.action}`}).join(`
`)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var _t=class r{constructor(t,e,n){this.notification=t;this.battleService=e;this.battleLogService=n}battleStateService=H(Te);get inBattle(){return this.battleStateService.inBattle()}get battleEnded(){return this.battleStateService.battleEnded()}get battleVictory(){return this.battleStateService.battleVictory()}get battleTurn(){return this.battleStateService.battleTurn()}get battleLog(){return this.battleStateService.battleLog()}get battleEnemy(){return this.battleStateService.battleEnemy()}playerCharacter=null;battleSkills=[];battleItems=[];defaultBattleSkills=[];playerDefenseBonus=0;playerTakingDamage=!1;enemyTakingDamage=!1;currentBattleState=null;martialBattleState=null;learnedMartialSkills=[];playerInternalPower=null;inventory=[];gold=0;onBattleWin;onBattleLose;onBattleEnd;onLogUpdate;onEnemyDamage;onPlayerDamage;setPlayerCharacter(t){this.playerCharacter=t}setCallbacks(t){this.onBattleWin=t.onBattleWin,this.onBattleLose=t.onBattleLose,this.onBattleEnd=t.onBattleEnd,this.onLogUpdate=t.onLogUpdate,this.onEnemyDamage=t.onEnemyDamage,this.onPlayerDamage=t.onPlayerDamage}startBattle(){let t={name:"\uC0B0\uC801",maxHp:80,hp:80,mp:40,maxMp:40,internalPower:30,maxInternalPower:30,attack:15,defense:8};this.battleStateService.startBattle(t),this.battleStateService.addBattleLog("\u2694\uFE0F \uC804\uD22C\uAC00 \uC2DC\uC791\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),this.battleStateService.addBattleLog(`\uC801: ${t.name} (HP: ${t.hp}/${t.maxHp})`),this.notifyLogUpdate()}startBattleFromChoice(t,e){t(["\u2694\uFE0F \uC804\uD22C\uAC00 \uC2DC\uC791\uB429\uB2C8\uB2E4!","\uC801\uC774 \uB2F9\uC2E0\uC744 \uBC1C\uACAC\uD558\uACE0 \uACF5\uACA9 \uC790\uC138\uB97C \uCDE8\uD588\uC2B5\uB2C8\uB2E4."]),this.initializeBattle(),this.battleStateService.startBattle(this.battleEnemy||{name:"",hp:0,maxHp:0,attack:0,defense:0}),this.battleStateService.setPlayerTurn(),this.battleStateService.clearBattleLog(),this.battleStateService.addBattleLog("\u2694\uFE0F \uC804\uD22C \uC2DC\uC791!"),this.playerDefenseBonus=0,this.generateRandomEnemy(),e(),setTimeout(()=>this.autoBattle(),1e3)}generateRandomEnemy(){let t=[{name:"\uACE0\uBE14\uB9B0",hp:50,mp:20,internalPower:15,attack:8,defense:3},{name:"\uC624\uD06C",hp:80,mp:35,internalPower:30,attack:12,defense:5},{name:"\uB291\uB300",hp:60,mp:15,internalPower:10,attack:10,defense:2},{name:"\uD574\uACE8 \uC804\uC0AC",hp:70,mp:25,internalPower:20,attack:11,defense:4},{name:"\uB9C8\uBC95\uC0AC",hp:45,mp:50,internalPower:40,attack:15,defense:2},{name:"\uB4DC\uB798\uACE4",hp:150,mp:80,internalPower:100,attack:20,defense:10}],e=t[Math.floor(Math.random()*t.length)],n={name:e.name,hp:e.hp,maxHp:e.hp,mp:e.mp,maxMp:e.mp,internalPower:e.internalPower,maxInternalPower:e.internalPower,attack:e.attack,defense:e.defense};this.inBattle&&this.battleStateService.startBattle(n),this.battleStateService.addBattleLog(`${n.name}\uC774(\uAC00) \uB098\uD0C0\uB0AC\uB2E4!`),this.notifyLogUpdate()}initializeBattle(){this.playerDefenseBonus=0,this.learnedMartialSkills.length>0&&this.battleEnemy&&(this.martialBattleState={turn:1,playerHp:this.playerCharacter?.hp||100,playerMp:this.playerCharacter?.mp||100,enemyHp:this.battleEnemy.hp,playerStatusEffects:[],enemyStatusEffects:[],playerDefending:!1,combatLog:[],isPlayerTurn:!0,playerInternalPower:this.playerInternalPower?.current||0,playerMaxInternalPower:this.playerInternalPower?.max||100,enemyInternalPower:100,enemyMaxInternalPower:100,skillCooldowns:{},lastSkillUsed:void 0,comboCounter:0,playerRealm:this.playerInternalPower?.realm||"\uCD08\uB958",enemyRealm:"\uCD08\uB958"})}autoBattle(){this.battleEnded||this.battleTurn==="player"&&this.playerAutoAction()}playerAutoAction(){if(this.battleEnded||!this.playerCharacter)return;if(this.playerCharacter.hp/this.playerCharacter.maxHp*100<=30&&this.hasPotion()){this.usePotion();return}if(this.playerCharacter.mp>=10&&Math.random()<.3){this.playerSkill();return}if(Math.random()<.2){this.playerDefend();return}this.playerAttack()}hasPotion(){return this.inventory.some(t=>t.id==="potion"||t.name?.includes("\uD3EC\uC158"))}usePotion(){if(!this.playerCharacter)return;let t=this.inventory.findIndex(n=>n.id==="potion"||n.name?.includes("\uD3EC\uC158"));if(t===-1)return;let e=30;this.playerCharacter.hp=Math.min(this.playerCharacter.maxHp,this.playerCharacter.hp+e),this.inventory.splice(t,1),this.battleStateService.addBattleLog(`\u{1F48A} \uD3EC\uC158 \uC0AC\uC6A9! HP ${e} \uD68C\uBCF5!`),this.notifyLogUpdate(),this.battleStateService.setEnemyTurn(),setTimeout(()=>this.enemyTurn(),500)}playerDefend(){this.battleTurn!=="player"||this.battleEnded||(this.playerDefenseBonus=.5,this.battleStateService.addBattleLog("\u{1F6E1}\uFE0F \uBC29\uC5B4 \uC790\uC138\uB97C \uCDE8\uD588\uB2E4!"),this.notifyLogUpdate(),this.battleStateService.setEnemyTurn(),setTimeout(()=>this.enemyTurn(),500))}playerAttack(){if(this.battleTurn!=="player"||this.battleEnded||!this.playerCharacter||!this.battleEnemy)return;let t=Math.max(1,this.playerCharacter.attack-this.battleEnemy.defense);this.triggerEnemyDamage(),this.battleStateService.damageEnemy(t),this.battleStateService.addBattleLog(`\uB2F9\uC2E0\uC740 ${this.battleEnemy.name}\uC5D0\uAC8C ${t} \uD53C\uD574\uB97C \uC785\uD614\uB2E4!`),this.notifyLogUpdate(),this.battleEnemy.hp<=0?this.winBattle():(this.battleStateService.setEnemyTurn(),setTimeout(()=>this.enemyTurn(),500))}playerSkill(){if(this.battleTurn!=="player"||this.battleEnded||!this.playerCharacter||!this.battleEnemy||this.playerCharacter.mp<10)return;this.playerCharacter.mp-=10;let t=Math.max(1,Math.floor(this.playerCharacter.attack*1.5)-this.battleEnemy.defense);this.triggerEnemyDamage(),this.battleStateService.damageEnemy(t),this.battleStateService.addBattleLog(`\u2728 \uAC15\uB825\uD55C \uC2A4\uD0AC \uACF5\uACA9! ${this.battleEnemy.name}\uC5D0\uAC8C ${t} \uD53C\uD574\uB97C \uC785\uD614\uB2E4!`),this.notifyLogUpdate(),this.battleEnemy.hp<=0?this.winBattle():(this.battleStateService.setEnemyTurn(),setTimeout(()=>this.enemyTurn(),500))}enemyTurn(){if(this.battleEnded||!this.playerCharacter||!this.battleEnemy)return;let t=Math.max(1,this.battleEnemy.attack-Math.floor(this.playerCharacter.defense*(1+this.playerDefenseBonus))),e=Math.max(1,t);this.triggerPlayerDamage(),this.playerCharacter.hp=Math.max(0,this.playerCharacter.hp-e),this.battleStateService.addBattleLog(`${this.battleEnemy.name}\uC758 \uACF5\uACA9! ${e} \uD53C\uD574\uB97C \uC785\uC5C8\uB2E4!`),this.notifyLogUpdate(),this.playerDefenseBonus=0,this.playerCharacter.hp<=0?this.loseBattle():(this.battleStateService.setPlayerTurn(),setTimeout(()=>this.autoBattle(),800))}useMartialSkillInBattle(t){if(this.battleTurn!=="player"||this.battleEnded||!this.playerCharacter||!this.battleEnemy)return;let e=t.mpCost||20,n=t.baseDamage||50;if(this.playerCharacter.mp<e){this.notification.show("MP\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4!");return}if(this.playerInternalPower.current<t.requiredInternalPower){this.notification.show("\uB0B4\uB825\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4!");return}this.playerCharacter.mp-=e,this.playerInternalPower.current-=t.requiredInternalPower;let a=Math.floor(n*(1+this.playerInternalPower.current/100));this.battleStateService.damageEnemy(a),this.battleStateService.addBattleLog(`\u26A1 ${t.name}(${t.chineseName})! ${a} \uD53C\uD574!`),this.notifyLogUpdate(),this.battleEnemy.hp<=0?this.winBattle():(this.battleStateService.setEnemyTurn(),setTimeout(()=>this.enemyTurn(),500))}winBattle(){if(!this.battleEnemy)return;this.battleStateService.endBattle(this.battleVictory);let t=Math.floor(this.battleEnemy.maxHp*.8),e=Math.floor(this.battleEnemy.maxHp*.6);this.gold+=e,this.battleStateService.addBattleLog(""),this.battleStateService.addBattleLog("\u{1F3C6} \uC2B9\uB9AC!"),this.battleStateService.addBattleLog(`\u{1F4AB} \uACBD\uD5D8\uCE58 ${t} \uD68D\uB4DD!`),this.battleStateService.addBattleLog(`\u{1F4B0} \uACE8\uB4DC ${e} \uD68D\uB4DD!`),this.notifyLogUpdate(),this.onBattleWin&&this.onBattleWin(t,e),setTimeout(()=>this.endBattle(),2e3)}loseBattle(){this.battleStateService.endBattle(this.battleVictory),this.playerCharacter&&(this.playerCharacter.hp=Math.floor(this.playerCharacter.maxHp/2)),this.battleStateService.addBattleLog(""),this.battleStateService.addBattleLog("\u{1F480} \uD328\uBC30..."),this.battleStateService.addBattleLog("\uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC7AC\uC815\uBE44\uAC00 \uD544\uC694\uD558\uB2E4."),this.notifyLogUpdate(),this.onBattleLose&&this.onBattleLose(),setTimeout(()=>this.endBattle(),2e3)}endBattle(){this.onBattleEnd&&this.onBattleEnd(this.battleVictory)}startMartialBattle(t){this.startBattle()}initializeBattleSkills(){this.battleSkills=[...this.defaultBattleSkills],this.playerCharacter&&this.playerCharacter.level>=5&&this.battleSkills.push({id:"lightning-strike",name:"\uBC88\uAC1C \uC77C\uACA9",description:"\uBC88\uAC1C\uB85C \uC801\uC744 \uACF5\uACA9\uD558\uACE0 \uC2A4\uD134\uC2DC\uD0B5\uB2C8\uB2E4",type:"attack",mpCost:30,cooldown:3,damageMultiplier:2.2,hitRate:.9,statusEffect:{type:"stun",duration:1,value:1,name:"\uC2A4\uD134",icon:"\u26A1"},icon:"\u26A1"})}initializeBattleItems(){this.battleItems=this.inventory.filter(t=>t.type==="consumable").map(t=>({id:t.id,name:t.name,description:t.description,type:this.getBattleItemType(t.id),effect:this.getBattleItemEffect(t.id),quantity:t.quantity,usableInBattle:!0,icon:this.getItemIcon(t.id)}))}useBattleSkill(t){let e=this.battleSkills.find(n=>n.id===t);if(!e||!this.playerCharacter)return!1;if(this.playerCharacter.mp<e.mpCost)return this.addBattleLog("player",`MP\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4! (\uD544\uC694: ${e.mpCost})`),!1;if(e.currentCooldown&&e.currentCooldown>0)return this.addBattleLog("player",`${e.name}\uC740(\uB294) \uC544\uC9C1 \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. (${e.currentCooldown}\uD134 \uB0A8\uC74C)`),!1;switch(this.playerCharacter.mp-=e.mpCost,e.type){case"attack":this.executeAttackSkill(e);break;case"defense":this.executeDefenseSkill(e);break;case"heal":this.executeHealSkill(e);break;case"buff":this.executeBuffSkill(e);break;case"debuff":this.executeDebuffSkill(e);break}return e.cooldown>0&&(e.currentCooldown=e.cooldown),!0}useBattleItem(t){let e=this.battleItems.find(a=>a.id===t);if(!e||e.quantity<=0||!this.playerCharacter)return!1;if(e.effect.heal){let a=Math.min(e.effect.heal,this.playerCharacter.maxHp-this.playerCharacter.hp);this.playerCharacter.hp+=a,this.addBattleLog("player",`${e.name} \uC0AC\uC6A9! HP ${a} \uD68C\uBCF5!`,{heal:a}),this.triggerSkillEffect(e.icon||"\u2764\uFE0F","heal")}if(e.effect.mpRestore){let a=Math.min(e.effect.mpRestore,this.playerCharacter.maxMp-this.playerCharacter.mp);this.playerCharacter.mp+=a,this.addBattleLog("player",`${e.name} \uC0AC\uC6A9! MP ${a} \uD68C\uBCF5!`),this.triggerSkillEffect(e.icon||"\u{1F499}","heal")}e.effect.damage&&this.battleEnemy&&(this.battleEnemy.hp=Math.max(0,this.battleEnemy.hp-e.effect.damage),this.addBattleLog("player",`${e.name} \uC0AC\uC6A9! ${e.effect.damage} \uB370\uBBF8\uC9C0!`,{damage:e.effect.damage}),this.triggerSkillEffect(e.icon||"\u{1F4A3}","hit"),this.triggerEnemyDamage()),e.effect.buff&&(this.applyStatusEffect("player",e.effect.buff),this.addBattleLog("player",`${e.name} \uC0AC\uC6A9! ${e.effect.buff.name} \uD6A8\uACFC!`),this.triggerSkillEffect(e.icon||"\u2728","buff")),e.quantity--;let n=this.inventory.find(a=>a.id===t);return n&&(n.quantity--,n.quantity<=0&&(this.inventory=this.inventory.filter(a=>a.id!==t))),!0}updateSkillCooldowns(){this.battleSkills=this.battleService.decreaseAllCooldowns(this.battleSkills)}executeAttackSkill(t){if(!this.battleEnemy)return;let e=this.battleService.executeAttackSkill(t,this.playerCharacter,this.battleEnemy.hp,this.battleEnemy.defense);if(e.isMiss){this.addBattleLog("player",`${t.name}\uC774(\uAC00) \uBE57\uB098\uAC14\uB2E4!`,{isMiss:!0}),this.triggerSkillEffect(t.icon||"\u{1F4A8}","miss");return}this.battleEnemy.hp=e.remainingEnemyHp,this.addBattleLog("player",`${t.name}! ${e.damage} \uB370\uBBF8\uC9C0!`,{damage:e.damage,isCritical:e.isCritical}),this.triggerSkillEffect(t.icon||"\u{1F4A5}",e.isCritical?"critical":"hit"),this.triggerEnemyDamage(),e.statusEffect&&this.applyStatusEffect("enemy",e.statusEffect)}executeDefenseSkill(t){let e=this.battleService.executeDefenseSkill(t);this.playerDefenseBonus=e.defenseBoost,this.addBattleLog("player",`${t.name}! \uBC29\uC5B4\uB825\uC774 ${e.defenseBoost*100}% \uC99D\uAC00\uD588\uB2E4!`),this.triggerSkillEffect(t.icon||"\u{1F6E1}\uFE0F","buff")}executeHealSkill(t){if(!this.playerCharacter)return;let e=this.battleService.executeHealSkill(t,this.playerCharacter.hp,this.playerCharacter.maxHp);this.playerCharacter.hp=e.newHp,this.addBattleLog("player",`${t.name}! HP ${e.healAmount} \uD68C\uBCF5!`,{heal:e.healAmount}),this.triggerSkillEffect(t.icon||"\u{1F49A}","heal")}executeBuffSkill(t){let e=this.battleService.executeBuffSkill(t);e.statusEffect&&(this.applyStatusEffect("player",e.statusEffect),this.addBattleLog("player",`${t.name}! ${e.statusEffect.name} \uD6A8\uACFC \uBC1C\uB3D9!`),this.triggerSkillEffect(t.icon||"\u2728","buff"))}executeDebuffSkill(t){let e=this.battleService.executeDebuffSkill(t);e.statusEffect&&(this.applyStatusEffect("enemy",e.statusEffect),this.addBattleLog("player",`${t.name}! \uC801\uC5D0\uAC8C ${e.statusEffect.name} \uD6A8\uACFC!`),this.triggerSkillEffect(t.icon||"\u{1F53B}","debuff"))}applyStatusEffect(t,e){this.currentBattleState&&(t==="player"?this.currentBattleState.playerStatusEffects=this.battleService.applyStatusEffect(this.currentBattleState.playerStatusEffects,e):this.currentBattleState.enemyStatusEffects=this.battleService.applyStatusEffect(this.currentBattleState.enemyStatusEffects,e))}triggerSkillEffect(t,e){}addBattleLog(t,e,n){if(!this.currentBattleState)return;let a=this.battleLogService.createLogEntry(this.currentBattleState.turn,t,e,n);this.currentBattleState.combatLog.push(a),this.battleStateService.addBattleLog(this.battleLogService.formatBattleLog(a)),this.notifyLogUpdate()}triggerPlayerDamage(){this.playerTakingDamage=!0,this.onPlayerDamage&&this.onPlayerDamage(),setTimeout(()=>{this.playerTakingDamage=!1},500)}triggerEnemyDamage(){this.enemyTakingDamage=!0,this.onEnemyDamage&&this.onEnemyDamage(),setTimeout(()=>{this.enemyTakingDamage=!1},500)}notifyLogUpdate(){this.onLogUpdate&&this.onLogUpdate()}getBattleItemType(t){return t.includes("potion")?"potion":t.includes("bomb")?"throwable":t.includes("scroll")?"scroll":"buff"}getBattleItemEffect(t){return t.includes("potion")?{heal:50}:t.includes("bomb")?{damage:30}:{}}getItemIcon(t){return t.includes("potion")?"\u{1F9EA}":t.includes("bomb")?"\u{1F4A3}":t.includes("scroll")?"\u{1F4DC}":"\u{1F4E6}"}static \u0275fac=function(e){return new(e||r)(N(te),N(qe),N(Ae))};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ge=class r{getAllMartialSkills(){return[{id:"luohan_quan",name:"\uB098\uD55C\uAD8C",chineseName:"\u7F85\u6F22\u62F3",type:"choShik",grade:"\uC911\uC2B9",requiredInternalPower:50,internalPowerCost:15,requiredLevel:1,damageMultiplier:1.2,hitRate:.85,criticalRate:.1,description:"\uC18C\uB9BC\uC0AC\uC758 \uAE30\uBCF8 \uAD8C\uBC95. \uAC15\uC9C1\uD558\uACE0 \uC815\uD655\uD55C \uACF5\uACA9\uC774 \uD2B9\uC9D5\uC774\uB2E4.",skillEffect:"\uACF5\uACA9\uB825 120%, \uBC29\uC5B4\uB825 \uC77C\uC2DC 10% \uC99D\uAC00",learningDifficulty:3,factionId:"shaolin",isSecret:!1},{id:"vajra_palm",name:"\uAE08\uAC15\uC7A5",chineseName:"\u91D1\u525B\u638C",type:"choShik",grade:"\uC911\uC2B9",requiredInternalPower:80,internalPowerCost:25,requiredLevel:3,damageMultiplier:1.5,hitRate:.8,criticalRate:.15,element:"fire",description:"\uAC15\uB825\uD55C \uC7A5\uB825\uC744 \uB2F4\uC740 \uC18C\uB9BC \uC7A5\uBC95",skillEffect:"\uAC15\uB825\uD55C \uC77C\uACA9, 15% \uD655\uB960\uB85C \uAE30\uC808",learningDifficulty:5,factionId:"shaolin",isSecret:!1,statusEffect:{type:"stun",duration:1,damagePerTurn:0,name:"\uAE30\uC808",icon:"\u{1F4AB}",description:"1\uD134 \uB3D9\uC548 \uD589\uB3D9 \uBD88\uAC00",statModifier:{}}},{id:"yijin_jing",name:"\uC5ED\uADFC\uACBD",chineseName:"\u6613\u7B4B\u7D93",type:"shimBeop",grade:"\uC808\uD559",requiredInternalPower:200,internalPowerCost:0,requiredLevel:10,damageMultiplier:0,hitRate:1,criticalRate:0,description:"\uC18C\uB9BC \uCD5C\uACE0\uC758 \uB0B4\uACF5\uC2EC\uBC95. \uC218\uB828 \uC2DC \uB0B4\uB825 \uD68C\uBCF5 \uC18D\uB3C4\uC640 \uCD5C\uB300\uCE58\uAC00 \uD06C\uAC8C \uC99D\uAC00\uD55C\uB2E4.",skillEffect:"\uB0B4\uB825 \uD68C\uBCF5 \uC18D\uB3C4 +50%, \uCD5C\uB300 \uB0B4\uB825 +100, \uC804\uD22C \uC911 \uD134\uB9C8\uB2E4 HP 5% \uD68C\uBCF5",learningDifficulty:10,factionId:"shaolin",isSecret:!0},{id:"taiji_quan",name:"\uD0DC\uADF9\uAD8C",chineseName:"\u592A\u6975\u62F3",type:"choShik",grade:"\uC0C1\uC2B9",requiredInternalPower:100,internalPowerCost:30,requiredLevel:5,damageMultiplier:1.3,hitRate:.9,criticalRate:.2,description:"\uC720\uC5F0\uD568 \uC18D\uC758 \uAC15\uD568. \uC0C1\uB300\uC758 \uACF5\uACA9\uC744 \uD758\uB824\uBCF4\uB0B4\uBA70 \uBC18\uACA9\uD55C\uB2E4.",skillEffect:"\uACF5\uACA9\uB825 130%, \uC0C1\uB300 \uACF5\uACA9\uC758 30%\uB97C \uBC18\uC0AC",learningDifficulty:7,factionId:"wudang",isSecret:!1,specialEffect:"counter"},{id:"taiji_sword",name:"\uD0DC\uADF9\uAC80",chineseName:"\u592A\u6975\u528D",type:"choShik",grade:"\uC808\uD559",requiredInternalPower:150,internalPowerCost:50,requiredLevel:8,damageMultiplier:2,hitRate:.95,criticalRate:.25,description:"\uBB34\uB2F9\uD30C \uCD5C\uACE0\uC758 \uAC80\uBC95. \uAC80\uAE30\uB97C \uBC1C\uB3D9\uD558\uC5EC \uC6D0\uAC70\uB9AC \uACF5\uACA9\uC774 \uAC00\uB2A5\uD558\uB2E4.",skillEffect:"\uAC80\uAE30 \uBC1C\uB3D9, \uAC15\uB825\uD55C \uC77C\uACA9, \uD0DC\uADF9\uAD8C\uACFC \uC5F0\uACC4 \uC2DC \uCD94\uAC00 \uD53C\uD574",learningDifficulty:9,factionId:"wudang",isSecret:!0,comboSkills:["taiji_quan"]},{id:"absorb_power",name:"\uD761\uC131\uB300\uBC95",chineseName:"\u5438\u661F\u5927\u6CD5",type:"shimBeop",grade:"\uC808\uD559",requiredInternalPower:180,internalPowerCost:100,requiredLevel:12,damageMultiplier:.8,hitRate:.75,criticalRate:.1,description:"\uC0C1\uB300\uC758 \uB0B4\uB825\uC744 \uD761\uC218\uD558\uB294 \uB9C8\uAD50\uC758 \uC0AC\uC545\uD55C \uBB34\uACF5",skillEffect:"\uD53C\uD574\uC758 50%\uB9CC\uD07C \uB0B4\uB825 \uD68C\uBCF5, 10% \uD655\uB960\uB85C \uC8FC\uD654\uC785\uB9C8",learningDifficulty:10,factionId:"demon_sect",isSecret:!0,specialEffect:"absorb"},{id:"demon_palm",name:"\uCC9C\uB9C8\uC7A5",chineseName:"\u5929\u9B54\u638C",type:"choShik",grade:"\uC0C1\uC2B9",requiredInternalPower:120,internalPowerCost:40,requiredLevel:6,damageMultiplier:1.8,hitRate:.85,criticalRate:.2,element:"poison",description:"\uB3C5\uAE30\uB97C \uD488\uC740 \uB9C8\uAD50\uC758 \uC7A5\uBC95",skillEffect:"\uAC15\uB825\uD55C \uD53C\uD574, \uC911\uB3C5 \uD6A8\uACFC",learningDifficulty:7,factionId:"demon_sect",isSecret:!1,statusEffect:{type:"poison",duration:3,damagePerTurn:10,name:"\uC911\uB3C5",chineseName:"\u4E2D\u6BD2",icon:"\u2620\uFE0F",description:"3\uD134 \uB3D9\uC548 \uD134\uB9C8\uB2E4 10 \uD53C\uD574",statModifier:{}}},{id:"huashan_sword",name:"\uD654\uC0B0\uAC80\uBC95",chineseName:"\u83EF\u5C71\u528D\u6CD5",type:"choShik",grade:"\uC911\uC2B9",requiredInternalPower:70,internalPowerCost:20,requiredLevel:2,damageMultiplier:1.4,hitRate:.9,criticalRate:.2,description:"\uBE60\uB974\uACE0 \uC815\uD655\uD55C \uD654\uC0B0\uD30C\uC758 \uAC80\uBC95",skillEffect:"\uC2E0\uC18D\uD55C \uAC80\uACA9, \uB192\uC740 \uBA85\uC911\uB960",learningDifficulty:4,factionId:"huashan",isSecret:!1},{id:"dugu_nine_swords",name:"\uB3C5\uACE0\uAD6C\uAC80",chineseName:"\u7368\u5B64\u4E5D\u528D",type:"choShik",grade:"\uC808\uD559",requiredInternalPower:0,internalPowerCost:60,requiredLevel:15,damageMultiplier:2.5,hitRate:.99,criticalRate:.4,description:"\uAC80\uB9C8 \uB3C5\uACE0\uAD6C\uD328\uAC00 \uCC3D\uC548\uD55C \uC808\uC138\uAC80\uBC95. \uB0B4\uB825\uC774 \uC544\uB2CC \uAC80\uB9AC\uB85C \uC2B9\uBD80\uD55C\uB2E4.",skillEffect:"\uBAA8\uB4E0 \uBB34\uACF5\uC744 \uD30C\uD6FC, \uCD08\uACE0 \uCE58\uBA85\uD0C0\uC728, \uB0B4\uB825 \uBD88\uD544\uC694",learningDifficulty:10,factionId:"huashan",isSecret:!0,specialEffect:"pierce"},{id:"emei_sword",name:"\uC544\uBBF8\uAC80\uBC95",chineseName:"\u5CE8\u5D4B\u528D\u6CD5",type:"choShik",grade:"\uC911\uC2B9",requiredInternalPower:60,internalPowerCost:18,requiredLevel:2,damageMultiplier:1.3,hitRate:.88,criticalRate:.15,description:"\uC6B0\uC544\uD558\uBA74\uC11C\uB3C4 \uCE58\uBA85\uC801\uC778 \uC544\uBBF8\uD30C\uC758 \uAC80\uBC95",skillEffect:"\uBE60\uB978 \uC5F0\uACA9, \uBBFC\uCCA9\uC131 \uBCF4\uB108\uC2A4",learningDifficulty:4,factionId:"emei",isSecret:!1},{id:"basic_punch",name:"\uAE30\uBCF8\uAD8C\uBC95",chineseName:"\u57FA\u672C\u62F3\u6CD5",type:"choShik",grade:"\uD558\uC2B9",requiredInternalPower:10,internalPowerCost:5,requiredLevel:1,damageMultiplier:1,hitRate:.85,criticalRate:.05,description:"\uAC00\uC7A5 \uAE30\uBCF8\uC801\uC778 \uAD8C\uBC95",skillEffect:"\uAE30\uBCF8 \uACF5\uACA9",learningDifficulty:1,isSecret:!1},{id:"basic_palm",name:"\uAE30\uBCF8\uC7A5\uBC95",chineseName:"\u57FA\u672C\u638C\u6CD5",type:"choShik",grade:"\uD558\uC2B9",requiredInternalPower:15,internalPowerCost:8,requiredLevel:1,damageMultiplier:1.1,hitRate:.82,criticalRate:.08,description:"\uAE30\uBCF8\uC801\uC778 \uC7A5\uBC95",skillEffect:"\uC7A5\uB825\uC744 \uB2F4\uC740 \uACF5\uACA9",learningDifficulty:2,isSecret:!1},{id:"lightness_skill",name:"\uACBD\uC2E0\uC220",chineseName:"\u8F15\u8EAB\u8853",type:"gyeongGong",grade:"\uD558\uC2B9",requiredInternalPower:20,internalPowerCost:10,requiredLevel:1,damageMultiplier:0,hitRate:1,criticalRate:0,description:"\uAE30\uBCF8 \uACBD\uACF5. \uD68C\uD53C\uC728\uC744 \uB192\uC778\uB2E4.",skillEffect:"3\uD134 \uB3D9\uC548 \uD68C\uD53C\uC728 +30%",learningDifficulty:3,isSecret:!1}]}getStartingSkills(){return this.getAllMartialSkills().filter(e=>e.id==="basic_punch"||e.id==="basic_palm"||e.id==="lightness_skill")}getSkillsByFaction(t){return this.getAllMartialSkills().filter(e=>e.factionId===t)}getSkillsByGrade(t){return this.getAllMartialSkills().filter(e=>e.grade===t)}getSecretSkills(){return this.getAllMartialSkills().filter(t=>t.isSecret)}getSkillById(t){return this.getAllMartialSkills().find(e=>e.id===t)}getAvailableSkills(t,e){return this.getAllMartialSkills().filter(n=>n.requiredLevel<=t&&n.requiredInternalPower<=e)}getAllElixirs(){return[{id:"small_return_pill",name:"\uC18C\uD658\uB2E8",chineseName:"\u5C0F\u9084\u4E39",type:"healing",grade:"\uC911\uD488",effects:[{type:"hp_recovery",value:50,description:"HP 50 \uD68C\uBCF5"},{type:"cure_injury",value:1,description:"\uACBD\uBBF8\uD55C \uB0B4\uC0C1 \uCE58\uB8CC"}],description:"\uACBD\uBBF8\uD55C \uB0B4\uC0C1\uC744 \uCE58\uB8CC\uD558\uB294 \uB2E8\uC57D",rarity:3,price:100},{id:"great_return_pill",name:"\uB300\uD658\uB2E8",chineseName:"\u5927\u9084\u4E39",type:"healing",grade:"\uC0C1\uD488",effects:[{type:"hp_recovery",value:150,description:"HP 150 \uD68C\uBCF5"},{type:"mp_recovery",value:50,description:"MP 50 \uD68C\uBCF5"},{type:"cure_injury",value:3,description:"\uC911\uC0C1 \uCE58\uB8CC"}],description:"\uC911\uC0C1\uC744 \uCE58\uB8CC\uD558\uB294 \uADC0\uC911\uD55C \uB2E8\uC57D",rarity:7,price:500},{id:"thousand_year_ginseng",name:"\uCC9C\uB144\uD558\uC218\uC624",chineseName:"\u5343\u5E74\u4F55\u9996\u70CF",type:"cultivation",grade:"\uADF9\uD488",effects:[{type:"internal_power_boost",value:10,description:"\uCD5C\uB300 \uB0B4\uB825 +10\uB144 \uACF5\uB825"}],description:"\uCC9C\uB144 \uBB35\uC740 \uC601\uC57D. 10\uB144 \uACF5\uB825\uC744 \uC99D\uC9C4\uC2DC\uD0A8\uB2E4.",rarity:9,price:2e3},{id:"snow_lotus",name:"\uCC9C\uC0B0\uC124\uB828",chineseName:"\u5929\u5C71\u96EA\u84EE",type:"cultivation",grade:"\uADF9\uD488",effects:[{type:"internal_power_boost",value:20,description:"\uCD5C\uB300 \uB0B4\uB825 +20\uB144 \uACF5\uB825"},{type:"cure_poison",value:100,description:"\uBAA8\uB4E0 \uB3C5 \uC81C\uAC70"}],description:"\uCC9C\uC0B0\uC5D0\uC11C\uB9CC \uC790\uB77C\uB294 \uC2E0\uBE44\uC758 \uC601\uC57D",rarity:10,price:5e3},{id:"demon_blood_ginseng",name:"\uCC9C\uB9C8\uD608\uC0BC",chineseName:"\u5929\u9B54\u8840\u8518",type:"cultivation",grade:"\uADF9\uD488",effects:[{type:"internal_power_boost",value:50,description:"\uCD5C\uB300 \uB0B4\uB825 +50\uB144 \uACF5\uB825"},{type:"stat_boost",value:10,duration:0,description:"\uACF5\uACA9\uB825 +10"}],description:"\uB9C8\uAD50\uC758 \uBE44\uC804 \uC601\uC57D. \uAC15\uB825\uD558\uC9C0\uB9CC \uC8FC\uD654\uC785\uB9C8\uC758 \uC704\uD5D8\uC774 \uC788\uB2E4.",rarity:10,price:1e4,sideEffect:"30% \uD655\uB960\uB85C \uC8FC\uD654\uC785\uB9C8",sideEffectChance:.3},{id:"fasting_pill",name:"\uBCBD\uACE1\uB2E8",chineseName:"\u8F9F\u7A40\u4E39",type:"special",grade:"\uD558\uD488",effects:[{type:"hp_recovery",value:20,description:"HP 20 \uD68C\uBCF5"}],description:"\uACF5\uBCF5\uC744 \uBA74\uD558\uAC8C \uD574\uC8FC\uB294 \uB2E8\uC57D",rarity:1,price:10},{id:"antidote_pill",name:"\uD574\uB3C5\uB2E8",chineseName:"\u89E3\u6BD2\u4E39",type:"detox",grade:"\uC911\uD488",effects:[{type:"cure_poison",value:50,description:"\uC911\uB3C5 \uC0C1\uD0DC \uCE58\uB8CC"}],description:"\uC77C\uBC18\uC801\uC778 \uB3C5\uC744 \uD574\uB3C5\uD558\uB294 \uB2E8\uC57D",rarity:4,price:150}]}getAllFactions(){return[{id:"shaolin",name:"\uC18C\uB9BC\uD30C",chineseName:"\u5C11\u6797\u6D3E",type:"righteous",description:"\uCC9C\uD558\uBB34\uB9BC\uC758 \uD0DC\uC0B0\uBD81\uB450. \uBD88\uAC00\uC758 \uC790\uBE44\uC640 \uAC15\uB825\uD55C \uAD8C\uBC95\uC73C\uB85C \uC720\uBA85\uD558\uB2E4.",headquarters:"\uC22D\uC0B0 \uC18C\uB9BC\uC0AC",founder:"\uB2EC\uB9C8\uC870\uC0AC",reputation:0,relationship:"neutral",basicSkills:["luohan_quan","vajra_palm"],advancedSkills:["prajna_palm","dragon_claw_hand"],secretSkills:["yijin_jing","marrow_washing_classic"],specialties:["\uAD8C\uBC95","\uC7A5\uBC95","\uB0B4\uACF5"],philosophy:"\uBD88\uAC00\uC758 \uC790\uBE44\uC640 \uBB34\uD559\uC758 \uC870\uD654"},{id:"wudang",name:"\uBB34\uB2F9\uD30C",chineseName:"\u6B66\u7576\u6D3E",type:"righteous",description:"\uB3C4\uAC00\uC758 \uBB34\uD559\uC744 \uC9D1\uB300\uC131\uD55C \uBA85\uBB38\uC815\uD30C. \uD0DC\uADF9\uAD8C\uACFC \uAC80\uC220\uC758 \uB300\uAC00\uB4E4\uC774 \uBAA8\uC5EC\uC788\uB2E4.",headquarters:"\uBB34\uB2F9\uC0B0",founder:"\uC7A5\uC0BC\uBD09",reputation:0,relationship:"neutral",basicSkills:["taiji_quan","wudang_sword"],advancedSkills:["taiji_sword","pure_yang_palm"],secretSkills:["taiji_mystical_skill","tai_chi_divine_technique"],specialties:["\uAC80\uC220","\uAD8C\uBC95","\uB3C4\uBC95"],philosophy:"\uBB34\uC704\uC790\uC5F0, \uC774\uC720\uC81C\uAC15"},{id:"demon_sect",name:"\uB9C8\uAD50",chineseName:"\u9B54\u654E",type:"evil",description:"\uBB34\uB9BC\uC758 \uACF5\uC801. \uAC15\uB825\uD558\uACE0 \uC0AC\uC545\uD55C \uBB34\uACF5\uC744 \uC0AC\uC6A9\uD55C\uB2E4.",headquarters:"\uAD11\uBA85\uC815",founder:"\uCC9C\uB9C8",reputation:0,relationship:"neutral",basicSkills:["demon_palm","blood_claw"],advancedSkills:["soul_absorbing_palm","ten_directions_annihilation"],secretSkills:["absorb_power","heaven_demon_technique"],specialties:["\uD761\uACF5","\uB3C5\uACF5","\uC554\uAE30"],philosophy:"\uD798\uC774 \uACE7 \uC815\uC758"},{id:"huashan",name:"\uD654\uC0B0\uD30C",chineseName:"\u83EF\u5C71\u6D3E",type:"righteous",description:"\uAC80\uC220\uC758 \uBA85\uAC00. \uD654\uC0B0\uAC80\uBC95\uC740 \uBB34\uB9BC\uC5D0\uC11C \uAC00\uC7A5 \uBE60\uB974\uACE0 \uB0A0\uCE74\uB86D\uAE30\uB85C \uC720\uBA85\uD558\uB2E4.",headquarters:"\uD654\uC0B0",founder:"\uD654\uC0B0\uAC80\uC131",reputation:0,relationship:"neutral",basicSkills:["huashan_sword","yangwu_sword"],advancedSkills:["dugu_nine_swords","swift_sword"],secretSkills:["purple_mist_divine_art","lone_sword_technique"],specialties:["\uAC80\uC220","\uACBD\uACF5"],philosophy:"\uAC80\uC73C\uB85C \uB3C4\uB97C \uD1B5\uD55C\uB2E4"},{id:"emei",name:"\uC544\uBBF8\uD30C",chineseName:"\u5CE8\u5D4B\u6D3E",type:"righteous",description:"\uC5EC\uD611\uB4E4\uC758 \uC131\uC9C0. \uC6B0\uC544\uD558\uBA74\uC11C\uB3C4 \uCE58\uBA85\uC801\uC778 \uBB34\uACF5\uC744 \uC0AC\uC6A9\uD55C\uB2E4.",headquarters:"\uC544\uBBF8\uC0B0",founder:"\uACFD\uC591",reputation:0,relationship:"neutral",basicSkills:["emei_sword","jade_maiden_skill"],advancedSkills:["buddha_palm","nine_yin_divine_claw"],secretSkills:["emei_ultimate_skill","jade_maiden_heart_sutra"],specialties:["\uAC80\uC220","\uC7A5\uBC95","\uC554\uAE30"],philosophy:"\uAC15\uC720\uBCD1\uC81C, \uC720\uC911\uB300\uAC15"}]}getFactionById(t){return this.getAllFactions().find(e=>e.id===t)}getFactionsByType(t){return this.getAllFactions().filter(e=>e.type===t)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var ut=class r{constructor(t,e){this.notification=t;this.wuxiaDataService=e}martialArtsSkills=[];learnedMartialSkills=[];availableFactions=[];playerFaction=null;wulinRelationships=[];elixirs=[];martialManuals=[];playerInternalPower={current:0,max:100,purity:50,stability:100,realm:"\uCD08\uB958",realmProgress:0,trainingLevel:0,recoveryRate:1,meridians:{meridians:[],opened:0,total:12}};martialBattleState=null;playerCharacter=null;inventory=[];setPlayerCharacter(t){this.playerCharacter=t}setInventory(t){this.inventory=t}getInventory(){return this.inventory}initializeWuxiaSystem(){this.initializeMeridians(),this.initializeFactions(),this.initializeMartialSkills(),this.initializeElixirs(),this.initializeMartialManuals()}initializeMeridians(){let t=[{id:"lung",name:"\uC218\uD0DC\uC74C\uD3D0\uACBD",chinese:"\u624B\u592A\u9670\u80BA\u7D93",bonus:{hp:10,defense:2}},{id:"large_intestine",name:"\uC218\uC591\uBA85\uB300\uC7A5\uACBD",chinese:"\u624B\u967D\u660E\u5927\u8178\u7D93",bonus:{strength:2}},{id:"stomach",name:"\uC871\uC591\uBA85\uC704\uACBD",chinese:"\u8DB3\u967D\u660E\u80C3\u7D93",bonus:{maxHp:20}},{id:"spleen",name:"\uC871\uD0DC\uC74C\uBE44\uACBD",chinese:"\u8DB3\u592A\u9670\u813E\u7D93",bonus:{hp:15}},{id:"heart",name:"\uC218\uC18C\uC74C\uC2EC\uACBD",chinese:"\u624B\u5C11\u9670\u5FC3\u7D93",bonus:{mp:10,intelligence:2}},{id:"small_intestine",name:"\uC218\uD0DC\uC591\uC18C\uC7A5\uACBD",chinese:"\u624B\u592A\u967D\u5C0F\u8178\u7D93",bonus:{agility:2}},{id:"bladder",name:"\uC871\uD0DC\uC591\uBC29\uAD11\uACBD",chinese:"\u8DB3\u592A\u967D\u8180\u80F1\u7D93",bonus:{maxMp:20}},{id:"kidney",name:"\uC871\uC18C\uC74C\uC2E0\uACBD",chinese:"\u8DB3\u5C11\u9670\u814E\u7D93",bonus:{maxHp:25,maxMp:25}},{id:"pericardium",name:"\uC218\uAD90\uC74C\uC2EC\uD3EC\uACBD",chinese:"\u624B\u53A5\u9670\u5FC3\u5305\u7D93",bonus:{defense:3}},{id:"triple_burner",name:"\uC218\uC18C\uC591\uC0BC\uCD08\uACBD",chinese:"\u624B\u5C11\u967D\u4E09\u7126\u7D93",bonus:{mp:15}},{id:"gallbladder",name:"\uC871\uC18C\uC591\uB2F4\uACBD",chinese:"\u8DB3\u5C11\u967D\u81BD\u7D93",bonus:{attack:3}},{id:"liver",name:"\uC871\uAD90\uC74C\uAC04\uACBD",chinese:"\u8DB3\u53A5\u9670\u809D\u7D93",bonus:{attack:5,strength:3}}];this.playerInternalPower.meridians.meridians=t.map(e=>({id:e.id,name:e.name,chineseName:e.chinese,isOpened:!1,openProgress:0,bonus:e.bonus}))}initializeFactions(){this.availableFactions=this.wuxiaDataService.getAllFactions()}initializeMartialSkills(){this.martialArtsSkills=this.wuxiaDataService.getAllMartialSkills(),this.learnedMartialSkills=this.wuxiaDataService.getStartingSkills()}initializeElixirs(){this.elixirs=this.wuxiaDataService.getAllElixirs()}initializeMartialManuals(){this.martialManuals=[{id:"manual_luohan_quan",name:"\uB098\uD55C\uAD8C\uBCF4",chineseName:"\u7F85\u6F22\u62F3\u8B5C",skillId:"luohan_quan",requiredLevel:1,requiredInternalPower:30,learningTime:7,learningDifficulty:3,deviationRisk:5,description:"\uC18C\uB9BC\uC0AC \uB098\uD55C\uAD8C\uC744 \uAE30\uB85D\uD55C \uBB34\uACF5 \uBE44\uAE09",isObtained:!1,isLearned:!1},{id:"manual_taiji_sword",name:"\uD0DC\uADF9\uAC80\uBCF4",chineseName:"\u592A\u6975\u528D\u8B5C",skillId:"taiji_sword",requiredLevel:8,requiredInternalPower:150,requiredFaction:"wudang",learningTime:30,learningDifficulty:9,deviationRisk:20,description:"\uBB34\uB2F9\uD30C\uC758 \uC808\uD559 \uD0DC\uADF9\uAC80\uC744 \uAE30\uB85D\uD55C \uBE44\uAE09",isObtained:!1,isLearned:!1},{id:"manual_dugu_nine_swords",name:"\uB3C5\uACE0\uAD6C\uAC80\uBCF4",chineseName:"\u7368\u5B64\u4E5D\u528D\u8B5C",skillId:"dugu_nine_swords",requiredLevel:15,requiredInternalPower:0,learningTime:90,learningDifficulty:10,deviationRisk:0,description:"\uAC80\uB9C8 \uB3C5\uACE0\uAD6C\uD328\uC758 \uC808\uC138\uAC80\uBC95. \uB0B4\uB825\uC774 \uD544\uC694\uC5C6\uB294 \uAC80\uB9AC\uC758 \uADF9\uCE58",location:"\uD654\uC0B0 \uC0AC\uACE0",isObtained:!1,isLearned:!1},{id:"manual_absorb_power",name:"\uD761\uC131\uB300\uBC95\uBE44\uAE09",chineseName:"\u5438\u661F\u5927\u6CD5\u79D8\u7B08",skillId:"absorb_power",requiredLevel:12,requiredInternalPower:180,learningTime:60,learningDifficulty:10,deviationRisk:50,description:"\uB9C8\uAD50\uC758 \uAE08\uB2E8\uC758 \uBB34\uACF5. \uC2B5\uB4DD \uC2DC \uC8FC\uD654\uC785\uB9C8\uC758 \uC704\uD5D8\uC774 \uB9E4\uC6B0 \uB192\uB2E4",isObtained:!1,isLearned:!1}]}joinFaction(t){let e=this.availableFactions.find(s=>s.id===t);if(!e)return;this.playerFaction=e,this.playerFaction.relationship="ally",this.playerFaction.reputation=100;let n={playerId:"player",factionId:t,rank:"\uC18D\uAC00\uC81C\uC790",contribution:0,trustLevel:50,joinDate:new Date};this.wulinRelationships.push(n),this.martialArtsSkills.filter(s=>e.basicSkills.includes(s.id)).forEach(s=>{this.learnedMartialSkills.find(m=>m.id===s.id)||this.learnedMartialSkills.push(s)}),this.notification.show(`${e.name}\uC5D0 \uC785\uBB38\uD558\uC600\uC2B5\uB2C8\uB2E4!`)}learnMartialSkill(t){let e=this.martialArtsSkills.find(n=>n.id===t);return!e||!this.playerCharacter?!1:this.learnedMartialSkills.find(n=>n.id===t)?(this.notification.show("\uC774\uBBF8 \uC2B5\uB4DD\uD55C \uBB34\uACF5\uC785\uB2C8\uB2E4."),!1):this.playerCharacter.level<e.requiredLevel?(this.notification.show(`\uB808\uBCA8 ${e.requiredLevel} \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.`),!1):this.playerInternalPower.max<e.requiredInternalPower?(this.notification.show(`\uB0B4\uB825 ${e.requiredInternalPower} \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.`),!1):e.factionId&&(!this.playerFaction||this.playerFaction.id!==e.factionId)?(this.notification.show(`${e.factionId} \uBB38\uD30C \uC18C\uC18D\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.`),!1):(this.learnedMartialSkills.push(e),this.notification.show(`${e.name}(${e.chineseName})\uC744(\uB97C) \uC2B5\uB4DD\uD558\uC600\uC2B5\uB2C8\uB2E4!`),!0)}openMeridian(t){let e=this.playerInternalPower.meridians.meridians.find(a=>a.id===t);if(!e||!this.playerCharacter)return!1;if(e.isOpened)return this.notification.show("\uC774\uBBF8 \uAC1C\uD1B5\uB41C \uD608\uB3C4\uC785\uB2C8\uB2E4."),!1;let n=(this.playerInternalPower.meridians.opened+1)*50;return this.playerInternalPower.max<n?(this.notification.show(`\uB0B4\uB825 ${n} \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.`),!1):(e.isOpened=!0,e.openProgress=100,this.playerInternalPower.meridians.opened++,Object.keys(e.bonus).forEach(a=>{let s=e.bonus[a];switch(a){case"hp":this.playerCharacter.hp+=s;break;case"maxHp":this.playerCharacter.maxHp+=s,this.playerCharacter.hp+=s;break;case"mp":this.playerCharacter.mp+=s;break;case"maxMp":this.playerCharacter.maxMp+=s,this.playerCharacter.mp+=s;break;case"attack":this.playerCharacter.attack+=s;break;case"defense":this.playerCharacter.defense+=s;break;case"strength":this.playerCharacter.strength+=s;break;case"agility":this.playerCharacter.agility+=s;break;case"intelligence":this.playerCharacter.intelligence+=s;break}}),this.notification.show(`${e.name}(${e.chineseName}) \uAC1C\uD1B5 \uC131\uACF5!`),!0)}cultivateInternalPower(t,e,n){let a=t*(1+this.playerInternalPower.trainingLevel/100),s=this.playerInternalPower.purity/100,m=Math.floor(a*(1+s));this.playerInternalPower.current=Math.min(this.playerInternalPower.max,this.playerInternalPower.current+m),this.playerInternalPower.trainingLevel=Math.min(100,this.playerInternalPower.trainingLevel+t*.5),this.playerInternalPower.realmProgress+=t*.2,this.checkRealmBreakthrough();let C=Math.floor(t*10*(1+this.playerInternalPower.trainingLevel/200));e&&e(C),this.notification.show(`${t}\uC2DC\uAC04 \uC218\uB828 \uC644\uB8CC. \uB0B4\uB825 +${m}, \uACBD\uD5D8\uCE58 +${C}`),n&&n("autosave")}checkRealmBreakthrough(){if(this.playerInternalPower.realmProgress<100)return;let t=["\uCD08\uB958","\uC77C\uB958","\uC808\uC815","\uD654\uACBD","\uCC9C\uC778\uD569\uC77C"],e=t.indexOf(this.playerInternalPower.realm);if(e>=t.length-1){this.notification.show("\uC774\uBBF8 \uCD5C\uACE0 \uACBD\uC9C0\uC5D0 \uB3C4\uB2EC\uD558\uC600\uC2B5\uB2C8\uB2E4.");return}let n=t[e+1],a=(e+2)*200;if(this.playerInternalPower.max<a){this.notification.show(`\uACBD\uC9C0 \uB3CC\uD30C\uC5D0\uB294 \uB0B4\uB825 ${a} \uC774\uC0C1\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.`);return}this.playerInternalPower.realm=n,this.playerInternalPower.realmProgress=0,this.playerInternalPower.max+=100,this.playerInternalPower.recoveryRate+=2,this.notification.show(`\u2B50 \uACBD\uC9C0 \uB3CC\uD30C! ${n} \uACBD\uC9C0\uC5D0 \uB3C4\uB2EC\uD558\uC600\uC2B5\uB2C8\uB2E4!`)}useElixir(t){let e=this.elixirs.find(a=>a.id===t);if(!e||!this.playerCharacter)return;let n=this.inventory.find(a=>a.id===t);if(!n||n.quantity<=0){this.notification.show("\uB2E8\uC57D\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4.");return}if(n.quantity--,n.quantity===0&&(this.inventory=this.inventory.filter(a=>a.id!==t)),e.sideEffect&&e.sideEffectChance&&Math.random()<e.sideEffectChance){this.notification.show(`\u26A0\uFE0F ${e.sideEffect}!`),this.playerInternalPower.stability-=30,this.playerCharacter.hp=Math.floor(this.playerCharacter.hp*.5);return}e.effects.forEach(a=>{switch(a.type){case"hp_recovery":this.playerCharacter.hp=Math.min(this.playerCharacter.maxHp,this.playerCharacter.hp+a.value);break;case"mp_recovery":this.playerCharacter.mp=Math.min(this.playerCharacter.maxMp,this.playerCharacter.mp+a.value);break;case"internal_power_boost":this.playerInternalPower.max+=a.value,this.playerInternalPower.current+=a.value;break;case"cure_poison":break;case"stat_boost":this.playerCharacter.attack+=a.value;break}}),this.notification.show(`${e.name}(${e.chineseName})\uC744(\uB97C) \uC0AC\uC6A9\uD558\uC600\uC2B5\uB2C8\uB2E4.`)}getRealmBonus(t){switch(t){case"\uCD08\uB958":return 0;case"\uC77C\uB958":return .05;case"\uC808\uC815":return .1;case"\uD654\uACBD":return .2;case"\uCC9C\uC778\uD569\uC77C":return .3;default:return 0}}startMartialBattle(t,e){this.martialBattleState=I(k({},e),{playerInternalPower:this.playerInternalPower.current,playerMaxInternalPower:this.playerInternalPower.max,enemyInternalPower:100,enemyMaxInternalPower:100,skillCooldowns:{},comboCounter:0,playerRealm:this.playerInternalPower.realm,enemyRealm:"\uCD08\uB958"})}useMartialSkill(t){if(!this.martialBattleState||!this.playerCharacter)return{success:!1,damage:0,message:"\uC804\uD22C \uC911\uC774 \uC544\uB2D9\uB2C8\uB2E4!"};let e=this.learnedMartialSkills.find(G=>G.id===t);if(!e)return{success:!1,damage:0,message:"\uD574\uB2F9 \uBB34\uACF5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4!"};if(this.martialBattleState.playerInternalPower<e.internalPowerCost)return{success:!1,damage:0,message:"\uB0B4\uB825\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4!"};if(this.martialBattleState.skillCooldowns[t]&&this.martialBattleState.skillCooldowns[t]>0)return{success:!1,damage:0,message:"\uC544\uC9C1 \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4!"};this.martialBattleState.playerInternalPower-=e.internalPowerCost;let n=this.getRealmBonus(this.martialBattleState.playerRealm),a=e.hitRate+n;if(Math.random()>a)return{success:!1,damage:0,message:`${e.name}(${e.chineseName})\uC774(\uAC00) \uBE57\uB098\uAC14\uB2E4! \u{1F4A8}`};let s=this.playerCharacter.attack*e.damageMultiplier,m=Math.floor(this.martialBattleState.playerInternalPower/50),C=Math.floor(s+m),P=e.criticalRate+n,x=Math.random()<P,w=x?Math.floor(C*1.5):C,g="";if(e.comboSkills&&this.martialBattleState.lastSkillUsed&&e.comboSkills.includes(this.martialBattleState.lastSkillUsed)){this.martialBattleState.comboCounter++;let G=Math.floor(w*.3),$=w+G;return g=`\u{1F525} \uC5F0\uACC4 \uC131\uACF5! \uCF64\uBCF4 ${this.martialBattleState.comboCounter}`,this.martialBattleState.lastSkillUsed=t,{success:!0,damage:$,message:x?"\u26A1\uD68C\uC2EC\uC758 \uC77C\uACA9!\u26A1":"",specialEffect:g}}else{this.martialBattleState.comboCounter=0;let G=x?"\u26A1\uD68C\uC2EC\uC758 \uC77C\uACA9!\u26A1":"";if(e.specialEffect==="absorb"){let $=Math.floor(w*.5);this.martialBattleState.playerInternalPower=Math.min(this.martialBattleState.playerMaxInternalPower,this.martialBattleState.playerInternalPower+$),g=`\u{1F300} \uB0B4\uB825 ${$} \uD761\uC218!`}return this.martialBattleState.lastSkillUsed=t,{success:!0,damage:w,message:G,specialEffect:g}}}static \u0275fac=function(e){return new(e||r)(N(te),N(Ge))};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ct=class r{callbacks;_currentDungeon=null;_currentDungeonRoom=null;_showDungeonPanel=!1;_showDungeonTestDialog=!1;_showDungeonEntryDialog=!1;_selectedDungeonType=null;_selectedDifficulty=null;_dungeonTestOptions={godMode:!1,oneHitKill:!1,skipCombat:!1,showAllRooms:!1,unlockAllRooms:!1};_dungeonProgress={inDungeon:!1,currentDungeonId:null,clearedDungeons:{},totalStats:{dungeonsCleared:0,monstersKilled:0,elitesKilled:0,bossesKilled:0,totalGoldEarned:0,totalExpEarned:0}};_dungeonTypes=[];constructor(){}get currentDungeon(){return this._currentDungeon}get currentDungeonRoom(){return this._currentDungeonRoom}get showDungeonPanel(){return this._showDungeonPanel}get showDungeonTestDialog(){return this._showDungeonTestDialog}get showDungeonEntryDialog(){return this._showDungeonEntryDialog}get selectedDungeonType(){return this._selectedDungeonType}get selectedDifficulty(){return this._selectedDifficulty}get dungeonTestOptions(){return this._dungeonTestOptions}get dungeonProgress(){return this._dungeonProgress}get dungeonTypes(){return this._dungeonTypes}set currentDungeon(t){this._currentDungeon=t}set currentDungeonRoom(t){this._currentDungeonRoom=t}set showDungeonPanel(t){this._showDungeonPanel=t}set showDungeonTestDialog(t){this._showDungeonTestDialog=t}set showDungeonEntryDialog(t){this._showDungeonEntryDialog=t}set selectedDungeonType(t){this._selectedDungeonType=t}set selectedDifficulty(t){this._selectedDifficulty=t}set dungeonProgress(t){this._dungeonProgress=t}set dungeonTypes(t){this._dungeonTypes=t}initialize(t){this.callbacks=t}initializeDungeonSystem(){this._dungeonTypes=this.callbacks.getDungeonService().getDefaultDungeonTypes(),this.callbacks.debugLogger.success("\uB358\uC804",`\u2705 \uB358\uC804 \uC2DC\uC2A4\uD15C \uCD08\uAE30\uD654 \uC644\uB8CC: ${this._dungeonTypes.length}\uAC1C \uB358\uC804 \uD0C0\uC785`)}openDungeonEntryDialog(t){this._selectedDungeonType=t,this._showDungeonEntryDialog=!0,this.callbacks.debugLogger.info("\uB358\uC804",`\u{1F6AA} \uB358\uC804 \uC785\uC7A5 \uB2E4\uC774\uC5BC\uB85C\uADF8 \uC5F4\uB9BC: ${t.koreanName}`)}closeDungeonEntryDialog(){this._showDungeonEntryDialog=!1,this._selectedDungeonType=null}openDungeonDialog(){this._showDungeonTestDialog=!0,this.callbacks.debugLogger.info("\uB358\uC804","\u{1F3F0} \uB358\uC804 \uBA54\uB274 \uC5F4\uB9BC")}closeDungeonDialog(){this._showDungeonTestDialog=!1,this._selectedDungeonType=null,this._selectedDifficulty=null}selectDungeonType(t){this._selectedDungeonType=t,this.callbacks.debugLogger.info("\uB358\uC804",`\uB358\uC804 \uC120\uD0DD: ${t.koreanName}`)}selectDifficulty(t){this._selectedDifficulty=t,this.callbacks.debugLogger.info("\uB358\uC804",`\uB09C\uC774\uB3C4 \uC120\uD0DD: ${this.getDifficultyKorean(t)}`)}startDungeon(){if(!this._selectedDungeonType||!this._selectedDifficulty){this.callbacks.notification.show("\u26A0\uFE0F \uB358\uC804\uACFC \uB09C\uC774\uB3C4\uB97C \uC120\uD0DD\uD558\uC138\uC694!");return}if(this.callbacks.debugLogger.info("\uB358\uC804","\u{1F3F0} \uB358\uC804 \uC2DC\uC791"),this.callbacks.debugLogger.info("\uB358\uC804",`\uC120\uD0DD: ${this._selectedDungeonType.koreanName} - ${this._selectedDifficulty}`),this.callbacks.debugLogger.info("\uB358\uC804",`\uD14C\uC2A4\uD2B8 \uC635\uC158: ${JSON.stringify(this._dungeonTestOptions)}`),this._dungeonTestOptions.godMode){let t=this.callbacks.getPlayerCharacter();t.hp=t.maxHp,t.mp=t.maxMp,this.callbacks.debugLogger.success("\uB358\uC804","\u{1F6E1}\uFE0F \uBB34\uC801 \uBAA8\uB4DC \uD65C\uC131\uD654")}this.enterDungeon(this._selectedDungeonType,this._selectedDifficulty),this._currentDungeon,this._currentDungeonRoom,this._currentDungeon&&(this._dungeonTestOptions.showAllRooms&&this.revealAllRooms(),this._dungeonTestOptions.unlockAllRooms&&this.unlockAllRooms()),this._currentDungeonRoom}enterDungeon(t,e){let n=this.callbacks.getPlayerCharacter(),a=this.callbacks.getDungeonService().canEnterDungeon(t,n);if(!a.canEnter){this.callbacks.notification.show(`\u26A0\uFE0F ${a.reason}`);return}this.callbacks.debugLogger.info("\uB358\uC804",`\u{1F6AA} \uB358\uC804 \uC785\uC7A5: ${t.koreanName} (${e})`);let s=this.generateDungeon(t,e);this._currentDungeon=s,this._dungeonProgress.inDungeon=!0,this._dungeonProgress.currentDungeonId=s.id,this.closeDungeonEntryDialog(),this._showDungeonPanel=!0,this.callbacks.addStoryBlock(["\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550",`      ${t.icon} ${t.koreanName}`,`      \uB09C\uC774\uB3C4: ${this.callbacks.getDungeonService().getDifficultyKorean(e)}`,"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550","",t.storyDescription,"","\uB2F9\uC2E0\uC740 \uB358\uC804\uC5D0 \uBC1C\uC744 \uB4E4\uC5EC\uB193\uC558\uC2B5\uB2C8\uB2E4..."]),console.log("\u{1F6AA} enterFloor(1) \uD638\uCD9C..."),this.enterFloor(1),this.callbacks.saveGame("autosave")}generateDungeon(t,e){let n=this.callbacks.getPlayerCharacter(),a=this.callbacks.getDungeonGenerator().generateDungeon(t,e,n.level);return a.playerSnapshot={hp:n.hp,mp:n.mp,level:n.level},this.callbacks.debugLogger.success("\uB358\uC804",`\u2705 \uB358\uC804 \uC0DD\uC131 \uC644\uB8CC: ${a.totalFloors}\uCE35, ${a.floors.reduce((s,m)=>s+m.rooms.length,0)}\uAC1C \uBC29`),a}enterFloor(t){if(!this._currentDungeon)return;let e=this._currentDungeon.floors[t-1];if(!e)return;this._currentDungeon.currentFloor=t;let n=e.rooms.find(a=>a.id===e.entranceRoomId);if(!n){console.warn("\u{1F50D} floor.rooms:",e.rooms.map(a=>({id:a.id,type:a.type})));return}this.enterRoom(n),this.callbacks.addStoryBlock(["",`\u2500\u2500\u2500 ${t}\uCE35 \u2500\u2500\u2500`,n?.description||"\uC0C8\uB85C\uC6B4 \uCE35\uC5D0 \uB3C4\uCC29\uD588\uC2B5\uB2C8\uB2E4.",""]),this.callbacks.debugLogger.info("\uB358\uC804",`\u{1F6AA} ${t}\uCE35 \uC9C4\uC785`)}enterRoom(t){this._currentDungeon&&(this._currentDungeonRoom&&(this._currentDungeonRoom.isCurrentRoom=!1),this._currentDungeonRoom=k({},t),t.isCurrentRoom=!0,t.isExplored=!0,this._currentDungeon.stats.roomsExplored++,this.callbacks.addStoryBlock(["",`\u{1F4CD} ${this.getRoomTypeKorean(t.type)}`,t.description,""]),t.monsters.length>0&&!t.isCleared?this.startDungeonCombat(t):console.log("\u2705 \uC804\uD22C \uC5C6\uC74C (\uBAAC\uC2A4\uD130:",t.monsters.length,", \uD074\uB9AC\uC5B4:",t.isCleared,")"),this.callbacks.debugLogger.info("\uB358\uC804",`\u{1F6AA} \uBC29 \uC9C4\uC785: ${t.type}`))}moveToNextRoom(){if(!this._currentDungeon||!this._currentDungeonRoom)return;let t=this._currentDungeonRoom.connectedRoomIds;if(t.length===0)return;let e=this._currentDungeon.floors[this._currentDungeon.currentFloor-1],n=e.rooms.find(a=>t.includes(a.id)&&!a.isExplored)||e.rooms.find(a=>t.includes(a.id));n&&this.enterRoom(n)}startDungeonCombat(t){if(this._dungeonTestOptions.skipCombat){this.callbacks.debugLogger.info("\uB358\uC804","\u23ED\uFE0F \uC804\uD22C \uC2A4\uD0B5 \uD65C\uC131\uD654 - \uC790\uB3D9 \uC2B9\uB9AC");let n=this.callbacks.getPlayerCharacter();t.monsters.forEach(a=>{a.hp=0,a.isDead=!0;let s=Math.floor(Math.random()*(a.dropTable.goldMax-a.dropTable.goldMin+1))+a.dropTable.goldMin,m=Math.floor(a.maxHp*.8);n.gold+=s,this.callbacks.gainExp(m),this._currentDungeon&&(this._currentDungeon.accumulatedRewards.gold+=s,this._currentDungeon.accumulatedRewards.experience+=m,this._currentDungeon.stats.monstersKilled++,a.type==="elite"?this._currentDungeon.stats.elitesKilled++:a.type==="boss"&&(this._currentDungeon.stats.bossKilled=!0,this._currentDungeon.stats.elitesKilled++))}),t.isCleared=!0,this.callbacks.addStoryBlock(["\u23ED\uFE0F \uC804\uD22C \uC790\uB3D9 \uC2B9\uB9AC!",`\u{1F480} ${t.monsters.length}\uB9C8\uB9AC \uCC98\uCE58`,"\uBC29\uC774 \uD074\uB9AC\uC5B4\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",""]),this.callbacks.debugLogger.info("\uB358\uC804",`\u{1F4BE} \uC804\uD22C \uC2A4\uD0B5 \uD6C4 \uC790\uB3D9 \uC800\uC7A5 (\uACBD\uD5D8\uCE58: ${n.exp}/${n.maxExp}, \uB808\uBCA8: ${n.level})`),this.callbacks.saveGame("auto_dungeon_skip_combat").then(()=>{});return}let e=t.monsters[0];this.callbacks.addStoryBlock([`\u2694\uFE0F ${e.name}\uC774(\uAC00) \uB098\uD0C0\uB0AC\uB2E4!`,`\uB808\uBCA8: ${e.level} | HP: ${e.hp}`,e.eliteAffixes?`\uD2B9\uC131: ${e.eliteAffixes.join(", ")}`:"",""])}winDungeonCombat(t,e){return O(this,null,function*(){if(!this._currentDungeon)return;e.isDead=!0;let n=this.callbacks.getPlayerCharacter(),a=Math.floor(Math.random()*(e.dropTable.goldMax-e.dropTable.goldMin+1))+e.dropTable.goldMin,s=Math.floor(e.maxHp*.8);n.gold+=a,this.callbacks.gainExp(s),this._currentDungeon.accumulatedRewards.gold+=a,this._currentDungeon.accumulatedRewards.experience+=s,this._currentDungeon.stats.monstersKilled++,e.type==="elite"?this._currentDungeon.stats.elitesKilled++:e.type==="boss"&&(this._currentDungeon.stats.bossKilled=!0,this._currentDungeon.stats.elitesKilled++),this.callbacks.addStoryBlock([`\u2705 ${e.name}\uC744(\uB97C) \uBB3C\uB9AC\uCCE4\uB2E4!`,`\u{1F4B0} \uACE8\uB4DC +${a}`,`\u{1F4AB} \uACBD\uD5D8\uCE58 +${s}`,""]),this.callbacks.debugLogger.info("\uB358\uC804",`\u{1F4BE} \uBAAC\uC2A4\uD130 \uCC98\uCE58 \uD6C4 \uC790\uB3D9 \uC800\uC7A5 (\uACBD\uD5D8\uCE58: ${n.exp}/${n.maxExp})`),yield this.callbacks.saveGame(`auto_dungeon_${this._currentDungeon.dungeonTypeId}`),t.monsters.every(m=>m.isDead)?(t.isCleared=!0,this.callbacks.addStoryBlock(["\u2705 \uBC29\uC744 \uD074\uB9AC\uC5B4\uD588\uC2B5\uB2C8\uB2E4!","\uB2E4\uC74C \uBC29\uC73C\uB85C \uC774\uB3D9\uD558\uC138\uC694.",""]),this.callbacks.debugLogger.info("\uB358\uC804","\u{1F4BE} \uBC29 \uD074\uB9AC\uC5B4 \uD6C4 \uC790\uB3D9 \uC800\uC7A5"),yield this.callbacks.saveGame("auto_dungeon_room_clear"),e.type==="boss"&&this.completeDungeon()):console.log("\u2694\uFE0F \uB0A8\uC740 \uBAAC\uC2A4\uD130:",t.monsters.filter(m=>!m.isDead).length,"\uB9C8\uB9AC"),this.callbacks.debugLogger.success("\uB358\uC804",`\u2705 \uC804\uD22C \uC2B9\uB9AC: ${e.name}`)})}completeDungeon(){return O(this,null,function*(){if(!this._currentDungeon)return;this._currentDungeon.status="completed",this._dungeonProgress.inDungeon=!1;let t=this._dungeonTypes.find(a=>a.id===this._currentDungeon.dungeonTypeId);this._dungeonProgress.clearedDungeons[t.id]||(this._dungeonProgress.clearedDungeons[t.id]={count:0,bestTime:1/0,highestDifficulty:"easy",lastClearDate:new Date});let e=this._dungeonProgress.clearedDungeons[t.id];e.count++,e.bestTime=Math.min(e.bestTime,this._currentDungeon.elapsedTime),e.lastClearDate=new Date,this._dungeonProgress.totalStats.dungeonsCleared++,this._dungeonProgress.totalStats.monstersKilled+=this._currentDungeon.stats.monstersKilled,this._dungeonProgress.totalStats.elitesKilled+=this._currentDungeon.stats.elitesKilled,this._dungeonProgress.totalStats.bossesKilled+=this._currentDungeon.stats.bossKilled?1:0,this._dungeonProgress.totalStats.totalGoldEarned+=this._currentDungeon.accumulatedRewards.gold,this._dungeonProgress.totalStats.totalExpEarned+=this._currentDungeon.accumulatedRewards.experience,this.callbacks.addStoryBlock(["","\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557","\u2551      \u{1F3C6} \uB358\uC804 \uD074\uB9AC\uC5B4! \u{1F3C6}          \u2551",`\u2551   ${t.koreanName} \uC815\uBCF5 \uC644\uB8CC   \u2551`,"\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D","","\u{1F4CA} \uD1B5\uACC4:",`  \u2022 \uCC98\uCE58\uD55C \uBAAC\uC2A4\uD130: ${this._currentDungeon.stats.monstersKilled}\uB9C8\uB9AC`,`  \u2022 \uCC98\uCE58\uD55C \uC5D8\uB9AC\uD2B8: ${this._currentDungeon.stats.elitesKilled}\uB9C8\uB9AC`,`  \u2022 \uD0D0\uD5D8\uD55C \uBC29: ${this._currentDungeon.stats.roomsExplored}\uAC1C`,"","\u{1F4B0} \uD68D\uB4DD \uBCF4\uC0C1:",`  \u2022 \uACE8\uB4DC: ${this._currentDungeon.accumulatedRewards.gold}G`,`  \u2022 \uACBD\uD5D8\uCE58: ${this._currentDungeon.accumulatedRewards.experience} EXP`,"","\uB2F9\uC2E0\uC740 \uB358\uC804\uC744 \uBB34\uC0AC\uD788 \uBE60\uC838\uB098\uC654\uC2B5\uB2C8\uB2E4."]),this._showDungeonPanel=!1,this._currentDungeon=null,this._currentDungeonRoom=null,this.callbacks.debugLogger.success("\uB358\uC804",`\u{1F3C6} \uB358\uC804 \uD074\uB9AC\uC5B4: ${t.koreanName} - \uC790\uB3D9 \uC800\uC7A5 \uC911...`);let n=this.callbacks.getPlayerCharacter();this.callbacks.debugLogger.info("\uB358\uC804",`\u{1F4BE} \uCD5C\uC885 \uB808\uBCA8: ${n.level}, \uACBD\uD5D8\uCE58: ${n.exp}/${n.maxExp}`),yield this.callbacks.saveGame(`dungeon_clear_${t.id}`)})}escapeDungeon(){this._currentDungeon&&(this._currentDungeon.status="failed",this._dungeonProgress.inDungeon=!1,this.callbacks.addStoryBlock(["","\u{1F6AA} \uB2F9\uC2E0\uC740 \uB358\uC804\uC5D0\uC11C \uD0C8\uCD9C\uD588\uC2B5\uB2C8\uB2E4.","\u{1F4B0} \uD68D\uB4DD\uD55C \uBCF4\uC0C1\uC740 \uC720\uC9C0\uB429\uB2C8\uB2E4.",""]),this._showDungeonPanel=!1,this._currentDungeon=null,this._currentDungeonRoom=null,this.closeDungeonDialog(),this.callbacks.saveGame("autosave"),this.callbacks.debugLogger.warn("\uB358\uC804","\u26A0\uFE0F \uB358\uC804 \uD0C8\uCD9C"))}onDungeonRoomMove(t){if(!this._currentDungeon)return;let e=this._currentDungeon.floors[this._currentDungeon.currentFloor-1];if(!e)return;let n=e.rooms.find(a=>a.id===t);n&&this.enterRoom(n)}onDungeonMonsterAttack(t){if(!this._currentDungeon||!this._currentDungeonRoom)return;this.callbacks.debugLogger.info("\uB358\uC804",`\u2694\uFE0F ${t.name} \uACF5\uACA9!`);let e=this.callbacks.getPlayerCharacter();if(this._dungeonTestOptions.oneHitKill)t.hp=0,t.isDead=!0,this.callbacks.debugLogger.success("\uB358\uC804",`\u{1F480} ${t.name} \uC989\uC0AC!`);else{let n=e.attack,a=e.strength*.5,s=.9+Math.random()*.4,m=Math.random()<.3,C=m?3:1,P=Math.floor((n+a)*s*C*1.8);t.hp=Math.max(0,t.hp-P),t.hp===0&&(t.isDead=!0),m?(this.callbacks.debugLogger.success("\uB358\uC804",`\u{1F4A5} \uD06C\uB9AC\uD2F0\uCEEC! \uD53C\uD574: ${P}, \uB0A8\uC740 HP: ${t.hp}`),this.callbacks.addStoryBlock([`\u{1F4A5} \uD06C\uB9AC\uD2F0\uCEEC \uD788\uD2B8! ${P}\uC758 \uAC15\uB825\uD55C \uD53C\uD574!`])):this.callbacks.debugLogger.info("\uB358\uC804",`\uD53C\uD574: ${P}, \uB0A8\uC740 HP: ${t.hp}`)}t.isDead&&this.winDungeonCombat(this._currentDungeonRoom,t),this._dungeonTestOptions.godMode&&(e.hp=e.maxHp)}onDungeonInteractableUse(t){if(!this._currentDungeon)return;this.callbacks.debugLogger.info("\uB358\uC804",`\u2728 ${t.name} \uC0AC\uC6A9`);let e=this.callbacks.getPlayerCharacter();if(t.type==="chest"){let n=Math.floor(100+Math.random()*200);e.gold+=n,this.callbacks.addStoryBlock([`\u{1F48E} ${t.name}\uC744(\uB97C) \uC5F4\uC5C8\uC2B5\uB2C8\uB2E4!`,`\u{1F4B0} \uACE8\uB4DC +${n}`,""]),this._currentDungeon.stats.treasuresFound++,t.isUsed=!0}else if(t.type==="shrine"&&t.shrineEffect){let n=t.shrineEffect;this.callbacks.addStoryBlock([`\u2728 ${t.name}\uC758 \uCD95\uBCF5\uC744 \uBC1B\uC558\uC2B5\uB2C8\uB2E4!`,`\uD6A8\uACFC: ${n.type} +${n.value}% (${n.duration}\uD134)`,""]),t.isUsed=!0}this.callbacks.debugLogger.success("\uB358\uC804",`\u2705 ${t.name} \uC0AC\uC6A9 \uC644\uB8CC`)}onDungeonEscape(){this.escapeDungeon()}onDungeonFloorMove(t){this.enterFloor(t)}onDungeonRewardsClaimed(t,e){let n=this.callbacks.getPlayerCharacter();if(t.exp>0){n.exp+=t.exp;let a=n.level*100;n.exp>=a,this.callbacks.notification.show(`\u2B50 ${t.exp} \uACBD\uD5D8\uCE58 \uD68D\uB4DD!`)}t.gold>0&&(n.gold+=t.gold,this.callbacks.notification.show(`\u{1F4B0} ${t.gold} \uACE8\uB4DC \uD68D\uB4DD!`)),t.items&&t.items.length>0&&t.items.forEach(a=>{let s=this.createDungeonRewardItem(a);e.push(s),this.callbacks.notification.show(`\u{1F381} ${s.name} \uD68D\uB4DD!`),this.callbacks.debugLogger.success("\uC544\uC774\uD15C",`\uD68D\uB4DD: ${s.name} (${s.rarity})`)}),this.callbacks.saveGame("autosave"),this.callbacks.debugLogger.success("\uB358\uC804",`\u{1F381} \uBCF4\uC0C1 \uD68D\uB4DD: EXP ${t.exp}, \uACE8\uB4DC ${t.gold}, \uC544\uC774\uD15C ${t.items.length}\uAC1C`)}createDungeonRewardItem(t){let e=["weapon","armor","accessory","consumable"],n=e[Math.floor(Math.random()*e.length)],s={common:1,uncommon:1.3,rare:1.7,epic:2.2,legendary:3}[t.rarity]||1,m=t.level||1,C={id:`dungeon_${Date.now()}_${Math.random()}`,name:t.name,type:n,rarity:t.rarity,level:m,requiredLevel:Math.max(1,m-2),description:`\uB358\uC804\uC5D0\uC11C \uD68D\uB4DD\uD55C ${t.rarity} \uB4F1\uAE09 \uC544\uC774\uD15C`,stats:{},price:Math.floor(m*50*s),sellPrice:Math.floor(m*25*s),obtainedFrom:"dungeon",obtainedAt:new Date().toISOString()};if(n==="weapon")C.stats={attack:Math.floor((5+m*3)*s),criticalChance:Math.floor(Math.random()*10*s)},C.slot="weapon";else if(n==="armor"){let x=["helmet","chest","legs","boots","gloves"];C.slot=x[Math.floor(Math.random()*x.length)],C.stats={defense:Math.floor((3+m*2)*s),hp:Math.floor((10+m*5)*s)}}else if(n==="accessory"){let x=["ring","necklace","belt"];C.slot=x[Math.floor(Math.random()*x.length)],C.stats={attack:Math.floor((2+m)*s),defense:Math.floor((2+m)*s),hp:Math.floor((5+m*2)*s)}}else n==="consumable"&&(C.consumable=!0,C.stackable=!0,C.maxStack=99,C.quantity=1,C.effect={type:Math.random()>.5?"heal":"buff",value:Math.floor(50*s)});let P={common:"\uD3C9\uBC94\uD55C",uncommon:"\uACE0\uAE09",rare:"\uD76C\uADC0\uD55C",epic:"\uC601\uC6C5\uC758",legendary:"\uC804\uC124\uC758"};return C.name=`${P[t.rarity]||""} ${C.name}`,C}toggleDungeonTestOption(t){this._dungeonTestOptions[t]=!this._dungeonTestOptions[t],this.callbacks.debugLogger.info("\uB358\uC804",`\uD14C\uC2A4\uD2B8 \uC635\uC158 \uBCC0\uACBD: ${t} = ${this._dungeonTestOptions[t]}`)}revealAllRooms(){this._currentDungeon&&(this._currentDungeon.floors.forEach(t=>{t.rooms.forEach(e=>{e.isExplored=!0})}),this.callbacks.debugLogger.success("\uB358\uC804","\u{1F5FA}\uFE0F \uBAA8\uB4E0 \uBC29 \uACF5\uAC1C \uC644\uB8CC"))}unlockAllRooms(){this._currentDungeon&&(this._currentDungeon.floors.forEach(t=>{t.rooms.forEach(e=>{e.interactables.forEach(n=>{n.isLocked&&(n.isLocked=!1)})})}),this.callbacks.debugLogger.success("\uB358\uC804","\u{1F513} \uBAA8\uB4E0 \uBC29 \uC7A0\uAE08 \uD574\uC81C \uC644\uB8CC"))}getDifficultyKorean(t){return{easy:"\uC26C\uC6C0",normal:"\uBCF4\uD1B5",hard:"\uC5B4\uB824\uC6C0",hell:"\uC9C0\uC625"}[t]}getRoomTypeKorean(t){return{entrance:"\uC785\uAD6C",normal:"\uC77C\uBC18 \uBC29",elite:"\uC5D8\uB9AC\uD2B8 \uBC29",boss:"\uBCF4\uC2A4 \uBC29",treasure:"\uBCF4\uBB3C \uBC29",shrine:"\uC131\uC18C",shop:"\uC0C1\uC810",safe:"\uC548\uC804 \uC9C0\uB300",event:"\uC774\uBCA4\uD2B8 \uBC29",exit:"\uCD9C\uAD6C"}[t]||"\uC54C \uC218 \uC5C6\uB294 \uBC29"}getPlayerEquipment(){let t=this.callbacks.getPlayerCharacter();return{weapon:t.equippedItems?.weapon||null,armor:{helmet:t.equippedItems?.helmet||null,chest:t.equippedItems?.chest||null,legs:t.equippedItems?.legs||null,boots:t.equippedItems?.boots||null,gloves:t.equippedItems?.gloves||null},accessories:{ring:t.equippedItems?.ring||null,necklace:t.equippedItems?.necklace||null,belt:t.equippedItems?.belt||null}}}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var fe=class r{dbName="NovelItemDB";storeName="items";db=null;constructor(){this.initDB()}initDB(){return O(this,null,function*(){return new Promise((t,e)=>{let n=indexedDB.open(this.dbName,1);n.onerror=()=>{e(n.error)},n.onsuccess=()=>{this.db=n.result,t()},n.onupgradeneeded=a=>{let s=a.target.result;if(!s.objectStoreNames.contains(this.storeName)){let m=s.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0});m.createIndex("name","name",{unique:!1}),m.createIndex("type","type",{unique:!1}),m.createIndex("grade","grade",{unique:!1}),m.createIndex("createdAt","createdAt",{unique:!1})}}})})}saveItem(t){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let m=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).add(t);m.onsuccess=()=>{e(m.result)},m.onerror=()=>{n(m.error)}})})}getAllItems(){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,e)=>{let s=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();s.onsuccess=()=>{let m=s.result;m.sort((C,P)=>new Date(P.createdAt).getTime()-new Date(C.createdAt).getTime()),t(m)},s.onerror=()=>{e(s.error)}})})}getItem(t){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let m=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(t);m.onsuccess=()=>{e(m.result)},m.onerror=()=>{n(m.error)}})})}deleteItem(t){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let m=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(t);m.onsuccess=()=>{e()},m.onerror=()=>{n(m.error)}})})}getItemsByType(t){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let C=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("type").getAll(t);C.onsuccess=()=>{e(C.result)},C.onerror=()=>{n(C.error)}})})}getItemsByGrade(t){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let C=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("grade").getAll(t);C.onsuccess=()=>{e(C.result)},C.onerror=()=>{n(C.error)}})})}clearAllItems(){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,e)=>{let s=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();s.onsuccess=()=>{t()},s.onerror=()=>{e(s.error)}})})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var ft=class r{constructor(t,e,n,a){this.geminiAiService=t;this.itemDbService=e;this.notification=n;this.dialog=a}generateAiItems(t,e,n,a,s){n();let m=[],C=t?[t]:["\uBB34\uAE30","\uBC29\uC5B4\uAD6C","\uC18C\uBE44\uD488","\uC7A5\uC2E0\uAD6C"],P=e?[e]:["\uC77C\uBC18","\uACE0\uAE09","\uD76C\uADC0","\uC601\uC6C5","\uC804\uC124"],x=0,w=10,g="";for(let G=0;G<w;G++){let $=C[Math.floor(Math.random()*C.length)],V=P[Math.floor(Math.random()*P.length)];this.geminiAiService.generateItem($,V).subscribe({next:Q=>{m.push(Q),a(Q),x++,x===w&&s(m)},error:Q=>{x++,g=Q.message||"AI \uC544\uC774\uD15C \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",x===w&&(m.length===0?s(m,g):s(m))}})}}saveGeneratedItem(t,e,n){return O(this,null,function*(){if(!t)return;let a=this.calculateItemPriceByGrade(t.grade||"\uC77C\uBC18"),s={name:t.name||"\uC774\uB984 \uC5C6\uC74C",description:t.description||"",type:t.type||"\uAE30\uD0C0",grade:t.grade||"\uC77C\uBC18",effects:t.effects||[],stats:t.stats||{},requirements:t.requirements||"",lore:t.lore||"",tags:t.tags||[],price:a,createdAt:new Date};try{yield this.itemDbService.saveItem(s),this.notification.show("\uC544\uC774\uD15C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),e()}catch{this.notification.show("\uC544\uC774\uD15C \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),n()}})}saveGeneratedItemByIndex(t,e,n,a){return O(this,null,function*(){let s=t[e];if(!s)return;let m=this.calculateItemPriceByGrade(s.grade||"\uC77C\uBC18"),C={name:s.name||"\uC774\uB984 \uC5C6\uC74C",description:s.description||"",type:s.type||"\uAE30\uD0C0",grade:s.grade||"\uC77C\uBC18",effects:s.effects||[],stats:s.stats||{},requirements:s.requirements||"",lore:s.lore||"",tags:s.tags||[],price:m,createdAt:new Date};try{yield this.itemDbService.saveItem(C),this.notification.show(`${s.name}\uC774(\uAC00) \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`),n()}catch{this.notification.show("\uC544\uC774\uD15C \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),a()}})}saveAllGeneratedItems(t,e){return O(this,null,function*(){if(t.length===0)return;let n=0;for(let a of t){let s=this.calculateItemPriceByGrade(a.grade||"\uC77C\uBC18"),m={name:a.name||"\uC774\uB984 \uC5C6\uC74C",description:a.description||"",type:a.type||"\uAE30\uD0C0",grade:a.grade||"\uC77C\uBC18",effects:a.effects||[],stats:a.stats||{},requirements:a.requirements||"",lore:a.lore||"",tags:a.tags||[],price:s,createdAt:new Date};try{yield this.itemDbService.saveItem(m),n++}catch{}}this.notification.show(`${n}\uAC1C\uC758 \uC544\uC774\uD15C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`),e(n)})}debugInventory(t,e){let n=`\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`;n+=`\u{1F50D} \uC778\uBCA4\uD1A0\uB9AC \uB514\uBC84\uADF8 \uC815\uBCF4
`,n+=`\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

`,n+=`\u{1F4E6} \uCD1D \uC544\uC774\uD15C \uC218: ${t.length}\uAC1C

`;let a=[],s=[];t.forEach((C,P)=>{let x={index:P+1,name:C.name,type:C.type,rarity:C.rarity,hasStats:!!C.stats,stats:C.stats};C.stats?a.push(x):s.push(x)}),a.length>0&&(n+=`\u2705 Stats \uC788\uB294 \uC544\uC774\uD15C (${a.length}\uAC1C):
`,n+=`\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`,a.forEach(C=>{n+=`
[${C.index}] ${C.name}
`,n+=`   \uD0C0\uC785: ${C.type} | \uD76C\uADC0\uB3C4: ${C.rarity}
`,n+=`   Stats: \u2705 \uC788\uC74C
`;let P=C.stats,x=[];P.minDamage&&x.push(`\uB370\uBBF8\uC9C0 ${P.minDamage}-${P.maxDamage}`),P.attack&&x.push(`\uACF5\uACA9\uB825 +${P.attack}`),P.defense&&x.push(`\uBC29\uC5B4\uB825 +${P.defense}`),P.armor&&x.push(`\uBC29\uC5B4\uB3C4 +${P.armor}`),P.hp&&x.push(`\uC0DD\uBA85\uB825 +${P.hp}`),P.mp&&x.push(`\uB9C8\uB098 +${P.mp}`),P.critChance&&x.push(`\uD06C\uB9AC\uD2F0\uCEEC +${P.critChance}%`),P.lifeSteal&&x.push(`\uC0DD\uBA85\uD761\uC218 ${P.lifeSteal}%`),P.fireResist&&x.push(`\uD654\uC5FC\uC800\uD56D +${P.fireResist}%`),P.coldResist&&x.push(`\uB0C9\uAE30\uC800\uD56D +${P.coldResist}%`),P.lightningResist&&x.push(`\uBC88\uAC1C\uC800\uD56D +${P.lightningResist}%`),P.allResist&&x.push(`\uBAA8\uB4E0\uC800\uD56D +${P.allResist}%`),x.length>0&&(n+=`   \uC8FC\uC694 \uC18D\uC131: ${x.slice(0,5).join(", ")}
`,x.length>5&&(n+=`   + ${x.length-5}\uAC1C \uB354...
`))})),s.length>0&&(n+=`

\u274C Stats \uC5C6\uB294 \uC544\uC774\uD15C (${s.length}\uAC1C):
`,n+=`\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`,s.forEach(C=>{n+=`[${C.index}] ${C.name} (${C.type}) - \u26A0\uFE0F Stats \uC5C6\uC74C!
`})),n+=`
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`,n+=`\u{1F4CA} \uC694\uC57D:
`,n+=`   \uCD1D \uC544\uC774\uD15C: ${t.length}\uAC1C
`,n+=`   Stats \uC788\uC74C: ${a.length}\uAC1C \u2705
`,n+=`   Stats \uC5C6\uC74C: ${s.length}\uAC1C \u274C
`,s.length>0?(n+=`
\u26A0\uFE0F \uACBD\uACE0: ${s.length}\uAC1C \uC544\uC774\uD15C\uC5D0 \uB514\uC544\uBE14\uB85C \uC18D\uC131\uC774 \uC5C6\uC2B5\uB2C8\uB2E4!
`,n+=`
\uD574\uACB0 \uBC29\uBC95:
`,n+=`1. "\u{1F504} \uC778\uBCA4\uD1A0\uB9AC \uCD08\uAE30\uD654" \uBC84\uD2BC \uD074\uB9AD
`,n+=`2. "\u{1F5D1}\uFE0F \uAC8C\uC784 \uB370\uC774\uD130 \uCD08\uAE30\uD654" \uBC84\uD2BC \uD074\uB9AD
`):n+=`
\u2705 \uBAA8\uB4E0 \uC544\uC774\uD15C\uC5D0 \uB514\uC544\uBE14\uB85C \uC18D\uC131\uC774 \uC788\uC2B5\uB2C8\uB2E4!
`,n+="\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501",this.dialog.open(J,{width:"800px",maxHeight:"80vh",data:{title:"\u{1F50D} \uC778\uBCA4\uD1A0\uB9AC \uB514\uBC84\uADF8 \uC815\uBCF4",message:n,confirmText:s.length>0?"\uC778\uBCA4\uD1A0\uB9AC \uCD08\uAE30\uD654":"\uD655\uC778",cancelText:"\uB2EB\uAE30"}}).afterClosed().subscribe(C=>{C&&s.length>0&&e()})}calculateItemPriceByGrade(t){return{\uC77C\uBC18:100,\uACE0\uAE09:500,\uD76C\uADC0:2e3,\uC601\uC6C5:1e4,\uC804\uC124:5e4}[t]||100}static \u0275fac=function(e){return new(e||r)(N(Ie),N(fe),N(te),N(Se))};static \u0275prov=D({token:r,factory:r.\u0275fac})};var bt=class r{constructor(t){this.notification=t}loadSampleStoryMap(t,e){let n=[{id:"start",type:"story",title:"\uC2DC\uC791",content:["\uB2F9\uC2E0\uC740 \uBB34\uB9BC\uC758 \uC791\uC740 \uB9C8\uC744\uC5D0\uC11C \uD0DC\uC5B4\uB0AC\uC2B5\uB2C8\uB2E4. \uC624\uB298\uC740 \uB2F9\uC2E0\uC758 \uC131\uC778\uC2DD \uB0A0\uC785\uB2C8\uB2E4."],choices:[{id:"choice-1",text:"\uB9C8\uC744 \uBB34\uC220 \uB3C4\uC7A5\uC73C\uB85C \uD5A5\uD55C\uB2E4",targetNodeId:"dojo"},{id:"choice-2",text:"\uC232 \uC18D \uC740\uB454 \uACE0\uC218\uB97C \uCC3E\uC544\uAC04\uB2E4",targetNodeId:"forest"}],position:{x:400,y:100},parentIds:[],childIds:["dojo","forest"],isVisited:!0,isCurrent:!1,isAvailable:!0},{id:"dojo",type:"story",title:"\uBB34\uC220 \uB3C4\uC7A5",content:['\uB3C4\uC7A5\uC758 \uC0AC\uBC94\uC774 \uB2F9\uC2E0\uC744 \uBCF4\uACE0 \uBBF8\uC18C\uB97C \uC9D3\uC2B5\uB2C8\uB2E4. "\uC790\uB124\uC758 \uC7AC\uB2A5\uC774 \uBCF4\uC774\uB294\uAD6C\uB098."'],choices:[{id:"choice-3",text:"\uAC80\uC220\uC744 \uBC30\uC6B4\uB2E4",targetNodeId:"sword-path"},{id:"choice-4",text:"\uAD8C\uBC95\uC744 \uBC30\uC6B4\uB2E4",targetNodeId:"fist-path"}],position:{x:200,y:250},parentIds:["start"],childIds:["sword-path","fist-path"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"forest",type:"story",title:"\uC232 \uC18D\uC758 \uB9CC\uB0A8",content:["\uAE4A\uC740 \uC232\uC5D0\uC11C \uBC31\uBC1C\uC758 \uB178\uC778\uC744 \uB9CC\uB0AC\uC2B5\uB2C8\uB2E4. \uADF8\uB294 \uB2F9\uC2E0\uC744 \uC624\uB798 \uAE30\uB2E4\uB838\uB2E4\uACE0 \uB9D0\uD569\uB2C8\uB2E4."],choices:[{id:"choice-5",text:"\uB0B4\uACF5 \uC218\uB828\uC744 \uC2DC\uC791\uD55C\uB2E4",targetNodeId:"inner-power"},{id:"choice-6",text:"\uACBD\uACF5\uC220\uC744 \uBC30\uC6B4\uB2E4",targetNodeId:"lightness-skill"}],position:{x:600,y:250},parentIds:["start"],childIds:["inner-power","lightness-skill"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"sword-path",type:"story",title:"\uAC80\uC758 \uAE38",content:["\uB2F9\uC2E0\uC740 \uAC80\uC220\uC758 \uAE30\uCD08\uB97C \uC775\uD614\uC2B5\uB2C8\uB2E4. \uC774\uC81C \uC2E4\uC804 \uACBD\uD5D8\uC774 \uD544\uC694\uD569\uB2C8\uB2E4."],choices:[{id:"choice-7",text:"\uBB34\uB9BC\uB300\uD68C\uC5D0 \uCC38\uAC00\uD55C\uB2E4",targetNodeId:"tournament"},{id:"choice-8",text:"\uC0B0\uC801 \uD1A0\uBC8C\uC5D0 \uB098\uC120\uB2E4",targetNodeId:"bandit-hunt"}],position:{x:100,y:400},parentIds:["dojo"],childIds:["tournament","bandit-hunt"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"fist-path",type:"story",title:"\uAD8C\uBC95\uC758 \uAE38",content:["\uAC15\uB825\uD55C \uAD8C\uBC95\uC744 \uC775\uD78C \uB2F9\uC2E0\uC740 \uC774\uC81C \uBB34\uB9BC\uC5D0 \uC774\uB984\uC744 \uC54C\uB9B4 \uC900\uBE44\uAC00 \uB418\uC5C8\uC2B5\uB2C8\uB2E4."],choices:[{id:"choice-9",text:"\uC815\uD30C\uC5D0 \uAC00\uC785\uD55C\uB2E4",targetNodeId:"righteous-sect"},{id:"choice-10",text:"\uD640\uB85C \uC218\uB828\uC744 \uACC4\uC18D\uD55C\uB2E4",targetNodeId:"solo-training"}],position:{x:300,y:400},parentIds:["dojo"],childIds:["righteous-sect","solo-training"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"inner-power",type:"story",title:"\uB0B4\uACF5\uC758 \uC218\uB828",content:["\uAC15\uB825\uD55C \uB0B4\uACF5\uC744 \uC313\uC740 \uB2F9\uC2E0\uC740 \uD2B9\uBCC4\uD55C \uB2A5\uB825\uC744 \uAC01\uC131\uD588\uC2B5\uB2C8\uB2E4."],choices:[{id:"choice-11",text:"\uBE44\uAE09\uC744 \uCC3E\uC544 \uB098\uC120\uB2E4",targetNodeId:"secret-manual"},{id:"choice-12",text:"\uC81C\uC790\uB97C \uBC1B\uC544\uB4E4\uC778\uB2E4",targetNodeId:"disciple"}],position:{x:500,y:400},parentIds:["forest"],childIds:["secret-manual","disciple"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"lightness-skill",type:"story",title:"\uACBD\uACF5\uC758 \uB2EC\uC778",content:["\uB204\uAD6C\uBCF4\uB2E4 \uBE60\uB978 \uC2E0\uBC95\uC744 \uC775\uD78C \uB2F9\uC2E0\uC740 \uBB34\uB9BC\uC5D0\uC11C \uC8FC\uBAA9\uBC1B\uAE30 \uC2DC\uC791\uD569\uB2C8\uB2E4."],choices:[{id:"choice-13",text:"\uC554\uD589\uC5B4\uC0AC\uAC00 \uB41C\uB2E4",targetNodeId:"secret-agent"},{id:"choice-14",text:"\uC758\uC801\uC774 \uB41C\uB2E4",targetNodeId:"righteous-thief"}],position:{x:700,y:400},parentIds:["forest"],childIds:["secret-agent","righteous-thief"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"tournament",type:"battle",title:"\uBB34\uB9BC\uB300\uD68C",content:["\uBB34\uB9BC\uB300\uD68C\uC5D0\uC11C \uAC15\uC801\uC744 \uB9CC\uB0AC\uC2B5\uB2C8\uB2E4!"],battleConfig:{enemyId:"sword-master",enemyName:"\uCC9C\uD558\uC81C\uC77C\uAC80",difficulty:10,winNodeId:"leader-path",loseNodeId:"start",rewards:{exp:100,gold:200}},choices:[{id:"choice-15",text:"\uBB34\uB9BC\uB9F9\uC8FC\uAC00 \uB41C\uB2E4",targetNodeId:"leader-path",type:"special"}],position:{x:50,y:550},parentIds:["sword-path"],childIds:["leader-path"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"bandit-hunt",type:"battle",title:"\uC0B0\uC801 \uD1A0\uBC8C",content:["\uC0B0\uC801 \uB450\uBAA9\uACFC \uB9DE\uC11C\uAC8C \uB418\uC5C8\uC2B5\uB2C8\uB2E4!"],battleConfig:{enemyId:"bandit-boss",enemyName:"\uC0B0\uC801 \uB450\uBAA9",difficulty:8,winNodeId:"hero-path",loseNodeId:"start",rewards:{exp:80,gold:150}},choices:[{id:"choice-16",text:"\uC601\uC6C5\uC73C\uB85C \uCD94\uC559\uBC1B\uB2E4",targetNodeId:"hero-path",type:"special"}],position:{x:200,y:550},parentIds:["sword-path"],childIds:["hero-path"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"righteous-sect",type:"story",title:"\uC815\uD30C\uC758 \uC77C\uC6D0",content:["\uB2F9\uC2E0\uC740 \uC815\uD30C\uC758 \uD575\uC2EC \uC778\uBB3C\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4."],choices:[{id:"choice-17",text:"\uC0AC\uD30C\uC640\uC758 \uC804\uC7C1\uC744 \uC900\uBE44\uD55C\uB2E4",targetNodeId:"war-preparation"}],position:{x:350,y:550},parentIds:["fist-path"],childIds:["war-preparation"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"solo-training",type:"story",title:"\uD640\uB85C \uC120 \uC790",content:["\uB2F9\uC2E0\uC740 \uC815\uC0AC\uD30C\uB97C \uCD08\uC6D4\uD55C \uACBD\uC9C0\uC5D0 \uC774\uB974\uB800\uC2B5\uB2C8\uB2E4."],choices:[{id:"choice-18",text:"\uC804\uC124\uC774 \uB418\uB2E4",targetNodeId:"legend-ending"}],position:{x:500,y:550},parentIds:["fist-path"],childIds:["legend-ending"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"secret-manual",type:"story",title:"\uC808\uC138\uBE44\uAE09",content:["\uC804\uC124\uC758 \uBE44\uAE09\uC744 \uC190\uC5D0 \uB123\uC5C8\uC2B5\uB2C8\uB2E4!"],choices:[{id:"choice-19",text:"\uCC9C\uD558\uC81C\uC77C\uC774 \uB41C\uB2E4",targetNodeId:"supreme-ending"}],position:{x:650,y:550},parentIds:["inner-power"],childIds:["supreme-ending"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"disciple",type:"story",title:"\uC2A4\uC2B9\uC758 \uAE38",content:["\uB2F9\uC2E0\uC740 \uB6F0\uC5B4\uB09C \uC81C\uC790\uB4E4\uC744 \uAE38\uB7EC\uB0C8\uC2B5\uB2C8\uB2E4."],choices:[{id:"choice-20",text:"\uBB38\uD30C\uB97C \uCC3D\uC2DC\uD55C\uB2E4",targetNodeId:"sect-ending"}],position:{x:400,y:650},parentIds:["inner-power"],childIds:["sect-ending"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"secret-agent",type:"story",title:"\uC554\uD589\uC5B4\uC0AC",content:["\uB2F9\uC2E0\uC740 \uC655\uBA85\uC744 \uBC1B\uB4E4\uC5B4 \uBB34\uB9BC\uC744 \uAC10\uC2DC\uD569\uB2C8\uB2E4."],choices:[{id:"choice-21",text:"\uD3C9\uD654\uB97C \uC9C0\uD0A8\uB2E4",targetNodeId:"peace-ending"}],position:{x:600,y:650},parentIds:["lightness-skill"],childIds:["peace-ending"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"righteous-thief",type:"story",title:"\uC758\uC801",content:["\uB2F9\uC2E0\uC740 \uD0D0\uAD00\uC624\uB9AC\uB4E4\uC744 \uC751\uC9D5\uD558\uBA70 \uBC31\uC131\uB4E4\uC744 \uB3D5\uC2B5\uB2C8\uB2E4."],choices:[{id:"choice-22",text:"\uBBFC\uC911\uC758 \uC601\uC6C5\uC774 \uB41C\uB2E4",targetNodeId:"hero-ending"}],position:{x:800,y:650},parentIds:["lightness-skill"],childIds:["hero-ending"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"war-preparation",type:"story",title:"\uC815\uC0AC\uB300\uC804 \uC900\uBE44",content:["\uC815\uD30C\uC640 \uC0AC\uD30C\uC758 \uB300\uC804\uC774 \uB2E4\uAC00\uC635\uB2C8\uB2E4."],choices:[{id:"choice-23",text:"\uACB0\uC804\uC744 \uBC8C\uC778\uB2E4",targetNodeId:"final-battle"}],position:{x:350,y:700},parentIds:["righteous-sect"],childIds:["final-battle"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"leader-path",type:"ending",title:"\uBB34\uB9BC\uB9F9\uC8FC \uC5D4\uB529",content:["\uB2F9\uC2E0\uC740 \uBB34\uB9BC\uB9F9\uC8FC\uAC00 \uB418\uC5B4 \uBB34\uB9BC\uC744 \uC774\uB04C\uAC8C \uB418\uC5C8\uC2B5\uB2C8\uB2E4.","\uD3C9\uD654\uB85C\uC6B4 \uBB34\uB9BC\uC744 \uB9CC\uB4E4\uAE30 \uC704\uD55C \uC5EC\uC815\uC774 \uC2DC\uC791\uB429\uB2C8\uB2E4."],position:{x:100,y:800},parentIds:["tournament"],childIds:[],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"hero-path",type:"ending",title:"\uD611\uAC1D \uC5D4\uB529",content:["\uB2F9\uC2E0\uC740 \uC758\uB85C\uC6B4 \uD611\uAC1D\uC73C\uB85C \uBB34\uB9BC\uC5D0 \uC774\uB984\uC744 \uB0A8\uACBC\uC2B5\uB2C8\uB2E4.","\uBC31\uC131\uB4E4\uC740 \uB2F9\uC2E0\uC744 \uC601\uC6C5\uC73C\uB85C \uAE30\uC5B5\uD569\uB2C8\uB2E4."],position:{x:250,y:800},parentIds:["bandit-hunt"],childIds:[],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"legend-ending",type:"ending",title:"\uC804\uC124 \uC5D4\uB529",content:["\uB2F9\uC2E0\uC740 \uBB34\uB9BC\uC758 \uC804\uC124\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4.","\uD6C4\uB300 \uC0AC\uB78C\uB4E4\uC740 \uB2F9\uC2E0\uC758 \uC774\uC57C\uAE30\uB97C \uC804\uC124\uCC98\uB7FC \uC774\uC57C\uAE30\uD569\uB2C8\uB2E4."],position:{x:500,y:800},parentIds:["solo-training"],childIds:[],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"supreme-ending",type:"ending",title:"\uCC9C\uD558\uC81C\uC77C \uC5D4\uB529",content:["\uB2F9\uC2E0\uC740 \uCC9C\uD558\uC81C\uC77C\uC758 \uACE0\uC218\uAC00 \uB418\uC5C8\uC2B5\uB2C8\uB2E4.","\uBB34\uB9BC\uC5D0\uC11C \uB2F9\uC2E0\uC744 \uB2F9\uD560 \uC790\uB294 \uC544\uBB34\uB3C4 \uC5C6\uC2B5\uB2C8\uB2E4."],position:{x:650,y:800},parentIds:["secret-manual"],childIds:[],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"sect-ending",type:"ending",title:"\uC885\uC0AC \uC5D4\uB529",content:["\uB2F9\uC2E0\uC740 \uC704\uB300\uD55C \uBB38\uD30C\uB97C \uCC3D\uC2DC\uD588\uC2B5\uB2C8\uB2E4.","\uB2F9\uC2E0\uC758 \uC81C\uC790\uB4E4\uC774 \uBB34\uB9BC\uC744 \uC774\uB04C\uC5B4\uAC11\uB2C8\uB2E4."],position:{x:400,y:800},parentIds:["disciple"],childIds:[],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"peace-ending",type:"ending",title:"\uD3C9\uD654\uC218\uD638\uC790 \uC5D4\uB529",content:["\uB2F9\uC2E0\uC740 \uBB34\uB9BC\uC758 \uD3C9\uD654\uB97C \uC9C0\uCF30\uC2B5\uB2C8\uB2E4.","\uB2F9\uC2E0\uC758 \uACF5\uB85C\uB85C \uBB34\uB9BC\uC5D0 \uD3C9\uD654\uAC00 \uCC3E\uC544\uC654\uC2B5\uB2C8\uB2E4."],position:{x:600,y:800},parentIds:["secret-agent"],childIds:[],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"hero-ending",type:"ending",title:"\uBBFC\uC911\uC601\uC6C5 \uC5D4\uB529",content:["\uB2F9\uC2E0\uC740 \uBBFC\uC911\uC758 \uC601\uC6C5\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4.","\uBC31\uC131\uB4E4\uC740 \uB2F9\uC2E0\uC744 \uC758\uB85C\uC6B4 \uD611\uAC1D\uC73C\uB85C \uCD94\uC559\uD569\uB2C8\uB2E4."],position:{x:800,y:800},parentIds:["righteous-thief"],childIds:[],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"final-battle",type:"battle",title:"\uC815\uC0AC\uB300\uC804",content:["\uC815\uD30C\uC640 \uC0AC\uD30C\uC758 \uCD5C\uD6C4 \uACB0\uC804\uC774 \uC2DC\uC791\uB429\uB2C8\uB2E4!"],battleConfig:{enemyId:"demon-lord",enemyName:"\uB9C8\uAD50\uAD50\uC8FC",difficulty:15,winNodeId:"savior-ending",loseNodeId:"start",rewards:{exp:200,gold:500}},choices:[{id:"choice-24",text:"\uBB34\uB9BC\uC744 \uAD6C\uD558\uB2E4",targetNodeId:"savior-ending",type:"ending"}],position:{x:350,y:850},parentIds:["war-preparation"],childIds:["savior-ending"],isVisited:!1,isCurrent:!1,isAvailable:!1},{id:"savior-ending",type:"ending",title:"\uAD6C\uC138\uC8FC \uC5D4\uB529",content:["\uB2F9\uC2E0\uC740 \uBB34\uB9BC\uC744 \uAD6C\uD55C \uC601\uC6C5\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4.","\uB2F9\uC2E0\uC758 \uC774\uB984\uC740 \uC601\uC6D0\uD788 \uBB34\uB9BC\uC758 \uC5ED\uC0AC\uC5D0 \uB0A8\uC744 \uAC83\uC785\uB2C8\uB2E4."],position:{x:350,y:1e3},parentIds:["final-battle"],childIds:[],isVisited:!1,isCurrent:!1,isAvailable:!1}],a=[];n.forEach(m=>{m.choices&&m.choices.forEach(C=>{if(C.targetNodeId){let P=n.find(x=>x.id===C.targetNodeId);if(P){let x=m.position.x,w=m.position.y,g=P.position.x,G=P.position.y,$=(w+G)/2,V=`M ${x} ${w} C ${x} ${$}, ${g} ${$}, ${g} ${G}`;a.push({id:`${m.id}-${C.targetNodeId}`,from:m.id,to:C.targetNodeId,path:V,isVisited:!1,isCurrent:!1,color:"#64748b",width:2})}}})});let s=n.find(m=>m.id==="start");s&&e(s.content),t(n,a,"start"),this.notification.show("\u{1F4DA} \uC0D8\uD50C \uC2A4\uD1A0\uB9AC\uAC00 \uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!")}getNodeIcon(t){switch(t.type){case"start":return"\u{1F3AC}";case"story":return"\u{1F4D6}";case"battle":return"\u2694\uFE0F";case"event":return"\u2728";case"ending":return"\u{1F3C1}";default:return"\u{1F4CD}"}}calculateExplorationRate(t){if(t.length===0)return 0;let e=t.length,n=t.filter(a=>a.isVisited).length;return Math.round(n/e*100)}getCurrentNode(t,e){return!e||t.length===0?null:t.find(n=>n.id===e)||null}getNodeById(t,e){return t.find(n=>n.id===e)||null}static \u0275fac=function(e){return new(e||r)(N(te))};static \u0275prov=D({token:r,factory:r.\u0275fac})};var be=class r{dbName="NovelScenarioDB";dbVersion=1;storeName="scenarios";db=null;constructor(){this.initDB()}initDB(){return O(this,null,function*(){return new Promise((t,e)=>{let n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=()=>{e(n.error)},n.onsuccess=()=>{this.db=n.result,t()},n.onupgradeneeded=a=>{let s=a.target.result;if(!s.objectStoreNames.contains(this.storeName)){let m=s.createObjectStore(this.storeName,{keyPath:"id"});m.createIndex("title","title",{unique:!1}),m.createIndex("genre","genre",{unique:!1}),m.createIndex("createdAt","createdAt",{unique:!1})}}})})}ensureDB(){return O(this,null,function*(){return this.db||(yield this.initDB()),this.db})}saveScenario(t){return O(this,null,function*(){let e=yield this.ensureDB();return new Promise((n,a)=>{let C=e.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(t);C.onsuccess=()=>{n()},C.onerror=()=>{a(C.error)}})})}getAllScenarios(){return O(this,null,function*(){let t=yield this.ensureDB();return new Promise((e,n)=>{let m=t.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();m.onsuccess=()=>{let C=m.result;C.sort((P,x)=>new Date(x.createdAt).getTime()-new Date(P.createdAt).getTime()),e(C)},m.onerror=()=>{n(m.error)}})})}getScenario(t){return O(this,null,function*(){let e=yield this.ensureDB();return new Promise((n,a)=>{let C=e.transaction([this.storeName],"readonly").objectStore(this.storeName).get(t);C.onsuccess=()=>{n(C.result||null)},C.onerror=()=>{a(C.error)}})})}deleteScenario(t){return O(this,null,function*(){let e=yield this.ensureDB();return new Promise((n,a)=>{let C=e.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(t);C.onsuccess=()=>{n()},C.onerror=()=>{a(C.error)}})})}getScenariosByGenre(t){return O(this,null,function*(){let e=yield this.ensureDB();return new Promise((n,a)=>{let P=e.transaction([this.storeName],"readonly").objectStore(this.storeName).index("genre").getAll(t);P.onsuccess=()=>{let x=P.result;x.sort((w,g)=>new Date(g.createdAt).getTime()-new Date(w.createdAt).getTime()),n(x)},P.onerror=()=>{a(P.error)}})})}clearAllScenarios(){return O(this,null,function*(){let t=yield this.ensureDB();return new Promise((e,n)=>{let m=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();m.onsuccess=()=>{e()},m.onerror=()=>{n(m.error)}})})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var he=class r{dbName="NovelCharacterDB";storeName="characters";db=null;constructor(){this.initDB()}initDB(){return O(this,null,function*(){return new Promise((t,e)=>{let n=indexedDB.open(this.dbName,1);n.onerror=()=>{e(n.error)},n.onsuccess=()=>{this.db=n.result,t()},n.onupgradeneeded=a=>{let s=a.target.result;if(!s.objectStoreNames.contains(this.storeName)){let m=s.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0});m.createIndex("name","name",{unique:!1}),m.createIndex("occupation","occupation",{unique:!1}),m.createIndex("createdAt","createdAt",{unique:!1})}}})})}saveCharacter(t){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let m=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).add(t);m.onsuccess=()=>{e(m.result)},m.onerror=()=>{n(m.error)}})})}getAllCharacters(){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,e)=>{let s=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();s.onsuccess=()=>{let m=s.result;m.sort((C,P)=>new Date(P.createdAt).getTime()-new Date(C.createdAt).getTime()),t(m)},s.onerror=()=>{e(s.error)}})})}getCharacter(t){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let m=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(t);m.onsuccess=()=>{e(m.result)},m.onerror=()=>{n(m.error)}})})}deleteCharacter(t){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let m=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(t);m.onsuccess=()=>{e()},m.onerror=()=>{n(m.error)}})})}clearAllCharacters(){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,e)=>{let s=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();s.onsuccess=()=>{t()},s.onerror=()=>{e(s.error)}})})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ne=class r{debugLogger=H(Ce);dbName="NovelStoryDB";storeName="stories";db=null;constructor(){this.initDB()}initDB(){return O(this,null,function*(){return new Promise((t,e)=>{let n=indexedDB.open(this.dbName,1);n.onerror=()=>{this.debugLogger.error("StoryDB",`\u274C DB \uC5F4\uAE30 \uC2E4\uD328: ${n.error}`),e(n.error)},n.onsuccess=()=>{this.db=n.result,this.debugLogger.success("StoryDB","\u2705 DB \uC5F4\uAE30 \uC131\uACF5"),t()},n.onupgradeneeded=a=>{let s=a.target.result;if(!s.objectStoreNames.contains(this.storeName)){let m=s.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!1});m.createIndex("title","title",{unique:!1}),m.createIndex("createdAt","createdAt",{unique:!1}),m.createIndex("genre","genre",{unique:!1})}}})})}saveStory(t){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let m=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(t);m.onsuccess=()=>{this.debugLogger.success("StoryDB",`\u{1F4BE} \uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC131\uACF5: ${t.title}`),e()},m.onerror=()=>{this.debugLogger.error("StoryDB",`\u274C \uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC2E4\uD328: ${m.error}`),n(m.error)}})})}getAllStories(){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,e)=>{let s=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();s.onsuccess=()=>{let m=s.result;m.sort((C,P)=>new Date(P.createdAt).getTime()-new Date(C.createdAt).getTime()),this.debugLogger.info("StoryDB",`\u{1F4DA} \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC \uBAA9\uB85D: ${m.length}\uAC1C`),t(m)},s.onerror=()=>{this.debugLogger.error("StoryDB",`\u274C \uC2A4\uD1A0\uB9AC \uBAA9\uB85D \uB85C\uB4DC \uC2E4\uD328: ${s.error}`),e(s.error)}})})}getStory(t){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let m=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(t);m.onsuccess=()=>{e(m.result||null)},m.onerror=()=>{n(m.error)}})})}deleteStory(t){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((e,n)=>{let m=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(t);m.onsuccess=()=>{e()},m.onerror=()=>{n(m.error)}})})}clearAllStories(){return O(this,null,function*(){return this.db||(yield this.initDB()),new Promise((t,e)=>{let s=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();s.onsuccess=()=>{t()},s.onerror=()=>{e(s.error)}})})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var ht=class r{constructor(t,e,n,a,s){this.notification=t;this.dialog=e;this.scenarioDbService=n;this.characterDbService=a;this.storyDbService=s}loadSavedScenarios(){return O(this,null,function*(){try{return yield this.scenarioDbService.getAllScenarios()}catch{return[]}})}saveGeneratedScenario(t,e){return O(this,null,function*(){if(!t)return;let n={id:`scenario_${Date.now()}`,title:t.title||"\uC81C\uBAA9 \uC5C6\uC74C",description:t.description||"",characters:t.characters||[],setting:t.setting||"",conflict:t.conflict||"",goal:t.goal||"",mood:t.mood||"",tags:t.tags||[],genre:t.genre||"\uBB34\uD611",style:t.style||"\uC804\uD1B5\uC801\uC778",createdAt:new Date,isAdult:t.isAdult||!1};try{yield this.scenarioDbService.saveScenario(n),this.notification.show("\u2705 \uC2DC\uB098\uB9AC\uC624\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),e()}catch{this.notification.show("\uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}deleteScenario(t,e){return O(this,null,function*(){if(yield this.dialog.open(J,{width:"400px",data:{title:"\uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C",message:"\uC774 \uC2DC\uB098\uB9AC\uC624\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",confirmText:"\uC0AD\uC81C",cancelText:"\uCDE8\uC18C"}}).afterClosed().toPromise())try{yield this.scenarioDbService.deleteScenario(t),e()}catch{this.notification.show("\uC2DC\uB098\uB9AC\uC624 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}generateStoryBlocksFromScenario(t){return[`\u{1F3AC} ${t.title}`,"",`${t.description}`,"",`\u{1F4CD} \uBC30\uACBD: ${t.setting}`,`\u2694\uFE0F \uAC08\uB4F1: ${t.conflict}`,`\u{1F3AF} \uBAA9\uD45C: ${t.goal}`,"","\uB2F9\uC2E0\uC758 \uC774\uC57C\uAE30\uAC00 \uC2DC\uC791\uB429\uB2C8\uB2E4..."]}loadSavedCharacters(){return O(this,null,function*(){try{return yield this.characterDbService.getAllCharacters()}catch{return[]}})}saveGeneratedCharacter(t,e){return O(this,null,function*(){if(!t)return;let n={name:t.name||"\uC774\uB984 \uC5C6\uC74C",gender:t.gender||"unknown",age:t.age||20,occupation:t.occupation||"",personality:t.personality||[],backstory:t.backstory||"",skills:t.skills||[],appearance:t.appearance||"",goal:t.goal||"",weakness:t.weakness||"",tags:t.tags||[],createdAt:new Date};try{yield this.characterDbService.saveCharacter(n),this.notification.show("\u2705 \uCE90\uB9AD\uD130\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),e()}catch{this.notification.show("\uCE90\uB9AD\uD130 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}deleteCharacter(t,e){return O(this,null,function*(){if(yield this.dialog.open(J,{width:"400px",data:{title:"\uCE90\uB9AD\uD130 \uC0AD\uC81C",message:"\uC774 \uCE90\uB9AD\uD130\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",confirmText:"\uC0AD\uC81C",cancelText:"\uCDE8\uC18C"}}).afterClosed().toPromise())try{yield this.characterDbService.deleteCharacter(t),e()}catch{this.notification.show("\uCE90\uB9AD\uD130 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}loadSavedStories(){return O(this,null,function*(){try{return yield this.storyDbService.getAllStories()}catch{return[]}})}saveGeneratedStory(t,e){return O(this,null,function*(){if(!t)return;let n={id:`story_${Date.now()}`,title:t.title||"\uC81C\uBAA9 \uC5C6\uC74C",description:t.description||"",genre:t.genre||"fantasy",icon:"\u{1F4D6}",difficulty:t.difficulty||"normal",startingGold:t.startingGold||100,startingItems:t.startingItems||[],firstStory:t.firstStory||[],firstChoices:t.firstChoices||[],createdAt:new Date,createdBy:"AI"};try{yield this.storyDbService.saveStory(n),this.notification.show("\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),e()}catch{this.notification.show("\uC2A4\uD1A0\uB9AC \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}deleteStory(t,e){return O(this,null,function*(){if(yield this.dialog.open(J,{width:"400px",data:{title:"\uC2A4\uD1A0\uB9AC \uC0AD\uC81C",message:"\uC774 \uC2A4\uD1A0\uB9AC\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",confirmText:"\uC0AD\uC81C",cancelText:"\uCDE8\uC18C"}}).afterClosed().toPromise())try{yield this.storyDbService.deleteStory(t),e()}catch{this.notification.show("\uC2A4\uD1A0\uB9AC \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}convertStoryToNovelTemplate(t){return{id:t.id,title:t.title,genre:t.genre||"fantasy",description:t.description||"",icon:"\u{1F4D6}",difficulty:t.difficulty||"normal",startingGold:t.startingGold||100,startingItems:t.startingItems||[],firstStory:t.firstStory||"",firstChoices:t.firstChoices||[]}}static \u0275fac=function(e){return new(e||r)(N(te),N(Se),N(be),N(he),N(Ne))};static \u0275prov=D({token:r,factory:r.\u0275fac})};var ae=class{static getRaritySymbol(t){return{normal:"\u26AA",magic:"\u{1F535}",rare:"\u{1F7E1}",unique:"\u{1F7E3}",set:"\u{1F7E2}",legendary:"\u{1F7E0}"}[t]||"\u26AA"}static getInventoryItemIcon(t){if(t.icon)return t.icon;let e=t.type.toLowerCase();return e==="weapon"?this.getWeaponIcon(t.name?.toLowerCase()||""):e==="armor"||e==="helmet"||e==="gloves"||e==="boots"||e==="belt"?this.getArmorIcon(e,t.name?.toLowerCase()||""):"\u{1F4E6}"}static getWeaponIcon(t){return t.includes("\uB3C4\uB07C")||t.includes("\uCCA0\uC6D4")?"\u{1FA93}":t.includes("\uB2E8\uAC80")?"\u{1F5E1}\uFE0F":t.includes("\uAC80")?"\u2694\uFE0F":t.includes("\uD65C")||t.includes("\uC11D\uAD81")||t.includes("\uC1E0\uB1CC")?"\u{1F3F9}":t.includes("\uC9C0\uD321\uC774")||t.includes("\uC644\uB4DC")||t.includes("\uB9C8\uBC95\uBD09")?"\u{1FA84}":t.includes("\uCC3D")||t.includes("\uD3F4\uC554")||t.includes("\uC721\uCC99\uBD09")?"\u{1F531}":t.includes("\uB9DD\uCE58")||t.includes("\uCCA0\uD1F4")||t.includes("\uB454\uAE30")?"\u{1F528}":t.includes("\uB0AB")?"\u2694\uFE0F":t.includes("\uBC29\uD328")?"\u{1F6E1}\uFE0F":"\u2694\uFE0F"}static getArmorIcon(t,e){return t==="helmet"?"\u26D1\uFE0F":t==="armor"?"\u{1F9BA}":t==="gloves"?"\u{1F9E4}":t==="boots"?"\u{1F462}":t==="belt"?"\u{1F397}\uFE0F":e.includes("\uD22C\uAD6C")||e.includes("\uB450\uAC1C\uACE8")?"\u26D1\uFE0F":e.includes("\uAC11\uC637")||e.includes("\uAC00\uC2B4")?"\u{1F9BA}":e.includes("\uC7A5\uAC11")?"\u{1F9E4}":e.includes("\uC2E0\uBC1C")||e.includes("\uC7A5\uD654")?"\u{1F462}":e.includes("\uBC14\uC9C0")?"\u{1F456}":e.includes("\uBCA8\uD2B8")?"\u{1F397}\uFE0F":"\u{1F9BA}"}static convertDiabloItemToInventoryItem(t){let e=String(t.id),n=this.mapDiabloRarity(t.rarity.toString()),a=this.mapDiabloType(t.type.toString()),s={id:e,name:t.nameKo||t.name||"\uC54C \uC218 \uC5C6\uB294 \uC544\uC774\uD15C",type:a,rarity:n,description:t.uniqueEffect||"",icon:t.icon||this.getIconByType(t.type.toString()),quantity:1,buyPrice:this.calculatePrice(t.rarity.toString()),sellPrice:Math.floor(this.calculatePrice(t.rarity.toString())*.5)};if(t.stats&&t.stats.length>0){let m={};if(t.damage){let C=t.damage.match(/(\d+)-(\d+)/);C&&(m.minDamage=parseInt(C[1]),m.maxDamage=parseInt(C[2]))}t.defense&&(m.defense=t.defense,m.armor=t.defense),t.stats.forEach(C=>{let P=C.value.match(/([+-]?\d+\.?\d*)/);if(P){let x=parseFloat(P[1]);C.name.includes("\uACF5\uACA9 \uC18D\uB3C4")?m.attackSpeed=x:C.name.includes("\uD06C\uB9AC\uD2F0\uCEEC")&&C.name.includes("\uD655\uB960")?m.criticalChance=x:C.name.includes("\uD06C\uB9AC\uD2F0\uCEEC")&&C.name.includes("\uD53C\uD574")?m.criticalDamage=x:C.name.includes("\uC0DD\uBA85\uB825")?(m.hp=x,m.maxHp=x):C.name.includes("\uBC29\uC5B4\uB825")&&(m.defense=x)}}),Object.keys(m).length>0&&(s.stats=m)}return s}static mapDiabloType(t){return{weapon:"weapon",armor:"armor",helmet:"helmet",gloves:"gloves",boots:"boots",belt:"belt",amulet:"accessory",ring:"accessory",consumable:"consumable",quest:"quest",misc:"misc"}[t]||"misc"}static mapDiabloRarity(t){return{normal:"common",magic:"uncommon",rare:"rare",unique:"epic",set:"legendary",legendary:"legendary"}[t]||"common"}static mapDiabloSlot(t){return{weapon:"weapon",armor:"armor",helmet:"helmet",gloves:"gloves",boots:"boots",belt:"belt",amulet:"accessory1",ring:"accessory2"}[t]}static getIconByType(t){return{weapon:"\u2694\uFE0F",armor:"\u{1F9BA}",helmet:"\u26D1\uFE0F",gloves:"\u{1F9E4}",boots:"\u{1F462}",belt:"\u{1F397}\uFE0F",amulet:"\u{1F4FF}",ring:"\u{1F48D}",consumable:"\u{1F9EA}",quest:"\u{1F4DC}",misc:"\u{1F4E6}"}[t]||"\u{1F4E6}"}static calculatePrice(t){return{normal:50,magic:150,rare:500,unique:2e3,set:5e3,legendary:1e4}[t]||50}static mapItemGrade(t){return t==="\uC77C\uBC18"?"common":t==="\uACE0\uAE09"?"uncommon":t==="\uD76C\uADC0"?"rare":t==="\uC804\uC124"?"epic":t==="\uC2E0\uD654"?"legendary":"common"}static mapItemType(t){return t==="\uBB34\uAE30"?"weapon":t==="\uBC29\uC5B4\uAD6C"?"armor":t==="\uC18C\uBE44\uD488"?"consumable":"misc"}static calculateItemPrice(t,e=!0){let a={\uC77C\uBC18:100,\uACE0\uAE09:500,\uD76C\uADC0:2e3,\uC804\uC124:1e4,\uC2E0\uD654:5e4,common:100,uncommon:500,rare:2e3,epic:1e4,legendary:5e4,unique:1e5,mythic:5e5}[t]||100;return e?a:Math.floor(a*.5)}static calculateItemPriceByGrade(t){return{\uC77C\uBC18:50,\uACE0\uAE09:150,\uD76C\uADC0:500,\uC804\uC124:2e3,\uC2E0\uD654:1e4}[t]||50}};var Pt=class{static createRandomItem(t,e){let n=["weapon","armor","helmet","gloves","boots","belt","amulet","ring","consumable","material"],a=["common","common","common","uncommon","uncommon","rare","rare","epic","legendary"],s=n[Math.floor(Math.random()*n.length)],m=a[Math.floor(Math.random()*a.length)];return{id:`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:this.generateItemName(s,m),type:s,rarity:m,quantity:s==="consumable"||s==="material"?Math.floor(Math.random()*10)+1:1,buyPrice:e(m),sellPrice:e(m)/2,stats:this.generateItemStats(s,m,t)}}static generateItemName(t,e){let n=["\uBD88\uD0C0\uB294","\uC5BC\uC5B4\uBD99\uC740","\uBC88\uAC1C\uC758","\uB3C5\uC131\uC758","\uC2E0\uC131\uD55C","\uC545\uB9C8\uC758","\uCC9C\uC0C1\uC758","\uC9C0\uC625\uC758","\uACE0\uB300\uC758","\uC804\uC124\uC801\uC778","\uC601\uC6D0\uD55C","\uBB34\uD55C\uC758","\uC6A9\uC758","\uBD88\uC0AC\uC870\uC758","\uD0C0\uC774\uD0C4\uC758","\uC2E0\uC758","\uC554\uD751\uC758","\uBE5B\uB098\uB294"],a=["\uC6A9\uB9F9\uD55C","\uBB34\uC801\uC758","\uD30C\uAD34\uC801\uC778","\uCD95\uBCF5\uBC1B\uC740","\uC800\uC8FC\uBC1B\uC740","\uAC15\uB825\uD55C","\uC704\uB300\uD55C","\uC601\uAD11\uC2A4\uB7EC\uC6B4","\uC794\uD639\uD55C","\uAD11\uD3ED\uD55C"],s=["\uBD88\uBA78\uC758","\uCD08\uC6D4\uC801\uC778","\uC808\uB300\uC801\uC778","\uAD81\uADF9\uC758","\uC9C0\uACE0\uC9C0\uC21C\uD55C","\uC644\uBCBD\uD55C","\uBB34\uD55C\uD55C","\uC601\uC6D0\uBD88\uBA78\uC758","\uC2E0\uD654\uC758","\uD0DC\uCD08\uC758"],m=["\uAC80","\uB300\uAC80","\uB3C4\uB07C","\uC804\uD22C\uB3C4\uB07C","\uD65C","\uC11D\uAD81","\uCC3D","\uBBF8\uB298\uCC3D","\uB2E8\uAC80","\uC30D\uAC80","\uB454\uAE30","\uC804\uC7C1\uB9DD\uCE58","\uC9C0\uD321\uC774","\uB9C8\uBC95\uBD09"],C=["\uAC11\uC637","\uC0AC\uC2AC \uAC11\uC637","\uD310\uAE08 \uAC11\uC637","\uAC00\uC8FD \uAC11\uC637","\uB85C\uBE0C","\uC804\uD22C\uBCF5","\uB4DC\uB798\uACE4 \uC2A4\uCF00\uC77C","\uBBF8\uC2A4\uB9B4 \uAC11\uC637"],P=["\uD22C\uAD6C","\uC655\uAD00","\uB450\uAC74","\uB9C8\uBC95 \uBAA8\uC790","\uC804\uD22C \uD22C\uAD6C","\uC6A9 \uD22C\uAD6C","\uC545\uB9C8\uC758 \uBFD4","\uCC9C\uC0AC\uC758 \uD6C4\uAD11"],x=["\uC7A5\uAC11","\uAC74\uD2C0\uB9BF","\uC190\uBAA9 \uBCF4\uD638\uB300","\uB9C8\uBC95 \uC7A5\uAC11","\uC6A9 \uBC1C\uD1B1 \uC7A5\uAC11","\uC554\uC0B4\uC790\uC758 \uC7A5\uAC11"],w=["\uC2E0\uBC1C","\uBD80\uCE20","\uACBD\uAC11\uD654","\uB9C8\uBC95 \uC2E0\uBC1C","\uC9C8\uC8FC\uC758 \uBD80\uCE20","\uADF8\uB9BC\uC790 \uC2E0\uBC1C","\uB0A0\uAC1C \uBD80\uCE20"],g=["\uBCA8\uD2B8","\uD5C8\uB9AC\uB760","\uB9C8\uBC95 \uBCA8\uD2B8","\uC0AC\uC2AC \uBCA8\uD2B8","\uC6A9\uC758 \uD5C8\uB9AC\uB760","\uC545\uB9C8\uC758 \uB760"],G=["\uBAA9\uAC78\uC774","\uBD80\uC801","\uD39C\uB358\uD2B8","\uC131\uC720\uBB3C","\uACE0\uB300\uC758 \uBD80\uC801","\uC6A9\uC758 \uB208","\uC545\uB9C8\uC758 \uC2EC\uC7A5","\uCC9C\uC0AC\uC758 \uB208\uBB3C"],$=["\uBC18\uC9C0","\uB9C8\uBC95 \uBC18\uC9C0","\uC778\uC7A5 \uBC18\uC9C0","\uB8EC \uBC18\uC9C0","\uC6A9\uC758 \uBC18\uC9C0","\uBD88\uC0AC\uC758 \uBC18\uC9C0","\uAD8C\uB2A5\uC758 \uBC18\uC9C0"],V=["\uCCB4\uB825 \uBB3C\uC57D","\uB9C8\uB098 \uBB3C\uC57D","\uBD80\uD65C \uBB3C\uC57D","\uD574\uB3C5\uC81C","\uAC15\uD654 \uBB3C\uC57D"],Q=["\uCCA0\uAD11\uC11D","\uAC00\uC8FD","\uCC9C","\uB9C8\uBC95 \uAC00\uB8E8","\uB8EC\uC11D","\uBCF4\uC11D"],X="";switch(t){case"weapon":X=m[Math.floor(Math.random()*m.length)];break;case"armor":X=C[Math.floor(Math.random()*C.length)];break;case"helmet":X=P[Math.floor(Math.random()*P.length)];break;case"gloves":X=x[Math.floor(Math.random()*x.length)];break;case"boots":X=w[Math.floor(Math.random()*w.length)];break;case"belt":X=g[Math.floor(Math.random()*g.length)];break;case"amulet":X=G[Math.floor(Math.random()*G.length)];break;case"ring":X=$[Math.floor(Math.random()*$.length)];break;case"consumable":X=V[Math.floor(Math.random()*V.length)];break;case"material":X=Q[Math.floor(Math.random()*Q.length)];break}if(t==="consumable"||t==="material")return X;let re="";return e==="legendary"?re=s[Math.floor(Math.random()*s.length)]+" ":e==="epic"||e==="rare"?re=a[Math.floor(Math.random()*a.length)]+" ":e==="uncommon"&&(re=n[Math.floor(Math.random()*n.length)]+" "),re+X}static generateItemStats(t,e,n){return n.generateItemStats(t,e)}};var pe=class{static enterFloor(t,e,n,a,s){if(!e)return;let m=e.floors[t-1];if(!m)return;e.currentFloor=t;let C=m.rooms.find(P=>P.id===m.entranceRoomId);C&&(s(C),a(["",`\u2500\u2500\u2500 ${t}\uCE35 \u2500\u2500\u2500`,C?.description||"\uC0C8\uB85C\uC6B4 \uCE35\uC5D0 \uB3C4\uCC29\uD588\uC2B5\uB2C8\uB2E4.",""]),n.info("\uB358\uC804",`\u{1F6AA} ${t}\uCE35 \uC9C4\uC785`))}static enterRoom(t,e,n,a,s){if(!e)return t;n&&(n.isCurrentRoom=!1);let m=k({},t);if(t.isCurrentRoom=!0,t.isExplored=!0,e.stats.roomsExplored++,a(["",`\u{1F4CD} ${s(t.type)}`,t.description,""]),t.monsters&&t.monsters.length>0){let C=t.monsters.filter(P=>!P.isDead);C.length>0&&a(["\u2694\uFE0F \uC801 \uBC1C\uACAC!",...C.map(P=>`  \u2022 ${P.name} (HP: ${P.currentHp}/${P.maxHp})`),""])}return m}static winDungeonCombat(t,e,n,a,s,m,C,P,x){return O(this,null,function*(){if(!n)return;e.isDead=!0;let w=Math.floor(Math.random()*(e.dropTable.goldMax-e.dropTable.goldMin+1))+e.dropTable.goldMin,g=Math.floor(e.maxHp*.8);a.gold+=w,s(g),n.accumulatedRewards.gold+=w,n.accumulatedRewards.experience+=g,n.stats.monstersKilled++,e.type==="elite"?n.stats.elitesKilled++:e.type==="boss"&&(n.stats.bossKilled=!0,n.stats.elitesKilled++),m([`\u2705 ${e.name}\uC744(\uB97C) \uBB3C\uB9AC\uCCE4\uB2E4!`,`\u{1F4B0} \uACE8\uB4DC +${w}`,`\u{1F4AB} \uACBD\uD5D8\uCE58 +${g}`,""]),x.info("\uB358\uC804",`\u{1F4BE} \uBAAC\uC2A4\uD130 \uCC98\uCE58 \uD6C4 \uC790\uB3D9 \uC800\uC7A5 (\uACBD\uD5D8\uCE58: ${a.exp}/${a.maxExp})`),yield C(`auto_dungeon_${n.dungeonTypeId}`),t.monsters.every(G=>G.isDead)&&(t.isCleared=!0,m(["\u2705 \uBC29\uC744 \uD074\uB9AC\uC5B4\uD588\uC2B5\uB2C8\uB2E4!","\uB2E4\uC74C \uBC29\uC73C\uB85C \uC774\uB3D9\uD558\uC138\uC694.",""]),x.info("\uB358\uC804","\u{1F4BE} \uBC29 \uD074\uB9AC\uC5B4 \uD6C4 \uC790\uB3D9 \uC800\uC7A5"),yield C("auto_dungeon_room_clear"),e.type==="boss"&&(yield P())),x.success("\uB358\uC804",`\u2705 \uC804\uD22C \uC2B9\uB9AC: ${e.name}`)})}static completeDungeon(t,e,n,a,s,m,C,P){return O(this,null,function*(){if(!t)return;t.status="completed",e.inDungeon=!1;let x=n.find(g=>g.id===t.dungeonTypeId);e.clearedDungeons[x.id]||(e.clearedDungeons[x.id]={count:0,bestTime:1/0,highestDifficulty:"easy",lastClearDate:new Date});let w=e.clearedDungeons[x.id];w.count++,w.bestTime=Math.min(w.bestTime,t.elapsedTime),w.lastClearDate=new Date,e.totalStats.dungeonsCleared++,e.totalStats.monstersKilled+=t.stats.monstersKilled,e.totalStats.elitesKilled+=t.stats.elitesKilled,e.totalStats.bossesKilled+=t.stats.bossKilled?1:0,e.totalStats.totalGoldEarned+=t.accumulatedRewards.gold,e.totalStats.totalExpEarned+=t.accumulatedRewards.experience,a(["","\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557","\u2551      \u{1F3C6} \uB358\uC804 \uD074\uB9AC\uC5B4! \u{1F3C6}          \u2551",`\u2551   ${x.koreanName} \uC815\uBCF5 \uC644\uB8CC   \u2551`,"\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D","","\u{1F4CA} \uD1B5\uACC4:",`  \u2022 \uCC98\uCE58\uD55C \uBAAC\uC2A4\uD130: ${t.stats.monstersKilled}\uB9C8\uB9AC`,`  \u2022 \uCC98\uCE58\uD55C \uC5D8\uB9AC\uD2B8: ${t.stats.elitesKilled}\uB9C8\uB9AC`,`  \u2022 \uD0D0\uD5D8\uD55C \uBC29: ${t.stats.roomsExplored}\uAC1C`,"","\u{1F4B0} \uD68D\uB4DD \uBCF4\uC0C1:",`  \u2022 \uACE8\uB4DC: ${t.accumulatedRewards.gold}G`,`  \u2022 \uACBD\uD5D8\uCE58: ${t.accumulatedRewards.experience} EXP`,"","\uB2F9\uC2E0\uC740 \uB358\uC804\uC744 \uBB34\uC0AC\uD788 \uBE60\uC838\uB098\uC654\uC2B5\uB2C8\uB2E4."]),s(["\u{1F3E0} \uB9C8\uC744\uB85C \uB3CC\uC544\uAC04\uB2E4","\u{1F504} \uB358\uC804\uC744 \uB2E4\uC2DC \uD0D0\uD5D8\uD55C\uB2E4","\u{1F5FA}\uFE0F \uB2E4\uB978 \uB358\uC804\uC744 \uCC3E\uC544\uBCF8\uB2E4"]),P(),C.success("\uB358\uC804",`\u{1F3C6} \uB358\uC804 \uD074\uB9AC\uC5B4: ${x.koreanName} - \uC790\uB3D9 \uC800\uC7A5 \uC911...`),yield m(`dungeon_clear_${x.id}`)})}static moveToNextRoom(t,e,n){if(!t||!e)return;let a=e.connectedRoomIds;if(a.length===0)return;let s=t.floors[t.currentFloor-1],m=s.rooms.find(C=>a.includes(C.id)&&!C.isExplored)||s.rooms.find(C=>a.includes(C.id));m&&n(m)}static getRoomTypeKorean(t){return{entrance:"\uC785\uAD6C",normal:"\uC77C\uBC18 \uBC29",combat:"\uC804\uD22C \uBC29",elite:"\uC5D8\uB9AC\uD2B8 \uBC29",boss:"\uBCF4\uC2A4 \uBC29",treasure:"\uBCF4\uBB3C \uBC29",shop:"\uC0C1\uC810",rest:"\uD734\uC2DD \uBC29",event:"\uC774\uBCA4\uD2B8 \uBC29",exit:"\uCD9C\uAD6C"}[t]||"\uC54C \uC218 \uC5C6\uB294 \uBC29"}};var Xn={weapon:["weapon","sword","bow","staff","dagger","axe","mace","spear"],armor:["armor","chest","bodyarmor"],helmet:["helmet","helm","hat"],gloves:["gloves","gauntlets"],boots:["boots","shoes"],amulet:["amulet","necklace"],belt:["belt"],ring1:["ring"],ring2:["ring"]},Qn=["weapon","armor","helmet","gloves","boots","amulet","belt","ring1","ring2"];var Mt=class r{_showInventoryPanel=T(!1);_showShopPanel=T(!1);_showCharacterCreatorPanel=T(!1);_showScenarioCreatorPanel=T(!1);_showItemCreatorPanel=T(!1);_showStoryCreatorPanel=T(!1);_showWuxiaPanel=T(!1);_showFlowPanel=T(!1);showInventoryPanel=this._showInventoryPanel.asReadonly();showShopPanel=this._showShopPanel.asReadonly();showCharacterCreatorPanel=this._showCharacterCreatorPanel.asReadonly();showScenarioCreatorPanel=this._showScenarioCreatorPanel.asReadonly();showItemCreatorPanel=this._showItemCreatorPanel.asReadonly();showStoryCreatorPanel=this._showStoryCreatorPanel.asReadonly();showWuxiaPanel=this._showWuxiaPanel.asReadonly();showFlowPanel=this._showFlowPanel.asReadonly();_inventoryActiveTab=T("equipment");_wuxiaActiveTab=T("cultivation");_flowPanelTab=T("map");inventoryActiveTab=this._inventoryActiveTab.asReadonly();wuxiaActiveTab=this._wuxiaActiveTab.asReadonly();flowPanelTab=this._flowPanelTab.asReadonly();_gameStarted=T(!1);_novelSelected=T(!1);_currentChapter=T(1);gameStarted=this._gameStarted.asReadonly();novelSelected=this._novelSelected.asReadonly();currentChapter=this._currentChapter.asReadonly();hasActivePanel=B(()=>this.showInventoryPanel()||this.showShopPanel()||this.showCharacterCreatorPanel()||this.showScenarioCreatorPanel()||this.showItemCreatorPanel()||this.showStoryCreatorPanel()||this.showWuxiaPanel()||this.showFlowPanel());isInCreationMode=B(()=>this.showCharacterCreatorPanel()||this.showScenarioCreatorPanel()||this.showItemCreatorPanel()||this.showStoryCreatorPanel());toggleInventoryPanel(){this._showInventoryPanel.update(t=>!t)}toggleShopPanel(){this._showShopPanel.update(t=>!t)}toggleCharacterCreatorPanel(){this._showCharacterCreatorPanel.update(t=>!t)}toggleScenarioCreatorPanel(){this._showScenarioCreatorPanel.update(t=>!t)}toggleItemCreatorPanel(){this._showItemCreatorPanel.update(t=>!t)}toggleStoryCreatorPanel(){this._showStoryCreatorPanel.update(t=>!t)}toggleWuxiaPanel(){this._showWuxiaPanel.update(t=>!t)}toggleFlowPanel(){this._showFlowPanel.update(t=>!t)}openInventoryPanel(){this._showInventoryPanel.set(!0)}closeInventoryPanel(){this._showInventoryPanel.set(!1)}openShopPanel(){this._showShopPanel.set(!0)}closeShopPanel(){this._showShopPanel.set(!1)}openCharacterCreator(){this._showCharacterCreatorPanel.set(!0)}closeCharacterCreator(){this._showCharacterCreatorPanel.set(!1)}openScenarioCreator(){this._showScenarioCreatorPanel.set(!0)}closeScenarioCreator(){this._showScenarioCreatorPanel.set(!1)}openItemCreator(){this._showItemCreatorPanel.set(!0)}closeItemCreator(){this._showItemCreatorPanel.set(!1)}openStoryCreator(){this._showStoryCreatorPanel.set(!0)}closeStoryCreator(){this._showStoryCreatorPanel.set(!1)}openWuxiaPanel(){this._showWuxiaPanel.set(!0)}closeWuxiaPanel(){this._showWuxiaPanel.set(!1)}closeAllPanels(){this._showInventoryPanel.set(!1),this._showShopPanel.set(!1),this._showCharacterCreatorPanel.set(!1),this._showScenarioCreatorPanel.set(!1),this._showItemCreatorPanel.set(!1),this._showStoryCreatorPanel.set(!1),this._showWuxiaPanel.set(!1),this._showFlowPanel.set(!1)}setInventoryTab(t){this._inventoryActiveTab.set(t)}setWuxiaTab(t){this._wuxiaActiveTab.set(t)}setFlowPanelTab(t){this._flowPanelTab.set(t)}startGame(){this._gameStarted.set(!0)}resetGame(){this._gameStarted.set(!1),this._novelSelected.set(!1),this._currentChapter.set(1),this.closeAllPanels()}selectNovel(){this._novelSelected.set(!0)}nextChapter(){this._currentChapter.update(t=>t+1)}setChapter(t){this._currentChapter.set(t)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var xt=class r{_character=T({name:"",level:1,exp:0,maxExp:100,hp:100,maxHp:100,mp:100,maxMp:100,attack:10,defense:5,agility:10,strength:10,intelligence:10,gold:100,gem:0,crystal:0,ticket:0,skillPoints:0,skills:[],equipment:void 0,inventory:[]});character=this._character.asReadonly();name=B(()=>this._character().name);level=B(()=>this._character().level);exp=B(()=>this._character().exp);maxExp=B(()=>this._character().maxExp);hp=B(()=>this._character().hp);maxHp=B(()=>this._character().maxHp);mp=B(()=>this._character().mp);maxMp=B(()=>this._character().maxMp);attack=B(()=>this._character().attack);defense=B(()=>this._character().defense);agility=B(()=>this._character().agility);strength=B(()=>this._character().strength);intelligence=B(()=>this._character().intelligence);gold=B(()=>this._character().gold);gem=B(()=>this._character().gem);crystal=B(()=>this._character().crystal);ticket=B(()=>this._character().ticket);skillPoints=B(()=>this._character().skillPoints);skills=B(()=>this._character().skills);equipment=B(()=>this._character().equipment);inventory=B(()=>this._character().inventory||[]);expPercent=B(()=>{let t=this._character();return t.maxExp>0?t.exp/t.maxExp*100:0});hpPercent=B(()=>{let t=this._character();return t.maxHp>0?t.hp/t.maxHp*100:0});mpPercent=B(()=>{let t=this._character();return t.maxMp>0?t.mp/t.maxMp*100:0});initializeNewPlayer(t=""){this._character.set({name:t,level:1,exp:0,maxExp:100,hp:100,maxHp:100,mp:100,maxMp:100,attack:10,defense:5,agility:10,strength:10,intelligence:10,gold:100,gem:0,crystal:0,ticket:0,skillPoints:0,skills:[],equipment:void 0,inventory:[]})}loadPlayer(t){this._character.set(t)}updateCharacter(t){this._character.update(e=>k(k({},e),t))}addGold(t){this._character.update(e=>I(k({},e),{gold:e.gold+t}))}spendGold(t){return this._character().gold>=t?(this._character.update(n=>I(k({},n),{gold:n.gold-t})),!0):!1}addGem(t){this._character.update(e=>I(k({},e),{gem:e.gem+t}))}spendGem(t){return this._character().gem>=t?(this._character.update(n=>I(k({},n),{gem:n.gem-t})),!0):!1}addCrystal(t){this._character.update(e=>I(k({},e),{crystal:e.crystal+t}))}spendCrystal(t){return this._character().crystal>=t?(this._character.update(n=>I(k({},n),{crystal:n.crystal-t})),!0):!1}addTicket(t){this._character.update(e=>I(k({},e),{ticket:e.ticket+t}))}spendTicket(t){return this._character().ticket>=t?(this._character.update(n=>I(k({},n),{ticket:n.ticket-t})),!0):!1}gainExp(t){return this._character.update(e=>I(k({},e),{exp:e.exp+t})),this.checkLevelUp()}checkLevelUp(){let t=this._character();return t.exp>=t.maxExp?(this.levelUp(),!0):!1}levelUp(){this._character.update(t=>{let e=t.level+1,n=e*100,a=t.maxHp+20,s=t.maxMp+10;return I(k({},t),{level:e,exp:0,maxExp:n,hp:a,maxHp:a,mp:s,maxMp:s,attack:t.attack+3,defense:t.defense+2,strength:t.strength+2,intelligence:t.intelligence+2,agility:t.agility+1,skillPoints:t.skillPoints+1})})}takeDamage(t){this._character.update(e=>I(k({},e),{hp:Math.max(0,e.hp-t)}))}heal(t){this._character.update(e=>I(k({},e),{hp:Math.min(e.maxHp,e.hp+t)}))}fullHeal(){this._character.update(t=>I(k({},t),{hp:t.maxHp,mp:t.maxMp}))}spendMp(t){return this._character().mp>=t?(this._character.update(n=>I(k({},n),{mp:n.mp-t})),!0):!1}restoreMp(t){this._character.update(e=>I(k({},e),{mp:Math.min(e.maxMp,e.mp+t)}))}setName(t){this._character.update(e=>I(k({},e),{name:t}))}modifyStats(t){this._character.update(e=>k(k({},e),t))}addSkill(t){this._character.update(e=>I(k({},e),{skills:[...e.skills,t]}))}removeSkill(t){this._character.update(e=>I(k({},e),{skills:e.skills.filter(n=>n.id!==t)}))}upgradeSkill(t){let e=this._character(),n=e.skills.find(a=>a.id===t);return n&&n.level<n.maxLevel&&e.skillPoints>0?(this._character.update(a=>I(k({},a),{skills:a.skills.map(s=>s.id===t?I(k({},s),{level:s.level+1}):s),skillPoints:a.skillPoints-1})),!0):!1}setEquipment(t){this._character.update(e=>I(k({},e),{equipment:t}))}addToInventory(t){this._character.update(e=>I(k({},e),{inventory:[...e.inventory||[],t]}))}removeFromInventory(t){this._character.update(e=>I(k({},e),{inventory:(e.inventory||[]).filter(n=>n.id!==t)}))}clearInventory(){this._character.update(t=>I(k({},t),{inventory:[]}))}isAlive(){return this._character().hp>0}getCurrentHp(){return this._character().hp}getMaxHp(){return this._character().maxHp}getCharacter(){return this._character()}resetPlayer(){this.initializeNewPlayer()}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var vt=class r{getFilteredAndSortedInventory(t,e,n){let a=[...t];return e!=="all"&&(a=a.filter(s=>{switch(e){case"weapon":return s.type==="weapon";case"armor":return["armor","helmet","gloves","boots","belt"].includes(s.type);case"accessory":return["amulet","ring","accessory"].includes(s.type);case"consumable":return s.type==="consumable";case"material":return s.type==="material";default:return!0}})),a.sort((s,m)=>{switch(n){case"rarity":return this.getRarityWeight(m.rarity)-this.getRarityWeight(s.rarity);case"type":return s.type.localeCompare(m.type);case"name":return(s.nameKo||s.name).localeCompare(m.nameKo||m.name);case"recent":let C=s.obtainedTimestamp||0;return(m.obtainedTimestamp||0)-C;default:return 0}}),a}getRarityWeight(t){return{common:1,uncommon:2,rare:3,epic:4,legendary:5,unique:6,mythic:7}[t]||0}getRarityText(t){return{common:"\u26AA \uC77C\uBC18",uncommon:"\u{1F7E2} \uACE0\uAE09",rare:"\u{1F535} \uD76C\uADC0",epic:"\u{1F7E3} \uC601\uC6C5",legendary:"\u{1F7E0} \uC804\uC124",unique:"\u{1F7E1} \uC720\uB2C8\uD06C",mythic:"\u{1F534} \uC2E0\uD654"}[t]||t}getItemTypeText(t){return{weapon:"\u2694\uFE0F \uBB34\uAE30",armor:"\u{1F6E1}\uFE0F \uBC29\uC5B4\uAD6C",helmet:"\u26D1\uFE0F \uD22C\uAD6C",gloves:"\u{1F9E4} \uC7A5\uAC11",boots:"\u{1F462} \uC2E0\uBC1C",belt:"\u{1F4FF} \uBCA8\uD2B8",amulet:"\u{1F4FF} \uBAA9\uAC78\uC774",ring:"\u{1F48D} \uBC18\uC9C0",accessory:"\u{1F48E} \uC7A5\uC2E0\uAD6C",consumable:"\u{1F9EA} \uC18C\uBE44\uD488",material:"\u{1F4E6} \uC7AC\uB8CC"}[t]||t}getEquipmentSlotName(t){return{weapon:"\uBB34\uAE30 \uC2AC\uB86F",armor:"\uAC11\uC637 \uC2AC\uB86F",helmet:"\uD22C\uAD6C \uC2AC\uB86F",gloves:"\uC7A5\uAC11 \uC2AC\uB86F",boots:"\uC2E0\uBC1C \uC2AC\uB86F",belt:"\uBCA8\uD2B8 \uC2AC\uB86F",amulet:"\uBAA9\uAC78\uC774 \uC2AC\uB86F",ring:"\uBC18\uC9C0 \uC2AC\uB86F (1/2)"}[t]||null}getItemDetailsText(t){let e=`\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`;e+=`\u{1F4DC} ${t.name}
`,e+=`\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

`,e+=`\u{1F3F7}\uFE0F \uD76C\uADC0\uB3C4: ${this.getRarityText(t.rarity)}
`,e+=`\u{1F4E6} \uD0C0\uC785: ${this.getItemTypeText(t.type)}
`;let n=this.getEquipmentSlotName(t.type);return n&&(e+=`\u{1F3AF} \uC7A5\uCC29 \uC2AC\uB86F: ${n}
`),t.stats&&(e+=`
\u2501\u2501\u2501 \u26A1 \uB2A5\uB825\uCE58 \u2501\u2501\u2501
`,t.stats.minDamage&&t.stats.maxDamage?e+=`\u2694\uFE0F \uB370\uBBF8\uC9C0: ${t.stats.minDamage}-${t.stats.maxDamage}
`:t.stats.attack&&(e+=`\u2694\uFE0F \uACF5\uACA9\uB825: +${t.stats.attack}
`),t.stats.attackSpeed&&(e+=`\u26A1 \uACF5\uACA9 \uC18D\uB3C4: +${t.stats.attackSpeed}%
`),t.stats.armor&&(e+=`\u{1F6E1}\uFE0F \uBC29\uC5B4\uB3C4: +${t.stats.armor}
`),t.stats.defense&&(e+=`\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825: +${t.stats.defense}
`),t.stats.blockChance&&(e+=`\u{1F6E1}\uFE0F \uBC29\uC5B4 \uD655\uB960: +${t.stats.blockChance}%
`),t.stats.evasion&&(e+=`\u{1F4A8} \uD68C\uD53C\uC728: +${t.stats.evasion}%
`),t.stats.hp&&(e+=`\u2764\uFE0F \uC0DD\uBA85\uB825: +${t.stats.hp}
`),t.stats.mp&&(e+=`\u{1F499} \uB9C8\uB098: +${t.stats.mp}
`),t.stats.critChance&&(e+=`\u{1F4A5} \uD06C\uB9AC\uD2F0\uCEEC \uD655\uB960: +${t.stats.critChance}%
`),t.stats.critDamage&&(e+=`\u{1F4A2} \uD06C\uB9AC\uD2F0\uCEEC \uB370\uBBF8\uC9C0: +${t.stats.critDamage}%
`),t.stats.lifeSteal&&(e+=`\u{1FA78} \uC0DD\uBA85\uB825 \uD761\uC218: ${t.stats.lifeSteal}%
`),t.stats.lifeRegen&&(e+=`\u2764\uFE0F\u200D\u{1FA79} \uC0DD\uBA85\uB825 \uC7AC\uC0DD: +${t.stats.lifeRegen}/\uCD08
`),t.stats.manaRegen&&(e+=`\u{1F499} \uB9C8\uB098 \uC7AC\uC0DD: +${t.stats.manaRegen}/\uCD08
`),t.stats.fireResist&&(e+=`\u{1F525} \uD654\uC5FC \uC800\uD56D: +${t.stats.fireResist}%
`),t.stats.coldResist&&(e+=`\u2744\uFE0F \uB0C9\uAE30 \uC800\uD56D: +${t.stats.coldResist}%
`),t.stats.lightningResist&&(e+=`\u26A1 \uBC88\uAC1C \uC800\uD56D: +${t.stats.lightningResist}%
`),t.stats.poisonResist&&(e+=`\u2620\uFE0F \uB3C5 \uC800\uD56D: +${t.stats.poisonResist}%
`),t.stats.magicFind&&(e+=`\u{1F340} \uB9C8\uBC95 \uC544\uC774\uD15C \uBC1C\uACAC: +${t.stats.magicFind}%
`),t.stats.goldFind&&(e+=`\u{1F4B0} \uACE8\uB4DC \uD68D\uB4DD: +${t.stats.goldFind}%
`),t.stats.expBonus&&(e+=`\u2B50 \uACBD\uD5D8\uCE58 \uBCF4\uB108\uC2A4: +${t.stats.expBonus}%
`)),t.description&&(e+=`
\u2501\u2501\u2501 \u{1F4D6} \uC124\uBA85 \u2501\u2501\u2501
`,e+=`${t.description}
`),t.setBonus&&(e+=`
\u2501\u2501\u2501 \u{1F381} \uC138\uD2B8 \uD6A8\uACFC \u2501\u2501\u2501
`,e+=`${t.setBonus}
`),t.requiredLevel&&(e+=`
\u26A0\uFE0F \uD544\uC694 \uB808\uBCA8: ${t.requiredLevel}
`),t.price&&(e+=`\u{1F4B0} \uAC00\uACA9: ${t.price} \uACE8\uB4DC
`),e+=`
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`,e}getRarityColorClass(t){return{common:"rarity-common",uncommon:"rarity-uncommon",rare:"rarity-rare",epic:"rarity-epic",legendary:"rarity-legendary",unique:"rarity-unique",mythic:"rarity-mythic"}[t]||"rarity-common"}getItemIcon(t,e){let n={weapon:"\u2694\uFE0F",armor:"\u{1F6E1}\uFE0F",helmet:"\u26D1\uFE0F",gloves:"\u{1F9E4}",boots:"\u{1F462}",belt:"\u{1F4FF}",amulet:"\u{1F4FF}",ring:"\u{1F48D}",consumable:"\u{1F9EA}",material:"\u{1F4E6}"};return e==="legendary"?"\u2728":e==="mythic"?"\u{1F31F}":n[t]||"\u{1F4E6}"}canEquipItem(t,e){let n=t.requiredLevel;return n&&e<n?!1:["weapon","armor","helmet","gloves","boots","belt","amulet","ring","accessory"].includes(t.type)}calculateTotalItemPower(t){if(!t.stats)return 0;let e=0,n=t.stats;n.minDamage&&n.maxDamage&&(e+=(n.minDamage+n.maxDamage)/2),n.attack&&(e+=n.attack),n.attackSpeed&&(e+=n.attackSpeed*.5),n.armor&&(e+=n.armor),n.defense&&(e+=n.defense),n.blockChance&&(e+=n.blockChance*.3),n.evasion&&(e+=n.evasion*.3),n.hp&&(e+=n.hp*.1),n.mp&&(e+=n.mp*.1),n.critChance&&(e+=n.critChance*2),n.critDamage&&(e+=n.critDamage*.5);let a=this.getRarityWeight(t.rarity)*10;return Math.floor(e*a)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Pe=class r{constructor(t){this.router=t;let e=this.loadUserFromStorage();this.currentUserSubject=new xe(e),this.currentUser$=this.currentUserSubject.asObservable()}STORAGE_KEY="novel_auth_user";ADMIN_USERNAME=Lt.decrypt(Ft.auth.username);ADMIN_PASSWORD=Lt.decrypt(Ft.auth.password);currentUserSubject;currentUser$;loadUserFromStorage(){try{let t=localStorage.getItem(this.STORAGE_KEY);if(t){let e=JSON.parse(t);return e.loginTime=new Date(e.loginTime),e}}catch{}return null}saveUserToStorage(t){try{t?localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)):localStorage.removeItem(this.STORAGE_KEY)}catch{}}login(t,e){if(t===this.ADMIN_USERNAME&&e===this.ADMIN_PASSWORD){let n={username:this.ADMIN_USERNAME,loginTime:new Date};return this.currentUserSubject.next(n),this.saveUserToStorage(n),!0}return!1}logout(){console.log("[NovelAuth] \uB85C\uADF8\uC544\uC6C3");try{this.currentUserSubject.next(null),this.saveUserToStorage(null)}catch(t){console.error("[NovelAuth] \uB85C\uADF8\uC544\uC6C3 \uC911 \uC624\uB958:",t)}finally{this.router.navigate(["/novel/login"]).catch(t=>{console.error("[NovelAuth] \uB124\uBE44\uAC8C\uC774\uC158 \uC608\uC678 \uBC1C\uC0DD:",t),window.location.hash="#/novel/login"})}}isLoggedIn(){return this.currentUserSubject.value!==null}getCurrentUser(){return this.currentUserSubject.value}getCurrentUsername(){let t=this.getCurrentUser();return t?t.username:null}static \u0275fac=function(e){return new(e||r)(N(ue))};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var ze=class r{dbName="NovelGameDB";dbVersion=2;storeName="gameSaves";db=null;constructor(){this.initDB()}initDB(){return O(this,null,function*(){return new Promise((t,e)=>{let n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=()=>{e(n.error)},n.onsuccess=()=>{this.db=n.result,t()},n.onupgradeneeded=a=>{let s=a.target.result;s.objectStoreNames.contains(this.storeName)&&s.deleteObjectStore(this.storeName);let m=s.createObjectStore(this.storeName,{keyPath:"id"});m.createIndex("novelId","novelId",{unique:!1}),m.createIndex("saveDate","saveDate",{unique:!1}),m.createIndex("novelTitle","novelTitle",{unique:!1})}})})}ensureDB(){return O(this,null,function*(){if(this.db)return this.db;if(yield this.initDB(),!this.db)throw new Error("IndexedDB \uC5F0\uACB0 \uC2E4\uD328");return this.db})}saveGame(t){return O(this,null,function*(){try{let e=yield this.ensureDB();return new Promise((n,a)=>{let m=e.transaction([this.storeName],"readwrite").objectStore(this.storeName),C=I(k({},t),{saveDate:new Date(t.saveDate)}),P=m.put(C);P.onsuccess=()=>{n()},P.onerror=()=>{a(P.error)}})}catch(e){throw e}})}loadGame(t){return O(this,null,function*(){try{let e=yield this.ensureDB();return new Promise((n,a)=>{let C=e.transaction([this.storeName],"readonly").objectStore(this.storeName).get(t);C.onsuccess=()=>{C.result?n(C.result):n(null)},C.onerror=()=>{a(C.error)}})}catch{return null}})}getAllGames(){return O(this,null,function*(){try{let t=yield this.ensureDB();return new Promise((e,n)=>{let m=t.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();m.onsuccess=()=>{let C=m.result||[];C.sort((P,x)=>new Date(x.saveDate).getTime()-new Date(P.saveDate).getTime()),e(C)},m.onerror=()=>{n(m.error)}})}catch{return[]}})}getGamesByNovelId(t){return O(this,null,function*(){try{let e=yield this.ensureDB();return new Promise((n,a)=>{let P=e.transaction([this.storeName],"readonly").objectStore(this.storeName).index("novelId").getAll(t);P.onsuccess=()=>{let x=P.result||[];x.sort((w,g)=>new Date(g.saveDate).getTime()-new Date(w.saveDate).getTime()),n(x)},P.onerror=()=>{a(P.error)}})}catch{return[]}})}deleteGame(t){return O(this,null,function*(){try{let e=yield this.ensureDB();return new Promise((n,a)=>{let C=e.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(t);C.onsuccess=()=>{n()},C.onerror=()=>{a(C.error)}})}catch(e){throw e}})}clearAllGames(){return O(this,null,function*(){try{let t=yield this.ensureDB();return new Promise((e,n)=>{let m=t.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();m.onsuccess=()=>{e()},m.onerror=()=>{n(m.error)}})}catch(t){throw t}})}migrateFromLocalStorage(){return O(this,null,function*(){try{let t=0,e=Object.keys(localStorage);for(let n of e)if(n.startsWith("novel_game_"))try{let a=localStorage.getItem(n);if(a){let s=JSON.parse(a);yield this.saveGame(s),t++}}catch{}return t}catch{return 0}})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Me=class r{constructor(){}seededRandom(t){let e=t;return()=>(e=(e*1664525+1013904223)%4294967296,e/4294967296)}generateDungeon(t,e,n){let a=`dungeon_${Date.now()}`,s=Math.random(),m=this.seededRandom(s*1e6),C={easy:.75,normal:1,hard:1.25,hell:1.5}[e],P=Math.floor(t.baseFloors*C),x={id:a,dungeonTypeId:t.id,difficulty:e,seed:s,storyContext:t.storyDescription,totalFloors:P,currentFloor:0,floors:[],status:"active",startTime:new Date,elapsedTime:0,stats:{roomsExplored:0,monstersKilled:0,elitesKilled:0,bossKilled:!1,treasuresFound:0,deathCount:0},accumulatedRewards:{gold:0,experience:0,items:[]},playerSnapshot:{hp:0,mp:0,level:n}};for(let w=1;w<=P;w++){let g=this.generateFloor(w,P,t,e,m);x.floors.push(g)}return x}generateFloor(t,e,n,a,s){let m=t===e,C=5,P=Math.floor(t/2),x=Math.floor(s()*3),w=C+P+x,g=[],G=this.createRoom("entrance",t,n,a,s);g.push(G);for(let V=0;V<w-2;V++){let Q=this.selectRandomRoomType(m,s),X=this.createRoom(Q,t,n,a,s);g.push(X)}if(m){let V=this.createRoom("boss",t,n,a,s);g.push(V)}else{let V=this.createRoom("exit",t,n,a,s);g.push(V)}return this.connectRooms(g,s),{floorNumber:t,rooms:g,entranceRoomId:g[0].id,exitRoomId:m?void 0:g[g.length-1].id,bossRoomId:m?g[g.length-1].id:void 0,isCleared:!1,generatedAt:new Date}}createRoom(t,e,n,a,s){let m=`room_${Date.now()}_${s()}`,C=s(),P;C<.3?P="small":C<.8?P="medium":P="large";let x={id:m,type:t,size:P,floorNumber:e,description:this.getRoomDescription(t,n.theme,s),monsters:[],isCleared:["entrance","exit","treasure","shrine","shop","safe"].includes(t),interactables:[],connectedRoomIds:[],isExplored:t==="entrance",isCurrentRoom:!1};return["normal","elite","boss"].includes(t)&&(x.monsters=this.spawnMonsters(t,e,n,a,P,s)),t==="treasure"?x.interactables.push(this.createTreasureChest(e,a,s)):t==="shrine"&&x.interactables.push(this.createShrine(s)),x}connectRooms(t,e){for(let n=0;n<t.length-1;n++)t[n].connectedRoomIds.push(t[n+1].id),t[n+1].connectedRoomIds.push(t[n].id);for(let n=1;n<t.length-2;n++)if(e()<.3){let a=n+2;a<t.length&&!t[n].connectedRoomIds.includes(t[a].id)&&(t[n].connectedRoomIds.push(t[a].id),t[a].connectedRoomIds.push(t[n].id))}}selectRandomRoomType(t,e){if(t){let a=["normal","elite","treasure","shrine"];return a[Math.floor(e()*a.length)]}let n=e();return n<.45?"normal":n<.65?"elite":n<.8?"treasure":n<.92?"shrine":n<.97?"shop":"event"}getRoomDescription(t,e,n){let s={entrance:{undead:["\uC881\uC740 \uD1B5\uB85C. \uBCBD\uC5D0 \uC624\uB798\uB41C \uD683\uBD88\uC774 \uCF1C\uC838\uC788\uB2E4.","\uC785\uAD6C\uC5D0\uC11C \uCC28\uAC00\uC6B4 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.","\uBB18\uC9C0\uC758 \uC785\uAD6C. \uBE44\uC11D\uB4E4\uC774 \uB298\uC5B4\uC11C \uC788\uB2E4."],demon:["\uBD89\uAC8C \uD0C0\uC624\uB974\uB294 \uC785\uAD6C. \uC720\uD669 \uB0C4\uC0C8\uAC00 \uC9C4\uB3D9\uD55C\uB2E4.","\uB9C8\uC871\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C0\uB294 \uB3D9\uAD74 \uC785\uAD6C.","\uC6A9\uC554\uC774 \uD750\uB974\uB294 \uB3D9\uAD74 \uC785\uAD6C. \uC5F4\uAE30\uAC00 \uC555\uB3C4\uC801\uC774\uB2E4."],ancient:["\uAC70\uB300\uD55C \uC11D\uC870 \uBB38. \uACE0\uB300 \uBB38\uC790\uAC00 \uC0C8\uACA8\uC838 \uC788\uB2E4.","\uC6C5\uC7A5\uD55C \uC785\uAD6C. \uC138\uC6D4\uC758 \uD754\uC801\uC774 \uC5ED\uB825\uD558\uB2E4.","\uC0AC\uB9C9 \uBAA8\uB798\uC5D0 \uBC18\uCBE4 \uBB3B\uD78C \uC720\uC801\uC758 \uC785\uAD6C."],beast:["\uC232 \uC18D \uB3D9\uAD74. \uC57C\uC218\uC758 \uC6B8\uC74C\uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4.","\uB369\uAD74\uB85C \uB4A4\uB36E\uC778 \uB3D9\uAD74 \uC785\uAD6C.","\uB3D9\uBB3C \uBF08\uAC00 \uD769\uC5B4\uC9C4 \uB3D9\uAD74 \uC785\uAD6C."],magic:["\uB9C8\uBC95\uC9C4\uC774 \uADF8\uB824\uC9C4 \uC785\uAD6C. \uB9C8\uB825\uC774 \uAC10\uC9C0\uB41C\uB2E4.","\uC2E0\uBE44\uB85C\uC6B4 \uBE5B\uC774 \uC0C8\uC5B4\uB098\uC624\uB294 \uD3EC\uD138.","\uB5A0\uB2E4\uB2C8\uB294 \uB8EC \uBB38\uC790\uB4E4\uC774 \uBCF4\uC778\uB2E4."],nature:["\uC774\uB07C\uB85C \uB4A4\uB36E\uC778 \uC790\uC5F0 \uB3D9\uAD74.","\uC9C0\uD558 \uC232\uC758 \uC785\uAD6C. \uBC84\uC12F\uC774 \uBC1C\uAD11\uD558\uACE0 \uC788\uB2E4.","\uBB3C\uC774 \uD750\uB974\uB294 \uC790\uC5F0 \uB3D9\uAD74 \uC785\uAD6C."]},normal:{undead:["\uAD00\uC774 \uB298\uC5B4\uC120 \uBC29. \uBB34\uC5B8\uAC00 \uC6C0\uC9C1\uC774\uB294 \uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4.","\uC5B4\uB450\uC6B4 \uBC29. \uBF08\uB2E4\uADC0\uAC00 \uBC14\uB2E5\uC5D0 \uD769\uC5B4\uC838 \uC788\uB2E4.","\uBB18\uC2E4. \uBCBD\uBA74\uC5D0 \uD574\uACE8\uC774 \uC7A5\uC2DD\uB418\uC5B4 \uC788\uB2E4.","\uC881\uC740 \uBCF5\uB3C4. \uAC70\uBBF8\uC904\uC774 \uACF3\uACF3\uC5D0 \uCCD0\uC838\uC788\uB2E4."],demon:["\uBD89\uC740 \uBE5B\uC774 \uAC10\uB3C4\uB294 \uBC29. \uC5F4\uAE30\uAC00 \uB290\uAEF4\uC9C4\uB2E4.","\uC6A9\uC554\uC774 \uD750\uB974\uB294 \uBC29. \uB9C8\uC871\uC758 \uC6B8\uC74C\uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4.","\uD654\uC5FC\uC5D0 \uADF8\uC744\uB9B0 \uBC29. \uC720\uD669 \uB0C4\uC0C8\uAC00 \uB3C5\uD558\uB2E4.","\uC545\uB9C8\uC758 \uBB38\uC591\uC774 \uC0C8\uACA8\uC9C4 \uBC29."],ancient:["\uBA3C\uC9C0\uAC00 \uC313\uC778 \uBC29. \uACE0\uB300 \uC720\uBB3C\uB4E4\uC774 \uB193\uC5EC\uC788\uB2E4.","\uB113\uC740 \uD640. \uC11D\uC0C1\uB4E4\uC774 \uB3C4\uC5F4\uD574 \uC788\uB2E4.","\uACE0\uB300 \uBB38\uC790\uAC00 \uC0C8\uACA8\uC9C4 \uBCBD\uBA74.","\uBCF4\uC874\uC774 \uC798 \uB41C \uACE0\uB300\uC758 \uBC29."],beast:["\uC57C\uC218\uC758 \uB465\uC9C0. \uBF08\uC640 \uAC00\uC8FD\uC774 \uD769\uC5B4\uC838 \uC788\uB2E4.","\uC881\uC740 \uAD74. \uAE01\uD78C \uC790\uAD6D\uC774 \uBCF4\uC778\uB2E4.","\uC5B4\uB450\uC6B4 \uBC29. \uC73C\uB974\uB801\uAC70\uB9AC\uB294 \uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4.","\uD138\uACFC \uBC1C\uD1B1 \uC790\uAD6D\uC774 \uAC00\uB4DD\uD55C \uBC29."],magic:["\uB9C8\uBC95\uC9C4\uC774 \uADF8\uB824\uC9C4 \uBC29. \uB9C8\uB825\uC774 \uD750\uB978\uB2E4.","\uB5A0\uB2E4\uB2C8\uB294 \uC218\uC815\uB4E4. \uC2E0\uBE44\uB85C\uC6B4 \uAE30\uC6B4.","\uB9C8\uBC95 \uC2E4\uD5D8\uC2E4\uC758 \uD754\uC801. \uB9C8\uB098\uAC00 \uCDA9\uB9CC\uD558\uB2E4.","\uCC28\uC6D0\uC774 \uC65C\uACE1\uB41C \uBC29. \uD604\uC2E4\uAC10\uC774 \uD76C\uBBF8\uD558\uB2E4."],nature:["\uC774\uB07C\uC640 \uBC84\uC12F\uC73C\uB85C \uB4A4\uB36E\uC778 \uBC29.","\uC9C0\uD558 \uC232. \uBC1C\uAD11 \uC2DD\uBB3C\uB4E4\uC774 \uBE5B\uB09C\uB2E4.","\uBB3C\uC6C5\uB369\uC774\uAC00 \uC788\uB294 \uC790\uC5F0 \uB3D9\uAD74.","\uBFCC\uB9AC\uAC00 \uCC9C\uC7A5\uC744 \uB6AB\uACE0 \uC790\uB77C\uACE0 \uC788\uB2E4."]},elite:{undead:["\uAC70\uB300\uD55C \uBB34\uB364. \uAC15\uB825\uD55C \uC5B8\uB370\uB4DC\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.","\uC81C\uB2E8\uC774 \uB193\uC778 \uBC29. \uBD80\uD65C\uC758 \uC758\uC2DD \uD754\uC801\uC774 \uBCF4\uC778\uB2E4.","\uC5D8\uB9AC\uD2B8 \uC5B8\uB370\uB4DC\uC758 \uAC70\uCC98. \uAC80\uC740 \uC624\uB77C\uAC00 \uD750\uB978\uB2E4."],demon:["\uB9C8\uC871 \uB300\uC7A5\uC758 \uBC29. \uBD89\uC740 \uC624\uB77C\uAC00 \uAC15\uB82C\uD558\uB2E4.","\uD654\uC5FC \uC81C\uB2E8. \uAC15\uB825\uD55C \uB9C8\uC871\uC774 \uC9C0\uD0A4\uACE0 \uC788\uB2E4.","\uC9C0\uC625\uC758 \uBB38 \uC55E. \uAC15\uD55C \uC545\uB9C8\uC758 \uAE30\uC6B4."],ancient:["\uC218\uD638\uC790\uC758 \uBC29. \uAC70\uB300\uD55C \uACE8\uB818\uC774 \uC11C\uC788\uB2E4.","\uBD09\uC778\uB41C \uBC29. \uAC15\uB825\uD55C \uB9C8\uBC95\uC774 \uAC10\uC9C0\uB41C\uB2E4.","\uACE0\uB300 \uC804\uC0AC\uC758 \uBB34\uB364. \uAC11\uC637\uC774 \uC6C0\uC9C1\uC778\uB2E4."],beast:["\uC54C\uD30C\uC758 \uB465\uC9C0. \uAC15\uD55C \uC57C\uC218\uC758 \uAE30\uC6B4.","\uAC70\uB300\uD55C \uB3D9\uBB3C\uC758 \uAC70\uCC98. \uC704\uC555\uAC10\uC774 \uB290\uAEF4\uC9C4\uB2E4.","\uBB34\uB9AC\uC758 \uC6B0\uB450\uBA38\uB9AC\uAC00 \uC9C0\uD0A4\uB294 \uBC29."],magic:["\uB300\uB9C8\uBC95\uC0AC\uC758 \uBC29. \uB9C8\uB825\uC774 \uD3ED\uBC1C\uC801\uC774\uB2E4.","\uAC15\uB825\uD55C \uB9C8\uBC95 \uC0DD\uBB3C\uC774 \uBD09\uC778\uB418\uC5B4 \uC788\uB2E4.","\uCC28\uC6D0 \uADE0\uC5F4. \uAC15\uB825\uD55C \uC874\uC7AC\uAC00 \uB290\uAEF4\uC9C4\uB2E4."],nature:["\uACE0\uB300 \uB098\uBB34\uC758 \uC218\uD638\uC790. \uC790\uC5F0\uC758 \uD798\uC774 \uAC15\uD558\uB2E4.","\uAC70\uB300 \uC2DD\uBB3C \uAD34\uBB3C\uC758 \uB465\uC9C0.","\uC790\uC5F0\uC758 \uC815\uB839\uC774 \uC9C0\uD0A4\uB294 \uC131\uC5ED."]},boss:{undead:["\uAC70\uB300\uD55C \uC11D\uAD00. \uB9AC\uCE58\uC758 \uAE30\uC6B4\uC774 \uC555\uB3C4\uC801\uC774\uB2E4.","\uB9DD\uC790\uC758 \uC655\uC88C. \uD574\uACE8 \uC655\uC774 \uC549\uC544\uC788\uB2E4.","\uC5B8\uB370\uB4DC \uAD70\uC8FC\uC758 \uBC29. \uC8FD\uC74C\uC758 \uAE30\uC6B4\uC774 \uCDA9\uB9CC\uD558\uB2E4."],demon:["\uB9C8\uC655\uC758 \uC625\uC88C. \uD654\uC5FC\uC774 \uC18C\uC6A9\uB3CC\uC774\uCE5C\uB2E4.","\uC9C0\uC625\uC758 \uBB38 \uC55E. \uB370\uBAAC \uB85C\uB4DC\uAC00 \uAE30\uB2E4\uB9B0\uB2E4.","\uC545\uB9C8\uC758 \uC131\uC18C. \uC555\uB3C4\uC801\uC778 \uC545\uC758\uAC00 \uB290\uAEF4\uC9C4\uB2E4."],ancient:["\uD0C0\uC774\uD0C4\uC758 \uBC29. \uAC70\uB300\uD55C \uC11D\uC0C1\uC774 \uC6C0\uC9C1\uC778\uB2E4.","\uACE0\uB300 \uC655\uC758 \uBB34\uB364. \uC655\uC758 \uC601\uD63C\uC774 \uAE68\uC5B4\uB0AC\uB2E4.","\uC720\uC801\uC758 \uD575\uC2EC\uBD80. \uCD5C\uC885 \uC218\uD638\uC790\uAC00 \uC788\uB2E4."],beast:["\uC804\uC124\uC758 \uC57C\uC218. \uBAA8\uB4E0 \uC9D0\uC2B9\uC758 \uC655.","\uAC70\uB300\uD55C \uB3D9\uAD74 \uC655\uAD6D\uC758 \uAD70\uC8FC.","\uACE0\uB300 \uB9F9\uC218\uC758 \uAC70\uCC98."],magic:["\uB300\uB9C8\uBC95\uC0AC\uC758 \uD0D1 \uAF2D\uB300\uAE30.","\uCC28\uC6D0\uC758 \uC9C0\uBC30\uC790. \uD604\uC2E4\uC774 \uC65C\uACE1\uB41C\uB2E4.","\uB9C8\uBC95\uC758 \uD654\uC2E0. \uC21C\uC218\uD55C \uB9C8\uB825\uC758 \uC874\uC7AC."],nature:["\uACE0\uB300 \uC218\uD638\uB839. \uC790\uC5F0\uC758 \uD654\uC2E0.","\uC138\uACC4\uC218\uC758 \uC218\uD638\uC790.","\uC6D0\uC2DC\uB9BC\uC758 \uC9C0\uBC30\uC790."]},treasure:{undead:["\uBA3C\uC9C0 \uC313\uC778 \uBCF4\uBB3C \uC0C1\uC790.","\uBE44\uBC00 \uBB34\uB364 \uC18D \uBCF4\uBB3C.","\uD669\uAE08\uC73C\uB85C \uB41C \uC11D\uAD00."],demon:["\uD654\uC5FC\uC5D0 \uB458\uB7EC\uC2F8\uC778 \uBCF4\uBB3C \uC0C1\uC790.","\uB9C8\uC871\uC758 \uC804\uB9AC\uD488.","\uC9C0\uC625\uC758 \uBCF4\uBB3C\uACE0."],ancient:["\uBD09\uC778\uB41C \uBCF4\uBB3C \uC0C1\uC790. \uB8EC \uBB38\uC790\uAC00 \uC0C8\uACA8\uC838 \uC788\uB2E4.","\uACE0\uB300\uC758 \uBCF4\uBB3C \uCC3D\uACE0.","\uC655\uC2E4\uC758 \uBCF4\uBB3C."],beast:["\uC57C\uC218\uAC00 \uBAA8\uC740 \uBCF4\uBB3C.","\uBE5B\uB098\uB294 \uB3CC\uC774 \uAC00\uB4DD\uD55C \uB465\uC9C0.","\uC9D0\uC2B9\uC758 \uBCF4\uBB3C\uACE0."],magic:["\uB9C8\uBC95\uC73C\uB85C \uBCF4\uD638\uB41C \uC0C1\uC790.","\uCC28\uC6D0 \uC8FC\uBA38\uB2C8.","\uBB34\uD55C \uBCF4\uBB3C \uC0C1\uC790."],nature:["\uC790\uC5F0\uC758 \uC120\uBB3C. \uBE5B\uB098\uB294 \uC5F4\uB9E4.","\uD06C\uB9AC\uC2A4\uD0C8 \uB3D9\uAD74.","\uBCF4\uC11D\uB098\uBB34."]},shrine:{undead:["\uC8FD\uC74C\uC758 \uC131\uC18C. \uCC28\uAC00\uC6B4 \uAE30\uC6B4.","\uB9DD\uC790\uC758 \uC81C\uB2E8.","\uC601\uD63C\uC758 \uC0D8."],demon:["\uC9C0\uC625\uBD88 \uC131\uC18C.","\uC545\uB9C8\uC758 \uC81C\uB2E8. \uD798\uC774 \uC19F\uB294\uB2E4.","\uB9C8\uB825\uC758 \uC0D8."],ancient:["\uACE0\uB300\uC758 \uC131\uC18C. \uC2E0\uC131\uD55C \uAE30\uC6B4.","\uB9C8\uB098\uC758 \uC0D8.","\uCD95\uBCF5\uC758 \uC81C\uB2E8."],beast:["\uC57C\uC0DD\uC758 \uC131\uC18C.","\uC815\uB839\uC758 \uC0D8.","\uC790\uC5F0\uC758 \uC81C\uB2E8."],magic:["\uB9C8\uB825 \uCDA9\uC804\uC18C.","\uB8EC \uC81C\uB2E8.","\uB9C8\uBC95\uC9C4 \uC131\uC18C."],nature:["\uC0DD\uBA85\uC758 \uC0D8.","\uCE58\uC720\uC758 \uB098\uBB34.","\uC790\uC5F0\uC758 \uCD95\uBCF5."]}}[t]?.[e]||["\uD3C9\uBC94\uD55C \uBC29."];return s[Math.floor(n()*s.length)]}spawnMonsters(t,e,n,a,s,m){let C=[],P=e*2,w={easy:.7,normal:1,hard:1.3,hell:1.6}[a]||1,G={small:.75,medium:1,large:1.5}[s]||1;if(t==="normal"){let $=Math.floor((2+m()*3)*G);for(let V=0;V<$;V++)C.push(this.createMonster("normal",P,n,w,m))}else if(t==="elite"){let $=Math.floor((1+m()*2)*G);for(let V=0;V<$;V++)C.push(this.createMonster("elite",P+3,n,w,m))}else t==="boss"&&C.push(this.createMonster("boss",P+7,n,w,m));return C}createMonster(t,e,n,a,s){let m=`monster_${Date.now()}_${s()}`,C=50+e*25,P=8+e*4,x=3+e*2,w={normal:1,elite:2.5,boss:6}[t],g=.85+s()*.3,G={id:m,name:this.getMonsterName(t,n,s),type:t,level:e,hp:Math.floor(C*w*a*g),maxHp:Math.floor(C*w*a*g),attack:Math.floor(P*w*a*g),defense:Math.floor(x*w*a*g),dropTable:{goldMin:Math.floor(10*e*w),goldMax:Math.floor(25*e*w),itemDropChance:t==="boss"?1:t==="elite"?.6:.25,itemRarity:t==="boss"?"legendary":t==="elite"?"rare":"common"},isDead:!1};if(t==="elite"||t==="boss"){let $=t==="boss"?3:2;G.eliteAffixes=this.generateEliteAffixes($,s),G.eliteAffixes.forEach(V=>{this.applyEliteAffix(G,V)})}return G}getMonsterName(t,e,n){let a={normal:{undead:["\uC880\uBE44","\uC2A4\uCF08\uB808\uD1A4","\uC720\uB839","\uAD6C\uC6B8","\uC6CC\uCEE4","\uD574\uACE8\uBCD1\uC0AC"],demon:["\uC784\uD504","\uD5EC\uD558\uC6B4\uB4DC","\uB9C8\uC871 \uC804\uC0AC","\uC791\uC740 \uC545\uB9C8","\uD654\uC5FC \uC815\uB839","\uB9C8\uC871 \uC815\uCC30\uBCD1"],ancient:["\uACE8\uB818","\uC6C0\uC9C1\uC774\uB294 \uAC11\uC637","\uACE0\uB300 \uC218\uD638\uC790","\uC11D\uC0C1","\uB9C8\uBC95 \uC778\uD615","\uACE0\uB300 \uC804\uC0AC"],beast:["\uB291\uB300","\uACF0","\uBA67\uB3FC\uC9C0","\uAC70\uB300 \uAC70\uBBF8","\uB3C5\uC0AC","\uBC15\uC950 \uB5BC"],magic:["\uB9C8\uBC95 \uC2AC\uB77C\uC784","\uC6D0\uC18C \uC815\uB839","\uB9C8\uB098 \uB4DC\uB808\uC778","\uB5A0\uB2E4\uB2C8\uB294 \uB208","\uB9C8\uBC95 \uAD6C\uCCB4","\uD658\uC601"],nature:["\uAC70\uB300 \uBC84\uC12F","\uC2DD\uC778 \uC2DD\uBB3C","\uB369\uAD74 \uAD34\uBB3C","\uB3CC\uC9C4 \uB098\uBB34","\uD3EC\uC790 \uAD34\uBB3C","\uB098\uBB34 \uC815\uB839"]},elite:{undead:["\uAC15\uD654\uB41C \uC880\uBE44","\uACE0\uC704 \uC2A4\uCF08\uB808\uD1A4","\uC6D0\uD55C\uC758 \uC720\uB839","\uB9AC\uCE58 \uC218\uC2B5\uC0DD","\uC8FD\uC74C\uC758 \uAE30\uC0AC","\uC800\uC8FC\uBC1B\uC740 \uC804\uC0AC"],demon:["\uC0C1\uAE09 \uC784\uD504","\uC9C0\uC625\uC758 \uC0AC\uB0E5\uAC1C","\uB9C8\uC871 \uB300\uC7A5","\uD654\uC5FC \uAD70\uC8FC","\uC5B4\uB460\uC758 \uB9C8\uBC95\uC0AC","\uC545\uB9C8 \uAD70\uB2E8\uC7A5"],ancient:["\uACE0\uB300 \uACE8\uB818","\uB9C8\uBC95 \uAC11\uC637","\uC218\uD638\uC790 \uB300\uC7A5","\uD0C0\uC774\uD0C4\uC758 \uD30C\uD3B8","\uACE0\uB300 \uB9C8\uBC95\uC0AC","\uBD09\uC778\uB41C \uC804\uC0AC"],beast:["\uC54C\uD30C \uB291\uB300","\uAD11\uD3EC\uD55C \uACF0","\uAC70\uB300 \uB9F9\uC218","\uC5EC\uC655 \uAC70\uBBF8","\uC655\uBC40","\uACE0\uB300 \uC9D0\uC2B9"],magic:["\uC0C1\uAE09 \uC815\uB839","\uB9C8\uBC95 \uC9C0\uBC30\uC790","\uCC28\uC6D0 \uD30C\uC218\uAFBC","\uB9C8\uB098 \uAD70\uC8FC","\uD658\uC601 \uB9C8\uC2A4\uD130","\uACF5\uAC04 \uC65C\uACE1\uC790"],nature:["\uACE0\uB300 \uC218\uD638\uBAA9","\uC790\uC5F0\uC758 \uBCF5\uC218\uC790","\uAC70\uB300 \uD3EC\uC2DD\uC790","\uC815\uB839 \uAD70\uC8FC","\uC138\uACC4\uC218 \uAC00\uC9C0","\uC790\uC5F0\uC758 \uBD84\uB178"]},boss:{undead:["\uB9AC\uCE58","\uD574\uACE8 \uC655","\uB9DD\uB839\uC758 \uAD70\uC8FC","\uC8FD\uC74C\uC758 \uD654\uC2E0","\uC5B8\uB370\uB4DC \uB85C\uB4DC","\uB9DD\uC790\uC758 \uC655"],demon:["\uB9C8\uC655","\uC9C0\uC625\uC758 \uAD70\uC8FC","\uB370\uBAAC \uB85C\uB4DC","\uD654\uC5FC\uC758 \uAD70\uC8FC","\uC545\uB9C8 \uB300\uC655","\uC2EC\uC5F0\uC758 \uC9C0\uBC30\uC790"],ancient:["\uD0C0\uC774\uD0C4","\uACE0\uB300 \uC655","\uC720\uC801\uC758 \uC218\uD638\uC2E0","\uCD5C\uD6C4\uC758 \uC218\uD638\uC790","\uACE0\uB300 \uD669\uC81C","\uBD09\uC778\uB41C \uC2E0"],beast:["\uC9D0\uC2B9\uC758 \uC655","\uD0DC\uACE0\uC758 \uB9F9\uC218","\uC57C\uC218 \uAD70\uC8FC","\uC6D0\uC2DC\uC758 \uD3EC\uC2DD\uC790","\uB9CC\uBB3C\uC758 \uC0AC\uB0E5\uAFBC","\uACE0\uB300 \uC6A9"],magic:["\uB300\uB9C8\uBC95\uC0AC","\uCC28\uC6D0 \uC9C0\uBC30\uC790","\uB9C8\uBC95\uC758 \uD654\uC2E0","\uB9C8\uB098\uC758 \uAD70\uC8FC","\uACF5\uAC04\uC758 \uC9C0\uBC30\uC790","\uD604\uC2E4 \uC65C\uACE1\uC790"],nature:["\uC138\uACC4\uC218 \uC218\uD638\uC790","\uC790\uC5F0\uC758 \uD654\uC2E0","\uC6D0\uC2DC\uB9BC \uAD70\uC8FC","\uB300\uC9C0\uC758 \uBD84\uB178","\uC0DD\uBA85\uC758 \uC9C0\uBC30\uC790","\uC790\uC5F0 \uADF8 \uC790\uCCB4"]}},s=e.theme||"undead",m=a[t][s]||["\uC54C \uC218 \uC5C6\uB294 \uBAAC\uC2A4\uD130"];return m[Math.floor(n()*m.length)]}generateEliteAffixes(t,e){let n=["\uAC15\uD654","\uC7AC\uC0DD","\uD654\uC5FC","\uB0C9\uAE30","\uB3C5","\uBC88\uAC1C","\uD761\uD608","\uBC18\uC0AC","\uC2E0\uC18D","\uACAC\uACE0","\uAD11\uD3ED\uD654","\uBD84\uC5F4","\uC21C\uAC04\uC774\uB3D9","\uB9C8\uBC95\uC800\uD56D","\uBB3C\uB9AC\uC800\uD56D"],a=[],s=[...n].sort(()=>e()-.5);for(let m=0;m<t&&m<s.length;m++)a.push(s[m]);return a}applyEliteAffix(t,e){switch(e){case"\uAC15\uD654":t.hp=Math.floor(t.hp*1.5),t.maxHp=Math.floor(t.maxHp*1.5);break;case"\uACAC\uACE0":t.defense=Math.floor(t.defense*1.5);break;case"\uC2E0\uC18D":t.attack=Math.floor(t.attack*1.3);break;case"\uD654\uC5FC":case"\uB0C9\uAE30":case"\uB3C5":case"\uBC88\uAC1C":t.attack=Math.floor(t.attack*1.2);break}}createTreasureChest(t,e,n){let s={easy:.75,normal:1,hard:1.5,hell:2}[e]||1;return{id:`chest_${Date.now()}_${n()}`,type:"chest",name:"\uBCF4\uBB3C \uC0C1\uC790",description:"\uBC18\uC9DD\uC774\uB294 \uBCF4\uBB3C \uC0C1\uC790. \uADC0\uC911\uD55C \uC544\uC774\uD15C\uC774 \uB4E4\uC5B4\uC788\uC744 \uAC83 \uAC19\uB2E4.",isLocked:n()<.2,lockDifficulty:Math.floor(t*s),lootGold:Math.floor((100+n()*200)*t*s),lootItems:[],isUsed:!1}}createShrine(t){let e=[{type:"health",name:"\uC0DD\uBA85\uC758 \uC131\uC18C",value:50,duration:30,description:"\uCD5C\uB300 HP\uAC00 50% \uC99D\uAC00\uD569\uB2C8\uB2E4."},{type:"mana",name:"\uB9C8\uB098\uC758 \uC131\uC18C",value:30,duration:30,description:"\uCD5C\uB300 MP\uAC00 30% \uC99D\uAC00\uD569\uB2C8\uB2E4."},{type:"damage",name:"\uD798\uC758 \uC131\uC18C",value:25,duration:15,description:"\uACF5\uACA9\uB825\uC774 25% \uC99D\uAC00\uD569\uB2C8\uB2E4."},{type:"defense",name:"\uBCF4\uD638\uC758 \uC131\uC18C",value:20,duration:15,description:"\uBC29\uC5B4\uB825\uC774 20% \uC99D\uAC00\uD569\uB2C8\uB2E4."},{type:"experience",name:"\uC9C0\uD61C\uC758 \uC131\uC18C",value:100,duration:10,description:"\uD68D\uB4DD \uACBD\uD5D8\uCE58\uAC00 100% \uC99D\uAC00\uD569\uB2C8\uB2E4."},{type:"gold",name:"\uBD80\uC758 \uC131\uC18C",value:50,duration:10,description:"\uD68D\uB4DD \uACE8\uB4DC\uAC00 50% \uC99D\uAC00\uD569\uB2C8\uB2E4."},{type:"speed",name:"\uC2E0\uC18D\uC758 \uC131\uC18C",value:30,duration:20,description:"\uC774\uB3D9 \uC18D\uB3C4\uAC00 30% \uC99D\uAC00\uD569\uB2C8\uB2E4."},{type:"luck",name:"\uD589\uC6B4\uC758 \uC131\uC18C",value:20,duration:20,description:"\uC544\uC774\uD15C \uB4DC\uB86D\uB960\uC774 20% \uC99D\uAC00\uD569\uB2C8\uB2E4."}],n=e[Math.floor(t()*e.length)];return{id:`shrine_${Date.now()}_${t()}`,type:"shrine",name:n.name,description:n.description,shrineEffect:{type:n.type,value:n.value,duration:n.duration},isUsed:!1}}getDifficultyRewardMultiplier(t){return{easy:.75,normal:1,hard:1.5,hell:2.5}[t]||1}getFloorDangerLevel(t,e){return 1+t/e*2}getRoomTypeWeights(t,e){let n=t/e;return{normal:.45,elite:.15+n*.15,treasure:.15,shrine:.12,shop:.08,event:.05,safe:Math.max(.05-n*.05,0)}}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Fe=class r{constructor(t){this.dungeonGenerator=t}getDefaultDungeonTypes(){return[{id:"catacombs",name:"Catacombs",koreanName:"\uBC84\uB824\uC9C4 \uC9C0\uD558\uBB18\uC9C0",theme:"undead",icon:"\u26B0\uFE0F",description:"\uC5B8\uB370\uB4DC\uAC00 \uBC30\uD68C\uD558\uB294 \uC624\uB798\uB41C \uBB34\uB364",backgroundColor:"#1a1a2e",minLevel:1,recommendedLevel:3,baseFloors:4,monsterTypes:["zombie","skeleton","ghost"],bossType:"lich",baseGoldReward:200,baseExpReward:150,uniqueItems:["bone_wand","death_amulet"],storyDescription:"\uC232 \uC18D\uC5D0\uC11C \uBC1C\uACAC\uD55C \uC5B4\uB450\uC6B4 \uB3D9\uAD74 \uC785\uAD6C. \uC5B8\uB370\uB4DC\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4."},{id:"demon_cave",name:"Demon Cave",koreanName:"\uB9C8\uC871\uC758 \uB3D9\uAD74",theme:"demon",icon:"\u{1F479}",description:"\uB9C8\uC871\uC774 \uC228\uC5B4\uC788\uB2E4\uB294 \uC18C\uBB38\uC758 \uB3D9\uAD74",backgroundColor:"#8B0000",minLevel:10,recommendedLevel:15,baseFloors:6,monsterTypes:["imp","hellhound","demon_warrior"],bossType:"demon_lord",baseGoldReward:500,baseExpReward:400,uniqueItems:["demonic_blade","hellfire_ring"],storyDescription:"\uC0B0 \uC18D \uAE4A\uC740 \uACF3\uC5D0\uC11C \uBC1C\uACAC\uD55C \uBD89\uAC8C \uBE5B\uB098\uB294 \uB3D9\uAD74. \uC720\uD669 \uB0C4\uC0C8\uAC00 \uC9C4\uB3D9\uD55C\uB2E4."},{id:"ancient_ruins",name:"Ancient Ruins",koreanName:"\uACE0\uB300 \uC720\uC801",theme:"ancient",icon:"\u{1F3DB}\uFE0F",description:"\uACE0\uB300 \uBB38\uBA85\uC758 \uD754\uC801\uC774 \uB0A8\uC544\uC788\uB294 \uC720\uC801",backgroundColor:"#2F4F4F",minLevel:20,recommendedLevel:25,baseFloors:8,monsterTypes:["golem","animated_armor","ancient_guardian"],bossType:"titan",baseGoldReward:1e3,baseExpReward:800,uniqueItems:["ancient_artifact","rune_stone"],storyDescription:"\uC0AC\uB9C9\uC5D0\uC11C \uBC1C\uACAC\uD55C \uAC70\uB300\uD55C \uC720\uC801. \uAC15\uB825\uD55C \uB9C8\uBC95\uC774 \uBD09\uC778\uB418\uC5B4 \uC788\uB2E4."}]}generateDungeon(t,e,n){return this.dungeonGenerator.generateDungeon(t,e,n)}canEnterDungeon(t,e){return e.level<t.minLevel?{canEnter:!1,reason:`\uB808\uBCA8 ${t.minLevel} \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4`}:{canEnter:!0}}generateFloor(t,e,n,a,s){let m=t===e,C=5+Math.floor(Math.random()*3),P=[],x=this.createRoom("entrance",t,n,a);P.push(x);for(let g=0;g<C-2;g++){let G=this.selectRandomRoomType(m),$=this.createRoom(G,t,n,a);P.push($)}if(m){let g=this.createRoom("boss",t,n,a);P.push(g)}else{let g=this.createRoom("exit",t,n,a);P.push(g)}for(let g=0;g<P.length-1;g++)P[g].connectedRoomIds.push(P[g+1].id),P[g+1].connectedRoomIds.push(P[g].id);return{floorNumber:t,rooms:P,entranceRoomId:P[0].id,exitRoomId:m?void 0:P[P.length-1].id,bossRoomId:m?P[P.length-1].id:void 0,isCleared:!1,generatedAt:new Date}}createRoom(t,e,n,a){let m={id:`room_${Date.now()}_${Math.random()}`,type:t,size:"medium",description:this.getRoomDescription(t,n),monsters:[],isCleared:t==="entrance"||t==="exit"||t==="treasure"||t==="shrine"||t==="shop"||t==="safe",interactables:[],connectedRoomIds:[],isExplored:t==="entrance",isCurrentRoom:!1};return(t==="normal"||t==="elite"||t==="boss")&&(m.monsters=this.spawnMonsters(t,e,n,a)),t==="treasure"?m.interactables.push(this.createTreasureChest(e,a)):t==="shrine"&&m.interactables.push(this.createShrine()),m}selectRandomRoomType(t){if(t){let n=["normal","elite","treasure","shrine"];return n[Math.floor(Math.random()*n.length)]}let e=Math.random();return e<.5?"normal":e<.7?"elite":e<.85?"treasure":e<.95?"shrine":"shop"}getRoomDescription(t,e){let a={entrance:{undead:["\uC881\uC740 \uD1B5\uB85C. \uBCBD\uC5D0 \uC624\uB798\uB41C \uD683\uBD88\uC774 \uCF1C\uC838\uC788\uB2E4.","\uC785\uAD6C\uC5D0\uC11C \uCC28\uAC00\uC6B4 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4."],demon:["\uBD89\uAC8C \uD0C0\uC624\uB974\uB294 \uC785\uAD6C. \uC720\uD669 \uB0C4\uC0C8\uAC00 \uC9C4\uB3D9\uD55C\uB2E4.","\uB9C8\uC871\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C0\uB294 \uB3D9\uAD74 \uC785\uAD6C."],ancient:["\uAC70\uB300\uD55C \uC11D\uC870 \uBB38. \uACE0\uB300 \uBB38\uC790\uAC00 \uC0C8\uACA8\uC838 \uC788\uB2E4.","\uC6C5\uC7A5\uD55C \uC785\uAD6C. \uC138\uC6D4\uC758 \uD754\uC801\uC774 \uC5ED\uB825\uD558\uB2E4."]},normal:{undead:["\uAD00\uC774 \uB298\uC5B4\uC120 \uBC29. \uBB34\uC5B8\uAC00 \uC6C0\uC9C1\uC774\uB294 \uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4.","\uC5B4\uB450\uC6B4 \uBC29. \uBF08\uB2E4\uADC0\uAC00 \uBC14\uB2E5\uC5D0 \uD769\uC5B4\uC838 \uC788\uB2E4."],demon:["\uBD89\uC740 \uBE5B\uC774 \uAC10\uB3C4\uB294 \uBC29. \uC5F4\uAE30\uAC00 \uB290\uAEF4\uC9C4\uB2E4.","\uC6A9\uC554\uC774 \uD750\uB974\uB294 \uBC29. \uB9C8\uC871\uC758 \uC6B8\uC74C\uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4."],ancient:["\uBA3C\uC9C0\uAC00 \uC313\uC778 \uBC29. \uACE0\uB300 \uC720\uBB3C\uB4E4\uC774 \uB193\uC5EC\uC788\uB2E4.","\uB113\uC740 \uD640. \uC11D\uC0C1\uB4E4\uC774 \uB3C4\uC5F4\uD574 \uC788\uB2E4."]},elite:{undead:["\uAC15\uB825\uD55C \uC5B8\uB370\uB4DC\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C0\uB294 \uBC29.","\uC5D8\uB9AC\uD2B8 \uBAAC\uC2A4\uD130\uC758 \uC601\uC5ED. \uC704\uD5D8\uD55C \uBD84\uC704\uAE30\uAC00 \uAC10\uB3C8\uB2E4."],demon:["\uAC15\uB825\uD55C \uB9C8\uC871\uC774 \uC9C0\uD0A4\uB294 \uBC29. \uC555\uB3C4\uC801\uC778 \uD798\uC774 \uB290\uAEF4\uC9C4\uB2E4.","\uC5D8\uB9AC\uD2B8 \uC545\uB9C8\uC758 \uAC70\uCC98. \uBD89\uC740 \uBD88\uAF43\uC774 \uD0C0\uC624\uB978\uB2E4."],ancient:["\uACE0\uB300\uC758 \uC815\uC608 \uC218\uD638\uC790\uB4E4\uC774 \uC9C0\uD0A4\uB294 \uBC29.","\uAC15\uB825\uD55C \uB9C8\uBC95\uC758 \uAE30\uC6B4\uC774 \uAC10\uB3C4\uB294 \uBC29."]},boss:{undead:["\uAC70\uB300\uD55C \uD574\uACE8 \uC655\uC88C\uAC00 \uB193\uC778 \uBC29. \uCD5C\uC885 \uBCF4\uC2A4\uC758 \uC601\uC5ED.","\uC5B8\uB370\uB4DC \uAD70\uC8FC\uC758 \uBC29. \uC555\uB3C4\uC801\uC778 \uC0AC\uC545\uD568\uC774 \uB290\uAEF4\uC9C4\uB2E4."],demon:["\uC9C0\uC625\uC758 \uAD70\uC8FC\uAC00 \uC9C0\uBC30\uD558\uB294 \uBC29. \uBD88\uC9C0\uC625\uC774 \uD3BC\uCCD0\uC9C4\uB2E4.","\uB9C8\uC655\uC758 \uAC70\uCC98. \uCC28\uC6D0\uC774 \uB4A4\uD2C0\uB9AC\uB294 \uB290\uB08C\uC774 \uB4E0\uB2E4."],ancient:["\uACE0\uB300 \uC2E0\uC758 \uC131\uC18C. \uC2E0\uC131\uD55C \uD798\uACFC \uB3D9\uC2DC\uC5D0 \uD30C\uAD34\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.","\uCD5C\uC885 \uC218\uD638\uC790\uC758 \uBC29. \uAC70\uB300\uD55C \uB9C8\uBC95\uC9C4\uC774 \uADF8\uB824\uC838 \uC788\uB2E4."]},treasure:{undead:["\uBA3C\uC9C0 \uC313\uC778 \uC0C1\uC790\uAC00 \uB193\uC5EC\uC788\uB2E4.","\uBE44\uBC00\uC2A4\uB7EC\uC6B4 \uBCF4\uBB3C \uBC29. \uBE5B\uB098\uB294 \uC0C1\uC790\uAC00 \uBCF4\uC778\uB2E4."],demon:["\uD654\uC5FC\uC5D0 \uB458\uB7EC\uC2F8\uC778 \uBCF4\uBB3C \uC0C1\uC790.","\uB9C8\uC871\uC774 \uC9C0\uD0A4\uB358 \uBCF4\uBB3C \uBC29."],ancient:["\uBD09\uC778\uB41C \uBCF4\uBB3C \uC0C1\uC790. \uB8EC \uBB38\uC790\uAC00 \uC0C8\uACA8\uC838 \uC788\uB2E4.","\uACE0\uB300\uC758 \uBCF4\uBB3C \uCC3D\uACE0."]},shrine:{undead:["\uC2E0\uC131\uD55C \uBE5B\uC774 \uAC10\uB3C4\uB294 \uC81C\uB2E8. \uBD88\uAE38\uD55C \uBD84\uC704\uAE30\uC640 \uB300\uBE44\uB41C\uB2E4.","\uCD95\uBCF5\uC758 \uC131\uC18C. \uC5B8\uB370\uB4DC\uC758 \uC800\uC8FC\uB97C \uC815\uD654\uD560 \uC218 \uC788\uC744 \uAC83 \uAC19\uB2E4."],demon:["\uBD89\uC740 \uC81C\uB2E8. \uC545\uB9C8\uC758 \uD798\uC744 \uBE4C\uB9B4 \uC218 \uC788\uC744 \uAC83 \uAC19\uB2E4.","\uB9C8\uB825\uC758 \uC131\uC18C. \uAC15\uB825\uD55C \uBC84\uD504\uB97C \uBC1B\uC744 \uC218 \uC788\uB2E4."],ancient:["\uACE0\uB300\uC758 \uC81C\uB2E8. \uC2E0\uBE44\uD55C \uD798\uC774 \uAE43\uB4E4\uC5B4 \uC788\uB2E4.","\uCD95\uBCF5\uC758 \uC131\uC18C. \uACE0\uB300 \uC2E0\uC758 \uC740\uCD1D\uC774 \uB290\uAEF4\uC9C4\uB2E4."]},shop:{undead:["\uB5A0\uB3CC\uC774 \uC0C1\uC778\uC774 \uC788\uB294 \uBC29. \uC5B4\uB460 \uC18D\uC5D0\uC11C \uBE5B\uB098\uB294 \uBB3C\uAC74\uB4E4.","\uBE44\uBC00 \uC0C1\uC810. \uADC0\uD55C \uBB3C\uD488\uB4E4\uC774 \uC9C4\uC5F4\uB418\uC5B4 \uC788\uB2E4."],demon:["\uD654\uC5FC\uC758 \uB300\uC7A5\uC7A5\uC774\uAC00 \uC788\uB294 \uBC29. \uB9C8\uBC95 \uBB34\uAE30\uB4E4\uC774 \uC9C4\uC5F4\uB418\uC5B4 \uC788\uB2E4.","\uC545\uB9C8\uC758 \uC0C1\uC778. \uC704\uD5D8\uD558\uC9C0\uB9CC \uAC15\uB825\uD55C \uBB3C\uAC74\uB4E4\uC744 \uD310\uB2E4."],ancient:["\uACE0\uB300 \uC720\uBB3C \uC0C1\uC810. \uC804\uC124\uC801\uC778 \uBB3C\uAC74\uB4E4\uC774 \uB193\uC5EC\uC788\uB2E4.","\uC218\uC9D1\uAC00\uC758 \uBC29. \uD76C\uADC0\uD55C \uC544\uC774\uD15C\uB4E4\uC774 \uAC00\uB4DD\uD558\uB2E4."]},safe:{undead:["\uACE0\uC694\uD55C \uBC29. \uC7A0\uC2DC \uC274 \uC218 \uC788\uC744 \uAC83 \uAC19\uB2E4.","\uC548\uC804\uD55C \uD53C\uB09C\uCC98. \uC5B8\uB370\uB4DC\uB4E4\uC774 \uB4E4\uC5B4\uC62C \uC218 \uC5C6\uB2E4."],demon:["\uB9C8\uBC95\uC73C\uB85C \uBCF4\uD638\uB41C \uBC29. \uC548\uC804\uD558\uAC8C \uC274 \uC218 \uC788\uB2E4.","\uACB0\uACC4\uAC00 \uCCD0\uC9C4 \uC548\uC804 \uC9C0\uB300."],ancient:["\uC131\uC2A4\uB7EC\uC6B4 \uBCF4\uD638\uB9C9\uC774 \uC788\uB294 \uBC29. \uC644\uC804\uD788 \uC548\uC804\uD558\uB2E4.","\uACE0\uB300\uC758 \uC548\uC2DD\uCC98. \uB9C8\uBC95\uC758 \uBCF4\uD638\uB97C \uBC1B\uB294\uB2E4."]},exit:{undead:["\uB2E4\uC74C \uCE35\uC73C\uB85C \uC774\uC5B4\uC9C0\uB294 \uACC4\uB2E8.","\uB354 \uAE4A\uC740 \uC5B4\uB460\uC73C\uB85C \uD5A5\uD558\uB294 \uAE38."],demon:["\uB354 \uB728\uAC70\uC6B4 \uC9C0\uC625\uC73C\uB85C \uB0B4\uB824\uAC00\uB294 \uAE38.","\uB2E4\uC74C \uCE35\uC758 \uC785\uAD6C. \uC5F4\uAE30\uAC00 \uB354 \uAC15\uD574\uC9C4\uB2E4."],ancient:["\uB2E4\uC74C \uCE35\uC73C\uB85C \uD5A5\uD558\uB294 \uAD00\uBB38.","\uB354 \uAE4A\uC740 \uC720\uC801\uC73C\uB85C \uC774\uC5B4\uC9C0\uB294 \uD1B5\uB85C."]}}[t]?.[e.theme]||["\uD3C9\uBC94\uD55C \uBC29."];return a[Math.floor(Math.random()*a.length)]}spawnMonsters(t,e,n,a,s=1){let m=[],C=s+e-1,P={easy:.7,normal:1,hard:1.3,hell:1.6}[a];if(t==="normal"){let x=2+Math.floor(Math.random()*2);for(let w=0;w<x;w++)m.push(this.createMonster("normal",C,n,P))}else if(t==="elite"){let x=1+Math.floor(Math.random()*2);for(let w=0;w<x;w++)m.push(this.createMonster("elite",C+2,n,P))}else t==="boss"&&m.push(this.createMonster("boss",C+5,n,P));return m}createMonster(t,e,n,a){let s=`monster_${Date.now()}_${Math.random()}`,m=50+e*20,C=10+e*3,P=5+e*2,x={normal:1,elite:2,boss:5}[t],w={id:s,name:this.getMonsterName(t,n),type:t,level:e,hp:Math.floor(m*x*a),maxHp:Math.floor(m*x*a),attack:Math.floor(C*x*a),defense:Math.floor(P*x*a),dropTable:{goldMin:Math.floor(10*e*x),goldMax:Math.floor(20*e*x),itemDropChance:t==="boss"?1:t==="elite"?.5:.2,itemRarity:t==="boss"?"legendary":t==="elite"?"rare":"common"},isDead:!1};return(t==="elite"||t==="boss")&&(w.eliteAffixes=this.generateEliteAffixes(t==="boss"?3:2)),w}getMonsterName(t,e){let a={normal:{undead:["\uC880\uBE44","\uC2A4\uCF08\uB808\uD1A4","\uC720\uB839"],demon:["\uC784\uD504","\uD5EC\uD558\uC6B4\uB4DC","\uB9C8\uC871 \uC804\uC0AC"],ancient:["\uACE8\uB818","\uC6C0\uC9C1\uC774\uB294 \uAC11\uC637","\uACE0\uB300 \uC218\uD638\uC790"]},elite:{undead:["\uAC15\uD654\uB41C \uC880\uBE44","\uACE0\uC704 \uC2A4\uCF08\uB808\uD1A4","\uC6D0\uD55C\uC758 \uC720\uB839"],demon:["\uC0C1\uAE09 \uC784\uD504","\uC9C0\uC625\uC758 \uC0AC\uB0E5\uAC1C","\uB9C8\uC871 \uB300\uC7A5"],ancient:["\uACE0\uB300 \uACE8\uB818","\uB9C8\uBC95 \uAC11\uC637","\uC218\uD638\uC790 \uB300\uC7A5"]},boss:{undead:["\uB9AC\uCE58","\uD574\uACE8 \uC655","\uB9DD\uB839\uC758 \uAD70\uC8FC"],demon:["\uB9C8\uC655","\uC9C0\uC625\uC758 \uAD70\uC8FC","\uB370\uBAAC \uB85C\uB4DC"],ancient:["\uD0C0\uC774\uD0C4","\uACE0\uB300 \uC655","\uC720\uC801\uC758 \uC218\uD638\uC2E0"]}}[t][e.theme]||["\uC54C \uC218 \uC5C6\uB294 \uBAAC\uC2A4\uD130"];return a[Math.floor(Math.random()*a.length)]}generateEliteAffixes(t){let e=["\uAC15\uD654","\uC7AC\uC0DD","\uD654\uC5FC","\uB0C9\uAE30","\uB3C5","\uBC88\uAC1C","\uD761\uD608","\uBC18\uC0AC"],n=[];for(let a=0;a<t&&e.length>0;a++){let s=Math.floor(Math.random()*e.length);n.push(e[s]),e.splice(s,1)}return n}createTreasureChest(t,e){return{id:`chest_${Date.now()}`,type:"chest",name:"\uBCF4\uBB3C \uC0C1\uC790",description:"\uBC18\uC9DD\uC774\uB294 \uBCF4\uBB3C \uC0C1\uC790. \uADC0\uC911\uD55C \uC544\uC774\uD15C\uC774 \uB4E4\uC5B4\uC788\uC744 \uAC83 \uAC19\uB2E4.",isLocked:!1,lootItems:[],isUsed:!1}}createShrine(){let t=[{type:"health",value:50,duration:30},{type:"mana",value:30,duration:30},{type:"damage",value:20,duration:10},{type:"defense",value:15,duration:10},{type:"experience",value:50,duration:5}],e=t[Math.floor(Math.random()*t.length)];return{id:`shrine_${Date.now()}`,type:"shrine",name:"\uC2E0\uBE44\uB85C\uC6B4 \uC131\uC18C",description:"\uC131\uC18C\uC5D0\uC11C \uC2E0\uC131\uD55C \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.",shrineEffect:e,isUsed:!1}}getDifficultyKorean(t){return{easy:"\uC26C\uC6C0",normal:"\uBCF4\uD1B5",hard:"\uC5B4\uB824\uC6C0",hell:"\uC9C0\uC625"}[t]||t}calculateDungeonRewards(t,e){let n={easy:.7,normal:1,hard:1.5,hell:2}[e],a=Math.floor(t.baseGoldReward*n),s=Math.floor(t.baseExpReward*n),m=[];if(Math.random()<.3){let C=t.uniqueItems[Math.floor(Math.random()*t.uniqueItems.length)];m.push(C)}return{gold:a,exp:s,items:m}}isRoomCleared(t){return t.isCleared?!0:t.monsters&&t.monsters.length>0?t.monsters.every(e=>e.isDead):!1}clearRoom(t){t.isCleared=!0,t.monsters&&t.monsters.forEach(e=>e.isDead=!0)}static \u0275fac=function(e){return new(e||r)(N(Me))};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ot=class r{addItem(t,e,n=1,a){if(t.find(m=>m.id===e))return t.map(m=>m.id===e?I(k({},m),{quantity:m.quantity+n}):m);{let m=a.find(x=>x.id===e),C=this.getSpecialItem(e),P=m||C;if(P){let x={id:P.id,name:P.name,description:P.description||"",type:this.mapShopTypeToInventoryType(P.type),quantity:n,buyPrice:"price"in P?P.price:0,sellPrice:"price"in P?Math.floor(P.price*.7):0,rarity:P.rarity,stats:"stats"in P?P.stats:void 0,isEquipped:!1};return[...t,x]}return t}}removeItem(t,e,n=1){let a=t.find(s=>s.id===e);return a?a.quantity<=n?t.filter(s=>s.id!==e):t.map(s=>s.id===e?I(k({},s),{quantity:s.quantity-n}):s):t}findItem(t,e){return t.find(n=>n.id===e)}hasItem(t,e,n=1){let a=this.findItem(t,e);return a?a.quantity>=n:!1}filterByType(t,e){if(e==="all")return t;let a={weapon:["weapon"],armor:["armor","helmet","gloves","boots","belt"],accessory:["amulet","ring","accessory"],consumable:["consumable"],material:["material","quest","misc"]}[e]||[];return t.filter(s=>a.includes(s.type))}sortInventory(t,e){let n=[...t];switch(e){case"rarity":let a=["mythic","legendary","epic","rare","uncommon","common"];return n.sort((s,m)=>a.indexOf(s.rarity)-a.indexOf(m.rarity));case"type":return n.sort((s,m)=>s.type.localeCompare(m.type));case"name":return n.sort((s,m)=>s.name.localeCompare(m.name));case"recent":return n.reverse();default:return n}}getInventorySpace(t,e){let n=t.length,a=e-n;return{used:n,max:e,available:a,isFull:n>=e}}getInventoryStats(t){let e={totalItems:t.reduce((n,a)=>n+a.quantity,0),totalValue:t.reduce((n,a)=>n+(a.sellPrice||0)*a.quantity,0),byRarity:{},byType:{}};return t.forEach(n=>{e.byRarity[n.rarity]=(e.byRarity[n.rarity]||0)+1,e.byType[n.type]=(e.byType[n.type]||0)+1}),e}getSpecialItem(t){return{key_golden:{id:"key_golden",name:"\uD669\uAE08 \uC5F4\uC1E0",description:"\uC2E0\uBE44\uD55C \uBCF4\uBB3C\uC0C1\uC790\uB97C \uC5F4 \uC218 \uC788\uB294 \uD669\uAE08 \uC5F4\uC1E0",type:"quest",rarity:"rare",price:0},orb_peace:{id:"orb_peace",name:"\uD3C9\uD654\uC758 \uAD6C\uC2AC",description:"\uD3C9\uD654\uB85C\uC6B4 \uB9C8\uC74C\uC744 \uB2F4\uC740 \uC2E0\uC131\uD55C \uAD6C\uC2AC. \uC9C0\uB2A5 +5",type:"misc",rarity:"epic",price:0,stats:{intelligence:5}},crystal_magic:{id:"crystal_magic",name:"\uB9C8\uBC95 \uD06C\uB9AC\uC2A4\uD0C8",description:"\uB9C8\uBC95\uC758 \uD798\uC774 \uAE43\uB4E0 \uD06C\uB9AC\uC2A4\uD0C8. MP +20",type:"misc",rarity:"rare",price:0,stats:{maxMp:20}}}[t]}mapShopTypeToInventoryType(t){return{weapon:"weapon",armor:"armor",consumable:"consumable",misc:"misc",quest:"quest"}[t]||"misc"}getRarityColor(t){let e={common:"#9d9d9d",uncommon:"#1eff00",rare:"#0070dd",epic:"#a335ee",legendary:"#ff8000",unique:"#ffd700",mythic:"#e6cc80"};return e[t]||e.common}getRarityKorean(t){return{common:"\uC77C\uBC18",uncommon:"\uACE0\uAE09",rare:"\uD76C\uADC0",epic:"\uC601\uC6C5",legendary:"\uC804\uC124",unique:"\uC720\uB2C8\uD06C",mythic:"\uC2E0\uD654"}[t]||"\uC77C\uBC18"}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Le=class r{constructor(t,e){this.snackBar=t;this.debugLogger=e}equipItem(t,e,n){if(!n?.equipment||!n.inventory)return{success:!1};if(t.type==="consumable"||t.type==="material"||t.type==="quest"||t.type==="misc")return this.snackBar.open("\u26A0\uFE0F \uC774 \uC544\uC774\uD15C\uC740 \uC7A5\uBE44\uAC00 \uC544\uB2D9\uB2C8\uB2E4","\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"}),{success:!1};let a=null;switch(t.type){case"weapon":a="weapon";break;case"armor":a="armor";break;case"helmet":a="helmet";break;case"gloves":a="gloves";break;case"boots":a="boots";break;case"belt":a="belt";break;case"amulet":case"accessory":a="amulet";break;case"ring":n.equipment.ring1?n.equipment.ring2?a="ring1":a="ring2":a="ring1";break}if(!a)return{success:!1};let s,m=n.equipment[a];m&&(s=this.convertEquipmentToInventory(m,a),n.inventory.push(s));let C={baseType:t.name,rarity:this.convertInventoryRarityToEquipment(t.rarity),itemLevel:1,baseStats:{attack:t.stats?.attack||0,defense:t.stats?.defense||0,armor:t.stats?.defense||0,hp:t.stats?.hp||0,mp:t.stats?.mp||0}};return n.equipment[a]=C,n.inventory.splice(e,1),this.snackBar.open(`\u2705 ${t.name}\uC744(\uB97C) \uC7A5\uCC29\uD588\uC2B5\uB2C8\uB2E4!`,"\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"}),{success:!0,unequippedItem:s}}unequipItem(t,e,n){if(n?.info("UNEQUIP",`\u{1F527} unequipItem \uD638\uCD9C\uB428 - slotKey: ${t}`),!e?.equipment||!e.inventory)return n?.error("UNEQUIP","\u274C playerCharacter \uB610\uB294 equipment/inventory \uC5C6\uC74C"),{success:!1};let a=e.equipment[t];if(n?.info("UNEQUIP",`\u{1F50D} \uC2AC\uB86F \uC7A5\uBE44 \uD655\uC778 - slotKey: ${t}, equipment: ${a?a.baseType:"undefined"}`),!a)return this.snackBar.open("\u26A0\uFE0F \uD574\uB2F9 \uC2AC\uB86F\uC5D0 \uC7A5\uBE44\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4","\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"}),{success:!1};if(!a.baseType&&a.name){n?.warn("UNEQUIP","\u26A0\uFE0F InventoryItem\uC774 \uC7A5\uBE44 \uC2AC\uB86F\uC5D0 \uC788\uC74C - \uBC14\uB85C \uCC98\uB9AC");let m=a,C={id:m.id||`item_${Date.now()}_${Math.random()}`,name:m.name,type:m.type||"weapon",rarity:m.rarity||"common",quantity:1,stats:m.stats||{}};return e.inventory.push(C),e.equipment[t]=void 0,this.snackBar.open(`\u2705 ${m.name}\uC744(\uB97C) \uD574\uC81C\uD588\uC2B5\uB2C8\uB2E4`,"\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"}),{success:!0,returnedItem:C}}if(!a.baseType)return n?.error("UNEQUIP","\u274C \uC7A5\uBE44\uC5D0 baseType \uC5C6\uC74C"),this.snackBar.open("\u26A0\uFE0F \uC798\uBABB\uB41C \uC7A5\uBE44 \uB370\uC774\uD130\uC785\uB2C8\uB2E4","\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"}),{success:!1};let s=this.convertEquipmentToInventory(a,t);return n?.info("UNEQUIP",`\u{1F392} \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00 \uC900\uBE44 - itemId: ${s.id}, name: ${s.name}`),e.inventory.push(s),n?.info("UNEQUIP",`\u2705 \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00 \uC644\uB8CC - \uD604\uC7AC \uC778\uBCA4\uD1A0\uB9AC \uAC1C\uC218: ${e.inventory.length}`),e.equipment[t]=void 0,n?.info("UNEQUIP",`\u{1F5D1}\uFE0F \uC7A5\uBE44 \uC2AC\uB86F\uC5D0\uC11C \uC81C\uAC70 \uC644\uB8CC - slotKey: ${t}`),this.snackBar.open(`\u2705 ${a.baseType}\uC744(\uB97C) \uD574\uC81C\uD588\uC2B5\uB2C8\uB2E4`,"\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"}),n?.info("UNEQUIP",`\u{1F389} \uC7A5\uBE44 \uD574\uC81C \uC644\uB8CC - ${a.baseType}`),{success:!0,returnedItem:s}}updatePlayerStats(t){if(!t?.equipment)return;let e=10,n=5,a=100,s=50,m=this.calculateEquipmentStats(t.equipment);t.attack=e+m.attack,t.defense=n+m.defense,t.maxHp=a+m.hp,t.maxMp=s+m.mp,t.hp>t.maxHp&&(t.hp=t.maxHp),t.mp>t.maxMp&&(t.mp=t.maxMp)}calculateEquipmentStats(t){let e=0,n=0,a=0,s=0;return["weapon","armor","helmet","gloves","boots","belt","amulet","ring1","ring2"].forEach(C=>{let P=t[C];P?.baseStats&&(e+=P.baseStats.attack||0,n+=P.baseStats.defense||0,a+=P.baseStats.hp||0,s+=P.baseStats.mp||0)}),{attack:e,defense:n,hp:a,mp:s}}compareItems(t,e){let n=t.stats?.attack||0,a=t.stats?.defense||0,s=t.stats?.hp||0,m=t.stats?.mp||0,C=0,P=0,x=0,w=0;e?.baseStats&&(C=e.baseStats.attack||0,P=e.baseStats.defense||0,x=e.baseStats.hp||0,w=e.baseStats.mp||0);let g=n-C,G=a-P,$=s-x,V=m-w,Q=g+G+$+V>0;return{attackDiff:g,defenseDiff:G,hpDiff:$,mpDiff:V,isUpgrade:Q}}getSlotNameKorean(t){return{weapon:"\uBB34\uAE30",armor:"\uAC11\uC637",helmet:"\uD22C\uAD6C",gloves:"\uC7A5\uAC11",boots:"\uC2E0\uBC1C",belt:"\uBCA8\uD2B8",amulet:"\uBAA9\uAC78\uC774",ring1:"\uBC18\uC9C01",ring2:"\uBC18\uC9C02"}[t]||t}convertEquipmentToInventory(t,e){let n="weapon";switch(e){case"weapon":n="weapon";break;case"armor":n="armor";break;case"helmet":n="helmet";break;case"gloves":n="gloves";break;case"boots":n="boots";break;case"belt":n="belt";break;case"amulet":n="amulet";break;case"ring1":case"ring2":n="ring";break}let a="common";return t.rarity==="legendary"?a="legendary":t.rarity==="epic"?a="epic":t.rarity==="rare"?a="rare":t.rarity==="uncommon"||t.rarity==="magic"?a="uncommon":t.rarity==="unique"?a="epic":t.rarity==="set"&&(a="rare"),{id:`item_${Date.now()}_${Math.random()}`,name:t.baseType,type:n,rarity:a,quantity:1,stats:{attack:t.baseStats.attack,defense:t.baseStats.defense||t.baseStats.armor,hp:t.baseStats.hp,mp:t.baseStats.mp}}}convertInventoryRarityToEquipment(t){return{common:"common",uncommon:"magic",rare:"rare",epic:"unique",legendary:"legendary",mythic:"legendary",unique:"unique"}[t]||"common"}equipItemWuxia(t,e){if(!this.canEquipWuxia(e))return{success:!1,message:"\uC7A5\uCC29\uD560 \uC218 \uC5C6\uB294 \uC544\uC774\uD15C\uC785\uB2C8\uB2E4."};let n=this.getEquipmentSlotWuxia(e);if(!n)return{success:!1,message:"\uC7A5\uCC29 \uC2AC\uB86F\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."};if(t.equippedItems[n]){let s=this.unequipItemWuxia(t,n);if(!s.success)return s}return t.equippedItems[n]=e.id,e.isEquipped=!0,this.debugLogger.info("EquipmentService",`${e.name} \uC7A5\uCC29 \uC644\uB8CC`),this.recalculateStatsWuxia(t),{success:!0,message:`${e.name}\uC744(\uB97C) \uC7A5\uCC29\uD588\uC2B5\uB2C8\uB2E4.`}}unequipItemWuxia(t,e){let n=t.equippedItems[e];if(!n)return{success:!1,message:"\uC7A5\uCC29\uB41C \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."};let a=t.inventory.find(s=>s.id===n);return a&&(a.isEquipped=!1),t.equippedItems[e]=void 0,this.debugLogger.info("EquipmentService",`${e} \uC2AC\uB86F \uC7A5\uBE44 \uD574\uC81C`),this.recalculateStatsWuxia(t),{success:!0,message:"\uC7A5\uBE44\uB97C \uD574\uC81C\uD588\uC2B5\uB2C8\uB2E4."}}canEquipWuxia(t){return["weapon","armor","helmet","gloves","boots","belt","amulet","ring","accessory"].includes(t.type)}getEquipmentSlotWuxia(t){switch(t.type){case"weapon":return"weapon";case"armor":return"armor";case"amulet":case"accessory":return"accessory";default:return null}}getEquippedItemsWuxia(t){let e=[];if(t.equippedItems.weapon){let n=t.inventory.find(a=>a.id===t.equippedItems.weapon);n&&e.push(n)}if(t.equippedItems.armor){let n=t.inventory.find(a=>a.id===t.equippedItems.armor);n&&e.push(n)}if(t.equippedItems.accessory){let n=t.inventory.find(a=>a.id===t.equippedItems.accessory);n&&e.push(n)}return e}calculateEquipmentBonusWuxia(t){let e=this.getEquippedItemsWuxia(t),n={attack:0,defense:0,hp:0,mp:0,critChance:0,evasion:0,lifeSteal:0,attackSpeed:0};for(let a of e)a.stats&&(n.attack+=a.stats.attack||0,n.attack+=(a.stats.minDamage||0)*.5,n.attack+=(a.stats.maxDamage||0)*.5,n.defense+=a.stats.defense||0,n.defense+=a.stats.armor||0,n.hp+=a.stats.hp||0,n.mp+=a.stats.mp||0,n.critChance+=a.stats.critChance||0,n.evasion+=a.stats.evasion||0,n.lifeSteal+=a.stats.lifeSteal||0,n.attackSpeed+=a.stats.attackSpeed||0);return n}recalculateStatsWuxia(t){let e=this.calculateEquipmentBonusWuxia(t),n=t.level*100;t.maxHealth=n+e.hp,t.health>t.maxHealth&&(t.health=t.maxHealth),this.debugLogger.info("EquipmentService",`\uC804\uD22C\uB825 \uC7AC\uACC4\uC0B0 \uC644\uB8CC - \uCD5C\uB300 HP: ${t.maxHealth}`)}calculateBattleStatsWuxia(t){let e=this.calculateEquipmentBonusWuxia(t),n=t.stats.strength*2+t.stats.innerPower,a=t.stats.strength+t.stats.dexterity,s=t.level*100,m=t.level*50;return{attack:Math.floor(n+e.attack),defense:Math.floor(a+e.defense),maxHp:s+e.hp,maxMp:m+e.mp,critChance:e.critChance,evasion:e.evasion}}getItemStatsTextWuxia(t){if(!t.stats)return[];let e=[];return t.stats.attack&&e.push(`\uACF5\uACA9\uB825: +${t.stats.attack}`),(t.stats.minDamage||t.stats.maxDamage)&&e.push(`\uD53C\uD574: ${t.stats.minDamage||0}-${t.stats.maxDamage||0}`),t.stats.defense&&e.push(`\uBC29\uC5B4\uB825: +${t.stats.defense}`),t.stats.armor&&e.push(`\uAC11\uC637: +${t.stats.armor}`),t.stats.hp&&e.push(`\uC0DD\uBA85\uB825: +${t.stats.hp}`),t.stats.mp&&e.push(`\uB0B4\uACF5: +${t.stats.mp}`),t.stats.critChance&&e.push(`\uCE58\uBA85\uD0C0\uC728: +${t.stats.critChance}%`),t.stats.evasion&&e.push(`\uD68C\uD53C\uC728: +${t.stats.evasion}%`),t.stats.attackSpeed&&e.push(`\uACF5\uACA9\uC18D\uB3C4: +${t.stats.attackSpeed}%`),t.stats.lifeSteal&&e.push(`\uC0DD\uBA85\uB825 \uD761\uC218: ${t.stats.lifeSteal}%`),t.uniqueEffect&&(e.push(""),e.push(`\uD2B9\uC218 \uD6A8\uACFC: ${t.uniqueEffect}`)),e}getRarityColorWuxia(t){switch(t){case"common":return"#808080";case"uncommon":return"#00ff00";case"rare":return"#0070dd";case"epic":return"#a335ee";case"legendary":return"#ff8000";default:return"#ffffff"}}static \u0275fac=function(e){return new(e||r)(N(De),N(Ce))};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var yt=class r{constructor(){}buyItem(t,e,n,a){if(e.gold<t.price){let m=`\u274C \uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4. (${t.price} \uACE8\uB4DC \uD544\uC694)`;return a([m]),{success:!1,message:m}}if(t.stock<=0){let m="\u274C \uC0C1\uD488\uC774 \uD488\uC808\uB418\uC5C8\uC2B5\uB2C8\uB2E4.";return a([m]),{success:!1,message:m}}e.gold-=t.price,t.stock--,n(t.id);let s=`\u{1F4B0} ${t.name}\uC744(\uB97C) \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4. (${t.price} \uACE8\uB4DC)`;return a([s]),{success:!0,message:s}}sellItem(t,e,n,a){if(t.quantity<=0||!t.sellPrice){let C="\u274C \uD574\uB2F9 \uC544\uC774\uD15C\uC740 \uD310\uB9E4\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.";return a([C]),{success:!1,message:C,goldGained:0}}let s=t.sellPrice;e.gold+=s,n(t.id,1);let m=`\u{1F4B0} ${t.name}\uC744(\uB97C) \uD310\uB9E4\uD588\uC2B5\uB2C8\uB2E4. (${s} \uACE8\uB4DC \uD68D\uB4DD)`;return a([m]),{success:!0,message:m,goldGained:s}}calculateSellPrice(t,e){let n=Math.floor(t*.5);return Math.floor(n*({common:1,uncommon:1.2,rare:1.5,epic:2,legendary:3,mythic:5,unique:2.5}[e]||1))}generateDefaultShopItems(){return[{id:"sword_basic",name:"\uAE30\uBCF8 \uAC80",description:"\uD3C9\uBC94\uD55C \uCCA0\uAC80\uC785\uB2C8\uB2E4. \uACF5\uACA9\uB825 +5",price:50,type:"weapon",rarity:"common",stock:5,stats:{attack:5}},{id:"potion_hp",name:"\uCCB4\uB825 \uBB3C\uC57D",description:"HP\uB97C 50 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",price:20,type:"consumable",rarity:"common",stock:10},{id:"potion_mp",name:"\uB9C8\uB098 \uBB3C\uC57D",description:"MP\uB97C 30 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",price:25,type:"consumable",rarity:"common",stock:8},{id:"armor_leather",name:"\uAC00\uC8FD \uAC11\uC637",description:"\uD2BC\uD2BC\uD55C \uAC00\uC8FD \uAC11\uC637. \uBC29\uC5B4\uB825 +3",price:80,type:"armor",rarity:"common",stock:3,stats:{defense:3}},{id:"sword_silver",name:"\uC740\uBE5B \uAC80",description:"\uC740\uC73C\uB85C \uC81C\uC791\uB41C \uACE0\uAE09 \uAC80. \uACF5\uACA9\uB825 +12",price:200,type:"weapon",rarity:"uncommon",stock:2,stats:{attack:12}},{id:"armor_chain",name:"\uC0AC\uC2AC \uAC11\uC637",description:"\uACAC\uACE0\uD55C \uC0AC\uC2AC \uAC11\uC637. \uBC29\uC5B4\uB825 +8",price:250,type:"armor",rarity:"uncommon",stock:2,stats:{defense:8}}]}generateShopItemsByLevel(t){let e=this.generateDefaultShopItems(),n=[];return t>=5&&n.push({id:"sword_steel",name:"\uAC15\uCCA0 \uAC80",description:"\uB2E8\uB2E8\uD55C \uAC15\uCCA0\uB85C \uC81C\uC791\uB41C \uAC80. \uACF5\uACA9\uB825 +20",price:500,type:"weapon",rarity:"rare",stock:1,stats:{attack:20}}),t>=10&&n.push({id:"armor_plate",name:"\uD50C\uB808\uC774\uD2B8 \uAC11\uC637",description:"\uCD5C\uACE0\uAE09 \uD50C\uB808\uC774\uD2B8 \uAC11\uC637. \uBC29\uC5B4\uB825 +15",price:800,type:"armor",rarity:"rare",stock:1,stats:{defense:15}}),t>=15&&n.push({id:"sword_enchanted",name:"\uB9C8\uBC95 \uAC80",description:"\uB9C8\uBC95\uC774 \uAE43\uB4E0 \uAC80. \uACF5\uACA9\uB825 +35",price:1500,type:"weapon",rarity:"epic",stock:1,stats:{attack:35}}),t>=20&&n.push({id:"potion_elixir",name:"\uC5D8\uB9AD\uC11C",description:"HP\uC640 MP\uB97C \uC644\uC804\uD788 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",price:200,type:"consumable",rarity:"rare",stock:3}),[...e,...n]}getRarityPriceMultiplier(t){return{common:1,uncommon:2,rare:4,epic:8,legendary:16}[t]||1}restockShop(t){t.forEach(e=>{let n=this.getMaxStockByType(e.type);e.stock<n*.5&&(e.stock=n)})}getMaxStockByType(t){return{weapon:5,armor:5,consumable:15,misc:10}[t]||5}applyDiscount(t,e){t.forEach(n=>{n.price=Math.floor(n.price*(1-e/100))})}addRareItem(t){let e=[{id:"sword_legendary",name:"\uC804\uC124\uC758 \uAC80",description:"\uC804\uC124 \uC18D\uC5D0\uB9CC \uC874\uC7AC\uD558\uB358 \uAC80. \uACF5\uACA9\uB825 +100",price:1e4,type:"weapon",rarity:"legendary",stock:1,stats:{attack:100}},{id:"armor_mythic",name:"\uC2E0\uD654\uC758 \uAC11\uC637",description:"\uC2E0\uB4E4\uC774 \uCC29\uC6A9\uD588\uB2E4\uB294 \uAC11\uC637. \uBC29\uC5B4\uB825 +80",price:12e3,type:"armor",rarity:"legendary",stock:1,stats:{defense:80}}],n=e[Math.floor(Math.random()*e.length)];return t.some(s=>s.id===n.id)?null:(t.push(n),n)}filterShopItems(t,e,n){let a=[...t];return e&&(a=a.filter(s=>s.type===e)),n&&(a=a.filter(s=>s.rarity===n)),a}canBuyItem(t,e){return t.stock<=0?{canBuy:!1,reason:"\uC7AC\uACE0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}:e<t.price?{canBuy:!1,reason:`\uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4 (${t.price-e} \uACE8\uB4DC \uD544\uC694)`}:{canBuy:!0}}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var wt=class r{createStartingInventory(){return[{id:"start_weapon_1",name:"\uBD88\uBA78\uC758 \uC804\uC7C1\uB9DD\uCE58",type:"weapon",rarity:"legendary",quantity:1,buyPrice:15e3,sellPrice:7500,stats:{minDamage:85,maxDamage:127,attack:106,attackSpeed:18,critChance:12,critDamage:85,lifeSteal:6,lifePerHit:45,fireResist:23,lightningResist:18,allResist:8,goldFind:45,expBonus:20}},{id:"start_armor_1",name:"\uC6A9\uB9F9\uD55C \uB4DC\uB798\uACE4 \uC2A4\uCF00\uC77C",type:"armor",rarity:"epic",quantity:1,buyPrice:8e3,sellPrice:4e3,stats:{defense:80,armor:120,hp:200,blockChance:15,lifeRegen:8,fireResist:35,coldResist:25,allResist:10}},{id:"start_helmet_1",name:"\uAC15\uB825\uD55C \uC804\uD22C \uD22C\uAD6C",type:"helmet",rarity:"rare",quantity:1,buyPrice:3500,sellPrice:1750,stats:{defense:50,armor:75,hp:120,mp:50,evasion:8,poisonResist:20,lightningResist:15}},{id:"start_gloves_1",name:"\uCD95\uBCF5\uBC1B\uC740 \uAC74\uD2C0\uB9BF",type:"gloves",rarity:"rare",quantity:1,buyPrice:3e3,sellPrice:1500,stats:{defense:40,armor:60,attackSpeed:12,critChance:8,lifePerHit:25,coldResist:18}},{id:"start_boots_1",name:"\uBC88\uAC1C\uC758 \uC9C8\uC8FC\uC758 \uBD80\uCE20",type:"boots",rarity:"uncommon",quantity:1,buyPrice:1500,sellPrice:750,stats:{defense:30,armor:45,movementSpeed:25,evasion:12,lightningResist:22}},{id:"start_amulet_1",name:"\uCC9C\uC0C1\uC758 \uCC9C\uC0AC\uC758 \uB208\uBB3C",type:"amulet",rarity:"epic",quantity:1,buyPrice:1e4,sellPrice:5e3,stats:{attack:60,defense:60,hp:180,mp:80,critChance:15,lifeSteal:4,manaSteal:3,magicFind:35,goldFind:50,expBonus:25,allResist:12}},{id:"start_ring_1",name:"\uD30C\uAD34\uC801\uC778 \uC6A9\uC758 \uBC18\uC9C0",type:"ring",rarity:"rare",quantity:1,buyPrice:4e3,sellPrice:2e3,stats:{attack:45,defense:35,critChance:10,critDamage:35,fireResist:25,hp:80}},{id:"start_ring_2",name:"\uBB34\uC801\uC758 \uAD8C\uB2A5\uC758 \uBC18\uC9C0",type:"ring",rarity:"rare",quantity:1,buyPrice:4e3,sellPrice:2e3,stats:{attack:40,defense:50,hp:100,lifeRegen:5,manaRegen:3,coldResist:20,poisonResist:18}},{id:"start_potion_1",name:"\uCCB4\uB825 \uBB3C\uC57D",type:"consumable",rarity:"common",quantity:10,buyPrice:50,sellPrice:25},{id:"start_potion_2",name:"\uB9C8\uB098 \uBB3C\uC57D",type:"consumable",rarity:"common",quantity:10,buyPrice:50,sellPrice:25}]}generateItemStats(t,e){let a={common:1,uncommon:1.5,rare:2.5,epic:4,legendary:6}[e]||1,s={};Math.random()>.7&&(s.hp=Math.floor((Math.random()*50+20)*a)),Math.random()>.8&&(s.mp=Math.floor((Math.random()*30+10)*a));let m=e==="legendary"?.9:e==="epic"?.7:e==="rare"?.5:.3;if(Math.random()<m){let C=["fireResist","coldResist","lightningResist","poisonResist"],P=C[Math.floor(Math.random()*C.length)];s[P]=Math.floor((Math.random()*20+10)*a)}if((e==="legendary"||e==="epic")&&Math.random()>.7&&(s.allResist=Math.floor((Math.random()*10+5)*a)),t==="weapon"){let C=Math.floor((Math.random()*15+10)*a),P=Math.floor(C*(1.5+Math.random()*.5));s.attack=Math.floor((C+P)/2),s.minDamage=C,s.maxDamage=P,Math.random()>.6&&(s.attackSpeed=Math.floor((Math.random()*15+5)*(a/2))),e!=="common"&&Math.random()>.5&&(s.critChance=Math.floor((Math.random()*8+2)*(a/2))),(e==="epic"||e==="legendary")&&Math.random()>.6&&(s.critDamage=Math.floor((Math.random()*40+20)*(a/2))),(e==="rare"||e==="epic"||e==="legendary")&&Math.random()>.6&&(s.lifeSteal=Math.floor((Math.random()*5+2)*(a/3))),Math.random()>.7&&(s.lifePerHit=Math.floor((Math.random()*10+5)*a)),Math.random()>.8&&(s.manaPerHit=Math.floor((Math.random()*5+2)*a))}else t==="armor"||t==="helmet"||t==="gloves"||t==="boots"||t==="belt"?(s.defense=Math.floor((Math.random()*20+10)*a),s.armor=Math.floor((Math.random()*30+15)*a),(t==="armor"||t==="gloves")&&Math.random()>.7&&(s.blockChance=Math.floor((Math.random()*10+5)*(a/2))),Math.random()>.75&&(s.evasion=Math.floor((Math.random()*8+3)*(a/2))),Math.random()>.6&&(s.lifeRegen=Math.floor((Math.random()*5+2)*a)),Math.random()>.7&&(s.manaRegen=Math.floor((Math.random()*3+1)*a))):(t==="amulet"||t==="ring")&&(s.attack=Math.floor((Math.random()*15+5)*a),s.defense=Math.floor((Math.random()*15+5)*a),Math.random()>.5&&(s.critChance=Math.floor((Math.random()*10+3)*(a/2))),Math.random()>.6&&(s.lifeSteal=Math.floor((Math.random()*4+1)*(a/3))),Math.random()>.7&&(s.manaSteal=Math.floor((Math.random()*3+1)*(a/3))),(e==="legendary"||e==="epic")&&(Math.random()>.5&&(s.magicFind=Math.floor((Math.random()*20+10)*a)),Math.random()>.6&&(s.goldFind=Math.floor((Math.random()*30+15)*a))),(e==="rare"||e==="epic"||e==="legendary")&&Math.random()>.7&&(s.expBonus=Math.floor((Math.random()*15+5)*(a/2))));return t==="boots"?Math.random()>.4&&(s.movementSpeed=Math.floor((Math.random()*15+5)*(a/2))):Math.random()>.9&&(s.movementSpeed=Math.floor((Math.random()*8+2)*(a/3))),Object.keys(s).length>0?s:void 0}getRarityLevels(){return["common","uncommon","rare","epic","legendary"]}getRarityName(t){return{common:"\uC77C\uBC18",uncommon:"\uACE0\uAE09",rare:"\uD76C\uADC0",epic:"\uC601\uC6C5",legendary:"\uC804\uC124"}[t]||"\uC54C \uC218 \uC5C6\uC74C"}getRarityColor(t){return{common:"#9d9d9d",uncommon:"#1eff00",rare:"#0070dd",epic:"#a335ee",legendary:"#ff8000"}[t]||"#ffffff"}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var kt=class r{constructor(t,e,n,a){this.geminiAiService=t;this.scenarioDbService=e;this.characterDbService=n;this.itemDbService=a}ensureStoryElements(t){return O(this,null,function*(){let e={success:!0,generated:{scenarios:0,characters:0,items:0},errors:[]};try{if(!this.geminiAiService.hasApiKey())return e.errors.push("Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694."),e.success=!1,e;let n=yield this.checkMissingElements(t);if(n.needsGeneration){let a=yield this.generateAllElements(t,n);e.generated=a}}catch(n){e.success=!1,e.errors.push(n instanceof Error?n.message:"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4")}return e})}checkMissingElements(t){return O(this,null,function*(){let e=yield this.scenarioDbService.getAllScenarios(),n=yield this.characterDbService.getAllCharacters(),a=yield this.itemDbService.getAllItems(),s=e.length,m=n.length,C=a.length,P=this.getRecommendedCounts(t),x={current:s,needed:P.scenarios,missing:Math.max(0,P.scenarios-s)},w={current:m,needed:P.characters,missing:Math.max(0,P.characters-m)},g={current:C,needed:P.items,missing:Math.max(0,P.items-C)};return{needsGeneration:x.missing>0||w.missing>0||g.missing>0,scenarios:x,characters:w,items:g}})}getRecommendedCounts(t){return{\uBB34\uD611:{scenarios:10,characters:15,items:20},\uD310\uD0C0\uC9C0:{scenarios:12,characters:20,items:25},\uD604\uB300\uD310\uD0C0\uC9C0:{scenarios:8,characters:12,items:15},SF:{scenarios:10,characters:15,items:20},\uB85C\uB9E8\uC2A4:{scenarios:6,characters:10,items:10},\uBBF8\uC2A4\uD130\uB9AC:{scenarios:8,characters:12,items:15},\uBC94\uC6A9:{scenarios:10,characters:15,items:20}}[t.genre]||{scenarios:10,characters:15,items:20}}generateAllElements(t,e){return O(this,null,function*(){let n={scenarios:0,characters:0,items:0},a=[];return e.scenarios.missing>0&&a.push(this.generateScenarios(t,e.scenarios.missing).then(s=>{n.scenarios=s})),e.characters.missing>0&&a.push(this.generateCharacters(t,e.characters.missing).then(s=>{n.characters=s})),e.items.missing>0&&a.push(this.generateItems(t,e.items.missing).then(s=>{n.items=s})),yield Promise.all(a),n})}generateScenarios(t,e){return O(this,null,function*(){let n=0;try{let a=this.buildBatchScenarioPrompt(t,e),s=yield Je(this.geminiAiService.generateContent(a)),m=this.parseBatchScenarios(s,t);for(let C of m)yield this.scenarioDbService.saveScenario(C),n++}catch{}return n})}generateCharacters(t,e){return O(this,null,function*(){let n=0;try{let a=this.buildBatchCharacterPrompt(t,e),s=yield Je(this.geminiAiService.generateContent(a)),m=this.parseBatchCharacters(s,t);for(let C of m)yield this.characterDbService.saveCharacter(C),n++}catch{}return n})}generateItems(t,e){return O(this,null,function*(){let n=0;try{let a=this.buildBatchItemPrompt(t,e),s=yield Je(this.geminiAiService.generateContent(a)),m=this.parseBatchItems(s,t);for(let C of m)yield this.itemDbService.saveItem(C),n++}catch{}return n})}buildBatchScenarioPrompt(t,e){let n=t.id==="default";return`${n?`\uB2F9\uC2E0\uC740 ${t.genre} \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. \uB2E4\uC591\uD55C \uC18C\uC124\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5\uD55C ${t.genre} \uC7A5\uB974\uC758 \uC2DC\uB098\uB9AC\uC624\uB97C ${e}\uAC1C \uC0DD\uC131\uD574\uC8FC\uC138\uC694.`:`\uB2F9\uC2E0\uC740 ${t.genre} \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. "${t.title}"\uB77C\uB294 \uC791\uD488\uC758 \uC2DC\uB098\uB9AC\uC624\uB97C ${e}\uAC1C \uC0DD\uC131\uD574\uC8FC\uC138\uC694.`}

\uC7A5\uB974: ${t.genre}
${n?"\uB300\uC0C1: \uBC94\uC6A9 \uCF58\uD150\uCE20 (\uB2E4\uC591\uD55C \uC2A4\uD1A0\uB9AC\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5)":`\uC124\uBA85: ${t.description}`}
${n?"":`\uB09C\uC774\uB3C4: ${t.difficulty}`}

\uB2E4\uC74C JSON \uD615\uC2DD\uC73C\uB85C \uC815\uD655\uD788 ${e}\uAC1C\uC758 \uC2DC\uB098\uB9AC\uC624\uB97C \uC0DD\uC131\uD574\uC8FC\uC138\uC694:

[
  {
    "title": "\uC2DC\uB098\uB9AC\uC624 \uC81C\uBAA9",
    "description": "\uC2DC\uB098\uB9AC\uC624 \uC0C1\uC138 \uC124\uBA85",
    "genre": "${t.genre}",
    "mood": "\uBD84\uC704\uAE30",
    "setting": "\uBC30\uACBD \uC124\uC815",
    "mainConflict": "\uC8FC\uC694 \uAC08\uB4F1",
    "keyCharacters": ["\uB4F1\uC7A5\uC778\uBB3C1", "\uB4F1\uC7A5\uC778\uBB3C2"],
    "plotPoints": ["\uC804\uAC1C1", "\uC804\uAC1C2"],
    "possibleEndings": ["\uACB0\uB9D01", "\uACB0\uB9D02"]
  }
]

\uC911\uC694\uD55C \uADDC\uCE59:
1. \uBC18\uB4DC\uC2DC \uC720\uD6A8\uD55C JSON \uBC30\uC5F4\uB9CC \uCD9C\uB825 (\uC124\uBA85 \uAE08\uC9C0)
2. \uBB38\uC790\uC5F4 \uC548\uC5D0 \uC904\uBC14\uAFC8\uC740 \\n\uC73C\uB85C \uD45C\uD604
3. \uB9C8\uC9C0\uB9C9 \uD56D\uBAA9 \uB4A4\uC5D0 \uC27C\uD45C \uAE08\uC9C0
4. \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uD070\uB530\uC634\uD45C(")\uB9CC \uC0AC\uC6A9`}buildBatchCharacterPrompt(t,e){let n=t.id==="default";return`${n?`\uB2F9\uC2E0\uC740 ${t.genre} \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. \uB2E4\uC591\uD55C \uC18C\uC124\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5\uD55C ${t.genre} \uC7A5\uB974\uC758 \uCE90\uB9AD\uD130\uB97C ${e}\uBA85 \uC0DD\uC131\uD574\uC8FC\uC138\uC694.`:`\uB2F9\uC2E0\uC740 ${t.genre} \uC18C\uC124 \uC791\uAC00\uC785\uB2C8\uB2E4. "${t.title}"\uC5D0 \uB4F1\uC7A5\uD560 \uCE90\uB9AD\uD130\uB97C ${e}\uBA85 \uC0DD\uC131\uD574\uC8FC\uC138\uC694.`}

\uC7A5\uB974: ${t.genre}
${n?"\uB300\uC0C1: \uBC94\uC6A9 \uCE90\uB9AD\uD130 (\uB2E4\uC591\uD55C \uC2A4\uD1A0\uB9AC\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5)":`\uC124\uBA85: ${t.description}`}

\uB2E4\uC74C JSON \uD615\uC2DD\uC73C\uB85C \uC815\uD655\uD788 ${e}\uBA85\uC758 \uCE90\uB9AD\uD130\uB97C \uC0DD\uC131\uD574\uC8FC\uC138\uC694:

[
  {
    "name": "\uCE90\uB9AD\uD130 \uC774\uB984",
    "age": 25,
    "gender": "\uC131\uBCC4",
    "personality": "\uC131\uACA9",
    "appearance": "\uC678\uBAA8",
    "background": "\uBC30\uACBD \uC2A4\uD1A0\uB9AC",
    "role": "\uC5ED\uD560",
    "skills": ["\uD2B9\uAE301", "\uD2B9\uAE302"],
    "relationships": "\uAD00\uACC4",
    "motivation": "\uB3D9\uAE30",
    "quirks": "\uD2B9\uC9D5"
  }
]

\uC911\uC694\uD55C \uADDC\uCE59:
1. \uBC18\uB4DC\uC2DC \uC720\uD6A8\uD55C JSON \uBC30\uC5F4\uB9CC \uCD9C\uB825 (\uC124\uBA85 \uAE08\uC9C0)
2. \uBB38\uC790\uC5F4 \uC548\uC5D0 \uC904\uBC14\uAFC8\uC740 \\n\uC73C\uB85C \uD45C\uD604
3. \uB9C8\uC9C0\uB9C9 \uD56D\uBAA9 \uB4A4\uC5D0 \uC27C\uD45C \uAE08\uC9C0
4. \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uD070\uB530\uC634\uD45C(")\uB9CC \uC0AC\uC6A9
5. age\uB294 \uBC18\uB4DC\uC2DC \uC22B\uC790\uB9CC \uC785\uB825`}buildBatchItemPrompt(t,e){let n=t.id==="default";return`${n?`\uB2F9\uC2E0\uC740 ${t.genre} \uC18C\uC124\uC758 \uC544\uC774\uD15C \uB514\uC790\uC774\uB108\uC785\uB2C8\uB2E4. \uB2E4\uC591\uD55C \uC18C\uC124\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5\uD55C ${t.genre} \uC7A5\uB974\uC758 \uC544\uC774\uD15C\uC744 ${e}\uAC1C \uC0DD\uC131\uD574\uC8FC\uC138\uC694.`:`\uB2F9\uC2E0\uC740 ${t.genre} \uC18C\uC124\uC758 \uC544\uC774\uD15C \uB514\uC790\uC774\uB108\uC785\uB2C8\uB2E4. "${t.title}"\uC5D0 \uB4F1\uC7A5\uD560 \uC544\uC774\uD15C\uC744 ${e}\uAC1C \uC0DD\uC131\uD574\uC8FC\uC138\uC694.`}

\uC7A5\uB974: ${t.genre}
${n?"\uB300\uC0C1: \uBC94\uC6A9 \uC544\uC774\uD15C (\uB2E4\uC591\uD55C \uC2A4\uD1A0\uB9AC\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5)":`\uC124\uBA85: ${t.description}`}

\uB2E4\uC74C JSON \uD615\uC2DD\uC73C\uB85C \uC815\uD655\uD788 ${e}\uAC1C\uC758 \uC544\uC774\uD15C\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694:

[
  {
    "name": "\uC544\uC774\uD15C \uC774\uB984",
    "type": "\uBB34\uAE30",
    "grade": "\uC77C\uBC18",
    "description": "\uC544\uC774\uD15C \uC124\uBA85",
    "effect": "\uD6A8\uACFC",
    "stats": {
      "attack": 10,
      "defense": 5,
      "hp": 0,
      "mp": 0
    },
    "price": 100,
    "rarity": 50,
    "lore": "\uBC30\uACBD \uC2A4\uD1A0\uB9AC"
  }
]

\uC911\uC694\uD55C \uADDC\uCE59:
1. \uBC18\uB4DC\uC2DC \uC720\uD6A8\uD55C JSON \uBC30\uC5F4\uB9CC \uCD9C\uB825 (\uC124\uBA85 \uAE08\uC9C0)
2. \uBB38\uC790\uC5F4 \uC548\uC5D0 \uC904\uBC14\uAFC8\uC740 \\n\uC73C\uB85C \uD45C\uD604
3. \uB9C8\uC9C0\uB9C9 \uD56D\uBAA9 \uB4A4\uC5D0 \uC27C\uD45C \uAE08\uC9C0
4. \uBAA8\uB4E0 \uBB38\uC790\uC5F4\uC740 \uD070\uB530\uC634\uD45C(")\uB9CC \uC0AC\uC6A9
5. \uC22B\uC790 \uD544\uB4DC\uB294 \uBC18\uB4DC\uC2DC \uC22B\uC790\uB9CC \uC785\uB825 (\uB530\uC634\uD45C \uAE08\uC9C0)`}cleanJsonString(t){return t.replace(/,(\s*[}\]])/g,"$1").replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*/g,"").replace(/'/g,'"').replace(/[\x00-\x1F\x7F]/g,"").replace(/,+/g,",").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")}safeJsonParse(t){try{let e=t.match(/\[[\s\S]*\]/);if(!e)return[];let n=e[0];n=this.cleanJsonString(n);try{return JSON.parse(n)}catch{let s=n.lastIndexOf(","),m=n.lastIndexOf("}");return s>m&&(n=n.substring(0,s)+"]"),JSON.parse(n)}}catch{return console.warn("\uC6D0\uBCF8 \uD14D\uC2A4\uD2B8:",t.substring(0,500)),[]}}parseBatchScenarios(t,e){try{let n=this.safeJsonParse(t);return n.length===0?[]:n.map((a,s)=>({id:`scenario_${Date.now()}_${s}`,title:a.title||`\uC2DC\uB098\uB9AC\uC624 ${s+1}`,description:a.description||"",characters:a.keyCharacters||a.characters||[],setting:a.setting||"",conflict:a.mainConflict||a.conflict||"",goal:a.goal||"",mood:a.mood||"\uBCF4\uD1B5",tags:[],genre:a.genre||e.genre,style:e.genre,createdAt:new Date,isAdult:!1}))}catch{return[]}}parseBatchCharacters(t,e){try{let n=this.safeJsonParse(t);return n.length===0?[]:n.map((a,s)=>({name:a.name||`\uCE90\uB9AD\uD130 ${s+1}`,age:a.age||25,gender:a.gender||"\uBBF8\uC815",occupation:a.role||a.occupation||"\uBAA8\uD5D8\uAC00",personality:Array.isArray(a.personality)?a.personality:typeof a.personality=="string"?[a.personality]:["\uBCF4\uD1B5"],backstory:a.background||a.backstory||"",skills:Array.isArray(a.skills)?a.skills:[],appearance:a.appearance||"",goal:a.motivation||a.goal||"",weakness:a.quirks||a.weakness||"",tags:[],createdAt:new Date}))}catch{return[]}}parseBatchItems(t,e){try{let n=this.safeJsonParse(t);return n.length===0?[]:n.map((a,s)=>({name:a.name||`\uC544\uC774\uD15C ${s+1}`,description:a.description||"",type:a.type||"\uC18C\uBE44\uD488",grade:a.grade||"\uC77C\uBC18",effects:Array.isArray(a.effects)?a.effects:a.effect?[a.effect]:[],stats:a.stats||{attack:0,defense:0,hp:0,mp:0},requirements:a.requirements||"",lore:a.lore||"",tags:[],price:a.price||100,createdAt:new Date}))}catch{return[]}}getGenerationReport(t){return O(this,null,function*(){let e=yield this.checkMissingElements(t),n=`\u{1F4CA} \uC2A4\uD1A0\uB9AC \uC694\uC18C \uD604\uD669

`;return t.id==="default"?(n+=`\u{1F3F7}\uFE0F \uB300\uC0C1: \uBC94\uC6A9 \uCF58\uD150\uCE20 (${t.genre})
`,n+=`\u{1F4A1} \uC18C\uC124 \uC120\uD0DD \uC2DC \uD574\uB2F9 \uC7A5\uB974\uC5D0 \uCD5C\uC801\uD654\uB41C \uCF58\uD150\uCE20\uB97C \uC0DD\uC131\uD569\uB2C8\uB2E4.

`):n+=`\u{1F3F7}\uFE0F \uC18C\uC124: ${t.title} (${t.genre})

`,n+=`\u{1F4DC} \uC2DC\uB098\uB9AC\uC624:
`,n+=`   \uD604\uC7AC: ${e.scenarios.current}\uAC1C
`,n+=`   \uAD8C\uC7A5: ${e.scenarios.needed}\uAC1C
`,n+=`   \uBD80\uC871: ${e.scenarios.missing}\uAC1C

`,n+=`\u{1F465} \uCE90\uB9AD\uD130:
`,n+=`   \uD604\uC7AC: ${e.characters.current}\uAC1C
`,n+=`   \uAD8C\uC7A5: ${e.characters.needed}\uAC1C
`,n+=`   \uBD80\uC871: ${e.characters.missing}\uAC1C

`,n+=`\u2694\uFE0F \uC544\uC774\uD15C:
`,n+=`   \uD604\uC7AC: ${e.items.current}\uAC1C
`,n+=`   \uAD8C\uC7A5: ${e.items.needed}\uAC1C
`,n+=`   \uBD80\uC871: ${e.items.missing}\uAC1C

`,e.needsGeneration?n+="\u26A0\uFE0F \uC77C\uBD80 \uC694\uC18C\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4. \uC790\uB3D9 \uC0DD\uC131\uC744 \uAD8C\uC7A5\uD569\uB2C8\uB2E4.":n+="\u2705 \uBAA8\uB4E0 \uC694\uC18C\uAC00 \uCDA9\uBD84\uD569\uB2C8\uB2E4!",{text:n,scenarios:{current:e.scenarios.current,recommended:e.scenarios.needed,missing:e.scenarios.missing},characters:{current:e.characters.current,recommended:e.characters.needed,missing:e.characters.missing},items:{current:e.items.current,recommended:e.items.needed,missing:e.items.missing},needsGeneration:e.needsGeneration}})}static \u0275fac=function(e){return new(e||r)(N(Ie),N(be),N(he),N(fe))};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var St=class r{screenSizeSubject=new xe(this.getScreenSize());screenSize$=this.screenSizeSubject.asObservable();isMobileSubject=new xe(this.checkIsMobile());isMobile$=this.isMobileSubject.asObservable();isTabletSubject=new xe(this.checkIsTablet());isTablet$=this.isTabletSubject.asObservable();isDesktopSubject=new xe(this.checkIsDesktop());isDesktop$=this.isDesktopSubject.asObservable();constructor(){this.initResizeListener()}initResizeListener(){en(window,"resize").pipe(tn(200),Zt(()=>this.getScreenSize()),nn()).subscribe(t=>{this.screenSizeSubject.next(t),this.isMobileSubject.next(this.checkIsMobile()),this.isTabletSubject.next(this.checkIsTablet()),this.isDesktopSubject.next(this.checkIsDesktop())})}getScreenSize(){let t=window.innerWidth;return t<768?"mobile":t>=768&&t<1024?"tablet":"desktop"}checkIsMobile(){return window.innerWidth<768}checkIsTablet(){let t=window.innerWidth;return t>=768&&t<1024}checkIsDesktop(){return window.innerWidth>=1024}get currentScreenSize(){return this.screenSizeSubject.value}get isMobile(){return this.isMobileSubject.value}get isTablet(){return this.isTabletSubject.value}get isDesktop(){return this.isDesktopSubject.value}get screenWidth(){return window.innerWidth}get screenHeight(){return window.innerHeight}get isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Re=class r{modalSubject=new Qe;modal$=this.modalSubject.asObservable();showInfo(t,e="\uC54C\uB9BC"){this.show({type:"info",title:e,message:t,confirmText:"\uD655\uC778"})}showSuccess(t,e="\uC131\uACF5"){this.show({type:"success",title:e,message:t,confirmText:"\uD655\uC778"})}showWarning(t,e="\uACBD\uACE0"){this.show({type:"warning",title:e,message:t,confirmText:"\uD655\uC778"})}showError(t,e="\uC624\uB958"){this.show({type:"error",title:e,message:t,confirmText:"\uD655\uC778"})}showConfirm(t,e,n="\uD655\uC778",a="\uD655\uC778",s="\uCDE8\uC18C"){this.show({type:"confirm",title:n,message:t,confirmText:a,cancelText:s,showCancel:!0,onConfirm:e})}show(t){this.modalSubject.next({isOpen:!0,config:t})}close(){this.modalSubject.next({isOpen:!1,config:null})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};function bo(r,t){r&1&&(o(0,"span",26),c(1,"\u{1F525}"),i())}function ho(r,t){r&1&&(o(0,"span",27),c(1,"\u{1F480}"),i())}function Po(r,t){if(r&1&&(o(0,"div",28),c(1),i()),r&2){let e=d().$implicit;l(),ln(" HP: ",e.currentHp||e.hp,"/",e.maxHp||e.hp," | \u2694\uFE0F ",e.attack," | \u{1F6E1}\uFE0F ",e.defense," ")}}function Mo(r,t){if(r&1&&(o(0,"div",21)(1,"div",22),c(2),b(3,bo,2,0,"span",23)(4,ho,2,0,"span",24),i(),b(5,Po,2,4,"div",25),i()),r&2){let e=t.$implicit,n=d(3);y("defeated",e.isDead),l(2),it(" ",n.getMonsterIcon(e.type)," ",e.name," (Lv.",e.level,") "),l(),p("ngIf",!e.isDead),l(),p("ngIf",e.isDead),l(),p("ngIf",!e.isDead)}}function xo(r,t){if(r&1&&(o(0,"div",16)(1,"div",17),c(2,"\u2694\uFE0F \uC801 \uC870\uC6B0!"),i(),o(3,"div",18),b(4,Mo,6,8,"div",19),i(),o(5,"div",20),c(6," \uC804\uD22C\uB294 \uAE30\uBCF8 \uAC8C\uC784 \uC2DC\uC2A4\uD15C\uC744 \uC0AC\uC6A9\uD569\uB2C8\uB2E4. "),i()()),r&2){let e=d(2);l(4),p("ngForOf",e.currentRoom.monsters)}}function vo(r,t){if(r&1&&(o(0,"div",32),c(1),i()),r&2){let e=t.$implicit;l(),E(" \u{1F381} ",e.name," (",e.rarity,") ")}}function Oo(r,t){r&1&&(o(0,"div",32),c(1," \u{1F4E6} \uC544\uC774\uD15C \uD68D\uB4DD \uC5C6\uC74C "),i())}function yo(r,t){if(r&1){let e=v();o(0,"div",29)(1,"div",30),c(2,"\u{1F389} \uC804\uD22C \uC2B9\uB9AC!"),i(),o(3,"div",31)(4,"div",32),c(5),i(),o(6,"div",32),c(7),i(),b(8,vo,2,2,"div",33)(9,Oo,2,0,"div",34),i(),o(10,"button",35),f("click",function(){_(e);let a=d(2);return u(a.claimRewards())}),c(11,"\u2705 \uBCF4\uC0C1 \uBC1B\uAE30"),i()()}if(r&2){let e=d(2);l(5),M("\u2B50 \uACBD\uD5D8\uCE58 +",e.battleRewards.exp),l(2),M("\u{1F4B0} \uACE8\uB4DC +",e.battleRewards.gold),l(),p("ngForOf",e.battleRewards.items),l(),p("ngIf",e.battleRewards.items.length===0)}}function wo(r,t){if(r&1){let e=v();o(0,"button",44),f("click",function(){let a=_(e).$implicit,s=d(4);return u(s.moveToRoom(a.id))}),o(1,"span",45),c(2),i(),c(3),i()}if(r&2){let e=t.$implicit,n=t.index,a=d(4);l(2),h(n+1),l(),E(" ",a.getRoomTypeIcon(e.type)," ",a.getRoomTypeKorean(e.type)," ")}}function ko(r,t){if(r&1&&(o(0,"div",40)(1,"div",41),c(2,"\u{1F6AA} \uC774\uB3D9 \uAC00\uB2A5\uD55C \uBC29:"),i(),o(3,"div",42),b(4,wo,4,3,"button",43),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.getConnectedRooms())}}function So(r,t){if(r&1){let e=v();o(0,"div",46)(1,"button",35),f("click",function(){_(e);let a=d(3);return u(a.moveToNextFloor())}),c(2),i()()}if(r&2){let e=d(3);l(2),M(" \u2B07\uFE0F ",e.dungeon.currentFloor+1,"\uCE35\uC73C\uB85C \uB0B4\uB824\uAC00\uAE30 ")}}function Do(r,t){if(r&1&&(o(0,"div",36)(1,"div",37),c(2,"\u2705 \uBC29\uC744 \uD074\uB9AC\uC5B4\uD588\uC2B5\uB2C8\uB2E4!"),i(),b(3,ko,5,1,"div",38)(4,So,3,1,"div",39),i()),r&2){let e=d(2);l(3),p("ngIf",e.getConnectedRooms().length>0),l(),p("ngIf",e.currentRoom.type==="exit")}}function Io(r,t){if(r&1){let e=v();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),c(4,"\uB358\uC804:"),i(),o(5,"span",5),c(6),i()(),o(7,"div",3)(8,"span",4),c(9,"\uCE35:"),i(),o(10,"span",5),c(11),i()(),o(12,"div",3)(13,"span",4),c(14,"HP:"),i(),o(15,"span",6),c(16),i()(),o(17,"div",3)(18,"span",4),c(19,"\uCC98\uCE58:"),i(),o(20,"span",5),c(21),i()()(),o(22,"div",7)(23,"div",8),c(24),o(25,"span",9),c(26),i()(),o(27,"div",10),c(28),i()(),b(29,xo,7,1,"div",11)(30,yo,12,4,"div",12)(31,Do,5,2,"div",13),o(32,"div",14)(33,"button",15),f("click",function(){_(e);let a=d();return u(a.escapeDungeon())}),c(34,"\u{1F6AA} \uB358\uC804 \uD0C8\uCD9C"),i()()()}if(r&2){let e=d();l(6),h(e.dungeon.dungeonTypeId),l(5),E("",e.dungeon.currentFloor," / ",e.dungeon.totalFloors),l(5),E("",e.playerHp," / ",e.playerMaxHp),l(5),E("\u{1F5E1}\uFE0F",e.dungeon.stats.monstersKilled," \u{1F451}",e.dungeon.stats.elitesKilled),l(3),E(" ",e.getRoomTypeIcon(e.currentRoom.type)," ",e.getRoomTypeKorean(e.currentRoom.type)," "),l(),y("cleared",e.currentRoom.isCleared),l(),M(" ",e.currentRoom.isCleared?"[\uD074\uB9AC\uC5B4]":"[\uBBF8\uD074\uB9AC\uC5B4]"," "),l(2),h(e.currentRoom.description),l(),p("ngIf",!e.currentRoom.isCleared&&e.currentRoom.monsters&&e.currentRoom.monsters.length>0),l(),p("ngIf",e.showRewards&&e.battleRewards),l(),p("ngIf",e.currentRoom.isCleared&&!e.currentBattleMonster&&!e.showRewards)}}var $e=class r{constructor(t){this.snackBar=t}modalService=H(Re);dungeon;currentRoom;playerHp=100;playerMaxHp=100;playerMp=50;playerMaxMp=50;playerName="\uD50C\uB808\uC774\uC5B4";playerLevel=1;playerAttackPower=10;playerDefensePower=5;playerEquipment={};playerSkills=[];roomMove=new ie;monsterAttack=new ie;interactableUse=new ie;dungeonEscape=new ie;floorMove=new ie;rewardsClaimed=new ie;minimapRooms=[];currentFloorRooms=[];showMinimap=!0;showMonsterList=!0;showRoomInfo=!0;currentBattleMonster=null;battleMonsters=[];selectedMonsterIndex=0;isBattleAnimating=!1;isPlayerAttacking=!1;isPlayerDamaged=!1;isMonsterAttacking=!1;isMonsterDamaged=!1;monsterDamagedStates=[];battleLog=[];isDefending=!1;battleRewards=null;showRewards=!1;ngOnInit(){this.updateMinimapData()}ngOnChanges(t){(t.dungeon||t.currentRoom)&&(this.updateMinimapData(),this.updateCurrentFloorRooms(),t.currentRoom&&this.initializeBattle())}initializeBattle(){if(!this.currentRoom){this.currentBattleMonster=null,this.battleMonsters=[];return}console.log("\u{1F4CA} \uBC29 \uC815\uBCF4 \uC0C1\uC138:",{type:this.currentRoom.type,isCleared:this.currentRoom.isCleared,monsters:this.currentRoom.monsters,monstersCount:this.currentRoom.monsters?.length||0,monstersDetails:this.currentRoom.monsters});let t=this.currentRoom.monsters?.filter(e=>!e.isDead)||[];t.length>0&&!this.currentRoom.isCleared?(this.battleMonsters=[...t],this.selectedMonsterIndex=0,this.currentBattleMonster=this.battleMonsters[0],this.monsterDamagedStates=new Array(this.battleMonsters.length).fill(!1),console.log(`\u2694\uFE0F ${this.battleMonsters.length}\uB9C8\uB9AC\uC758 \uC801\uACFC \uC870\uC6B0! (\uC804\uD22C \uC2DC\uC791)`),setTimeout(()=>{this.startBattleWithMonster(this.currentBattleMonster)},500)):(this.currentBattleMonster=null,this.battleMonsters=[],this.battleLog=[],console.log("\u274C \uC804\uD22C \uBAAC\uC2A4\uD130 \uC5C6\uC74C - \uC774\uC720:",{noAliveMonsters:t.length===0,roomCleared:this.currentRoom.isCleared})),this.isBattleAnimating=!1,this.isPlayerAttacking=!1,this.isPlayerDamaged=!1,this.isMonsterAttacking=!1,this.isMonsterDamaged=!1,this.isDefending=!1}startAutoBattle(){console.log("\u23F9\uFE0F \uC790\uB3D9 \uC804\uD22C \uBE44\uD65C\uC131\uD654 (\uAE30\uBCF8 \uC804\uD22C \uC2DC\uC2A4\uD15C \uC0AC\uC6A9)")}updateMinimapData(){if(!this.dungeon||!this.currentRoom)return;let t=this.dungeon.floors[this.dungeon.currentFloor-1];t&&(this.minimapRooms=t.rooms.map(e=>({id:e.id,type:e.type,isExplored:e.isExplored,isCurrentRoom:e.id===this.currentRoom.id,isCleared:e.isCleared,position:this.calculateRoomPosition(e,t.rooms)})))}updateCurrentFloorRooms(){if(!this.dungeon)return;let t=this.dungeon.floors[this.dungeon.currentFloor-1];t&&(this.currentFloorRooms=t.rooms)}calculateRoomPosition(t,e){let n=e.findIndex(s=>s.id===t.id),a=5;return{x:n%a*60+30,y:Math.floor(n/a)*60+30}}moveToRoom(t){this.currentRoom&&this.currentRoom.connectedRoomIds.includes(t)&&this.roomMove.emit(t)}attackMonster(t){this.monsterAttack.emit(t)}startBattleWithMonster(t){t&&this.monsterAttack.emit(t)}useInteractable(t){this.interactableUse.emit(t)}escapeDungeon(){this.modalService.showConfirm("\uB358\uC804\uC5D0\uC11C \uD0C8\uCD9C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?<br>\uC9C4\uD589 \uC0C1\uD669\uC774 \uC0AC\uB77C\uC9D1\uB2C8\uB2E4.",()=>{this.dungeonEscape.emit()},"\uB358\uC804 \uD0C8\uCD9C","\uD0C8\uCD9C","\uCDE8\uC18C")}moveToNextFloor(){if(!this.dungeon)return;let t=this.dungeon.currentFloor+1;t<=this.dungeon.totalFloors&&this.floorMove.emit(t)}getConnectedRooms(){return!this.currentRoom||!this.currentFloorRooms?[]:this.currentFloorRooms.filter(t=>this.currentRoom.connectedRoomIds.includes(t.id))}getHpPercent(){return this.playerHp/this.playerMaxHp*100}getMpPercent(){return this.playerMp/this.playerMaxMp*100}getRoomTypeIcon(t){return{entrance:"\u{1F6AA}",normal:"\u2694\uFE0F",elite:"\u{1F451}",boss:"\u{1F480}",treasure:"\u{1F48E}",shrine:"\u2728",shop:"\u{1F3EA}",safe:"\u{1F6E1}\uFE0F",event:"\u2753",exit:"\u{1F6AA}"}[t]||"\u2753"}getRoomTypeKorean(t){return{entrance:"\uC785\uAD6C",normal:"\uC77C\uBC18 \uBC29",elite:"\uC5D8\uB9AC\uD2B8 \uBC29",boss:"\uBCF4\uC2A4 \uBC29",treasure:"\uBCF4\uBB3C \uBC29",shrine:"\uC131\uC18C",shop:"\uC0C1\uC810",safe:"\uC548\uC804 \uC9C0\uB300",event:"\uC774\uBCA4\uD2B8 \uBC29",exit:"\uCD9C\uAD6C"}[t]||"\uC54C \uC218 \uC5C6\uB294 \uBC29"}getMonsterTypeColor(t){return{normal:"#cccccc",elite:"#4169E1",boss:"#FF4500"}[t]||"#cccccc"}toggleMinimap(){this.showMinimap=!this.showMinimap}toggleMonsterList(){this.showMonsterList=!this.showMonsterList}toggleRoomInfo(){this.showRoomInfo=!this.showRoomInfo}getProgressPercent(){if(!this.dungeon)return 0;let t=this.dungeon.currentFloor,e=this.dungeon.totalFloors;return t/e*100}getExploredRoomsCount(){return this.currentFloorRooms?this.currentFloorRooms.filter(t=>t.isExplored).length:0}getClearedRoomsCount(){return this.currentFloorRooms?this.currentFloorRooms.filter(t=>t.isCleared).length:0}getAliveMonsters(){return this.battleMonsters.filter(t=>!t.isDead)}selectMonster(t){this.battleMonsters[t]&&!this.battleMonsters[t].isDead&&(this.selectedMonsterIndex=t,this.currentBattleMonster=this.battleMonsters[t])}getAvailableInteractables(){return this.currentRoom?this.currentRoom.interactables.filter(t=>!t.isUsed):[]}getMonsterIcon(t){return{normal:"\u{1F479}",elite:"\u{1F451}",boss:"\u{1F480}"}[t]||"\u{1F479}"}calculateAndShowRewards(){if(!this.currentRoom||!this.battleMonsters.length)return;let t=0,e=0,n=[];this.battleMonsters.forEach(a=>{let s={normal:20,elite:50,boss:150};t+=a.level*(s[a.type]||20);let m={normal:10,elite:30,boss:100};e+=Math.floor(a.level*(m[a.type]||10)*(.8+Math.random()*.4));let C={normal:.15,elite:.4,boss:.8};if(Math.random()<(C[a.type]||.15)){let P=Math.random(),x="common";P>.95?x="legendary":P>.85?x="epic":P>.65?x="rare":P>.35&&(x="uncommon"),n.push({name:`${a.name}\uC758 \uC804\uB9AC\uD488`,rarity:x,level:a.level})}}),this.battleRewards={exp:t,gold:e,items:n},this.showRewards=!0}claimRewards(){this.battleRewards&&(this.rewardsClaimed.emit(this.battleRewards),this.showRewards=!1,this.battleRewards=null,this.battleMonsters=[])}static \u0275fac=function(e){return new(e||r)(z(De))};static \u0275cmp=ne({type:r,selectors:[["app-dungeon-explorer"]],inputs:{dungeon:"dungeon",currentRoom:"currentRoom",playerHp:"playerHp",playerMaxHp:"playerMaxHp",playerMp:"playerMp",playerMaxMp:"playerMaxMp",playerName:"playerName",playerLevel:"playerLevel",playerAttackPower:"playerAttackPower",playerDefensePower:"playerDefensePower",playerEquipment:"playerEquipment",playerSkills:"playerSkills"},outputs:{roomMove:"roomMove",monsterAttack:"monsterAttack",interactableUse:"interactableUse",dungeonEscape:"dungeonEscape",floorMove:"floorMove",rewardsClaimed:"rewardsClaimed"},standalone:!1,features:[an],decls:1,vars:1,consts:[["class","dungeon-explorer-text",4,"ngIf"],[1,"dungeon-explorer-text"],[1,"dungeon-status-bar"],[1,"status-item"],[1,"label"],[1,"value"],[1,"value","hp-value"],[1,"room-info-text"],[1,"room-title"],[1,"room-status-badge"],[1,"room-description"],["class","battle-log-section",4,"ngIf"],["class","rewards-text-section",4,"ngIf"],["class","room-cleared-text",4,"ngIf"],[1,"dungeon-footer-text"],[1,"text-button","danger",3,"click"],[1,"battle-log-section"],[1,"battle-header-text"],[1,"monster-list-text"],["class","monster-item",3,"defeated",4,"ngFor","ngForOf"],[1,"battle-notice-text"],[1,"monster-item"],[1,"monster-name"],["class","monster-status",4,"ngIf"],["class","monster-status defeated-mark",4,"ngIf"],["class","monster-stats",4,"ngIf"],[1,"monster-status"],[1,"monster-status","defeated-mark"],[1,"monster-stats"],[1,"rewards-text-section"],[1,"rewards-header"],[1,"rewards-list"],[1,"reward-line"],["class","reward-line",4,"ngFor","ngForOf"],["class","reward-line",4,"ngIf"],[1,"text-button","primary",3,"click"],[1,"room-cleared-text"],[1,"cleared-message"],["class","room-choices",4,"ngIf"],["class","floor-exit-text",4,"ngIf"],[1,"room-choices"],[1,"choices-title"],[1,"choice-buttons"],["class","text-button choice",3,"click",4,"ngFor","ngForOf"],[1,"text-button","choice",3,"click"],[1,"choice-number"],[1,"floor-exit-text"]],template:function(e,n){e&1&&b(0,Io,35,16,"div",0),e&2&&p("ngIf",n.dungeon&&n.currentRoom)},dependencies:[we,ce],styles:[".dungeon-explorer-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1rem;font-family:Noto Sans KR,Malgun Gothic,sans-serif;color:#2c2416;background:linear-gradient(135deg,#f5f1e8,#e8dcc8);border-radius:6px;max-height:70vh;overflow-y:auto}.dungeon-explorer-text[_ngcontent-%COMP%]   .dungeon-status-bar[_ngcontent-%COMP%]{display:flex;gap:1.5rem;padding:.8rem 1rem;background:#8b45131a;border-left:3px solid #8b4513;font-size:.9rem;border-radius:4px}.dungeon-explorer-text[_ngcontent-%COMP%]   .dungeon-status-bar[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]{display:flex;gap:.3rem}.dungeon-explorer-text[_ngcontent-%COMP%]   .dungeon-status-bar[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#8b4513}.dungeon-explorer-text[_ngcontent-%COMP%]   .dungeon-status-bar[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2c2416}.dungeon-explorer-text[_ngcontent-%COMP%]   .dungeon-status-bar[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .value.hp-value[_ngcontent-%COMP%]{color:#dc3545;font-weight:600}.dungeon-explorer-text[_ngcontent-%COMP%]   .room-info-text[_ngcontent-%COMP%]{padding:1rem;background:#8b45130d;border-radius:4px;border:1px solid rgba(139,69,19,.2)}.dungeon-explorer-text[_ngcontent-%COMP%]   .room-info-text[_ngcontent-%COMP%]   .room-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#8b4513;margin-bottom:.5rem}.dungeon-explorer-text[_ngcontent-%COMP%]   .room-info-text[_ngcontent-%COMP%]   .room-title[_ngcontent-%COMP%]   .room-status-badge[_ngcontent-%COMP%]{margin-left:.5rem;font-size:.85rem;padding:.2rem .6rem;background:#ffc107;color:#333;border-radius:3px}.dungeon-explorer-text[_ngcontent-%COMP%]   .room-info-text[_ngcontent-%COMP%]   .room-title[_ngcontent-%COMP%]   .room-status-badge.cleared[_ngcontent-%COMP%]{background:#28a745;color:#fff}.dungeon-explorer-text[_ngcontent-%COMP%]   .room-info-text[_ngcontent-%COMP%]   .room-description[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.6;color:#4a3520}.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]{padding:1rem;background:#dc35450d;border-left:3px solid #dc3545;border-radius:4px}.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .battle-header-text[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#dc3545;margin-bottom:1rem;text-align:center}.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem;margin-bottom:1rem}.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item[_ngcontent-%COMP%]{padding:.8rem;background:#ffffff80;border-left:3px solid #dc3545;border-radius:4px;transition:all .2s}.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item.defeated[_ngcontent-%COMP%]{opacity:.5;border-left-color:#6c757d;background:#6c757d1a}.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item[_ngcontent-%COMP%]   .monster-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#dc3545;margin-bottom:.3rem;display:flex;align-items:center;justify-content:space-between}.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item[_ngcontent-%COMP%]   .monster-name[_ngcontent-%COMP%]   .monster-status[_ngcontent-%COMP%]{font-size:.9rem}.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item[_ngcontent-%COMP%]   .monster-name[_ngcontent-%COMP%]   .monster-status.defeated-mark[_ngcontent-%COMP%]{opacity:.7}.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item[_ngcontent-%COMP%]   .monster-stats[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .monster-list-text[_ngcontent-%COMP%]   .monster-item.defeated[_ngcontent-%COMP%]   .monster-name[_ngcontent-%COMP%]{color:#6c757d;text-decoration:line-through}.dungeon-explorer-text[_ngcontent-%COMP%]   .battle-log-section[_ngcontent-%COMP%]   .battle-notice-text[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;color:#666;font-style:italic;padding:.5rem;background:#ffffff4d;border-radius:4px}.dungeon-explorer-text[_ngcontent-%COMP%]   .rewards-text-section[_ngcontent-%COMP%]{padding:1rem;background:#28a7451a;border-left:3px solid #28a745;border-radius:4px}.dungeon-explorer-text[_ngcontent-%COMP%]   .rewards-text-section[_ngcontent-%COMP%]   .rewards-header[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#28a745;margin-bottom:1rem;text-align:center}.dungeon-explorer-text[_ngcontent-%COMP%]   .rewards-text-section[_ngcontent-%COMP%]   .rewards-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem}.dungeon-explorer-text[_ngcontent-%COMP%]   .rewards-text-section[_ngcontent-%COMP%]   .rewards-list[_ngcontent-%COMP%]   .reward-line[_ngcontent-%COMP%]{font-size:.95rem;padding:.5rem;background:#ffffff80;border-radius:3px;border-left:2px solid #28a745}.dungeon-explorer-text[_ngcontent-%COMP%]   .room-cleared-text[_ngcontent-%COMP%]{padding:1rem}.dungeon-explorer-text[_ngcontent-%COMP%]   .room-cleared-text[_ngcontent-%COMP%]   .cleared-message[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#28a745;text-align:center;margin-bottom:1.5rem;padding:.8rem;background:#28a7451a;border-radius:4px}.dungeon-explorer-text[_ngcontent-%COMP%]   .room-cleared-text[_ngcontent-%COMP%]   .room-choices[_ngcontent-%COMP%]{margin-bottom:1rem}.dungeon-explorer-text[_ngcontent-%COMP%]   .room-cleared-text[_ngcontent-%COMP%]   .room-choices[_ngcontent-%COMP%]   .choices-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#8b4513;margin-bottom:.8rem}.dungeon-explorer-text[_ngcontent-%COMP%]   .room-cleared-text[_ngcontent-%COMP%]   .room-choices[_ngcontent-%COMP%]   .choice-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.7rem 1rem;background:#8b45131a;border:1px solid #8b4513;border-radius:4px;color:#2c2416;font-size:.95rem;cursor:pointer;transition:all .2s;font-family:inherit;font-weight:500}.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button[_ngcontent-%COMP%]:hover{background:#8b451333;transform:translate(3px);box-shadow:2px 2px 4px #0000001a}.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button[_ngcontent-%COMP%]:active{transform:translate(1px)}.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button.choice[_ngcontent-%COMP%]{justify-content:flex-start}.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button.choice[_ngcontent-%COMP%]   .choice-number[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:24px;height:24px;background:#8b4513;color:#fff;border-radius:50%;font-size:.85rem;font-weight:600;margin-right:.5rem;padding:0 .3rem}.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button.primary[_ngcontent-%COMP%]{background:#28a745;border-color:#28a745;color:#fff;font-weight:600;justify-content:center}.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button.primary[_ngcontent-%COMP%]:hover{background:#218838;border-color:#1e7e34}.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button.danger[_ngcontent-%COMP%]{background:#dc3545;border-color:#dc3545;color:#fff;font-weight:600;justify-content:center}.dungeon-explorer-text[_ngcontent-%COMP%]   .text-button.danger[_ngcontent-%COMP%]:hover{background:#c82333;border-color:#bd2130;transform:none}.dungeon-explorer-text[_ngcontent-%COMP%]   .dungeon-footer-text[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:1rem;border-top:1px solid rgba(139,69,19,.2)}"]})};var Eo=["battleLogContainer"],Ut=()=>[],Bo=r=>({slot:"weapon",item:r}),me=()=>["inventory-grid"],To=r=>({slot:"armor",item:r}),qo=r=>({slot:"helmet",item:r}),Ao=r=>({slot:"amulet",item:r}),Go=r=>({slot:"belt",item:r}),No=r=>({slot:"gloves",item:r}),zo=r=>({slot:"boots",item:r}),Fo=r=>({slot:"ring1",item:r}),Lo=r=>({slot:"ring2",item:r}),Ro=()=>["weapon-slot","armor-slot","helmet-slot","amulet-slot","belt-slot","gloves-slot","boots-slot","ring1-slot","ring2-slot"],$o=r=>({item:r,slot:"weapon"}),Vo=r=>({item:r,slot:"armor"}),jo=r=>({item:r,slot:"helmet"}),Ho=r=>({item:r,slot:"amulet"}),Wo=r=>({item:r,slot:"belt"}),Yo=r=>({item:r,slot:"gloves"}),Uo=r=>({item:r,slot:"boots"}),Ko=r=>({item:r,slot:"ring1"}),Xo=r=>({item:r,slot:"ring2"}),Qo=(r,t)=>({item:r,index:t}),Jo=(r,t,e,n)=>({"node-start":r,"node-story":t,"node-choice":e,"node-current":n});function Zo(r,t){if(r&1&&(o(0,"div",69)(1,"span"),c(2),i()()),r&2){let e=d(3);l(2),M("\u{1F464} ",e.getCurrentUsername())}}function ei(r,t){if(r&1){let e=v();o(0,"div",64)(1,"div",65)(2,"h1"),c(3,"\u{1F3F0} \uD14D\uC2A4\uD2B8\uB358\uC804"),i()(),o(4,"div",66),b(5,Zo,3,1,"div",67),o(6,"button",68),f("click",function(){_(e);let a=d(2);return u(a.logout())}),c(7," \u{1F6AA} "),i()()()}if(r&2){let e=d(2);l(5),p("ngIf",e.getCurrentUsername())}}function ti(r,t){if(r&1&&(o(0,"div",70)(1,"span",71),c(2),i()()),r&2){let e=d(2);l(2),M("\u{1F464} ",e.getCurrentUsername())}}function ni(r,t){if(r&1&&(o(0,"div",72)(1,"div",73),S(2,"div",74),o(3,"div",75),c(4),i()()()),r&2){let e=d(2);l(4),h(e.elementGenerationProgress)}}function oi(r,t){if(r&1&&(o(0,"div",99),c(1),i()),r&2){let e=d(3);l(),M(" ",e.storyGenerationError," ")}}function ii(r,t){if(r&1){let e=v();o(0,"div",100),f("click",function(){let a=_(e).$implicit,s=d(3);return u(s.selectCharacterForStory(a))}),o(1,"div",101),c(2),i(),o(3,"div",102),c(4),i()()}if(r&2){let e=t.$implicit,n=d(3);y("selected",n.isCharacterSelected(e)),l(2),h(e.name),l(2),h(e.occupation)}}function ai(r,t){r&1&&(o(0,"p",103),c(1," \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uCE90\uB9AD\uD130 \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694. "),i())}function ri(r,t){if(r&1){let e=v();o(0,"div",100),f("click",function(){let a=_(e).$implicit,s=d(3);return u(s.selectItemForStory(a))}),o(1,"div",101),c(2),i(),o(3,"div",102),c(4),i()()}if(r&2){let e=t.$implicit,n=d(3);y("selected",n.isItemSelected(e)),l(2),h(e.name),l(2),E("",e.type," \xB7 ",e.grade)}}function ci(r,t){r&1&&(o(0,"p",103),c(1," \uC800\uC7A5\uB41C \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uC544\uC774\uD15C \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694. "),i())}function li(r,t){if(r&1){let e=v();o(0,"div",100),f("click",function(){let a=_(e).$implicit,s=d(3);return u(s.selectScenarioForStory(a))}),o(1,"div",101),c(2),i(),o(3,"div",102),c(4),i()()}if(r&2){let e=t.$implicit,n=d(3);y("selected",n.isScenarioSelected(e)),l(2),h(e.title),l(2),h(e.genre)}}function si(r,t){r&1&&(o(0,"p",103),c(1," \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uC744 \uBA3C\uC800 \uC774\uC6A9\uD574\uC8FC\uC138\uC694. "),i())}function di(r,t){r&1&&(o(0,"span"),c(1,"\u{1F3AC} \uC2A4\uD1A0\uB9AC \uC0DD\uC131"),i())}function gi(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function pi(r,t){if(r&1&&(o(0,"p"),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function mi(r,t){if(r&1){let e=v();o(0,"div",104)(1,"h4"),c(2,"\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),i(),o(3,"div",105)(4,"div",106)(5,"span",107),c(6),i(),o(7,"h3"),c(8),i()(),o(9,"p",108),c(10),i(),o(11,"div",109)(12,"span",110),c(13),i(),o(14,"span",110),c(15),i(),o(16,"span",110),c(17),i()(),o(18,"div",111)(19,"h5"),c(20,"\uCCAB \uBC88\uC9F8 \uC7A5\uBA74"),i(),b(21,pi,2,1,"p",112),i()(),o(22,"div",113)(23,"button",114),f("click",function(){_(e);let a=d(3);return u(a.saveGeneratedStory())}),c(24," \u{1F4BE} \uC2A4\uD1A0\uB9AC \uC800\uC7A5 "),i(),o(25,"button",115),f("click",function(){_(e);let a=d(3);return u(a.addGeneratedStoryToList())}),c(26," \u{1F3AE} \uAC8C\uC784 \uC2DC\uC791 "),i(),o(27,"button",116),f("click",function(){_(e);let a=d(3);return u(a.clearGeneratedStory())}),c(28," \u{1F504} \uB2E4\uC2DC \uC0DD\uC131 "),i()()()}if(r&2){let e=d(3);l(6),h(e.generatedStory.icon),l(2),h(e.generatedStory.title),l(2),h(e.generatedStory.description),l(3),M("\u{1F4DA} ",e.generatedStory.genre),l(2),M("\u2694\uFE0F ",e.generatedStory.difficulty==="easy"?"\uC26C\uC6C0":e.generatedStory.difficulty==="normal"?"\uBCF4\uD1B5":"\uC5B4\uB824\uC6C0"),l(2),M("\u{1F4B0} ",e.generatedStory.startingGold,"G"),l(4),p("ngForOf",e.generatedStory.firstStory)}}function _i(r,t){if(r&1){let e=v();o(0,"div",76)(1,"div",77)(2,"div",78)(3,"h3"),c(4,"\u2728 \uC2A4\uD1A0\uB9AC \uC0DD\uC131\uAE30"),i(),o(5,"button",79),f("click",function(){_(e);let a=d(2);return u(a.toggleStoryCreatorPanel())}),c(6,"\u2715"),i()(),o(7,"div",80)(8,"h4"),c(9,"\uC800\uC7A5\uB41C \uCF58\uD150\uCE20\uB85C \uC0C8\uB85C\uC6B4 \uC774\uC57C\uAE30\uB97C \uB9CC\uB4E4\uC5B4\uBCF4\uC138\uC694"),i(),o(10,"p"),c(11,"\uCE90\uB9AD\uD130, \uC544\uC774\uD15C, \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uBA74 Loworld AI\uAC00 \uD765\uBBF8\uC9C4\uC9C4\uD55C \uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4."),i()(),b(12,oi,2,1,"div",81),o(13,"div",82)(14,"label",83)(15,"span",84),c(16,"\u{1F4D6}"),i(),o(17,"span",85),c(18,"\uC2A4\uD1A0\uB9AC \uC81C\uBAA9"),i(),o(19,"span",86),c(20,"*"),i()(),o(21,"input",87),ge("ngModelChange",function(a){_(e);let s=d(2);return de(s.storyTitle,a)||(s.storyTitle=a),u(a)}),i(),o(22,"div",88),c(23),i()(),o(24,"div",89)(25,"div",90)(26,"h5"),c(27,"\u{1F3AD} \uC8FC\uC778\uACF5 \uC120\uD0DD "),o(28,"span",91),c(29),i()(),o(30,"div",92),b(31,ii,5,4,"div",93),i(),b(32,ai,2,0,"p",94),i(),o(33,"div",90)(34,"h5"),c(35,"\u{1F48E} \uD575\uC2EC \uC544\uC774\uD15C \uC120\uD0DD "),o(36,"span",91),c(37),i()(),o(38,"div",92),b(39,ri,5,5,"div",93),i(),b(40,ci,2,0,"p",94),i(),o(41,"div",90)(42,"h5"),c(43,"\u{1F3AC} \uC2DC\uB098\uB9AC\uC624 \uC120\uD0DD "),o(44,"span",91),c(45),i()(),o(46,"div",92),b(47,li,5,4,"div",93),i(),b(48,si,2,0,"p",94),i()(),o(49,"div",95)(50,"button",96),f("click",function(){_(e);let a=d(2);return u(a.generateStoryFromSavedContent())}),b(51,di,2,0,"span",97)(52,gi,2,0,"span",97),i()(),b(53,mi,29,7,"div",98),i()()}if(r&2){let e=d(2);l(12),p("ngIf",e.storyGenerationError),l(9),se("ngModel",e.storyTitle),l(2),M("",e.storyTitle.length,"/50"),l(6),M("(",e.selectedCharactersForStory.length,"\uAC1C \uC120\uD0DD\uB428)"),l(2),p("ngForOf",e.savedCharacters),l(),p("ngIf",e.savedCharacters.length===0),l(5),M("(",e.selectedItemsForStory.length,"\uAC1C \uC120\uD0DD\uB428)"),l(2),p("ngForOf",e.savedItems),l(),p("ngIf",e.savedItems.length===0),l(5),M("(",e.selectedScenariosForStory.length,"\uAC1C \uC120\uD0DD\uB428)"),l(2),p("ngForOf",e.savedScenarios),l(),p("ngIf",e.savedScenarios.length===0),l(2),p("disabled",e.isGeneratingStory||!e.storyTitle||e.storyTitle.trim()===""||e.selectedCharactersForStory.length===0||e.selectedItemsForStory.length===0||e.selectedScenariosForStory.length===0),l(),p("ngIf",!e.isGeneratingStory),l(),p("ngIf",e.isGeneratingStory),l(),p("ngIf",e.generatedStory)}}function ui(r,t){if(r&1){let e=v();o(0,"div",128),f("click",function(){let a=_(e).$implicit,s=d(4);return u(s.loadSavedStoryForGame(a))}),o(1,"div",129)(2,"div",130)(3,"span",107),c(4),i(),o(5,"h4"),c(6),i()(),o(7,"button",131),f("click",function(a){let s=_(e).$implicit,m=d(4);return u(m.deleteSavedStory(s.id,a))}),c(8," \u{1F5D1}\uFE0F "),i()(),o(9,"div",109)(10,"span",110),c(11),i(),o(12,"span",110),c(13),i(),o(14,"span",110),c(15),i()(),o(16,"p",132),c(17),i(),o(18,"div",133)(19,"span",134),c(20),i(),o(21,"span",135),c(22,"\u{1F916} AI \uC0DD\uC131"),i()()()}if(r&2){let e=t.$implicit,n=d(4);l(4),h(e.icon),l(2),h(e.title),l(5),M("\u{1F4DA} ",e.genre),l(2),M("\u2694\uFE0F ",e.difficulty==="easy"?"\uC26C\uC6C0":e.difficulty==="normal"?"\uBCF4\uD1B5":"\uC5B4\uB824\uC6C0"),l(2),M("\u{1F4B0} ",e.startingGold,"G"),l(2),h(e.description),l(3),h(n.formatSaveDate(e.createdAt))}}function Ci(r,t){if(r&1&&(o(0,"div",124)(1,"p",125),c(2,"AI\uAC00 \uC0DD\uC131\uD55C \uB098\uB9CC\uC758 \uC774\uC57C\uAE30\uB4E4"),i(),o(3,"div",126),b(4,ui,23,7,"div",127),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.savedStories)}}function fi(r,t){if(r&1){let e=v();o(0,"div",117)(1,"div",118),f("click",function(){_(e);let a=d(2);return u(a.toggleStories())}),o(2,"div",119)(3,"span",120),c(4),i(),o(5,"h3"),c(6,"\u{1F4DA} \uC800\uC7A5\uB41C \uC2A4\uD1A0\uB9AC"),i(),o(7,"span",121),c(8),i()(),o(9,"button",122),f("click",function(a){return _(e),d(2).toggleStories(),u(a.stopPropagation())}),c(10),i()(),b(11,Ci,5,1,"div",123),i()}if(r&2){let e=d(2);l(4),h(e.isStoriesExpanded?"\u25BC":"\u25B6"),l(4),h(e.savedStories.length),l(2),M(" ",e.isStoriesExpanded?"\uC811\uAE30":"\uD3BC\uCE58\uAE30"," "),l(),p("ngIf",e.isStoriesExpanded)}}function bi(r,t){if(r&1&&(o(0,"span",147),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function hi(r,t){if(r&1&&(o(0,"div",145),b(1,bi,2,1,"span",146),i()),r&2){let e=d().$implicit;l(),p("ngForOf",e.personality.slice(0,3))}}function Pi(r,t){if(r&1&&(o(0,"div",145)(1,"span",147),c(2),i()()),r&2){let e=d().$implicit;l(2),h(e.personality)}}function Mi(r,t){if(r&1){let e=v();o(0,"div",139),f("click",function(a){let s=_(e).$implicit,m=d(4);return u(m.openCharacterInventory(s,a))}),o(1,"div",140)(2,"h4"),c(3),i(),o(4,"button",131),f("click",function(a){let s=_(e).$implicit,m=d(4);return u(s.id&&m.deleteCharacter(s.id,a))}),c(5," \u{1F5D1}\uFE0F "),i()(),o(6,"div",141)(7,"span",110),c(8),i(),o(9,"span",110),c(10),i(),o(11,"span",110),c(12),i()(),o(13,"p",142),c(14),i(),b(15,hi,2,1,"div",143)(16,Pi,3,1,"div",143),o(17,"div",144)(18,"span",134),c(19),i()()()}if(r&2){let e=t.$implicit,n=d(4);l(3),h(e.name),l(5),M("\u{1F464} ",e.gender),l(2),M("\u{1F4C5} ",e.age,"\uC138"),l(2),M("\u{1F4BC} ",e.occupation),l(2),h(e.backstory),l(),p("ngIf",n.isArray(e.personality)),l(),p("ngIf",!n.isArray(e.personality)&&e.personality),l(3),h(n.formatSaveDate(e.createdAt))}}function xi(r,t){if(r&1&&(o(0,"div",124)(1,"p",125),c(2,"AI\uAC00 \uC0DD\uC131\uD55C \uCE90\uB9AD\uD130\uB4E4"),i(),o(3,"div",137),b(4,Mi,20,8,"div",138),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.savedCharacters)}}function vi(r,t){if(r&1){let e=v();o(0,"div",136)(1,"div",118),f("click",function(){_(e);let a=d(2);return u(a.toggleCharacters())}),o(2,"div",119)(3,"span",120),c(4),i(),o(5,"h3"),c(6,"\u{1F3AD} \uC800\uC7A5\uB41C \uCE90\uB9AD\uD130"),i(),o(7,"span",121),c(8),i()(),o(9,"button",122),f("click",function(a){return _(e),d(2).toggleCharacters(),u(a.stopPropagation())}),c(10),i()(),b(11,xi,5,1,"div",123),i()}if(r&2){let e=d(2);l(4),h(e.isCharactersExpanded?"\u25BC":"\u25B6"),l(4),h(e.savedCharacters.length),l(2),M(" ",e.isCharactersExpanded?"\uC811\uAE30":"\uD3BC\uCE58\uAE30"," "),l(),p("ngIf",e.isCharactersExpanded)}}function Oi(r,t){if(r&1&&(o(0,"span",159),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function yi(r,t){if(r&1&&(o(0,"div",157),b(1,Oi,2,1,"span",158),i()),r&2){let e=d().$implicit;l(),p("ngForOf",e.tags.slice(0,3))}}function wi(r,t){if(r&1){let e=v();o(0,"div",151),f("click",function(){let a=_(e).$implicit,s=d(4);return u(s.loadScenario(a))}),o(1,"div",152)(2,"h4"),c(3),i(),o(4,"button",131),f("click",function(a){let s=_(e).$implicit;return d(4).deleteScenario(s.id),u(a.stopPropagation())}),c(5," \u{1F5D1}\uFE0F "),i()(),o(6,"p",153),c(7),i(),b(8,yi,2,1,"div",154),o(9,"div",155)(10,"span",156),c(11),i(),o(12,"span",134),c(13),i()()()}if(r&2){let e=t.$implicit,n=d(4);l(3),h(e.title),l(4),h(e.description),l(),p("ngIf",n.isArray(e.tags)&&e.tags.length>0),l(3),h(e.genre),l(2),h(n.formatSaveDate(e.createdAt))}}function ki(r,t){if(r&1&&(o(0,"div",124)(1,"p",125),c(2,"AI\uAC00 \uC0DD\uC131\uD55C \uC2DC\uB098\uB9AC\uC624\uB4E4"),i(),o(3,"div",149),b(4,wi,14,5,"div",150),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.savedScenarios)}}function Si(r,t){if(r&1){let e=v();o(0,"div",148)(1,"div",118),f("click",function(){_(e);let a=d(2);return u(a.toggleScenarios())}),o(2,"div",119)(3,"span",120),c(4),i(),o(5,"h3"),c(6,"\u{1F3AC} \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624"),i(),o(7,"span",121),c(8),i()(),o(9,"button",122),f("click",function(a){return _(e),d(2).toggleScenarios(),u(a.stopPropagation())}),c(10),i()(),b(11,ki,5,1,"div",123),i()}if(r&2){let e=d(2);l(4),h(e.isScenariosExpanded?"\u25BC":"\u25B6"),l(4),h(e.savedScenarios.length),l(2),M(" ",e.isScenariosExpanded?"\uC811\uAE30":"\uD3BC\uCE58\uAE30"," "),l(),p("ngIf",e.isScenariosExpanded)}}function Di(r,t){if(r&1&&(o(0,"span",172),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u2694\uFE0F ",e.stats.attack)}}function Ii(r,t){if(r&1&&(o(0,"span",172),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F6E1}\uFE0F ",e.stats.defense)}}function Ei(r,t){if(r&1&&(o(0,"span",172),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u2764\uFE0F ",e.stats.hp)}}function Bi(r,t){if(r&1&&(o(0,"span",172),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F499} ",e.stats.mp)}}function Ti(r,t){if(r&1&&(o(0,"div",170),b(1,Di,2,1,"span",171)(2,Ii,2,1,"span",171)(3,Ei,2,1,"span",171)(4,Bi,2,1,"span",171),i()),r&2){let e=d().$implicit;l(),p("ngIf",e.stats.attack),l(),p("ngIf",e.stats.defense),l(),p("ngIf",e.stats.hp),l(),p("ngIf",e.stats.mp)}}function qi(r,t){if(r&1&&(o(0,"span",159),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function Ai(r,t){if(r&1){let e=v();o(0,"div",163),f("click",function(){let a=_(e).$implicit,s=d(4);return u(s.loadItem(a))}),o(1,"div",164)(2,"h4"),c(3),i(),o(4,"button",131),f("click",function(a){let s=_(e).$implicit,m=d(4);return u(s.id&&m.deleteItem(s.id,a))}),c(5," \u{1F5D1}\uFE0F "),i()(),o(6,"p",102),c(7),i(),b(8,Ti,5,4,"div",165),o(9,"div",166)(10,"span",167),c(11),i(),o(12,"span",168),c(13),i(),b(14,qi,2,1,"span",158),i(),o(15,"div",169)(16,"span",134),c(17),i()()()}if(r&2){let e=t.$implicit,n=d(4);y("grade-legendary",e.grade==="\uC2E0\uD654"||e.grade==="\uC804\uC124")("grade-rare",e.grade==="\uD76C\uADC0")("grade-uncommon",e.grade==="\uACE0\uAE09"),l(3),h(e.name),l(4),h(e.description),l(),p("ngIf",e.stats),l(3),h(e.type),l(2),h(e.grade),l(),p("ngForOf",(e.tags||ee(13,Ut)).slice(0,2)),l(3),h(n.formatSaveDate(e.createdAt))}}function Gi(r,t){if(r&1&&(o(0,"div",124)(1,"p",125),c(2,"AI\uAC00 \uC0DD\uC131\uD55C \uBB34\uAE30\uC640 \uC544\uC774\uD15C\uB4E4"),i(),o(3,"div",161),b(4,Ai,18,14,"div",162),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.savedItems)}}function Ni(r,t){if(r&1){let e=v();o(0,"div",160)(1,"div",118),f("click",function(){_(e);let a=d(2);return u(a.toggleItems())}),o(2,"div",119)(3,"span",120),c(4),i(),o(5,"h3"),c(6,"\u{1F48E} \uC800\uC7A5\uB41C \uC544\uC774\uD15C"),i(),o(7,"span",121),c(8),i()(),o(9,"button",122),f("click",function(a){return _(e),d(2).toggleItems(),u(a.stopPropagation())}),c(10),i()(),b(11,Gi,5,1,"div",123),i()}if(r&2){let e=d(2);l(4),h(e.isItemsExpanded?"\u25BC":"\u25B6"),l(4),h(e.savedItems.length),l(2),M(" ",e.isItemsExpanded?"\uC811\uAE30":"\uD3BC\uCE58\uAE30"," "),l(),p("ngIf",e.isItemsExpanded)}}function zi(r,t){if(r&1&&(o(0,"span",172),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u2694\uFE0F ",e.stats.attack)}}function Fi(r,t){if(r&1&&(o(0,"span",172),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F6E1}\uFE0F ",e.stats.defense)}}function Li(r,t){if(r&1&&(o(0,"span",172),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u2764\uFE0F ",e.stats.hp)}}function Ri(r,t){if(r&1&&(o(0,"span",172),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F499} ",e.stats.mp)}}function $i(r,t){if(r&1&&(o(0,"div",170),b(1,zi,2,1,"span",171)(2,Fi,2,1,"span",171)(3,Li,2,1,"span",171)(4,Ri,2,1,"span",171),i()),r&2){let e=d().$implicit;l(),p("ngIf",e.stats.attack),l(),p("ngIf",e.stats.defense),l(),p("ngIf",e.stats.hp),l(),p("ngIf",e.stats.mp)}}function Vi(r,t){r&1&&(o(0,"span"),c(1,"\u{1F4B0} \uAD6C\uB9E4\uD558\uAE30"),i())}function ji(r,t){r&1&&(o(0,"span"),c(1,"\u{1F4B8} \uACE8\uB4DC \uBD80\uC871"),i())}function Hi(r,t){if(r&1){let e=v();o(0,"div",179)(1,"div",164)(2,"h4"),c(3),i(),o(4,"div",180),c(5),i()(),o(6,"p",102),c(7),i(),b(8,$i,5,4,"div",165),o(9,"div",166)(10,"span",167),c(11),i(),o(12,"span",168),c(13),i()(),o(14,"div",181)(15,"button",182),f("click",function(a){let s=_(e).$implicit,m=d(4);return u(m.buyItemFromShop(s,a))}),b(16,Vi,2,0,"span",97)(17,ji,2,0,"span",97),i()()()}if(r&2){let e=t.$implicit,n=d(4);y("grade-legendary",e.grade==="\uC2E0\uD654"||e.grade==="\uC804\uC124")("grade-rare",e.grade==="\uD76C\uADC0")("grade-uncommon",e.grade==="\uACE0\uAE09"),l(3),h(e.name),l(2),M("",e.price||n.calculateItemPriceByGrade(e.grade),"G"),l(2),h(e.description),l(),p("ngIf",e.stats),l(3),h(e.type),l(2),h(e.grade),l(2),y("insufficient-gold",n.gold<(e.price||n.calculateItemPriceByGrade(e.grade))),l(),p("ngIf",n.gold>=(e.price||n.calculateItemPriceByGrade(e.grade))),l(),p("ngIf",n.gold<(e.price||n.calculateItemPriceByGrade(e.grade)))}}function Wi(r,t){if(r&1&&(o(0,"div",124)(1,"p",125),c(2,"AI\uAC00 \uC0DD\uC131\uD55C \uC544\uC774\uD15C\uC744 \uACE8\uB4DC\uB85C \uAD6C\uB9E4\uD558\uC138\uC694"),i(),o(3,"div",177),b(4,Hi,18,16,"div",178),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.savedItems)}}function Yi(r,t){if(r&1){let e=v();o(0,"div",173)(1,"div",174),f("click",function(){_(e);let a=d(2);return u(a.toggleShop())}),o(2,"div",119)(3,"span",120),c(4),i(),o(5,"h3"),c(6,"\u{1F6D2} AI \uC544\uC774\uD15C \uC0C1\uC810"),i(),o(7,"span",175),c(8),i(),o(9,"span",176),c(10),i()(),o(11,"button",122),f("click",function(a){return _(e),d(2).toggleShop(),u(a.stopPropagation())}),c(12),i()(),b(13,Wi,5,1,"div",123),i()}if(r&2){let e=d(2);l(4),h(e.isShopExpanded?"\u25BC":"\u25B6"),l(4),h(e.savedItems.length),l(2),M("\u{1F4B0} ",e.gold,"G"),l(2),M(" ",e.isShopExpanded?"\uC811\uAE30":"\uD3BC\uCE58\uAE30"," "),l(),p("ngIf",e.isShopExpanded)}}function Ui(r,t){if(r&1){let e=v();o(0,"div",36),F(1,"async"),b(2,ei,8,1,"div",37),F(3,"async"),o(4,"div",38)(5,"div",39)(6,"div",40)(7,"div",41)(8,"h2"),c(9,"\u{1F3F0} \uD14D\uC2A4\uD2B8\uB358\uC804"),i(),o(10,"p",42),c(11,"\uB2F9\uC2E0\uC758 \uC120\uD0DD\uC774 \uB9CC\uB4E4\uC5B4\uAC00\uB294 \uC774\uC57C\uAE30"),i()(),o(12,"div",43),b(13,ti,3,1,"div",44),o(14,"button",45),f("click",function(){_(e);let a=d();return u(a.logout())}),c(15," \u{1F6AA} \uB85C\uADF8\uC544\uC6C3 "),i()()(),o(16,"div",46)(17,"div",47),f("click",function(){_(e);let a=d();return u(a.scrollToNovels())}),o(18,"div",48),c(19,"\u{1F3AE}"),i(),o(20,"h3"),c(21,"\uC0C8\uB85C\uC6B4 \uBAA8\uD5D8"),i(),o(22,"p"),c(23,"\uB2E4\uC591\uD55C \uC7A5\uB974\uC758 \uC18C\uC124 \uC120\uD0DD"),i(),o(24,"div",49),c(25),i()(),o(26,"div",50),f("click",function(){_(e);let a=d();return u(a.navigateToWuxiaGame())}),o(27,"div",48),c(28,"\u2694\uFE0F"),i(),o(29,"h3"),c(30,"\uBB35\uD5A5\uC9C0\uC5F0 (\u58A8\u9999\u4E4B\u7DE3)"),i(),o(31,"p"),c(32,"\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uBB34\uD611 RPG"),i(),o(33,"div",51),c(34,"\uBB34\uD611"),i()(),o(35,"div",52),f("click",function(){_(e);let a=d();return u(a.openCharacterCreator())}),o(36,"div",48),c(37,"\u{1F3AD}"),i(),o(38,"h3"),c(39,"AI \uCE90\uB9AD\uD130 \uC0DD\uC131"),i(),o(40,"p"),c(41,"Loworld AI\uB85C \uCE90\uB9AD\uD130 \uB9CC\uB4E4\uAE30"),i(),o(42,"div",53),c(43,"AI"),i()(),o(44,"div",52),f("click",function(){_(e);let a=d();return u(a.openScenarioCreator())}),o(45,"div",48),c(46,"\u{1F3AC}"),i(),o(47,"h3"),c(48,"AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131"),i(),o(49,"p"),c(50,"Loworld AI\uB85C \uC0C1\uD669 \uB9CC\uB4E4\uAE30"),i(),o(51,"div",53),c(52,"AI"),i()(),o(53,"div",52),f("click",function(){_(e);let a=d();return u(a.openItemCreator())}),o(54,"div",48),c(55,"\u{1F48E}"),i(),o(56,"h3"),c(57,"AI \uC544\uC774\uD15C \uC0DD\uC131"),i(),o(58,"p"),c(59,"Loworld AI\uB85C \uBB34\uAE30/\uC544\uC774\uD15C \uB9CC\uB4E4\uAE30"),i(),o(60,"div",53),c(61,"AI"),i()(),o(62,"div",54),f("click",function(){_(e);let a=d();return u(a.toggleStoryCreatorPanel())}),o(63,"div",48),c(64,"\u2728"),i(),o(65,"h3"),c(66,"\uC2A4\uD1A0\uB9AC \uC0DD\uC131"),i(),o(67,"p"),c(68,"\uC800\uC7A5\uB41C \uCF58\uD150\uCE20\uB85C \uC0C8 \uC774\uC57C\uAE30 \uB9CC\uB4E4\uAE30"),i(),o(69,"div",55),c(70,"NEW"),i()(),o(71,"div",52),f("click",function(){_(e);let a=d();return u(a.autoGenerateStoryElements())}),o(72,"div",48),c(73,"\u{1F3A8}"),i(),o(74,"h3"),c(75,"\uC2A4\uD1A0\uB9AC \uC694\uC18C \uC790\uB3D9 \uC0DD\uC131"),i(),o(76,"p"),c(77,"\uD544\uC694\uD55C \uC2DC\uB098\uB9AC\uC624/\uCE90\uB9AD\uD130/\uC544\uC774\uD15C \uD55C\uBC88\uC5D0 \uC0DD\uC131"),i(),o(78,"div",53),c(79,"AI"),i()(),o(80,"div",56),f("click",function(){_(e);let a=d();return u(a.checkStoryElementStatus())}),o(81,"div",48),c(82,"\u{1F4CA}"),i(),o(83,"h3"),c(84,"\uC694\uC18C \uD604\uD669 \uD655\uC778"),i(),o(85,"p"),c(86,"\uD604\uC7AC \uBCF4\uC720\uD55C \uC2A4\uD1A0\uB9AC \uC694\uC18C \uD655\uC778"),i()()(),b(87,ni,5,1,"div",57)(88,_i,54,16,"div",58)(89,fi,12,4,"div",59)(90,vi,12,4,"div",60)(91,Si,12,4,"div",61)(92,Ni,12,4,"div",62)(93,Yi,14,5,"div",63),i()()()}if(r&2){let e=d();y("mobile",L(1,12,e.responsiveService.isMobile$)),l(2),p("ngIf",L(3,14,e.responsiveService.isMobile$)),l(11),p("ngIf",e.getCurrentUsername()),l(12),M("",e.novelTemplates.length,"\uAC1C"),l(62),p("ngIf",e.isGeneratingElements),l(),p("ngIf",e.showStoryCreatorPanel),l(),p("ngIf",e.savedStories.length>0),l(),p("ngIf",e.savedCharacters.length>0),l(),p("ngIf",e.savedScenarios.length>0),l(),p("ngIf",e.savedItems.length>0),l(),p("ngIf",e.savedItems.length>0)}}function Ki(r,t){if(r&1){let e=v();o(0,"div",207),f("click",function(){_(e);let a=d(2);return u(a.expandLeftPanel())}),o(1,"div",208),c(2,"\u{1F4DA}"),i(),o(3,"div",209),c(4,"\uBA54\uB274"),i()()}}function Xi(r,t){if(r&1){let e=v();o(0,"div",210)(1,"div",211)(2,"h3"),c(3,"\u{1F3AE} \uAC8C\uC784 \uBA54\uB274"),i(),o(4,"button",79),f("click",function(){_(e);let a=d(2);return u(a.closeLeftPanel())}),c(5,"\xD7"),i()(),o(6,"div",212)(7,"button",213),f("click",function(){_(e);let a=d(2);return u(a.saveGame())}),c(8,"\u{1F4BE} \uAC8C\uC784 \uC800\uC7A5"),i(),o(9,"button",213),f("click",function(){_(e);let a=d(2);return u(a.loadGame())}),c(10,"\u{1F4C2} \uAC8C\uC784 \uBD88\uB7EC\uC624\uAE30"),i(),o(11,"button",213),f("click",function(){_(e);let a=d(2);return u(a.toggleCharacterPanel())}),c(12,"\u{1F464} \uCE90\uB9AD\uD130 \uC815\uBCF4"),i(),o(13,"button",213),f("click",function(){_(e);let a=d(2);return u(a.openCharacterCreator())}),c(14,"\u{1F3AD} AI \uCE90\uB9AD\uD130 \uC0DD\uC131"),i(),o(15,"button",213),f("click",function(){_(e);let a=d(2);return u(a.toggleInventoryPanel())}),c(16),i(),o(17,"button",213),f("click",function(){_(e);let a=d(2);return u(a.toggleShopPanel())}),c(18,"\u{1F6D2} \uC0C1\uC810"),i(),o(19,"button",213),f("click",function(){_(e);let a=d(2);return u(a.startBattle())}),c(20,"\u2694\uFE0F \uC804\uD22C\uD558\uAE30"),i(),S(21,"div",214),o(22,"div",215),c(23,"\u{1F3B2} \uC544\uC774\uD15C \uAD00\uB9AC"),i(),o(24,"button",216),f("click",function(){_(e);let a=d(2);return u(a.generateRandomItems())}),c(25,"\u2728 \uB79C\uB364 \uC544\uC774\uD15C \uC0DD\uC131"),i(),o(26,"button",217),f("click",function(){_(e);let a=d(2);return u(a.resetInventory())}),c(27,"\u{1F504} \uC778\uBCA4\uD1A0\uB9AC \uCD08\uAE30\uD654"),i(),S(28,"div",214),o(29,"div",215),c(30,"\u2699\uFE0F \uAC1C\uBC1C\uC790 \uB3C4\uAD6C"),i(),o(31,"button",213),f("click",function(){_(e);let a=d(2);return u(a.debugInventory())}),c(32,"\u{1F50D} \uC778\uBCA4\uD1A0\uB9AC \uB514\uBC84\uADF8"),i(),o(33,"button",218),f("click",function(){_(e);let a=d(2);return u(a.resetGameData())}),c(34,"\u{1F5D1}\uFE0F \uAC8C\uC784 \uB370\uC774\uD130 \uCD08\uAE30\uD654"),i()()()}if(r&2){let e=d(2);l(16),M("\u{1F392} \uC778\uBCA4\uD1A0\uB9AC (",e.inventory.length,")")}}function Qi(r,t){if(r&1){let e=v();o(0,"div",219)(1,"button",220),f("click",function(){_(e);let a=d(2);return u(a.toggleCharacterPanel())}),W(),o(2,"svg",221),S(3,"path",222)(4,"circle",223),i(),Z(),o(5,"span"),c(6,"\uCE90\uB9AD\uD130"),i()(),o(7,"button",224),f("click",function(){_(e);let a=d(2);return u(a.toggleInventoryPanel())}),W(),o(8,"svg",221),S(9,"path",225)(10,"polyline",226)(11,"line",227),i(),Z(),o(12,"span"),c(13),i()(),o(14,"button",228),f("click",function(){_(e);let a=d(2);return u(a.openDungeonDialog())}),W(),o(15,"svg",221),S(16,"rect",229)(17,"line",230)(18,"line",231)(19,"line",232)(20,"line",233),i(),Z(),o(21,"span"),c(22,"\uB358\uC804"),i()(),o(23,"button",234),f("click",function(){_(e);let a=d(2);return u(a.toggleWuxiaPanel())}),W(),o(24,"svg",221),S(25,"circle",235)(26,"path",236),i(),Z(),o(27,"span"),c(28,"\uC218\uB828"),i()(),o(29,"button",237),f("click",function(){_(e);let a=d(2);return u(a.toggleAdvancedFlowPanel())}),W(),o(30,"svg",221),S(31,"circle",238)(32,"circle",239)(33,"circle",240)(34,"line",241)(35,"line",242),i(),Z(),o(36,"span"),c(37,"\uD50C\uB85C\uC6B0"),i()(),o(38,"button",243),f("click",function(){_(e);let a=d(2);return u(a.toggleRightPanel())}),W(),o(39,"svg",221),S(40,"line",244)(41,"line",245)(42,"line",246),i()(),Z(),o(43,"button",247),f("click",function(){_(e);let a=d(2);return u(a.logout())}),W(),o(44,"svg",221),S(45,"path",248)(46,"polyline",249)(47,"line",250),i()()()}if(r&2){let e=d(2);l(),y("active",e.showCharacterPanel),l(6),y("active",e.showInventoryPanel),l(6),M("\uC778\uBCA4\uD1A0\uB9AC (",e.inventory.length,")"),l(10),y("active",e.showWuxiaPanel)}}function Ji(r,t){if(r&1&&(o(0,"span",256),c(1),i()),r&2){let e=d(3);l(),h(e.inventory.length)}}function Zi(r,t){if(r&1){let e=v();o(0,"div",251)(1,"button",252),f("click",function(){_(e);let a=d(2);return u(a.toggleCharacterPanel())}),W(),o(2,"svg",191),S(3,"path",222)(4,"circle",223),i()(),Z(),o(5,"button",224),f("click",function(){_(e);let a=d(2);return u(a.toggleInventoryPanel())}),W(),o(6,"svg",191),S(7,"path",225)(8,"polyline",226)(9,"line",227),i(),b(10,Ji,2,1,"span",253),i(),Z(),o(11,"button",254),f("click",function(){_(e);let a=d(2);return u(a.openDungeonDialog())}),W(),o(12,"svg",255),S(13,"rect",229)(14,"line",230)(15,"line",231)(16,"line",232)(17,"line",233),i()(),Z(),o(18,"button",243),f("click",function(){_(e);let a=d(2);return u(a.toggleRightPanel())}),W(),o(19,"svg",191),S(20,"line",244)(21,"line",245)(22,"line",246),i()()()}if(r&2){let e=d(2);l(),y("active",e.showCharacterPanel),l(4),y("active",e.showInventoryPanel),l(5),p("ngIf",e.inventory.length>0)}}function ea(r,t){if(r&1&&(o(0,"p"),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function ta(r,t){if(r&1&&(o(0,"div"),b(1,ea,2,1,"p",112),i()),r&2){let e=d().$implicit;l(),p("ngForOf",e.lines)}}function na(r,t){if(r&1&&(o(0,"div"),c(1),i()),r&2){let e=d().$implicit;l(),M("\u2B50 ",e.choiceText)}}function oa(r,t){if(r&1&&(o(0,"div",257),b(1,ta,2,1,"div",97)(2,na,2,1,"div",97),i()),r&2){let e=t.$implicit;l(),p("ngIf",e.type==="story"),l(),p("ngIf",e.type==="choice")}}function ia(r,t){if(r&1&&(o(0,"p",283),c(1),i()),r&2){let e=d(3);l(),M(" ",e.battleTurn==="player"?"\uB2F9\uC2E0\uC758 \uCC28\uB840\uC785\uB2C8\uB2E4.":"\uC801\uC774 \uD589\uB3D9\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4..."," ")}}function aa(r,t){if(r&1&&(o(0,"div",267)(1,"span",268),c(2,"\uB0B4\uB825"),i(),o(3,"div",269)(4,"div",270),S(5,"div",284),i(),o(6,"span",272),c(7),i()()()),r&2){let e=d(3);l(5),q("width",e.playerInternalPower.current/e.playerInternalPower.max*100,"%"),l(2),E("",e.playerInternalPower.current,"/",e.playerInternalPower.max)}}function ra(r,t){if(r&1&&(o(0,"div",285)(1,"div",264)(2,"h4"),c(3),i()(),o(4,"div",266)(5,"div",267)(6,"span",268),c(7,"\uCCB4\uB825"),i(),o(8,"div",269)(9,"div",270),S(10,"div",286),i(),o(11,"span",272),c(12),i()()(),o(13,"div",267)(14,"span",268),c(15,"\uACF5\uACA9"),i(),o(16,"span",276),c(17),i(),o(18,"span",277),c(19,"|"),i(),o(20,"span",268),c(21,"\uBC29\uC5B4"),i(),o(22,"span",276),c(23),i()()()()),r&2){let e=d(3);y("active-turn",e.battleTurn==="enemy"),l(3),h(e.battleEnemy.name),l(7),q("width",e.battleEnemy.hp/e.battleEnemy.maxHp*100,"%"),y("low",e.battleEnemy.hp/e.battleEnemy.maxHp<.3),l(2),E("",e.battleEnemy.hp,"/",e.battleEnemy.maxHp),l(5),h(e.battleEnemy.attack),l(6),h(e.battleEnemy.defense)}}function ca(r,t){if(r&1&&(o(0,"div",287),c(1),i()),r&2){let e=t.$implicit,n=t.index;q("animation-delay",n*50,"ms"),y("damage",e.includes("\uD53C\uD574"))("heal",e.includes("\uD68C\uBCF5"))("critical",e.includes("\uCE58\uBA85\uD0C0")||e.includes("\uD68C\uC2EC"))("combo",e.includes("\uC5F0\uACC4")),l(),M(" ",e," ")}}function la(r,t){if(r&1&&(o(0,"div",258)(1,"div",259)(2,"div",260)(3,"h3"),c(4,"\u2014 \uC804\uD22C \u2014"),i(),b(5,ia,2,1,"p",261),i(),o(6,"div",262)(7,"div",263)(8,"div",264)(9,"h4"),c(10),i(),o(11,"span",265),c(12),i()(),o(13,"div",266)(14,"div",267)(15,"span",268),c(16,"\uCCB4\uB825"),i(),o(17,"div",269)(18,"div",270),S(19,"div",271),i(),o(20,"span",272),c(21),i()()(),o(22,"div",267)(23,"span",268),c(24,"\uB9C8\uB825"),i(),o(25,"div",269)(26,"div",270),S(27,"div",273),i(),o(28,"span",272),c(29),i()()(),b(30,aa,8,4,"div",274),o(31,"div",275)(32,"span",268),c(33,"\uACF5\uACA9"),i(),o(34,"span",276),c(35),i(),o(36,"span",277),c(37,"|"),i(),o(38,"span",268),c(39,"\uBC29\uC5B4"),i(),o(40,"span",276),c(41),i()()()(),o(42,"div",278),c(43,"VS"),i(),b(44,ra,24,11,"div",279),i()(),o(45,"div",280,0)(47,"div",281),b(48,ca,2,11,"div",282),i()()()),r&2){let e=d(2);l(5),p("ngIf",!e.battleEnded),l(2),y("active-turn",e.battleTurn==="player"),l(3),h(e.playerCharacter.name),l(2),M("Lv.",e.playerCharacter.level),l(7),q("width",e.playerCharacter.hp/e.playerCharacter.maxHp*100,"%"),y("low",e.playerCharacter.hp/e.playerCharacter.maxHp<.3),l(2),E("",e.playerCharacter.hp,"/",e.playerCharacter.maxHp),l(6),q("width",e.playerCharacter.mp/e.playerCharacter.maxMp*100,"%"),l(2),E("",e.playerCharacter.mp,"/",e.playerCharacter.maxMp),l(),p("ngIf",e.learnedMartialSkills.length>0),l(5),h(e.playerCharacter.attack),l(6),h(e.playerCharacter.defense),l(3),p("ngIf",e.battleEnemy),l(4),p("ngForOf",e.battleLog.slice(-8))}}function sa(r,t){if(r&1){let e=v();o(0,"div",290)(1,"button",291),f("click",function(){let a=_(e).index,s=d(3);return u(s.selectChoice(a))}),o(2,"span",292),c(3),i(),o(4,"span",293),c(5),i()(),o(6,"button",294),f("click",function(){let a=_(e).index,s=d(3);return u(s.openScenarioLinkPanel(a))}),c(7," \u{1F517} "),i()()}if(r&2){let e=t.$implicit,n=t.index;l(3),h(n+1),l(2),h(e)}}function da(r,t){if(r&1&&(o(0,"div")(1,"h3"),c(2,"\uC5B4\uB5BB\uAC8C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"),i(),o(3,"div",288),b(4,sa,8,2,"div",289),i()()),r&2){let e=d(2);l(4),p("ngForOf",e.choices)}}function ga(r,t){if(r&1){let e=v();o(0,"div",299)(1,"button",296),f("click",function(){let a=_(e).$implicit,s=d(3);return u(s.battleManager.useMartialSkillInBattle(a))}),o(2,"span",292),c(3),i(),o(4,"span",293),c(5),o(6,"span",297),c(7),i(),o(8,"span",300),c(9),i()()()()}if(r&2){let e=t.$implicit,n=t.index,a=d(3);l(),p("disabled",a.playerInternalPower.current<e.internalPowerCost),l(2),h(n+5),l(2),E(" ",e.name," (",e.chineseName,") "),l(2),M("\uB0B4\uACF5 ",e.internalPowerCost),l(),y("grade-\uC808\uD559",e.grade==="\uC808\uD559"),l(),h(e.grade)}}function pa(r,t){if(r&1){let e=v();o(0,"div")(1,"h3"),c(2,"\uC5B4\uB5BB\uAC8C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"),i(),o(3,"div",295)(4,"div",290)(5,"button",291),f("click",function(){_(e);let a=d(2);return u(a.battleManager.playerAttack())}),o(6,"span",292),c(7,"1"),i(),o(8,"span",293),c(9,"\uAE30\uBCF8 \uACF5\uACA9"),i()()(),o(10,"div",290)(11,"button",296),f("click",function(){_(e);let a=d(2);return u(a.battleManager.playerSkill())}),o(12,"span",292),c(13,"2"),i(),o(14,"span",293),c(15,"\uB9C8\uBC95 \uACF5\uACA9 "),o(16,"span",297),c(17,"(MP 10)"),i()()()(),o(18,"div",290)(19,"button",291),f("click",function(){_(e);let a=d(2);return u(a.battleManager.playerDefend())}),o(20,"span",292),c(21,"3"),i(),o(22,"span",293),c(23,"\uBC29\uC5B4 \uC790\uC138"),i()()(),o(24,"div",290)(25,"button",296),f("click",function(){_(e);let a=d(2);return u(a.battleManager.usePotion())}),o(26,"span",292),c(27,"4"),i(),o(28,"span",293),c(29,"\uD68C\uBCF5 \uD3EC\uC158 \uC0AC\uC6A9"),i()()(),b(30,ga,10,8,"div",298),i()()}if(r&2){let e=d(2);l(11),p("disabled",e.playerCharacter.mp<10),l(14),p("disabled",!e.battleManager.hasPotion()),l(5),p("ngForOf",e.learnedMartialSkills)}}function ma(r,t){if(r&1){let e=v();o(0,"div",207),f("click",function(){_(e);let a=d(2);return u(a.expandRightPanel())}),o(1,"div",208),c(2,"\u{1F4CA}"),i(),o(3,"div",209),c(4,"\uC815\uBCF4"),i()()}}function _a(r,t){if(r&1){let e=v();o(0,"div",210)(1,"div",211)(2,"h3"),c(3,"\u{1F4CA} \uAC8C\uC784 \uC815\uBCF4"),i(),o(4,"button",79),f("click",function(){_(e);let a=d(2);return u(a.closeRightPanel())}),c(5,"\xD7"),i()(),o(6,"div",212)(7,"div"),c(8),i(),o(9,"div"),c(10),i(),o(11,"div"),c(12),i()()()}if(r&2){let e=d(2);l(8),M("\uC120\uD0DD \uD69F\uC218: ",e.currentPath.length),l(2),M("\uC2A4\uD1A0\uB9AC \uBE14\uB85D: ",e.storyBlocks.length),l(2),E("\uACBD\uD5D8\uCE58: ",e.playerCharacter.exp,"/",e.playerCharacter.maxExp)}}function ua(r,t){if(r&1){let e=v();o(0,"div",183),F(1,"async"),F(2,"async"),F(3,"async"),o(4,"div",184),F(5,"async"),o(6,"div",185),b(7,Ki,5,0,"div",186)(8,Xi,35,1,"div",187),i()(),o(9,"div",188),F(10,"async"),o(11,"div",189),F(12,"async"),o(13,"button",190),f("click",function(){_(e);let a=d();return u(a.toggleLeftPanel())}),W(),o(14,"svg",191),S(15,"line",192)(16,"line",193)(17,"line",194),i()(),Z(),o(18,"button",195),f("click",function(){_(e);let a=d();return u(a.backToNovelSelection())}),W(),o(19,"svg",191),S(20,"path",196)(21,"polyline",197),i(),Z(),o(22,"span"),c(23,"\uD648"),i()(),b(24,Qi,48,7,"div",198),F(25,"async"),b(26,Zi,23,5,"div",199),F(27,"async"),i(),o(28,"div",200)(29,"div",201)(30,"h2"),c(31,"\uC81C1\uC7A5 - \uC6B4\uBA85\uC758 \uC2DC\uC791"),i()(),o(32,"div",202),b(33,oa,3,2,"div",203),i(),b(34,la,49,20,"div",204)(35,da,5,1,"div",97)(36,pa,31,3,"div",97),i()(),o(37,"div",205),F(38,"async"),o(39,"div",206),b(40,ma,5,0,"div",186)(41,_a,13,4,"div",187),i()()()}if(r&2){let e=d();y("mobile",L(1,28,e.responsiveService.isMobile$))("tablet",L(2,30,e.responsiveService.isTablet$))("desktop",L(3,32,e.responsiveService.isDesktop$)),l(4),y("collapsed",e.isLeftPanelCollapsed)("mobile",L(5,34,e.responsiveService.isMobile$)),l(3),p("ngIf",e.isLeftPanelCollapsed),l(),p("ngIf",!e.isLeftPanelCollapsed),l(),y("mobile",L(10,36,e.responsiveService.isMobile$)),l(2),y("mobile",L(12,38,e.responsiveService.isMobile$)),l(13),p("ngIf",L(25,40,e.responsiveService.isDesktop$)),l(2),p("ngIf",!L(27,42,e.responsiveService.isDesktop$)),l(7),p("ngForOf",e.storyBlocks),l(),p("ngIf",e.inBattle),l(),p("ngIf",e.choices.length>0&&!e.inBattle),l(),p("ngIf",e.inBattle&&!e.battleEnded&&e.battleTurn==="player"),l(),y("collapsed",e.isRightPanelCollapsed)("mobile",L(38,44,e.responsiveService.isMobile$)),l(3),p("ngIf",e.isRightPanelCollapsed),l(),p("ngIf",!e.isRightPanelCollapsed)}}function Ca(r,t){if(r&1){let e=v();o(0,"div",301),F(1,"async"),f("click",function(){_(e);let a=d();return u(a.closeAllPanels())}),i()}if(r&2){let e=d();y("mobile",L(1,2,e.responsiveService.isMobile$))}}function fa(r,t){if(r&1&&(o(0,"div",343)(1,"div",344),c(2),i(),o(3,"div",345),c(4),i()()),r&2){let e=t.$implicit;l(2),h(e.name),l(2),E("Lv.",e.level,"/",e.maxLevel)}}function ba(r,t){if(r&1&&(o(0,"div",340)(1,"h4",325),c(2,"\u2728 \uBCF4\uC720 \uC2A4\uD0AC"),i(),o(3,"div",341),b(4,fa,5,3,"div",342),i()()),r&2){let e=d(2);l(4),p("ngForOf",e.playerCharacter.skills)}}function ha(r,t){if(r&1){let e=v();o(0,"div",302),F(1,"async"),o(2,"div",211)(3,"h3"),c(4,"\u{1F4CA} \uCE90\uB9AD\uD130 \uC815\uBCF4"),i(),o(5,"button",79),f("click",function(){_(e);let a=d();return u(a.showCharacterPanel=!1)}),c(6,"\xD7"),i()(),o(7,"div",212)(8,"div",303)(9,"div",304)(10,"div",305)(11,"span",306),c(12,"\u{1F464}"),i()(),o(13,"div",307)(14,"h2"),c(15),i(),o(16,"div",308),c(17),i()()()(),o(18,"div",309)(19,"div",310)(20,"span"),c(21,"\uACBD\uD5D8\uCE58"),i(),o(22,"span",311),c(23),i()(),o(24,"div",312),S(25,"div",313),i(),o(26,"div",314),c(27),i()(),o(28,"div",315)(29,"div",316)(30,"div",317)(31,"span",318),c(32,"\u2764\uFE0F"),i(),o(33,"span",319),c(34,"HP"),i(),o(35,"span",320),c(36),i()(),o(37,"div",321),S(38,"div",313),i()(),o(39,"div",322)(40,"div",317)(41,"span",318),c(42,"\u{1F499}"),i(),o(43,"span",319),c(44,"MP"),i(),o(45,"span",320),c(46),i()(),o(47,"div",323),S(48,"div",313),i()()(),o(49,"div",324)(50,"h4",325),c(51,"\u2694\uFE0F \uAE30\uBCF8 \uB2A5\uB825\uCE58"),i(),o(52,"div",326)(53,"div",327)(54,"div",328),c(55,"\u2694\uFE0F"),i(),o(56,"div",329)(57,"div",330),c(58,"\uACF5\uACA9\uB825"),i(),o(59,"div",272),c(60),i()()(),o(61,"div",327)(62,"div",328),c(63,"\u{1F6E1}\uFE0F"),i(),o(64,"div",329)(65,"div",330),c(66,"\uBC29\uC5B4\uB825"),i(),o(67,"div",272),c(68),i()()(),o(69,"div",327)(70,"div",328),c(71,"\u26A1"),i(),o(72,"div",329)(73,"div",330),c(74,"\uBBFC\uCCA9"),i(),o(75,"div",272),c(76),i()()(),o(77,"div",327)(78,"div",328),c(79,"\u{1F4AA}"),i(),o(80,"div",329)(81,"div",330),c(82,"\uD798"),i(),o(83,"div",272),c(84),i()()(),o(85,"div",327)(86,"div",328),c(87,"\u{1F9E0}"),i(),o(88,"div",329)(89,"div",330),c(90,"\uC9C0\uB2A5"),i(),o(91,"div",272),c(92),i()()(),o(93,"div",327)(94,"div",328),c(95,"\u2B50"),i(),o(96,"div",329)(97,"div",330),c(98,"\uC2A4\uD0AC \uD3EC\uC778\uD2B8"),i(),o(99,"div",272),c(100),i()()()()(),o(101,"div",331)(102,"h4",325),c(103,"\u{1F4B0} \uBCF4\uC720 \uC7AC\uD654"),i(),o(104,"div",332)(105,"div",333)(106,"span",334),c(107,"\u{1F4B0}"),i(),o(108,"span",335),c(109),F(110,"number"),i()(),o(111,"div",336)(112,"span",334),c(113,"\u{1F48E}"),i(),o(114,"span",335),c(115),F(116,"number"),i()(),o(117,"div",337)(118,"span",334),c(119,"\u{1F52E}"),i(),o(120,"span",335),c(121),F(122,"number"),i()(),o(123,"div",338)(124,"span",334),c(125,"\u{1F3AB}"),i(),o(126,"span",335),c(127),F(128,"number"),i()()()(),b(129,ba,5,1,"div",339),i()()}if(r&2){let e=d();y("mobile",L(1,32,e.responsiveService.isMobile$)),l(15),h(e.playerCharacter.name),l(2),M("Lv.",e.playerCharacter.level),l(6),E("",e.playerCharacter.exp," / ",e.playerCharacter.maxExp),l(2),q("width",e.playerCharacter.exp/e.playerCharacter.maxExp*100,"%"),l(2),M(" ",(e.playerCharacter.exp/e.playerCharacter.maxExp*100).toFixed(1),"% "),l(9),E("",e.playerCharacter.hp," / ",e.playerCharacter.maxHp),l(2),q("width",e.playerCharacter.hp/e.playerCharacter.maxHp*100,"%"),y("low",e.playerCharacter.hp/e.playerCharacter.maxHp<.3)("medium",e.playerCharacter.hp/e.playerCharacter.maxHp>=.3&&e.playerCharacter.hp/e.playerCharacter.maxHp<.7),l(8),E("",e.playerCharacter.mp," / ",e.playerCharacter.maxMp),l(2),q("width",e.playerCharacter.mp/e.playerCharacter.maxMp*100,"%"),l(12),h(e.playerCharacter.attack),l(8),h(e.playerCharacter.defense),l(8),h(e.playerCharacter.agility),l(8),h(e.playerCharacter.strength),l(8),h(e.playerCharacter.intelligence),l(8),h(e.playerCharacter.skillPoints),l(9),h(L(110,34,e.playerCharacter.gold)),l(6),h(L(116,36,e.playerCharacter.gem)),l(6),h(L(122,38,e.playerCharacter.crystal)),l(6),h(L(128,40,e.playerCharacter.ticket)),l(2),p("ngIf",e.playerCharacter.skills&&e.playerCharacter.skills.length>0)}}function Pa(r,t){if(r&1){let e=v();o(0,"div",386)(1,"div",387)(2,"div",388),c(3),i(),o(4,"button",389),f("mousedown",function(a){return _(e),u(a.stopPropagation())})("click",function(a){return _(e),d(3).unequipItem("weapon"),a.stopPropagation(),u(a.preventDefault())}),c(5,"\u2715"),i()()()}if(r&2){let e=t.ngIf;p("cdkDragData",K(2,$o,e)),l(3),h(e.name||e.baseType)}}function Ma(r,t){r&1&&(o(0,"div",390),c(1,"\uBB34\uAE30"),i())}function xa(r,t){if(r&1){let e=v();o(0,"div",386)(1,"div",387)(2,"div",388),c(3),i(),o(4,"button",389),f("mousedown",function(a){return _(e),u(a.stopPropagation())})("click",function(a){return _(e),d(3).unequipItem("armor"),a.stopPropagation(),u(a.preventDefault())}),c(5,"\u2715"),i()()()}if(r&2){let e=t.ngIf;p("cdkDragData",K(2,Vo,e)),l(3),h(e.name||e.baseType)}}function va(r,t){r&1&&(o(0,"div",390),c(1,"\uBC29\uC5B4\uAD6C"),i())}function Oa(r,t){if(r&1){let e=v();o(0,"div",386)(1,"div",387)(2,"div",388),c(3),i(),o(4,"button",389),f("mousedown",function(a){return _(e),u(a.stopPropagation())})("click",function(a){return _(e),d(3).unequipItem("helmet"),a.stopPropagation(),u(a.preventDefault())}),c(5,"\u2715"),i()()()}if(r&2){let e=t.ngIf;p("cdkDragData",K(2,jo,e)),l(3),h(e.name||e.baseType)}}function ya(r,t){r&1&&(o(0,"div",390),c(1,"\uD22C\uAD6C"),i())}function wa(r,t){if(r&1){let e=v();o(0,"div",386)(1,"div",387)(2,"div",388),c(3),i(),o(4,"button",389),f("mousedown",function(a){return _(e),u(a.stopPropagation())})("click",function(a){return _(e),d(3).unequipItem("amulet"),a.stopPropagation(),u(a.preventDefault())}),c(5,"\u2715"),i()()()}if(r&2){let e=t.ngIf;p("cdkDragData",K(2,Ho,e)),l(3),h(e.name||e.baseType)}}function ka(r,t){r&1&&(o(0,"div",390),c(1,"\uBAA9\uAC78\uC774"),i())}function Sa(r,t){if(r&1){let e=v();o(0,"div",386)(1,"div",387)(2,"div",388),c(3),i(),o(4,"button",389),f("mousedown",function(a){return _(e),u(a.stopPropagation())})("click",function(a){return _(e),d(3).unequipItem("belt"),a.stopPropagation(),u(a.preventDefault())}),c(5,"\u2715"),i()()()}if(r&2){let e=t.ngIf;p("cdkDragData",K(2,Wo,e)),l(3),h(e.name||e.baseType)}}function Da(r,t){r&1&&(o(0,"div",390),c(1,"\uD5C8\uB9AC\uB760"),i())}function Ia(r,t){if(r&1){let e=v();o(0,"div",386)(1,"div",387)(2,"div",388),c(3),i(),o(4,"button",389),f("mousedown",function(a){return _(e),u(a.stopPropagation())})("click",function(a){return _(e),d(3).unequipItem("gloves"),a.stopPropagation(),u(a.preventDefault())}),c(5,"\u2715"),i()()()}if(r&2){let e=t.ngIf;p("cdkDragData",K(2,Yo,e)),l(3),h(e.name||e.baseType)}}function Ea(r,t){r&1&&(o(0,"div",390),c(1,"\uC7A5\uAC11"),i())}function Ba(r,t){if(r&1){let e=v();o(0,"div",386)(1,"div",387)(2,"div",388),c(3),i(),o(4,"button",389),f("mousedown",function(a){return _(e),u(a.stopPropagation())})("click",function(a){return _(e),d(3).unequipItem("boots"),a.stopPropagation(),u(a.preventDefault())}),c(5,"\u2715"),i()()()}if(r&2){let e=t.ngIf;p("cdkDragData",K(2,Uo,e)),l(3),h(e.name||e.baseType)}}function Ta(r,t){r&1&&(o(0,"div",390),c(1,"\uC2E0\uBC1C"),i())}function qa(r,t){if(r&1){let e=v();o(0,"div",386)(1,"div",387)(2,"div",388),c(3),i(),o(4,"button",389),f("mousedown",function(a){return _(e),u(a.stopPropagation())})("click",function(a){return _(e),d(3).unequipItem("ring1"),a.stopPropagation(),u(a.preventDefault())}),c(5,"\u2715"),i()()()}if(r&2){let e=t.ngIf;p("cdkDragData",K(2,Ko,e)),l(3),h(e.name||e.baseType)}}function Aa(r,t){r&1&&(o(0,"div",390),c(1,"\uBC18\uC9C0"),i())}function Ga(r,t){if(r&1){let e=v();o(0,"div",386)(1,"div",387)(2,"div",388),c(3),i(),o(4,"button",389),f("mousedown",function(a){return _(e),u(a.stopPropagation())})("click",function(a){return _(e),d(3).unequipItem("ring2"),a.stopPropagation(),u(a.preventDefault())}),c(5,"\u2715"),i()()()}if(r&2){let e=t.ngIf;p("cdkDragData",K(2,Xo,e)),l(3),h(e.name||e.baseType)}}function Na(r,t){r&1&&(o(0,"div",390),c(1,"\uBC18\uC9C0"),i())}function za(r,t){if(r&1){let e=v();o(0,"button",391),f("click",function(){let a=_(e).$implicit,s=d(3);return u(s.setInventoryFilter(a.value))}),c(1),i()}if(r&2){let e=t.$implicit,n=d(3);y("active",n.inventoryFilter===e.value),l(),E(" ",e.icon," ",e.label," ")}}function Fa(r,t){if(r&1&&(o(0,"div",399),c(1),i()),r&2){let e=d().$implicit;l(),M(" \xD7",e.quantity," ")}}function La(r,t){if(r&1){let e=v();o(0,"button",400),f("click",function(a){_(e);let s=d(),m=s.$implicit,C=s.index;return d(3).quickEquipItem(m,C),u(a.stopPropagation())}),c(1," \u26A1 "),i()}r&2&&p("title","\uCC29\uC6A9")}function Ra(r,t){if(r&1&&(o(0,"div",401)(1,"div",402),c(2),i(),o(3,"div",403),c(4),i()()),r&2){let e=d().$implicit,n=d(3);l(2),h(n.getInventoryItemIcon(e)),l(2),h(n.getTruncatedName(e))}}function $a(r,t){if(r&1){let e=v();o(0,"div",392),f("click",function(a){let s=_(e),m=s.$implicit,C=s.index,P=d(3);return u(P.onInventoryCellClick(a,m,C))})("contextmenu",function(a){let s=_(e),m=s.$implicit,C=s.index,P=d(3);return u(P.onInventoryCellRightClick(a,m,C))})("dblclick",function(){let a=_(e),s=a.$implicit,m=a.index,C=d(3);return u(C.onInventoryCellDoubleClick(s,m))}),o(1,"div",393)(2,"div",394),c(3),i(),o(4,"div",395),c(5),i(),b(6,Fa,2,1,"div",396)(7,La,2,1,"button",397),F(8,"async"),i(),b(9,Ra,5,2,"div",398),i()}if(r&2){let e=t.$implicit,n=t.index,a=d(3);U("rarity-"+e.rarity),p("cdkDragData",sn(10,Qo,e,n)),l(3),h(a.getInventoryItemIcon(e)),l(),p("title",e.nameKo||e.name),l(),M(" ",a.getTruncatedName(e)," "),l(),p("ngIf",e.quantity>1),l(),p("ngIf",L(8,8,a.responsiveService.isMobile$)&&a.isEquippableItem(e))}}function Va(r,t){r&1&&(o(0,"div",404)(1,"div",393)(2,"div",405),c(3,"\u{1F4E6}"),i()()())}function ja(r,t){if(r&1){let e=v();o(0,"div",351)(1,"div",352)(2,"h4",325),c(3,"\u2694\uFE0F \uC7A5\uCC29 \uC911\uC778 \uC7A5\uBE44"),i(),o(4,"div",353)(5,"div",354)(6,"div",355),f("cdkDropListDropped",function(a){_(e);let s=d(2);return u(s.onEquipmentSlotDrop(a,"weapon"))}),o(7,"div",356),c(8,"\u2694\uFE0F"),i(),b(9,Pa,6,4,"div",357)(10,Ma,2,0,"ng-template",null,1,j),i(),o(12,"div",358),f("cdkDropListDropped",function(a){_(e);let s=d(2);return u(s.onEquipmentSlotDrop(a,"armor"))}),o(13,"div",356),c(14,"\u{1F6E1}\uFE0F"),i(),b(15,xa,6,4,"div",357)(16,va,2,0,"ng-template",null,2,j),i()(),o(18,"div",359)(19,"div",360),f("cdkDropListDropped",function(a){_(e);let s=d(2);return u(s.onEquipmentSlotDrop(a,"helmet"))}),o(20,"div",356),c(21,"\u26D1\uFE0F"),i(),b(22,Oa,6,4,"div",357)(23,ya,2,0,"ng-template",null,3,j),i(),o(25,"div",361),f("cdkDropListDropped",function(a){_(e);let s=d(2);return u(s.onEquipmentSlotDrop(a,"amulet"))}),o(26,"div",356),c(27,"\u{1F4FF}"),i(),b(28,wa,6,4,"div",357)(29,ka,2,0,"ng-template",null,4,j),i(),o(31,"div",362),f("cdkDropListDropped",function(a){_(e);let s=d(2);return u(s.onEquipmentSlotDrop(a,"belt"))}),o(32,"div",356),c(33,"\u{1F454}"),i(),b(34,Sa,6,4,"div",357)(35,Da,2,0,"ng-template",null,5,j),i()(),o(37,"div",363)(38,"div",364),f("cdkDropListDropped",function(a){_(e);let s=d(2);return u(s.onEquipmentSlotDrop(a,"gloves"))}),o(39,"div",356),c(40,"\u{1F9E4}"),i(),b(41,Ia,6,4,"div",357)(42,Ea,2,0,"ng-template",null,6,j),i(),o(44,"div",365),f("cdkDropListDropped",function(a){_(e);let s=d(2);return u(s.onEquipmentSlotDrop(a,"boots"))}),o(45,"div",356),c(46,"\u{1F462}"),i(),b(47,Ba,6,4,"div",357)(48,Ta,2,0,"ng-template",null,7,j),i()(),o(50,"div",366)(51,"div",367),f("cdkDropListDropped",function(a){_(e);let s=d(2);return u(s.onEquipmentSlotDrop(a,"ring1"))}),o(52,"div",356),c(53,"\u{1F48D}"),i(),b(54,qa,6,4,"div",357)(55,Aa,2,0,"ng-template",null,8,j),i(),o(57,"div",368),f("cdkDropListDropped",function(a){_(e);let s=d(2);return u(s.onEquipmentSlotDrop(a,"ring2"))}),o(58,"div",356),c(59,"\u{1F48D}"),i(),b(60,Ga,6,4,"div",357)(61,Na,2,0,"ng-template",null,9,j),i()()()(),o(63,"div",369)(64,"h4",325),c(65,"\u{1F392} \uBCF4\uC720 \uC544\uC774\uD15C"),i(),o(66,"div",370)(67,"div",371),b(68,za,2,4,"button",372),i(),o(69,"div",373)(70,"label"),c(71,"\uC815\uB82C:"),i(),o(72,"select",374),ge("ngModelChange",function(a){_(e);let s=d(2);return de(s.inventorySortBy,a)||(s.inventorySortBy=a),u(a)}),f("change",function(){_(e);let a=d(2);return u(a.sortInventory())}),o(73,"option",375),c(74,"\uD76C\uADC0\uB3C4\uC21C"),i(),o(75,"option",376),c(76,"\uD0C0\uC785\uC21C"),i(),o(77,"option",377),c(78,"\uC774\uB984\uC21C"),i(),o(79,"option",378),c(80,"\uCD5C\uADFC \uD68D\uB4DD\uC21C"),i()(),o(81,"button",379),f("click",function(){_(e);let a=d(2);return u(a.autoSortInventory())}),c(82," \u{1F504} \uC790\uB3D9 \uC815\uB82C "),i()()(),o(83,"div",380)(84,"div",381),f("cdkDropListDropped",function(a){_(e);let s=d(2);return u(s.onInventoryDrop(a))}),b(85,$a,10,13,"div",382)(86,Va,4,0,"div",383),i()(),o(87,"div",384)(88,"span",385),c(89),i()()()()}if(r&2){let e=R(11),n=R(17),a=R(24),s=R(30),m=R(36),C=R(43),P=R(49),x=R(56),w=R(62),g=d(2);l(6),y("has-item",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.weapon)("rarity-common",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.weapon==null?null:g.playerCharacter.equipment.weapon.rarity)==="common")("rarity-uncommon",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.weapon==null?null:g.playerCharacter.equipment.weapon.rarity)==="uncommon")("rarity-rare",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.weapon==null?null:g.playerCharacter.equipment.weapon.rarity)==="rare")("rarity-epic",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.weapon==null?null:g.playerCharacter.equipment.weapon.rarity)==="epic")("rarity-legendary",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.weapon==null?null:g.playerCharacter.equipment.weapon.rarity)==="legendary"),p("cdkDropListData",K(152,Bo,g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.weapon))("cdkDropListConnectedTo",ee(154,me)),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.weapon)("ngIfElse",e),l(3),y("has-item",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.armor)("rarity-common",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.armor==null?null:g.playerCharacter.equipment.armor.rarity)==="common")("rarity-uncommon",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.armor==null?null:g.playerCharacter.equipment.armor.rarity)==="uncommon")("rarity-rare",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.armor==null?null:g.playerCharacter.equipment.armor.rarity)==="rare")("rarity-epic",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.armor==null?null:g.playerCharacter.equipment.armor.rarity)==="epic")("rarity-legendary",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.armor==null?null:g.playerCharacter.equipment.armor.rarity)==="legendary"),p("cdkDropListData",K(155,To,g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.armor))("cdkDropListConnectedTo",ee(157,me)),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.armor)("ngIfElse",n),l(4),y("has-item",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.helmet)("rarity-common",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.helmet==null?null:g.playerCharacter.equipment.helmet.rarity)==="common")("rarity-uncommon",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.helmet==null?null:g.playerCharacter.equipment.helmet.rarity)==="uncommon")("rarity-rare",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.helmet==null?null:g.playerCharacter.equipment.helmet.rarity)==="rare")("rarity-epic",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.helmet==null?null:g.playerCharacter.equipment.helmet.rarity)==="epic")("rarity-legendary",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.helmet==null?null:g.playerCharacter.equipment.helmet.rarity)==="legendary"),p("cdkDropListData",K(158,qo,g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.helmet))("cdkDropListConnectedTo",ee(160,me)),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.helmet)("ngIfElse",a),l(3),y("has-item",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.amulet)("rarity-common",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.amulet==null?null:g.playerCharacter.equipment.amulet.rarity)==="common")("rarity-uncommon",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.amulet==null?null:g.playerCharacter.equipment.amulet.rarity)==="uncommon")("rarity-rare",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.amulet==null?null:g.playerCharacter.equipment.amulet.rarity)==="rare")("rarity-epic",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.amulet==null?null:g.playerCharacter.equipment.amulet.rarity)==="epic")("rarity-legendary",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.amulet==null?null:g.playerCharacter.equipment.amulet.rarity)==="legendary"),p("cdkDropListData",K(161,Ao,g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.amulet))("cdkDropListConnectedTo",ee(163,me)),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.amulet)("ngIfElse",s),l(3),y("has-item",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.belt)("rarity-common",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.belt==null?null:g.playerCharacter.equipment.belt.rarity)==="common")("rarity-uncommon",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.belt==null?null:g.playerCharacter.equipment.belt.rarity)==="uncommon")("rarity-rare",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.belt==null?null:g.playerCharacter.equipment.belt.rarity)==="rare")("rarity-epic",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.belt==null?null:g.playerCharacter.equipment.belt.rarity)==="epic")("rarity-legendary",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.belt==null?null:g.playerCharacter.equipment.belt.rarity)==="legendary"),p("cdkDropListData",K(164,Go,g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.belt))("cdkDropListConnectedTo",ee(166,me)),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.belt)("ngIfElse",m),l(4),y("has-item",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.gloves)("rarity-common",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.gloves==null?null:g.playerCharacter.equipment.gloves.rarity)==="common")("rarity-uncommon",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.gloves==null?null:g.playerCharacter.equipment.gloves.rarity)==="uncommon")("rarity-rare",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.gloves==null?null:g.playerCharacter.equipment.gloves.rarity)==="rare")("rarity-epic",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.gloves==null?null:g.playerCharacter.equipment.gloves.rarity)==="epic")("rarity-legendary",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.gloves==null?null:g.playerCharacter.equipment.gloves.rarity)==="legendary"),p("cdkDropListData",K(167,No,g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.gloves))("cdkDropListConnectedTo",ee(169,me)),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.gloves)("ngIfElse",C),l(3),y("has-item",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.boots)("rarity-common",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.boots==null?null:g.playerCharacter.equipment.boots.rarity)==="common")("rarity-uncommon",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.boots==null?null:g.playerCharacter.equipment.boots.rarity)==="uncommon")("rarity-rare",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.boots==null?null:g.playerCharacter.equipment.boots.rarity)==="rare")("rarity-epic",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.boots==null?null:g.playerCharacter.equipment.boots.rarity)==="epic")("rarity-legendary",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.boots==null?null:g.playerCharacter.equipment.boots.rarity)==="legendary"),p("cdkDropListData",K(170,zo,g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.boots))("cdkDropListConnectedTo",ee(172,me)),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.boots)("ngIfElse",P),l(4),y("has-item",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.ring1)("rarity-common",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.ring1==null?null:g.playerCharacter.equipment.ring1.rarity)==="common")("rarity-uncommon",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.ring1==null?null:g.playerCharacter.equipment.ring1.rarity)==="uncommon")("rarity-rare",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.ring1==null?null:g.playerCharacter.equipment.ring1.rarity)==="rare")("rarity-epic",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.ring1==null?null:g.playerCharacter.equipment.ring1.rarity)==="epic")("rarity-legendary",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.ring1==null?null:g.playerCharacter.equipment.ring1.rarity)==="legendary"),p("cdkDropListData",K(173,Fo,g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.ring1))("cdkDropListConnectedTo",ee(175,me)),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.ring1)("ngIfElse",x),l(3),y("has-item",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.ring2)("rarity-common",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.ring2==null?null:g.playerCharacter.equipment.ring2.rarity)==="common")("rarity-uncommon",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.ring2==null?null:g.playerCharacter.equipment.ring2.rarity)==="uncommon")("rarity-rare",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.ring2==null?null:g.playerCharacter.equipment.ring2.rarity)==="rare")("rarity-epic",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.ring2==null?null:g.playerCharacter.equipment.ring2.rarity)==="epic")("rarity-legendary",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.ring2==null?null:g.playerCharacter.equipment.ring2.rarity)==="legendary"),p("cdkDropListData",K(176,Lo,g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.ring2))("cdkDropListConnectedTo",ee(178,me)),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.ring2)("ngIfElse",w),l(8),p("ngForOf",g.inventoryFilterOptions),l(4),se("ngModel",g.inventorySortBy),l(12),p("cdkDropListData",g.getFilteredAndSortedInventory())("cdkDropListConnectedTo",ee(179,Ro)),l(),p("ngForOf",g.getFilteredAndSortedInventory()),l(),p("ngForOf",g.getEmptyInventorySlots()),l(3),E(" ",g.getFilteredAndSortedInventory().length," / ",g.maxInventorySize," \uC544\uC774\uD15C ")}}function Ha(r,t){if(r&1&&(o(0,"div",351)(1,"div",406)(2,"div",407)(3,"h4",325),c(4,"\u{1F4B0} \uBCF4\uC720 \uC7AC\uD654"),i(),o(5,"p",408),c(6,"\uBAA8\uD5D8\uC5D0 \uD544\uC694\uD55C \uB2E4\uC591\uD55C \uD654\uD3D0\uB97C \uAD00\uB9AC\uD558\uC138\uC694"),i()(),o(7,"div",409)(8,"div",410),S(9,"div",411),o(10,"div",412)(11,"div",413)(12,"div",414)(13,"span",415),c(14,"\u{1F4B0}"),i()(),o(15,"span",416),c(16,"\uACE8\uB4DC"),i()(),o(17,"div",417)(18,"div",418)(19,"span",419),c(20),F(21,"number"),i(),o(22,"span",420),c(23,"G"),i()(),o(24,"p",421),c(25,"\uC0C1\uC810\uC5D0\uC11C \uC544\uC774\uD15C \uAD6C\uB9E4"),i()()()(),o(26,"div",422),S(27,"div",411),o(28,"div",412)(29,"div",413)(30,"div",414)(31,"span",415),c(32,"\u{1F48E}"),i()(),o(33,"span",416),c(34,"\uBCF4\uC11D"),i()(),o(35,"div",417)(36,"div",418)(37,"span",419),c(38),F(39,"number"),i(),o(40,"span",420),c(41,"\uAC1C"),i()(),o(42,"p",421),c(43,"\uD504\uB9AC\uBBF8\uC5C4 \uC544\uC774\uD15C \uAD6C\uB9E4"),i()()()(),o(44,"div",423),S(45,"div",411),o(46,"div",412)(47,"div",413)(48,"div",414)(49,"span",415),c(50,"\u{1F52E}"),i()(),o(51,"span",416),c(52,"\uD06C\uB9AC\uC2A4\uD0C8"),i()(),o(53,"div",417)(54,"div",418)(55,"span",419),c(56),F(57,"number"),i(),o(58,"span",420),c(59,"\uAC1C"),i()(),o(60,"p",421),c(61,"\uC7A5\uBE44 \uAC15\uD654 \uC7AC\uB8CC"),i()()()(),o(62,"div",424),S(63,"div",411),o(64,"div",412)(65,"div",413)(66,"div",414)(67,"span",415),c(68,"\u{1F3AB}"),i()(),o(69,"span",416),c(70,"\uD2F0\uCF13"),i()(),o(71,"div",417)(72,"div",418)(73,"span",419),c(74),F(75,"number"),i(),o(76,"span",420),c(77,"\uC7A5"),i()(),o(78,"p",421),c(79,"\uB358\uC804 & \uC774\uBCA4\uD2B8 \uC785\uC7A5"),i()()()()(),o(80,"div",425)(81,"h5",426),c(82,"\u{1F4A1} \uC7AC\uD654 \uD68D\uB4DD \uBC29\uBC95"),i(),o(83,"div",427)(84,"div",428)(85,"span",429),c(86,"\u{1F4D6}"),i(),o(87,"span",430),c(88,"\uC2A4\uD1A0\uB9AC \uC9C4\uD589\uC73C\uB85C \uACE8\uB4DC \uD68D\uB4DD"),i()(),o(89,"div",428)(90,"span",429),c(91,"\u2694\uFE0F"),i(),o(92,"span",430),c(93,"\uC804\uD22C \uC2B9\uB9AC \uC2DC \uBCF4\uC0C1 \uD68D\uB4DD"),i()(),o(94,"div",428)(95,"span",429),c(96,"\u{1F3AF}"),i(),o(97,"span",430),c(98,"\uD018\uC2A4\uD2B8 \uC644\uB8CC\uB85C \uB2E4\uC591\uD55C \uC7AC\uD654 \uD68D\uB4DD"),i()()()()()()),r&2){let e=d(2);l(20),h(L(21,4,e.gold)),l(18),h(L(39,6,e.gem)),l(18),h(L(57,8,e.crystal)),l(18),h(L(75,10,e.ticket))}}function Wa(r,t){if(r&1&&(o(0,"div",462)(1,"span",328),c(2,"\u2694\uFE0F"),i(),o(3,"span",272),c(4),i()()),r&2){let e=d(2).$implicit;l(4),M("+",e.stats.attack)}}function Ya(r,t){if(r&1&&(o(0,"div",462)(1,"span",328),c(2,"\u{1F6E1}\uFE0F"),i(),o(3,"span",272),c(4),i()()),r&2){let e=d(2).$implicit;l(4),M("+",e.stats.defense)}}function Ua(r,t){if(r&1&&(o(0,"div",462)(1,"span",328),c(2,"\u2764\uFE0F"),i(),o(3,"span",272),c(4),i()()),r&2){let e=d(2).$implicit;l(4),M("+",e.stats.hp)}}function Ka(r,t){if(r&1&&(o(0,"div",462)(1,"span",328),c(2,"\u{1F499}"),i(),o(3,"span",272),c(4),i()()),r&2){let e=d(2).$implicit;l(4),M("+",e.stats.mp)}}function Xa(r,t){if(r&1&&(o(0,"div",460),b(1,Wa,5,1,"div",461)(2,Ya,5,1,"div",461)(3,Ua,5,1,"div",461)(4,Ka,5,1,"div",461),i()),r&2){let e=d().$implicit;l(),p("ngIf",e.stats.attack),l(),p("ngIf",e.stats.defense),l(),p("ngIf",e.stats.hp),l(),p("ngIf",e.stats.mp)}}function Qa(r,t){if(r&1&&(o(0,"div",465)(1,"span",466),c(2,"\u2728"),i(),o(3,"span",467),c(4),i()()),r&2){let e=t.$implicit;l(4),h(e)}}function Ja(r,t){if(r&1&&(o(0,"div",463),b(1,Qa,5,1,"div",464),i()),r&2){let e=d().$implicit;l(),p("ngForOf",e.effects.slice(0,2))}}function Za(r,t){r&1&&(o(0,"span")(1,"span",468),c(2,"\uFFFD"),i(),c(3," \uAD6C\uB9E4\uD558\uAE30 "),i())}function er(r,t){r&1&&(o(0,"span")(1,"span",468),c(2,"\uFFFD"),i(),c(3," \uACE8\uB4DC \uBD80\uC871 "),i())}function tr(r,t){if(r&1){let e=v();o(0,"div",179)(1,"div",445)(2,"span",446),c(3),i(),o(4,"span",447),c(5),i()(),o(6,"div",448)(7,"div",449),c(8,"\u{1F4E6}"),i()(),o(9,"div",450)(10,"h5",101),c(11),i(),o(12,"p",451),c(13),i(),b(14,Xa,5,4,"div",452)(15,Ja,2,1,"div",453),i(),o(16,"div",454)(17,"div",455)(18,"span",456),c(19,"\u{1F4B0}"),i(),o(20,"span",457),c(21),i(),o(22,"span",458),c(23,"G"),i()(),o(24,"button",459),f("click",function(a){let s=_(e).$implicit,m=d(4);return u(m.buyItemFromShop(s,a))}),b(25,Za,4,0,"span",97)(26,er,4,0,"span",97),i()()()}if(r&2){let e=t.$implicit,n=d(4);y("grade-legendary",e.grade==="\uC2E0\uD654"||e.grade==="\uC804\uC124")("grade-epic",e.grade==="\uC601\uC6C5")("grade-rare",e.grade==="\uD76C\uADC0")("grade-uncommon",e.grade==="\uACE0\uAE09")("grade-common",e.grade==="\uC77C\uBC18"),l(3),h(e.grade),l(2),h(e.type),l(6),h(e.name),l(2),h(e.description),l(),p("ngIf",e.stats&&(e.stats.attack||e.stats.defense||e.stats.hp||e.stats.mp)),l(),p("ngIf",e.effects&&e.effects.length>0),l(6),h(e.price||n.calculateItemPriceByGrade(e.grade)),l(3),y("can-buy",n.gold>=(e.price||n.calculateItemPriceByGrade(e.grade)))("cannot-buy",n.gold<(e.price||n.calculateItemPriceByGrade(e.grade))),p("disabled",n.gold<(e.price||n.calculateItemPriceByGrade(e.grade))),l(),p("ngIf",n.gold>=(e.price||n.calculateItemPriceByGrade(e.grade))),l(),p("ngIf",n.gold<(e.price||n.calculateItemPriceByGrade(e.grade)))}}function nr(r,t){if(r&1&&(o(0,"div",443),b(1,tr,27,24,"div",444),i()),r&2){let e=d(3);l(),p("ngForOf",e.savedItems)}}function or(r,t){r&1&&(o(0,"div",469)(1,"div",405),c(2,"\u{1F3EA}"),i(),o(3,"h5",470),c(4,"\uC0C1\uC810\uC5D0 \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),i(),o(5,"p",471),c(6,"AI \uC544\uC774\uD15C \uC0DD\uC131\uAE30\uB85C \uD2B9\uBCC4\uD55C \uC544\uC774\uD15C\uC744 \uB9CC\uB4E4\uC5B4\uBCF4\uC138\uC694!"),i(),o(7,"div",472)(8,"span",473),c(9,"\u{1F4A1}"),i(),o(10,"span",474),c(11,'\uD648 \uD654\uBA74\uC758 "AI \uC544\uC774\uD15C \uC0DD\uC131" \uBA54\uB274\uB97C \uC774\uC6A9\uD558\uC138\uC694'),i()()())}function ir(r,t){if(r&1&&(o(0,"div",351)(1,"div",431)(2,"div",432)(3,"div",433)(4,"h4",434),c(5,"\u{1F3EA} \uBAA8\uD5D8\uAC00 \uC0C1\uC810"),i(),o(6,"p",435),c(7,"AI\uAC00 \uC0DD\uC131\uD55C \uD2B9\uBCC4\uD55C \uC544\uC774\uD15C\uC744 \uAD6C\uB9E4\uD558\uC138\uC694"),i()(),o(8,"div",436)(9,"div",437),c(10,"\u{1F4B0}"),i(),o(11,"div",438)(12,"span",439),c(13,"\uBCF4\uC720 \uACE8\uB4DC"),i(),o(14,"span",440),c(15),F(16,"number"),i()()()(),b(17,nr,2,1,"div",441)(18,or,12,0,"div",442),i()()),r&2){let e=d(2);l(15),M("",L(16,3,e.gold)," G"),l(2),p("ngIf",e.savedItems.length>0),l(),p("ngIf",e.savedItems.length===0)}}function ar(r,t){if(r&1){let e=v();o(0,"div",346),F(1,"async"),o(2,"div",211)(3,"h3"),c(4,"\u{1F392} \uC778\uBCA4\uD1A0\uB9AC & \uC7A5\uBE44"),i(),o(5,"button",79),f("click",function(){_(e);let a=d();return u(a.novelState.closeInventoryPanel())}),c(6,"\xD7"),i()(),o(7,"div",347)(8,"button",348),f("click",function(){_(e);let a=d();return u(a.novelState.setInventoryTab("equipment"))}),c(9," \u2694\uFE0F \uC7A5\uBE44 & \uC778\uBCA4\uD1A0\uB9AC "),i(),o(10,"button",349),f("click",function(){_(e);let a=d();return u(a.novelState.setInventoryTab("currency"))}),c(11," \u{1F4B0} \uC7AC\uD654 "),i(),o(12,"button",348),f("click",function(){_(e);let a=d();return u(a.novelState.setInventoryTab("shop"))}),c(13," \u{1F6D2} \uC0C1\uC810 "),i()(),b(14,ja,90,180,"div",350)(15,Ha,99,12,"div",350)(16,ir,19,5,"div",350),i()}if(r&2){let e=d();y("mobile",L(1,11,e.responsiveService.isMobile$)),l(8),y("active",e.inventoryActiveTab==="equipment"),l(2),y("active",e.inventoryActiveTab==="currency"),l(2),y("active",e.inventoryActiveTab==="shop"),l(2),p("ngIf",e.inventoryActiveTab==="equipment"),l(),p("ngIf",e.inventoryActiveTab==="currency"),l(),p("ngIf",e.inventoryActiveTab==="shop")}}function rr(r,t){if(r&1){let e=v();o(0,"div",475),f("click",function(a){return _(e),u(a.stopPropagation())}),o(1,"div",476),f("click",function(){_(e);let a=d();return u(a.equipItemFromMenu())}),o(2,"span",477),c(3,"\u2694\uFE0F"),i(),o(4,"span",478),c(5,"\uC7A5\uCC29\uD558\uAE30"),i()(),o(6,"div",476),f("click",function(){_(e);let a=d();return u(a.showItemInfoModal())}),o(7,"span",477),c(8,"\u{1F4CB}"),i(),o(9,"span",478),c(10,"\uC815\uBCF4 \uBCF4\uAE30"),i()(),o(11,"div",479),f("click",function(){_(e);let a=d();return u(a.discardItemFromMenu())}),o(12,"span",477),c(13,"\u{1F5D1}\uFE0F"),i(),o(14,"span",478),c(15,"\uBC84\uB9AC\uAE30"),i()()()}if(r&2){let e=d();q("left",e.contextMenuPosition.x,"px")("top",e.contextMenuPosition.y,"px")}}function cr(r,t){if(r&1&&(o(0,"span",498),c(1),i()),r&2){let e=d(3);l(),M(" \uC218\uB7C9: \xD7",e.selectedContextItem.quantity," ")}}function lr(r,t){if(r&1&&(o(0,"div",327)(1,"span",328),c(2,"\u2694\uFE0F"),i(),o(3,"span",268),c(4,"\uACF5\uACA9\uB825"),i(),o(5,"span",272),c(6),i()()),r&2){let e=d(4);l(6),M("+",e.selectedContextItem.stats.attack)}}function sr(r,t){if(r&1&&(o(0,"div",327)(1,"span",328),c(2,"\u{1F6E1}\uFE0F"),i(),o(3,"span",268),c(4,"\uBC29\uC5B4\uB825"),i(),o(5,"span",272),c(6),i()()),r&2){let e=d(4);l(6),M("+",e.selectedContextItem.stats.defense)}}function dr(r,t){if(r&1&&(o(0,"div",327)(1,"span",328),c(2,"\u2764\uFE0F"),i(),o(3,"span",268),c(4,"\uCCB4\uB825"),i(),o(5,"span",272),c(6),i()()),r&2){let e=d(4);l(6),M("+",e.selectedContextItem.stats.hp)}}function gr(r,t){if(r&1&&(o(0,"div",327)(1,"span",328),c(2,"\u{1F499}"),i(),o(3,"span",268),c(4,"\uB9C8\uB098"),i(),o(5,"span",272),c(6),i()()),r&2){let e=d(4);l(6),M("+",e.selectedContextItem.stats.mp)}}function pr(r,t){if(r&1&&(o(0,"div",499)(1,"h5",500),c(2,"\u{1F4CA} \uB2A5\uB825\uCE58"),i(),o(3,"div",326),b(4,lr,7,1,"div",501)(5,sr,7,1,"div",501)(6,dr,7,1,"div",501)(7,gr,7,1,"div",501),i()()),r&2){let e=d(3);l(4),p("ngIf",e.selectedContextItem.stats.attack),l(),p("ngIf",e.selectedContextItem.stats.defense),l(),p("ngIf",e.selectedContextItem.stats.hp),l(),p("ngIf",e.selectedContextItem.stats.mp)}}function mr(r,t){if(r&1&&(o(0,"div",502)(1,"h5",503),c(2,"\u{1F4DD} \uC124\uBA85"),i(),o(3,"p"),c(4),i()()),r&2){let e=d(3);l(4),h(e.selectedContextItem.description)}}function _r(r,t){if(r&1){let e=v();o(0,"div",485)(1,"div",486)(2,"div",487),c(3),i(),o(4,"div",488)(5,"h3"),c(6),i(),o(7,"span",489),c(8),i()()(),o(9,"div",490)(10,"span",491),c(11),i(),b(12,cr,2,1,"span",492),i(),b(13,pr,8,4,"div",493)(14,mr,5,1,"div",494),o(15,"div",495)(16,"button",496),f("click",function(a){return _(e),d(2).equipItemFromModal(),u(a.stopPropagation())}),c(17," \u2694\uFE0F \uC7A5\uCC29\uD558\uAE30 "),i(),o(18,"button",497),f("click",function(a){return _(e),d(2).discardItemFromModal(),u(a.stopPropagation())}),c(19," \u{1F5D1}\uFE0F \uBC84\uB9AC\uAE30 "),i()()()}if(r&2){let e=d(2);l(),U("rarity-"+e.selectedContextItem.rarity),l(2),h(e.getInventoryItemIcon(e.selectedContextItem)),l(3),h(e.selectedContextItem.nameKo||e.selectedContextItem.name),l(2),h(e.getRarityName(e.selectedContextItem.rarity)),l(3),h(e.getTypeName(e.selectedContextItem.type)),l(),p("ngIf",e.selectedContextItem.quantity>1),l(),p("ngIf",e.selectedContextItem.stats),l(),p("ngIf",e.selectedContextItem.description)}}function ur(r,t){if(r&1){let e=v();o(0,"div",480),f("mousedown",function(a){_(e);let s=d();return u(s.onItemInfoDragStart(a))}),o(1,"div",481)(2,"h4",482),c(3,"\u{1F4CB} \uC544\uC774\uD15C \uC815\uBCF4"),i(),o(4,"button",483),f("click",function(a){return _(e),d().closeItemInfoModal(),u(a.stopPropagation())}),c(5,"\xD7"),i()(),b(6,_r,20,9,"div",484),i()}if(r&2){let e=d();q("left",e.itemInfoPosition.x,"px")("top",e.itemInfoPosition.y,"px"),l(6),p("ngIf",e.selectedContextItem)}}function Cr(r,t){if(r&1){let e=v();o(0,"div"),c(1),o(2,"button",505),f("click",function(){let a=_(e).$implicit,s=d(2);return u(s.buyItem(a))}),c(3,"\uAD6C\uB9E4"),i()()}if(r&2){let e=t.$implicit,n=d(2);l(),it(" ",e.name," - ",e.price,"G (\uC7AC\uACE0: ",e.stock,") "),l(),p("disabled",n.gold<e.price||e.stock<=0)}}function fr(r,t){if(r&1){let e=v();o(0,"div",504),F(1,"async"),o(2,"div",211)(3,"h3"),c(4,"\u{1F6D2} \uC0C1\uC810"),i(),o(5,"button",79),f("click",function(){_(e);let a=d();return u(a.novelState.closeShopPanel())}),c(6,"\xD7"),i()(),o(7,"div",212)(8,"div"),c(9),i(),b(10,Cr,4,4,"div",112),i()()}if(r&2){let e=d();y("mobile",L(1,4,e.responsiveService.isMobile$)),l(9),M("\uBCF4\uC720 \uACE8\uB4DC: ",e.gold,"G"),l(),p("ngForOf",e.shopItems)}}function br(r,t){r&1&&(o(0,"span"),c(1,"\u{1F9B8} \uC8FC\uC778\uACF5 \uC0DD\uC131"),i())}function hr(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function Pr(r,t){r&1&&(o(0,"span"),c(1,"\u2694\uFE0F \uBB34\uB9BC \uACE0\uC218 \uC0DD\uC131"),i())}function Mr(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function xr(r,t){r&1&&(o(0,"span"),c(1,"\u{1F525} \uC801\uB300\uC790 \uC0DD\uC131"),i())}function vr(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function Or(r,t){r&1&&(o(0,"span"),c(1,"\u{1F465} \uC870\uC5F0 \uC0DD\uC131"),i())}function yr(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function wr(r,t){if(r&1&&(o(0,"div",99),c(1),i()),r&2){let e=d(2);l(),M(" \u26A0\uFE0F ",e.characterGenerationError," ")}}function kr(r,t){if(r&1&&(o(0,"span",524),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function Sr(r,t){if(r&1&&(o(0,"div",521)(1,"h5"),c(2,"\u2694\uFE0F \uB2A5\uB825"),i(),o(3,"div",522),b(4,kr,2,1,"span",523),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.generatedCharacter.abilities)}}function Dr(r,t){if(r&1&&(o(0,"span",527),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function Ir(r,t){if(r&1&&(o(0,"div",145)(1,"h5"),c(2,"\u2B50 \uD2B9\uC131"),i(),o(3,"div",525),b(4,Dr,2,1,"span",526),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.generatedCharacter.traits)}}function Er(r,t){if(r&1){let e=v();o(0,"div",512)(1,"h4"),c(2,"\u{1F389} \uCE90\uB9AD\uD130\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),i(),o(3,"div",513)(4,"div",514)(5,"span",515),c(6,"\uC774\uB984:"),i(),o(7,"span",516),c(8),i()(),o(9,"div",514)(10,"span",515),c(11,"\uB098\uC774:"),i(),o(12,"span",516),c(13),i()(),o(14,"div",514)(15,"span",515),c(16,"\uC131\uBCC4:"),i(),o(17,"span",516),c(18),i()(),o(19,"div",514)(20,"span",515),c(21,"\uC5ED\uD560:"),i(),o(22,"span",516),c(23),i()()(),o(24,"div",517)(25,"h5"),c(26,"\u{1F4D6} \uC678\uBAA8"),i(),o(27,"p"),c(28),i()(),o(29,"div",517)(30,"h5"),c(31,"\u{1F4AD} \uC131\uACA9"),i(),o(32,"p"),c(33),i()(),o(34,"div",517)(35,"h5"),c(36,"\u{1F4DC} \uBC30\uACBD"),i(),o(37,"p"),c(38),i()(),b(39,Sr,5,1,"div",518),o(40,"div",517)(41,"h5"),c(42,"\u{1F3AF} \uBAA9\uD45C"),i(),o(43,"p"),c(44),i()(),b(45,Ir,5,1,"div",143),o(46,"div",519)(47,"button",114),f("click",function(){_(e);let a=d(2);return u(a.saveGeneratedCharacter())}),c(48," \u{1F4BE} \uCE90\uB9AD\uD130 \uC800\uC7A5\uD558\uAE30 "),i(),o(49,"button",520),f("click",function(){_(e);let a=d(2);return u(a.applyGeneratedCharacter())}),c(50," \u2705 \uC774 \uCE90\uB9AD\uD130\uB85C \uD50C\uB808\uC774\uD558\uAE30 "),i(),o(51,"button",116),f("click",function(){_(e);let a=d(2);return u(a.generateAiCharacter())}),c(52," \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30 "),i()()()}if(r&2){let e=d(2);l(8),h(e.generatedCharacter.name),l(5),M("",e.generatedCharacter.age,"\uC138"),l(5),h(e.generatedCharacter.gender==="male"?"\uB0A8\uC131":"\uC5EC\uC131"),l(5),h(e.generatedCharacter.role),l(5),h(e.generatedCharacter.appearance),l(5),h(e.generatedCharacter.personality),l(5),h(e.generatedCharacter.background),l(),p("ngIf",e.generatedCharacter.abilities),l(5),h(e.generatedCharacter.goals),l(),p("ngIf",e.generatedCharacter.traits)}}function Br(r,t){if(r&1){let e=v();o(0,"div",506)(1,"div",211)(2,"h3"),c(3,"\u{1F3AD} AI \uCE90\uB9AD\uD130 \uC0DD\uC131"),i(),o(4,"button",79),f("click",function(){_(e);let a=d();return u(a.novelState.closeCharacterCreator())}),c(5,"\xD7"),i()(),o(6,"div",212)(7,"div",507)(8,"div",80)(9,"h4"),c(10,"\u2728 Loworld AI\uB85C \uCE90\uB9AD\uD130 \uC0DD\uC131\uD558\uAE30"),i(),o(11,"p"),c(12,"AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uCE90\uB9AD\uD130\uB97C \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4."),i()(),o(13,"div",508)(14,"button",509),f("click",function(){_(e);let a=d();return u(a.generateAiCharacter("\uC8FC\uC778\uACF5"))}),b(15,br,2,0,"span",97)(16,hr,2,0,"span",97),i(),o(17,"button",510),f("click",function(){_(e);let a=d();return u(a.generateAiCharacter("\uBB34\uB9BC \uACE0\uC218"))}),b(18,Pr,2,0,"span",97)(19,Mr,2,0,"span",97),i(),o(20,"button",510),f("click",function(){_(e);let a=d();return u(a.generateAiCharacter("\uC801\uB300\uC790"))}),b(21,xr,2,0,"span",97)(22,vr,2,0,"span",97),i(),o(23,"button",510),f("click",function(){_(e);let a=d();return u(a.generateAiCharacter("\uC870\uC5F0"))}),b(24,Or,2,0,"span",97)(25,yr,2,0,"span",97),i()(),b(26,wr,2,1,"div",81)(27,Er,53,10,"div",511),i()()()}if(r&2){let e=d();l(14),p("disabled",e.isGeneratingCharacter),l(),p("ngIf",!e.isGeneratingCharacter),l(),p("ngIf",e.isGeneratingCharacter),l(),p("disabled",e.isGeneratingCharacter),l(),p("ngIf",!e.isGeneratingCharacter),l(),p("ngIf",e.isGeneratingCharacter),l(),p("disabled",e.isGeneratingCharacter),l(),p("ngIf",!e.isGeneratingCharacter),l(),p("ngIf",e.isGeneratingCharacter),l(),p("disabled",e.isGeneratingCharacter),l(),p("ngIf",!e.isGeneratingCharacter),l(),p("ngIf",e.isGeneratingCharacter),l(),p("ngIf",e.characterGenerationError),l(),p("ngIf",e.generatedCharacter)}}function Tr(r,t){r&1&&(o(0,"span"),c(1,"\u2694\uFE0F \uC804\uD1B5 \uBB34\uD611"),i())}function qr(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function Ar(r,t){r&1&&(o(0,"span"),c(1,"\u{1F31F} \uD604\uB300 \uD310\uD0C0\uC9C0"),i())}function Gr(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function Nr(r,t){r&1&&(o(0,"span"),c(1,"\u{1F311} \uC554\uD751 \uBB34\uD611"),i())}function zr(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function Fr(r,t){r&1&&(o(0,"span"),c(1,"\u{1F49D} \uB85C\uB9E8\uC2A4"),i())}function Lr(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function Rr(r,t){if(r&1&&(o(0,"div",99),c(1),i()),r&2){let e=d(2);l(),M(" \u26A0\uFE0F ",e.scenarioGenerationError," ")}}function $r(r,t){if(r&1&&(o(0,"li"),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function Vr(r,t){if(r&1&&(o(0,"div",536)(1,"h5"),c(2,"\u{1F465} \uB4F1\uC7A5\uC778\uBB3C"),i(),o(3,"ul"),b(4,$r,2,1,"li",112),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.generatedScenario.characters)}}function jr(r,t){if(r&1&&(o(0,"span",539),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function Hr(r,t){if(r&1&&(o(0,"div",157)(1,"h5"),c(2,"\u{1F3F7}\uFE0F \uD0DC\uADF8"),i(),o(3,"div",537),b(4,jr,2,1,"span",538),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.generatedScenario.tags)}}function Wr(r,t){if(r&1){let e=v();o(0,"div",532)(1,"h4"),c(2,"\u{1F389} \uC2DC\uB098\uB9AC\uC624\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),i(),o(3,"div",533)(4,"h2"),c(5),i()(),o(6,"div",534)(7,"h5"),c(8,"\u{1F4D6} \uC124\uBA85"),i(),o(9,"p"),c(10),i()(),o(11,"div",534)(12,"h5"),c(13,"\u{1F4CD} \uBC30\uACBD"),i(),o(14,"p"),c(15),i()(),b(16,Vr,5,1,"div",535),o(17,"div",534)(18,"h5"),c(19,"\u2694\uFE0F \uAC08\uB4F1"),i(),o(20,"p"),c(21),i()(),o(22,"div",534)(23,"h5"),c(24,"\u{1F3AF} \uBAA9\uD45C"),i(),o(25,"p"),c(26),i()(),o(27,"div",534)(28,"h5"),c(29,"\u{1F4AD} \uBD84\uC704\uAE30"),i(),o(30,"p"),c(31),i()(),b(32,Hr,5,1,"div",154),o(33,"div",519)(34,"button",520),f("click",function(){_(e);let a=d(2);return u(a.saveGeneratedScenario())}),c(35," \u{1F4BE} \uC2DC\uB098\uB9AC\uC624 \uC800\uC7A5\uD558\uAE30 "),i(),o(36,"button",115),f("click",function(){_(e);let a=d(2);return u(a.startGameWithScenario())}),c(37," \u{1F3AE} \uC774 \uC2DC\uB098\uB9AC\uC624\uB85C \uAC8C\uC784 \uC2DC\uC791 "),i(),o(38,"button",116),f("click",function(){_(e);let a=d(2);return u(a.generateAiScenario())}),c(39," \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30 "),i()()()}if(r&2){let e=d(2);l(5),h(e.generatedScenario.title),l(5),h(e.generatedScenario.description),l(5),h(e.generatedScenario.setting),l(),p("ngIf",e.generatedScenario.characters),l(5),h(e.generatedScenario.conflict),l(5),h(e.generatedScenario.goal),l(5),h(e.generatedScenario.mood),l(),p("ngIf",e.generatedScenario.tags)}}function Yr(r,t){if(r&1){let e=v();o(0,"div",528)(1,"div",211)(2,"h3"),c(3,"\u{1F3AC} AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131"),i(),o(4,"button",79),f("click",function(){_(e);let a=d();return u(a.novelState.closeScenarioCreator())}),c(5,"\xD7"),i()(),o(6,"div",212)(7,"div",529)(8,"div",80)(9,"h4"),c(10,"\u2728 Loworld AI\uB85C \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30"),i(),o(11,"p"),c(12,"AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uC2DC\uB098\uB9AC\uC624\uB97C \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4."),i()(),o(13,"div",530)(14,"button",509),f("click",function(){_(e);let a=d();return u(a.generateAiScenario("\uBB34\uD611","\uC804\uD1B5\uC801\uC778","\uAE34\uC7A5\uAC10 \uB118\uCE58\uB294"))}),b(15,Tr,2,0,"span",97)(16,qr,2,0,"span",97),i(),o(17,"button",510),f("click",function(){_(e);let a=d();return u(a.generateAiScenario("\uD310\uD0C0\uC9C0","\uD604\uB300\uC801\uC778","\uC2E0\uBE44\uB85C\uC6B4"))}),b(18,Ar,2,0,"span",97)(19,Gr,2,0,"span",97),i(),o(20,"button",510),f("click",function(){_(e);let a=d();return u(a.generateAiScenario("\uBB34\uD611","\uC554\uD751","\uC5B4\uB450\uC6B4"))}),b(21,Nr,2,0,"span",97)(22,zr,2,0,"span",97),i(),o(23,"button",510),f("click",function(){_(e);let a=d();return u(a.generateAiScenario("\uB85C\uB9E8\uC2A4","\uAC10\uC131\uC801\uC778","\uB2EC\uCF64\uD55C"))}),b(24,Fr,2,0,"span",97)(25,Lr,2,0,"span",97),i()(),b(26,Rr,2,1,"div",81)(27,Wr,40,8,"div",531),i()()()}if(r&2){let e=d();l(14),p("disabled",e.isGeneratingScenario),l(),p("ngIf",!e.isGeneratingScenario),l(),p("ngIf",e.isGeneratingScenario),l(),p("disabled",e.isGeneratingScenario),l(),p("ngIf",!e.isGeneratingScenario),l(),p("ngIf",e.isGeneratingScenario),l(),p("disabled",e.isGeneratingScenario),l(),p("ngIf",!e.isGeneratingScenario),l(),p("ngIf",e.isGeneratingScenario),l(),p("disabled",e.isGeneratingScenario),l(),p("ngIf",!e.isGeneratingScenario),l(),p("ngIf",e.isGeneratingScenario),l(),p("ngIf",e.scenarioGenerationError),l(),p("ngIf",e.generatedScenario)}}function Ur(r,t){r&1&&(o(0,"span"),c(1,"\u{1F3B2} \uB79C\uB364 10\uAC1C \uC0DD\uC131"),i())}function Kr(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function Xr(r,t){r&1&&(o(0,"span"),c(1,"\u2694\uFE0F \uBB34\uAE30 10\uAC1C"),i())}function Qr(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function Jr(r,t){r&1&&(o(0,"span"),c(1,"\u{1F6E1}\uFE0F \uBC29\uC5B4\uAD6C 10\uAC1C"),i())}function Zr(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function ec(r,t){r&1&&(o(0,"span"),c(1,"\u{1F9EA} \uC18C\uBE44\uD488 10\uAC1C"),i())}function tc(r,t){r&1&&(o(0,"span"),c(1,"\u23F3 \uC0DD\uC131 \uC911..."),i())}function nc(r,t){if(r&1&&(o(0,"div",99),c(1),i()),r&2){let e=d(2);l(),M(" \u26A0\uFE0F ",e.itemGenerationError," ")}}function oc(r,t){if(r&1&&(o(0,"span",562),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u2694\uFE0F +",e.stats.attack)}}function ic(r,t){if(r&1&&(o(0,"span",562),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F6E1}\uFE0F +",e.stats.defense)}}function ac(r,t){if(r&1&&(o(0,"span",562),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u2764\uFE0F +",e.stats.hp)}}function rc(r,t){if(r&1&&(o(0,"span",562),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F499} +",e.stats.mp)}}function cc(r,t){if(r&1&&(o(0,"div",560),b(1,oc,2,1,"span",561)(2,ic,2,1,"span",561)(3,ac,2,1,"span",561)(4,rc,2,1,"span",561),i()),r&2){let e=d().$implicit;l(),p("ngIf",e.stats.attack),l(),p("ngIf",e.stats.defense),l(),p("ngIf",e.stats.hp),l(),p("ngIf",e.stats.mp)}}function lc(r,t){if(r&1){let e=v();o(0,"div",553)(1,"div",554)(2,"h5"),c(3),i(),o(4,"span",446),c(5),i()(),o(6,"div",555),c(7),i(),o(8,"div",556),c(9),i(),b(10,cc,5,4,"div",557),o(11,"div",558)(12,"button",559),f("click",function(){let a=_(e).index,s=d(3);return u(s.saveGeneratedItemByIndex(a))}),c(13," \u{1F4BE} \uC800\uC7A5 "),i()()()}if(r&2){let e=t.$implicit;y("grade-common",e.grade==="\uC77C\uBC18")("grade-uncommon",e.grade==="\uACE0\uAE09")("grade-rare",e.grade==="\uD76C\uADC0")("grade-epic",e.grade==="\uC601\uC6C5")("grade-legendary",e.grade==="\uC804\uC124"||e.grade==="\uC2E0\uD654"),l(3),h(e.name),l(),U("grade-"+e.grade),l(),h(e.grade),l(2),M(" \u{1F4E6} ",e.type," "),l(2),M(" ",e.description," "),l(),p("ngIf",e.stats)}}function sc(r,t){if(r&1){let e=v();o(0,"div",549)(1,"h4"),c(2),i(),o(3,"div",161),b(4,lc,14,17,"div",550),i(),o(5,"div",551)(6,"button",552),f("click",function(){_(e);let a=d(2);return u(a.saveAllGeneratedItems())}),c(7," \u{1F4BE} \uBAA8\uB450 \uC800\uC7A5 "),i()()()}if(r&2){let e=d(2);l(2),M("\u{1F389} ",e.generatedItems.length,"\uAC1C\uC758 \uC544\uC774\uD15C\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),l(2),p("ngForOf",e.generatedItems)}}function dc(r,t){if(r&1&&(o(0,"div",327)(1,"span",268),c(2,"\u2694\uFE0F \uACF5\uACA9\uB825"),i(),o(3,"span",272),c(4),i()()),r&2){let e=d(4);l(4),M("+",e.generatedItem.stats.attack)}}function gc(r,t){if(r&1&&(o(0,"div",327)(1,"span",268),c(2,"\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825"),i(),o(3,"span",272),c(4),i()()),r&2){let e=d(4);l(4),M("+",e.generatedItem.stats.defense)}}function pc(r,t){if(r&1&&(o(0,"div",327)(1,"span",268),c(2,"\u2764\uFE0F HP"),i(),o(3,"span",272),c(4),i()()),r&2){let e=d(4);l(4),M("+",e.generatedItem.stats.hp)}}function mc(r,t){if(r&1&&(o(0,"div",327)(1,"span",268),c(2,"\u{1F499} MP"),i(),o(3,"span",272),c(4),i()()),r&2){let e=d(4);l(4),M("+",e.generatedItem.stats.mp)}}function _c(r,t){if(r&1&&(o(0,"div",170)(1,"h5"),c(2,"\u{1F4CA} \uB2A5\uB825\uCE58"),i(),o(3,"div",326),b(4,dc,5,1,"div",501)(5,gc,5,1,"div",501)(6,pc,5,1,"div",501)(7,mc,5,1,"div",501),i()()),r&2){let e=d(3);l(4),p("ngIf",e.generatedItem.stats.attack),l(),p("ngIf",e.generatedItem.stats.defense),l(),p("ngIf",e.generatedItem.stats.hp),l(),p("ngIf",e.generatedItem.stats.mp)}}function uc(r,t){if(r&1&&(o(0,"li"),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function Cc(r,t){if(r&1&&(o(0,"div",463)(1,"h5"),c(2,"\u2728 \uD6A8\uACFC"),i(),o(3,"ul"),b(4,uc,2,1,"li",112),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.generatedItem.effects)}}function fc(r,t){if(r&1&&(o(0,"div",571)(1,"h5"),c(2,"\u26A0\uFE0F \uC0AC\uC6A9 \uC870\uAC74"),i(),o(3,"p"),c(4),i()()),r&2){let e=d(3);l(4),h(e.generatedItem.requirements)}}function bc(r,t){if(r&1&&(o(0,"div",572)(1,"h5"),c(2,"\u{1F4DC} \uC804\uC124"),i(),o(3,"p",573),c(4),i()()),r&2){let e=d(3);l(4),h(e.generatedItem.lore)}}function hc(r,t){if(r&1&&(o(0,"span",539),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function Pc(r,t){if(r&1&&(o(0,"div",166)(1,"h5"),c(2,"\u{1F3F7}\uFE0F \uD0DC\uADF8"),i(),o(3,"div",537),b(4,hc,2,1,"span",538),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.generatedItem.tags)}}function Mc(r,t){if(r&1){let e=v();o(0,"div",563)(1,"h4"),c(2,"\u{1F389} \uC544\uC774\uD15C\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),i(),o(3,"div",564)(4,"h2"),c(5),i(),o(6,"div",446),c(7),i()(),o(8,"div",565)(9,"span",566),c(10),i()(),o(11,"div",451)(12,"h5"),c(13,"\u{1F4D6} \uC124\uBA85"),i(),o(14,"p"),c(15),i()(),b(16,_c,8,4,"div",165)(17,Cc,5,1,"div",453)(18,fc,5,1,"div",567)(19,bc,5,1,"div",568)(20,Pc,5,1,"div",569),o(21,"div",519)(22,"button",114),f("click",function(){_(e);let a=d(2);return u(a.saveGeneratedItem())}),c(23," \u{1F4BE} \uC544\uC774\uD15C \uC800\uC7A5\uD558\uAE30 "),i(),o(24,"button",570),f("click",function(){_(e);let a=d(2);return u(a.addGeneratedItemToInventory())}),c(25," \u{1F392} \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00 "),i(),o(26,"button",116),f("click",function(){_(e);let a=d(2);return u(a.generateAiItem())}),c(27," \u{1F504} \uB2E4\uC2DC \uC0DD\uC131\uD558\uAE30 "),i()()()}if(r&2){let e=d(2);l(3),y("grade-legendary",e.generatedItem.grade==="\uC2E0\uD654"||e.generatedItem.grade==="\uC804\uC124"),l(2),h(e.generatedItem.name),l(),U("grade-"+e.generatedItem.grade),l(),M(" ",e.generatedItem.grade," "),l(3),M("\u{1F4E6} ",e.generatedItem.type),l(5),h(e.generatedItem.description),l(),p("ngIf",e.generatedItem.stats),l(),p("ngIf",e.generatedItem.effects&&e.generatedItem.effects.length>0),l(),p("ngIf",e.generatedItem.requirements),l(),p("ngIf",e.generatedItem.lore),l(),p("ngIf",e.generatedItem.tags&&e.generatedItem.tags.length>0)}}function xc(r,t){if(r&1){let e=v();o(0,"div",540)(1,"div",211)(2,"h3"),c(3,"\u{1F48E} AI \uC544\uC774\uD15C \uC0DD\uC131"),i(),o(4,"button",79),f("click",function(){_(e);let a=d();return u(a.novelState.closeItemCreator())}),c(5,"\xD7"),i()(),o(6,"div",212)(7,"div",541)(8,"div",80)(9,"h4"),c(10,"\u2728 Loworld AI\uB85C \uC544\uC774\uD15C \uC0DD\uC131\uD558\uAE30"),i(),o(11,"p"),c(12,"AI\uAC00 \uBB34\uD611 \uC18C\uC124 \uC2A4\uD0C0\uC77C\uC758 \uB3C5\uD2B9\uD55C \uC544\uC774\uD15C\uC744 \uC0DD\uC131\uD574\uB4DC\uB9BD\uB2C8\uB2E4."),i()(),o(13,"div",542)(14,"button",543),f("click",function(){_(e);let a=d();return u(a.generateAiItem())}),b(15,Ur,2,0,"span",97)(16,Kr,2,0,"span",97),i(),o(17,"button",544),f("click",function(){_(e);let a=d();return u(a.generateAiItem("\uBB34\uAE30"))}),b(18,Xr,2,0,"span",97)(19,Qr,2,0,"span",97),i(),o(20,"button",545),f("click",function(){_(e);let a=d();return u(a.generateAiItem("\uBC29\uC5B4\uAD6C"))}),b(21,Jr,2,0,"span",97)(22,Zr,2,0,"span",97),i(),o(23,"button",546),f("click",function(){_(e);let a=d();return u(a.generateAiItem("\uC18C\uBE44\uD488"))}),b(24,ec,2,0,"span",97)(25,tc,2,0,"span",97),i()(),b(26,nc,2,1,"div",81)(27,sc,8,2,"div",547)(28,Mc,28,13,"div",548),i()()()}if(r&2){let e=d();l(14),p("disabled",e.isGeneratingItem),l(),p("ngIf",!e.isGeneratingItem),l(),p("ngIf",e.isGeneratingItem),l(),p("disabled",e.isGeneratingItem),l(),p("ngIf",!e.isGeneratingItem),l(),p("ngIf",e.isGeneratingItem),l(),p("disabled",e.isGeneratingItem),l(),p("ngIf",!e.isGeneratingItem),l(),p("ngIf",e.isGeneratingItem),l(),p("disabled",e.isGeneratingItem),l(),p("ngIf",!e.isGeneratingItem),l(),p("ngIf",e.isGeneratingItem),l(),p("ngIf",e.itemGenerationError),l(),p("ngIf",e.generatedItems.length>0),l(),p("ngIf",e.generatedItem&&e.generatedItems.length===0)}}function vc(r,t){r&1&&(o(0,"span"),c(1,"\u{1F3AC}"),i())}function Oc(r,t){r&1&&(o(0,"span"),c(1,"\u{1F4D6}"),i())}function yc(r,t){r&1&&(o(0,"span"),c(1,"\u{1F500}"),i())}function wc(r,t){r&1&&(o(0,"span"),c(1,"\u{1F4CD}"),i())}function kc(r,t){if(r&1&&(o(0,"div",598),c(1),i()),r&2){let e=t.$implicit;l(),E(" \u2192 ",e.substring(0,30),"",e.length>30?"...":""," ")}}function Sc(r,t){if(r&1&&(o(0,"div",596),b(1,kc,2,2,"div",597),i()),r&2){let e=d().$implicit;l(),p("ngForOf",e.choices)}}function Dc(r,t){r&1&&S(0,"div",599)}function Ic(r,t){if(r&1&&(o(0,"div",589)(1,"div",590),b(2,vc,2,0,"span",97)(3,Oc,2,0,"span",97)(4,yc,2,0,"span",97)(5,wc,2,0,"span",97),i(),o(6,"div",591)(7,"div",592),c(8),i(),o(9,"div",593),c(10),i(),b(11,Sc,2,1,"div",594),i(),b(12,Dc,1,0,"div",595),i()),r&2){let e=t.$implicit,n=t.index,a=d(2);q("margin-left",e.level*40,"px"),p("ngClass",dn(11,Jo,e.type==="start",e.type==="story",e.type==="choice",e.type==="current")),l(2),p("ngIf",e.type==="start"),l(),p("ngIf",e.type==="story"),l(),p("ngIf",e.type==="choice"),l(),p("ngIf",e.type==="current"),l(3),h(e.label),l(2),M("\uB808\uBCA8 ",e.level),l(),p("ngIf",e.type==="current"&&e.choices),l(),p("ngIf",n<a.storyFlowNodes.length-1)}}function Ec(r,t){if(r&1){let e=v();o(0,"div",574)(1,"div",575)(2,"div",576)(3,"div",119)(4,"h3"),c(5,"\u{1F5FA}\uFE0F \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0"),i()(),o(6,"button",79),f("click",function(){_(e);let a=d();return u(a.toggleStoryFlowPanel())}),c(7,"\u2715"),i()(),o(8,"div",577)(9,"p"),c(10,"\uD604\uC7AC\uAE4C\uC9C0\uC758 \uC120\uD0DD\uACFC \uC55E\uC73C\uB85C\uC758 \uAC00\uB2A5\uD55C \uACBD\uB85C\uB97C \uBCF4\uC5EC\uC90D\uB2C8\uB2E4."),i(),o(11,"div",578)(12,"span",327),c(13),i(),o(14,"span",327),c(15),i(),o(16,"span",327),c(17),i()()(),o(18,"div",579)(19,"div",580),b(20,Ic,13,16,"div",581),i(),o(21,"div",582)(22,"h4"),c(23,"\uBC94\uB840"),i(),o(24,"div",583)(25,"div",584)(26,"span",585),c(27,"\u{1F3AC}"),i(),c(28," \uC2DC\uC791"),i(),o(29,"div",584)(30,"span",586),c(31,"\u{1F4D6}"),i(),c(32," \uC2A4\uD1A0\uB9AC"),i(),o(33,"div",584)(34,"span",587),c(35,"\u{1F500}"),i(),c(36," \uC120\uD0DD"),i(),o(37,"div",584)(38,"span",588),c(39,"\u{1F4CD}"),i(),c(40," \uD604\uC7AC \uC704\uCE58"),i()()()()()()}if(r&2){let e=d();l(13),M("\u{1F4CA} \uC9C4\uD589 \uB2E8\uACC4: ",e.storyBlocks.length),l(2),M("\u{1F500} \uC120\uD0DD \uD69F\uC218: ",e.currentPath.length),l(2),M("\u{1F3AF} \uD604\uC7AC \uC120\uD0DD\uC9C0: ",e.choices.length),l(3),p("ngForOf",e.storyFlowNodes)}}function Bc(r,t){if(r&1&&(o(0,"span",159),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function Tc(r,t){if(r&1&&(o(0,"div",157),b(1,Bc,2,1,"span",158),i()),r&2){let e=d().$implicit;l(),p("ngForOf",e.tags.slice(0,3))}}function qc(r,t){if(r&1){let e=v();o(0,"div",151),f("click",function(){let a=_(e).$implicit,s=d(2);return u(s.linkScenarioToChoice(s.currentLinkingChoiceIndex,a.id))}),o(1,"div",152)(2,"h4"),c(3),i(),o(4,"span",609),c(5),i()(),o(6,"div",610)(7,"p",534),c(8),i(),o(9,"div",155)(10,"span",110),c(11),i(),o(12,"span",110),c(13),i()(),b(14,Tc,2,1,"div",154),i()()}if(r&2){let e=t.$implicit;l(3),h(e.title),l(2),h(e.genre),l(3),h(e.description),l(3),M("\u{1F4CD} ",e.setting),l(2),M("\u{1F3AD} ",e.mood),l(),p("ngIf",e.tags&&e.tags.length>0)}}function Ac(r,t){if(r&1){let e=v();o(0,"div",611)(1,"p"),c(2,"\uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),i(),o(3,"button",612),f("click",function(){_(e);let a=d(2);return a.openScenarioCreator(),u(a.closeScenarioLinkPanel())}),c(4," \u{1F3AC} \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30 "),i()()}}function Gc(r,t){if(r&1){let e=v();o(0,"div",600)(1,"div",601)(2,"div",602)(3,"div",119)(4,"span",603),c(5,"\u22EE\u22EE"),i(),o(6,"h3"),c(7,"\u{1F517} \uC120\uD0DD\uC9C0\uC5D0 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0"),i()(),o(8,"button",79),f("click",function(){_(e);let a=d();return u(a.closeScenarioLinkPanel())}),c(9,"\u2715"),i()(),o(10,"div",604)(11,"p"),c(12,"\uC120\uD0DD\uC9C0 "),o(13,"strong"),c(14),i(),c(15,"\uC5D0 \uC5F0\uACB0\uD560 \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uC138\uC694."),i(),o(16,"p",605),c(17,"\u{1F4A1} \uC120\uD0DD\uD558\uBA74 \uD574\uB2F9 \uC120\uD0DD\uC9C0\uB97C \uACE0\uB97C \uB54C \uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC804\uAC1C\uB429\uB2C8\uB2E4."),i()(),o(18,"div",606)(19,"div",607),b(20,qc,15,6,"div",150),i(),b(21,Ac,5,0,"div",608),i()()()}if(r&2){let e=d();l(14),M("#",e.currentLinkingChoiceIndex+1),l(6),p("ngForOf",e.savedScenarios),l(),p("ngIf",e.savedScenarios.length===0)}}function Nc(r,t){if(r&1){let e=v();o(0,"button",654),f("click",function(){_(e);let a=d(2);return u(a.toggleAdvancedFlowPanel())}),c(1," \u26F6 "),i()}}function zc(r,t){if(r&1&&(o(0,"div",655)(1,"div",656),c(2),i(),o(3,"div",657)(4,"div",658),c(5),i(),o(6,"div",659),c(7),i()()()),r&2){let e=d(2);l(2),h(e.getNodeIcon(e.getCurrentNode())),l(3),h(e.getCurrentNode().title),l(2),E("\uACBD\uB85C: ",e.storyProgress.visitedNodes.length,"/",e.storyNodes.length)}}function Fc(r,t){if(r&1&&(W(),S(0,"path",660)),r&2){let e=t.$implicit;Y("d",e.path)("stroke",e.color)("stroke-width",e.width*.5)}}function Lc(r,t){if(r&1&&(W(),o(0,"g"),S(1,"circle",661),o(2,"text",662),c(3),i()()),r&2){let e=t.$implicit,n=d(2);Y("transform","translate("+e.position.x+","+e.position.y+")"),l(),y("pulse",e.isCurrent),Y("fill",n.getNodeColor(e))("stroke",n.getNodeBorderColor(e))("stroke-width",e.isCurrent?3:1.5),l(2),M(" ",n.getNodeIcon(e)," ")}}function Rc(r,t){if(r&1&&(o(0,"span",667),c(1),i()),r&2){let e,n=t.$implicit,a=d(3);y("current",n.nodeId===a.currentStoryNodeId),p("title",((e=a.getNodeById(n.nodeId))==null?null:e.title)||"\uC54C \uC218 \uC5C6\uC74C"),l(),M(" ",a.getNodeIcon(a.getNodeById(n.nodeId)||a.storyNodes[0])," ")}}function $c(r,t){if(r&1&&(o(0,"div",663)(1,"div",664),c(2,"\uCD5C\uADFC \uACBD\uB85C"),i(),o(3,"div",665),b(4,Rc,2,4,"span",666),i()()),r&2){let e=d(2);l(4),p("ngForOf",e.storyProgress.pathHistory.slice(-8))}}function Vc(r,t){if(r&1&&(o(0,"div",688)(1,"span",689),c(2,"\uB0B4\uACF5"),i(),o(3,"div",702),S(4,"div",691),i(),o(5,"span",692),c(6),i()()),r&2){let e=d().$implicit;l(4),q("width",e.internalPower.current/e.internalPower.max*100,"%"),l(2),E("",e.internalPower.current,"/",e.internalPower.max)}}function jc(r,t){if(r&1&&(o(0,"div",514)(1,"span",695),c(2,"\u2B50"),i(),o(3,"span",696),c(4),i()()),r&2){let e=d().$implicit;l(4),h(e.internalPower.realm)}}function Hc(r,t){if(r&1&&(o(0,"span",705),c(1),i()),r&2){let e=t.$implicit;l(),M(" ",e," ")}}function Wc(r,t){if(r&1&&(o(0,"div",703),b(1,Hc,2,1,"span",704),i()),r&2){let e=d().$implicit;l(),p("ngForOf",e.skills.slice(0,3))}}function Yc(r,t){if(r&1&&(o(0,"div",706)(1,"p"),c(2),i()()),r&2){let e=d().$implicit;l(2),h(e.description)}}function Uc(r,t){if(r&1){let e=v();o(0,"div",678),f("click",function(){let a=_(e).$implicit,s=d(3);return u(s.selectMember(a))}),o(1,"div",679)(2,"div",680),c(3),i(),o(4,"div",681)(5,"div",682)(6,"span",683),c(7),i(),o(8,"span",684),c(9),i()(),o(10,"div",685),c(11),i()(),o(12,"div",686),c(13),i()(),o(14,"div",687)(15,"div",688)(16,"span",689),c(17,"HP"),i(),o(18,"div",690),S(19,"div",691),i(),o(20,"span",692),c(21),i()(),b(22,Vc,7,4,"div",693),i(),o(23,"div",694)(24,"div",514)(25,"span",695),c(26,"\u2694\uFE0F"),i(),o(27,"span",696),c(28),i()(),o(29,"div",514)(30,"span",695),c(31,"\u{1F496}"),i(),o(32,"span",696),c(33),i(),o(34,"div",697),S(35,"div",698),i()(),b(36,jc,5,1,"div",699),i(),b(37,Wc,2,1,"div",700)(38,Yc,3,1,"div",701),i()}if(r&2){let e=t.$implicit,n=d(3);y("selected",(n.selectedMember==null?null:n.selectedMember.id)===e.id),l(3),h(e.avatar||"\u{1F464}"),l(4),h(e.name),l(),Y("data-role",e.role),l(),M(" ",n.getRoleName(e.role)," "),l(2),E("Lv.",e.level," | ",e.specialty),l(),Y("data-status",e.status),l(),M(" ",n.getStatusName(e.status)," "),l(6),q("width",e.stats.hp/e.stats.maxHp*100,"%"),l(2),E("",e.stats.hp,"/",e.stats.maxHp),l(),p("ngIf",e.internalPower),l(6),E("\uACF5\uACA9 ",e.stats.attack," | \uBC29\uC5B4 ",e.stats.defense),l(5),M("\uCDA9\uC131\uB3C4: ",e.loyalty,"%"),l(2),q("width",e.loyalty,"%"),l(),p("ngIf",e.internalPower),l(),p("ngIf",e.skills&&e.skills.length>0),l(),p("ngIf",e.description)}}function Kc(r,t){r&1&&(o(0,"div",707)(1,"p"),c(2,"\uC544\uC9C1 \uC870\uC9C1\uC6D0\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."),i(),o(3,"p"),c(4,"\uBAA8\uD5D8\uC744 \uD1B5\uD574 \uB3D9\uB8CC\uB97C \uBAA8\uC9D1\uD558\uC138\uC694!"),i()())}function Xc(r,t){if(r&1&&(o(0,"div",668)(1,"div",669)(2,"div",670)(3,"h3",671),c(4),i(),o(5,"span",672),c(6),i()(),o(7,"div",673)(8,"div",674)(9,"span",268),c(10,"\uC778\uC6D0"),i(),o(11,"span",272),c(12),i()(),o(13,"div",674)(14,"span",268),c(15,"\uBA85\uC131"),i(),o(16,"span",272),c(17),i()()()(),o(18,"div",675),b(19,Uc,39,23,"div",676)(20,Kc,5,0,"div",677),i()()),r&2){let e=d(2);l(4),h(e.playerOrganization.name),l(2),M("Lv.",e.playerOrganization.level),l(6),E("",e.playerOrganization.members.length,"/",e.playerOrganization.maxMembers),l(5),h(e.playerOrganization.reputation),l(2),p("ngForOf",e.playerOrganization.members),l(),p("ngIf",e.playerOrganization.members.length===0)}}function Qc(r,t){r&1&&(o(0,"div",708)(1,"p"),c(2,"\uC544\uC9C1 \uC870\uC9C1\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."),i(),o(3,"p"),c(4,"\uAC8C\uC784\uC744 \uC2DC\uC791\uD558\uBA74 \uC870\uC9C1\uC774 \uC0DD\uC131\uB429\uB2C8\uB2E4."),i()())}function Jc(r,t){if(r&1){let e=v();o(0,"div",613)(1,"div",614)(2,"div",211)(3,"div",615)(4,"span",616),c(5),i(),o(6,"span",617),c(7),i()(),o(8,"div",618)(9,"h3"),c(10),i(),o(11,"div",43),b(12,Nc,2,0,"button",619),o(13,"button",620),f("click",function(){_(e);let a=d();return u(a.toggleFlowPanel())}),c(14," \u2715 "),i()()()(),o(15,"div",621)(16,"div",622)(17,"div",623)(18,"div",140)(19,"div",304)(20,"span",306),c(21,"\u{1F3AD}"),i()(),o(22,"div",624)(23,"div",625),c(24),i(),o(25,"div",626),c(26),i()()(),o(27,"div",627)(28,"div",267)(29,"div",268)(30,"span",628),c(31,"\u2764\uFE0F"),i(),o(32,"span",330),c(33,"HP"),i()(),o(34,"div",629)(35,"div",630),S(36,"div",631),i(),o(37,"span",272),c(38),i()()(),o(39,"div",267)(40,"div",268)(41,"span",632),c(42,"\u{1F499}"),i(),o(43,"span",330),c(44,"MP"),i()(),o(45,"div",629)(46,"div",633),S(47,"div",631),i(),o(48,"span",272),c(49),i()()(),o(50,"div",634)(51,"div",635)(52,"span",328),c(53,"\u{1F4B0}"),i(),o(54,"span",272),c(55),i()(),o(56,"div",635)(57,"span",328),c(58,"\u{1F525}"),i(),o(59,"span",272),c(60),i()()(),o(61,"div",636)(62,"div",268)(63,"span",328),c(64,"\u2B50"),i(),o(65,"span",330),c(66,"\uCD08\uB958"),i()(),o(67,"div",637),c(68),i()()()()(),o(69,"div",638),b(70,zc,8,4,"div",639),o(71,"div",640),W(),o(72,"svg",641)(73,"g",642),b(74,Fc,1,3,"path",643),i(),o(75,"g",644),b(76,Lc,4,7,"g",112),i()()(),Z(),o(77,"div",645)(78,"div",327)(79,"span",328),c(80,"\u{1F4CD}"),i(),o(81,"span",646),c(82),i()(),o(83,"div",327)(84,"span",328),c(85,"\u{1F500}"),i(),o(86,"span",646),c(87),i()(),o(88,"div",327)(89,"span",328),c(90,"\u2694\uFE0F"),i(),o(91,"span",646),c(92),i()()(),b(93,$c,5,1,"div",647),i(),o(94,"div",648),b(95,Xc,21,7,"div",649)(96,Qc,5,0,"div",650),i()(),o(97,"div",651)(98,"button",348),f("click",function(){_(e);let a=d();return u(a.switchFlowTab("character"))}),o(99,"span",652),c(100,"\u{1F3AD}"),i(),o(101,"span",653),c(102,"\uCE90\uB9AD\uD130"),i()(),o(103,"button",348),f("click",function(){_(e);let a=d();return u(a.switchFlowTab("organization"))}),o(104,"span",652),c(105,"\u{1F3DB}\uFE0F"),i(),o(106,"span",653),c(107,"\uC870\uC9C1"),i()(),o(108,"button",348),f("click",function(){_(e);let a=d();return u(a.switchFlowTab("map"))}),o(109,"span",652),c(110,"\u{1F5FA}\uFE0F"),i(),o(111,"span",653),c(112,"\uC2A4\uD1A0\uB9AC"),i()()()()()}if(r&2){let e=d();p("@slideInOut",void 0),l(5),h(e.getCurrentTime()),l(2),M("",e.calculateExplorationRate(),"%"),l(3),M(" ",e.flowPanelTab==="character"?"\u{1F3AD} \uCE90\uB9AD\uD130 \uC815\uBCF4":e.flowPanelTab==="organization"?"\u{1F3DB}\uFE0F \uC870\uC9C1 \uC815\uBCF4":"\u{1F5FA}\uFE0F \uC2A4\uD1A0\uB9AC \uB9F5"," "),l(2),p("ngIf",e.flowPanelTab==="map"),l(3),Y("data-tab",e.flowPanelTab),l(9),h(e.playerCharacter.name||"\uBAA8\uD5D8\uAC00"),l(2),M("Lv.",e.playerCharacter.level||1),l(10),q("width",e.playerCharacter.hp&&e.playerCharacter.maxHp?e.playerCharacter.hp/e.playerCharacter.maxHp*100:100,"%"),l(2),E("",e.playerCharacter.hp||100,"/",e.playerCharacter.maxHp||100),l(9),q("width",e.playerCharacter.mp&&e.playerCharacter.maxMp?e.playerCharacter.mp/e.playerCharacter.maxMp*100:100,"%"),l(2),E("",e.playerCharacter.mp||50,"/",e.playerCharacter.maxMp||50),l(6),M("",e.gold||100,"G"),l(5),E("",e.playerInternalPower.current||100,"/",e.playerInternalPower.max||100),l(8),h(e.playerInternalPower.realm||"\uCD08\uB958"),l(2),p("ngIf",e.getCurrentNode()),l(2),Y("viewBox",e.flowViewBox),l(2),p("ngForOf",e.storyConnections),l(2),p("ngForOf",e.visibleNodes),l(6),h(e.storyProgress.visitedNodes.length),l(5),h(e.storyProgress.totalChoices),l(5),E("",e.storyProgress.battlesWon,"/",e.storyProgress.battlesWon+e.storyProgress.battlesLost),l(),p("ngIf",e.storyProgress.pathHistory.length>0),l(2),p("ngIf",e.playerOrganization),l(),p("ngIf",!e.playerOrganization),l(2),y("active",e.flowPanelTab==="character"),l(5),y("active",e.flowPanelTab==="organization"),l(5),y("active",e.flowPanelTab==="map")}}function Zc(r,t){if(r&1){let e=v();o(0,"button",709),f("click",function(){_(e);let a=d();return u(a.toggleFlowPanel())}),o(1,"span",710),c(2,"\u{1F5FA}\uFE0F"),i(),o(3,"span",711),c(4,"\uB9F5"),i()()}}function el(r,t){if(r&1){let e=v();o(0,"div",720)(1,"div",721)(2,"button",722),f("click",function(){_(e);let a=d(2);return u(a.zoomIn())}),c(3," \u{1F50D}+ \uD655\uB300 "),i(),o(4,"button",723),f("click",function(){_(e);let a=d(2);return u(a.zoomOut())}),c(5," \u{1F50D}\u2212 \uCD95\uC18C "),i(),o(6,"button",724),f("click",function(){_(e);let a=d(2);return u(a.centerView())}),c(7," \u{1F3AF} \uC911\uC559 "),i(),o(8,"button",725),f("click",function(){_(e);let a=d(2);return u(a.fitToScreen())}),c(9," \u{1F4D0} \uC804\uCCB4 "),i()(),o(10,"div",721)(11,"button",726),f("click",function(){_(e);let a=d(2);return u(a.toggleFilter("visited"))}),c(12," \u2705 \uBC29\uBB38 \uACBD\uB85C "),i(),o(13,"button",727),f("click",function(){_(e);let a=d(2);return u(a.toggleFilter("battles"))}),c(14," \u2694\uFE0F \uC804\uD22C "),i(),o(15,"button",728),f("click",function(){_(e);let a=d(2);return u(a.toggleFilter("endings"))}),c(16," \u{1F3C1} \uC5D4\uB529 "),i()(),o(17,"div",721)(18,"select",729),ge("ngModelChange",function(a){_(e);let s=d(2);return de(s.flowLayoutType,a)||(s.flowLayoutType=a),u(a)}),f("change",function(){_(e);let a=d(2);return u(a.changeLayout(a.flowLayoutType))}),o(19,"option",730),c(20,"\uACC4\uCE35\uD615"),i(),o(21,"option",731),c(22,"\uBC29\uC0AC\uD615"),i(),o(23,"option",732),c(24,"\uC790\uC720\uD615"),i()()(),o(25,"div",721)(26,"button",733),f("click",function(){_(e);let a=d(2);return u(a.toggleStats())}),c(27," \u{1F4CA} \uD1B5\uACC4 "),i()(),o(28,"div",734)(29,"span",474),c(30,"\u{1F4A1} \uB4DC\uB798\uADF8\uB85C \uB178\uB4DC \uC774\uB3D9"),i()()()}if(r&2){let e=d(2);l(11),y("active",e.showVisitedOnly),l(2),y("active",e.showBattlesOnly),l(2),y("active",e.showEndingsOnly),l(3),se("ngModel",e.flowLayoutType),l(8),y("active",e.showStats)}}function tl(r,t){if(r&1&&(W(),S(0,"path",759)),r&2){let e=t.$implicit;y("visited",e.isVisited)("current",e.isCurrent),Y("d",e.path)("stroke",e.color)("stroke-width",e.width)("marker-end",e.isVisited?"url(#arrowhead-visited)":"url(#arrowhead)")}}function nl(r,t){r&1&&(W(),o(0,"circle",768),S(1,"animate",769),i())}function ol(r,t){if(r&1&&(W(),S(0,"circle",770)),r&2){let e=d().$implicit,n=d(3);Y("stroke",n.getNodeBorderColor(e))}}function il(r,t){if(r&1&&(W(),o(0,"g",771),S(1,"circle",772),o(2,"text",773),c(3),i()()),r&2){let e=d().$implicit;l(3),M(" ",e.badge," ")}}function al(r,t){if(r&1&&(W(),o(0,"g",774),S(1,"circle",775),o(2,"text",776),c(3),i()()),r&2){let e=d().$implicit;l(3),M(" ",e.visitCount," ")}}function rl(r,t){if(r&1){let e=v();W(),o(0,"g",760),f("mousedown",function(a){let s=_(e).$implicit,m=d(3);return u(m.onNodeMouseDown(s,a))})("click",function(a){let s=_(e).$implicit,m=d(3);return u(m.onNodeClick(s,a))}),b(1,nl,2,0,"circle",761),S(2,"circle",762),b(3,ol,1,1,"circle",763),o(4,"text",764),c(5),i(),o(6,"text",765),c(7),i(),b(8,il,4,1,"g",766)(9,al,4,1,"g",767),i()}if(r&2){let e=t.$implicit,n=d(3);y("current",e.isCurrent)("visited",e.isVisited)("available",e.isAvailable)("selected",(n.selectedNode==null?null:n.selectedNode.id)===e.id)("dragging",(n.draggingNode==null?null:n.draggingNode.id)===e.id)("battle",e.type==="battle")("ending",e.type==="ending")("event",e.type==="event"),Y("transform","translate("+e.position.x+","+e.position.y+")"),l(),p("ngIf",(n.selectedNode==null?null:n.selectedNode.id)===e.id),l(),Y("fill",n.getNodeColor(e))("stroke",n.getNodeBorderColor(e)),l(),p("ngIf",e.isCurrent),l(2),M(" ",n.getNodeIcon(e)," "),l(2),M(" ",e.title.length>12?e.title.substring(0,12)+"...":e.title," "),l(),p("ngIf",e.badge),l(),p("ngIf",e.visitCount&&e.visitCount>1)}}function cl(r,t){if(r&1){let e=v();o(0,"div",735),f("mousedown",function(a){_(e);let s=d(2);return u(s.onCanvasMouseDown(a))})("mousemove",function(a){_(e);let s=d(2);return u(s.onCanvasMouseMove(a))})("mouseup",function(){_(e);let a=d(2);return u(a.onCanvasMouseUp())})("mouseleave",function(){_(e);let a=d(2);return u(a.onCanvasMouseUp())})("wheel",function(a){_(e);let s=d(2);return u(s.onCanvasWheel(a))}),W(),o(1,"svg",736)(2,"defs")(3,"marker",737),S(4,"polygon",738),i(),o(5,"marker",739),S(6,"polygon",740),i(),o(7,"marker",741),S(8,"polygon",742),i(),o(9,"marker",743),S(10,"polygon",744),i(),o(11,"pattern",745),S(12,"path",746),i()(),o(13,"g"),S(14,"rect",747),o(15,"g",748),b(16,tl,1,8,"path",749),i(),o(17,"g",750),b(18,rl,10,25,"g",751),i()()(),Z(),o(19,"div",752)(20,"button",753),f("click",function(){_(e);let a=d(2);return u(a.zoomIn())}),o(21,"span"),c(22,"\u{1F50D}+"),i()(),o(23,"div",754),c(24),i(),o(25,"button",755),f("click",function(){_(e);let a=d(2);return u(a.zoomOut())}),o(26,"span"),c(27,"\u{1F50D}-"),i()(),o(28,"button",756),f("click",function(){_(e);let a=d(2);return u(a.resetZoom())}),o(29,"span"),c(30,"\u27F2"),i()(),o(31,"button",757),f("click",function(){_(e);let a=d(2);return u(a.focusOnCurrentNode())}),o(32,"span"),c(33,"\u{1F4CD}"),i()()(),o(34,"div",758)(35,"div",584)(36,"span",318),c(37,"\u{1F3AC}"),i(),c(38," \uC2DC\uC791"),i(),o(39,"div",584)(40,"span",318),c(41,"\u{1F4D6}"),i(),c(42," \uC2A4\uD1A0\uB9AC"),i(),o(43,"div",584)(44,"span",318),c(45,"\u2694\uFE0F"),i(),c(46," \uC804\uD22C"),i(),o(47,"div",584)(48,"span",318),c(49,"\u2728"),i(),c(50," \uC774\uBCA4\uD2B8"),i(),o(51,"div",584)(52,"span",318),c(53,"\u{1F3C1}"),i(),c(54," \uC5D4\uB529"),i()()()}if(r&2){let e=d(2);l(),Y("width","100%")("height","100%"),l(12),Y("transform",e.getCanvasTransform()),l(3),p("ngForOf",e.storyConnections),l(2),p("ngForOf",e.visibleNodes),l(6),M("",(e.flowZoomLevel*100).toFixed(0),"%")}}function ll(r,t){if(r&1&&(o(0,"p"),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function sl(r,t){r&1&&(o(0,"p",789),c(1,"... \uB354\uBCF4\uAE30"),i())}function dl(r,t){if(r&1&&(o(0,"div",787)(1,"h4"),c(2,"\u{1F4D6} \uB0B4\uC6A9 \uBBF8\uB9AC\uBCF4\uAE30"),i(),b(3,ll,2,1,"p",112)(4,sl,2,0,"p",788),i()),r&2){let e=d(3);l(3),p("ngForOf",e.selectedNode.content.slice(0,3)),l(),p("ngIf",e.selectedNode.content.length>3)}}function gl(r,t){if(r&1&&(o(0,"div",790)(1,"h4"),c(2,"\u{1F4CA} \uD1B5\uACC4"),i(),o(3,"div",267)(4,"span",268),c(5,"\uBC29\uBB38 \uD69F\uC218:"),i(),o(6,"span",272),c(7),i()()()),r&2){let e=d(3);l(7),h(e.selectedNode.visitCount||1)}}function pl(r,t){if(r&1&&(o(0,"li"),c(1),i()),r&2){let e=t.$implicit;l(),M(" ",e.description||e.type," ")}}function ml(r,t){if(r&1&&(o(0,"div",791)(1,"h4"),c(2,"\u{1F512} \uC9C4\uC785 \uC870\uAC74"),i(),o(3,"ul"),b(4,pl,2,1,"li",112),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.selectedNode.conditions)}}function _l(r,t){if(r&1&&(o(0,"div",598)(1,"span",793),c(2),i(),o(3,"span",293),c(4),i()()),r&2){let e=t.$implicit;l(2),h(e.icon||"\u25B6\uFE0F"),l(2),h(e.text)}}function ul(r,t){if(r&1&&(o(0,"div",792)(1,"h4"),c(2),i(),b(3,_l,5,2,"div",597),i()),r&2){let e=d(3);l(2),M("\u{1F500} \uC120\uD0DD\uC9C0 (",e.selectedNode.choices.length,"\uAC1C)"),l(),p("ngForOf",e.selectedNode.choices)}}function Cl(r,t){if(r&1&&(o(0,"div",794)(1,"h4"),c(2,"\u2694\uFE0F \uC804\uD22C \uC815\uBCF4"),i(),o(3,"p")(4,"strong"),c(5,"\uC801:"),i(),c(6),i(),o(7,"p")(8,"strong"),c(9,"\uB09C\uC774\uB3C4:"),i(),c(10),i()()),r&2){let e=d(3);l(6),M(" ",e.selectedNode.battleConfig.enemyName),l(4),M(" ","\u2B50".repeat(e.selectedNode.battleConfig.difficulty))}}function fl(r,t){if(r&1){let e=v();o(0,"div",777)(1,"div",778)(2,"h3"),c(3),i(),o(4,"button",779),f("click",function(){_(e);let a=d(2);return u(a.selectedNode=null)}),c(5,"\u2715"),i()(),o(6,"div",780)(7,"div",781)(8,"span",566),c(9),i()(),b(10,dl,5,2,"div",782)(11,gl,8,1,"div",783)(12,ml,5,1,"div",784)(13,ul,4,2,"div",785)(14,Cl,11,2,"div",786),i()()}if(r&2){let e=d(2);l(3),h(e.selectedNode.title),l(5),y("battle",e.selectedNode.type==="battle")("ending",e.selectedNode.type==="ending")("event",e.selectedNode.type==="event"),l(),E(" ",e.getNodeIcon(e.selectedNode)," ",e.selectedNode.type," "),l(),p("ngIf",e.selectedNode.content&&e.selectedNode.content.length>0),l(),p("ngIf",e.selectedNode.isVisited),l(),p("ngIf",e.selectedNode.conditions&&e.selectedNode.conditions.length>0),l(),p("ngIf",e.selectedNode.choices&&e.selectedNode.choices.length>0),l(),p("ngIf",e.selectedNode.type==="battle"&&e.selectedNode.battleConfig)}}function bl(r,t){if(r&1&&(o(0,"div",799)(1,"h4"),c(2,"\u{1F4CD} \uD604\uC7AC \uC704\uCE58"),i(),o(3,"div",800)(4,"div",801),c(5),i(),o(6,"div",802)(7,"div",803),c(8),i(),o(9,"div",804),c(10),i()()()()),r&2){let e=d(3);l(5),h(e.getNodeIcon(e.getCurrentNode())),l(3),h(e.getCurrentNode().title),l(2),M("\uACBD\uB85C: ",e.currentPath.join(" \u2192 ")||"\uC2DC\uC791")}}function hl(r,t){if(r&1&&(o(0,"span",812),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u2192 ",e.choiceText)}}function Pl(r,t){if(r&1&&(rn(0),o(1,"span",809),c(2),i(),o(3,"span",810),c(4),i(),b(5,hl,2,1,"span",811),cn()),r&2){let e=t.ngIf,n=d().$implicit,a=d(4);l(2),h(a.getNodeIcon(e)),l(2),h(e.title),l(),p("ngIf",n.choiceText)}}function Ml(r,t){if(r&1&&(o(0,"div",808),b(1,Pl,6,3,"ng-container",97),i()),r&2){let e=t.$implicit,n=d(4);l(),p("ngIf",n.getNodeById(e.nodeId))}}function xl(r,t){if(r&1&&(o(0,"div",805)(1,"h4"),c(2,"\u{1F6E4}\uFE0F \uCD5C\uADFC \uACBD\uB85C"),i(),o(3,"div",806),b(4,Ml,2,1,"div",807),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.storyProgress.pathHistory.slice(-5).reverse())}}function vl(r,t){if(r&1&&(o(0,"div",795)(1,"h3"),c(2,"\u{1F4CA} \uC9C4\uD589 \uD1B5\uACC4"),i(),b(3,bl,11,3,"div",796),o(4,"div",326)(5,"div",797)(6,"div",328),c(7,"\u{1F4CD}"),i(),o(8,"div",272),c(9),i(),o(10,"div",268),c(11,"\uBC29\uBB38\uD55C \uB178\uB4DC"),i()(),o(12,"div",797)(13,"div",328),c(14,"\u{1F500}"),i(),o(15,"div",272),c(16),i(),o(17,"div",268),c(18,"\uC120\uD0DD \uD69F\uC218"),i()(),o(19,"div",797)(20,"div",328),c(21,"\u2694\uFE0F"),i(),o(22,"div",272),c(23),i(),o(24,"div",268),c(25,"\uC804\uD22C \uC2B9\uB960"),i()(),o(26,"div",797)(27,"div",328),c(28,"\u{1F5FA}\uFE0F"),i(),o(29,"div",272),c(30),i(),o(31,"div",268),c(32,"\uD0D0\uD5D8\uB960"),i()()(),b(33,xl,5,1,"div",798),i()),r&2){let e=d(2);l(3),p("ngIf",e.getCurrentNode()),l(6),E("",e.storyProgress.visitedNodes.length,"/",e.storyNodes.length),l(7),h(e.storyProgress.totalChoices),l(7),E(" ",e.storyProgress.battlesWon,"/",e.storyProgress.battlesWon+e.storyProgress.battlesLost," "),l(7),M("",e.calculateExplorationRate(),"%"),l(3),p("ngIf",e.storyProgress.pathHistory.length>0)}}function Ol(r,t){if(r&1){let e=v();o(0,"div",813)(1,"div",405),c(2,"\u{1F5FA}\uFE0F"),i(),o(3,"h3"),c(4,"\uC2A4\uD1A0\uB9AC \uB9F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4"),i(),o(5,"p"),c(6,"\uC0D8\uD50C \uC2A4\uD1A0\uB9AC\uB97C \uB85C\uB4DC\uD558\uAC70\uB098 AI\uB85C \uC0C8\uB85C\uC6B4 \uC2A4\uD1A0\uB9AC\uB97C \uC0DD\uC131\uD558\uC138\uC694."),i(),o(7,"div",814)(8,"button",815),f("click",function(){_(e);let a=d(2);return u(a.loadSampleStoryMap())}),c(9," \u{1F4E5} \uC0D8\uD50C \uC2A4\uD1A0\uB9AC \uB85C\uB4DC "),i(),o(10,"button",816),f("click",function(){_(e);let a=d(2);return u(a.toggleStoryCreatorPanel())}),c(11," \u2728 AI \uC2A4\uD1A0\uB9AC \uC0DD\uC131 "),i()()()}}function yl(r,t){if(r&1){let e=v();o(0,"div",712)(1,"div",713)(2,"div",714)(3,"div",119)(4,"h2"),c(5,"\u{1F5FA}\uFE0F \uBE44\uC120\uD615 \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0"),i(),o(6,"span",42),c(7,"\uC120\uD0DD\uACFC \uC804\uD22C\uAC00 \uB9CC\uB4DC\uB294 \uB2F9\uC2E0\uB9CC\uC758 \uC5EC\uC815"),i()(),o(8,"button",79),f("click",function(){_(e);let a=d();return u(a.toggleAdvancedFlowPanel())}),c(9," \u2715 "),i()(),b(10,el,31,9,"div",715)(11,cl,55,6,"div",716)(12,fl,15,14,"div",717)(13,vl,34,8,"div",718)(14,Ol,12,0,"div",719),i()()}if(r&2){let e=d();l(10),p("ngIf",e.storyNodes.length>0),l(),p("ngIf",e.storyNodes.length>0),l(),p("ngIf",e.selectedNode),l(),p("ngIf",e.showStats&&e.storyNodes.length>0),l(),p("ngIf",e.storyNodes.length===0)}}function wl(r,t){if(r&1&&(o(0,"div",822)(1,"div",823),c(2),i(),o(3,"div",824)(4,"h4"),c(5),i(),o(6,"p",825),c(7),i()()()),r&2){let e=t.ngIf,n=d(2);l(2),h(n.getNodeIcon(e)),l(3),h(e.title),l(2),h(e.type)}}function kl(r,t){if(r&1&&(o(0,"div",826)(1,"span",827),c(2,"\uC120\uD0DD\uC9C0 ID:"),i(),o(3,"span",828),c(4),i()()),r&2){let e=d(2);l(4),h(e.currentLinkingChoiceId)}}function Sl(r,t){r&1&&(o(0,"span",830),c(1," \u2713 \uC5F0\uACB0\uB428 "),i())}function Dl(r,t){if(r&1&&(o(0,"span",159),c(1),i()),r&2){let e=t.$implicit;l(),h(e)}}function Il(r,t){if(r&1&&(o(0,"div",157),b(1,Dl,2,1,"span",158),i()),r&2){let e=d().$implicit;l(),p("ngForOf",e.tags.slice(0,3))}}function El(r,t){if(r&1){let e=v();o(0,"div",151),f("click",function(){let a=_(e).$implicit,s=d(2);return u(s.linkScenarioToFlowNode(a.id))}),o(1,"div",152)(2,"h4"),c(3),i(),o(4,"span",609),c(5),i(),b(6,Sl,2,0,"span",829),i(),o(7,"div",610)(8,"p",534),c(9),i(),o(10,"div",155)(11,"span",110),c(12),i(),o(13,"span",110),c(14),i()(),b(15,Il,2,1,"div",154),i()()}if(r&2){let e=t.$implicit,n=d(2);y("linked",n.getLinkedScenarioId(n.currentLinkingNodeId,n.currentLinkingChoiceId)===e.id),l(3),h(e.title),l(2),h(e.genre),l(),p("ngIf",n.getLinkedScenarioId(n.currentLinkingNodeId,n.currentLinkingChoiceId)===e.id),l(3),h(e.description),l(3),M("\u{1F4CD} ",e.setting),l(2),M("\u{1F3AD} ",e.mood),l(),p("ngIf",e.tags&&e.tags.length>0)}}function Bl(r,t){if(r&1){let e=v();o(0,"div",611)(1,"div",405),c(2,"\u{1F3AC}"),i(),o(3,"p"),c(4,"\uC800\uC7A5\uB41C \uC2DC\uB098\uB9AC\uC624\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),i(),o(5,"button",612),f("click",function(){_(e);let a=d(2);return a.openScenarioCreator(),u(a.closeFlowScenarioLinkPanel())}),c(6," \u2728 \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131\uD558\uAE30 "),i()()}}function Tl(r,t){if(r&1){let e=v();o(0,"div",817)(1,"div",818)(2,"div",602)(3,"div",119)(4,"span",603),c(5,"\u22EE\u22EE"),i(),o(6,"h3"),c(7,"\u{1F3AC} \uD50C\uB85C\uC6B0 \uB178\uB4DC\uC5D0 \uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0"),i()(),o(8,"button",79),f("click",function(){_(e);let a=d();return u(a.closeFlowScenarioLinkPanel())}),c(9,"\u2715"),i()(),o(10,"div",604),b(11,wl,8,3,"div",819)(12,kl,5,1,"div",820),o(13,"p",605),c(14,"\u{1F4A1} \uC774 \uC120\uD0DD\uC9C0\uC5D0 \uC5F0\uACB0\uD560 \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD558\uC138\uC694."),i()(),o(15,"div",606)(16,"div",607),b(17,El,16,9,"div",821),i(),b(18,Bl,7,0,"div",608),i()()()}if(r&2){let e=d();l(11),p("ngIf",e.getNodeById(e.currentLinkingNodeId)),l(),p("ngIf",e.currentLinkingChoiceId),l(5),p("ngForOf",e.savedScenarios),l(),p("ngIf",e.savedScenarios.length===0)}}function ql(r,t){if(r&1){let e=v();o(0,"div",351)(1,"div",835)(2,"h3"),c(3,"\u5167\u529F\u4FEE\u7149 (\uB0B4\uACF5\uC218\uB828)"),i(),o(4,"div",836)(5,"div",837)(6,"span",838),c(7,"\u5167\u529B (\uB0B4\uB825)"),i(),o(8,"span",839),c(9),i()(),o(10,"div",840),S(11,"div",841),i(),o(12,"div",842)(13,"span"),c(14),i(),o(15,"span"),c(16),i(),o(17,"span"),c(18),i()()(),o(19,"div",843)(20,"div",844)(21,"span",845),c(22,"\u2B50"),i(),o(23,"div",846)(24,"span",847),c(25),i(),o(26,"span",848),c(27,"\u5883\u754C (\uACBD\uC9C0)"),i()()(),o(28,"div",849)(29,"span",850),c(30,"\uB3CC\uD30C \uC9C4\uD589\uB3C4"),i(),o(31,"div",851),S(32,"div",313),i(),o(33,"span",852),c(34),i()()(),o(35,"div",853)(36,"button",854),f("click",function(){_(e);let a=d(2);return u(a.cultivateInternalPower(1))}),o(37,"span",468),c(38,"\u{1F9D8}"),i(),o(39,"span",855),c(40,"1\uC2DC\uAC04 \uC218\uB828"),i()(),o(41,"button",854),f("click",function(){_(e);let a=d(2);return u(a.cultivateInternalPower(4))}),o(42,"span",468),c(43,"\u{1F9D8}\u200D\u2642\uFE0F"),i(),o(44,"span",855),c(45,"4\uC2DC\uAC04 \uC218\uB828"),i()(),o(46,"button",854),f("click",function(){_(e);let a=d(2);return u(a.cultivateInternalPower(12))}),o(47,"span",468),c(48,"\u{1F9D8}\u200D\u2640\uFE0F"),i(),o(49,"span",855),c(50,"12\uC2DC\uAC04 \uC218\uB828"),i()()(),o(51,"div",856)(52,"span",857),c(53,"\u4FEE\u7DF4\u5EA6 (\uC218\uB828\uB3C4)"),i(),o(54,"div",858),S(55,"div",859),i(),o(56,"span",860),c(57),i()()()()}if(r&2){let e=d(2);l(9),E("",e.playerInternalPower.current," / ",e.playerInternalPower.max),l(2),q("width",e.playerInternalPower.current/e.playerInternalPower.max*100,"%"),l(3),M("\uD68C\uBCF5 \uC18D\uB3C4: ",e.playerInternalPower.recoveryRate,"/\uD134"),l(2),M("\uC21C\uB3C4: ",e.playerInternalPower.purity,"%"),l(2),M("\uC548\uC815\uC131: ",e.playerInternalPower.stability,"%"),l(2),U("realm-"+e.playerInternalPower.realm),l(5),h(e.playerInternalPower.realm),l(7),q("width",e.playerInternalPower.realmProgress,"%"),l(2),M("",e.playerInternalPower.realmProgress,"%"),l(21),q("width",e.playerInternalPower.trainingLevel,"%"),l(2),M("",e.playerInternalPower.trainingLevel,"%")}}function Al(r,t){r&1&&(o(0,"span",879),c(1,"\u2694\uFE0F"),i())}function Gl(r,t){r&1&&(o(0,"span",879),c(1,"\u{1F4FF}"),i())}function Nl(r,t){r&1&&(o(0,"span",879),c(1,"\u{1F985}"),i())}function zl(r,t){r&1&&(o(0,"span",879),c(1,"\u{1F5E1}\uFE0F"),i())}function Fl(r,t){if(r&1&&(o(0,"div",880)(1,"span",881),c(2),i(),o(3,"span",882),c(4),i()()),r&2){let e=d().$implicit;l(),U("element-"+e.element),l(),M(" ",e.element==="fire"?"\u{1F525}":e.element==="ice"?"\u2744\uFE0F":e.element==="wind"?"\u{1F32A}\uFE0F":e.element==="thunder"?"\u26A1":"\u2620\uFE0F"," "),l(2),h(e.element)}}function Ll(r,t){if(r&1&&(o(0,"div",883)(1,"span",884),c(2,"\uC18C\uC18D:"),i(),o(3,"span",885),c(4),i()()),r&2){let e=d().$implicit,n=d(3);l(4),h(n.getFactionName(e.factionId))}}function Rl(r,t){if(r&1&&(o(0,"div",865)(1,"div",866)(2,"div",867)(3,"h4",868),c(4),i(),o(5,"p",869),c(6),i()(),o(7,"span",870),c(8),i()(),o(9,"div",871),b(10,Al,2,0,"span",872)(11,Gl,2,0,"span",872)(12,Nl,2,0,"span",872)(13,zl,2,0,"span",872),o(14,"span",873),c(15),i()(),o(16,"div",874)(17,"div",267)(18,"span",268),c(19,"\uC18C\uBAA8 \uB0B4\uB825:"),i(),o(20,"span",272),c(21),i()(),o(22,"div",267)(23,"span",268),c(24,"\uC704\uB825:"),i(),o(25,"span",272),c(26),i()(),o(27,"div",267)(28,"span",268),c(29,"\uBA85\uC911\uB960:"),i(),o(30,"span",272),c(31),i()(),o(32,"div",267)(33,"span",268),c(34,"\uCE58\uBA85\uD0C0:"),i(),o(35,"span",272),c(36),i()()(),o(37,"div",875)(38,"p"),c(39),i(),o(40,"p",876),c(41),i()(),b(42,Fl,5,4,"div",877)(43,Ll,5,1,"div",878),i()),r&2){let e=t.$implicit;U("grade-"+e.grade),l(4),h(e.chineseName),l(2),h(e.name),l(2),h(e.grade),l(2),p("ngIf",e.type==="choShik"),l(),p("ngIf",e.type==="shimBeop"),l(),p("ngIf",e.type==="gyeongGong"),l(),p("ngIf",e.type==="amGi"),l(2),M(" ",e.type==="choShik"?"\uCD08\uC2DD":e.type==="shimBeop"?"\uC2EC\uBC95":e.type==="gyeongGong"?"\uACBD\uACF5":"\uC554\uAE30"," "),l(6),h(e.internalPowerCost),l(5),M("\xD7",e.damageMultiplier),l(5),M("",(e.hitRate*100).toFixed(0),"%"),l(5),M("",(e.criticalRate*100).toFixed(0),"%"),l(3),h(e.description),l(2),h(e.skillEffect),l(),p("ngIf",e.element),l(),p("ngIf",e.factionId)}}function $l(r,t){r&1&&(o(0,"div",886)(1,"p"),c(2,"\uC544\uC9C1 \uC2B5\uB4DD\uD55C \uBB34\uACF5\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."),i(),o(3,"p"),c(4,"\uBB38\uD30C\uC5D0 \uC785\uBB38\uD558\uAC70\uB098 \uBB34\uACF5 \uBE44\uAE09\uC744 \uC5BB\uC73C\uC138\uC694!"),i()())}function Vl(r,t){if(r&1&&(o(0,"div",351)(1,"div",340)(2,"h3"),c(3,"\u6B66\u529F\u62DB\u5F0F (\uBB34\uACF5\uCD08\uC2DD)"),i(),o(4,"div",861)(5,"span"),c(6),i()(),o(7,"div",862),b(8,Rl,44,18,"div",863),i(),b(9,$l,5,0,"div",864),i()()),r&2){let e=d(2);l(6),M("\uC2B5\uB4DD\uD55C \uBB34\uACF5: ",e.learnedMartialSkills.length,"\uAC1C"),l(2),p("ngForOf",e.learnedMartialSkills),l(),p("ngIf",e.learnedMartialSkills.length===0)}}function jl(r,t){if(r&1&&(o(0,"div",890)(1,"div",891)(2,"div",892)(3,"h4"),c(4),i(),o(5,"p",893),c(6),i()(),o(7,"div",894),c(8),i(),o(9,"div",895)(10,"p"),c(11),i(),o(12,"p")(13,"strong"),c(14,"\uBCF8\uAC70\uC9C0:"),i(),c(15),i(),o(16,"p")(17,"strong"),c(18,"\uCC3D\uC2DC\uC790:"),i(),c(19),i()(),o(20,"div",896)(21,"span"),c(22,"\uD3C9\uD310:"),i(),o(23,"div",897),S(24,"div",898),i(),o(25,"span"),c(26),i()()()()),r&2){let e=d(3);l(4),h(e.playerFaction.chineseName),l(2),h(e.playerFaction.name),l(),U("type-"+e.playerFaction.type),l(),M(" ",e.playerFaction.type==="righteous"?"\u6B63\u6D3E":e.playerFaction.type==="evil"?"\u9B54\u654E":"\u4E2D\u7ACB"," "),l(3),h(e.playerFaction.description),l(4),M(" ",e.playerFaction.headquarters),l(4),M(" ",e.playerFaction.founder),l(5),q("width",(e.playerFaction.reputation+1e3)/2e3*100+"%"),l(2),h(e.playerFaction.reputation)}}function Hl(r,t){if(r&1&&(o(0,"span",906),c(1),i()),r&2){let e=t.$implicit;l(),M(" ",e," ")}}function Wl(r,t){if(r&1){let e=v();o(0,"div",902)(1,"div",892)(2,"h4"),c(3),i(),o(4,"p",893),c(5),i()(),o(6,"div",894),c(7),i(),o(8,"div",895)(9,"p"),c(10),i(),o(11,"p")(12,"strong"),c(13,"\uBCF8\uAC70\uC9C0:"),i(),c(14),i()(),o(15,"div",903),b(16,Hl,2,1,"span",904),i(),o(17,"button",905),f("click",function(){let a=_(e).$implicit,s=d(4);return u(s.joinFaction(a.id))}),c(18," \uC785\uBB38\uD558\uAE30 "),i()()}if(r&2){let e=t.$implicit;U("type-"+e.type),l(3),h(e.chineseName),l(2),h(e.name),l(),U("type-"+e.type),l(),M(" ",e.type==="righteous"?"\u6B63\u6D3E":e.type==="evil"?"\u9B54\u654E":"\u4E2D\u7ACB"," "),l(3),h(e.description),l(4),M(" ",e.headquarters),l(2),p("ngForOf",e.specialties)}}function Yl(r,t){if(r&1&&(o(0,"div",899)(1,"p"),c(2,"\uC544\uC9C1 \uBB38\uD30C\uC5D0 \uC18C\uC18D\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."),i(),o(3,"h4"),c(4,"\uC785\uBB38 \uAC00\uB2A5\uD55C \uBB38\uD30C:"),i(),o(5,"div",900),b(6,Wl,19,10,"div",901),i()()),r&2){let e=d(3);l(6),p("ngForOf",e.availableFactions)}}function Ul(r,t){if(r&1&&(o(0,"div",351)(1,"div",887)(2,"h3"),c(3,"\u9580\u6D3E (\uBB38\uD30C)"),i(),b(4,jl,27,11,"div",888)(5,Yl,7,1,"div",889),i()()),r&2){let e=d(2);l(4),p("ngIf",e.playerFaction),l(),p("ngIf",!e.playerFaction)}}function Kl(r,t){r&1&&(o(0,"span",926),c(1,"\u2B50"),i())}function Xl(r,t){if(r&1&&(o(0,"div",465)(1,"span",466),c(2,"\u2728"),i(),o(3,"span",467),c(4),i()()),r&2){let e=t.$implicit;l(4),h(e.description)}}function Ql(r,t){if(r&1&&(o(0,"div",927)(1,"span",928),c(2,"\u26A0\uFE0F"),i(),o(3,"span",929),c(4),i()()),r&2){let e=d().$implicit;l(4),E("",e.sideEffect," (",(e.sideEffectChance*100).toFixed(0),"%)")}}function Jl(r,t){if(r&1){let e=v();o(0,"div",911)(1,"div",912)(2,"div",913)(3,"h4",914),c(4),i(),o(5,"p",915),c(6),i()(),o(7,"span",916),c(8),i()(),o(9,"div",917)(10,"span",566),c(11),i(),o(12,"span",918),b(13,Kl,2,0,"span",919),i()(),o(14,"div",920)(15,"p"),c(16),i()(),o(17,"div",921),b(18,Xl,5,1,"div",464),i(),b(19,Ql,5,2,"div",922),o(20,"div",923)(21,"span",924),c(22),i(),o(23,"button",925),f("click",function(){let a=_(e).$implicit,s=d(3);return u(s.useElixir(a.id))}),c(24," \uC0AC\uC6A9\uD558\uAE30 "),i()()()}if(r&2){let e=t.$implicit;U("grade-"+e.grade),l(4),h(e.chineseName),l(2),h(e.name),l(2),h(e.grade),l(3),h(e.type),l(2),p("ngForOf",ee(11,Ut).constructor(e.rarity)),l(3),h(e.description),l(2),p("ngForOf",e.effects),l(),p("ngIf",e.sideEffect),l(3),M("\u{1F4B0} ",e.price,"G")}}function Zl(r,t){r&1&&(o(0,"div",930)(1,"p"),c(2,"\uBCF4\uC720\uD55C \uB2E8\uC57D\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."),i()())}function es(r,t){if(r&1&&(o(0,"div",351)(1,"div",907)(2,"h3"),c(3,"\u4E39\u85E5 (\uB2E8\uC57D)"),i(),o(4,"div",908),b(5,Jl,25,12,"div",909),i(),b(6,Zl,3,0,"div",910),i()()),r&2){let e=d(2);l(5),p("ngForOf",e.elixirs),l(),p("ngIf",e.elixirs.length===0)}}function ts(r,t){if(r&1){let e=v();o(0,"div",941)(1,"button",942),f("click",function(){_(e);let a=d().$implicit,s=d(3);return u(s.openMeridian(a.id))}),c(2," \uAC1C\uD1B5 "),i()()}}function ns(r,t){if(r&1&&(o(0,"div",937)(1,"div",938)(2,"span",939),c(3),i()(),b(4,ts,3,0,"div",940),i()),r&2){let e=t.$implicit,n=t.index,a=d(3);q("top",a.getMeridianPosition(n).top)("left",a.getMeridianPosition(n).left),y("opened",e.isOpened),p("title",e.name+" "+e.chineseName),l(3),h(n+1),l(),p("ngIf",!e.isOpened)}}function os(r,t){if(r&1&&(o(0,"div",952)(1,"div",851),S(2,"div",313),i(),o(3,"span"),c(4),i()()),r&2){let e=d().$implicit;l(2),q("width",e.openProgress,"%"),l(2),M("",e.openProgress,"%")}}function is(r,t){if(r&1&&(o(0,"span",953),c(1),i()),r&2){let e=t.$implicit,n=d().$implicit;l(),E(" ",e,": +",n.bonus[e]," ")}}function as(r,t){r&1&&(o(0,"span",954),c(1,"\u2713 \uAC1C\uD1B5\uB428"),i())}function rs(r,t){if(r&1){let e=v();o(0,"button",955),f("click",function(){_(e);let a=d().$implicit,s=d(3);return u(s.openMeridian(a.id))}),c(1," \uAC1C\uD1B5\uD558\uAE30 "),i()}}function cs(r,t){if(r&1&&(o(0,"div",943)(1,"div",944),c(2),i(),o(3,"div",945)(4,"h4"),c(5),i(),o(6,"p"),c(7),i(),b(8,os,5,3,"div",946),o(9,"div",947),b(10,is,2,2,"span",948),i()(),o(11,"div",949),b(12,as,2,0,"span",950)(13,rs,2,0,"button",951),i()()),r&2){let e=t.$implicit,n=t.index,a=d(3);y("opened",e.isOpened),l(2),h(n+1),l(3),h(e.chineseName),l(2),h(e.name),l(),p("ngIf",!e.isOpened),l(2),p("ngForOf",a.getObjectKeys(e.bonus)),l(2),p("ngIf",e.isOpened),l(),p("ngIf",!e.isOpened)}}function ls(r,t){if(r&1&&(o(0,"div",351)(1,"div",931)(2,"h3"),c(3,"\u7D93\u8108 (\uACBD\uB9E5)"),i(),o(4,"div",932)(5,"p"),c(6),i()(),o(7,"div",933),b(8,ns,5,9,"div",934),i(),o(9,"div",935),b(10,cs,14,9,"div",936),i()()()),r&2){let e=d(2);l(6),E("\uAC1C\uD1B5\uB41C \uD608\uB3C4: ",e.playerInternalPower.meridians.opened," / ",e.playerInternalPower.meridians.total),l(2),p("ngForOf",e.playerInternalPower.meridians.meridians),l(2),p("ngForOf",e.playerInternalPower.meridians.meridians)}}function ss(r,t){if(r&1){let e=v();o(0,"div",831),F(1,"async"),f("click",function(){_(e);let a=d();return u(a.closeWuxiaPanel())}),o(2,"div",832),F(3,"async"),f("click",function(a){return _(e),u(a.stopPropagation())}),o(4,"div",833)(5,"h2"),c(6,"\u{1F3AF} \uC218\uB828 \uBAA8\uB4DC \u4FEE\u7149\u6A21\u5F0F"),i(),o(7,"button",79),f("click",function(){_(e);let a=d();return u(a.closeWuxiaPanel())}),c(8,"\u2715"),i()(),o(9,"div",834)(10,"button",348),f("click",function(){_(e);let a=d();return u(a.novelState.setWuxiaTab("cultivation"))}),c(11," \u{1F525} \uB0B4\uACF5\uC218\uB828 "),i(),o(12,"button",348),f("click",function(){_(e);let a=d();return u(a.novelState.setWuxiaTab("skills"))}),c(13," \u{1F4D6} \uBB34\uACF5\uCD08\uC2DD "),i(),o(14,"button",348),f("click",function(){_(e);let a=d();return u(a.novelState.setWuxiaTab("faction"))}),c(15," \u{1F3DB}\uFE0F \uBB38\uD30C "),i(),o(16,"button",348),f("click",function(){_(e);let a=d();return u(a.novelState.setWuxiaTab("elixir"))}),c(17," \u{1F48A} \uB2E8\uC57D "),i(),o(18,"button",348),f("click",function(){_(e);let a=d();return u(a.novelState.setWuxiaTab("meridians"))}),c(19," \u2B55 \uD608\uB3C4 "),i()(),b(20,ql,58,16,"div",350)(21,Vl,10,3,"div",350)(22,Ul,6,2,"div",350)(23,es,7,2,"div",350)(24,ls,11,4,"div",350),i()()}if(r&2){let e=d();y("mobile",L(1,19,e.responsiveService.isMobile$)),l(2),y("mobile",L(3,21,e.responsiveService.isMobile$)),l(8),y("active",e.wuxiaActiveTab==="cultivation"),l(2),y("active",e.wuxiaActiveTab==="skills"),l(2),y("active",e.wuxiaActiveTab==="faction"),l(2),y("active",e.wuxiaActiveTab==="elixir"),l(2),y("active",e.wuxiaActiveTab==="meridians"),l(2),p("ngIf",e.wuxiaActiveTab==="cultivation"),l(),p("ngIf",e.wuxiaActiveTab==="skills"),l(),p("ngIf",e.wuxiaActiveTab==="faction"),l(),p("ngIf",e.wuxiaActiveTab==="elixir"),l(),p("ngIf",e.wuxiaActiveTab==="meridians")}}function ds(r,t){if(r&1&&(o(0,"div",991)(1,"div",992),c(2,"\u26D1\uFE0F"),i(),o(3,"div",993),c(4),i()()),r&2){let e=d(3);l(4),h(e.playerCharacter.equipment==null||e.playerCharacter.equipment.helmet==null?null:e.playerCharacter.equipment.helmet.baseType)}}function gs(r,t){r&1&&(o(0,"div",994)(1,"div",995),c(2,"\u26D1\uFE0F"),i()())}function ps(r,t){if(r&1&&(o(0,"div",991)(1,"div",992),c(2,"\u{1F6E1}\uFE0F"),i(),o(3,"div",993),c(4),i()()),r&2){let e=d(3);l(4),h(e.playerCharacter.equipment==null||e.playerCharacter.equipment.armor==null?null:e.playerCharacter.equipment.armor.baseType)}}function ms(r,t){r&1&&(o(0,"div",994)(1,"div",995),c(2,"\u{1F6E1}\uFE0F"),i()())}function _s(r,t){if(r&1&&(o(0,"div",991)(1,"div",992),c(2,"\u{1F9E4}"),i(),o(3,"div",993),c(4),i()()),r&2){let e=d(3);l(4),h(e.playerCharacter.equipment==null||e.playerCharacter.equipment.gloves==null?null:e.playerCharacter.equipment.gloves.baseType)}}function us(r,t){r&1&&(o(0,"div",994)(1,"div",995),c(2,"\u{1F9E4}"),i()())}function Cs(r,t){if(r&1&&(o(0,"div",991)(1,"div",992),c(2,"\u{1F462}"),i(),o(3,"div",993),c(4),i()()),r&2){let e=d(3);l(4),h(e.playerCharacter.equipment==null||e.playerCharacter.equipment.boots==null?null:e.playerCharacter.equipment.boots.baseType)}}function fs(r,t){r&1&&(o(0,"div",994)(1,"div",995),c(2,"\u{1F462}"),i()())}function bs(r,t){if(r&1&&(o(0,"div",998),c(1),i()),r&2){let e=d(4);l(),E(" ",e.playerCharacter.equipment==null||e.playerCharacter.equipment.weapon==null||e.playerCharacter.equipment.weapon.baseStats==null?null:e.playerCharacter.equipment.weapon.baseStats.minDamage,"-",e.playerCharacter.equipment==null||e.playerCharacter.equipment.weapon==null||e.playerCharacter.equipment.weapon.baseStats==null?null:e.playerCharacter.equipment.weapon.baseStats.maxDamage," ")}}function hs(r,t){if(r&1&&(o(0,"div",991)(1,"div",996),c(2,"\u2694\uFE0F"),i(),o(3,"div",993),c(4),i(),b(5,bs,2,2,"div",997),i()),r&2){let e=d(3);l(4),h(e.playerCharacter.equipment==null||e.playerCharacter.equipment.weapon==null?null:e.playerCharacter.equipment.weapon.baseType),l(),p("ngIf",e.playerCharacter.equipment==null||e.playerCharacter.equipment.weapon==null?null:e.playerCharacter.equipment.weapon.baseStats)}}function Ps(r,t){r&1&&(o(0,"div",994)(1,"div",999),c(2,"\u2694\uFE0F"),i()())}function Ms(r,t){if(r&1&&(o(0,"div",991)(1,"div",992),c(2,"\u{1F4FF}"),i(),o(3,"div",993),c(4),i()()),r&2){let e=d(3);l(4),h(e.playerCharacter.equipment==null||e.playerCharacter.equipment.amulet==null?null:e.playerCharacter.equipment.amulet.baseType)}}function xs(r,t){r&1&&(o(0,"div",994)(1,"div",995),c(2,"\u{1F4FF}"),i()())}function vs(r,t){if(r&1&&(o(0,"div",991)(1,"div",992),c(2,"\u{1F397}\uFE0F"),i(),o(3,"div",993),c(4),i()()),r&2){let e=d(3);l(4),h(e.playerCharacter.equipment==null||e.playerCharacter.equipment.belt==null?null:e.playerCharacter.equipment.belt.baseType)}}function Os(r,t){r&1&&(o(0,"div",994)(1,"div",995),c(2,"\u{1F397}\uFE0F"),i()())}function ys(r,t){if(r&1&&(o(0,"div",991)(1,"div",992),c(2,"\u{1F48D}"),i(),o(3,"div",993),c(4),i()()),r&2){let e=d(3);l(4),h(e.playerCharacter.equipment==null||e.playerCharacter.equipment.ring1==null?null:e.playerCharacter.equipment.ring1.baseType)}}function ws(r,t){r&1&&(o(0,"div",994)(1,"div",995),c(2,"\u{1F48D}"),i()())}function ks(r,t){if(r&1&&(o(0,"div",991)(1,"div",992),c(2,"\u{1F48D}"),i(),o(3,"div",993),c(4),i()()),r&2){let e=d(3);l(4),h(e.playerCharacter.equipment==null||e.playerCharacter.equipment.ring2==null?null:e.playerCharacter.equipment.ring2.baseType)}}function Ss(r,t){r&1&&(o(0,"div",994)(1,"div",995),c(2,"\u{1F48D}"),i()())}function Ds(r,t){if(r&1){let e=v();o(0,"div",974)(1,"h4",325),c(2,"\u2694\uFE0F \uC7A5\uBE44 \uC2AC\uB86F"),i(),o(3,"div",975)(4,"div",354)(5,"div",976),f("click",function(){_(e);let a=d(2);return u((a.playerCharacter.equipment==null?null:a.playerCharacter.equipment.helmet)&&a.unequipItem("helmet"))}),o(6,"div",977),c(7,"\uD22C\uAD6C"),i(),b(8,ds,5,1,"div",978)(9,gs,3,0,"ng-template",null,3,j),i(),o(11,"div",979),f("click",function(){_(e);let a=d(2);return u((a.playerCharacter.equipment==null?null:a.playerCharacter.equipment.armor)&&a.unequipItem("armor"))}),o(12,"div",977),c(13,"\uAC11\uC637"),i(),b(14,ps,5,1,"div",978)(15,ms,3,0,"ng-template",null,2,j),i(),o(17,"div",980),f("click",function(){_(e);let a=d(2);return u((a.playerCharacter.equipment==null?null:a.playerCharacter.equipment.gloves)&&a.unequipItem("gloves"))}),o(18,"div",977),c(19,"\uC7A5\uAC11"),i(),b(20,_s,5,1,"div",978)(21,us,3,0,"ng-template",null,6,j),i(),o(23,"div",981),f("click",function(){_(e);let a=d(2);return u((a.playerCharacter.equipment==null?null:a.playerCharacter.equipment.boots)&&a.unequipItem("boots"))}),o(24,"div",977),c(25,"\uC2E0\uBC1C"),i(),b(26,Cs,5,1,"div",978)(27,fs,3,0,"ng-template",null,7,j),i()(),o(29,"div",359)(30,"div",982),f("click",function(){_(e);let a=d(2);return u((a.playerCharacter.equipment==null?null:a.playerCharacter.equipment.weapon)&&a.unequipItem("weapon"))}),o(31,"div",977),c(32,"\uBB34\uAE30"),i(),b(33,hs,6,2,"div",978)(34,Ps,3,0,"ng-template",null,1,j),i()(),o(36,"div",363)(37,"div",983),f("click",function(){_(e);let a=d(2);return u((a.playerCharacter.equipment==null?null:a.playerCharacter.equipment.amulet)&&a.unequipItem("amulet"))}),o(38,"div",977),c(39,"\uBAA9\uAC78\uC774"),i(),b(40,Ms,5,1,"div",978)(41,xs,3,0,"ng-template",null,4,j),i(),o(43,"div",984),f("click",function(){_(e);let a=d(2);return u((a.playerCharacter.equipment==null?null:a.playerCharacter.equipment.belt)&&a.unequipItem("belt"))}),o(44,"div",977),c(45,"\uBCA8\uD2B8"),i(),b(46,vs,5,1,"div",978)(47,Os,3,0,"ng-template",null,5,j),i(),o(49,"div",985),f("click",function(){_(e);let a=d(2);return u((a.playerCharacter.equipment==null?null:a.playerCharacter.equipment.ring1)&&a.unequipItem("ring1"))}),o(50,"div",977),c(51,"\uBC18\uC9C0"),i(),b(52,ys,5,1,"div",978)(53,ws,3,0,"ng-template",null,8,j),i(),o(55,"div",985),f("click",function(){_(e);let a=d(2);return u((a.playerCharacter.equipment==null?null:a.playerCharacter.equipment.ring2)&&a.unequipItem("ring2"))}),o(56,"div",977),c(57,"\uBC18\uC9C0"),i(),b(58,ks,5,1,"div",978)(59,Ss,3,0,"ng-template",null,9,j),i()()(),o(61,"div",986)(62,"div",987)(63,"span",988),c(64,"\u2694\uFE0F"),i(),o(65,"span",989),c(66,"\uCD1D \uACF5\uACA9\uB825"),i(),o(67,"span",990),c(68),i()(),o(69,"div",987)(70,"span",988),c(71,"\u{1F6E1}\uFE0F"),i(),o(72,"span",989),c(73,"\uCD1D \uBC29\uC5B4\uB825"),i(),o(74,"span",990),c(75),i()(),o(76,"div",987)(77,"span",988),c(78,"\u2728"),i(),o(79,"span",989),c(80,"\uD2B9\uC218 \uD6A8\uACFC"),i(),o(81,"span",990),c(82),i()()()()}if(r&2){let e=R(10),n=R(16),a=R(22),s=R(28),m=R(35),C=R(42),P=R(48),x=R(54),w=R(60),g=d(2);l(5),q("cursor",g.playerCharacter.equipment!=null&&g.playerCharacter.equipment.helmet?"pointer":"default"),Y("data-rarity",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.helmet==null?null:g.playerCharacter.equipment.helmet.rarity)||"empty"),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.helmet)("ngIfElse",e),l(3),q("cursor",g.playerCharacter.equipment!=null&&g.playerCharacter.equipment.armor?"pointer":"default"),Y("data-rarity",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.armor==null?null:g.playerCharacter.equipment.armor.rarity)||"empty"),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.armor)("ngIfElse",n),l(3),q("cursor",g.playerCharacter.equipment!=null&&g.playerCharacter.equipment.gloves?"pointer":"default"),Y("data-rarity",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.gloves==null?null:g.playerCharacter.equipment.gloves.rarity)||"empty"),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.gloves)("ngIfElse",a),l(3),q("cursor",g.playerCharacter.equipment!=null&&g.playerCharacter.equipment.boots?"pointer":"default"),Y("data-rarity",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.boots==null?null:g.playerCharacter.equipment.boots.rarity)||"empty"),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.boots)("ngIfElse",s),l(4),q("cursor",g.playerCharacter.equipment!=null&&g.playerCharacter.equipment.weapon?"pointer":"default"),Y("data-rarity",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.weapon==null?null:g.playerCharacter.equipment.weapon.rarity)||"empty"),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.weapon)("ngIfElse",m),l(4),q("cursor",g.playerCharacter.equipment!=null&&g.playerCharacter.equipment.amulet?"pointer":"default"),Y("data-rarity",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.amulet==null?null:g.playerCharacter.equipment.amulet.rarity)||"empty"),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.amulet)("ngIfElse",C),l(3),q("cursor",g.playerCharacter.equipment!=null&&g.playerCharacter.equipment.belt?"pointer":"default"),Y("data-rarity",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.belt==null?null:g.playerCharacter.equipment.belt.rarity)||"empty"),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.belt)("ngIfElse",P),l(3),q("cursor",g.playerCharacter.equipment!=null&&g.playerCharacter.equipment.ring1?"pointer":"default"),Y("data-rarity",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.ring1==null?null:g.playerCharacter.equipment.ring1.rarity)||"empty"),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.ring1)("ngIfElse",x),l(3),q("cursor",g.playerCharacter.equipment!=null&&g.playerCharacter.equipment.ring2?"pointer":"default"),Y("data-rarity",(g.playerCharacter.equipment==null||g.playerCharacter.equipment.ring2==null?null:g.playerCharacter.equipment.ring2.rarity)||"empty"),l(3),p("ngIf",g.playerCharacter.equipment==null?null:g.playerCharacter.equipment.ring2)("ngIfElse",w),l(10),h(g.getTotalAttack()),l(7),h(g.getTotalDefense()),l(7),h(g.getSpecialEffectsCount())}}function Is(r,t){if(r&1){let e=v();o(0,"button",1e3),f("click",function(){_(e);let a=d(2);return u(a.generateRandomItems())}),o(1,"mat-icon"),c(2,"casino"),i(),c(3," AI \uC544\uC774\uD15C \uC0DD\uC131 "),i()}}function Es(r,t){r&1&&(o(0,"span"),c(1,"\u2694\uFE0F"),i())}function Bs(r,t){r&1&&(o(0,"span"),c(1,"\u{1F6E1}\uFE0F"),i())}function Ts(r,t){r&1&&(o(0,"span"),c(1,"\u26D1\uFE0F"),i())}function qs(r,t){r&1&&(o(0,"span"),c(1,"\u{1F9E4}"),i())}function As(r,t){r&1&&(o(0,"span"),c(1,"\u{1F462}"),i())}function Gs(r,t){r&1&&(o(0,"span"),c(1,"\u{1F397}\uFE0F"),i())}function Ns(r,t){r&1&&(o(0,"span"),c(1,"\u{1F4FF}"),i())}function zs(r,t){r&1&&(o(0,"span"),c(1,"\u{1F48D}"),i())}function Fs(r,t){r&1&&(o(0,"span"),c(1,"\u{1F9EA}"),i())}function Ls(r,t){r&1&&(o(0,"span"),c(1,"\u{1F4E6}"),i())}function Rs(r,t){if(r&1&&(o(0,"div",1014)(1,"span",977),c(2),i()()),r&2){let e=d().$implicit,n=d(3);l(2),h(n.getEquipmentSlotName(e.type))}}function $s(r,t){if(r&1&&(o(0,"span",1022),c(1),i()),r&2){let e=d(2).$implicit;l(),E("\u2694\uFE0F ",e.stats.minDamage,"-",e.stats.maxDamage)}}function Vs(r,t){if(r&1&&(o(0,"span",1022),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u2694\uFE0F +",e.stats.attack)}}function js(r,t){if(r&1&&(o(0,"span",1023),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F6E1}\uFE0F +",e.stats.armor)}}function Hs(r,t){if(r&1&&(o(0,"span",1023),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F6E1}\uFE0F +",e.stats.defense)}}function Ws(r,t){if(r&1&&(o(0,"span",1024),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u2764\uFE0F +",e.stats.hp)}}function Ys(r,t){if(r&1&&(o(0,"span",1024),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F499} +",e.stats.mp)}}function Us(r,t){if(r&1&&(o(0,"span",1025),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F4A5} ",e.stats.critChance,"%")}}function Ks(r,t){if(r&1&&(o(0,"span",1025),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F4A2} ",e.stats.critDamage,"%")}}function Xs(r,t){if(r&1&&(o(0,"span",1026),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1FA78} ",e.stats.lifeSteal,"%")}}function Qs(r,t){if(r&1&&(o(0,"span",1027),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F525} +",e.stats.fireResist,"%")}}function Js(r,t){if(r&1&&(o(0,"span",1027),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u2744\uFE0F +",e.stats.coldResist,"%")}}function Zs(r,t){if(r&1&&(o(0,"span",1027),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u26A1 +",e.stats.lightningResist,"%")}}function ed(r,t){if(r&1&&(o(0,"span",1027),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u2728 +",e.stats.allResist,"%")}}function td(r,t){if(r&1&&(o(0,"span",1028),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F3B2} +",e.stats.magicFind,"%")}}function nd(r,t){if(r&1&&(o(0,"span",1028),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F4B0} +",e.stats.goldFind,"%")}}function od(r,t){if(r&1&&(o(0,"span",1028),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F3C3} +",e.stats.movementSpeed,"%")}}function id(r,t){if(r&1&&(o(0,"div",560),b(1,$s,2,2,"span",1015)(2,Vs,2,1,"span",1015)(3,js,2,1,"span",1016)(4,Hs,2,1,"span",1016)(5,Ws,2,1,"span",1017)(6,Ys,2,1,"span",1017)(7,Us,2,1,"span",1018)(8,Ks,2,1,"span",1018)(9,Xs,2,1,"span",1019)(10,Qs,2,1,"span",1020)(11,Js,2,1,"span",1020)(12,Zs,2,1,"span",1020)(13,ed,2,1,"span",1020)(14,td,2,1,"span",1021)(15,nd,2,1,"span",1021)(16,od,2,1,"span",1021),i()),r&2){let e=d().$implicit;l(),p("ngIf",e.stats.minDamage&&e.stats.maxDamage),l(),p("ngIf",e.stats.attack&&!e.stats.minDamage),l(),p("ngIf",e.stats.armor),l(),p("ngIf",e.stats.defense&&!e.stats.armor),l(),p("ngIf",e.stats.hp),l(),p("ngIf",e.stats.mp),l(),p("ngIf",e.stats.critChance),l(),p("ngIf",e.stats.critDamage),l(),p("ngIf",e.stats.lifeSteal),l(),p("ngIf",e.stats.fireResist),l(),p("ngIf",e.stats.coldResist),l(),p("ngIf",e.stats.lightningResist),l(),p("ngIf",e.stats.allResist),l(),p("ngIf",e.stats.magicFind),l(),p("ngIf",e.stats.goldFind),l(),p("ngIf",e.stats.movementSpeed)}}function ad(r,t){if(r&1&&(o(0,"div",1029)(1,"span",1030),c(2),i()()),r&2){let e=d().$implicit;l(2),M("\xD7",e.quantity)}}function rd(r,t){if(r&1){let e=v();o(0,"div",1003)(1,"button",1004),f("menuOpened",function(){let a=_(e).$implicit,s=d(3);return u(s.selectInventoryItem(a,s.getOriginalInventoryIndex(a)))}),o(2,"div",1005)(3,"div",1006),b(4,Es,2,0,"span",97)(5,Bs,2,0,"span",97)(6,Ts,2,0,"span",97)(7,qs,2,0,"span",97)(8,As,2,0,"span",97)(9,Gs,2,0,"span",97)(10,Ns,2,0,"span",97)(11,zs,2,0,"span",97)(12,Fs,2,0,"span",97)(13,Ls,2,0,"span",97),i(),o(14,"div",1007)(15,"div",1008),c(16),i(),o(17,"div",1009),c(18),i(),o(19,"div",555),c(20),i(),b(21,Rs,3,1,"div",1010)(22,id,17,16,"div",557)(23,ad,3,1,"div",1011),i(),o(24,"div",1012),c(25),i()(),o(26,"button",1013),f("click",function(a){let s=_(e).$implicit,m=d(3);return m.deleteInventoryItem(m.getOriginalInventoryIndex(s)),u(a.stopPropagation())}),o(27,"mat-icon"),c(28,"close"),i()()()()}if(r&2){let e=t.$implicit;d(2);let n=R(47),a=d();p("ngClass",a.getItemTypeColorClass(e.type)),l(),p("matMenuTriggerFor",n),Y("data-rarity",e.rarity),l(3),p("ngIf",e.type==="weapon"),l(),p("ngIf",e.type==="armor"),l(),p("ngIf",e.type==="helmet"),l(),p("ngIf",e.type==="gloves"),l(),p("ngIf",e.type==="boots"),l(),p("ngIf",e.type==="belt"),l(),p("ngIf",e.type==="amulet"),l(),p("ngIf",e.type==="ring"),l(),p("ngIf",e.type==="consumable"),l(),p("ngIf",e.type==="material"),l(2),U("rarity-text-"+e.rarity),l(),h(e.name),l(),U("rarity-badge-"+e.rarity),l(),M(" ",a.getRarityText(e.rarity)," "),l(2),h(a.getItemTypeText(e.type)),l(),p("ngIf",a.getEquipmentSlotName(e.type)),l(),p("ngIf",e.stats),l(),p("ngIf",e.quantity&&e.quantity>1),l(2),M(" ",a.getRaritySymbol(e.rarity)," ")}}function cd(r,t){if(r&1&&(o(0,"div",1001),b(1,rd,29,24,"div",1002),i()),r&2){let e=d(2);l(),p("ngForOf",e.getFilteredInventory())}}function ld(r,t){if(r&1){let e=v();o(0,"button",970),f("click",function(){_(e);let a=d(2);return u(a.onContextMenuAction("equip"))}),o(1,"mat-icon"),c(2,"upload"),i(),o(3,"span"),c(4,"\uC7A5\uBE44\uD558\uAE30"),i()()}}function sd(r,t){if(r&1){let e=v();o(0,"button",970),f("click",function(){_(e);let a=d(2);return u(a.onContextMenuAction("compare"))}),o(1,"mat-icon"),c(2,"compare_arrows"),i(),o(3,"span"),c(4,"\uBE44\uAD50\uD558\uAE30"),i()()}}function dd(r,t){r&1&&(o(0,"p"),c(1,"\uC778\uBCA4\uD1A0\uB9AC\uAC00 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4"),i())}function gd(r,t){r&1&&(o(0,"p"),c(1,"\uD574\uB2F9 \uD0C0\uC785\uC758 \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),i())}function pd(r,t){r&1&&(o(0,"p",605),c(1,"AI \uC544\uC774\uD15C \uC0DD\uC131 \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC5EC \uC544\uC774\uD15C\uC744 \uC0DD\uC131\uD558\uC138\uC694"),i())}function md(r,t){if(r&1){let e=v();o(0,"button",1034),f("click",function(){_(e);let a=d(3);return u(a.generateRandomItems())}),o(1,"mat-icon"),c(2,"add"),i(),c(3," \uCCAB \uC544\uC774\uD15C \uC0DD\uC131\uD558\uAE30 "),i()}}function _d(r,t){if(r&1&&(o(0,"div",1031)(1,"div",405),c(2,"\u{1F392}"),i(),b(3,dd,2,0,"p",97)(4,gd,2,0,"p",97)(5,pd,2,0,"p",1032)(6,md,4,0,"button",1033),i()),r&2){let e=d(2);l(3),p("ngIf",e.inventoryFilter==="all"),l(),p("ngIf",e.inventoryFilter!=="all"),l(),p("ngIf",e.inventoryFilter==="all"),l(),p("ngIf",e.playerCharacter&&e.inventoryFilter==="all")}}function ud(r,t){r&1&&(o(0,"div",1035)(1,"div",405),c(2,"\u2694\uFE0F"),i(),o(3,"h3"),c(4,"\uCE90\uB9AD\uD130 \uC815\uBCF4 \uC5C6\uC74C"),i(),o(5,"p"),c(6,"\uCE90\uB9AD\uD130\uB97C \uC0DD\uC131\uD558\uBA74 \uC7A5\uBE44 \uC815\uBCF4\uAC00 \uD45C\uC2DC\uB429\uB2C8\uB2E4"),i()())}function Cd(r,t){if(r&1){let e=v();o(0,"div",956)(1,"div",957),f("click",function(){_(e);let a=d();return u(a.showDungeonPanel?null:a.closeDungeonDialog())}),i(),o(2,"div",958)(3,"div",959)(4,"h3"),c(5,"\u{1F3F0} \uB358\uC804 \uD14C\uC2A4\uD2B8"),i(),o(6,"button",79),f("click",function(){_(e);let a=d();return u(a.closeDungeonDialog())}),c(7,"\xD7"),i()(),b(8,Ds,83,48,"div",960),o(9,"div",961)(10,"div",962)(11,"h4",325),c(12,"\u{1F392} \uC778\uBCA4\uD1A0\uB9AC"),i(),b(13,Is,4,0,"button",963),i(),o(14,"div",964)(15,"button",965),f("click",function(){_(e);let a=d();return u(a.setInventoryFilter("all"))}),o(16,"mat-icon"),c(17,"apps"),i(),o(18,"span"),c(19,"\uC804\uCCB4"),i()(),o(20,"button",965),f("click",function(){_(e);let a=d();return u(a.setInventoryFilter("weapon"))}),o(21,"span",966),c(22,"\u2694\uFE0F"),i(),o(23,"span"),c(24,"\uBB34\uAE30"),i()(),o(25,"button",965),f("click",function(){_(e);let a=d();return u(a.setInventoryFilter("armor"))}),o(26,"span",966),c(27,"\u{1F6E1}\uFE0F"),i(),o(28,"span"),c(29,"\uBC29\uC5B4\uAD6C"),i()(),o(30,"button",965),f("click",function(){_(e);let a=d();return u(a.setInventoryFilter("accessory"))}),o(31,"span",966),c(32,"\u{1F48D}"),i(),o(33,"span"),c(34,"\uC7A5\uC2E0\uAD6C"),i()(),o(35,"button",965),f("click",function(){_(e);let a=d();return u(a.setInventoryFilter("consumable"))}),o(36,"span",966),c(37,"\u{1F9EA}"),i(),o(38,"span"),c(39,"\uC18C\uBAA8\uD488"),i()(),o(40,"button",965),f("click",function(){_(e);let a=d();return u(a.setInventoryFilter("material"))}),o(41,"span",966),c(42,"\u{1F4E6}"),i(),o(43,"span"),c(44,"\uAE30\uD0C0"),i()()(),b(45,cd,2,1,"div",967),o(46,"mat-menu",968,10),b(48,ld,5,0,"button",969)(49,sd,5,0,"button",969),o(50,"button",970),f("click",function(){_(e);let a=d();return u(a.onContextMenuAction("info"))}),o(51,"mat-icon"),c(52,"info"),i(),o(53,"span"),c(54,"\uC815\uBCF4 \uBCF4\uAE30"),i()(),o(55,"button",970),f("click",function(){_(e);let a=d();return u(a.deleteInventoryItem(a.selectedContextItemIndex))}),o(56,"mat-icon",971),c(57,"delete"),i(),o(58,"span"),c(59,"\uC0AD\uC81C\uD558\uAE30"),i()()(),b(60,_d,7,4,"div",972),i(),b(61,ud,7,0,"div",973),i()()}if(r&2){let e=d();l(2),y("dungeon-active",e.showDungeonPanel),l(6),p("ngIf",!e.showDungeonPanel),l(5),p("ngIf",e.playerCharacter),l(2),y("active",e.inventoryFilter==="all"),l(5),y("active",e.inventoryFilter==="weapon"),l(5),y("active",e.inventoryFilter==="armor"),l(5),y("active",e.inventoryFilter==="accessory"),l(5),y("active",e.inventoryFilter==="consumable"),l(5),y("active",e.inventoryFilter==="material"),l(5),p("ngIf",e.getFilteredInventory().length>0),l(),p("overlapTrigger",!1),l(2),p("ngIf",e.selectedContextItem&&e.selectedContextItem.type!=="consumable"&&e.selectedContextItem.type!=="material"&&e.selectedContextItem.type!=="quest"&&e.selectedContextItem.type!=="misc"),l(),p("ngIf",e.selectedContextItem&&e.selectedContextItem.type!=="consumable"&&e.selectedContextItem.type!=="material"&&e.selectedContextItem.type!=="quest"&&e.selectedContextItem.type!=="misc"),l(11),p("ngIf",e.getFilteredInventory().length===0),l(),p("ngIf",!e.playerCharacter)}}function fd(r,t){r&1&&(o(0,"div",974)(1,"h2"),c(2,"\u{1F3F0} \uB358\uC804 \uC120\uD0DD"),i(),o(3,"p"),c(4,"\uD0D0\uD5D8\uD560 \uB358\uC804\uC744 \uC120\uD0DD\uD558\uC138\uC694"),i()())}function bd(r,t){r&1&&(o(0,"div",1037)(1,"h2"),c(2,"\u2694\uFE0F \uB358\uC804 \uC9C4\uD589 \uC911"),i(),o(3,"p"),c(4,"\uB358\uC804 \uD0D0\uD5D8\uC774 \uC9C4\uD589 \uC911\uC785\uB2C8\uB2E4."),i()())}function hd(r,t){if(r&1){let e=v();o(0,"div",956)(1,"div",957),f("click",function(){_(e);let a=d();return u(a.showDungeonPanel?null:a.closeDungeonDialog())}),i(),o(2,"div",958)(3,"div",959)(4,"h3"),c(5,"\u{1F3F0} \uB358\uC804 \uD14C\uC2A4\uD2B8"),i(),o(6,"button",79),f("click",function(){_(e);let a=d();return u(a.closeDungeonDialog())}),c(7,"\xD7"),i()(),b(8,fd,5,0,"div",960)(9,bd,5,0,"div",1036),i()()}if(r&2){let e=d();l(2),y("dungeon-active",e.showDungeonPanel),l(6),p("ngIf",!e.showDungeonPanel),l(),p("ngIf",e.showDungeonPanel)}}function Pd(r,t){if(r&1){let e=v();o(0,"div",1038)(1,"div",1039)(2,"h3"),c(3,"\u{1F5FA}\uFE0F \uD50C\uB85C\uC6B0 \uBBF8\uB2C8\uB9F5"),i(),o(4,"button",79),f("click",function(){_(e);let a=d();return u(a.toggleFlowPanel())}),c(5,"\xD7"),i()(),o(6,"div",1040)(7,"p"),c(8,"\uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0\uAC00 \uD45C\uC2DC\uB429\uB2C8\uB2E4"),i()()()}}function Md(r,t){if(r&1){let e=v();o(0,"div",713)(1,"div",714)(2,"h3"),c(3,"\u{1F500} \uACE0\uAE09 \uD50C\uB85C\uC6B0"),i(),o(4,"button",79),f("click",function(){_(e);let a=d();return u(a.toggleAdvancedFlowPanel())}),c(5,"\xD7"),i()(),o(6,"div",1041)(7,"p"),c(8,"\uACE0\uAE09 \uD50C\uB85C\uC6B0 \uAE30\uB2A5\uC774 \uD45C\uC2DC\uB429\uB2C8\uB2E4"),i()()()}}function xd(r,t){if(r&1){let e=v();o(0,"div",1042)(1,"div",1043)(2,"h3"),c(3,"\u2694\uFE0F \uBB34\uD611 \uC218\uB828"),i(),o(4,"button",79),f("click",function(){_(e);let a=d();return u(a.toggleWuxiaPanel())}),c(5,"\xD7"),i()(),o(6,"div",1044)(7,"p"),c(8,"\uC218\uB828 \uAE30\uB2A5\uC774 \uD45C\uC2DC\uB429\uB2C8\uB2E4"),i()()()}}function vd(r,t){if(r&1&&(o(0,"div",343)(1,"div",866)(2,"span",344),c(3),i(),o(4,"span",345),c(5),i()(),o(6,"p",875),c(7),i(),o(8,"div",1052),c(9),i()()),r&2){let e=t.$implicit;l(3),h(e.name),l(2),E("Lv.",e.level,"/",e.maxLevel),l(2),h(e.description),l(),p("ngClass","type-"+e.type),l(),M(" ",e.type==="combat"?"\uC804\uD22C":e.type==="magic"?"\uB9C8\uBC95":"\uD328\uC2DC\uBE0C"," ")}}function Od(r,t){if(r&1){let e=v();o(0,"div",1051),f("click",function(){let a=_(e).$implicit,s=d(3);return u(s.selectDungeonType(a))}),o(1,"div",341),b(2,vd,10,6,"div",342),i()()}if(r&2){let e=t.$implicit,n=d(3);y("selected",(n.selectedDungeonType==null?null:n.selectedDungeonType.id)===e.id),l(2),p("ngForOf",n.playerCharacter.skills)}}function yd(r,t){r&1&&(o(0,"div",1053)(1,"div",405),c(2,"\u{1F464}"),i(),o(3,"h3"),c(4,"\uCE90\uB9AD\uD130 \uC815\uBCF4 \uC5C6\uC74C"),i(),o(5,"p"),c(6,"\uC544\uC9C1 \uC0DD\uC131\uB41C \uCE90\uB9AD\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),i(),o(7,"p",605),c(8,"\uC18C\uC124\uC744 \uC2DC\uC791\uD558\uBA74 \uCE90\uB9AD\uD130 \uC815\uBCF4\uAC00 \uD45C\uC2DC\uB429\uB2C8\uB2E4"),i()())}function wd(r,t){if(r&1&&(o(0,"div",1046)(1,"div",1047)(2,"h3"),c(3,"\uB358\uC804 \uC120\uD0DD"),i(),o(4,"div",1048),b(5,Od,3,3,"div",1049),i(),b(6,yd,9,0,"div",1050),i()()),r&2){let e=d(2);l(5),p("ngForOf",e.dungeonTypes),l(),p("ngIf",!e.playerCharacter)}}function kd(r,t){if(r&1){let e=v();o(0,"div",956)(1,"div",957),f("click",function(){_(e);let a=d();return u(a.showDungeonPanel?null:a.closeDungeonDialog())}),i(),o(2,"div",958)(3,"div",959)(4,"h2"),c(5),i(),o(6,"button",79),f("click",function(){_(e);let a=d();return u(a.showDungeonPanel?a.onDungeonEscape():a.closeDungeonDialog())}),c(7,"\u2715"),i()(),b(8,wd,7,2,"div",1045),i()()}if(r&2){let e=d();l(2),y("dungeon-active",e.showDungeonPanel),l(3),M("\u{1F3F0} ",e.showDungeonPanel?"\uB358\uC804 \uD0D0\uD5D8":"\uB358\uC804"),l(3),p("ngIf",!e.showDungeonPanel)}}function Sd(r,t){if(r&1){let e=v();o(0,"div",1051),f("click",function(){let a=_(e).$implicit,s=d(3);return u(s.selectDungeonType(a))}),o(1,"div",1057),c(2),i(),o(3,"div",1058),c(4),i(),o(5,"div",1059),c(6),i(),o(7,"div",1060),c(8),i()()}if(r&2){let e=t.$implicit,n=d(3);y("selected",(n.selectedDungeonType==null?null:n.selectedDungeonType.id)===e.id),l(2),h(e.icon),l(2),h(e.koreanName),l(2),E("Lv.",e.minLevel,"-",e.recommendedLevel),l(2),M("",e.baseFloors,"\uCE35")}}function Dd(r,t){if(r&1){let e=v();o(0,"div",1047)(1,"h3"),c(2,"\uB09C\uC774\uB3C4 \uC120\uD0DD"),i(),o(3,"div",1061)(4,"button",1062),f("click",function(){_(e);let a=d(3);return u(a.selectDifficulty("easy"))}),c(5," \u{1F60A} \uC26C\uC6C0 "),o(6,"span",1063),c(7,"\xD70.75"),i()(),o(8,"button",1064),f("click",function(){_(e);let a=d(3);return u(a.selectDifficulty("normal"))}),c(9," \u{1F610} \uBCF4\uD1B5 "),o(10,"span",1063),c(11,"\xD71.0"),i()(),o(12,"button",1065),f("click",function(){_(e);let a=d(3);return u(a.selectDifficulty("hard"))}),c(13," \u{1F630} \uC5B4\uB824\uC6C0 "),o(14,"span",1063),c(15,"\xD71.25"),i()(),o(16,"button",1066),f("click",function(){_(e);let a=d(3);return u(a.selectDifficulty("hell"))}),c(17," \u{1F480} \uC9C0\uC625 "),o(18,"span",1063),c(19,"\xD71.5"),i()()()()}if(r&2){let e=d(3);l(4),y("selected",e.selectedDifficulty==="easy"),l(4),y("selected",e.selectedDifficulty==="normal"),l(4),y("selected",e.selectedDifficulty==="hard"),l(4),y("selected",e.selectedDifficulty==="hell")}}function Id(r,t){if(r&1){let e=v();o(0,"div",1047)(1,"h3"),c(2,"\uD14C\uC2A4\uD2B8 \uC635\uC158"),i(),o(3,"div",1067)(4,"label",1068)(5,"input",1069),ge("ngModelChange",function(a){_(e);let s=d(3);return de(s.dungeonTestOptions.godMode,a)||(s.dungeonTestOptions.godMode=a),u(a)}),i(),o(6,"span"),c(7,"\u{1F6E1}\uFE0F \uBB34\uC801 \uBAA8\uB4DC (HP \uC790\uB3D9 \uD68C\uBCF5)"),i()(),o(8,"label",1068)(9,"input",1069),ge("ngModelChange",function(a){_(e);let s=d(3);return de(s.dungeonTestOptions.oneHitKill,a)||(s.dungeonTestOptions.oneHitKill=a),u(a)}),i(),o(10,"span"),c(11,"\u2694\uFE0F \uC6D0\uD0AC \uBAA8\uB4DC (\uBAAC\uC2A4\uD130 1\uD0C0)"),i()(),o(12,"label",1068)(13,"input",1069),ge("ngModelChange",function(a){_(e);let s=d(3);return de(s.dungeonTestOptions.showAllRooms,a)||(s.dungeonTestOptions.showAllRooms=a),u(a)}),i(),o(14,"span"),c(15,"\u{1F5FA}\uFE0F \uC804\uCCB4 \uB9F5 \uACF5\uAC1C"),i()(),o(16,"label",1068)(17,"input",1069),ge("ngModelChange",function(a){_(e);let s=d(3);return de(s.dungeonTestOptions.skipCombat,a)||(s.dungeonTestOptions.skipCombat=a),u(a)}),i(),o(18,"span"),c(19,"\u23ED\uFE0F \uC804\uD22C \uC2A4\uD0B5 (\uC790\uB3D9 \uC2B9\uB9AC)"),i()(),o(20,"label",1068)(21,"input",1069),ge("ngModelChange",function(a){_(e);let s=d(3);return de(s.dungeonTestOptions.unlockAllRooms,a)||(s.dungeonTestOptions.unlockAllRooms=a),u(a)}),i(),o(22,"span"),c(23,"\u{1F513} \uBAA8\uB4E0 \uBC29 \uC7A0\uAE08 \uD574\uC81C"),i()()()()}if(r&2){let e=d(3);l(5),se("ngModel",e.dungeonTestOptions.godMode),l(4),se("ngModel",e.dungeonTestOptions.oneHitKill),l(4),se("ngModel",e.dungeonTestOptions.showAllRooms),l(4),se("ngModel",e.dungeonTestOptions.skipCombat),l(4),se("ngModel",e.dungeonTestOptions.unlockAllRooms)}}function Ed(r,t){if(r&1&&(o(0,"div",1047)(1,"h3"),c(2,"\uD50C\uB808\uC774\uC5B4 \uC0C1\uD0DC"),i(),o(3,"div",1070)(4,"div",267)(5,"label"),c(6,"\uB808\uBCA8:"),i(),o(7,"span"),c(8),i()(),o(9,"div",267)(10,"label"),c(11,"HP:"),i(),o(12,"span"),c(13),i()(),o(14,"div",267)(15,"label"),c(16,"MP:"),i(),o(17,"span"),c(18),i()(),o(19,"div",267)(20,"label"),c(21,"\uACF5\uACA9\uB825:"),i(),o(22,"span"),c(23),i()(),o(24,"div",267)(25,"label"),c(26,"\uBC29\uC5B4\uB825:"),i(),o(27,"span"),c(28),i()()()()),r&2){let e=d(3);l(8),h(e.playerCharacter.level),l(5),E("",e.playerCharacter.hp," / ",e.playerCharacter.maxHp),l(5),E("",e.playerCharacter.mp," / ",e.playerCharacter.maxMp),l(5),h(e.playerCharacter.attack),l(5),h(e.playerCharacter.defense)}}function Bd(r,t){if(r&1&&(o(0,"div",1046)(1,"div",1047)(2,"h3"),c(3,"\uB358\uC804 \uC120\uD0DD"),i(),o(4,"div",1048),b(5,Sd,9,7,"div",1049),i()(),b(6,Dd,20,8,"div",1056)(7,Id,24,5,"div",1056)(8,Ed,29,7,"div",1056),i()),r&2){let e=d(2);l(5),p("ngForOf",e.dungeonTypes),l(),p("ngIf",e.selectedDungeonType),l(),p("ngIf",e.selectedDifficulty),l(),p("ngIf",e.selectedDifficulty)}}function Td(r,t){if(r&1){let e=v();o(0,"div",1071)(1,"app-dungeon-explorer",1072),f("roomMove",function(a){_(e);let s=d(2);return u(s.onDungeonRoomMove(a))})("monsterAttack",function(a){_(e);let s=d(2);return u(s.onDungeonMonsterAttack(a))})("interactableUse",function(a){_(e);let s=d(2);return u(s.onDungeonInteractableUse(a))})("dungeonEscape",function(){_(e);let a=d(2);return u(a.onDungeonEscape())})("floorMove",function(a){_(e);let s=d(2);return u(s.onDungeonFloorMove(a))})("rewardsClaimed",function(a){_(e);let s=d(2);return u(s.onDungeonRewardsClaimed(a))}),i()()}if(r&2){let e=d(2);l(),p("dungeon",e.currentDungeon)("currentRoom",e.currentDungeonRoom)("playerHp",e.playerCharacter.hp)("playerMaxHp",e.playerCharacter.maxHp)("playerMp",e.playerCharacter.mp)("playerMaxMp",e.playerCharacter.maxMp)("playerName",e.playerCharacter.name)("playerLevel",e.playerCharacter.level)("playerAttackPower",e.playerCharacter.attack)("playerDefensePower",e.playerCharacter.defense)("playerEquipment",e.getPlayerEquipment())("playerSkills",e.getPlayerSkills())}}function qd(r,t){if(r&1){let e=v();o(0,"div",1073)(1,"button",1074),f("click",function(){_(e);let a=d(2);return u(a.closeDungeonDialog())}),c(2,"\uCDE8\uC18C"),i(),o(3,"button",1075),f("click",function(){_(e);let a=d(2);return u(a.startDungeon())}),c(4," \u{1F3F0} \uB358\uC804 \uC785\uC7A5 "),i()()}if(r&2){let e=d(2);l(3),p("disabled",!e.selectedDungeonType||!e.selectedDifficulty)}}function Ad(r,t){if(r&1){let e=v();o(0,"div",956)(1,"div",957),f("click",function(){_(e);let a=d();return u(a.showDungeonPanel?null:a.closeDungeonDialog())}),i(),o(2,"div",958)(3,"div",959)(4,"h2"),c(5),i(),o(6,"button",79),f("click",function(){_(e);let a=d();return u(a.showDungeonPanel?a.onDungeonEscape():a.closeDungeonDialog())}),c(7,"\u2715"),i()(),b(8,Bd,9,4,"div",1045)(9,Td,2,12,"div",1054)(10,qd,5,1,"div",1055),i()()}if(r&2){let e=d();l(2),y("dungeon-active",e.showDungeonPanel),l(3),M("\u{1F3F0} ",e.showDungeonPanel?"\uB358\uC804 \uD0D0\uD5D8":"\uB358\uC804"),l(3),p("ngIf",!e.showDungeonPanel),l(),p("ngIf",e.showDungeonPanel&&e.currentDungeon&&e.currentDungeonRoom),l(),p("ngIf",!e.showDungeonPanel)}}function Gd(r,t){if(r&1){let e=v();o(0,"div",1076)(1,"app-dungeon-explorer",1077),f("roomMove",function(a){_(e);let s=d();return u(s.onDungeonRoomMove(a))})("monsterAttack",function(a){_(e);let s=d();return u(s.onDungeonMonsterAttack(a))})("interactableUse",function(a){_(e);let s=d();return u(s.onDungeonInteractableUse(a))})("dungeonEscape",function(){_(e);let a=d();return u(a.onDungeonEscape())})("floorMove",function(a){_(e);let s=d();return u(s.onDungeonFloorMove(a))})("rewardsClaimed",function(a){_(e);let s=d();return u(s.onDungeonRewardsClaimed(a))}),i()()}if(r&2){let e=d();l(),p("dungeon",e.currentDungeon)("currentRoom",e.currentDungeonRoom)("playerHp",e.playerCharacter.hp)("playerMaxHp",e.playerCharacter.maxHp)("playerMp",e.playerCharacter.mp)("playerMaxMp",e.playerCharacter.maxMp)}}function Nd(r,t){if(r&1&&(o(0,"div",1082)(1,"div",1083)(2,"span",1084),c(3),i(),o(4,"span",1085),c(5),F(6,"number"),i()()()),r&2){let e=d(2);l(3),M("Lv.",e.selectedCharacterGameData.playerCharacter.level),l(2),M("\u{1F4B0} ",L(6,2,e.selectedCharacterGameData.playerCharacter.gold),"G")}}function zd(r,t){if(r&1&&(o(0,"div",991)(1,"div",387)(2,"div",388),c(3),i()()()),r&2){let e=t.ngIf;l(3),h(e.name||e.baseType)}}function Fd(r,t){r&1&&(o(0,"div",390),c(1,"\uBB34\uAE30"),i())}function Ld(r,t){if(r&1&&(o(0,"div",991)(1,"div",387)(2,"div",388),c(3),i()()()),r&2){let e=t.ngIf;l(3),h(e.name||e.baseType)}}function Rd(r,t){r&1&&(o(0,"div",390),c(1,"\uBC29\uC5B4\uAD6C"),i())}function $d(r,t){if(r&1&&(o(0,"div",991)(1,"div",387)(2,"div",388),c(3),i()()()),r&2){let e=t.ngIf;l(3),h(e.name||e.baseType)}}function Vd(r,t){r&1&&(o(0,"div",390),c(1,"\uD22C\uAD6C"),i())}function jd(r,t){if(r&1&&(o(0,"div",991)(1,"div",387)(2,"div",388),c(3),i()()()),r&2){let e=t.ngIf;l(3),h(e.name||e.baseType)}}function Hd(r,t){r&1&&(o(0,"div",390),c(1,"\uBAA9\uAC78\uC774"),i())}function Wd(r,t){if(r&1&&(o(0,"div",991)(1,"div",387)(2,"div",388),c(3),i()()()),r&2){let e=t.ngIf;l(3),h(e.name||e.baseType)}}function Yd(r,t){r&1&&(o(0,"div",390),c(1,"\uD5C8\uB9AC\uB760"),i())}function Ud(r,t){if(r&1&&(o(0,"div",991)(1,"div",387)(2,"div",388),c(3),i()()()),r&2){let e=t.ngIf;l(3),h(e.name||e.baseType)}}function Kd(r,t){r&1&&(o(0,"div",390),c(1,"\uC7A5\uAC11"),i())}function Xd(r,t){if(r&1&&(o(0,"div",991)(1,"div",387)(2,"div",388),c(3),i()()()),r&2){let e=t.ngIf;l(3),h(e.name||e.baseType)}}function Qd(r,t){r&1&&(o(0,"div",390),c(1,"\uC2E0\uBC1C"),i())}function Jd(r,t){if(r&1&&(o(0,"div",991)(1,"div",387)(2,"div",388),c(3),i()()()),r&2){let e=t.ngIf;l(3),h(e.name||e.baseType)}}function Zd(r,t){r&1&&(o(0,"div",390),c(1,"\uBC18\uC9C0"),i())}function eg(r,t){if(r&1&&(o(0,"div",991)(1,"div",387)(2,"div",388),c(3),i()()()),r&2){let e=t.ngIf;l(3),h(e.name||e.baseType)}}function tg(r,t){r&1&&(o(0,"div",390),c(1,"\uBC18\uC9C0"),i())}function ng(r,t){if(r&1&&(o(0,"div",399),c(1),i()),r&2){let e=d().$implicit;l(),M(" \xD7",e.quantity," ")}}function og(r,t){if(r&1&&(o(0,"div"),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u2694\uFE0F \uACF5\uACA9\uB825: +",e.stats.attack)}}function ig(r,t){if(r&1&&(o(0,"div"),c(1),i()),r&2){let e=d(2).$implicit;l(),M("\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825: +",e.stats.defense)}}function ag(r,t){if(r&1&&(o(0,"div",1104),b(1,og,2,1,"div",97)(2,ig,2,1,"div",97),i()),r&2){let e=d().$implicit;l(),p("ngIf",e.stats.attack),l(),p("ngIf",e.stats.defense)}}function rg(r,t){if(r&1&&(o(0,"div",1105),c(1),i()),r&2){let e=d().$implicit;l(),h(e.description)}}function cg(r,t){if(r&1&&(o(0,"div",1097)(1,"div",393)(2,"div",394),c(3),i(),o(4,"div",395),c(5),i(),b(6,ng,2,1,"div",396),i(),o(7,"div",1098)(8,"div",1099)(9,"div",388),c(10),i(),o(11,"div",1100),c(12),i()(),o(13,"div",1101),c(14),i(),b(15,ag,3,2,"div",1102)(16,rg,2,1,"div",1103),i()()),r&2){let e=t.$implicit;U("rarity-"+(e.rarity||"common")),p("title",e.name),l(3),h(e.icon||"\u{1F4E6}"),l(),p("title",e.name),l(),M(" ",e.name," "),l(),p("ngIf",e.quantity&&e.quantity>1),l(2),U("rarity-"+(e.rarity||"common")),l(2),h(e.name),l(2),h(e.rarity||"common"),l(2),h(e.type),l(),p("ngIf",e.stats),l(),p("ngIf",e.description)}}function lg(r,t){r&1&&(o(0,"div",404)(1,"div",393)(2,"div",405),c(3,"\u{1F4E6}"),i()()())}function sg(r,t){if(r&1&&(o(0,"div",351)(1,"div",352)(2,"h4",325),c(3,"\u2694\uFE0F \uC7A5\uCC29 \uC911\uC778 \uC7A5\uBE44"),i(),o(4,"div",353)(5,"div",354)(6,"div",1086)(7,"div",356),c(8,"\u2694\uFE0F"),i(),b(9,zd,4,1,"div",978)(10,Fd,2,0,"ng-template",null,1,j),i(),o(12,"div",1087)(13,"div",356),c(14,"\u{1F6E1}\uFE0F"),i(),b(15,Ld,4,1,"div",978)(16,Rd,2,0,"ng-template",null,2,j),i()(),o(18,"div",359)(19,"div",1088)(20,"div",356),c(21,"\u26D1\uFE0F"),i(),b(22,$d,4,1,"div",978)(23,Vd,2,0,"ng-template",null,3,j),i(),o(25,"div",1089)(26,"div",356),c(27,"\u{1F4FF}"),i(),b(28,jd,4,1,"div",978)(29,Hd,2,0,"ng-template",null,4,j),i(),o(31,"div",1090)(32,"div",356),c(33,"\u{1F454}"),i(),b(34,Wd,4,1,"div",978)(35,Yd,2,0,"ng-template",null,5,j),i()(),o(37,"div",363)(38,"div",1091)(39,"div",356),c(40,"\u{1F9E4}"),i(),b(41,Ud,4,1,"div",978)(42,Kd,2,0,"ng-template",null,6,j),i(),o(44,"div",1092)(45,"div",356),c(46,"\u{1F462}"),i(),b(47,Xd,4,1,"div",978)(48,Qd,2,0,"ng-template",null,7,j),i()(),o(50,"div",366)(51,"div",1093)(52,"div",356),c(53,"\u{1F48D}"),i(),b(54,Jd,4,1,"div",978)(55,Zd,2,0,"ng-template",null,8,j),i(),o(57,"div",1094)(58,"div",356),c(59,"\u{1F48D}"),i(),b(60,eg,4,1,"div",978)(61,tg,2,0,"ng-template",null,9,j),i()()()(),o(63,"div",369)(64,"h4",325),c(65,"\u{1F392} \uBCF4\uC720 \uC544\uC774\uD15C"),i(),o(66,"div",380)(67,"div",1095),b(68,cg,17,14,"div",1096)(69,lg,4,0,"div",383),i()(),o(70,"div",384)(71,"span",385),c(72),i()()()()),r&2){let e=R(11),n=R(17),a=R(24),s=R(30),m=R(36),C=R(43),P=R(49),x=R(56),w=R(62),g=d(2);l(6),y("has-item",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.weapon)("rarity-common",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.weapon==null?null:g.selectedCharacterGameData.playerCharacter.equipment.weapon.rarity)==="common")("rarity-uncommon",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.weapon==null?null:g.selectedCharacterGameData.playerCharacter.equipment.weapon.rarity)==="uncommon")("rarity-rare",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.weapon==null?null:g.selectedCharacterGameData.playerCharacter.equipment.weapon.rarity)==="rare")("rarity-epic",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.weapon==null?null:g.selectedCharacterGameData.playerCharacter.equipment.weapon.rarity)==="epic")("rarity-legendary",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.weapon==null?null:g.selectedCharacterGameData.playerCharacter.equipment.weapon.rarity)==="legendary"),l(3),p("ngIf",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.weapon)("ngIfElse",e),l(3),y("has-item",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.armor)("rarity-common",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.armor==null?null:g.selectedCharacterGameData.playerCharacter.equipment.armor.rarity)==="common")("rarity-uncommon",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.armor==null?null:g.selectedCharacterGameData.playerCharacter.equipment.armor.rarity)==="uncommon")("rarity-rare",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.armor==null?null:g.selectedCharacterGameData.playerCharacter.equipment.armor.rarity)==="rare")("rarity-epic",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.armor==null?null:g.selectedCharacterGameData.playerCharacter.equipment.armor.rarity)==="epic")("rarity-legendary",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.armor==null?null:g.selectedCharacterGameData.playerCharacter.equipment.armor.rarity)==="legendary"),l(3),p("ngIf",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.armor)("ngIfElse",n),l(4),y("has-item",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.helmet)("rarity-common",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.helmet==null?null:g.selectedCharacterGameData.playerCharacter.equipment.helmet.rarity)==="common")("rarity-uncommon",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.helmet==null?null:g.selectedCharacterGameData.playerCharacter.equipment.helmet.rarity)==="uncommon")("rarity-rare",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.helmet==null?null:g.selectedCharacterGameData.playerCharacter.equipment.helmet.rarity)==="rare")("rarity-epic",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.helmet==null?null:g.selectedCharacterGameData.playerCharacter.equipment.helmet.rarity)==="epic")("rarity-legendary",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.helmet==null?null:g.selectedCharacterGameData.playerCharacter.equipment.helmet.rarity)==="legendary"),l(3),p("ngIf",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.helmet)("ngIfElse",a),l(3),y("has-item",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.amulet)("rarity-common",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.amulet==null?null:g.selectedCharacterGameData.playerCharacter.equipment.amulet.rarity)==="common")("rarity-uncommon",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.amulet==null?null:g.selectedCharacterGameData.playerCharacter.equipment.amulet.rarity)==="uncommon")("rarity-rare",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.amulet==null?null:g.selectedCharacterGameData.playerCharacter.equipment.amulet.rarity)==="rare")("rarity-epic",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.amulet==null?null:g.selectedCharacterGameData.playerCharacter.equipment.amulet.rarity)==="epic")("rarity-legendary",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.amulet==null?null:g.selectedCharacterGameData.playerCharacter.equipment.amulet.rarity)==="legendary"),l(3),p("ngIf",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.amulet)("ngIfElse",s),l(3),y("has-item",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.belt)("rarity-common",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.belt==null?null:g.selectedCharacterGameData.playerCharacter.equipment.belt.rarity)==="common")("rarity-uncommon",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.belt==null?null:g.selectedCharacterGameData.playerCharacter.equipment.belt.rarity)==="uncommon")("rarity-rare",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.belt==null?null:g.selectedCharacterGameData.playerCharacter.equipment.belt.rarity)==="rare")("rarity-epic",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.belt==null?null:g.selectedCharacterGameData.playerCharacter.equipment.belt.rarity)==="epic")("rarity-legendary",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.belt==null?null:g.selectedCharacterGameData.playerCharacter.equipment.belt.rarity)==="legendary"),l(3),p("ngIf",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.belt)("ngIfElse",m),l(4),y("has-item",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.gloves)("rarity-common",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.gloves==null?null:g.selectedCharacterGameData.playerCharacter.equipment.gloves.rarity)==="common")("rarity-uncommon",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.gloves==null?null:g.selectedCharacterGameData.playerCharacter.equipment.gloves.rarity)==="uncommon")("rarity-rare",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.gloves==null?null:g.selectedCharacterGameData.playerCharacter.equipment.gloves.rarity)==="rare")("rarity-epic",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.gloves==null?null:g.selectedCharacterGameData.playerCharacter.equipment.gloves.rarity)==="epic")("rarity-legendary",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.gloves==null?null:g.selectedCharacterGameData.playerCharacter.equipment.gloves.rarity)==="legendary"),l(3),p("ngIf",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.gloves)("ngIfElse",C),l(3),y("has-item",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.boots)("rarity-common",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.boots==null?null:g.selectedCharacterGameData.playerCharacter.equipment.boots.rarity)==="common")("rarity-uncommon",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.boots==null?null:g.selectedCharacterGameData.playerCharacter.equipment.boots.rarity)==="uncommon")("rarity-rare",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.boots==null?null:g.selectedCharacterGameData.playerCharacter.equipment.boots.rarity)==="rare")("rarity-epic",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.boots==null?null:g.selectedCharacterGameData.playerCharacter.equipment.boots.rarity)==="epic")("rarity-legendary",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.boots==null?null:g.selectedCharacterGameData.playerCharacter.equipment.boots.rarity)==="legendary"),l(3),p("ngIf",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.boots)("ngIfElse",P),l(4),y("has-item",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring1)("rarity-common",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.ring1==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring1.rarity)==="common")("rarity-uncommon",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.ring1==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring1.rarity)==="uncommon")("rarity-rare",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.ring1==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring1.rarity)==="rare")("rarity-epic",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.ring1==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring1.rarity)==="epic")("rarity-legendary",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.ring1==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring1.rarity)==="legendary"),l(3),p("ngIf",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring1)("ngIfElse",x),l(3),y("has-item",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring2)("rarity-common",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.ring2==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring2.rarity)==="common")("rarity-uncommon",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.ring2==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring2.rarity)==="uncommon")("rarity-rare",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.ring2==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring2.rarity)==="rare")("rarity-epic",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.ring2==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring2.rarity)==="epic")("rarity-legendary",(g.selectedCharacterGameData.playerCharacter.equipment==null||g.selectedCharacterGameData.playerCharacter.equipment.ring2==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring2.rarity)==="legendary"),l(3),p("ngIf",g.selectedCharacterGameData.playerCharacter.equipment==null?null:g.selectedCharacterGameData.playerCharacter.equipment.ring2)("ngIfElse",w),l(8),p("ngForOf",g.selectedCharacterGameData.playerCharacter.inventory),l(),p("ngForOf",g.getEmptyCharacterInventorySlots()),l(3),E(" ",(g.selectedCharacterGameData.playerCharacter.inventory||ee(130,Ut)).length," / ",g.maxInventorySize," \uC544\uC774\uD15C ")}}function dg(r,t){if(r&1&&(o(0,"div",462)(1,"span",328),c(2,"\u2694\uFE0F"),i(),o(3,"span",272),c(4),i()()),r&2){let e=d(2).$implicit;l(4),M("+",e.stats.attack)}}function gg(r,t){if(r&1&&(o(0,"div",462)(1,"span",328),c(2,"\u{1F6E1}\uFE0F"),i(),o(3,"span",272),c(4),i()()),r&2){let e=d(2).$implicit;l(4),M("+",e.stats.defense)}}function pg(r,t){if(r&1&&(o(0,"div",462)(1,"span",328),c(2,"\u2764\uFE0F"),i(),o(3,"span",272),c(4),i()()),r&2){let e=d(2).$implicit;l(4),M("+",e.stats.hp)}}function mg(r,t){if(r&1&&(o(0,"div",462)(1,"span",328),c(2,"\u{1F499}"),i(),o(3,"span",272),c(4),i()()),r&2){let e=d(2).$implicit;l(4),M("+",e.stats.mp)}}function _g(r,t){if(r&1&&(o(0,"div",460),b(1,dg,5,1,"div",461)(2,gg,5,1,"div",461)(3,pg,5,1,"div",461)(4,mg,5,1,"div",461),i()),r&2){let e=d().$implicit;l(),p("ngIf",e.stats.attack),l(),p("ngIf",e.stats.defense),l(),p("ngIf",e.stats.hp),l(),p("ngIf",e.stats.mp)}}function ug(r,t){if(r&1&&(o(0,"div",465)(1,"span",466),c(2,"\u2728"),i(),o(3,"span",467),c(4),i()()),r&2){let e=t.$implicit;l(4),h(e)}}function Cg(r,t){if(r&1&&(o(0,"div",463),b(1,ug,5,1,"div",464),i()),r&2){let e=d().$implicit;l(),p("ngForOf",e.effects.slice(0,2))}}function fg(r,t){r&1&&(o(0,"span")(1,"span",468),c(2,"\u{1F6D2}"),i(),c(3," \uAD6C\uB9E4\uD558\uAE30 "),i())}function bg(r,t){r&1&&(o(0,"span")(1,"span",468),c(2,"\u{1F4B8}"),i(),c(3," \uACE8\uB4DC \uBD80\uC871 "),i())}function hg(r,t){if(r&1){let e=v();o(0,"div",179)(1,"div",445)(2,"span",446),c(3),i(),o(4,"span",447),c(5),i()(),o(6,"div",448)(7,"div",449),c(8,"\u{1F4E6}"),i()(),o(9,"div",450)(10,"h5",101),c(11),i(),o(12,"p",451),c(13),i(),b(14,_g,5,4,"div",452)(15,Cg,2,1,"div",453),i(),o(16,"div",454)(17,"div",455)(18,"span",456),c(19,"\u{1F4B0}"),i(),o(20,"span",457),c(21),i(),o(22,"span",458),c(23,"G"),i()(),o(24,"button",459),f("click",function(a){let s=_(e).$implicit,m=d(4);return u(m.buyItemForCharacter(s,a))}),b(25,fg,4,0,"span",97)(26,bg,4,0,"span",97),i()()()}if(r&2){let e=t.$implicit,n=d(4);y("grade-legendary",e.grade==="\uC2E0\uD654"||e.grade==="\uC804\uC124")("grade-epic",e.grade==="\uC601\uC6C5")("grade-rare",e.grade==="\uD76C\uADC0")("grade-uncommon",e.grade==="\uACE0\uAE09")("grade-common",e.grade==="\uC77C\uBC18"),l(3),h(e.grade),l(2),h(e.type),l(6),h(e.name),l(2),h(e.description),l(),p("ngIf",e.stats&&(e.stats.attack||e.stats.defense||e.stats.hp||e.stats.mp)),l(),p("ngIf",e.effects&&e.effects.length>0),l(6),h(e.price||n.calculateItemPriceByGrade(e.grade)),l(3),y("can-buy",n.selectedCharacterGameData.playerCharacter.gold>=(e.price||n.calculateItemPriceByGrade(e.grade)))("cannot-buy",n.selectedCharacterGameData.playerCharacter.gold<(e.price||n.calculateItemPriceByGrade(e.grade))),p("disabled",n.selectedCharacterGameData.playerCharacter.gold<(e.price||n.calculateItemPriceByGrade(e.grade))),l(),p("ngIf",n.selectedCharacterGameData.playerCharacter.gold>=(e.price||n.calculateItemPriceByGrade(e.grade))),l(),p("ngIf",n.selectedCharacterGameData.playerCharacter.gold<(e.price||n.calculateItemPriceByGrade(e.grade)))}}function Pg(r,t){if(r&1&&(o(0,"div",443),b(1,hg,27,24,"div",444),i()),r&2){let e=d(3);l(),p("ngForOf",e.savedItems)}}function Mg(r,t){r&1&&(o(0,"div",469)(1,"div",405),c(2,"\u{1F3EA}"),i(),o(3,"h5",470),c(4,"\uC0C1\uC810\uC5D0 \uC544\uC774\uD15C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),i(),o(5,"p",471),c(6,"AI \uC544\uC774\uD15C \uC0DD\uC131\uAE30\uB85C \uD2B9\uBCC4\uD55C \uC544\uC774\uD15C\uC744 \uB9CC\uB4E4\uC5B4\uBCF4\uC138\uC694!"),i(),o(7,"div",472)(8,"span",473),c(9,"\u{1F4A1}"),i(),o(10,"span",474),c(11,'\uD648 \uD654\uBA74\uC758 "AI \uC544\uC774\uD15C \uC0DD\uC131" \uBA54\uB274\uB97C \uC774\uC6A9\uD558\uC138\uC694'),i()()())}function xg(r,t){if(r&1&&(o(0,"div",351)(1,"div",431)(2,"div",432)(3,"div",433)(4,"h4",434),c(5,"\u{1F3EA} \uBAA8\uD5D8\uAC00 \uC0C1\uC810"),i(),o(6,"p",435),c(7,"AI\uAC00 \uC0DD\uC131\uD55C \uD2B9\uBCC4\uD55C \uC544\uC774\uD15C\uC744 \uAD6C\uB9E4\uD558\uC138\uC694"),i()(),o(8,"div",436)(9,"div",437),c(10,"\u{1F4B0}"),i(),o(11,"div",438)(12,"span",439),c(13,"\uBCF4\uC720 \uACE8\uB4DC"),i(),o(14,"span",440),c(15),F(16,"number"),i()()()(),b(17,Pg,2,1,"div",441)(18,Mg,12,0,"div",442),i()()),r&2){let e=d(2);l(15),M("",L(16,3,e.selectedCharacterGameData.playerCharacter.gold)," G"),l(2),p("ngIf",e.savedItems.length>0),l(),p("ngIf",e.savedItems.length===0)}}function vg(r,t){if(r&1){let e=v();o(0,"div",1078),f("click",function(){_(e);let a=d();return u(a.closeCharacterInventory())}),o(1,"div",1079),f("click",function(a){return _(e),u(a.stopPropagation())}),o(2,"div",211)(3,"h3"),c(4),i(),o(5,"button",79),f("click",function(){_(e);let a=d();return u(a.closeCharacterInventory())}),c(6,"\xD7"),i()(),b(7,Nd,7,4,"div",1080),o(8,"div",347)(9,"button",348),f("click",function(){_(e);let a=d();return u(a.characterInventoryTab="equipment")}),c(10," \u2694\uFE0F \uC7A5\uBE44 & \uC778\uBCA4\uD1A0\uB9AC "),i(),o(11,"button",348),f("click",function(){_(e);let a=d();return u(a.characterInventoryTab="shop")}),c(12," \u{1F6D2} \uC0C1\uC810 "),i()(),b(13,sg,73,131,"div",350)(14,xg,19,5,"div",350),o(15,"div",1081)(16,"button",1074),f("click",function(){_(e);let a=d();return u(a.closeCharacterInventory())}),c(17,"\uB2EB\uAE30"),i()()()()}if(r&2){let e=d();l(4),M("\u{1F392} ",e.selectedCharacterForInventory==null?null:e.selectedCharacterForInventory.name,"\uC758 \uC778\uBCA4\uD1A0\uB9AC & \uC7A5\uBE44"),l(3),p("ngIf",e.selectedCharacterGameData),l(2),y("active",e.characterInventoryTab==="equipment"),l(2),y("active",e.characterInventoryTab==="shop"),l(2),p("ngIf",e.selectedCharacterGameData&&e.characterInventoryTab==="equipment"),l(),p("ngIf",e.selectedCharacterGameData&&e.characterInventoryTab==="shop")}}var Xe=class r{constructor(t,e,n,a,s,m,C,P,x,w,g,G,$,V,Q,X,re,_e,le,je,Jt,no,oe,vp){this.cdr=t;this.dialog=e;this.snackBar=n;this.router=a;this.route=s;this.geminiAiService=m;this.scenarioDbService=C;this.itemDbService=P;this.characterDbService=x;this.novelAuthService=w;this.storyDbService=g;this.notification=G;this.gameStorage=$;this.dungeonGenerator=V;this.dungeonService=Q;this.battleService=X;this.battleLogService=re;this.inventoryService=_e;this.equipmentService=le;this.shopService=je;this.wuxiaDataService=Jt;this.itemGeneratorService=no;this.storyElementGeneratorHelper=oe;this.responsiveService=vp;this.inventoryManager=new mt(this),this.battleManager=new _t(this.notification,this.battleService,this.battleLogService),this.wuxiaManager=new ut(this.notification,this.wuxiaDataService),this.dungeonManager=new Ct,this.dungeonManager.initialize({addStoryBlock:He=>this.addStoryBlock(He),gainExp:He=>this.gainExp(He),saveGame:He=>this.saveGame(He),notification:this.notification,debugLogger:this.debugLogger,getPlayerCharacter:()=>this.playerCharacter,getDungeonService:()=>this.dungeonService,getDungeonGenerator:()=>this.dungeonGenerator}),this.itemGenerationHelper=new ft(this.geminiAiService,this.itemDbService,this.notification,this.dialog),this.storyFlowHelper=new bt(this.notification),this.contentManagementHelper=new ht(this.notification,this.dialog,this.scenarioDbService,this.characterDbService,this.storyDbService),this.storyElementGenerator=this.storyElementGeneratorHelper,this.gameStateService=this.gameStorage,this.initializePlayer(),this.loadSavedScenarios(),this.loadSavedItems(),this.loadSavedCharacters(),this.loadSavedStories()}battleLogContainer;shouldScrollBattleLog=!1;novelState=H(Mt);battleState=H(Te);inventoryState=H(Be);playerState=H(xt);itemState=H(vt);debugLogger=H(Ce);itemGenerationHelper;storyFlowHelper;contentManagementHelper;gameStarted=!1;novelSelected=!1;selectedNovel=null;storyBlocks=[];choices=[];currentPath=[];currentGameId=null;get playerCharacter(){return this.playerState.character()}get gold(){return this.playerState.gold()}get gem(){return this.playerState.gem()}get crystal(){return this.playerState.crystal()}get ticket(){return this.playerState.ticket()}set gold(t){let e=this.playerState.gold();t>e?this.playerState.addGold(t-e):t<e&&this.playerState.spendGold(e-t)}set gem(t){let e=this.playerState.gem();t>e?this.playerState.addGem(t-e):t<e&&this.playerState.spendGem(e-t)}set crystal(t){let e=this.playerState.crystal();t>e?this.playerState.addCrystal(t-e):t<e&&this.playerState.spendCrystal(e-t)}set ticket(t){let e=this.playerState.ticket();t>e?this.playerState.addTicket(t-e):t<e&&this.playerState.spendTicket(e-t)}get showInventoryPanel(){return this.novelState.showInventoryPanel()}get showShopPanel(){return this.novelState.showShopPanel()}get showCharacterCreatorPanel(){return this.novelState.showCharacterCreatorPanel()}get showScenarioCreatorPanel(){return this.novelState.showScenarioCreatorPanel()}get showItemCreatorPanel(){return this.novelState.showItemCreatorPanel()}get showStoryCreatorPanel(){return this.novelState.showStoryCreatorPanel()}get showWuxiaPanel(){return this.novelState.showWuxiaPanel()}get showFlowPanel(){return this.novelState.showFlowPanel()}get inventoryActiveTab(){return this.novelState.inventoryActiveTab()}get wuxiaActiveTab(){return this.novelState.wuxiaActiveTab()}get flowPanelTab(){return this.novelState.flowPanelTab()}get inventory(){return this.inventoryState.inventory()}set inventory(t){this.inventoryState.setInventory(t)}showCharacterPanel=!1;isGeneratingCharacter=!1;generatedCharacter=null;characterGenerationError="";savedCharacters=[];isGeneratingScenario=!1;generatedScenario=null;scenarioGenerationError="";savedScenarios=[];isGeneratingItem=!1;generatedItem=null;generatedItems=[];itemGenerationError="";savedItems=[];isGeneratingStory=!1;storyTitle="";selectedCharactersForStory=[];selectedItemsForStory=[];selectedScenariosForStory=[];generatedStory=null;storyGenerationError="";savedStories=[];isStoriesExpanded=!0;isCharactersExpanded=!1;isScenariosExpanded=!1;isItemsExpanded=!1;isShopExpanded=!1;showCharacterInventoryModal=!1;selectedCharacterForInventory=null;selectedCharacterGameData=null;characterInventoryTab="equipment";showScenarioLinkPanel=!1;currentLinkingChoiceIndex=-1;showFlowScenarioLinkPanel=!1;currentLinkingNodeId="";currentLinkingChoiceId="";nodeScenarioLinks=new Map;isLeftPanelCollapsed=!0;isRightPanelCollapsed=!0;isFlowPanelOpen=!1;showStoryFlowPanel=!1;storyFlowNodes=[];storyNodes=[];storyConnections=[];currentStoryNodeId="start";storyProgress={currentNodeId:"start",visitedNodes:[],pathHistory:[],totalChoices:0,battlesWon:0,battlesLost:0,branchingFactor:0,explorationRate:0,possibleEndings:[],flags:{}};showAdvancedFlowPanel=!1;selectedNode=null;flowLayoutType="hierarchical";flowZoomLevel=1;flowPanX=0;flowPanY=0;flowViewBox="0 0 1200 800";isDraggingCanvas=!1;dragStartX=0;dragStartY=0;dragStartPanX=0;dragStartPanY=0;isDraggingNode=!1;draggingNode=null;nodeDragStartX=0;nodeDragStartY=0;nodeStartX=0;nodeStartY=0;hasNodeMoved=!1;showVisitedOnly=!1;showBattlesOnly=!1;showEndingsOnly=!1;showStats=!1;battleSkills=[];battleItems=[];currentBattleState=null;martialArtsSkills=[];learnedMartialSkills=[];playerInternalPower={current:100,max:100,recoveryRate:5,trainingLevel:0,realm:"\uCD08\uB958",realmProgress:0,meridians:{opened:0,total:12,meridians:[]},purity:50,stability:100};playerFaction=null;availableFactions=[];wulinRelationships=[];elixirs=[];martialManuals=[];get dungeonTypes(){return this.dungeonManager.dungeonTypes}set dungeonTypes(t){this.dungeonManager.dungeonTypes=t}get currentDungeon(){return this.dungeonManager.currentDungeon}set currentDungeon(t){this.dungeonManager.currentDungeon=t}get currentDungeonRoom(){return this.dungeonManager.currentDungeonRoom}set currentDungeonRoom(t){this.dungeonManager.currentDungeonRoom=t}get showDungeonPanel(){return this.dungeonManager.showDungeonPanel}set showDungeonPanel(t){this.dungeonManager.showDungeonPanel=t}get showDungeonEntryDialog(){return this.dungeonManager.showDungeonEntryDialog}set showDungeonEntryDialog(t){this.dungeonManager.showDungeonEntryDialog=t}get selectedDungeonType(){return this.dungeonManager.selectedDungeonType}set selectedDungeonType(t){this.dungeonManager.selectedDungeonType=t}get selectedDifficulty(){return this.dungeonManager.selectedDifficulty}set selectedDifficulty(t){this.dungeonManager.selectedDifficulty=t}get dungeonProgress(){return this.dungeonManager.dungeonProgress}set dungeonProgress(t){this.dungeonManager.dungeonProgress=t}get showDungeonTestDialog(){return this.dungeonManager.showDungeonTestDialog}set showDungeonTestDialog(t){this.dungeonManager.showDungeonTestDialog=t}get dungeonTestOptions(){return this.dungeonManager.dungeonTestOptions}inventoryFilter="all";maxInventorySize=60;inventorySortBy="rarity";playerOrganization=null;selectedMember=null;inventoryFilterOptions=[{value:"all",label:"\uC804\uCCB4",icon:"\u{1F4E6}"},{value:"weapon",label:"\uBB34\uAE30",icon:"\u2694\uFE0F"},{value:"armor",label:"\uBC29\uC5B4\uAD6C",icon:"\u{1F6E1}\uFE0F"},{value:"accessory",label:"\uC7A5\uC2E0\uAD6C",icon:"\u{1F48D}"},{value:"consumable",label:"\uC18C\uBE44\uD488",icon:"\u2697\uFE0F"}];defaultBattleSkills=[{id:"basic-attack",name:"\uC77C\uBC18 \uACF5\uACA9",description:"\uAE30\uBCF8\uC801\uC778 \uBB3C\uB9AC \uACF5\uACA9",type:"attack",mpCost:0,cooldown:0,damageMultiplier:1,hitRate:.9,criticalRate:.1,icon:"\u2694\uFE0F"},{id:"power-strike",name:"\uAC15\uD0C0",description:"\uAC15\uB825\uD55C \uC77C\uACA9\uC744 \uB0A0\uB9BD\uB2C8\uB2E4",type:"attack",mpCost:15,cooldown:2,damageMultiplier:2,hitRate:.8,criticalRate:.25,icon:"\u{1F4A5}"},{id:"defend",name:"\uBC29\uC5B4 \uD0DC\uC138",description:"\uB2E4\uC74C \uD134\uAE4C\uC9C0 \uBC29\uC5B4\uB825 50% \uC99D\uAC00",type:"defense",mpCost:0,cooldown:1,defenseBoost:.5,duration:1,icon:"\u{1F6E1}\uFE0F"},{id:"heal",name:"\uC751\uAE09 \uCE58\uB8CC",description:"HP\uB97C 30% \uD68C\uBCF5\uD569\uB2C8\uB2E4",type:"heal",mpCost:20,cooldown:3,healAmount:.3,icon:"\u{1F49A}"},{id:"fire-ball",name:"\uD654\uC5FC\uAD6C",description:"\uD654\uC5FC \uB9C8\uBC95\uC73C\uB85C \uC801\uC744 \uACF5\uACA9\uD558\uACE0 \uD654\uC0C1\uC744 \uC785\uD799\uB2C8\uB2E4",type:"attack",mpCost:25,cooldown:2,damageMultiplier:1.8,hitRate:.85,statusEffect:{type:"burn",duration:3,value:5,name:"\uD654\uC0C1",icon:"\u{1F525}"},icon:"\u{1F525}"},{id:"strengthen",name:"\uD798\uC758 \uC99D\uAC15",description:"3\uD134 \uB3D9\uC548 \uACF5\uACA9\uB825 40% \uC99D\uAC00",type:"buff",mpCost:15,cooldown:4,duration:3,statusEffect:{type:"strengthen",duration:3,value:.4,name:"\uD798\uC758 \uC99D\uAC15",icon:"\u{1F4AA}"},icon:"\u{1F4AA}"},{id:"weaken",name:"\uC57D\uD654",description:"\uC801\uC758 \uACF5\uACA9\uB825\uC744 30% \uAC10\uC18C\uC2DC\uD0B5\uB2C8\uB2E4",type:"debuff",mpCost:10,cooldown:3,duration:2,statusEffect:{type:"weaken",duration:2,value:.3,name:"\uC57D\uD654",icon:"\u{1F53B}"},icon:"\u{1F53B}"}];get inBattle(){return this.battleState.inBattle()}get battleEnded(){return this.battleState.battleEnded()}get battleVictory(){return this.battleState.battleVictory()}get battleTurn(){return this.battleState.battleTurn()}get battleLog(){return this.battleState.battleLog()}get battleEnemy(){return this.battleState.battleEnemy()}_tempBattleEnemy={name:"\uACE0\uBE14\uB9B0",hp:50,maxHp:50,mp:30,maxMp:30,internalPower:20,maxInternalPower:20,attack:8,defense:3};playerDefenseBonus=0;playerTakingDamage=!1;enemyTakingDamage=!1;shopItems=[{id:"sword_basic",name:"\uAE30\uBCF8 \uAC80",description:"\uD3C9\uBC94\uD55C \uCCA0\uAC80\uC785\uB2C8\uB2E4. \uACF5\uACA9\uB825 +5",price:50,type:"weapon",rarity:"common",stock:5,stats:{attack:5}},{id:"potion_hp",name:"\uCCB4\uB825 \uBB3C\uC57D",description:"HP\uB97C 50 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",price:20,type:"consumable",rarity:"common",stock:10},{id:"potion_mp",name:"\uB9C8\uB098 \uBB3C\uC57D",description:"MP\uB97C 30 \uD68C\uBCF5\uD569\uB2C8\uB2E4.",price:25,type:"consumable",rarity:"common",stock:8},{id:"armor_leather",name:"\uAC00\uC8FD \uAC11\uC637",description:"\uD2BC\uD2BC\uD55C \uAC00\uC8FD \uAC11\uC637. \uBC29\uC5B4\uB825 +3",price:80,type:"armor",rarity:"common",stock:3,stats:{defense:3}},{id:"sword_silver",name:"\uC740\uBE5B \uAC80",description:"\uC740\uC73C\uB85C \uC81C\uC791\uB41C \uACE0\uAE09 \uAC80. \uACF5\uACA9\uB825 +12",price:200,type:"weapon",rarity:"uncommon",stock:2,stats:{attack:12}},{id:"armor_chain",name:"\uC0AC\uC2AC \uAC11\uC637",description:"\uACAC\uACE0\uD55C \uC0AC\uC2AC \uAC11\uC637. \uBC29\uC5B4\uB825 +8",price:250,type:"armor",rarity:"uncommon",stock:2,stats:{defense:8}}];novelTemplates=[];inventoryManager;battleManager;wuxiaManager;dungeonManager;storyElementGenerator;isGeneratingElements=!1;elementGenerationProgress="";ngOnInit(){this.responsiveService.isMobile$.subscribe(t=>{t&&(this.isLeftPanelCollapsed=!0,this.isRightPanelCollapsed=!0)}),this.wuxiaManager.setPlayerCharacter(this.playerCharacter),this.wuxiaManager.setInventory(this.inventory),this.wuxiaManager.initializeWuxiaSystem(),this.learnedMartialSkills=this.wuxiaManager.learnedMartialSkills,this.playerInternalPower=this.wuxiaManager.playerInternalPower,this.availableFactions=this.wuxiaManager.availableFactions,this.martialArtsSkills=this.wuxiaManager.martialArtsSkills,this.elixirs=this.wuxiaManager.elixirs,this.martialManuals=this.wuxiaManager.martialManuals,this.initializeDungeonSystem(),this.loadDiabloItems(),this.loadSavedInventory(),this.migrateLocalStorageToIndexedDB(),this.loadNodeScenarioLinks(),this.generateStoryFlow(),this.route.paramMap.subscribe(t=>O(this,null,function*(){let e=t.get("gameId");if(e){this.currentGameId=e;let n=sessionStorage.getItem("newGame_"+e);if(n){let a=JSON.parse(n);sessionStorage.removeItem("newGame_"+e),this.initializeNewGame(e,a.novel),setTimeout(()=>{this.startStory()},100)}else try{yield this.loadGameById(e),(!this.gameStarted||!this.selectedNovel)&&(this.debugLogger.warn("\uAC8C\uC784\uB85C\uB4DC","\uAC8C\uC784 \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBA54\uC778\uC73C\uB85C \uC774\uB3D9\uD569\uB2C8\uB2E4."),this.router.navigate(["/novel"]))}catch(a){this.debugLogger.error("\uAC8C\uC784\uB85C\uB4DC",`\uAC8C\uC784 \uB85C\uB4DC \uC2E4\uD328: ${a}`),this.notification.error("\uAC8C\uC784\uC744 \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/novel"])}}else this.currentGameId=null}))}migrateLocalStorageToIndexedDB(){return O(this,null,function*(){try{(yield this.gameStorage.migrateFromLocalStorage())>0}catch{}})}loadDiabloItems(){if(this.inventory.length===0){let t=$t.slice(0,10).map(e=>ae.convertDiabloItemToInventoryItem(e));this.inventory.push(...t)}else this.inventory.forEach((t,e)=>{let n=t.id.replace("diablo_","");if($t.find(s=>s.id===parseInt(n))&&!t.icon){let s=ae.getInventoryItemIcon(t);t.icon=s}})}ngAfterViewChecked(){this.shouldScrollBattleLog&&this.battleLogContainer&&(this.scrollToBattleLog(),this.shouldScrollBattleLog=!1)}logout(){return O(this,null,function*(){(yield this.showConfirmDialog("\uB85C\uADF8\uC544\uC6C3\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))&&(this.novelAuthService.logout(),this.router.navigate(["/novel/login"]))})}getCurrentUsername(){return this.novelAuthService.getCurrentUsername()}showConfirmDialog(t){return new Promise(e=>{this.dialog.open(J,{width:"450px",maxWidth:"90vw",data:{message:t},panelClass:"custom-confirm-dialog",autoFocus:!1,restoreFocus:!1}).afterClosed().subscribe(a=>{e(a===!0)})})}initializePlayer(){let t={name:"\uBAA8\uD5D8\uAC00",level:1,exp:0,maxExp:100,hp:100,maxHp:100,mp:50,maxMp:50,attack:35,defense:5,agility:8,strength:25,intelligence:15,gold:1e4,gem:500,crystal:200,ticket:50,skillPoints:0,skills:[{id:"basic_attack",name:"\uAE30\uBCF8 \uACF5\uACA9",description:"\uAE30\uBCF8\uC801\uC778 \uACF5\uACA9 \uAE30\uC220",level:1,maxLevel:5,type:"combat"}],inventory:[],equipment:{weapon:void 0,armor:void 0,helmet:void 0,gloves:void 0,boots:void 0,belt:void 0,amulet:void 0,ring1:void 0,ring2:void 0}};this.playerState.loadPlayer(t),this.inventory=[{id:"wooden_sword",name:"\uB098\uBB34 \uAC80",description:"\uCD08\uBCF4\uC790\uC6A9 \uB098\uBB34 \uAC80",type:"weapon",quantity:1,buyPrice:10,sellPrice:5,rarity:"common",stats:{attack:2},isEquipped:!0}]}addStoryBlock(t){this.storyBlocks.push({type:"story",lines:t})}scrollToBottom(){setTimeout(()=>{let t=document.querySelector(".novel-content");t&&(t.scrollTop=t.scrollHeight)},100)}scrollToBattleLog(){setTimeout(()=>{let t=document.querySelector(".battle-log-container");t&&(t.scrollTop=t.scrollHeight)},100)}loadSavedScenarios(){return O(this,null,function*(){this.savedScenarios=yield this.contentManagementHelper.loadSavedScenarios()})}loadSavedCharacters(){return O(this,null,function*(){this.savedCharacters=yield this.contentManagementHelper.loadSavedCharacters()})}loadSavedStories(){return O(this,null,function*(){this.savedStories=yield this.contentManagementHelper.loadSavedStories()})}loadNodeScenarioLinks(){let t=localStorage.getItem("nodeScenarioLinks");if(t)try{let e=JSON.parse(t);this.nodeScenarioLinks=new Map(Object.entries(e))}catch{}}generateStoryFlow(){}initializeNewGame(t,e){this.debugLogger.info("\uAC8C\uC784\uCD08\uAE30\uD654",`\u{1F3AE} \uC0C8 \uAC8C\uC784 \uC2DC\uC791: ${e.title} | ID: ${t}`),this.currentGameId=t,this.selectedNovel=e,this.novelSelected=!0,this.gold=e.startingGold,this.inventory=this.createStartingInventory(),this.storyBlocks=[],this.choices=[],this.currentPath=[],this.gameStarted=!1,this.initializePlayer(),this.playerCharacter.inventory=[...this.inventory]}startStory(){return O(this,null,function*(){if(!this.selectedNovel){this.debugLogger.error("\uC2A4\uD1A0\uB9AC\uC2DC\uC791","\u274C \uC18C\uC124\uC774 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4");return}this.debugLogger.info("\uC2A4\uD1A0\uB9AC\uC2DC\uC791",`\u{1F4D6} \uC18C\uC124 \uC77D\uAE30 \uC2DC\uC791: ${this.selectedNovel.title}`),this.gameStarted=!0,this.addStoryBlock(this.selectedNovel.firstStory),this.setChoices(this.selectedNovel.firstChoices),this.scrollToBottom(),yield this.saveGame("autosave")})}loadGameById(t){return O(this,null,function*(){try{this.debugLogger.info("\uAC8C\uC784\uB85C\uB4DC",`\u{1F50D} \uAC8C\uC784 ID\uB85C \uB85C\uB4DC \uC2DC\uB3C4: ${t}`);let e=yield this.gameStorage.getAllGames();this.debugLogger.info("\uAC8C\uC784\uB85C\uB4DC",`\u{1F4CB} \uC800\uC7A5\uB41C \uAC8C\uC784 \uBAA9\uB85D: ${e.length}\uAC1C`);let n=yield this.gameStorage.loadGame(t);if(n){this.currentGameId=n.id,this.selectedNovel=n.novelTemplate,this.storyBlocks=n.storyBlocks,this.currentPath=n.currentPath,this.gameStarted=n.gameStarted,this.playerState.loadPlayer(n.playerCharacter);let a=n.playerCharacter?.inventory||n.inventory||[];this.inventoryState.setInventory(a),this.choices=n.choices,this.novelSelected=!0,this.debugLogger.info("\uAC8C\uC784\uB85C\uB4DC",`\u2705 \uAC8C\uC784 \uB85C\uB4DC \uC644\uB8CC: ${n.id}`)}else throw this.debugLogger.warn("\uAC8C\uC784\uB85C\uB4DC",`\u274C \uAC8C\uC784 \uB370\uC774\uD130 \uC5C6\uC74C: ${t}`),new Error("\uAC8C\uC784 \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}catch(e){throw this.debugLogger.error("\uAC8C\uC784\uB85C\uB4DC",`\u274C \uAC8C\uC784 \uB85C\uB4DC \uC2E4\uD328: ${e}`),e}})}gainExp(t){this.playerState.gainExp(t)&&this.notification.show(`\u{1F389} \uB808\uBCA8 \uC5C5! \uB808\uBCA8 ${this.playerState.level()}`)}setChoices(t){this.choices=t,this.scrollToBottom&&this.scrollToBottom()}saveGame(t="manual"){return O(this,null,function*(){try{let e=this.playerState.character(),n=this.inventoryState.inventory(),a=I(k({},e),{inventory:n}),s={id:this.currentGameId||"",novelId:this.selectedNovel?.id||"",novelTitle:this.selectedNovel?.title||"",novelTemplate:this.selectedNovel,playerCharacter:a,storyBlocks:this.storyBlocks,currentPath:this.currentPath,choices:this.choices,gameStarted:this.gameStarted,gold:e.gold,inventory:n,completedQuests:[],currentChapter:1,saveDate:new Date,organization:this.playerOrganization};yield this.gameStorage.saveGame(s),this.debugLogger.info("\uAC8C\uC784\uC800\uC7A5",`\u2705 \uAC8C\uC784 \uC800\uC7A5 \uC644\uB8CC: ${this.currentGameId}`),t!=="autosave"&&this.notification.show("\u2705 \uAC8C\uC784\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4")}catch(e){this.debugLogger.error("\uAC8C\uC784\uC800\uC7A5",`\u274C \uAC8C\uC784 \uC800\uC7A5 \uC2E4\uD328: ${e}`)}})}addToInventory(t,e){this.inventoryManager.addToInventory(t,e)}useItem(t){this.inventoryManager.useItem(t)}backToNovelSelection(){this.novelSelected=!1,this.selectedNovel=null,this.currentGameId=null,this.router.navigate(["/novel"])}autoGenerateStoryElements(){return O(this,null,function*(){if(this.isGeneratingElements){this.notification.warning("\uC774\uBBF8 \uC0DD\uC131 \uC911\uC785\uB2C8\uB2E4");return}try{this.isGeneratingElements=!0,this.elementGenerationProgress="\u{1F4CA} \uC2A4\uD1A0\uB9AC \uC694\uC18C \uD604\uD669 \uD655\uC778 \uC911...",this.cdr.detectChanges();let t=this.selectedNovel||this.getDefaultNovelTemplate(),e=yield this.storyElementGenerator.getGenerationReport(t);if(!e.needsGeneration){this.notification.show("\u2705 \uBAA8\uB4E0 \uC2A4\uD1A0\uB9AC \uC694\uC18C\uAC00 \uCDA9\uBD84\uD569\uB2C8\uB2E4!");return}let n=e.scenarios.missing>0,a=e.characters.missing>0,s=e.items.missing>0,m=(n?1:0)+(a?1:0)+(s?1:0),C=0;n&&(C++,this.elementGenerationProgress=`\u{1F4DC} \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uC911... (${C}/${m} - ${e.scenarios.missing}\uAC1C \uD544\uC694)`,this.cdr.detectChanges()),a&&(C++,this.elementGenerationProgress=`\u{1F465} \uCE90\uB9AD\uD130 \uC0DD\uC131 \uC911... (${C}/${m} - ${e.characters.missing}\uAC1C \uD544\uC694)`,this.cdr.detectChanges()),s&&(C++,this.elementGenerationProgress=`\u2694\uFE0F \uC544\uC774\uD15C \uC0DD\uC131 \uC911... (${C}/${m} - ${e.items.missing}\uAC1C \uD544\uC694)`,this.cdr.detectChanges());let P=yield this.storyElementGenerator.ensureStoryElements(t);if(P.success){let{scenarios:x,characters:w,items:g}=P.generated;x+w+g>0?(this.elementGenerationProgress="\u{1F4BE} \uB370\uC774\uD130 \uB85C\uB529 \uC911...",this.cdr.detectChanges(),yield this.loadSavedScenarios(),yield this.loadSavedCharacters(),yield this.loadSavedItems(),this.notification.success(`\u2705 \uC0DD\uC131 \uC644\uB8CC! \u{1F4DC} \uC2DC\uB098\uB9AC\uC624: ${x}\uAC1C, \u{1F465} \uCE90\uB9AD\uD130: ${w}\uAC1C, \u2694\uFE0F \uC544\uC774\uD15C: ${g}\uAC1C`)):this.notification.show("\uBAA8\uB4E0 \uC2A4\uD1A0\uB9AC \uC694\uC18C\uAC00 \uCDA9\uBD84\uD569\uB2C8\uB2E4")}else{let x=P.errors.join(", ");this.notification.error(`\uC0DD\uC131 \uC2E4\uD328: ${x}`)}}catch{this.notification.error("\uC2A4\uD1A0\uB9AC \uC694\uC18C \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4")}finally{this.isGeneratingElements=!1,this.elementGenerationProgress="",this.cdr.detectChanges()}})}getDefaultNovelTemplate(){return{id:"default",title:"\uBC94\uC6A9 \uCF58\uD150\uCE20",genre:"\uD310\uD0C0\uC9C0",description:"\uB2E4\uC591\uD55C \uC7A5\uB974\uC5D0 \uD65C\uC6A9 \uAC00\uB2A5\uD55C \uBC94\uC6A9 \uC2A4\uD1A0\uB9AC \uC694\uC18C",icon:"\u2728",difficulty:"normal",startingGold:1e3,startingItems:[],firstStory:[],firstChoices:[]}}checkStoryElementStatus(){return O(this,null,function*(){try{let t=this.selectedNovel||this.getDefaultNovelTemplate(),e=yield this.storyElementGenerator.getGenerationReport(t);this.dialog.open(J,{width:"500px",data:{title:"\u{1F4CA} \uC2A4\uD1A0\uB9AC \uC694\uC18C \uD604\uD669",message:e.text,confirmText:"\uD655\uC778",showCancel:!1}})}catch{this.notification.error("\uD604\uD669 \uD655\uC778 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4")}})}toggleStoryCreatorPanel(){this.novelState.toggleStoryCreatorPanel()}toggleFlowPanel(){this.novelState.toggleFlowPanel()}toggleAdvancedFlowPanel(){this.showAdvancedFlowPanel=!this.showAdvancedFlowPanel}openScenarioCreator(){this.novelState.openScenarioCreator()}closeFlowScenarioLinkPanel(){this.showFlowScenarioLinkPanel=!1,this.showScenarioLinkPanel=!1}getRarityText(t){return this.itemState.getRarityText(t)}getItemTypeText(t){return this.itemState.getItemTypeText(t)}getEquipmentSlotName(t){return this.itemState.getEquipmentSlotName(t)}getCurrentNode(){return this.storyFlowHelper.getCurrentNode(this.storyNodes,this.currentStoryNodeId)}getNodeById(t){return this.storyFlowHelper.getNodeById(this.storyNodes,t)}getNodeIcon(t){return this.storyFlowHelper.getNodeIcon(t)}calculateExplorationRate(){return this.storyFlowHelper.calculateExplorationRate(this.storyNodes)}loadSampleStoryMap(){return O(this,null,function*(){this.storyFlowHelper.loadSampleStoryMap((t,e,n)=>{this.storyNodes=t,this.storyConnections=e,this.currentStoryNodeId=n,this.storyProgress.currentNodeId=n,this.storyProgress.visitedNodes=[n],this.storyProgress.pathHistory=[],this.storyProgress.totalChoices=0,this.storyProgress.battlesWon=0,this.storyProgress.battlesLost=0},t=>{this.addStoryBlock(t)})})}getLinkedScenarioId(t,e){if(e){let n=`${t}:${e}`;return this.nodeScenarioLinks.get(n)}if(this.selectedNovel?.id){let n=`flow_node_link_${this.selectedNovel.id}_${t}`;return localStorage.getItem(n)||void 0}}linkScenarioToFlowNode(t){if(this.currentLinkingNodeId){if(this.currentLinkingChoiceId){let e=`${this.currentLinkingNodeId}:${this.currentLinkingChoiceId}`;this.nodeScenarioLinks.set(e,t)}if(this.selectedNovel?.id){let e=`flow_node_link_${this.selectedNovel.id}_${this.currentLinkingNodeId}`;localStorage.setItem(e,t)}this.closeFlowScenarioLinkPanel()}}saveGeneratedScenario(){return O(this,null,function*(){yield this.contentManagementHelper.saveGeneratedScenario(this.generatedScenario,()=>O(this,null,function*(){yield this.loadSavedScenarios()}))})}deleteScenario(t){return O(this,null,function*(){yield this.contentManagementHelper.deleteScenario(t,()=>O(this,null,function*(){yield this.loadSavedScenarios()}))})}loadScenario(t){return O(this,null,function*(){this.generatedScenario=t,this.novelState.openScenarioCreator()})}startGameWithScenario(){if(!this.generatedScenario)return;let t=this.contentManagementHelper.generateStoryBlocksFromScenario(this.generatedScenario);this.addStoryBlock(t),this.novelState.closeScenarioCreator(),this.scrollToBottom()}startBattleFromChoice(){this.battleManager.setPlayerCharacter(this.playerCharacter),this.battleManager.learnedMartialSkills=this.learnedMartialSkills,this.battleManager.playerInternalPower=this.playerInternalPower,this.battleManager.startBattleFromChoice(t=>this.addStoryBlock(t),()=>this.scrollToBottom())}generateRandomEnemy(){this.battleManager.generateRandomEnemy()}initializeBattle(){this.battleManager.setPlayerCharacter(this.playerCharacter),this.battleManager.learnedMartialSkills=this.learnedMartialSkills,this.battleManager.playerInternalPower=this.playerInternalPower,this.battleManager.initializeBattle()}winBattle(){this.battleManager.winBattle()}loseBattle(){this.battleManager.loseBattle()}endBattle(){this.battleManager.endBattle()}triggerPlayerDamage(){this.playerTakingDamage=!0,setTimeout(()=>{this.playerTakingDamage=!1},500)}triggerEnemyDamage(){this.enemyTakingDamage=!0,setTimeout(()=>{this.enemyTakingDamage=!1},500)}initializeBattleSkills(){this.battleSkills=[...this.defaultBattleSkills],this.playerCharacter.level>=5&&this.battleSkills.push({id:"lightning-strike",name:"\uBC88\uAC1C \uC77C\uACA9",description:"\uBC88\uAC1C\uB85C \uC801\uC744 \uACF5\uACA9\uD558\uACE0 \uC2A4\uD134\uC2DC\uD0B5\uB2C8\uB2E4",type:"attack",mpCost:30,cooldown:3,damageMultiplier:2.2,hitRate:.9,statusEffect:{type:"stun",duration:1,value:1,name:"\uC2A4\uD134",icon:"\u26A1"},icon:"\u26A1"})}initializeBattleItems(){this.battleItems=this.inventory.filter(t=>t.type==="consumable").map(t=>({id:t.id,name:t.name,description:t.description,type:this.getBattleItemType(t.id),effect:this.getBattleItemEffect(t.id),quantity:t.quantity,usableInBattle:!0,icon:this.getItemIcon(t.id)}))}getBattleItemType(t){return t.includes("potion")||t.includes("elixir")?"potion":t.includes("scroll")?"scroll":t.includes("bomb")||t.includes("grenade")?"throwable":"buff"}getBattleItemEffect(t){return t.includes("health-potion")?{heal:50}:t.includes("mana-potion")?{mpRestore:30}:t.includes("bomb")?{damage:40}:{heal:30}}getItemIcon(t){return t.includes("health-potion")?"\u2764\uFE0F":t.includes("mana-potion")?"\u{1F499}":t.includes("bomb")?"\u{1F4A3}":t.includes("scroll")?"\u{1F4DC}":"\u{1F381}"}useBattleSkill(t){return this.battleManager.useBattleSkill(t)}useBattleItem(t){return this.battleManager.useBattleItem(t)}applyStatusEffect(t,e){this.currentBattleState&&(t==="player"?this.currentBattleState.playerStatusEffects=this.battleService.applyStatusEffect(this.currentBattleState.playerStatusEffects,e):this.currentBattleState.enemyStatusEffects=this.battleService.applyStatusEffect(this.currentBattleState.enemyStatusEffects,e))}triggerSkillEffect(t,e){}addBattleLog(t,e,n){if(!this.currentBattleState)return;let a=this.battleLogService.createLogEntry(this.currentBattleState.turn,t,e,n);this.currentBattleState.combatLog.push(a),this.battleLog.push(this.battleLogService.formatBattleLog(a))}formatBattleLog(t){return this.battleLogService.formatBattleLog(t)}updateSkillCooldowns(){this.battleSkills=this.battleService.decreaseAllCooldowns(this.battleSkills)}joinFaction(t){this.wuxiaManager.joinFaction(t),this.syncWuxiaState()}learnMartialSkill(t){let e=this.wuxiaManager.learnMartialSkill(t);return this.syncWuxiaState(),e}openMeridian(t){let e=this.wuxiaManager.openMeridian(t);return this.syncWuxiaState(),e}cultivateInternalPower(t){this.wuxiaManager.cultivateInternalPower(t,e=>this.gainExp(e),e=>this.saveGame(e)),this.syncWuxiaState()}useElixir(t){this.wuxiaManager.useElixir(t),this.syncWuxiaState()}startMartialBattle(t){this.startBattle(),this.wuxiaManager.startMartialBattle(t,this.currentBattleState)}useMartialSkill(t){let e=this.wuxiaManager.useMartialSkill(t);return this.syncWuxiaState(),e}syncWuxiaState(){this.learnedMartialSkills=this.wuxiaManager.learnedMartialSkills,this.playerInternalPower=this.wuxiaManager.playerInternalPower,this.playerFaction=this.wuxiaManager.playerFaction,this.wulinRelationships=this.wuxiaManager.wulinRelationships,this.inventory=this.wuxiaManager.getInventory(),this.wuxiaManager.setPlayerCharacter(this.playerCharacter),this.wuxiaManager.setInventory(this.inventory)}toggleWuxiaPanel(){this.novelState.toggleWuxiaPanel()}closeWuxiaPanel(){this.novelState.closeWuxiaPanel()}getFactionName(t){let e=this.availableFactions.find(n=>n.id===t);return e?e.name:"\uC54C \uC218 \uC5C6\uC74C"}getMeridianPosition(t){let n=t/12*2*Math.PI-Math.PI/2,a=40,s=50,m=50,C=s+a*Math.cos(n);return{top:`${m+a*Math.sin(n)}%`,left:`${C}%`}}getObjectKeys(t){return Object.keys(t||{})}startBattle(){this.battleState.setBattleCallbacks({onBattleWin:(t,e)=>{this.gainExp(t),this.gold=this.battleManager.gold,this.addStoryBlock(["","\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500","\u2694\uFE0F \uC804\uD22C\uC5D0\uC11C \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!",`\u{1F4AB} \uACBD\uD5D8\uCE58 ${t} \uD68D\uB4DD!`,`\u{1F4B0} \uACE8\uB4DC ${e} \uD68D\uB4DD!`,"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500",""]),this.scrollToBattleLog()},onBattleLose:()=>{this.addStoryBlock(["","\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500","\u{1F480} \uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...","\uCCB4\uB825\uC774 \uC808\uBC18\uC73C\uB85C \uC904\uC5C8\uC2B5\uB2C8\uB2E4.","\uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC7AC\uC815\uBE44\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.","\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500",""]),this.scrollToBattleLog()},onBattleEnd:t=>{t?this.setChoices(["\u{1F6B6} \uC5EC\uD589\uC744 \uACC4\uC18D\uD55C\uB2E4","\u{1F6D1} \uC7A0\uC2DC \uD734\uC2DD\uC744 \uCDE8\uD55C\uB2E4","\u{1F50D} \uC804\uB9AC\uD488\uC744 \uB354 \uCC3E\uC544\uBCF8\uB2E4"]):(this.addStoryBlock(["","\u{1F480} \uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...","\uB9C8\uC744\uB85C \uB3CC\uC544\uAC00 \uC7AC\uC815\uBE44\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.",""]),this.setChoices(["\u{1F3E0} \uB9C8\uC744\uB85C \uB3CC\uC544\uAC04\uB2E4","\u{1F48A} \uD68C\uBCF5 \uBB3C\uC57D\uC744 \uC0AC\uC6A9\uD55C\uB2E4","\u26FA \uADF8 \uC790\uB9AC\uC5D0\uC11C \uC57C\uC601\uD55C\uB2E4"])),this.scrollToBottom()},onLogUpdate:()=>{this.scrollToBattleLog()},onEnemyDamage:()=>{this.enemyTakingDamage=!0,setTimeout(()=>{this.enemyTakingDamage=!1},500)},onPlayerDamage:()=>{this.playerTakingDamage=!0,setTimeout(()=>{this.playerTakingDamage=!1},500)}}),this.battleManager.setPlayerCharacter(this.playerCharacter),this.battleManager.inventory=this.inventory,this.battleManager.gold=this.gold,this.battleManager.startBattle()}loadSavedItems(){return O(this,null,function*(){try{this.savedItems=yield this.itemDbService.getAllItems()}catch{this.savedItems=[]}})}openItemCreator(){this.novelState.openItemCreator(),this.generatedItem=null,this.itemGenerationError="",this.geminiAiService.hasApiKey()||(this.itemGenerationError="Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC124\uC815\uC5D0\uC11C API \uD0A4\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.")}generateAiItem(t,e){this.itemGenerationHelper.generateAiItems(t,e,()=>{this.itemGenerationError="",this.generatedItems=[],this.isGeneratingItem=!0},n=>{this.generatedItems.push(n)},(n,a)=>{this.isGeneratingItem=!1,a?this.itemGenerationError=a:n.length>0&&this.notification.show(`${n.length}\uAC1C\uC758 \uC544\uC774\uD15C \uC0DD\uC131 \uC644\uB8CC!`)})}saveGeneratedItem(){return O(this,null,function*(){yield this.itemGenerationHelper.saveGeneratedItem(this.generatedItem,()=>O(this,null,function*(){yield this.loadSavedItems(),this.novelState.closeItemCreator()}),()=>{})})}saveGeneratedItemByIndex(t){return O(this,null,function*(){yield this.itemGenerationHelper.saveGeneratedItemByIndex(this.generatedItems,t,()=>O(this,null,function*(){yield this.loadSavedItems()}),()=>{})})}saveAllGeneratedItems(){return O(this,null,function*(){yield this.itemGenerationHelper.saveAllGeneratedItems(this.generatedItems,t=>O(this,null,function*(){yield this.loadSavedItems(),this.generatedItems=[]}))})}calculateItemPriceByGrade(t){return ae.calculateItemPriceByGrade(t)}addGeneratedItemToInventory(){if(!this.generatedItem)return;let t={id:`ai_item_${Date.now()}`,name:this.generatedItem.name||"\uC544\uC774\uD15C",description:this.generatedItem.description||"",type:this.mapItemType(this.generatedItem.type),quantity:1,buyPrice:this.calculateItemPrice(this.generatedItem.grade),sellPrice:Math.floor(this.calculateItemPrice(this.generatedItem.grade)*.6),rarity:this.mapItemGrade(this.generatedItem.grade),stats:this.generatedItem.stats||{}};this.addToInventory(t.id,1),this.addStoryBlock([`\u{1F48E} ${t.name}\uC744(\uB97C) \uC778\uBCA4\uD1A0\uB9AC\uC5D0 \uCD94\uAC00\uD588\uC2B5\uB2C8\uB2E4!`,`${t.description}`]),this.novelState.closeItemCreator(),this.scrollToBottom()}buyItemFromShop(t,e){return O(this,null,function*(){e&&e.stopPropagation();let n=t.price||this.calculateItemPriceByGrade(t.grade);if(this.gold<n){this.notification.show(`\uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4! (\uD544\uC694: ${n}G, \uBCF4\uC720: ${this.gold}G)`);return}if(yield this.showConfirmDialog(`${t.name}\uC744(\uB97C) ${n} \uACE8\uB4DC\uC5D0 \uAD6C\uB9E4\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uB4F1\uAE09: ${t.grade}
\uC124\uBA85: ${t.description}

\uD604\uC7AC \uACE8\uB4DC: ${this.gold}G \u2192 ${this.gold-n}G`))try{this.gold-=n;let s={id:`shop_item_${t.id}_${Date.now()}`,name:t.name,description:t.description,type:this.mapItemType(t.type),quantity:1,buyPrice:n,sellPrice:Math.floor(n*.6),rarity:this.mapItemGrade(t.grade),stats:t.stats||{}};this.playerCharacter.inventory||(this.playerCharacter.inventory=[]);let m=this.playerCharacter.inventory.find(P=>P.name===s.name&&P.type===s.type);m?m.quantity=(m.quantity||0)+1:this.playerCharacter.inventory.push(s),this.inventory||(this.inventory=[]);let C=this.inventory.find(P=>P.name===s.name&&P.type===s.type);C?C.quantity=(C.quantity||0)+1:this.inventory.push(s),this.addStoryBlock([`\u{1F6D2} \uC0C1\uC810\uC5D0\uC11C ${t.name}\uC744(\uB97C) ${n} \uACE8\uB4DC\uC5D0 \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4!`,`\u{1F4B0} \uB0A8\uC740 \uACE8\uB4DC: ${this.gold}G`]),this.notification.show(`${t.name}\uC744(\uB97C) \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4!`),yield this.saveGame("autosave"),this.scrollToBottom()}catch{this.notification.show("\uC544\uC774\uD15C \uAD6C\uB9E4\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),this.gold+=n}})}deleteItem(t,e){return O(this,null,function*(){if(e&&e.stopPropagation(),!!(yield this.showConfirmDialog("\uC774 \uC544\uC774\uD15C\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")))try{yield this.itemDbService.deleteItem(t),yield this.loadSavedItems()}catch{this.notification.show("\uC544\uC774\uD15C \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}loadItem(t){return O(this,null,function*(){this.generatedItem=t,this.novelState.openItemCreator()})}mapItemType(t){return ae.mapItemType(t)}mapItemGrade(t){return ae.mapItemGrade(t)}calculateItemPrice(t,e=!0){return ae.calculateItemPrice(t,e)}getRaritySymbol(t){return ae.getRaritySymbol(t)}getInventoryItemIcon(t){return ae.getInventoryItemIcon(t)}setInventoryFilter(t){this.inventoryFilter=t}getFilteredInventory(){return this.playerCharacter?.inventory?this.inventoryFilter==="all"?this.playerCharacter.inventory:this.playerCharacter.inventory.filter(t=>{switch(this.inventoryFilter){case"weapon":return t.type==="weapon";case"armor":return["armor","helmet","gloves","boots","belt"].includes(t.type);case"accessory":return["amulet","ring","accessory"].includes(t.type);case"consumable":return t.type==="consumable";case"material":return["material","quest","misc"].includes(t.type);default:return!0}}):[]}getFilteredAndSortedInventory(){return this.itemState.getFilteredAndSortedInventory(this.inventory,this.inventoryFilter,this.inventorySortBy)}getRarityWeight(t){return this.itemState.getRarityWeight(t)}getEmptyInventorySlots(){let t=this.getFilteredAndSortedInventory().length,e=Math.max(0,this.maxInventorySize-t);return Array(e).fill(0)}sortInventory(){this.snackBar.open(`\u2705 ${this.getSortMethodName()} \uC815\uB82C\uB418\uC5C8\uC2B5\uB2C8\uB2E4`,"\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"})}autoSortInventory(){this.inventorySortBy="rarity",this.inventoryFilter="all",this.snackBar.open("\u2705 \uC778\uBCA4\uD1A0\uB9AC\uAC00 \uC790\uB3D9 \uC815\uB82C\uB418\uC5C8\uC2B5\uB2C8\uB2E4 (\uD76C\uADC0\uB3C4\uC21C)","\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"})}getSortMethodName(){return{rarity:"\uD76C\uADC0\uB3C4\uC21C\uC73C\uB85C",type:"\uD0C0\uC785\uC21C\uC73C\uB85C",name:"\uC774\uB984\uC21C\uC73C\uB85C",recent:"\uCD5C\uADFC \uD68D\uB4DD\uC21C\uC73C\uB85C"}[this.inventorySortBy]||""}getTruncatedName(t){let e=t.nameKo||t.name,n=8;return e.length>n?e.slice(0,n)+"...":e}onInventoryCellClick(t,e,n){t.preventDefault(),t.stopPropagation(),this.selectedContextItem=e,this.selectedContextItemIndex=n;let a=t.currentTarget.getBoundingClientRect();this.contextMenuPosition={x:a.left+a.width/2,y:a.bottom+5},this.showItemContextMenu=!0,setTimeout(()=>{document.addEventListener("click",this.closeContextMenu.bind(this),{once:!0})},0)}onInventoryCellDoubleClick(t,e){if(t.type==="consumable")this.useItem(t);else if(!["material","quest","misc"].includes(t.type)){let n=this.inventory.findIndex(a=>a.id===t.id);n!==-1&&this.equipItem(n)}}calculateTotalWeight(){return this.inventory.reduce((t,e)=>{let n=e.weight||1;return t+n*e.quantity},0)}onInventoryDrop(t){let{previousIndex:e,currentIndex:n,item:a,previousContainer:s,container:m}=t,C=a.data;if(s===m){this.snackBar.open("\u2139\uFE0F \uC815\uB82C \uBAA8\uB4DC\uC5D0\uC11C\uB294 \uC218\uB3D9 \uC815\uB9AC\uAC00 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4","\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"});return}C&&C.item&&C.slot&&this.snackBar.open(`\u2705 ${C.item.name} \uD574\uC81C\uB428`,"\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"})}onEquipmentSlotDrop(t,e){let n=t.item.data,a=t.previousContainer,s=t.container;if(a!==s&&n&&n.item){let m=n.item;if(n.slot){if(n.slot===e){this.snackBar.open("\u2139\uFE0F \uC774\uBBF8 \uAC19\uC740 \uC2AC\uB86F\uC5D0 \uC7A5\uCC29\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4","\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"});return}this.unequipItem(n.slot),this.equipItemToSlot(m,e);return}this.equipItemToSlot(m,e)}}equipItemToSlot(t,e){if(!Qn.includes(e)){this.snackBar.open("\u274C \uC798\uBABB\uB41C \uC7A5\uBE44 \uC2AC\uB86F\uC785\uB2C8\uB2E4","\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"});return}let n=t.type?.toLowerCase()||"";if(!(Xn[e]||[]).some(C=>n.includes(C))){this.snackBar.open(`\u274C ${t.nameKo||t.name}\uC740(\uB294) ${e} \uC2AC\uB86F\uC5D0 \uC7A5\uCC29\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4`,"\uB2EB\uAE30",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"});return}this.playerCharacter.equipment[e]&&this.unequipItem(e),this.playerCharacter.equipment[e]=k({},t);let m=this.inventory.findIndex(C=>C.id===t.id||C.name===t.name&&C.nameKo===t.nameKo);if(m!==-1&&this.inventory.splice(m,1),this.playerCharacter.inventory){let C=this.playerCharacter.inventory.findIndex(P=>P.id===t.id||P.name===t.name&&P.nameKo===t.nameKo);C!==-1&&this.playerCharacter.inventory.splice(C,1)}this.updatePlayerStats(),this.snackBar.open(`\u2705 ${t.nameKo||t.name} \uC7A5\uCC29 \uC644\uB8CC!`,"\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["success-snackbar"]}),this.saveGame("equipment_change").catch(C=>{})}getItemTypeColorClass(t){return{weapon:"item-type-weapon",armor:"item-type-armor",helmet:"item-type-armor",gloves:"item-type-armor",boots:"item-type-armor",belt:"item-type-armor",amulet:"item-type-accessory",ring:"item-type-accessory",accessory:"item-type-accessory",consumable:"item-type-consumable",material:"item-type-material"}[t]||"item-type-default"}getOriginalInventoryIndex(t){return this.playerCharacter?.inventory?this.playerCharacter.inventory.indexOf(t):-1}getTotalAttack(){if(!this.playerCharacter?.equipment)return 0;let t=0,e=this.playerCharacter.equipment.weapon;return e?.baseStats?.minDamage&&e?.baseStats?.maxDamage&&(t=(e.baseStats.minDamage+e.baseStats.maxDamage)/2,e.prefixes?.forEach(n=>{n.type==="damage"&&(t+=n.value)}),e.suffixes?.forEach(n=>{n.type==="damage"&&(t+=n.value)})),Math.round(t)}getTotalDefense(){if(!this.playerCharacter?.equipment)return 0;let t=0,e=this.playerCharacter.equipment;return[e.armor,e.helmet,e.gloves,e.boots,e.belt].forEach(n=>{n?.baseStats?.armor&&(t+=n.baseStats.armor,n.prefixes?.forEach(a=>{a.type==="defense"&&(t+=a.value)}),n.suffixes?.forEach(a=>{a.type==="defense"&&(t+=a.value)}))}),Math.round(t)}getSpecialEffectsCount(){if(!this.playerCharacter?.equipment)return 0;let t=0,e=this.playerCharacter.equipment;return[e.weapon,e.armor,e.helmet,e.gloves,e.boots,e.belt,e.amulet,e.ring1,e.ring2].forEach(n=>{n&&(t+=n.prefixes?.length||0,t+=n.suffixes?.length||0,t+=n.uniqueProperties?.length||0,Array.isArray(n.sockets)&&(t+=n.sockets.filter(a=>a.type!=="empty").length||0))}),t}getSlotName(t){return{weapon:"\uBB34\uAE30",armor:"\uAC11\uC637",helmet:"\uD22C\uAD6C",gloves:"\uC7A5\uAC11",boots:"\uC2E0\uBC1C",belt:"\uBCA8\uD2B8",amulet:"\uBAA9\uAC78\uC774",ring1:"\uBC18\uC9C0 1",ring2:"\uBC18\uC9C0 2"}[t]||t}getFullItemName(t){if(t.rarity==="unique"||t.rarity==="set"||t.rarity==="legendary")return t.name||t.baseType;let e="";return t.prefixes&&t.prefixes.length>0&&(e+=t.prefixes[0].name+" "),e+=t.baseType,t.suffixes&&t.suffixes.length>0&&(e+=" "+t.suffixes[0].name),e}generateRandomItems(){this.playerCharacter||this.playerState.loadPlayer(this.createDefaultCharacter()),this.playerCharacter.inventory||(this.playerCharacter.inventory=[]);let t=Math.floor(Math.random()*6)+5;for(let e=0;e<t;e++){let n=Pt.createRandomItem(this.itemGeneratorService,(a,s)=>this.calculateItemPrice(a,s));this.playerCharacter.inventory.push(n)}this.saveInventoryToLocalStorage(),this.gameStarted&&this.currentGameId&&this.saveGame("autosave"),this.snackBar.open(`\u2728 ${t}\uAC1C\uC758 \uC544\uC774\uD15C\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`,"\uB2EB\uAE30",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["success-snackbar"]})}resetGameData(){this.dialog.open(J,{width:"400px",data:{title:"\u26A0\uFE0F \uAC8C\uC784 \uB370\uC774\uD130 \uCD08\uAE30\uD654",message:`\uBAA8\uB4E0 \uC800\uC7A5 \uB370\uC774\uD130\uAC00 \uC0AD\uC81C\uB429\uB2C8\uB2E4.

\u2022 \uC800\uC7A5\uB41C \uAC8C\uC784
\u2022 \uC778\uBCA4\uD1A0\uB9AC
\u2022 \uCE90\uB9AD\uD130 \uC815\uBCF4
\u2022 \uC2A4\uD1A0\uB9AC \uC9C4\uD589 \uC0C1\uD669

\uC815\uB9D0 \uCD08\uAE30\uD654\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,confirmText:"\uCD08\uAE30\uD654",cancelText:"\uCDE8\uC18C"}}).afterClosed().subscribe(e=>{e&&this.performResetGameData()})}debugInventory(){this.itemGenerationHelper.debugInventory(this.inventory,()=>this.resetInventory())}performResetGameData(){try{["novel_game_autosave","novel_game_manual_save","novel_inventory","novel_character","novel_current_story"].forEach(e=>{localStorage.removeItem(e)}),this.gameStarted=!1,this.currentGameId="",this.playerState.loadPlayer(this.createDefaultCharacter()),this.inventory=this.playerCharacter.inventory?[...this.playerCharacter.inventory]:[],this.gold=0,this.snackBar.open(`\u2705 \uAC8C\uC784 \uB370\uC774\uD130\uAC00 \uC644\uC804\uD788 \uCD08\uAE30\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4

\uC774\uC81C \uC0C8 \uAC8C\uC784\uC744 \uC2DC\uC791\uD558\uBA74 \uB514\uC544\uBE14\uB85C \uC544\uC774\uD15C 10\uAC1C\uAC00 \uC790\uB3D9\uC73C\uB85C \uC0DD\uC131\uB429\uB2C8\uB2E4!`,"\uB2EB\uAE30",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["success-snackbar"]}),this.inventory.length>0,setTimeout(()=>{this.backToNovelSelection()},1500)}catch{this.snackBar.open("\u26A0\uFE0F \uB370\uC774\uD130 \uCD08\uAE30\uD654\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4","\uB2EB\uAE30",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"})}}resetInventory(){this.dialog.open(J,{width:"400px",data:{title:"\u{1F392} \uC778\uBCA4\uD1A0\uB9AC \uCD08\uAE30\uD654",message:`\uD604\uC7AC \uC778\uBCA4\uD1A0\uB9AC\uC758 \uBAA8\uB4E0 \uC544\uC774\uD15C\uC774 \uC0AD\uC81C\uB418\uACE0
\uAE30\uBCF8 \uB514\uC544\uBE14\uB85C \uC2A4\uD0C0\uC77C \uC544\uC774\uD15C 10\uAC1C\uB85C \uCD08\uAE30\uD654\uB429\uB2C8\uB2E4.

\uC815\uB9D0 \uCD08\uAE30\uD654\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,confirmText:"\uCD08\uAE30\uD654",cancelText:"\uCDE8\uC18C"}}).afterClosed().subscribe(e=>{e&&this.performResetInventory()})}performResetInventory(){try{this.playerCharacter||this.playerState.loadPlayer(this.createDefaultCharacter()),this.playerCharacter.inventory=this.createStartingInventory(),this.inventory=[...this.playerCharacter.inventory],this.saveInventoryToLocalStorage(),this.gameStarted&&this.currentGameId&&this.saveGame("autosave"),this.snackBar.open("\u2705 \uC778\uBCA4\uD1A0\uB9AC\uAC00 \uAE30\uBCF8 \uC544\uC774\uD15C\uC73C\uB85C \uCD08\uAE30\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4","\uB2EB\uAE30",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["success-snackbar"]})}catch{this.snackBar.open("\u26A0\uFE0F \uC778\uBCA4\uD1A0\uB9AC \uCD08\uAE30\uD654\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4","\uB2EB\uAE30",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"})}}showItemDetails(t){let e=this.itemState.getItemDetailsText(t);this.snackBar.open(e,"\uB2EB\uAE30",{duration:1e4,horizontalPosition:"center",verticalPosition:"top",panelClass:["item-details-snackbar"]})}equipItem(t){if(!this.playerCharacter?.inventory||!this.playerCharacter.equipment)return;let e=this.playerCharacter.inventory[t];this.equipmentService.equipItem(e,t,this.playerCharacter).success&&(this.playerCharacter.inventory&&(this.inventory=[...this.playerCharacter.inventory]),this.equipmentService.updatePlayerStats(this.playerCharacter),this.saveGame("autosave"),this.saveInventoryToLocalStorage())}unequipItem(t){this.debugLogger.info("UNEQUIP",`\u{1F527} unequipItem \uD638\uCD9C\uB428 - slotKey: ${t}`),this.equipmentService.unequipItem(t,this.playerCharacter,this.debugLogger).success&&(this.playerCharacter.inventory&&(this.inventory=[...this.playerCharacter.inventory],this.debugLogger.info("UNEQUIP",`\u{1F504} inventory \uBC30\uC5F4 \uB3D9\uAE30\uD654 \uC644\uB8CC - \uCD1D ${this.inventory.length}\uAC1C`)),this.equipmentService.updatePlayerStats(this.playerCharacter),this.debugLogger.info("UNEQUIP","\u{1F4CA} \uB2A5\uB825\uCE58 \uC7AC\uACC4\uC0B0 \uC644\uB8CC"),this.saveGame("autosave"),this.debugLogger.info("UNEQUIP","\u{1F4BE} \uAC8C\uC784 \uC800\uC7A5 \uC644\uB8CC"),this.saveInventoryToLocalStorage(),this.debugLogger.info("UNEQUIP","\u{1F4BF} \uB85C\uCEEC \uC2A4\uD1A0\uB9AC\uC9C0 \uC800\uC7A5 \uC644\uB8CC"))}updatePlayerStats(){this.playerCharacter?.equipment&&this.equipmentService.updatePlayerStats(this.playerCharacter)}selectedContextItem=null;selectedContextItemIndex=-1;showItemContextMenu=!1;contextMenuPosition={x:0,y:0};showItemInfo=!1;itemInfoPosition={x:300,y:150};isDraggingModal=!1;modalDragOffset={x:0,y:0};selectInventoryItem(t,e){this.selectedContextItem=t,this.selectedContextItemIndex=e}onContextMenuAction(t){if(!(!this.selectedContextItem||this.selectedContextItemIndex===-1))switch(t){case"equip":this.equipItem(this.selectedContextItemIndex);break;case"info":this.showItemDetails(this.selectedContextItem);break;case"compare":this.compareItemWithEquipped(this.selectedContextItem);break}}compareItemWithEquipped(t){if(!this.playerCharacter?.equipment)return;let e=t.type,n=this.playerCharacter.equipment[e],a=t.stats?.attack||t.stats?.minDamage||0,s=t.stats?.defense||t.stats?.armor||0,m=t.stats?.hp||0,C=t.stats?.mp||0,P=0,x=0,w=0,g=0,G="(\uC5C6\uC74C)";n&&(P=n.baseStats?.attack||n.baseStats?.minDamage||0,x=n.baseStats?.defense||n.baseStats?.armor||0,w=n.baseStats?.hp||0,g=n.baseStats?.mp||0,G=n.baseType);let $=a-P,V=s-x,Q=m-w,X=C-g,re=$+V+Q/10+X/10,_e="";n?re>5?_e="\u2728 \uC0C8 \uC7A5\uBE44\uAC00 \uD6E8\uC52C \uC88B\uC2B5\uB2C8\uB2E4! \uAD50\uCCB4\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?":re>0?_e="\u{1F44D} \uC0C8 \uC7A5\uBE44\uAC00 \uB354 \uC88B\uC2B5\uB2C8\uB2E4. \uAD50\uCCB4\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?":re===0?_e="\u{1F91D} \uB2A5\uB825\uCE58\uAC00 \uB3D9\uC77C\uD569\uB2C8\uB2E4. \uAD50\uCCB4\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?":re>-5?_e="\u{1F44E} \uD604\uC7AC \uC7A5\uBE44\uAC00 \uB354 \uC88B\uC2B5\uB2C8\uB2E4. \uAD50\uCCB4\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?":_e="\u26A0\uFE0F \uD604\uC7AC \uC7A5\uBE44\uAC00 \uD6E8\uC52C \uC88B\uC2B5\uB2C8\uB2E4! \uAD50\uCCB4\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?":_e="\uC0C8 \uC7A5\uBE44\uB97C \uC7A5\uCC29\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?";let le=oe=>oe>0?`+${oe}`:`${oe}`,je=oe=>oe>0?`<span style="color: #10b981; font-weight: 700;">+${oe} \u2B06</span>`:oe<0?`<span style="color: #ef4444; font-weight: 700;">${oe} \u2B07</span>`:'<span style="color: #94a3b8;">0 \u27A1</span>',Jt=`
      <div style="display: flex; gap: 20px; margin: 20px 0; font-family: 'Noto Sans KR', sans-serif;">
        <div style="flex: 1; padding: 16px; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(99, 102, 241, 0.1)); border: 2px solid #3b82f6; border-radius: 12px;">
          <div style="font-weight: 700; font-size: 16px; color: #3b82f6; margin-bottom: 12px; text-align: center;">\u{1F4E6} \uC0C8 \uC544\uC774\uD15C</div>
          <div style="font-weight: 600; font-size: 14px; margin-bottom: 8px; text-align: center; color: var(--text-primary);">${t.name}</div>
          <div style="font-size: 13px; line-height: 1.8; color: var(--text-secondary);">
            <div>\u2694\uFE0F \uACF5\uACA9\uB825: <strong style="color: var(--text-primary);">${le(a)}</strong></div>
            <div>\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825: <strong style="color: var(--text-primary);">${le(s)}</strong></div>
            <div>\u2764\uFE0F HP: <strong style="color: var(--text-primary);">${le(m)}</strong></div>
            <div>\u{1F499} MP: <strong style="color: var(--text-primary);">${le(C)}</strong></div>
          </div>
        </div>
        <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 16px; min-width: 100px;">
          <div style="font-weight: 700; font-size: 14px; color: var(--text-secondary); margin-bottom: 12px;">\uCC28\uC774</div>
          <div style="font-size: 13px; line-height: 1.8;">
            <div>${je($)}</div>
            <div>${je(V)}</div>
            <div>${je(Q)}</div>
            <div>${je(X)}</div>
          </div>
        </div>
        <div style="flex: 1; padding: 16px; background: linear-gradient(135deg, rgba(148, 163, 184, 0.1), rgba(100, 116, 139, 0.1)); border: 2px solid #64748b; border-radius: 12px;">
          <div style="font-weight: 700; font-size: 16px; color: #64748b; margin-bottom: 12px; text-align: center;">\u{1F392} \uD604\uC7AC \uC7A5\uBE44</div>
          <div style="font-weight: 600; font-size: 14px; margin-bottom: 8px; text-align: center; color: var(--text-primary);">${G}</div>
          <div style="font-size: 13px; line-height: 1.8; color: var(--text-secondary);">
            <div>\u2694\uFE0F \uACF5\uACA9\uB825: <strong style="color: var(--text-primary);">${le(P)}</strong></div>
            <div>\u{1F6E1}\uFE0F \uBC29\uC5B4\uB825: <strong style="color: var(--text-primary);">${le(x)}</strong></div>
            <div>\u2764\uFE0F HP: <strong style="color: var(--text-primary);">${le(w)}</strong></div>
            <div>\u{1F499} MP: <strong style="color: var(--text-primary);">${le(g)}</strong></div>
          </div>
        </div>
      </div>
    `;this.dialog.open(J,{width:"700px",data:{title:"\u2696\uFE0F \uC7A5\uBE44 \uBE44\uAD50",message:Jt,confirmText:"\uC7A5\uCC29\uD558\uAE30",cancelText:"\uCDE8\uC18C",verdict:_e}}).afterClosed().subscribe(oe=>{oe&&this.equipItem(this.selectedContextItemIndex)})}deleteInventoryItem(t){if(!this.playerCharacter?.inventory)return;let e=this.playerCharacter.inventory[t];this.dialog.open(J,{width:"400px",data:{title:"\uC544\uC774\uD15C \uC0AD\uC81C",message:`"${e.name}"\uC744(\uB97C) \uC815\uB9D0 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,confirmText:"\uC0AD\uC81C",cancelText:"\uCDE8\uC18C"}}).afterClosed().subscribe(a=>{a&&this.playerCharacter?.inventory&&(this.playerCharacter.inventory.splice(t,1),this.saveInventoryToLocalStorage(),this.gameStarted&&this.currentGameId&&this.saveGame("autosave"),this.snackBar.open(`\u{1F5D1}\uFE0F ${e.name}\uC774(\uAC00) \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4`,"\uB2EB\uAE30",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"}))})}saveInventoryToLocalStorage(){if(this.playerCharacter?.inventory)try{localStorage.setItem("novel_inventory",JSON.stringify(this.playerCharacter.inventory))}catch{}}loadInventoryFromLocalStorage(){try{let t=localStorage.getItem("novel_inventory");if(t)return JSON.parse(t)}catch{}return null}loadSavedInventory(){let t=this.loadInventoryFromLocalStorage();t&&t.length>0&&(this.playerCharacter||this.playerState.loadPlayer(this.createDefaultCharacter()),this.playerCharacter.inventory=t)}createDefaultCharacter(){return{name:"\uBAA8\uD5D8\uAC00",level:1,exp:0,maxExp:100,hp:100,maxHp:100,mp:50,maxMp:50,attack:10,defense:10,agility:10,strength:10,intelligence:10,gold:1e4,gem:500,crystal:200,ticket:50,skillPoints:0,skills:[],inventory:this.createStartingInventory(),equipment:{weapon:void 0,armor:void 0,helmet:void 0,gloves:void 0,boots:void 0,belt:void 0,amulet:void 0,ring1:void 0,ring2:void 0}}}createStartingInventory(){return this.itemGeneratorService.createStartingInventory()}initializeDungeonSystem(){this.dungeonManager.initializeDungeonSystem()}openDungeonEntryDialog(t){this.dungeonManager.openDungeonEntryDialog(t)}closeDungeonEntryDialog(){this.dungeonManager.closeDungeonEntryDialog()}enterDungeon(t,e){this.dungeonManager.enterDungeon(t,e)}generateDungeon(t,e){return this.dungeonGenerator.generateDungeon(t,e,this.playerCharacter.level)}enterFloor(t){pe.enterFloor(t,this.currentDungeon,this.debugLogger,e=>this.addStoryBlock(e),e=>this.enterRoom(e))}enterRoom(t){this.currentDungeonRoom=pe.enterRoom(t,this.currentDungeon,this.currentDungeonRoom,e=>this.addStoryBlock(e),e=>this.getRoomTypeKorean(e)),t.monsters.length>0&&!t.isCleared&&this.startDungeonCombat(t),this.debugLogger.info("\uB358\uC804",`\u{1F6AA} \uBC29 \uC9C4\uC785: ${t.type}`)}startDungeonCombat(t){if(this.dungeonTestOptions.skipCombat){this.debugLogger.info("\uB358\uC804","\u23ED\uFE0F \uC804\uD22C \uC2A4\uD0B5 \uD65C\uC131\uD654 - \uC790\uB3D9 \uC2B9\uB9AC"),t.monsters.forEach(n=>{n.hp=0,n.isDead=!0;let a=Math.floor(Math.random()*(n.dropTable.goldMax-n.dropTable.goldMin+1))+n.dropTable.goldMin,s=Math.floor(n.maxHp*.8);this.playerCharacter.gold+=a,this.gainExp(s),this.currentDungeon&&(this.currentDungeon.accumulatedRewards.gold+=a,this.currentDungeon.accumulatedRewards.experience+=s,this.currentDungeon.stats.monstersKilled++,n.type==="elite"?this.currentDungeon.stats.elitesKilled++:n.type==="boss"&&(this.currentDungeon.stats.bossKilled=!0,this.currentDungeon.stats.elitesKilled++))}),t.isCleared=!0,this.addStoryBlock(["\u23ED\uFE0F \uC804\uD22C \uC790\uB3D9 \uC2B9\uB9AC!",`\u{1F480} ${t.monsters.length}\uB9C8\uB9AC \uCC98\uCE58`,"\uBC29\uC774 \uD074\uB9AC\uC5B4\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",""]),this.debugLogger.info("\uB358\uC804",`\u{1F4BE} \uC804\uD22C \uC2A4\uD0B5 \uD6C4 \uC790\uB3D9 \uC800\uC7A5 (\uACBD\uD5D8\uCE58: ${this.playerCharacter.exp}/${this.playerCharacter.maxExp}, \uB808\uBCA8: ${this.playerCharacter.level})`),this.saveGame("auto_dungeon_skip_combat").then(()=>{});return}let e=t.monsters[0];this.addStoryBlock([`\u2694\uFE0F ${e.name}\uC774(\uAC00) \uB098\uD0C0\uB0AC\uB2E4!`,`\uB808\uBCA8: ${e.level} | HP: ${e.hp}`,e.eliteAffixes?`\uD2B9\uC131: ${e.eliteAffixes.join(", ")}`:"",""])}winDungeonCombat(t,e){return O(this,null,function*(){yield pe.winDungeonCombat(t,e,this.currentDungeon,this.playerCharacter,n=>this.gainExp(n),n=>this.addStoryBlock(n),n=>this.saveGame(n),()=>this.completeDungeon(),this.debugLogger)})}completeDungeon(){return O(this,null,function*(){yield pe.completeDungeon(this.currentDungeon,this.dungeonProgress,this.dungeonTypes,t=>this.addStoryBlock(t),t=>this.setChoices(t),t=>this.saveGame(t),this.debugLogger,()=>{this.showDungeonPanel=!1,this.currentDungeon=null,this.currentDungeonRoom=null})})}moveToNextRoom(){pe.moveToNextRoom(this.currentDungeon,this.currentDungeonRoom,t=>this.enterRoom(t))}escapeDungeon(){this.currentDungeon&&(this.currentDungeon.status="failed",this.dungeonProgress.inDungeon=!1,this.addStoryBlock(["","\u{1F6AA} \uB2F9\uC2E0\uC740 \uB358\uC804\uC5D0\uC11C \uD0C8\uCD9C\uD588\uC2B5\uB2C8\uB2E4.","\u{1F4B0} \uD68D\uB4DD\uD55C \uBCF4\uC0C1\uC740 \uC720\uC9C0\uB429\uB2C8\uB2E4.",""]),this.showDungeonPanel=!1,this.currentDungeon=null,this.currentDungeonRoom=null,this.closeDungeonDialog(),this.saveGame("autosave"),this.debugLogger.warn("\uB358\uC804","\u26A0\uFE0F \uB358\uC804 \uD0C8\uCD9C"))}getDifficultyKorean(t){return{easy:"\uC26C\uC6C0",normal:"\uBCF4\uD1B5",hard:"\uC5B4\uB824\uC6C0",hell:"\uC9C0\uC625"}[t]}getRoomTypeKorean(t){return pe.getRoomTypeKorean(String(t))}openDungeonDialog(){this.dungeonManager.openDungeonDialog()}closeDungeonDialog(){this.dungeonManager.closeDungeonDialog()}selectDungeonType(t){this.dungeonManager.selectDungeonType(t)}selectDifficulty(t){this.dungeonManager.selectDifficulty(t)}startDungeon(){this.dungeonManager.startDungeon()}onDungeonRoomMove(t){this.dungeonManager.onDungeonRoomMove(t)}onDungeonMonsterAttack(t){this.dungeonManager.onDungeonMonsterAttack(t)}onDungeonInteractableUse(t){this.dungeonManager.onDungeonInteractableUse(t)}onDungeonEscape(){this.dungeonManager.onDungeonEscape()}onDungeonFloorMove(t){this.dungeonManager.onDungeonFloorMove(t)}onDungeonRewardsClaimed(t){this.dungeonManager.onDungeonRewardsClaimed(t,this.inventory)}createDungeonRewardItem(t){return this.dungeonManager.createDungeonRewardItem(t)}toggleDungeonTestOption(t){this.dungeonManager.toggleDungeonTestOption(t)}getPlayerEquipment(){return this.dungeonManager.getPlayerEquipment()}onInventoryCellRightClick(t,e,n){t.preventDefault(),t.stopPropagation(),this.selectedContextItem=e,this.selectedContextItemIndex=n,this.contextMenuPosition={x:t.clientX,y:t.clientY},this.showItemContextMenu=!0,setTimeout(()=>{document.addEventListener("click",this.closeContextMenu.bind(this),{once:!0})},0)}closeContextMenu(){this.showItemContextMenu=!1}equipItemFromMenu(){if(!this.selectedContextItem||this.selectedContextItemIndex===-1)return;let t=this.selectedContextItem,e=t.type?.toLowerCase()||"",n="";e.includes("weapon")||e.includes("sword")||e.includes("bow")||e.includes("staff")?n="weapon":e.includes("armor")||e.includes("chest")?n="armor":e.includes("helmet")||e.includes("helm")?n="helmet":e.includes("gloves")?n="gloves":e.includes("boots")||e.includes("shoes")?n="boots":e.includes("amulet")||e.includes("necklace")?n="amulet":e.includes("belt")?n="belt":e.includes("ring")&&(n=this.playerCharacter.equipment?.ring1?"ring2":"ring1"),n?this.equipItemToSlot(t,n):this.snackBar.open("\u274C \uC7A5\uCC29\uD560 \uC218 \uC5C6\uB294 \uC544\uC774\uD15C\uC785\uB2C8\uB2E4","\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.closeContextMenu()}showItemInfoModal(){this.selectedContextItem&&(this.showItemInfo=!0,this.closeContextMenu())}discardItemFromMenu(){if(!this.selectedContextItem||this.selectedContextItemIndex===-1)return;let t=this.selectedContextItem.nameKo||this.selectedContextItem.name;confirm(`\uC815\uB9D0\uB85C "${t}"\uC744(\uB97C) \uBC84\uB9AC\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`)&&(this.inventory.splice(this.selectedContextItemIndex,1),this.snackBar.open(`\u{1F5D1}\uFE0F ${t}\uC744(\uB97C) \uBC84\uB838\uC2B5\uB2C8\uB2E4`,"\uB2EB\uAE30",{duration:2e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.saveGame("inventory_change").catch(e=>{})),this.closeContextMenu()}closeItemInfoModal(){this.showItemInfo=!1}onItemInfoDragStart(t){if(t.target.classList.contains("modal-close-btn")||t.target.closest(".item-info-actions"))return;this.isDraggingModal=!0,this.modalDragOffset={x:t.clientX-this.itemInfoPosition.x,y:t.clientY-this.itemInfoPosition.y},t.preventDefault();let e=a=>{this.isDraggingModal&&(this.itemInfoPosition={x:a.clientX-this.modalDragOffset.x,y:a.clientY-this.modalDragOffset.y})},n=()=>{this.isDraggingModal=!1,document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)}equipItemFromModal(){this.equipItemFromMenu(),this.closeItemInfoModal()}discardItemFromModal(){let t=this.selectedContextItem?.nameKo||this.selectedContextItem?.name;confirm(`\uC815\uB9D0\uB85C "${t}"\uC744(\uB97C) \uBC84\uB9AC\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`)&&(this.discardItemFromMenu(),this.closeItemInfoModal())}isEquippableItem(t){if(!t||!t.type)return!1;let e=t.type.toLowerCase();return["weapon","armor","helmet","gloves","boots","amulet","belt","ring","sword","bow","staff","chest","helm","necklace","shoes"].some(a=>e.includes(a))}quickEquipItem(t,e){if(!t||!this.isEquippableItem(t)){this.snackBar.open("\u274C \uC7A5\uCC29\uD560 \uC218 \uC5C6\uB294 \uC544\uC774\uD15C\uC785\uB2C8\uB2E4","\uB2EB\uAE30",{duration:1500,horizontalPosition:"center",verticalPosition:"bottom"});return}let n=t.type?.toLowerCase()||"",a="";n.includes("weapon")||n.includes("sword")||n.includes("bow")||n.includes("staff")?a="weapon":n.includes("armor")||n.includes("chest")?a="armor":n.includes("helmet")||n.includes("helm")?a="helmet":n.includes("gloves")?a="gloves":n.includes("boots")||n.includes("shoes")?a="boots":n.includes("amulet")||n.includes("necklace")?a="amulet":n.includes("belt")?a="belt":n.includes("ring")&&(a=this.playerCharacter.equipment?.ring1?"ring2":"ring1"),a?(this.equipItemToSlot(t,a),navigator.vibrate&&navigator.vibrate(50),this.snackBar.open(`\u2705 ${t.nameKo||t.name}\uC744(\uB97C) \uC7A5\uCC29\uD588\uC2B5\uB2C8\uB2E4`,"\uB2EB\uAE30",{duration:1500,horizontalPosition:"center",verticalPosition:"bottom"})):this.snackBar.open("\u274C \uC7A5\uCC29\uD560 \uC218 \uC5C6\uB294 \uC544\uC774\uD15C\uC785\uB2C8\uB2E4","\uB2EB\uAE30",{duration:1500,horizontalPosition:"center",verticalPosition:"bottom"})}getRarityName(t){return{common:"\uC77C\uBC18",uncommon:"\uACE0\uAE09",rare:"\uD76C\uADC0",epic:"\uC601\uC6C5",legendary:"\uC804\uC124",unique:"\uC720\uB2C8\uD06C",mythic:"\uC2E0\uD654"}[t]||t}getTypeName(t){return{weapon:"\uBB34\uAE30",armor:"\uBC29\uC5B4\uAD6C",helmet:"\uD22C\uAD6C",gloves:"\uC7A5\uAC11",boots:"\uC2E0\uBC1C",belt:"\uD5C8\uB9AC\uB760",amulet:"\uBAA9\uAC78\uC774",ring:"\uBC18\uC9C0",consumable:"\uC18C\uBE44\uD488",material:"\uC7AC\uB8CC",quest:"\uD018\uC2A4\uD2B8",misc:"\uAE30\uD0C0"}[t]||t}getPlayerSkills(){return this.playerCharacter.skills||[]}scrollToNovels(){document.getElementById("novels-section")?.scrollIntoView({behavior:"smooth"})}navigateToWuxiaGame(){this.router.navigate(["/novel/wuxia-game"])}openCharacterCreator(){this.novelState.openCharacterCreator()}isCharacterSelected(t){return this.selectedCharactersForStory.some(e=>e.id===t.id)}selectCharacterForStory(t){let e=this.selectedCharactersForStory.findIndex(n=>n.id===t.id);e>=0?this.selectedCharactersForStory.splice(e,1):this.selectedCharactersForStory.push(t)}isItemSelected(t){return this.selectedItemsForStory.some(e=>e.id===t.id)}selectItemForStory(t){let e=this.selectedItemsForStory.findIndex(n=>n.id===t.id);e>=0?this.selectedItemsForStory.splice(e,1):this.selectedItemsForStory.push(t)}isScenarioSelected(t){return this.selectedScenariosForStory.some(e=>e.id===t.id)}selectScenarioForStory(t){let e=this.selectedScenariosForStory.findIndex(n=>n.id===t.id);e>=0?this.selectedScenariosForStory.splice(e,1):this.selectedScenariosForStory.push(t)}selectChoice(t){return O(this,null,function*(){if(t>=0&&t<this.choices.length){let e=this.choices[t];this.currentPath.push(e),this.debugLogger.info("\uC120\uD0DD\uC9C0",`\u2705 \uC120\uD0DD: ${e}`),yield this.saveGame("autosave")}})}selectNovel(t){this.selectedNovel=t,this.novelSelected=!0}formatSaveDate(t){return t?new Date(t).toLocaleString("ko-KR"):""}getCurrentTime(){return new Date().toLocaleTimeString("ko-KR")}getRoleName(t){return{warrior:"\uC804\uC0AC",mage:"\uB9C8\uBC95\uC0AC",archer:"\uAD81\uC218",thief:"\uB3C4\uC801",priest:"\uC0AC\uC81C",paladin:"\uC131\uAE30\uC0AC"}[t]||t}selectMember(t){this.selectedMember=t}getStatusName(t){return{poison:"\uB3C5",stun:"\uAE30\uC808",burn:"\uD654\uC0C1",freeze:"\uB0C9\uAE30",silence:"\uCE68\uBB35",blind:"\uC2E4\uBA85"}[t]||t}getNodeColor(t){return{start:"#4CAF50",story:"#2196F3",battle:"#F44336",event:"#FF9800",ending:"#9C27B0"}[t.type]||"#757575"}getNodeBorderColor(t){return this.getNodeColor(t)}isArray(t){return Array.isArray(t)}toggleStories(){this.isStoriesExpanded=!this.isStoriesExpanded}toggleCharacters(){this.isCharactersExpanded=!this.isCharactersExpanded}toggleScenarios(){this.isScenariosExpanded=!this.isScenariosExpanded}toggleItems(){this.isItemsExpanded=!this.isItemsExpanded}toggleShop(){this.isShopExpanded=!this.isShopExpanded}getCharacterGameData(t){let e=localStorage.getItem("novel_games");if(this.debugLogger.info("\uCE90\uB9AD\uD130\uB370\uC774\uD130",`\u{1F50D} LocalStorage novel_games: ${e?"\uC788\uC74C":"\uC5C6\uC74C"}`),!e)return null;try{let n=JSON.parse(e);this.debugLogger.info("\uCE90\uB9AD\uD130\uB370\uC774\uD130",`\u{1F4DA} \uC804\uCCB4 \uAC8C\uC784 \uBAA9\uB85D: ${Object.keys(n).length}\uAC1C`);let a=Object.values(n).filter(m=>m?.playerCharacter?.name===t);if(this.debugLogger.info("\uCE90\uB9AD\uD130\uB370\uC774\uD130",`\u2705 "${t}" \uCE90\uB9AD\uD130 \uAC8C\uC784: ${a.length}\uAC1C`),a.length===0)return null;let s=a.sort((m,C)=>new Date(C.timestamp||0).getTime()-new Date(m.timestamp||0).getTime())[0];return this.debugLogger.info("\uCE90\uB9AD\uD130\uB370\uC774\uD130","\u{1F3AE} \uCD5C\uADFC \uAC8C\uC784 \uBC18\uD658 \uC644\uB8CC"),s}catch(n){return this.debugLogger.error("\uCE90\uB9AD\uD130\uB370\uC774\uD130",`\u274C \uAC8C\uC784 \uB370\uC774\uD130 \uD30C\uC2F1 \uC624\uB958: ${n}`),null}}getCharacterInventoryCount(t){return this.getCharacterGameData(t)?.playerCharacter?.inventory?.length||0}getCharacterGold(t){let e=this.getCharacterGameData(t);return e?.playerCharacter?.gold||e?.gold||0}getCharacterLevel(t){return this.getCharacterGameData(t)?.playerCharacter?.level||1}closeAllPanels(){this.showCharacterPanel=!1,this.novelState.closeInventoryPanel(),this.novelState.closeShopPanel()}toggleCharacterPanel(){this.showCharacterPanel=!this.showCharacterPanel}toggleInventoryPanel(){this.novelState.toggleInventoryPanel()}toggleShopPanel(){this.novelState.toggleShopPanel()}toggleStats(){this.showStats=!this.showStats}toggleStoryFlowPanel(){this.showStoryFlowPanel=!this.showStoryFlowPanel}get visibleNodes(){return this.storyNodes.filter(t=>t.isVisible!==!1)}openScenarioLinkPanel(t,e){this.currentLinkingChoiceIndex=t,e&&(this.currentLinkingNodeId=e),this.showScenarioLinkPanel=!0}closeScenarioLinkPanel(){this.showScenarioLinkPanel=!1,this.currentLinkingNodeId="",this.currentLinkingChoiceId=""}linkScenarioToChoice(t,e){this.currentLinkingChoiceId=t.toString(),this.linkScenarioToFlowNode(e)}generateAiCharacter(t){this.notification.show(`AI \uCE90\uB9AD\uD130 \uC0DD\uC131 \uC911... ${t||""}`)}generateAiScenario(t,e,n){this.notification.show(`AI \uC2DC\uB098\uB9AC\uC624 \uC0DD\uC131 \uC911... ${t||""} ${e||""} ${n||""}`)}saveGeneratedCharacter(){this.notification.show("\uCE90\uB9AD\uD130\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}applyGeneratedCharacter(){this.notification.show("\uCE90\uB9AD\uD130\uAC00 \uC801\uC6A9\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}deleteCharacter(t,e){e&&e.stopPropagation(),t.id&&this.contentManagementHelper.deleteCharacter(t.id,()=>O(this,null,function*(){yield this.loadSavedCharacters()}))}saveGeneratedStory(){return O(this,null,function*(){if(!this.generatedStory){this.notification.warning("\uC800\uC7A5\uD560 \uC2A4\uD1A0\uB9AC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4");return}try{let t={id:this.generatedStory.id,title:this.generatedStory.title,description:this.generatedStory.description,genre:this.generatedStory.genre,difficulty:this.generatedStory.difficulty,icon:this.generatedStory.icon,startingGold:this.generatedStory.startingGold,startingItems:this.generatedStory.startingItems,firstStory:this.generatedStory.firstStory,firstChoices:this.generatedStory.firstChoices,createdAt:new Date,createdBy:"AI"};yield this.storyDbService.saveStory(t),yield this.loadSavedStories(),this.notification.success("\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!")}catch{this.notification.error("\uC2A4\uD1A0\uB9AC \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4")}})}loadSavedStoryForGame(t){return O(this,null,function*(){try{let e=this.contentManagementHelper.convertStoryToNovelTemplate(t),n=`game_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;sessionStorage.setItem("newGame_"+n,JSON.stringify({novel:e})),this.router.navigate(["/novel/game",n]),this.notification.show(`\u{1F4D6} "${t.title}" \uC2A4\uD1A0\uB9AC\uB97C \uC2DC\uC791\uD569\uB2C8\uB2E4!`)}catch(e){this.debugLogger.error("\uC2A4\uD1A0\uB9AC\uB85C\uB4DC",`\uC2A4\uD1A0\uB9AC \uC2DC\uC791 \uC2E4\uD328: ${e}`),this.notification.error("\uC2A4\uD1A0\uB9AC \uC2DC\uC791 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4")}})}deleteSavedStory(t,e){e&&e.stopPropagation(),this.contentManagementHelper.deleteStory(t,()=>O(this,null,function*(){yield this.loadSavedStories()}))}addGeneratedStoryToList(){return O(this,null,function*(){if(!this.generatedStory){this.notification.warning("\uC2DC\uC791\uD560 \uC2A4\uD1A0\uB9AC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4");return}try{this.savedStories.find(n=>n.id===this.generatedStory.id)||(yield this.saveGeneratedStory());let e=`game_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;sessionStorage.setItem("newGame_"+e,JSON.stringify({novel:this.generatedStory})),this.router.navigate(["/novel/game",e]),this.notification.success(`\u{1F3AE} "${this.generatedStory.title}" \uAC8C\uC784\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4!`)}catch{this.notification.error("\uAC8C\uC784 \uC2DC\uC791 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4")}})}clearGeneratedStory(){this.generatedStory=null}generateStoryFromSavedContent(){return O(this,null,function*(){if(!this.storyTitle||this.storyTitle.trim()===""){this.notification.warning("\uC2A4\uD1A0\uB9AC \uC81C\uBAA9\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694");return}if(this.selectedScenariosForStory.length===0){this.notification.warning("\uCD5C\uC18C 1\uAC1C \uC774\uC0C1\uC758 \uC2DC\uB098\uB9AC\uC624\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694");return}if(this.selectedCharactersForStory.length===0){this.notification.warning("\uCD5C\uC18C 1\uAC1C \uC774\uC0C1\uC758 \uCE90\uB9AD\uD130\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694");return}if(this.selectedItemsForStory.length===0){this.notification.warning("\uCD5C\uC18C 1\uAC1C \uC774\uC0C1\uC758 \uC544\uC774\uD15C\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694");return}try{this.isGeneratingStory=!0,this.storyGenerationError="",this.notification.show("\u{1F3AC} \uC2A4\uD1A0\uB9AC \uC0DD\uC131 \uC911...");let t=this.selectedScenariosForStory[0],e=this.selectedCharactersForStory[0],n=this.selectedItemsForStory.slice(0,3).map(a=>({id:a.id?.toString()||`item_${Date.now()}`,name:a.name,description:a.description,type:"misc",quantity:1,grade:a.grade,rarity:"common",effect:a.effects?.join(", ")||"",icon:"\u{1F4E6}"}));this.generatedStory={id:`story_${Date.now()}`,title:this.storyTitle.trim(),description:t.description,icon:"\u{1F4D6}",difficulty:"normal",genre:t.genre||"\uD310\uD0C0\uC9C0",startingGold:1e3,startingItems:n,firstStory:[`\uC81C\uBAA9: ${this.storyTitle}`,"",`\uBC30\uACBD: ${t.setting}`,`\uAC08\uB4F1: ${t.conflict}`,"",`\uC8FC\uC778\uACF5: ${e.name} (${e.age}\uC138, ${e.gender})`,`${e.backstory}`,"","\uC2A4\uD1A0\uB9AC\uAC00 \uC2DC\uC791\uB429\uB2C8\uB2E4..."],firstChoices:["\uBAA8\uD5D8\uC744 \uC2DC\uC791\uD55C\uB2E4","\uC900\uBE44\uB97C \uB354 \uD55C\uB2E4","\uC0C1\uD669\uC744 \uAD00\uCC30\uD55C\uB2E4"]},this.generatedStory&&this.selectedCharactersForStory.length>1&&(this.generatedStory.firstStory.push(""),this.generatedStory.firstStory.push("\uB4F1\uC7A5\uC778\uBB3C:"),this.selectedCharactersForStory.slice(1,4).forEach(a=>{this.generatedStory&&this.generatedStory.firstStory.push(`- ${a.name}: ${a.occupation}`)})),this.generatedStory&&this.selectedItemsForStory.length>0&&(this.generatedStory.firstStory.push(""),this.generatedStory.firstStory.push("\uD575\uC2EC \uC544\uC774\uD15C:"),this.selectedItemsForStory.slice(0,3).forEach(a=>{this.generatedStory&&this.generatedStory.firstStory.push(`- ${a.name}: ${a.description}`)})),this.notification.success("\u2705 \uC2A4\uD1A0\uB9AC\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),this.cdr.detectChanges()}catch(t){this.storyGenerationError=t instanceof Error?t.message:"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4",this.notification.error("\uC2A4\uD1A0\uB9AC \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4")}finally{this.isGeneratingStory=!1,this.cdr.detectChanges()}})}loadGame(t){t&&this.router.navigate(["/novel/game",t])}buyItem(t){this.playerCharacter.gold>=t.price?(this.playerCharacter.gold-=t.price,this.addToInventory(t,1),this.notification.show(`${t.name}\uC744(\uB97C) \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4.`)):this.notification.show("\uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4.")}changeLayout(t){(t==="hierarchical"||t==="radial"||t==="force")&&(this.flowLayoutType=t)}toggleFilter(t){}toggleLeftPanel(){this.isLeftPanelCollapsed=!this.isLeftPanelCollapsed}toggleRightPanel(){this.isRightPanelCollapsed=!this.isRightPanelCollapsed}expandLeftPanel(){this.isLeftPanelCollapsed=!1}closeLeftPanel(){this.isLeftPanelCollapsed=!0}expandRightPanel(){this.isRightPanelCollapsed=!1}closeRightPanel(){this.isRightPanelCollapsed=!0}switchFlowTab(t){(t==="character"||t==="map")&&this.novelState.setFlowPanelTab(t)}onCanvasMouseDown(t){let e=t.target;if(e.classList.contains("node-circle")||e.closest(".story-node"))return;this.isDraggingCanvas=!0,this.dragStartX=t.clientX,this.dragStartY=t.clientY,this.dragStartPanX=this.flowPanX,this.dragStartPanY=this.flowPanY;let n=t.currentTarget;n.style.cursor="grabbing"}onCanvasMouseMove(t){if(this.isDraggingNode&&this.draggingNode){let e=t.clientX-this.nodeDragStartX,n=t.clientY-this.nodeDragStartY;(Math.abs(e)>5||Math.abs(n)>5)&&(this.hasNodeMoved=!0),this.draggingNode.position.x=this.nodeStartX+e/this.flowZoomLevel,this.draggingNode.position.y=this.nodeStartY+n/this.flowZoomLevel,this.updateConnections();return}if(this.isDraggingCanvas){let e=t.clientX-this.dragStartX,n=t.clientY-this.dragStartY;this.flowPanX=this.dragStartPanX+e/this.flowZoomLevel,this.flowPanY=this.dragStartPanY+n/this.flowZoomLevel}}onCanvasMouseUp(){this.isDraggingNode&&(this.isDraggingNode=!1,this.draggingNode=null,setTimeout(()=>{this.hasNodeMoved=!1},10)),this.isDraggingCanvas&&(this.isDraggingCanvas=!1,document.querySelectorAll(".flow-canvas-container").forEach(e=>{e.style.cursor="grab"}))}onCanvasWheel(t){t.preventDefault();let e=.1,n=t.deltaY>0?-e:e,a=this.flowZoomLevel;if(this.flowZoomLevel=Math.max(.3,Math.min(3,this.flowZoomLevel+n)),a!==this.flowZoomLevel){let s=t.currentTarget.getBoundingClientRect(),m=t.clientX-s.left,C=t.clientY-s.top,P=this.flowZoomLevel/a;this.flowPanX=m-(m-this.flowPanX)*P,this.flowPanY=C-(C-this.flowPanY)*P}}getCanvasTransform(){return`translate(${this.flowPanX}, ${this.flowPanY}) scale(${this.flowZoomLevel})`}onNodeMouseDown(t,e){e.stopPropagation(),this.isDraggingNode=!0,this.draggingNode=t,this.nodeDragStartX=e.clientX,this.nodeDragStartY=e.clientY,this.nodeStartX=t.position.x,this.nodeStartY=t.position.y,e.preventDefault()}onNodeClick(t,e){e&&e.stopPropagation(),!this.hasNodeMoved&&(this.selectedNode?.id===t.id?this.selectedNode=null:this.selectedNode=t,this.cdr.detectChanges())}updateConnections(){this.storyConnections.forEach(t=>{let e=this.storyNodes.find(a=>a.id===t.from),n=this.storyNodes.find(a=>a.id===t.to);if(e&&n){let a=(e.position.x+n.position.x)/2,s=(e.position.y+n.position.y)/2,m=100;t.path=`M ${e.position.x},${e.position.y} Q ${a},${s-m} ${n.position.x},${n.position.y}`}})}zoomIn(){this.flowZoomLevel=Math.min(3,this.flowZoomLevel+.2)}zoomOut(){this.flowZoomLevel=Math.max(.3,this.flowZoomLevel-.2)}resetZoom(){this.flowZoomLevel=1,this.flowPanX=0,this.flowPanY=0}focusOnCurrentNode(){let t=this.storyNodes.find(e=>e.isCurrent);t&&(this.flowPanX=600-t.position.x*this.flowZoomLevel,this.flowPanY=400-t.position.y*this.flowZoomLevel,this.selectedNode=t,this.cdr.detectChanges())}centerView(){this.resetZoom()}fitToScreen(){this.resetZoom()}openCharacterInventory(t,e){e.stopPropagation(),this.debugLogger.info("\uCE90\uB9AD\uD130\uC778\uBCA4\uD1A0\uB9AC",`\u{1F392} \uCE90\uB9AD\uD130 \uC778\uBCA4\uD1A0\uB9AC \uC5F4\uAE30: ${t.name}`),this.selectedCharacterForInventory=t;let n=this.getCharacterGameData(t.name);n||(this.debugLogger.info("\uCE90\uB9AD\uD130\uC778\uBCA4\uD1A0\uB9AC","\u{1F527} \uAE30\uBCF8 \uAC8C\uC784 \uB370\uC774\uD130 \uC0DD\uC131"),n=this.createDefaultGameData(t)),this.debugLogger.info("\uCE90\uB9AD\uD130\uC778\uBCA4\uD1A0\uB9AC",`\u{1F4E6} \uAC8C\uC784 \uB370\uC774\uD130: ${n?"\uC874\uC7AC\uD568":"\uC5C6\uC74C"}`),n?(this.selectedCharacterGameData=n,this.showCharacterInventoryModal=!0,this.debugLogger.info("\uCE90\uB9AD\uD130\uC778\uBCA4\uD1A0\uB9AC","\u2705 \uBAA8\uB2EC \uC5F4\uB9BC")):(this.debugLogger.info("\uCE90\uB9AD\uD130\uC778\uBCA4\uD1A0\uB9AC","\u274C \uAC8C\uC784 \uB370\uC774\uD130 \uC0DD\uC131 \uC2E4\uD328"),this.notification.show("\uCE90\uB9AD\uD130 \uB370\uC774\uD130\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."))}createDefaultGameData(t){let e=new Date,s={helmet:void 0,armor:{name:"\uCD08\uBCF4\uC790\uC758 \uAC11\uC637",baseType:"\uAC11\uC637",type:"armor",rarity:"common",itemLevel:1,requiredLevel:1,baseStats:{attack:0,defense:3}},weapon:{name:"\uCD08\uBCF4\uC790\uC758 \uAC80",baseType:"\uAC80",type:"weapon",rarity:"common",itemLevel:1,requiredLevel:1,baseStats:{attack:5,defense:0}},gloves:void 0,boots:void 0,belt:void 0,amulet:void 0,ring1:void 0,ring2:void 0},m=[{id:"potion_health_small",name:"\uCCB4\uB825 \uBB3C\uC57D (\uC18C)",type:"consumable",rarity:"common",quantity:3,icon:"\u{1F9EA}",description:"HP\uB97C 50 \uD68C\uBCF5\uD569\uB2C8\uB2E4"},{id:"potion_mana_small",name:"\uB9C8\uB098 \uBB3C\uC57D (\uC18C)",type:"consumable",rarity:"common",quantity:2,icon:"\u{1F499}",description:"MP\uB97C 30 \uD68C\uBCF5\uD569\uB2C8\uB2E4"},{id:"bread",name:"\uBE75",type:"consumable",rarity:"common",quantity:5,icon:"\u{1F35E}",description:"\uAC04\uB2E8\uD55C \uC2DD\uC0AC. HP\uB97C 10 \uD68C\uBCF5\uD569\uB2C8\uB2E4"}],C={name:t.name,level:1,exp:0,maxExp:100,hp:100,maxHp:100,mp:50,maxMp:50,attack:10,defense:5,agility:5,strength:10,intelligence:10,gold:100,gem:0,crystal:0,ticket:0,skillPoints:0,skills:[],equipment:s,inventory:m},P={id:"default",title:"\uAE30\uBCF8 \uBAA8\uD5D8",genre:"\uD310\uD0C0\uC9C0",description:"\uC0C8\uB85C\uC6B4 \uBAA8\uD5D8\uC758 \uC2DC\uC791",icon:"\u2694\uFE0F",difficulty:"normal",startingGold:100,startingItems:[],firstStory:["\uB2F9\uC2E0\uC758 \uBAA8\uD5D8\uC774 \uC2DC\uC791\uB429\uB2C8\uB2E4."],firstChoices:[]};return{id:`game_${t.name}_${Date.now()}`,novelId:"default",novelTitle:"\uCE90\uB9AD\uD130 \uC778\uBCA4\uD1A0\uB9AC",novelTemplate:P,playerCharacter:C,storyBlocks:[],currentPath:[],choices:[],gameStarted:!1,gold:100,inventory:m,completedQuests:[],currentChapter:0,saveDate:e}}closeCharacterInventory(){this.showCharacterInventoryModal=!1,this.selectedCharacterForInventory=null,this.selectedCharacterGameData=null,this.characterInventoryTab="equipment"}buyItemForCharacter(t,e){if(e.stopPropagation(),!this.selectedCharacterGameData){this.notification.show("\uCE90\uB9AD\uD130 \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n=t.price||this.calculateItemPriceByGrade(t.grade);if(this.selectedCharacterGameData.playerCharacter.gold<n){this.notification.show("\uACE8\uB4DC\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4!");return}if(this.selectedCharacterGameData.playerCharacter.inventory||(this.selectedCharacterGameData.playerCharacter.inventory=[]),this.selectedCharacterGameData.playerCharacter.inventory.length>=this.maxInventorySize){this.notification.show("\uC778\uBCA4\uD1A0\uB9AC\uAC00 \uAC00\uB4DD \uCC3C\uC2B5\uB2C8\uB2E4!");return}this.selectedCharacterGameData.playerCharacter.gold-=n;let a={id:`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:t.name,description:t.description,type:this.mapItemTypeToInventoryType(t.type),quantity:1,rarity:this.mapGradeToRarity(t.grade),icon:"\u{1F4E6}",stats:t.stats||{}};this.selectedCharacterGameData.playerCharacter.inventory.push(a),this.saveCharacterGameData(),this.debugLogger.info("\uCE90\uB9AD\uD130\uC0C1\uC810",`\u2705 ${t.name} \uAD6C\uB9E4 \uC644\uB8CC (${n}G)`),this.notification.show(`${t.name}\uC744(\uB97C) \uAD6C\uB9E4\uD588\uC2B5\uB2C8\uB2E4! (-${n}G)`)}saveCharacterGameData(){if(this.selectedCharacterGameData)try{let t=localStorage.getItem("novel_games"),e=t?JSON.parse(t):{};e[this.selectedCharacterGameData.id]=this.selectedCharacterGameData,localStorage.setItem("novel_games",JSON.stringify(e)),this.debugLogger.info("\uCE90\uB9AD\uD130\uB370\uC774\uD130","\u{1F4BE} \uAC8C\uC784 \uB370\uC774\uD130 \uC800\uC7A5 \uC644\uB8CC")}catch(t){this.debugLogger.error("\uCE90\uB9AD\uD130\uB370\uC774\uD130",`\u274C \uAC8C\uC784 \uB370\uC774\uD130 \uC800\uC7A5 \uC2E4\uD328: ${t}`)}}mapItemTypeToInventoryType(t){return{\uBB34\uAE30:"weapon",\uBC29\uC5B4\uAD6C:"armor",\uD22C\uAD6C:"helmet",\uC7A5\uAC11:"gloves",\uC2E0\uBC1C:"boots",\uD5C8\uB9AC\uB760:"belt",\uBAA9\uAC78\uC774:"amulet",\uBC18\uC9C0:"ring",\uC7A5\uC2E0\uAD6C:"accessory",\uC18C\uBAA8\uD488:"consumable",\uC7AC\uB8CC:"material",\uD018\uC2A4\uD2B8:"quest",\uAE30\uD0C0:"misc"}[t]||"misc"}mapGradeToRarity(t){return{\uC77C\uBC18:"common",\uACE0\uAE09:"uncommon",\uD76C\uADC0:"rare",\uC601\uC6C5:"epic",\uC804\uC124:"legendary",\uC2E0\uD654:"mythic",\uC720\uB2C8\uD06C:"unique"}[t]||"common"}getEmptyCharacterInventorySlots(){if(!this.selectedCharacterGameData?.playerCharacter?.inventory)return Array(this.maxInventorySize).fill(0);let t=this.selectedCharacterGameData.playerCharacter.inventory.length,e=Math.max(0,this.maxInventorySize-t);return Array(e).fill(0)}getCharacterEquipment(){return this.selectedCharacterGameData?.playerCharacter?.equipment||null}getCharacterInventory(){return this.selectedCharacterGameData?.playerCharacter?.inventory||[]}asAny(t){return t}loadCharacter(t){this.generatedCharacter=t}static \u0275fac=function(e){return new(e||r)(z(at),z(Se),z(De),z(ue),z(vn),z(Ie),z(be),z(fe),z(he),z(Pe),z(Ne),z(te),z(ze),z(Me),z(Fe),z(qe),z(Ae),z(Ot),z(Le),z(yt),z(Ge),z(wt),z(kt),z(St))};static \u0275cmp=ne({type:r,selectors:[["app-novel-generator"]],viewQuery:function(e,n){if(e&1&&tt(Eo,5),e&2){let a;nt(a=ot())&&(n.battleLogContainer=a.first)}},standalone:!1,decls:32,vars:35,consts:[["battleLogContainer",""],["emptyWeapon",""],["emptyArmor",""],["emptyHelmet",""],["emptyAmulet",""],["emptyBelt",""],["emptyGloves",""],["emptyBoots",""],["emptyRing1",""],["emptyRing2",""],["itemMenu","matMenu"],[1,"novel-book-container"],["class","novel-home-screen",3,"mobile",4,"ngIf"],["class","game-layout",3,"mobile","tablet","desktop",4,"ngIf"],["class","panel-backdrop",3,"mobile","click",4,"ngIf"],["class","game-panel character-panel",3,"mobile",4,"ngIf"],["class","game-panel inventory-panel",3,"mobile",4,"ngIf"],["class","item-context-menu",3,"left","top","click",4,"ngIf"],["class","item-info-modal",3,"left","top","mousedown",4,"ngIf"],["class","game-panel shop-panel",3,"mobile",4,"ngIf"],["class","game-panel character-creator-panel",4,"ngIf"],["class","game-panel scenario-creator-panel",4,"ngIf"],["class","game-panel item-creator-panel",4,"ngIf"],["class","story-flow-overlay",4,"ngIf"],["class","scenario-link-overlay",4,"ngIf"],["class","flow-side-panel",4,"ngIf"],["class","flow-panel-toggle-btn","title","\uC2A4\uD1A0\uB9AC \uB9F5 \uC5F4\uAE30",3,"click",4,"ngIf"],["class","advanced-story-flow-overlay",4,"ngIf"],["class","flow-scenario-link-overlay",4,"ngIf"],["class","wuxia-overlay",3,"mobile","click",4,"ngIf"],["class","dungeon-test-dialog",4,"ngIf"],["class","flow-minimap-panel",4,"ngIf"],["class","advanced-flow-panel",4,"ngIf"],["class","wuxia-panel",4,"ngIf"],["class","dungeon-overlay",4,"ngIf"],["class","character-inventory-modal-overlay",3,"click",4,"ngIf"],[1,"novel-home-screen"],["class","mobile-home-header",4,"ngIf"],[1,"home-container"],[1,"welcome-section"],[1,"welcome-header"],[1,"header-content"],[1,"subtitle"],[1,"header-actions"],["class","user-info",4,"ngIf"],["title","\uB85C\uADF8\uC544\uC6C3",1,"logout-btn",3,"click"],[1,"quick-actions"],[1,"action-card","featured",3,"click"],[1,"card-icon"],[1,"card-badge"],[1,"action-card","wuxia-special",3,"click"],[1,"card-badge","wuxia-badge"],[1,"action-card","ai-special",3,"click"],[1,"card-badge","ai-badge"],[1,"action-card","premium",3,"click"],[1,"card-badge","premium-badge"],[1,"action-card",3,"click"],["class","generation-progress",4,"ngIf"],["class","story-creator-panel",4,"ngIf"],["class","saved-section saved-stories-section",4,"ngIf"],["class","saved-section saved-characters-section",4,"ngIf"],["class","saved-section saved-scenarios-section",4,"ngIf"],["class","saved-section saved-items-section",4,"ngIf"],["class","saved-section shop-section",4,"ngIf"],[1,"mobile-home-header"],[1,"header-brand"],[1,"header-user-actions"],["class","user-badge",4,"ngIf"],["title","\uB85C\uADF8\uC544\uC6C3",1,"header-logout-btn",3,"click"],[1,"user-badge"],[1,"user-info"],[1,"user-name"],[1,"generation-progress"],[1,"progress-container"],[1,"progress-spinner"],[1,"progress-text"],[1,"story-creator-panel"],[1,"creator-container"],[1,"creator-header"],[1,"close-btn",3,"click"],[1,"creator-intro"],["class","error-message",4,"ngIf"],[1,"title-input-section"],["for","storyTitle"],[1,"label-icon"],[1,"label-text"],[1,"required"],["type","text","id","storyTitle","placeholder","\uC608: \uAC80\uC740 \uC6A9\uC758 \uC804\uC124, \uB9C8\uBC95\uC0AC\uC758 \uC5EC\uC815, \uBE44\uBC00\uC758 \uC232...","maxlength","50",1,"title-input",3,"ngModelChange","ngModel"],[1,"char-count"],[1,"selection-section"],[1,"select-group"],[1,"selection-count"],[1,"select-grid"],["class","select-item",3,"selected","click",4,"ngFor","ngForOf"],["class","no-content",4,"ngIf"],[1,"creator-actions"],[1,"generate-story-btn",3,"click","disabled"],[4,"ngIf"],["class","generated-story-result",4,"ngIf"],[1,"error-message"],[1,"select-item",3,"click"],[1,"item-name"],[1,"item-desc"],[1,"no-content"],[1,"generated-story-result"],[1,"story-preview"],[1,"story-title"],[1,"story-icon"],[1,"story-desc"],[1,"story-meta"],[1,"meta-item"],[1,"story-intro"],[4,"ngFor","ngForOf"],[1,"story-actions"],[1,"save-btn",3,"click"],[1,"start-btn",3,"click"],[1,"regenerate-btn",3,"click"],[1,"saved-section","saved-stories-section"],[1,"section-header-collapsible",3,"click"],[1,"header-left"],[1,"expand-icon"],[1,"count-badge"],[1,"toggle-btn",3,"click"],["class","section-content",4,"ngIf"],[1,"section-content"],[1,"section-desc"],[1,"stories-grid"],["class","story-card",3,"click",4,"ngFor","ngForOf"],[1,"story-card",3,"click"],[1,"story-header"],[1,"story-icon-title"],[1,"delete-btn",3,"click"],[1,"story-description"],[1,"story-footer"],[1,"date"],[1,"created-by"],[1,"saved-section","saved-characters-section"],[1,"characters-grid"],["class","character-card",3,"click",4,"ngFor","ngForOf"],[1,"character-card",3,"click"],[1,"character-header"],[1,"character-meta"],[1,"character-desc"],["class","character-traits",4,"ngIf"],[1,"character-footer"],[1,"character-traits"],["class","trait",4,"ngFor","ngForOf"],[1,"trait"],[1,"saved-section","saved-scenarios-section"],[1,"scenarios-grid"],["class","scenario-card",3,"click",4,"ngFor","ngForOf"],[1,"scenario-card",3,"click"],[1,"scenario-header"],[1,"scenario-desc"],["class","scenario-tags",4,"ngIf"],[1,"scenario-meta"],[1,"genre"],[1,"scenario-tags"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],[1,"saved-section","saved-items-section"],[1,"items-grid"],["class","item-card",3,"grade-legendary","grade-rare","grade-uncommon","click",4,"ngFor","ngForOf"],[1,"item-card",3,"click"],[1,"item-header"],["class","item-stats",4,"ngIf"],[1,"item-tags"],[1,"tag","type-tag"],[1,"tag","grade-tag"],[1,"item-meta"],[1,"item-stats"],["class","stat",4,"ngIf"],[1,"stat"],[1,"saved-section","shop-section"],[1,"section-header-collapsible","shop-header",3,"click"],[1,"count-badge","shop-badge"],[1,"gold-badge"],[1,"shop-items-grid"],["class","shop-item-card",3,"grade-legendary","grade-rare","grade-uncommon",4,"ngFor","ngForOf"],[1,"shop-item-card"],[1,"item-price"],[1,"item-footer"],[1,"buy-btn",3,"click"],[1,"game-layout"],[1,"left-panel-container"],[1,"side-panel","left-panel"],["class","collapsed-view",3,"click",4,"ngIf"],["class","expanded-view",4,"ngIf"],[1,"main-content-area"],[1,"game-status-bar"],["title","\uBA54\uB274",1,"toggle-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","3","y1","12","x2","21","y2","12"],["x1","3","y1","6","x2","21","y2","6"],["x1","3","y1","18","x2","21","y2","18"],["title","\uD648\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30",1,"back-home-btn",3,"click"],["d","M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"],["points","9 22 9 12 15 12 15 22"],["class","status-bar-actions",4,"ngIf"],["class","status-bar-actions mobile-actions",4,"ngIf"],[1,"novel-scroll-area"],[1,"novel-header"],[1,"story-blocks"],["class","story-block",4,"ngFor","ngForOf"],["class","battle-section flat-battle",4,"ngIf"],[1,"right-panel-container"],[1,"side-panel","right-panel"],[1,"collapsed-view",3,"click"],[1,"collapse-icon"],[1,"collapse-text"],[1,"expanded-view"],[1,"panel-header"],[1,"panel-content"],[1,"menu-item",3,"click"],[1,"menu-divider"],[1,"menu-section-title"],[1,"menu-item","success",3,"click"],[1,"menu-item","warning",3,"click"],[1,"menu-item","danger",3,"click"],[1,"status-bar-actions"],["title","\uCE90\uB9AD\uD130 & \uC7A5\uBE44",1,"equipment-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["title","\uC778\uBCA4\uD1A0\uB9AC",1,"inventory-btn",3,"click"],["d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"],["points","3.27 6.96 12 12.01 20.73 6.96"],["x1","12","y1","22.08","x2","12","y2","12"],["title","\uB358\uC804 \uD0D0\uD5D8",1,"dungeon-btn",3,"click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["x1","9","y1","3","x2","9","y2","21"],["x1","15","y1","3","x2","15","y2","21"],["x1","3","y1","9","x2","21","y2","9"],["x1","3","y1","15","x2","21","y2","15"],["title","\uC218\uB828 \uBAA8\uB4DC",1,"training-btn",3,"click"],["cx","12","cy","12","r","3"],["d","M12 1v6m0 6v6m11-7h-6m-6 0H1"],["title","\uACE0\uAE09 \uC2A4\uD1A0\uB9AC \uD50C\uB85C\uC6B0",1,"flow-btn",3,"click"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],["title","\uC0C1\uD0DC",1,"toggle-btn",3,"click"],["x1","18","y1","20","x2","18","y2","10"],["x1","12","y1","20","x2","12","y2","4"],["x1","6","y1","20","x2","6","y2","14"],["title","\uB85C\uADF8\uC544\uC6C3",1,"logout-btn-game",3,"click"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"],[1,"status-bar-actions","mobile-actions"],["title","\uCE90\uB9AD\uD130",1,"equipment-btn",3,"click"],["class","badge",4,"ngIf"],["title","\uB358\uC804",1,"dungeon-btn",3,"click"],["width","22","height","22","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],[1,"badge"],[1,"story-block"],[1,"battle-section","flat-battle"],[1,"battle-container"],[1,"battle-title"],["class","turn-text",4,"ngIf"],[1,"battle-board"],[1,"combatant","player-side"],[1,"combatant-header"],[1,"level-tag"],[1,"stats-list"],[1,"stat-row"],[1,"stat-label"],[1,"stat-bar-wrapper"],[1,"stat-bar"],[1,"stat-bar-fill","hp"],[1,"stat-value"],[1,"stat-bar-fill","mp"],["class","stat-row",4,"ngIf"],[1,"stat-row","compact"],[1,"stat-value-inline"],[1,"stat-separator"],[1,"vs-divider"],["class","combatant enemy-side",3,"active-turn",4,"ngIf"],[1,"battle-log","text-only-log"],[1,"log-lines"],["class","log-line",3,"damage","heal","critical","combo","animation-delay",4,"ngFor","ngForOf"],[1,"turn-text"],[1,"stat-bar-fill","internal"],[1,"combatant","enemy-side"],[1,"stat-bar-fill","enemy-hp"],[1,"log-line"],[1,"choice-container"],["class","choice-item",4,"ngFor","ngForOf"],[1,"choice-item"],[1,"choice-button",3,"click"],[1,"choice-number"],[1,"choice-text"],["title","\uC2DC\uB098\uB9AC\uC624 \uC5F0\uACB0",1,"link-scenario-btn",3,"click"],[1,"choice-container","battle-choices"],[1,"choice-button",3,"click","disabled"],[1,"choice-cost"],["class","choice-item martial-skill-choice",4,"ngFor","ngForOf"],[1,"choice-item","martial-skill-choice"],[1,"choice-grade"],[1,"panel-backdrop",3,"click"],[1,"game-panel","character-panel"],[1,"character-basic-info"],[1,"character-avatar"],[1,"avatar-circle"],[1,"avatar-icon"],[1,"character-name-badge"],[1,"level-badge"],[1,"exp-section"],[1,"exp-label"],[1,"exp-values"],[1,"progress-bar","exp-bar"],[1,"progress-fill"],[1,"exp-percentage"],[1,"status-bars"],[1,"status-item","hp"],[1,"status-label"],[1,"icon"],[1,"text"],[1,"values"],[1,"progress-bar","hp-bar"],[1,"status-item","mp"],[1,"progress-bar","mp-bar"],[1,"stats-section"],[1,"section-title"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-name"],[1,"currency-section"],[1,"currency-mini-grid"],[1,"currency-mini-item","gold"],[1,"currency-mini-icon"],[1,"currency-mini-value"],[1,"currency-mini-item","gem"],[1,"currency-mini-item","crystal"],[1,"currency-mini-item","ticket"],["class","skills-section",4,"ngIf"],[1,"skills-section"],[1,"skills-list"],["class","skill-item",4,"ngFor","ngForOf"],[1,"skill-item"],[1,"skill-name"],[1,"skill-level"],[1,"game-panel","inventory-panel"],[1,"inventory-tabs"],[1,"tab-btn",3,"click"],[1,"tab-btn","currency-tab",3,"click"],["class","tab-content",4,"ngIf"],[1,"tab-content"],[1,"equipment-slots-section"],[1,"diablo-equipment-layout"],[1,"equipment-column","left-column"],["id","weapon-slot","cdkDropList","","cdkDropListSortingDisabled","",1,"equipment-slot-diablo","weapon-slot",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],[1,"slot-icon"],["class","slot-content","cdkDrag","",3,"cdkDragData",4,"ngIf","ngIfElse"],["id","armor-slot","cdkDropList","","cdkDropListSortingDisabled","",1,"equipment-slot-diablo","armor-slot",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],[1,"equipment-column","center-column"],["id","helmet-slot","cdkDropList","","cdkDropListSortingDisabled","",1,"equipment-slot-diablo","helmet-slot",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],["id","amulet-slot","cdkDropList","","cdkDropListSortingDisabled","",1,"equipment-slot-diablo","amulet-slot",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],["id","belt-slot","cdkDropList","","cdkDropListSortingDisabled","",1,"equipment-slot-diablo","belt-slot",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],[1,"equipment-column","right-column"],["id","gloves-slot","cdkDropList","","cdkDropListSortingDisabled","",1,"equipment-slot-diablo","gloves-slot",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],["id","boots-slot","cdkDropList","","cdkDropListSortingDisabled","",1,"equipment-slot-diablo","boots-slot",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],[1,"equipment-rings-row"],["id","ring1-slot","cdkDropList","","cdkDropListSortingDisabled","",1,"equipment-slot-diablo","ring-slot","ring-left",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],["id","ring2-slot","cdkDropList","","cdkDropListSortingDisabled","",1,"equipment-slot-diablo","ring-slot","ring-right",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],[1,"inventory-tab-grid"],[1,"inventory-controls"],[1,"filter-buttons"],[3,"active","click",4,"ngFor","ngForOf"],[1,"sort-controls"],[3,"ngModelChange","change","ngModel"],["value","rarity"],["value","type"],["value","name"],["value","recent"],[1,"btn-auto-sort",3,"click"],[1,"inventory-grid-container"],["id","inventory-grid","cdkDropList","",1,"inventory-grid-cells",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],["class","inventory-cell","cdkDrag","",3,"class","cdkDragData","click","contextmenu","dblclick",4,"ngFor","ngForOf"],["class","inventory-cell empty",4,"ngFor","ngForOf"],[1,"inventory-footer"],[1,"inventory-count"],["cdkDrag","",1,"slot-content",3,"cdkDragData"],[1,"item-tooltip"],[1,"tooltip-name"],[1,"btn-unequip-small",3,"mousedown","click"],[1,"slot-empty-text"],[3,"click"],["cdkDrag","",1,"inventory-cell",3,"click","contextmenu","dblclick","cdkDragData"],[1,"cell-content"],[1,"cell-icon"],[1,"cell-name",3,"title"],["class","cell-quantity",4,"ngIf"],["class","quick-equip-btn",3,"title","click",4,"ngIf"],["class","drag-preview",4,"cdkDragPreview"],[1,"cell-quantity"],[1,"quick-equip-btn",3,"click","title"],[1,"drag-preview"],[1,"preview-icon"],[1,"preview-name"],[1,"inventory-cell","empty"],[1,"empty-icon"],[1,"currency-tab-content"],[1,"currency-header"],[1,"currency-subtitle"],[1,"currency-grid"],[1,"currency-card","gold-card"],[1,"currency-background"],[1,"currency-content"],[1,"currency-top"],[1,"currency-icon-wrapper"],[1,"currency-icon"],[1,"currency-label"],[1,"currency-amount-section"],[1,"currency-amount"],[1,"amount-number"],[1,"amount-unit"],[1,"currency-usage"],[1,"currency-card","gem-card"],[1,"currency-card","crystal-card"],[1,"currency-card","ticket-card"],[1,"currency-guide"],[1,"guide-title"],[1,"guide-list"],[1,"guide-item"],[1,"guide-icon"],[1,"guide-text"],[1,"shop-wrapper"],[1,"shop-header"],[1,"shop-title-section"],[1,"shop-title"],[1,"shop-subtitle"],[1,"shop-wallet"],[1,"wallet-icon"],[1,"wallet-info"],[1,"wallet-label"],[1,"wallet-amount"],["class","shop-items-container",4,"ngIf"],["class","empty-shop-state",4,"ngIf"],[1,"shop-items-container"],["class","shop-item-card",3,"grade-legendary","grade-epic","grade-rare","grade-uncommon","grade-common",4,"ngFor","ngForOf"],[1,"item-badge-container"],[1,"item-grade-badge"],[1,"item-type-badge"],[1,"item-image-section"],[1,"item-icon-large"],[1,"item-info-section"],[1,"item-description"],["class","item-stats-row",4,"ngIf"],["class","item-effects",4,"ngIf"],[1,"item-purchase-section"],[1,"item-price-display"],[1,"price-icon"],[1,"price-amount"],[1,"price-unit"],[1,"purchase-button",3,"click","disabled"],[1,"item-stats-row"],["class","stat-chip",4,"ngIf"],[1,"stat-chip"],[1,"item-effects"],["class","effect-item",4,"ngFor","ngForOf"],[1,"effect-item"],[1,"effect-icon"],[1,"effect-text"],[1,"btn-icon"],[1,"empty-shop-state"],[1,"empty-title"],[1,"empty-message"],[1,"empty-hint"],[1,"hint-icon"],[1,"hint-text"],[1,"item-context-menu",3,"click"],[1,"context-menu-item",3,"click"],[1,"menu-icon"],[1,"menu-text"],[1,"context-menu-item","danger",3,"click"],[1,"item-info-modal",3,"mousedown"],[1,"modal-header"],[1,"modal-title"],[1,"modal-close-btn",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-body"],[1,"item-info-header"],[1,"item-info-icon"],[1,"item-info-title"],[1,"item-rarity-badge"],[1,"item-info-meta"],[1,"meta-badge","type-badge"],["class","meta-badge quantity-badge",4,"ngIf"],["class","item-info-stats",4,"ngIf"],["class","item-info-description",4,"ngIf"],[1,"item-info-actions"],[1,"action-btn","equip-btn",3,"click"],[1,"action-btn","discard-btn",3,"click"],[1,"meta-badge","quantity-badge"],[1,"item-info-stats"],[1,"stats-title"],["class","stat-item",4,"ngIf"],[1,"item-info-description"],[1,"desc-title"],[1,"game-panel","shop-panel"],[3,"click","disabled"],[1,"game-panel","character-creator-panel"],[1,"character-creator-container"],[1,"character-type-buttons"],[1,"generate-btn","primary",3,"click","disabled"],[1,"generate-btn",3,"click","disabled"],["class","generated-character-info",4,"ngIf"],[1,"generated-character-info"],[1,"character-details"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"character-description"],["class","character-abilities",4,"ngIf"],[1,"action-buttons"],[1,"apply-btn",3,"click"],[1,"character-abilities"],[1,"abilities-list"],["class","ability-tag",4,"ngFor","ngForOf"],[1,"ability-tag"],[1,"traits-list"],["class","trait-tag",4,"ngFor","ngForOf"],[1,"trait-tag"],[1,"game-panel","scenario-creator-panel"],[1,"scenario-creator-container"],[1,"scenario-type-buttons"],["class","generated-scenario-info",4,"ngIf"],[1,"generated-scenario-info"],[1,"scenario-title"],[1,"scenario-description"],["class","scenario-characters",4,"ngIf"],[1,"scenario-characters"],[1,"tags-list"],["class","tag-item",4,"ngFor","ngForOf"],[1,"tag-item"],[1,"game-panel","item-creator-panel"],[1,"item-creator-container"],[1,"item-type-buttons"],[1,"generate-btn","random",3,"click","disabled"],[1,"generate-btn","weapon",3,"click","disabled"],[1,"generate-btn","armor",3,"click","disabled"],[1,"generate-btn","consumable",3,"click","disabled"],["class","generated-items-list",4,"ngIf"],["class","generated-item-info",4,"ngIf"],[1,"generated-items-list"],["class","item-card",3,"grade-common","grade-uncommon","grade-rare","grade-epic","grade-legendary",4,"ngFor","ngForOf"],[1,"bulk-actions"],[1,"save-all-btn",3,"click"],[1,"item-card"],[1,"item-card-header"],[1,"item-card-type"],[1,"item-card-description"],["class","item-card-stats",4,"ngIf"],[1,"item-card-actions"],[1,"save-mini-btn",3,"click"],[1,"item-card-stats"],["class","stat-mini",4,"ngIf"],[1,"stat-mini"],[1,"generated-item-info"],[1,"item-title"],[1,"item-type-info"],[1,"type-badge"],["class","item-requirements",4,"ngIf"],["class","item-lore",4,"ngIf"],["class","item-tags",4,"ngIf"],[1,"add-btn",3,"click"],[1,"item-requirements"],[1,"item-lore"],[1,"lore-text"],[1,"story-flow-overlay"],[1,"story-flow-panel"],[1,"flow-header"],[1,"flow-info"],[1,"flow-stats"],[1,"flow-canvas"],[1,"flow-nodes"],["class","flow-node",3,"ngClass","margin-left",4,"ngFor","ngForOf"],[1,"flow-legend"],[1,"legend-items"],[1,"legend-item"],[1,"legend-icon","start"],[1,"legend-icon","story"],[1,"legend-icon","choice"],[1,"legend-icon","current"],[1,"flow-node",3,"ngClass"],[1,"node-icon"],[1,"node-content"],[1,"node-label"],[1,"node-level"],["class","node-choices",4,"ngIf"],["class","flow-connector",4,"ngIf"],[1,"node-choices"],["class","choice-preview",4,"ngFor","ngForOf"],[1,"choice-preview"],[1,"flow-connector"],[1,"scenario-link-overlay"],["cdkDrag","","cdkDragBoundary",".scenario-link-overlay",1,"scenario-link-panel"],["cdkDragHandle","",1,"link-header"],[1,"drag-indicator"],[1,"link-info"],[1,"hint"],[1,"scenario-list"],[1,"scenario-grid"],["class","no-scenarios",4,"ngIf"],[1,"scenario-genre"],[1,"scenario-body"],[1,"no-scenarios"],[1,"create-scenario-btn",3,"click"],[1,"flow-side-panel"],[1,"panel-container"],[1,"status-bar"],[1,"time"],[1,"progress"],[1,"title-bar"],["class","expand-btn","title","\uC804\uCCB4\uD654\uBA74",3,"click",4,"ngIf"],["title","\uB2EB\uAE30",1,"close-btn",3,"click"],[1,"panel-content-slider"],[1,"tab-content","character-tab"],[1,"character-info-card"],[1,"character-basic"],[1,"character-name"],[1,"character-level"],[1,"character-stats"],[1,"stat-icon","hp"],[1,"stat-bar-container"],[1,"stat-bar","hp"],[1,"stat-bar-fill"],[1,"stat-icon","mp"],[1,"stat-bar","mp"],[1,"stat-row","inline"],[1,"inline-stat"],[1,"stat-row","special"],[1,"cultivation-badge"],[1,"tab-content","map-tab"],["class","current-status",4,"ngIf"],[1,"mini-flow-map"],["width","100%","height","100%","preserveAspectRatio","xMidYMid meet"],[1,"mini-connections"],["fill","none","opacity","0.6",4,"ngFor","ngForOf"],[1,"mini-nodes"],[1,"quick-stats"],[1,"stat-text"],["class","recent-path",4,"ngIf"],[1,"tab-content","organization-tab"],["class","organization-container",4,"ngIf"],["class","no-organization",4,"ngIf"],[1,"tab-navigation","bottom"],[1,"tab-icon"],[1,"tab-label"],["title","\uC804\uCCB4\uD654\uBA74",1,"expand-btn",3,"click"],[1,"current-status"],[1,"status-icon"],[1,"status-info"],[1,"status-title"],[1,"status-path"],["fill","none","opacity","0.6"],["r","20"],["text-anchor","middle","dy","7","font-size","16"],[1,"recent-path"],[1,"recent-title"],[1,"path-dots"],["class","path-dot",3,"current","title",4,"ngFor","ngForOf"],[1,"path-dot",3,"title"],[1,"organization-container"],[1,"organization-header"],[1,"org-name-section"],[1,"org-name"],[1,"org-level"],[1,"org-stats"],[1,"org-stat"],[1,"members-list"],["class","member-card",3,"selected","click",4,"ngFor","ngForOf"],["class","no-members",4,"ngIf"],[1,"member-card",3,"click"],[1,"member-header"],[1,"member-avatar"],[1,"member-basic"],[1,"member-name-row"],[1,"member-name"],[1,"member-role"],[1,"member-level"],[1,"member-status"],[1,"member-stats-bars"],[1,"stat-bar-row"],[1,"bar-label"],[1,"mini-stat-bar","hp"],[1,"mini-bar-fill"],[1,"bar-value"],["class","stat-bar-row",4,"ngIf"],[1,"member-details"],[1,"detail-icon"],[1,"detail-text"],[1,"loyalty-bar"],[1,"loyalty-fill"],["class","detail-row",4,"ngIf"],["class","member-skills",4,"ngIf"],["class","member-description",4,"ngIf"],[1,"mini-stat-bar","mp"],[1,"member-skills"],["class","skill-tag",4,"ngFor","ngForOf"],[1,"skill-tag"],[1,"member-description"],[1,"no-members"],[1,"no-organization"],["title","\uC2A4\uD1A0\uB9AC \uB9F5 \uC5F4\uAE30",1,"flow-panel-toggle-btn",3,"click"],[1,"toggle-icon"],[1,"toggle-text"],[1,"advanced-story-flow-overlay"],[1,"advanced-flow-panel"],[1,"advanced-flow-header"],["class","flow-toolbar",4,"ngIf"],["class","flow-canvas-container",3,"mousedown","mousemove","mouseup","mouseleave","wheel",4,"ngIf"],["class","node-detail-panel",4,"ngIf"],["class","stats-overlay",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"flow-toolbar"],[1,"toolbar-section"],["title","\uD655\uB300",1,"tool-btn",3,"click"],["title","\uCD95\uC18C",1,"tool-btn",3,"click"],["title","\uC911\uC559\uC73C\uB85C",1,"tool-btn",3,"click"],["title","\uD654\uBA74\uC5D0 \uB9DE\uCD94\uAE30",1,"tool-btn",3,"click"],["title","\uBC29\uBB38\uD55C \uACBD\uB85C\uB9CC \uD45C\uC2DC",1,"filter-btn",3,"click"],["title","\uC804\uD22C \uB178\uB4DC\uB9CC \uD45C\uC2DC",1,"filter-btn",3,"click"],["title","\uC5D4\uB529 \uB178\uB4DC\uB9CC \uD45C\uC2DC",1,"filter-btn",3,"click"],[1,"layout-selector",3,"ngModelChange","change","ngModel"],["value","hierarchical"],["value","radial"],["value","force"],["title","\uD1B5\uACC4 \uD45C\uC2DC/\uC228\uAE30\uAE30",1,"tool-btn",3,"click"],[1,"toolbar-section","toolbar-hint"],[1,"flow-canvas-container",3,"mousedown","mousemove","mouseup","mouseleave","wheel"],[1,"flow-svg-canvas"],["id","arrowhead","markerWidth","10","markerHeight","10","refX","9","refY","3","orient","auto"],["points","0 0, 10 3, 0 6","fill","#cbd5e0"],["id","arrowhead-visited","markerWidth","10","markerHeight","10","refX","9","refY","3","orient","auto"],["points","0 0, 10 3, 0 6","fill","#48bb78"],["id","arrowhead-current","markerWidth","10","markerHeight","10","refX","9","refY","3","orient","auto"],["points","0 0, 10 3, 0 6","fill","#4299e1"],["id","arrowhead-battle","markerWidth","10","markerHeight","10","refX","9","refY","3","orient","auto"],["points","0 0, 10 3, 0 6","fill","#fc8181"],["id","grid","width","50","height","50","patternUnits","userSpaceOnUse"],["d","M 50 0 L 0 0 0 50","fill","none","stroke","rgba(255,255,255,0.05)","stroke-width","1"],["x","-5000","y","-5000","width","10000","height","10000","fill","url(#grid)"],[1,"connections-layer"],["class","connection-path",3,"visited","current",4,"ngFor","ngForOf"],[1,"nodes-layer"],["class","story-node",3,"current","visited","available","selected","dragging","battle","ending","event","mousedown","click",4,"ngFor","ngForOf"],[1,"zoom-controls"],["title","\uD655\uB300 (Ctrl + Scroll Up)",1,"zoom-btn",3,"click"],[1,"zoom-level"],["title","\uCD95\uC18C (Ctrl + Scroll Down)",1,"zoom-btn",3,"click"],["title","\uCD08\uAE30\uD654 (\uB354\uBE14\uD074\uB9AD)",1,"zoom-btn",3,"click"],["title","\uD604\uC7AC \uB178\uB4DC\uB85C \uC774\uB3D9",1,"zoom-btn",3,"click"],[1,"legend-compact"],[1,"connection-path"],[1,"story-node",3,"mousedown","click"],["r","55","fill","none","stroke","#fbbf24","stroke-width","3","opacity","0.8","class","node-selection-ring",4,"ngIf"],["r","40","stroke-width","3",1,"node-circle"],["r","50","stroke-width","2","fill","none","opacity","0.5","class","node-glow",4,"ngIf"],["text-anchor","middle","dy","10","font-size","28",1,"node-icon"],["y","60","text-anchor","middle","font-size","14","font-weight","600",1,"node-title"],["transform","translate(25, -25)",4,"ngIf"],["transform","translate(-25, -25)",4,"ngIf"],["r","55","fill","none","stroke","#fbbf24","stroke-width","3","opacity","0.8",1,"node-selection-ring"],["attributeName","r","values","55;60;55","dur","2s","repeatCount","indefinite"],["r","50","stroke-width","2","fill","none","opacity","0.5",1,"node-glow"],["transform","translate(25, -25)"],["r","15","fill","#e53e3e"],["text-anchor","middle","dy","5","font-size","16",1,"badge-text"],["transform","translate(-25, -25)"],["r","12","fill","#4299e1"],["text-anchor","middle","dy","4","font-size","10","fill","white",1,"visit-count"],[1,"node-detail-panel"],[1,"detail-header"],[1,"detail-close-btn",3,"click"],[1,"detail-body"],[1,"detail-type"],["class","detail-content",4,"ngIf"],["class","detail-stats",4,"ngIf"],["class","detail-conditions",4,"ngIf"],["class","detail-choices",4,"ngIf"],["class","detail-battle",4,"ngIf"],[1,"detail-content"],["class","more-indicator",4,"ngIf"],[1,"more-indicator"],[1,"detail-stats"],[1,"detail-conditions"],[1,"detail-choices"],[1,"choice-icon"],[1,"detail-battle"],[1,"stats-overlay"],["class","current-location",4,"ngIf"],[1,"stat-card"],["class","path-history",4,"ngIf"],[1,"current-location"],[1,"location-card"],[1,"location-icon"],[1,"location-info"],[1,"location-title"],[1,"location-path"],[1,"path-history"],[1,"history-list"],["class","history-item",4,"ngFor","ngForOf"],[1,"history-item"],[1,"history-icon"],[1,"history-node"],["class","history-choice",4,"ngIf"],[1,"history-choice"],[1,"empty-state"],[1,"empty-actions"],[1,"primary-btn",3,"click"],[1,"secondary-btn",3,"click"],[1,"flow-scenario-link-overlay"],["cdkDrag","","cdkDragBoundary",".flow-scenario-link-overlay",1,"flow-scenario-link-panel"],["class","node-info-card",4,"ngIf"],["class","choice-info",4,"ngIf"],["class","scenario-card",3,"linked","click",4,"ngFor","ngForOf"],[1,"node-info-card"],[1,"node-icon-large"],[1,"node-details"],[1,"node-type-badge"],[1,"choice-info"],[1,"choice-label"],[1,"choice-value"],["class","linked-badge",4,"ngIf"],[1,"linked-badge"],[1,"wuxia-overlay",3,"click"],["cdkDrag","","cdkDragBoundary",".wuxia-overlay",1,"wuxia-panel",3,"click"],["cdkDragHandle","",1,"wuxia-header"],[1,"wuxia-tabs"],[1,"cultivation-section"],[1,"internal-power-gauge"],[1,"gauge-header"],[1,"gauge-label"],[1,"gauge-value"],[1,"gauge-bar"],[1,"gauge-fill"],[1,"gauge-info"],[1,"realm-display"],[1,"realm-badge"],[1,"realm-icon"],[1,"realm-info"],[1,"realm-name"],[1,"realm-subtitle"],[1,"realm-progress"],[1,"progress-label"],[1,"progress-bar"],[1,"progress-value"],[1,"cultivation-actions"],[1,"cultivation-btn",3,"click"],[1,"btn-text"],[1,"training-level"],[1,"training-label"],[1,"training-bar"],[1,"training-fill"],[1,"training-value"],[1,"learned-skills-count"],[1,"skills-grid"],["class","skill-card",3,"class",4,"ngFor","ngForOf"],["class","no-skills",4,"ngIf"],[1,"skill-card"],[1,"skill-header"],[1,"skill-names"],[1,"skill-name-chinese"],[1,"skill-name-korean"],[1,"skill-grade-badge"],[1,"skill-type"],["class","type-icon",4,"ngIf"],[1,"type-label"],[1,"skill-stats"],[1,"skill-description"],[1,"skill-effect"],["class","skill-element",4,"ngIf"],["class","skill-faction",4,"ngIf"],[1,"type-icon"],[1,"skill-element"],[1,"element-icon"],[1,"element-name"],[1,"skill-faction"],[1,"faction-label"],[1,"faction-name"],[1,"no-skills"],[1,"faction-section"],["class","current-faction",4,"ngIf"],["class","no-faction",4,"ngIf"],[1,"current-faction"],[1,"faction-card","current"],[1,"faction-header"],[1,"faction-name-korean"],[1,"faction-type"],[1,"faction-info"],[1,"faction-reputation"],[1,"reputation-bar"],[1,"reputation-fill"],[1,"no-faction"],[1,"factions-grid"],["class","faction-card",3,"class",4,"ngFor","ngForOf"],[1,"faction-card"],[1,"faction-specialties"],["class","specialty-badge",4,"ngFor","ngForOf"],[1,"join-faction-btn",3,"click"],[1,"specialty-badge"],[1,"elixir-section"],[1,"elixir-inventory"],["class","elixir-card",3,"class",4,"ngFor","ngForOf"],["class","no-elixir",4,"ngIf"],[1,"elixir-card"],[1,"elixir-header"],[1,"elixir-names"],[1,"elixir-chinese"],[1,"elixir-korean"],[1,"elixir-grade"],[1,"elixir-type"],[1,"rarity-stars"],["class","star",4,"ngFor","ngForOf"],[1,"elixir-description"],[1,"elixir-effects"],["class","elixir-warning",4,"ngIf"],[1,"elixir-footer"],[1,"elixir-price"],[1,"use-elixir-btn",3,"click"],[1,"star"],[1,"elixir-warning"],[1,"warning-icon"],[1,"warning-text"],[1,"no-elixir"],[1,"meridians-section"],[1,"meridian-info"],[1,"meridian-diagram"],["class","meridian-point",3,"opened","top","left","title",4,"ngFor","ngForOf"],[1,"meridian-list"],["class","meridian-item",3,"opened",4,"ngFor","ngForOf"],[1,"meridian-point",3,"title"],[1,"point-circle"],[1,"point-number"],["class","point-info",4,"ngIf"],[1,"point-info"],[1,"open-meridian-btn",3,"click"],[1,"meridian-item"],[1,"meridian-number"],[1,"meridian-details"],["class","meridian-progress",4,"ngIf"],[1,"meridian-bonus"],["class","bonus-item",4,"ngFor","ngForOf"],[1,"meridian-status"],["class","status-opened",4,"ngIf"],["class","open-btn",3,"click",4,"ngIf"],[1,"meridian-progress"],[1,"bonus-item"],[1,"status-opened"],[1,"open-btn",3,"click"],[1,"dungeon-test-dialog"],[1,"dialog-overlay",3,"click"],[1,"dialog-content"],[1,"dialog-header"],["class","dungeon-panel",4,"ngIf"],[1,"inventory-section"],[1,"inventory-header"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],[1,"inventory-filter-buttons"],["mat-button","",3,"click"],[1,"filter-icon"],["class","inventory-grid",4,"ngIf"],["xPosition","after","yPosition","below",1,"item-context-menu-mat",3,"overlapTrigger"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["color","warn"],["class","empty-inventory",4,"ngIf"],["class","empty-equipment-state",4,"ngIf"],[1,"dungeon-panel"],[1,"equipment-grid-diablo"],[1,"equipment-slot-diablo","helmet-slot",3,"click"],[1,"slot-label"],["class","slot-content",4,"ngIf","ngIfElse"],[1,"equipment-slot-diablo","armor-slot",3,"click"],[1,"equipment-slot-diablo","gloves-slot",3,"click"],[1,"equipment-slot-diablo","boots-slot",3,"click"],[1,"equipment-slot-diablo","weapon-slot","large",3,"click"],[1,"equipment-slot-diablo","amulet-slot",3,"click"],[1,"equipment-slot-diablo","belt-slot",3,"click"],[1,"equipment-slot-diablo","ring-slot",3,"click"],[1,"equipment-summary-diablo"],[1,"summary-item"],[1,"summary-icon"],[1,"summary-label"],[1,"summary-value"],[1,"slot-content"],[1,"item-icon-diablo"],[1,"item-name-short"],[1,"slot-content","empty"],[1,"empty-icon-diablo"],[1,"item-icon-diablo","large"],["class","item-damage",4,"ngIf"],[1,"item-damage"],[1,"empty-icon-diablo","large"],["mat-raised-button","","color","accent",3,"click"],[1,"inventory-grid"],["class","inventory-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"inventory-item",3,"ngClass"],[1,"item-card-trigger",3,"menuOpened","matMenuTriggerFor"],[1,"item-card-content"],[1,"item-card-icon"],[1,"item-card-info"],[1,"item-card-name"],[1,"item-card-rarity-badge"],["class","item-card-slot",4,"ngIf"],["class","item-card-quantity",4,"ngIf"],[1,"item-card-rarity"],["mat-icon-button","",1,"delete-item-btn",3,"click"],[1,"item-card-slot"],["class","mini-stat damage",4,"ngIf"],["class","mini-stat defense",4,"ngIf"],["class","mini-stat vital",4,"ngIf"],["class","mini-stat critical",4,"ngIf"],["class","mini-stat lifesteal",4,"ngIf"],["class","mini-stat resist",4,"ngIf"],["class","mini-stat special",4,"ngIf"],[1,"mini-stat","damage"],[1,"mini-stat","defense"],[1,"mini-stat","vital"],[1,"mini-stat","critical"],[1,"mini-stat","lifesteal"],[1,"mini-stat","resist"],[1,"mini-stat","special"],[1,"item-card-quantity"],[1,"quantity-badge"],[1,"empty-inventory"],["class","hint",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"empty-equipment-state"],["class","dungeon-progress-panel",4,"ngIf"],[1,"dungeon-progress-panel"],[1,"flow-minimap-panel"],[1,"flow-panel-header"],[1,"flow-panel-content"],[1,"advanced-flow-content"],[1,"wuxia-panel"],[1,"wuxia-panel-header"],[1,"wuxia-panel-content"],["class","dialog-body",4,"ngIf"],[1,"dialog-body"],[1,"test-section"],[1,"dungeon-type-grid"],["class","dungeon-type-card",3,"selected","click",4,"ngFor","ngForOf"],["class","empty-character-state",4,"ngIf"],[1,"dungeon-type-card",3,"click"],[1,"skill-type-badge",3,"ngClass"],[1,"empty-character-state"],["class","dungeon-container",4,"ngIf"],["class","dialog-footer",4,"ngIf"],["class","test-section",4,"ngIf"],[1,"dungeon-icon"],[1,"dungeon-name"],[1,"dungeon-level"],[1,"dungeon-floors"],[1,"difficulty-grid"],[1,"difficulty-btn","easy",3,"click"],[1,"difficulty-mult"],[1,"difficulty-btn","normal",3,"click"],[1,"difficulty-btn","hard",3,"click"],[1,"difficulty-btn","hell",3,"click"],[1,"test-options"],[1,"option-item"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"player-stats"],[1,"dungeon-container"],[3,"roomMove","monsterAttack","interactableUse","dungeonEscape","floorMove","rewardsClaimed","dungeon","currentRoom","playerHp","playerMaxHp","playerMp","playerMaxMp","playerName","playerLevel","playerAttackPower","playerDefensePower","playerEquipment","playerSkills"],[1,"dialog-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],[1,"dungeon-overlay"],[3,"roomMove","monsterAttack","interactableUse","dungeonEscape","floorMove","rewardsClaimed","dungeon","currentRoom","playerHp","playerMaxHp","playerMp","playerMaxMp"],[1,"character-inventory-modal-overlay",3,"click"],[1,"character-inventory-modal","game-panel","inventory-panel",3,"click"],["class","character-info-bar",4,"ngIf"],[1,"panel-footer"],[1,"character-info-bar"],[1,"info-badges"],[1,"stat-badge","level"],[1,"stat-badge","gold"],[1,"equipment-slot-diablo","weapon-slot"],[1,"equipment-slot-diablo","armor-slot"],[1,"equipment-slot-diablo","helmet-slot"],[1,"equipment-slot-diablo","amulet-slot"],[1,"equipment-slot-diablo","belt-slot"],[1,"equipment-slot-diablo","gloves-slot"],[1,"equipment-slot-diablo","boots-slot"],[1,"equipment-slot-diablo","ring-slot","ring-left"],[1,"equipment-slot-diablo","ring-slot","ring-right"],[1,"inventory-grid-cells"],["class","inventory-cell",3,"class","title",4,"ngFor","ngForOf"],[1,"inventory-cell",3,"title"],[1,"item-tooltip-detail"],[1,"tooltip-header"],[1,"tooltip-rarity"],[1,"tooltip-type"],["class","tooltip-stats",4,"ngIf"],["class","tooltip-description",4,"ngIf"],[1,"tooltip-stats"],[1,"tooltip-description"]],template:function(e,n){e&1&&(o(0,"div",11),F(1,"async"),F(2,"async"),b(3,Ui,94,16,"div",12)(4,ua,42,46,"div",13)(5,Ca,2,4,"div",14)(6,ha,130,42,"div",15)(7,ar,17,13,"div",16)(8,rr,16,4,"div",17)(9,ur,7,5,"div",18)(10,fr,11,6,"div",19)(11,Br,28,14,"div",20)(12,Yr,28,14,"div",21)(13,xc,29,15,"div",22),i(),b(14,Ec,41,4,"div",23)(15,Gc,22,3,"div",24)(16,Jc,113,37,"div",25)(17,Zc,5,0,"button",26)(18,yl,15,5,"div",27)(19,Tl,19,4,"div",28)(20,ss,25,23,"div",29)(21,Cd,62,22,"div",30)(22,hd,10,4,"div",30)(23,Pd,9,0,"div",31)(24,Md,9,0,"div",32)(25,xd,9,0,"div",33)(26,kd,9,4,"div",30),o(27,"h2"),c(28,"\uFFFD \uB358\uC804 \uC120\uD0DD"),i(),b(29,Ad,11,6,"div",30)(30,Gd,2,6,"div",34)(31,vg,18,8,"div",35)),e&2&&(y("mobile",L(1,31,n.responsiveService.isMobile$))("tablet",L(2,33,n.responsiveService.isTablet$)),l(3),p("ngIf",!n.novelSelected&&!n.gameStarted),l(),p("ngIf",n.gameStarted),l(),p("ngIf",n.showCharacterPanel||n.showInventoryPanel||n.showShopPanel||n.showCharacterCreatorPanel||n.showScenarioCreatorPanel||n.showItemCreatorPanel),l(),p("ngIf",n.showCharacterPanel),l(),p("ngIf",n.showInventoryPanel),l(),p("ngIf",n.showItemContextMenu),l(),p("ngIf",n.showItemInfo),l(),p("ngIf",n.showShopPanel),l(),p("ngIf",n.showCharacterCreatorPanel),l(),p("ngIf",n.showScenarioCreatorPanel),l(),p("ngIf",n.showItemCreatorPanel),l(),p("ngIf",n.showStoryFlowPanel),l(),p("ngIf",n.showScenarioLinkPanel),l(),p("ngIf",n.gameStarted&&n.storyNodes.length>0&&n.isFlowPanelOpen),l(),p("ngIf",n.gameStarted&&n.storyNodes.length>0&&!n.isFlowPanelOpen),l(),p("ngIf",n.showAdvancedFlowPanel),l(),p("ngIf",n.showFlowScenarioLinkPanel),l(),p("ngIf",n.showWuxiaPanel),l(),p("ngIf",n.showDungeonTestDialog),l(),p("ngIf",n.showDungeonTestDialog),l(),p("ngIf",n.showFlowPanel),l(),p("ngIf",n.showAdvancedFlowPanel),l(),p("ngIf",n.showWuxiaPanel),l(),p("ngIf",n.showDungeonTestDialog),l(3),p("ngIf",n.showDungeonTestDialog),l(),p("ngIf",n.showDungeonPanel&&n.currentDungeon&&n.currentDungeonRoom),l(),p("ngIf",n.showCharacterInventoryModal))},dependencies:[gn,we,ce,Pn,Mn,Cn,un,hn,fn,xn,bn,lt,ct,Sn,kn,wn,Dn,dt,Fn,zn,Ln,$e,pn,mn],styles:['@charset "UTF-8";.dialogue[_ngcontent-%COMP%]{color:#2196f3;cursor:default;padding:2px 4px;border-radius:4px;display:inline-block}.dialogue-choice[_ngcontent-%COMP%]{display:block!important;margin:16px 0!important;padding:16px 20px;border-radius:12px;cursor:pointer;transition:all .3s ease;position:relative;border:2px solid transparent;background:linear-gradient(135deg,#ffffff1a,#ffffff0d);box-shadow:0 2px 8px #0000001a;clear:both;width:100%;box-sizing:border-box}p[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]{display:block!important;margin:16px -20px!important;max-width:calc(100% + 40px)}.dialogue-choice[_ngcontent-%COMP%]:hover{transform:translate(8px) scale(1.02);box-shadow:0 4px 16px #00000026}.dialogue-choice.selected[_ngcontent-%COMP%]{transform:translate(12px) scale(1.03);box-shadow:0 6px 20px #0003;font-weight:500}.dialogue-choice[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:12px;vertical-align:middle}.dialogue-choice[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%]{font-size:16px;line-height:1.6;vertical-align:middle}.dialogue-choice[_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{display:inline-block;margin-left:12px;padding:4px 10px;border-radius:6px;font-size:11px;font-weight:600;text-transform:uppercase;vertical-align:middle;letter-spacing:.5px}.dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]{border-color:#4caf50;background:linear-gradient(135deg,#4caf501a,#4caf500d)}.dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]:hover{border-color:#45a049;background:linear-gradient(135deg,#4caf5026,#4caf5014)}.dialogue-choice[data-choice-type=positive].selected[_ngcontent-%COMP%]{border-color:#45a049;background:linear-gradient(135deg,#4caf5040,#4caf5026);box-shadow:0 0 0 3px #4caf5033}.dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]{border-color:#f44336;background:linear-gradient(135deg,#f443361a,#f443360d)}.dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]:hover{border-color:#da190b;background:linear-gradient(135deg,#f4433626,#f4433614)}.dialogue-choice[data-choice-type=negative].selected[_ngcontent-%COMP%]{border-color:#da190b;background:linear-gradient(135deg,#f4433640,#f4433626);box-shadow:0 0 0 3px #f4433633}.dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{background:#f44336;color:#fff}.dialogue-choice[data-choice-type=neutral][_ngcontent-%COMP%]{border-color:#9e9e9e;background:linear-gradient(135deg,#9e9e9e1a,#9e9e9e0d)}.dialogue-choice[data-choice-type=neutral][_ngcontent-%COMP%]:hover{border-color:#757575;background:linear-gradient(135deg,#9e9e9e26,#9e9e9e14)}.dialogue-choice[data-choice-type=neutral].selected[_ngcontent-%COMP%]{border-color:#757575;background:linear-gradient(135deg,#9e9e9e40,#9e9e9e26);box-shadow:0 0 0 3px #9e9e9e33}.dialogue-choice[data-choice-type=neutral][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{background:#9e9e9e;color:#fff}.dialogue-choice[data-choice-type=aggressive][_ngcontent-%COMP%]{border-color:#ff5722;background:linear-gradient(135deg,#ff57221a,#ff57220d)}.dialogue-choice[data-choice-type=aggressive][_ngcontent-%COMP%]:hover{border-color:#e64a19;background:linear-gradient(135deg,#ff572226,#ff572214)}.dialogue-choice[data-choice-type=aggressive].selected[_ngcontent-%COMP%]{border-color:#e64a19;background:linear-gradient(135deg,#ff572240,#ff572226);box-shadow:0 0 0 3px #ff572233}.dialogue-choice[data-choice-type=aggressive][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{background:#ff5722;color:#fff}.dialogue-choice[data-choice-type=passive][_ngcontent-%COMP%]{border-color:#2196f3;background:linear-gradient(135deg,#2196f31a,#2196f30d)}.dialogue-choice[data-choice-type=passive][_ngcontent-%COMP%]:hover{border-color:#1976d2;background:linear-gradient(135deg,#2196f326,#2196f314)}.dialogue-choice[data-choice-type=passive].selected[_ngcontent-%COMP%]{border-color:#1976d2;background:linear-gradient(135deg,#2196f340,#2196f326);box-shadow:0 0 0 3px #2196f333}.dialogue-choice[data-choice-type=passive][_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.selectable[_ngcontent-%COMP%]{position:relative}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffffff0d,#ffffff05);box-shadow:0 2px 8px #0000004d}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]:hover, body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]:hover, [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0006}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf5026,#4caf5014)}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]:hover, body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]:hover, [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive][_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4caf5033,#4caf501f)}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive].selected[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive].selected[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=positive].selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf504d,#4caf5033)}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]{background:linear-gradient(135deg,#f4433626,#f4433614)}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]:hover, body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]:hover, [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative][_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f4433633,#f443361f)}body.dark-theme[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative].selected[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative].selected[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .dialogue-choice[data-choice-type=negative].selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f443364d,#f4433633)}body.dark-theme[_ngcontent-%COMP%]   .dialogue[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .dialogue[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .dialogue[_ngcontent-%COMP%]{color:#64b5f6}.battle-trigger-button[_ngcontent-%COMP%]{display:block!important;margin:20px 0!important;padding:20px 24px;border-radius:16px;cursor:pointer;transition:all .3s ease;position:relative;border:3px solid #FF5722;background:linear-gradient(135deg,#ff572226,#ff572214);box-shadow:0 4px 12px #ff57224d;text-align:center;font-weight:600;color:#ff5722;width:100%;box-sizing:border-box}.battle-trigger-button[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 20px #ff572266;border-color:#e64a19;background:linear-gradient(135deg,#ff572240,#ff572226)}.battle-trigger-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.battle-trigger-button[_ngcontent-%COMP%]   .battle-icon[_ngcontent-%COMP%]{font-size:28px;margin-right:12px;vertical-align:middle;animation:_ngcontent-%COMP%_battlePulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_battlePulse{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.battle-trigger-button[_ngcontent-%COMP%]   .battle-text[_ngcontent-%COMP%]{font-size:18px;vertical-align:middle;letter-spacing:1px}body.dark-theme[_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%]{border-color:#ff7043;background:linear-gradient(135deg,#ff704333,#ff70431a);color:#ff7043}body.dark-theme[_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%]:hover, body.dark-mode[_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%]:hover, [data-theme=dark][_ngcontent-%COMP%]   .battle-trigger-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ff70434d,#ff70432e);box-shadow:0 6px 20px #ff704380}.dialogue-selection-hint[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background:#2196f3e6;color:#fff;padding:12px 16px;border-radius:8px;font-size:13px;box-shadow:0 4px 12px #0003;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}.text-battle-display[_ngcontent-%COMP%]{margin:30px 0;padding:20px;background:var(--bg-secondary);border:2px solid #FF5722;border-radius:12px;box-shadow:0 4px 16px #ff572233}.battle-text-divider[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:700;color:#ff5722;margin:20px 0;padding:10px 0;border-top:2px solid #FF5722;border-bottom:2px solid #FF5722;letter-spacing:2px}.battle-text-participants[_ngcontent-%COMP%]{margin:20px 0;padding:15px;background:var(--bg-tertiary);border-radius:8px;font-size:16px;line-height:1.8}.battle-text-participants[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.battle-character-info[_ngcontent-%COMP%]{padding:15px;background:var(--bg-primary);border-radius:8px;margin:10px 0;border:2px solid var(--border-color)}.battle-character-info[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-size:18px;margin-bottom:12px;color:var(--text-primary)}.stat-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin:8px 0}.stat-label[_ngcontent-%COMP%]{min-width:35px;font-weight:700;font-size:14px;color:var(--text-secondary)}.stat-bar-container[_ngcontent-%COMP%]{flex:1;height:24px;background:var(--bg-tertiary);border-radius:12px;overflow:hidden;border:2px solid var(--border-color);position:relative}.stat-bar[_ngcontent-%COMP%]{height:100%;transition:width .5s ease-out;border-radius:10px;position:relative;box-shadow:inset 0 2px 4px #0003}.stat-bar[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;right:0;height:50%;background:linear-gradient(to bottom,rgba(255,255,255,.3),transparent);border-radius:10px 10px 0 0}.hp-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ef5350,#f44336,#e53935)}.mp-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#42a5f5,#2196f3,#1e88e5)}.stat-value[_ngcontent-%COMP%]{min-width:80px;text-align:right;font-size:14px;font-weight:700;color:var(--text-primary)}.stat-value[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--accent-primary)}.battle-text-log[_ngcontent-%COMP%]{margin:20px 0;padding:20px;background:var(--bg-primary);border-radius:8px;max-height:400px;overflow-y:auto;border:1px solid var(--border-color)}.battle-text-entry[_ngcontent-%COMP%]{padding:8px 12px;margin:6px 0;background:var(--bg-secondary);border-left:3px solid #2196F3;border-radius:4px;font-size:15px;line-height:1.6}.battle-text-result[_ngcontent-%COMP%]{margin:20px 0}.battle-text-actions[_ngcontent-%COMP%]{margin:20px 0;text-align:center}.battle-text-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:15px;color:var(--accent-primary)}.battle-text-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}.battle-text-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}body.dark-theme[_ngcontent-%COMP%]   .text-battle-display[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .text-battle-display[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .text-battle-display[_ngcontent-%COMP%]{background:#ff57220d;border-color:#ff7043;box-shadow:0 4px 16px #ff70434d}body.dark-theme[_ngcontent-%COMP%]   .battle-text-divider[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .battle-text-divider[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .battle-text-divider[_ngcontent-%COMP%]{color:#ff7043;border-color:#ff7043}body.dark-theme[_ngcontent-%COMP%]   .battle-text-entry[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .battle-text-entry[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .battle-text-entry[_ngcontent-%COMP%]{border-left-color:#4fc3f7}body.dark-theme[_ngcontent-%COMP%]   .battle-character-info[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .battle-character-info[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .battle-character-info[_ngcontent-%COMP%]{background:#2d2d2dcc;border-color:#555}body.dark-theme[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]{background:#404040cc;border-color:#666}body.dark-theme[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#d32f2f,#f44336,#ef5350)}body.dark-theme[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#1565c0,#2196f3,#42a5f5)}@media (max-width: 768px){.game-layout.mobile[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow:hidden}.left-panel-container.mobile[_ngcontent-%COMP%], .right-panel-container.mobile[_ngcontent-%COMP%]{position:fixed!important;top:0;left:0;width:85vw!important;max-width:320px!important;height:100vh!important;z-index:1000;transition:transform .3s ease}.left-panel-container.mobile.collapsed[_ngcontent-%COMP%], .right-panel-container.mobile.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)!important}.left-panel-container.mobile[_ngcontent-%COMP%]:not(.collapsed), .right-panel-container.mobile[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)!important;box-shadow:2px 0 10px #0000004d}.right-panel-container.mobile[_ngcontent-%COMP%]{left:auto;right:0}.right-panel-container.mobile.collapsed[_ngcontent-%COMP%]{transform:translate(100%)!important}.main-content-area.mobile[_ngcontent-%COMP%]{width:100%!important;height:100vh!important;padding:0!important;margin:0!important}.game-status-bar.mobile[_ngcontent-%COMP%]{height:56px!important;min-height:56px!important;max-height:56px!important;padding:6px 8px!important;display:flex!important;flex-wrap:nowrap!important;justify-content:space-between!important;align-items:center!important;gap:6px!important;overflow:hidden!important}.game-status-bar.mobile[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%], .game-status-bar.mobile[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]{min-width:44px!important;width:44px!important;height:44px!important;padding:10px!important;flex-shrink:0}.game-status-bar.mobile[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none!important}.game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]:not(.mobile-actions){display:none!important}.game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]{display:flex!important;gap:8px!important;flex:1;justify-content:flex-end!important;align-items:center!important}.game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:44px!important;width:44px!important;height:44px!important;padding:10px!important;flex-shrink:0;position:relative}.game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.badge){display:none!important}.game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px!important;height:22px!important}.game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px;background:#ff4757;color:#fff;border-radius:10px;padding:2px 5px;font-size:.65rem;font-weight:700;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center}.novel-scroll-area[_ngcontent-%COMP%], .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]{padding:20px 16px!important}.novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem!important;line-height:1.7!important}.novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:44px!important;padding:12px 20px!important}.game-panel.mobile[_ngcontent-%COMP%], .character-panel.mobile[_ngcontent-%COMP%], .inventory-panel.mobile[_ngcontent-%COMP%], .shop-panel.mobile[_ngcontent-%COMP%]{width:100vw!important;height:100vh!important;max-width:100vw!important;max-height:100vh!important;border-radius:0!important}.game-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%], .character-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%], .inventory-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%], .shop-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{padding:16px 20px!important}.game-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .character-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .inventory-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .shop-panel.mobile[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem!important}.game-panel.mobile[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%], .character-panel.mobile[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%], .inventory-panel.mobile[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%], .shop-panel.mobile[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:16px!important;overflow-y:auto!important;height:calc(100vh - 150px)!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-tabs[_ngcontent-%COMP%]{display:flex!important;gap:8px!important;padding:12px 16px!important;overflow-x:auto!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{min-width:auto!important;padding:10px 16px!important;font-size:.9rem!important;white-space:nowrap!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:16px!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]{margin-bottom:24px!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;gap:16px!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%]{width:100%!important;display:grid!important;grid-template-columns:repeat(2,1fr)!important;gap:12px!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column.left-column[_ngcontent-%COMP%], .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column.right-column[_ngcontent-%COMP%]{width:100%!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column.center-column[_ngcontent-%COMP%]{grid-template-columns:1fr!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]{width:100%!important;height:80px!important;min-height:80px!important;padding:8px!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:1.5rem!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%], .inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .tooltip-name[_ngcontent-%COMP%]{font-size:.85rem!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%]{width:24px!important;height:24px!important;font-size:1rem!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)!important;gap:8px!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-slot[_ngcontent-%COMP%]{width:100%!important;height:80px!important;padding:6px!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-slot[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{font-size:1.2rem!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-slot[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:.75rem!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-slot[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]{font-size:.7rem!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)!important;gap:12px!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]{padding:12px!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .currency-icon[_ngcontent-%COMP%]{font-size:1.5rem!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%]{font-size:1.1rem!important}.character-panel.mobile[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;gap:12px!important}.character-panel.mobile[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{width:100%!important;padding:12px!important}.character-panel.mobile[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)!important;gap:10px!important}.character-panel.mobile[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;gap:8px!important}.character-panel.mobile[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]{padding:10px!important}.panel-backdrop.mobile[_ngcontent-%COMP%]{display:block!important;opacity:1!important}.novel-home-screen.mobile[_ngcontent-%COMP%]{padding:16px 12px!important}.novel-home-screen.mobile[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{grid-template-columns:1fr!important;gap:12px!important}.wuxia-panel.mobile[_ngcontent-%COMP%]{width:95vw!important;max-width:95vw!important;height:90vh!important;max-height:90vh!important}}@media (min-width: 768px) and (max-width: 1024px){.game-status-bar[_ngcontent-%COMP%]{padding:8px 16px!important}.game-status-bar[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px!important;font-size:.9rem!important}}@media (max-width: 480px){.game-status-bar.mobile[_ngcontent-%COMP%]{padding:4px 6px!important;gap:4px!important}.game-status-bar.mobile[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%], .game-status-bar.mobile[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]{min-width:40px!important;width:40px!important;height:40px!important}.game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px!important;width:40px!important;height:40px!important;padding:8px!important}.game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions.mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px!important;height:20px!important}.novel-scroll-area[_ngcontent-%COMP%]{padding:16px 12px!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]{height:70px!important;min-height:70px!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:1.2rem!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%]{font-size:.75rem!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-slot[_ngcontent-%COMP%]{height:70px!important}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{padding:8px 12px!important;font-size:.85rem!important}}@media (pointer: coarse){button[_ngcontent-%COMP%], .clickable[_ngcontent-%COMP%]{min-width:44px!important;min-height:44px!important}.choice-btn[_ngcontent-%COMP%]{padding:16px 20px!important;margin:8px 0!important}}@media (max-width: 768px) and (orientation: landscape){.game-status-bar.mobile[_ngcontent-%COMP%]{height:48px!important;min-height:48px!important}.wuxia-panel.mobile[_ngcontent-%COMP%]{height:95vh!important}}[_nghost-%COMP%]{--button-height-mobile: 56px;--button-height-tablet: 52px;--button-height-desktop: 48px;--font-xs: .75rem;--font-sm: .875rem;--font-base: 1rem;--font-md: 1.0625rem;--font-lg: 1.125rem;--font-xl: 1.25rem;--font-2xl: 1.5rem;--spacing-xs: 8px;--spacing-sm: 12px;--spacing-md: 16px;--spacing-lg: 20px;--spacing-xl: 24px;--spacing-2xl: 32px}@media (max-width: 768px){h1[_ngcontent-%COMP%]{font-size:clamp(1.75rem,4vw,2.5rem);line-height:1.2}}@media (max-width: 480px){h1[_ngcontent-%COMP%]{font-size:clamp(2rem,5vw,2.8rem)}}@media (max-width: 768px){h2[_ngcontent-%COMP%]{font-size:clamp(1.5rem,3.5vw,2rem);line-height:1.3}}@media (max-width: 480px){h2[_ngcontent-%COMP%]{font-size:clamp(1.75rem,4vw,2.25rem)}}@media (max-width: 768px){h3[_ngcontent-%COMP%]{font-size:clamp(1.25rem,3vw,1.5rem);line-height:1.4}}@media (max-width: 480px){h3[_ngcontent-%COMP%]{font-size:clamp(1.375rem,3.5vw,1.75rem)}}@media (max-width: 768px){p[_ngcontent-%COMP%], .text-content[_ngcontent-%COMP%]{font-size:var(--font-base);line-height:1.6}}@media (max-width: 480px){p[_ngcontent-%COMP%], .text-content[_ngcontent-%COMP%]{font-size:var(--font-md);line-height:1.7}}.novel-book-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--bg-secondary);font-family:Inter,Segoe UI,system-ui,-apple-system,sans-serif;color:var(--text-primary);transition:background-color .3s ease}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background:var(--bg-primary)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]{text-align:center;max-width:800px;padding:60px 50px;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:16px;box-shadow:0 8px 24px var(--shadow);position:relative;overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .book-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;margin-bottom:20px;background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-1px}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .book-subtitle[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:16px;color:var(--text-secondary);font-weight:400}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:50px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:2px}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .select-guide[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin-bottom:30px;font-weight:500}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .start-reading-btn[_ngcontent-%COMP%]{padding:16px 48px;font-size:1.1rem;background:var(--accent-primary);color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;text-transform:uppercase;letter-spacing:1px;transition:all .3s ease;box-shadow:0 4px 12px #0000001a}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .start-reading-btn[_ngcontent-%COMP%]:hover{background:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 6px 16px #00000026}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .start-reading-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.98)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{padding:12px 32px;font-size:1rem;background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color);border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;margin-right:16px}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-color:var(--accent-primary);transform:translateY(-2px)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.98)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]{max-width:700px}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .selected-novel-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:20px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .novel-intro[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin:24px 0;line-height:1.6}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:12px;padding:24px;margin:32px 0;border:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-secondary);font-size:1rem}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-weight:700;color:var(--text-primary);font-size:1.1rem}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.difficulty-badge-easy[_ngcontent-%COMP%]{color:#10b981}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.difficulty-badge-normal[_ngcontent-%COMP%]{color:#f59e0b}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .start-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value.difficulty-badge-hard[_ngcontent-%COMP%]{color:#ef4444}.novel-book-container[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]   .cover-content.novel-start-screen[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:32px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]{min-height:100vh;height:100vh;overflow-y:auto;overflow-x:hidden;background:var(--bg-secondary);padding:40px;position:relative}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:60px;background:var(--bg-primary);border-bottom:2px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;padding:0 16px;z-index:1000;box-shadow:0 2px 8px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]   .header-brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;margin:0;background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]   .header-user-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]   .header-user-actions[_ngcontent-%COMP%]   .user-badge[_ngcontent-%COMP%]{padding:6px 12px;background:var(--bg-secondary);border:1px solid var(--accent-primary);border-radius:20px;font-size:.85rem;font-weight:600;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:120px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]   .header-user-actions[_ngcontent-%COMP%]   .header-logout-btn[_ngcontent-%COMP%]{padding:8px 12px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;font-size:1.2rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]   .header-user-actions[_ngcontent-%COMP%]   .header-logout-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);border-color:var(--accent-primary);transform:scale(1.05)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .mobile-home-header[_ngcontent-%COMP%]   .header-user-actions[_ngcontent-%COMP%]   .header-logout-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000000d}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8b5cf64d;border-radius:5px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8b5cf680}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]{margin-bottom:60px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]{position:relative;text-align:center;margin-bottom:40px;display:flex;justify-content:center;align-items:center;gap:20px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1;text-align:center}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;margin-bottom:16px;background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-1px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text-secondary);font-weight:400}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;align-items:center;gap:12px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{padding:10px 18px;background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-primary) 100%);border:2px solid var(--accent-primary);border-radius:12px;display:flex;align-items:center;gap:6px;box-shadow:0 2px 8px var(--shadow);transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px var(--shadow);border-color:var(--accent-secondary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;background:var(--gradient-primary);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{padding:12px 20px;font-size:1rem;font-weight:600;background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-primary) 100%);color:var(--text-primary);border:2px solid var(--accent-primary);border-radius:12px;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px var(--shadow);display:flex;align-items:center;gap:6px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 4px 16px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:24px}@media (min-width: 1400px){.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}@media (min-width: 1000px) and (max-width: 1399px){.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{grid-template-columns:1fr}}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:16px;padding:32px 28px;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary);transform:scaleX(0);transition:transform .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.featured[_ngcontent-%COMP%]{border-color:var(--accent-primary);background:linear-gradient(135deg,#3b82f60d,#8b5cf60d)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]{border-color:#8b5cf6;background:linear-gradient(135deg,#8b5cf614,#ec489914)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#8b5cf6,#ec4899)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]:hover{border-color:#8b5cf6;box-shadow:0 8px 32px #8b5cf64d}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]:hover   .card-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_aiGlow 2s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.ai-special[_ngcontent-%COMP%]   .card-badge.ai-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#ec4899);animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.wuxia-special[_ngcontent-%COMP%]{border-color:#d4af37;background:linear-gradient(135deg,#8b451314,#d4af3714)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.wuxia-special[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#8b4513,#d4af37)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.wuxia-special[_ngcontent-%COMP%]:hover{border-color:#d4af37;box-shadow:0 8px 32px #d4af374d;transform:translateY(-4px)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.wuxia-special[_ngcontent-%COMP%]:hover   .card-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_swordGlow 2s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card.wuxia-special[_ngcontent-%COMP%]   .card-badge.wuxia-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b4513,#d4af37);color:#fff;font-weight:600;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px var(--shadow);border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover   .card-icon[_ngcontent-%COMP%]{transform:scale(1.15)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin-bottom:8px;color:var(--text-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-secondary);margin-bottom:16px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .card-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;background:var(--accent-primary);color:#fff;border-radius:20px;font-size:.85rem;font-weight:700}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .generation-progress[_ngcontent-%COMP%]{margin-top:24px;padding:24px;background:linear-gradient(135deg,#8b5cf61a,#ec48991a);border:1px solid #8b5cf6;border-radius:16px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .generation-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;justify-content:center}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .generation-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid rgba(139,92,246,.2);border-top-color:#8b5cf6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .generation-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--text-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:32px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:8px;color:var(--text-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:16px;padding:24px;cursor:pointer;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 8px 24px var(--shadow);border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]:hover   .novel-icon[_ngcontent-%COMP%]{transform:scale(1.15) rotate(5deg)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-icon[_ngcontent-%COMP%]{font-size:3rem;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:.8rem;font-weight:700;text-transform:uppercase}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty.difficulty-easy[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty.difficulty-normal[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-difficulty.difficulty-hard[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin-bottom:8px;color:var(--text-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-genre[_ngcontent-%COMP%]{font-size:.85rem;color:var(--accent-primary);font-weight:600;text-transform:uppercase;margin-bottom:12px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-description[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-secondary);line-height:1.5;margin-bottom:16px;min-height:44px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-stats[_ngcontent-%COMP%]{display:flex;gap:12px;padding-top:12px;border-top:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.9rem;color:var(--text-secondary);font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:1.1rem}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]{padding:80px 16px 20px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]{margin-bottom:40px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;margin-bottom:32px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{position:static;width:100%;flex-direction:column;gap:10px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:12px 16px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .welcome-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:14px 20px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{gap:16px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]{padding:24px 20px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:12px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .welcome-section[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:24px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{font-size:.95rem}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]{padding:20px}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-card-header[_ngcontent-%COMP%]   .novel-icon[_ngcontent-%COMP%]{font-size:2.5rem}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2rem}.novel-book-container[_ngcontent-%COMP%]   .novel-home-screen.mobile[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .novels-section[_ngcontent-%COMP%]   .novel-grid[_ngcontent-%COMP%]   .novel-card[_ngcontent-%COMP%]   .novel-info[_ngcontent-%COMP%]   .novel-description[_ngcontent-%COMP%]{font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .game-layout[_ngcontent-%COMP%]{display:flex;flex-direction:row;min-height:100vh;position:relative;background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]{position:fixed;top:70px;height:calc(100vh - 70px);background:var(--bg-primary);border:1px solid var(--border-color);z-index:999;transition:transform .3s ease,box-shadow .3s ease;box-shadow:0 2px 8px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.collapsed[_ngcontent-%COMP%]:hover, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container.collapsed[_ngcontent-%COMP%]:hover{transform:translate(0)!important;box-shadow:0 4px 16px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.mobile[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .right-panel-container.mobile[_ngcontent-%COMP%]{top:50px;height:calc(100vh - 50px);width:85vw;max-width:320px;z-index:2000;box-shadow:0 0 20px #0000004d}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.mobile.collapsed[_ngcontent-%COMP%]:hover, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container.mobile.collapsed[_ngcontent-%COMP%]:hover, .novel-book-container[_ngcontent-%COMP%]   .left-panel-container.mobile.collapsed.left-panel-container[_ngcontent-%COMP%]:hover, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container.mobile.collapsed.left-panel-container[_ngcontent-%COMP%]:hover{transform:translate(-100%)!important}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.mobile.collapsed.right-panel-container[_ngcontent-%COMP%]:hover, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container.mobile.collapsed.right-panel-container[_ngcontent-%COMP%]:hover{transform:translate(100%)!important}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.mobile[_ngcontent-%COMP%]:not(.collapsed), .novel-book-container[_ngcontent-%COMP%]   .right-panel-container.mobile[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)!important}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]   .side-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container[_ngcontent-%COMP%]{left:0;width:280px}.novel-book-container[_ngcontent-%COMP%]   .left-panel-container.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}.novel-book-container[_ngcontent-%COMP%]   .right-panel-container[_ngcontent-%COMP%]{right:0;width:280px}.novel-book-container[_ngcontent-%COMP%]   .right-panel-container.collapsed[_ngcontent-%COMP%]{transform:translate(100%)}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]{padding:30px 15px;cursor:pointer;text-align:center;height:100%;display:flex;flex-direction:column;align-items:center;transition:background .2s ease}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .collapse-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:20px;color:var(--accent-primary);transition:transform .2s ease}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .collapse-text[_ngcontent-%COMP%]{font-size:.9rem;writing-mode:vertical-rl;letter-spacing:2px;color:var(--text-secondary);font-weight:600;text-transform:uppercase}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]:hover   .collapse-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{padding:20px 24px;background:var(--bg-secondary);color:var(--text-primary);display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color)}@media (max-width: 768px){.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{padding:16px 20px;position:sticky;top:0;z-index:10}}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:700;text-transform:uppercase;letter-spacing:1px}@media (max-width: 768px){.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 480px){.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;letter-spacing:.5px}}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border-color);color:var(--text-primary);font-size:1.3rem;cursor:pointer;padding:0;width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}@media (max-width: 768px){.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.5rem}}@media (max-width: 480px){.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:44px;height:44px}}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);border-color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:20px}@media (max-width: 768px){.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:16px}}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{width:100%;padding:14px 16px;margin-bottom:10px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;cursor:pointer;text-align:left;font-size:1rem;font-weight:500;color:var(--text-primary);transition:all .3s ease}@media (max-width: 768px){.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding:16px 18px;margin-bottom:12px;font-size:1.05rem;min-height:52px;display:flex;align-items:center}}@media (max-width: 480px){.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding:18px 20px;min-height:56px}}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-color:var(--accent-primary);transform:translate(4px)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]{margin-top:14px;padding:14px;background:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(148,163,184,.05)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:last-child, .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:500;font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .stat-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .gold-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value.gold[_ngcontent-%COMP%]{color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1rem;font-weight:700;margin:24px 0 12px;padding-bottom:8px;border-bottom:1px solid var(--border-color);text-transform:uppercase;letter-spacing:1px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{margin-bottom:20px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 14px;margin-bottom:8px;background:var(--bg-secondary);border-radius:6px;border-left:2px solid var(--accent-primary);transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-left-width:3px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:var(--text-secondary);margin-bottom:8px;font-weight:500;font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:20px;background:var(--bg-secondary);border-radius:10px;overflow:hidden;border:1px solid var(--border-color);margin-bottom:6px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:var(--accent-primary);transition:width .3s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .progress-item[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{text-align:right;color:var(--text-secondary);font-size:.85rem;font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 14px;margin-bottom:8px;background:var(--bg-secondary);border-radius:6px;border-left:2px solid var(--accent-primary);transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-left-width:3px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:10px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{flex:1;color:var(--text-primary);font-weight:500}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .quick-item[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]{color:var(--accent-primary);font-weight:600}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .inventory-quick-list[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);padding:24px;font-style:italic;font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]{width:100%;padding:12px 18px;margin-bottom:10px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;cursor:pointer;color:var(--text-primary);font-weight:500;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:10px}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem}.novel-book-container[_ngcontent-%COMP%]   .expanded-view[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 12px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]{flex:1;position:relative;transition:all .3s ease;margin-left:0;margin-right:0;margin-top:70px;overflow-y:auto;height:calc(100vh - 70px);background:var(--bg-primary)}.novel-book-container[_ngcontent-%COMP%]   .main-content-area.mobile[_ngcontent-%COMP%]{margin-top:50px;height:calc(100vh - 50px)}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}.novel-book-container[_ngcontent-%COMP%]   .main-content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;width:100%;height:70px;z-index:1001;background:linear-gradient(135deg,#667eea,#764ba2);padding:12px 32px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 20px #667eea4d,0 0 0 1px #ffffff1a;gap:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);animation:_ngcontent-%COMP%_headerGlow 8s ease-in-out infinite;pointer-events:none}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.5) 50%,transparent 100%)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{padding:12px 16px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:10px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);color:#fff;position:relative;z-index:1;display:flex;align-items:center;justify-content:center;min-width:50px;height:50px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#fff6;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.1)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:10px;cursor:pointer;font-size:1rem;font-weight:700;transition:all .3s cubic-bezier(.4,0,.2,1);color:#fff;white-space:nowrap;position:relative;z-index:1;display:flex;align-items:center;gap:8px;height:50px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#fff6;transform:translate(-3px);box-shadow:0 4px 12px #0003}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.1)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]:active{transform:translate(0) scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;position:relative;z-index:1;flex:1;justify-content:center}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]{padding:10px 16px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:12px;cursor:pointer;font-size:.95rem;font-weight:700;transition:all .3s cubic-bezier(.4,0,.2,1);color:#fff;height:50px;display:flex;align-items:center;gap:8px;white-space:nowrap;box-shadow:0 2px 8px #0000001a}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn[_ngcontent-%COMP%]:hover, .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn[_ngcontent-%COMP%]:hover, .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]:hover, .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn[_ngcontent-%COMP%]:hover, .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#fff6;transform:translateY(-2px);box-shadow:0 6px 16px #0003}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.15)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn[_ngcontent-%COMP%]:active, .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn[_ngcontent-%COMP%]:active, .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]:active, .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn[_ngcontent-%COMP%]:active, .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn.active[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn.active[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn.active[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn.active[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-color:transparent;box-shadow:0 4px 16px #667eea66}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .training-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .flow-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ffd7004d,#daa5204d);border-color:#ffd70080;box-shadow:0 6px 20px #ffd7004d}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .equipment-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#daa520);box-shadow:0 4px 16px #ffd70080}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4caf504d,#2e7d324d);border-color:#4caf5080;box-shadow:0 6px 20px #4caf504d}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .inventory-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50,#2e7d32);box-shadow:0 4px 16px #4caf5080}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#8b000066,#b2222266);border-color:#8b000099;box-shadow:0 6px 20px #8b000066}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .dungeon-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b0000,#b22222);box-shadow:0 4px 16px #8b000099}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]{padding:12px 16px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:12px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);color:#fff;min-width:50px;height:50px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0000001a}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]:hover{background:#ef444440;border-color:#ef444466;transform:translateY(-2px);box-shadow:0 6px 16px #ef44444d}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(3px) scale(1.1)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar[_ngcontent-%COMP%]   .logout-btn-game[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]{height:50px;padding:8px 12px;gap:8px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]{min-width:40px;height:40px;padding:8px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .back-home-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]{gap:6px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px;height:40px;padding:8px;font-size:.85rem}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]{min-width:48px;height:48px;padding:10px;background:linear-gradient(135deg,#8b00004d,#b222224d);border:2px solid rgba(139,0,0,.5)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .status-bar-actions[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .mobile-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:48px!important;height:48px!important;padding:10px!important;border-radius:12px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .mobile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px!important;height:22px!important}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .mobile-actions[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b000066,#b2222266)!important;border:2px solid rgba(220,38,38,.6)!important;box-shadow:0 2px 8px #8b00004d}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .mobile-actions[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-width:2.5;filter:drop-shadow(0 0 2px rgba(220,38,38,.5))}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .mobile-actions[_ngcontent-%COMP%]   .dungeon-btn[_ngcontent-%COMP%]:active{background:linear-gradient(135deg,#b91c1c80,#dc262680)!important;transform:scale(.95)}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .player-stats-compact[_ngcontent-%COMP%]{gap:8px;font-size:.8rem}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .player-stats-compact[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{padding:4px 8px}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .player-stats-compact[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:.9rem}.novel-book-container[_ngcontent-%COMP%]   .game-status-bar.mobile[_ngcontent-%COMP%]   .player-stats-compact[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{display:none}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:40px 40px 100px;min-height:calc(100vh - 62px)}@media (max-width: 768px){.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]{padding:24px 16px 80px}}@media (max-width: 480px){.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]{padding:20px 12px 60px}}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]{text-align:center;padding:48px 0;margin-bottom:48px;position:relative;overflow:hidden}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%);width:120%;height:100%;background:linear-gradient(135deg,#667eea14,#764ba214);border-radius:24px;z-index:0}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80%;height:3px;background:linear-gradient(90deg,transparent 0%,#667eea 20%,#764ba2 50%,#667eea 80%,transparent 100%);border-radius:3px;box-shadow:0 0 20px #667eea80;animation:_ngcontent-%COMP%_lineGlow 3s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:800;margin:0;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-1px;text-shadow:0 2px 20px rgba(102,126,234,.3);position:relative;z-index:1;padding:0 24px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"\\1f4d6";position:absolute;left:-20px;top:50%;transform:translateY(-50%);font-size:2rem;opacity:.7;animation:_ngcontent-%COMP%_bookFloat 3s ease-in-out infinite}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .novel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"\\2728";position:absolute;right:-20px;top:50%;transform:translateY(-50%);font-size:1.5rem;opacity:.7;animation:_ngcontent-%COMP%_sparkle 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_lineGlow{0%,to{opacity:.6;box-shadow:0 0 20px #667eea80}50%{opacity:1;box-shadow:0 0 30px #667eeacc}}@keyframes _ngcontent-%COMP%_bookFloat{0%,to{transform:translateY(-50%) translate(0)}50%{transform:translateY(-50%) translate(-5px)}}@keyframes _ngcontent-%COMP%_sparkle{0%,to{opacity:.7;transform:translateY(-50%) rotate(0)}50%{opacity:1;transform:translateY(-50%) rotate(180deg)}}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]{margin-bottom:28px;padding:28px;background:#fff;border-radius:12px;border:1px solid #e0e0e0;transition:all .3s ease;box-shadow:0 2px 8px #0000000d}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]:hover{border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 16px #00000014}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.8;color:#1a1a1a;margin:14px 0;text-align:justify}@media (max-width: 768px){.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]{padding:20px;margin-bottom:20px;border-radius:10px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.8;margin:12px 0}}@media (max-width: 480px){.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]{padding:16px;margin-bottom:16px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.75}}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid var(--accent-primary);border-left-width:4px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:600;font-size:1.05rem;display:flex;align-items:center;gap:10px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%]{font-size:1.4rem;color:var(--accent-primary)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);font-size:1.6rem;font-weight:700;margin:40px 0 28px;text-transform:uppercase;letter-spacing:1.5px}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:20px 28px;margin:14px 0;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:10px;color:var(--text-primary);font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;text-align:left;position:relative;overflow:hidden}@media (max-width: 768px){.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:var(--button-height-tablet);padding:16px 24px;font-size:var(--font-md)}}@media (max-width: 480px){.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:var(--button-height-mobile);padding:18px 24px;font-size:var(--font-lg)}}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--accent-primary);transform:scaleY(0);transition:transform .3s ease}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);border-color:var(--accent-primary);transform:translate(8px);box-shadow:0 4px 12px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:before{transform:scaleY(1)}.novel-book-container[_ngcontent-%COMP%]   .novel-scroll-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translate(8px) scale(.98)}.novel-book-container[_ngcontent-%COMP%]   .panel-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000bf;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1999;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out;cursor:pointer}.novel-book-container[_ngcontent-%COMP%]   .panel-backdrop.mobile[_ngcontent-%COMP%]{background:#000000d9;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw!important;max-width:100vw!important;height:100vh!important;max-height:100vh!important;transform:none!important;background:var(--bg-primary);border:none;border-radius:0!important;z-index:2000;box-shadow:none;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .3s ease-out;display:flex;flex-direction:column}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{padding:20px 48px;background:var(--bg-secondary);color:var(--text-primary);display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid var(--border-color);flex-shrink:0}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border-color);color:var(--text-primary);font-size:1.8rem;cursor:pointer;width:42px;height:42px;border-radius:8px;display:flex;align-items:center;justify-content:center;transition:all .3s ease;flex-shrink:0}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary);transform:rotate(90deg)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:40px 60px;flex:1;overflow-y:auto}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:16px 20px;margin:12px 0;background:var(--bg-secondary);border-radius:8px;border-left:3px solid var(--accent-primary);color:var(--text-primary);font-size:1rem;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-left-width:4px;transform:translate(4px);box-shadow:0 2px 8px var(--shadow)}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;background:var(--accent-primary);border:none;border-radius:6px;color:#fff;font-weight:600;cursor:pointer;transition:all .3s ease;margin-left:10px}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 4px 8px #0003}.novel-book-container[_ngcontent-%COMP%]   .game-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.character-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:0}.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]{padding:24px;background:linear-gradient(135deg,var(--bg-secondary),var(--bg-primary));border-bottom:2px solid var(--border-color)}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]{padding:24px}}.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]{gap:16px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]{gap:20px}}.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #0003}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:72px;height:72px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:88px;height:88px}}.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .avatar-icon[_ngcontent-%COMP%]{font-size:40px}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .avatar-icon[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .avatar-icon[_ngcontent-%COMP%]{font-size:44px}}.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]{flex:1}.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:700;color:var(--text-primary)}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px}}.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:var(--primary-color);color:#fff;border-radius:6px;font-size:14px;font-weight:700}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{padding:5px 14px;font-size:15px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .character-name-badge[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{padding:6px 16px;font-size:16px}}.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]{padding:20px 24px;background:var(--bg-secondary);border-bottom:1px solid var(--border-color)}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]{padding:18px 20px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]{padding:20px 24px}}.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px;font-size:13px;font-weight:600;color:var(--text-secondary)}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:10px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-label[_ngcontent-%COMP%]{font-size:15px;margin-bottom:12px}}.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-label[_ngcontent-%COMP%]   .exp-values[_ngcontent-%COMP%]{color:var(--primary-color)}.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:20px;background:var(--bg-primary);border-radius:10px;overflow:hidden;border:1px solid var(--border-color);margin-bottom:4px}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:24px;margin-bottom:6px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:28px;margin-bottom:8px}}.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,gold,orange);transition:width .3s ease;box-shadow:inset 0 2px 4px #ffffff4d}.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-percentage[_ngcontent-%COMP%]{text-align:right;font-size:11px;color:var(--text-secondary)}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-percentage[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .exp-section[_ngcontent-%COMP%]   .exp-percentage[_ngcontent-%COMP%]{font-size:13px}}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]{padding:20px 24px;background:var(--bg-primary);border-bottom:1px solid var(--border-color)}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]{padding:18px 20px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]{padding:20px 24px}}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]{margin-bottom:16px}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]{margin-bottom:18px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]{margin-bottom:20px}}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:6px;font-size:14px;font-weight:600}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]{font-size:15px;margin-bottom:8px;gap:10px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px;gap:12px}}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:22px}}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:var(--text-primary)}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]{margin-left:auto;color:var(--text-secondary);font-size:13px}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]{font-size:15px}}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:16px;background:var(--bg-secondary);border-radius:8px;overflow:hidden;border:1px solid var(--border-color)}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:20px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:24px}}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease,background .3s ease;box-shadow:inset 0 1px 3px #fff3}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill.low[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ef4444,#dc2626);animation:_ngcontent-%COMP%_pulse 1s infinite}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill.medium[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f59e0b,#d97706)}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item.hp[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ef4444,#dc2626)}.character-panel[_ngcontent-%COMP%]   .status-bars[_ngcontent-%COMP%]   .status-item.mp[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3b82f6,#2563eb)}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]{padding:20px 24px;background:var(--bg-secondary);border-bottom:1px solid var(--border-color)}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]{padding:18px 20px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]{padding:20px 24px}}.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);margin-bottom:16px;padding-bottom:8px;border-bottom:2px solid var(--border-color)}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:17px;margin-bottom:14px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:18px;margin-bottom:18px}}.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{gap:14px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{gap:16px;grid-template-columns:1fr}}.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:var(--bg-primary);border-radius:8px;border:1px solid var(--border-color);transition:all .2s ease}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{padding:14px;gap:14px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{padding:16px;gap:16px;min-height:64px}}.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);transform:translate(2px)}.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:24px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:var(--bg-secondary);border-radius:6px}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:26px;width:40px;height:40px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:28px;width:44px;height:44px}}.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{flex:1}.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-name[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);margin-bottom:2px}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-name[_ngcontent-%COMP%]{font-size:13px;margin-bottom:4px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-name[_ngcontent-%COMP%]{font-size:14px}}.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-primary)}@media (max-width: 768px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 480px){.character-panel[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:22px}}.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]{padding:20px 24px;background:var(--bg-primary);border-bottom:1px solid var(--border-color)}.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);margin-bottom:16px;padding-bottom:8px;border-bottom:2px solid var(--border-color)}.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:12px;background:var(--bg-secondary);border-radius:8px;border:2px solid var(--border-color)}.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item.gold[_ngcontent-%COMP%]{border-color:#ffd70080}.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item.gem[_ngcontent-%COMP%]{border-color:#8a2be280}.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item.crystal[_ngcontent-%COMP%]{border-color:#00bfff80}.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item.ticket[_ngcontent-%COMP%]{border-color:#ff69b480}.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item[_ngcontent-%COMP%]   .currency-mini-icon[_ngcontent-%COMP%]{font-size:24px}.character-panel[_ngcontent-%COMP%]   .currency-section[_ngcontent-%COMP%]   .currency-mini-grid[_ngcontent-%COMP%]   .currency-mini-item[_ngcontent-%COMP%]   .currency-mini-value[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary)}.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]{padding:20px 24px;background:var(--bg-secondary)}.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);margin-bottom:16px;padding-bottom:8px;border-bottom:2px solid var(--border-color)}.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:var(--bg-primary);border-radius:6px;border:1px solid var(--border-color);transition:all .2s ease}.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);transform:translate(2px)}.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary)}.character-panel[_ngcontent-%COMP%]   .skills-section[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-level[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--primary-color);padding:2px 8px;background:var(--bg-secondary);border-radius:4px}.battle-section[_ngcontent-%COMP%]{width:100%;padding:32px 24px;margin:24px 0;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color);box-shadow:0 2px 8px #0000000d}.battle-section[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.battle-section[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary)}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-bottom:50px;gap:50px;flex-wrap:wrap;position:relative;z-index:1}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]{flex:1;min-width:280px;max-width:340px;padding:24px 20px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;box-shadow:0 2px 8px #00000014;transition:all .3s ease;position:relative;overflow:visible}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.taking-damage[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_damageShakeStrong .5s ease-in-out}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.taking-damage[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#ff00004d;border-radius:12px;animation:_ngcontent-%COMP%_damageFlash .5s ease-out;pointer-events:none;z-index:10}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.player.active[_ngcontent-%COMP%]{border-color:#3b82f6;box-shadow:0 4px 20px #3b82f64d,inset 0 0 0 1px #3b82f633}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.enemy.active[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 4px 20px #ef44444d,inset 0 0 0 1px #ef444433}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]{display:none}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;margin-bottom:20px;text-align:center;color:var(--text-primary);letter-spacing:.5px}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]{margin-bottom:16px}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;font-size:.95rem;color:var(--text-secondary)}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-weight:600}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]{margin-bottom:12px;position:relative;background:transparent}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;background:transparent}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%]{font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;padding:2px 8px;border-radius:4px;background:transparent;color:var(--accent-primary)}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-primary);font-weight:700;font-family:Courier New,monospace}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]{height:20px;background:transparent;border-radius:10px;overflow:hidden;border:2px solid rgba(255,255,255,.1);box-shadow:inset 0 2px 4px #0000004d,0 2px 8px #0000001a;position:relative}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]:before, .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:50%;background:linear-gradient(to bottom,rgba(255,255,255,.2),transparent);border-radius:10px 10px 0 0;pointer-events:none;z-index:2}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{height:100%;transition:width .6s cubic-bezier(.34,1.56,.64,1);border-radius:8px;position:relative;overflow:hidden;box-shadow:inset 0 -2px 4px #0000004d}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]:before, .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:40%;background:linear-gradient(to bottom,rgba(255,255,255,.4),transparent);border-radius:8px 8px 0 0;z-index:1}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626,#ef4444);box-shadow:inset 0 1px #fff3,inset 0 -1px #0000001a}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#b91c1c,#dc2626);animation:_ngcontent-%COMP%_hpPulseLow .8s ease-in-out infinite}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb,#3b82f6);box-shadow:inset 0 1px #fff3,inset 0 -1px #0000001a}.battle-section[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .vs-indicator[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--text-secondary);opacity:.6}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]{max-height:280px;overflow-y:auto;padding:16px;background:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color);margin-bottom:24px;font-family:Inter,-apple-system,sans-serif;scroll-behavior:smooth;box-shadow:inset 0 1px 2px #0000000d}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0003;border-radius:3px}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0000004d}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]{padding:6px 10px;color:var(--text-secondary);font-size:.9rem;line-height:1.5;border-radius:4px;margin-bottom:2px;animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]:last-child{border-bottom:none}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%]{color:#ef4444;font-weight:600;background:#ef444414}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%]{color:#10b981;font-weight:600;background:#10b98114}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.victory[_ngcontent-%COMP%]{color:#fbbf24;font-weight:700;font-size:1rem;background:#fbbf241a;padding:8px;text-align:center;border-radius:6px}.battle-section[_ngcontent-%COMP%]   .battle-log[_ngcontent-%COMP%]   .log-entry.defeat[_ngcontent-%COMP%]{color:#6b7280;font-weight:700;font-size:1rem;background:#6b72801a;padding:8px;text-align:center;border-radius:6px;opacity:.8}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:.95rem;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease;color:#fff}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.attack[_ngcontent-%COMP%]{background:#ef4444}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.attack[_ngcontent-%COMP%]:hover:not(:disabled){background:#dc2626}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.skill[_ngcontent-%COMP%]{background:#3b82f6}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.skill[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.defend[_ngcontent-%COMP%]{background:#10b981}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.defend[_ngcontent-%COMP%]:hover:not(:disabled){background:#059669}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.potion[_ngcontent-%COMP%]{background:#8b5cf6}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn.potion[_ngcontent-%COMP%]:hover:not(:disabled){background:#7c3aed}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.battle-section[_ngcontent-%COMP%]   .battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.95)}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]{text-align:center;padding:32px 24px;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color);margin-top:16px}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:16px}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h2.victory[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3.victory[_ngcontent-%COMP%]{color:#fbbf24}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h2.defeat[_ngcontent-%COMP%], .battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3.defeat[_ngcontent-%COMP%]{color:#6b7280}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-secondary);margin-bottom:12px;line-height:1.6}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .auto-continue[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);opacity:.7;margin-top:16px}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .end-battle-btn[_ngcontent-%COMP%]{margin-top:20px;padding:10px 24px;font-size:1rem;font-weight:600;background:var(--accent-primary);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .end-battle-btn[_ngcontent-%COMP%]:hover{background:var(--accent-secondary)}.battle-section[_ngcontent-%COMP%]   .battle-result[_ngcontent-%COMP%]   .end-battle-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_aiGlow{0%,to{filter:drop-shadow(0 0 8px rgba(139,92,246,.5))}50%{filter:drop-shadow(0 0 16px rgba(236,72,153,.8))}}@keyframes _ngcontent-%COMP%_swordGlow{0%,to{filter:drop-shadow(0 0 8px rgba(212,175,55,.5));transform:rotate(0)}50%{filter:drop-shadow(0 0 16px rgba(212,175,55,.8));transform:rotate(5deg)}}@keyframes _ngcontent-%COMP%_battlePulse{0%,to{transform:translate(-50%,-50%) scale(1);opacity:.5}50%{transform:translate(-50%,-50%) scale(1.2);opacity:.3}}@keyframes _ngcontent-%COMP%_playerGlow{0%,to{box-shadow:0 15px 40px #3b82f699,0 0 30px #3b82f666}50%{box-shadow:0 15px 40px #3b82f6cc,0 0 40px #3b82f699}}@keyframes _ngcontent-%COMP%_enemyGlow{0%,to{box-shadow:0 15px 40px #ef444499,0 0 30px #ef444466}50%{box-shadow:0 15px 40px #ef4444cc,0 0 40px #ef444499}}@keyframes _ngcontent-%COMP%_hpPulseLow{0%,to{opacity:1}50%{opacity:.7}}@keyframes _ngcontent-%COMP%_shimmerFlow{0%{transform:translate(-100%)}to{transform:translate(200%)}}@keyframes _ngcontent-%COMP%_damageShakeStrong{0%,to{transform:translate(0) rotate(0)}10%{transform:translate(-10px) rotate(-2deg)}20%{transform:translate(10px) rotate(2deg)}30%{transform:translate(-10px) rotate(-2deg)}40%{transform:translate(10px) rotate(2deg)}50%{transform:translate(-8px) rotate(-1deg)}60%{transform:translate(8px) rotate(1deg)}70%{transform:translate(-5px) rotate(-.5deg)}80%{transform:translate(5px) rotate(.5deg)}90%{transform:translate(-2px) rotate(0)}}@keyframes _ngcontent-%COMP%_damageFlash{0%{opacity:0}10%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_damageNumber{0%{transform:translateY(0) scale(.5);opacity:0}20%{transform:translateY(-20px) scale(1.2);opacity:1}80%{transform:translateY(-60px) scale(1);opacity:1}to{transform:translateY(-80px) scale(.8);opacity:0}}@keyframes _ngcontent-%COMP%_vsGlow{0%,to{filter:drop-shadow(0 0 20px rgba(59,130,246,.6));transform:scale(1)}50%{filter:drop-shadow(0 0 30px rgba(59,130,246,.9));transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_sparkle{0%,to{opacity:.5;transform:rotate(0) scale(1)}50%{opacity:1;transform:rotate(180deg) scale(1.2)}}@keyframes _ngcontent-%COMP%_damageShake{0%,to{transform:translate(0)}25%{transform:translate(-3px)}75%{transform:translate(3px)}}@keyframes _ngcontent-%COMP%_healPulse{0%,to{transform:scale(1);box-shadow:0 0 #10b98100}50%{transform:scale(1.05);box-shadow:0 0 10px #10b98180}}@keyframes _ngcontent-%COMP%_victoryFlash{0%,to{opacity:1;box-shadow:0 0 10px #fbbf2480}50%{opacity:.8;box-shadow:0 0 20px #fbbf24cc}}@keyframes _ngcontent-%COMP%_resultGlow{0%,to{opacity:.3}50%{opacity:.6}}@keyframes _ngcontent-%COMP%_victoryBounce{0%,to{transform:translateY(0) scale(1)}50%{transform:translateY(-10px) scale(1.05)}}@keyframes _ngcontent-%COMP%_celebrate{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-15px) rotate(360deg)}}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.4}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translate(-50%,-45%)}to{opacity:1;transform:translate(-50%,-50%)}}  .battle-modal-backdrop{background-color:#000000bf!important;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}  .cdk-overlay-dark-backdrop{background-color:#000000bf!important;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100%}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;padding:20px;background:var(--bg-secondary);border-radius:12px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:12px;color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:40px;width:100%}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]{padding:16px 24px;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--accent-primary);color:#fff;border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 12px #0003}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn.primary[_ngcontent-%COMP%]{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--accent-secondary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .character-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{padding:16px;background:var(--danger);color:#fff;border-radius:8px;margin-bottom:20px;text-align:center;font-weight:600}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]{margin-top:30px;background:var(--bg-secondary);padding:28px;border-radius:12px;border:2px solid var(--accent-primary);animation:_ngcontent-%COMP%_slideInUp .4s ease-out;width:100%;box-sizing:border-box}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;margin-bottom:24px;color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px;width:100%}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;background:var(--bg-primary);border-radius:8px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-secondary);margin-right:12px;min-width:60px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-primary);font-weight:500}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-description[_ngcontent-%COMP%]{margin-bottom:20px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-description[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:12px;color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:16px;background:var(--bg-primary);border-radius:8px;line-height:1.6;color:var(--text-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]{margin-bottom:20px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:12px;color:var(--accent-primary)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .abilities-list[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .traits-list[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .abilities-list[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .traits-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .ability-tag[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-abilities[_ngcontent-%COMP%]   .trait-tag[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .ability-tag[_ngcontent-%COMP%], .character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .trait-tag[_ngcontent-%COMP%]{padding:8px 16px;background:var(--bg-primary);border:2px solid var(--accent-primary);border-radius:20px;font-weight:600;color:var(--accent-primary);font-size:.95rem}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:30px;width:100%}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:16px 24px;font-size:1.1rem;font-weight:600;border-radius:12px;cursor:pointer;transition:all .3s ease}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98166}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]{background:var(--accent-primary);color:#fff;border:none}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]:hover{background:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 4px 12px #0003}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]{background:var(--bg-primary);color:var(--text-primary);border:2px solid var(--border-color)}.character-creator-panel[_ngcontent-%COMP%]   .character-creator-container[_ngcontent-%COMP%]   .generated-character-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-primary);color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 12px #00000026}@keyframes _ngcontent-%COMP%_aiGlow{0%,to{filter:drop-shadow(0 0 8px rgba(139,92,246,.4))}50%{filter:drop-shadow(0 0 16px rgba(236,72,153,.6))}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.85;transform:scale(1.05)}}.saved-characters-section[_ngcontent-%COMP%]{margin-top:32px;padding:0;background:transparent;border:none}.saved-characters-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:24px}.saved-characters-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:32px;color:var(--text-primary);margin-bottom:8px;font-weight:700;background:linear-gradient(135deg,#8b5cf6,#3b82f6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.saved-characters-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:16px;padding:24px;box-shadow:0 4px 12px var(--shadow);transition:all .3s ease;cursor:pointer;border:2px solid var(--border-color);position:relative}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #8b5cf64d;border-color:#8b5cf680}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin:0;flex:1}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;background:linear-gradient(135deg,#8b5cf6,#a78bfa);color:#fff;border-radius:6px;font-size:13px;font-weight:700;margin-left:8px;box-shadow:0 2px 4px #8b5cf64d}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ef4444;font-size:24px;cursor:pointer;padding:4px 8px;transition:all .2s ease}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#dc2626}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-meta[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:12px;flex-wrap:wrap}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{background:#8b5cf626;color:#a78bfa;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;line-height:1.6;margin-bottom:12px;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-traits[_ngcontent-%COMP%]   .trait[_ngcontent-%COMP%]{background:#3b82f626;color:#60a5fa;padding:4px 12px;border-radius:10px;font-size:11px;font-weight:500}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-currency[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:12px;padding:12px;background:var(--bg-primary);border-radius:8px;border:1px solid var(--border-color)}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-currency[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:6px 10px;background:var(--bg-secondary);border-radius:6px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-currency[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:16px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-currency[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary)}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-inventory-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 14px;background:linear-gradient(135deg,#3b82f626,#8b5cf626);border:1px solid rgba(139,92,246,.3);border-radius:8px;margin-bottom:12px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-inventory-badge[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:16px}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-inventory-badge[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);font-weight:500}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-inventory-badge[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--primary-color)}.saved-characters-section[_ngcontent-%COMP%]   .characters-grid[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]   .character-footer[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary);padding-top:8px;border-top:1px solid var(--border-color)}.saved-scenarios-section[_ngcontent-%COMP%]{margin-top:32px;padding:0;background:transparent;border:none}.saved-scenarios-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px;color:var(--text-primary);margin-bottom:24px;font-weight:700;background:linear-gradient(135deg,#8b5cf6,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:16px;padding:24px;box-shadow:0 4px 12px var(--shadow);transition:all .3s ease;cursor:pointer;border:2px solid var(--border-color);position:relative}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #8b5cf64d;border-color:#8b5cf680}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin:0;flex:1}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ef4444;font-size:24px;cursor:pointer;padding:4px 8px;transition:all .2s ease}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#dc2626}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-description[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;line-height:1.6;margin-bottom:16px;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:#8b5cf626;color:#a78bfa;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;color:var(--text-secondary);padding-top:12px;border-top:1px solid var(--border-color)}.saved-scenarios-section[_ngcontent-%COMP%]   .scenarios-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .card-meta[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{font-weight:600;color:#a78bfa}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100%}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px;background:linear-gradient(135deg,#8b5cf60d,#ec48990d);border-radius:16px;border:2px solid rgba(139,92,246,.1)}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px;color:var(--text-primary);margin-bottom:12px;background:linear-gradient(135deg,#8b5cf6,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:40px;width:100%}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]{padding:16px 24px;border:2px solid var(--border-color);background:var(--bg-secondary);border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#ec4899);border-color:transparent;color:#fff}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #8b5cf64d;border-color:#8b5cf6}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .scenario-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:16px;border-radius:12px;margin-bottom:24px;border:2px solid #fcc;text-align:center;font-weight:500}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]{margin-top:30px;background:var(--bg-secondary);border-radius:20px;padding:32px;box-shadow:0 8px 32px var(--shadow);border:2px solid var(--border-color);width:100%;box-sizing:border-box}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px;color:var(--text-primary);margin-bottom:24px;text-align:center;background:linear-gradient(135deg,#8b5cf6,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;padding:24px;background:linear-gradient(135deg,#8b5cf60d,#ec48990d);border-radius:16px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:var(--text-primary);margin:0}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{margin-bottom:20px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#8b5cf6;margin-bottom:8px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.8;font-size:15px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]{margin-bottom:20px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#8b5cf6;margin-bottom:8px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-characters[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 16px;background:#8b5cf60d;border-left:3px solid #8b5cf6;margin-bottom:8px;border-radius:8px;color:var(--text-secondary)}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]{margin-bottom:24px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#8b5cf6;margin-bottom:12px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]   .tag-item[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf61a,#ec48991a);color:#8b5cf6;padding:6px 16px;border-radius:20px;font-size:13px;font-weight:500}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:32px;padding-top:24px;border-top:2px solid rgba(139,92,246,.1)}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:16px 24px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98166}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#ec4899);color:#fff}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #8b5cf666}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.scenario-creator-panel[_ngcontent-%COMP%]   .scenario-creator-container[_ngcontent-%COMP%]   .generated-scenario-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #f59e0b66}.saved-items-section[_ngcontent-%COMP%]{margin-top:32px;padding:0;background:transparent;border:none}.saved-items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:24px}.saved-items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:32px;color:var(--text-primary);margin-bottom:8px;font-weight:700;background:linear-gradient(135deg,gold,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.saved-items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:16px;padding:20px;box-shadow:0 4px 12px var(--shadow);transition:all .3s ease;cursor:pointer;border:2px solid var(--border-color);position:relative}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card.grade-legendary[_ngcontent-%COMP%]{border-color:gold;background:linear-gradient(135deg,#ffd7001a,#ffa5001a)}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card.grade-rare[_ngcontent-%COMP%]{border-color:#a855f7;background:linear-gradient(135deg,#a855f71a,#8b5cf61a)}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card.grade-uncommon[_ngcontent-%COMP%]{border-color:#3b82f6;background:linear-gradient(135deg,#3b82f61a,#2563eb1a)}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #ffd7004d}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-primary);margin:0;flex:1}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ef4444;font-size:20px;cursor:pointer;padding:4px;transition:all .2s ease}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#dc2626}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:13px;line-height:1.5;margin-bottom:12px;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981;padding:4px 10px;border-radius:8px;font-size:12px;font-weight:600}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:#8b5cf61a;color:#8b5cf6;padding:3px 10px;border-radius:10px;font-size:11px;font-weight:500}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag.type-tag[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag.grade-tag[_ngcontent-%COMP%]{background:#ffd70033;color:#d97706;font-weight:600}.saved-items-section[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary);padding-top:8px;border-top:1px solid rgba(0,0,0,.05)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px;background:linear-gradient(135deg,#ffd7000d,#ec48990d);border-radius:16px;border:2px solid rgba(255,215,0,.2)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px;color:var(--text-primary);margin-bottom:12px;background:linear-gradient(135deg,gold,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:40px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]{padding:16px 24px;border:2px solid rgba(255,215,0,.3);background:var(--bg-secondary);border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.weapon[_ngcontent-%COMP%]{border-color:#ef4444}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.weapon[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#ef44441a,#dc26261a);border-color:#dc2626}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.armor[_ngcontent-%COMP%]{border-color:#3b82f6}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.armor[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#3b82f61a,#2563eb1a);border-color:#2563eb}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.rare[_ngcontent-%COMP%]{border-color:#a855f7}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.rare[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#a855f71a,#8b5cf61a);border-color:#8b5cf6}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.legendary[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ff8c00);border-color:transparent;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.legendary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #ffd70080}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.consumable[_ngcontent-%COMP%]{border-color:#10b981}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.consumable[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#10b9811a,#0596691a);border-color:#059669}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.special[_ngcontent-%COMP%]{border-color:#ec4899}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn.special[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#ec48991a,#db27771a);border-color:#db2777}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .item-type-buttons[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:16px;border-radius:12px;margin-bottom:24px;border:2px solid #fcc;text-align:center;font-weight:500}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]{margin-top:30px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;color:var(--text-primary);margin-bottom:20px;text-align:center}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:12px;padding:16px;border:2px solid var(--border-color);transition:all .2s ease}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card.grade-common[_ngcontent-%COMP%]{border-color:#9e9e9e}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card.grade-uncommon[_ngcontent-%COMP%]{border-color:#4caf50}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card.grade-rare[_ngcontent-%COMP%]{border-color:#2196f3}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card.grade-epic[_ngcontent-%COMP%]{border-color:#9c27b0}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card.grade-legendary[_ngcontent-%COMP%]{border-color:#ff9800;box-shadow:0 0 15px #ff98004d}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);margin:0;flex:1}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{padding:2px 8px;border-radius:4px;font-size:11px;font-weight:600;white-space:nowrap}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c77c\\bc18[_ngcontent-%COMP%] {background:#9e9e9e;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge.grade-\\ace0\\ae09[_ngcontent-%COMP%] {background:#4caf50;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge.grade-\\d76c\\adc0[_ngcontent-%COMP%] {background:#2196f3;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c601\\c6c5[_ngcontent-%COMP%] {background:#9c27b0;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c804\\c124[_ngcontent-%COMP%], .item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-header[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c2e0\\d654[_ngcontent-%COMP%] {background:linear-gradient(135deg,#ff9800,#f44336);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-description[_ngcontent-%COMP%]{font-size:13px;color:var(--text-primary);line-height:1.5;margin-bottom:12px;min-height:60px;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%]{padding:4px 8px;background:var(--bg-primary);border-radius:4px;font-size:11px;font-weight:600;color:var(--text-primary)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-actions[_ngcontent-%COMP%]   .save-mini-btn[_ngcontent-%COMP%]{flex:1;padding:8px;background:var(--primary-color);color:#fff;border:none;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-actions[_ngcontent-%COMP%]   .save-mini-btn[_ngcontent-%COMP%]:hover{background:var(--primary-dark);transform:scale(1.02)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .save-all-btn[_ngcontent-%COMP%]{padding:14px 32px;background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 4px 12px #0003;transition:all .3s ease}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .save-all-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0000004d}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-items-list[_ngcontent-%COMP%]   .bulk-actions[_ngcontent-%COMP%]   .save-all-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]{margin-top:30px;background:var(--bg-secondary);border-radius:20px;padding:32px;box-shadow:var(--shadow);border:2px solid var(--border-color);width:100%}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px;color:var(--text-primary);margin-bottom:24px;text-align:center;background:linear-gradient(135deg,gold,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;padding:24px;background:linear-gradient(135deg,#ffd7001a,#ec48991a);border-radius:16px;position:relative}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title.grade-legendary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd70026,#ffa50026);border:2px solid rgba(255,215,0,.5);animation:_ngcontent-%COMP%_legendaryGlow 2s ease-in-out infinite}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:var(--text-primary);margin:0 0 12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 16px;border-radius:20px;font-size:13px;font-weight:600}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c77c\\bc18[_ngcontent-%COMP%] {background:#9ca3af;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\ace0\\ae09[_ngcontent-%COMP%] {background:#3b82f6;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\d76c\\adc0[_ngcontent-%COMP%] {background:#a855f7;color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c804\\c124[_ngcontent-%COMP%] {background:linear-gradient(135deg,gold,#ff8c00);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]   .item-grade-badge.grade-\\c2e0\\d654[_ngcontent-%COMP%] {background:linear-gradient(135deg,#ff0080,#7928ca);color:#fff;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-type-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-type-info[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-block;padding:8px 20px;background:#3b82f61a;color:#3b82f6;border-radius:20px;font-size:14px;font-weight:600}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.8;font-size:15px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#10b9810d;border-left:3px solid #10b981;border-radius:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;font-weight:500}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#10b981;font-size:16px;font-weight:700}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 16px;background:#8b5cf60d;border-left:3px solid #8b5cf6;margin-bottom:8px;border-radius:8px;color:var(--text-secondary)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-requirements[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-requirements[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-requirements[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ef4444;font-weight:500;padding:12px;background:#ef44440d;border-left:3px solid #ef4444;border-radius:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-lore[_ngcontent-%COMP%]{margin-bottom:20px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-lore[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-lore[_ngcontent-%COMP%]   .lore-text[_ngcontent-%COMP%]{color:var(--text-secondary);font-style:italic;padding:16px;background:#8b5cf60d;border-radius:12px;border:2px dashed rgba(139,92,246,.3);line-height:1.8}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]{margin-bottom:24px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:gold;margin-bottom:12px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]   .tag-item[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd7001a,#ec48991a);color:#d97706;padding:6px 16px;border-radius:20px;font-size:13px;font-weight:500}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:32px;padding-top:24px;border-top:2px solid rgba(255,215,0,.2)}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:16px 24px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98166}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ff8c00);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #ffd70066}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.item-creator-panel[_ngcontent-%COMP%]   .item-creator-container[_ngcontent-%COMP%]   .generated-item-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #f59e0b66}.story-creator-panel[_ngcontent-%COMP%]{margin-top:40px;padding:32px;background:var(--bg-secondary);border-radius:24px;border:2px solid var(--border-color);box-shadow:var(--shadow)}.story-creator-panel[_ngcontent-%COMP%]   .creator-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0}.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:none;background:var(--bg-primary);border-radius:12px;font-size:24px;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.story-creator-panel[_ngcontent-%COMP%]   .creator-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{transform:rotate(90deg);background:#ef4444;color:#fff}.story-creator-panel[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px;background:linear-gradient(135deg,#667eea0d,#764ba20d);border-radius:16px;border:2px solid rgba(102,126,234,.2)}.story-creator-panel[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:22px;color:var(--text-primary);margin-bottom:12px}.story-creator-panel[_ngcontent-%COMP%]   .creator-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:15px;line-height:1.6}.story-creator-panel[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444;padding:16px;border-radius:12px;margin-bottom:24px;border:2px solid rgba(239,68,68,.3);text-align:center;font-weight:500}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]{margin-bottom:32px;padding:24px;background:linear-gradient(135deg,#667eea0d,#764ba20d);border-radius:16px;border:2px solid rgba(102,126,234,.2)}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;font-size:16px;font-weight:600;color:var(--text-primary)}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .label-icon[_ngcontent-%COMP%]{font-size:20px}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444;font-size:18px}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]{width:100%;padding:14px 18px;font-size:16px;border:2px solid var(--border-color);border-radius:12px;background:var(--bg-secondary);color:var(--text-primary);transition:all .3s ease;font-family:inherit}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary);opacity:.6}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.story-creator-panel[_ngcontent-%COMP%]   .title-input-section[_ngcontent-%COMP%]   .char-count[_ngcontent-%COMP%]{text-align:right;margin-top:8px;font-size:13px;color:var(--text-secondary)}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]{display:grid;gap:24px;margin-bottom:32px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:18px;color:var(--text-primary);margin-bottom:16px;font-weight:600;display:flex;align-items:center;gap:8px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   .selection-count[_ngcontent-%COMP%]{font-size:14px;color:#667eea;font-weight:500;padding:4px 12px;background:#667eea1a;border-radius:12px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]{padding:16px;background:var(--bg-primary);border:2px solid var(--border-color);border-radius:12px;cursor:pointer;transition:all .3s ease}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:#667eea}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea26,#764ba226);border-color:#667eea;box-shadow:0 4px 16px #667eea4d}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-primary);margin-bottom:4px}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary)}.story-creator-panel[_ngcontent-%COMP%]   .selection-section[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .no-content[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);padding:24px;background:var(--bg-primary);border-radius:12px;font-size:14px}.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:32px}.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]   .generate-story-btn[_ngcontent-%COMP%]{padding:18px 48px;font-size:18px;font-weight:600;border:none;border-radius:16px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 16px #667eea4d}.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]   .generate-story-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px #667eea80}.story-creator-panel[_ngcontent-%COMP%]   .creator-actions[_ngcontent-%COMP%]   .generate-story-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]{margin-top:32px;padding:32px;background:linear-gradient(135deg,#667eea14,#764ba214);border-radius:20px;border:2px solid rgba(102,126,234,.3)}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{text-align:center;font-size:24px;color:#667eea;margin-bottom:24px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]{background:var(--bg-secondary);padding:24px;border-radius:16px;margin-bottom:24px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%]   .story-icon[_ngcontent-%COMP%]{font-size:36px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;color:var(--text-primary);margin:0}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px;line-height:1.6;margin-bottom:16px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:20px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{padding:8px 16px;background:#667eea1a;border-radius:20px;font-size:14px;color:#667eea;font-weight:500}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-intro[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;color:var(--text-primary);margin-bottom:12px;font-weight:600}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-preview[_ngcontent-%COMP%]   .story-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.8;margin-bottom:8px;font-size:15px}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 32px;font-size:16px;font-weight:600;border:none;border-radius:12px;cursor:pointer;transition:all .3s ease}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 16px #667eea4d}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea80}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 16px #10b9814d}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98180}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-primary);border:2px solid var(--border-color)}.story-creator-panel[_ngcontent-%COMP%]   .generated-story-result[_ngcontent-%COMP%]   .story-actions[_ngcontent-%COMP%]   .regenerate-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:#667eea}.saved-section[_ngcontent-%COMP%]{margin-top:32px;background:var(--bg-secondary);border-radius:12px;border:2px solid var(--border-color);overflow:hidden;transition:all .2s ease}.saved-section[_ngcontent-%COMP%]:hover{border-color:#667eea}.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;cursor:pointer;background:var(--bg-primary);transition:background .2s ease}.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex:1}.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{font-size:14px;color:#667eea;transition:transform .2s ease;min-width:20px}.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin:0}.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .count-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:32px;height:28px;padding:0 12px;background:#667eea;color:#fff;border-radius:14px;font-size:13px;font-weight:700}.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .gold-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;background:#f59e0b;color:#fff;border-radius:10px;font-size:14px;font-weight:700}.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{padding:8px 16px;background:var(--bg-secondary);color:#667eea;border:2px solid #667eea;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease}.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff}.saved-section[_ngcontent-%COMP%]   .section-header-collapsible[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.saved-section[_ngcontent-%COMP%]   .section-content[_ngcontent-%COMP%]{padding:24px;animation:_ngcontent-%COMP%_slideDown .3s ease;background:var(--bg-primary)}.saved-section[_ngcontent-%COMP%]   .section-content[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);font-size:14px;margin-bottom:24px}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0}to{opacity:1;max-height:5000px}}.saved-section.shop-section[_ngcontent-%COMP%]:hover{border-color:#f59e0b}.saved-section.shop-section[_ngcontent-%COMP%]   .section-header-collapsible.shop-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{color:#f59e0b}.saved-section.shop-section[_ngcontent-%COMP%]   .section-header-collapsible.shop-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary)}.saved-section.shop-section[_ngcontent-%COMP%]   .section-header-collapsible.shop-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .shop-badge[_ngcontent-%COMP%]{background:#f59e0b}.saved-section.shop-section[_ngcontent-%COMP%]   .section-header-collapsible.shop-header[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{color:#f59e0b;border-color:#f59e0b}.saved-section.shop-section[_ngcontent-%COMP%]   .section-header-collapsible.shop-header[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#f59e0b;color:#fff}.saved-stories-section[_ngcontent-%COMP%]{margin-top:48px;padding:0}.saved-stories-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.saved-stories-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;color:var(--text-primary);margin-bottom:8px}.saved-stories-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:15px}.saved-stories-section[_ngcontent-%COMP%]   .stories-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:2px solid var(--border-color);border-radius:16px;padding:24px;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow)}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026;border-color:#667eea}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .story-icon-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .story-icon-title[_ngcontent-%COMP%]   .story-icon[_ngcontent-%COMP%]{font-size:32px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .story-icon-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;color:var(--text-primary);margin:0;font-weight:700}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer;opacity:.6;transition:all .3s ease;padding:4px 8px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-header[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.2)}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{padding:6px 12px;background:#667eea1a;border-radius:12px;font-size:13px;color:#667eea;font-weight:500}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-description[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;line-height:1.6;margin-bottom:16px;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:16px;border-top:1px solid var(--border-color)}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-footer[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary)}.saved-stories-section[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .story-footer[_ngcontent-%COMP%]   .created-by[_ngcontent-%COMP%]{font-size:12px;color:#667eea;font-weight:500}.action-card.premium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd7001a,#ffa5001a);border:2px solid rgba(255,215,0,.3)}.action-card.premium[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:48px;animation:_ngcontent-%COMP%_sparkle 2s ease-in-out infinite}.action-card.premium[_ngcontent-%COMP%]:hover{border-color:gold;box-shadow:0 8px 32px #ffd7004d}.action-card.premium[_ngcontent-%COMP%]   .premium-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ff8c00);color:#fff;font-weight:700;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_sparkle{0%,to{transform:scale(1) rotate(0)}50%{transform:scale(1.1) rotate(5deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}@keyframes _ngcontent-%COMP%_legendaryGlow{0%,to{box-shadow:0 0 20px #ffd7004d}50%{box-shadow:0 0 30px #ffd70099}}.story-flow-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;width:100vw;height:100vh;background:#000000bf;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:block;z-index:99999!important;animation:_ngcontent-%COMP%_fadeIn .3s ease;pointer-events:all}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]{width:100vw!important;max-width:100vw!important;height:100vh!important;max-height:100vh!important;background:var(--bg-primary);border:none;border-radius:0!important;box-shadow:none;display:flex;flex-direction:column;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .3s ease;position:relative}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]{padding:20px 48px;background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%);display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid var(--border-color);cursor:default;-webkit-user-select:none;user-select:none;flex-shrink:0}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.7rem;font-weight:700;color:#fff}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#fff3;border:2px solid rgba(255,255,255,.3);color:#fff;padding:10px 18px;border-radius:8px;font-size:1.3rem;cursor:pointer;transition:all .3s ease}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1) rotate(90deg)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]{padding:24px 48px;background:var(--bg-secondary);border-bottom:2px solid var(--border-color);flex-shrink:0}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;color:var(--text-secondary);font-size:1.1rem}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--accent-primary);font-weight:600}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   .flow-stats[_ngcontent-%COMP%]{display:flex;gap:20px;flex-wrap:wrap}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-info[_ngcontent-%COMP%]   .flow-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{padding:12px 20px;background:var(--bg-primary);border:2px solid var(--accent-primary);border-radius:8px;font-size:1.1rem;font-weight:600;color:var(--text-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]{flex:1;padding:48px 60px;overflow-y:auto;background:var(--bg-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d;border-radius:6px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:6px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]{min-height:100%;position:relative}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:20px;padding:24px;margin-bottom:32px;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px;transition:all .3s ease;position:relative}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]:hover{transform:translate(8px);box-shadow:0 4px 16px var(--shadow);border-color:var(--accent-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-start[_ngcontent-%COMP%]{border-color:#10b981;background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(16,185,129,.1) 100%)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-start[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-story[_ngcontent-%COMP%]{border-color:#3b82f6;background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(59,130,246,.1) 100%)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-story[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-choice[_ngcontent-%COMP%]{border-color:#f59e0b;background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(245,158,11,.1) 100%)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-choice[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-current[_ngcontent-%COMP%]{border-color:var(--accent-primary);background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(139,92,246,.2) 100%);box-shadow:0 0 20px #8b5cf64d;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node.node-current[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{background:var(--gradient-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;flex-shrink:0;box-shadow:0 4px 12px var(--shadow)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]{flex:1}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin-bottom:6px;line-height:1.4}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-level[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);margin-bottom:8px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px solid var(--border-color)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]{padding:8px 12px;margin-bottom:8px;background:var(--bg-primary);border-left:3px solid var(--accent-primary);border-radius:6px;font-size:.9rem;color:var(--text-secondary);transition:all .2s ease}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;transform:translate(4px)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .node-content[_ngcontent-%COMP%]   .node-choices[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]:last-child{margin-bottom:0}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .flow-connector[_ngcontent-%COMP%]{position:absolute;left:40px;bottom:-24px;width:2px;height:24px;background:var(--accent-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-nodes[_ngcontent-%COMP%]   .flow-node[_ngcontent-%COMP%]   .flow-connector[_ngcontent-%COMP%]:after{content:"\\25bc";position:absolute;bottom:-8px;left:50%;transform:translate(-50%);font-size:.6rem;color:var(--accent-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]{margin-top:32px;padding:20px;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:1.1rem;color:var(--text-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:var(--bg-primary);border-radius:8px;font-size:.9rem;color:var(--text-primary)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1rem}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.start[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.story[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.choice[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.story-flow-overlay[_ngcontent-%COMP%]   .story-flow-panel[_ngcontent-%COMP%]   .flow-canvas[_ngcontent-%COMP%]   .flow-legend[_ngcontent-%COMP%]   .legend-items[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-icon.current[_ngcontent-%COMP%]{background:var(--gradient-primary)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_pulse{0%,to{box-shadow:0 0 20px #8b5cf64d}50%{box-shadow:0 0 30px #8b5cf699}}.choice-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin:20px 0}@media (max-width: 768px){.choice-container[_ngcontent-%COMP%]{gap:14px;margin:24px 0}}@media (max-width: 480px){.choice-container[_ngcontent-%COMP%]{gap:16px}}.choice-item[_ngcontent-%COMP%]{display:flex;align-items:stretch;gap:8px}@media (max-width: 768px){.choice-item[_ngcontent-%COMP%]{gap:10px}}.choice-button[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:12px;padding:16px 20px;background:#8b45ff1a;border:2px solid rgba(139,69,255,.3);border-radius:12px;transition:all .3s ease;cursor:pointer;text-align:left;min-width:0}.choice-button[_ngcontent-%COMP%]   .choice-number[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:#8b45ff33;border-radius:50%;font-weight:700;color:#8b45ff;font-size:14px;flex-shrink:0}.choice-button[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%]{flex:1;color:var(--text-color);font-size:15px;line-height:1.5;overflow:hidden;text-overflow:ellipsis}.choice-button[_ngcontent-%COMP%]:hover{background:#8b45ff33;border-color:#8b45ff80;transform:translate(8px);box-shadow:0 4px 12px #8b45ff33}.choice-button[_ngcontent-%COMP%]:active{transform:translate(8px) scale(.98)}@media (max-width: 768px){.choice-button[_ngcontent-%COMP%]{min-height:56px;padding:18px 20px;gap:14px}.choice-button[_ngcontent-%COMP%]   .choice-number[_ngcontent-%COMP%]{width:36px;height:36px;font-size:16px}.choice-button[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%]{font-size:1.05rem;line-height:1.6}.choice-button[_ngcontent-%COMP%]:hover{transform:translate(4px)}}@media (max-width: 480px){.choice-button[_ngcontent-%COMP%]{min-height:60px;padding:20px 18px}.choice-button[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%]{font-size:1.1rem}}.link-scenario-btn[_ngcontent-%COMP%]{padding:0;background:transparent;border:2px solid rgba(139,69,255,.5);border-radius:8px;color:#8b45ff;cursor:pointer;transition:all .2s ease;font-size:16px;flex-shrink:0;width:40px;min-width:40px;max-width:40px;display:flex;align-items:center;justify-content:center}.link-scenario-btn[_ngcontent-%COMP%]:hover{background:#8b45ff4d;border-color:#8b45ffb3;transform:scale(1.15);box-shadow:0 2px 8px #8b45ff4d}.link-scenario-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.scenario-link-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:99998;animation:_ngcontent-%COMP%_fadeIn .3s ease}.scenario-link-panel[_ngcontent-%COMP%]{background:#fff;border:2px solid #ced4da;border-radius:16px;padding:24px;width:90%;max-width:1200px;max-height:80vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 4px 20px #0000001a;position:relative}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid #e9ecef;cursor:move}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%]{color:#6c757d;font-size:18px;-webkit-user-select:none;user-select:none}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#212529;font-size:20px;font-weight:700;margin:0;display:flex;align-items:center;gap:8px}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{padding:8px 16px;background:#f8f9fa;border:1px solid #dee2e6;border-radius:8px;color:#212529;cursor:pointer;transition:all .2s ease;font-size:18px;line-height:1}.scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#e9ecef;transform:scale(1.05)}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]{margin-bottom:20px;padding:16px;background:#f8f9fa;border-radius:8px;border-left:4px solid #0d6efd}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#212529;margin:0 0 8px;font-size:15px}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0d6efd;font-weight:700}.scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:13px;opacity:.8;color:#6c757d}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#8b45ff1a;border-radius:4px}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8b45ff4d;border-radius:4px}.scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8b45ff80}.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:16px;margin-bottom:20px;opacity:.7}.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]{padding:12px 24px;background:#0d6efd;border:2px solid #0d6efd;border-radius:8px;color:#fff;font-size:15px;cursor:pointer;transition:all .2s ease}.scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover{background:#0b5ed7;border-color:#0b5ed7;transform:translateY(-2px);box-shadow:0 4px 12px #0d6efd4d}.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid rgba(139,69,255,.2);cursor:move}.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-color);font-size:20px;font-weight:700;margin:0;display:flex;align-items:center;gap:8px}.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{padding:8px 16px;background:#8b45ff33;border:1px solid rgba(139,69,255,.3);border-radius:8px;color:var(--text-color);cursor:pointer;transition:all .2s ease}.scenario-link-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#8b45ff4d;transform:scale(1.05)}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#8b45ff1a;border-radius:4px}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8b45ff4d;border-radius:4px}.scenario-link-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8b45ff80}.flow-scenario-link-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);z-index:2000;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}.flow-scenario-link-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:24px;width:90%;max-width:1000px;max-height:85vh;padding:32px;box-shadow:0 20px 60px #667eea66,0 0 0 1px #fff3;display:flex;flex-direction:column;gap:24px;position:relative;overflow:hidden}.flow-scenario-link-panel[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);animation:_ngcontent-%COMP%_headerGlow 8s ease-in-out infinite;pointer-events:none}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:20px;border-bottom:2px solid rgba(255,255,255,.2);cursor:move;position:relative;z-index:1}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%]{font-size:20px;opacity:.5;color:#fff}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-weight:800;margin:0;text-shadow:0 2px 8px rgba(0,0,0,.2)}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:12px;color:#fff;width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1)}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ef444440;border-color:#ef444466;transform:scale(1.1) rotate(90deg)}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;padding:20px;position:relative;z-index:1}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:16px;padding:16px;background:#ffffff1a;border-radius:12px;border:1px solid rgba(255,255,255,.2)}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]   .node-icon-large[_ngcontent-%COMP%]{font-size:48px;line-height:1}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]   .node-details[_ngcontent-%COMP%]{flex:1}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]   .node-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-size:20px;font-weight:700;margin:0 0 8px;text-shadow:0 2px 4px rgba(0,0,0,.2)}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .node-info-card[_ngcontent-%COMP%]   .node-details[_ngcontent-%COMP%]   .node-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:#fff3;border-radius:12px;color:#fff;font-size:12px;font-weight:600;text-transform:uppercase;margin:0}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .choice-info[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;margin-bottom:12px;padding:12px;background:#ffffff14;border-radius:8px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .choice-info[_ngcontent-%COMP%]   .choice-label[_ngcontent-%COMP%]{color:#fffc;font-size:13px;font-weight:600}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .choice-info[_ngcontent-%COMP%]   .choice-value[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:700;font-family:monospace}.flow-scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{color:#ffffffe6;font-size:14px;margin:0;line-height:1.6}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;position:relative;z-index:1}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:5px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:5px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#fff6}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:20px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);border:2px solid transparent}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 32px #0003;border-color:#667eea80}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card.linked[_ngcontent-%COMP%]{border-color:#10b981;background:linear-gradient(135deg,#f0fdf4,#ecfdf5)}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card.linked[_ngcontent-%COMP%]   .linked-badge[_ngcontent-%COMP%]{display:inline-block}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;gap:8px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{flex:1;font-size:16px;font-weight:700;color:#1a202c;margin:0;line-height:1.4}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%]{padding:4px 10px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:12px;font-size:11px;font-weight:600;white-space:nowrap}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .linked-badge[_ngcontent-%COMP%]{display:none;padding:4px 10px;background:#10b981;color:#fff;border-radius:12px;font-size:11px;font-weight:700}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{font-size:13px;color:#4a5568;line-height:1.6;margin-bottom:12px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:8px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{font-size:12px;color:#718096}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap}.flow-scenario-link-panel[_ngcontent-%COMP%]   .scenario-grid[_ngcontent-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:3px 8px;background:#edf2f7;color:#4a5568;border-radius:6px;font-size:11px;font-weight:600}.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;background:#ffffff1a;border-radius:16px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:16px;margin-bottom:20px}.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#667eea;border:none;border-radius:12px;font-weight:700;font-size:14px;cursor:pointer;transition:all .3s}.flow-scenario-link-panel[_ngcontent-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0003}.scenario-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}.scenario-card[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #dee2e6;border-radius:12px;padding:16px;cursor:pointer;transition:all .3s ease;position:relative}.scenario-card[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#adb5bd;transform:translateY(-4px);box-shadow:0 6px 20px #0000001a}.scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}.scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#212529;font-size:16px;font-weight:700;margin:0}.scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%]{display:inline-block;align-self:flex-start;padding:4px 8px;background:#0d6efd;border-radius:6px;font-size:12px;color:#fff}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{color:#495057;font-size:13px;line-height:1.5;margin-bottom:12px;opacity:.8;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{color:#6c757d;font-size:12px;opacity:.7}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:4px 8px;background:#e9ecef;border-radius:4px;font-size:11px;color:#495057}.scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%]{color:#212529;font-size:16px;font-weight:700;margin:0 0 8px;display:flex;align-items:center;gap:8px}.scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;background:#0d6efd;border-radius:6px;font-size:12px;color:#fff;margin-bottom:8px}.scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{color:#495057;font-size:13px;line-height:1.5;margin-bottom:12px;opacity:.8;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:12px;color:#6c757d;opacity:.7}.scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;gap:4px}.scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0d6efd}.scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-top:12px}.scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:4px 8px;background:#e9ecef;border-radius:4px;font-size:11px;color:#495057}.scenario-card[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;font-size:20px;opacity:0;transition:opacity .2s ease}.scenario-card[_ngcontent-%COMP%]:hover   .select-icon[_ngcontent-%COMP%]{opacity:1}body.dark-theme[_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-overlay[_ngcontent-%COMP%]{background:#000000d9!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]{background:#1a1a2e!important;border-color:#2d2d44!important;box-shadow:0 4px 20px #00000080!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]{border-bottom-color:#2d2d44!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f5f5f7!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#f5f5f7!important;background:#2d2d44!important;border-color:#3d3d54!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#3d3d54!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]{background:#2d2d44!important;border-left-color:#0a84ff!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f5f5f7!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0a84ff!important}body.dark-theme[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-link-panel[_ngcontent-%COMP%]   .link-info[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]{background:#2d2d44!important;border-color:#3d3d54!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]:hover{background:#3d3d54!important;border-color:#4d4d64!important;box-shadow:0 6px 20px #0000004d!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#f5f5f7!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-header[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%]{background:#0a84ff!important;color:#fff!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{color:#d1d1d6!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-body[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:#3d3d54!important;color:#d1d1d6!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-title[_ngcontent-%COMP%]{color:#f5f5f7!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-genre[_ngcontent-%COMP%]{background:#0a84ff!important;color:#fff!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-description[_ngcontent-%COMP%]{color:#d1d1d6!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0a84ff!important}body.dark-theme[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .scenario-card[_ngcontent-%COMP%]   .scenario-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:#3d3d54!important;color:#d1d1d6!important}body.dark-theme[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#8e8e93!important}body.dark-theme[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], body.dark-mode[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], body.dark-mode   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]{color:#fff!important;background:#0a84ff!important;border-color:#0a84ff!important}body.dark-theme[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, body.dark-theme   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, body.dark-mode[_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, body.dark-mode   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, [data-theme=dark][_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .no-scenarios[_ngcontent-%COMP%]   .create-scenario-btn[_ngcontent-%COMP%]:hover{background:#0040dd!important;border-color:#0040dd!important}  .custom-confirm-dialog .mat-mdc-dialog-container{padding:0!important;border-radius:16px!important;box-shadow:0 20px 60px #0000004d!important;overflow:hidden!important}  .custom-confirm-dialog .mdc-dialog__surface{border-radius:16px!important;overflow:hidden!important}  .cdk-overlay-backdrop.cdk-overlay-backdrop-showing{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:#00000080}.advanced-story-flow-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;width:100vw;height:100vh;background:#000000d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:10000;display:block;animation:_ngcontent-%COMP%_fadeIn .3s ease}.advanced-flow-panel[_ngcontent-%COMP%]{width:100vw!important;max-width:100vw!important;height:100vh!important;max-height:100vh!important;background:var(--bg-primary);border-radius:0!important;box-shadow:none;display:flex;flex-direction:column;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .3s ease;position:relative}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:48px}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:24px;opacity:.6}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin:0 0 12px;color:var(--text-primary)}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0 0 32px;line-height:1.6;font-size:16px}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border-radius:10px;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s;border:none}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button.primary-btn[_ngcontent-%COMP%]{background:#667eea;color:#fff}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button.primary-btn[_ngcontent-%COMP%]:hover{background:#5568d3;transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button.secondary-btn[_ngcontent-%COMP%]{background:#fff;color:#667eea;border:2px solid #667eea}.advanced-flow-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   button.secondary-btn[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff}.advanced-flow-header[_ngcontent-%COMP%]{padding:20px 48px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 12px #00000026;flex-shrink:0}.advanced-flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:700;display:flex;align-items:center;gap:12px}.advanced-flow-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.95rem;opacity:.9;margin-top:4px}.advanced-flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;font-size:1.6rem;width:44px;height:44px;border-radius:50%;cursor:pointer;transition:all .2s}.advanced-flow-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:rotate(90deg) scale(1.1)}.flow-toolbar[_ngcontent-%COMP%]{padding:24px 60px;background:var(--bg-secondary);border-bottom:1px solid var(--border-color);display:flex;gap:20px;flex-wrap:wrap;align-items:center;flex-shrink:0}.flow-toolbar[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.flow-toolbar[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid var(--border-color);padding-right:20px}.flow-toolbar[_ngcontent-%COMP%]   .toolbar-section.toolbar-hint[_ngcontent-%COMP%]{margin-left:auto;border:none;padding-right:0}.flow-toolbar[_ngcontent-%COMP%]   .toolbar-section.toolbar-hint[_ngcontent-%COMP%]   .hint-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);font-weight:500;padding:8px 12px;background:#fbbf241a;border-radius:6px;border:1px dashed rgba(251,191,36,.3)}.flow-toolbar[_ngcontent-%COMP%]   .tool-btn[_ngcontent-%COMP%], .flow-toolbar[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]{padding:12px 20px;border:1px solid var(--border-color);background:var(--bg-primary);color:var(--text-primary);border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s;white-space:nowrap}.flow-toolbar[_ngcontent-%COMP%]   .tool-btn[_ngcontent-%COMP%]:hover, .flow-toolbar[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary);transform:translateY(-1px)}.flow-toolbar[_ngcontent-%COMP%]   .tool-btn.active[_ngcontent-%COMP%], .flow-toolbar[_ngcontent-%COMP%]   .filter-btn.active[_ngcontent-%COMP%]{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary)}.flow-toolbar[_ngcontent-%COMP%]   .layout-selector[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid var(--border-color);background:var(--bg-primary);color:var(--text-primary);border-radius:8px;font-size:14px;cursor:pointer;min-width:120px}.flow-toolbar[_ngcontent-%COMP%]   .layout-selector[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-primary)}.flow-canvas-container[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden;background:linear-gradient(180deg,var(--bg-primary) 0%,var(--bg-secondary) 100%);cursor:grab;-webkit-user-select:none;user-select:none}.flow-canvas-container[_ngcontent-%COMP%]:active{cursor:grabbing}.flow-svg-canvas[_ngcontent-%COMP%]{width:100%;height:100%}.flow-svg-canvas[_ngcontent-%COMP%]   .connection-path[_ngcontent-%COMP%]{fill:none;stroke:#cbd5e0;stroke-width:2;opacity:.6;transition:all .3s ease}.flow-svg-canvas[_ngcontent-%COMP%]   .connection-path.visited[_ngcontent-%COMP%]{stroke:#48bb78;stroke-width:3;opacity:.9}.flow-svg-canvas[_ngcontent-%COMP%]   .connection-path.current[_ngcontent-%COMP%]{stroke:#4299e1;stroke-width:4;opacity:1;animation:_ngcontent-%COMP%_pathPulse 2s infinite}.flow-svg-canvas[_ngcontent-%COMP%]   .connection-path[_ngcontent-%COMP%]:hover{stroke-width:4;opacity:1}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]:hover   .node-circle[_ngcontent-%COMP%]{filter:brightness(1.1);transform:scale(1.1)}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.selected[_ngcontent-%COMP%]   .node-selection-ring[_ngcontent-%COMP%]{stroke:#fbbf24;stroke-width:3;opacity:.8}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.dragging[_ngcontent-%COMP%]{cursor:move!important;opacity:.8}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.dragging[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%]{filter:drop-shadow(0 0 15px rgba(251,191,36,.6));transform:scale(1.15)}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.current[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%]{filter:drop-shadow(0 0 20px #4299e1);animation:_ngcontent-%COMP%_nodeGlow 2s infinite}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.current[_ngcontent-%COMP%]   .node-glow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_glowPulse 2s infinite}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.visited[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px rgba(72,187,120,.5))}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.battle[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%]{filter:drop-shadow(0 0 10px rgba(252,129,129,.6))}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node.ending[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%]{filter:drop-shadow(0 0 15px rgba(159,122,234,.8))}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .node-circle[_ngcontent-%COMP%], .flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .node-selection-ring[_ngcontent-%COMP%]{transition:all .3s ease}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;user-select:none}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .node-title[_ngcontent-%COMP%]{fill:var(--text-primary);pointer-events:none}.flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .badge-text[_ngcontent-%COMP%], .flow-svg-canvas[_ngcontent-%COMP%]   .story-node[_ngcontent-%COMP%]   .visit-count[_ngcontent-%COMP%]{fill:#fff;font-weight:600;pointer-events:none}.zoom-controls[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;display:flex;flex-direction:column;gap:8px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid var(--border-color);border-radius:12px;padding:12px;box-shadow:0 8px 24px #00000026;z-index:10}.zoom-controls[_ngcontent-%COMP%]   .zoom-btn[_ngcontent-%COMP%]{width:44px;height:44px;border:2px solid var(--border-color);border-radius:8px;background:#fff;color:var(--text-primary);font-size:18px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.zoom-controls[_ngcontent-%COMP%]   .zoom-btn[_ngcontent-%COMP%]:hover{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary);transform:scale(1.05)}.zoom-controls[_ngcontent-%COMP%]   .zoom-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.zoom-controls[_ngcontent-%COMP%]   .zoom-level[_ngcontent-%COMP%]{text-align:center;font-size:13px;font-weight:600;color:var(--text-secondary);padding:6px 0;border-top:1px solid var(--border-color);border-bottom:1px solid var(--border-color);margin:4px 0}.legend-compact[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:20px;display:flex;gap:16px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid var(--border-color);border-radius:12px;padding:12px 16px;box-shadow:0 8px 24px #00000026;z-index:10}.legend-compact[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;color:var(--text-secondary);font-weight:500}.legend-compact[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px}@media (max-width: 768px){.legend-compact[_ngcontent-%COMP%]{flex-direction:column;gap:8px;font-size:12px}.legend-compact[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{gap:4px}.legend-compact[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:16px}}.node-detail-panel[_ngcontent-%COMP%]{position:absolute;top:50%;right:24px;transform:translateY(-50%);width:350px;max-height:80vh;background:var(--bg-primary);border:2px solid var(--border-color);border-radius:16px;box-shadow:0 12px 40px #0003;overflow:hidden;animation:_ngcontent-%COMP%_slideInRight .3s ease}.node-detail-panel[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]{padding:20px;background:var(--accent-primary);color:#fff;display:flex;justify-content:space-between;align-items:center}.node-detail-panel[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:700}.node-detail-panel[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .detail-close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;font-size:20px;width:32px;height:32px;border-radius:50%;cursor:pointer;transition:all .2s}.node-detail-panel[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .detail-close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]{padding:20px;max-height:calc(80vh - 80px);overflow-y:auto}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:16px 0 8px;color:var(--text-primary)}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]{margin-bottom:16px}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;background:var(--bg-secondary);border-radius:20px;font-size:14px;font-weight:600}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]   .type-badge.battle[_ngcontent-%COMP%]{background:#fc818133;color:#c53030}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]   .type-badge.ending[_ngcontent-%COMP%]{background:#9f7aea33;color:#6b46c1}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-type[_ngcontent-%COMP%]   .type-badge.event[_ngcontent-%COMP%]{background:#f6ad5533;color:#dd6b20}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]{margin-bottom:20px}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;color:var(--text-secondary);line-height:1.6}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:8px 0;padding-left:20px}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:4px 0;color:var(--text-secondary)}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-stats[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-conditions[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-choices[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%], .node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .detail-battle[_ngcontent-%COMP%]   .more-indicator[_ngcontent-%COMP%]{color:var(--accent-primary);font-style:italic}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border-color)}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:var(--text-secondary)}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-weight:700;color:var(--accent-primary)}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]{padding:10px 12px;background:var(--bg-secondary);border-radius:8px;margin:8px 0;display:flex;align-items:center;gap:10px}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%]{font-size:18px}.node-detail-panel[_ngcontent-%COMP%]   .detail-body[_ngcontent-%COMP%]   .choice-preview[_ngcontent-%COMP%]   .choice-text[_ngcontent-%COMP%]{flex:1;color:var(--text-primary);font-size:14px}.stats-overlay[_ngcontent-%COMP%]{position:absolute;top:24px;right:24px;background:#fffffff2;border:2px solid var(--border-color);border-radius:16px;padding:24px;box-shadow:0 12px 40px #0003;min-width:320px;max-height:calc(100vh - 100px);overflow-y:auto;animation:_ngcontent-%COMP%_slideInRight .3s ease}.stats-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:20px;font-weight:700;color:var(--text-primary)}.stats-overlay[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:16px 0 12px;font-size:16px;font-weight:600;color:var(--text-primary)}.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]{margin-bottom:20px}.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:linear-gradient(135deg,#4299e11a,#4299e10d);border:2px solid #4299e1;border-radius:12px;animation:_ngcontent-%COMP%_nodeGlow 2s ease-in-out infinite}.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .location-icon[_ngcontent-%COMP%]{font-size:32px;flex-shrink:0}.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]{flex:1}.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);margin-bottom:4px}.stats-overlay[_ngcontent-%COMP%]   .current-location[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-path[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);font-family:monospace}.stats-overlay[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:20px}.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{text-align:center;padding:16px;background:var(--bg-primary);border-radius:12px;border:1px solid var(--border-color);transition:all .2s}.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:8px}.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--accent-primary);margin-bottom:4px}.stats-overlay[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:var(--bg-primary);border-radius:8px;border:1px solid var(--border-color);font-size:13px;transition:all .2s}.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]:hover{background:#4299e10d;border-color:#4299e1}.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-node[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);flex-shrink:0}.stats-overlay[_ngcontent-%COMP%]   .path-history[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-choice[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@keyframes _ngcontent-%COMP%_pathPulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_nodeGlow{0%,to{filter:drop-shadow(0 0 20px #4299e1)}50%{filter:drop-shadow(0 0 30px #4299e1)}}@keyframes _ngcontent-%COMP%_glowPulse{0%,to{opacity:.5;r:50}50%{opacity:.8;r:55}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(40px)}to{opacity:1;transform:translate(0)}}[data-theme=dark][_ngcontent-%COMP%]   .minimap[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%], [data-theme=dark][_ngcontent-%COMP%]   .stats-overlay[_ngcontent-%COMP%]{background:#1a202cf2}[data-theme=dark][_ngcontent-%COMP%]   .node-title[_ngcontent-%COMP%]{fill:#e2e8f0}.flow-side-panel[_ngcontent-%COMP%]{position:fixed;top:80px;right:24px;z-index:900;animation:_ngcontent-%COMP%_slideInRight .4s ease;pointer-events:all}.flow-side-panel[_ngcontent-%COMP%]   .panel-container[_ngcontent-%COMP%]{width:300px;background:#fff;border-radius:16px;box-shadow:0 10px 40px #00000026,0 0 0 1px #0000000d;overflow:hidden;display:flex;flex-direction:column;max-height:calc(100vh - 120px)}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px;position:relative;overflow:hidden;box-shadow:0 4px 16px #667eea40}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);animation:_ngcontent-%COMP%_headerGlow 8s ease-in-out infinite;pointer-events:none}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:11px;margin-bottom:12px;font-weight:600;position:relative;z-index:1}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;background:#ffffff26;padding:4px 10px;border-radius:12px;letter-spacing:.5px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]:before{content:"\\1f550";font-size:13px}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;background:#ffffff26;padding:4px 10px;border-radius:12px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]:before{content:"\\1f3af";font-size:13px}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:800;letter-spacing:-.5px;text-shadow:0 2px 8px rgba(0,0,0,.2);display:flex;align-items:center;gap:8px}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:6px}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%], .flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);color:#fff;width:36px;height:36px;border-radius:10px;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]:before, .flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .4s,height .4s}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]:hover, .flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#fff6;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]:hover:before, .flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover:before{width:100%;height:100%}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .expand-btn[_ngcontent-%COMP%]:active, .flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.flow-side-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ef444433;border-color:#ef444466}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]{display:flex;gap:8px;padding:12px 16px 0;background:transparent;position:relative;z-index:1}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]{padding:0;background:#fff;border-top:1px solid rgba(0,0,0,.08);box-shadow:0 -4px 16px #00000014;gap:0}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{flex:1;padding:14px 20px;background:#fff;border-radius:0;color:#718096;border:none;border-top:3px solid transparent}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:before{display:none}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{font-size:24px;display:block;margin-bottom:4px}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{font-size:11px;display:block;letter-spacing:.3px}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:not(.active){background:#f7fafc;color:#4a5568}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:not(.active)   .tab-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{background:#fff;color:#667eea;border-top-color:#667eea;box-shadow:none}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation.bottom[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{transform:scale(1.2)}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:6px;padding:10px 16px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid transparent;border-radius:12px 12px 0 0;color:#ffffffb3;font-size:14px;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{font-size:18px;transition:transform .3s}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.3px}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:0;left:0;right:0;height:3px;background:#fff;transform:scaleX(0);transition:transform .3s cubic-bezier(.4,0,.2,1)}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:not(.active){background:#ffffff40;color:#fff}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:not(.active)   .tab-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{background:#fff;color:#667eea;border-color:#ffffff4d;box-shadow:0 -4px 12px #0000001a}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]:before{transform:scaleX(1)}.flow-side-panel[_ngcontent-%COMP%]   .tab-navigation[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{transform:scale(1.15)}.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden;flex:1;display:flex}.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{width:100%;flex-shrink:0;transition:transform .4s cubic-bezier(.4,0,.2,1);overflow-y:auto;overflow-x:hidden}.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[_ngcontent-%COMP%]   .tab-content.character-tab[_ngcontent-%COMP%], .flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[_ngcontent-%COMP%]   .tab-content.organization-tab[_ngcontent-%COMP%], .flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[_ngcontent-%COMP%]   .tab-content.map-tab[_ngcontent-%COMP%], .flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=character][_ngcontent-%COMP%]   .character-tab[_ngcontent-%COMP%]{transform:translate(0)}.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=character][_ngcontent-%COMP%]   .organization-tab[_ngcontent-%COMP%], .flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=character][_ngcontent-%COMP%]   .map-tab[_ngcontent-%COMP%]{transform:translate(100%)}.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=organization][_ngcontent-%COMP%]   .character-tab[_ngcontent-%COMP%], .flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=organization][_ngcontent-%COMP%]   .organization-tab[_ngcontent-%COMP%]{transform:translate(-100%)}.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=organization][_ngcontent-%COMP%]   .map-tab[_ngcontent-%COMP%]{transform:translate(100%)}.flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=map][_ngcontent-%COMP%]   .character-tab[_ngcontent-%COMP%], .flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=map][_ngcontent-%COMP%]   .organization-tab[_ngcontent-%COMP%], .flow-side-panel[_ngcontent-%COMP%]   .panel-content-slider[data-tab=map][_ngcontent-%COMP%]   .map-tab[_ngcontent-%COMP%]{transform:translate(-200%)}@keyframes _ngcontent-%COMP%_headerGlow{0%,to{transform:translate(0) rotate(0);opacity:.5}50%{transform:translate(-10%,-10%) rotate(180deg);opacity:.8}}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]{padding:20px;background:#fff;margin:0;height:100%;overflow-y:auto}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #667eea4d;flex-shrink:0}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-icon[_ngcontent-%COMP%]{font-size:32px}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .character-basic[_ngcontent-%COMP%]{flex:1}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .character-basic[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-size:18px;font-weight:800;color:#1a202c;margin-bottom:2px;letter-spacing:-.3px}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-header[_ngcontent-%COMP%]   .character-basic[_ngcontent-%COMP%]   .character-level[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#667eea;background:#667eea1a;padding:2px 10px;border-radius:12px;display:inline-block}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row.inline[_ngcontent-%COMP%]{display:flex;gap:12px}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row.inline[_ngcontent-%COMP%]   .inline-stat[_ngcontent-%COMP%]{flex:1;background:#fff;padding:10px;border-radius:10px;display:flex;align-items:center;gap:6px;box-shadow:0 2px 6px #0000000d}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row.inline[_ngcontent-%COMP%]   .inline-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:18px}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row.inline[_ngcontent-%COMP%]   .inline-stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#2d3748}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row.special[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd70033,#ffa50033);padding:10px;border-radius:10px;border:2px solid rgba(255,215,0,.3)}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row.special[_ngcontent-%COMP%]   .cultivation-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,orange);color:#1a202c;padding:4px 12px;border-radius:8px;font-size:13px;font-weight:800;box-shadow:0 2px 8px #ffd70066}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;min-width:60px}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:18px}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]   .stat-icon.hp[_ngcontent-%COMP%]{filter:drop-shadow(0 0 4px rgba(239,68,68,.3))}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]   .stat-icon.mp[_ngcontent-%COMP%]{filter:drop-shadow(0 0 4px rgba(59,130,246,.3))}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]   .stat-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#4a5568}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]{height:10px;background:#0000001a;border-radius:20px;overflow:hidden;position:relative;box-shadow:inset 0 2px 4px #0000001a}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]   .stat-bar.hp[_ngcontent-%COMP%]   .stat-bar-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ef4444,#dc2626);box-shadow:0 0 8px #ef444499}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]   .stat-bar.mp[_ngcontent-%COMP%]   .stat-bar-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3b82f6,#2563eb);box-shadow:0 0 8px #3b82f699}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill[_ngcontent-%COMP%]{height:100%;transition:width .5s cubic-bezier(.4,0,.2,1);border-radius:20px;position:relative}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;right:0;height:50%;background:linear-gradient(to bottom,rgba(255,255,255,.3),transparent);border-radius:20px 20px 0 0}.flow-side-panel[_ngcontent-%COMP%]   .character-info-card[_ngcontent-%COMP%]   .character-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-container[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#4a5568;text-align:right}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]{padding:20px;background:#fff;height:100%;overflow-y:auto}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);padding:20px;border-radius:16px;color:#fff;margin-bottom:20px;box-shadow:0 4px 16px #667eea4d}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-name-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-name-section[_ngcontent-%COMP%]   .org-name[_ngcontent-%COMP%]{font-size:20px;font-weight:800;margin:0}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-name-section[_ngcontent-%COMP%]   .org-level[_ngcontent-%COMP%]{background:#fff3;padding:4px 12px;border-radius:12px;font-size:13px;font-weight:700}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-stats[_ngcontent-%COMP%]{display:flex;gap:20px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-stats[_ngcontent-%COMP%]   .org-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-stats[_ngcontent-%COMP%]   .org-stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:11px;opacity:.8}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .organization-header[_ngcontent-%COMP%]   .org-stats[_ngcontent-%COMP%]   .org-stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]{background:#f8fafc;border:2px solid #e2e8f0;border-radius:16px;padding:16px;transition:all .3s;cursor:pointer}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 4px 16px #667eea33;transform:translateY(-2px)}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#eef2ff;box-shadow:0 4px 20px #667eea4d}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-avatar[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;font-size:28px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]{flex:1}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#1a202c}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[_ngcontent-%COMP%]{padding:2px 8px;border-radius:8px;font-size:11px;font-weight:700}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[data-role=leader][_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,orange);color:#1a202c}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[data-role=vice_leader][_ngcontent-%COMP%]{background:linear-gradient(135deg,silver,#a8a8a8);color:#fff}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[data-role=elder][_ngcontent-%COMP%]{background:linear-gradient(135deg,#cd7f32,#b87333);color:#fff}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[data-role=captain][_ngcontent-%COMP%]{background:#667eea;color:#fff}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[data-role=member][_ngcontent-%COMP%], .flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name-row[_ngcontent-%COMP%]   .member-role[data-role=recruit][_ngcontent-%COMP%]{background:#cbd5e0;color:#2d3748}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-level[_ngcontent-%COMP%]{font-size:13px;color:#718096;font-weight:600}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-status[_ngcontent-%COMP%]{padding:6px 12px;border-radius:12px;font-size:11px;font-weight:700}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-status[data-status=active][_ngcontent-%COMP%]{background:#d4edda;color:#155724}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-status[data-status=resting][_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-status[data-status=injured][_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .member-status[data-status=on_mission][_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#4a5568;width:40px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]   .mini-stat-bar[_ngcontent-%COMP%]{flex:1;height:8px;background:#0000001a;border-radius:10px;overflow:hidden}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]   .mini-stat-bar.hp[_ngcontent-%COMP%]   .mini-bar-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ef4444,#dc2626)}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]   .mini-stat-bar.mp[_ngcontent-%COMP%]   .mini-bar-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3b82f6,#2563eb)}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]   .mini-stat-bar[_ngcontent-%COMP%]   .mini-bar-fill[_ngcontent-%COMP%]{height:100%;transition:width .4s}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-bars[_ngcontent-%COMP%]   .stat-bar-row[_ngcontent-%COMP%]   .bar-value[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#4a5568;min-width:60px;text-align:right}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;margin-bottom:12px;padding:12px;background:#fff;border-radius:12px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:12px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{font-size:14px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-text[_ngcontent-%COMP%]{color:#2d3748;font-weight:600}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .loyalty-bar[_ngcontent-%COMP%]{flex:1;height:6px;background:#0000001a;border-radius:10px;overflow:hidden;margin-left:8px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .loyalty-bar[_ngcontent-%COMP%]   .loyalty-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#f59e0b,#ef4444);transition:width .4s}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-skills[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:8px}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-skills[_ngcontent-%COMP%]   .skill-tag[_ngcontent-%COMP%]{padding:4px 10px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:8px;font-size:11px;font-weight:700}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-description[_ngcontent-%COMP%]{padding:8px;background:#fff;border-radius:8px;border-left:3px solid #667eea}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#4a5568;font-style:italic}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .no-members[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#718096}.flow-side-panel[_ngcontent-%COMP%]   .organization-container[_ngcontent-%COMP%]   .no-members[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:14px}.flow-side-panel[_ngcontent-%COMP%]   .no-organization[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;color:#718096}.flow-side-panel[_ngcontent-%COMP%]   .no-organization[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:14px}.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#4299e10d;border-bottom:2px solid rgba(66,153,225,.2)}.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:36px;flex-shrink:0}.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]{flex:1;min-width:0}.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-title[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:#1a202c;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-bottom:4px}.flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-path[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:600}.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]{flex:1;min-height:280px;max-height:360px;background:#f8fafc;position:relative;overflow:hidden;border-bottom:1px solid rgba(0,0,0,.05)}.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]   .mini-connections[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:all .3s}.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]   .mini-nodes[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{transition:all .3s}.flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]   .mini-nodes[_ngcontent-%COMP%]   circle.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_phonePulse 2s ease-in-out infinite}.flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:16px;background:#fff;border-bottom:1px solid rgba(0,0,0,.05)}.flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px}.flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:22px}.flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-text[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#2d3748}.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]{padding:16px;background:#fff}.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .recent-title[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#718096;margin-bottom:10px;text-transform:uppercase;letter-spacing:.5px}.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dots[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dots[_ngcontent-%COMP%]   .path-dot[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:#edf2f7;font-size:16px;transition:all .2s;cursor:pointer;border:2px solid transparent}.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dots[_ngcontent-%COMP%]   .path-dot[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.1);box-shadow:0 4px 12px #00000026;border-color:#4299e1}.flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dots[_ngcontent-%COMP%]   .path-dot.current[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4299e1,#3182ce);box-shadow:0 6px 16px #4299e166;transform:translateY(-2px) scale(1.15);border-color:#2b6cb0}.flow-panel-toggle-btn[_ngcontent-%COMP%]{position:fixed;top:80px;right:24px;z-index:899;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:16px;padding:14px 18px;cursor:pointer;box-shadow:0 8px 24px #667eea66,0 0 0 1px #fff3;display:flex;flex-direction:column;align-items:center;gap:6px;transition:all .3s cubic-bezier(.4,0,.2,1);animation:_ngcontent-%COMP%_slideInRight .4s ease,_ngcontent-%COMP%_pulseGlow 3s ease-in-out infinite;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);position:relative;overflow:hidden}.flow-panel-toggle-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.3) 50%,transparent 70%);animation:_ngcontent-%COMP%_shimmer 3s infinite}.flow-panel-toggle-btn[_ngcontent-%COMP%]:hover{transform:translate(-6px) translateY(-2px) scale(1.08);box-shadow:0 12px 32px #667eea80,0 0 0 1px #fff6}.flow-panel-toggle-btn[_ngcontent-%COMP%]:hover   .toggle-icon[_ngcontent-%COMP%]{transform:scale(1.2) rotate(10deg)}.flow-panel-toggle-btn[_ngcontent-%COMP%]:active{transform:translate(-6px) scale(1.02)}.flow-panel-toggle-btn[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{font-size:28px;line-height:1;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;z-index:1}.flow-panel-toggle-btn[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]{font-size:12px;font-weight:800;letter-spacing:1px;text-transform:uppercase;position:relative;z-index:1}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%) translateY(-100%) rotate(0)}to{transform:translate(100%) translateY(100%) rotate(0)}}@keyframes _ngcontent-%COMP%_pulseGlow{0%,to{box-shadow:0 8px 24px #667eea66,0 0 0 1px #fff3}50%{box-shadow:0 8px 32px #667eea99,0 0 0 1px #ffffff4d,0 0 20px #667eea4d}}@keyframes _ngcontent-%COMP%_phonePulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}}@media (max-width: 1400px){.flow-side-panel[_ngcontent-%COMP%]{display:none}}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .panel-container[_ngcontent-%COMP%]{background:#1a202c;box-shadow:0 10px 40px #0006,0 0 0 1px #ffffff1a}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]{background:#4299e11a;border-bottom-color:#4299e14d}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-title[_ngcontent-%COMP%]{color:#f7fafc}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]   .status-path[_ngcontent-%COMP%]{color:#a0aec0}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .mini-flow-map[_ngcontent-%COMP%]{background:#2d3748;border-bottom-color:#ffffff0d}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]{background:#1a202c;border-bottom-color:#ffffff0d}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .quick-stats[_ngcontent-%COMP%]   .stat-text[_ngcontent-%COMP%]{color:#e2e8f0}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]{background:#1a202c}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .recent-title[_ngcontent-%COMP%]{color:#a0aec0}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dot[_ngcontent-%COMP%]{background:#2d3748;border-color:transparent}[data-theme=dark][_ngcontent-%COMP%]   .flow-side-panel[_ngcontent-%COMP%]   .recent-path[_ngcontent-%COMP%]   .path-dot[_ngcontent-%COMP%]:hover{border-color:#4299e1}[data-theme=dark][_ngcontent-%COMP%]   .flow-panel-toggle-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);box-shadow:0 8px 24px #667eea80,0 0 0 1px #fff3,0 0 30px #667eea4d}[data-theme=dark][_ngcontent-%COMP%]   .flow-panel-toggle-btn[_ngcontent-%COMP%]:hover{box-shadow:0 12px 32px #667eea99,0 0 0 1px #ffffff4d,0 0 40px #667eea66}.wuxia-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:2000;display:flex;justify-content:center;align-items:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}.wuxia-panel[_ngcontent-%COMP%]{width:100vw!important;max-width:100vw!important;height:100vh!important;max-height:100vh!important;background:var(--bg-primary);border-radius:0!important;box-shadow:none;overflow:hidden;display:flex;flex-direction:column;position:relative}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-header[_ngcontent-%COMP%]{padding:20px 48px;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid rgba(255,255,255,.1);display:flex;justify-content:space-between;align-items:center;cursor:move;position:relative;z-index:1;box-shadow:0 4px 20px #00000026;flex-shrink:0}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fff;margin:0;text-shadow:0 2px 8px rgba(0,0,0,.3);letter-spacing:1px;display:flex;align-items:center;gap:12px}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:44px;height:44px;background:#ffffff26;border:1px solid rgba(255,255,255,.2);border-radius:50%;color:#fff;font-size:1.5rem;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:rotate(90deg) scale(1.1)}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]{display:flex;padding:20px 40px;gap:12px;background:var(--bg-secondary);border-bottom:1px solid var(--border-color);overflow-x:auto;position:relative;z-index:1}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000001a;border-radius:3px}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#667eea80;border-radius:3px}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#667eeab3}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{padding:12px 24px;background:transparent;border:2px solid transparent;border-radius:12px;color:var(--text-secondary);font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;white-space:nowrap;display:flex;align-items:center;gap:8px}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover{background:#667eea1a;color:var(--text-primary);border-color:#667eea33}.wuxia-panel[_ngcontent-%COMP%]   .wuxia-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-color:transparent;color:#fff;box-shadow:0 4px 12px #667eea4d}.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:40px;position:relative;z-index:1;background:var(--bg-primary)}.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary);border-radius:4px}.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#667eea80;border-radius:4px}.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#667eeab3}.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem;color:var(--text-primary);margin:0 0 32px;text-align:center;font-weight:700;position:relative;padding-bottom:16px}.wuxia-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:80px;height:3px;background:linear-gradient(90deg,transparent,#667eea,transparent);border-radius:2px}.cultivation-section[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:16px;padding:28px;margin-bottom:24px;box-shadow:0 4px 12px #00000014}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-header[_ngcontent-%COMP%]   .gauge-label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:var(--text-primary);display:flex;align-items:center;gap:8px}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-header[_ngcontent-%COMP%]   .gauge-label[_ngcontent-%COMP%]:before{content:"\\1f525";font-size:1.4rem}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-header[_ngcontent-%COMP%]   .gauge-value[_ngcontent-%COMP%]{font-size:1.3rem;color:#667eea;font-weight:700;font-variant-numeric:tabular-nums}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-bar[_ngcontent-%COMP%]{height:32px;background:#667eea1a;border-radius:16px;overflow:hidden;border:1px solid rgba(102,126,234,.2);position:relative}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-bar[_ngcontent-%COMP%]   .gauge-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);border-radius:16px;box-shadow:inset 0 1px #ffffff4d,0 0 20px #667eea80;transition:width .5s ease;position:relative}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-bar[_ngcontent-%COMP%]   .gauge-fill[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.3) 50%,transparent 100%);animation:_ngcontent-%COMP%_shimmer 2s infinite}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:20px}.cultivation-section[_ngcontent-%COMP%]   .internal-power-gauge[_ngcontent-%COMP%]   .gauge-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;padding:8px 12px;background:var(--bg-tertiary);border-radius:8px;text-align:center;border:1px solid var(--border-color)}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:16px;padding:28px;margin-bottom:24px;box-shadow:0 4px 12px #00000014}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:20px;background:linear-gradient(135deg,#667eea1a,#764ba21a);border:2px solid rgba(102,126,234,.3);border-radius:12px;margin-bottom:20px;transition:all .3s ease}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #667eea33}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]   .realm-icon[_ngcontent-%COMP%]{font-size:3rem;filter:drop-shadow(0 4px 8px rgba(102,126,234,.5))}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]   .realm-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]   .realm-info[_ngcontent-%COMP%]   .realm-name[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--text-primary);background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-badge[_ngcontent-%COMP%]   .realm-info[_ngcontent-%COMP%]   .realm-subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-secondary);font-weight:500}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1rem;font-weight:600}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:24px;background:#667eea1a;border-radius:12px;overflow:hidden;border:1px solid rgba(102,126,234,.2);position:relative}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);border-radius:12px;transition:width .5s ease;box-shadow:inset 0 1px #ffffff4d}.cultivation-section[_ngcontent-%COMP%]   .realm-display[_ngcontent-%COMP%]   .realm-progress[_ngcontent-%COMP%]   .progress-value[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600;text-align:right;font-variant-numeric:tabular-nums}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;margin-bottom:24px}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]{padding:24px;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px;color:var(--text-primary);font-size:1.05rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column;align-items:center;gap:12px;position:relative;overflow:hidden}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(102,126,234,.2),transparent);transition:left .5s ease}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:2.5rem;filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#667eea1a,#764ba21a);border-color:#667eea;transform:translateY(-4px);box-shadow:0 8px 24px #667eea40}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]:hover:before{left:100%}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]:hover   .btn-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.cultivation-section[_ngcontent-%COMP%]   .cultivation-actions[_ngcontent-%COMP%]   .cultivation-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px)}.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;padding:24px;display:flex;flex-direction:column;gap:12px;box-shadow:0 4px 12px #00000014}.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]   .training-label[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600;font-size:1.1rem}.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]   .training-bar[_ngcontent-%COMP%]{height:28px;background:#667eea1a;border-radius:14px;overflow:hidden;border:1px solid rgba(102,126,234,.2)}.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]   .training-bar[_ngcontent-%COMP%]   .training-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);border-radius:14px;transition:width .5s ease;box-shadow:inset 0 1px #ffffff4d}.cultivation-section[_ngcontent-%COMP%]   .training-level[_ngcontent-%COMP%]   .training-value[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600;text-align:right;font-variant-numeric:tabular-nums}.skills-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.skills-section[_ngcontent-%COMP%]   .learned-skills-count[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:16px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px}.skills-section[_ngcontent-%COMP%]   .learned-skills-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.2rem;font-weight:700}.skills-section[_ngcontent-%COMP%]   .learned-skills-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#667eea;font-size:1.4rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:16px;padding:24px;transition:all .3s ease;position:relative;overflow:hidden}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#667eea,#764ba2);transform:scaleX(0);transform-origin:left;transition:transform .3s ease}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\d558\\c2b9[_ngcontent-%COMP%] {border-color:#9ca3af80}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\d558\\c2b9[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-grade[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9ca3af,#6b7280)}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c911\\c2b9[_ngcontent-%COMP%] {border-color:#3b82f680}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c911\\c2b9[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-grade[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c0c1\\c2b9[_ngcontent-%COMP%] {border-color:#a855f780}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c0c1\\c2b9[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-grade[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a855f7,#9333ea)}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c808\\d559[_ngcontent-%COMP%] {border-color:#fbbf2480}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card.grade-\\c808\\d559[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-grade[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fbbf24,#f59e0b)}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 32px #667eea40;border-color:#667eea}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-names[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:6px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-names[_ngcontent-%COMP%]   .skill-name-chinese[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;color:var(--text-primary);margin:0;line-height:1.2}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-names[_ngcontent-%COMP%]   .skill-name-korean[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-secondary);margin:0;font-weight:500}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-grade[_ngcontent-%COMP%]{padding:8px 16px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:20px;color:#fff;font-size:.9rem;font-weight:700;white-space:nowrap;box-shadow:0 2px 8px #667eea4d}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-type[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:16px;padding:12px;background:var(--bg-tertiary);border-radius:10px;border:1px solid var(--border-color)}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-type[_ngcontent-%COMP%]   .type-icon[_ngcontent-%COMP%]{font-size:1.5rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-type[_ngcontent-%COMP%]   .type-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem;font-weight:600}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:16px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 12px;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:8px;transition:all .2s ease}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]:hover{background:#667eea1a;border-color:#667eea4d}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;font-weight:500}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:700;font-size:1rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-description[_ngcontent-%COMP%]{margin-bottom:16px;padding:16px;background:var(--bg-tertiary);border-radius:10px;border-left:3px solid #667eea}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-primary);font-size:.95rem;margin:0 0 10px;line-height:1.6}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-description[_ngcontent-%COMP%]   .skill-effect[_ngcontent-%COMP%]{color:#667eea;font-style:italic;font-weight:600}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-element[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;margin-bottom:10px;padding:8px 14px;background:#667eea26;border-radius:20px;border:1px solid rgba(102,126,234,.3)}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-element[_ngcontent-%COMP%]   .element-icon[_ngcontent-%COMP%]{font-size:1.2rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-element[_ngcontent-%COMP%]   .element-name[_ngcontent-%COMP%]{color:var(--text-primary);font-size:.9rem;font-weight:600;text-transform:uppercase}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-faction[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--bg-tertiary);border-radius:8px;border:1px solid var(--border-color)}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-faction[_ngcontent-%COMP%]   .faction-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-faction[_ngcontent-%COMP%]   .faction-name[_ngcontent-%COMP%]{color:#667eea;font-weight:700;font-size:.95rem}.skills-section[_ngcontent-%COMP%]   .no-skills[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;background:var(--bg-secondary);border-radius:16px;border:2px dashed var(--border-color)}.skills-section[_ngcontent-%COMP%]   .no-skills[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.2rem;margin:12px 0}.faction-section[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.faction-section[_ngcontent-%COMP%]   .current-faction[_ngcontent-%COMP%]{margin-bottom:40px}.faction-section[_ngcontent-%COMP%]   .current-faction[_ngcontent-%COMP%]   .faction-card.current[_ngcontent-%COMP%]{border-width:3px;box-shadow:0 0 30px #c3143266}.faction-section[_ngcontent-%COMP%]   .no-faction[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:var(--bg-secondary);border-radius:16px;border:2px dashed var(--border-color);margin-bottom:40px}.faction-section[_ngcontent-%COMP%]   .no-faction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.2rem;margin-bottom:24px;font-weight:500}.faction-section[_ngcontent-%COMP%]   .no-faction[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.4rem;margin-bottom:24px;font-weight:700}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(380px,1fr));gap:24px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:16px;padding:28px;transition:all .3s ease;position:relative;overflow:hidden}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;transform:scaleX(0);transform-origin:left;transition:transform .3s ease}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-righteous[_ngcontent-%COMP%]{border-color:#3b82f680}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-righteous[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#3b82f6,#2563eb)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-righteous[_ngcontent-%COMP%]:hover{box-shadow:0 12px 32px #3b82f640;border-color:#3b82f6}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-evil[_ngcontent-%COMP%]{border-color:#ef444480}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-evil[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#ef4444,#dc2626)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-evil[_ngcontent-%COMP%]:hover{box-shadow:0 12px 32px #ef444440;border-color:#ef4444}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-neutral[_ngcontent-%COMP%]{border-color:#9ca3af80}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-neutral[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#9ca3af,#6b7280)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card.type-neutral[_ngcontent-%COMP%]:hover{box-shadow:0 12px 32px #9ca3af40;border-color:#9ca3af}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-header[_ngcontent-%COMP%]{margin-bottom:20px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:800;color:var(--text-primary);margin:0 0 8px;line-height:1.2}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-header[_ngcontent-%COMP%]   .faction-name-korean[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin:0;font-weight:500}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-type[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:8px 18px;border-radius:20px;font-size:.95rem;font-weight:700;margin-bottom:20px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-type.type-righteous[_ngcontent-%COMP%]{background:#3b82f626;color:#3b82f6;border:1px solid rgba(59,130,246,.3)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-type.type-evil[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444;border:1px solid rgba(239,68,68,.3)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-type.type-neutral[_ngcontent-%COMP%]{background:#9ca3af26;color:#9ca3af;border:1px solid rgba(156,163,175,.3)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-info[_ngcontent-%COMP%]{margin-bottom:20px;padding:16px;background:var(--bg-tertiary);border-radius:12px;border-left:3px solid #667eea}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-primary);line-height:1.7;margin:0 0 12px;font-size:.95rem}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#667eea;font-weight:700}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-specialties[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-specialties[_ngcontent-%COMP%]   .specialty-badge[_ngcontent-%COMP%]{padding:8px 16px;background:#667eea26;border:1px solid rgba(102,126,234,.3);border-radius:20px;color:#667eea;font-size:.85rem;font-weight:600;transition:all .2s ease}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-specialties[_ngcontent-%COMP%]   .specialty-badge[_ngcontent-%COMP%]:hover{background:#667eea40;transform:translateY(-2px)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-reputation[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:var(--bg-tertiary);border-radius:10px;border:1px solid var(--border-color)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-reputation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:600;font-size:.9rem;white-space:nowrap}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-reputation[_ngcontent-%COMP%]   .reputation-bar[_ngcontent-%COMP%]{flex:1;height:12px;background:#667eea1a;border-radius:6px;overflow:hidden;border:1px solid rgba(102,126,234,.2)}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .faction-reputation[_ngcontent-%COMP%]   .reputation-bar[_ngcontent-%COMP%]   .reputation-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);transition:width .5s ease;box-shadow:inset 0 1px #ffffff4d}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .join-faction-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;font-size:1.05rem;font-weight:700;cursor:pointer;transition:all .3s ease;margin-top:16px}.faction-section[_ngcontent-%COMP%]   .factions-grid[_ngcontent-%COMP%]   .faction-card[_ngcontent-%COMP%]   .join-faction-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea66}.elixir-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:16px;padding:24px;transition:all .3s ease;position:relative;overflow:hidden}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;transform:scaleX(0);transform-origin:left;transition:transform .3s ease}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\d558\\d488[_ngcontent-%COMP%] {border-color:#9ca3af80}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\d558\\d488[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#9ca3af,#6b7280)}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\c911\\d488[_ngcontent-%COMP%] {border-color:#3b82f680}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\c911\\d488[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#3b82f6,#2563eb)}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\c0c1\\d488[_ngcontent-%COMP%] {border-color:#a855f780}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\c0c1\\d488[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#a855f7,#9333ea)}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\adf9\\d488[_ngcontent-%COMP%] {border-color:#fbbf2480}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card.grade-\\adf9\\d488[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#fbbf24,#f59e0b)}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 32px #667eea40;border-color:#667eea}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]   .elixir-names[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:6px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]   .elixir-names[_ngcontent-%COMP%]   .elixir-chinese[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:800;color:var(--text-primary);margin:0;line-height:1.2}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]   .elixir-names[_ngcontent-%COMP%]   .elixir-korean[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-secondary);margin:0;font-weight:500}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-header[_ngcontent-%COMP%]   .elixir-grade[_ngcontent-%COMP%]{padding:8px 14px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:20px;color:#fff;font-size:.85rem;font-weight:700;white-space:nowrap;box-shadow:0 2px 8px #667eea4d}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-type[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-type[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{padding:8px 14px;background:#667eea26;border:1px solid rgba(102,126,234,.3);border-radius:20px;color:#667eea;font-size:.85rem;font-weight:600}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-type[_ngcontent-%COMP%]   .rarity-stars[_ngcontent-%COMP%]{display:flex;gap:4px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-type[_ngcontent-%COMP%]   .rarity-stars[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{font-size:1rem;filter:drop-shadow(0 2px 4px rgba(251,191,36,.5))}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-description[_ngcontent-%COMP%]{margin-bottom:16px;padding:14px;background:var(--bg-tertiary);border-radius:10px;border-left:3px solid #667eea}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-primary);font-size:.95rem;line-height:1.6;margin:0}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]{margin-bottom:16px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 12px;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:8px;margin-bottom:8px;transition:all .2s ease}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]:hover{background:#667eea1a;border-color:#667eea4d}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-icon[_ngcontent-%COMP%]{font-size:1.2rem}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-text[_ngcontent-%COMP%]{color:var(--text-primary);font-size:.9rem;font-weight:500}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px;background:#ef44441a;border:1px solid rgba(239,68,68,.3);border-radius:10px;margin-bottom:16px}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-warning[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{font-size:1.3rem}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{color:#ef4444;font-size:.9rem;font-weight:600}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:16px;border-top:1px solid var(--border-color)}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-footer[_ngcontent-%COMP%]   .elixir-price[_ngcontent-%COMP%]{color:gold;font-weight:700;font-size:1.1rem}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-footer[_ngcontent-%COMP%]   .use-elixir-btn[_ngcontent-%COMP%]{padding:8px 20px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease}.elixir-section[_ngcontent-%COMP%]   .elixir-inventory[_ngcontent-%COMP%]   .elixir-card[_ngcontent-%COMP%]   .elixir-footer[_ngcontent-%COMP%]   .use-elixir-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #667eea66}.elixir-section[_ngcontent-%COMP%]   .no-elixir[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.elixir-section[_ngcontent-%COMP%]   .no-elixir[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff9;font-size:1.1rem}.meridians-section[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.meridians-section[_ngcontent-%COMP%]   .meridian-info[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;padding:20px;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color)}.meridians-section[_ngcontent-%COMP%]   .meridian-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.2rem;font-weight:700;margin:0}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]{position:relative;width:100%;max-width:600px;height:600px;margin:0 auto 40px;background:radial-gradient(circle,rgba(102,126,234,.05) 0%,transparent 70%);border-radius:50%;border:2px solid rgba(102,126,234,.2);box-shadow:0 8px 32px #667eea1a}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%)}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point[_ngcontent-%COMP%]   .point-circle[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;background:var(--bg-secondary);border:2px solid var(--border-color);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #0000001a}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point[_ngcontent-%COMP%]   .point-circle[_ngcontent-%COMP%]   .point-number[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:800;font-size:1.3rem}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point.opened[_ngcontent-%COMP%]   .point-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-color:transparent;box-shadow:0 0 0 4px #667eea33,0 8px 24px #667eea66}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point.opened[_ngcontent-%COMP%]   .point-circle[_ngcontent-%COMP%]   .point-number[_ngcontent-%COMP%]{color:#fff}.meridians-section[_ngcontent-%COMP%]   .meridian-diagram[_ngcontent-%COMP%]   .meridian-point[_ngcontent-%COMP%]:hover   .point-circle[_ngcontent-%COMP%]{transform:scale(1.15);box-shadow:0 8px 24px #667eea4d}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:24px;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px;transition:all .3s ease;position:relative;overflow:hidden}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:transparent;transition:background .3s ease}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item.opened[_ngcontent-%COMP%]{border-color:#667eea80;background:#667eea0d}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item.opened[_ngcontent-%COMP%]:before{background:linear-gradient(180deg,#667eea,#764ba2)}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]:hover{transform:translate(6px);box-shadow:0 8px 24px #667eea33;border-color:#667eea}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-number[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:#667eea26;border:2px solid rgba(102,126,234,.3);display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--text-primary);font-size:1.2rem;flex-shrink:0}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]{flex:1}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text-primary);margin:0 0 8px;font-weight:700}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0 0 12px;line-height:1.5}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{flex:1;height:14px;background:#667eea1a;border-radius:7px;overflow:hidden;border:1px solid rgba(102,126,234,.2)}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);transition:width .5s ease;box-shadow:inset 0 1px #ffffff4d}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-primary);font-size:.9rem;font-weight:600;font-variant-numeric:tabular-nums}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-bonus[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-details[_ngcontent-%COMP%]   .meridian-bonus[_ngcontent-%COMP%]   .bonus-item[_ngcontent-%COMP%]{padding:6px 14px;background:#667eea26;border:1px solid rgba(102,126,234,.3);border-radius:20px;color:#667eea;font-size:.85rem;font-weight:600}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%]{flex-shrink:0}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%]   .status-opened[_ngcontent-%COMP%]{color:#667eea;font-weight:700;font-size:1.1rem}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%]   .open-btn[_ngcontent-%COMP%]{padding:12px 28px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;font-weight:700;font-size:1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #667eea4d}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%]   .open-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea66}.meridians-section[_ngcontent-%COMP%]   .meridian-list[_ngcontent-%COMP%]   .meridian-item[_ngcontent-%COMP%]   .meridian-status[_ngcontent-%COMP%]   .open-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%)}to{transform:translate(200%)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}}.battle-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;padding:20px;background:#0003;border-radius:12px;margin:16px 0}.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:16px 12px;background:linear-gradient(135deg,#667eea33,#764ba233);border:2px solid rgba(102,126,234,.5);border-radius:10px;color:#fff;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column;align-items:center;gap:6px}.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:1.8rem}.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:.95rem}.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 6px 20px #667eea66}.battle-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;filter:grayscale(.5)}.battle-actions[_ngcontent-%COMP%]   .action-btn.attack-btn[_ngcontent-%COMP%]{border-color:#ff646480;background:linear-gradient(135deg,#ff646433,#c3143233)}.battle-actions[_ngcontent-%COMP%]   .action-btn.attack-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #ff646466}.battle-actions[_ngcontent-%COMP%]   .action-btn.skill-btn[_ngcontent-%COMP%]{border-color:#8a2be280;background:linear-gradient(135deg,#8a2be233,#667eea33)}.battle-actions[_ngcontent-%COMP%]   .action-btn.skill-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #8a2be266}.battle-actions[_ngcontent-%COMP%]   .action-btn.defend-btn[_ngcontent-%COMP%]{border-color:#64c8ff80;background:linear-gradient(135deg,#64c8ff33,#409cff33)}.battle-actions[_ngcontent-%COMP%]   .action-btn.defend-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #64c8ff66}.battle-actions[_ngcontent-%COMP%]   .action-btn.potion-btn[_ngcontent-%COMP%]{border-color:#32cd3280;background:linear-gradient(135deg,#32cd3233,#228b2233)}.battle-actions[_ngcontent-%COMP%]   .action-btn.potion-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #32cd3266}.martial-skills-section[_ngcontent-%COMP%]{padding:20px;background:#0000004d;border:2px solid rgba(195,20,50,.3);border-radius:12px;margin:16px 0}.martial-skills-section[_ngcontent-%COMP%]   .skills-title[_ngcontent-%COMP%]{font-size:1.3rem;color:gold;margin:0 0 16px;text-align:center;text-shadow:0 0 10px rgba(255,215,0,.5)}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]{padding:14px;background:#0006;border:2px solid rgba(255,255,255,.2);border-radius:10px;color:#fff;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column;gap:8px;position:relative;overflow:hidden}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,transparent 0%,rgba(255,215,0,.1) 100%);opacity:0;transition:opacity .3s ease}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled):before{opacity:1}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn.grade-\\d558\\c2b9[_ngcontent-%COMP%] {border-color:#96969666}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn.grade-\\c911\\c2b9[_ngcontent-%COMP%] {border-color:#64c8ff66}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn.grade-\\c0c1\\c2b9[_ngcontent-%COMP%] {border-color:#8a2be280;box-shadow:0 0 10px #8a2be233}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn.grade-\\c808\\d559[_ngcontent-%COMP%] {border-color:#ffd70099;box-shadow:0 0 15px #ffd7004d;animation:_ngcontent-%COMP%_skillPulse 2s ease-in-out infinite}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-4px);box-shadow:0 8px 25px #c3143266}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;filter:grayscale(.7)}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]:disabled:after{content:"\\b0b4\\acf5  \\bd80\\c871";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#000c;padding:4px 8px;border-radius:4px;font-size:.75rem;color:#ff6464;white-space:nowrap}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;position:relative;z-index:1}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]   .skill-chinese[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:gold;text-shadow:0 0 8px rgba(255,215,0,.4)}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]   .skill-korean[_ngcontent-%COMP%]{font-size:.85rem;color:#fffc}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px;padding:4px 8px;background:#c314324d;border-radius:6px;position:relative;z-index:1}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]   .cost-icon[_ngcontent-%COMP%]{font-size:1rem}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]   .cost-value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700;color:#ff9696}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px;position:relative;z-index:1}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]   .damage-icon[_ngcontent-%COMP%]{font-size:1rem}.martial-skills-section[_ngcontent-%COMP%]   .martial-skills-grid[_ngcontent-%COMP%]   .martial-skill-btn[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]   .damage-value[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#ffc864}.internal-power-bar[_ngcontent-%COMP%]{margin-top:8px}.internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:4px}.internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%]{font-weight:600;color:#ff9696;text-shadow:0 0 5px rgba(255,100,100,.5)}.internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%]{font-size:.85rem;color:#ffffffe6}.internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]{height:12px;background:#00000080;border-radius:6px;overflow:hidden;border:1px solid rgba(255,100,100,.3)}.internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.internal-power[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff6b6b,gold,#ff6b6b);background-size:200% 100%;animation:powerFlow 3s ease-in-out infinite;box-shadow:0 0 10px #ffd70066}@keyframes _ngcontent-%COMP%_skillPulse{0%,to{box-shadow:0 0 10px #ffd70033}50%{box-shadow:0 0 25px #ffd70080}}.epic-battle[_ngcontent-%COMP%]{position:relative;overflow:hidden;background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);border-radius:20px;box-shadow:0 30px 80px #0009,inset 0 0 80px #8a2be21a}.epic-battle[_ngcontent-%COMP%]   .battle-background[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none;overflow:hidden}.epic-battle[_ngcontent-%COMP%]   .battle-background[_ngcontent-%COMP%]   .battle-particles[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-image:radial-gradient(2px 2px at 20% 30%,rgba(255,255,255,.3),transparent),radial-gradient(2px 2px at 60% 70%,rgba(138,43,226,.3),transparent),radial-gradient(1px 1px at 50% 50%,rgba(255,215,0,.3),transparent),radial-gradient(1px 1px at 80% 10%,rgba(195,20,50,.3),transparent);background-size:200% 200%,180% 180%,220% 220%,190% 190%;animation:_ngcontent-%COMP%_particleFloat 20s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-background[_ngcontent-%COMP%]   .battle-glow[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:radial-gradient(circle at 50% 50%,rgba(138,43,226,.15) 0%,transparent 70%);animation:_ngcontent-%COMP%_glowPulse 4s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]{position:relative;z-index:1;padding:24px 32px;background:linear-gradient(135deg,#8a2be24d,#c314324d);border-bottom:3px solid rgba(255,215,0,.3);display:flex;justify-content:space-between;align-items:center}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:#fff;margin:0;display:flex;align-items:center;gap:16px;text-shadow:0 0 20px rgba(255,215,0,.6),0 0 40px rgba(138,43,226,.4);animation:_ngcontent-%COMP%_titlePulse 2s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .battle-title-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_iconSpin 3s linear infinite}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 24px;background:#0006;border-radius:12px;border:2px solid rgba(255,215,0,.3)}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]   .turn-label[_ngcontent-%COMP%]{color:#ffffffb3;font-size:1rem;font-weight:600}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]   .turn-value[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:800;padding:4px 12px;border-radius:6px;transition:all .3s ease}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]   .turn-value.player-turn[_ngcontent-%COMP%]{color:#64c8ff;background:#64c8ff33;box-shadow:0 0 20px #64c8ff66;animation:_ngcontent-%COMP%_turnGlow 1s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-header[_ngcontent-%COMP%]   .turn-indicator[_ngcontent-%COMP%]   .turn-value.enemy-turn[_ngcontent-%COMP%]{color:#ff6464;background:#ff646433;box-shadow:0 0 20px #ff646466;animation:_ngcontent-%COMP%_turnGlow 1s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-arena[_ngcontent-%COMP%]{position:relative;z-index:1;padding:40px 20px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;gap:40px;max-width:1200px;margin:0 auto}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]{flex:1;max-width:400px;position:relative;transition:all .5s cubic-bezier(.68,-.55,.265,1.55)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.active[_ngcontent-%COMP%]{transform:scale(1.05)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.active[_ngcontent-%COMP%]   .character-glow[_ngcontent-%COMP%]{opacity:1;animation:_ngcontent-%COMP%_activeGlow 1.5s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.taking-damage[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shakeDamage .5s ease-in-out}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character.attacking[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_attackPulse .8s ease-out}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-glow[_ngcontent-%COMP%]{position:absolute;inset:-20px;background:radial-gradient(circle,rgba(100,200,255,.3) 0%,transparent 70%);border-radius:50%;opacity:0;transition:opacity .5s ease;pointer-events:none}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-glow.enemy-glow[_ngcontent-%COMP%]{background:radial-gradient(circle,rgba(255,100,100,.3) 0%,transparent 70%)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e1e3ce6,#141428e6);border-radius:20px;padding:24px;border:3px solid rgba(100,200,255,.3);box-shadow:0 20px 60px #00000080,inset 0 0 40px #64c8ff0d;position:relative;overflow:hidden}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.05) 50%,transparent 70%);animation:_ngcontent-%COMP%_cardShine 3s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-card.enemy-card[_ngcontent-%COMP%]{border-color:#ff64644d;box-shadow:0 20px 60px #00000080,inset 0 0 40px #ff64640d}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;margin:0 auto 16px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]{position:absolute;inset:-10px;border:3px solid rgba(100,200,255,.5);border-radius:50%;animation:_ngcontent-%COMP%_ringRotate 4s linear infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]:before, .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]:after{content:"";position:absolute;width:10px;height:10px;background:#64c8ff;border-radius:50%;box-shadow:0 0 15px #64c8ffcc}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]:before{top:0;left:50%;transform:translate(-50%)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring[_ngcontent-%COMP%]:after{bottom:0;left:50%;transform:translate(-50%)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring.enemy-ring[_ngcontent-%COMP%]{border-color:#ff646480}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring.enemy-ring[_ngcontent-%COMP%]:before, .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .avatar-ring.enemy-ring[_ngcontent-%COMP%]:after{background:#ff6464;box-shadow:0 0 15px #ff6464cc}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]{font-size:5rem;display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:radial-gradient(circle,rgba(138,43,226,.2) 0%,transparent 70%);border-radius:50%;filter:drop-shadow(0 0 20px rgba(138,43,226,.5));animation:_ngcontent-%COMP%_avatarFloat 3s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-avatar-container[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;background:linear-gradient(135deg,gold,#ff6b6b);color:#fff;font-weight:800;font-size:.9rem;padding:4px 12px;border-radius:20px;box-shadow:0 4px 15px #ffd70066;animation:_ngcontent-%COMP%_badgePulse 2s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:800;color:#fff;text-align:center;margin-bottom:20px;text-shadow:0 0 10px rgba(100,200,255,.5),0 2px 4px rgba(0,0,0,.5);letter-spacing:2px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:16px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-icon[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-icon[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-icon[_ngcontent-%COMP%]{font-size:1.2rem;filter:drop-shadow(0 0 5px currentColor)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-name[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;margin-left:8px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]   .bar-text[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#ffffffe6}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]{height:16px;background:#0009;border-radius:10px;overflow:hidden;border:2px solid rgba(255,255,255,.2);position:relative;box-shadow:inset 0 2px 8px #00000080}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{height:100%;position:relative;transition:width .5s cubic-bezier(.68,-.55,.265,1.55)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]   .bar-shine[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]   .bar-shine[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]   .bar-shine[_ngcontent-%COMP%]{position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.4) 50%,transparent 100%);animation:_ngcontent-%COMP%_barShine 2s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff6b6b,#ee5a6f);box-shadow:0 0 15px #ff6b6b80}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.low[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hpWarning 1s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.critical[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.critical[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.critical[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hpCritical .5s ease-in-out infinite;box-shadow:0 0 25px #f00c}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.enemy-hp[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.enemy-hp[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.hp.enemy-hp[_ngcontent-%COMP%]{background:linear-gradient(90deg,#c31432,#8e0000)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.mp[_ngcontent-%COMP%]{background:linear-gradient(90deg,#667eea,#764ba2);box-shadow:0 0 15px #667eea80}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .hp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.internal-power[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .mp-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.internal-power[_ngcontent-%COMP%], .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .internal-power-bar[_ngcontent-%COMP%]   .bar-container[_ngcontent-%COMP%]   .bar-fill.internal-power[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff6b6b,gold,#ff6b6b);background-size:200% 100%;box-shadow:0 0 15px #ffd70099;animation:powerFlow 3s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats-row[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:12px;margin-top:16px}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:8px;padding:12px;background:#0000004d;border-radius:10px;border:2px solid rgba(255,255,255,.1)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:1.3rem;filter:drop-shadow(0 0 5px currentColor)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-character[_ngcontent-%COMP%]   .character-stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:800;color:#fff;text-shadow:0 0 10px rgba(255,255,255,.5)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]{position:relative;flex-shrink:0}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]{width:100px;height:100px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;position:relative;box-shadow:0 0 40px #667eea99,inset 0 0 20px #fff3;animation:_ngcontent-%COMP%_vsRotate 4s linear infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]:before, .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]:after{content:"";position:absolute;border-radius:50%}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]:before{inset:-10px;border:3px dashed rgba(255,215,0,.5);animation:_ngcontent-%COMP%_ringRotate 6s linear infinite reverse}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]:after{inset:-20px;border:2px dotted rgba(255,255,255,.3);animation:_ngcontent-%COMP%_ringRotate 8s linear infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-text[_ngcontent-%COMP%]{font-size:2rem;font-weight:900;color:#fff;text-shadow:0 0 20px rgb(255,215,0),0 0 40px rgba(138,43,226,.8);animation:_ngcontent-%COMP%_vsScale 2s ease-in-out infinite;z-index:1}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]:before, .epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]:after{content:"\\26a1";position:absolute;font-size:1.5rem;animation:_ngcontent-%COMP%_lightningFlash 2s ease-in-out infinite}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]:before{top:-10px;left:50%;transform:translate(-50%)}.epic-battle[_ngcontent-%COMP%]   .battle-characters[_ngcontent-%COMP%]   .battle-vs-container[_ngcontent-%COMP%]   .vs-circle[_ngcontent-%COMP%]   .vs-lightning[_ngcontent-%COMP%]:after{bottom:-10px;left:50%;transform:translate(-50%);animation-delay:1s}.epic-actions[_ngcontent-%COMP%]{position:relative;z-index:1;display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px;padding:24px 32px;background:linear-gradient(180deg,#0000004d,#00000080);border-radius:16px;margin:20px 32px;border:2px solid rgba(255,215,0,.2)}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{position:relative;padding:20px 16px;background:linear-gradient(135deg,#667eea4d,#764ba24d);border:3px solid rgba(102,126,234,.6);border-radius:14px;color:#fff;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.68,-.55,.265,1.55);display:flex;flex-direction:column;align-items:center;gap:8px;overflow:hidden}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-glow[_ngcontent-%COMP%]{position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.2) 0%,transparent 70%);opacity:0;transition:opacity .3s ease}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-particles[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:radial-gradient(2px 2px at 20% 30%,rgba(255,255,255,.5),transparent),radial-gradient(2px 2px at 80% 70%,rgba(255,255,255,.5),transparent);background-size:100% 100%;opacity:0;transition:opacity .3s ease}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:2.2rem;filter:drop-shadow(0 0 10px currentColor);transition:transform .3s ease;z-index:1}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:1rem;letter-spacing:1px;z-index:1}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-cost[_ngcontent-%COMP%]{font-size:.85rem;color:#ffffffb3;z-index:1}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-5px) scale(1.05);box-shadow:0 15px 40px #667eea80}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .btn-glow[_ngcontent-%COMP%]{opacity:1}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .btn-particles[_ngcontent-%COMP%]{opacity:1;animation:_ngcontent-%COMP%_particleRise 2s ease-out infinite}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .btn-icon[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-3px) scale(1.02)}.epic-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;filter:grayscale(.7);transform:scale(.95)}.epic-actions[_ngcontent-%COMP%]   .action-btn.attack-btn[_ngcontent-%COMP%]{border-color:#ff646499;background:linear-gradient(135deg,#ff64644d,#c314324d)}.epic-actions[_ngcontent-%COMP%]   .action-btn.attack-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 15px 40px #ff646499}.epic-actions[_ngcontent-%COMP%]   .action-btn.skill-btn[_ngcontent-%COMP%]{border-color:#8a2be299;background:linear-gradient(135deg,#8a2be24d,#667eea4d)}.epic-actions[_ngcontent-%COMP%]   .action-btn.skill-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 15px 40px #8a2be299}.epic-actions[_ngcontent-%COMP%]   .action-btn.defend-btn[_ngcontent-%COMP%]{border-color:#64c8ff99;background:linear-gradient(135deg,#64c8ff4d,#409cff4d)}.epic-actions[_ngcontent-%COMP%]   .action-btn.defend-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 15px 40px #64c8ff99}.epic-actions[_ngcontent-%COMP%]   .action-btn.potion-btn[_ngcontent-%COMP%]{border-color:#32cd3299;background:linear-gradient(135deg,#32cd324d,#228b224d)}.epic-actions[_ngcontent-%COMP%]   .action-btn.potion-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 15px 40px #32cd3299}.epic-skills[_ngcontent-%COMP%]{position:relative;z-index:1;padding:28px 32px;background:linear-gradient(135deg,#c3143233,#240b364d);border:3px solid rgba(255,215,0,.4);border-radius:16px;margin:20px 32px;box-shadow:0 20px 60px #00000080,inset 0 0 40px #ffd7000d}.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]   .skills-title[_ngcontent-%COMP%]{font-size:1.6rem;color:gold;margin:0 0 8px;display:flex;align-items:center;justify-content:center;gap:16px;text-shadow:0 0 20px rgba(255,215,0,.8),0 0 40px rgba(255,215,0,.4)}.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]   .skills-title[_ngcontent-%COMP%]   .title-decoration[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_decorationPulse 2s ease-in-out infinite}.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]   .skills-title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{letter-spacing:4px}.epic-skills[_ngcontent-%COMP%]   .skills-header[_ngcontent-%COMP%]   .skills-subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:#ffd700b3;letter-spacing:6px;font-weight:300}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]{position:relative;padding:20px;background:linear-gradient(135deg,#0009,#1e1e3c99);border:3px solid rgba(255,255,255,.2);border-radius:14px;color:#fff;cursor:pointer;transition:all .3s cubic-bezier(.68,-.55,.265,1.55);display:flex;flex-direction:column;gap:12px;overflow:hidden}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-glow[_ngcontent-%COMP%]{position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,215,0,.3) 0%,transparent 70%);opacity:0;transition:opacity .3s ease}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-particles[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:radial-gradient(1px 1px at 20% 30%,rgba(255,215,0,.6),transparent),radial-gradient(1px 1px at 80% 70%,rgba(255,215,0,.6),transparent),radial-gradient(1px 1px at 50% 50%,rgba(255,215,0,.6),transparent);background-size:100% 100%;opacity:0;transition:opacity .3s ease}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\d558\\c2b9[_ngcontent-%COMP%] {border-color:#96969680}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\c911\\c2b9[_ngcontent-%COMP%] {border-color:#64c8ff80;box-shadow:0 0 15px #64c8ff33}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\c0c1\\c2b9[_ngcontent-%COMP%] {border-color:#8a2be299;box-shadow:0 0 20px #8a2be24d}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\c808\\d559[_ngcontent-%COMP%] {border-color:#ffd700cc;box-shadow:0 0 30px #ffd70080;animation:_ngcontent-%COMP%_epicSkillGlow 2s ease-in-out infinite}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn.grade-\\c808\\d559[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;background:linear-gradient(45deg,#ffd70000,#ffd70080,#ffd70000);border-radius:14px;animation:_ngcontent-%COMP%_borderFlow 3s linear infinite}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-8px) scale(1.05);box-shadow:0 20px 50px #ffd70066}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .skill-glow[_ngcontent-%COMP%]{opacity:1}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .skill-particles[_ngcontent-%COMP%]{opacity:1;animation:_ngcontent-%COMP%_particleRise 2s ease-out infinite}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed;filter:grayscale(.8);transform:scale(.95)}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]:disabled:after{content:"\\b0b4\\acf5  \\bd80\\c871";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#000000e6;padding:8px 16px;border-radius:8px;font-size:.85rem;color:#ff6464;font-weight:800;white-space:nowrap;box-shadow:0 0 20px #ff646480;z-index:10}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px;position:relative;z-index:1}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]   .skill-chinese[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:800;color:gold;text-shadow:0 0 15px rgba(255,215,0,.6),0 2px 4px rgba(0,0,0,.5);letter-spacing:2px}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]   .skill-korean[_ngcontent-%COMP%]{font-size:.95rem;color:#ffffffe6;font-weight:600;letter-spacing:1px}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:12px;position:relative;z-index:1}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:6px;padding:8px;background:linear-gradient(135deg,#c3143266,#8a2be266);border-radius:8px;border:2px solid rgba(195,20,50,.5)}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]   .cost-icon[_ngcontent-%COMP%]{font-size:1.1rem;filter:drop-shadow(0 0 5px currentColor)}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-cost[_ngcontent-%COMP%]   .cost-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;color:#f99}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:6px;padding:8px;background:linear-gradient(135deg,#ffd7004d,#ff8c004d);border-radius:8px;border:2px solid rgba(255,215,0,.5)}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]   .damage-icon[_ngcontent-%COMP%]{font-size:1.1rem;filter:drop-shadow(0 0 5px currentColor)}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-info-row[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]   .damage-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;color:gold}.epic-skills[_ngcontent-%COMP%]   .epic-grid[_ngcontent-%COMP%]   .epic-skill-btn[_ngcontent-%COMP%]   .skill-grade-label[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:linear-gradient(135deg,#000c,#1e1e3ccc);color:gold;font-size:.75rem;font-weight:800;padding:4px 10px;border-radius:6px;border:1px solid rgba(255,215,0,.5);z-index:1}.epic-log[_ngcontent-%COMP%]{position:relative;z-index:1;margin:20px 32px;padding:24px;background:linear-gradient(135deg,#0009,#1e1e3c99);border:2px solid rgba(138,43,226,.3);border-radius:14px;max-height:300px;overflow-y:auto;box-shadow:inset 0 0 40px #00000080}.epic-log[_ngcontent-%COMP%]   .log-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px;padding-bottom:12px;border-bottom:2px solid rgba(138,43,226,.3)}.epic-log[_ngcontent-%COMP%]   .log-header[_ngcontent-%COMP%]   .log-icon[_ngcontent-%COMP%]{font-size:1.5rem;filter:drop-shadow(0 0 10px rgba(255,215,0,.5))}.epic-log[_ngcontent-%COMP%]   .log-header[_ngcontent-%COMP%]   .log-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:gold;text-shadow:0 0 10px rgba(255,215,0,.5);letter-spacing:2px}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#0000004d;border-radius:8px;border-left:4px solid rgba(138,43,226,.5);animation:_ngcontent-%COMP%_logEntrySlide .3s ease-out;transition:all .3s ease}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]:hover{background:#00000080;transform:translate(5px)}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%]{flex-shrink:0;width:40px;height:40px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.9rem;color:#fff;box-shadow:0 4px 15px #667eea66}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%]{flex:1;color:#ffffffe6;font-size:1rem;line-height:1.5}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%]{border-left-color:#ff6464cc}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#c31432)}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.damage[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%]{color:#f99}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%]{border-left-color:#32cd32cc}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,#32cd32,#228b22)}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.heal[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%]{color:#90ee90}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.critical[_ngcontent-%COMP%]{border-left-color:#ffd700cc;animation:_ngcontent-%COMP%_criticalPulse .5s ease-out,_ngcontent-%COMP%_logEntrySlide .3s ease-out}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.critical[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ff6b6b);animation:_ngcontent-%COMP%_criticalShake .5s ease-out}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.critical[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%]{color:gold;font-weight:700}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.combo[_ngcontent-%COMP%]{border-left-color:#ff8c00cc}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.combo[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff8c00,tomato)}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.combo[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%]{color:#ffb347;font-weight:600}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.special[_ngcontent-%COMP%]{border-left-color:#8a2be2cc}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.special[_ngcontent-%COMP%]   .log-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8a2be2,indigo)}.epic-log[_ngcontent-%COMP%]   .log-entries[_ngcontent-%COMP%]   .log-entry.special[_ngcontent-%COMP%]   .log-text[_ngcontent-%COMP%]{color:orchid}.epic-result[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:2000;animation:_ngcontent-%COMP%_resultFadeIn .5s ease-out}.epic-result[_ngcontent-%COMP%]   .result-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000c;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]{position:relative;z-index:1;text-align:center;padding:60px 80px;background:linear-gradient(135deg,#1e1e3cf2,#141428f2);border-radius:30px;border:4px solid rgba(255,215,0,.5);box-shadow:0 40px 100px #000c,inset 0 0 60px #ffd7001a;animation:_ngcontent-%COMP%_resultScale .5s cubic-bezier(.68,-.55,.265,1.55)}.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{font-size:8rem;animation:_ngcontent-%COMP%_iconBounce .8s ease-out,_ngcontent-%COMP%_iconSpin 2s ease-in-out infinite;filter:drop-shadow(0 0 30px rgba(255,215,0,.8));margin-bottom:24px}.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-icon.defeat[_ngcontent-%COMP%]{filter:drop-shadow(0 0 30px rgba(255,100,100,.8))}.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-title[_ngcontent-%COMP%]{font-size:4rem;font-weight:900;color:gold;margin:0 0 16px;text-shadow:0 0 30px rgb(255,215,0),0 0 60px rgba(255,215,0,.5);letter-spacing:8px;animation:_ngcontent-%COMP%_titleBounce .6s cubic-bezier(.68,-.55,.265,1.55)}.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-title.defeat-title[_ngcontent-%COMP%]{color:#ff6464;text-shadow:0 0 30px rgb(255,100,100),0 0 60px rgba(255,100,100,.5)}.epic-result[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]   .result-message[_ngcontent-%COMP%]{font-size:1.2rem;color:#fffc;margin:0;animation:_ngcontent-%COMP%_messageFade 1s ease-in-out .5s both}@keyframes _ngcontent-%COMP%_particleFloat{0%,to{background-position:0% 0%,100% 100%,50% 50%,80% 20%}50%{background-position:100% 100%,0% 0%,70% 70%,20% 80%}}@keyframes _ngcontent-%COMP%_glowPulse{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_titlePulse{0%,to{text-shadow:0 0 20px rgba(255,215,0,.6),0 0 40px rgba(138,43,226,.4)}50%{text-shadow:0 0 30px rgb(255,215,0),0 0 60px rgba(138,43,226,.6)}}@keyframes _ngcontent-%COMP%_iconSpin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_turnGlow{0%,to{box-shadow:0 0 20px currentColor}50%{box-shadow:0 0 40px currentColor}}@keyframes _ngcontent-%COMP%_shakeDamage{0%,to{transform:translate(0) scale(1)}25%{transform:translate(-10px) scale(.98)}75%{transform:translate(10px) scale(.98)}}@keyframes _ngcontent-%COMP%_attackPulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_activeGlow{0%,to{box-shadow:0 0 30px currentColor}50%{box-shadow:0 0 60px currentColor}}@keyframes _ngcontent-%COMP%_cardShine{0%{transform:translate(-100%) translateY(-100%) rotate(45deg)}to{transform:translate(100%) translateY(100%) rotate(45deg)}}@keyframes _ngcontent-%COMP%_ringRotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_avatarFloat{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes _ngcontent-%COMP%_badgePulse{0%,to{transform:scale(1);box-shadow:0 4px 15px #ffd70066}50%{transform:scale(1.1);box-shadow:0 6px 25px #ffd70099}}@keyframes _ngcontent-%COMP%_barShine{0%{left:-100%}to{left:100%}}@keyframes _ngcontent-%COMP%_hpWarning{0%,to{box-shadow:0 0 15px #ff6b6b80}50%{box-shadow:0 0 30px #ff6b6bcc}}@keyframes _ngcontent-%COMP%_hpCritical{0%,to{box-shadow:0 0 25px #f00c}50%{box-shadow:0 0 50px red}}@keyframes _ngcontent-%COMP%_vsRotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_vsScale{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}@keyframes _ngcontent-%COMP%_lightningFlash{0%,to{opacity:0}50%{opacity:1}}@keyframes _ngcontent-%COMP%_particleRise{0%{background-position:0% 0%;opacity:0}50%{opacity:1}to{background-position:0% -100%;opacity:0}}@keyframes _ngcontent-%COMP%_epicSkillGlow{0%,to{box-shadow:0 0 30px #ffd70080}50%{box-shadow:0 0 50px #ffd700cc}}@keyframes _ngcontent-%COMP%_borderFlow{0%{background-position:0% 50%}to{background-position:200% 50%}}@keyframes _ngcontent-%COMP%_decorationPulse{0%,to{opacity:.5;transform:scale(1)}50%{opacity:1;transform:scale(1.2)}}@keyframes _ngcontent-%COMP%_logEntrySlide{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_criticalPulse{0%,to{background:#0000004d}50%{background:#ffd70033}}@keyframes _ngcontent-%COMP%_criticalShake{0%,to{transform:rotate(0)}25%{transform:rotate(-5deg)}75%{transform:rotate(5deg)}}@keyframes _ngcontent-%COMP%_resultFadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_resultScale{0%{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_iconBounce{0%{transform:translateY(-100px) scale(0)}60%{transform:translateY(10px) scale(1.1)}80%{transform:translateY(-5px) scale(.95)}to{transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_titleBounce{0%{transform:scale(0)}60%{transform:scale(1.1)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_messageFade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.epic-log-compact[_ngcontent-%COMP%]{position:relative;z-index:1;margin:20px 32px;padding:16px;background:linear-gradient(135deg,#00000080,#1e1e3c80);border:2px solid rgba(138,43,226,.2);border-radius:14px;min-height:100px;max-height:120px;overflow:hidden;box-shadow:inset 0 0 30px #0006}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:flex-start}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center;gap:6px;padding:8px 12px;background:#0006;border-radius:20px;border:2px solid rgba(138,43,226,.4);animation:_ngcontent-%COMP%_bubblePop .3s cubic-bezier(.68,-.55,.265,1.55);transition:all .3s ease;cursor:pointer}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]:hover{transform:scale(1.1);z-index:10;box-shadow:0 8px 25px #8a2be280}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.player[_ngcontent-%COMP%]{border-color:#64c8ff80;background:linear-gradient(135deg,#64c8ff26,#409cff26)}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.player[_ngcontent-%COMP%]:hover{box-shadow:0 8px 25px #64c8ff80}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.enemy[_ngcontent-%COMP%]{border-color:#ff646480;background:linear-gradient(135deg,#ff646426,#c3143226)}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.enemy[_ngcontent-%COMP%]:hover{box-shadow:0 8px 25px #ff646480}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.damage[_ngcontent-%COMP%]{border-color:#ff646499;animation:_ngcontent-%COMP%_damageBubble .5s ease-out}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.heal[_ngcontent-%COMP%]{border-color:#32cd3299;animation:_ngcontent-%COMP%_healBubble .5s ease-out}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.critical[_ngcontent-%COMP%]{border-color:#ffd700cc;border-width:3px;animation:_ngcontent-%COMP%_criticalBubble .6s cubic-bezier(.68,-.55,.265,1.55);box-shadow:0 0 20px #ffd70099}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.critical[_ngcontent-%COMP%]   .log-icon-main[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_criticalBounce .6s ease-out infinite}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.combo[_ngcontent-%COMP%]{border-color:#ff8c0099;animation:_ngcontent-%COMP%_comboBubble .5s ease-out}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.special[_ngcontent-%COMP%]{border-color:#8a2be299;background:linear-gradient(135deg,#8a2be233,#667eea33);animation:_ngcontent-%COMP%_specialBubble .7s ease-out}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.special[_ngcontent-%COMP%]   .log-icon-main[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_specialFloat 2s ease-in-out infinite}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]   .log-icon-main[_ngcontent-%COMP%]{font-size:1.4rem;filter:drop-shadow(0 0 8px currentColor);flex-shrink:0;animation:_ngcontent-%COMP%_iconPulse 2s ease-in-out infinite}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]   .log-text-compact[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-weight:700;white-space:nowrap}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]   .log-text-compact[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%]{font-size:1.1rem;color:#fff;font-weight:900;text-shadow:0 0 10px currentColor,0 2px 4px rgba(0,0,0,.5)}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble[_ngcontent-%COMP%]   .log-text-compact[_ngcontent-%COMP%]   .log-label[_ngcontent-%COMP%]{font-size:.75rem;color:#fffc;text-transform:uppercase;letter-spacing:1px;font-weight:800}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.damage[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%]{color:#ff6b6b;text-shadow:0 0 15px rgba(255,107,107,.8),0 2px 4px rgba(0,0,0,.5)}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.heal[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%]{color:#32cd32;text-shadow:0 0 15px rgba(50,205,50,.8),0 2px 4px rgba(0,0,0,.5)}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.critical[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%]{color:gold;font-size:1.3rem;text-shadow:0 0 20px rgb(255,215,0),0 2px 4px rgba(0,0,0,.5);animation:_ngcontent-%COMP%_criticalTextGlow .5s ease-in-out infinite}.epic-log-compact[_ngcontent-%COMP%]   .log-stream[_ngcontent-%COMP%]   .log-bubble.combo[_ngcontent-%COMP%]   .log-value[_ngcontent-%COMP%]{color:#ff8c00;text-shadow:0 0 15px rgba(255,140,0,.8),0 2px 4px rgba(0,0,0,.5)}@keyframes _ngcontent-%COMP%_bubblePop{0%{transform:scale(0);opacity:0}70%{transform:scale(1.15)}to{transform:scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_damageBubble{0%,to{transform:scale(1)}25%{transform:scale(1.1) rotate(-3deg)}75%{transform:scale(1.1) rotate(3deg)}}@keyframes _ngcontent-%COMP%_healBubble{0%{transform:scale(.8) translateY(10px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_criticalBubble{0%{transform:scale(.5) rotate(-10deg);opacity:0}50%{transform:scale(1.2) rotate(5deg)}to{transform:scale(1) rotate(0);opacity:1}}@keyframes _ngcontent-%COMP%_comboBubble{0%,to{transform:scale(1)}50%{transform:scale(1.15)}}@keyframes _ngcontent-%COMP%_specialBubble{0%{transform:scale(0) rotate(0);opacity:0}to{transform:scale(1) rotate(360deg);opacity:1}}@keyframes _ngcontent-%COMP%_iconPulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_criticalBounce{0%,to{transform:translateY(0) scale(1)}50%{transform:translateY(-5px) scale(1.2)}}@keyframes _ngcontent-%COMP%_specialFloat{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-3px) rotate(15deg)}}@keyframes _ngcontent-%COMP%_criticalTextGlow{0%,to{text-shadow:0 0 20px rgb(255,215,0),0 2px 4px rgba(0,0,0,.5)}50%{text-shadow:0 0 30px rgb(255,215,0),0 0 50px rgba(255,215,0,.5),0 2px 4px rgba(0,0,0,.5)}}.text-only-log[_ngcontent-%COMP%]{position:relative;z-index:1;margin:20px 32px;padding:16px 20px;background:linear-gradient(135deg,#000000b3,#141428b3);border:2px solid rgba(138,43,226,.3);border-radius:12px;min-height:120px;max-height:180px;overflow-y:auto;box-shadow:inset 0 0 30px #00000080,0 4px 20px #0000004d}@media (max-width: 768px){.text-only-log[_ngcontent-%COMP%]{margin:16px;padding:12px 16px;min-height:100px;max-height:150px;border-radius:10px}}@media (max-width: 480px){.text-only-log[_ngcontent-%COMP%]{margin:12px;padding:10px 12px;min-height:80px;max-height:120px}}.text-only-log[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.text-only-log[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000004d;border-radius:4px}.text-only-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8a2be280;border-radius:4px}.text-only-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8a2be2b3}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}@media (max-width: 768px){.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]{gap:6px}}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]{padding:10px 16px;background:#ffffff0d;border-radius:8px;border-left:3px solid rgba(138,43,226,.6);color:var(--text-primary);font-size:.95rem;line-height:1.5;animation:_ngcontent-%COMP%_textSlideIn .3s ease-out;transition:all .2s ease;box-shadow:0 1px 3px #0000001a}@media (max-width: 768px){.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]{padding:8px 12px;font-size:.85rem;line-height:1.4}}@media (max-width: 480px){.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]{padding:6px 10px;font-size:.8rem}}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]:hover{background:#8a2be214;transform:translate(5px);border-left-color:#8a2be2;box-shadow:0 2px 6px #00000026}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.damage[_ngcontent-%COMP%]{border-left-color:#ff6464;background:#ff64640d}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.damage[_ngcontent-%COMP%]:hover{background:#ff64641f;border-left-color:#f44}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.heal[_ngcontent-%COMP%]{border-left-color:#4ade80;background:#4ade800d}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.heal[_ngcontent-%COMP%]:hover{background:#4ade801f;border-left-color:#22c55e}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.critical[_ngcontent-%COMP%]{border-left-color:gold;border-left-width:4px;background:#ffd70014;font-weight:600;box-shadow:0 2px 8px #ffd70033;animation:_ngcontent-%COMP%_criticalTextPulse .5s ease-out,_ngcontent-%COMP%_textSlideIn .3s ease-out}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.critical[_ngcontent-%COMP%]:hover{background:#ffd70026;box-shadow:0 3px 12px #ffd70059;border-left-color:orange}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.combo[_ngcontent-%COMP%]{border-left-color:#ff8c00;background:#ff8c000d;font-weight:500}.text-only-log[_ngcontent-%COMP%]   .log-lines[_ngcontent-%COMP%]   .log-line.combo[_ngcontent-%COMP%]:hover{background:#ff8c001f;border-left-color:#f60}@keyframes _ngcontent-%COMP%_textSlideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_criticalTextPulse{0%{background:#ffd7000d;box-shadow:0 0 15px #ffd70033}50%{background:#ffd70026;box-shadow:0 0 30px #ffd70080}to{background:#ffd7000d;box-shadow:0 0 15px #ffd70033}}.battle-text-choices[_ngcontent-%COMP%]{position:relative;z-index:1;margin:20px 32px;padding:20px 24px;background:linear-gradient(135deg,#0009,#14142899);border:2px solid rgba(138,43,226,.3);border-radius:12px;box-shadow:inset 0 0 30px #0006,0 4px 20px #0000004d}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]{padding:12px 20px;margin-bottom:10px;background:#0000004d;border-left:4px solid rgba(138,43,226,.6);border-radius:8px;color:#ffffffe6;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:hover:not(.disabled){background:#8a2be233;border-left-color:#8a2be2;transform:translate(8px);color:#fff;box-shadow:0 4px 15px #8a2be24d}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:active:not(.disabled){transform:translate(12px);background:#8a2be24d}.battle-text-choices[_ngcontent-%COMP%]   .choice-item.disabled[_ngcontent-%COMP%]{opacity:.4;cursor:not-allowed;color:#ffffff80;border-left-color:#64646480}.battle-text-choices[_ngcontent-%COMP%]   .choice-item.disabled[_ngcontent-%COMP%]:hover{transform:none;background:#0000004d}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]   .choice-cost[_ngcontent-%COMP%]{margin-left:auto;font-size:.85rem;color:#ffc864cc;font-weight:500}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]   .choice-grade[_ngcontent-%COMP%]{padding:2px 8px;background:#64c8ff33;border:1px solid rgba(100,200,255,.5);border-radius:4px;font-size:.75rem;font-weight:700;color:#64c8ff}.battle-text-choices[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]   .choice-grade.grade-\\c808\\d559[_ngcontent-%COMP%] {background:#ffd70033;border-color:#ffd700cc;color:gold;box-shadow:0 0 10px #ffd7004d;animation:_ngcontent-%COMP%_gradePulse 2s ease-in-out infinite}.battle-text-choices[_ngcontent-%COMP%]   .martial-skills-text[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid rgba(138,43,226,.3)}.battle-text-choices[_ngcontent-%COMP%]   .martial-skills-text[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]{border-left-color:#ffd70099}.battle-text-choices[_ngcontent-%COMP%]   .martial-skills-text[_ngcontent-%COMP%]   .choice-item[_ngcontent-%COMP%]:hover:not(.disabled){border-left-color:gold;background:#ffd70026;box-shadow:0 4px 15px #ffd7004d}@keyframes _ngcontent-%COMP%_gradePulse{0%,to{box-shadow:0 0 10px #ffd7004d}50%{box-shadow:0 0 20px #ffd70099}}@media (max-width: 768px){.battle-choices[_ngcontent-%COMP%]{margin:24px 0}}.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;background:#6464644d}.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]:disabled:hover{transform:none;background:#6464644d}.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-cost[_ngcontent-%COMP%]{margin-left:8px;font-size:.85rem;color:#ffc864e6;font-weight:500}@media (max-width: 768px){.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-cost[_ngcontent-%COMP%]{font-size:.8rem;margin-left:6px}}@media (max-width: 480px){.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-cost[_ngcontent-%COMP%]{display:block;margin-left:0;margin-top:4px;font-size:.75rem}}.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-grade[_ngcontent-%COMP%]{margin-left:8px;padding:2px 8px;background:#64c8ff4d;border:1px solid rgba(100,200,255,.6);border-radius:4px;font-size:.75rem;font-weight:700;color:#64c8ff}@media (max-width: 480px){.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-grade[_ngcontent-%COMP%]{margin-left:6px;padding:2px 6px;font-size:.7rem}}.battle-choices[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]   .choice-grade.grade-\\c808\\d559[_ngcontent-%COMP%] {background:#ffd7004d;border-color:#ffd700e6;color:gold;box-shadow:0 0 10px #ffd70066;animation:_ngcontent-%COMP%_gradeGlow 2s ease-in-out infinite}.battle-choices[_ngcontent-%COMP%]   .martial-skill-choice[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]{border-left-color:#ffd70099}.battle-choices[_ngcontent-%COMP%]   .martial-skill-choice[_ngcontent-%COMP%]   .choice-button[_ngcontent-%COMP%]:hover:not(:disabled){border-left-color:gold;background:#ffd7001a}@keyframes _ngcontent-%COMP%_gradeGlow{0%,to{box-shadow:0 0 10px #ffd70066}50%{box-shadow:0 0 20px #ffd700b3}}.flat-battle[_ngcontent-%COMP%]{margin:30px 0;padding:0;background:transparent;border:none;box-shadow:none}.flat-battle[_ngcontent-%COMP%]   .battle-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid rgba(150,150,150,.3)}@media (max-width: 768px){.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:16px}}@media (max-width: 480px){.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]{margin-bottom:16px;padding-bottom:12px}}.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:400;color:#000c;margin:0 0 10px;letter-spacing:8px}@media (max-width: 768px){.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:6px}}@media (max-width: 480px){.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;letter-spacing:4px}}.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   .turn-text[_ngcontent-%COMP%]{font-size:.95rem;color:#646464cc;font-style:italic;margin:0}@media (max-width: 768px){.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   .turn-text[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 480px){.flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   .turn-text[_ngcontent-%COMP%]{font-size:.8rem}}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr;gap:30px;align-items:start}@media (max-width: 768px){.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .vs-divider[_ngcontent-%COMP%]{order:2;padding:12px 0;font-size:1.2rem}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .player-side[_ngcontent-%COMP%]{order:1}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .enemy-side[_ngcontent-%COMP%]{order:3}}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]{background:#fafafacc;border:1px solid rgba(200,200,200,.4);border-radius:4px;padding:20px;transition:all .3s ease}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant.active-turn[_ngcontent-%COMP%]{border-color:#64646499;box-shadow:0 2px 8px #0000001a}@media (max-width: 768px){.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 480px){.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]{padding:12px}}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid rgba(200,200,200,.3)}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#000000d9;margin:0}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   .level-tag[_ngcontent-%COMP%]{font-size:.75rem;color:#646464b3;padding:2px 8px;background:#c8c8c84d;border-radius:3px}@media (max-width: 768px){.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]{margin-bottom:12px;padding-bottom:10px}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   .level-tag[_ngcontent-%COMP%]{font-size:.7rem;padding:2px 6px}}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}@media (max-width: 768px){.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]{gap:10px}}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row.compact[_ngcontent-%COMP%]{margin-top:8px;padding-top:12px;border-top:1px solid rgba(200,200,200,.2)}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.85rem;color:#646464cc;min-width:40px;font-weight:500}@media (max-width: 768px){.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.8rem;min-width:36px}}@media (max-width: 480px){.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem;min-width:32px}}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:10px}@media (max-width: 768px){.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]{gap:8px}}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]{flex:1;height:8px;background:#dcdcdc99;border-radius:4px;overflow:hidden}@media (max-width: 768px){.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]{height:10px}}@media (max-width: 480px){.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]{height:12px}}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease;border-radius:4px}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.hp[_ngcontent-%COMP%]{background:#e57373}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.hp.low[_ngcontent-%COMP%]{background:#ef5350}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.enemy-hp[_ngcontent-%COMP%]{background:#ba68c8}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.enemy-hp.low[_ngcontent-%COMP%]{background:#ab47bc}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.mp[_ngcontent-%COMP%]{background:#64b5f6}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill.internal[_ngcontent-%COMP%]{background:#ffb74d}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:.8rem;color:#646464cc;min-width:60px;text-align:right;font-variant-numeric:tabular-nums}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value-inline[_ngcontent-%COMP%]{font-size:.85rem;color:#323232e6;font-weight:600;font-variant-numeric:tabular-nums}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-separator[_ngcontent-%COMP%]{color:#96969680;margin:0 6px}.flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .vs-divider[_ngcontent-%COMP%]{font-size:.9rem;font-weight:300;color:#96969699;text-align:center;padding-top:50px;letter-spacing:2px}.dark-theme[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]{background:#1e232d;border-color:#3a3a3a;box-shadow:0 2px 8px #0000004d}.dark-theme[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#e8e8e8}.dark-theme[_ngcontent-%COMP%]   .story-blocks[_ngcontent-%COMP%]   .story-block.choice-result[_ngcontent-%COMP%]{background:#282d37;border-color:var(--accent-primary)}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]{border-bottom-color:#6464644d}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#ffffffe6}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-title[_ngcontent-%COMP%]   .turn-text[_ngcontent-%COMP%]{color:#c8c8c8b3}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]{background:#1e1e1ecc;border-color:#64646466}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant.active-turn[_ngcontent-%COMP%]{border-color:#96969699;box-shadow:0 2px 8px #0000004d}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]{border-bottom-color:#6464644d}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#ffffffe6}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .combatant-header[_ngcontent-%COMP%]   .level-tag[_ngcontent-%COMP%]{background:#6464644d;color:#c8c8c8b3}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row.compact[_ngcontent-%COMP%]{border-top-color:#64646433}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#c8c8c8b3}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]{background:#3c3c3c99}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-bar-wrapper[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#c8c8c8b3}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-value-inline[_ngcontent-%COMP%]{color:#dcdcdce6}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .combatant[_ngcontent-%COMP%]   .stats-list[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .stat-separator[_ngcontent-%COMP%]{color:#64646480}.dark-theme[_ngcontent-%COMP%]   .flat-battle[_ngcontent-%COMP%]   .battle-board[_ngcontent-%COMP%]   .vs-divider[_ngcontent-%COMP%]{color:#96969680}.feature-map-floating-btn[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:96px;z-index:100000!important}.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]{width:56px;height:56px;background:linear-gradient(135deg,#f093fb,#f5576c);border:none;border-radius:16px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 4px 16px #f5576c66,0 2px 8px #0000001a;color:#fff;gap:2px;padding:8px}.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 8px 24px #f5576c80,0 4px 12px #00000026}.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.98)}.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);box-shadow:0 8px 24px #667eea99,0 4px 12px #0003}.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:transform .4s cubic-bezier(.4,0,.2,1)}.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]   .btn-label[_ngcontent-%COMP%]{font-size:10px;font-weight:700;letter-spacing:-.3px;margin-top:2px}.feature-map-panel[_ngcontent-%COMP%]{position:fixed;bottom:90px;right:20px;width:420px;max-height:600px;background:var(--bg-primary);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:20px;border:1px solid var(--border-color);box-shadow:0 10px 40px #0003;z-index:100000!important;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px 16px;background:linear-gradient(135deg,#f093fb1a,#f5576c1a);border-bottom:1px solid var(--border-color);flex-shrink:0}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-primary);margin:0;display:flex;align-items:center;gap:8px}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:32px;height:32px;background:#ffffff1a;border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-size:24px;line-height:1;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ef444433;border-color:#ef444466;color:#ef4444;transform:scale(1.1)}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]{flex:1;overflow:hidden}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-labels{background:var(--bg-secondary);border-bottom:1px solid var(--border-color)}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab{min-width:120px}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab .mdc-tab__content{display:flex;align-items:center;gap:8px}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab .tab-icon{font-size:18px;transition:transform .2s ease}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab .tab-label{font-weight:600;font-size:14px}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab:hover .tab-icon{transform:scale(1.1)}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab.mdc-tab--active .tab-icon{animation:_ngcontent-%COMP%_bounce .5s ease}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-header{border-bottom:none}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mdc-tab-indicator__content--underline{border-color:var(--accent-color);border-width:3px}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{flex:1;overflow:hidden}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-content{overflow-y:visible;height:100%}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-content[_ngcontent-%COMP%]{padding:20px;max-height:100%;overflow-y:auto}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary);border-radius:4px}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--accent-color)}.feature-map-panel[_ngcontent-%COMP%]   .feature-section[_ngcontent-%COMP%]{margin-bottom:24px}.feature-map-panel[_ngcontent-%COMP%]   .feature-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.feature-map-panel[_ngcontent-%COMP%]   .feature-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--text-primary);margin:0 0 12px;display:flex;align-items:center;gap:8px;padding-bottom:8px;border-bottom:1px solid var(--border-color)}.feature-map-panel[_ngcontent-%COMP%]   .feature-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}.feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 14px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;cursor:pointer;transition:all .2s ease}.feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary);border-color:var(--accent-color);transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-name[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--text-primary);line-height:1.3}.feature-map-panel[_ngcontent-%COMP%]   .minimap-content[_ngcontent-%COMP%]{padding:16px;height:100%;overflow-y:auto;display:flex;flex-direction:column;gap:16px}.feature-map-panel[_ngcontent-%COMP%]   .minimap-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.feature-map-panel[_ngcontent-%COMP%]   .minimap-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary);border-radius:3px}.feature-map-panel[_ngcontent-%COMP%]   .minimap-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.feature-map-panel[_ngcontent-%COMP%]   .minimap-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--accent-color)}.feature-map-panel[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea1a,#764ba21a);padding:16px;border-radius:12px;border:1px solid rgba(102,126,234,.2)}.feature-map-panel[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;font-size:13px;color:var(--text-primary);font-weight:600}.feature-map-panel[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%]   .minimap-stats[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.feature-map-panel[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%]   .minimap-stats[_ngcontent-%COMP%]   .stat-badge[_ngcontent-%COMP%]{padding:6px 12px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;font-size:12px;font-weight:600;color:var(--text-primary);white-space:nowrap}.feature-map-panel[_ngcontent-%COMP%]   .minimap-canvas[_ngcontent-%COMP%]{flex:1;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color);padding:16px;min-height:300px;overflow-y:auto}.feature-map-panel[_ngcontent-%COMP%]   .minimap-canvas[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.feature-map-panel[_ngcontent-%COMP%]   .minimap-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-tertiary);border-radius:3px}.feature-map-panel[_ngcontent-%COMP%]   .minimap-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;padding:10px;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:10px;transition:all .2s ease;position:relative}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]:hover{border-color:var(--accent-color);background:var(--bg-primary);transform:translate(2px)}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini.node-start[_ngcontent-%COMP%]{border-color:#22c55e80;background:#22c55e0d}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini.node-story[_ngcontent-%COMP%]{border-color:#3b82f680;background:#3b82f60d}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini.node-choice[_ngcontent-%COMP%]{border-color:#a855f780;background:#a855f70d}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini.node-current[_ngcontent-%COMP%]{border-color:#f5576cb3;background:#f5576c1a;box-shadow:0 0 20px #f5576c33}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini.node-current[_ngcontent-%COMP%]   .node-icon-mini[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .node-icon-mini[_ngcontent-%COMP%]{font-size:16px;flex-shrink:0;width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:var(--bg-primary);border-radius:8px;border:1px solid var(--border-color)}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .node-content-mini[_ngcontent-%COMP%]{flex:1}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .node-content-mini[_ngcontent-%COMP%]   .node-label-mini[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-primary);margin-bottom:4px;line-height:1.4}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .node-content-mini[_ngcontent-%COMP%]   .node-choices-mini[_ngcontent-%COMP%]{margin-top:8px;padding-top:8px;border-top:1px solid var(--border-color)}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .node-content-mini[_ngcontent-%COMP%]   .node-choices-mini[_ngcontent-%COMP%]   .choice-preview-mini[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary);padding:4px 0;line-height:1.3}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .node-content-mini[_ngcontent-%COMP%]   .node-choices-mini[_ngcontent-%COMP%]   .more-choices[_ngcontent-%COMP%]{font-size:10px;color:var(--accent-color);font-weight:700;margin-top:4px}.feature-map-panel[_ngcontent-%COMP%]   .flow-nodes-mini[_ngcontent-%COMP%]   .flow-node-mini[_ngcontent-%COMP%]   .flow-connector-mini[_ngcontent-%COMP%]{position:absolute;left:18px;top:100%;width:2px;height:8px;background:var(--border-color)}.feature-map-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.feature-map-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.5}.feature-map-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:var(--text-primary);font-weight:600;font-size:14px}.feature-map-panel[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);font-weight:400}.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;padding:12px;background:var(--bg-secondary);border-radius:10px;border:1px solid var(--border-color)}.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]   .legend-item-mini[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:11px;font-weight:600;color:var(--text-secondary)}.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]   .legend-item-mini[_ngcontent-%COMP%]   .legend-icon-mini[_ngcontent-%COMP%]{font-size:14px;width:22px;height:22px;display:flex;align-items:center;justify-content:center;background:var(--bg-tertiary);border-radius:6px;border:1px solid var(--border-color)}.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]   .legend-item-mini[_ngcontent-%COMP%]   .legend-icon-mini.start[_ngcontent-%COMP%]{border-color:#22c55e80;background:#22c55e1a}.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]   .legend-item-mini[_ngcontent-%COMP%]   .legend-icon-mini.story[_ngcontent-%COMP%]{border-color:#3b82f680;background:#3b82f61a}.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]   .legend-item-mini[_ngcontent-%COMP%]   .legend-icon-mini.choice[_ngcontent-%COMP%]{border-color:#a855f780;background:#a855f71a}.feature-map-panel[_ngcontent-%COMP%]   .minimap-legend[_ngcontent-%COMP%]   .legend-item-mini[_ngcontent-%COMP%]   .legend-icon-mini.current[_ngcontent-%COMP%]{border-color:#f5576c80;background:#f5576c1a}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}@media (max-width: 768px){.feature-map-floating-btn[_ngcontent-%COMP%]{bottom:16px;right:88px}.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]{width:52px;height:52px}.feature-map-panel[_ngcontent-%COMP%]{bottom:80px;right:16px;left:16px;width:auto;max-height:70vh}.feature-map-panel[_ngcontent-%COMP%]   .feature-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]{padding:16px;overflow:visible}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:18px;margin-bottom:20px}.inventory-panel.mobile[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]{gap:8px;padding:0}.inventory-panel.mobile[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%], .inventory-panel.mobile[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-rings-row[_ngcontent-%COMP%]{gap:8px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)!important;gap:6px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]{min-height:70px;padding:6px;position:relative}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .cell-icon[_ngcontent-%COMP%]{font-size:22px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{font-size:10px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .quick-equip-btn[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px;width:24px;height:24px;background:#10b981e6;border:1px solid rgb(16,185,129);border-radius:6px;font-size:14px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;z-index:10;padding:0}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .quick-equip-btn[_ngcontent-%COMP%]:active{transform:scale(.9);background:#10b981}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .quick-equip-btn[_ngcontent-%COMP%]:hover{background:#10b981;box-shadow:0 0 8px #10b98199}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]{min-width:80px;min-height:80px;touch-action:manipulation}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:24px}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%]{font-size:11px}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%]{width:28px;height:28px;font-size:18px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{padding:14px 12px;font-size:14px;min-height:48px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]{flex-wrap:wrap;gap:8px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 14px;font-size:13px;min-height:44px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]{width:100%}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;font-size:14px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   .btn-auto-sort[_ngcontent-%COMP%]{padding:10px 14px;min-height:44px}}.character-info-content[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;height:100%}.character-info-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.character-info-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary);border-radius:3px}.character-info-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.character-info-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--accent-color)}.character-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.character-header[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;padding:20px;background:linear-gradient(135deg,#667eea1a,#764ba21a);border-radius:16px;border:1px solid rgba(102,126,234,.2)}.character-header[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]{position:relative}.character-header[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 16px #667eea66}.character-header[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]   .avatar-initial[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.2)}.character-header[_ngcontent-%COMP%]   .character-avatar[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{position:absolute;bottom:-6px;right:-6px;background:linear-gradient(135deg,#f093fb,#f5576c);color:#fff;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:700;box-shadow:0 2px 8px #f5576c66}.character-header[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]{flex:1}.character-header[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--text-primary);margin:0 0 12px}.character-header[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .exp-bar-container[_ngcontent-%COMP%]   .exp-bar[_ngcontent-%COMP%]{height:8px;background:var(--bg-secondary);border-radius:4px;overflow:hidden;margin-bottom:6px;border:1px solid var(--border-color)}.character-header[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .exp-bar-container[_ngcontent-%COMP%]   .exp-bar[_ngcontent-%COMP%]   .exp-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);transition:width .3s ease}.character-header[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .exp-bar-container[_ngcontent-%COMP%]   .exp-text[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-secondary)}.character-status-bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color)}.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:6px}.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar-label[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:16px}.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar-label[_ngcontent-%COMP%]   .status-name[_ngcontent-%COMP%]{font-weight:700;color:var(--text-primary);font-size:14px}.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar-label[_ngcontent-%COMP%]   .status-value[_ngcontent-%COMP%]{margin-left:auto;font-size:13px;font-weight:600;color:var(--text-secondary)}.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]{height:12px;background:var(--bg-tertiary);border-radius:6px;overflow:hidden;border:1px solid var(--border-color)}.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .status-bar-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease}.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar.hp-bar[_ngcontent-%COMP%]   .status-bar-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ef4444,#dc2626)}.character-status-bars[_ngcontent-%COMP%]   .status-bar-item[_ngcontent-%COMP%]   .status-bar.mp-bar[_ngcontent-%COMP%]   .status-bar-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3b82f6,#2563eb)}.character-stats[_ngcontent-%COMP%]{padding:16px;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color)}.character-stats[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);margin:0 0 16px;display:flex;align-items:center;gap:8px}.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:var(--bg-tertiary);border-radius:10px;border:1px solid var(--border-color);transition:all .2s ease}.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:var(--accent-color)}.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:24px}.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-name[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-primary)}.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value.highlight[_ngcontent-%COMP%]{color:var(--accent-color)}.character-skills[_ngcontent-%COMP%]{padding:16px;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color)}.character-skills[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);margin:0 0 16px;display:flex;align-items:center;gap:8px}.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]{padding:14px;background:var(--bg-tertiary);border-radius:10px;border:1px solid var(--border-color);transition:all .2s ease;position:relative}.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px #0000001a;border-color:var(--accent-color)}.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--text-primary)}.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-level[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--accent-color);background:#667eea1a;padding:2px 8px;border-radius:6px}.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-description[_ngcontent-%COMP%]{margin:0 0 10px;font-size:12px;color:var(--text-secondary);line-height:1.5}.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:6px;font-size:11px;font-weight:600}.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-type-badge.type-combat[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444;border:1px solid rgba(239,68,68,.2)}.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-type-badge.type-magic[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6;border:1px solid rgba(59,130,246,.2)}.character-skills[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-type-badge.type-passive[_ngcontent-%COMP%]{background:#22c55e1a;color:#22c55e;border:1px solid rgba(34,197,94,.2)}.empty-character-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;min-height:400px}.empty-character-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px;opacity:.3}.empty-character-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin:0 0 12px}.empty-character-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:var(--text-secondary);font-size:14px}.empty-character-state[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%]{font-size:12px;color:var(--text-tertiary);font-weight:400}@media (max-width: 480px){.feature-map-floating-btn[_ngcontent-%COMP%]{right:80px}.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]{width:48px;height:48px}.feature-map-floating-btn[_ngcontent-%COMP%]   .feature-map-toggle[_ngcontent-%COMP%]   .btn-label[_ngcontent-%COMP%]{font-size:9px}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-header[_ngcontent-%COMP%]{padding:16px 18px}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.feature-map-panel[_ngcontent-%COMP%]   .feature-map-content[_ngcontent-%COMP%]{padding:16px}.feature-map-panel[_ngcontent-%COMP%]   .feature-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:13px}.feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]{padding:10px 12px}.feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{font-size:18px}.feature-map-panel[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-name[_ngcontent-%COMP%]{font-size:12px}.character-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.character-header[_ngcontent-%COMP%]   .character-basic-info[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-size:20px}.character-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%], .organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%], .organization-facilities[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]{padding:12px;overflow:visible}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;margin-bottom:16px}.inventory-panel.mobile[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]{padding:0;gap:6px}.inventory-panel.mobile[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%], .inventory-panel.mobile[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-rings-row[_ngcontent-%COMP%]{gap:6px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)!important;gap:4px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]{min-height:65px;padding:4px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .cell-icon[_ngcontent-%COMP%]{font-size:20px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{font-size:9px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-grid-cells[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]   .quick-equip-btn[_ngcontent-%COMP%]{width:22px;height:22px;font-size:12px}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]{min-width:75px;min-height:75px}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:26px}.inventory-panel.mobile[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%]{font-size:10px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{padding:12px 8px;font-size:13px}.inventory-panel.mobile[_ngcontent-%COMP%]   .inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}}.organization-info-content[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;height:100%}.organization-info-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.organization-info-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary);border-radius:3px}.organization-info-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.organization-info-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--accent-color)}.organization-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.organization-header[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;padding:20px;background:linear-gradient(135deg,#f59e0b1a,#d977061a);border-radius:16px;border:1px solid rgba(245,158,11,.2)}.organization-header[_ngcontent-%COMP%]   .org-icon-wrapper[_ngcontent-%COMP%]{position:relative}.organization-header[_ngcontent-%COMP%]   .org-icon-wrapper[_ngcontent-%COMP%]   .org-icon[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#f59e0b,#d97706);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 16px #f59e0b66;font-size:40px}.organization-header[_ngcontent-%COMP%]   .org-icon-wrapper[_ngcontent-%COMP%]   .org-level-badge[_ngcontent-%COMP%]{position:absolute;bottom:-6px;right:-6px;background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:700;box-shadow:0 2px 8px #8b5cf666}.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]{flex:1}.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--text-primary);margin:0 0 8px}.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:8px;font-size:12px;font-weight:700;margin-bottom:12px}.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-type-badge.type-guild[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444;border:1px solid rgba(239,68,68,.2)}.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-type-badge.type-faction[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6;border:1px solid rgba(59,130,246,.2)}.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-type-badge.type-clan[_ngcontent-%COMP%]{background:#22c55e1a;color:#22c55e;border:1px solid rgba(34,197,94,.2)}.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-type-badge.type-sect[_ngcontent-%COMP%]{background:#8b5cf61a;color:#8b5cf6;border:1px solid rgba(139,92,246,.2)}.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .org-type-badge.type-company[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b;border:1px solid rgba(245,158,11,.2)}.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .reputation-bar-container[_ngcontent-%COMP%]   .reputation-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:6px;font-size:12px;font-weight:600;color:var(--text-secondary)}.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .reputation-bar-container[_ngcontent-%COMP%]   .reputation-label[_ngcontent-%COMP%]   .rep-value[_ngcontent-%COMP%]{color:var(--accent-color)}.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .reputation-bar-container[_ngcontent-%COMP%]   .reputation-bar[_ngcontent-%COMP%]{height:8px;background:var(--bg-secondary);border-radius:4px;overflow:hidden;border:1px solid var(--border-color)}.organization-header[_ngcontent-%COMP%]   .org-basic-info[_ngcontent-%COMP%]   .reputation-bar-container[_ngcontent-%COMP%]   .reputation-bar[_ngcontent-%COMP%]   .reputation-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#f59e0b,#d97706);transition:width .3s ease}.organization-resources[_ngcontent-%COMP%]{padding:16px;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color)}.organization-resources[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);margin:0 0 16px;display:flex;align-items:center;gap:8px}.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:var(--bg-tertiary);border-radius:10px;border:1px solid var(--border-color);transition:all .2s ease}.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:var(--accent-color)}.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]   .resource-icon[_ngcontent-%COMP%]{font-size:24px}.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]   .resource-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]   .resource-info[_ngcontent-%COMP%]   .resource-name[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:var(--text-secondary);text-transform:uppercase}.organization-resources[_ngcontent-%COMP%]   .resources-grid[_ngcontent-%COMP%]   .resource-item[_ngcontent-%COMP%]   .resource-info[_ngcontent-%COMP%]   .resource-value[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary)}.organization-members[_ngcontent-%COMP%]{padding:16px;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color)}.organization-members[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.organization-members[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);margin:0;display:flex;align-items:center;gap:8px}.organization-members[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   .member-count[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--accent-color);background:#667eea1a;padding:4px 12px;border-radius:8px}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-height:400px;overflow-y:auto}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-tertiary);border-radius:3px}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--accent-color)}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]{padding:14px;background:var(--bg-tertiary);border-radius:12px;border:2px solid var(--border-color);cursor:pointer;transition:all .2s ease}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px #0000001a;border-color:var(--accent-color)}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card.selected[_ngcontent-%COMP%]{border-color:var(--accent-color);background:#667eea0d;box-shadow:0 0 0 2px #667eea33}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-avatar[_ngcontent-%COMP%]{position:relative}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-avatar[_ngcontent-%COMP%]   .avatar-emoji[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;font-size:24px;background:var(--bg-secondary);border-radius:50%;border:2px solid var(--border-color)}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-avatar[_ngcontent-%COMP%]   .member-level-badge[_ngcontent-%COMP%]{position:absolute;bottom:-4px;right:-4px;background:var(--accent-color);color:#fff;padding:2px 6px;border-radius:8px;font-size:10px;font-weight:700;box-shadow:0 2px 4px #0003}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]{flex:1}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:var(--text-primary);margin-bottom:4px}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:6px;font-size:11px;font-weight:600}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role.role-leader[_ngcontent-%COMP%]{background:#f59e0b33;color:#f59e0b}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role.role-vice_leader[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role.role-elder[_ngcontent-%COMP%]{background:#8b5cf633;color:#8b5cf6}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role.role-captain[_ngcontent-%COMP%]{background:#3b82f633;color:#3b82f6}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role.role-member[_ngcontent-%COMP%]{background:#22c55e33;color:#22c55e}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-basic[_ngcontent-%COMP%]   .member-role.role-recruit[_ngcontent-%COMP%]{background:#9ca3af33;color:#9ca3af}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-status-indicator[_ngcontent-%COMP%]{width:28px;height:28px;display:flex;align-items:center;justify-content:center;border-radius:50%;font-size:14px}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-status-indicator.status-active[_ngcontent-%COMP%]{background:#22c55e33;color:#22c55e}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-status-indicator.status-resting[_ngcontent-%COMP%]{background:#9ca3af33;color:#9ca3af}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-status-indicator.status-injured[_ngcontent-%COMP%]{background:#ef444433;color:#ef4444}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-header-row[_ngcontent-%COMP%]   .member-status-indicator.status-on_mission[_ngcontent-%COMP%]{background:#3b82f633;color:#3b82f6}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:10px}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%]{flex:1}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:10px;font-weight:600;color:var(--text-secondary);margin-bottom:4px;display:block}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%]   .stat-bar-mini[_ngcontent-%COMP%]{height:6px;background:var(--bg-secondary);border-radius:3px;overflow:hidden;border:1px solid var(--border-color)}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%]   .stat-bar-mini[_ngcontent-%COMP%]   .stat-bar-fill-mini[_ngcontent-%COMP%]{height:100%;transition:width .3s ease}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%]   .stat-bar-mini[_ngcontent-%COMP%]   .stat-bar-fill-mini.hp[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ef4444,#dc2626)}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-stats-mini[_ngcontent-%COMP%]   .stat-mini[_ngcontent-%COMP%]   .stat-bar-mini[_ngcontent-%COMP%]   .stat-bar-fill-mini.mp[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3b82f6,#2563eb)}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-specialty[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 10px;background:var(--bg-secondary);border-radius:8px;font-size:12px;margin-bottom:8px}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-specialty[_ngcontent-%COMP%]   .specialty-icon[_ngcontent-%COMP%]{font-size:14px}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-specialty[_ngcontent-%COMP%]   .specialty-text[_ngcontent-%COMP%]{flex:1;font-weight:600;color:var(--text-primary)}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-specialty[_ngcontent-%COMP%]   .loyalty-badge[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:var(--accent-color);background:#667eea1a;padding:2px 8px;border-radius:6px}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-internal-power[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 10px;background:linear-gradient(135deg,#ef44441a,#dc26261a);border-radius:8px;border:1px solid rgba(239,68,68,.2)}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-internal-power[_ngcontent-%COMP%]   .power-icon[_ngcontent-%COMP%]{font-size:14px}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-internal-power[_ngcontent-%COMP%]   .power-realm[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#ef4444;white-space:nowrap}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-internal-power[_ngcontent-%COMP%]   .power-bar-mini[_ngcontent-%COMP%]{flex:1;height:6px;background:#0003;border-radius:3px;overflow:hidden}.organization-members[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]   .member-internal-power[_ngcontent-%COMP%]   .power-bar-mini[_ngcontent-%COMP%]   .power-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ef4444,#dc2626);transition:width .3s ease}.organization-facilities[_ngcontent-%COMP%]{padding:16px;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color)}.organization-facilities[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);margin:0 0 16px;display:flex;align-items:center;gap:8px}.organization-facilities[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}.organization-facilities[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]   .facility-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 12px;background:var(--bg-tertiary);border-radius:8px;border:1px solid var(--border-color);transition:all .2s ease}.organization-facilities[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]   .facility-item[_ngcontent-%COMP%]:hover{transform:translate(4px);border-color:var(--accent-color)}.organization-facilities[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]   .facility-item[_ngcontent-%COMP%]   .facility-icon[_ngcontent-%COMP%]{font-size:20px}.organization-facilities[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]   .facility-item[_ngcontent-%COMP%]   .facility-name[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--text-primary)}.organization-territory[_ngcontent-%COMP%]{padding:16px;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color)}.organization-territory[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);margin:0 0 12px;display:flex;align-items:center;gap:8px}.organization-territory[_ngcontent-%COMP%]   .territory-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 14px;background:var(--bg-tertiary);border-radius:10px;border:1px solid var(--border-color)}.organization-territory[_ngcontent-%COMP%]   .territory-info[_ngcontent-%COMP%]   .territory-icon[_ngcontent-%COMP%]{font-size:24px}.organization-territory[_ngcontent-%COMP%]   .territory-info[_ngcontent-%COMP%]   .territory-name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:var(--text-primary)}.empty-organization-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;min-height:400px}.empty-organization-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px;opacity:.3}.empty-organization-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin:0 0 12px}.empty-organization-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:var(--text-secondary);font-size:14px}.empty-organization-state[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%]{font-size:12px;color:var(--text-tertiary);font-weight:400}.equipment-content[_ngcontent-%COMP%]{padding:12px;height:100%;overflow-y:visible}.equipment-content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--text-primary);margin:0 0 12px;display:flex;align-items:center;gap:6px}.equipped-items[_ngcontent-%COMP%]{margin-bottom:20px}.equipped-items.diablo-style[_ngcontent-%COMP%]{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px;padding:16px;box-shadow:0 6px 24px #00000080}.equipped-items[_ngcontent-%COMP%]   .equipment-grid-diablo[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr;gap:10px;margin-bottom:16px;min-height:auto;max-height:350px}.equipped-items[_ngcontent-%COMP%]   .equipment-grid-diablo[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.equipped-items[_ngcontent-%COMP%]   .equipment-grid-diablo[_ngcontent-%COMP%]   .equipment-column.center-column[_ngcontent-%COMP%]{justify-content:center;align-items:center}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:10px;padding:8px;min-width:90px;min-height:70px;transition:all .3s ease;position:relative;overflow:hidden;cursor:pointer}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 30% 30%,var(--bg-highlight),transparent);pointer-events:none}@media (max-width: 768px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]{min-width:100px;min-height:90px;padding:12px}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo.large[_ngcontent-%COMP%]{min-width:130px;min-height:140px}}@media (max-width: 480px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]{min-width:80px;min-height:80px;padding:10px}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:28px!important}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%]{font-size:11px}}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo.large[_ngcontent-%COMP%]{min-width:120px;min-height:130px}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[data-rarity=normal][_ngcontent-%COMP%]{border-color:#8a8a8a}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[data-rarity=magic][_ngcontent-%COMP%]{border-color:#6363f7;box-shadow:0 0 10px #6363f74d}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[data-rarity=rare][_ngcontent-%COMP%]{border-color:#ff0;box-shadow:0 0 10px #ffff004d}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[data-rarity=unique][_ngcontent-%COMP%]{border-color:#a57c3e;box-shadow:0 0 10px #a57c3e66}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[data-rarity=set][_ngcontent-%COMP%]{border-color:#0f0;box-shadow:0 0 15px #00ff004d}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[data-rarity=legendary][_ngcontent-%COMP%]{border-color:#ff8000;box-shadow:0 0 20px #ff800080;animation:_ngcontent-%COMP%_legendary-pulse 2s ease-in-out infinite}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]:hover{transform:scale(1.05);z-index:10}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{font-size:9px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px;text-align:center;font-weight:600}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content.empty[_ngcontent-%COMP%]{opacity:.3}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]   .item-icon-diablo[_ngcontent-%COMP%]{font-size:24px;text-shadow:0 2px 8px rgba(0,0,0,.5)}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]   .item-icon-diablo.large[_ngcontent-%COMP%]{font-size:36px}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]   .empty-icon-diablo[_ngcontent-%COMP%]{font-size:24px;opacity:.2}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]   .empty-icon-diablo.large[_ngcontent-%COMP%]{font-size:36px}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]   .item-name-short[_ngcontent-%COMP%]{font-size:10px;color:var(--text-primary);text-align:center;font-weight:500;line-height:1.2;max-width:80px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.equipped-items[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-content[_ngcontent-%COMP%]   .item-damage[_ngcontent-%COMP%]{font-size:11px;color:#ff6b6b;font-weight:700;text-shadow:0 0 8px rgba(255,107,107,.5)}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:10px;padding:12px;display:flex;flex-direction:column;gap:8px}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px;background:var(--bg-primary);border-radius:6px;border:1px solid var(--border-color);transition:all .3s ease}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:hover{background:var(--bg-highlight);transform:translate(2px)}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{font-size:18px;margin-right:8px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);font-weight:600;flex:1}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);text-shadow:0 0 10px currentColor;min-width:40px;text-align:right}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value.damage[_ngcontent-%COMP%]{color:#ff6b6b}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value.defense[_ngcontent-%COMP%]{color:#6363f7}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value.magic[_ngcontent-%COMP%]{color:#a78bfa}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px solid var(--border-color)}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);font-weight:600}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:15px;font-weight:700;text-shadow:0 0 10px currentColor}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-value.damage[_ngcontent-%COMP%]{color:#ff6b6b}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-value.defense[_ngcontent-%COMP%]{color:#6363f7}.equipped-items[_ngcontent-%COMP%]   .equipment-summary-diablo[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-value.magic[_ngcontent-%COMP%]{color:#a78bfa}@keyframes _ngcontent-%COMP%_legendary-pulse{0%,to{box-shadow:0 0 20px #ff800080}50%{box-shadow:0 0 30px #ff8000cc}}.equipped-items[_ngcontent-%COMP%]   .equipment-slots[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-bottom:20px}@media (max-width: 768px){.equipped-items[_ngcontent-%COMP%]   .equipment-slots[_ngcontent-%COMP%]{gap:14px;margin-bottom:16px}}@media (max-width: 480px){.equipped-items[_ngcontent-%COMP%]   .equipment-slots[_ngcontent-%COMP%]{gap:16px;margin-bottom:20px}}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px;padding:16px;transition:all .3s ease}@media (max-width: 768px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]{padding:14px}}@media (max-width: 480px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]{padding:16px;min-height:88px}}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]:hover{border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 4px 12px var(--shadow)}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border-color)}@media (max-width: 768px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]{gap:10px;margin-bottom:10px}}@media (max-width: 480px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]{gap:12px;margin-bottom:12px;padding-bottom:10px}}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:20px}@media (max-width: 768px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 480px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:24px}}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]   .slot-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary)}@media (max-width: 768px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]   .slot-name[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 480px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-header[_ngcontent-%COMP%]   .slot-name[_ngcontent-%COMP%]{font-size:16px}}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}@media (max-width: 768px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]{gap:14px}}@media (max-width: 480px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]{gap:16px}}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{font-size:32px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:var(--bg-tertiary);border-radius:8px}@media (max-width: 768px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{font-size:36px;width:52px;height:52px}}@media (max-width: 480px){.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{font-size:40px;width:56px;height:56px}}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{flex:1}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:var(--text-primary);margin-bottom:6px}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:6px;font-size:12px;font-weight:500}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat-badge.attack[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a52);color:#fff}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat-badge.defense[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4dabf7,#3b8cd2);color:#fff}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat-badge.special[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a78bfa,#8b5cf6);color:#fff}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .item-rarity[_ngcontent-%COMP%]{padding:4px 8px;border-radius:6px;font-size:11px;font-weight:600}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .item-rarity.rarity-common[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .item-rarity.rarity-uncommon[_ngcontent-%COMP%]{background:#51cf66;color:#fff}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .item-rarity.rarity-rare[_ngcontent-%COMP%]{background:#339af0;color:#fff}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .item-rarity.rarity-epic[_ngcontent-%COMP%]{background:#9775fa;color:#fff}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .item-rarity.rarity-legendary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff8c00,orange);color:#fff}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-empty[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;background:var(--bg-tertiary);border-radius:8px;border:2px dashed var(--border-color)}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-empty[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:20px;opacity:.5}.equipped-items[_ngcontent-%COMP%]   .equipment-slot[_ngcontent-%COMP%]   .slot-empty[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-tertiary)}.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));border-radius:12px;padding:16px;margin-top:20px}.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#fff;margin:0 0 12px}.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:8px;padding:12px;display:flex;flex-direction:column;align-items:center;gap:4px}.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:20px}.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:11px;color:#fffc;font-weight:500}.equipped-items[_ngcontent-%COMP%]   .equipment-summary[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .summary-stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#fff}.inventory-section[_ngcontent-%COMP%]{margin-top:24px}.inventory-section[_ngcontent-%COMP%]   .inventory-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.inventory-section[_ngcontent-%COMP%]   .inventory-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:var(--text-primary)}.inventory-section[_ngcontent-%COMP%]   .inventory-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:13px;padding:0 16px;height:36px}.inventory-section[_ngcontent-%COMP%]   .inventory-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;margin-right:6px}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:16px;padding:14px;background:var(--bg-secondary);border-radius:12px;border:1px solid var(--border-color)}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 18px;border-radius:10px;background:var(--bg-primary);border:2px solid var(--border-color);color:var(--text-secondary);font-size:14px;font-weight:600;transition:all .3s cubic-bezier(.175,.885,.32,1.275);min-width:auto;position:relative;overflow:hidden}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff1a;transform:translate(-50%,-50%);transition:width .4s,height .4s}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{font-size:22px;transition:all .3s ease;filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px;transition:all .3s ease}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:1}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--bg-hover);border-color:var(--primary-color);transform:translateY(-3px) scale(1.05);box-shadow:0 4px 12px #00000026}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:before{width:200%;height:200%}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   .filter-icon[_ngcontent-%COMP%]{transform:scale(1.15) rotate(5deg);filter:drop-shadow(0 4px 8px rgba(0,0,0,.3))}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{transform:scale(1.15)}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--primary-color);border-color:var(--primary-color);color:#fff;box-shadow:0 4px 16px rgba(var(--primary-rgb),.4);transform:translateY(-2px)}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_filter-active-bounce .6s ease-in-out;filter:drop-shadow(0 4px 8px rgba(255,255,255,.3))}.inventory-section[_ngcontent-%COMP%]   .inventory-filter-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_filter-active-bounce .6s ease-in-out}@keyframes _ngcontent-%COMP%_filter-active-bounce{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:16px;padding:8px}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]{all:unset;display:block;width:100%;cursor:pointer;position:relative}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{background:var(--bg-primary);border:2px solid var(--border-color);border-radius:16px;padding:20px 16px;transition:all .3s ease;position:relative;overflow:hidden;min-height:160px;display:flex;flex-direction:column;align-items:center;justify-content:center}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary);transform:scaleX(0);transition:transform .3s ease}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=common][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-color:#9e9e9e}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=common][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#9e9e9e,#757575)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=uncommon][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-color:#51cf66;background:linear-gradient(135deg,#51cf660d,#2e7d320d)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=uncommon][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#51cf66,#2e7d32)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=rare][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-color:#339af0;background:linear-gradient(135deg,#339af014,#1976d214)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=rare][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#339af0,#1976d2)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=epic][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-color:#9775fa;background:linear-gradient(135deg,#9775fa1a,#7b1fa21a)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=epic][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#9775fa,#7b1fa2)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=legendary][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-color:#ff8000;background:linear-gradient(135deg,#ff80001f,#e651001f);animation:_ngcontent-%COMP%_legendary-border-glow 2s ease-in-out infinite}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[data-rarity=legendary][_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#ff8000,#e65100)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]:hover   .item-card-content[_ngcontent-%COMP%]{transform:translateY(-6px);box-shadow:0 8px 24px var(--shadow);border-color:var(--accent-primary)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]:hover   .item-card-content[_ngcontent-%COMP%]:before{transform:scaleX(1)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-left:6px solid #ff6b6b!important;background:linear-gradient(135deg,rgba(255,107,107,.08) 0%,transparent 100%)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px rgba(255,107,107,.5))}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%]{color:#ff6b6b;font-weight:800}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b4d,#ff6b6b26);border-color:#ff6b6b;color:#ff6b6b}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-left:6px solid #4dabf7!important;background:linear-gradient(135deg,rgba(77,171,247,.08) 0%,transparent 100%)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px rgba(77,171,247,.5))}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%]{color:#4dabf7;font-weight:800}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4dabf74d,#4dabf726);border-color:#4dabf7;color:#4dabf7}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-left:6px solid #cc5de8!important;background:linear-gradient(135deg,rgba(204,93,232,.08) 0%,transparent 100%)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px rgba(204,93,232,.5))}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%]{color:#cc5de8;font-weight:800}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#cc5de84d,#cc5de826);border-color:#cc5de8;color:#cc5de8}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-left:6px solid #51cf66!important;background:linear-gradient(135deg,rgba(81,207,102,.08) 0%,transparent 100%)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px rgba(81,207,102,.5))}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%]{color:#51cf66;font-weight:800}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf664d,#51cf6626);border-color:#51cf66;color:#51cf66}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-left:6px solid #ffd43b!important;background:linear-gradient(135deg,rgba(255,212,59,.08) 0%,transparent 100%)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px rgba(255,212,59,.5))}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%]{color:#ffd43b;font-weight:800}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd43b4d,#ffd43b26);border-color:#ffd43b;color:#ffd43b}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]   .delete-item-btn[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;width:26px;height:26px;padding:0;min-width:26px;opacity:0;transition:opacity .2s ease;background:#f44336e6;border-radius:50%;z-index:10}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]   .delete-item-btn[_ngcontent-%COMP%]:hover{background:#f44336;transform:scale(1.1)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]   .delete-item-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;color:#fff}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card-trigger[_ngcontent-%COMP%]:hover   .delete-item-btn[_ngcontent-%COMP%]{opacity:1}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-left:6px solid #ff6b6b!important;background:linear-gradient(135deg,rgba(255,107,107,.12) 0%,transparent 100%)!important}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 12px rgba(255,107,107,.8)) drop-shadow(0 4px 8px rgba(255,107,107,.4));animation:_ngcontent-%COMP%_weapon-pulse 2s ease-in-out infinite}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ff8787,#ff6b6b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%]{color:#ff6b6b;font-weight:800}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-weapon[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b66,#ff6b6b33);border-color:#ff6b6b;color:#ff6b6b}@keyframes _ngcontent-%COMP%_weapon-pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-left:6px solid #4dabf7!important;background:linear-gradient(135deg,rgba(77,171,247,.12) 0%,transparent 100%)!important}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 12px rgba(77,171,247,.8)) drop-shadow(0 4px 8px rgba(77,171,247,.4));animation:_ngcontent-%COMP%_armor-shield 2.5s ease-in-out infinite}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4dabf7,#74c0fc,#4dabf7);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%]{color:#4dabf7;font-weight:800}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-armor[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4dabf766,#4dabf733);border-color:#4dabf7;color:#4dabf7}@keyframes _ngcontent-%COMP%_armor-shield{0%,to{filter:drop-shadow(0 0 12px rgba(77,171,247,.8))}50%{filter:drop-shadow(0 0 20px rgb(77,171,247))}}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-left:6px solid #cc5de8!important;background:linear-gradient(135deg,rgba(204,93,232,.12) 0%,transparent 100%)!important}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 12px rgba(204,93,232,.8)) drop-shadow(0 4px 8px rgba(204,93,232,.4));animation:_ngcontent-%COMP%_accessory-glow 3s ease-in-out infinite}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,#cc5de8,#e599f7,#cc5de8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%]{color:#cc5de8;font-weight:800}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-accessory[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#cc5de866,#cc5de833);border-color:#cc5de8;color:#cc5de8}@keyframes _ngcontent-%COMP%_accessory-glow{0%,to{filter:drop-shadow(0 0 12px rgba(204,93,232,.8));transform:rotate(0)}50%{filter:drop-shadow(0 0 20px rgb(204,93,232));transform:rotate(5deg)}}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-left:6px solid #51cf66!important;background:linear-gradient(135deg,rgba(81,207,102,.12) 0%,transparent 100%)!important}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 12px rgba(81,207,102,.8)) drop-shadow(0 4px 8px rgba(81,207,102,.4));animation:_ngcontent-%COMP%_consumable-bounce 2s ease-in-out infinite}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#8ce99a,#51cf66);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%]{color:#51cf66;font-weight:800}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-consumable[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf6666,#51cf6633);border-color:#51cf66;color:#51cf66}@keyframes _ngcontent-%COMP%_consumable-bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]{border-left:6px solid #ffd43b!important;background:linear-gradient(135deg,rgba(255,212,59,.12) 0%,transparent 100%)!important}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 12px rgba(255,212,59,.8)) drop-shadow(0 4px 8px rgba(255,212,59,.4));animation:_ngcontent-%COMP%_material-shine 3s ease-in-out infinite}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd43b,#ffe066,#ffd43b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%]{color:#ffd43b;font-weight:800}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item.item-type-material[_ngcontent-%COMP%]   .item-card-content[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd43b66,#ffd43b33);border-color:#ffd43b;color:#ffd43b}@keyframes _ngcontent-%COMP%_material-shine{0%,to{filter:drop-shadow(0 0 12px rgba(255,212,59,.8))}50%{filter:drop-shadow(0 0 20px rgb(255,212,59)) drop-shadow(0 0 30px rgba(255,212,59,.5))}}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:2px solid var(--border-color);border-radius:16px;padding:20px 16px;transition:all .3s ease;cursor:pointer;position:relative;overflow:hidden;min-height:160px;display:flex;flex-direction:column;align-items:center;justify-content:center}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary);transform:scaleX(0);transition:transform .3s ease}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=common][_ngcontent-%COMP%]{border-color:#9e9e9e}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=common][_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#9e9e9e,#757575)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=uncommon][_ngcontent-%COMP%]{border-color:#51cf66;background:linear-gradient(135deg,#51cf660d,#2e7d320d)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=uncommon][_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#51cf66,#2e7d32)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=rare][_ngcontent-%COMP%]{border-color:#339af0;background:linear-gradient(135deg,#339af014,#1976d214)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=rare][_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#339af0,#1976d2)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=epic][_ngcontent-%COMP%]{border-color:#9775fa;background:linear-gradient(135deg,#9775fa1a,#7b1fa21a)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=epic][_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#9775fa,#7b1fa2)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=legendary][_ngcontent-%COMP%]{border-color:#ff8000;background:linear-gradient(135deg,#ff80001f,#e651001f);animation:_ngcontent-%COMP%_legendary-border-glow 2s ease-in-out infinite}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[data-rarity=legendary][_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#ff8000,#e65100)}@keyframes _ngcontent-%COMP%_legendary-border-glow{0%,to{box-shadow:0 0 15px #ff80004d}50%{box-shadow:0 0 25px #ff800080}}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .delete-item-btn[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;width:26px;height:26px;padding:0;min-width:26px;opacity:0;transition:opacity .2s ease;background:#f44336e6;border-radius:50%;z-index:10}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .delete-item-btn[_ngcontent-%COMP%]:hover{background:#f44336;transform:scale(1.1)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .delete-item-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;color:#fff}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover   .delete-item-btn[_ngcontent-%COMP%]{opacity:1}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 12px 32px var(--shadow);border-color:var(--accent-primary);cursor:pointer}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover   .item-card-icon[_ngcontent-%COMP%]{transform:scale(1.25) rotate(5deg);filter:drop-shadow(0 8px 16px rgba(0,0,0,.5))}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover   .item-card-icon[_ngcontent-%COMP%]:after{opacity:1!important;animation:_ngcontent-%COMP%_sparkle-hover .6s ease-in-out infinite}@keyframes _ngcontent-%COMP%_sparkle-hover{0%,to{transform:scale(1) rotate(0);opacity:1}50%{transform:scale(1.2) rotate(180deg);opacity:.7}}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]{font-size:4rem;text-align:center;margin-bottom:16px;filter:drop-shadow(0 4px 8px rgba(0,0,0,.4));transition:all .4s cubic-bezier(.175,.885,.32,1.275);z-index:1;position:relative}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-icon[_ngcontent-%COMP%]:after{content:"\\2728";position:absolute;top:-8px;right:-8px;font-size:1rem;opacity:0;animation:_ngcontent-%COMP%_sparkle 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_sparkle{0%,to{opacity:0;transform:scale(0) rotate(0)}25%{opacity:1;transform:scale(1) rotate(45deg)}50%{opacity:0;transform:scale(.8) rotate(90deg)}}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]{width:100%;z-index:1}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:var(--text-primary);margin-bottom:4px;text-align:center;line-height:1.3;text-shadow:0 1px 2px rgba(0,0,0,.5)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-name.rarity-text-common[_ngcontent-%COMP%]{color:#9ca3af}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-name.rarity-text-uncommon[_ngcontent-%COMP%]{color:#51cf66;font-weight:800}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-name.rarity-text-rare[_ngcontent-%COMP%]{color:#fbbf24;font-weight:800}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-name.rarity-text-epic[_ngcontent-%COMP%]{color:#a855f7;font-weight:900}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-name.rarity-text-legendary[_ngcontent-%COMP%]{color:#ff8000;font-weight:900;animation:_ngcontent-%COMP%_legendary-text-glow 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_legendary-text-glow{0%,to{text-shadow:0 0 8px rgba(255,128,0,.6),0 1px 2px rgba(0,0,0,.5)}50%{text-shadow:0 0 12px rgba(255,128,0,.9),0 1px 2px rgba(0,0,0,.5)}}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-rarity-badge[_ngcontent-%COMP%]{font-size:9px;font-weight:700;text-align:center;padding:3px 8px;margin:4px auto;border-radius:10px;text-transform:uppercase;letter-spacing:.5px;display:inline-block;box-shadow:0 2px 4px #0000004d}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-rarity-badge.rarity-badge-common[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#4b5563);color:#d1d5db;border:1px solid #9ca3af}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-rarity-badge.rarity-badge-uncommon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:1px solid #34d399;box-shadow:0 0 8px #10b98166}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-rarity-badge.rarity-badge-rare[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;border:1px solid #fbbf24;box-shadow:0 0 8px #fbbf2480;animation:_ngcontent-%COMP%_rare-glow 2s ease-in-out infinite}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-rarity-badge.rarity-badge-epic[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a855f7,#7c3aed);color:#fff;border:1px solid #c084fc;box-shadow:0 0 10px #a855f799;animation:_ngcontent-%COMP%_epic-glow 2s ease-in-out infinite}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-rarity-badge.rarity-badge-legendary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff8000,#c60);color:#fff;border:1px solid #ffaa44;box-shadow:0 0 12px #ff8000cc;animation:_ngcontent-%COMP%_legendary-glow 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_rare-glow{0%,to{box-shadow:0 0 8px #fbbf2480}50%{box-shadow:0 0 16px #fbbf24cc}}@keyframes _ngcontent-%COMP%_epic-glow{0%,to{box-shadow:0 0 10px #a855f799}50%{box-shadow:0 0 20px #a855f7e6}}@keyframes _ngcontent-%COMP%_legendary-glow{0%,to{box-shadow:0 0 12px #ff8000cc}50%{box-shadow:0 0 24px #ff8000}}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-type[_ngcontent-%COMP%]{font-size:10px;color:var(--text-tertiary);text-align:center;margin-bottom:4px;text-transform:uppercase;letter-spacing:.5px;font-weight:600}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]{font-size:10px;text-align:center;margin-bottom:8px}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;background:linear-gradient(135deg,#ffffff1a,#ffffff0d);border-radius:10px;border:2px solid rgba(255,255,255,.3);font-weight:700;font-size:9px;color:var(--text-primary);text-transform:uppercase;letter-spacing:.3px;box-shadow:0 2px 4px #0003;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4px;flex-wrap:wrap;margin-top:8px;max-height:80px;overflow-y:auto;padding:4px}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]::-webkit-scrollbar{width:3px}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:2px}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat[_ngcontent-%COMP%]{font-size:9px;padding:3px 6px;background:var(--accent-primary);border-radius:10px;color:#fff;font-weight:600;box-shadow:0 1px 3px #0003;white-space:nowrap}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.damage[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);border:1px solid #f87171}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.defense[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);border:1px solid #60a5fa}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.vital[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);border:1px solid #34d399}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.critical[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);border:1px solid #fbbf24;animation:_ngcontent-%COMP%_pulse-glow 2s ease-in-out infinite}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.lifesteal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ec4899,#db2777);border:1px solid #f472b6}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.resist[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);border:1px solid #a78bfa}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-stats[_ngcontent-%COMP%]   .mini-stat.special[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eab308,#ca8a04);border:1px solid #fbbf24;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse-glow{0%,to{box-shadow:0 0 5px #fb923c80}50%{box-shadow:0 0 15px #fb923ccc}}@keyframes _ngcontent-%COMP%_shimmer{0%,to{opacity:1}50%{opacity:.8}}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-quantity[_ngcontent-%COMP%]{text-align:center;margin-top:6px}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-info[_ngcontent-%COMP%]   .item-card-quantity[_ngcontent-%COMP%]   .quantity-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;background:var(--accent-primary);color:#fff;border-radius:20px;font-size:11px;font-weight:700;box-shadow:0 2px 8px #0000004d}.inventory-section[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-card-rarity[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;font-size:20px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.5));z-index:5}.inventory-section[_ngcontent-%COMP%]   .empty-inventory[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;background:linear-gradient(135deg,#0000004d,#00000080);border-radius:16px;border:2px dashed rgba(255,255,255,.2)}.inventory-section[_ngcontent-%COMP%]   .empty-inventory[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px;opacity:.7;filter:drop-shadow(0 4px 8px rgba(0,0,0,.5));animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.inventory-section[_ngcontent-%COMP%]   .empty-inventory[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffc;font-size:15px;margin-bottom:10px;font-weight:600;text-shadow:0 2px 4px rgba(0,0,0,.5)}.inventory-section[_ngcontent-%COMP%]   .empty-inventory[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%]{font-size:13px;color:#ffffff80;font-weight:400;margin-bottom:20px}.inventory-section[_ngcontent-%COMP%]   .empty-inventory[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px;padding:0 24px;height:40px;font-size:14px;font-weight:700;box-shadow:0 4px 12px #673ab766}.inventory-section[_ngcontent-%COMP%]   .empty-inventory[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:6px}.empty-equipment-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.empty-equipment-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px;opacity:.3}.empty-equipment-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin:0 0 12px}.empty-equipment-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);font-size:14px}  .item-context-menu-mat .mat-mdc-menu-content{padding:8px 0}  .item-context-menu-mat .mat-mdc-menu-item{min-height:48px;display:flex;align-items:center;gap:12px;padding:0 20px;font-size:14px;font-weight:500;transition:all .2s ease}  .item-context-menu-mat .mat-mdc-menu-item mat-icon{width:20px;height:20px;font-size:20px;margin-right:8px}  .item-context-menu-mat .mat-mdc-menu-item:hover{background:var(--accent-primary)!important;color:#fff!important}  .item-context-menu-mat .mat-mdc-menu-item:hover mat-icon{color:#fff!important}  .cdk-overlay-container{z-index:9999999!important}  .cdk-overlay-pane{z-index:9999999!important}  .mat-mdc-menu-panel{z-index:9999999!important;box-shadow:0 8px 24px #0003!important;border-radius:8px;min-width:180px!important}  .comparison-snackbar .mdc-snackbar__surface{background:linear-gradient(135deg,var(--bg-primary),var(--bg-secondary))!important;border:2px solid var(--accent-primary)!important;border-radius:12px!important;box-shadow:0 8px 32px #0000004d!important;min-width:350px!important;max-width:500px!important}  .comparison-snackbar .mdc-snackbar__label{color:var(--text-primary)!important;font-size:14px!important;line-height:1.6!important;white-space:pre-line!important;font-family:Noto Sans KR,sans-serif!important;padding:16px 24px!important}  .comparison-snackbar .mat-mdc-snack-bar-action{color:var(--accent-primary)!important;font-weight:600!important}  .success-snackbar .mdc-snackbar__surface{background:linear-gradient(135deg,#10b981,#059669)!important;border-radius:12px!important;box-shadow:0 8px 32px #10b9814d!important}  .success-snackbar .mdc-snackbar__label{color:#fff!important;font-weight:600!important;font-size:15px!important}  .success-snackbar .mat-mdc-snack-bar-action{color:#fff!important;font-weight:700!important}.inventory-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(500px,1fr));gap:12px;padding:20px;width:100%}@media (max-width: 768px){.inventory-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.inventory-item.diablo-card[_ngcontent-%COMP%]{position:relative;padding:0;border-radius:0;border:2px solid;background:linear-gradient(90deg,#19191efa,#0f0f14fa);cursor:pointer;transition:all .25s ease-out;box-shadow:0 4px 12px #000c,inset 0 1px #ffffff0d;display:flex;flex-direction:row;overflow:hidden;min-height:180px}.inventory-item.diablo-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #000000e6,inset 0 1px #ffffff1a}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]{width:180px;min-width:180px;background:linear-gradient(135deg,#1e1e23f2,#141419fa);display:flex;flex-direction:column;border-right:2px solid rgba(255,255,255,.08);position:relative}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:20px}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{max-width:100%;max-height:140px;object-fit:contain;filter:drop-shadow(0 4px 8px rgba(0,0,0,.8))}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]   .item-image-icon[_ngcontent-%COMP%]{font-size:96px;text-align:center;opacity:.85;filter:drop-shadow(0 4px 12px rgba(0,0,0,.9));transition:all .3s ease}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]   .item-image-icon[_ngcontent-%COMP%]:hover{transform:scale(1.05);filter:drop-shadow(0 6px 16px rgb(0,0,0))}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]   .item-image-placeholder[_ngcontent-%COMP%]{width:100%;height:120px;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle,rgba(60,60,70,.4) 0%,transparent 70%)}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]   .item-image-placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{font-size:64px;opacity:.4}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]{padding:12px 16px;background:#0006;border-top:1px solid rgba(255,255,255,.05)}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-type-badge[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af;text-align:center;margin-bottom:8px;text-transform:none;font-weight:600}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;font-size:11px;color:#6b7280}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .favorites[_ngcontent-%COMP%], .inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .favorites[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%], .inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{color:#fbbf24;font-size:12px}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .favorites[_ngcontent-%COMP%]   .comment-icon[_ngcontent-%COMP%], .inventory-item.diablo-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]   .comment-icon[_ngcontent-%COMP%]{font-size:12px}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:16px 20px;position:relative}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]{margin-bottom:12px}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;margin-bottom:8px}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:16px;font-weight:700;line-height:1.3;flex:1;letter-spacing:.3px;color:#d1d5db}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%]   .attack-speed[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af;white-space:nowrap;align-self:flex-start}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .header-badges[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .header-badges[_ngcontent-%COMP%]   .badge-chaos[_ngcontent-%COMP%], .inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .header-badges[_ngcontent-%COMP%]   .badge-class[_ngcontent-%COMP%]{font-size:10px;color:#9ca3af;padding:2px 0}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .unique-effect-highlight[_ngcontent-%COMP%]{margin-bottom:12px;padding:10px 0;border-top:1px solid rgba(255,255,255,.06);border-bottom:1px solid rgba(255,255,255,.06)}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .unique-effect-highlight[_ngcontent-%COMP%]   .effect-text-main[_ngcontent-%COMP%]{font-size:13px;line-height:1.6;color:#fbbf24;font-weight:600;text-shadow:0 0 8px rgba(251,191,36,.4);word-break:keep-all}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .unique-effect-highlight[_ngcontent-%COMP%]   .effect-text-main[_ngcontent-%COMP%]:first-line{color:#fb923c}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:6px;margin-bottom:12px}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%]{font-size:12px;line-height:1.5;color:#d1d5db;font-weight:500;padding:2px 0}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]   .stat-line.damage[_ngcontent-%COMP%], .inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]   .stat-line.defense[_ngcontent-%COMP%], .inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]   .stat-line.vital[_ngcontent-%COMP%], .inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]   .stat-line.critical[_ngcontent-%COMP%], .inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-detailed[_ngcontent-%COMP%]   .stat-line.special[_ngcontent-%COMP%]{color:#d1d5db}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-legacy[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:6px;margin-bottom:12px}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-legacy[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%]{font-size:12px;color:#d1d5db}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:auto}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:8px 14px;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;border:1px solid;border-radius:2px;cursor:pointer;transition:all .2s ease;background:#0006;color:#d1d5db;border-color:#fff3}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff1a;border-color:#fff6}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]   .btn-equip[_ngcontent-%COMP%]{background:linear-gradient(180deg,#3b82f699,#2563ebb3);border-color:#3b82f6;color:#fff}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]   .btn-equip[_ngcontent-%COMP%]:hover{background:linear-gradient(180deg,#3b82f6cc,#2563ebe6)}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]   .btn-sell[_ngcontent-%COMP%]{background:linear-gradient(180deg,#eab30899,#ca8a04b3);border-color:#eab308;color:#1a1a1a}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-actions-inline[_ngcontent-%COMP%]   .btn-sell[_ngcontent-%COMP%]:hover{background:linear-gradient(180deg,#eab308cc,#ca8a04e6)}.inventory-item.diablo-card[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:#000c;color:#fff;padding:4px 8px;border-radius:2px;font-size:11px;font-weight:800;border:1px solid rgba(255,255,255,.3);box-shadow:0 2px 6px #00000080;z-index:10}.inventory-item.diablo-card.rarity-common[_ngcontent-%COMP%]{border-color:#6b7280}.inventory-item.diablo-card.rarity-common[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{color:#9ca3af}.inventory-item.diablo-card.rarity-uncommon[_ngcontent-%COMP%]{border-color:#3b82f6}.inventory-item.diablo-card.rarity-uncommon[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{color:#60a5fa}.inventory-item.diablo-card.rarity-rare[_ngcontent-%COMP%]{border-color:#fbbf24}.inventory-item.diablo-card.rarity-rare[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{color:#fcd34d}.inventory-item.diablo-card.rarity-epic[_ngcontent-%COMP%]{border-color:#a855f7}.inventory-item.diablo-card.rarity-epic[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{color:#c084fc}.inventory-item.diablo-card.rarity-legendary[_ngcontent-%COMP%]{border-color:#f97316}.inventory-item.diablo-card.rarity-legendary[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{color:#fb923c}.inventory-item.diablo-card.rarity-unique[_ngcontent-%COMP%]{border-color:#a855f7;border-width:3px}.inventory-item.diablo-card.rarity-unique[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{color:#c084fc;text-shadow:0 0 12px rgba(168,85,247,.6)}.inventory-item.diablo-card.rarity-unique[_ngcontent-%COMP%]   .unique-effect-highlight[_ngcontent-%COMP%]   .effect-text-main[_ngcontent-%COMP%]{color:#fbbf24;text-shadow:0 0 10px rgba(251,191,36,.5)}.inventory-item.diablo-card.rarity-mythic[_ngcontent-%COMP%]{border-color:#ec4899;border-width:3px;box-shadow:0 4px 12px #000c,0 0 20px #ec489966,inset 0 1px #ffffff0d}.inventory-item.diablo-card.rarity-mythic[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{color:#f472b6;text-shadow:0 0 15px rgba(236,72,153,.7);font-weight:800}.inventory-item.diablo-card.rarity-mythic[_ngcontent-%COMP%]   .unique-effect-highlight[_ngcontent-%COMP%]   .effect-text-main[_ngcontent-%COMP%]{color:#fb923c;text-shadow:0 0 12px rgba(251,146,60,.6)}.inventory-item.diablo-card.rarity-mythic[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #000000e6,0 0 30px #ec489999,inset 0 1px #ffffff1a}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card){position:relative;padding:0;border-radius:4px;border:2px solid;background:linear-gradient(180deg,#141419fa,#0a0a0ffa);cursor:pointer;transition:all .25s ease-out;box-shadow:0 4px 8px #0009,0 2px 4px #0006,inset 0 1px #ffffff1a;display:flex;flex-direction:column;overflow:hidden}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card):hover{transform:translateY(-3px)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary{border-color:#f97316;border-width:3px;background:linear-gradient(180deg,#f9731626,#0a0a0ffa)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary:before{content:"";position:absolute;inset:-3px;border-radius:4px;background:linear-gradient(45deg,#f97316,#fb923c,#fbbf24,#fb923c,#f97316,#fb923c);z-index:-1;opacity:.6;filter:blur(12px);animation:_ngcontent-%COMP%_legendary-glow 3s ease-in-out infinite}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary:after{height:60%;background:linear-gradient(180deg,transparent 0%,rgba(249,115,22,.3) 50%,rgba(0,0,0,.6) 100%)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary:hover{border-color:#fb923c;transform:translateY(-4px) scale(1.01);box-shadow:0 12px 24px #f97316cc,0 6px 12px #0009,0 0 40px #f97316b3,inset 0 0 35px #f9731640}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary:hover:before{opacity:.9;filter:blur(15px)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary   .item-name[_ngcontent-%COMP%]{color:#fdba74;text-shadow:0 2px 6px rgb(0,0,0),0 0 25px rgb(249,115,22),0 0 15px rgb(251,146,60),0 0 8px rgba(251,191,36,.8);letter-spacing:1.5px;font-weight:900;text-transform:uppercase;animation:_ngcontent-%COMP%_legendary-text 2s ease-in-out infinite}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-legendary   .item-header[_ngcontent-%COMP%]{background:linear-gradient(180deg,#f9731666,#f9731626);border-bottom:2px solid rgba(249,115,22,.8)}@keyframes _ngcontent-%COMP%_legendary-glow{0%,to{opacity:.6;filter:blur(12px)}50%{opacity:.85;filter:blur(15px)}}@keyframes _ngcontent-%COMP%_legendary-text{0%,to{text-shadow:0 2px 6px rgb(0,0,0),0 0 25px rgb(249,115,22),0 0 15px rgb(251,146,60),0 0 8px rgba(251,191,36,.8)}50%{text-shadow:0 2px 6px rgb(0,0,0),0 0 30px rgb(249,115,22),0 0 20px rgb(251,146,60),0 0 12px rgb(251,191,36)}}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:16px 18px;border-bottom:1px solid rgba(255,255,255,.1);position:relative;z-index:1}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.3) 50%,transparent 100%)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-header[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:15px;font-weight:700;line-height:1.4;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;letter-spacing:.8px;font-family:Exocet,Cinzel,Trajan Pro,serif,-apple-system,BlinkMacSystemFont,Segoe UI}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-header[_ngcontent-%COMP%]   .item-rarity[_ngcontent-%COMP%]{font-size:9px;padding:4px 10px;border-radius:2px;background:#00000080;color:#ffffffd9;white-space:nowrap;text-transform:uppercase;letter-spacing:1px;font-weight:800;flex-shrink:0;border:1px solid rgba(255,255,255,.2);box-shadow:0 2px 4px #0009}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]{padding:14px 18px;font-size:12px;line-height:1.8;display:flex;flex-direction:column;gap:4px;position:relative;z-index:1;background:linear-gradient(180deg,rgba(0,0,0,.2) 0%,transparent 100%)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%]{color:#d1d5db;padding:3px 0;font-size:12px;display:flex;align-items:center;gap:8px;transition:all .15s ease;font-family:Segoe UI,Roboto,Arial,sans-serif;font-weight:600;text-shadow:0 1px 3px rgba(0,0,0,.8)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%]:before{content:"\\25c6";font-size:8px;opacity:.6;color:inherit}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%]:hover{color:#f3f4f6;transform:translate(2px);text-shadow:0 1px 4px rgba(0,0,0,.9)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.damage[_ngcontent-%COMP%]{color:#ef4444;font-weight:800;text-shadow:0 1px 4px rgba(0,0,0,.9),0 0 8px rgba(239,68,68,.5)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.damage[_ngcontent-%COMP%]:before{content:"\\2694";color:#dc2626;opacity:1;font-size:10px}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.defense[_ngcontent-%COMP%]{color:#3b82f6;font-weight:800;text-shadow:0 1px 4px rgba(0,0,0,.9),0 0 8px rgba(59,130,246,.5)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.defense[_ngcontent-%COMP%]:before{content:"\\1f6e1";opacity:1;font-size:10px}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.vital[_ngcontent-%COMP%]{color:#dc2626;font-weight:800;text-shadow:0 1px 4px rgba(0,0,0,.9),0 0 10px rgba(220,38,38,.6)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.vital[_ngcontent-%COMP%]:before{content:"\\2764";color:#dc2626;opacity:1;font-size:10px}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.critical[_ngcontent-%COMP%]{color:#f97316;font-weight:900;text-shadow:0 1px 4px rgb(0,0,0),0 0 12px rgba(249,115,22,.8),0 0 6px rgba(251,146,60,.6)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.critical[_ngcontent-%COMP%]:before{content:"\\1f4a5";opacity:1;font-size:11px;filter:drop-shadow(0 0 4px rgba(249,115,22,.8))}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.lifesteal[_ngcontent-%COMP%]{color:#ec4899;font-weight:800;text-shadow:0 1px 4px rgba(0,0,0,.9),0 0 10px rgba(236,72,153,.6)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.lifesteal[_ngcontent-%COMP%]:before{content:"\\1fa78";opacity:1;font-size:10px}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.manasteal[_ngcontent-%COMP%]{color:#06b6d4;font-weight:800;text-shadow:0 1px 4px rgba(0,0,0,.9),0 0 10px rgba(6,182,212,.6)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.manasteal[_ngcontent-%COMP%]:before{content:"\\1f4a7";opacity:1;font-size:10px}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist[_ngcontent-%COMP%]{color:#a855f7;font-weight:700}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist[_ngcontent-%COMP%]:before{content:"\\2726";opacity:1}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.fire[_ngcontent-%COMP%]{color:#f87171}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.fire[_ngcontent-%COMP%]:before{content:"\\1f525"}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.cold[_ngcontent-%COMP%]{color:#60a5fa}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.cold[_ngcontent-%COMP%]:before{content:"\\2744\\fe0f"}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.lightning[_ngcontent-%COMP%]{color:#fbbf24}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.lightning[_ngcontent-%COMP%]:before{content:"\\26a1"}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.poison[_ngcontent-%COMP%]{color:#34d399}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.poison[_ngcontent-%COMP%]:before{content:"\\2620\\fe0f"}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.all[_ngcontent-%COMP%]{color:#a855f7;font-weight:800;text-shadow:0 0 8px rgba(168,85,247,.6)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.resist.all[_ngcontent-%COMP%]:before{content:"\\2728"}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special[_ngcontent-%COMP%]{color:#fbbf24;font-weight:700}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special[_ngcontent-%COMP%]:before{content:"\\2605";opacity:1}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.magic[_ngcontent-%COMP%]{color:#c084fc;text-shadow:0 0 6px rgba(192,132,252,.5)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.magic[_ngcontent-%COMP%]:before{content:"\\2728"}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.gold[_ngcontent-%COMP%]{color:#fbbf24;text-shadow:0 0 6px rgba(251,191,36,.5)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.gold[_ngcontent-%COMP%]:before{content:"\\1f4b0"}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.exp[_ngcontent-%COMP%]{color:#60a5fa}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.exp[_ngcontent-%COMP%]:before{content:"\\2b50"}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.move[_ngcontent-%COMP%]{color:#34d399}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-stats[_ngcontent-%COMP%]   .stat-line.special.move[_ngcontent-%COMP%]:before{content:"\\26a1"}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]{display:flex;gap:8px;padding:12px 18px;border-top:1px solid rgba(255,255,255,.1);background:linear-gradient(180deg,#0000004d,#00000080);position:relative;z-index:1}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.2) 50%,transparent 100%)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:10px 16px;font-size:11px;font-weight:800;text-transform:uppercase;letter-spacing:.8px;border:2px solid;border-radius:2px;cursor:pointer;transition:all .2s ease;position:relative;overflow:hidden;font-family:Segoe UI,Arial,sans-serif;text-shadow:0 1px 3px rgba(0,0,0,.8);box-shadow:0 2px 4px #0009,inset 0 1px #ffffff26}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.3) 50%,transparent 100%);transition:left .5s ease}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:before{left:100%}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(0)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   .btn-use[_ngcontent-%COMP%]{background:linear-gradient(180deg,#10b981cc,#059669e6);border-color:#34d399;color:#fff}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   .btn-use[_ngcontent-%COMP%]:hover{background:linear-gradient(180deg,#10b981,#059669);border-color:#6ee7b7;box-shadow:0 4px 8px #10b98199,0 0 15px #10b98166,inset 0 1px #ffffff40}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   .btn-equip[_ngcontent-%COMP%]{background:linear-gradient(180deg,#3b82f6cc,#2563ebe6);border-color:#60a5fa;color:#fff}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   .btn-equip[_ngcontent-%COMP%]:hover{background:linear-gradient(180deg,#3b82f6,#2563eb);border-color:#93c5fd;box-shadow:0 4px 8px #3b82f699,0 0 15px #3b82f666,inset 0 1px #ffffff40}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   .btn-sell[_ngcontent-%COMP%]{background:linear-gradient(180deg,#eab308cc,#ca8a04e6);border-color:#fbbf24;color:#1a1a1a;text-shadow:0 1px 2px rgba(255,255,255,.3)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-actions[_ngcontent-%COMP%]   .btn-sell[_ngcontent-%COMP%]:hover{background:linear-gradient(180deg,#eab308,#ca8a04);border-color:#fcd34d;box-shadow:0 4px 8px #eab30899,0 0 15px #eab30866,inset 0 1px #fff6;color:#000}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-quantity[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:#000c;color:#fff;padding:4px 8px;border-radius:4px;font-size:11px;font-weight:800;border:1px solid rgba(255,255,255,.3);box-shadow:0 2px 6px #00000080;z-index:10}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-badges[_ngcontent-%COMP%]{display:flex;gap:6px;padding:8px 18px;background:#00000040;border-bottom:1px solid rgba(255,255,255,.05);flex-wrap:wrap;position:relative;z-index:1}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-badges[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 10px;font-size:10px;font-weight:800;text-transform:uppercase;letter-spacing:.8px;border-radius:2px;border:1px solid;box-shadow:0 2px 4px #0009;text-shadow:0 1px 3px rgba(0,0,0,.8)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-badges[_ngcontent-%COMP%]   .badge.chaos[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a855f7cc,#7c3aede6);border-color:#a855f7;color:#fae8ff;box-shadow:0 2px 4px #0009,0 0 10px #a855f780}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-badges[_ngcontent-%COMP%]   .badge.class[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6cc,#2563ebe6);border-color:#3b82f6;color:#dbeafe;box-shadow:0 2px 4px #0009,0 0 8px #3b82f666}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .item-badges[_ngcontent-%COMP%]   .badge.aps[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55ecc,#16a34ae6);border-color:#22c55e;color:#dcfce7;box-shadow:0 2px 4px #0009,0 0 8px #22c55e66}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .unique-effect[_ngcontent-%COMP%]{padding:14px 18px;background:linear-gradient(180deg,#a855f726,#0000004d);border-top:1px solid rgba(168,85,247,.3);border-bottom:1px solid rgba(168,85,247,.2);position:relative;z-index:1}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .unique-effect[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 0%,rgba(168,85,247,.5) 50%,transparent 100%)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .unique-effect[_ngcontent-%COMP%]   .effect-label[_ngcontent-%COMP%]{font-size:10px;font-weight:800;text-transform:uppercase;letter-spacing:1px;color:#c084fc;margin-bottom:6px;text-shadow:0 1px 3px rgba(0,0,0,.8),0 0 8px rgba(168,85,247,.6)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card)   .unique-effect[_ngcontent-%COMP%]   .effect-text[_ngcontent-%COMP%]{font-size:12px;line-height:1.6;color:#e9d5ff;font-weight:600;text-shadow:0 1px 3px rgba(0,0,0,.8);font-family:Segoe UI,Roboto,Arial,sans-serif;word-break:keep-all;overflow-wrap:break-word}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-unique{border-color:#a855f7;border-width:3px;background:linear-gradient(180deg,#a855f71f,#0a0a0ffa)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-unique:hover{border-color:#c084fc;box-shadow:0 10px 20px #a855f799,0 4px 8px #00000080,0 0 35px #a855f780,inset 0 0 30px #a855f72e}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-unique   .item-name[_ngcontent-%COMP%]{color:#d8b4fe;text-shadow:0 2px 4px rgba(0,0,0,.9),0 0 18px rgba(168,85,247,.9),0 0 10px rgba(168,85,247,.7);letter-spacing:1px;font-weight:900}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-unique   .item-header[_ngcontent-%COMP%]{background:linear-gradient(180deg,#a855f752,#a855f71a);border-bottom:2px solid rgba(168,85,247,.65)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-mythic{border-color:#ec4899;border-width:4px;background:linear-gradient(180deg,#ec48992e,#0a0a0ffa)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-mythic:before{content:"";position:absolute;inset:-4px;border-radius:4px;background:linear-gradient(45deg,#ec4899,#f472b6,#f9a8d4,#f472b6,#ec4899,#f472b6);z-index:-1;opacity:.7;filter:blur(14px);animation:_ngcontent-%COMP%_legendary-glow 3s ease-in-out infinite}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-mythic:hover{border-color:#f472b6;transform:translateY(-5px) scale(1.02);box-shadow:0 15px 30px #ec4899e6,0 8px 16px #0009,0 0 50px #ec4899cc,inset 0 0 40px #ec48994d}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-mythic:hover:before{opacity:1;filter:blur(18px)}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-mythic   .item-name[_ngcontent-%COMP%]{color:#fbcfe8;text-shadow:0 2px 6px rgb(0,0,0),0 0 30px rgb(236,72,153),0 0 20px rgb(244,114,182),0 0 12px rgba(249,168,212,.9);letter-spacing:2px;font-weight:900;text-transform:uppercase;animation:_ngcontent-%COMP%_legendary-text 2s ease-in-out infinite}.inventory-item[_ngcontent-%COMP%]:not(.diablo-card).rarity-mythic   .item-header[_ngcontent-%COMP%]{background:linear-gradient(180deg,#ec489973,#ec48992e);border-bottom:2px solid rgba(236,72,153,.85)}@keyframes _ngcontent-%COMP%_legendary-item-pulse{0%,to{box-shadow:inset 0 2px 6px var(--shadow),0 2px 8px var(--shadow),0 0 20px #f9731666}50%{box-shadow:inset 0 2px 6px var(--shadow),0 2px 8px var(--shadow),0 0 30px #f97316b3}}@keyframes _ngcontent-%COMP%_legendary-text-shine{0%{background-position:0% 50%}to{background-position:200% 50%}}@keyframes _ngcontent-%COMP%_legendary-header-shine{0%{left:-100%}50%,to{left:200%}}.empty-message[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--text-secondary);font-size:16px;font-style:italic}@keyframes _ngcontent-%COMP%_legendary-pulse{0%,to{box-shadow:0 0 20px #f9731666}50%{box-shadow:0 0 30px #f97316b3}}  .item-details-snackbar .mdc-snackbar__surface{background:var(--bg-secondary)!important;border:2px solid var(--border-color)!important;border-radius:12px!important;box-shadow:0 12px 48px var(--shadow)!important;min-width:400px!important;max-width:500px!important}  .item-details-snackbar .mdc-snackbar__label{color:var(--text-primary)!important;font-size:13px!important;line-height:1.8!important;white-space:pre-line!important;font-family:Consolas,Monaco,monospace!important;padding:20px 24px!important}  .item-details-snackbar.rarity-common .mdc-snackbar__surface{border-color:#9ca3af!important}  .item-details-snackbar.rarity-uncommon .mdc-snackbar__surface{border-color:#3b82f6!important;box-shadow:0 12px 48px #3b82f64d!important}  .item-details-snackbar.rarity-rare .mdc-snackbar__surface{border-color:#eab308!important;box-shadow:0 12px 48px #eab3084d!important}  .item-details-snackbar.rarity-epic .mdc-snackbar__surface{border-color:#a855f7!important;box-shadow:0 12px 48px #a855f766!important}  .item-details-snackbar.rarity-legendary .mdc-snackbar__surface{border-color:#f97316!important;box-shadow:0 12px 48px #f9731680!important;animation:_ngcontent-%COMP%_legendary-pulse 2s ease-in-out infinite}.inventory-panel[_ngcontent-%COMP%]{width:100vw!important;max-width:100vw!important;height:100vh!important;max-height:100vh!important;top:0!important;left:0!important;transform:none!important;border-radius:0!important;display:flex!important;flex-direction:column!important}.inventory-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{background:var(--bg-secondary);border-bottom:2px solid var(--border-color);flex-shrink:0}.inventory-panel[_ngcontent-%COMP%]   .inventory-tabs[_ngcontent-%COMP%]{flex-shrink:0}.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;min-height:0}.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:5px}.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--accent-primary)}.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]:has(.equipment-slots-section){display:flex!important;flex-direction:column;gap:0}.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]:has(.equipment-slots-section)   .equipment-slots-section[_ngcontent-%COMP%]{border-bottom:3px solid var(--border-color);border-right:none;flex-shrink:0}.inventory-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]:has(.equipment-slots-section)   .inventory-tab-grid[_ngcontent-%COMP%]{border-top:3px solid var(--border-color);border-left:none;flex:1;min-height:0}.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px;padding:12px 16px;background:var(--bg-secondary);border-bottom:1px solid var(--border-color);margin:0;flex-wrap:wrap}.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:6px 12px;background:var(--bg-primary);border-radius:4px;border:1px solid var(--border-color);min-width:120px}.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item.gold[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%]{color:#d4af37}.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item.gem[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%]{color:#9370db}.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item.crystal[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%]{color:#4682b4}.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item.ticket[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%]{color:#db7093}.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .currency-icon[_ngcontent-%COMP%]{font-size:18px}.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .currency-label[_ngcontent-%COMP%]{font-size:11px;font-weight:500;color:var(--text-secondary)}.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%]{font-size:15px;font-weight:600;min-width:40px;text-align:right}.inventory-panel[_ngcontent-%COMP%]   .currency-display[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]   .currency-unit[_ngcontent-%COMP%]{font-size:11px;font-weight:500;color:var(--text-secondary)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]{padding:40px;width:100%;max-width:1400px;margin:0 auto}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-header[_ngcontent-%COMP%]{margin-bottom:32px;text-align:center}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin-bottom:8px}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-header[_ngcontent-%COMP%]   .currency-subtitle[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary);margin:0}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:24px;margin-bottom:40px}@media (max-width: 1200px){.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]{position:relative;border-radius:16px;padding:24px;overflow:hidden;transition:all .3s cubic-bezier(.4,0,.2,1);cursor:pointer}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:.05;transition:opacity .3s ease}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-content[_ngcontent-%COMP%]{position:relative;z-index:1}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:20px}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-top[_ngcontent-%COMP%]   .currency-icon-wrapper[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:12px;display:flex;align-items:center;justify-content:center;transition:transform .3s ease}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-top[_ngcontent-%COMP%]   .currency-icon-wrapper[_ngcontent-%COMP%]   .currency-icon[_ngcontent-%COMP%]{font-size:28px}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-top[_ngcontent-%COMP%]   .currency-label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-primary)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-amount-section[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:6px;margin-bottom:8px}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-amount-section[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%]   .amount-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;line-height:1}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-amount-section[_ngcontent-%COMP%]   .currency-amount[_ngcontent-%COMP%]   .amount-unit[_ngcontent-%COMP%]{font-size:16px;font-weight:600;opacity:.7}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]   .currency-amount-section[_ngcontent-%COMP%]   .currency-usage[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);margin:0}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 32px var(--shadow)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]:hover   .currency-background[_ngcontent-%COMP%]{opacity:.1}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card[_ngcontent-%COMP%]:hover   .currency-icon-wrapper[_ngcontent-%COMP%]{transform:scale(1.1)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gold-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b1a,#d977060d);border:2px solid rgba(245,158,11,.3)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gold-card[_ngcontent-%COMP%]   .currency-background[_ngcontent-%COMP%]{background:radial-gradient(circle at top right,#f59e0b,transparent)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gold-card[_ngcontent-%COMP%]   .currency-icon-wrapper[_ngcontent-%COMP%]{background:#f59e0b26}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gold-card[_ngcontent-%COMP%]   .amount-number[_ngcontent-%COMP%]{color:#f59e0b}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gem-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf61a,#7c3aed0d);border:2px solid rgba(139,92,246,.3)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gem-card[_ngcontent-%COMP%]   .currency-background[_ngcontent-%COMP%]{background:radial-gradient(circle at top right,#8b5cf6,transparent)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gem-card[_ngcontent-%COMP%]   .currency-icon-wrapper[_ngcontent-%COMP%]{background:#8b5cf626}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.gem-card[_ngcontent-%COMP%]   .amount-number[_ngcontent-%COMP%]{color:#8b5cf6}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.crystal-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#2563eb0d);border:2px solid rgba(59,130,246,.3)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.crystal-card[_ngcontent-%COMP%]   .currency-background[_ngcontent-%COMP%]{background:radial-gradient(circle at top right,#3b82f6,transparent)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.crystal-card[_ngcontent-%COMP%]   .currency-icon-wrapper[_ngcontent-%COMP%]{background:#3b82f626}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.crystal-card[_ngcontent-%COMP%]   .amount-number[_ngcontent-%COMP%]{color:#3b82f6}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.ticket-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ec48991a,#db27770d);border:2px solid rgba(236,72,153,.3)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.ticket-card[_ngcontent-%COMP%]   .currency-background[_ngcontent-%COMP%]{background:radial-gradient(circle at top right,#ec4899,transparent)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.ticket-card[_ngcontent-%COMP%]   .currency-icon-wrapper[_ngcontent-%COMP%]{background:#ec489926}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-card.ticket-card[_ngcontent-%COMP%]   .amount-number[_ngcontent-%COMP%]{color:#ec4899}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;padding:20px}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]   .guide-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:var(--text-primary);margin:0 0 16px}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]   .guide-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]   .guide-list[_ngcontent-%COMP%]   .guide-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:var(--bg-primary);border-radius:8px;border:1px solid var(--border-color);transition:all .2s ease}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]   .guide-list[_ngcontent-%COMP%]   .guide-item[_ngcontent-%COMP%]   .guide-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]   .guide-list[_ngcontent-%COMP%]   .guide-item[_ngcontent-%COMP%]   .guide-text[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary)}.inventory-panel[_ngcontent-%COMP%]   .currency-tab-content[_ngcontent-%COMP%]   .currency-guide[_ngcontent-%COMP%]   .guide-list[_ngcontent-%COMP%]   .guide-item[_ngcontent-%COMP%]:hover{border-color:var(--accent-color);background:var(--bg-secondary)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]{padding:40px;height:100%;overflow-y:auto;width:100%;max-width:1600px;margin:0 auto}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;padding-bottom:24px;border-bottom:2px solid var(--border-color)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-title-section[_ngcontent-%COMP%]   .shop-title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:var(--text-primary);margin:0 0 8px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-title-section[_ngcontent-%COMP%]   .shop-subtitle[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary);margin:0}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px 20px;background:linear-gradient(135deg,#f59e0b1a,#d977060d);border:2px solid rgba(245,158,11,.3);border-radius:12px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-icon[_ngcontent-%COMP%]{font-size:28px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-info[_ngcontent-%COMP%]   .wallet-label[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-info[_ngcontent-%COMP%]   .wallet-amount[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#f59e0b}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-items-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:28px}@media (min-width: 1400px){.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-items-container[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media (min-width: 1000px) and (max-width: 1399px){.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-items-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width: 700px) and (max-width: 999px){.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-items-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 699px){.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-items-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:16px;padding:0;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;display:flex;flex-direction:column}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;opacity:0;transition:opacity .3s ease}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 16px 48px var(--shadow);border-color:var(--accent-color)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover:before{opacity:1}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover   .item-icon-large[_ngcontent-%COMP%]{transform:scale(1.15) rotate(5deg)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]{border-color:#f59e0b80}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#f59e0b,#ef4444)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#ef4444)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-epic[_ngcontent-%COMP%]{border-color:#a855f780}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-epic[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#a855f7,#8b5cf6)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-epic[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a855f7,#8b5cf6)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]{border-color:#8b5cf680}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#8b5cf6,#3b82f6)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#3b82f6)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]{border-color:#10b98180}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#10b981,#06b6d4)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#06b6d4)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-common[_ngcontent-%COMP%]{border-color:#6b728080}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-common[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#6b7280,#9ca3af)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-common[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#9ca3af)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]{position:absolute;top:12px;left:12px;right:12px;display:flex;justify-content:space-between;z-index:2}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%], .inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]   .item-type-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:8px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:#fff;box-shadow:0 2px 8px #0003}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]   .item-type-badge[_ngcontent-%COMP%]{background:#0009;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--bg-tertiary),var(--bg-primary));padding:40px 20px 30px;display:flex;justify-content:center;align-items:center;border-bottom:1px solid var(--border-color);position:relative}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-icon-large[_ngcontent-%COMP%]{font-size:64px;transition:transform .3s ease}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]{padding:20px;flex:1;display:flex;flex-direction:column;gap:12px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-primary);margin:0;line-height:1.3}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);line-height:1.6;margin:0;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]   .stat-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:6px 10px;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:8px;font-size:13px;font-weight:600}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]   .stat-chip[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:14px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]   .stat-chip[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--accent-color)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#8b5cf60d;border:1px solid rgba(139,92,246,.2);border-radius:8px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-icon[_ngcontent-%COMP%]{font-size:14px;flex-shrink:0}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-text[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);line-height:1.4}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]{padding:16px 20px;background:var(--bg-tertiary);border-top:1px solid var(--border-color)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;margin-bottom:12px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]   .price-icon[_ngcontent-%COMP%]{font-size:20px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]   .price-amount[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#f59e0b}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]   .price-unit[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-secondary)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button[_ngcontent-%COMP%]{width:100%;padding:14px 20px;border-radius:10px;font-size:15px;font-weight:700;border:none;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:18px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.can-buy[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 12px #10b9814d}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.can-buy[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);box-shadow:0 6px 16px #10b98166;transform:translateY(-2px)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.can-buy[_ngcontent-%COMP%]:active{transform:translateY(0)}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.cannot-buy[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-secondary);border:2px solid var(--border-color);cursor:not-allowed;opacity:.6}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:24px;opacity:.6}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin:0 0 12px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{font-size:15px;color:var(--text-secondary);margin:0 0 24px;line-height:1.6}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 20px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:10px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%]   .hint-icon[_ngcontent-%COMP%]{font-size:18px}.inventory-panel[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%]   .hint-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary)}.inventory-panel[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);padding:16px 20px 12px;margin:0;background:linear-gradient(135deg,#3b82f61a,#2563eb1a);border-bottom:2px solid rgba(59,130,246,.3);text-align:center}.inventory-panel[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]{padding:20px;margin-bottom:0;border-bottom:3px solid var(--border-color);background:var(--bg-secondary);height:auto;overflow:visible;flex-shrink:0}.inventory-panel[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:22px;margin-bottom:30px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0003}.inventory-panel[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:5px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slots-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--accent-primary)}.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:30px;max-width:100%;width:100%;margin:0}.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-rings-row[_ngcontent-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:repeat(2,1fr);gap:30px;max-width:800px;margin:0 auto;width:100%}@media (max-width: 1200px){.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%], .inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%]{gap:16px}.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-rings-row[_ngcontent-%COMP%]{gap:16px;max-width:600px}}@media (max-width: 768px){.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px;padding:20px}.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%]{gap:12px}.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-rings-row[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:12px;max-width:100%}}@media (max-width: 480px){.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]{padding:16px;gap:10px}.inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-column[_ngcontent-%COMP%], .inventory-panel[_ngcontent-%COMP%]   .diablo-equipment-layout[_ngcontent-%COMP%]   .equipment-rings-row[_ngcontent-%COMP%]{gap:10px}}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]{position:relative;background:linear-gradient(135deg,#1e1e1ee6,#141414f2);border:3px solid var(--border-color);border-radius:16px;padding:24px;min-height:140px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;box-shadow:inset 0 2px 12px var(--shadow),0 6px 16px var(--shadow)}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:5px;border:1px solid rgba(255,255,255,.08);border-radius:12px;pointer-events:none;opacity:.5}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:48px;opacity:.4;margin-bottom:12px;filter:grayscale(100%);transition:all .3s ease}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-muted);text-transform:uppercase;letter-spacing:1.5px;font-weight:700;text-align:center}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]:not(.has-item):hover{border-color:#3b82f680;background:linear-gradient(135deg,#1e1e1ef2,#141414)}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]:not(.has-item):hover   .slot-icon[_ngcontent-%COMP%]{opacity:.6}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]:not(.has-item):hover   .slot-empty-text[_ngcontent-%COMP%]{color:#3b82f6cc}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.has-item[_ngcontent-%COMP%]{border-color:var(--accent-primary);background:linear-gradient(135deg,#1e1e32f2,#141428);box-shadow:inset 0 2px 12px var(--shadow),0 6px 20px #3b82f640}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.has-item[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{opacity:1;filter:grayscale(0%) drop-shadow(0 0 8px currentColor);font-size:52px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.has-item[_ngcontent-%COMP%]:hover{box-shadow:inset 0 2px 12px var(--shadow),0 12px 30px #3b82f666}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.rarity-common.has-item[_ngcontent-%COMP%]{border-color:#9ca3af;box-shadow:inset 0 2px 12px var(--shadow),0 0 20px #9ca3af66}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.rarity-uncommon.has-item[_ngcontent-%COMP%]{border-color:#10b981;background:linear-gradient(135deg,#1e3228f2,#14281e);box-shadow:inset 0 2px 12px var(--shadow),0 0 25px #10b98199;animation:uncommon-glow 2s ease-in-out infinite}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.rarity-rare.has-item[_ngcontent-%COMP%]{border-color:#3b82f6;background:linear-gradient(135deg,#1e283cf2,#141e32);box-shadow:inset 0 2px 12px var(--shadow),0 0 30px #3b82f6b3;animation:_ngcontent-%COMP%_rare-glow 2s ease-in-out infinite}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.rarity-epic.has-item[_ngcontent-%COMP%]{border-color:#a855f7;background:linear-gradient(135deg,#321e3cf2,#281432);box-shadow:inset 0 2px 12px var(--shadow),0 0 35px #a855f7cc;animation:_ngcontent-%COMP%_epic-glow 2s ease-in-out infinite}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.rarity-legendary.has-item[_ngcontent-%COMP%]{border-color:#f97316;background:linear-gradient(135deg,#3c1e14f2,#32140a);box-shadow:inset 0 2px 12px var(--shadow),0 0 45px #f97316e6;animation:_ngcontent-%COMP%_legendary-glow-diablo 1.5s ease-in-out infinite}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.rarity-legendary.has-item[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:-3px;border:2px solid rgba(249,115,22,.4);border-radius:12px;animation:_ngcontent-%COMP%_legendary-pulse-border 1.5s ease-in-out infinite;pointer-events:none}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:8px 0;margin-top:8px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .tooltip-name[_ngcontent-%COMP%]{flex:1;font-size:15px;font-weight:700;color:#fff;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-shadow:0 2px 4px rgb(0,0,0),0 0 8px rgba(0,0,0,.8),0 1px 2px rgba(0,0,0,.9);letter-spacing:.5px;background:linear-gradient(135deg,#00000080,#0000004d);padding:6px 12px;border-radius:6px;border:1px solid rgba(255,255,255,.1)}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%]{flex-shrink:0;width:28px;height:28px;padding:0;background:linear-gradient(135deg,#dc2626e6,#b91c1cf2);border:2px solid rgb(220,38,38);border-radius:6px;color:#fff;font-size:16px;font-weight:700;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;box-shadow:0 3px 8px #00000080;position:relative;z-index:100;pointer-events:auto}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#b91c1c,#991b1b);transform:scale(1.1);box-shadow:0 4px 12px #dc262699}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 1200px){.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]{padding:20px;min-height:120px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:42px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.has-item[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:46px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .tooltip-name[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 768px){.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]{padding:18px;min-height:100px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:36px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.has-item[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:40px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%]{font-size:11px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .tooltip-name[_ngcontent-%COMP%]{font-size:12px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%]{width:24px;height:24px;font-size:14px}}@media (max-width: 480px){.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]{padding:14px;min-height:85px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:30px;margin-bottom:8px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo.has-item[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{font-size:34px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%]{font-size:10px;letter-spacing:1px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .tooltip-name[_ngcontent-%COMP%]{font-size:11px}.inventory-panel[_ngcontent-%COMP%]   .equipment-slot-diablo[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]   .btn-unequip-small[_ngcontent-%COMP%]{width:22px;height:22px;font-size:13px}}.inventory-panel[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:20px;font-weight:800;margin-bottom:24px;text-align:center;color:var(--text-primary);text-transform:uppercase;letter-spacing:2px;text-shadow:0 2px 8px rgba(0,0,0,.5);padding-bottom:16px;border-bottom:2px solid var(--border-color)}.inventory-panel[_ngcontent-%COMP%]   .inventory-items-section[_ngcontent-%COMP%]{background:var(--bg-primary);padding:20px}.inventory-panel[_ngcontent-%COMP%]   .inventory-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;width:100%}.inventory-tab-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:visible;width:100%;flex:1}.inventory-tab-grid[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{padding:16px;margin:0;background:var(--bg-tertiary);border-bottom:2px solid var(--border-color);font-size:18px}.inventory-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:var(--bg-secondary);border-bottom:2px solid var(--border-color);gap:16px;flex-wrap:wrap}.inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:2px solid var(--border-color);border-radius:6px;background:var(--bg-primary);color:var(--text-primary);font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:4px}.inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary);border-color:var(--accent-primary);transform:translateY(-2px)}.inventory-controls[_ngcontent-%COMP%]   .filter-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;border-color:#3b82f6;box-shadow:0 4px 12px #3b82f64d;transform:translateY(-2px)}.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--text-primary)}.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 12px;border:2px solid var(--border-color);border-radius:6px;background:var(--bg-primary);color:var(--text-primary);font-size:13px;cursor:pointer;transition:all .2s ease}.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:var(--accent-primary)}.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-primary);box-shadow:0 0 0 3px #3b82f61a}.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   .btn-auto-sort[_ngcontent-%COMP%]{padding:8px 16px;border:2px solid var(--border-color);border-radius:6px;background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease}.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   .btn-auto-sort[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1d4ed8);transform:translateY(-2px);box-shadow:0 4px 12px #3b82f666}.inventory-controls[_ngcontent-%COMP%]   .sort-controls[_ngcontent-%COMP%]   .btn-auto-sort[_ngcontent-%COMP%]:active{transform:translateY(0)}.inventory-grid-container[_ngcontent-%COMP%]{flex:1;overflow:visible;padding:16px;background:var(--bg-primary)}.inventory-grid-cells[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(8,1fr);gap:12px;width:100%;max-width:100%}@media (max-width: 1400px){.inventory-grid-cells[_ngcontent-%COMP%]{grid-template-columns:repeat(6,1fr);gap:10px}}@media (max-width: 1000px){.inventory-grid-cells[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr);gap:10px}}@media (max-width: 768px){.inventory-grid-cells[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:8px}}@media (max-width: 480px){.inventory-grid-cells[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:6px}}.inventory-cell[_ngcontent-%COMP%]{position:relative;aspect-ratio:1;background:linear-gradient(135deg,#1e1e1ecc,#141414e6);border:3px solid var(--border-color);border-radius:10px;cursor:pointer;transition:all .2s ease;overflow:hidden}.inventory-cell[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:3px;border:1px solid rgba(255,255,255,.1);border-radius:7px;pointer-events:none}.inventory-cell[_ngcontent-%COMP%]   .cell-content[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:8px;z-index:1}.inventory-cell[_ngcontent-%COMP%]   .cell-icon[_ngcontent-%COMP%]{font-size:40px;margin-bottom:4px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.5))}@media (max-width: 768px){.inventory-cell[_ngcontent-%COMP%]   .cell-icon[_ngcontent-%COMP%]{font-size:32px}}.inventory-cell[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:var(--text-primary);text-align:center;line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;text-shadow:0 2px 4px rgba(0,0,0,.8);letter-spacing:.3px}@media (max-width: 768px){.inventory-cell[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{font-size:10px}}.inventory-cell[_ngcontent-%COMP%]   .cell-quantity[_ngcontent-%COMP%]{position:absolute;bottom:6px;right:6px;background:linear-gradient(135deg,#000000e6,#000c);color:#fff;font-size:12px;font-weight:700;padding:3px 8px;border-radius:12px;border:1px solid rgba(255,255,255,.2);box-shadow:0 2px 6px #0009;z-index:2}.inventory-cell[_ngcontent-%COMP%]:hover:not(.empty){box-shadow:0 12px 28px #00000080;z-index:10}.inventory-cell[_ngcontent-%COMP%]:active:not(.empty){opacity:.9}.inventory-cell.rarity-common[_ngcontent-%COMP%]{border-color:#9ca3af}.inventory-cell.rarity-common[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{color:#d1d5db}.inventory-cell.rarity-common[_ngcontent-%COMP%]:hover{border-color:#d1d5db;box-shadow:0 12px 28px #9ca3af66}.inventory-cell.rarity-uncommon[_ngcontent-%COMP%]{border-color:#10b981}.inventory-cell.rarity-uncommon[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{color:#34d399}.inventory-cell.rarity-uncommon[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:radial-gradient(circle at 50% 50%,rgba(16,185,129,.2),transparent 70%);pointer-events:none}.inventory-cell.rarity-uncommon[_ngcontent-%COMP%]:hover{border-color:#34d399;box-shadow:0 12px 28px #10b98180}.inventory-cell.rarity-rare[_ngcontent-%COMP%]{border-color:#3b82f6}.inventory-cell.rarity-rare[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{color:#60a5fa}.inventory-cell.rarity-rare[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:radial-gradient(circle at 50% 50%,rgba(59,130,246,.2),transparent 70%);pointer-events:none}.inventory-cell.rarity-rare[_ngcontent-%COMP%]:hover{border-color:#60a5fa;box-shadow:0 12px 28px #3b82f699}.inventory-cell.rarity-epic[_ngcontent-%COMP%]{border-color:#a855f7}.inventory-cell.rarity-epic[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{color:#c084fc}.inventory-cell.rarity-epic[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:radial-gradient(circle at 50% 50%,rgba(168,85,247,.25),transparent 70%);pointer-events:none;animation:_ngcontent-%COMP%_epic-glow-pulse 2s ease-in-out infinite}.inventory-cell.rarity-epic[_ngcontent-%COMP%]:hover{border-color:#c084fc;box-shadow:0 12px 28px #a855f7b3}.inventory-cell.rarity-legendary[_ngcontent-%COMP%]{border-color:#f97316}.inventory-cell.rarity-legendary[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{color:#fb923c;animation:_ngcontent-%COMP%_legendary-text-glow 2s ease-in-out infinite}.inventory-cell.rarity-legendary[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:radial-gradient(circle at 50% 50%,rgba(249,115,22,.3),transparent 70%);pointer-events:none;animation:_ngcontent-%COMP%_legendary-glow-pulse 1.5s ease-in-out infinite}.inventory-cell.rarity-legendary[_ngcontent-%COMP%]:hover{border-color:#fb923c;box-shadow:0 12px 32px #f97316e6}.inventory-cell.rarity-unique[_ngcontent-%COMP%]{border-color:#14b8a6}.inventory-cell.rarity-unique[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{color:#5eead4}.inventory-cell.rarity-unique[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:radial-gradient(circle at 50% 50%,rgba(20,184,166,.25),transparent 70%);pointer-events:none}.inventory-cell.rarity-unique[_ngcontent-%COMP%]:hover{border-color:#5eead4;box-shadow:0 12px 28px #14b8a6b3}.inventory-cell.rarity-mythic[_ngcontent-%COMP%]{border-color:#ec4899}.inventory-cell.rarity-mythic[_ngcontent-%COMP%]   .cell-name[_ngcontent-%COMP%]{color:#f9a8d4;animation:_ngcontent-%COMP%_mythic-text-glow 1.5s ease-in-out infinite}.inventory-cell.rarity-mythic[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:radial-gradient(circle at 50% 50%,rgba(236,72,153,.3),transparent 70%);pointer-events:none;animation:_ngcontent-%COMP%_mythic-glow-pulse 1.2s ease-in-out infinite}.inventory-cell.rarity-mythic[_ngcontent-%COMP%]:hover{border-color:#f9a8d4;box-shadow:0 12px 32px #ec4899e6}.inventory-cell.empty[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1414144d,#0f0f0f66);border-color:#ffffff0d;cursor:default}.inventory-cell.empty[_ngcontent-%COMP%]:before{border-color:#ffffff08}.inventory-cell.empty[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:28px;opacity:.15;filter:grayscale(100%)}.inventory-cell.empty[_ngcontent-%COMP%]:hover{transform:none;box-shadow:none;border-color:#ffffff14}.inventory-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:var(--bg-secondary);border-top:2px solid var(--border-color)}.inventory-footer[_ngcontent-%COMP%]   .inventory-count[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary)}.inventory-footer[_ngcontent-%COMP%]   .inventory-weight[_ngcontent-%COMP%]{font-size:13px;color:var(--text-muted)}@keyframes _ngcontent-%COMP%_icon-bounce{0%,to{transform:translateY(0) scale(1)}50%{transform:translateY(-4px) scale(1.1)}}@keyframes _ngcontent-%COMP%_epic-glow-pulse{0%,to{opacity:.25}50%{opacity:.4}}@keyframes _ngcontent-%COMP%_legendary-glow-pulse{0%,to{opacity:.3}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_legendary-text-glow{0%,to{text-shadow:0 0 10px rgba(249,115,22,.8),0 2px 4px rgba(0,0,0,.8)}50%{text-shadow:0 0 20px rgb(249,115,22),0 2px 4px rgba(0,0,0,.8)}}@keyframes _ngcontent-%COMP%_mythic-glow-pulse{0%,to{opacity:.3}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_mythic-text-glow{0%,to{text-shadow:0 0 10px rgba(236,72,153,.8),0 2px 4px rgba(0,0,0,.8)}50%{text-shadow:0 0 20px rgb(236,72,153),0 2px 4px rgba(0,0,0,.8)}}.drag-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px;background:linear-gradient(135deg,#1e1e1ef2,#141414fa);border:3px solid var(--accent-primary);border-radius:10px;box-shadow:0 12px 32px #000c,0 0 20px #3b82f699;opacity:.9;cursor:grabbing;min-width:100px;min-height:100px}.drag-preview[_ngcontent-%COMP%]   .preview-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:8px;filter:drop-shadow(0 4px 8px rgba(0,0,0,.8));animation:_ngcontent-%COMP%_drag-icon-pulse .5s ease-in-out infinite}.drag-preview[_ngcontent-%COMP%]   .preview-name[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#fff;text-align:center;text-shadow:0 2px 6px rgba(0,0,0,.9)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3;background:#ffffff0d!important;border:2px dashed rgba(255,255,255,.3)!important}.cdk-drag-placeholder[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(.25,.8,.25,1)}.cdk-drag[_ngcontent-%COMP%]{cursor:grab;transition:all .2s ease}.cdk-drag[_ngcontent-%COMP%]:active{cursor:grabbing}.inventory-grid-cells.cdk-drop-list-dragging[_ngcontent-%COMP%]   .inventory-cell[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .3s cubic-bezier(.25,.8,.25,1)}.cdk-drop-list-receiving[_ngcontent-%COMP%]{background:#3b82f60d;border-color:var(--accent-primary)}.cdk-drop-list-receiving[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;border:2px solid var(--accent-primary);border-radius:8px;pointer-events:none;animation:_ngcontent-%COMP%_drop-zone-pulse 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_drag-icon-pulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_drop-zone-pulse{0%,to{opacity:.5;box-shadow:0 0 #3b82f6b3}50%{opacity:1;box-shadow:0 0 0 8px #3b82f600}}.cdk-drag-preview[_ngcontent-%COMP%]{cursor:grabbing!important}.equipment-slot-diablo[_ngcontent-%COMP%]{transition:all .3s ease}.equipment-slot-diablo.cdk-drop-list-dragging[_ngcontent-%COMP%]{border-style:dashed;border-width:3px;background:#3b82f60d}.equipment-slot-diablo.cdk-drop-list-receiving[_ngcontent-%COMP%]{border-color:#3b82f6!important;background:linear-gradient(135deg,#3b82f633,#2563eb26)!important;box-shadow:inset 0 0 20px #3b82f64d,0 0 20px #3b82f680!important;animation:_ngcontent-%COMP%_equipment-drop-pulse 1s ease-in-out infinite;transform:scale(1.05)}.equipment-slot-diablo.cdk-drop-list-receiving[_ngcontent-%COMP%]   .slot-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_equipment-icon-bounce .5s ease-in-out infinite;filter:drop-shadow(0 0 10px rgba(59,130,246,.8))}.equipment-slot-diablo.cdk-drop-list-receiving[_ngcontent-%COMP%]   .slot-empty-text[_ngcontent-%COMP%]{color:#3b82f6;font-weight:700;text-shadow:0 0 10px rgba(59,130,246,.8)}.equipment-slot-diablo[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{cursor:grab}.equipment-slot-diablo[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:active{cursor:grabbing}.equipment-slot-diablo[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3;border:2px dashed var(--border-color)}.equipment-slot-diablo[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]   .item-tooltip[_ngcontent-%COMP%]{opacity:0}.equipment-slot-diablo[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_equipment-drop-pulse{0%,to{box-shadow:inset 0 0 20px #3b82f64d,0 0 20px #3b82f680}50%{box-shadow:inset 0 0 30px #3b82f680,0 0 30px #3b82f6cc}}@keyframes _ngcontent-%COMP%_equipment-icon-bounce{0%,to{transform:translateY(0) scale(1)}50%{transform:translateY(-8px) scale(1.15)}}@keyframes _ngcontent-%COMP%_legendary-glow-diablo{0%,to{box-shadow:inset 0 2px 8px var(--shadow),0 0 40px #f97316cc;border-color:#f97316}50%{box-shadow:inset 0 2px 8px var(--shadow),0 0 60px #f97316;border-color:#fb923c}}@keyframes _ngcontent-%COMP%_legendary-pulse-border{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_legendary-glow{0%,to{box-shadow:0 0 12px #f9731680}50%{box-shadow:0 0 20px #f97316cc}}@keyframes _ngcontent-%COMP%_legendary-pulse{0%,to{box-shadow:0 0 20px #f9731680}50%{box-shadow:0 0 30px #f97316cc}}.menu-divider[_ngcontent-%COMP%]{height:1px;background:var(--border-color);margin:12px 0;opacity:.5}@media (max-width: 768px){.menu-divider[_ngcontent-%COMP%]{margin:16px 0}}.menu-section-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px;padding:8px 16px;margin-top:4px}@media (max-width: 768px){.menu-section-title[_ngcontent-%COMP%]{font-size:13px;padding:10px 18px;margin-top:6px}}@media (max-width: 480px){.menu-section-title[_ngcontent-%COMP%]{font-size:14px}}.menu-item.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.menu-item.success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);transform:translate(8px)}.menu-item.warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.menu-item.warning[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d97706,#b45309);transform:translate(8px)}.menu-item.danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.menu-item.danger[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#dc2626,#b91c1c);transform:translate(8px)}.shop-section[_ngcontent-%COMP%]{margin-top:40px;padding:30px;background:var(--bg-primary);border-radius:16px;border:1px solid var(--border-color)}.shop-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:30px}.shop-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:10px;color:var(--text-primary)}.shop-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem}.shop-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-desc[_ngcontent-%COMP%]   .gold-amount[_ngcontent-%COMP%]{color:#f59e0b;font-weight:700;font-size:1.1rem}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:24px;margin-top:24px}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:16px;padding:20px;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;display:flex;flex-direction:column;gap:12px}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;opacity:0;transition:opacity .3s ease}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 16px 48px #0000004d;border-color:var(--accent-color)}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover:before{opacity:1}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]{border-color:#f59e0b80}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#f59e0b,#ef4444)}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]{border-color:#8b5cf680}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#8b5cf6,#3b82f6)}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]{border-color:#10b98180}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#10b981,#06b6d4)}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;padding-bottom:12px;border-bottom:1px solid var(--border-color)}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-primary);margin:0;flex:1;line-height:1.3}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#f59e0b;white-space:nowrap;padding:4px 12px;background:#f59e0b1a;border-radius:8px}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-desc[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary);line-height:1.6;margin:0;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;padding:8px 0}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:6px 12px;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:8px;font-size:13px;font-weight:600;color:var(--text-primary)}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:4px 10px;border-radius:6px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag.type-tag[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6;border:1px solid rgba(59,130,246,.3)}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-tags[_ngcontent-%COMP%]   .tag.grade-tag[_ngcontent-%COMP%]{background:#8b5cf61a;color:#8b5cf6;border:1px solid rgba(139,92,246,.3)}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]{margin-top:auto;padding-top:12px;border-top:1px solid var(--border-color)}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .buy-btn[_ngcontent-%COMP%]{width:100%;padding:12px 20px;border-radius:10px;font-size:15px;font-weight:700;border:none;cursor:pointer;transition:all .3s ease;background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 12px #10b9814d}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .buy-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);box-shadow:0 6px 16px #10b98166;transform:translateY(-2px)}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .buy-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .buy-btn.insufficient-gold[_ngcontent-%COMP%]{background:var(--bg-tertiary);color:var(--text-secondary);border:2px solid var(--border-color);cursor:not-allowed;opacity:.6;box-shadow:none}.shop-section[_ngcontent-%COMP%]   .shop-items-grid[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   .buy-btn.insufficient-gold[_ngcontent-%COMP%]:hover{transform:none;background:var(--bg-tertiary)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]{padding:24px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;padding-bottom:24px;border-bottom:2px solid var(--border-color)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-title-section[_ngcontent-%COMP%]   .shop-title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:var(--text-primary);margin:0 0 8px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-title-section[_ngcontent-%COMP%]   .shop-subtitle[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary);margin:0}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px 20px;background:linear-gradient(135deg,#f59e0b1a,#d977060d);border:2px solid rgba(245,158,11,.3);border-radius:12px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-icon[_ngcontent-%COMP%]{font-size:28px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-info[_ngcontent-%COMP%]   .wallet-label[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]   .shop-wallet[_ngcontent-%COMP%]   .wallet-info[_ngcontent-%COMP%]   .wallet-amount[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#f59e0b}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-items-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:16px;padding:0;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;display:flex;flex-direction:column}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;opacity:0;transition:opacity .3s ease}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 16px 48px var(--shadow);border-color:var(--accent-color)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover:before{opacity:1}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]:hover   .item-icon-large[_ngcontent-%COMP%]{transform:scale(1.15) rotate(5deg)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]{border-color:#f59e0b80}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#f59e0b,#ef4444)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-legendary[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#ef4444)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-epic[_ngcontent-%COMP%]{border-color:#a855f780}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-epic[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#a855f7,#8b5cf6)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-epic[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a855f7,#8b5cf6)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]{border-color:#8b5cf680}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#8b5cf6,#3b82f6)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-rare[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#3b82f6)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]{border-color:#10b98180}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#10b981,#06b6d4)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-uncommon[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#06b6d4)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-common[_ngcontent-%COMP%]{border-color:#6b728080}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-common[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#6b7280,#9ca3af)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card.grade-common[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#9ca3af)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]{position:absolute;top:12px;left:12px;right:12px;display:flex;justify-content:space-between;z-index:2}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]   .item-grade-badge[_ngcontent-%COMP%], .shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]   .item-type-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:8px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:#fff;box-shadow:0 2px 8px #0003}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-badge-container[_ngcontent-%COMP%]   .item-type-badge[_ngcontent-%COMP%]{background:#0009;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--bg-tertiary),var(--bg-primary));padding:40px 20px 30px;display:flex;justify-content:center;align-items:center;border-bottom:1px solid var(--border-color);position:relative}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-image-section[_ngcontent-%COMP%]   .item-icon-large[_ngcontent-%COMP%]{font-size:64px;transition:transform .3s ease}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]{padding:20px;flex:1;display:flex;flex-direction:column;gap:12px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-primary);margin:0;line-height:1.3}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);line-height:1.6;margin:0;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]   .stat-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:6px 10px;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:8px;font-size:13px;font-weight:600}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]   .stat-chip[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:14px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-stats-row[_ngcontent-%COMP%]   .stat-chip[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--accent-color)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#8b5cf60d;border:1px solid rgba(139,92,246,.2);border-radius:8px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-icon[_ngcontent-%COMP%]{font-size:14px;flex-shrink:0}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-info-section[_ngcontent-%COMP%]   .item-effects[_ngcontent-%COMP%]   .effect-item[_ngcontent-%COMP%]   .effect-text[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);line-height:1.4}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]{padding:16px 20px;background:var(--bg-tertiary);border-top:1px solid var(--border-color)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;margin-bottom:12px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]   .price-icon[_ngcontent-%COMP%]{font-size:20px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]   .price-amount[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#f59e0b}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .item-price-display[_ngcontent-%COMP%]   .price-unit[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-secondary)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button[_ngcontent-%COMP%]{width:100%;padding:14px 20px;border-radius:10px;font-size:15px;font-weight:700;border:none;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:18px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.can-buy[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 4px 12px #10b9814d}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.can-buy[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);box-shadow:0 6px 16px #10b98166;transform:translateY(-2px)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.can-buy[_ngcontent-%COMP%]:active{transform:translateY(0)}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item-card[_ngcontent-%COMP%]   .item-purchase-section[_ngcontent-%COMP%]   .purchase-button.cannot-buy[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-secondary);border:2px solid var(--border-color);cursor:not-allowed;opacity:.6}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:24px;opacity:.6}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);margin:0 0 12px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{font-size:15px;color:var(--text-secondary);margin:0 0 24px;line-height:1.6}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 20px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:10px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%]   .hint-icon[_ngcontent-%COMP%]{font-size:18px}.shop-section[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .empty-shop-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%]   .hint-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary)}.inventory-tabs[_ngcontent-%COMP%]{display:flex;gap:8px;padding:16px 20px 0;background:var(--bg-secondary);border-bottom:2px solid var(--border-color);flex-shrink:0}.inventory-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{flex:1;padding:12px 20px;background:var(--bg-primary);border:1px solid var(--border-color);border-bottom:none;border-radius:8px 8px 0 0;font-size:1rem;font-weight:600;color:var(--text-secondary);cursor:pointer;transition:all .3s ease;position:relative;white-space:nowrap}.inventory-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:not(.active){background:var(--bg-tertiary);color:var(--text-primary)}.inventory-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--accent-color);border-color:var(--accent-color);border-bottom-color:var(--bg-secondary);transform:translateY(2px)}.inventory-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:2px;background:var(--bg-secondary)}.tab-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease;flex:1;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:column;min-height:0}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.shop-content-wrapper[_ngcontent-%COMP%]{display:none}.dungeon-test-dialog[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw!important;max-width:100vw!important;height:100vh!important;max-height:100vh!important;z-index:10000;display:flex;align-items:center;justify-content:center}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#000c;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{position:relative;width:100vw!important;max-width:100vw!important;height:100vh!important;max-height:100vh!important;background:var(--bg-primary);border-radius:0!important;box-shadow:none;display:flex;flex-direction:column;overflow:hidden}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{padding:18px 40px;border-bottom:2px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;background:linear-gradient(135deg,#ffd7001a,#ff8c001a);flex-shrink:0}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:700;color:var(--text-primary)}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#ffffff1a;color:var(--text-primary);font-size:22px;border-radius:8px;cursor:pointer;transition:all .3s}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:rotate(90deg)}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]{padding:40px 60px;overflow-y:auto;flex:1}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d;border-radius:5px}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:5px}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-section[_ngcontent-%COMP%]{margin-bottom:40px}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:22px;color:var(--text-primary);font-weight:600}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card[_ngcontent-%COMP%]{padding:30px;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:12px;cursor:pointer;transition:all .3s;text-align:center}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #0003;border-color:#ffd70080}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card.selected[_ngcontent-%COMP%]{border-color:gold;background:#ffd7001a;box-shadow:0 0 20px #ffd7004d}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card[_ngcontent-%COMP%]   .dungeon-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card[_ngcontent-%COMP%]   .dungeon-name[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin-bottom:10px;color:var(--text-primary)}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card[_ngcontent-%COMP%]   .dungeon-level[_ngcontent-%COMP%]{font-size:16px;color:var(--text-secondary);margin-bottom:6px}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .dungeon-type-grid[_ngcontent-%COMP%]   .dungeon-type-card[_ngcontent-%COMP%]   .dungeon-floors[_ngcontent-%COMP%]{font-size:14px;color:var(--text-tertiary)}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn[_ngcontent-%COMP%]{padding:24px;border:2px solid var(--border-color);border-radius:10px;background:var(--bg-secondary);color:var(--text-primary);font-size:18px;font-weight:600;cursor:pointer;transition:all .3s;display:flex;flex-direction:column;align-items:center;gap:10px}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn[_ngcontent-%COMP%]   .difficulty-mult[_ngcontent-%COMP%]{font-size:14px;opacity:.7}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0003}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.selected[_ngcontent-%COMP%]{border-width:3px;box-shadow:0 0 15px}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.easy[_ngcontent-%COMP%]{border-color:#4caf50}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.easy.selected[_ngcontent-%COMP%]{background:#4caf5033;box-shadow:0 0 15px #4caf5080}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.normal[_ngcontent-%COMP%]{border-color:#2196f3}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.normal.selected[_ngcontent-%COMP%]{background:#2196f333;box-shadow:0 0 15px #2196f380}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.hard[_ngcontent-%COMP%]{border-color:#ff9800}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.hard.selected[_ngcontent-%COMP%]{background:#ff980033;box-shadow:0 0 15px #ff980080}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.hell[_ngcontent-%COMP%]{border-color:#f44336}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .difficulty-grid[_ngcontent-%COMP%]   .difficulty-btn.hell.selected[_ngcontent-%COMP%]{background:#f4433633;box-shadow:0 0 15px #f4433680}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 20px;background:var(--bg-secondary);border-radius:8px;cursor:pointer;transition:all .3s}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]:hover{background:#ffffff0d}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:24px;height:24px;cursor:pointer}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .test-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:17px;color:var(--text-primary)}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .player-stats[_ngcontent-%COMP%]{background:var(--bg-secondary);padding:24px;border-radius:8px}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .player-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--border-color)}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .player-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .player-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:17px;color:var(--text-secondary);font-weight:500}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .player-stats[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:17px;color:var(--text-primary);font-weight:600}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]{padding:24px 60px;border-top:2px solid var(--border-color);display:flex;justify-content:flex-end;gap:16px;background:#0003}@media (max-width: 768px){.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]{padding:20px 24px;gap:12px}}@media (max-width: 480px){.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]{padding:20px 16px;flex-direction:row;justify-content:stretch}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 32px;font-size:17px;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:all .3s}@media (max-width: 768px){.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:52px;padding:14px 28px;font-size:16px}}@media (max-width: 480px){.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:56px;padding:16px 24px;font-size:17px;border-radius:12px}}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-primary);border:2px solid var(--border-color)}@media (max-width: 480px){.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{background:#ef444433;border-color:#ef444466;color:#fca5a5}}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{background:#ffffff1a}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:active{transform:scale(.97)}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ff8c00);color:#000}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #ffd70066}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.97)}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.dungeon-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9999;background:#000000f2;overflow:hidden}.dungeon-overlay[_ngcontent-%COMP%]   app-dungeon-explorer[_ngcontent-%COMP%]{display:block;width:100%;height:100%}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-content.dungeon-active[_ngcontent-%COMP%]{width:100vw!important;max-width:100vw!important;height:100vh!important;max-height:100vh!important}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-content.dungeon-active[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{flex-shrink:0}.dungeon-test-dialog[_ngcontent-%COMP%]   .dialog-content.dungeon-active[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]{display:none}.dungeon-test-dialog[_ngcontent-%COMP%]   .dungeon-container[_ngcontent-%COMP%]{flex:1;width:100%;height:100%;overflow:hidden;display:flex;flex-direction:column}.dungeon-test-dialog[_ngcontent-%COMP%]   .dungeon-container[_ngcontent-%COMP%]   app-dungeon-explorer[_ngcontent-%COMP%]{display:block;width:100%;height:100%;flex:1}.item-context-menu[_ngcontent-%COMP%]{position:fixed;z-index:10000;background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:8px;box-shadow:0 8px 24px #0006;padding:8px 0;min-width:180px;animation:_ngcontent-%COMP%_contextMenuFadeIn .15s ease-out}.item-context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;cursor:pointer;transition:all .2s ease;color:var(--text-primary)}.item-context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{font-size:18px;width:24px;text-align:center}.item-context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]   .menu-text[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.item-context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary);color:var(--accent-primary)}.item-context-menu[_ngcontent-%COMP%]   .context-menu-item.danger[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}@keyframes _ngcontent-%COMP%_contextMenuFadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.item-info-modal[_ngcontent-%COMP%]{position:fixed;z-index:10001;background:var(--bg-primary);border:3px solid var(--accent-primary);border-radius:12px;box-shadow:0 12px 48px #00000080;min-width:400px;max-width:500px;cursor:move;animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:var(--bg-secondary);border-bottom:2px solid var(--border-color);border-radius:10px 10px 0 0;-webkit-user-select:none;user-select:none}@media (max-width: 768px){.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:18px 20px;position:sticky;top:0;z-index:10;background:var(--bg-secondary)}}@media (max-width: 480px){.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:20px}}.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700;color:var(--accent-primary);display:flex;align-items:center;gap:8px}@media (max-width: 768px){.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:19px}}@media (max-width: 480px){.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:20px}}.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border-color);color:var(--text-primary);font-size:24px;width:36px;height:36px;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;flex-shrink:0}@media (max-width: 768px){.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%]{width:44px;height:44px;font-size:26px}}@media (max-width: 480px){.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%]{width:48px;height:48px;font-size:28px}}.item-info-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-close-btn[_ngcontent-%COMP%]:hover{background:#ef4444;border-color:#ef4444;color:#fff}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px;cursor:default}@media (max-width: 768px){.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 480px){.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border-radius:8px;background:var(--bg-secondary);margin-bottom:16px;border:2px solid var(--border-color)}@media (max-width: 768px){.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]{padding:18px;gap:14px}}@media (max-width: 480px){.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]{padding:20px}}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-common[_ngcontent-%COMP%]{border-color:#9ca3af}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-uncommon[_ngcontent-%COMP%]{border-color:#10b981}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-rare[_ngcontent-%COMP%]{border-color:#3b82f6}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-epic[_ngcontent-%COMP%]{border-color:#a855f7}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-legendary[_ngcontent-%COMP%]{border-color:#f97316}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-unique[_ngcontent-%COMP%]{border-color:#ec4899}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header.rarity-mythic[_ngcontent-%COMP%]{border-color:#fbbf24}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]   .item-info-icon[_ngcontent-%COMP%]{font-size:48px;width:64px;height:64px;display:flex;align-items:center;justify-content:center;background:var(--bg-tertiary);border-radius:8px;flex-shrink:0}@media (max-width: 768px){.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]   .item-info-icon[_ngcontent-%COMP%]{font-size:52px;width:72px;height:72px}}@media (max-width: 480px){.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]   .item-info-icon[_ngcontent-%COMP%]{font-size:56px;width:80px;height:80px}}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]   .item-info-title[_ngcontent-%COMP%]{flex:1}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]   .item-info-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:22px;font-weight:700;color:var(--text-primary)}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-header[_ngcontent-%COMP%]   .item-info-title[_ngcontent-%COMP%]   .item-rarity-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600;background:var(--accent-primary);color:#fff}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-meta[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:16px}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-meta[_ngcontent-%COMP%]   .meta-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:6px;font-size:13px;font-weight:500}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-meta[_ngcontent-%COMP%]   .meta-badge.type-badge[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--accent-primary);border:1px solid var(--accent-primary)}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-meta[_ngcontent-%COMP%]   .meta-badge.quantity-badge[_ngcontent-%COMP%]{background:var(--accent-primary);color:#fff}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]{background:var(--bg-secondary);padding:16px;border-radius:8px;margin-bottom:16px}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]   .stats-title[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;font-weight:700;color:var(--accent-primary);text-transform:uppercase;letter-spacing:1px}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px;background:var(--bg-primary);border-radius:6px;border:1px solid var(--border-color)}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:20px;width:28px;text-align:center}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{flex:1;font-size:13px;color:var(--text-secondary)}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:var(--accent-primary)}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-description[_ngcontent-%COMP%]{background:var(--bg-secondary);padding:16px;border-radius:8px;margin-bottom:16px}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-description[_ngcontent-%COMP%]   .desc-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;font-weight:700;color:var(--accent-primary);text-transform:uppercase;letter-spacing:1px}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;line-height:1.6;color:var(--text-secondary)}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;padding:12px 20px;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s ease;border:2px solid}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-actions[_ngcontent-%COMP%]   .action-btn.equip-btn[_ngcontent-%COMP%]{background:var(--accent-primary);border-color:var(--accent-primary);color:#fff}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-actions[_ngcontent-%COMP%]   .action-btn.equip-btn[_ngcontent-%COMP%]:hover{background:transparent;color:var(--accent-primary)}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-actions[_ngcontent-%COMP%]   .action-btn.discard-btn[_ngcontent-%COMP%]{background:transparent;border-color:#ef4444;color:#ef4444}.item-info-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .item-info-actions[_ngcontent-%COMP%]   .action-btn.discard-btn[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.character-inventory-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:10000;padding:20px;animation:_ngcontent-%COMP%_fadeIn .2s ease}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:20px;width:100%;max-width:1000px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000004d;border:2px solid var(--border-color);animation:_ngcontent-%COMP%_modalSlideIn .3s cubic-bezier(.4,0,.2,1);overflow:hidden}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:2px solid var(--border-color);background:var(--bg-secondary);flex-shrink:0}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:700;color:var(--text-primary);flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:32px;color:var(--text-secondary);cursor:pointer;width:40px;height:40px;min-width:40px;min-height:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all .2s ease;flex-shrink:0}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:var(--text-primary)}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .character-info-bar[_ngcontent-%COMP%]{padding:12px 24px;background:var(--bg-tertiary);border-bottom:1px solid var(--border-color)}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .character-info-bar[_ngcontent-%COMP%]   .info-badges[_ngcontent-%COMP%]{display:flex;gap:12px}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .character-info-bar[_ngcontent-%COMP%]   .info-badges[_ngcontent-%COMP%]   .stat-badge[_ngcontent-%COMP%]{padding:6px 14px;border-radius:8px;font-size:14px;font-weight:600;display:inline-flex;align-items:center;gap:4px}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .character-info-bar[_ngcontent-%COMP%]   .info-badges[_ngcontent-%COMP%]   .stat-badge.level[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#a78bfa);color:#fff;box-shadow:0 2px 6px #8b5cf64d}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .character-info-bar[_ngcontent-%COMP%]   .info-badges[_ngcontent-%COMP%]   .stat-badge.gold[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fbbf24,#f59e0b);color:#fff;box-shadow:0 2px 6px #fbbf244d}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:24px}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]   .equipment-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]   .inventory-items-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:var(--text-primary);margin-bottom:20px;padding-bottom:12px;border-bottom:2px solid var(--border-color)}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]   .equipment-section[_ngcontent-%COMP%]   .no-equipment[_ngcontent-%COMP%], .character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]   .equipment-section[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%], .character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]   .inventory-items-section[_ngcontent-%COMP%]   .no-equipment[_ngcontent-%COMP%], .character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .inventory-sections[_ngcontent-%COMP%]   .inventory-items-section[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%]{text-align:center;padding:40px;color:var(--text-secondary);font-size:16px;background:var(--bg-secondary);border-radius:12px}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:20px 24px;border-top:2px solid var(--border-color);background:var(--bg-secondary);flex-shrink:0}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{padding:10px 24px;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease}.character-inventory-modal-overlay[_ngcontent-%COMP%]   .character-inventory-modal[_ngcontent-%COMP%]   .panel-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-color:var(--primary-color);color:var(--primary-color)}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:scale(.95) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}'],data:{animation:[Nt("slideInOut",[Ye(":enter",[ve({transform:"translateX(100%)"}),We("300ms ease-out",ve({transform:"translateX(0)"}))]),Ye(":leave",[We("300ms ease-in",ve({transform:"translateX(100%)"}))])]),Nt("contextMenuAnimation",[Ye(":enter",[ve({opacity:0,transform:"scale(0.9) translateY(-10px)"}),We("200ms cubic-bezier(0.4, 0.0, 0.2, 1)",ve({opacity:1,transform:"scale(1) translateY(0)"}))]),Ye(":leave",[We("150ms cubic-bezier(0.4, 0.0, 1, 1)",ve({opacity:0,transform:"scale(0.9) translateY(-10px)"}))])])]}})};var Og=["loginComponent"],Dt=class r{constructor(t,e){this.authService=t;this.router=e}loginComponent;loginConfig={title:"\u{1F4D6} \uC18C\uC124 \uB77C\uC774\uBE0C\uB7EC\uB9AC",subtitle:"\uC778\uD130\uB799\uD2F0\uBE0C \uC18C\uC124 \uC138\uACC4\uC5D0 \uC624\uC2E0 \uAC83\uC744 \uD658\uC601\uD569\uB2C8\uB2E4",moduleName:"novel",showSocialLogin:!1,showRegisterLink:!1,backgroundAnimation:["\u{1F4D6}","\u{1F4DA}","\u2728","\u{1F3AD}","\u2694\uFE0F","\u{1F3F0}","\u{1F52E}","\u{1F4DC}"],themeColors:{primary:"#8b5cf6",secondary:"#6366f1",accent:"#a855f7"}};ngOnInit(){this.authService.isLoggedIn()&&this.router.navigate(["/novel"])}onLogin(t){this.authService.login(t.username,t.password)?this.router.navigate(["/novel"]):this.loginComponent&&this.loginComponent.setError("\uC0AC\uC6A9\uC790 \uC774\uB984 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.")}static \u0275fac=function(e){return new(e||r)(z(Pe),z(ue))};static \u0275cmp=ne({type:r,selectors:[["app-novel-login"]],viewQuery:function(e,n){if(e&1&&tt(Og,5),e&2){let a;nt(a=ot())&&(n.loginComponent=a.first)}},standalone:!1,decls:2,vars:1,consts:[["loginComponent",""],[3,"loginSubmit","config"]],template:function(e,n){if(e&1){let a=v();o(0,"app-unified-login",1,0),f("loginSubmit",function(m){return _(a),u(n.onLogin(m))}),i()}e&2&&p("config",n.loginConfig)},dependencies:[jn],encapsulation:2})};var Ve=class r{constructor(t,e){this.authService=t;this.router=e}canActivate(t,e){return this.authService.isLoggedIn()?!0:(this.router.navigate(["/novel/login"]),!1)}static \u0275fac=function(e){return new(e||r)(N(Pe),N(ue))};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var It=class r{scenes=new Map;currentScene=null;constructor(){}registerScene(t){this.scenes.set(t.id,t)}registerScenes(t){t.forEach(e=>this.registerScene(e))}loadScene(t){let e=this.scenes.get(t);return e?(this.currentScene=e,e):null}evaluateChoices(t,e){let n=[];for(let a of t.choices){let s=k({},a);if(a.conditions&&a.conditions.length>0){let{isAvailable:m,reason:C}=this.checkConditions(a.conditions,e);s.isDisabled=!m,s.disabledReason=C}else s.isDisabled=!1;n.push(s)}return n}checkConditions(t,e){for(let n of t){let a=this.evaluateCondition(n,e);if(!a.isAvailable)return a}return{isAvailable:!0}}evaluateCondition(t,e){switch(t.type){case"stat":return this.checkStatCondition(t,e);case"item":return this.checkItemCondition(t,e);case"flag":return this.checkFlagCondition(t,e);case"injury":return this.checkInjuryCondition(t,e);case"skill":return this.checkSkillCondition(t,e);case"sect":return this.checkSectCondition(t,e);case"personality":return this.checkPersonalityCondition(t,e);case"tendency":return this.checkTendencyCondition(t,e);case"relationship":return this.checkRelationshipCondition(t,e);default:return{isAvailable:!1,reason:"\uC54C \uC218 \uC5C6\uB294 \uC870\uAC74 \uD0C0\uC785"}}}checkStatCondition(t,e){let n=e.stats[t.param];return n===void 0?{isAvailable:!1,reason:`\uC2A4\uD0EF\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC74C: ${t.param}`}:this.compareValues(n,t.operator,t.value)?{isAvailable:!0}:{isAvailable:!1,reason:t.displayText||`${t.param} ${t.operator} ${t.value} \uD544\uC694 (\uD604\uC7AC: ${n})`}}checkItemCondition(t,e){let n=e.inventory.some(a=>a.id===t.param);return t.operator==="=="&&!n?{isAvailable:!1,reason:`\uD544\uC694 \uC544\uC774\uD15C: ${t.param}`}:t.operator==="!="&&n?{isAvailable:!1,reason:`\uBD88\uAC00\uB2A5 (\uC544\uC774\uD15C \uC18C\uC9C0 \uC911: ${t.param})`}:{isAvailable:!0}}checkFlagCondition(t,e){let n=e.flags.has(t.param);return t.operator==="=="&&!n?{isAvailable:!1,reason:t.displayText||"\uD544\uC694 \uC870\uAC74 \uBBF8\uCDA9\uC871"}:t.operator==="!="&&n?{isAvailable:!1,reason:t.displayText||"\uC774\uBBF8 \uC644\uB8CC\uB428"}:{isAvailable:!0}}checkInjuryCondition(t,e){return e.injuries.some(a=>a.type===t.param)?{isAvailable:!1,reason:`\uBD80\uC0C1\uC73C\uB85C \uC778\uD574 \uBD88\uAC00\uB2A5: ${t.param}`}:{isAvailable:!0}}checkSkillCondition(t,e){return e.learnedSkills.includes(t.param)?{isAvailable:!0}:{isAvailable:!1,reason:`\uD544\uC694 \uBB34\uACF5: ${t.param}`}}checkSectCondition(t,e){return e.sect!==t.value?{isAvailable:!1,reason:`${t.value} \uBB38\uD30C\uB9CC \uAC00\uB2A5`}:{isAvailable:!0}}checkPersonalityCondition(t,e){return e.personality!==t.value?{isAvailable:!1,reason:t.displayText||"\uC131\uACA9 \uC870\uAC74 \uBBF8\uCDA9\uC871"}:{isAvailable:!0}}checkTendencyCondition(t,e){return this.compareValues(e.tendency.value,t.operator,t.value)?{isAvailable:!0}:{isAvailable:!1,reason:`\uC131\uD5A5 \uC870\uAC74 \uBBF8\uCDA9\uC871 (\uD604\uC7AC: ${e.tendency.label})`}}checkRelationshipCondition(t,e){let n=e.relationships.get(t.param)||0;return this.compareValues(n,t.operator,t.value)?{isAvailable:!0}:{isAvailable:!1,reason:`\uAD00\uACC4\uB3C4 \uBD80\uC871 (${t.param}: ${n})`}}executeJudgment(t,e){let n=e.stats[t.stat],a=t.difficulty,s=n-a,m=n>=a,C=s>=20,P=s<=-20,x,w,g=!1;return C&&t.criticalSuccess?(x=t.criticalSuccess,w=`[\uB300\uC131\uACF5!] (${t.stat}: ${n} / \uD544\uC694: ${a})`,g=!0):m?(x=t.successSceneId,w=`[\uC131\uACF5!] (${t.stat}: ${n} / \uD544\uC694: ${a})`):P&&t.criticalFailure?(x=t.criticalFailure,w=`[\uB300\uC2E4\uD328!] (${t.stat}: ${n} / \uD544\uC694: ${a})`,g=!0):(x=t.failureSceneId,w=`[\uC2E4\uD328] (${t.stat}: ${n} / \uD544\uC694: ${a})`),{success:m,nextSceneId:x,resultText:w,isCritical:g}}applyConsequences(t,e){let n=[];for(let a of t){let s=this.applyConsequence(a,e);s&&n.push(s)}return n}applyConsequence(t,e){switch(t.type){case"stat_change":return this.applyStatChange(t,e);case"health_change":return this.applyHealthChange(t,e);case"injury_add":return this.applyInjuryAdd(t,e);case"injury_remove":return this.applyInjuryRemove(t,e);case"item_gain":return this.applyItemGain(t,e);case"item_lose":return this.applyItemLose(t,e);case"flag_set":return this.applyFlagSet(t,e);case"flag_remove":return this.applyFlagRemove(t,e);case"relationship_change":return this.applyRelationshipChange(t,e);case"tendency_change":return this.applyTendencyChange(t,e);case"skill_learn":return this.applySkillLearn(t,e);default:return""}}applyStatChange(t,e){let n=t.param,a=e.stats[n];return e.stats[n]+=t.value,`${n} ${a} \u2192 ${e.stats[n]}`}applyHealthChange(t,e){let n=e.health;return e.health=Math.max(0,Math.min(e.maxHealth,e.health+t.value)),`\uC0DD\uBA85\uB825 ${n} \u2192 ${e.health}`}applyInjuryAdd(t,e){return e.injuries.push(t.value),`\uBD80\uC0C1 \uD68D\uB4DD: ${t.value.description}`}applyInjuryRemove(t,e){let n=e.injuries.findIndex(a=>a.type===t.param);return n!==-1?`\uBD80\uC0C1 \uCE58\uB8CC: ${e.injuries.splice(n,1)[0].description}`:""}applyItemGain(t,e){return typeof t.value=="string"?`\uC544\uC774\uD15C \uD68D\uB4DD: ${t.value} (\uBBF8\uAD6C\uD604)`:(e.inventory.push(t.value),`\uC544\uC774\uD15C \uD68D\uB4DD: ${t.value.name}`)}applyItemLose(t,e){let n=e.inventory.findIndex(a=>a.id===t.param);return n!==-1?`\uC544\uC774\uD15C \uC0C1\uC2E4: ${e.inventory.splice(n,1)[0].name}`:""}applyFlagSet(t,e){return e.flags.add(t.param),t.description||`\uD50C\uB798\uADF8 \uC124\uC815: ${t.param}`}applyFlagRemove(t,e){return e.flags.delete(t.param),`\uD50C\uB798\uADF8 \uC81C\uAC70: ${t.param}`}applyRelationshipChange(t,e){let n=t.param,a=e.relationships.get(n)||0,s=a+t.value;e.relationships.set(n,s);let m=t.value>0?`+${t.value}`:`${t.value}`;return`${n} \uD638\uAC10\uB3C4 ${m} (${a} \u2192 ${s})`}applyTendencyChange(t,e){let n=e.tendency.value;return e.tendency.value=Math.max(-100,Math.min(100,e.tendency.value+t.value)),this.updateTendencyLabel(e.tendency),`\uC131\uD5A5 ${t.value>0?`+${t.value}`:`${t.value}`} (${e.tendency.label})`}applySkillLearn(t,e){return e.learnedSkills.includes(t.param)?"":(e.learnedSkills.push(t.param),`\uBB34\uACF5 \uC2B5\uB4DD: ${t.param}`)}updateTendencyLabel(t){t.value<=-60?(t.label="\uC815\uB3C4\uC758 \uD654\uC2E0",t.description="\uC815\uC758\uB85C\uC6C0\uC774 \uC628 \uBAB8\uC5D0\uC11C \uBFDC\uC5B4\uC838 \uB098\uC628\uB2E4."):t.value<=-20?(t.label="\uC815\uD30C",t.description="\uBC14\uB978 \uAE38\uC744 \uAC77\uACE0 \uC788\uB2E4."):t.value<20?(t.label="\uC911\uB9BD",t.description="\uC120\uACFC \uC545 \uC0AC\uC774\uB97C \uC624\uAC04\uB2E4."):t.value<60?(t.label="\uC0AC\uD30C",t.description="\uC5B4\uB450\uC6B4 \uAE38\uB85C \uC811\uC5B4\uB4E4\uACE0 \uC788\uB2E4."):(t.label="\uB9C8\uB3C4\uC758 \uD654\uC2E0",t.description="\uD611\uAE30\uAC00 \uC628 \uBAB8\uC744 \uAC10\uC2F8\uACE0 \uC788\uB2E4.")}compareValues(t,e,n){switch(e){case">":return t>n;case"<":return t<n;case">=":return t>=n;case"<=":return t<=n;case"==":return t===n;case"!=":return t!==n;default:return!1}}getCurrentScene(){return this.currentScene}getSceneDatabase(){return this.scenes}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Et=class r{templates=new Map;activeInstances=[];completedSituations=new Set;constructor(){this.initializeDefaultTemplates()}initializeDefaultTemplates(){let t={id:"LOVE_ENCOUNTER_BRIDGE",name:"\uC18C\uC6D4\uAD50 \uC704\uC758 \uB9CC\uB0A8",category:"romance",priority:5,canRepeat:!1,roles:[{roleId:"hero",roleName:"\uC8FC\uC778\uACF5"},{roleId:"love_interest",roleName:"\uC6B4\uBA85\uC758 \uC0C1\uB300",criteria:{npcTags:["potential_romance"],state:"idle"}}],prerequisites:[{type:"location",param:"soweol_bridge",description:"\uC18C\uC6D4\uAD50 \uB2E4\uB9AC\uC5D0 \uC704\uCE58"},{type:"time",param:"timeOfDay",operator:"==",value:"evening",description:"\uD574\uC9C8\uB158"},{type:"tendency",param:"tendency.value",operator:">",value:20,description:"\uC815\uD30C \uC131\uD5A5"}],stages:[{stageId:"stage_1_meeting",stageNumber:1,scene:{id:"bridge_encounter_s1",title:"\uC18C\uC6D4\uAD50\uC758 \uADF8\uB9BC\uC790",narrativeText:["\uC11D\uC591\uC774 \uAC15\uBB3C\uC744 \uBD89\uAC8C \uBB3C\uB4E4\uC774\uB294 \uC18C\uC6D4\uAD50.","\uB2E4\uB9AC \uB09C\uAC04\uC5D0 \uAE30\uB304 \uD55C \uC5EC\uC778\uC758 \uB4B7\uBAA8\uC2B5\uC774 \uB208\uC5D0 \uB4E4\uC5B4\uC628\uB2E4.","\uADF8\uB140\uB294 \uC2AC\uD508 \uB208\uC73C\uB85C \uAC15\uBB3C\uC744 \uBC14\uB77C\uBCF4\uACE0 \uC788\uB2E4."],choices:[{id:"choice_ask",text:"\uBB34\uC2A8 \uC77C\uC774\uB0D0\uACE0 \uBB3B\uB294\uB2E4.",nextSceneId:"bridge_encounter_s2_ask"},{id:"choice_handkerchief",text:"\uBC14\uB78C\uC5D0 \uB0A0\uB9AC\uB294 \uADF8\uB140\uC758 \uC190\uC218\uAC74\uC744 \uC7A1\uC544\uC900\uB2E4.",nextSceneId:"bridge_encounter_s2_kind",conditions:[{type:"personality",param:"personality",operator:"==",value:"calm",displayText:"[\uC131\uACA9: \uB0C9\uCCA0\uD568]"}],consequences:[{type:"relationship_change",param:"{love_interest}",value:10,description:"\uD638\uAC10\uB3C4 +10"}]},{id:"choice_pass",text:"\uADF8\uB0E5 \uC9C0\uB098\uAC04\uB2E4.",nextSceneId:"bridge_encounter_end",consequences:[{type:"flag_set",param:"missed_bridge_encounter",value:!0}]}]}},{stageId:"stage_2_interaction",stageNumber:2,scene:{id:"bridge_encounter_s2_kind",title:"\uC190\uC218\uAC74",narrativeText:["\uB2F9\uC2E0\uC740 \uBC14\uB78C\uC5D0 \uB0A0\uB9AC\uB294 \uD558\uC580 \uC190\uC218\uAC74\uC744 \uB09A\uC544\uCC44\uB4EF \uC7A1\uC558\uB2E4.","\uC5EC\uC778\uC774 \uB180\uB780 \uB208\uC73C\uB85C \uB2F9\uC2E0\uC744 \uB3CC\uC544\uBCF8\uB2E4.",'"...\uAC10\uC0AC\uD569\uB2C8\uB2E4." \uADF8\uB140\uC758 \uBEA8\uC774 \uC0B4\uC9DD \uBD89\uC5B4\uC9C4\uB2E4.'],choices:[{id:"choice_name",text:"\uC774\uB984\uC744 \uBB3B\uB294\uB2E4.",nextSceneId:"bridge_encounter_s3_name",consequences:[{type:"flag_set",param:"bridge_encounter_asked_name",value:!0}]},{id:"choice_leave",text:"\uBBF8\uC18C\uB9CC \uC9D3\uACE0 \uC790\uB9AC\uB97C \uB72C\uB2E4.",nextSceneId:"bridge_encounter_s3_mysterious",consequences:[{type:"relationship_change",param:"{love_interest}",value:5,description:"\uD638\uAC10\uB3C4 +5 (\uC2E0\uBE44\uB85C\uC6C0)"},{type:"flag_set",param:"bridge_encounter_mysterious",value:!0}]}]}}],outcomes:[{outcomeId:"outcome_romance_start",triggerCondition:"choice_name",consequences:[{type:"flag_set",param:"romance_{love_interest}_started",value:!0},{type:"relationship_change",param:"{love_interest}",value:15}],unlockedSituations:["LOVE_TEA_HOUSE","LOVE_RESCUE"],description:"\uC5F0\uC560 \uB8E8\uD2B8 \uC2DC\uC791"}]};this.registerTemplate(t);let e={id:"MARTIAL_OPPORTUNITY_CAVE",name:"\uBE44\uBC00 \uB3D9\uAD74\uC758 \uBB34\uACF5 \uBE44\uAE09",category:"opportunity",priority:7,canRepeat:!1,roles:[{roleId:"hero",roleName:"\uC8FC\uC778\uACF5"}],prerequisites:[{type:"location",param:"hidden_cave",description:"\uC228\uACA8\uC9C4 \uB3D9\uAD74 \uBC1C\uACAC"},{type:"stat",param:"insight",operator:">=",value:40,description:"\uD1B5\uCC30\uB825 40 \uC774\uC0C1"}],stages:[{stageId:"stage_1_discovery",stageNumber:1,scene:{id:"cave_discovery",title:"\uBE44\uBC00\uC758 \uB3D9\uAD74",narrativeText:["\uBCBC\uB791 \uB4A4\uC5D0 \uC228\uACA8\uC9C4 \uC881\uC740 \uD2C8\uC0C8\uB97C \uBC1C\uACAC\uD588\uB2E4.","\uC608\uB9AC\uD55C \uAD00\uCC30\uB825\uC774 \uC544\uB2C8\uC5C8\uB2E4\uBA74 \uD3C9\uC0DD \uC9C0\uB098\uCE60 \uBED4\uD588\uB2E4.","\uC548\uC73C\uB85C \uB4E4\uC5B4\uAC00\uC790 \uD76C\uBBF8\uD55C \uBE5B\uC774 \uBCF4\uC778\uB2E4."],choices:[{id:"choice_enter",text:"\uC870\uC2EC\uC2A4\uB7FD\uAC8C \uB4E4\uC5B4\uAC04\uB2E4.",nextSceneId:"cave_interior",judgment:{stat:"dexterity",difficulty:30,successSceneId:"cave_safe_entry",failureSceneId:"cave_trap_trigger"}},{id:"choice_leave",text:"\uC758\uC2EC\uC2A4\uB7FD\uB2E4. \uB098\uC911\uC5D0 \uB2E4\uC2DC \uC628\uB2E4.",nextSceneId:"cave_abandoned"}]}},{stageId:"stage_2_manual",stageNumber:2,scene:{id:"cave_safe_entry",title:"\uD574\uACE8\uACFC \uBE44\uAE09",narrativeText:["\uB3D9\uAD74 \uAE4A\uC219\uD55C \uACF3, \uC624\uB798\uB41C \uD574\uACE8 \uC606\uC5D0 \uBA3C\uC9C0 \uC313\uC778 \uCC45\uC774 \uB193\uC5EC\uC788\uB2E4.","\u300E\uCC9C\uC0B0\uC721\uC591\uC7A5\u300F\uC774\uB77C\uB294 \uAE00\uC790\uAC00 \uD76C\uBBF8\uD558\uAC8C \uBCF4\uC778\uB2E4.","\uC808\uD559\uAE09 \uBB34\uACF5\uC774\uB2E4!"],choices:[{id:"choice_learn",text:"\uBB34\uACF5\uC744 \uC775\uD78C\uB2E4. (2\uC2DC\uAC04 \uC18C\uC694)",nextSceneId:"cave_learn_success",consequences:[{type:"skill_learn",param:"tianshan_liuyang",value:!0,description:"\uCC9C\uC0B0\uC721\uC591\uC7A5 \uC2B5\uB4DD"},{type:"stat_change",param:"innerPower",value:10,description:"\uB0B4\uACF5 +10"}]},{id:"choice_take",text:"\uBE44\uAE09\uC744 \uAC00\uC838\uAC04\uB2E4. (\uB098\uC911\uC5D0 \uBC30\uC6B4\uB2E4)",nextSceneId:"cave_take_manual",consequences:[{type:"item_gain",param:"tianshan_manual",value:1}]}]}}],outcomes:[{outcomeId:"outcome_learned",triggerCondition:"choice_learn",consequences:[{type:"flag_set",param:"tianshan_master",value:!0}],description:"\uCC9C\uC0B0\uC721\uC591\uC7A5 \uB9C8\uC2A4\uD130"}]};this.registerTemplate(e)}registerTemplate(t){let e=t.id||t.templateId||`template_${Date.now()}`;this.templates.set(e,t)}checkTriggers(t,e,n,a){let s=[];for(let[m,C]of this.templates)this.completedSituations.has(m)&&!C.canRepeat||this.activeInstances.some(P=>P.templateId===m)||(!C.prerequisites||this.checkPrerequisites(C.prerequisites,t,e,n))&&this.canAssignParticipants(C,t,a)&&s.push(m);return s.sort((m,C)=>{let P=this.templates.get(m);return this.templates.get(C).priority-P.priority})}checkPrerequisites(t,e,n,a){for(let s of t)if(!this.evaluatePrerequisite(s,e,n,a))return!1;return!0}evaluatePrerequisite(t,e,n,a){switch(t.type){case"location":return n===t.param;case"time":return t.param==="timeOfDay"?a===t.value:!1;case"stat":let s=e.stats[t.param];return this.compareValues(s,t.operator,t.value);case"tendency":return t.param==="tendency.value"?this.compareValues(e.tendency.value,t.operator,t.value):!1;case"item":return e.inventory.some(m=>m.id===t.param);case"flag":return e.flags.has(t.param);case"npc":return!0;default:return!1}}canAssignParticipants(t,e,n){if(!t.roles)return!0;for(let a of t.roles){if(a.roleId==="hero")continue;if(!this.findSuitableNPC(a,n,e))return!1}return!0}findSuitableNPC(t,e,n){if(!t.criteria)return e[0]||null;for(let a of e)if(!(t.criteria.npcTags&&!t.criteria.npcTags.every(m=>a.tags.includes(m)))&&!(t.criteria.state&&a.state!==t.criteria.state)&&!(t.criteria.relationship!==void 0&&(n.relationships.get(a.id)||a.initialRelationship)<t.criteria.relationship))return a;return null}startSituation(t,e,n){let a=this.templates.get(t);if(!a)return null;let s=new Map;if(a.roles)for(let C of a.roles)if(C.roleId==="hero")s.set("hero","player");else{let P=this.findSuitableNPC(C,n,e);P&&s.set(C.roleId,P.id)}let m={templateId:t,instanceId:`${t}_${Date.now()}`,participants:s,currentStage:1,isActive:!0,startedAt:new Date,choiceHistory:[]};return this.activeInstances.push(m),m}completeSituation(t){let e=this.activeInstances.findIndex(n=>n.instanceId===t);if(e!==-1){let n=this.activeInstances[e];this.completedSituations.add(n.templateId),this.activeInstances.splice(e,1)}}compareValues(t,e,n){switch(e){case">":return t>n;case"<":return t<n;case">=":return t>=n;case"<=":return t<=n;case"==":return t===n;case"!=":return t!==n;default:return!1}}getActiveInstances(){return this.activeInstances}getTemplate(t){return this.templates.get(t)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};var Oe=class{static convertPlayerToBattle(t,e){let n={attack:0,defense:0,hp:0,mp:0,critChance:0,evasion:0};return e&&(n=e.calculateEquipmentBonusWuxia(t)),{id:"player",name:t.name,type:"player",maxHp:t.maxHealth+n.hp,currentHp:t.health,maxMp:t.stats.innerPower*10+n.mp,currentMp:t.stats.innerPower*10+n.mp,attack:this.calculateAttack(t)+n.attack,defense:this.calculateDefense(t)+n.defense,agility:t.stats.dexterity,skills:this.convertSkills(t),items:this.convertItems(t)}}static convertNPCToBattle(t){return{id:t.id,name:t.name,type:"enemy",maxHp:200,currentHp:200,maxMp:100,currentMp:100,attack:30,defense:20,agility:17,skills:this.generateNPCSkills(t),items:[]}}static calculateAttack(t){return Math.floor(t.stats.strength*.6+t.stats.innerPower*.4)}static calculateDefense(t){return Math.floor(t.stats.strength*.4+t.stats.innerPower*.3+t.stats.dexterity*.3)}static convertSkills(t){let e=[];return t.sect==="huashan"&&(e.push({id:"huashan_basic_thrust",name:"\uD654\uC0B0\uAC80\uBC95: \uAE30\uBCF8\uC790\uC138",description:"\uD654\uC0B0\uD30C\uC758 \uAE30\uBCF8 \uCC0C\uB974\uAE30 \uAC80\uBC95",mpCost:10,damage:25,type:"attack"}),e.push({id:"huashan_triple_strike",name:"\uD654\uC0B0\uAC80\uBC95: \uC0BC\uC5F0\uACA9",description:"\uC138 \uBC88 \uC5F0\uC18D \uBCA0\uAE30",mpCost:20,damage:40,type:"attack"})),e.push({id:"qi_meditation",name:"\uB0B4\uACF5 \uC6B4\uC6A9",description:"\uB0B4\uACF5\uC744 \uC6B4\uC6A9\uD558\uC5EC \uCCB4\uB825\uC744 \uD68C\uBCF5",mpCost:15,damage:0,type:"heal"}),e.push({id:"defensive_stance",name:"\uBC29\uC5B4 \uC790\uC138",description:"\uB2E4\uC74C \uACF5\uACA9\uC758 \uD53C\uD574\uB97C \uAC10\uC18C",mpCost:5,damage:0,type:"defense"}),e}static convertItems(t){let e=[];for(let n of t.inventory)n.type==="consumable"&&e.push({id:n.id,name:n.name,description:n.description||"",type:"consumable",effect:50});return e}static generateNPCSkills(t){let e=[];return e.push({id:"basic_attack",name:"\uC77C\uBC18 \uACF5\uACA9",description:"\uAE30\uBCF8 \uACF5\uACA9",mpCost:0,damage:15,type:"attack"}),t.tags?.includes("boss")&&e.push({id:"special_attack",name:"\uD544\uC0B4\uAE30",description:`${t.name}\uC758 \uAC15\uB825\uD55C \uC77C\uACA9`,mpCost:30,damage:50,type:"attack"}),e}static applyBattleResult(t,e,n){t.health=Math.max(0,e.currentHp),n&&(t.stats.strength+=1,t.stats.innerPower+=1),!n&&t.health<=0&&t.injuries.push({type:"internal_injury",severity:5,duration:3,description:"\uC804\uD22C \uC911 \uC785\uC740 \uB0B4\uC0C1",penalties:{stats:{strength:-5,innerPower:-3}}})}};var Kt=[{id:"scene_start",title:"\uD63C\uD0C1\uD55C \uAC15\uD638",type:"narrative",autoProgress:!0,autoDelay:3e3,narrativeText:["\uD654\uC0B0\uD30C\uC758 \uB9C9\uB0B4 \uC81C\uC790\uC778 \uB2F9\uC2E0\uC740 \uC2EC\uAC01\uD55C \uC18C\uC2DD\uC744 \uB4E4\uC5C8\uB2E4.","\uAC00\uC7A5 \uC544\uB07C\uB358 \uC0AC\uD615 `\uCCAD\uC6B4`\uC774 \uD751\uD48D\uCC44\uB85C \uB5A0\uB09C \uB4A4 \uC18C\uC2DD\uC774 \uB04A\uACBC\uB2E4\uB294 \uAC83\uC774\uB2E4.","","\uC7A5\uBB38\uC778\uAED8\uC11C\uB294 \uB2F9\uC2E0\uC744 \uBD80\uB974\uC168\uB2E4.",'"\uB124\uAC00 \uAC00\uAC70\uB77C. \uC0AC\uD615\uC744 \uCC3E\uC544\uC624\uB108\uB77C. \uADF8\uB7EC\uB098... \uBB34\uB9AC\uD558\uC9C0\uB294 \uB9D0\uAC70\uB77C."'],choices:[{id:"choice_continue_journey",text:"\uB099\uC591\uC73C\uB85C \uCD9C\uBC1C\uD55C\uB2E4.",nextSceneId:"scene_road_to_luoyang"}],tags:["chapter_1","main_quest","intro"],location:"huashan_sect",timeOfDay:"morning"},{id:"scene_road_to_luoyang",title:"\uB099\uC591\uC73C\uB85C \uAC00\uB294 \uAE38",type:"decision",narrativeText:["\uB099\uC591\uC73C\uB85C \uAC00\uB294 \uAE38\uBAA9, \uB2F9\uC2E0\uC740 \uD55C \uC8FC\uB9C9 \uC55E\uC5D0 \uBA48\uCDB0 \uC130\uB2E4.","\uC774\uACF3\uC5D0\uC11C \uC815\uBCF4\uB97C \uC5BB\uC744 \uC218\uB3C4 \uC788\uACE0, \uC11C\uB458\uB7EC \uD751\uD48D\uCC44\uB85C \uD5A5\uD560 \uC218\uB3C4 \uC788\uB2E4."],choices:[{id:"choice_enter_inn",text:"\uC8FC\uB9C9\uC5D0 \uB4E4\uC5B4\uAC00 \uC815\uBCF4\uB97C \uC5BB\uB294\uB2E4.",importance:"major",nextSceneId:"scene_inn_inside"},{id:"choice_continue",text:"\uC11C\uB450\uB978\uB2E4. \uACE7\uC7A5 \uD751\uD48D\uCC44\uB85C \uD5A5\uD55C\uB2E4.",importance:"major",nextSceneId:"scene_forest_path",conditions:[{type:"stat",param:"dexterity",operator:">=",value:15,displayText:"[\uBBFC\uCCA9 15 \uC774\uC0C1]"}]},{id:"choice_meditate",text:"\uADFC\uCC98 \uBC14\uC704\uC5D0 \uC549\uC544 \uB0B4\uACF5\uC744 \uC6B4\uC6A9\uD55C\uB2E4.",importance:"minor",nextSceneId:"scene_meditation",consequences:[{type:"stat_change",param:"innerPower",value:2,description:"\uB0B4\uACF5 +2"}]}],tags:["chapter_1","main_quest"],location:"road_to_luoyang",timeOfDay:"afternoon"},{id:"scene_inn_inside",title:"\uC740\uC740\uD55C \uC220 \uB0C4\uC0C8",narrativeText:["\uC8FC\uB9C9 \uC548\uC740 \uC2DC\uB04C\uBC85\uC801\uD558\uB2E4.","\uD55C\uCABD \uAD6C\uC11D\uC5D0\uC11C \uC218\uC0C1\uD55C \uC0AC\uB0B4\uB4E4\uC774 \uC6C5\uC131\uAC70\uB9AC\uACE0 \uC788\uB2E4.",'\uC8FC\uBAA8\uAC00 \uB2E4\uAC00\uC640 \uBB3B\uB294\uB2E4. "\uBB34\uC5C7\uC744 \uB4DC\uC2DC\uACA0\uC2B5\uB2C8\uAE4C, \uC18C\uD611?"'],choices:[{id:"choice_order_wine",text:"\uC220 \uD55C \uC794\uC744 \uC2DC\uD0A8\uB2E4. (\uAE08\uD654 5)",nextSceneId:"scene_inn_wine",consequences:[{type:"stat_change",param:"gold",value:-5,description:"\uAE08\uD654 -5"}]},{id:"choice_ask_info",text:"[\uD1B5\uCC30 20 \uC774\uC0C1] \uC8FC\uBAA8\uC5D0\uAC8C \uD751\uD48D\uCC44\uC5D0 \uB300\uD574 \uC740\uBC00\uD788 \uBB3C\uC5B4\uBCF8\uB2E4.",nextSceneId:"scene_inn_information",conditions:[{type:"stat",param:"insight",operator:">=",value:20,displayText:"[\uD1B5\uCC30 20 \uC774\uC0C1]"}]},{id:"choice_approach_thugs",text:"\uC218\uC0C1\uD55C \uC0AC\uB0B4\uB4E4\uC5D0\uAC8C \uB2E4\uAC00\uAC04\uB2E4.",nextSceneId:"scene_inn_confrontation",judgment:{stat:"insight",difficulty:25,successSceneId:"scene_inn_info_success",failureSceneId:"scene_inn_fight"}}],location:"inn",timeOfDay:"afternoon"},{id:"scene_inn_wine",title:"\uD0C1\uC8FC \uD55C \uC794",narrativeText:["\uC8FC\uBAA8\uAC00 \uD0C1\uC8FC\uB97C \uB530\uB77C\uC900\uB2E4.","\uC794\uC744 \uAE30\uC6B8\uC774\uBA70 \uC8FC\uBCC0\uC744 \uC0B4\uD540\uB2E4.","\uD55C\uCABD\uC5D0\uC11C \uB4E4\uB824\uC624\uB294 \uB300\uD654\uAC00 \uADD3\uAC00\uB97C \uC2A4\uCE5C\uB2E4.","",'"...\uD751\uD48D\uCC44 \uB188\uB4E4\uC774 \uC694\uC998 \uC218\uC0C1\uD558\uB2E4\uB354\uAD70..."','"\uC27F! \uBAA9\uC228\uC774 \uC544\uAE5D\uC9C0 \uC54A\uB098!"'],choices:[{id:"choice_listen_more",text:"[\uD1B5\uCC30 25 \uC774\uC0C1] \uB300\uD654\uC5D0 \uC9D1\uC911\uD55C\uB2E4.",nextSceneId:"scene_overhear_info",conditions:[{type:"stat",param:"insight",operator:">=",value:25,displayText:"[\uD1B5\uCC30 25 \uC774\uC0C1]"}]},{id:"choice_leave_inn",text:"\uC220\uAC12\uC744 \uCE58\uB974\uACE0 \uC8FC\uB9C9\uC744 \uB098\uC120\uB2E4.",nextSceneId:"scene_forest_path"}],location:"inn",timeOfDay:"afternoon"},{id:"scene_inn_information",title:"\uC8FC\uBAA8\uC758 \uC815\uBCF4",type:"narrative",autoProgress:!0,autoDelay:4e3,narrativeText:["\uB2F9\uC2E0\uC740 \uC740\uC790 \uBA87 \uB0E5\uC744 \uC2AC\uCA4D \uC8FC\uBAA8\uC758 \uC190\uC5D0 \uC950\uC5EC\uC900\uB2E4.","\uC8FC\uBAA8\uAC00 \uB208\uCE58\uB97C \uC0B4\uD53C\uB354\uB2C8 \uB0AE\uC740 \uBAA9\uC18C\uB9AC\uB85C \uB9D0\uD55C\uB2E4.","",'"\uD751\uD48D\uCC44\uB77C... \uC704\uD5D8\uD55C \uACF3\uC774\uC624. \uCD5C\uADFC \uB4E4\uC5B4 \uB354\uC6B1 \uD749\uC545\uD574\uC84C\uB2E4\uACE0 \uD558\uB354\uAD70\uC694."','"\uD654\uC0B0\uD30C \uC81C\uC790\uB77C\uB294 \uBD84\uC774 \uC77C\uC8FC\uC77C \uC804\uCBE4 \uC774 \uAE38\uC744 \uC9C0\uB098\uAC14\uC18C."','"\uD478\uB978 \uB3C4\uBCF5\uC744 \uC785\uC740... \uB208\uBE5B\uC774 \uAC15\uC778\uD55C \uCCAD\uB144\uC774\uC5C8\uC9C0\uC694."',"","\uCCAD\uC6B4 \uC0AC\uD615\uC774 \uBD84\uBA85\uD558\uB2E4!","",'"\uC0B0\uC801\uB4E4\uC774 \uBC24\uC5D0 \uD65C\uB3D9\uD55C\uB2E4\uACE0 \uD558\uB2C8, \uC870\uC2EC\uD558\uC2DC\uC624."'],choices:[{id:"choice_thank_and_leave",text:"\uAC10\uC0AC\uB97C \uD45C\uD558\uACE0 \uC8FC\uB9C9\uC744 \uB098\uC120\uB2E4.",nextSceneId:"scene_forest_path",consequences:[{type:"flag_set",param:"got_inn_information",value:!0,description:"\uC8FC\uBAA8\uB85C\uBD80\uD130 \uC815\uBCF4 \uD68D\uB4DD"}]}],location:"inn",timeOfDay:"afternoon"},{id:"scene_overhear_info",title:"\uC5FF\uB4E4\uC740 \uB300\uD654",narrativeText:["\uADC0\uB97C \uAE30\uC6B8\uC774\uC790 \uB300\uD654\uAC00 \uB354 \uC120\uBA85\uD558\uAC8C \uB4E4\uB9B0\uB2E4.","",'"\uD751\uD48D\uCC44 \uB188\uB4E4\uC774 \uCD5C\uADFC \uD654\uC0B0\uD30C \uC81C\uC790\uB97C \uC7A1\uC558\uB2E4\uB358\uB370..."','"\uC27F! \uADF8\uB7F0 \uB9D0 \uD568\uBD80\uB85C \uD558\uB294 \uAC70 \uC544\uB0D0! \uB4E4\uD0A4\uBA74 \uBAA9\uC774 \uB2EC\uC544\uB09C\uB2E4\uACE0!"',"","\uC2EC\uC7A5\uC774 \uCFF5\uCF85\uAC70\uB9B0\uB2E4. \uC0AC\uD615\uC774 \uC704\uD5D8\uC5D0 \uCC98\uD55C \uAC83\uC778\uAC00!","",'"\uC800\uB141\uC774 \uB418\uBA74 \uC0B0\uC801\uB4E4\uC774 \uC21C\uCC30\uC744 \uB3C8\uB2E4\uB354\uAD70. \uC870\uC2EC\uD574\uC57C \uD574."'],choices:[{id:"choice_rush_to_stronghold",text:"\uB2F9\uC7A5 \uD751\uD48D\uCC44\uB85C \uD5A5\uD55C\uB2E4!",nextSceneId:"scene_forest_path_urgent",consequences:[{type:"flag_set",param:"knows_seongun_captured",value:!0},{type:"tendency_change",param:"tendency",value:-5,description:"\uC815\uC758\uB85C\uC6B4 \uC120\uD0DD (\uC131\uD5A5 -5)"}]},{id:"choice_plan_carefully",text:"\uC2E0\uC911\uD558\uAC8C \uACC4\uD68D\uC744 \uC138\uC6B4\uB2E4.",nextSceneId:"scene_planning",consequences:[{type:"flag_set",param:"knows_seongun_captured",value:!0}]}],location:"inn",timeOfDay:"afternoon"},{id:"scene_forest_path",title:"\uC5B4\uB450\uC6B4 \uC232",type:"narrative",autoProgress:!0,autoDelay:3e3,narrativeText:["\uC8FC\uB9C9\uC744 \uB098\uC11C\uC790 \uC6B8\uCC3D\uD55C \uC232\uC774 \uD3BC\uCCD0\uC9C4\uB2E4.","\uD751\uD48D\uCC44\uB85C \uAC00\uB294 \uAE38\uC740 \uD5D8\uD558\uACE0 \uC5B4\uB461\uB2E4.","","\uC7A0\uC2DC \uAC77\uC790, \uAC08\uB9BC\uAE38\uC774 \uB098\uD0C0\uB09C\uB2E4."],choices:[{id:"choice_continue_forest",text:"\uACC4\uC18D \uC804\uC9C4\uD55C\uB2E4.",nextSceneId:"scene_forest_fork"}],location:"dark_forest",timeOfDay:"evening"},{id:"scene_forest_fork",title:"\uAC08\uB9BC\uAE38",type:"decision",narrativeText:["\uC67C\uCABD\uC740 \uD5D8\uD55C \uC0B0\uAE38, \uC624\uB978\uCABD\uC740 \uD3C9\uD0C4\uD55C \uAE38\uC774\uB2E4.","\uC5B4\uB290 \uAE38\uB85C \uAC08 \uAC83\uC778\uAC00?"],choices:[{id:"choice_mountain_path",text:"[\uBBFC\uCCA9 30 \uC774\uC0C1] \uD5D8\uD55C \uC0B0\uAE38\uB85C \uAC04\uB2E4. (\uC9C0\uB984\uAE38)",importance:"major",nextSceneId:"scene_mountain_path",judgment:{stat:"dexterity",difficulty:30,successSceneId:"scene_mountain_success",failureSceneId:"scene_mountain_fall"}},{id:"choice_flat_road",text:"\uD3C9\uD0C4\uD55C \uAE38\uB85C \uAC04\uB2E4.",nextSceneId:"scene_flat_road"},{id:"choice_scout",text:"[\uD1B5\uCC30 28 \uC774\uC0C1] \uC8FC\uBCC0\uC744 \uC0B4\uD540\uB2E4.",nextSceneId:"scene_hidden_path",conditions:[{type:"stat",param:"insight",operator:">=",value:28,displayText:"[\uD1B5\uCC30 28 \uC774\uC0C1]"}]}],location:"dark_forest",timeOfDay:"evening"},{id:"scene_mountain_success",title:"\uB0A0\uB835\uD55C \uACBD\uACF5",type:"narrative",autoProgress:!0,autoDelay:3500,narrativeText:["[\uD310\uC815 \uC131\uACF5!]","","\uB2F9\uC2E0\uC740 \uAC00\uBCBC\uC6B4 \uACBD\uACF5\uC73C\uB85C \uD5D8\uD55C \uBC14\uC704\uB4E4\uC744 \uB6F0\uC5B4\uB118\uB294\uB2E4.","\uC228\uACB0\uC744 \uC870\uC808\uD558\uBA70 \uC704\uD5D8\uD55C \uC808\uBCBD\uC744 \uC9C0\uB098\uCE5C\uB2E4.","","\uC21C\uC2DD\uAC04\uC5D0 \uD3C9\uC9C0\uB85C \uB0B4\uB824\uC120\uB2E4.","\uBE60\uB978 \uAE38\uC744 \uD0DD\uD55C \uB355\uC5D0 \uC2DC\uAC04\uC744 \uC544\uAF08\uB2E4!","","\uC800 \uBA40\uB9AC \uD751\uD48D\uCC44\uC758 \uB9DD\uB8E8\uAC00 \uBCF4\uC778\uB2E4."],choices:[{id:"choice_approach_stronghold",text:"\uD751\uD48D\uCC44\uC5D0 \uC811\uADFC\uD55C\uB2E4.",nextSceneId:"scene_stronghold_approach"}],location:"mountain_path",timeOfDay:"evening"},{id:"scene_mountain_fall",title:"\uC2E4\uC871",type:"narrative",autoProgress:!0,autoDelay:3500,narrativeText:["[\uD310\uC815 \uC2E4\uD328!]","","\uBC1C\uC774 \uBBF8\uB044\uB7EC\uC9C4\uB2E4!",'"\uD06D!"',"","\uB2F9\uC2E0\uC740 \uAC00\uD30C\uB978 \uACBD\uC0AC\uBA74\uC744 \uAD74\uB7EC\uB5A8\uC5B4\uC9C4\uB2E4.","\uB098\uBB34\uBFCC\uB9AC\uB97C \uBD99\uC7A1\uC544 \uAC04\uC2E0\uD788 \uBA48\uCD98\uB2E4.","","\uC628\uBAB8\uC774 \uC464\uC2E0\uB2E4. \uD314\uC5D0 \uCC30\uACFC\uC0C1\uC744 \uC785\uC5C8\uB2E4.","","[\uC0DD\uBA85\uB825 -15]","[\uBD80\uC0C1: \uACBD\uBBF8\uD55C \uD0C0\uBC15\uC0C1 \uD68D\uB4DD]"],choices:[{id:"choice_continue_injured",text:"\uC774\uB97C \uC545\uBB3C\uACE0 \uC77C\uC5B4\uC120\uB2E4.",nextSceneId:"scene_flat_road",consequences:[{type:"health_change",param:"health",value:-15,description:"\uC0DD\uBA85\uB825 -15"},{type:"injury_add",param:"injury",value:{type:"minor_wound",severity:3,duration:20,description:"\uACBD\uBBF8\uD55C \uD0C0\uBC15\uC0C1",penalties:{stats:{dexterity:-2}}},description:"\uD0C0\uBC15\uC0C1\uC73C\uB85C \uBBFC\uCCA9 -2"}]}],location:"mountain_path",timeOfDay:"evening"},{id:"scene_flat_road",title:"\uAE34 \uC6B0\uD68C\uB85C",narrativeText:["\uD3C9\uD0C4\uD55C \uAE38\uC744 \uB530\uB77C \uD55C\uCC38\uC744 \uAC77\uB294\uB2E4.","\uC548\uC804\uD558\uC9C0\uB9CC \uC2DC\uAC04\uC774 \uB9CE\uC774 \uAC78\uB9B0\uB2E4.","","\uD574\uAC00 \uC9C0\uACE0 \uC5B4\uB460\uC774 \uAE54\uB9B0\uB2E4.","\uC800 \uBA40\uB9AC\uC11C \uD683\uBD88 \uBE5B\uC774 \uBCF4\uC778\uB2E4.","","\uD751\uD48D\uCC44\uAC00 \uAC00\uAE4C\uC6CC\uC84C\uB2E4."],choices:[{id:"choice_approach_night",text:"\uBC24\uC5D0 \uC811\uADFC\uD55C\uB2E4.",nextSceneId:"scene_stronghold_night"},{id:"choice_rest",text:"\uBA3C\uC800 \uC26C\uC5C8\uB2E4\uAC00 \uAC04\uB2E4.",nextSceneId:"scene_camp_rest",consequences:[{type:"health_change",param:"health",value:10,description:"\uC0DD\uBA85\uB825 +10 \uD68C\uBCF5"}]}],location:"flat_road",timeOfDay:"night"},{id:"scene_hidden_path",title:"\uC228\uACA8\uC9C4 \uC9C0\uB984\uAE38",narrativeText:["[\uD1B5\uCC30\uB825 \uBC1C\uD718!]","","\uC8FC\uBCC0\uC744 \uC8FC\uC758\uAE4A\uAC8C \uC0B4\uD53C\uC790, \uC228\uACA8\uC9C4 \uC624\uC194\uAE38\uC774 \uB208\uC5D0 \uB4E4\uC5B4\uC628\uB2E4.","\uD480\uC232\uC5D0 \uAC00\uB824\uC9C4 \uC881\uC740 \uAE38\uC774\uB2E4.","","\uC774 \uAE38\uC740... \uC0B0\uC801\uB4E4\uC774 \uC0AC\uC6A9\uD558\uB294 \uBE44\uBC00 \uD1B5\uB85C\uC778 \uAC83 \uAC19\uB2E4!","\uBC1C\uC790\uAD6D\uC774 \uC5EC\uB7FF \uBCF4\uC778\uB2E4.","","\uC774 \uAE38\uC744 \uB530\uB77C\uAC00\uBA74 \uD751\uD48D\uCC44 \uB4A4\uD3B8\uC73C\uB85C \uC811\uADFC\uD560 \uC218 \uC788\uC744 \uAC83\uC774\uB2E4."],choices:[{id:"choice_use_secret_path",text:"\uBE44\uBC00 \uD1B5\uB85C\uB97C \uC774\uC6A9\uD55C\uB2E4.",nextSceneId:"scene_secret_entrance",consequences:[{type:"flag_set",param:"found_secret_path",value:!0}]},{id:"choice_ignore",text:"\uC758\uC2EC\uC2A4\uB7FD\uB2E4. \uC815\uBA74\uC73C\uB85C \uAC04\uB2E4.",nextSceneId:"scene_stronghold_approach"}],location:"dark_forest",timeOfDay:"evening"},{id:"scene_stronghold_approach",title:"\uD751\uD48D\uCC44 \uC785\uAD6C",narrativeText:["\uD5D8\uC900\uD55C \uC0B0\uAE38 \uB05D\uC5D0 \uD751\uD48D\uCC44\uAC00 \uBAA8\uC2B5\uC744 \uB4DC\uB7EC\uB0B8\uB2E4.","\uAC70\uB300\uD55C \uBAA9\uCC45\uC774 \uB458\uB7EC\uC2F8\uACE0 \uC788\uACE0, \uC785\uAD6C\uC5D0\uB294 \uBB34\uC7A5\uD55C \uC0B0\uC801\uB4E4\uC774 \uBCF4\uC778\uB2E4.","","\uD55C \uC0B0\uC801\uC774 \uB2F9\uC2E0\uC744 \uBC1C\uACAC\uD558\uACE0 \uC678\uCE5C\uB2E4.",'"\uB204\uAD6C\uB0D0! \uC123\uBD88\uB9AC \uB2E4\uAC00\uC624\uC9C0 \uB9C8\uB77C!"',"","\uAC80\uC5D0 \uC190\uC744 \uC5B9\uC740 \uCC44 \uACBD\uACC4\uD558\uACE0 \uC788\uB2E4."],choices:[{id:"choice_announce_huashan",text:'[\uD654\uC0B0\uD30C \uC81C\uC790] "\uD654\uC0B0\uD30C \uC81C\uC790\uB2E4. \uC0AC\uD615\uC744 \uCC3E\uC73C\uB7EC \uC654\uB2E4."',nextSceneId:"scene_negotiate_huashan",conditions:[{type:"sect",param:"sect",operator:"==",value:"huashan",displayText:"[\uD654\uC0B0\uD30C \uC81C\uC790\uB9CC]"}]},{id:"choice_bribe",text:"[\uAE08\uD654 50 \uC774\uC0C1] \uC740\uC790\uB97C \uAC74\uB128\uB2E4.",nextSceneId:"scene_bribe_guards",conditions:[{type:"stat",param:"gold",operator:">=",value:50,displayText:"[\uAE08\uD654 50 \uC774\uC0C1]"}]},{id:"choice_fight_guards",text:"\u2694\uFE0F \uC815\uBA74 \uB3CC\uD30C! \uAC80\uC744 \uBF51\uB294\uB2E4!",nextSceneId:"scene_battle_guards",consequences:[{type:"tendency_change",param:"tendency",value:5,description:"\uD3ED\uB825\uC801 \uC120\uD0DD (\uC131\uD5A5 +5)"},{type:"battle_start",param:"battle",value:{enemies:["bandit_guard_1","bandit_guard_2"],onVictory:"scene_guards_defeated",onDefeat:"scene_captured"},description:"\uC0B0\uC801 \uACBD\uBE44\uBCD1\uB4E4\uACFC \uC804\uD22C \uC2DC\uC791"}]},{id:"choice_sneak",text:"[\uBBFC\uCCA9 35 \uC774\uC0C1] \uACBD\uACF5\uC73C\uB85C \uB2F4\uC744 \uB118\uB294\uB2E4.",judgment:{stat:"dexterity",difficulty:35,successSceneId:"scene_sneak_success",failureSceneId:"scene_sneak_caught",criticalSuccess:"scene_sneak_critical"}}],location:"stronghold_entrance",timeOfDay:"evening"},{id:"scene_chapter1_end",title:"\uCC55\uD130 1 \uC644\uB8CC",narrativeText:["\u2501".repeat(50),"","\u3010 \uCC55\uD130 1: \uC0AC\uB77C\uC9C4 \uC0AC\uD615 - \uC644\uB8CC \u3011","","\uB2F9\uC2E0\uC740 \uD751\uD48D\uCC44\uC5D0 \uC7A0\uC785\uD558\uB294 \uB370 \uC131\uACF5\uD588\uB2E4.","\uC774\uC81C \uCCAD\uC6B4 \uC0AC\uD615\uC744 \uCC3E\uC544\uC57C \uD55C\uB2E4.","","\uD558\uC9C0\uB9CC \uCC44\uB0B4\uB294 \uC704\uD5D8\uC73C\uB85C \uAC00\uB4DD\uD558\uB2E4...","","\u2501".repeat(50),"","[ \uCC55\uD130 2\uC5D0\uC11C \uACC4\uC18D ]"],choices:[{id:"choice_continue_ch2",text:"\uACC4\uC18D\uD558\uAE30 (\uBBF8\uAD6C\uD604)",nextSceneId:"scene_start"}],location:"stronghold_inside",timeOfDay:"night"},{id:"scene_guards_defeated",title:"\uD608\uB85C \uAC1C\uCC99",narrativeText:["\u2694\uFE0F [\uC804\uD22C \uC2B9\uB9AC!]","","\uB450 \uBA85\uC758 \uC0B0\uC801\uC774 \uC2E0\uC74C\uD558\uBA70 \uC4F0\uB7EC\uC9C4\uB2E4.",'"\uD06C\uC73D... \uC774\uB7F0 \uC2E4\uB825\uC774..."',"","\uB2F9\uC2E0\uC740 \uAC80\uC744 \uAC70\uB450\uACE0 \uBAA9\uCC45 \uC548\uC73C\uB85C \uAC78\uC5B4 \uB4E4\uC5B4\uAC04\uB2E4.","\uBA40\uB9AC\uC11C \uACE0\uD568\uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4. \uB354 \uB9CE\uC740 \uC0B0\uC801\uB4E4\uC774 \uB2EC\uB824\uC624\uACE0 \uC788\uB2E4!","","\uC11C\uB458\uB7EC \uC6C0\uC9C1\uC5EC\uC57C \uD55C\uB2E4."],choices:[{id:"choice_search_prison",text:"\uAC10\uC625\uC774 \uC788\uC744 \uBC95\uD55C \uACF3\uC73C\uB85C \uB2EC\uB824\uAC04\uB2E4.",nextSceneId:"scene_rescue_seongun"},{id:"choice_hide",text:"\uC77C\uB2E8 \uC228\uC5B4\uC11C \uC0C1\uD669\uC744 \uC0B4\uD540\uB2E4.",nextSceneId:"scene_hide_observe"}],location:"stronghold_entrance",timeOfDay:"evening"},{id:"scene_captured",title:"\uD328\uBC30...",type:"narrative",autoProgress:!0,autoDelay:3e3,narrativeText:["\u{1F480} [\uC804\uD22C \uD328\uBC30...]","","\uAC80\uC774 \uC190\uC5D0\uC11C \uBBF8\uB044\uB7EC\uC9C4\uB2E4.","\uC628\uBAB8\uC774 \uCC9C\uADFC\uB9CC\uADFC\uC774\uB2E4. \uB354 \uC774\uC0C1 \uC2F8\uC6B8 \uD798\uC774 \uC5C6\uB2E4.","","\uC758\uC2DD\uC774 \uD750\uB824\uC9C4\uB2E4...","","\u{1F3E5} \uB204\uAD70\uAC00\uAC00 \uB2F9\uC2E0\uC744 \uBC1C\uACAC\uD558\uC5EC \uB099\uC591 \uC758\uC6D0\uC73C\uB85C \uAE34\uAE09 \uC774\uC1A1\uD55C\uB2E4..."],choices:[{id:"choice_auto_hospital",text:"(\uC790\uB3D9 \uC9C4\uD589)",nextSceneId:"scene_hospital"}],location:"stronghold_entrance",timeOfDay:"evening",tags:["defeat","hospital_redirect"]},{id:"scene_hospital",title:"\uB099\uC591 \uC758\uC6D0 (\u6D1B\u967D\u91AB\u9662)",type:"decision",narrativeText:["\u{1F48A} [\uB099\uC591 \uC758\uC6D0]","","\uC815\uC2E0\uC744 \uCC28\uB9AC\uB2C8 \uB099\uC591\uC758 \uD55C \uC758\uC6D0\uC5D0 \uB204\uC6CC\uC788\uB2E4.","\uBC31\uBC1C\uC758 \uC758\uC6D0\uC774 \uB2F9\uC2E0\uC744 \uB0B4\uB824\uB2E4\uBCF8\uB2E4.","",'"\uAE68\uC5B4\uB098\uC168\uAD70\uC694. \uC911\uC0C1\uC744 \uC785\uACE0 \uC4F0\uB7EC\uC838 \uACC4\uC168\uC2B5\uB2C8\uB2E4."','"\uB2E4\uD589\uD788 \uC0DD\uBA85\uC5D0\uB294 \uC9C0\uC7A5\uC774 \uC5C6\uC73C\uB098, \uC644\uC804\uD55C \uD68C\uBCF5\uC744 \uC704\uD574\uC120 \uCE58\uB8CC\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4."',"","\uD604\uC7AC \uC0C1\uD0DC\uB97C \uD655\uC778\uD55C\uB2E4..."],choices:[{id:"choice_basic_treatment",text:"\uAE30\uBCF8 \uCE58\uB8CC\uB97C \uBC1B\uB294\uB2E4 (\uAE08\uD654 20, HP 50 \uD68C\uBCF5)",nextSceneId:"scene_hospital_treated",importance:"major",conditions:[{type:"stat",param:"gold",operator:">=",value:20,displayText:"[\uAE08\uD654 20 \uD544\uC694]"}],consequences:[{type:"stat_change",param:"gold",value:-20,description:"\uAE08\uD654 -20"},{type:"health_change",param:"health",value:50,description:"HP +50"}]},{id:"choice_advanced_treatment",text:"\uACE0\uAE09 \uCE58\uB8CC\uB97C \uBC1B\uB294\uB2E4 (\uAE08\uD654 50, HP \uC644\uC804 \uD68C\uBCF5 + \uBC84\uD504)",nextSceneId:"scene_hospital_advanced_treated",importance:"major",conditions:[{type:"stat",param:"gold",operator:">=",value:50,displayText:"[\uAE08\uD654 50 \uD544\uC694]"}],consequences:[{type:"stat_change",param:"gold",value:-50,description:"\uAE08\uD654 -50"},{type:"health_change",param:"health",value:9999,description:"HP \uC644\uC804 \uD68C\uBCF5"},{type:"stat_change",param:"strength",value:1,description:"\uADFC\uB825 +1"},{type:"stat_change",param:"innerPower",value:1,description:"\uB0B4\uACF5 +1"}]},{id:"choice_rest_only",text:"\uADF8\uB0E5 \uC26C\uAE30\uB9CC \uD55C\uB2E4 (\uBB34\uB8CC, HP 30 \uD68C\uBCF5)",nextSceneId:"scene_hospital_rested",importance:"minor",consequences:[{type:"health_change",param:"health",value:30,description:"HP +30"}]},{id:"choice_leave_hospital",text:"\uCE58\uB8CC\uB97C \uAC70\uBD80\uD558\uACE0 \uB5A0\uB09C\uB2E4",nextSceneId:"scene_hospital_leave",importance:"minor"}],location:"luoyang_hospital",timeOfDay:"afternoon",tags:["hospital","recovery"]},{id:"scene_hospital_treated",title:"\uCE58\uB8CC \uC644\uB8CC",type:"narrative",autoProgress:!0,autoDelay:3e3,narrativeText:["\u2728 [\uCE58\uB8CC \uC644\uB8CC]","","\uC758\uC6D0\uC774 \uB2F9\uC2E0\uC758 \uC0C1\uCC98\uB97C \uCE58\uB8CC\uD55C\uB2E4.","\uCE68\uC744 \uB193\uACE0, \uC57D\uCD08\uB97C \uB2EC\uC5EC \uB9C8\uC2DC\uAC8C \uD55C\uB2E4.","",'"\uC774\uC81C \uAD1C\uCC2E\uC744 \uAC81\uB2C8\uB2E4. \uD558\uC9C0\uB9CC \uBB34\uB9AC\uB294 \uAE08\uBB3C\uC774\uC624."',"","\uC0C1\uCC98\uAC00 \uC544\uBB3C\uACE0, \uAE30\uC6B4\uC774 \uB3CC\uC544\uC628\uB2E4.","\uB2E4\uC2DC \uC2F8\uC6B8 \uC218 \uC788\uC744 \uAC83 \uAC19\uB2E4."],choices:[{id:"choice_continue",text:"\uC758\uC6D0\uC744 \uB098\uC120\uB2E4",nextSceneId:"scene_road_to_luoyang"}],location:"luoyang_hospital",timeOfDay:"afternoon",tags:["hospital","recovery"]},{id:"scene_hospital_advanced_treated",title:"\uC644\uBCBD\uD55C \uD68C\uBCF5",type:"narrative",autoProgress:!0,autoDelay:3500,narrativeText:["\u2728 [\uC644\uBCBD\uD55C \uD68C\uBCF5]","","\uC758\uC6D0\uC774 \uBE44\uC804\uC758 \uCE58\uB8CC\uBC95\uC744 \uC2DC\uC804\uD55C\uB2E4.","\uCE68\uC220\uACFC \uD568\uAED8 \uD2B9\uC81C \uC601\uC57D\uC744 \uBCF5\uC6A9\uD55C\uB2E4.","",'"\uC774 \uC57D\uC740 \uB0B4\uACF5 \uC6B4\uD589\uACFC \uADFC\uB825 \uAC15\uD654\uC5D0\uB3C4 \uB3C4\uC6C0\uC774 \uB420 \uAC83\uC774\uC624."',"","\uC628\uBAB8\uC5D0 \uB530\uB73B\uD55C \uAE30\uC6B4\uC774 \uD37C\uC9C4\uB2E4.","\uC0C1\uCC98\uAC00 \uC644\uC804\uD788 \uC544\uBB3C\uACE0, \uC624\uD788\uB824 \uC804\uBCF4\uB2E4 \uB354 \uAC15\uD574\uC9C4 \uAE30\uBD84\uC774\uB2E4!","","\u{1F4AA} \uADFC\uB825\uACFC \uB0B4\uACF5\uC774 \uAC15\uD654\uB418\uC5C8\uB2E4!"],choices:[{id:"choice_continue",text:"\uAC10\uC0AC \uC778\uC0AC\uB97C \uD558\uACE0 \uC758\uC6D0\uC744 \uB098\uC120\uB2E4",nextSceneId:"scene_road_to_luoyang"}],location:"luoyang_hospital",timeOfDay:"afternoon",tags:["hospital","recovery","buff"]},{id:"scene_hospital_rested",title:"\uD734\uC2DD",type:"narrative",autoProgress:!0,autoDelay:2500,narrativeText:["\u{1F60C} [\uD734\uC2DD]","","\uB2F9\uC2E0\uC740 \uCE68\uC0C1\uC5D0 \uB204\uC6CC \uC270\uB2E4.","\uC2DC\uAC04\uC774 \uC9C0\uB098\uBA74\uC11C \uC870\uAE08\uC529 \uAE30\uC6B4\uC774 \uB3CC\uC544\uC628\uB2E4.","","\uC644\uC804\uD788 \uD68C\uBCF5\uB418\uC9C0\uB294 \uC54A\uC558\uC9C0\uB9CC, \uC5B4\uB290 \uC815\uB3C4 \uC6C0\uC9C1\uC77C \uC218 \uC788\uC744 \uAC83 \uAC19\uB2E4.","",'"\uBB34\uB9AC\uD558\uC9C0 \uB9C8\uC2DC\uC624. \uC544\uC9C1 \uC644\uCE58\uB418\uC9C0 \uC54A\uC558\uC18C."'],choices:[{id:"choice_continue",text:"\uC758\uC6D0\uC744 \uB098\uC120\uB2E4",nextSceneId:"scene_road_to_luoyang"}],location:"luoyang_hospital",timeOfDay:"afternoon",tags:["hospital","recovery"]},{id:"scene_hospital_leave",title:"\uC758\uC6D0\uC744 \uB5A0\uB098\uB2E4",type:"narrative",autoProgress:!0,autoDelay:2e3,narrativeText:["\u26A0\uFE0F [\uCE58\uB8CC \uAC70\uBD80]","",'"\uCE58\uB8CC\uAC00 \uD544\uC694\uD558\uC2E0\uB370... \uBB34\uB9AC\uD558\uC9C0 \uB9C8\uC2DC\uC624."',"","\uB2F9\uC2E0\uC740 \uACE0\uAC1C\uB97C \uC800\uC73C\uBA70 \uC758\uC6D0\uC744 \uB098\uC120\uB2E4.","\uC544\uC9C1 \uBAB8\uC774 \uC628\uC804\uCE58 \uC54A\uC9C0\uB9CC, \uC2DC\uAC04\uC774 \uC5C6\uB2E4.","","\uC870\uC2EC\uC2A4\uB7FD\uAC8C \uAC78\uC74C\uC744 \uC62E\uAE34\uB2E4..."],choices:[{id:"choice_continue",text:"\uAE38\uC744 \uB098\uC120\uB2E4",nextSceneId:"scene_road_to_luoyang"}],location:"luoyang_hospital",timeOfDay:"afternoon",tags:["hospital","no_recovery"]},{id:"scene_rescue_seongun",title:"\uC0AC\uD615 \uAD6C\uCD9C",narrativeText:["\uC5B4\uB450\uC6B4 \uAC10\uC625 \uC548, \uB2F9\uC2E0\uC740 \uC0AC\uD615\uC744 \uBC1C\uACAC\uD55C\uB2E4.","",'"\uCCAD\uC6B4 \uC0AC\uD615!"','"...\uD6C4\uBC30? \uB124\uAC00 \uC65C \uC5EC\uAE30\uC5D0..."',"","\uCCAD\uC6B4\uC758 \uC5BC\uAD74\uC740 \uC0C1\uCC98\uD22C\uC131\uC774\uB2E4. \uD558\uC9C0\uB9CC \uB208\uBE5B\uB9CC\uC740 \uC5EC\uC804\uD788 \uAC15\uB82C\uD558\uB2E4.","",'"\uB2A6\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4, \uC0AC\uD615!"',"","\u2501".repeat(50),"","[ \uCC55\uD130 1 \uC644\uB8CC - \uCCAD\uC6B4 \uC0AC\uD615 \uAD6C\uCD9C \uC131\uACF5 ]"],choices:[{id:"choice_continue_to_chapter2",text:"\uACC4\uC18D...",nextSceneId:"scene_chapter1_end"}],location:"stronghold_prison",timeOfDay:"evening",tags:["main_quest","success"]},{id:"scene_hide_observe",title:"\uC5B4\uB460 \uC18D\uC5D0\uC11C",type:"narrative",autoProgress:!0,autoDelay:3500,narrativeText:["\uB2F9\uC2E0\uC740 \uC7AC\uBE60\uB974\uAC8C \uCC3D\uACE0 \uB4A4\uC5D0 \uC228\uB294\uB2E4.","\uC0B0\uC801\uB4E4\uC774 \uC6B0\uB974\uB974 \uC9C0\uB098\uAC04\uB2E4.","",'"\uCE68\uC785\uC790\uB294 \uC5B4\uB514 \uAC14\uC5B4?"','"\uCC3E\uC544\uB77C! \uBD84\uBA85 \uCC44\uB0B4\uC5D0 \uC788\uC744 \uAC83\uC774\uB2E4!"',"","\uADF8\uB4E4\uC774 \uC9C0\uB098\uAC04 \uD6C4, \uB2F9\uC2E0\uC740 \uC870\uC6A9\uD788 \uC6C0\uC9C1\uC778\uB2E4.","\uBA40\uB9AC \uCC3D\uC0B4\uC774 \uBCF4\uC774\uB294 \uAC74\uBB3C\uC774 \uB208\uC5D0 \uB748\uB2E4. \uAC10\uC625\uC77C \uAC83\uC774\uB2E4!"],choices:[{id:"choice_approach_prison",text:"\uAC10\uC625\uC73C\uB85C \uC870\uC2EC\uC2A4\uB7FD\uAC8C \uB2E4\uAC00\uAC04\uB2E4.",nextSceneId:"scene_rescue_seongun"}],location:"stronghold_inside",timeOfDay:"evening"},{id:"scene_meditation",title:"\uB0B4\uACF5 \uC6B4\uC6A9",type:"narrative",autoProgress:!0,autoDelay:3e3,narrativeText:["\uB2F9\uC2E0\uC740 \uADFC\uCC98 \uBC14\uC704\uC5D0 \uC549\uC544 \uB208\uC744 \uAC10\uB294\uB2E4.","\uC228\uC744 \uACE0\uB974\uACE0 \uB2E8\uC804\uC5D0 \uAE30\uC6B4\uC744 \uBAA8\uC740\uB2E4.","","\uB9D1\uC740 \uAE30\uC6B4\uC774 \uACBD\uB9E5\uC744 \uB530\uB77C \uD750\uB978\uB2E4.","\uC7A0\uC2DC \uD6C4, \uBAB8 \uC0C1\uD0DC\uAC00 \uD55C\uACB0 \uB098\uC544\uC9C4 \uAC83\uC744 \uB290\uB080\uB2E4.","","[\uB0B4\uACF5 +2]"],choices:[{id:"choice_continue_after_meditation",text:"\uC218\uB828\uC744 \uB9C8\uCE58\uACE0 \uAE38\uC744 \uB5A0\uB09C\uB2E4.",nextSceneId:"scene_forest_path"}],location:"road_to_luoyang",timeOfDay:"afternoon"},{id:"scene_dungeon_entrance",title:"\uBE44\uBC00 \uB3D9\uAD74 \uC785\uAD6C",type:"decision",narrativeText:["\uB099\uC591 \uADFC\uCC98 \uC232\uAE38\uC744 \uAC77\uB358 \uC911, \uB2F9\uC2E0\uC740 \uC774\uC0C1\uD55C \uB3D9\uAD74 \uC785\uAD6C\uB97C \uBC1C\uACAC\uD588\uB2E4.","\uC785\uAD6C \uADFC\uCC98\uC5D0\uC11C \uC624\uB798\uB41C \uD54F\uC790\uAD6D\uACFC \uAC80\uC740 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.","","\uB3D9\uAD74 \uC548\uC5D0\uC11C \uD76C\uBBF8\uD558\uAC8C \uBCF4\uBB3C\uC758 \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.","\uD558\uC9C0\uB9CC \uB3D9\uC2DC\uC5D0 \uC704\uD5D8\uD55C \uAE30\uC6B4\uB3C4 \uD568\uAED8 \uAC10\uC9C0\uB41C\uB2E4.","","\uB4E4\uC5B4\uAC08 \uAC83\uC778\uAC00?"],choices:[{id:"choice_enter_dungeon",text:"\uB3D9\uAD74\uB85C \uB4E4\uC5B4\uAC04\uB2E4. (\uB358\uC804 \uC9C4\uC785)",importance:"major",nextSceneId:"dungeon_entry_point"},{id:"choice_explore_forest",text:"\uC704\uD5D8\uD574 \uBCF4\uC778\uB2E4. \uB2E4\uB978 \uAE38\uC744 \uCC3E\uB294\uB2E4.",nextSceneId:"scene_forest_path"}],location:"road_to_luoyang",timeOfDay:"afternoon",tags:["dungeon_entrance","exploration"]}];var Bt=[{id:"npc_innkeeper",name:"\uC8FC\uBAA8",title:"\uCDE8\uD5A5\uB8E8 \uC8FC\uBAA8",sect:"none",personality:["shrewd","observant"],state:"idle",currentLocation:"inn",initialRelationship:0,tags:["merchant","information_broker"],dialogues:[{dialogueId:"dia_greeting",text:"\uBB34\uC5C7\uC744 \uB4DC\uC2DC\uACA0\uC2B5\uB2C8\uAE4C, \uC18C\uD611?",priority:1},{dialogueId:"dia_after_bribe",text:"\uD751\uD48D\uCC44\uB77C... \uC704\uD5D8\uD55C \uACF3\uC774\uC624. \uC870\uC2EC\uD558\uC2DC\uC624.",conditions:[{type:"flag",param:"got_inn_information",operator:"==",value:!0}],priority:10},{dialogueId:"dia_high_affection",text:"\uC18C\uD611\uC740 \uC88B\uC740 \uBD84\uC774\uC2DC\uC624. \uBB34\uC6B4\uC744 \uBE4C\uACA0\uC18C.",conditions:[{type:"relationship",param:"npc_innkeeper",operator:">=",value:20}],priority:15}]},{id:"npc_bandit_leader",name:"\uD751\uD48D",title:"\uD751\uD48D\uCC44 \uB450\uBAA9",sect:"none",personality:["cruel","cunning","greedy"],state:"busy",currentLocation:"stronghold_inside",initialRelationship:-50,tags:["boss","enemy","important"],dialogues:[{dialogueId:"dia_threat",text:"\uD654\uC0B0\uD30C \uB188\uC774 \uB610 \uC654\uAD70. \uB124\uB188\uB3C4 \uC7A1\uC544\uAC00\uB450\uC5B4\uB77C!",priority:1},{dialogueId:"dia_negotiation",text:"\uD765, \uD654\uC0B0\uD30C\uAC00 \uBB50 \uB300\uB2E8\uD558\uB2E4\uACE0... \uC740\uC790\uB97C \uB0B4\uB193\uC73C\uBA74 \uC0B4\uB824\uC8FC\uC9C0.",conditions:[{type:"tendency",param:"tendency.value",operator:">",value:30}],priority:10}]},{id:"npc_informant",name:"\uBB34\uC601",title:"\uB5A0\uB3CC\uC774 \uD611\uAC1D",sect:"none",personality:["mysterious","helpful"],state:"idle",currentLocation:"inn",initialRelationship:5,tags:["informant","potential_ally"],dialogues:[{dialogueId:"dia_greeting",text:"...\uD63C\uC790 \uD751\uD48D\uCC44\uC5D0 \uAC00\uB824\uB294 \uAC74\uAC00? \uBB34\uBAA8\uD558\uAD70.",priority:1},{dialogueId:"dia_hint",text:"\uBC24\uC5D0 \uB3D9\uCABD \uB2F4\uC774 \uD5C8\uC220\uD558\uB2E4\uB124. \uC870\uC2EC\uD558\uAC8C.",conditions:[{type:"stat",param:"insight",operator:">=",value:30}],priority:10},{dialogueId:"dia_friendship",text:"\uC790\uB124\uB294 \uBBFF\uC744 \uB9CC\uD55C \uC0AC\uB78C\uC774\uAD70. \uB2E4\uC74C\uC5D0 \uB610 \uB9CC\uB098\uAE30\uB97C.",conditions:[{type:"relationship",param:"npc_informant",operator:">=",value:30}],priority:15}]},{id:"npc_seongun",name:"\uCCAD\uC6B4",title:"\uD654\uC0B0\uD30C \uC81C\uC790",sect:"huashan",personality:["righteous","brave","loyal"],state:"in_danger",currentLocation:"stronghold_prison",initialRelationship:80,tags:["important","quest_target","ally"],dialogues:[{dialogueId:"dia_rescue",text:"\uC0AC\uC81C! \uBB34\uC0AC\uD558\uAD6C\uB098! \uC5B4\uC11C \uC774\uACF3\uC744 \uBC97\uC5B4\uB098\uC790!",priority:1},{dialogueId:"dia_warning",text:"\uC870\uC2EC\uD574\uB77C. \uD751\uD48D\uC740 \uACE0\uC218\uB2E4. \uC123\uBD88\uB9AC \uB364\uBE44\uC9C0 \uB9C8\uB77C.",priority:5}]},{id:"npc_choseon",name:"\uCD08\uC120",title:"\uB099\uC591 \uC81C\uC77C\uBBF8\uC778",sect:"none",personality:["gentle","mysterious","kind"],state:"idle",currentLocation:"soweol_bridge",initialRelationship:0,tags:["potential_romance","important"],dialogues:[{dialogueId:"dia_first_meet",text:"...\uAC10\uC0AC\uD569\uB2C8\uB2E4.",priority:1},{dialogueId:"dia_handkerchief",text:"\uC81C \uC190\uC218\uAC74\uC744... \uC815\uB9D0 \uAC10\uC0AC\uB4DC\uB9BD\uB2C8\uB2E4.",conditions:[{type:"flag",param:"bridge_encounter_handkerchief",operator:"==",value:!0}],priority:10},{dialogueId:"dia_affection",text:"\uB2F9\uC2E0\uC744 \uB2E4\uC2DC \uB9CC\uB0A0 \uC904\uC740... \uC6B4\uBA85\uC778\uAC00 \uBD05\uB2C8\uB2E4.",conditions:[{type:"relationship",param:"npc_choseon",operator:">=",value:30}],priority:15},{dialogueId:"dia_high_affection",text:"\uB2F9\uC2E0\uACFC \uD568\uAED8 \uC788\uC73C\uBA74... \uB9C8\uC74C\uC774 \uD3B8\uC548\uD569\uB2C8\uB2E4.",conditions:[{type:"relationship",param:"npc_choseon",operator:">=",value:60}],priority:20}]},{id:"npc_bandit_soldier",name:"\uC0B0\uC801 \uBCD1\uC878",title:"\uD751\uD48D\uCC44 \uBCD1\uC0AC",sect:"none",personality:["cowardly","greedy"],state:"idle",currentLocation:"stronghold_entrance",initialRelationship:-20,tags:["enemy","guard"],dialogues:[{dialogueId:"dia_challenge",text:"\uB204\uAD6C\uB0D0! \uB2F9\uC7A5 \uBB3C\uB7EC\uC11C\uC9C0 \uBABB\uD560\uAE4C!",priority:1},{dialogueId:"dia_bribe",text:"\uD760... \uC774 \uC815\uB3C4\uBA74... \uBABB \uBCF8 \uCC99 \uD574\uC8FC\uC9C0.",conditions:[{type:"flag",param:"bribed_guard",operator:"==",value:!0}],priority:10}]},{id:"bandit_guard_1",name:"\uD751\uD48D\uCC44 \uACBD\uBE44\uBCD1 (\uAC11)",title:"\uD751\uD48D\uCC44 \uC878\uAC1C",sect:"none",personality:["aggressive","greedy"],state:"hostile",currentLocation:"stronghold_entrance",initialRelationship:-50,tags:["enemy","bandit","combatant"],dialogues:[{dialogueId:"dia_challenge",text:"\uD654\uC0B0\uD30C \uB188\uC774 \uAC10\uD788! \uBAA9\uC228\uC744 \uB0B4\uB194\uB77C!",priority:1}]},{id:"bandit_guard_2",name:"\uD751\uD48D\uCC44 \uACBD\uBE44\uBCD1 (\uC744)",title:"\uD751\uD48D\uCC44 \uC878\uAC1C",sect:"none",personality:["aggressive","cruel"],state:"hostile",currentLocation:"stronghold_entrance",initialRelationship:-50,tags:["enemy","bandit","combatant"],dialogues:[{dialogueId:"dia_taunt",text:"\uB124 \uC0AC\uD615\uCC98\uB7FC \uAF3C\uC9DD \uBABB\uD558\uAC8C \uD574\uC8FC\uB9C8!",priority:1}]}];var Xt=[{id:"RIVALRY_MARTIAL_DUEL",name:"\uBB34\uB9BC \uACB0\uD22C \uB3C4\uC804",category:"rivalry",priority:15,canRepeat:!0,cooldown:3,roles:[{roleId:"hero",roleName:"\uC8FC\uC778\uACF5"},{roleId:"rival",roleName:"\uACBD\uC7C1\uC790",criteria:{npcTags:["rival","martial_artist"],state:"idle"}}],prerequisites:[{type:"stat",param:"martial_arts",operator:">=",value:40,description:"\uBB34\uACF5 \uC218\uC900 40 \uC774\uC0C1"},{type:"tendency",param:"tendency.value",operator:"<",value:0,description:"\uC815\uD30C \uC131\uD5A5"}],stages:[{stageId:"stage_1",stageNumber:1,scene:{id:"rivalry_duel_s1",title:"\uB3C4\uC804",narrativeText:["{npc_name}\uC774(\uAC00) \uB2F9\uC2E0 \uC55E\uC744 \uAC00\uB85C\uB9C9\uC558\uB2E4.",'"\uB124\uB188\uC758 \uC2E4\uB825\uC774 \uC5BC\uB9C8\uB098 \uB298\uC5C8\uB294\uC9C0 \uBCF4\uC790!"'],choices:[{id:"accept",text:"\uC815\uBA74\uC73C\uB85C \uC2B9\uBD80\uD55C\uB2E4",nextSceneId:"rivalry_duel_result"},{id:"decline",text:"\uC2F8\uC6C0\uC744 \uD53C\uD55C\uB2E4",consequences:[{type:"stat_change",param:"reputation",value:-5}]}]}}],outcomes:[]},{id:"MARTIAL_SECRET_DISCOVERY",name:"\uBB34\uACF5 \uBE44\uAE09 \uBC1C\uACAC",category:"opportunity",priority:20,canRepeat:!1,cooldown:5,roles:[{roleId:"hero",roleName:"\uC8FC\uC778\uACF5"}],prerequisites:[{type:"stat",param:"luck",operator:">=",value:30,description:"\uC6B4 30 \uC774\uC0C1"}],stages:[{stageId:"stage_1",stageNumber:1,scene:{id:"secret_discovery_s1",title:"\uBC1C\uACAC",narrativeText:["\uC624\uB798\uB41C \uB098\uBB34 \uBC11\uB3D9\uC5D0\uC11C \uBB34\uC5B8\uAC00 \uBC18\uC9DD\uC774\uB294 \uAC83\uC774 \uBCF4\uC778\uB2E4.","\uB0A1\uC740 \uC0C1\uC790 \uC548\uC5D0\uB294 \uACE0\uC11C\uAC00 \uB4E4\uC5B4\uC788\uB2E4!"],choices:[{id:"study",text:"\uC2E0\uC911\uD558\uAC8C \uC5F0\uAD6C\uD55C\uB2E4",nextSceneId:"secret_study_result"},{id:"practice",text:"\uC989\uC2DC \uC218\uB828\uD55C\uB2E4",nextSceneId:"secret_practice_result"},{id:"keep",text:"\uB098\uC911\uC744 \uC704\uD574 \uBCF4\uAD00\uD55C\uB2E4",consequences:[{type:"item_gain",param:"secret_manual",value:1}]}]}}],outcomes:[]},{id:"CRISIS_POISONING",name:"\uB3C5\uC0B4 \uC704\uAE30",category:"crisis",priority:25,canRepeat:!0,cooldown:4,roles:[{roleId:"hero",roleName:"\uC8FC\uC778\uACF5"}],prerequisites:[{type:"stat",param:"reputation",operator:">=",value:30,description:"\uBA85\uC131 30 \uC774\uC0C1"},{type:"flag",param:"made_enemies",operator:"==",value:!0,description:"\uC801\uC744 \uB9CC\uB4E0 \uC0C1\uD0DC"}],stages:[{stageId:"stage_1",stageNumber:1,scene:{id:"poison_crisis_s1",title:"\uC704\uAE30",narrativeText:["\uAC1D\uC810\uC5D0\uC11C \uC220\uC744 \uB9C8\uC2DC\uB824\uB294 \uC21C\uAC04, \uBBF8\uBB18\uD55C \uB0C4\uC0C8\uAC00 \uB290\uAEF4\uC9C4\uB2E4.","\uC774\uAC83\uC740... \uB3C5\uC758 \uAE30\uC6B4\uC778\uAC00?"],choices:[{id:"detect",text:"\uB3C5\uC744 \uD0D0\uC9C0\uD558\uACE0 \uC911\uD654\uD55C\uB2E4",nextSceneId:"poison_detect_result",conditions:[{type:"stat",param:"insight",operator:">=",value:45}]},{id:"pretend",text:"\uB9C8\uC2E0 \uCC99\uD558\uACE0 \uBC94\uC778\uC744 \uCD94\uC801\uD55C\uB2E4",nextSceneId:"poison_pretend_result",conditions:[{type:"stat",param:"insight",operator:">=",value:40}]},{id:"resist",text:"\uB0B4\uACF5\uC73C\uB85C \uB3C5\uC744 \uC5B5\uC81C\uD55C\uB2E4",nextSceneId:"poison_resist_result",conditions:[{type:"stat",param:"martial_arts",operator:">=",value:50}]}]}}],outcomes:[]},{id:"HELP_WEAK",name:"\uC57D\uC790 \uAD6C\uC870",category:"moral_choice",priority:10,canRepeat:!0,cooldown:2,roles:[{roleId:"hero",roleName:"\uC8FC\uC778\uACF5"},{roleId:"victim",roleName:"\uD53C\uD574\uC790",criteria:{npcTags:["victim","civilian"]}}],prerequisites:[{type:"tendency",param:"tendency.value",operator:"<",value:20,description:"\uC815\uD30C \uC131\uD5A5"}],stages:[{stageId:"stage_1",stageNumber:1,scene:{id:"help_weak_s1",title:"\uAD6C\uC870",narrativeText:["\uAE38 \uC55E\uC5D0\uC11C \uBE44\uBA85\uC18C\uB9AC\uAC00 \uB4E4\uB9B0\uB2E4.","\uC0C1\uC778\uC774 \uC0B0\uC801\uB4E4\uC5D0\uAC8C \uC2B5\uACA9\uB2F9\uD558\uACE0 \uC788\uB2E4!"],choices:[{id:"rescue",text:"\uC0B0\uC801\uB4E4\uACFC \uC2F8\uC6CC \uAD6C\uD55C\uB2E4",nextSceneId:"help_rescue_result"},{id:"negotiate",text:"\uC0B0\uC801\uB4E4\uACFC \uD611\uC0C1\uD55C\uB2E4",nextSceneId:"help_negotiate_result",conditions:[{type:"stat",param:"insight",operator:">=",value:35}]},{id:"ignore",text:"\uBAA8\uB978 \uCC99 \uC9C0\uB098\uAC04\uB2E4",consequences:[{type:"tendency_change",param:"tendency.value",value:15},{type:"stat_change",param:"reputation",value:-5}]}]}}],outcomes:[]}];var Tt=[{id:"weapon_wooden_sword",name:"\uBAA9\uAC80",description:"\uD6C8\uB828\uC6A9 \uB098\uBB34 \uAC80. \uAE30\uBCF8\uC801\uC778 \uBB34\uAE30.",type:"weapon",quantity:1,buyPrice:50,sellPrice:10,rarity:"common",stats:{attack:5,minDamage:3,maxDamage:8}},{id:"weapon_iron_sword",name:"\uCCA0\uAC80",description:"\uC77C\uBC18\uC801\uC778 \uCCA0\uC81C \uAC80. \uBB34\uB09C\uD55C \uC131\uB2A5.",type:"weapon",quantity:1,buyPrice:200,sellPrice:50,rarity:"common",stats:{attack:15,minDamage:10,maxDamage:20}},{id:"weapon_steel_sword",name:"\uAC15\uCCA0\uAC80",description:"\uB2E8\uB828\uB41C \uAC15\uCCA0\uB85C \uB9CC\uB4E0 \uAC80. \uC6B0\uC218\uD55C \uD488\uC9C8.",type:"weapon",quantity:1,buyPrice:500,sellPrice:125,rarity:"uncommon",stats:{attack:30,minDamage:20,maxDamage:40,critChance:5}},{id:"weapon_azure_cloud_sword",name:"\uCCAD\uC6B4\uAC80",description:"\uD654\uC0B0\uD30C\uC758 \uC81C\uC790\uB4E4\uC774 \uC0AC\uC6A9\uD558\uB294 \uBA85\uAC80. \uD478\uB978 \uBE5B\uC774 \uAC10\uB3C8\uB2E4.",type:"weapon",quantity:1,buyPrice:1500,sellPrice:375,rarity:"rare",stats:{attack:50,minDamage:35,maxDamage:65,critChance:10,attackSpeed:10},uniqueEffect:"\uD654\uC0B0\uD30C \uAC80\uBC95 \uC704\uB825 +15%"},{id:"weapon_cold_moon_blade",name:"\uD55C\uC6D4\uB3C4",description:"\uB2EC\uBE5B\uCC98\uB7FC \uCC28\uAC00\uC6B4 \uAE30\uC6B4\uC744 \uBFDC\uB294 \uB3C4. \uBE60\uB978 \uACF5\uACA9\uC5D0 \uD2B9\uD654.",type:"weapon",quantity:1,buyPrice:2e3,sellPrice:500,rarity:"rare",stats:{attack:45,minDamage:30,maxDamage:60,attackSpeed:20,critDamage:25}},{id:"weapon_dragon_slayer",name:"\uC6A9\uB9B0\uAC80",description:"\uC804\uC124\uC758 \uC6A9\uC744 \uC4F0\uB7EC\uB728\uB838\uB2E4\uB294 \uBA85\uAC80. \uC5C4\uCCAD\uB09C \uD30C\uAD34\uB825\uC744 \uC790\uB791\uD55C\uB2E4.",type:"weapon",quantity:1,buyPrice:5e3,sellPrice:1250,rarity:"epic",stats:{attack:80,minDamage:60,maxDamage:120,critChance:15,critDamage:50,lifeSteal:5},uniqueEffect:"\uC6A9\uC871\uC5D0\uAC8C \uCD94\uAC00 \uD53C\uD574 +30%"},{id:"weapon_heavenly_demon_sword",name:"\uCC9C\uB9C8\uAC80",description:"\uCC9C\uB9C8\uC2E0\uAD50\uC758 \uBE44\uC804 \uAC80. \uC0AC\uC545\uD55C \uAE30\uC6B4\uC774 \uB290\uAEF4\uC9C4\uB2E4.",type:"weapon",quantity:1,buyPrice:8e3,sellPrice:2e3,rarity:"legendary",stats:{attack:100,minDamage:80,maxDamage:150,critChance:20,critDamage:75,lifeSteal:10,attackSpeed:15},uniqueEffect:"\uB9C8\uACF5 \uC0AC\uC6A9 \uC2DC \uC704\uB825 +25%, \uC131\uD5A5 +1/\uC77C"}],qt=[{id:"armor_cloth_robe",name:"\uCC9C\uC758",description:"\uC77C\uBC18\uC801\uC778 \uCC9C\uC73C\uB85C \uB9CC\uB4E0 \uC637.",type:"armor",quantity:1,buyPrice:30,sellPrice:7,rarity:"common",stats:{defense:5,armor:3,hp:20}},{id:"armor_leather_armor",name:"\uAC00\uC8FD \uAC11\uC637",description:"\uC9C8\uAE34 \uAC00\uC8FD\uC73C\uB85C \uB9CC\uB4E0 \uAC11\uC637. \uC801\uB2F9\uD55C \uBC29\uC5B4\uB825.",type:"armor",quantity:1,buyPrice:150,sellPrice:37,rarity:"common",stats:{defense:15,armor:10,hp:50,evasion:5}},{id:"armor_huashan_robe",name:"\uD654\uC0B0\uB3C4\uBCF5",description:"\uD654\uC0B0\uD30C\uC758 \uC815\uC2DD \uC81C\uC790\uAC00 \uC785\uB294 \uB3C4\uBCF5. \uD478\uB978\uC0C9\uC774 \uC544\uB984\uB2F5\uB2E4.",type:"armor",quantity:1,buyPrice:800,sellPrice:200,rarity:"uncommon",stats:{defense:30,armor:20,hp:100,mp:50,evasion:10},uniqueEffect:"\uD654\uC0B0\uD30C \uBB34\uACF5 \uC218\uB828 \uC18D\uB3C4 +20%"},{id:"armor_silkworm_armor",name:"\uCC9C\uC7A0\uAC11\uC758",description:"\uC804\uC124\uC758 \uCC9C\uC7A0\uC0AC\uB85C \uC9E0 \uAC11\uC637. \uAC00\uBCCD\uC9C0\uB9CC \uAC15\uD558\uB2E4.",type:"armor",quantity:1,buyPrice:2500,sellPrice:625,rarity:"rare",stats:{defense:50,armor:40,hp:200,evasion:20,allResist:10},uniqueEffect:"\uB3C5 \uC800\uD56D +50%"},{id:"armor_dragon_scale",name:"\uC6A9\uB9B0\uAC11",description:"\uC6A9\uC758 \uBE44\uB298\uB85C \uB9CC\uB4E0 \uAC11\uC637. \uAC70\uC758 \uBB34\uC801\uC5D0 \uAC00\uAE4C\uC6B4 \uBC29\uC5B4\uB825.",type:"armor",quantity:1,buyPrice:6e3,sellPrice:1500,rarity:"epic",stats:{defense:80,armor:70,hp:300,allResist:25,lifeRegen:5},uniqueEffect:"\uD654\uC5FC \uACF5\uACA9 \uBB34\uD6A8\uD654"},{id:"armor_heavenly_silk",name:"\uCC9C\uC7A0\uC2E0\uC758",description:"\uCC9C\uB144 \uCC9C\uC7A0\uC0AC\uB85C \uB9CC\uB4E0 \uC2E0\uC758. \uBAA8\uB4E0 \uACF5\uACA9\uC744 \uBD80\uB4DC\uB7FD\uAC8C \uD758\uB9B0\uB2E4.",type:"armor",quantity:1,buyPrice:1e4,sellPrice:2500,rarity:"legendary",stats:{defense:100,armor:90,hp:400,mp:200,evasion:30,allResist:35,lifeRegen:10},uniqueEffect:"\uBAA8\uB4E0 \uC0C1\uD0DC\uC774\uC0C1 \uC800\uD56D +50%"}],yg=[{id:"accessory_jade_pendant",name:"\uC625\uD328",description:"\uB9D1\uC740 \uC625\uC73C\uB85C \uB9CC\uB4E0 \uD328. \uAE30\uC6B4\uC744 \uC548\uC815\uC2DC\uD0A8\uB2E4.",type:"amulet",quantity:1,buyPrice:300,sellPrice:75,rarity:"uncommon",stats:{hp:50,mp:30,manaRegen:2}},{id:"accessory_inner_power_amulet",name:"\uB0B4\uACF5 \uBD80\uC801",description:"\uB0B4\uACF5 \uC218\uB828\uC5D0 \uB3C4\uC6C0\uC744 \uC8FC\uB294 \uBD80\uC801.",type:"amulet",quantity:1,buyPrice:1e3,sellPrice:250,rarity:"rare",stats:{mp:100,manaRegen:5,attack:20},uniqueEffect:"\uB0B4\uACF5 \uD68C\uBCF5 \uC18D\uB3C4 +25%"},{id:"accessory_strength_ring",name:"\uB825\uB7C9\uC758 \uBC18\uC9C0",description:"\uCC29\uC6A9\uC790\uC758 \uD798\uC744 \uC99D\uD3ED\uC2DC\uD0A4\uB294 \uBC18\uC9C0.",type:"ring",quantity:1,buyPrice:500,sellPrice:125,rarity:"uncommon",stats:{attack:15,minDamage:5,maxDamage:10}},{id:"accessory_swift_ring",name:"\uC2E0\uC18D\uC758 \uBC18\uC9C0",description:"\uCC29\uC6A9\uC790\uC758 \uBBFC\uCCA9\uD568\uC744 \uB192\uC5EC\uC8FC\uB294 \uBC18\uC9C0.",type:"ring",quantity:1,buyPrice:500,sellPrice:125,rarity:"uncommon",stats:{evasion:10,attackSpeed:10,critChance:5}},{id:"accessory_phoenix_feather",name:"\uBD09\uD669\uC758 \uAE43\uD138",description:"\uBD88\uC0AC\uC870\uC758 \uAE43\uD138\uB85C \uB9CC\uB4E0 \uBAA9\uAC78\uC774. \uC0DD\uBA85\uB825\uC774 \uB118\uCE5C\uB2E4.",type:"amulet",quantity:1,buyPrice:5e3,sellPrice:1250,rarity:"epic",stats:{hp:300,lifeRegen:10,lifeSteal:5,fireResist:50},uniqueEffect:"\uC0DD\uBA85\uB825 30% \uC774\uD558 \uC2DC \uC790\uB3D9 \uD68C\uBCF5 (1\uD68C/\uC804\uD22C)"},{id:"accessory_dragon_heart",name:"\uC6A9\uC758 \uC2EC\uC7A5",description:"\uC804\uC124\uC758 \uC6A9\uC774 \uB0A8\uAE34 \uC2EC\uC7A5 \uACB0\uC815. \uC5C4\uCCAD\uB09C \uD798\uC774 \uB290\uAEF4\uC9C4\uB2E4.",type:"ring",quantity:1,buyPrice:8e3,sellPrice:2e3,rarity:"legendary",stats:{attack:50,hp:200,mp:100,critChance:15,critDamage:30,allResist:20},uniqueEffect:"\uBAA8\uB4E0 \uB2A5\uB825\uCE58 +10%"}],Q0=[...Tt,...qt,...yg];var Qt=[k({},Tt[0]),k({},qt[0])];function wg(r,t){if(r&1&&(o(0,"div",21)(1,"div",22)(2,"span",23),c(3,"\uC774\uB984:"),i(),o(4,"span",24),c(5),i()(),o(6,"div",22)(7,"span",23),c(8,"\uB808\uBCA8:"),i(),o(9,"span",24),c(10),i()(),o(11,"div",22)(12,"span",23),c(13,"\uC804\uD22C\uB825:"),i(),o(14,"span",25),c(15),i()(),o(16,"div",26)(17,"span",23),c(18,"\uC0DD\uBA85\uB825:"),i(),o(19,"span",24),c(20),i(),o(21,"div",27),S(22,"div",28),i()(),o(23,"div",22)(24,"span",23),c(25,"\uC131\uD5A5:"),i(),o(26,"span",29),c(27),i()()()),r&2){let e=d();l(5),h(e.player.name),l(5),h(e.player.level),l(5),h(e.getTotalCombatPower()),l(5),E("",e.player.health," / ",e.player.maxHealth),l(2),q("width",e.player.health/e.player.maxHealth*100,"%"),l(4),y("righteous",e.player.tendency.value<-20)("neutral",e.player.tendency.value>=-20&&e.player.tendency.value<20)("evil",e.player.tendency.value>=20),l(),M(" ",e.player.tendency.label," ")}}function kg(r,t){if(r&1&&(o(0,"div",30)(1,"div",31)(2,"span",32),c(3),i()(),o(4,"div",33),S(5,"div",34),i(),S(6,"div",35),i()),r&2){let e=d();l(3),h(e.getExperienceText()),l(2),q("width",e.getExperiencePercentage(),"%")}}function Sg(r,t){if(r&1&&(o(0,"div",36)(1,"div",37),c(2,"\uD604\uC7AC \uBAA9\uD45C"),i(),o(3,"div",38),c(4),i()()),r&2){let e=d();l(4),h(e.gameState.currentObjective)}}function Dg(r,t){if(r&1&&(o(0,"div",62)(1,"div",46),c(2),o(3,"span",63),c(4),i()(),o(5,"div",48)(6,"div",49)(7,"div",23),c(8,"HP"),i(),o(9,"div",50),S(10,"div",64),i(),o(11,"div",52),c(12),i()()()()),r&2){let e=t.$implicit,n=t.index,a=d(2);y("defeated",e.currentHp<=0)("targeted",a.battleState.targetedEnemyIndex===n),l(2),M(" ",e.name," "),l(2),M("\u26A1 ",a.getEnemyCombatPower(e)),l(6),q("width",e.currentHp/e.maxHp*100,"%"),l(2),E("",e.currentHp," / ",e.maxHp)}}function Ig(r,t){if(r&1&&(o(0,"div",65),c(1),i()),r&2){let e=t.$implicit;l(),M(" ",e.message," ")}}function Eg(r,t){if(r&1){let e=v();o(0,"button",76),f("click",function(){let a=_(e).$implicit,s=d(4);return u(s.playerUseSkill(a))}),o(1,"div",77),c(2),i(),o(3,"div",78)(4,"span",79),c(5),i(),o(6,"span",80),c(7),i()()()}if(r&2){let e=t.$implicit,n=d(4);p("disabled",e.mpCost>n.battleState.player.currentMp),l(2),h(e.name),l(3),M("MP ",e.mpCost),l(2),M("\uB370\uBBF8\uC9C0 ",e.damage)}}function Bg(r,t){if(r&1&&(o(0,"div",72)(1,"div",73),c(2,"\uC2A4\uD0AC \uC120\uD0DD"),i(),o(3,"div",74),b(4,Eg,8,4,"button",75),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.battleState.player.skills)}}function Tg(r,t){if(r&1){let e=v();o(0,"div",66)(1,"div",67)(2,"button",68),f("click",function(){_(e);let a=d(2);return u(a.startAutoBattle())}),c(3," \u{1F916} \uC790\uB3D9 \uC804\uD22C "),i(),o(4,"button",69),f("click",function(){_(e);let a=d(2);return u(a.playerBattleAttack())}),c(5," \u2694\uFE0F \uC77C\uBC18 \uACF5\uACA9 "),i(),o(6,"button",70),f("click",function(){_(e);let a=d(2);return u(a.toggleSkillMenu())}),c(7," \u2728 \uC2A4\uD0AC \uC0AC\uC6A9 "),i()(),b(8,Bg,5,1,"div",71),i()}if(r&2){let e=d(2);l(8),p("ngIf",e.showSkillMenu)}}function qg(r,t){if(r&1){let e=v();o(0,"div",81)(1,"span"),c(2,"\u{1F916} \uC790\uB3D9 \uC804\uD22C \uC9C4\uD589 \uC911..."),i(),o(3,"button",82),f("click",function(){_(e);let a=d(2);return u(a.stopAutoBattle())}),c(4,"\uC911\uB2E8"),i()()}}function Ag(r,t){r&1&&(o(0,"h3"),c(1,"\u{1F389} \uC2B9\uB9AC!"),i())}function Gg(r,t){r&1&&(o(0,"h3"),c(1,"\u{1F480} \uD328\uBC30..."),i())}function Ng(r,t){if(r&1){let e=v();o(0,"div",83),b(1,Ag,2,0,"h3",84)(2,Gg,2,0,"h3",84),o(3,"button",85),f("click",function(){_(e);let a=d(2);return u(a.endBattle())}),c(4,"\uACC4\uC18D\uD558\uAE30"),i()()}if(r&2){let e=d(2);l(),p("ngIf",e.battleState.victory),l(),p("ngIf",!e.battleState.victory)}}function zg(r,t){if(r&1&&(o(0,"div",39)(1,"div",40)(2,"h2"),c(3,"\u2694\uFE0F \uC804\uD22C \uC9C4\uD589 \uC911"),i(),o(4,"div",41)(5,"span",42),c(6,"\uD604\uC7AC \uD134:"),i(),o(7,"span",43),c(8),i()()(),o(9,"div",44)(10,"div",45)(11,"div",46),c(12),o(13,"span",47),c(14),i()(),o(15,"div",48)(16,"div",49)(17,"div",23),c(18,"HP"),i(),o(19,"div",50),S(20,"div",51),i(),o(21,"div",52),c(22),i()(),o(23,"div",53)(24,"div",23),c(25,"MP"),i(),o(26,"div",50),S(27,"div",54),i(),o(28,"div",52),c(29),i()()()(),o(30,"div",55),b(31,Dg,13,10,"div",56),i()(),o(32,"div",57),b(33,Ig,2,1,"div",58),i(),b(34,Tg,9,1,"div",59)(35,qg,5,0,"div",60)(36,Ng,5,2,"div",61),i()),r&2){let e=d();l(7),y("player-turn",e.battleState.currentTurn==="player")("enemy-turn",e.battleState.currentTurn==="enemy"),l(),M(" ",e.battleState.currentTurn==="player"?"\uD50C\uB808\uC774\uC5B4":"\uC801"," "),l(4),M(" ",e.battleState.player.name," "),l(2),M("\u26A1 ",e.getPlayerCombatPower()),l(6),q("width",e.battleState.player.currentHp/e.battleState.player.maxHp*100,"%"),l(2),E("",e.battleState.player.currentHp," / ",e.battleState.player.maxHp),l(5),q("width",e.battleState.player.currentMp/e.battleState.player.maxMp*100,"%"),l(2),E("",e.battleState.player.currentMp," / ",e.battleState.player.maxMp),l(2),p("ngForOf",e.battleState.enemies),l(2),p("ngForOf",e.battleState.logs),l(),p("ngIf",e.battleState.currentTurn==="player"&&!e.battleState.isAutoBattle&&!e.battleState.ended),l(),p("ngIf",e.battleState.isAutoBattle&&!e.battleState.ended),l(),p("ngIf",e.battleState.ended)}}function Fg(r,t){if(r&1){let e=v();o(0,"app-dungeon-explorer",91),f("roomMove",function(a){_(e);let s=d(2);return u(s.onDungeonRoomMove(a))})("interactableUse",function(a){_(e);let s=d(2);return u(s.onDungeonInteract(a))})("monsterAttack",function(a){_(e);let s=d(2);return u(s.onDungeonMonsterBattle(a))})("rewardsClaimed",function(a){_(e);let s=d(2);return u(s.onDungeonRewardsClaimed(a))})("floorMove",function(a){_(e);let s=d(2);return u(s.onDungeonFloorChange(a))})("dungeonEscape",function(){_(e);let a=d(2);return u(a.onDungeonEscape())}),i()}if(r&2){let e=d(2);p("dungeon",e.currentDungeon)("currentRoom",e.currentDungeonRoom)("playerHp",(e.player==null?null:e.player.health)||100)("playerMaxHp",(e.player==null?null:e.player.maxHealth)||100)("playerName",(e.player==null?null:e.player.name)||"\uD50C\uB808\uC774\uC5B4")("playerLevel",(e.player==null?null:e.player.level)||1)("playerAttackPower",e.getTotalAttack())("playerDefensePower",e.getTotalDefense())}}function Lg(r,t){r&1&&(o(0,"div",92)(1,"p"),c(2,"\uB358\uC804\uC744 \uC0DD\uC131 \uC911\uC785\uB2C8\uB2E4..."),i(),o(3,"p"),c(4,"\uACE7 \uD0D0\uD5D8\uC774 \uC2DC\uC791\uB429\uB2C8\uB2E4."),i()())}function Rg(r,t){if(r&1){let e=v();o(0,"div",86)(1,"div",87)(2,"h2"),c(3,"\u{1F3F0} \uB358\uC804 \uD0D0\uD5D8"),i(),o(4,"button",88),f("click",function(){_(e);let a=d();return u(a.onDungeonEscape())}),c(5,"\uD0C8\uCD9C\uD558\uAE30"),i()(),b(6,Fg,1,8,"app-dungeon-explorer",89)(7,Lg,5,0,"div",90),i()}if(r&2){let e=d();l(6),p("ngIf",e.currentDungeon),l(),p("ngIf",!e.currentDungeon)}}function $g(r,t){if(r&1&&S(0,"div",95),r&2){let e=t.$implicit;p("innerHTML",e,ye)}}function Vg(r,t){if(r&1&&(o(0,"div",93),b(1,$g,1,1,"div",94),i()),r&2){let e=d();l(),p("ngForOf",e.gameLog)}}function jg(r,t){if(r&1&&(o(0,"span",101),c(1),i()),r&2){let e=d(2);l(),M(" (",e.autoProgressCountdown.toFixed(1),"\uCD08 \uD6C4 \uC790\uB3D9 \uC9C4\uD589... Space\uB85C \uC989\uC2DC \uC9C4\uD589) ")}}function Hg(r,t){if(r&1&&(o(0,"span",106),c(1),i()),r&2){let e=d().$implicit;l(),M(" (",e.disabledReason,") ")}}function Wg(r,t){if(r&1){let e=v();o(0,"button",102),f("click",function(){let a=_(e).$implicit,s=d(2);return u(s.selectChoice(a))}),o(1,"span",103),c(2),i(),o(3,"span",104),c(4),i(),b(5,Hg,2,1,"span",105),i()}if(r&2){let e=t.$implicit,n=t.index,a=d(2);y("disabled",e.isDisabled)("auto-progressing",a.isAutoProgressing),p("disabled",e.isDisabled),l(2),h(n+1),l(2),h(e.text),l(),p("ngIf",e.isDisabled)}}function Yg(r,t){if(r&1&&(o(0,"div",96)(1,"div",97),c(2," \u25B6 \uC120\uD0DD\uC9C0 "),b(3,jg,2,1,"span",98),i(),o(4,"div",99),b(5,Wg,6,8,"button",100),i()()),r&2){let e=d();l(3),p("ngIf",e.isAutoProgressing),l(2),p("ngForOf",e.availableChoices)}}function Ug(r,t){if(r&1&&(o(0,"span",135),c(1),i()),r&2){let e=d(3);l(),M(" +",e.getEquipmentBonus().attack," ")}}function Kg(r,t){if(r&1&&(o(0,"span",135),c(1),i()),r&2){let e=d(3);l(),M(" +",e.getEquipmentBonus().defense," ")}}function Xg(r,t){if(r&1&&(o(0,"span",135),c(1),i()),r&2){let e=d(3);l(),M(" +",e.getEquipmentBonus().hp," ")}}function Qg(r,t){if(r&1&&(o(0,"div",125)(1,"span",23),c(2,"\uCE58\uBA85\uD0C0\uC728"),i(),o(3,"span",136),c(4),i()()),r&2){let e=d(3);l(4),M("+",e.getEquipmentBonus().critChance,"%")}}function Jg(r,t){if(r&1&&(o(0,"div",125)(1,"span",23),c(2,"\uD68C\uD53C\uC728"),i(),o(3,"span",136),c(4),i()()),r&2){let e=d(3);l(4),M("+",e.getEquipmentBonus().evasion,"%")}}function Zg(r,t){if(r&1&&(o(0,"div",139),c(1),i()),r&2){let e=t.$implicit;l(),E(" \u26A0 ",e.description," (\uC2EC\uAC01\uB3C4: ",e.severity,") ")}}function ep(r,t){if(r&1&&(o(0,"div",137),b(1,Zg,2,2,"div",138),i()),r&2){let e=d(3);l(),p("ngForOf",e.player.injuries)}}function tp(r,t){r&1&&(o(0,"div",140),c(1," \u2713 \uBD80\uC0C1 \uC5C6\uC74C "),i())}function np(r,t){if(r&1&&(o(0,"div",143),c(1),i()),r&2){let e=t.$implicit;l(),M(" \u2694 ",e," ")}}function op(r,t){if(r&1&&(o(0,"div",113)(1,"h3"),c(2,"\uC2B5\uB4DD\uD55C \uBB34\uACF5"),i(),o(3,"div",141),b(4,np,2,1,"div",142),i()()),r&2){let e=d(3);l(4),p("ngForOf",e.player.learnedSkills)}}function ip(r,t){if(r&1&&(o(0,"div",111)(1,"h2",112),c(2,"\uCE90\uB9AD\uD130 \uC815\uBCF4"),i(),o(3,"div",113)(4,"h3"),c(5,"\uAE30\uBCF8 \uC815\uBCF4"),i(),o(6,"div",114)(7,"span",115),c(8,"\uC774\uB984:"),i(),o(9,"span",116),c(10),i()(),o(11,"div",114)(12,"span",115),c(13,"\uB808\uBCA8:"),i(),o(14,"span",116),c(15),i()(),o(16,"div",114)(17,"span",115),c(18,"\uACBD\uD5D8\uCE58:"),i(),o(19,"span",116),c(20),o(21,"span",117),c(22),i()(),o(23,"div",118),S(24,"div",119),i()(),o(25,"div",114)(26,"span",115),c(27,"\uBB38\uD30C:"),i(),o(28,"span",116),c(29),i()(),o(30,"div",114)(31,"span",115),c(32,"\uC131\uACA9:"),i(),o(33,"span",116),c(34),i()()(),o(35,"div",120)(36,"h3"),c(37,"\u2694\uFE0F \uC804\uD22C\uB825"),i(),o(38,"div",121)(39,"div",122)(40,"span",23),c(41,"\uC885\uD569 \uC804\uD22C\uB825"),i(),o(42,"span",123),c(43),i()(),o(44,"div",124)(45,"div",125)(46,"span",23),c(47,"\uACF5\uACA9\uB825"),i(),o(48,"span",24),c(49),b(50,Ug,2,1,"span",126),o(51,"span",127),c(52),i()()(),o(53,"div",125)(54,"span",23),c(55,"\uBC29\uC5B4\uB825"),i(),o(56,"span",24),c(57),b(58,Kg,2,1,"span",126),o(59,"span",127),c(60),i()()(),o(61,"div",125)(62,"span",23),c(63,"\uCD5C\uB300 \uC0DD\uBA85\uB825"),i(),o(64,"span",24),c(65),b(66,Xg,2,1,"span",126),o(67,"span",127),c(68),i()()(),b(69,Qg,5,1,"div",128)(70,Jg,5,1,"div",128),i()()(),o(71,"div",113)(72,"h3"),c(73,"\uB2A5\uB825\uCE58"),i(),o(74,"div",129)(75,"span",130),c(76,"\uADFC\uB825 (Strength)"),i(),o(77,"span",131),c(78),i()(),o(79,"div",129)(80,"span",130),c(81,"\uBBFC\uCCA9 (Dexterity)"),i(),o(82,"span",131),c(83),i()(),o(84,"div",129)(85,"span",130),c(86,"\uB0B4\uACF5 (Inner Power)"),i(),o(87,"span",131),c(88),i()(),o(89,"div",129)(90,"span",130),c(91,"\uD1B5\uCC30 (Insight)"),i(),o(92,"span",131),c(93),i()()(),o(94,"div",113)(95,"h3"),c(96,"\uC0C1\uD0DC"),i(),o(97,"div",114)(98,"span",115),c(99,"\uC0DD\uBA85\uB825:"),i(),o(100,"span",116),c(101),i()(),b(102,ep,2,1,"div",132)(103,tp,2,0,"div",133),i(),b(104,op,5,1,"div",134),i()),r&2){let e=d(2);l(10),h(e.player.name),l(5),h(e.player.level),l(5),E(" ",e.player.experience," / ",e.player.experienceToNext," "),l(2),M("(",e.getExperiencePercentage().toFixed(1),"%)"),l(2),q("width",e.getExperiencePercentage(),"%"),l(5),h(e.player.sect||"\uBB34\uC18C\uC18D"),l(5),h(e.player.personality),l(9),h(e.getTotalCombatPower()),l(6),M(" ",e.getBaseAttack()," "),l(),p("ngIf",e.getEquipmentBonus().attack>0),l(2),M("= ",e.getTotalAttack()),l(5),M(" ",e.getBaseDefense()," "),l(),p("ngIf",e.getEquipmentBonus().defense>0),l(2),M("= ",e.getTotalDefense()),l(5),M(" ",e.getBaseMaxHp()," "),l(),p("ngIf",e.getEquipmentBonus().hp>0),l(2),M("= ",e.player.maxHealth),l(),p("ngIf",e.getEquipmentBonus().critChance>0),l(),p("ngIf",e.getEquipmentBonus().evasion>0),l(8),h(e.player.stats.strength),l(5),h(e.player.stats.dexterity),l(5),h(e.player.stats.innerPower),l(5),h(e.player.stats.insight),l(8),E("",e.player.health," / ",e.player.maxHealth),l(),p("ngIf",e.player.injuries.length>0),l(),p("ngIf",e.player.injuries.length===0),l(),p("ngIf",e.player.learnedSkills.length>0)}}function ap(r,t){if(r&1){let e=v();o(0,"div",155)(1,"span",156),c(2),i(),o(3,"button",157),f("click",function(){_(e);let a=d(3);return u(a.unequipItem("weapon"))}),c(4,"\uD574\uC81C"),i()()}if(r&2){let e=t.$implicit;l(),U("rarity-"+e.rarity),l(),h(e.name)}}function rp(r,t){r&1&&(o(0,"span",158),c(1,"\uC5C6\uC74C"),i())}function cp(r,t){if(r&1){let e=v();o(0,"div",155)(1,"span",156),c(2),i(),o(3,"button",157),f("click",function(){_(e);let a=d(3);return u(a.unequipItem("armor"))}),c(4,"\uD574\uC81C"),i()()}if(r&2){let e=t.$implicit;l(),U("rarity-"+e.rarity),l(),h(e.name)}}function lp(r,t){r&1&&(o(0,"span",158),c(1,"\uC5C6\uC74C"),i())}function sp(r,t){if(r&1){let e=v();o(0,"div",155)(1,"span",156),c(2),i(),o(3,"button",157),f("click",function(){_(e);let a=d(3);return u(a.unequipItem("accessory"))}),c(4,"\uD574\uC81C"),i()()}if(r&2){let e=t.$implicit;l(),U("rarity-"+e.rarity),l(),h(e.name)}}function dp(r,t){r&1&&(o(0,"span",158),c(1,"\uC5C6\uC74C"),i())}function gp(r,t){r&1&&(o(0,"div",159),c(1," \uC778\uBCA4\uD1A0\uB9AC\uAC00 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4. "),i())}function pp(r,t){r&1&&(o(0,"span",169),c(1," [\uC7A5\uCC29\uC911] "),i())}function mp(r,t){if(r&1&&(o(0,"span",170),c(1),i()),r&2){let e=d().$implicit;l(),M(" x",e.quantity," ")}}function _p(r,t){if(r&1&&(o(0,"div",173),c(1),i()),r&2){let e=t.$implicit;l(),M(" ",e," ")}}function up(r,t){if(r&1&&(o(0,"div",171),b(1,_p,2,1,"div",172),i()),r&2){let e=d().$implicit,n=d(3);l(),p("ngForOf",n.getItemStatsDisplay(e))}}function Cp(r,t){if(r&1){let e=v();o(0,"button",174),f("click",function(){_(e);let a=d().$implicit,s=d(3);return u(s.equipItem(a))}),c(1," \uC7A5\uCC29 "),i()}}function fp(r,t){if(r&1){let e=v();o(0,"button",175),f("click",function(){_(e);let a=d().$implicit,s=d(3);return u(s.unequipItemByItem(a))}),c(1," \uD574\uC81C "),i()}}function bp(r,t){if(r&1&&(o(0,"div",160)(1,"div",161)(2,"span",156),c(3),i(),b(4,pp,2,0,"span",162)(5,mp,2,1,"span",163),i(),o(6,"div",164),c(7),i(),b(8,up,2,1,"div",165),o(9,"div",166),b(10,Cp,2,0,"button",167)(11,fp,2,0,"button",168),i()()),r&2){let e=t.$implicit,n=d(3);l(2),U("rarity-"+e.rarity),l(),M(" ",e.name," "),l(),p("ngIf",e.isEquipped),l(),p("ngIf",e.quantity>1),l(2),h(e.description),l(),p("ngIf",e.stats),l(2),p("ngIf",n.canEquipItem(e)&&!e.isEquipped),l(),p("ngIf",e.isEquipped)}}function hp(r,t){if(r&1&&(o(0,"div",144)(1,"h2",112),c(2,"\uC18C\uC9C0\uD488"),i(),o(3,"div",145)(4,"h3"),c(5,"\uC7A5\uCC29 \uC911"),i(),o(6,"div",146)(7,"div",147)(8,"span",148),c(9,"\uBB34\uAE30:"),i(),b(10,ap,5,3,"div",149)(11,rp,2,0,"span",150),i(),o(12,"div",147)(13,"span",148),c(14,"\uC758\uBCF5:"),i(),b(15,cp,5,3,"div",149)(16,lp,2,0,"span",150),i(),o(17,"div",147)(18,"span",148),c(19,"\uC545\uC138\uC0AC\uB9AC:"),i(),b(20,sp,5,3,"div",149)(21,dp,2,0,"span",150),i()()(),o(22,"div",151)(23,"h3"),c(24,"\uBCF4\uC720 \uC911"),i(),b(25,gp,2,0,"div",152),o(26,"div",153),b(27,bp,12,9,"div",154),i()()()),r&2){let e=d(2);l(10),p("ngIf",e.getEquippedWeapon()),l(),p("ngIf",!e.getEquippedWeapon()),l(4),p("ngIf",e.getEquippedArmor()),l(),p("ngIf",!e.getEquippedArmor()),l(4),p("ngIf",e.getEquippedAccessory()),l(),p("ngIf",!e.getEquippedAccessory()),l(4),p("ngIf",e.player.inventory.length===0),l(2),p("ngForOf",e.player.inventory)}}function Pp(r,t){r&1&&(o(0,"div",176)(1,"h2",112),c(2,"\uB3C4\uC6C0\uB9D0"),i(),o(3,"div",177)(4,"h3"),c(5,"\uAC8C\uC784 \uC18C\uAC1C"),i(),o(6,"p"),c(7," \uBB35\uD5A5\uC9C0\uC5F0(\u58A8\u9999\u4E4B\u7DE3)\uC740 100% \uD14D\uC2A4\uD2B8\uB85C \uC9C4\uD589\uB418\uB294 \uBB34\uD611 \uC778\uD130\uB799\uD2F0\uBE0C \uD53D\uC158 \uAC8C\uC784\uC785\uB2C8\uB2E4. \uB2F9\uC2E0\uC758 \uC120\uD0DD, \uB2A5\uB825\uCE58, \uC131\uD5A5\uC5D0 \uB530\uB77C \uC774\uC57C\uAE30\uAC00 \uC2E4\uC2DC\uAC04\uC73C\uB85C \uBCC0\uD654\uD569\uB2C8\uB2E4. "),i()(),o(8,"div",177)(9,"h3"),c(10,"\uB2A5\uB825\uCE58 \uC124\uBA85"),i(),o(11,"ul")(12,"li")(13,"strong"),c(14,"\uADFC\uB825:"),i(),c(15," \uBB3C\uB9AC\uC801 \uD310\uC815, \uBB34\uAC70\uC6B4 \uBB34\uAE30 \uC0AC\uC6A9"),i(),o(16,"li")(17,"strong"),c(18,"\uBBFC\uCCA9:"),i(),c(19," \uD68C\uD53C, \uC7A0\uC785, \uACBD\uACF5, \uC554\uAE30 \uD310\uC815"),i(),o(20,"li")(21,"strong"),c(22,"\uB0B4\uACF5:"),i(),c(23," \uBB34\uACF5 \uC704\uB825, \uB0B4\uACF5 \uAC10\uC9C0, \uD68C\uBCF5 \uC18D\uB3C4"),i(),o(24,"li")(25,"strong"),c(26,"\uD1B5\uCC30:"),i(),c(27," \uB2E8\uC11C \uBC1C\uACAC, \uC758\uB3C4 \uAC04\uD30C, \uD568\uC815 \uBC1C\uACAC"),i()()(),o(28,"div",177)(29,"h3"),c(30,"\uC131\uD5A5 \uC2DC\uC2A4\uD15C"),i(),o(31,"p"),c(32," \uB2F9\uC2E0\uC758 \uD589\uB3D9\uC5D0 \uB530\uB77C \uC131\uD5A5\uC774 \uBCC0\uD654\uD569\uB2C8\uB2E4."),S(33,"br"),o(34,"span",178),c(35,"\uC815\uB3C4"),i(),c(36," (-100 ~ -20) / "),o(37,"span",179),c(38,"\uC911\uB9BD"),i(),c(39," (-19 ~ 19) / "),o(40,"span",180),c(41,"\uC0AC\uB3C4"),i(),c(42," (20 ~ 100) "),i(),o(43,"p"),c(44," \uC131\uD5A5\uC740 NPC\uC758 \uBC18\uC751, \uC120\uD0DD\uC9C0, \uD2B9\uC218 \uC774\uBCA4\uD2B8 \uBC1C\uB3D9\uC5D0 \uC601\uD5A5\uC744 \uC90D\uB2C8\uB2E4. "),i()(),o(45,"div",177)(46,"h3"),c(47,"\uC870\uC791 \uBC29\uBC95"),i(),o(48,"ul")(49,"li"),c(50,"\uC22B\uC790 \uBC84\uD2BC \uB610\uB294 \uD074\uB9AD\uC73C\uB85C \uC120\uD0DD\uC9C0\uB97C \uC120\uD0DD\uD569\uB2C8\uB2E4."),i(),o(51,"li"),c(52,"[\uC870\uAC74]\uC774 \uD45C\uC2DC\uB41C \uC120\uD0DD\uC9C0\uB294 \uD2B9\uC815 \uC870\uAC74\uC774 \uD544\uC694\uD569\uB2C8\uB2E4."),i(),o(53,"li"),c(54,"\uC870\uAC74 \uBBF8\uB2EC \uC2DC \uC120\uD0DD\uC9C0\uAC00 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4."),i(),o(55,"li"),c(56,"\uD310\uC815\uC774 \uD544\uC694\uD55C \uC120\uD0DD\uC9C0\uB294 \uB2A5\uB825\uCE58\uB85C \uC131\uACF5/\uC2E4\uD328\uAC00 \uACB0\uC815\uB429\uB2C8\uB2E4."),i()()(),o(57,"div",177)(58,"h3"),c(59,"\uB3D9\uC801 \uC0C1\uD669 \uC2DC\uC2A4\uD15C"),i(),o(60,"p"),c(61," \uD2B9\uC815 \uC870\uAC74(\uC7A5\uC18C, \uC2DC\uAC04, \uB2A5\uB825\uCE58, \uC544\uC774\uD15C \uB4F1)\uC774 \uCDA9\uC871\uB418\uBA74 \uBA54\uC778 \uC2A4\uD1A0\uB9AC\uC640 \uBCC4\uAC1C\uB85C \uD2B9\uC218 \uC774\uBCA4\uD2B8\uAC00 \uC790\uB3D9\uC73C\uB85C \uBC1C\uC0DD\uD569\uB2C8\uB2E4. "),i(),o(62,"p"),c(63," \uAE30\uC5F0, \uC5F0\uC560, \uB77C\uC774\uBC8C\uACFC\uC758 \uC870\uC6B0 \uB4F1 \uB2E4\uC591\uD55C \uC0C1\uD669\uC744 \uACBD\uD5D8\uD558\uC138\uC694. "),i()()())}function Mp(r,t){if(r&1&&(o(0,"div",107),b(1,ip,105,30,"div",108)(2,hp,28,8,"div",109)(3,Pp,64,0,"div",110),i()),r&2){let e=d();l(),p("ngIf",e.showCharacterSheet&&e.player),l(),p("ngIf",e.showInventory&&e.player),l(),p("ngIf",e.showHelp)}}var At=class r{destroy$=new Qe;sceneService=H(It);situationService=H(Et);notification=H(te);equipmentService=H(Le);debugLogger=H(Ce);dungeonGenerator=H(Me);dungeonService=H(Fe);gameStorage=H(ze);modalService=H(Re);cdr=H(at);modalState=null;isModalOpen=!1;gameState=null;player=null;currentScene=null;availableChoices=[];inBattle=!1;battleState=null;showSkillMenu=!1;autoBattleInterval;showInventory=!1;showCharacterSheet=!1;showHelp=!1;gameLog=[];maxLogLines=100;autoProgressTimer;isAutoProgressing=!1;autoProgressCountdown=0;availableNPCs=[];currentLocation="start_village";currentTimeOfDay="morning";ngOnInit(){this.inBattle=!1,this.battleState=null,this.showSkillMenu=!1,this.showDungeonExplorer=!1,this.currentDungeon=null,this.currentDungeonRoom=null,this.initializeGame(),this.setupKeyboardListeners(),this.subscribeToModal()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.clearAutoProgress()}subscribeToModal(){this.modalService.modal$.pipe(on(this.destroy$)).subscribe(t=>{this.isModalOpen=t.isOpen,this.modalState=t.config,this.cdr.detectChanges()})}onModalConfirm(){this.modalState?.onConfirm&&this.modalState.onConfirm(),this.modalService.close()}onModalCancel(){this.modalState?.onCancel&&this.modalState.onCancel(),this.modalService.close()}onModalClose(){this.modalService.close()}setupKeyboardListeners(){document.addEventListener("keydown",t=>{t.code==="Space"&&!this.inBattle&&(t.preventDefault(),this.handleSpaceKey())})}initializeGame(){return O(this,null,function*(){this.loadChapter1Scenes(),this.loadChapter1NPCs(),this.loadAdditionalSituations(),(yield this.checkAndLoadSavedGame())||this.startNewGameInternal()})}checkAndLoadSavedGame(){return O(this,null,function*(){try{let t=yield this.gameStorage.loadGame("slot_1");if(t){this.inBattle=!1,this.battleState=null,this.showSkillMenu=!1;let e=t.playerCharacter;return this.player=I(k({},e),{flags:new Set(e.flags||[]),relationships:new Map(e.relationships||[])}),this.player?(this.gameState={gameId:"wuxia_rpg",currentChapter:t.currentChapter,chapterProgress:0,player:this.player,currentSceneId:"",visitedScenes:[],completedSituations:[],activeSituations:[],currentObjective:"",completedObjectives:[],playTime:0,saveDate:new Date(t.saveDate)},t.dungeonProgress&&t.dungeonProgress.isInDungeon?(this.currentDungeon=t.dungeonProgress.currentDungeon,this.currentDungeonRoom=t.dungeonProgress.currentRoom,this.showDungeonExplorer=!1,this.inBattle=!1,this.battleState=null,this.showSkillMenu=!1,this.addLog("\u{1F3F0} [\uB358\uC804 \uB370\uC774\uD130 \uBCF5\uC6D0\uB428]"),this.addLog("\u26A0\uFE0F [\uC804\uD22C \uBC29\uC9C0\uB97C \uC704\uD574 \uB358\uC804 \uD654\uBA74\uC740 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4]"),this.addLog("\u{1F4A1} [\uB358\uC804 \uC785\uC7A5 \uBC84\uD2BC\uC744 \uB20C\uB7EC \uB2E4\uC2DC \uC785\uC7A5\uD558\uC138\uC694]")):this.loadScene("scene_start"),this.addLog("=== \uBB35\uD5A5\uC9C0\uC5F0 (\u58A8\u9999\u4E4B\u7DE3) ==="),this.addLog("\u{1F4C2} [\uC800\uC7A5\uB41C \uAC8C\uC784\uC744 \uBD88\uB7EC\uC654\uC2B5\uB2C8\uB2E4]"),this.addLog(`\uB808\uBCA8: ${this.player.level} | \uACBD\uD5D8\uCE58: ${this.player.experience}/${this.player.experienceToNext}`),this.addLog(`\uC804\uD22C\uB825: ${t.combatPower||0}`),this.addLog(`\uC9C4\uD589\uB3C4: \uCC55\uD130 ${this.gameState.currentChapter}`),this.addLog(""),this.debugLogger.info("WuxiaGame","\uC800\uC7A5\uB41C \uAC8C\uC784 \uC790\uB3D9 \uB85C\uB4DC \uC644\uB8CC"),!0):!1}return!1}catch(t){return this.debugLogger.error("WuxiaGame",`\uC790\uB3D9 \uB85C\uB4DC \uC2E4\uD328: ${t}`),!1}})}startNewGameInternal(){this.debugLogger.info("WuxiaGame","=== \uC0C8 \uAC8C\uC784 \uC2DC\uC791 ==="),this.inBattle=!1,this.battleState=null,this.showSkillMenu=!1,this.debugLogger.info("WuxiaGame",`\uC804\uD22C \uC0C1\uD0DC \uCD08\uAE30\uD654: inBattle=${this.inBattle}`),this.showDungeonExplorer=!1,this.currentDungeon=null,this.currentDungeonRoom=null,this.debugLogger.info("WuxiaGame",`\uB358\uC804 \uC0C1\uD0DC \uCD08\uAE30\uD654: showDungeonExplorer=${this.showDungeonExplorer}`),this.showInventory=!1,this.showCharacterSheet=!1,this.showHelp=!1,this.cdr.detectChanges(),this.player=this.createDefaultPlayer(),this.gameState={gameId:`game_${Date.now()}`,saveDate:new Date,playTime:0,player:this.player,currentSceneId:"scene_start",visitedScenes:[],activeSituations:[],completedSituations:[],currentChapter:1,chapterProgress:0,currentObjective:"\uC0AC\uB77C\uC9C4 \uC0AC\uD615\uC744 \uCC3E\uC544\uB77C",completedObjectives:[]},this.loadScene("scene_start"),this.addLog("=== \uBB35\uD5A5\uC9C0\uC5F0 (\u58A8\u9999\u4E4B\u7DE3) ==="),this.addLog("\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uBB34\uD611 RPG\uC5D0 \uC624\uC2E0 \uAC83\uC744 \uD658\uC601\uD569\uB2C8\uB2E4."),this.addLog(""),this.cdr.detectChanges(),this.debugLogger.info("WuxiaGame",`\uC0C8 \uAC8C\uC784 \uC2DC\uC791 \uC644\uB8CC - inBattle: ${this.inBattle}, showDungeonExplorer: ${this.showDungeonExplorer}`)}createDefaultPlayer(){let t=I(k({},Qt[0]),{isEquipped:!0}),e=I(k({},Qt[1]),{isEquipped:!0}),n=k({},Tt[2]),a=k({},qt[2]);return{name:"\uAC80\uAC1D",level:1,experience:0,experienceToNext:100,stats:{strength:18,dexterity:20,innerPower:15,insight:22},health:100,maxHealth:100,injuries:[],sect:"huashan",personality:"righteous",tendency:{value:-10,label:"\uC815\uD30C",description:"\uC815\uC758\uB85C\uC6B4 \uD611\uAC1D\uC758 \uAE38\uC744 \uAC77\uB294\uB2E4."},learnedSkills:["huashan_basic_sword"],inventory:[t,e,n,a,{id:"silver",name:"\uC740\uC790",type:"misc",rarity:"common",description:"\uAC15\uD638\uC5D0\uC11C \uD1B5\uC6A9\uB418\uB294 \uD654\uD3D0",quantity:100}],equippedItems:{weapon:t.id,armor:e.id},flags:new Set,relationships:new Map}}loadChapter1Scenes(){this.sceneService.registerScenes(Kt),this.addLog(`\u2713 \uCC55\uD130 1 \uC7A5\uBA74 ${Kt.length}\uAC1C \uB85C\uB4DC \uC644\uB8CC`)}loadChapter1NPCs(){this.availableNPCs=Bt,this.addLog(`\u2713 NPC ${Bt.length}\uBA85 \uB85C\uB4DC \uC644\uB8CC`)}loadAdditionalSituations(){Xt.forEach(t=>{this.situationService.registerTemplate(t)}),this.addLog(`\u2713 \uC0C1\uD669 \uD15C\uD50C\uB9BF ${Xt.length}\uAC1C \uB4F1\uB85D \uC644\uB8CC`)}loadSampleScenes(){let t=[{id:"scene_start",title:"\uD63C\uD0C1\uD55C \uAC15\uD638",narrativeText:["\uD654\uC0B0\uD30C\uC758 \uB9C9\uB0B4 \uC81C\uC790\uC778 \uB2F9\uC2E0\uC740 \uC2EC\uAC01\uD55C \uC18C\uC2DD\uC744 \uB4E4\uC5C8\uB2E4.","\uAC00\uC7A5 \uC544\uB07C\uB358 \uC0AC\uD615 `\uCCAD\uC6B4`\uC774 \uD751\uD48D\uCC44\uB85C \uB5A0\uB09C \uB4A4 \uC18C\uC2DD\uC774 \uB04A\uACBC\uB2E4\uB294 \uAC83\uC774\uB2E4.","","\uC7A5\uBB38\uC778\uAED8\uC11C\uB294 \uB2F9\uC2E0\uC744 \uBD80\uB974\uC168\uB2E4.",'"\uB124\uAC00 \uAC00\uAC70\uB77C. \uC0AC\uD615\uC744 \uCC3E\uC544\uC624\uB108\uB77C. \uADF8\uB7EC\uB098... \uBB34\uB9AC\uD558\uC9C0\uB294 \uB9D0\uAC70\uB77C."',"","\uB099\uC591\uC73C\uB85C \uAC00\uB294 \uAE38\uBAA9, \uB2F9\uC2E0\uC740 \uD55C \uC8FC\uB9C9 \uC55E\uC5D0 \uBA48\uCDB0 \uC130\uB2E4."],choices:[{id:"choice_enter_inn",text:"\uC8FC\uB9C9\uC5D0 \uB4E4\uC5B4\uAC00 \uC815\uBCF4\uB97C \uC5BB\uB294\uB2E4.",nextSceneId:"scene_inn_inside"},{id:"choice_continue",text:"\uC11C\uB450\uB978\uB2E4. \uACE7\uC7A5 \uD751\uD48D\uCC44\uB85C \uD5A5\uD55C\uB2E4.",nextSceneId:"scene_forest_path",conditions:[{type:"stat",param:"dexterity",operator:">=",value:15,displayText:"[\uBBFC\uCCA9 15 \uC774\uC0C1]"}]},{id:"choice_meditate",text:"\uADFC\uCC98 \uBC14\uC704\uC5D0 \uC549\uC544 \uB0B4\uACF5\uC744 \uC6B4\uC6A9\uD55C\uB2E4.",nextSceneId:"scene_meditation",consequences:[{type:"stat_change",param:"innerPower",value:2,description:"\uB0B4\uACF5 +2"}]}],tags:["chapter_1","main_quest"],location:"road_to_luoyang",timeOfDay:"afternoon"},{id:"scene_inn_inside",title:"\uC740\uC740\uD55C \uC220 \uB0C4\uC0C8",narrativeText:["\uC8FC\uB9C9 \uC548\uC740 \uC2DC\uB04C\uBC85\uC801\uD558\uB2E4.","\uD55C\uCABD \uAD6C\uC11D\uC5D0\uC11C \uC218\uC0C1\uD55C \uC0AC\uB0B4\uB4E4\uC774 \uC6C5\uC131\uAC70\uB9AC\uACE0 \uC788\uB2E4.",'\uC8FC\uBAA8\uAC00 \uB2E4\uAC00\uC640 \uBB3B\uB294\uB2E4. "\uBB34\uC5C7\uC744 \uB4DC\uC2DC\uACA0\uC2B5\uB2C8\uAE4C, \uC18C\uD611?"'],choices:[{id:"choice_order_wine",text:"\uC220 \uD55C \uC794\uC744 \uC2DC\uD0A8\uB2E4.",nextSceneId:"scene_inn_wine",consequences:[{type:"item_lose",param:"gold",value:5,description:"\uAE08\uD654 -5"}]},{id:"choice_ask_info",text:"[\uD1B5\uCC30 20 \uC774\uC0C1] \uC8FC\uBAA8\uC5D0\uAC8C \uD751\uD48D\uCC44\uC5D0 \uB300\uD574 \uC740\uBC00\uD788 \uBB3C\uC5B4\uBCF8\uB2E4.",nextSceneId:"scene_inn_information",conditions:[{type:"stat",param:"insight",operator:">=",value:20,displayText:"[\uD1B5\uCC30 20 \uC774\uC0C1]"}]},{id:"choice_approach_thugs",text:"\uC218\uC0C1\uD55C \uC0AC\uB0B4\uB4E4\uC5D0\uAC8C \uB2E4\uAC00\uAC04\uB2E4.",nextSceneId:"scene_inn_confrontation",judgment:{stat:"insight",difficulty:25,successSceneId:"scene_inn_info_success",failureSceneId:"scene_inn_fight"}}],location:"inn",timeOfDay:"afternoon"},{id:"scene_meditation",title:"\uACE0\uC694\uD55C \uC218\uB828",narrativeText:["\uBC14\uC704\uC5D0 \uC549\uC544 \uC228\uC744 \uAC00\uB2E4\uB4EC\uB294\uB2E4.","\uB2E8\uC804\uC5D0 \uAE30\uC6B4\uC774 \uBAA8\uC774\uB294 \uAC83\uC744 \uB290\uB080\uB2E4.","\uC7A0\uC2DC \uD6C4, \uBA38\uB9BF\uC18D\uC774 \uD55C\uACB0 \uB9D1\uC544\uC9C4 \uAE30\uBD84\uC774\uB2E4.","","[\uB0B4\uACF5 +2]"],choices:[{id:"choice_continue_meditation",text:"\uC870\uAE08 \uB354 \uC218\uB828\uD55C\uB2E4.",nextSceneId:"scene_meditation_deep",conditions:[{type:"stat",param:"innerPower",operator:">=",value:12,displayText:"[\uB0B4\uACF5 12 \uC774\uC0C1]"}]},{id:"choice_stop",text:"\uADF8\uB9CC\uD558\uACE0 \uAE38\uC744 \uB5A0\uB09C\uB2E4.",nextSceneId:"scene_forest_path"}],location:"road_to_luoyang",timeOfDay:"evening"}];this.sceneService.registerScenes(t)}loadSampleNPCs(){this.availableNPCs=[{id:"npc_choseon",name:"\uCD08\uC120",title:"\uB099\uC591 \uC81C\uC77C\uBBF8\uC778",sect:"none",personality:["gentle","mysterious"],state:"idle",currentLocation:"soweol_bridge",initialRelationship:0,dialogues:[{dialogueId:"dia_1",text:"...\uAC10\uC0AC\uD569\uB2C8\uB2E4.",priority:1}],tags:["potential_romance","important"]}]}loadScene(t){let e=this.sceneService.loadScene(t);if(!e){this.addLog(`[\uC624\uB958] \uC7A5\uBA74\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4: ${t}`);return}this.currentScene=e,this.gameState&&!this.gameState.visitedScenes.includes(t)&&this.gameState.visitedScenes.push(t),e.location&&(this.currentLocation=e.location),e.timeOfDay&&(this.currentTimeOfDay=e.timeOfDay),this.checkSituationTriggers(),this.displayScene(e),this.player&&(this.availableChoices=this.sceneService.evaluateChoices(e,this.player),this.debugLogger.info("WuxiaGame",`[\uC7A5\uBA74: ${e.id}] \uC120\uD0DD\uC9C0 \uAC1C\uC218: ${this.availableChoices.length}`),this.availableChoices.forEach((n,a)=>{this.debugLogger.info("WuxiaGame",`  ${a+1}. ${n.text} (disabled: ${n.isDisabled})`)})),this.checkAutoProgress()}checkAutoProgress(){if(!this.currentScene)return;let t=this.currentScene,e=t.type||"decision";if((t.autoProgress??(e==="narrative"||e==="cutscene"))&&t.choices.length===1&&t.choices[0].nextSceneId){let a=t.autoDelay??2e3;this.startAutoProgress(t.choices[0],a)}}startAutoProgress(t,e){this.clearAutoProgress(),this.isAutoProgressing=!0,this.autoProgressCountdown=e/1e3,this.debugLogger.info("WuxiaGame",`\uC790\uB3D9 \uC9C4\uD589 \uC2DC\uC791: ${e}ms \uD6C4 \uB2E4\uC74C \uC7A5\uBA74\uC73C\uB85C`);let n=setInterval(()=>{this.autoProgressCountdown-=.1,this.autoProgressCountdown<=0&&clearInterval(n)},100);this.autoProgressTimer=setTimeout(()=>{clearInterval(n),this.isAutoProgressing=!1,this.selectChoice(t)},e)}clearAutoProgress(){this.autoProgressTimer&&(clearTimeout(this.autoProgressTimer),this.autoProgressTimer=null),this.isAutoProgressing=!1,this.autoProgressCountdown=0}handleSpaceKey(){if(this.isAutoProgressing){this.clearAutoProgress(),this.currentScene&&this.currentScene.choices.length===1&&this.selectChoice(this.currentScene.choices[0]);return}this.availableChoices.length===1&&!this.availableChoices[0].isDisabled&&this.selectChoice(this.availableChoices[0])}displayScene(t){if(this.player&&this.player.health<=10&&t.id!=="scene_hospital"&&!t.id.startsWith("scene_hospital")){this.addLog(""),this.addLog("\u26A0\uFE0F [\uC704\uAE09 \uC0C1\uD669]"),this.addLog("\uC0DD\uBA85\uB825\uC774 \uC704\uD5D8 \uC218\uC900\uC785\uB2C8\uB2E4!"),this.addLog("\u{1F3E5} \uAE34\uAE09 \uCE58\uB8CC\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4..."),this.addLog(""),setTimeout(()=>{this.loadScene("scene_hospital")},2e3);return}this.addLog(""),this.addLog("\u2500".repeat(50)),t.title&&(this.addLog(`\u3010 ${t.title} \u3011`),this.addLog(""));for(let e of t.narrativeText)this.addLog(e);this.addLog(""),this.addLog("\u2500".repeat(50))}selectChoice(t){if(t.isDisabled){this.notification.show(t.disabledReason||"\uC870\uAC74\uC744 \uB9CC\uC871\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",3e3);return}if(this.addLog(""),this.addLog(`\u25B6 ${t.text}`),this.addLog(""),t.nextSceneId==="dungeon_entry_point"){this.enterDungeon();return}if(t.consequences&&this.player){let e=t.consequences.find(a=>a.type==="battle_start");if(e&&e.value){let a=e.value;this.debugLogger.info("WuxiaGame",`\uC804\uD22C \uC2DC\uC791 \uC694\uCCAD: \uC801 ${a.enemies.length}\uBA85`),this.startBattle(a.enemies,a.onVictory,a.onDefeat);return}let n=t.consequences.filter(a=>a.type!=="battle_start");n.length>0&&this.sceneService.applyConsequences(n,this.player).forEach(s=>this.addLog(`  ${s}`))}if(t.judgment&&this.player){let e=this.sceneService.executeJudgment(t.judgment,this.player);this.addLog(e.resultText),e.isCritical?(this.addLog("\u2501".repeat(50)),this.gainExperience(20)):e.success&&this.gainExperience(10),this.loadScene(e.nextSceneId);return}t.nextSceneId&&this.loadScene(t.nextSceneId)}checkSituationTriggers(){if(!this.player)return;let t=this.situationService.checkTriggers(this.player,this.currentLocation,this.currentTimeOfDay,this.availableNPCs);if(t.length>0){let e=t[0];this.addLog(""),this.addLog("[\uD2B9\uC218 \uC0C1\uD669 \uBC1C\uB3D9!]"),this.startSituation(e)}}startSituation(t){if(!this.player)return;let e=this.situationService.startSituation(t,this.player,this.availableNPCs);if(e&&this.gameState){this.gameState.activeSituations.push(e);let n=this.situationService.getTemplate(t);if(n&&n.stages&&n.stages.length>0){let a=n.stages[0].scene;this.sceneService.registerScene(a),this.loadScene(a.id)}}}addLog(t){this.gameLog.push(t),this.gameLog.length>this.maxLogLines&&(this.gameLog=this.gameLog.slice(-this.maxLogLines))}toggleInventory(){this.showInventory=!this.showInventory,this.showCharacterSheet=!1,this.showHelp=!1}startNewGame(){this.modalService.showConfirm("\uC0C8 \uAC8C\uC784\uC744 \uC2DC\uC791\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?<br>\uD604\uC7AC \uC9C4\uD589 \uC911\uC778 \uAC8C\uC784\uC740 \uC800\uC7A5\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",()=>{this.gameLog=[],this.inBattle=!1,this.battleState=null,this.showSkillMenu=!1,this.showDungeonExplorer=!1,this.currentDungeon=null,this.currentDungeonRoom=null,this.showInventory=!1,this.showCharacterSheet=!1,this.showHelp=!1,this.startNewGameInternal(),this.modalService.showSuccess("\uC0C8 \uAC8C\uC784\uC774 \uC2DC\uC791\uB418\uC5C8\uC2B5\uB2C8\uB2E4.","\uAC8C\uC784 \uC2DC\uC791")},"\uC0C8 \uAC8C\uC784","\uC2DC\uC791","\uCDE8\uC18C")}toggleCharacterSheet(){this.showCharacterSheet=!this.showCharacterSheet,this.showInventory=!1,this.showHelp=!1}toggleHelp(){this.showHelp=!this.showHelp,this.showInventory=!1,this.showCharacterSheet=!1}saveGame(){return O(this,null,function*(){if(!this.gameState||!this.player){this.modalService.showWarning("\uC800\uC7A5\uD560 \uAC8C\uC784 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(this.inBattle){this.modalService.showWarning("\uC804\uD22C \uC911\uC5D0\uB294 \uC800\uC7A5\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.<br>\uC804\uD22C\uB97C \uC885\uB8CC\uD55C \uD6C4 \uC800\uC7A5\uD558\uC138\uC694.","\uC800\uC7A5 \uBD88\uAC00"),this.addLog("\u26A0\uFE0F [\uC804\uD22C \uC911\uC5D0\uB294 \uC800\uC7A5\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4]");return}try{this.gameState.saveDate=new Date;let e={id:"slot_1",novelId:"wuxia_rpg",novelTitle:"\uBB35\uD5A5\uC9C0\uC5F0",novelTemplate:null,playerCharacter:I(k({},this.player),{flags:Array.from(this.player.flags),relationships:Array.from(this.player.relationships.entries())}),storyBlocks:[],currentPath:[],choices:[],gameStarted:!0,gold:0,inventory:this.player.inventory||[],completedQuests:[],currentChapter:this.gameState.currentChapter,saveDate:this.gameState.saveDate,combatPower:this.getTotalCombatPower(),experience:this.player.experience,experienceToNext:this.player.experienceToNext,level:this.player.level,equippedItems:this.player.equippedItems,stats:this.player.stats,health:this.player.health,maxHealth:this.player.maxHealth,dungeonProgress:{currentDungeon:this.currentDungeon,currentRoom:this.currentDungeonRoom,currentFloor:this.currentDungeon?.currentFloor||0,isInDungeon:this.showDungeonExplorer}};yield this.gameStorage.saveGame(e),this.modalService.showSuccess("\uAC8C\uC784\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.","\uC800\uC7A5 \uC644\uB8CC"),this.addLog("\u{1F4BE} [\uAC8C\uC784 \uC800\uC7A5\uB428]"),this.debugLogger.info("WuxiaGame","\uAC8C\uC784 \uC800\uC7A5 \uC644\uB8CC (IndexedDB)")}catch(t){this.debugLogger.error("WuxiaGame",`\uC800\uC7A5 \uC2E4\uD328: ${t}`),this.modalService.showError("\uAC8C\uC784 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.","\uC800\uC7A5 \uC2E4\uD328")}})}loadGame(){return O(this,null,function*(){try{let t=yield this.gameStorage.loadGame("slot_1");if(!t){this.modalService.showInfo("\uC800\uC7A5\uB41C \uAC8C\uC784\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.inBattle=!1,this.battleState=null,this.showSkillMenu=!1;let e=t.playerCharacter;if(this.player=I(k({},e),{flags:new Set(e.flags||[]),relationships:new Map(e.relationships||[])}),!this.player){this.modalService.showError("\uD50C\uB808\uC774\uC5B4 \uB370\uC774\uD130 \uBCF5\uC6D0\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.","\uBCF5\uC6D0 \uC2E4\uD328");return}this.gameState={gameId:"wuxia_rpg",currentChapter:t.currentChapter,chapterProgress:0,player:this.player,currentSceneId:"",visitedScenes:[],completedSituations:[],activeSituations:[],currentObjective:"",completedObjectives:[],playTime:0,saveDate:new Date(t.saveDate)},t.dungeonProgress&&t.dungeonProgress.isInDungeon&&(this.currentDungeon=t.dungeonProgress.currentDungeon,this.currentDungeonRoom=t.dungeonProgress.currentRoom,this.showDungeonExplorer=!1,this.inBattle=!1,this.battleState=null,this.showSkillMenu=!1,this.addLog("\u{1F3F0} [\uB358\uC804 \uB370\uC774\uD130 \uBCF5\uC6D0]"),this.addLog("\u26A0\uFE0F [\uC804\uD22C \uBC29\uC9C0\uB97C \uC704\uD574 \uB358\uC804 \uD654\uBA74\uC740 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4]"),this.addLog("\u{1F4A1} [\uB358\uC804 \uC785\uC7A5 \uBC84\uD2BC\uC744 \uB20C\uB7EC \uB2E4\uC2DC \uC785\uC7A5\uD558\uC138\uC694]")),this.currentDungeon||this.loadScene("scene_start"),this.modalService.showSuccess("\uAC8C\uC784\uC744 \uBD88\uB7EC\uC654\uC2B5\uB2C8\uB2E4.","\uBD88\uB7EC\uC624\uAE30 \uC644\uB8CC"),this.addLog("\u{1F4C2} [\uAC8C\uC784 \uBD88\uB7EC\uC634]"),this.addLog(`\uB808\uBCA8: ${this.player.level} | \uACBD\uD5D8\uCE58: ${this.player.experience}/${this.player.experienceToNext}`),this.addLog(`\uC804\uD22C\uB825: ${t.combatPower||0}`),this.addLog(`\uC9C4\uD589\uB3C4: \uCC55\uD130 ${this.gameState.currentChapter}`),this.debugLogger.info("WuxiaGame","\uAC8C\uC784 \uB85C\uB4DC \uC644\uB8CC (IndexedDB)")}catch(t){this.debugLogger.error("WuxiaGame",`\uB85C\uB4DC \uC2E4\uD328: ${t}`),this.modalService.showError("\uAC8C\uC784\uC744 \uBD88\uB7EC\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.","\uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328")}})}startBattle(t,e,n){if(this.debugLogger.info("WuxiaGame",`\uC804\uD22C \uC2DC\uC791 \uD568\uC218 \uD638\uCD9C\uB428 - \uC801: ${t.join(", ")}`),!this.player||!this.gameState){this.debugLogger.error("WuxiaGame","\uD50C\uB808\uC774\uC5B4 \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let a=[];for(let P of t){let x=Bt.find(w=>w.id===P);if(x){let w=Oe.convertNPCToBattle(x);a.push(w),this.debugLogger.info("WuxiaGame",`\uC801 \uCD94\uAC00: ${x.name} (ID: ${P})`)}else this.debugLogger.error("WuxiaGame",`\uC801\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC74C: ${P}`)}if(a.length===0){this.debugLogger.error("WuxiaGame","\uC801\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let s=Oe.convertPlayerToBattle(this.player,this.equipmentService);this.debugLogger.info("WuxiaGame",`\uD50C\uB808\uC774\uC5B4 \uC804\uD22C \uC2A4\uD0EF - \uACF5\uACA9: ${s.attack}, \uBC29\uC5B4: ${s.defense}, HP: ${s.maxHp}`),this.battleState={player:s,enemies:a,currentTurn:"player",targetedEnemyIndex:0,logs:[],isAutoBattle:!1,ended:!1,victory:!1,onVictoryScene:e,onDefeatScene:n},this.inBattle=!0,this.debugLogger.info("WuxiaGame",`\uC804\uD22C \uC0C1\uD0DC \uCD08\uAE30\uD654 \uC644\uB8CC - inBattle: ${this.inBattle}`),this.addBattleLog("\u2694\uFE0F \uC804\uD22C \uC2DC\uC791!"),this.addBattleLog("\u2501".repeat(40)),this.addLog("\u2694\uFE0F [\uC804\uD22C \uC2DC\uC791]");let m=this.getTotalCombatPower();this.addBattleLog(`\u26A1 \uB098\uC758 \uC804\uD22C\uB825: ${m}`);let C=this.equipmentService.calculateEquipmentBonusWuxia(this.player);(C.attack>0||C.defense>0)&&this.addBattleLog(`\u{1F6E1}\uFE0F \uC7A5\uBE44 \uBCF4\uB108\uC2A4: \uACF5\uACA9 +${C.attack}, \uBC29\uC5B4 +${C.defense}`),C.critChance>0&&this.addBattleLog(`\u{1F4A5} \uCE58\uBA85\uD0C0 \uD655\uB960: ${C.critChance}%`),C.evasion>0&&this.addBattleLog(`\u2728 \uD68C\uD53C \uD655\uB960: ${C.evasion}%`),C.lifeSteal>0&&this.addBattleLog(`\u{1F49A} \uC0DD\uBA85\uB825 \uD761\uC218: ${C.lifeSteal}%`),this.addBattleLog("\u2501".repeat(40))}startDungeonBattle(t){if(!this.player)return;let e={id:t.id||`monster_${Date.now()}`,name:t.name,type:"enemy",maxHp:t.maxHp||t.hp,currentHp:t.currentHp||t.hp,attack:t.attack,defense:t.defense,agility:t.agility||5,skills:t.skills||[],items:[],currentMp:0,maxMp:0},n=Oe.convertPlayerToBattle(this.player,this.equipmentService);this.battleState={player:n,enemies:[e],currentTurn:"player",targetedEnemyIndex:0,logs:[],isAutoBattle:!1,ended:!1,victory:!1,onVictoryScene:"",onDefeatScene:""},this.inBattle=!0,this.addBattleLog("\u2694\uFE0F \uC804\uD22C \uC2DC\uC791!"),this.addBattleLog("\u2501".repeat(40));let a=this.getTotalCombatPower();this.addBattleLog(`\u26A1 \uB098\uC758 \uC804\uD22C\uB825: ${a}`);let s=this.equipmentService.calculateEquipmentBonusWuxia(this.player);(s.attack>0||s.defense>0)&&this.addBattleLog(`\u{1F6E1}\uFE0F \uC7A5\uBE44 \uBCF4\uB108\uC2A4: \uACF5\uACA9 +${s.attack}, \uBC29\uC5B4 +${s.defense}`),s.critChance>0&&this.addBattleLog(`\u{1F4A5} \uCE58\uBA85\uD0C0 \uD655\uB960: ${s.critChance}%`),s.evasion>0&&this.addBattleLog(`\u2728 \uD68C\uD53C \uD655\uB960: ${s.evasion}%`),s.lifeSteal>0&&this.addBattleLog(`\u{1F49A} \uC0DD\uBA85\uB825 \uD761\uC218: ${s.lifeSteal}%`),this.addBattleLog("\u2501".repeat(40))}addBattleLog(t){this.battleState&&(this.battleState.logs.push({message:t}),this.battleState.logs.length>50&&this.battleState.logs.shift())}playerBattleAttack(){if(!this.battleState||this.battleState.currentTurn!=="player")return;let t=this.battleState.enemies[this.battleState.targetedEnemyIndex];if(!t||t.currentHp<=0){this.findNextAliveEnemy();return}let e=this.battleState.player.attack-Math.floor(t.defense*.5),n=e*.2,a=Math.random()*n*2-n,s=Math.max(1,Math.floor(e+a));t.currentHp=Math.max(0,t.currentHp-s);let m=this.getEquipmentBonus().critChance||0;if(Math.random()*100<m){let P=Math.floor(s*.5);t.currentHp=Math.max(0,t.currentHp-P),this.addBattleLog(`\u{1F4A5} ${this.battleState.player.name}\uC758 \uCE58\uBA85\uD0C0! ${t.name}\uC5D0\uAC8C ${s+P} \uB370\uBBF8\uC9C0!`)}else this.addBattleLog(`${this.battleState.player.name}\uC758 \uACF5\uACA9! ${t.name}\uC5D0\uAC8C ${s} \uB370\uBBF8\uC9C0!`);t.currentHp<=0&&(this.addBattleLog(`${t.name}\uC744(\uB97C) \uC4F0\uB7EC\uB728\uB838\uB2E4!`),this.findNextAliveEnemy()),this.cdr.detectChanges(),this.checkBattleEnd(),this.battleState.ended||(this.battleState.currentTurn="enemy",setTimeout(()=>this.enemyTurn(),800))}playerUseSkill(t){if(!(!this.battleState||this.battleState.currentTurn!=="player")){if(t.mpCost>this.battleState.player.currentMp){this.addBattleLog("MP\uAC00 \uBD80\uC871\uD569\uB2C8\uB2E4!");return}if(this.battleState.player.currentMp-=t.mpCost,this.showSkillMenu=!1,t.type==="heal"){let e=t.damage||30;this.battleState.player.currentHp=Math.min(this.battleState.player.maxHp,this.battleState.player.currentHp+e),this.addBattleLog(`${this.battleState.player.name}\uC774(\uAC00) ${t.name} \uC0AC\uC6A9! HP ${e} \uD68C\uBCF5!`)}else{let e=this.battleState.enemies[this.battleState.targetedEnemyIndex];if(e&&e.currentHp>0){let n=t.damage+Math.floor(this.battleState.player.attack/2);e.currentHp=Math.max(0,e.currentHp-n),this.addBattleLog(`${this.battleState.player.name}\uC774(\uAC00) ${t.name} \uC0AC\uC6A9! ${e.name}\uC5D0\uAC8C ${n} \uB370\uBBF8\uC9C0!`),e.currentHp<=0&&(this.addBattleLog(`${e.name}\uC744(\uB97C) \uC4F0\uB7EC\uB728\uB838\uB2E4!`),this.findNextAliveEnemy())}}this.cdr.detectChanges(),this.checkBattleEnd(),this.battleState.ended||(this.battleState.currentTurn="enemy",setTimeout(()=>this.enemyTurn(),800))}}enemyTurn(){if(!this.battleState)return;let t=this.battleState.enemies.filter(x=>x.currentHp>0);if(t.length===0)return;let e=t[Math.floor(Math.random()*t.length)],n=e.attack-Math.floor(this.battleState.player.defense*.5),a=Math.max(5,n*.2),s=Math.random()*a*2-a,m=Math.max(1,Math.floor(n+s));this.battleState.player.currentHp=Math.max(0,this.battleState.player.currentHp-m);let C=this.getEquipmentBonus().evasion||0;if(Math.random()*100<C)this.addBattleLog(`\u2728 ${this.battleState.player.name}\uC774(\uAC00) ${e.name}\uC758 \uACF5\uACA9\uC744 \uD68C\uD53C\uD588\uB2E4!`);else{this.addBattleLog(`${e.name}\uC758 \uACF5\uACA9! ${this.battleState.player.name}\uC5D0\uAC8C ${m} \uB370\uBBF8\uC9C0!`);let x=this.getEquipmentBonus().lifeSteal||0;if(x>0&&m>0){let w=Math.floor(m*(x/100));w>0&&(this.battleState.player.currentHp=Math.min(this.battleState.player.maxHp,this.battleState.player.currentHp+w),this.addBattleLog(`\u{1F49A} \uC0DD\uBA85\uB825 \uD761\uC218\uB85C ${w} HP \uD68C\uBCF5!`))}}this.cdr.detectChanges(),this.checkBattleEnd(),this.battleState.ended||(this.battleState.currentTurn="player",this.battleState.isAutoBattle&&setTimeout(()=>this.autoPlayerAction(),600))}checkBattleEnd(){if(!this.battleState)return;if(this.battleState.enemies.filter(e=>e.currentHp>0).length===0){this.battleState.ended=!0,this.battleState.victory=!0,this.addBattleLog("\u{1F389} \uC2B9\uB9AC!"),this.cdr.detectChanges(),setTimeout(()=>this.endBattle(),1500);return}if(this.battleState.player.currentHp<=0){this.battleState.ended=!0,this.battleState.victory=!1,this.addBattleLog("\u{1F480} \uD328\uBC30..."),this.cdr.detectChanges(),setTimeout(()=>this.endBattle(),1500);return}}startAutoBattle(){this.battleState&&(this.battleState.isAutoBattle=!0,this.addBattleLog("\u{1F916} \uC790\uB3D9 \uC804\uD22C \uC2DC\uC791!"),this.battleState.currentTurn==="player"&&setTimeout(()=>this.autoPlayerAction(),600))}stopAutoBattle(){this.battleState&&(this.battleState.isAutoBattle=!1,this.addBattleLog("\u23F8\uFE0F \uC790\uB3D9 \uC804\uD22C \uC911\uB2E8"))}autoPlayerAction(){if(!this.battleState||!this.battleState.isAutoBattle)return;if(this.battleState.player.currentHp/this.battleState.player.maxHp*100<30){let e=this.battleState.player.skills.find(n=>n.type==="heal"&&n.mpCost<=this.battleState.player.currentMp);if(e){this.playerUseSkill(e);return}}if(Math.random()<.5){let e=this.battleState.player.skills.filter(n=>n.type==="attack"&&n.mpCost<=this.battleState.player.currentMp);if(e.length>0){let n=e[Math.floor(Math.random()*e.length)];this.playerUseSkill(n);return}}this.playerBattleAttack()}findNextAliveEnemy(){if(this.battleState){for(let t=0;t<this.battleState.enemies.length;t++)if(this.battleState.enemies[t].currentHp>0){this.battleState.targetedEnemyIndex=t;return}}}toggleSkillMenu(){this.showSkillMenu=!this.showSkillMenu}endBattle(){if(!this.battleState||!this.player)return;let t=this.battleState.victory;if(Oe.applyBattleResult(this.player,this.battleState.player,t),t){this.addLog("\u2694\uFE0F [\uC804\uD22C \uC2B9\uB9AC!]"),this.addLog("\u2501".repeat(40));let e=50,n=this.player.level;this.gainExperience(e),this.player.stats.strength+=1,this.player.stats.innerPower+=1,this.addLog("\u{1F4AA} \uADFC\uB825 +1, \uB0B4\uACF5 +1");let a=this.getTotalCombatPower();this.addLog(`\u26A1 \uD604\uC7AC \uC804\uD22C\uB825: ${a}`),this.player.level>n&&this.addLog(`\u{1F38A} \uB808\uBCA8 ${this.player.level}\uB85C \uC0C1\uC2B9!`),this.addLog("\u2501".repeat(40)),!this.battleState.onVictoryScene&&this.currentDungeonRoom?(this.currentDungeonRoom.isCleared=!0,this.currentDungeon&&(this.currentDungeon.stats.monstersKilled+=this.battleState.enemies.length),this.addLog("\u2705 \uBC29\uC744 \uD074\uB9AC\uC5B4\uD588\uC2B5\uB2C8\uB2E4!"),this.modalService.showSuccess("\uC804\uD22C\uC5D0\uC11C \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!<br>\uBC29\uC744 \uD074\uB9AC\uC5B4\uD588\uC2B5\uB2C8\uB2E4.","\uC804\uD22C \uC2B9\uB9AC")):this.battleState.onVictoryScene&&(this.modalService.showSuccess("\uC804\uD22C\uC5D0\uC11C \uC2B9\uB9AC\uD588\uC2B5\uB2C8\uB2E4!","\uC804\uD22C \uC2B9\uB9AC"),this.loadScene(this.battleState.onVictoryScene))}else this.addLog("\u{1F480} [\uC804\uD22C \uD328\uBC30...]"),this.addLog("\u2501".repeat(40)),!this.battleState.onDefeatScene&&this.currentDungeon?(this.addLog("\u2620\uFE0F [\uB358\uC804\uC5D0\uC11C \uC4F0\uB7EC\uC84C\uC2B5\uB2C8\uB2E4...]"),this.addLog("\uC758\uC2DD\uC774 \uD750\uB824\uC9C0\uBA70 \uC5B4\uB460 \uC18D\uC73C\uB85C \uBE60\uC838\uB4E0\uB2E4..."),this.addLog(""),this.addLog("\u{1F3E5} \uB099\uC591 \uC758\uC6D0\uC73C\uB85C \uAE34\uAE09 \uC774\uC1A1\uB429\uB2C8\uB2E4..."),this.modalService.showWarning("\uB358\uC804\uC5D0\uC11C \uC4F0\uB7EC\uC84C\uC2B5\uB2C8\uB2E4...<br>\uC758\uC6D0\uC73C\uB85C \uC774\uC1A1\uB429\uB2C8\uB2E4.","\uC804\uD22C \uD328\uBC30"),this.player.health=Math.max(1,this.player.health),setTimeout(()=>{this.loadScene("scene_hospital")},1500)):this.battleState.onDefeatScene?(this.addLog("\u2620\uFE0F [\uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...]"),this.addLog("\uC758\uC2DD\uC774 \uD750\uB824\uC9C4\uB2E4..."),this.addLog(""),this.addLog("\u{1F3E5} \uCE58\uB8CC\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4..."),this.player.health=Math.max(1,this.player.health),this.battleState.onDefeatScene==="scene_captured"?(this.modalService.showWarning("\uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...<br>\uC758\uC6D0\uC73C\uB85C \uC774\uC1A1\uB429\uB2C8\uB2E4.","\uC804\uD22C \uD328\uBC30"),setTimeout(()=>{this.loadScene("scene_hospital")},1500)):(this.modalService.showWarning("\uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...","\uC804\uD22C \uD328\uBC30"),this.loadScene(this.battleState.onDefeatScene))):(this.addLog("\u2620\uFE0F [\uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...]"),this.addLog(""),this.addLog("\u{1F3E5} \uC758\uC6D0\uC73C\uB85C \uC774\uC1A1\uB429\uB2C8\uB2E4..."),this.player.health=Math.max(1,this.player.health),this.modalService.showWarning("\uC804\uD22C\uC5D0\uC11C \uD328\uBC30\uD588\uC2B5\uB2C8\uB2E4...<br>\uC758\uC6D0\uC73C\uB85C \uC774\uC1A1\uB429\uB2C8\uB2E4.","\uC804\uD22C \uD328\uBC30"),setTimeout(()=>{this.loadScene("scene_hospital")},1500));this.inBattle=!1,this.battleState=null,this.showSkillMenu=!1,this.saveGame()}jumpToStronghold(){if(!this.player){this.notification.show("\uBA3C\uC800 \uAC8C\uC784\uC744 \uC2DC\uC791\uD558\uC138\uC694.",2e3);return}this.loadScene("scene_stronghold_approach"),this.addLog("\u{1F3AE} [\uD14C\uC2A4\uD2B8] \uD751\uD48D\uCC44 \uC785\uAD6C\uB85C \uC774\uB3D9")}testGoToHospital(){if(!this.player){this.notification.show("\uBA3C\uC800 \uAC8C\uC784\uC744 \uC2DC\uC791\uD558\uC138\uC694.",2e3);return}this.addLog(`\u{1F3AE} [\uD14C\uC2A4\uD2B8] \uBCD1\uC6D0\uC73C\uB85C \uC774\uB3D9 (\uD604\uC7AC HP: ${this.player.health})`),this.loadScene("scene_hospital")}debugResetBattle(){console.log("=== \uC804\uD22C \uC0C1\uD0DC \uB9AC\uC14B \uC804 ==="),console.log("inBattle:",this.inBattle),console.log("battleState:",this.battleState),console.log("showDungeonExplorer:",this.showDungeonExplorer),console.log("currentDungeon:",this.currentDungeon),console.log("currentDungeonRoom:",this.currentDungeonRoom),this.inBattle=!1,this.battleState=null,this.showSkillMenu=!1,this.showDungeonExplorer=!1,this.currentDungeon=null,this.currentDungeonRoom=null,this.autoBattleInterval&&(clearInterval(this.autoBattleInterval),this.autoBattleInterval=null),this.cdr.detectChanges(),console.log("=== \uC804\uD22C \uC0C1\uD0DC \uB9AC\uC14B \uD6C4 ==="),console.log("inBattle:",this.inBattle),console.log("battleState:",this.battleState),console.log("showDungeonExplorer:",this.showDungeonExplorer),console.log("currentDungeon:",this.currentDungeon),this.addLog("\u{1F527} [\uB514\uBC84\uADF8] \uC804\uD22C \uBC0F \uB358\uC804 \uC0C1\uD0DC\uAC00 \uC644\uC804\uD788 \uB9AC\uC14B\uB418\uC5C8\uC2B5\uB2C8\uB2E4"),this.addLog("\u{1F527} [\uB514\uBC84\uADF8] \uC77C\uBC18 \uAC8C\uC784 \uBAA8\uB4DC\uB85C \uBCF5\uADC0\uD569\uB2C8\uB2E4"),this.currentScene?this.addLog(`\u{1F4CD} \uD604\uC7AC \uC7A5\uBA74: ${this.currentScene.title||this.currentScene.id}`):this.addLog("\u26A0\uFE0F \uD604\uC7AC \uC7A5\uBA74\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. \uAC8C\uC784\uC744 \uB2E4\uC2DC \uC2DC\uC791\uD558\uC138\uC694."),this.modalService.showSuccess(`\uC804\uD22C/\uB358\uC804 \uC0C1\uD0DC \uB9AC\uC14B \uC644\uB8CC<br>inBattle: ${this.inBattle}<br>battleState: ${this.battleState}<br>\uB358\uC804 \uBAA8\uB4DC: ${this.showDungeonExplorer}<br>\uC77C\uBC18 \uAC8C\uC784\uC73C\uB85C \uBCF5\uADC0`,"\uB514\uBC84\uADF8")}getEquippedWeapon(){return this.player?.equippedItems.weapon?this.player.inventory.find(t=>t.id===this.player.equippedItems.weapon):null}getEquippedArmor(){return this.player?.equippedItems.armor?this.player.inventory.find(t=>t.id===this.player.equippedItems.armor):null}getEquippedAccessory(){return this.player?.equippedItems.accessory?this.player.inventory.find(t=>t.id===this.player.equippedItems.accessory):null}canEquipItem(t){return["weapon","armor","amulet","accessory"].includes(t.type)}equipItem(t){if(!this.player)return;let e=this.equipmentService.equipItemWuxia(this.player,t);e.success?(this.addLog(`\u2728 ${e.message}`),this.notification.show(e.message,2e3),this.saveGame()):this.notification.show(e.message,2e3)}unequipItem(t){if(!this.player)return;let e=this.equipmentService.unequipItemWuxia(this.player,t);e.success?(this.addLog(`\u{1F513} ${e.message}`),this.notification.show(e.message,2e3),this.saveGame()):this.notification.show(e.message,2e3)}unequipItemByItem(t){if(!this.player)return;let e=this.equipmentService.getEquipmentSlotWuxia(t);e&&this.unequipItem(e)}getItemStatsDisplay(t){return this.equipmentService.getItemStatsTextWuxia(t)}getEquipmentBonus(){return this.player?this.equipmentService.calculateEquipmentBonusWuxia(this.player):{attack:0,defense:0,hp:0,mp:0,critChance:0,evasion:0,lifeSteal:0,attackSpeed:0}}getBaseAttack(){return this.player?Math.floor(this.player.stats.strength*.6+this.player.stats.innerPower*.4):0}getTotalAttack(){return this.getBaseAttack()+this.getEquipmentBonus().attack}getBaseDefense(){return this.player?Math.floor(this.player.stats.strength*.4+this.player.stats.innerPower*.3+this.player.stats.dexterity*.3):0}getTotalDefense(){return this.getBaseDefense()+this.getEquipmentBonus().defense}getBaseMaxHp(){return this.player?this.player.level*100:0}getTotalCombatPower(){if(!this.player)return 0;let t=this.getTotalAttack(),e=this.getTotalDefense(),n=this.getEquipmentBonus(),a=this.player.maxHealth+n.hp,s=t*2+e+a/10,m=1+n.critChance/100;return Math.floor(s*m)}getPlayerCombatPower(){if(!this.battleState)return this.getTotalCombatPower();let t=this.battleState.player,e=t.attack*2+t.defense+t.maxHp/10,a=1+(this.getEquipmentBonus().critChance||0)/100;return Math.floor(e*a)}getEnemyCombatPower(t){if(!t)return 0;let e=t.attack*2+t.defense+t.maxHp/10;return Math.floor(e)}gainExperience(t){if(this.player){for(this.player.experience+=t,this.addLog(`\u2B50 \uACBD\uD5D8\uCE58 +${t}`);this.player.experience>=this.player.experienceToNext;)this.levelUp();this.saveGame()}}levelUp(){this.player&&(this.player.level++,this.player.experience-=this.player.experienceToNext,this.player.experienceToNext=this.player.level*100,this.player.stats.strength+=2,this.player.stats.dexterity+=2,this.player.stats.innerPower+=2,this.player.stats.insight+=2,this.player.maxHealth=this.getBaseMaxHp()+this.getEquipmentBonus().hp,this.player.health=this.player.maxHealth,this.addLog("\u{1F389} [\uB808\uBCA8\uC5C5!]"),this.addLog(`\uB808\uBCA8 ${this.player.level}\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4!`),this.addLog("\uADFC\uB825, \uBBFC\uCCA9, \uB0B4\uACF5, \uD1B5\uCC30 +2"),this.addLog("\uCCB4\uB825 \uC644\uC804 \uD68C\uBCF5!"),this.modalService.showSuccess(`\uB808\uBCA8 ${this.player.level}\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4!<br>\uADFC\uB825, \uBBFC\uCCA9, \uB0B4\uACF5, \uD1B5\uCC30 +2<br>\uCCB4\uB825 \uC644\uC804 \uD68C\uBCF5!`,"\u{1F389} \uB808\uBCA8\uC5C5!"),this.saveGame())}getExperiencePercentage(){return!this.player||this.player.experienceToNext===0?0:this.player.experience/this.player.experienceToNext*100}getExperienceText(){return this.player?`${this.player.experience} / ${this.player.experienceToNext}`:"0 / 0"}showDungeonExplorer=!1;currentDungeon=null;currentDungeonRoom=null;enterDungeon(){this.addLog("\u2501".repeat(50)),this.addLog("\u{1F3F0} [\uB358\uC804 \uC9C4\uC785]"),this.addLog("\uC5B4\uB461\uACE0 \uC2B5\uD55C \uACF5\uAE30\uAC00 \uCF54\uB97C \uCC0C\uB978\uB2E4..."),this.addLog("\uB358\uC804\uC744 \uC0DD\uC131\uD558\uB294 \uC911..."),this.addLog("\u2501".repeat(50));let e=this.dungeonService.getDefaultDungeonTypes()[0],n="normal";if(!this.player)return;let a=this.dungeonService.generateDungeon(e,n,this.player.level);if(this.currentDungeon=a,this.currentDungeon.currentFloor=1,a.floors&&a.floors.length>0){let s=a.floors[0];s.rooms&&s.rooms.length>0&&(this.currentDungeonRoom=s.rooms[0],this.addLog(""),this.addLog(`\u{1F4CD} ${e.koreanName} \uC785\uC7A5`),this.addLog("\uB09C\uC774\uB3C4: \uBCF4\uD1B5"),this.addLog(`\uCD1D ${a.totalFloors}\uCE35`),this.addLog(""),this.addLog(`\uD604\uC7AC \uC704\uCE58: ${s.floorNumber}\uCE35 - \uC785\uAD6C`),this.addLog(this.currentDungeonRoom.description))}this.showDungeonExplorer=!0,this.modalService.showSuccess(`${e.koreanName}\uC5D0 \uC9C4\uC785\uD588\uC2B5\uB2C8\uB2E4!<br>\uB09C\uC774\uB3C4: \uBCF4\uD1B5 | \uCD1D ${a.totalFloors}\uCE35`,"\uB358\uC804 \uC785\uC7A5")}testEnterDungeon(){this.notification.show("\uB358\uC804 \uD14C\uC2A4\uD2B8 \uBAA8\uB4DC \uC9C4\uC785!",2e3),this.loadScene("scene_dungeon_entrance")}onDungeonEscape(){this.showDungeonExplorer=!1,this.currentDungeon=null,this.currentDungeonRoom=null,this.addLog("\u2501".repeat(50)),this.addLog("\u{1F6AA} [\uB358\uC804 \uD0C8\uCD9C]"),this.addLog("\uBB34\uC0AC\uD788 \uB358\uC804\uC744 \uBE60\uC838\uB098\uC654\uB2E4."),this.addLog("\u2501".repeat(50)),this.loadScene("scene_forest_path")}onDungeonRoomMove(t){if(this.currentDungeon&&this.currentDungeon.floors&&this.currentDungeonRoom){let e=this.currentDungeonRoom.floorNumber,n=this.currentDungeon.floors.find(a=>a.floorNumber===e);if(n&&n.rooms){let a=n.rooms.find(s=>s.id===t);if(a){this.currentDungeonRoom=a,this.currentDungeonRoom.isExplored=!0,this.addLog("\u2501".repeat(40)),this.addLog(`\u2192 ${this.getRoomTypeName(a.type)}\uB85C \uC774\uB3D9`),this.addLog(a.description);return}}}this.addLog(`\u2192 \uB2E4\uC74C \uBC29\uC73C\uB85C \uC774\uB3D9: ${t}`)}getRoomTypeName(t){return{entrance:"\uC785\uAD6C",normal:"\uC77C\uBC18 \uBC29",elite:"\uC5D8\uB9AC\uD2B8 \uBC29",boss:"\uBCF4\uC2A4 \uBC29",treasure:"\uBCF4\uBB3C \uBC29",shrine:"\uC131\uC18C",shop:"\uC0C1\uC810",safe:"\uC548\uC804 \uC9C0\uB300",event:"\uC774\uBCA4\uD2B8 \uBC29",exit:"\uCD9C\uAD6C"}[t]||"\uC54C \uC218 \uC5C6\uB294 \uBC29"}onDungeonInteract(t){this.addLog(`\u{1F50D} ${t.name||t}\uC744(\uB97C) \uC870\uC0AC\uD588\uB2E4.`)}onDungeonMonsterBattle(t){if(!(!this.player||!t)){if(t.isDead){let e=this.calculateMonsterExp(t);this.gainExperience(e),this.addLog(`\u2694\uFE0F ${t.name} \uCC98\uCE58!`),this.addLog(`\u2728 \uACBD\uD5D8\uCE58 +${e}`);return}this.addLog("\u2501".repeat(50)),this.addLog(`\u2694\uFE0F [\uC804\uD22C \uC2DC\uC791] ${t.name}\uC640 \uC870\uC6B0!`),this.addLog("\u2501".repeat(50)),this.startDungeonBattle(t)}}onDungeonRewardsClaimed(t){!this.player||!t||(t.exp>0&&(this.gainExperience(t.exp),this.addLog(`\u2728 \uACBD\uD5D8\uCE58 +${t.exp}`)),t.gold>0&&this.addLog(`\u{1F4B0} \uACE8\uB4DC +${t.gold} (\uC778\uBCA4\uD1A0\uB9AC \uCD94\uAC00 \uC608\uC815)`),t.items&&t.items.length>0&&t.items.forEach(e=>{this.addLog(`\u{1F381} ${e.name} \uD68D\uB4DD!`)}),this.notification.show(`\uC804\uD22C \uBCF4\uC0C1 \uD68D\uB4DD! \uACBD\uD5D8\uCE58 +${t.exp}`,3e3))}calculateMonsterExp(t){let e={normal:20,elite:50,boss:150};return t.level*(e[t.type]||20)}onDungeonFloorChange(t){this.addLog(`\u{1F4CD} ${t}\uCE35\uC73C\uB85C \uC774\uB3D9\uD588\uB2E4.`)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=ne({type:r,selectors:[["app-wuxia-game"]],standalone:!1,decls:46,vars:21,consts:[[1,"wuxia-game-container"],[1,"game-header"],[1,"game-title"],[1,"game-controls"],[1,"btn-control","btn-new-game",3,"click"],[1,"material-icons"],[1,"btn-control","btn-test",2,"background","#ff6b6b","color","white",3,"click"],[1,"btn-control","btn-test",2,"background","#9c27b0","color","white",3,"click"],[1,"btn-control","btn-test",2,"background","#26a69a","color","white",3,"click"],[1,"btn-control",3,"click"],[1,"game-content"],[1,"main-panel"],["class","status-bar",4,"ngIf"],["class","experience-bar-container",4,"ngIf"],["class","objective-panel",4,"ngIf"],["class","battle-screen",4,"ngIf"],["class","dungeon-screen",4,"ngIf"],["class","game-log",4,"ngIf"],["class","choices-panel",4,"ngIf"],["class","info-panel",4,"ngIf"],[3,"confirm","cancel","close","isOpen","type","title","message","confirmText","cancelText","showCancel"],[1,"status-bar"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"stat-value","combat-power"],[1,"stat-item","health"],[1,"health-bar"],[1,"health-fill"],[1,"stat-value","tendency"],[1,"experience-bar-container"],[1,"exp-info-wrapper"],[1,"exp-current"],[1,"exp-bar"],[1,"exp-fill"],[1,"exp-end-bar"],[1,"objective-panel"],[1,"objective-title"],[1,"objective-text"],[1,"battle-screen"],[1,"battle-header"],[1,"battle-turn-indicator"],[1,"turn-label"],[1,"turn-value"],[1,"battle-participants"],[1,"battle-character","player-character"],[1,"character-name"],[1,"character-power"],[1,"character-stats"],[1,"stat-bar","hp-bar"],[1,"stat-progress"],[1,"stat-fill","hp-fill"],[1,"stat-text"],[1,"stat-bar","mp-bar"],[1,"stat-fill","mp-fill"],[1,"enemy-list"],["class","battle-character enemy-character",3,"defeated","targeted",4,"ngFor","ngForOf"],[1,"battle-log"],["class","battle-log-entry",4,"ngFor","ngForOf"],["class","battle-actions",4,"ngIf"],["class","auto-battle-indicator",4,"ngIf"],["class","battle-result",4,"ngIf"],[1,"battle-character","enemy-character"],[1,"character-power","enemy-power"],[1,"stat-fill","hp-fill","enemy-hp"],[1,"battle-log-entry"],[1,"battle-actions"],[1,"action-buttons"],[1,"action-btn","auto-battle-btn",3,"click"],[1,"action-btn","attack-btn",3,"click"],[1,"action-btn","skill-btn",3,"click"],["class","skill-menu",4,"ngIf"],[1,"skill-menu"],[1,"skill-menu-title"],[1,"skill-list-battle"],["class","skill-button",3,"disabled","click",4,"ngFor","ngForOf"],[1,"skill-button",3,"click","disabled"],[1,"skill-name"],[1,"skill-info"],[1,"skill-mp"],[1,"skill-damage"],[1,"auto-battle-indicator"],[1,"stop-auto-btn",3,"click"],[1,"battle-result"],[4,"ngIf"],[1,"continue-btn",3,"click"],[1,"dungeon-screen"],[1,"dungeon-header"],[1,"escape-btn",3,"click"],[3,"dungeon","currentRoom","playerHp","playerMaxHp","playerName","playerLevel","playerAttackPower","playerDefensePower","roomMove","interactableUse","monsterAttack","rewardsClaimed","floorMove","dungeonEscape",4,"ngIf"],["class","dungeon-placeholder",4,"ngIf"],[3,"roomMove","interactableUse","monsterAttack","rewardsClaimed","floorMove","dungeonEscape","dungeon","currentRoom","playerHp","playerMaxHp","playerName","playerLevel","playerAttackPower","playerDefensePower"],[1,"dungeon-placeholder"],[1,"game-log"],["class","log-line",3,"innerHTML",4,"ngFor","ngForOf"],[1,"log-line",3,"innerHTML"],[1,"choices-panel"],[1,"choices-title"],["class","auto-progress-indicator",4,"ngIf"],[1,"choice-list"],["class","choice-button",3,"disabled","auto-progressing","click",4,"ngFor","ngForOf"],[1,"auto-progress-indicator"],[1,"choice-button",3,"click","disabled"],[1,"choice-number"],[1,"choice-text"],["class","choice-reason",4,"ngIf"],[1,"choice-reason"],[1,"info-panel"],["class","character-sheet",4,"ngIf"],["class","inventory-panel",4,"ngIf"],["class","help-panel",4,"ngIf"],[1,"character-sheet"],[1,"panel-title"],[1,"character-section"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"exp-percentage"],[1,"exp-bar-full"],[1,"exp-fill-full"],[1,"character-section","combat-power-section"],[1,"combat-stats"],[1,"combat-stat-row","total-power"],[1,"stat-value","total"],[1,"combat-stat-breakdown"],[1,"combat-stat-row"],["class","bonus",4,"ngIf"],[1,"total-value"],["class","combat-stat-row",4,"ngIf"],[1,"stat-row"],[1,"stat-name"],[1,"stat-number"],["class","injuries-list",4,"ngIf"],["class","no-injuries",4,"ngIf"],["class","character-section",4,"ngIf"],[1,"bonus"],[1,"stat-value","bonus-only"],[1,"injuries-list"],["class","injury-item",4,"ngFor","ngForOf"],[1,"injury-item"],[1,"no-injuries"],[1,"skill-list"],["class","skill-item",4,"ngFor","ngForOf"],[1,"skill-item"],[1,"inventory-panel"],[1,"equipped-section"],[1,"equipped-slots"],[1,"equipped-slot"],[1,"slot-label"],["class","slot-item",4,"ngIf"],["class","slot-empty",4,"ngIf"],[1,"inventory-section"],["class","empty-inventory",4,"ngIf"],[1,"inventory-list"],["class","inventory-item",4,"ngFor","ngForOf"],[1,"slot-item"],[1,"item-name"],[1,"btn-unequip",3,"click"],[1,"slot-empty"],[1,"empty-inventory"],[1,"inventory-item"],[1,"item-header"],["class","item-equipped-badge",4,"ngIf"],["class","item-quantity",4,"ngIf"],[1,"item-description"],["class","item-stats",4,"ngIf"],[1,"item-actions"],["class","btn-equip",3,"click",4,"ngIf"],["class","btn-unequip-item",3,"click",4,"ngIf"],[1,"item-equipped-badge"],[1,"item-quantity"],[1,"item-stats"],["class","stat-line",4,"ngFor","ngForOf"],[1,"stat-line"],[1,"btn-equip",3,"click"],[1,"btn-unequip-item",3,"click"],[1,"help-panel"],[1,"help-section"],[1,"tendency-mark","righteous"],[1,"tendency-mark","neutral"],[1,"tendency-mark","evil"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),c(3,"\uBB35\uD5A5\uC9C0\uC5F0 (\u58A8\u9999\u4E4B\u7DE3)"),i(),o(4,"div",3)(5,"button",4),f("click",function(){return n.startNewGame()}),o(6,"i",5),c(7,"add_circle"),i(),c(8," \uC0C8 \uAC8C\uC784 "),i(),o(9,"button",6),f("click",function(){return n.jumpToStronghold()}),c(10," \u{1F3AE} \uD14C\uC2A4\uD2B8: \uD751\uD48D\uCC44 \uC785\uAD6C "),i(),o(11,"button",7),f("click",function(){return n.testEnterDungeon()}),c(12," \u{1F3F0} \uD14C\uC2A4\uD2B8: \uB358\uC804 \uC785\uC7A5 "),i(),o(13,"button",8),f("click",function(){return n.testGoToHospital()}),c(14," \u{1F3E5} \uD14C\uC2A4\uD2B8: \uBCD1\uC6D0 \uC785\uC7A5 "),i(),o(15,"button",9),f("click",function(){return n.toggleCharacterSheet()}),o(16,"i",5),c(17,"person"),i(),c(18," \uCE90\uB9AD\uD130 "),i(),o(19,"button",9),f("click",function(){return n.toggleInventory()}),o(20,"i",5),c(21,"inventory_2"),i(),c(22," \uC18C\uC9C0\uD488 "),i(),o(23,"button",9),f("click",function(){return n.saveGame()}),o(24,"i",5),c(25,"save"),i(),c(26," \uC800\uC7A5 "),i(),o(27,"button",9),f("click",function(){return n.loadGame()}),o(28,"i",5),c(29,"folder_open"),i(),c(30," \uBD88\uB7EC\uC624\uAE30 "),i(),o(31,"button",9),f("click",function(){return n.toggleHelp()}),o(32,"i",5),c(33,"help_outline"),i(),c(34," \uB3C4\uC6C0\uB9D0 "),i()()(),o(35,"div",10)(36,"div",11),b(37,wg,28,14,"div",12)(38,kg,7,3,"div",13)(39,Sg,5,1,"div",14)(40,zg,37,20,"div",15)(41,Rg,8,2,"div",16)(42,Vg,2,1,"div",17)(43,Yg,6,2,"div",18),i(),b(44,Mp,4,3,"div",19),i()(),o(45,"app-game-modal",20),f("confirm",function(){return n.onModalConfirm()})("cancel",function(){return n.onModalCancel()})("close",function(){return n.onModalClose()}),i()),e&2&&(l(15),y("active",n.showCharacterSheet),l(4),y("active",n.showInventory),l(12),y("active",n.showHelp),l(6),p("ngIf",n.player),l(),p("ngIf",n.player),l(),p("ngIf",n.gameState),l(),p("ngIf",n.inBattle&&n.battleState),l(),p("ngIf",n.showDungeonExplorer),l(),p("ngIf",!n.inBattle&&!n.showDungeonExplorer),l(),p("ngIf",n.currentScene&&n.availableChoices.length>0&&!n.inBattle&&!n.showDungeonExplorer),l(),p("ngIf",n.showCharacterSheet||n.showInventory||n.showHelp),l(),p("isOpen",n.isModalOpen)("type",(n.modalState==null?null:n.modalState.type)||"info")("title",(n.modalState==null?null:n.modalState.title)||"")("message",(n.modalState==null?null:n.modalState.message)||"")("confirmText",(n.modalState==null?null:n.modalState.confirmText)||"\uD655\uC778")("cancelText",(n.modalState==null?null:n.modalState.cancelText)||"\uCDE8\uC18C")("showCancel",(n.modalState==null?null:n.modalState.showCancel)||!1))},dependencies:[we,ce,Ee,$e],styles:['@charset "UTF-8";.wuxia-game-container[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;background:linear-gradient(135deg,#f5f1e8,#e8dcc8);color:#2c2416;font-family:Noto Sans KR,Malgun Gothic,sans-serif;overflow:hidden}.game-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;background:#8b45131a;border-bottom:2px solid #8b4513;box-shadow:0 2px 8px #8b451333}.game-title[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:700;color:#8b4513;text-shadow:1px 1px 2px rgba(212,175,55,.3);letter-spacing:2px}.game-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.3rem;padding:.5rem 1rem;background:#8b45131a;border:1px solid #8b4513;border-radius:4px;color:#2c2416;cursor:pointer;transition:all .2s;font-size:.9rem}.btn-control[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.btn-control[_ngcontent-%COMP%]:hover{background:#8b451333;border-color:#8b4513;color:#000}.btn-control.active[_ngcontent-%COMP%]{background:#8b451326;border-color:#8b4513;color:#8b4513;font-weight:600}.btn-control.btn-new-game[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4af3733,#8b45131a);border-color:#8b4513;font-weight:600}.btn-control.btn-new-game[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d4af374d,#8b451333);box-shadow:0 0 10px #8b451333}.game-content[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.main-panel[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:1rem;overflow-y:auto}.info-panel[_ngcontent-%COMP%]{width:400px;background:#ffffffe6;border-left:2px solid #8b4513;padding:1.5rem;overflow-y:auto}.status-bar[_ngcontent-%COMP%]{display:flex;gap:1.5rem;padding:1rem;background:#fffc;border:1px solid #8b4513;border-radius:6px;margin-bottom:1rem;font-size:.95rem;box-shadow:0 2px 6px #8b45131a}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.stat-item.health[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.stat-label[_ngcontent-%COMP%]{color:#666;font-weight:500}.stat-value[_ngcontent-%COMP%]{color:#2c2416;font-weight:700}.stat-value.combat-power[_ngcontent-%COMP%]{color:#ff8000;font-size:1.1rem;font-weight:900;text-shadow:0 1px 2px rgba(255,128,0,.3);padding:2px 8px;background:linear-gradient(135deg,#ff800026,#ffa50026);border-radius:4px;border:1px solid rgba(255,128,0,.3)}.stat-value.tendency[_ngcontent-%COMP%]{padding:2px 8px;border-radius:3px;font-size:.85rem}.stat-value.tendency.righteous[_ngcontent-%COMP%]{background:#6495ed33;color:#4169e1}.stat-value.tendency.neutral[_ngcontent-%COMP%]{background:#80808033;color:#666}.stat-value.tendency.evil[_ngcontent-%COMP%]{background:#dc143c4d;color:#dc143c}.health-bar[_ngcontent-%COMP%]{width:100px;height:6px;background:#ffffff1a;border-radius:3px;overflow:hidden;margin-top:4px}.health-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#dc143c,tomato);transition:width .3s}.experience-bar-container[_ngcontent-%COMP%]{padding:0;margin-bottom:1rem;background:#d0d0d0;position:relative;display:flex;align-items:center}.exp-info-wrapper[_ngcontent-%COMP%]{position:absolute;left:8px;top:50%;transform:translateY(-50%);z-index:2}.exp-info-wrapper[_ngcontent-%COMP%]   .exp-current[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.8);background:#0000004d;padding:2px 6px;border-radius:3px;white-space:nowrap}.exp-bar[_ngcontent-%COMP%]{width:100%;height:20px;background:#d0d0d0;overflow:hidden;position:relative}.exp-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ff6b35,#ff8c42,#ffa600);box-shadow:0 0 8px #ff8c4299,inset 0 1px 2px #ffffff4d;transition:width .5s ease-out;position:relative}.exp-fill[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);animation:_ngcontent-%COMP%_shimmer 2s infinite}.exp-end-bar[_ngcontent-%COMP%]{width:3px;height:20px;background:linear-gradient(180deg,#333,#666,#333);box-shadow:-1px 0 2px #0000004d}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%}to{left:100%}}.objective-panel[_ngcontent-%COMP%]{padding:.8rem 1rem;background:#8b451314;border-left:4px solid #8b4513;border-radius:4px;margin-bottom:1rem}.objective-title[_ngcontent-%COMP%]{font-size:.85rem;color:#8b4513;font-weight:700;margin-bottom:.3rem}.objective-text[_ngcontent-%COMP%]{font-size:1rem;color:#2c2416}.game-log[_ngcontent-%COMP%]{flex:1;padding:1.5rem;background:#ffffffd9;border:1px solid #8b4513;border-radius:6px;overflow-y:auto;font-family:"Noto Serif KR",Batang,serif;line-height:1.8;margin-bottom:1rem;max-height:calc(100vh - 400px)}.log-line[_ngcontent-%COMP%]{margin-bottom:.5rem;color:#3c3020;white-space:pre-wrap;word-wrap:break-word}.log-line[_ngcontent-%COMP%]:empty{height:.5rem}.choices-panel[_ngcontent-%COMP%]{background:#ffffffe6;border:1px solid #8b4513;border-radius:6px;padding:1rem;box-shadow:0 2px 8px #8b451326}.choices-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#8b4513;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid rgba(139,69,19,.3);display:flex;justify-content:space-between;align-items:center}.auto-progress-indicator[_ngcontent-%COMP%]{font-size:.9rem;font-weight:400;color:#4169e1;animation:_ngcontent-%COMP%_pulse 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}.choice-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.7rem}.choice-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;padding:.8rem 1rem;background:#ffffffe6;border:1px solid #8b4513;border-radius:4px;color:#2c2416;text-align:left;cursor:pointer;transition:all .2s;font-size:1rem}.choice-button[_ngcontent-%COMP%]:hover:not(.disabled){background:#8b451326;border-color:#8b4513;transform:translate(4px);box-shadow:0 2px 6px #8b451333}.choice-button.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;background:#c8c8c84d;border-color:#999}.choice-button.auto-progressing[_ngcontent-%COMP%]{background:#4169e11a;border-color:#4169e1;animation:_ngcontent-%COMP%_choice-pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_choice-pulse{0%,to{border-color:#4169e1;box-shadow:0 0 #4169e166}50%{border-color:#6495ed;box-shadow:0 0 0 4px #4169e100}}.choice-number[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;background:#8b451326;border:1px solid #8b4513;border-radius:50%;font-weight:700;color:#8b4513;font-size:.85rem}.choice-text[_ngcontent-%COMP%]{flex:1}.choice-reason[_ngcontent-%COMP%]{font-size:.85rem;color:#999;font-style:italic}.panel-title[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.5rem;color:#8b4513;border-bottom:2px solid #8b4513;padding-bottom:.5rem}.character-section[_ngcontent-%COMP%], .equipped-section[_ngcontent-%COMP%], .inventory-section[_ngcontent-%COMP%], .help-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.character-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .equipped-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .inventory-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .help-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:#8b4513;margin-bottom:.8rem;font-weight:600}.combat-power-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b45130d,#a0522d0d);border:2px solid #8b4513;border-radius:8px;padding:1rem;margin-bottom:1.5rem}.combat-power-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;color:#8b4513;margin-bottom:1rem;text-align:center;font-weight:700}.combat-stats[_ngcontent-%COMP%]   .total-power[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b4513,sienna);color:#fff;padding:1rem;border-radius:6px;margin-bottom:1rem;text-align:center;box-shadow:0 4px 8px #8b45134d}.combat-stats[_ngcontent-%COMP%]   .total-power[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;display:block;margin-bottom:.5rem;opacity:.9}.combat-stats[_ngcontent-%COMP%]   .total-power[_ngcontent-%COMP%]   .stat-value.total[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;display:block;text-shadow:0 2px 4px rgba(0,0,0,.3)}.combat-stats[_ngcontent-%COMP%]   .combat-stat-breakdown[_ngcontent-%COMP%]{background:#fffc;border-radius:6px;padding:.8rem}.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.6rem 0;border-bottom:1px solid rgba(139,69,19,.1)}.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#666;font-size:.95rem;font-weight:500}.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#2c2416;font-weight:600;display:flex;align-items:center;gap:.5rem}.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]   .bonus[_ngcontent-%COMP%]{color:#28a745;font-size:.9rem;font-weight:700}.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]{color:#8b4513;font-weight:700}.combat-stats[_ngcontent-%COMP%]   .combat-stat-row[_ngcontent-%COMP%]   .stat-value.bonus-only[_ngcontent-%COMP%]{color:#28a745;font-weight:700}.info-row[_ngcontent-%COMP%], .stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid rgba(139,69,19,.15);flex-wrap:wrap}.info-row[_ngcontent-%COMP%]:last-child, .stat-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-label[_ngcontent-%COMP%], .stat-name[_ngcontent-%COMP%]{color:#666}.info-value[_ngcontent-%COMP%], .stat-number[_ngcontent-%COMP%]{color:#2c2416;font-weight:700}.info-value[_ngcontent-%COMP%]   .exp-percentage[_ngcontent-%COMP%], .stat-number[_ngcontent-%COMP%]   .exp-percentage[_ngcontent-%COMP%]{color:#888;font-size:.85em;margin-left:.5rem}.exp-bar-full[_ngcontent-%COMP%]{width:100%;height:8px;background:#fff3;border-radius:4px;overflow:hidden;margin-top:.5rem;box-shadow:inset 0 1px 3px #0003}.exp-fill-full[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,gold,#ffed4e,gold);box-shadow:0 0 10px #ffd700cc;transition:width .5s ease-out;animation:_ngcontent-%COMP%_shimmer 2s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-100% 0}to{background-position:100% 0}}.injuries-list[_ngcontent-%COMP%]{margin-top:.5rem}.injury-item[_ngcontent-%COMP%]{padding:.5rem;background:#dc143c1a;border-left:3px solid #dc143c;margin-bottom:.5rem;font-size:.9rem;color:#8b0000}.no-injuries[_ngcontent-%COMP%]{color:#228b22;font-size:.9rem}.skill-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.skill-item[_ngcontent-%COMP%]{padding:.5rem;background:#8b45131a;border-left:3px solid #8b4513;font-size:.9rem;color:#2c2416}.equipped-item[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:.5rem 0;border-bottom:1px solid rgba(139,69,19,.15)}.item-slot[_ngcontent-%COMP%]{color:#666;min-width:80px}.empty-inventory[_ngcontent-%COMP%]{color:#999;font-style:italic;text-align:center;padding:2rem}.inventory-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}.inventory-item[_ngcontent-%COMP%]{padding:.8rem;background:#fff9;border:1px solid #8b4513;border-radius:4px}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.3rem}.item-name[_ngcontent-%COMP%]{font-weight:700}.item-name.rarity-common[_ngcontent-%COMP%]{color:#fff}.item-name.rarity-uncommon[_ngcontent-%COMP%]{color:#1eff00}.item-name.rarity-rare[_ngcontent-%COMP%]{color:#0070dd}.item-name.rarity-epic[_ngcontent-%COMP%]{color:#a335ee}.item-name.rarity-legendary[_ngcontent-%COMP%]{color:#ff8000}.item-quantity[_ngcontent-%COMP%]{color:#999;font-size:.9rem}.item-description[_ngcontent-%COMP%]{font-size:.85rem;color:#aaa;font-style:italic}.help-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding-left:0}.help-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.3rem 0 .3rem 1.5rem;position:relative}.help-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\25b8";position:absolute;left:0;color:#d4af37}.help-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#d4af37}.help-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.6;color:#ccc;margin-bottom:.8rem}.tendency-mark[_ngcontent-%COMP%]{padding:2px 6px;border-radius:3px;font-weight:700;font-size:.9rem}.tendency-mark.righteous[_ngcontent-%COMP%]{background:#6495ed4d;color:#6495ed}.tendency-mark.neutral[_ngcontent-%COMP%]{background:#8080804d;color:#ccc}.tendency-mark.evil[_ngcontent-%COMP%]{background:#dc143c4d;color:#dc143c}.game-log[_ngcontent-%COMP%]::-webkit-scrollbar, .main-panel[_ngcontent-%COMP%]::-webkit-scrollbar, .info-panel[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.game-log[_ngcontent-%COMP%]::-webkit-scrollbar-track, .main-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track, .info-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000004d}.game-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .main-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .info-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8b451380;border-radius:4px}.game-log[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .main-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .info-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8b4513b3}@media (max-width: 1024px){.info-panel[_ngcontent-%COMP%]{width:350px}.game-title[_ngcontent-%COMP%]{font-size:1.4rem}}@media (max-width: 768px){.game-content[_ngcontent-%COMP%]{flex-direction:column}.info-panel[_ngcontent-%COMP%]{width:100%;border-left:none;border-top:2px solid #8b4513;max-height:300px}.status-bar[_ngcontent-%COMP%]{flex-wrap:wrap;gap:1rem}.game-controls[_ngcontent-%COMP%]{flex-wrap:wrap}}.battle-screen[_ngcontent-%COMP%]{background:#fffffff2;border:2px solid #8b4513;border-radius:8px;padding:1.5rem;margin-bottom:1rem}.battle-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:2px solid #8b4513}.battle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#8b4513;font-size:1.5rem}.battle-turn-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.1rem}.battle-turn-indicator[_ngcontent-%COMP%]   .turn-label[_ngcontent-%COMP%]{color:#666}.battle-turn-indicator[_ngcontent-%COMP%]   .turn-value[_ngcontent-%COMP%]{font-weight:700;padding:.3rem .8rem;border-radius:4px}.battle-turn-indicator[_ngcontent-%COMP%]   .turn-value.player-turn[_ngcontent-%COMP%]{background:#4169e133;color:#4169e1}.battle-turn-indicator[_ngcontent-%COMP%]   .turn-value.enemy-turn[_ngcontent-%COMP%]{background:#dc143c33;color:#dc143c}.battle-participants[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:2rem;margin-bottom:1.5rem}.battle-character[_ngcontent-%COMP%]{flex:1;padding:1rem;border:2px solid #8b4513;border-radius:6px;background:#fff9}.battle-character.player-character[_ngcontent-%COMP%]{border-color:#4169e1}.battle-character.enemy-character[_ngcontent-%COMP%]{border-color:#dc143c}.battle-character.enemy-character.defeated[_ngcontent-%COMP%]{opacity:.4;filter:grayscale(1)}.battle-character.enemy-character.targeted[_ngcontent-%COMP%]{border-color:tomato;border-width:3px;box-shadow:0 0 10px #dc143c66}.battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#2c2416;margin-bottom:.8rem;display:flex;align-items:center;justify-content:space-between;gap:.5rem}.battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]   .character-power[_ngcontent-%COMP%]{font-size:.95rem;color:#ff8000;background:linear-gradient(135deg,#ff80001a,#ffd7001a);padding:.25rem .6rem;border-radius:12px;border:1px solid rgba(255,128,0,.3);font-weight:600;white-space:nowrap}.battle-character[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]   .character-power.enemy-power[_ngcontent-%COMP%]{color:#dc143c;background:linear-gradient(135deg,#dc143c1a,#ff45001a);border-color:#dc143c4d}.character-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.stat-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.9rem}.stat-bar[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{min-width:30px;font-weight:600;color:#666}.stat-bar[_ngcontent-%COMP%]   .stat-progress[_ngcontent-%COMP%]{flex:1;height:20px;background:#c8c8c84d;border-radius:10px;overflow:hidden;border:1px solid #999}.stat-bar[_ngcontent-%COMP%]   .stat-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease}.stat-bar[_ngcontent-%COMP%]   .stat-fill.hp-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#dc143c,tomato)}.stat-bar[_ngcontent-%COMP%]   .stat-fill.hp-fill.enemy-hp[_ngcontent-%COMP%]{background:linear-gradient(90deg,#8b0000,#dc143c)}.stat-bar[_ngcontent-%COMP%]   .stat-fill.mp-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4169e1,#6495ed)}.stat-bar[_ngcontent-%COMP%]   .stat-text[_ngcontent-%COMP%]{min-width:80px;text-align:right;font-weight:600;color:#2c2416}.enemy-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem;flex:1}.battle-log[_ngcontent-%COMP%]{background:#f5f1e8cc;border:1px solid #8b4513;border-radius:6px;padding:1rem;max-height:150px;overflow-y:auto;margin-bottom:1rem}.battle-log[_ngcontent-%COMP%]   .battle-log-entry[_ngcontent-%COMP%]{padding:.3rem 0;color:#3c3020;font-size:.95rem;border-bottom:1px solid rgba(139,69,19,.1)}.battle-log[_ngcontent-%COMP%]   .battle-log-entry[_ngcontent-%COMP%]:last-child{border-bottom:none}.battle-actions[_ngcontent-%COMP%]{margin-top:1rem}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.8rem;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{flex:1;min-width:150px;padding:.8rem 1.2rem;border:2px solid #8b4513;border-radius:6px;background:#ffffffe6;color:#2c2416;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s}.action-btn[_ngcontent-%COMP%]:hover{background:#8b451326;transform:translateY(-2px);box-shadow:0 4px 8px #8b451333}.action-btn.auto-battle-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6495ed33,#4169e126);border-color:#4169e1;color:#4169e1}.action-btn.attack-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc143c33,#ff634726);border-color:#dc143c;color:#dc143c}.action-btn.skill-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9400d333,#8a2be226);border-color:#9400d3;color:#9400d3}.skill-menu[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background:#fffffff2;border:2px solid #9400d3;border-radius:6px}.skill-menu[_ngcontent-%COMP%]   .skill-menu-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#9400d3;margin-bottom:.8rem}.skill-list-battle[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.6rem}.skill-button[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.8rem 1rem;background:#ffffffe6;border:1px solid #9400d3;border-radius:4px;cursor:pointer;transition:all .2s}.skill-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#9400d31a;transform:translate(4px)}.skill-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.skill-button[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]{font-weight:600;color:#2c2416}.skill-button[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:.9rem}.skill-button[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]   .skill-mp[_ngcontent-%COMP%]{color:#4169e1}.skill-button[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]   .skill-damage[_ngcontent-%COMP%]{color:#dc143c}.auto-battle-indicator[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#6495ed1a;border:2px solid #4169e1;border-radius:6px;margin-top:1rem}.auto-battle-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#4169e1;font-weight:600;font-size:1.1rem}.auto-battle-indicator[_ngcontent-%COMP%]   .stop-auto-btn[_ngcontent-%COMP%]{padding:.5rem 1.2rem;background:#dc143c;color:#fff;border:none;border-radius:4px;font-weight:600;cursor:pointer;transition:all .2s}.auto-battle-indicator[_ngcontent-%COMP%]   .stop-auto-btn[_ngcontent-%COMP%]:hover{background:#a00;transform:scale(1.05)}.battle-result[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:#fffffff2;border:2px solid #8b4513;border-radius:8px;margin-top:1rem}.battle-result[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1.5rem;color:#8b4513}.battle-result[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]{padding:.8rem 2rem;background:linear-gradient(135deg,#8b4513,sienna);color:#fff;border:none;border-radius:6px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .2s}.battle-result[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 12px #8b45134d}.inventory-panel[_ngcontent-%COMP%]   .equipped-section[_ngcontent-%COMP%]{margin-bottom:2rem}.inventory-panel[_ngcontent-%COMP%]   .equipped-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:#8b4513;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid rgba(139,69,19,.3)}.inventory-panel[_ngcontent-%COMP%]   .equipped-slots[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}.inventory-panel[_ngcontent-%COMP%]   .equipped-slot[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.8rem;background:#fffc;border:1px solid #d4a574;border-radius:4px}.inventory-panel[_ngcontent-%COMP%]   .equipped-slot[_ngcontent-%COMP%]   .slot-label[_ngcontent-%COMP%]{font-weight:600;color:#8b4513;min-width:80px}.inventory-panel[_ngcontent-%COMP%]   .equipped-slot[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.inventory-panel[_ngcontent-%COMP%]   .equipped-slot[_ngcontent-%COMP%]   .slot-empty[_ngcontent-%COMP%]{color:#999;font-style:italic}.inventory-panel[_ngcontent-%COMP%]   .equipped-slot[_ngcontent-%COMP%]   .btn-unequip[_ngcontent-%COMP%]{padding:.3rem .8rem;background:#dc3545;color:#fff;border:none;border-radius:3px;font-size:.85rem;cursor:pointer;transition:all .2s}.inventory-panel[_ngcontent-%COMP%]   .equipped-slot[_ngcontent-%COMP%]   .btn-unequip[_ngcontent-%COMP%]:hover{background:#c82333}.inventory-panel[_ngcontent-%COMP%]   .inventory-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:#8b4513;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid rgba(139,69,19,.3)}.inventory-panel[_ngcontent-%COMP%]   .inventory-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]{padding:1rem;background:#ffffffe6;border:1px solid #d4a574;border-radius:4px;transition:all .2s}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #8b451326;border-color:#8b4513}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-weight:600;font-size:1.05rem}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-name.rarity-common[_ngcontent-%COMP%]{color:gray}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-name.rarity-uncommon[_ngcontent-%COMP%]{color:#0a0}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-name.rarity-rare[_ngcontent-%COMP%]{color:#0070dd}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-name.rarity-epic[_ngcontent-%COMP%]{color:#a335ee}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-name.rarity-legendary[_ngcontent-%COMP%]{color:#ff8000}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-equipped-badge[_ngcontent-%COMP%]{font-size:.85rem;color:#28a745;font-weight:600}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{color:#666;font-size:.95rem;margin-bottom:.5rem}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]{margin-top:.8rem;padding:.8rem;background:#8b45130d;border-left:3px solid #8b4513}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%]{font-size:.9rem;color:#4a3520;margin-bottom:.3rem}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-stats[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%]:last-child{margin-bottom:0}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]{margin-top:.8rem;display:flex;gap:.5rem}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:3px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .btn-equip[_ngcontent-%COMP%]{background:#28a745;color:#fff}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .btn-equip[_ngcontent-%COMP%]:hover{background:#218838}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .btn-unequip-item[_ngcontent-%COMP%]{background:#ffc107;color:#333}.inventory-panel[_ngcontent-%COMP%]   .inventory-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .btn-unequip-item[_ngcontent-%COMP%]:hover{background:#e0a800}.dungeon-screen[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:1rem;overflow:hidden}.dungeon-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#8b45131a;border-radius:6px;margin-bottom:1rem}.dungeon-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#8b4513}.dungeon-header[_ngcontent-%COMP%]   .escape-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#dc3545;color:#fff;border:none;border-radius:4px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s}.dungeon-header[_ngcontent-%COMP%]   .escape-btn[_ngcontent-%COMP%]:hover{background:#c82333;transform:translateY(-1px)}.dungeon-placeholder[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1rem}.dungeon-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#8b4513;margin:0}']})};var xp=[{path:"login",component:Dt},{path:"wuxia-game",component:At,canActivate:[Ve]},{path:"game/:gameId",component:Xe,canActivate:[Ve]},{path:"",component:Xe,canActivate:[Ve]}],Gt=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=et({type:r});static \u0275inj=Ze({imports:[zt.forChild(xp),zt]})};var to=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=et({type:r});static \u0275inj=Ze({imports:[ke,En,Gt,Ee,qn,Tn,Bn,An,st,Gn,Nn,gt,Rn,rt,$n,Vn,In]})};export{to as NovelModule};
