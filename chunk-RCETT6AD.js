import{a as m}from"./chunk-4DRAGH36.js";import{e as g,g as u}from"./chunk-IESNQYPT.js";import{D as a,Y as n,aa as p,ea as d,l as o}from"./chunk-KPABI5SC.js";import{a as h}from"./chunk-WWX6BADO.js";var c=(i=>(i.BOT_ACTIVE="bot_active",i.WAITING_AGENT="waiting_agent",i.AGENT_ACTIVE="agent_active",i.RESOLVED="resolved",i.CLOSED="closed",i))(c||{}),I=(r=>(r.CLIENT="client",r.AGENT="agent",r.BOT="bot",r.SYSTEM="system",r))(I||{});var b=class l{constructor(e){this.http=e}baseUrl=m.channelTalkApiUrl;validateSession(e,t){return this.http.post(`${this.baseUrl}/validate-session`,{sessionId:e,storeId:t})}identifyCustomer(e,t,s){return this.http.post(`${this.baseUrl}/identify-customer`,{fingerprint:e,storeId:t,preProvidedToken:s})}identifyCustomerWithObject(e){return this.http.post(`${this.baseUrl}/identify-customer`,e).pipe(n(t=>console.log("\u{1F4E1} \uACE0\uAC1D \uC2DD\uBCC4 \uC644\uB8CC:",t)),a(t=>o({client:null,rooms:[]})))}getStore(e){return this.http.get(`${m.apiUrl}/stores/${e}`)}getClientRooms(e){return this.http.get(`${this.baseUrl}/rooms/${e}`).pipe(n(t=>console.log("\u{1F4E1} \uCC44\uD305\uBC29 \uBAA9\uB85D \uC870\uD68C:",t)),a(t=>o([])))}getRoom(e){return this.http.get(`${this.baseUrl}/room/${e}`).pipe(n(t=>console.log("\u{1F4E1} \uCC44\uD305\uBC29 \uC815\uBCF4 \uC870\uD68C:",t)),a(t=>o(null)))}createRoom(e){return this.http.post(`${this.baseUrl}/rooms`,e).pipe(n(t=>console.log("\u{1F4E1} \uCC44\uD305\uBC29 \uC0DD\uC131 \uC644\uB8CC:",t)),a(t=>o(null)))}createRoomWithOrganization(e){return this.http.post(`${this.baseUrl}/rooms`,e).pipe(n(t=>{console.log("\u{1F4E1} \uC751\uB2F5 \uAD6C\uC870:",JSON.stringify(t,null,2))}),a(t=>o(null)))}updateRoomStatus(e,t){return this.http.patch(`${this.baseUrl}/rooms/${e}/status`,{status:t})}deleteWaitingRooms(e){return this.http.delete(`${this.baseUrl}/rooms/waiting/${e}`).pipe(n(t=>console.log("\u{1F4E1} \uB300\uAE30 \uC911\uC778 \uCC44\uD305\uBC29 \uC0AD\uC81C \uC644\uB8CC:",t)),a(t=>{throw t}))}getRoomMessages(e,t,s){let r=new g;return t&&(r=r.set("limit",t.toString())),s&&(r=r.set("offset",s.toString())),this.http.get(`${this.baseUrl}/messages/room/${e}`,{params:r}).pipe(n(i=>console.log("\u{1F4E1} \uBA54\uC2DC\uC9C0 \uBAA9\uB85D \uC870\uD68C:",i)),a(i=>o([])))}sendMessage(e){return this.http.post(`${this.baseUrl}/messages`,e).pipe(n(t=>console.log("\u{1F4E1} \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC644\uB8CC:",t)),a(t=>o(null)))}markAsRead(e,t,s){return this.http.post(`${this.baseUrl}/messages/mark-as-read`,{roomId:e,userId:t,userType:s})}syncMessageForms(e,t,s){return this.http.post(`${this.baseUrl}/messages/${t}/forms`,{roomId:e,forms:s})}updateClient(e,t){return this.http.patch(`${this.baseUrl}/clients/${e}`,t)}updateClientData(e,t,s){return this.http.patch(`${this.baseUrl}/clients/${t}/data`,h({roomId:e},s))}transferToAgent(e){return this.http.post(`${this.baseUrl}/transfer-to-human`,{roomId:e})}getAgentRooms(e,t){let s=new g;return t&&(s=s.set("status",t)),this.http.get(`${this.baseUrl}/agent/rooms/organization/${e}`,{params:s})}assignAgent(e,t){return this.http.patch(`${this.baseUrl}/rooms/${e}/assign`,{agentId:t})}getWaitingRooms(e){return this.http.get(`${this.baseUrl}/rooms/waiting`,{params:new g().set("storeId",e)})}static \u0275fac=function(t){return new(t||l)(d(u))};static \u0275prov=p({token:l,factory:l.\u0275fac,providedIn:"root"})};export{c as a,I as b,b as c};
