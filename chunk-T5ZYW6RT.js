import{a as x,b as R}from"./chunk-WFQK2EUE.js";import{$ as u,D as g,c as T,da as b,jd as h,k as E,m as i,md as A,q as m}from"./chunk-KCIJXSXQ.js";import{g as _,h as d}from"./chunk-WWX6BADO.js";var f=_(R());var O=class l{ENCRYPTED_API_KEY="U2FsdGVkX19ILCT33NvRMnrfGuGerBksJREzwCDAIb7VpwUoVn/Oc3vrAqfYplC8SjPFUU3npbu+85eFwOKgpw==";ENCRYPTION_KEY="ezReader";API_KEY;ai;constructor(){try{let e=f.AES.decrypt(this.ENCRYPTED_API_KEY,this.ENCRYPTION_KEY);this.API_KEY=e.toString(f.enc.Utf8)}catch(e){console.error("API \uD0A4 \uBCF5\uD638\uD654 \uC2E4\uD328:",e),this.API_KEY=""}this.ai=new x({apiKey:this.API_KEY}),console.log("GeminiTranslationService initialized with gemini-2.5-flash model")}translateText(e,s){if(!e.trim())return i(()=>new Error("\uBC88\uC5ED\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));let a={english:"English",korean:"Korean",japanese:"Japanese",chinese:"Chinese",spanish:"Spanish",french:"French",german:"German"}[s]||"English",o=`Translate the following text to ${a}. Provide only the translation without any explanations or additional text:

${e}`;return E(this.ai.models.generateContent({model:"gemini-2.5-flash",contents:o})).pipe(m(n=>{if(console.log("Gemini API \uBC88\uC5ED \uC751\uB2F5:",n),n&&n.text){let t=n.text.trim();return{originalText:e,translatedText:t,targetLanguage:a,success:!0}}else throw new Error("\uBC88\uC5ED \uC751\uB2F5\uC744 \uBC1B\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}),g(n=>{console.error("Gemini API \uBC88\uC5ED \uC624\uB958:",n);let t="\uBC88\uC5ED \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";return n.message&&(t=n.message),i(()=>({originalText:e,translatedText:"",targetLanguage:a,success:!1,error:t}))}))}translateMultipleTexts(e,s){let p=[];return new T(a=>{let o=0,n=()=>{if(o>=e.length){a.next(p),a.complete();return}let t=e[o];this.translateText(t,s).subscribe({next:r=>{p.push(r),o++,setTimeout(n,100)},error:r=>{p.push({originalText:t,translatedText:"",targetLanguage:s,success:!1,error:r.message||"\uBC88\uC5ED \uC2E4\uD328"}),o++,setTimeout(n,100)}})};n()})}static \u0275fac=function(s){return new(s||l)};static \u0275prov=u({token:l,factory:l.\u0275fac,providedIn:"root"})};var y=class l{constructor(e){this.http=e}OLLAMA_BASE_URL="http://localhost:11434";TARGET_MODEL="gemma3:1b";checkOllamaAvailability(){return d(this,null,function*(){return!1})}translateText(e,s){if(!e.trim())return i(()=>new Error("\uBC88\uC5ED\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));let o=`\uB2E4\uC74C \uD14D\uC2A4\uD2B8\uB97C ${{english:"\uC601\uC5B4",korean:"\uD55C\uAD6D\uC5B4",japanese:"\uC77C\uBCF8\uC5B4",chinese:"\uC911\uAD6D\uC5B4",spanish:"\uC2A4\uD398\uC778\uC5B4",french:"\uD504\uB791\uC2A4\uC5B4",german:"\uB3C5\uC77C\uC5B4"}[s]||s}\uB85C \uBC88\uC5ED\uD574\uC8FC\uC138\uC694. \uBC88\uC5ED\uB41C \uB0B4\uC6A9\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.

\uD14D\uC2A4\uD2B8:
${e}

\uBC88\uC5ED:`,n={model:this.TARGET_MODEL,prompt:o,stream:!1,options:{temperature:.3,top_p:.9,max_tokens:4e3}},t=new h({"Content-Type":"application/json"});return this.http.post(`${this.OLLAMA_BASE_URL}/api/generate`,n,{headers:t}).pipe(m(r=>{if(r.response&&r.response.trim())return{originalText:e,translatedText:r.response.trim(),targetLanguage:s,success:!0};throw new Error("\uBC88\uC5ED \uC751\uB2F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.")}),g(r=>{let c="\uB85C\uCEEC AI \uBC88\uC5ED \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";return r.status===0?c="Ollama \uC11C\uBC84\uC5D0 \uC5F0\uACB0\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. Ollama\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.":r.status===404?c=`${this.TARGET_MODEL} \uBAA8\uB378\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBAA8\uB378\uC744 \uC124\uCE58\uD574\uC8FC\uC138\uC694.`:r.error?.error?c=r.error.error:r.message&&(c=r.message),i(()=>({originalText:e,translatedText:"",targetLanguage:s,success:!1,error:c}))}))}summarizeText(e,s="general",p="medium"){if(!e.trim())return i(()=>new Error("\uC694\uC57D\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));let a="";switch(s){case"bullet":a="\uB2E4\uC74C \uBB38\uC11C\uC758 \uD575\uC2EC \uD3EC\uC778\uD2B8\uB97C \uBC88\uD638\uAC00 \uB9E4\uACA8\uC9C4 \uBAA9\uB85D\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"qa":a="\uB2E4\uC74C \uBB38\uC11C\uB97C Q&A \uD615\uC2DD\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. \uC8FC\uC694 \uC9C8\uBB38\uACFC \uB2F5\uBCC0\uC73C\uB85C \uAD6C\uC131\uD574\uC8FC\uC138\uC694. ";break;case"structure":a="\uB2E4\uC74C \uBB38\uC11C\uB97C \uAD6C\uC870\uC801\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. \uC81C\uBAA9, \uC8FC\uC694 \uC139\uC158, \uD575\uC2EC \uB0B4\uC6A9\uC744 \uCCB4\uACC4\uC801\uC73C\uB85C \uC815\uB9AC\uD574\uC8FC\uC138\uC694. ";break;default:a="\uB2E4\uC74C \uBB38\uC11C\uB97C \uC694\uC57D\uD574\uC8FC\uC138\uC694. "}switch(p){case"short":a+="\uAC04\uACB0\uD558\uAC8C 1-2\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"long":a+="\uC790\uC138\uD558\uAC8C 5-6\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;default:a+="\uC801\uC808\uD55C \uAE38\uC774\uB85C 3-4\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. "}a+=`\uD55C\uAD6D\uC5B4\uB85C \uC791\uC131\uD574\uC8FC\uC138\uC694. \uC694\uC57D\uB41C \uB0B4\uC6A9\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.

\uBB38\uC11C \uB0B4\uC6A9:
${e}`;let o={model:this.TARGET_MODEL,prompt:a,stream:!1,options:{temperature:.3,top_p:.9,max_tokens:4e3}},n=new h({"Content-Type":"application/json"});return this.http.post(`${this.OLLAMA_BASE_URL}/api/generate`,o,{headers:n}).pipe(m(t=>{if(t.response&&t.response.trim())return{originalText:e,translatedText:t.response.trim(),targetLanguage:"korean",success:!0};throw new Error("\uC694\uC57D \uC751\uB2F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.")}),g(t=>{let r="\uB85C\uCEEC AI \uC694\uC57D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";return t.status===0?r="Ollama \uC11C\uBC84\uC5D0 \uC5F0\uACB0\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. Ollama\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.":t.status===404?r=`${this.TARGET_MODEL} \uBAA8\uB378\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBAA8\uB378\uC744 \uC124\uCE58\uD574\uC8FC\uC138\uC694.`:t.error?.error?r=t.error.error:t.message&&(r=t.message),i(()=>({originalText:e,translatedText:"",targetLanguage:"korean",success:!1,error:r}))}))}getAvailableModels(){return d(this,null,function*(){return[]})}static \u0275fac=function(s){return new(s||l)(b(A))};static \u0275prov=u({token:l,factory:l.\u0275fac,providedIn:"root"})};export{O as a,y as b};
