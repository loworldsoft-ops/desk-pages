import{a as Lt}from"./chunk-TT7UNWGD.js";import"./chunk-IVM4L2KM.js";import{a as Tt}from"./chunk-SJVX2RDN.js";import{a as kt,b as St}from"./chunk-6TS7TTRT.js";import{a as Pe}from"./chunk-GW37IABN.js";import{a as It}from"./chunk-I7LDI25N.js";import{a as Ot,b as Pt,c as yt,d as wt}from"./chunk-URZ7EM6I.js";import{a as W,b as $t}from"./chunk-NDZUP4Y3.js";import{a as Et}from"./chunk-SENQYQUC.js";import"./chunk-TQB7XTTO.js";import{a as ne}from"./chunk-4DRAGH36.js";import{b as gt}from"./chunk-UAIKZSXH.js";import{k as pt}from"./chunk-YKT2DST2.js";import"./chunk-ZTC7FD34.js";import{e as N}from"./chunk-IETAKAO6.js";import{b as B}from"./chunk-DKJAT7FW.js";import"./chunk-JCPHBM2G.js";import{b as ht,c as ft,e as bt,f as Ct,i as ce,j as _t,k as vt,l as xt,p as me,q as Mt}from"./chunk-ECCXUGB5.js";import{a as E,b as ut}from"./chunk-LJMAQA5N.js";import{a as ot,c as rt,e as st,f as lt,g as ct,h as mt}from"./chunk-VTZTOIJT.js";import{qa as U,sa as z,va as dt}from"./chunk-E2QGNPJC.js";import{b as at,d as Y,g as Oe}from"./chunk-ERU5XYPD.js";import{e as Se,g as Ge,i as Je}from"./chunk-XRSSTKR3.js";import{D as tt,E as nt,F as it,c as se,e as q,h as le,i as Ke,l as qe,m as Ye,n as We,r as Xe,s as Ze,v as et}from"./chunk-26VDYJPQ.js";import{$b as M,Ac as Re,Dd as He,F as Ae,Gc as Ve,Id as Qe,Lb as u,Mb as h,Nc as A,Oc as j,Pb as I,Pc as ze,Qb as T,Rb as C,Sb as a,Tb as o,Ub as y,W as p,Y as R,Ya as V,aa as $,ba as ae,bb as l,bc as m,c as Le,dc as d,ea as k,f as v,fa as oe,g as w,hb as x,hc as G,ic as J,jc as K,ka as f,la as b,nc as Ue,ob as S,pb as re,pc as D,q as ke,sc as s,tc as _,td as Ne,ub as De,uc as L,xb as P,yc as Fe,zc as je,zd as Be}from"./chunk-UMLP25CN.js";import{a as te,b as Te,h as Ee}from"./chunk-WWX6BADO.js";var F=class i{constructor(e,t){this.http=e;this.userManagementService=t;this.debugLogger.info("SlackAPI","\u{1F527} SlackApiService \uCD08\uAE30\uD654"),this.debugLogger.info("SlackAPI",`API Base URL: ${this.baseUrl}`)}baseUrl=ne.apiUrl+"/slack";debugLogger=oe(N);getChannels(){return this.debugLogger.info("SlackAPI","\u{1F4DE} GET /slack/channels \uD638\uCD9C"),this.http.get(`${this.baseUrl}/channels`).pipe(R(e=>{this.debugLogger.success("SlackAPI",`\u2705 \uCC44\uB110 \uC870\uD68C \uC131\uACF5: ${e.length}\uAC1C`)}))}getChannel(e){return this.debugLogger.info("SlackAPI",`\u{1F4DE} GET /slack/channels/${e} \uD638\uCD9C`),this.http.get(`${this.baseUrl}/channels/${e}`).pipe(R(t=>{this.debugLogger.success("SlackAPI",`\u2705 \uCC44\uB110 \uC870\uD68C \uC131\uACF5: ${t.name}`)}))}createChannel(e){return this.debugLogger.info("SlackAPI","\u{1F4DE} POST /slack/channels \uD638\uCD9C"),this.debugLogger.info("SlackAPI",`\uC694\uCCAD URL: ${this.baseUrl}/channels`),this.debugLogger.info("SlackAPI",`\uC694\uCCAD \uB370\uC774\uD130: ${JSON.stringify(e)}`),this.http.post(`${this.baseUrl}/channels`,e).pipe(R(t=>{this.debugLogger.success("SlackAPI",`\u2705 \uCC44\uB110 \uC0DD\uC131 \uC131\uACF5: ${t.name} (ID: ${t.id})`),this.debugLogger.info("SlackAPI",`\uC751\uB2F5 \uB370\uC774\uD130: ${JSON.stringify(t)}`)}))}deleteChannel(e){return this.http.delete(`${this.baseUrl}/channels/${e}`)}addMember(e,t){return this.http.post(`${this.baseUrl}/channels/${e}/members`,{userId:t})}removeMember(e,t){return this.http.delete(`${this.baseUrl}/channels/${e}/members/${t}`)}getMessages(e,t=1,n=50){let r=new Se().set("page",t.toString()).set("limit",n.toString());return this.http.get(`${this.baseUrl}/channels/${e}/messages`,{params:r})}sendMessage(e){return this.http.post(`${this.baseUrl}/messages`,e)}updateMessage(e,t){return this.http.put(`${this.baseUrl}/messages/${e}`,{text:t})}deleteMessage(e){return this.http.delete(`${this.baseUrl}/messages/${e}`)}getThreadReplies(e){return this.http.get(`${this.baseUrl}/messages/${e}/replies`)}replyToThread(e,t){return this.http.post(`${this.baseUrl}/messages/${e}/replies`,{text:t})}uploadFiles(e,t){let n=new FormData;n.append("channelId",e);for(let r=0;r<t.length;r++)n.append("files",t[r]);return this.http.post(`${this.baseUrl}/files/upload`,n)}getFileDownloadUrl(e){return`${this.baseUrl}/files/${e}/download`}getUsers(){return this.debugLogger.info("SlackAPI","\u{1F4DE} Store \uD68C\uC6D0 \uBAA9\uB85D \uC870\uD68C (UserManagementService)"),this.userManagementService.getAllUsers().pipe(R(e=>{this.debugLogger.info("SlackAPI",`Store \uD68C\uC6D0 \uC218\uC2E0: ${e.length}\uBA85`)}),ke(e=>e.map(t=>this.convertStoreUserToSlackUser(t))),R(e=>{this.debugLogger.success("SlackAPI",`\u2705 Slack \uC0AC\uC6A9\uC790 \uBCC0\uD658 \uC644\uB8CC: ${e.length}\uBA85`)}))}getUser(e){return this.debugLogger.info("SlackAPI",`\u{1F4DE} Store \uD68C\uC6D0 \uC870\uD68C: ${e}`),this.userManagementService.getUserById(e).pipe(R(t=>{this.debugLogger.info("SlackAPI",`Store \uD68C\uC6D0 \uC218\uC2E0: ${t.name}`)}),ke(t=>this.convertStoreUserToSlackUser(t)),R(t=>{this.debugLogger.success("SlackAPI",`\u2705 Slack \uC0AC\uC6A9\uC790 \uBCC0\uD658 \uC644\uB8CC: ${t.name}`)}))}convertStoreUserToSlackUser(e){return{id:e.userIdx||e.id,name:e.name,email:e.email,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random`,status:e.status==="ACTIVE"?"online":"offline",customStatus:this.getRoleDisplayName(e.role)}}getRoleDisplayName(e){return{CUSTOMER:"\uACE0\uAC1D",SELLER:"\uD310\uB9E4\uC790",ADMIN:"\uAD00\uB9AC\uC790",SUPER_ADMIN:"\uCD5C\uACE0 \uAD00\uB9AC\uC790"}[e]||e}updateUserStatus(e,t){return this.http.put(`${this.baseUrl}/users/me/status`,{status:e,customStatus:t})}searchMessages(e,t){let n=new Se().set("q",e);return t&&(n=n.set("channelId",t)),this.http.get(`${this.baseUrl}/search/messages`,{params:n})}static \u0275fac=function(t){return new(t||i)(k(Ge),k(Lt))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var H=class i{constructor(e){this.chatTalkSocket=e;this.setupSlackEventListeners()}messageReceived$=new v;messageDeleted$=new v;messageUpdated$=new v;reactionAdded$=new v;reactionRemoved$=new v;channelCreated$=new v;channelUpdated$=new v;userTyping$=new v;onlineUsers$=new v;userOnline$=new v;userOffline$=new v;onlineUserIds=new Set;setupSlackEventListeners(){this.chatTalkSocket.listenEvent("slack:message:received",e=>{this.messageReceived$.next(e)}),this.chatTalkSocket.listenEvent("slack:message:deleted",e=>{this.messageDeleted$.next(e)}),this.chatTalkSocket.listenEvent("slack:message:updated",e=>{this.messageUpdated$.next(e)}),this.chatTalkSocket.listenEvent("slack:reaction:added",e=>{this.reactionAdded$.next(e)}),this.chatTalkSocket.listenEvent("slack:reaction:removed",e=>{this.reactionRemoved$.next(e)}),this.chatTalkSocket.listenEvent("slack:channel:created",e=>{this.channelCreated$.next(e)}),this.chatTalkSocket.listenEvent("slack:channel:updated",e=>{this.channelUpdated$.next(e)}),this.chatTalkSocket.listenEvent("slack:user:typing",e=>{this.userTyping$.next(e)}),this.chatTalkSocket.listenEvent("slack:users:online",e=>{this.onlineUserIds=new Set(e),this.onlineUsers$.next(e)}),this.chatTalkSocket.listenEvent("slack:user:online",e=>{this.onlineUserIds.add(e),this.userOnline$.next(e),this.onlineUsers$.next(Array.from(this.onlineUserIds))}),this.chatTalkSocket.listenEvent("slack:user:offline",e=>{this.onlineUserIds.delete(e),this.userOffline$.next(e),this.onlineUsers$.next(Array.from(this.onlineUserIds))})}connect(e){return Ee(this,null,function*(){yield this.chatTalkSocket.connect(),this.chatTalkSocket.emitEvent("slack:register:user",{userId:e})})}disconnect(){}joinChannel(e){this.chatTalkSocket.emitEvent("slack:channel:join",{channelId:e})}leaveChannel(e){this.chatTalkSocket.emitEvent("slack:channel:leave",{channelId:e})}sendMessage(e,t,n){this.chatTalkSocket.emitEvent("slack:message:send",{channelId:e,text:t,files:n,timestamp:new Date})}deleteMessage(e){this.chatTalkSocket.emitEvent("slack:message:delete",{messageId:e})}updateMessage(e,t){this.chatTalkSocket.emitEvent("slack:message:update",{messageId:e,text:t})}toggleReaction(e,t){this.chatTalkSocket.emitEvent("slack:reaction:toggle",{messageId:e,emoji:t})}sendTypingStatus(e,t){this.chatTalkSocket.emitEvent("slack:user:typing",{channelId:e,isTyping:t})}isUserOnline(e){return this.onlineUserIds.has(e)}getOnlineUserIds(){return Array.from(this.onlineUserIds)}get isConnected$(){return new Le(e=>{let t=()=>{e.next(this.chatTalkSocket.isConnected())};t();let n=setInterval(t,1e3);return()=>clearInterval(n)})}get onMessageReceived$(){return this.messageReceived$.asObservable()}get onMessageDeleted$(){return this.messageDeleted$.asObservable()}get onMessageUpdated$(){return this.messageUpdated$.asObservable()}get onReactionAdded$(){return this.reactionAdded$.asObservable()}get onReactionRemoved$(){return this.reactionRemoved$.asObservable()}get onChannelCreated$(){return this.channelCreated$.asObservable()}get onChannelUpdated$(){return this.channelUpdated$.asObservable()}get onUserTyping$(){return this.userTyping$.asObservable()}get onOnlineUsersChanged$(){return this.onlineUsers$.asObservable()}get onUserOnline$(){return this.userOnline$.asObservable()}get onUserOffline$(){return this.userOffline$.asObservable()}static \u0275fac=function(t){return new(t||i)(k(Et))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var X=class i{constructor(e,t){this.apiService=e;this.socketAdapter=t;this.debugLogger.info("SlackChannel","\u{1F680} ChannelViewModel \uCD08\uAE30\uD654"),this.initializeSocketListeners()}destroy$=new v;debugLogger=oe(N);channels$=new w([]);activeChannel$=new w(null);isLoading$=new w(!1);initializeSocketListeners(){this.debugLogger.info("SlackChannel","\u{1F442} Socket \uC774\uBCA4\uD2B8 \uB9AC\uC2A4\uB108 \uCD08\uAE30\uD654"),this.socketAdapter.onChannelCreated$.pipe(p(this.destroy$)).subscribe(e=>{this.debugLogger.success("SlackChannel",`\u2705 \uC0C8 \uCC44\uB110 \uC0DD\uC131\uB428: ${e.name} (ID: ${e.id})`);let t=this.channels$.value;this.channels$.next([...t,e])}),this.socketAdapter.onChannelUpdated$.pipe(p(this.destroy$)).subscribe(e=>{this.debugLogger.info("SlackChannel",`\u{1F4DD} \uCC44\uB110 \uC5C5\uB370\uC774\uD2B8\uB428: ${e.name}`);let t=this.channels$.value,n=t.findIndex(r=>r.id===e.id);if(n!==-1){let r=[...t];r[n]=e,this.channels$.next(r),this.activeChannel$.value?.id===e.id&&this.activeChannel$.next(e)}})}loadChannels(){this.debugLogger.info("SlackChannel","\u{1F4DE} \uCC44\uB110 \uBAA9\uB85D \uB85C\uB4DC \uC2DC\uC791"),this.isLoading$.next(!0),this.apiService.getChannels().pipe(p(this.destroy$)).subscribe({next:e=>{this.debugLogger.success("SlackChannel",`\u2705 \uCC44\uB110 \uBAA9\uB85D \uB85C\uB4DC \uC131\uACF5: ${e.length}\uAC1C`),this.debugLogger.info("SlackChannel",`\uCC44\uB110 \uBAA9\uB85D: ${JSON.stringify(e.map(t=>t.name))}`),this.channels$.next(e),this.isLoading$.next(!1)},error:e=>{this.debugLogger.error("SlackChannel",`\u274C \uCC44\uB110 \uBAA9\uB85D \uB85C\uB4DC \uC2E4\uD328: ${e.message}`),this.isLoading$.next(!1)}})}selectChannel(e){this.debugLogger.info("SlackChannel",`\u{1F3AF} \uCC44\uB110 \uC120\uD0DD: ${e}`),this.isLoading$.next(!0),this.apiService.getChannel(e).pipe(p(this.destroy$)).subscribe({next:t=>{this.debugLogger.success("SlackChannel",`\u2705 \uCC44\uB110 \uC120\uD0DD \uC131\uACF5: ${t.name}`),this.activeChannel$.next(t),this.socketAdapter.joinChannel(e),this.isLoading$.next(!1)},error:t=>{this.debugLogger.error("SlackChannel",`\u274C \uCC44\uB110 \uC120\uD0DD \uC2E4\uD328: ${t.message}`),this.isLoading$.next(!1)}})}createChannel(e,t,n,r){this.debugLogger.info("SlackChannel","\u{1F528} \uCC44\uB110 \uC0DD\uC131 \uC2DC\uC791"),this.debugLogger.info("SlackChannel",`\uCC44\uB110\uBA85: ${e}`),this.debugLogger.info("SlackChannel",`\uC124\uBA85: ${t}`),this.debugLogger.info("SlackChannel",`\uBE44\uACF5\uAC1C: ${n}`),this.debugLogger.info("SlackChannel",`\uBA64\uBC84 \uC218: ${r.length}\uBA85`),this.debugLogger.info("SlackChannel",`\uBA64\uBC84 IDs: ${JSON.stringify(r)}`),this.isLoading$.next(!0);let c={name:e,description:t,isPrivate:n,members:r};this.debugLogger.info("SlackChannel",`API \uD638\uCD9C \uB370\uC774\uD130: ${JSON.stringify(c)}`),this.apiService.createChannel(c).pipe(p(this.destroy$)).subscribe({next:g=>{this.debugLogger.success("SlackChannel",`\u2705 \uCC44\uB110 \uC0DD\uC131 \uC131\uACF5: ${g.name} (ID: ${g.id})`),this.debugLogger.info("SlackChannel",`\uC0DD\uC131\uB41C \uCC44\uB110 \uB370\uC774\uD130: ${JSON.stringify(g)}`),this.selectChannel(g.id),this.isLoading$.next(!1)},error:g=>{this.debugLogger.error("SlackChannel","\u274C \uCC44\uB110 \uC0DD\uC131 \uC2E4\uD328"),this.debugLogger.error("SlackChannel",`\uC5D0\uB7EC \uBA54\uC2DC\uC9C0: ${g.message}`),this.debugLogger.error("SlackChannel",`\uC5D0\uB7EC \uC0C1\uD0DC: ${g.status}`),this.debugLogger.error("SlackChannel",`\uC5D0\uB7EC \uC804\uCCB4: ${JSON.stringify(g)}`),this.isLoading$.next(!1)}})}deleteChannel(e){this.apiService.deleteChannel(e).pipe(p(this.destroy$)).subscribe({next:()=>{let t=this.channels$.value;this.channels$.next(t.filter(n=>n.id!==e)),this.activeChannel$.value?.id===e&&this.activeChannel$.next(null)},error:t=>{}})}addMember(e,t){this.apiService.addMember(e,t).pipe(p(this.destroy$)).subscribe({next:n=>{},error:n=>{}})}removeMember(e,t){this.apiService.removeMember(e,t).pipe(p(this.destroy$)).subscribe({next:n=>{},error:n=>{}})}getChannels(){return this.channels$.asObservable()}getActiveChannel(){return this.activeChannel$.asObservable()}getIsLoading(){return this.isLoading$.asObservable()}ngOnDestroy(){let e=this.activeChannel$.value;e&&this.socketAdapter.leaveChannel(e.id),this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(k(F),k(H))};static \u0275prov=$({token:i,factory:i.\u0275fac})};var Z=class i{constructor(e,t){this.apiService=e;this.socketAdapter=t;this.initializeSocketListeners(),this.initializeTypingHandler()}destroy$=new v;messages$=new w([]);isLoading$=new w(!1);isFileUploading$=new w(!1);uploadedFiles$=new w([]);typingUsers$=new w(new Set);messageForm=new qe("",[q.required,q.maxLength(5e3)]);currentPage=1;hasMore=!0;initializeSocketListeners(){this.socketAdapter.onMessageReceived$.pipe(p(this.destroy$)).subscribe(e=>{let t=this.messages$.value;this.messages$.next([...t,e])}),this.socketAdapter.onMessageDeleted$.pipe(p(this.destroy$)).subscribe(e=>{let t=this.messages$.value;this.messages$.next(t.filter(n=>n.id!==e))}),this.socketAdapter.onMessageUpdated$.pipe(p(this.destroy$)).subscribe(e=>{let t=this.messages$.value,n=t.findIndex(r=>r.id===e.id);if(n!==-1){let r=[...t];r[n]=e,this.messages$.next(r)}}),this.socketAdapter.onReactionAdded$.pipe(p(this.destroy$)).subscribe(({messageId:e,reaction:t})=>{this.addReactionToMessage(e,t)}),this.socketAdapter.onReactionRemoved$.pipe(p(this.destroy$)).subscribe(({messageId:e,emoji:t,userId:n})=>{this.removeReactionFromMessage(e,t,n)}),this.socketAdapter.onUserTyping$.pipe(p(this.destroy$)).subscribe(({userId:e,isTyping:t})=>{let n=new Set(this.typingUsers$.value);t?n.add(e):n.delete(e),this.typingUsers$.next(n)})}initializeTypingHandler(){this.messageForm.valueChanges.pipe(Ae(300),p(this.destroy$)).subscribe(e=>{})}loadMessages(e,t=!1){!this.hasMore&&!t||(t&&(this.currentPage=1,this.messages$.next([])),this.isLoading$.next(!0),this.apiService.getMessages(e,this.currentPage,50).pipe(p(this.destroy$)).subscribe({next:({messages:n,hasMore:r})=>{let c=this.messages$.value;this.messages$.next([...n.reverse(),...c]),this.hasMore=r,this.currentPage++,this.isLoading$.next(!1)},error:n=>{this.isLoading$.next(!1)}}))}sendMessage(e){let t=this.messageForm.value?.trim();if(!t&&this.uploadedFiles$.value.length===0)return;let n=this.uploadedFiles$.value.map(r=>r.id);this.socketAdapter.sendMessage(e,t||"",n),this.messageForm.reset(),this.uploadedFiles$.next([])}deleteMessage(e){this.socketAdapter.deleteMessage(e)}updateMessage(e,t){this.socketAdapter.updateMessage(e,t)}toggleReaction(e,t){this.socketAdapter.toggleReaction(e,t)}uploadFiles(e,t){t.length!==0&&(this.isFileUploading$.next(!0),this.apiService.uploadFiles(e,t).pipe(p(this.destroy$)).subscribe({next:n=>{let r=this.uploadedFiles$.value;this.uploadedFiles$.next([...r,...n]),this.isFileUploading$.next(!1)},error:n=>{this.isFileUploading$.next(!1)}}))}removeUploadedFile(e){let t=this.uploadedFiles$.value;this.uploadedFiles$.next(t.filter(n=>n.id!==e))}addReactionToMessage(e,t){let n=this.messages$.value,r=n.findIndex(c=>c.id===e);if(r!==-1){let c=[...n],g=te({},c[r]);g.reactions=[...g.reactions,t],c[r]=g,this.messages$.next(c)}}removeReactionFromMessage(e,t,n){let r=this.messages$.value,c=r.findIndex(g=>g.id===e);if(c!==-1){let g=[...r],Me=te({},g[c]);Me.reactions=Me.reactions.filter(Ie=>!(Ie.emoji===t&&Ie.userId===n)),g[c]=Me,this.messages$.next(g)}}groupReactions(e){let t=new Map;return e.forEach(n=>{t.has(n.emoji)||t.set(n.emoji,{count:0,userIds:[]});let r=t.get(n.emoji);r.count++,r.userIds.push(n.userId)}),Array.from(t.entries()).map(([n,r])=>({emoji:n,count:r.count,userIds:r.userIds}))}hasUserReacted(e,t,n){return e.some(r=>r.emoji===t&&r.userId===n)}getMessages(){return this.messages$.asObservable()}getIsLoading(){return this.isLoading$.asObservable()}getIsFileUploading(){return this.isFileUploading$.asObservable()}getUploadedFiles(){return this.uploadedFiles$.asObservable()}getTypingUsers(){return this.typingUsers$.asObservable()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(k(F),k(H))};static \u0275prov=$({token:i,factory:i.\u0275fac})};var Q=class i{constructor(e){this.router=e;this.checkSessionExpiry()}STORAGE_KEY="slack_auth_token";SESSION_KEY="slack_session_timestamp";SESSION_DURATION=480*60*1e3;isAuthenticatedSubject=new w(this.checkAuth());isAuthenticated$=this.isAuthenticatedSubject.asObservable();AUTH_HASH=this.simpleHash(Pe.decrypt(ne.auth.username)+Pe.decrypt(ne.auth.password));login(e,t){if(this.simpleHash(e+t)===this.AUTH_HASH){let r=Date.now().toString();return sessionStorage.setItem(this.STORAGE_KEY,"authenticated"),sessionStorage.setItem(this.SESSION_KEY,r),this.isAuthenticatedSubject.next(!0),!0}return!1}logout(){console.log("[SlackAuth] \uB85C\uADF8\uC544\uC6C3");try{sessionStorage.removeItem(this.STORAGE_KEY),sessionStorage.removeItem(this.SESSION_KEY),this.isAuthenticatedSubject.next(!1)}catch(e){console.error("[SlackAuth] \uB85C\uADF8\uC544\uC6C3 \uC911 \uC624\uB958:",e)}finally{this.router.navigate(["/slack/login"]).catch(e=>{console.error("[SlackAuth] \uB124\uBE44\uAC8C\uC774\uC158 \uC608\uC678 \uBC1C\uC0DD:",e),window.location.hash="#/slack/login"})}}isAuthenticated(){return this.checkAuth()}checkAuth(){let e=sessionStorage.getItem(this.STORAGE_KEY),t=sessionStorage.getItem(this.SESSION_KEY);if(!e||!t)return!1;let n=parseInt(t,10);return Date.now()-n>this.SESSION_DURATION?(this.logout(),!1):e==="authenticated"}checkSessionExpiry(){setInterval(()=>{!this.checkAuth()&&this.isAuthenticatedSubject.value&&this.logout()},6e4)}simpleHash(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<5)-t+r,t=t&t}return t.toString(36)}static \u0275fac=function(t){return new(t||i)(k(Y))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ut=(i,e)=>e.id;function Qt(i,e){i&1&&(a(0,"mat-error"),s(1,"\uCC44\uB110 \uC774\uB984\uC740 \uD544\uC218\uC785\uB2C8\uB2E4"),o())}function Gt(i,e){i&1&&(a(0,"mat-error"),s(1,"\uCC44\uB110 \uC774\uB984\uC740 \uCD5C\uC18C 2\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4"),o())}function Jt(i,e){i&1&&(a(0,"mat-icon"),s(1,"lock"),o(),s(2," Only invited members can see this channel "))}function Kt(i,e){i&1&&(a(0,"mat-icon"),s(1,"tag"),o(),s(2," Anyone can join this channel "))}function qt(i,e){if(i&1){let t=M();a(0,"button",20),m("click",function(){f(t);let r=d();return b(r.searchQuery="")}),a(1,"mat-icon"),s(2,"close"),o()()}}function Yt(i,e){if(i&1){let t=M();a(0,"div",22),y(1,"img",23),a(2,"span"),s(3),o(),a(4,"button",24),m("click",function(){let r=f(t).$implicit,c=d(2);return b(c.toggleMember(r))}),a(5,"mat-icon"),s(6,"close"),o()()()}if(i&2){let t=e.$implicit;l(),C("src",t.avatar,V)("alt",t.name),l(2),_(t.name)}}function Wt(i,e){if(i&1&&(a(0,"div",13)(1,"h4"),s(2,"Selected Members:"),o(),a(3,"div",21),I(4,Yt,7,3,"div",22,Ut),o()()),i&2){let t=d();l(4),T(t.selectedMembers)}}function Xt(i,e){i&1&&(a(0,"div",15),y(1,"mat-spinner",25),a(2,"p"),s(3,"Loading members..."),o()())}function Zt(i,e){i&1&&(a(0,"div",16)(1,"mat-icon"),s(2,"person_off"),o(),a(3,"p"),s(4,"No members found"),o()())}function en(i,e){if(i&1&&(a(0,"span",35),s(1),o()),i&2){let t=d().$implicit;l(),_(t.customStatus)}}function tn(i,e){if(i&1){let t=M();a(0,"div",27),m("click",function(){let r=f(t).$implicit,c=d(2);return b(c.toggleMember(r))}),a(1,"div",28),y(2,"img",29),a(3,"div",30)(4,"div",31),s(5),a(6,"mat-icon",32),s(7," fiber_manual_record "),o()(),a(8,"div",33)(9,"span",34),s(10),o(),u(11,en,2,1,"span",35),o()()(),a(12,"mat-checkbox",36),m("click",function(r){return f(t),b(r.stopPropagation())})("change",function(){let r=f(t).$implicit,c=d(2);return b(c.toggleMember(r))}),o()()}if(i&2){let t=e.$implicit,n=d(2);D("selected",n.isMemberSelected(t.id)),l(2),C("src",t.avatar,V)("alt",t.name),l(3),L(" ",t.name," "),l(),D("online",t.status==="online"),l(4),_(t.email),l(),h(t.customStatus?11:-1),l(),C("checked",n.isMemberSelected(t.id))}}function nn(i,e){if(i&1&&I(0,tn,13,10,"div",26,Ut),i&2){let t=d();T(t.filteredUsers)}}var ge=class i{constructor(e,t,n,r){this.fb=e;this.dialogRef=t;this.slackApiService=n;this.debugLogger=r;this.debugLogger.info("SlackDialog","\u{1F3A8} \uCC44\uB110 \uC0DD\uC131 \uB2E4\uC774\uC5BC\uB85C\uADF8 \uC5F4\uB9BC"),this.channelForm=this.fb.group({name:["",[q.required,q.minLength(2)]],description:[""],isPrivate:[!1]})}destroy$=new v;channelForm;allUsers=[];selectedMembers=[];isLoading=!1;searchQuery="";ngOnInit(){this.debugLogger.info("SlackDialog","\u{1F504} \uB2E4\uC774\uC5BC\uB85C\uADF8 \uCD08\uAE30\uD654"),this.loadUsers()}loadUsers(){this.debugLogger.info("SlackDialog","\u{1F4DE} Store \uD68C\uC6D0 \uBAA9\uB85D \uB85C\uB4DC \uC2DC\uC791"),this.isLoading=!0,this.slackApiService.getUsers().pipe(p(this.destroy$)).subscribe({next:e=>{this.debugLogger.success("SlackDialog",`\u2705 \uD68C\uC6D0 \uB85C\uB4DC \uC131\uACF5: ${e.length}\uBA85`),this.debugLogger.info("SlackDialog",`\uD68C\uC6D0 \uBAA9\uB85D: ${JSON.stringify(e.map(t=>({id:t.id,name:t.name})))}`),this.allUsers=e,this.isLoading=!1},error:e=>{this.debugLogger.error("SlackDialog",`\u274C \uD68C\uC6D0 \uB85C\uB4DC \uC2E4\uD328: ${e.message}`),this.debugLogger.error("SlackDialog",`\uC5D0\uB7EC \uC804\uCCB4: ${JSON.stringify(e)}`),this.isLoading=!1}})}toggleMember(e){let t=this.selectedMembers.findIndex(n=>n.id===e.id);t>-1?(this.debugLogger.info("SlackDialog",`\u2796 \uBA64\uBC84 \uC120\uD0DD \uD574\uC81C: ${e.name} (${e.id})`),this.selectedMembers.splice(t,1)):(this.debugLogger.info("SlackDialog",`\u2795 \uBA64\uBC84 \uC120\uD0DD: ${e.name} (${e.id})`),this.selectedMembers.push(e)),this.debugLogger.info("SlackDialog",`\uD604\uC7AC \uC120\uD0DD\uB41C \uBA64\uBC84 \uC218: ${this.selectedMembers.length}\uBA85`)}isMemberSelected(e){return this.selectedMembers.some(t=>t.id===e)}get filteredUsers(){if(!this.searchQuery)return this.allUsers;let e=this.searchQuery.toLowerCase();return this.allUsers.filter(t=>t.name.toLowerCase().includes(e)||t.email.toLowerCase().includes(e))}createChannel(){if(this.channelForm.invalid){this.debugLogger.warn("SlackDialog","\u26A0\uFE0F \uD3FC \uC720\uD6A8\uC131 \uAC80\uC0AC \uC2E4\uD328"),this.debugLogger.info("SlackDialog",`\uD3FC \uC5D0\uB7EC: ${JSON.stringify(this.channelForm.errors)}`);return}let e=this.channelForm.value,t={name:e.name,description:e.description||"",isPrivate:e.isPrivate,members:this.selectedMembers.map(n=>n.id)};this.debugLogger.info("SlackDialog","\u2705 \uCC44\uB110 \uC0DD\uC131 \uB370\uC774\uD130 \uC900\uBE44 \uC644\uB8CC"),this.debugLogger.info("SlackDialog",`\uCC44\uB110\uBA85: ${t.name}`),this.debugLogger.info("SlackDialog",`\uC124\uBA85: ${t.description}`),this.debugLogger.info("SlackDialog",`\uBE44\uACF5\uAC1C: ${t.isPrivate}`),this.debugLogger.info("SlackDialog",`\uC120\uD0DD\uB41C \uBA64\uBC84 \uC218: ${t.members.length}\uBA85`),this.debugLogger.info("SlackDialog",`\uBA64\uBC84 IDs: ${JSON.stringify(t.members)}`),this.debugLogger.info("SlackDialog",`\uC804\uC1A1 \uB370\uC774\uD130: ${JSON.stringify(t)}`),this.dialogRef.close(t)}cancel(){this.debugLogger.info("SlackDialog","\u274C \uCC44\uB110 \uC0DD\uC131 \uCDE8\uC18C"),this.dialogRef.close()}ngOnDestroy(){this.debugLogger.info("SlackDialog","\u{1F51A} \uB2E4\uC774\uC5BC\uB85C\uADF8 \uC885\uB8CC"),this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(x(tt),x(ot),x(F),x(N))};static \u0275cmp=S({type:i,selectors:[["app-create-channel-dialog"]],standalone:!1,decls:46,vars:10,consts:[[1,"create-channel-dialog"],["mat-dialog-title",""],[3,"formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","e.g., project-updates"],["matPrefix",""],["matInput","","formControlName","description","rows","3","placeholder","What's this channel about?"],[1,"private-toggle"],["formControlName","isPrivate"],[1,"helper-text"],[1,"members-section"],["matInput","","placeholder","Search by name or email",3,"ngModelChange","ngModel"],["mat-icon-button","","matSuffix","","aria-label","Clear"],[1,"selected-members"],[1,"users-list"],[1,"loading-state"],[1,"empty-state"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-icon-button","","matSuffix","","aria-label","Clear",3,"click"],[1,"member-chips"],[1,"member-chip"],[1,"member-avatar-small",3,"src","alt"],["mat-icon-button","",1,"remove-button",3,"click"],["diameter","40"],[1,"user-item",3,"selected"],[1,"user-item",3,"click"],[1,"user-info"],[1,"user-avatar",3,"src","alt"],[1,"user-details"],[1,"user-name"],[1,"status-indicator"],[1,"user-meta"],[1,"user-email"],[1,"user-role"],[3,"click","change","checked"]],template:function(t,n){if(t&1&&(a(0,"div",0)(1,"h2",1),s(2,"Create Channel"),o(),a(3,"mat-dialog-content")(4,"form",2)(5,"mat-form-field",3)(6,"mat-label"),s(7,"Channel Name"),o(),y(8,"input",4),a(9,"mat-icon",5),s(10,"tag"),o(),u(11,Qt,2,0,"mat-error"),u(12,Gt,2,0,"mat-error"),o(),a(13,"mat-form-field",3)(14,"mat-label"),s(15,"Description (optional)"),o(),a(16,"textarea",6),s(17,"        "),o(),a(18,"mat-icon",5),s(19,"description"),o()(),a(20,"div",7)(21,"mat-checkbox",8),s(22," Make Private "),o(),a(23,"p",9),u(24,Jt,3,0)(25,Kt,3,0),o()()(),a(26,"div",10)(27,"h3"),s(28),o(),a(29,"mat-form-field",3)(30,"mat-label"),s(31,"Search members"),o(),a(32,"input",11),Re("ngModelChange",function(c){return je(n.searchQuery,c)||(n.searchQuery=c),c}),o(),a(33,"mat-icon",5),s(34,"search"),o(),u(35,qt,3,0,"button",12),o(),u(36,Wt,6,0,"div",13),a(37,"div",14),u(38,Xt,4,0,"div",15)(39,Zt,5,0,"div",16)(40,nn,2,0),o()()(),a(41,"mat-dialog-actions",17)(42,"button",18),m("click",function(){return n.cancel()}),s(43,"Cancel"),o(),a(44,"button",19),m("click",function(){return n.createChannel()}),s(45," Create Channel "),o()()()),t&2){let r,c,g;l(4),C("formGroup",n.channelForm),l(7),h((r=n.channelForm.get("name"))!=null&&r.hasError("required")?11:-1),l(),h((c=n.channelForm.get("name"))!=null&&c.hasError("minlength")?12:-1),l(12),h((g=n.channelForm.get("isPrivate"))!=null&&g.value?24:25),l(4),L("Add Members (",n.selectedMembers.length," selected)"),l(4),Fe("ngModel",n.searchQuery),l(3),h(n.searchQuery?35:-1),l(),h(n.selectedMembers.length>0?36:-1),l(2),h(n.isLoading?38:n.filteredUsers.length===0?39:40),l(6),C("disabled",n.channelForm.invalid)}},dependencies:[We,se,le,Ke,Ye,Ze,et,st,ct,lt,z,U,E,ce,ht,ft,bt,Ct,me,W,kt],styles:[".create-channel-dialog[_ngcontent-%COMP%]{width:600px;max-width:90vw}.create-channel-dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;padding:20px 28px;border-bottom:2px solid var(--slack-primary);background:var(--slack-primary-light);font-size:20px;font-weight:700;color:var(--text-primary);letter-spacing:.3px;transition:all .3s ease}mat-dialog-content[_ngcontent-%COMP%]{padding:28px;max-height:70vh;overflow-y:auto}mat-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}mat-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}mat-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}mat-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}mat-dialog-actions[_ngcontent-%COMP%]{padding:20px 28px;border-top:1px solid var(--border-color);background-color:var(--bg-secondary);transition:all .3s ease}mat-dialog-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background:var(--slack-gradient)}mat-dialog-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:hover{background:var(--slack-gradient-hover);box-shadow:0 4px 8px var(--slack-shadow)}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-focus .mdc-notched-outline__leading, .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-focus .mdc-notched-outline__notch, .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-focus .mdc-notched-outline__trailing{border-color:var(--slack-primary)!important}.private-toggle[_ngcontent-%COMP%]{margin-bottom:28px;padding:16px;background-color:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color);transition:all .3s ease}.private-toggle[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:block;margin-bottom:10px}.private-toggle[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mdc-checkbox__background{border-color:var(--slack-primary)}.private-toggle[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mdc-checkbox--selected .mdc-checkbox__background{background-color:var(--slack-primary);border-color:var(--slack-primary)}.private-toggle[_ngcontent-%COMP%]   .helper-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0;padding-left:32px;font-size:12px;color:var(--text-muted)}.private-toggle[_ngcontent-%COMP%]   .helper-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:var(--slack-primary)}.members-section[_ngcontent-%COMP%]{margin-top:28px}.members-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 18px;font-size:17px;font-weight:700;color:var(--text-primary)}.members-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 14px;font-size:14px;font-weight:600;color:var(--text-secondary)}.selected-members[_ngcontent-%COMP%]{margin-bottom:20px;padding:16px;background:var(--slack-primary-light);border-radius:10px;border:1px solid var(--slack-primary);transition:all .3s ease}.selected-members[_ngcontent-%COMP%]   .member-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.selected-members[_ngcontent-%COMP%]   .member-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 10px 6px 6px;background-color:var(--bg-primary);border:1px solid var(--border-color);border-radius:20px;font-size:13px;font-weight:500;box-shadow:0 2px 4px var(--shadow);transition:all .2s ease}.selected-members[_ngcontent-%COMP%]   .member-chip[_ngcontent-%COMP%]:hover{border-color:var(--slack-primary);box-shadow:0 2px 6px var(--slack-shadow)}.selected-members[_ngcontent-%COMP%]   .member-chip[_ngcontent-%COMP%]   .member-avatar-small[_ngcontent-%COMP%]{width:26px;height:26px;border-radius:50%;object-fit:cover;box-shadow:0 1px 3px #0000001a}.selected-members[_ngcontent-%COMP%]   .member-chip[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{width:22px;height:22px;padding:0;margin-left:4px;color:#868e96}.selected-members[_ngcontent-%COMP%]   .member-chip[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:hover{color:#dc3545;background-color:#dc35451a}.selected-members[_ngcontent-%COMP%]   .member-chip[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.users-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;border:1px solid var(--border-color);border-radius:10px;margin-top:16px;background-color:var(--bg-primary);box-shadow:0 2px 4px var(--shadow);transition:all .3s ease}.users-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.users-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.users-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.users-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}.users-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%], .users-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:50px 20px;color:var(--text-muted)}.users-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .users-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:52px;width:52px;height:52px;margin-bottom:16px;color:var(--slack-primary);opacity:.3}.users-list[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .users-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0 0;font-size:14px;color:var(--text-muted)}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid var(--bg-tertiary)}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]:hover{background-color:var(--slack-primary-light)}.users-list[_ngcontent-%COMP%]   .user-item.selected[_ngcontent-%COMP%]{background:var(--slack-primary-light);border-left:3px solid var(--slack-primary)}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;flex:1}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:50%;object-fit:cover;box-shadow:0 2px 4px #0000001a}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]{flex:1;min-width:0}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px;font-weight:600;color:var(--text-primary);margin-bottom:4px}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px;color:#dee2e6}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]   .status-indicator.online[_ngcontent-%COMP%]{color:#198754}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:12px;color:var(--text-muted)}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-meta[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.users-list[_ngcontent-%COMP%]   .user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-meta[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{padding:3px 8px;background:var(--slack-primary-light);color:var(--slack-primary);border-radius:12px;font-weight:500}"]})};var an=(i,e)=>e.id;function on(i,e){if(i&1&&(a(0,"span",10),s(1),o()),i&2){let t=d().$implicit;l(),_(t.unreadCount)}}function rn(i,e){if(i&1){let t=M();a(0,"div",6),m("click",function(){let r=f(t).$implicit,c=d();return b(c.selectChannel(r.id))}),a(1,"mat-icon",7),s(2),o(),a(3,"div",8)(4,"span",9),s(5),o(),u(6,on,2,1,"span",10),o()()}if(i&2){let t=e.$implicit,n=d();D("active",n.isActive(t.id)),l(2),L(" ",t.isPrivate?"lock":"tag"," "),l(3),_(t.name),l(),h(t.unreadCount>0?6:-1)}}function sn(i,e){if(i&1){let t=M();a(0,"div",5)(1,"p"),s(2,"No channels available"),o(),a(3,"button",11),m("click",function(){f(t);let r=d();return b(r.openCreateChannelDialog())}),s(4," Create Channel "),o()()}}var ue=class i{constructor(e,t){this.dialog=e;this.debugLogger=t}channels=[];activeChannel=null;channelSelected=new P;channelCreated=new P;selectChannel(e){this.debugLogger.info("SlackChannelList",`\u{1F3AF} \uCC44\uB110 \uC120\uD0DD \uC774\uBCA4\uD2B8 \uBC1C\uC0DD: ${e}`),this.channelSelected.emit(e)}openCreateChannelDialog(){this.debugLogger.info("SlackChannelList","\u{1F3A8} \uCC44\uB110 \uC0DD\uC131 \uB2E4\uC774\uC5BC\uB85C\uADF8 \uC5F4\uAE30"),this.dialog.open(ge,{width:"600px",maxWidth:"90vw",disableClose:!1}).afterClosed().subscribe(t=>{t?(this.debugLogger.info("SlackChannelList","\u2705 \uB2E4\uC774\uC5BC\uB85C\uADF8\uC5D0\uC11C \uB370\uC774\uD130 \uBC1B\uC74C"),this.debugLogger.info("SlackChannelList",`\uBC1B\uC740 \uB370\uC774\uD130: ${JSON.stringify(t)}`),this.debugLogger.info("SlackChannelList","\u{1F680} channelCreated \uC774\uBCA4\uD2B8 \uBC1C\uD589"),this.channelCreated.emit(t)):this.debugLogger.info("SlackChannelList","\u274C \uB2E4\uC774\uC5BC\uB85C\uADF8 \uCDE8\uC18C\uB428 (result \uC5C6\uC74C)")})}isActive(e){return this.activeChannel?.id===e}static \u0275fac=function(t){return new(t||i)(x(rt),x(N))};static \u0275cmp=S({type:i,selectors:[["app-channel-list"]],inputs:{channels:"channels",activeChannel:"activeChannel"},outputs:{channelSelected:"channelSelected",channelCreated:"channelCreated"},standalone:!1,decls:11,vars:1,consts:[[1,"channel-list-container"],[1,"channel-list-header"],["mat-icon-button","","matTooltip","Create Channel",3,"click"],[1,"channel-list"],[1,"channel-item",3,"active"],[1,"empty-state"],[1,"channel-item",3,"click"],[1,"channel-icon"],[1,"channel-info"],[1,"channel-name"],[1,"unread-badge"],["mat-button","",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Channels"),o(),a(4,"button",2),m("click",function(){return n.openCreateChannelDialog()}),a(5,"mat-icon"),s(6,"add"),o()()(),a(7,"div",3),I(8,rn,7,5,"div",4,an,!1,sn,5,0,"div",5),o()()),t&2&&(l(8),T(n.channels))},dependencies:[z,U,E,B],styles:[".channel-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:var(--bg-primary);transition:background-color .3s ease}.channel-list-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--border-color);background-color:var(--bg-primary);transition:background-color .3s ease,border-color .3s ease}.channel-list-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:700;color:var(--text-primary)}.channel-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--slack-primary)}.channel-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--slack-primary-light)}.channel-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:8px 0}.channel-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.channel-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.channel-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.channel-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}.channel-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 20px;cursor:pointer;transition:all .2s ease;color:var(--text-secondary);border-left:3px solid transparent}.channel-item[_ngcontent-%COMP%]:hover{background-color:var(--slack-primary-light);color:var(--text-primary)}.channel-item.active[_ngcontent-%COMP%]{background:var(--slack-primary-light);color:var(--slack-primary);border-left-color:var(--slack-primary);font-weight:600}.channel-item[_ngcontent-%COMP%]   .channel-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:inherit}.channel-item[_ngcontent-%COMP%]   .channel-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:space-between;min-width:0}.channel-item[_ngcontent-%COMP%]   .channel-name[_ngcontent-%COMP%]{font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.channel-item[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:22px;height:22px;padding:0 6px;border-radius:11px;background:var(--slack-gradient);color:#fff;font-size:11px;font-weight:700;box-shadow:0 2px 4px var(--slack-shadow)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 16px;text-align:center;color:#fff9}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;font-size:14px}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}"]})};var mn=(i,e)=>e.id,dn=(i,e)=>e.emoji;function gn(i,e){if(i&1&&y(0,"img",3),i&2){let t=d();C("src",t.message.user.avatar,V)("alt",t.message.user.name)}}function pn(i,e){if(i&1&&(a(0,"div",4),s(1),o()),i&2){let t=d();l(),L(" ",t.message.user.name.charAt(0).toUpperCase()," ")}}function un(i,e){i&1&&(a(0,"span",9),s(1,"(edited)"),o())}function hn(i,e){if(i&1&&y(0,"img",21),i&2){let t=d().$implicit;C("src",t.url,V)("alt",t.name)}}function fn(i,e){if(i&1&&(a(0,"div",22)(1,"mat-icon"),s(2,"insert_drive_file"),o(),a(3,"span"),s(4),o()()),i&2){let t=d().$implicit;l(4),_(t.name)}}function bn(i,e){if(i&1&&(a(0,"div",20),u(1,hn,1,2,"img",21)(2,fn,5,1,"div",22),o()),i&2){let t=e.$implicit;l(),h(t.type.startsWith("image/")?1:2)}}function Cn(i,e){if(i&1&&(a(0,"div",11),I(1,bn,3,1,"div",20,mn),o()),i&2){let t=d();l(),T(t.message.files)}}function _n(i,e){if(i&1){let t=M();a(0,"button",24),m("click",function(){let r=f(t).$implicit,c=d(2);return b(c.onReactionClick(r.emoji))}),a(1,"span"),s(2),o(),a(3,"span",25),s(4),o()()}if(i&2){let t=e.$implicit;l(2),_(t.emoji),l(2),_(t.count)}}function vn(i,e){if(i&1&&(a(0,"div",12),I(1,_n,5,2,"button",23,dn),o()),i&2){let t=d();l(),T(t.groupReactions())}}function xn(i,e){if(i&1&&(a(0,"button",15)(1,"mat-icon"),s(2,"forum"),o(),a(3,"span",26),s(4),o()()),i&2){let t=d();l(4),_(t.message.threadCount)}}function Mn(i,e){i&1&&(a(0,"div",19)(1,"p"),s(2,"Emoji Picker (TODO: Install @ctrl/ngx-emoji-mart)"),o()())}var he=class i{message;deleted=new P;reactionToggled=new P;isEmojiPickerOpen=!1;deleteMessage(){this.deleted.emit()}toggleEmojiPicker(){this.isEmojiPickerOpen=!this.isEmojiPickerOpen}onEmojiSelected(e){this.reactionToggled.emit(e.emoji.native),this.isEmojiPickerOpen=!1}onReactionClick(e){this.reactionToggled.emit(e)}groupReactions(){let e=new Map;return this.message.reactions?.forEach(t=>{e.set(t.emoji,(e.get(t.emoji)||0)+1)}),Array.from(e.entries()).map(([t,n])=>({emoji:t,count:n}))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-message-card"]],inputs:{message:"message"},outputs:{deleted:"deleted",reactionToggled:"reactionToggled"},standalone:!1,decls:42,vars:13,consts:[["menu","matMenu"],[1,"message-card"],[1,"message-avatar"],[3,"src","alt"],[1,"avatar-placeholder"],[1,"message-content"],[1,"message-header"],[1,"message-author"],[1,"message-time"],[1,"message-edited"],[1,"message-text"],[1,"message-files"],[1,"message-reactions"],[1,"message-actions"],["mat-icon-button","","matTooltip","Add reaction",3,"click"],["mat-icon-button","","matTooltip","View thread"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",3,"click"],[1,"emoji-picker-wrapper"],[1,"file-item"],[1,"file-image",3,"src","alt"],[1,"file-placeholder"],["mat-button","",1,"reaction-button"],["mat-button","",1,"reaction-button",3,"click"],[1,"reaction-count"],[1,"thread-count"]],template:function(t,n){if(t&1){let r=M();a(0,"div",1)(1,"div",2),u(2,gn,1,2,"img",3)(3,pn,2,1,"div",4),o(),a(4,"div",5)(5,"div",6)(6,"span",7),s(7),o(),a(8,"span",8),s(9),A(10,"date"),o(),u(11,un,2,0,"span",9),o(),a(12,"div",10),s(13),o(),u(14,Cn,3,0,"div",11),u(15,vn,3,0,"div",12),a(16,"div",13)(17,"button",14),m("click",function(){return f(r),b(n.toggleEmojiPicker())}),a(18,"mat-icon"),s(19,"add_reaction"),o()(),u(20,xn,5,1,"button",15),a(21,"button",16)(22,"mat-icon"),s(23,"more_vert"),o()(),a(24,"mat-menu",null,0)(26,"button",17)(27,"mat-icon"),s(28,"reply"),o(),a(29,"span"),s(30,"Reply in thread"),o()(),a(31,"button",17)(32,"mat-icon"),s(33,"edit"),o(),a(34,"span"),s(35,"Edit"),o()(),a(36,"button",18),m("click",function(){return f(r),b(n.deleteMessage())}),a(37,"mat-icon"),s(38,"delete"),o(),a(39,"span"),s(40,"Delete"),o()()()(),u(41,Mn,3,0,"div",19),o()()}if(t&2){let r=Ue(25);l(2),h(n.message.user.avatar?2:3),l(5),_(n.message.user.name),l(2),_(ze(10,10,n.message.timestamp,"short")),l(2),h(n.message.edited?11:-1),l(2),L(" ",n.message.text," "),l(),h(n.message.files&&n.message.files.length>0?14:-1),l(),h(n.groupReactions().length>0?15:-1),l(5),h(n.message.threadCount&&n.message.threadCount>0?20:-1),l(),C("matMenuTriggerFor",r),l(20),h(n.isEmojiPickerOpen?41:-1)}},dependencies:[z,U,E,B,Pt,Ot,yt,He],styles:[".message-card[_ngcontent-%COMP%]{display:flex;gap:14px;padding:16px 0;position:relative;border-bottom:1px solid var(--bg-tertiary);transition:background-color .2s ease}.message-card[_ngcontent-%COMP%]:hover{background-color:var(--slack-primary-light)}.message-card[_ngcontent-%COMP%]:hover   .message-actions[_ngcontent-%COMP%]{opacity:1}.message-avatar[_ngcontent-%COMP%]{flex-shrink:0}.message-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .message-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;box-shadow:0 2px 4px var(--shadow)}.message-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:var(--slack-gradient);color:#fff;font-weight:700;font-size:16px}.message-content[_ngcontent-%COMP%]{flex:1;min-width:0;position:relative}.message-header[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:10px;margin-bottom:6px}.message-header[_ngcontent-%COMP%]   .message-author[_ngcontent-%COMP%]{font-weight:700;font-size:15px;color:var(--text-primary)}.message-header[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:12px;color:var(--text-muted)}.message-header[_ngcontent-%COMP%]   .message-edited[_ngcontent-%COMP%]{font-size:11px;color:var(--text-muted);font-style:italic}.message-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.6;color:var(--text-secondary);word-wrap:break-word}.message-files[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}.message-files[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{max-width:200px}.message-files[_ngcontent-%COMP%]   .file-image[_ngcontent-%COMP%]{max-width:100%;border-radius:4px;cursor:pointer}.message-files[_ngcontent-%COMP%]   .file-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background-color:var(--bg-secondary);border:1px solid var(--border-color);border-radius:4px;cursor:pointer;transition:all .2s ease}.message-files[_ngcontent-%COMP%]   .file-placeholder[_ngcontent-%COMP%]:hover{border-color:var(--slack-primary);background-color:var(--slack-primary-light)}.message-files[_ngcontent-%COMP%]   .file-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#616061}.message-files[_ngcontent-%COMP%]   .file-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#1d1c1d;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.message-reactions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px;margin-top:8px}.message-reactions[_ngcontent-%COMP%]   .reaction-button[_ngcontent-%COMP%]{min-width:auto;padding:2px 8px;height:26px;line-height:26px;border:1px solid #e0e0e0;border-radius:13px;font-size:13px}.message-reactions[_ngcontent-%COMP%]   .reaction-button[_ngcontent-%COMP%]:hover{border-color:#1164a3;background-color:#e8f5fa}.message-reactions[_ngcontent-%COMP%]   .reaction-button[_ngcontent-%COMP%]   .reaction-count[_ngcontent-%COMP%]{margin-left:4px;color:#616061}.message-actions[_ngcontent-%COMP%]{position:absolute;top:-12px;right:16px;display:flex;gap:4px;opacity:0;transition:opacity .2s;background-color:#fff;border:1px solid #e0e0e0;border-radius:4px;box-shadow:0 1px 3px #0000001a}.message-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px;line-height:32px}.message-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.message-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .thread-count[_ngcontent-%COMP%]{font-size:11px;margin-left:2px}.emoji-picker-wrapper[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:100;margin-top:8px;background-color:#fff;border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 4px 12px #00000026;padding:16px}"]})};var Sn=["scrollContainer"],On=(i,e)=>e.id;function Pn(i,e){if(i&1&&(a(0,"p",7),s(1),o()),i&2){let t=d(2);l(),_(t.activeChannel.description)}}function yn(i,e){if(i&1&&(a(0,"div",2)(1,"div",6)(2,"mat-icon"),s(3),o(),a(4,"h2"),s(5),o()(),u(6,Pn,2,1,"p",7),o()),i&2){let t=d();l(3),_(t.activeChannel.isPrivate?"lock":"tag"),l(2),_(t.activeChannel.name),l(),h(t.activeChannel.description?6:-1)}}function wn(i,e){i&1&&(a(0,"div",4),y(1,"mat-spinner",8),a(2,"p"),s(3,"Loading messages..."),o()())}function $n(i,e){if(i&1){let t=M();a(0,"app-message-card",10),m("deleted",function(){let r=f(t).$implicit,c=d(2);return b(c.deleteMessage(r.id))})("reactionToggled",function(r){let c=f(t).$implicit,g=d(2);return b(g.toggleReaction(c.id,r))}),o()}if(i&2){let t=e.$implicit;C("message",t)}}function In(i,e){if(i&1&&I(0,$n,1,1,"app-message-card",9,On),i&2){let t=d();T(t.messages)}}function Tn(i,e){i&1&&(a(0,"div",5)(1,"mat-icon"),s(2,"forum"),o(),a(3,"h3"),s(4,"No messages yet"),o(),a(5,"p"),s(6,"Be the first to send a message!"),o()())}var fe=class i{messages=[];isLoading=!1;activeChannel=null;messageDeleted=new P;reactionToggled=new P;scrollContainer;shouldScrollToBottom=!0;ngAfterViewChecked(){this.shouldScrollToBottom&&this.scrollToBottom()}scrollToBottom(){try{this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight}catch{}}onScroll(e){let t=e.target,n=Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<10;this.shouldScrollToBottom=n}deleteMessage(e){this.messageDeleted.emit(e)}toggleReaction(e,t){this.reactionToggled.emit({messageId:e,emoji:t})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-message-list"]],viewQuery:function(t,n){if(t&1&&G(Sn,5),t&2){let r;J(r=K())&&(n.scrollContainer=r.first)}},inputs:{messages:"messages",isLoading:"isLoading",activeChannel:"activeChannel"},outputs:{messageDeleted:"messageDeleted",reactionToggled:"reactionToggled"},standalone:!1,decls:7,vars:2,consts:[["scrollContainer",""],[1,"message-list-container"],[1,"channel-header"],[1,"messages-scroll",3,"scroll"],[1,"loading-state"],[1,"empty-state"],[1,"channel-title"],[1,"channel-description"],["diameter","40"],[3,"message"],[3,"deleted","reactionToggled","message"]],template:function(t,n){if(t&1){let r=M();a(0,"div",1),u(1,yn,7,3,"div",2),a(2,"div",3,0),m("scroll",function(g){return f(r),b(n.onScroll(g))}),u(4,wn,4,0,"div",4)(5,In,2,0)(6,Tn,7,0,"div",5),o()()}t&2&&(l(),h(n.activeChannel?1:-1),l(3),h(n.isLoading?4:n.messages&&n.messages.length>0?5:6))},dependencies:[E,W,he],styles:[".message-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden;background-color:var(--bg-secondary);transition:background-color .3s ease;min-height:0}.channel-header[_ngcontent-%COMP%]{padding:20px 24px;border-bottom:1px solid var(--border-color);background:var(--slack-gradient);box-shadow:0 2px 4px var(--shadow);transition:all .3s ease;flex-shrink:0}.channel-header[_ngcontent-%COMP%]   .channel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.channel-header[_ngcontent-%COMP%]   .channel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:24px;width:24px;height:24px}.channel-header[_ngcontent-%COMP%]   .channel-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:700;color:#fff;letter-spacing:.3px}.channel-header[_ngcontent-%COMP%]   .channel-description[_ngcontent-%COMP%]{margin:8px 0 0 34px;font-size:13px;color:#ffffffe6}.messages-scroll[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:20px 24px;background-color:var(--bg-primary);transition:background-color .3s ease;min-height:0;display:flex;flex-direction:column;gap:12px}.messages-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.messages-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--border-color);border-radius:4px}.messages-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--text-muted)}.messages-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:var(--bg-secondary)}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 16px;gap:16px}.loading-state[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]     circle{stroke:var(--slack-primary)}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-muted);font-size:14px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px 16px;text-align:center}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:var(--slack-primary);opacity:.3;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:700;color:var(--text-primary)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:var(--text-muted)}"]})};var Ln=["fileInput"],An=(i,e)=>e.id;function Dn(i,e){if(i&1&&y(0,"img",13),i&2){let t=d().$implicit;C("src",t.url,V)("alt",t.name)}}function Un(i,e){i&1&&(a(0,"div",14)(1,"mat-icon"),s(2,"insert_drive_file"),o()())}function Fn(i,e){if(i&1){let t=M();a(0,"div",12),u(1,Dn,1,2,"img",13)(2,Un,3,0,"div",14),a(3,"span",15),s(4),o(),a(5,"button",16),m("click",function(){let r=f(t).$implicit,c=d(2);return b(c.removeFile(r.id))}),a(6,"mat-icon"),s(7,"close"),o()()()}if(i&2){let t=e.$implicit;l(),h(t.type.startsWith("image/")?1:2),l(3),_(t.name)}}function jn(i,e){if(i&1&&(a(0,"div",2),I(1,Fn,8,2,"div",12,An),o()),i&2){let t=d();l(),T(t.uploadedFiles)}}function Rn(i,e){i&1&&y(0,"mat-spinner",10)}function Vn(i,e){i&1&&(a(0,"mat-icon"),s(1,"send"),o())}var be=class i{messageForm;uploadedFiles=[];isUploading=!1;activeChannel=null;messageSent=new P;filesUploaded=new P;fileRemoved=new P;fileInput;triggerFileUpload(){this.fileInput.nativeElement.click()}onFileSelected(e){let t=e.target.files;t&&t.length>0&&this.activeChannel&&(this.filesUploaded.emit({channelId:this.activeChannel.id,files:t}),this.fileInput.nativeElement.value="")}removeFile(e){this.fileRemoved.emit(e)}onKeyDown(e){e.isComposing||e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),this.sendMessage())}sendMessage(){!this.activeChannel||!this.messageForm.value?.trim()&&(!this.uploadedFiles||this.uploadedFiles.length===0)||this.messageSent.emit(this.activeChannel.id)}isSendDisabled(){return!this.messageForm.value?.trim()&&(!this.uploadedFiles||this.uploadedFiles.length===0)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-message-input"]],viewQuery:function(t,n){if(t&1&&G(Ln,5),t&2){let r;J(r=K())&&(n.fileInput=r.first)}},inputs:{messageForm:"messageForm",uploadedFiles:"uploadedFiles",isUploading:"isUploading",activeChannel:"activeChannel"},outputs:{messageSent:"messageSent",filesUploaded:"filesUploaded",fileRemoved:"fileRemoved"},standalone:!1,decls:18,vars:7,consts:[["fileInput",""],[1,"message-input-container"],[1,"uploaded-files-preview"],[1,"input-wrapper"],["appearance","outline",1,"message-field"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","10",3,"keydown","formControl","placeholder"],[1,"input-actions"],["mat-icon-button","","matTooltip","Attach files",3,"click","disabled"],["mat-icon-button","","matTooltip","Add emoji",3,"disabled"],["mat-raised-button","","color","primary",1,"send-button",3,"click","disabled"],["diameter","20"],["type","file","multiple","",2,"display","none",3,"change"],[1,"file-preview"],[1,"file-thumbnail",3,"src","alt"],[1,"file-icon"],[1,"file-name"],["mat-icon-button","",1,"remove-file",3,"click"]],template:function(t,n){if(t&1){let r=M();a(0,"div",1),u(1,jn,3,0,"div",2),a(2,"div",3)(3,"mat-form-field",4)(4,"textarea",5),m("keydown",function(g){return f(r),b(n.onKeyDown(g))}),s(5,"      "),o()(),a(6,"div",6)(7,"button",7),m("click",function(){return f(r),b(n.triggerFileUpload())}),a(8,"mat-icon"),s(9,"attach_file"),o()(),a(10,"button",8)(11,"mat-icon"),s(12,"sentiment_satisfied_alt"),o()(),a(13,"button",9),m("click",function(){return f(r),b(n.sendMessage())}),u(14,Rn,1,0,"mat-spinner",10)(15,Vn,2,0,"mat-icon"),o()()(),a(16,"input",11,0),m("change",function(g){return f(r),b(n.onFileSelected(g))}),o()()}t&2&&(l(),h(n.uploadedFiles&&n.uploadedFiles.length>0?1:-1),l(3),C("formControl",n.messageForm)("placeholder",n.activeChannel?"Message #"+n.activeChannel.name:"Select a channel"),l(3),C("disabled",!n.activeChannel),l(3),C("disabled",!n.activeChannel),l(3),C("disabled",n.isSendDisabled()||n.isUploading),l(),h(n.isUploading?14:15))},dependencies:[se,le,Xe,z,U,E,ce,me,vt,B,W],styles:[".message-input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px 24px;border-top:1px solid var(--border-color);background-color:var(--bg-primary);box-shadow:0 -2px 8px var(--shadow);transition:all .3s ease}.uploaded-files-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:14px}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:10px;padding:10px 14px;background-color:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;max-width:220px;transition:all .2s ease}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]:hover{border-color:var(--slack-primary);background-color:var(--slack-primary-light)}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .file-thumbnail[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border-radius:6px;box-shadow:0 2px 4px #0000001a}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:var(--slack-primary-light);border-radius:6px}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--slack-primary)}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{flex:1;font-size:13px;color:var(--text-secondary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:0;font-weight:500}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .remove-file[_ngcontent-%COMP%]{width:24px;height:24px;line-height:24px;color:#868e96}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .remove-file[_ngcontent-%COMP%]:hover{color:#dc3545;background-color:#dc35451a}.uploaded-files-preview[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .remove-file[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:12px}.message-field[_ngcontent-%COMP%]{flex:1;margin:0}.message-field[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{padding:10px 16px;border:1px solid var(--border-color);border-radius:8px;background-color:var(--bg-secondary);transition:all .2s ease}.message-field[_ngcontent-%COMP%]     .mat-mdc-form-field-focus .mat-mdc-form-field-flex{border-color:var(--slack-primary);background-color:var(--bg-primary);box-shadow:0 0 0 3px var(--slack-primary-light)}.message-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{padding:0}.message-field[_ngcontent-%COMP%]     textarea{resize:none;font-size:14px;line-height:1.5;color:var(--text-secondary)}.input-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding-bottom:8px}.input-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--slack-primary)}.input-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--slack-primary-light)}.input-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background:var(--slack-gradient);color:#fff}.input-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:hover{background:var(--slack-gradient-hover);box-shadow:0 4px 8px var(--slack-shadow)}.input-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:disabled{background:var(--border-color);color:var(--text-muted)}.input-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.input-actions[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]{min-width:60px;height:36px}.input-actions[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block}"]})};function Nn(i,e){if(i&1&&(a(0,"div",18)(1,"mat-icon",19),s(2,"account_circle"),o(),a(3,"div",20)(4,"span",21),s(5),o(),a(6,"span",22),s(7),o()()()),i&2){let t=e.$implicit;l(5),_(t.name),l(),D("online",t.isOnline)("offline",!t.isOnline),l(),L(" \u25CF ",t.isOnline?"Online":"Offline"," ")}}var Ce=class i{constructor(e,t,n,r,c){this.channelVM=e;this.messageVM=t;this.socketAdapter=n;this.slackApi=r;this.slackAuthService=c}destroy$=new v;isConnected=!1;isSidebarOpen=!0;isMembersSidebarOpen=!0;members=[];ngOnInit(){this.socketAdapter.isConnected$.pipe(p(this.destroy$)).subscribe(t=>{this.isConnected=t}),this.socketAdapter.onOnlineUsersChanged$.pipe(p(this.destroy$)).subscribe(t=>{this.updateMembersOnlineStatus()}),this.socketAdapter.onUserOnline$.pipe(p(this.destroy$)).subscribe(t=>{this.updateMembersOnlineStatus()}),this.socketAdapter.onUserOffline$.pipe(p(this.destroy$)).subscribe(t=>{this.updateMembersOnlineStatus()}),this.socketAdapter.connect("user-123"),this.loadMembers(),this.channelVM.loadChannels(),this.channelVM.getActiveChannel().pipe(p(this.destroy$)).subscribe(t=>{t&&this.messageVM.loadMessages(t.id,!0)})}loadMembers(){this.slackApi.getUsers().pipe(p(this.destroy$)).subscribe({next:e=>{this.members=e,this.updateMembersOnlineStatus()},error:e=>{}})}updateMembersOnlineStatus(){!this.members||this.members.length===0||(this.members=this.members.map(e=>Te(te({},e),{isOnline:this.socketAdapter.isUserOnline(Number(e.id))})))}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}toggleMembersSidebar(){this.isMembersSidebarOpen=!this.isMembersSidebarOpen}logout(){this.slackAuthService.logout()}ngOnDestroy(){this.socketAdapter.disconnect(),this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(x(X),x(Z),x(H),x(F),x(Q))};static \u0275cmp=S({type:i,selectors:[["app-slack-main"]],standalone:!1,features:[Ve([X,Z])],decls:43,vars:35,consts:[[1,"slack-container"],[1,"slack-header"],["mat-icon-button","",3,"click"],[1,"header-actions"],["mat-icon-button","","matTooltip","\uB85C\uADF8\uC544\uC6C3",3,"click"],["mat-icon-button","","matTooltip","Toggle Members",3,"click"],[1,"connection-status"],[1,"slack-content"],[1,"slack-sidebar"],[3,"channelSelected","channelCreated","channels","activeChannel"],[1,"slack-main"],[3,"messageDeleted","reactionToggled","messages","isLoading","activeChannel"],[3,"messageSent","filesUploaded","fileRemoved","messageForm","uploadedFiles","isUploading","activeChannel"],[1,"slack-members-sidebar"],[1,"members-header"],["mat-icon-button","","matTooltip","Close",1,"close-btn",3,"click"],[1,"members-list"],["class","member-item",4,"ngFor","ngForOf"],[1,"member-item"],[1,"member-avatar"],[1,"member-info"],[1,"member-name"],[1,"member-status"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"header",1)(2,"button",2),m("click",function(){return n.toggleSidebar()}),a(3,"mat-icon"),s(4,"menu"),o()(),a(5,"h1"),s(6,"\uD611\uC5C5 \uCC57"),o(),a(7,"div",3)(8,"button",4),m("click",function(){return n.logout()}),a(9,"mat-icon"),s(10,"logout"),o()(),a(11,"button",5),m("click",function(){return n.toggleMembersSidebar()}),a(12,"mat-icon"),s(13),o()(),a(14,"span",6)(15,"mat-icon"),s(16),o(),s(17),o()()(),a(18,"div",7)(19,"aside",8)(20,"app-channel-list",9),A(21,"async"),A(22,"async"),m("channelSelected",function(c){return n.channelVM.selectChannel(c)})("channelCreated",function(c){return n.channelVM.createChannel(c.name,c.description,c.isPrivate,c.members)}),o()(),a(23,"main",10)(24,"app-message-list",11),A(25,"async"),A(26,"async"),A(27,"async"),m("messageDeleted",function(c){return n.messageVM.deleteMessage(c)})("reactionToggled",function(c){return n.messageVM.toggleReaction(c.messageId,c.emoji)}),o(),a(28,"app-message-input",12),A(29,"async"),A(30,"async"),A(31,"async"),m("messageSent",function(c){return n.messageVM.sendMessage(c)})("filesUploaded",function(c){return n.messageVM.uploadFiles(c.channelId,c.files)})("fileRemoved",function(c){return n.messageVM.removeUploadedFile(c)}),o()(),a(32,"aside",13)(33,"div",14)(34,"mat-icon"),s(35,"group"),o(),a(36,"h3"),s(37,"Loworld Members"),o(),a(38,"button",15),m("click",function(){return n.toggleMembersSidebar()}),a(39,"mat-icon"),s(40,"close"),o()()(),a(41,"div",16),De(42,Nn,8,6,"div",17),o()()()()),t&2&&(l(13),_(n.isMembersSidebarOpen?"people":"people_outline"),l(),D("connected",n.isConnected),l(2),_(n.isConnected?"wifi":"wifi_off"),l(),L(" ",n.isConnected?"Connected":"Disconnected"," "),l(2),D("open",n.isSidebarOpen),l(),C("channels",j(21,19,n.channelVM.getChannels()))("activeChannel",j(22,21,n.channelVM.getActiveChannel())),l(4),C("messages",j(25,23,n.messageVM.getMessages()))("isLoading",j(26,25,n.messageVM.getIsLoading()))("activeChannel",j(27,27,n.channelVM.getActiveChannel())),l(4),C("messageForm",n.messageVM.messageForm)("uploadedFiles",j(29,29,n.messageVM.getUploadedFiles()))("isUploading",j(30,31,n.messageVM.getIsFileUploading()))("activeChannel",j(31,33,n.channelVM.getActiveChannel())),l(4),D("closed",!n.isMembersSidebarOpen),l(10),C("ngForOf",n.members))},dependencies:[Ne,U,E,B,ue,fe,be,Be],styles:['.slack-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background-color:var(--bg-secondary);transition:background-color .3s ease}.slack-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:12px 20px;background:var(--slack-gradient);color:#fff;box-shadow:0 2px 4px #0000001a;position:sticky;top:0;z-index:1000;transition:background .3s ease}.slack-header[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{color:#fff}.slack-header[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]:hover{background:#ffffff1a}.slack-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:700;letter-spacing:.5px}.slack-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center;gap:12px}.slack-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}.slack-header[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;padding:6px 12px;border-radius:20px;background-color:#ffffff26;font-weight:500}.slack-header[_ngcontent-%COMP%]   .connection-status.connected[_ngcontent-%COMP%]{background-color:#1987544d}.slack-header[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.slack-content[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.slack-sidebar[_ngcontent-%COMP%]{width:280px;background-color:var(--bg-primary);border-right:1px solid var(--border-color);display:flex;flex-direction:column;transition:transform .3s ease,background-color .3s ease,border-color .3s ease;overflow:hidden;box-shadow:2px 0 8px var(--shadow)}.slack-sidebar[_ngcontent-%COMP%]:not(.open){transform:translate(-100%)}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid var(--border-color);background:var(--slack-gradient);transition:background .3s ease,border-color .3s ease}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700;color:#fff;letter-spacing:.3px}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:12px 0}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.slack-sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}@media (max-width: 768px){.slack-sidebar[_ngcontent-%COMP%]{position:absolute;left:0;top:52px;bottom:0;z-index:10;box-shadow:2px 0 8px #00000026}}.slack-main[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background-color:var(--bg-primary);overflow:hidden;transition:background-color .3s ease;position:relative}.slack-main[_ngcontent-%COMP%]   app-message-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}.slack-main[_ngcontent-%COMP%]   app-message-input[_ngcontent-%COMP%]{flex-shrink:0;position:sticky;bottom:0;z-index:10}.slack-members-sidebar[_ngcontent-%COMP%]{width:280px;background-color:var(--bg-primary);border-left:1px solid var(--border-color);display:flex;flex-direction:column;overflow:hidden;transition:transform .3s ease,width .3s ease,background-color .3s ease,border-color .3s ease;box-shadow:-2px 0 8px var(--shadow)}.slack-members-sidebar.closed[_ngcontent-%COMP%]{transform:translate(100%);width:0;border-left:none}.slack-members-sidebar[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px 20px;background:var(--slack-gradient);border-bottom:1px solid rgba(255,255,255,.2);position:sticky;top:0;z-index:1;transition:background .3s ease}.slack-members-sidebar[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:22px;width:22px;height:22px}.slack-members-sidebar[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:700;color:#fff;flex:1;letter-spacing:.3px}.slack-members-sidebar[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#fff;width:32px;height:32px}.slack-members-sidebar[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.slack-members-sidebar[_ngcontent-%COMP%]   .members-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.slack-members-sidebar[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:12px 0}.slack-members-sidebar[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.slack-members-sidebar[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary)}.slack-members-sidebar[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.slack-members-sidebar[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 20px;cursor:pointer;transition:background-color .2s;border-bottom:1px solid var(--bg-tertiary)}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]:hover{background-color:var(--slack-primary-light)}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-avatar[_ngcontent-%COMP%]{font-size:36px;width:36px;height:36px;color:var(--slack-primary)}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary)}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-status[_ngcontent-%COMP%]{font-size:12px;font-weight:500;display:flex;align-items:center;gap:4px}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-status.online[_ngcontent-%COMP%]{color:#198754}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-status.offline[_ngcontent-%COMP%]{color:#868686}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-status[_ngcontent-%COMP%]:before{content:"";width:8px;height:8px;border-radius:50%;display:inline-block}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-status.online[_ngcontent-%COMP%]:before{background-color:#198754;box-shadow:0 0 6px #19875480}.slack-members-sidebar[_ngcontent-%COMP%]   .member-item[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .member-status.offline[_ngcontent-%COMP%]:before{background-color:#868686}@media (max-width: 1024px){.slack-members-sidebar[_ngcontent-%COMP%]{display:none}}']})};var Bn=["loginComponent"],_e=class i{constructor(e,t,n){this.slackAuthService=e;this.router=t;this.route=n}loginComponent;loginConfig={title:"\u{1F3AD} \uD300 \uD611\uC5C5",subtitle:"\uD6A8\uC728\uC801\uC778 \uD300\uC6CC\uD06C\uC758 \uC2DC\uC791",moduleName:"slack",showSocialLogin:!1,showRegisterLink:!1,themeColors:{primary:"#ec4899",secondary:"#db2777",accent:"#f472b6"}};returnUrl="/slack";ngOnInit(){if(this.slackAuthService.isAuthenticated()){this.router.navigate(["/slack"]);return}this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/slack"}onLogin(e){this.slackAuthService.login(e.username,e.password)?this.router.navigate([this.returnUrl]):this.loginComponent&&this.loginComponent.setError("\uC544\uC774\uB514 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.")}static \u0275fac=function(t){return new(t||i)(x(Q),x(Y),x(at))};static \u0275cmp=S({type:i,selectors:[["app-slack-login"]],viewQuery:function(t,n){if(t&1&&G(Bn,5),t&2){let r;J(r=K())&&(n.loginComponent=r.first)}},standalone:!1,decls:2,vars:1,consts:[["loginComponent",""],[3,"loginSubmit","config"]],template:function(t,n){if(t&1){let r=M();a(0,"app-unified-login",1,0),m("loginSubmit",function(g){return f(r),b(n.onLogin(g))}),o()}t&2&&C("config",n.loginConfig)},dependencies:[It],encapsulation:2})};var ve=class i{constructor(e,t){this.slackAuthService=e;this.router=t}canActivate(e,t){return this.slackAuthService.isAuthenticated()?!0:this.router.createUrlTree(["/slack/login"],{queryParams:{returnUrl:t.url}})}static \u0275fac=function(t){return new(t||i)(k(Q),k(Y))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var Hn=[{path:"login",component:_e},{path:"",component:Ce,canActivate:[ve]}],xe=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=re({type:i});static \u0275inj=ae({imports:[Oe.forChild(Hn),Oe]})};var Ft=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=re({type:i});static \u0275inj=ae({imports:[Qe,nt,it,Je,pt,dt,ut,_t,Mt,Tt,wt,$t,mt,gt,St,xt,xe]})};export{Ft as SlackModule};
