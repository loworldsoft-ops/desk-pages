import{a as I}from"./chunk-IVM4L2KM.js";import{e as b}from"./chunk-KDSCINN4.js";import{$ as n,Y as a,da as u,ea as l,kd as i,md as U,q as s}from"./chunk-KCIJXSXQ.js";import{a as g}from"./chunk-WWX6BADO.js";var d=class t{constructor(e){this.http=e}baseUrl=I.baseSyncUrl+"/users";debugLogger=l(b);getAllUsers(){return this.debugLogger.info("\uD68C\uC6D0\uAD00\uB9ACAPI","\u{1F4DE} getAllUsers \uD638\uCD9C"),this.debugLogger.info("\uD68C\uC6D0\uAD00\uB9ACAPI",`URL: ${this.baseUrl}`),this.http.get(this.baseUrl).pipe(a(e=>{this.debugLogger.info("\uD68C\uC6D0\uAD00\uB9ACAPI",`\uC751\uB2F5 \uC218\uC2E0 - \uD0C0\uC785: ${typeof e}, \uBC30\uC5F4: ${Array.isArray(e)}`)}),s(e=>Array.isArray(e)?(this.debugLogger.success("\uD68C\uC6D0\uAD00\uB9ACAPI",`\u2705 \uD328\uD134 1: \uC9C1\uC811 \uBC30\uC5F4, \uAC1C\uC218: ${e.length}`),e):e?.data?.users&&Array.isArray(e.data.users)?(this.debugLogger.success("\uD68C\uC6D0\uAD00\uB9ACAPI",`\u2705 \uD328\uD134 2: data.users, \uAC1C\uC218: ${e.data.users.length}`),e.data.users):e?.users&&Array.isArray(e.users)?(this.debugLogger.success("\uD68C\uC6D0\uAD00\uB9ACAPI",`\u2705 \uD328\uD134 3: users, \uAC1C\uC218: ${e.users.length}`),e.users):e?.data&&Array.isArray(e.data)?(this.debugLogger.success("\uD68C\uC6D0\uAD00\uB9ACAPI",`\u2705 \uD328\uD134 4: data, \uAC1C\uC218: ${e.data.length}`),e.data):(this.debugLogger.error("\uD68C\uC6D0\uAD00\uB9ACAPI",`\u274C \uC608\uC0C1\uCE58 \uBABB\uD55C \uC751\uB2F5 \uAD6C\uC870: ${JSON.stringify(Object.keys(e||{}))}`),[])))}getUsersByRole(e){let r=new i().set("role",this.mapRoleToRoleId(e).toString());return this.http.get(`${this.baseUrl}/roles`,{params:r})}getUserById(e){return this.http.get(`${this.baseUrl}/${e}`)}updateUser(e,r){return this.debugLogger.info("\uD68C\uC6D0\uAD00\uB9ACAPI",`\u{1F4DD} \uC0AC\uC6A9\uC790 \uC815\uBCF4 \uC218\uC815: ${e}`),this.debugLogger.info("\uD68C\uC6D0\uAD00\uB9ACAPI",`\uC218\uC815 \uB370\uC774\uD130: ${JSON.stringify(r)}`),this.http.post(`${this.baseUrl}/update`,g({userId:e},r)).pipe(a(o=>{this.debugLogger.success("\uD68C\uC6D0\uAD00\uB9ACAPI",`\u2705 \uC0AC\uC6A9\uC790 \uC815\uBCF4 \uC218\uC815 \uC644\uB8CC: ${e}`)}))}deleteUser(e){this.debugLogger.warn("\uD68C\uC6D0\uAD00\uB9ACAPI",`\u{1F5D1}\uFE0F \uC0AC\uC6A9\uC790 \uC0AD\uC81C: ${e}`);let r=`${this.baseUrl}?userId=${e}`,o=new i().set("userId",e);return this.http.delete(this.baseUrl,{params:o}).pipe(s(p=>p))}updateUserStatus(e,r){return this.updateUser(e,{status:r})}mapRoleToRoleId(e){return{CUSTOMER:100,SELLER:200,ADMIN:300,SUPER_ADMIN:400}[e]||100}getRoleName(e){return{CUSTOMER:"\uACE0\uAC1D",SELLER:"\uD310\uB9E4\uC790",ADMIN:"\uAD00\uB9AC\uC790",SUPER_ADMIN:"\uCD5C\uACE0 \uAD00\uB9AC\uC790"}[e]||"\uC54C \uC218 \uC5C6\uC74C"}static \u0275fac=function(r){return new(r||t)(u(U))};static \u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"})};export{d as a};
