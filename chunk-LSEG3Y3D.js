import{a as b}from"./chunk-LZP2PBHT.js";import{a as lt}from"./chunk-5O6JE4AX.js";import{a as rt,b as at,c as st}from"./chunk-ID5T2S5R.js";import{a as ot}from"./chunk-G3T635TF.js";import{a as D}from"./chunk-OUYC2BKS.js";import{a as it}from"./chunk-VPKGJ2OT.js";import{a as ct}from"./chunk-UMB2PNP7.js";import{e as Xe}from"./chunk-DJJXWOPV.js";import{a as tt}from"./chunk-BSANEL3F.js";import{b as nt}from"./chunk-PH6W6J3R.js";import{a as et}from"./chunk-UYFSIFAJ.js";import{b as ze,c as Ge,d as je,e as qe,f as He,g as Ke}from"./chunk-UZ4ZBC3S.js";import{D as Fe,E as We,M as ee,ca as Ve,ia as te,na as Je,pa as Qe,q as $e,qa as Ye,ra as Ze,s as Ne,sa as ne}from"./chunk-43TLI6JO.js";import{d as I}from"./chunk-BOMXJJQJ.js";import{g as B}from"./chunk-IESNQYPT.js";import{a as Le,c as Be,h as De,m as Ue}from"./chunk-GYV7E64H.js";import{$ as ge,$b as y,Ac as Me,Ad as Re,B as ce,D as le,Da as pe,Dc as Te,Jc as Ie,Kb as q,Kc as ke,Lb as be,Mb as fe,Mc as we,Rb as g,Sb as r,Tb as s,Ub as T,Uc as Oe,V as Y,W as P,_c as X,aa as w,ba as ue,bb as c,bc as C,bd as S,da as Z,dc as d,ea as p,ec as _e,f as se,fa as m,fc as Ce,g as j,gc as ve,hb as x,hc as H,ic as W,jc as V,ka as f,l as k,la as _,nc as xe,ob as F,od as Ae,pb as me,pc as z,q as v,qb as he,qd as Pe,rd as Ee,sc as l,tc as L,ub as M,uc as E,va as de,xb as R,yc as ye,zc as Se}from"./chunk-KPABI5SC.js";import{a as ie,b as re,d as ae,h as A}from"./chunk-WWX6BADO.js";var It=["button"],kt=["*"];function wt(i,t){if(i&1&&(r(0,"div",2),T(1,"mat-pseudo-checkbox",6),s()),i&2){let e=d();c(),g("disabled",e.disabled)}}var gt=new Z("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:Ot});function Ot(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}var ut=new Z("MatButtonToggleGroup"),At={provide:Le,useExisting:ge(()=>Pt),multi:!0},K=class{source;value;constructor(t,e){this.source=t,this.value=e}},Pt=(()=>{class i{_changeDetector=m(X);_dir=m(We,{optional:!0});_multiple=!1;_disabled=!1;_disabledInteractive=!1;_selectionModel;_rawValue;_controlValueAccessorChangeFn=()=>{};_onTouched=()=>{};_buttonToggles;appearance;get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}_name=m(ee).getId("mat-button-toggle-group-");vertical;get value(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(n=>n.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}valueChange=new R;get selected(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=e,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markButtonsForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markButtonsForCheck()}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}change=new R;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._markButtonsForCheck()}_hideSingleSelectionIndicator;get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(e){this._hideMultipleSelectionIndicator=e,this._markButtonsForCheck()}_hideMultipleSelectionIndicator;constructor(){let e=m(gt,{optional:!0});this.appearance=e&&e.appearance?e.appearance:"standard",this.hideSingleSelectionIndicator=e?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=e?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new nt(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked)),this.multiple||this._initializeTabIndex()}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_keydown(e){if(this.multiple||this.disabled||Fe(e))return;let o=e.target.id,a=this._buttonToggles.toArray().findIndex(h=>h.buttonId===o),u=null;switch(e.keyCode){case 32:case 13:u=this._buttonToggles.get(a)||null;break;case 38:u=this._getNextButton(a,-1);break;case 37:u=this._getNextButton(a,this.dir==="ltr"?-1:1);break;case 40:u=this._getNextButton(a,1);break;case 39:u=this._getNextButton(a,this.dir==="ltr"?1:-1);break;default:return}u&&(e.preventDefault(),u._onButtonClick(),u.focus())}_emitChangeEvent(e){let n=new K(e,this.value);this._rawValue=n.value,this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}_syncButtonToggle(e,n,o=!1,a=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?n?this._selectionModel.select(e):this._selectionModel.deselect(e):a=!0,a?Promise.resolve().then(()=>this._updateModelValue(e,o)):this._updateModelValue(e,o)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(n=>e.value!=null&&n===e.value):e.value===this._rawValue}_initializeTabIndex(){if(this._buttonToggles.forEach(e=>{e.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let e=0;e<this._buttonToggles.length;e++){let n=this._buttonToggles.get(e);if(!n.disabled){n.tabIndex=0;break}}}_getNextButton(e,n){let o=this._buttonToggles;for(let a=1;a<=o.length;a++){let u=(e+n*a+o.length)%o.length,h=o.get(u);if(h&&!h.disabled)return h}return null}_setSelectionByValue(e){if(this._rawValue=e,!this._buttonToggles)return;let n=this._buttonToggles.toArray();if(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(o=>this._selectValue(o,n))):(this._clearSelection(),this._selectValue(e,n)),!this.multiple&&n.every(o=>o.tabIndex===-1)){for(let o of n)if(!o.disabled){o.tabIndex=0;break}}}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>{e.checked=!1,this.multiple||(e.tabIndex=-1)})}_selectValue(e,n){for(let o of n)if(o.value===e){o.checked=!0,this._selectionModel.select(o),this.multiple||(o.tabIndex=0);break}}_updateModelValue(e,n){n&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static \u0275fac=function(n){return new(n||i)};static \u0275dir=he({type:i,selectors:[["mat-button-toggle-group"]],contentQueries:function(n,o,a){if(n&1&&ve(a,dt,5),n&2){let u;W(u=V())&&(o._buttonToggles=u)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(n,o){n&1&&C("keydown",function(u){return o._keydown(u)}),n&2&&(q("role",o.multiple?"group":"radiogroup")("aria-disabled",o.disabled),z("mat-button-toggle-vertical",o.vertical)("mat-button-toggle-group-appearance-standard",o.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",S],value:"value",multiple:[2,"multiple","multiple",S],disabled:[2,"disabled","disabled",S],disabledInteractive:[2,"disabledInteractive","disabledInteractive",S],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",S],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",S]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[Te([At,{provide:ut,useExisting:i}])]})}return i})(),dt=(()=>{class i{_changeDetectorRef=m(X);_elementRef=m(pe);_focusMonitor=m($e);_idGenerator=m(ee);_animationDisabled=Ve();_checked=!1;ariaLabel;ariaLabelledby=null;_buttonElement;buttonToggleGroup;get buttonId(){return`${this.id}-button`}id;name;value;get tabIndex(){return this._tabIndex()}set tabIndex(e){this._tabIndex.set(e)}_tabIndex;disableRipple;get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}_appearance;get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}_disabled=!1;get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new R;constructor(){m(Ne).load(Qe);let e=m(ut,{optional:!0}),n=m(new Oe("tabindex"),{optional:!0})||"",o=m(gt,{optional:!0});this._tabIndex=de(parseInt(n)||0),this.buttonToggleGroup=e,this.appearance=o&&o.appearance?o.appearance:"standard",this.disabledInteractive=o?.disabledInteractive??!1}ngOnInit(){let e=this.buttonToggleGroup;this.id=this.id||this._idGenerator.getId("mat-button-toggle-"),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._animationDisabled||this._elementRef.nativeElement.classList.add("mat-button-toggle-animations-enabled"),this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){if(this.disabled)return;let e=this.isSingleSelector()?!0:!this._checked;if(e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let n=this.buttonToggleGroup._buttonToggles.find(o=>o.tabIndex===0);n&&(n.tabIndex=-1),this.tabIndex=0}this.change.emit(new K(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=F({type:i,selectors:[["mat-button-toggle"]],viewQuery:function(n,o){if(n&1&&H(It,5),n&2){let a;W(a=V())&&(o._buttonElement=a.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(n,o){n&1&&C("focus",function(){return o.focus()}),n&2&&(q("aria-label",null)("aria-labelledby",null)("id",o.id)("name",null),z("mat-button-toggle-standalone",!o.buttonToggleGroup)("mat-button-toggle-checked",o.checked)("mat-button-toggle-disabled",o.disabled)("mat-button-toggle-disabled-interactive",o.disabledInteractive)("mat-button-toggle-appearance-standard",o.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",S],appearance:"appearance",checked:[2,"checked","checked",S],disabled:[2,"disabled","disabled",S],disabledInteractive:[2,"disabledInteractive","disabledInteractive",S]},outputs:{change:"change"},exportAs:["matButtonToggle"],ngContentSelectors:kt,decls:7,vars:13,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-checkbox-wrapper"],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"],["state","checked","aria-hidden","true","appearance","minimal",3,"disabled"]],template:function(n,o){if(n&1){let a=y();_e(),r(0,"button",1,0),C("click",function(){return f(a),_(o._onButtonClick())}),be(2,wt,2,1,"div",2),r(3,"span",3),Ce(4),s()(),T(5,"span",4)(6,"span",5)}if(n&2){let a=xe(1);g("id",o.buttonId)("disabled",o.disabled&&!o.disabledInteractive||null),q("role",o.isSingleSelector()?"radio":"button")("tabindex",o.disabled&&!o.disabledInteractive?-1:o.tabIndex)("aria-pressed",o.isSingleSelector()?null:o.checked)("aria-checked",o.isSingleSelector()?o.checked:null)("name",o._getButtonName())("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby)("aria-disabled",o.disabled&&o.disabledInteractive?"true":null),c(2),fe(o.buttonToggleGroup&&(!o.buttonToggleGroup.multiple&&!o.buttonToggleGroup.hideSingleSelectionIndicator||o.buttonToggleGroup.multiple&&!o.buttonToggleGroup.hideMultipleSelectionIndicator)?2:-1),c(4),g("matRippleTrigger",a)("matRippleDisabled",o.disableRipple||o.disabled)}},dependencies:[Je,tt],styles:[`.mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);border-radius:var(--mat-button-toggle-legacy-shape);transform:translateZ(0)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}@media(forced-colors: active){.mat-button-toggle-standalone,.mat-button-toggle-group{outline:solid 1px}}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large));border:solid 1px var(--mat-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-pseudo-checkbox-minimal-selected-checkmark-color: var(--mat-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}@media(forced-colors: active){.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{outline:0}}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-button-toggle-legacy-text-color);font-family:var(--mat-button-toggle-legacy-label-text-font);font-size:var(--mat-button-toggle-legacy-label-text-size);line-height:var(--mat-button-toggle-legacy-label-text-line-height);font-weight:var(--mat-button-toggle-legacy-label-text-weight);letter-spacing:var(--mat-button-toggle-legacy-label-text-tracking);--mat-pseudo-checkbox-minimal-selected-checkmark-color: var(--mat-button-toggle-legacy-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-button-toggle-legacy-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle-checkbox-wrapper{display:inline-block;justify-content:flex-start;align-items:center;width:0;height:18px;line-height:18px;overflow:hidden;box-sizing:border-box;position:absolute;top:50%;left:16px;transform:translate3d(0, -50%, 0)}[dir=rtl] .mat-button-toggle-checkbox-wrapper{left:auto;right:16px}.mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:12px}[dir=rtl] .mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:auto;right:12px}.mat-button-toggle-checked .mat-button-toggle-checkbox-wrapper{width:18px}.mat-button-toggle-animations-enabled .mat-button-toggle-checkbox-wrapper{transition:width 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-checkbox-wrapper{transition:none}.mat-button-toggle-checked{color:var(--mat-button-toggle-legacy-selected-state-text-color);background-color:var(--mat-button-toggle-legacy-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-button-toggle-legacy-disabled-state-text-color);background-color:var(--mat-button-toggle-legacy-disabled-state-background-color);--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color: var(--mat-button-toggle-legacy-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-button-toggle-legacy-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-button-toggle-text-color, var(--mat-sys-on-surface));background-color:var(--mat-button-toggle-background-color, transparent);font-family:var(--mat-button-toggle-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-toggle-label-text-size, var(--mat-sys-label-large-size));line-height:var(--mat-button-toggle-label-text-line-height, var(--mat-sys-label-large-line-height));font-weight:var(--mat-button-toggle-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mat-button-toggle-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-button-toggle-divider-color, var(--mat-sys-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-toggle-selected-state-background-color, var(--mat-sys-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-button-toggle-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-toggle-disabled-state-background-color, transparent)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color: var(--mat-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-toggle-disabled-selected-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-button-toggle-state-layer-color, var(--mat-sys-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-button-toggle-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-button-toggle-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-button-toggle-legacy-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-button-toggle-height, 40px)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-button-toggle-legacy-state-layer-color)}@media(forced-colors: active){.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-animations-enabled .mat-button-toggle-button{transition:padding 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-button{transition:none}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:30px}[dir=rtl] .mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:0;padding-right:30px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius: var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard:not(.mat-button-toggle-vertical) .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large));border-bottom-right-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard:not(.mat-button-toggle-vertical) .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large));border-bottom-left-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-bottom-right-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large));border-bottom-left-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large));border-top-left-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large))}
`],encapsulation:2,changeDetection:0})}return i})(),In=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=me({type:i});static \u0275inj=ue({imports:[te,Ze,dt,te]})}return i})();var O=class{constructor(t,e,n){this.http=t;this.jwtHelper=e;this.router=n}user$=new j(null);initialized=!1;get storageUserKey(){return`${this.storageTokenKey}_user`}getUser$(){return this.user$.asObservable().pipe(ce(t=>t!==null))}getNullableUser$(){return this.user$.asObservable()}getCurrentUser(){return this.user$.getValue()}setUser(t){this.user$.next(t)}initUser(){if(this.initialized)return;this.initialized=!0;let t=localStorage.getItem(this.storageTokenKey),e=localStorage.getItem(this.storageUserKey);if(console.log("[BaseAuthService] initUser() - storageKey:",this.storageTokenKey),console.log("[BaseAuthService] initUser() - token:",t),console.log("[BaseAuthService] initUser() - userJson:",e),!this.isValidToken(t)){console.log("[BaseAuthService] initUser() - \uD1A0\uD070\uC774 \uC720\uD6A8\uD558\uC9C0 \uC54A\uC74C"),t&&localStorage.removeItem(this.storageTokenKey),e&&localStorage.removeItem(this.storageUserKey);return}if(this.jwtHelper.isTokenExpired(t)){console.log("[BaseAuthService] initUser() - \uD1A0\uD070\uC774 \uB9CC\uB8CC\uB428"),localStorage.removeItem(this.storageTokenKey),localStorage.removeItem(this.storageUserKey);return}if(e)try{let n=JSON.parse(e);console.log("[BaseAuthService] initUser() - localStorage\uC5D0\uC11C \uC0AC\uC6A9\uC790 \uC815\uBCF4 \uB85C\uB4DC:",n),this.user$.next(n),console.log("[BaseAuthService] initUser() - user$ \uC5C5\uB370\uC774\uD2B8 \uC644\uB8CC");return}catch(n){console.warn("[BaseAuthService] initUser() - \uC0AC\uC6A9\uC790 \uC815\uBCF4 \uD30C\uC2F1 \uC2E4\uD328:",n)}try{let n=this.jwtHelper.decodeToken(t);console.log("[BaseAuthService] initUser() - \uB514\uCF54\uB529\uB41C \uD1A0\uD070:",n);let o=n.payload||n;console.log("[BaseAuthService] initUser() - JWT\uC5D0\uC11C \uCD94\uCD9C\uD55C \uC0AC\uC6A9\uC790 \uC815\uBCF4:",o),this.user$.next(o),localStorage.setItem(this.storageUserKey,JSON.stringify(o)),console.log("[BaseAuthService] initUser() - user$ \uC5C5\uB370\uC774\uD2B8 \uBC0F localStorage \uC800\uC7A5 \uC644\uB8CC")}catch(n){console.warn("[BaseAuthService] initUser() - \uD1A0\uD070 \uB514\uCF54\uB529 \uC2E4\uD328:",n),localStorage.removeItem(this.storageTokenKey),localStorage.removeItem(this.storageUserKey)}}login(t){return this.http.post(this.loginEndpoint,t).pipe(v(e=>{console.log("[BaseAuthService] \u{1F50D} RAW \uC751\uB2F5:",JSON.stringify(e,null,2));let n=null,o="";if(e.data?.accessToken&&!e.data.user){o=e.data.accessToken,console.log("[BaseAuthService] \u2705 \uD328\uD134 1: JWT \uD1A0\uD070 \uBC29\uC2DD (user \uC815\uBCF4\uB294 \uD1A0\uD070\uC5D0 \uD3EC\uD568)");try{let h=this.jwtHelper.decodeToken(o);if(h&&h.payload)n=h.payload;else throw new Error("JWT payload not found")}catch{throw new Error("Failed to decode JWT token")}}else if(e.user&&e.accessToken)n=e.user,o=e.accessToken;else if(e.data?.user&&e.data?.accessToken)n=e.data.user,o=e.data.accessToken;else if(e.accessToken){o=e.accessToken;let u=e,{accessToken:h}=u;n=ae(u,["accessToken"])}if(!n)throw new Error("Invalid response structure: user not found");if(!o)throw new Error("Invalid response structure: accessToken not found");this.setToken(o);let a=this.mapUser(n);return this.user$.next(a),localStorage.setItem(this.storageUserKey,JSON.stringify(a)),a}),le(e=>{throw e}))}logout(){localStorage.removeItem(this.storageTokenKey),localStorage.removeItem(this.storageUserKey),this.user$.next(null),this.router.navigate([this.loginRedirectPath])}isAuthenticated(){let t=localStorage.getItem(this.storageTokenKey);return this.isValidToken(t)&&!this.jwtHelper.isTokenExpired(t)}setToken(t){localStorage.setItem(this.storageTokenKey,t)}isValidToken(t){if(!t)return!1;let e=t.toLowerCase().trim();return["undefined","null","false",""].includes(e)?!1:/^[A-Za-z0-9_-]+\.[A-Za-z0-9_-]+\.[A-Za-z0-9_-]+$/.test(t)}mapUser(t){if(console.log("[BaseAuthService] mapUser() - \uC785\uB825 user:",t),!t)throw console.warn("[BaseAuthService] mapUser() - user\uAC00 undefined/null\uC785\uB2C8\uB2E4!"),new Error("User object is undefined or null");return re(ie({},t),{createdAt:t.createdAt?new Date(t.createdAt):new Date,updatedAt:t.updatedAt?new Date(t.updatedAt):void 0})}};var U=class i extends O{constructor(e,n,o){super(e,n,o);this.http=e;this.jwtHelper=n;this.router=o;this.initUser()}storageTokenKey="ez_store_customer_token";loginEndpoint=b.baseSyncUrl+"/customer/login";loginRedirectPath="/store/login";register(e){let n=b.baseSyncUrl+"/customer/signup";return this.http.post(n,e).pipe(v(({user:o,accessToken:a})=>(this.setToken(a),this.mapUser(o))))}updateProfile(e){let n=this.user$.value?.id;if(!n)throw new Error("\uC0AC\uC6A9\uC790 \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778 \uD574\uC8FC\uC138\uC694.");let o=b.baseSyncUrl+`/customer/profile/${n}`;return this.http.patch(o,e).pipe(v(({user:a,accessToken:u})=>{this.setToken(u);let h=this.mapUser(a);return this.setUser(h),h}))}static \u0275fac=function(n){return new(n||i)(p(B),p(D),p(I))};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})};var $=class i extends O{constructor(e,n,o){super(e,n,o);this.http=e;this.jwtHelper=n;this.router=o;this.initUser()}storageTokenKey="ez_store_seller_token";loginEndpoint=b.baseSyncUrl+"/seller/login";loginRedirectPath="/store/seller/login";register(e){let n=b.baseSyncUrl+"/seller/signup";return this.http.post(n,e).pipe(v(({user:o,accessToken:a})=>(this.setToken(a),this.mapUser(o))))}updateProfile(e){let n=this.user$.value?.userIdx;if(!n)throw new Error("\uD310\uB9E4\uC790 \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778 \uD574\uC8FC\uC138\uC694.");let o=b.baseSyncUrl+`/seller/${n}/profile`;return this.http.put(o,e).pipe(v(({user:a})=>{let u=this.mapUser(a);return this.setUser(u),u}))}updateStore(e){let n=this.user$.value?.userIdx;if(!n)throw new Error("\uD310\uB9E4\uC790 \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uB85C\uADF8\uC778 \uD574\uC8FC\uC138\uC694.");let o=b.baseSyncUrl+`/seller/${n}/store`;return this.http.put(o,e).pipe(v(({user:a})=>{let u=this.mapUser(a);return this.setUser(u),u}))}static \u0275fac=function(n){return new(n||i)(p(B),p(D),p(I))};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})};var N=class i extends O{constructor(e,n,o){super(e,n,o);this.http=e;this.jwtHelper=n;this.router=o;this.initUser()}storageTokenKey="ez_store_admin_token";loginEndpoint=b.baseSyncUrl+"/users/admin/login";loginRedirectPath="/store/admin/login";register(e){let n=b.baseSyncUrl+"/admin/signup";return this.http.post(n,e).pipe(v(({user:o,accessToken:a})=>(this.setToken(a),this.mapUser(o))))}hasPermission(e){let n=this.getCurrentUser();return n?n.role==="SUPER_ADMIN"?!0:n.permissions?.includes(e)??!1:!1}isSuperAdmin(){return this.getCurrentUser()?.role==="SUPER_ADMIN"||!1}getAdminList(){let e=b.baseSyncUrl+"/admin/list";return this.http.get(e).pipe(v(({admins:n})=>n))}updateAdminPermissions(e,n){let o=b.baseSyncUrl+`/admin/${e}/permissions`;return this.http.put(o,{permissions:n}).pipe(v(({user:a})=>this.mapUser(a)))}deleteAdmin(e){let n=b.baseSyncUrl+`/admin/${e}`;return this.http.delete(n)}static \u0275fac=function(n){return new(n||i)(p(B),p(D),p(I))};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})};var Q=class i{constructor(t,e,n,o){this.router=t;this.customerAuth=e;this.sellerAuth=n;this.adminAuth=o;this.initializeMode()}currentMode$=new j("CUSTOMER");STORAGE_KEY="ez_store_auth_mode";getCurrentMode$(){return this.currentMode$.asObservable()}getCurrentMode(){return this.currentMode$.value}switchMode(t){return this.logoutAll(),this.setMode(t),k(!0)}logout(){return this.logoutAll(),k(!0)}setMode(t){this.currentMode$.next(t),localStorage.setItem(this.STORAGE_KEY,t)}initializeMode(){let t=localStorage.getItem(this.STORAGE_KEY);t&&["CUSTOMER","SELLER","ADMIN"].includes(t)&&this.currentMode$.next(t)}logoutAll(){let t=this.customerAuth.getCurrentUser(),e=this.sellerAuth.getCurrentUser(),n=this.adminAuth.getCurrentUser();t&&(localStorage.removeItem("ez_store_customer_token"),this.customerAuth.setUser(null)),e&&(localStorage.removeItem("ez_store_seller_token"),this.sellerAuth.setUser(null)),n&&(localStorage.removeItem("ez_store_admin_token"),this.adminAuth.setUser(null))}navigateToLogin(t){switch(t){case"CUSTOMER":this.router.navigate(["/store/login"]);break;case"SELLER":this.router.navigate(["/store/seller/login"]);break;case"ADMIN":this.router.navigate(["/store/admin/login"]);break}}getCurrentUser(){return console.log("[AuthModeService] getCurrentUser() \uD638\uCD9C\uB428"),this.currentMode$.pipe(Y(t=>{switch(t){case"CUSTOMER":let e=this.customerAuth.getCurrentUser();return this.customerAuth.getNullableUser$();case"SELLER":let n=this.sellerAuth.getCurrentUser();return this.sellerAuth.getNullableUser$();case"ADMIN":let o=this.adminAuth.getCurrentUser();return this.adminAuth.getNullableUser$();default:return k(null)}}))}getCurrentUserSync(){switch(this.getCurrentMode()){case"CUSTOMER":return this.customerAuth.getCurrentUser();case"SELLER":return this.sellerAuth.getCurrentUser();case"ADMIN":return this.adminAuth.getCurrentUser();default:return null}}isAuthenticated(){return this.currentMode$.pipe(Y(t=>{switch(t){case"CUSTOMER":return k(this.customerAuth.isAuthenticated());case"SELLER":return k(this.sellerAuth.isAuthenticated());case"ADMIN":return k(this.adminAuth.isAuthenticated());default:return k(!1)}}))}getHomeRoute(){switch(this.getCurrentMode()){case"CUSTOMER":return"/store";case"SELLER":return"/store/seller/dashboard";case"ADMIN":return"/store/admin/dashboard";default:return"/store"}}static \u0275fac=function(e){return new(e||i)(p(I),p(U),p($),p(N))};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})};var Rt=["messagesContainer"],Lt=(i,t,e,n)=>({"message-client":i,"message-agent":t,"message-bot":e,"message-system":n});function Bt(i,t){i&1&&(r(0,"div",16)(1,"div",17)(2,"mat-icon",18),l(3,"chat_bubble_outline"),s(),r(4,"h3"),l(5,"\uCC44\uD305\uC0C1\uB2F4\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4"),s(),r(6,"p"),l(7,"\uCC44\uD305\uC0C1\uB2F4 \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74"),T(8,"br"),l(9,"\uAE00\uB85C\uBC8C \uB124\uBE44\uAC8C\uC774\uD130\uC5D0\uC11C \uD65C\uC131\uD654\uD574\uC8FC\uC138\uC694."),s(),r(10,"p",19),l(11,"\u2699\uFE0F \u2192 \uAE00\uB85C\uBC8C \uAE30\uB2A5 \u2192 \uCC44\uD305\uC0C1\uB2F4 \uD65C\uC131\uD654"),s()()())}function Dt(i,t){if(i&1){let e=y();r(0,"button",23),C("click",function(){f(e);let o=d(3);return _(o.goToLogin())}),l(1," \uB85C\uADF8\uC778 "),s()}}function Ut(i,t){if(i&1){let e=y();r(0,"button",24),C("click",function(){f(e);let o=d(3);return _(o.closeError())}),r(1,"mat-icon"),l(2,"close"),s()()}}function $t(i,t){if(i&1&&(r(0,"div",20)(1,"mat-icon"),l(2),s(),r(3,"span"),l(4),s(),M(5,Dt,2,0,"button",21)(6,Ut,3,0,"button",22),s()),i&2){let e=d(2);c(2),L(e.errorMessage.includes("\uB85C\uADF8\uC778")?"login":"error_outline"),c(2),L(e.errorMessage),c(),g("ngIf",e.errorMessage.includes("\uB85C\uADF8\uC778")),c(),g("ngIf",!e.errorMessage.includes("\uB85C\uADF8\uC778"))}}function Nt(i,t){if(i&1){let e=y();r(0,"div",16)(1,"div",17)(2,"mat-icon",18),l(3,"lock_person"),s(),r(4,"h3"),l(5,"\uB85C\uADF8\uC778\uC774 \uD544\uC694\uD569\uB2C8\uB2E4"),s(),r(6,"p"),l(7,"\uCC44\uD305 \uC0C1\uB2F4\uC740 \uB85C\uADF8\uC778 \uD6C4 \uC774\uC6A9\uD558\uC2E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),s(),r(8,"p",19),l(9,"\uB85C\uADF8\uC778\uD558\uC2DC\uBA74 \uC0C1\uB2F4 \uB0B4\uC5ED\uC744 \uC800\uC7A5\uD558\uACE0,"),T(10,"br"),l(11,"\uB354 \uB098\uC740 \uC11C\uBE44\uC2A4\uB97C \uC81C\uACF5\uBC1B\uC73C\uC2E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),s(),r(12,"div",25)(13,"button",23),C("click",function(){f(e);let o=d(2);return _(o.goToLogin())}),r(14,"mat-icon"),l(15,"login"),s(),r(16,"span"),l(17,"\uB85C\uADF8\uC778\uD558\uB7EC \uAC00\uAE30"),s()()()()()}}function Ft(i,t){i&1&&(r(0,"mat-icon"),l(1,"smart_toy"),s())}function Wt(i,t){i&1&&(r(0,"mat-icon"),l(1,"person"),s())}function Vt(i,t){i&1&&(r(0,"mat-icon"),l(1,"info"),s())}function zt(i,t){if(i&1&&(r(0,"div",34),M(1,Ft,2,0,"mat-icon",35)(2,Wt,2,0,"mat-icon",35)(3,Vt,2,0,"mat-icon",35),r(4,"span",36),l(5),s()()),i&2){let e=d().$implicit,n=d(3);c(),g("ngIf",e.senderType===n.SenderType.BOT),c(),g("ngIf",e.senderType===n.SenderType.AGENT),c(),g("ngIf",e.senderType===n.SenderType.SYSTEM),c(2),E(" ",e.senderType===n.SenderType.BOT?"\uCC57\uBD07":e.senderType===n.SenderType.AGENT?"\uC0C1\uB2F4\uC6D0":"\uC2DC\uC2A4\uD15C"," ")}}function Gt(i,t){if(i&1&&(r(0,"div",29)(1,"div",30),M(2,zt,6,4,"div",31),r(3,"div",32),l(4),s(),r(5,"div",33),l(6),ke(7,"date"),s()()()),i&2){let e=t.$implicit,n=d(3);g("ngClass",Ie(7,Lt,e.senderType===n.SenderType.CLIENT,e.senderType===n.SenderType.AGENT,e.senderType===n.SenderType.BOT,e.senderType===n.SenderType.SYSTEM)),c(2),g("ngIf",e.senderType!==n.SenderType.CLIENT),c(2),L(e.content),c(2),E(" ",we(7,4,e.createdAt,"HH:mm")," ")}}function jt(i,t){i&1&&(r(0,"div",37)(1,"div",38),T(2,"span")(3,"span")(4,"span"),s(),r(5,"span",39),l(6,"\uC0C1\uB2F4\uC6D0\uC774 \uC785\uB825 \uC911..."),s()())}function qt(i,t){if(i&1&&(r(0,"div",26,0),M(2,Gt,8,12,"div",27)(3,jt,7,0,"div",28),s()),i&2){let e=d(2);c(2),g("ngForOf",e.messages)("ngForTrackBy",e.trackByMessageId),c(),g("ngIf",e.agentTyping)}}function Ht(i,t){if(i&1){let e=y();r(0,"button",42),C("click",function(){let o=f(e).$implicit,a=d(3);return _(a.selectQuickReply(o))}),l(1),s()}if(i&2){let e=t.$implicit;c(),E(" ",e," ")}}function Kt(i,t){if(i&1&&(r(0,"div",40),M(1,Ht,2,1,"button",41),s()),i&2){let e=d(2);c(),g("ngForOf",e.quickReplies)}}function Jt(i,t){if(i&1){let e=y();r(0,"div",47)(1,"div",48),T(2,"mat-spinner",49),r(3,"span",50),l(4,"\uC0C1\uB2F4\uC6D0 \uC5F0\uACB0 \uC911..."),s()(),r(5,"button",51),C("click",function(){f(e);let o=d(3);return _(o.cancelSupportRequest())}),r(6,"mat-icon"),l(7,"close"),s(),r(8,"span"),l(9,"\uC5F0\uACB0 \uCDE8\uC18C"),s()()()}}function Qt(i,t){if(i&1){let e=y();r(0,"button",52),C("click",function(){f(e);let o=d(3);return _(o.requestSupport())}),r(1,"mat-icon"),l(2,"support_agent"),s(),r(3,"span"),l(4,"\uC0C1\uB2F4\uC6D0 \uC5F0\uACB0"),s()()}if(i&2){let e=d(3);g("disabled",e.isLoading)}}function Yt(i,t){i&1&&(r(0,"mat-icon"),l(1,"send"),s())}function Zt(i,t){i&1&&T(0,"mat-spinner",57)}function Xt(i,t){if(i&1){let e=y();r(0,"div",53)(1,"input",54),Me("ngModelChange",function(o){f(e);let a=d(3);return Se(a.newMessage,o)||(a.newMessage=o),_(o)}),C("keyup.enter",function(){f(e);let o=d(3);return _(o.sendMessage())})("input",function(){f(e);let o=d(3);return _(o.onInputTyping())}),s(),r(2,"button",55),C("click",function(){f(e);let o=d(3);return _(o.sendMessage())}),M(3,Yt,2,0,"mat-icon",35)(4,Zt,1,0,"mat-spinner",56),s()()}if(i&2){let e=d(3);c(),ye("ngModel",e.newMessage),g("disabled",e.isLoading),c(),g("disabled",!e.newMessage.trim()||e.isLoading),c(),g("ngIf",!e.isLoading),c(),g("ngIf",e.isLoading)}}function en(i,t){if(i&1&&(r(0,"div",43),M(1,Jt,10,0,"div",44)(2,Qt,5,1,"button",45)(3,Xt,5,5,"div",46),s()),i&2){let e=d(2);c(),g("ngIf",e.currentRoom&&e.currentRoom.status===e.RoomStatus.WAITING_AGENT),c(),g("ngIf",e.currentRoom&&e.currentRoom.status===e.RoomStatus.BOT_ACTIVE),c(),g("ngIf",e.currentRoom&&e.currentRoom.status!==e.RoomStatus.WAITING_AGENT)}}function tn(i,t){if(i&1){let e=y();r(0,"div",2)(1,"div",3)(2,"div",4)(3,"mat-icon",5),l(4,"store"),s(),r(5,"div",6)(6,"h3"),l(7,"\uACE0\uAC1D \uC0C1\uB2F4"),s(),r(8,"span",7),T(9,"span",8),l(10),s()()(),r(11,"div",9)(12,"button",10),C("click",function(){f(e);let o=d();return _(o.toggleChat())}),r(13,"mat-icon"),l(14,"close"),s()()()(),M(15,Bt,12,0,"div",11)(16,$t,7,4,"div",12)(17,Nt,18,0,"div",11)(18,qt,4,3,"div",13)(19,Kt,2,1,"div",14)(20,en,4,3,"div",15),s()}if(i&2){let e=d();c(8),z("connected",e.isConnected),c(2),E(" ",e.isConnected?"\uC5F0\uACB0\uB428":"\uC5F0\uACB0 \uC911..."," "),c(5),g("ngIf",!e.chatConsultationToggle.isEnabled()),c(),g("ngIf",e.errorMessage&&e.chatConsultationToggle.isEnabled()),c(),g("ngIf",e.needsLogin&&e.chatConsultationToggle.isEnabled()),c(),g("ngIf",!e.needsLogin&&e.chatConsultationToggle.isEnabled()),c(),g("ngIf",e.showQuickReplies&&e.quickReplies.length>0&&!e.needsLogin&&e.chatConsultationToggle.isEnabled()),c(),g("ngIf",!e.needsLogin&&e.chatConsultationToggle.isEnabled())}}var _t=class i{constructor(t,e,n,o,a,u,h,Ct,nn){this.apiService=t;this.socketService=e;this.chatBotService=n;this.customerAuthService=o;this.adminAuthService=a;this.sellerAuthService=u;this.authModeService=h;this.router=Ct;this.dialog=nn}organizationId;unreadCountChange=new R;messagesContainer;destroy$=new se;typingTimeout;isOpen=!1;isMinimized=!1;isConnected=!1;isLoading=!1;isLoggedIn=!1;needsLogin=!1;currentClient;currentRoom;messages=[];newMessage="";unreadCount=0;isTyping=!1;agentTyping=!1;errorMessage="";quickReplies=[];showQuickReplies=!1;SenderType=at;RoomStatus=rt;debugLogger=m(Xe);chatConsultationToggle=m(it);ngOnInit(){this.chatConsultationToggle.enabled$.pipe(P(this.destroy$)).subscribe(t=>{this.debugLogger.info("\uCC44\uD305\uC704\uC82F",`\u{1F4DE} \uCC44\uD305\uC0C1\uB2F4 \uC0C1\uD0DC \uBCC0\uACBD: ${t?"\uD65C\uC131\uD654":"\uBE44\uD65C\uC131\uD654"}`),t?this.currentClient||this.initialize():this.socketService.isConnected()&&(this.socketService.disconnect(),this.debugLogger.info("\uCC44\uD305\uC704\uC82F","\u{1F50C} Socket \uC5F0\uACB0 \uD574\uC81C\uB428"))}),this.chatConsultationToggle.isEnabled()?this.initialize():this.debugLogger.info("\uCC44\uD305\uC704\uC82F","\u26A0\uFE0F \uCC44\uD305\uC0C1\uB2F4\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4")}ngOnDestroy(){this.socketService.disconnect(),this.destroy$.next(),this.destroy$.complete(),this.typingTimeout&&clearTimeout(this.typingTimeout)}initialize(){return A(this,null,function*(){try{this.debugLogger.info("\uCC44\uD305\uC704\uC82F","\u{1F680} \uCC44\uD305 \uC704\uC82F \uCD08\uAE30\uD654 \uC2DC\uC791"),this.debugLogger.info("\uCC44\uD305\uC704\uC82F",`organizationId: ${this.organizationId}`);let t=this.authModeService.getCurrentMode();this.debugLogger.info("\uCC44\uD305\uC704\uC82F",`\uD604\uC7AC \uC778\uC99D \uBAA8\uB4DC: ${t||"\uC5C6\uC74C"}`);let e=null;if(t==="CUSTOMER"?(e=this.customerAuthService.getCurrentUser(),this.debugLogger.info("\uCC44\uD305\uC704\uC82F",`\uACE0\uAC1D \uBAA8\uB4DC - \uC0AC\uC6A9\uC790: ${e?.name||"\uC5C6\uC74C"}`)):t==="ADMIN"||t==="SUPER_ADMIN"?(e=this.adminAuthService.getCurrentUser(),this.debugLogger.info("\uCC44\uD305\uC704\uC82F",`\uAD00\uB9AC\uC790 \uBAA8\uB4DC - \uC0AC\uC6A9\uC790: ${e?.name||"\uC5C6\uC74C"}`)):t==="SELLER"&&(e=this.sellerAuthService.getCurrentUser(),this.debugLogger.info("\uCC44\uD305\uC704\uC82F",`\uD310\uB9E4\uC790 \uBAA8\uB4DC - \uC0AC\uC6A9\uC790: ${e?.name||"\uC5C6\uC74C"}`)),!e){this.debugLogger.warn("\uCC44\uD305\uC704\uC82F","\u26A0\uFE0F \uB85C\uADF8\uC778\uD558\uC9C0 \uC54A\uC740 \uC0AC\uC6A9\uC790"),this.isLoggedIn=!1,this.needsLogin=!0;return}this.isLoggedIn=!0,this.needsLogin=!1,this.debugLogger.success("\uCC44\uD305\uC704\uC82F",`\u2705 \uB85C\uADF8\uC778 \uD655\uC778 - ${e.name} (${e.email})`),this.debugLogger.info("\uCC44\uD305\uC704\uC82F",`\uC0AC\uC6A9\uC790 \uC5ED\uD560: ${JSON.stringify(e.role)}`);let n=this.generateFingerprintData();this.debugLogger.info("\uCC44\uD305\uC704\uC82F","\u{1F511} \uD551\uAC70\uD504\uB9B0\uD2B8 \uC0DD\uC131 \uC644\uB8CC"),this.debugLogger.info("\uCC44\uD305\uC704\uC82F",`\uD551\uAC70\uD504\uB9B0\uD2B8 \uC815\uBCF4: ${n.platform} | ${n.screen}`),this.debugLogger.info("\uCC44\uD305\uC704\uC82F","\u{1F4DE} \uBC31\uC5D4\uB4DC API \uD638\uCD9C - \uACE0\uAC1D \uC2DD\uBCC4");let o=yield this.apiService.identifyCustomerWithObject({fingerprintData:n,pluginKey:this.organizationId,userName:e?.name,userEmail:e?.email}).toPromise();this.debugLogger.success("\uCC44\uD305\uC704\uC82F",`\u2705 \uACE0\uAC1D \uC2DD\uBCC4 \uC644\uB8CC - clientId: ${o?.client?.id}`),this.debugLogger.info("\uCC44\uD305\uC704\uC82F",`\uC0AC\uC6A9\uC790 \uC815\uBCF4 \uC804\uB2EC - ${e?.name} (${e?.email})`),o?.client&&(this.currentClient=o.client,this.debugLogger.info("\uCC44\uD305\uC704\uC82F",`\uD074\uB77C\uC774\uC5B8\uD2B8 \uC815\uBCF4 \uC800\uC7A5 - ${o.client.name||o.client.id}`),this.debugLogger.info("\uCC44\uD305\uC704\uC82F","\u{1F504} \uCC44\uD305\uBC29 \uC124\uC815 \uC2DC\uC791"),yield this.setupChatRoom(),this.debugLogger.info("\uCC44\uD305\uC704\uC82F","\u{1F50C} WebSocket \uC5F0\uACB0 \uC2DC\uC791"),yield this.connectWebSocket(),this.quickReplies=this.chatBotService.getQuickReplies(),this.debugLogger.info("\uCC44\uD305\uC704\uC82F",`\uBE60\uB978 \uB2F5\uC7A5 \uB85C\uB4DC: ${this.quickReplies.length}\uAC1C`),this.debugLogger.success("\uCC44\uD305\uC704\uC82F","\u{1F389} \uCC44\uD305 \uC704\uC82F \uCD08\uAE30\uD654 \uC644\uB8CC!"))}catch(t){this.debugLogger.error("\uCC44\uD305\uC704\uC82F",`\u274C \uCD08\uAE30\uD654 \uC2E4\uD328: ${t.message||t}`),this.debugLogger.error("\uCC44\uD305\uC704\uC82F",`\uC5D0\uB7EC \uC0C1\uC138: status=${t.status}, ${JSON.stringify(t.error||{})}`),this.errorMessage="\uCC44\uD305\uC744 \uC2DC\uC791\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694."}})}setupChatRoom(){return A(this,null,function*(){if(!this.currentClient){this.debugLogger.error("\uCC44\uD305\uBC29\uC124\uC815","\u274C \uD074\uB77C\uC774\uC5B8\uD2B8 \uC815\uBCF4 \uC5C6\uC74C");return}try{this.debugLogger.info("\uCC44\uD305\uBC29\uC124\uC815",`\u{1F4CB} \uCC44\uD305\uBC29 \uC870\uD68C \uC2DC\uC791 - clientId: ${this.currentClient.id}`);let t=yield this.apiService.getClientRooms(this.currentClient.id).toPromise();this.debugLogger.info("\uCC44\uD305\uBC29\uC124\uC815",`\uC870\uD68C \uACB0\uACFC: ${t?.length||0}\uAC1C \uCC44\uD305\uBC29 \uBC1C\uACAC`);let e=t?.filter(n=>n.status!=="resolved"&&n.status!=="closed")||[];if(this.debugLogger.info("\uCC44\uD305\uBC29\uC124\uC815",`\u{1F3AF}\u{1F3AF}\u{1F3AF} \uD65C\uC131 \uCC44\uD305\uBC29 \uD544\uD130\uB9C1 \uACB0\uACFC: ${e.length}\uAC1C (\uC804\uCCB4: ${t?.length||0}\uAC1C)`),t&&t.length>0&&this.debugLogger.info("\uCC44\uD305\uBC29\uC124\uC815",`\u{1F4CB} \uC804\uCCB4 \uCC44\uD305\uBC29 \uC0C1\uD0DC: ${t.map(n=>n.status).join(", ")}`),e.length>0)this.currentRoom=e[0],this.debugLogger.success("\uCC44\uD305\uBC29\uC124\uC815",`\u2705\u2705\u2705 \uAE30\uC874 \uD65C\uC131 \uCC44\uD305\uBC29 \uC7AC\uC0AC\uC6A9 - roomId: ${this.currentRoom.id}`),this.debugLogger.info("\uCC44\uD305\uBC29\uC124\uC815",`\uCC44\uD305\uBC29 \uC0C1\uD0DC: ${this.currentRoom.status}`),this.debugLogger.info("\uCC44\uD305\uBC29\uC124\uC815","\u{1F4E8} \uBA54\uC2DC\uC9C0 \uB85C\uB4DC \uC2DC\uC791"),yield this.loadMessages();else{this.debugLogger.warn("\uCC44\uD305\uBC29\uC124\uC815","\u26A0\uFE0F\u26A0\uFE0F\u26A0\uFE0F \uD65C\uC131 \uCC44\uD305\uBC29 \uC5C6\uC74C - \uC0C8 \uCC44\uD305\uBC29 \uC0DD\uC131 \uC2DC\uC791");try{let n=yield this.apiService.createRoomWithOrganization({clientId:this.currentClient.id,organizationId:this.organizationId}).toPromise();this.debugLogger.info("\uCC44\uD305\uBC29\uC124\uC815",`API \uC751\uB2F5: ${JSON.stringify(n)}`);let o=n?.room||n;if(!o||!o.id){this.debugLogger.error("\uCC44\uD305\uBC29\uC124\uC815","\u274C \uCC44\uD305\uBC29 \uC0DD\uC131 \uC2E4\uD328 - \uC751\uB2F5 \uB370\uC774\uD130 \uC5C6\uC74C"),this.debugLogger.warn("\uCC44\uD305\uBC29\uC124\uC815","\u26A0\uFE0F \uBC31\uC5D4\uB4DC API \uBBF8\uAD6C\uD604 - \uC784\uC2DC \uCC44\uD305\uBC29 \uC0DD\uC131");let u="temp-room-"+Date.now();this.currentRoom={id:u,clientId:this.currentClient.id,organizationId:this.organizationId,status:"bot_active",createdAt:new Date},this.debugLogger.info("\uCC44\uD305\uBC29\uC124\uC815",`\u{1F4A1} \uC784\uC2DC \uCC44\uD305\uBC29 \uC0DD\uC131 - roomId: ${u}`)}else this.currentRoom=o,this.debugLogger.success("\uCC44\uD305\uBC29\uC124\uC815",`\u2705 \uC0C8 \uCC44\uD305\uBC29 \uC0DD\uC131 \uC644\uB8CC - roomId: ${o.id}`);let a={id:"welcome-"+Date.now(),roomId:this.currentRoom.id,senderType:"bot",content:"\uC548\uB155\uD558\uC138\uC694! \uBB34\uC5C7\uC744 \uB3C4\uC640\uB4DC\uB9B4\uAE4C\uC694?",createdAt:new Date};this.messages.push(a),this.debugLogger.info("\uCC44\uD305\uBC29\uC124\uC815","\u{1F4AC} \uD658\uC601 \uBA54\uC2DC\uC9C0 \uCD94\uAC00")}catch(n){this.debugLogger.error("\uCC44\uD305\uBC29\uC124\uC815",`\u274C \uCC44\uD305\uBC29 \uC0DD\uC131 API \uC624\uB958: ${n?.message}`),this.debugLogger.warn("\uCC44\uD305\uBC29\uC124\uC815","\u26A0\uFE0F \uC784\uC2DC \uCC44\uD305\uBC29\uC73C\uB85C \uACC4\uC18D \uC9C4\uD589");let o="temp-room-"+Date.now();this.currentRoom={id:o,clientId:this.currentClient.id,organizationId:this.organizationId,status:"bot_active",createdAt:new Date},this.debugLogger.info("\uCC44\uD305\uBC29\uC124\uC815",`\u{1F4A1} \uC784\uC2DC \uCC44\uD305\uBC29 \uC0DD\uC131 - roomId: ${o}`);let a={id:"welcome-"+Date.now(),roomId:o,senderType:"bot",content:"\uC548\uB155\uD558\uC138\uC694! \uBB34\uC5C7\uC744 \uB3C4\uC640\uB4DC\uB9B4\uAE4C\uC694? (\uC624\uD504\uB77C\uC778 \uBAA8\uB4DC)",createdAt:new Date};this.messages.push(a)}}}catch(t){this.debugLogger.error("\uCC44\uD305\uBC29\uC124\uC815",`\u274C \uCC44\uD305\uBC29 \uC124\uC815 \uC2E4\uD328: ${t.message||t}`)}})}loadMessages(){return A(this,null,function*(){if(!this.currentRoom){this.debugLogger.warn("\uBA54\uC2DC\uC9C0\uB85C\uB4DC","\u26A0\uFE0F \uCC44\uD305\uBC29 \uC815\uBCF4 \uC5C6\uC74C");return}try{this.debugLogger.info("\uBA54\uC2DC\uC9C0\uB85C\uB4DC",`\u{1F4E8} \uBA54\uC2DC\uC9C0 \uC870\uD68C - roomId: ${this.currentRoom.id}`);let t=yield this.apiService.getRoomMessages(this.currentRoom.id).toPromise();t?(this.messages=t,this.debugLogger.success("\uBA54\uC2DC\uC9C0\uB85C\uB4DC",`\u2705 \uBA54\uC2DC\uC9C0 \uB85C\uB4DC \uC644\uB8CC: ${t.length}\uAC1C`),this.scrollToBottom()):this.debugLogger.warn("\uBA54\uC2DC\uC9C0\uB85C\uB4DC","\u26A0\uFE0F \uBA54\uC2DC\uC9C0 \uC5C6\uC74C")}catch(t){this.debugLogger.error("\uBA54\uC2DC\uC9C0\uB85C\uB4DC",`\u274C \uBA54\uC2DC\uC9C0 \uB85C\uB4DC \uC2E4\uD328: ${t.message||t}`)}})}connectWebSocket(){return A(this,null,function*(){if(!this.currentClient||!this.currentRoom){this.debugLogger.warn("WebSocket","\u26A0\uFE0F \uD074\uB77C\uC774\uC5B8\uD2B8 \uB610\uB294 \uCC44\uD305\uBC29 \uC815\uBCF4 \uC5C6\uC74C");return}this.debugLogger.info("WebSocket","\u{1F50C} WebSocket \uC5F0\uACB0 \uC2DC\uC791");try{yield this.socketService.connect(),this.debugLogger.success("WebSocket","\u2705 WebSocket \uC5F0\uACB0 \uC131\uACF5");let t=this.socketService.isConnected();if(this.debugLogger.info("WebSocket",`\u{1F4CA} \uC5F0\uACB0 \uC0C1\uD0DC: ${t?"\uC5F0\uACB0\uB428":"\uC5F0\uACB0 \uC548\uB428"}`),!t){this.debugLogger.error("WebSocket","\u274C \uC5F0\uACB0 \uC2E4\uD328 - isConnected() = false"),this.isConnected=!1;return}this.debugLogger.info("WebSocket",`\u{1F4E4} \uD074\uB77C\uC774\uC5B8\uD2B8 \uB4F1\uB85D - clientId: ${this.currentClient.id}, roomId: ${this.currentRoom.id}`),this.socketService.registerClient(this.currentClient.id,this.currentRoom.id),this.debugLogger.info("WebSocket",`\u{1F4E4} \uCC44\uD305\uBC29 \uCC38\uC5EC \uC694\uCCAD - roomId: ${this.currentRoom.id}, clientId: ${this.currentClient.id}`),this.socketService.joinRoom(this.currentRoom.id,this.currentClient.id),this.isConnected=!0,this.debugLogger.success("WebSocket",`\u2705 \uCC44\uD305\uBC29 \uCC38\uC5EC \uC644\uB8CC - roomId: ${this.currentRoom.id}`),this.socketService.onAnyEvent((e,n)=>{this.debugLogger.info("\uC18C\uCF13\uC774\uBCA4\uD2B8",`\u{1F3AF} ${e}`)})}catch(t){this.debugLogger.error("WebSocket",`\u274C WebSocket \uC5F0\uACB0 \uC2E4\uD328: ${t}`),this.isConnected=!1;return}this.socketService.onEvent("createChat").pipe(P(this.destroy$)).subscribe(t=>{if(this.debugLogger.info("\uBA54\uC2DC\uC9C0\uC218\uC2E0",`\u{1F3AF}\u{1F3AF}\u{1F3AF} createChat \uC774\uBCA4\uD2B8 \uC218\uC2E0: ${JSON.stringify(t)}`),t&&t.chat&&t.chat.roomId===this.currentRoom?.id){if(this.debugLogger.info("\uBA54\uC2DC\uC9C0\uC218\uC2E0",`\u{1F4E5} \uC0C8 \uBA54\uC2DC\uC9C0 \uB3C4\uCC29 - ${t.chat.senderType}: ${t.chat.content?.substring(0,20)}...`),this.messages.find(n=>n.id===t.chat.id)){this.debugLogger.warn("\uBA54\uC2DC\uC9C0\uC218\uC2E0","\u26A0\uFE0F \uC911\uBCF5 \uBA54\uC2DC\uC9C0 \uBB34\uC2DC");return}this.messages.push(t.chat),this.scrollToBottom(),this.isOpen||(this.unreadCount++,this.unreadCountChange.emit(this.unreadCount),this.debugLogger.info("\uBA54\uC2DC\uC9C0\uC218\uC2E0",`\uC77D\uC9C0 \uC54A\uC740 \uBA54\uC2DC\uC9C0: ${this.unreadCount}\uAC1C`))}else this.debugLogger.warn("\uBA54\uC2DC\uC9C0\uC218\uC2E0",`\u26A0\uFE0F \uB2E4\uB978 \uCC44\uD305\uBC29\uC758 \uBA54\uC2DC\uC9C0 (\uD604\uC7AC: ${this.currentRoom?.id}, \uC218\uC2E0: ${t?.chat?.roomId})`)}),this.socketService.onEvent("assignAgent").pipe(P(this.destroy$)).subscribe(t=>{if(this.debugLogger.success("\uC0C1\uB2F4\uC6D0\uBC30\uC815",`\u2705 \uC0C1\uB2F4\uC6D0 \uBC30\uC815\uB428 - agentId: ${t.agentId}`),t&&this.currentRoom){this.currentRoom.status="agent_active",this.currentRoom.agentId=t.agentId,this.showQuickReplies=!1;let e={id:"system-"+Date.now(),roomId:this.currentRoom.id,senderType:"system",content:"\uC0C1\uB2F4\uC6D0\uC774 \uC5F0\uACB0\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",createdAt:new Date};this.messages.push(e),this.scrollToBottom(),this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uBC30\uC815","\u{1F4AC} \uC0C1\uB2F4 \uC2DC\uC791 \uAC00\uB2A5")}}),this.socketService.onEvent("agentTyping").pipe(P(this.destroy$)).subscribe(t=>{t&&t.roomId===this.currentRoom?.id&&(this.agentTyping=t.isTyping)}),this.socketService.onEvent("roomClosed").pipe(P(this.destroy$)).subscribe(t=>{if(this.debugLogger.info("\uC0C1\uB2F4\uC885\uB8CC",`\u{1F6AA} \uC0C1\uB2F4\uC6D0\uC774 \uC0C1\uB2F4\uC744 \uC885\uB8CC\uD588\uC2B5\uB2C8\uB2E4 - roomId: ${t.roomId}`),t&&t.roomId===this.currentRoom?.id){let e={id:"system-"+Date.now(),roomId:this.currentRoom.id,senderType:"system",content:"\uC0C1\uB2F4\uC774 \uC885\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC774\uC6A9\uD574\uC8FC\uC154\uC11C \uAC10\uC0AC\uD569\uB2C8\uB2E4.",createdAt:new Date};this.messages.push(e),this.scrollToBottom(),this.currentRoom&&(this.currentRoom.status="resolved",this.currentRoom.agentId=void 0),this.debugLogger.info("\uC0C1\uB2F4\uC885\uB8CC","\u2705 \uC0C1\uB2F4 \uC885\uB8CC \uCC98\uB9AC \uC644\uB8CC"),setTimeout(()=>{this.debugLogger.info("\uC0C1\uB2F4\uC885\uB8CC","\u{1F504} \uCC44\uD305 \uC704\uC82F \uCD08\uAE30\uD654")},3e3)}}),this.socketService.onEvent("error").pipe(P(this.destroy$)).subscribe(t=>{t&&(this.errorMessage="\uC5F0\uACB0 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")})})}toggleChat(){if(this.isOpen=!this.isOpen,this.debugLogger.info("\uCC44\uD305\uD1A0\uAE00",`\u{1F4AC} \uCC44\uD305\uCC3D ${this.isOpen?"\uC5F4\uB9BC":"\uB2EB\uD798"}`),this.isOpen){this.unreadCount=0,this.unreadCountChange.emit(0),this.debugLogger.info("\uCC44\uD305\uD1A0\uAE00","\u{1F4ED} \uC77D\uC9C0 \uC54A\uC740 \uBA54\uC2DC\uC9C0 \uCD08\uAE30\uD654");let t=this.authModeService.getCurrentMode(),e=null;t==="CUSTOMER"?e=this.customerAuthService.getCurrentUser():t==="ADMIN"||t==="SUPER_ADMIN"?e=this.adminAuthService.getCurrentUser():t==="SELLER"&&(e=this.sellerAuthService.getCurrentUser()),e?!this.isLoggedIn&&e&&(this.isLoggedIn=!0,this.needsLogin=!1,this.debugLogger.info("\uCC44\uD305\uD1A0\uAE00","\u{1F504} \uB85C\uADF8\uC778 \uD655\uC778 \uC644\uB8CC - \uCC44\uD305 \uC7AC\uCD08\uAE30\uD654"),this.initialize()):(this.isLoggedIn=!1,this.needsLogin=!0,this.debugLogger.warn("\uCC44\uD305\uD1A0\uAE00","\u26A0\uFE0F \uB85C\uADF8\uC778 \uD544\uC694 - \uB85C\uADF8\uC778 \uC548\uB0B4 \uD45C\uC2DC")),this.scrollToBottom()}}goToLogin(){this.router.navigate(["/store/login"],{queryParams:{returnUrl:this.router.url}})}sendMessage(){return A(this,null,function*(){if(!this.newMessage.trim()||!this.currentRoom||!this.currentClient){this.debugLogger.warn("\uBA54\uC2DC\uC9C0\uC804\uC1A1","\u26A0\uFE0F \uBA54\uC2DC\uC9C0 \uB0B4\uC6A9 \uB610\uB294 \uCC44\uD305\uBC29 \uC815\uBCF4 \uC5C6\uC74C");return}if(this.isLoading){this.debugLogger.warn("\uBA54\uC2DC\uC9C0\uC804\uC1A1","\u26A0\uFE0F \uC774\uBBF8 \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC911...");return}this.isLoading=!0;let t=this.newMessage.trim();this.debugLogger.info("\uBA54\uC2DC\uC9C0\uC804\uC1A1",`\u{1F4E4} \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC2DC\uC791: "${t.substring(0,30)}..."`),this.newMessage="",this.showQuickReplies=!1;let e={id:"temp-"+Date.now(),roomId:this.currentRoom.id,senderId:this.currentClient.id,senderType:"client",content:t,createdAt:new Date};this.messages.push(e),this.scrollToBottom(),this.debugLogger.info("\uBA54\uC2DC\uC9C0\uC804\uC1A1","\u{1F4AC} UI\uC5D0 \uC784\uC2DC \uBA54\uC2DC\uC9C0 \uCD94\uAC00 \uC644\uB8CC");try{if(this.currentRoom.status==="bot_active"){this.debugLogger.info("\uBA54\uC2DC\uC9C0\uC804\uC1A1","\u{1F916} \uCC57\uBD07 \uBAA8\uB4DC - \uC790\uB3D9 \uC751\uB2F5 \uC0DD\uC131 \uC911");let n=yield this.chatBotService.processMessage(t);this.debugLogger.info("\uBA54\uC2DC\uC9C0\uC804\uC1A1","\u{1F50C} WebSocket\uC73C\uB85C \uBA54\uC2DC\uC9C0 \uC804\uC1A1 (createChat)"),this.socketService.emitEvent("createChat",{dto:{roomId:this.currentRoom.id,senderId:this.currentClient.id,senderType:"client",content:t},localId:e.id}),this.debugLogger.success("\uBA54\uC2DC\uC9C0\uC804\uC1A1",`\u2705 \uCC57\uBD07 \uC751\uB2F5 \uC218\uC2E0: "${n.message.substring(0,30)}..."`),setTimeout(()=>{let o={id:"bot-"+Date.now(),roomId:this.currentRoom.id,senderType:"bot",content:n.message,createdAt:new Date};this.messages.push(o),this.scrollToBottom(),n.quickReplies&&n.quickReplies.length>0&&(this.quickReplies=n.quickReplies,this.showQuickReplies=!0,this.debugLogger.info("\uBA54\uC2DC\uC9C0\uC804\uC1A1",`\u{1F4A1} \uBE60\uB978 \uB2F5\uC7A5 \uD45C\uC2DC: ${n.quickReplies.length}\uAC1C`))},500)}else{this.debugLogger.info("\uBA54\uC2DC\uC9C0\uC804\uC1A1","\u{1F464} \uC0C1\uB2F4\uC6D0 \uBAA8\uB4DC - \uC2E4\uC2DC\uAC04 \uC804\uC1A1");try{let n=yield this.apiService.sendMessage({roomId:this.currentRoom.id,senderId:this.currentClient.id,senderType:"client",content:t}).toPromise();if(this.debugLogger.success("\uBA54\uC2DC\uC9C0\uC804\uC1A1","\u2705 \uBA54\uC2DC\uC9C0 DB \uC800\uC7A5 \uC644\uB8CC"),n){let o=this.messages.findIndex(a=>a.id===e.id);o!==-1&&(this.messages[o]=n)}}catch(n){this.debugLogger.warn("\uBA54\uC2DC\uC9C0\uC804\uC1A1",`\u26A0\uFE0F API \uC800\uC7A5 \uC2E4\uD328 (Socket\uC73C\uB85C\uB9CC \uC804\uC1A1): ${n}`)}this.socketService.emitEvent("createChat",{dto:{roomId:this.currentRoom.id,senderId:this.currentClient.id,senderType:"client",content:t},localId:e.id}),this.debugLogger.success("\uBA54\uC2DC\uC9C0\uC804\uC1A1","\u2705 \uC0C1\uB2F4\uC6D0\uC5D0\uAC8C \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC644\uB8CC (createChat)")}}catch(n){this.debugLogger.error("\uBA54\uC2DC\uC9C0\uC804\uC1A1",`\u274C \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC2E4\uD328: ${n}`),this.errorMessage="\uBA54\uC2DC\uC9C0 \uC804\uC1A1\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."}finally{this.isLoading=!1}})}selectQuickReply(t){this.newMessage=t,this.sendMessage()}requestSupport(){return A(this,null,function*(){if(!this.currentRoom||!this.currentClient){this.debugLogger.warn("\uC0C1\uB2F4\uC6D0\uC694\uCCAD","\u26A0\uFE0F \uCC44\uD305\uBC29 \uB610\uB294 \uD074\uB77C\uC774\uC5B8\uD2B8 \uC815\uBCF4 \uC5C6\uC74C");return}this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uC694\uCCAD","\u{1F64B} \uC0C1\uB2F4\uC6D0 \uC5F0\uACB0 \uC694\uCCAD \uC2DC\uC791");let t=this.currentRoom.id.toString().startsWith("temp-room");t&&this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uC694\uCCAD","\u{1F4DD} \uC784\uC2DC \uCC44\uD305\uBC29 - WebSocket\uC73C\uB85C \uC9C1\uC811 \uC5F0\uACB0");try{if(this.isLoading=!0,t)this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uC694\uCCAD","\u23ED\uFE0F \uC784\uC2DC \uCC44\uD305\uBC29 - REST API \uC2A4\uD0B5");else{this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uC694\uCCAD","\u{1F4E1} \uC11C\uBC84\uC5D0 \uC0C1\uB2F4\uC6D0 \uC804\uD658 \uC694\uCCAD (REST API)");try{yield this.apiService.transferToAgent(this.currentRoom.id).toPromise(),this.debugLogger.success("\uC0C1\uB2F4\uC6D0\uC694\uCCAD","\u2705 REST API \uD638\uCD9C \uC131\uACF5")}catch{this.debugLogger.warn("\uC0C1\uB2F4\uC6D0\uC694\uCCAD","\u26A0\uFE0F REST API \uC2E4\uD328 - WebSocket\uC73C\uB85C \uACC4\uC18D \uC9C4\uD589")}}this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uC694\uCCAD","\u{1F50C} WebSocket requestSupport \uC774\uBCA4\uD2B8 \uC804\uC1A1"),this.socketService.requestSupport(this.currentRoom.id),this.currentRoom.status="waiting_agent",this.showQuickReplies=!1,this.debugLogger.info("\uC0C1\uB2F4\uC6D0\uC694\uCCAD","\u{1F4CA} \uCC44\uD305\uBC29 \uC0C1\uD0DC \uBCC0\uACBD: waiting_agent");let e={id:"system-"+Date.now(),roomId:this.currentRoom.id,senderType:"system",content:"\uC0C1\uB2F4\uC6D0 \uC5F0\uACB0\uC744 \uC694\uCCAD\uD588\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824\uC8FC\uC138\uC694.",createdAt:new Date};this.messages.push(e),this.scrollToBottom(),this.debugLogger.success("\uC0C1\uB2F4\uC6D0\uC694\uCCAD","\u2705 \uC0C1\uB2F4\uC6D0 \uC5F0\uACB0 \uC694\uCCAD \uC644\uB8CC")}catch(e){this.debugLogger.error("\uC0C1\uB2F4\uC6D0\uC694\uCCAD",`\u274C \uC0C1\uB2F4\uC6D0 \uC694\uCCAD \uC2E4\uD328: ${e}`),this.errorMessage="\uC0C1\uB2F4 \uC694\uCCAD\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."}finally{this.isLoading=!1}})}cancelSupportRequest(){if(!this.currentRoom)return;this.dialog.open(oe,{width:"360px",data:{title:"\uC0C1\uB2F4\uC6D0 \uC5F0\uACB0 \uCDE8\uC18C",message:`\uC0C1\uB2F4\uC6D0 \uC5F0\uACB0\uC744 \uCDE8\uC18C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?
\uCC57\uBD07 \uC0C1\uB2F4\uC73C\uB85C \uB3CC\uC544\uAC11\uB2C8\uB2E4.`,confirmText:"\uCDE8\uC18C\uD558\uAE30",cancelText:"\uACC4\uC18D \uB300\uAE30"}}).afterClosed().subscribe(e=>{if(e){this.currentRoom.status="bot_active",this.showQuickReplies=!0;let n={id:"system-"+Date.now(),roomId:this.currentRoom.id,senderType:"system",content:"\uC0C1\uB2F4\uC6D0 \uC5F0\uACB0\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uCC57\uBD07 \uC0C1\uB2F4\uC744 \uC9C4\uD589\uD569\uB2C8\uB2E4.",createdAt:new Date};this.messages.push(n),this.scrollToBottom(),this.socketService.emitEvent("cancelSupportRequest",{roomId:this.currentRoom.id})}})}onInputTyping(){this.currentRoom&&(this.isTyping||(this.isTyping=!0,this.socketService.emitEvent("userStartedTyping",{roomId:this.currentRoom.id})),this.typingTimeout&&clearTimeout(this.typingTimeout),this.typingTimeout=setTimeout(()=>{this.isTyping=!1,this.socketService.emitEvent("userStoppedTyping",{roomId:this.currentRoom.id})},1e3))}scrollToBottom(){setTimeout(()=>{this.messagesContainer&&(this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight)},100)}generateFingerprintData(){let t=window.navigator,e=window.screen;return{userAgent:t.userAgent,language:t.language,platform:t.platform,screen:`${e.width}x${e.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,canvas:this.generateCanvasFingerprint(),memory:t.deviceMemory||"unknown",cores:t.hardwareConcurrency||"unknown",cookieEnabled:t.cookieEnabled,doNotTrack:t.doNotTrack||"unspecified",timestamp:Date.now()}}generateCanvasFingerprint(){try{let t=document.createElement("canvas"),e=t.getContext("2d");return e?(t.width=200,t.height=50,e.textBaseline="top",e.font="14px Arial",e.fillText("Browser Fingerprint",10,10),t.toDataURL().substring(0,100)):"no-canvas"}catch{return"canvas-error"}}generateFingerprint(){let t={userAgent:navigator.userAgent,language:navigator.language,screenResolution:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,platform:navigator.platform};return btoa(JSON.stringify(t))}trackByMessageId(t,e){return e.id}closeError(){this.errorMessage=""}static \u0275fac=function(e){return new(e||i)(x(st),x(ct),x(lt),x(U),x(N),x($),x(Q),x(I),x(Ge))};static \u0275cmp=F({type:i,selectors:[["app-chat-widget"]],viewQuery:function(e,n){if(e&1&&H(Rt,5),e&2){let o;W(o=V())&&(n.messagesContainer=o.first)}},inputs:{organizationId:"organizationId"},outputs:{unreadCountChange:"unreadCountChange"},standalone:!1,decls:1,vars:1,consts:[["messagesContainer",""],["class","chat-window",4,"ngIf"],[1,"chat-window"],[1,"chat-header"],[1,"header-info"],[1,"store-icon"],[1,"header-text"],[1,"status"],[1,"status-dot"],[1,"header-actions"],["mat-icon-button","",1,"close-button",3,"click"],["class","login-required-container",4,"ngIf"],["class","error-banner",4,"ngIf"],["class","messages-container",4,"ngIf"],["class","quick-replies",4,"ngIf"],["class","chat-input-container",4,"ngIf"],[1,"login-required-container"],[1,"login-required-content"],[1,"login-icon"],[1,"login-benefit"],[1,"error-banner"],["mat-raised-button","","color","primary","class","login-button",3,"click",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"login-button",3,"click"],["mat-icon-button","",3,"click"],[1,"login-actions"],[1,"messages-container"],["class","message-wrapper",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["class","typing-indicator",4,"ngIf"],[1,"message-wrapper",3,"ngClass"],[1,"message-bubble"],["class","message-sender",4,"ngIf"],[1,"message-content"],[1,"message-time"],[1,"message-sender"],[4,"ngIf"],[1,"sender-name"],[1,"typing-indicator"],[1,"typing-bubble"],[1,"typing-text"],[1,"quick-replies"],["class","quick-reply-button",3,"click",4,"ngFor","ngForOf"],[1,"quick-reply-button",3,"click"],[1,"chat-input-container"],["class","waiting-agent-status",4,"ngIf"],["class","request-support-button",3,"disabled","click",4,"ngIf"],["class","input-wrapper",4,"ngIf"],[1,"waiting-agent-status"],[1,"waiting-content"],["diameter","24"],[1,"waiting-text"],["mat-stroked-button","","color","warn",1,"cancel-support-button",3,"click"],[1,"request-support-button",3,"click","disabled"],[1,"input-wrapper"],["type","text","placeholder","\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD558\uC138\uC694...",1,"chat-input",3,"ngModelChange","keyup.enter","input","ngModel","disabled"],[1,"send-button",3,"click","disabled"],["diameter","20",4,"ngIf"],["diameter","20"]],template:function(e,n){e&1&&M(0,tn,21,9,"div",1),e&2&&g("ngIf",n.isOpen)},dependencies:[Ae,Pe,Ee,Be,De,Ue,ne,Ye,et,ot,Re],styles:[".chat-window[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;width:380px;height:600px;background:#fff;border-radius:16px;box-shadow:0 8px 32px #0000001f;display:flex;flex-direction:column;z-index:1000;overflow:hidden;animation:_ngcontent-%COMP%_slideIn .3s ease}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.chat-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:16px;display:flex;justify-content:space-between;align-items:center}.chat-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.chat-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .store-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.chat-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600}.chat-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:12px;opacity:.9;display:flex;align-items:center;gap:6px}.chat-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#ffa726;animation:_ngcontent-%COMP%_blink 2s infinite}.chat-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .status.connected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#66bb6a;animation:none}.chat-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{color:#fff}@keyframes _ngcontent-%COMP%_blink{0%,50%,to{opacity:1}25%,75%{opacity:.4}}.error-banner[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;padding:12px 16px;display:flex;align-items:center;gap:12px;font-size:13px;border-bottom:1px solid #ffcdd2}.error-banner[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.error-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;line-height:1.4}.error-banner[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{background:#667eea!important;color:#fff!important;font-size:12px;padding:8px 16px;height:32px;line-height:16px;border-radius:16px;box-shadow:0 2px 8px #667eea4d;transition:all .2s}.error-banner[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:hover{background:#5568d3!important;box-shadow:0 4px 12px #667eea66;transform:translateY(-1px)}.error-banner[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.error-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#c62828}.login-required-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;background:#f8f9fa;padding:32px 24px}.login-required-container[_ngcontent-%COMP%]   .login-required-content[_ngcontent-%COMP%]{text-align:center;max-width:280px}.login-required-container[_ngcontent-%COMP%]   .login-required-content[_ngcontent-%COMP%]   .login-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#667eea;margin:0 auto 16px}.login-required-container[_ngcontent-%COMP%]   .login-required-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:20px;font-weight:600;color:#333}.login-required-container[_ngcontent-%COMP%]   .login-required-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#666;line-height:1.5}.login-required-container[_ngcontent-%COMP%]   .login-required-content[_ngcontent-%COMP%]   .login-benefit[_ngcontent-%COMP%]{margin-bottom:24px;font-size:13px;color:#999}.login-required-container[_ngcontent-%COMP%]   .login-required-content[_ngcontent-%COMP%]   .login-actions[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{width:100%;height:48px;font-size:15px;font-weight:500;border-radius:8px;box-shadow:0 2px 8px #667eea40}.login-required-container[_ngcontent-%COMP%]   .login-required-content[_ngcontent-%COMP%]   .login-actions[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.login-required-container[_ngcontent-%COMP%]   .login-required-content[_ngcontent-%COMP%]   .login-actions[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #667eea59}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px;background:#f5f5f5;display:flex;flex-direction:column;gap:12px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:3px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#999}.message-wrapper[_ngcontent-%COMP%]{display:flex;animation:_ngcontent-%COMP%_messageSlideIn .3s ease}.message-wrapper.message-client[_ngcontent-%COMP%]{justify-content:flex-end}.message-wrapper.message-client[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:18px 18px 4px}.message-wrapper.message-agent[_ngcontent-%COMP%], .message-wrapper.message-bot[_ngcontent-%COMP%]{justify-content:flex-start}.message-wrapper.message-agent[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%], .message-wrapper.message-bot[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:#fff;color:#333;border-radius:18px 18px 18px 4px;box-shadow:0 2px 4px #00000014}.message-wrapper.message-system[_ngcontent-%COMP%]{justify-content:center}.message-wrapper.message-system[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100;border-radius:12px;font-size:13px;text-align:center}@keyframes _ngcontent-%COMP%_messageSlideIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.message-bubble[_ngcontent-%COMP%]{max-width:75%;padding:10px 14px;word-wrap:break-word}.message-bubble[_ngcontent-%COMP%]   .message-sender[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-bottom:6px;font-size:12px;opacity:.8}.message-bubble[_ngcontent-%COMP%]   .message-sender[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.message-bubble[_ngcontent-%COMP%]   .message-sender[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{font-weight:600}.message-bubble[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{font-size:14px;line-height:1.4;white-space:pre-wrap}.message-bubble[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:11px;opacity:.7;margin-top:4px;text-align:right}.typing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.typing-indicator[_ngcontent-%COMP%]   .typing-bubble[_ngcontent-%COMP%]{background:#fff;padding:12px 16px;border-radius:18px;display:flex;gap:4px}.typing-indicator[_ngcontent-%COMP%]   .typing-bubble[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#999;animation:_ngcontent-%COMP%_typing 1.4s infinite}.typing-indicator[_ngcontent-%COMP%]   .typing-bubble[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.typing-indicator[_ngcontent-%COMP%]   .typing-bubble[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}.typing-indicator[_ngcontent-%COMP%]   .typing-text[_ngcontent-%COMP%]{font-size:12px;color:#666}@keyframes _ngcontent-%COMP%_typing{0%,60%,to{transform:translateY(0);opacity:.7}30%{transform:translateY(-10px);opacity:1}}.quick-replies[_ngcontent-%COMP%]{padding:12px 16px;background:#fff;border-top:1px solid #e0e0e0;display:flex;flex-wrap:wrap;gap:8px}.quick-replies[_ngcontent-%COMP%]   .quick-reply-button[_ngcontent-%COMP%]{padding:8px 16px;background:#f5f5f5;border:1px solid #e0e0e0;border-radius:20px;font-size:13px;color:#667eea;cursor:pointer;transition:all .2s}.quick-replies[_ngcontent-%COMP%]   .quick-reply-button[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff;border-color:#667eea}.chat-input-container[_ngcontent-%COMP%]{background:#fff;border-top:1px solid #e0e0e0;padding:12px 16px;display:flex;flex-direction:column;gap:8px}.chat-input-container[_ngcontent-%COMP%]   .request-support-button[_ngcontent-%COMP%]{width:100%;padding:10px;background:linear-gradient(135deg,#ff9800,#f57c00);color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .2s}.chat-input-container[_ngcontent-%COMP%]   .request-support-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.chat-input-container[_ngcontent-%COMP%]   .request-support-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.chat-input-container[_ngcontent-%COMP%]   .request-support-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.chat-input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.chat-input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{flex:1;padding:10px 14px;border:1px solid #e0e0e0;border-radius:24px;font-size:14px;outline:none;transition:border-color .2s}.chat-input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]:focus{border-color:#667eea}.chat-input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]::placeholder{color:#999}.chat-input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.chat-input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s}.chat-input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.1)}.chat-input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.chat-input-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}@media (max-width: 768px){.chat-window[_ngcontent-%COMP%]{width:100%;height:100%;bottom:0;right:0;border-radius:0}}"]})},oe=class i{constructor(t){this.data=t}static \u0275fac=function(e){return new(e||i)(x(ze))};static \u0275cmp=F({type:i,selectors:[["app-confirm-dialog"]],standalone:!1,decls:11,vars:6,consts:[[1,"confirm-dialog"],["mat-dialog-title",""],[2,"white-space","pre-line"],["align","end"],["mat-button","",3,"mat-dialog-close"],["mat-raised-button","","color","warn",3,"mat-dialog-close"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h2",1),l(2),s(),r(3,"mat-dialog-content")(4,"p",2),l(5),s()(),r(6,"mat-dialog-actions",3)(7,"button",4),l(8),s(),r(9,"button",5),l(10),s()()()),e&2&&(c(2),L(n.data.title),c(3),L(n.data.message),c(2),g("mat-dialog-close",!1),c(),E(" ",n.data.cancelText||"\uCDE8\uC18C"," "),c(),g("mat-dialog-close",!0),c(),E(" ",n.data.confirmText||"\uD655\uC778"," "))},dependencies:[je,qe,Ke,He,ne],styles:[".confirm-dialog[_ngcontent-%COMP%]{min-width:300px}mat-dialog-content[_ngcontent-%COMP%]{padding:20px 0}mat-dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;line-height:1.6;color:#000000de}"]})};export{Pt as a,dt as b,In as c,U as d,$ as e,N as f,Q as g,_t as h};
